var Xx=Object.defineProperty;var Yx=(be,I,J)=>I in be?Xx(be,I,{enumerable:!0,configurable:!0,writable:!0,value:J}):be[I]=J;var $d=(be,I,J)=>(Yx(be,typeof I!="symbol"?I+"":I,J),J);(function(){const I=document.createElement("link").relList;if(I&&I.supports&&I.supports("modulepreload"))return;for(const Ve of document.querySelectorAll('link[rel="modulepreload"]'))ve(Ve);new MutationObserver(Ve=>{for(const F of Ve)if(F.type==="childList")for(const L of F.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&ve(L)}).observe(document,{childList:!0,subtree:!0});function J(Ve){const F={};return Ve.integrity&&(F.integrity=Ve.integrity),Ve.referrerPolicy&&(F.referrerPolicy=Ve.referrerPolicy),Ve.crossOrigin==="use-credentials"?F.credentials="include":Ve.crossOrigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function ve(Ve){if(Ve.ep)return;Ve.ep=!0;const F=J(Ve);fetch(Ve.href,F)}})();function Ro(){}function v1(be){return be()}function Fg(){return Object.create(null)}function Wu(be){be.forEach(v1)}function y1(be){return typeof be=="function"}function wc(be,I){return be!=be?I==I:be!==I||be&&typeof be=="object"||typeof be=="function"}function Zx(be){return Object.keys(be).length===0}function Lp(be){return be??""}function Xr(be,I){be.appendChild(I)}function gi(be,I,J){be.insertBefore(I,J||null)}function fi(be){be.parentNode&&be.parentNode.removeChild(be)}function G0(be,I){for(let J=0;J<be.length;J+=1)be[J]&&be[J].d(I)}function Wr(be){return document.createElement(be)}function Vu(be){return document.createTextNode(be)}function ra(){return Vu(" ")}function _s(be,I,J,ve){return be.addEventListener(I,J,ve),()=>be.removeEventListener(I,J,ve)}function bi(be,I,J){J==null?be.removeAttribute(I):be.getAttribute(I)!==J&&be.setAttribute(I,J)}function Oh(be){return be===""?null:+be}function Kx(be){return Array.from(be.childNodes)}function sd(be,I){I=""+I,be.data!==I&&(be.data=I)}function ys(be,I){be.value=I??""}function Af(be,I,J){for(let ve=0;ve<be.options.length;ve+=1){const Ve=be.options[ve];if(Ve.__value===I){Ve.selected=!0;return}}(!J||I!==void 0)&&(be.selectedIndex=-1)}function W0(be){const I=be.querySelector(":checked");return I&&I.__value}function Jx(be,I,{bubbles:J=!1,cancelable:ve=!1}={}){return new CustomEvent(be,{detail:I,bubbles:J,cancelable:ve})}let Dh;function Lh(be){Dh=be}function x1(){if(!Dh)throw new Error("Function called outside component initialization");return Dh}function $x(be){x1().$$.on_mount.push(be)}function _1(){const be=x1();return(I,J,{cancelable:ve=!1}={})=>{const Ve=be.$$.callbacks[I];if(Ve){const F=Jx(I,J,{cancelable:ve});return Ve.slice().forEach(L=>{L.call(be,F)}),!F.defaultPrevented}return!0}}function Qx(be,I){const J=be.$$.callbacks[I.type];J&&J.slice().forEach(ve=>ve.call(this,I))}const yf=[],mo=[];let wf=[];const I0=[],e_=Promise.resolve();let O0=!1;function t_(){O0||(O0=!0,e_.then(b1))}function Sf(be){wf.push(be)}function jl(be){I0.push(be)}const Qd=new Set;let Kc=0;function b1(){if(Kc!==0)return;const be=Dh;do{try{for(;Kc<yf.length;){const I=yf[Kc];Kc++,Lh(I),n_(I.$$)}}catch(I){throw yf.length=0,Kc=0,I}for(Lh(null),yf.length=0,Kc=0;mo.length;)mo.pop()();for(let I=0;I<wf.length;I+=1){const J=wf[I];Qd.has(J)||(Qd.add(J),J())}wf.length=0}while(yf.length);for(;I0.length;)I0.pop()();O0=!1,Qd.clear(),Lh(be)}function n_(be){if(be.fragment!==null){be.update(),Wu(be.before_update);const I=be.dirty;be.dirty=[-1],be.fragment&&be.fragment.p(be.ctx,I),be.after_update.forEach(Sf)}}function r_(be){const I=[],J=[];wf.forEach(ve=>be.indexOf(ve)===-1?I.push(ve):J.push(ve)),J.forEach(ve=>ve()),wf=I}const $p=new Set;let i_;function uc(be,I){be&&be.i&&($p.delete(be),be.i(I))}function Jc(be,I,J,ve){if(be&&be.o){if($p.has(be))return;$p.add(be),i_.c.push(()=>{$p.delete(be),ve&&(J&&be.d(1),ve())}),be.o(I)}else ve&&ve()}function Ef(be){return(be==null?void 0:be.length)!==void 0?be:Array.from(be)}function Vl(be,I,J){const ve=be.$$.props[I];ve!==void 0&&(be.$$.bound[ve]=J,J(be.$$.ctx[ve]))}function $c(be){be&&be.c()}function cc(be,I,J){const{fragment:ve,after_update:Ve}=be.$$;ve&&ve.m(I,J),Sf(()=>{const F=be.$$.on_mount.map(v1).filter(y1);be.$$.on_destroy?be.$$.on_destroy.push(...F):Wu(F),be.$$.on_mount=[]}),Ve.forEach(Sf)}function fc(be,I){const J=be.$$;J.fragment!==null&&(r_(J.after_update),Wu(J.on_destroy),J.fragment&&J.fragment.d(I),J.on_destroy=J.fragment=null,J.ctx=[])}function a_(be,I){be.$$.dirty[0]===-1&&(yf.push(be),t_(),be.$$.dirty.fill(0)),be.$$.dirty[I/31|0]|=1<<I%31}function Tc(be,I,J,ve,Ve,F,L,e=[-1]){const T=Dh;Lh(be);const b=be.$$={fragment:null,ctx:[],props:F,update:Ro,not_equal:Ve,bound:Fg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(I.context||(T?T.$$.context:[])),callbacks:Fg(),dirty:e,skip_bound:!1,root:I.target||T.$$.root};L&&L(b.root);let a=!1;if(b.ctx=J?J(be,I.props||{},(_,g,...h)=>{const o=h.length?h[0]:g;return b.ctx&&Ve(b.ctx[_],b.ctx[_]=o)&&(!b.skip_bound&&b.bound[_]&&b.bound[_](o),a&&a_(be,_)),g}):[],b.update(),a=!0,Wu(b.before_update),b.fragment=ve?ve(b.ctx):!1,I.target){if(I.hydrate){const _=Kx(I.target);b.fragment&&b.fragment.l(_),_.forEach(fi)}else b.fragment&&b.fragment.c();I.intro&&uc(be.$$.fragment),cc(be,I.target,I.anchor),b1()}Lh(T)}class Mc{constructor(){$d(this,"$$");$d(this,"$$set")}$destroy(){fc(this,1),this.$destroy=Ro}$on(I,J){if(!y1(J))return Ro;const ve=this.$$.callbacks[I]||(this.$$.callbacks[I]=[]);return ve.push(J),()=>{const Ve=ve.indexOf(J);Ve!==-1&&ve.splice(Ve,1)}}$set(I){this.$$set&&!Zx(I)&&(this.$$.skip_bound=!0,this.$$set(I),this.$$.skip_bound=!1)}}const o_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(o_);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q0="155",Qc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ef={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s_=0,Ng=1,l_=2,w1=1,u_=2,pu=3,Hu=0,bs=1,Gl=2,Nu=0,Tf=1,Bg=2,Ug=3,jg=4,c_=5,xf=100,f_=101,h_=102,Vg=103,Hg=104,p_=200,d_=201,m_=202,g_=203,T1=204,M1=205,v_=206,y_=207,x_=208,__=209,b_=210,w_=0,T_=1,M_=2,D0=3,A_=4,S_=5,E_=6,k_=7,X0=0,L_=1,C_=2,Bu=0,P_=1,R_=2,I_=3,O_=4,D_=5,A1=300,kf=301,Lf=302,z0=303,F0=304,ld=306,N0=1e3,El=1001,B0=1002,$o=1003,Gg=1004,e0=1005,rl=1006,z_=1007,zh=1008,Uu=1009,F_=1010,N_=1011,Y0=1012,S1=1013,zu=1014,Fu=1015,Fh=1016,E1=1017,k1=1018,dc=1020,B_=1021,kl=1023,U_=1024,j_=1025,mc=1026,Cf=1027,V_=1028,L1=1029,H_=1030,C1=1031,P1=1033,t0=33776,n0=33777,r0=33778,i0=33779,Wg=35840,qg=35841,Xg=35842,Yg=35843,G_=36196,Zg=37492,Kg=37496,Jg=37808,$g=37809,Qg=37810,ev=37811,tv=37812,nv=37813,rv=37814,iv=37815,av=37816,ov=37817,sv=37818,lv=37819,uv=37820,cv=37821,a0=36492,W_=36283,fv=36284,hv=36285,pv=36286,R1=3e3,gc=3001,q_=3200,X_=3201,I1=0,Y_=1,vc="",ei="srgb",ql="srgb-linear",O1="display-p3",o0=7680,Z_=519,K_=512,J_=513,$_=514,Q_=515,e2=516,t2=517,n2=518,r2=519,dv=35044,mv="300 es",U0=1035,mu=2e3,nd=2001;class Ac{addEventListener(I,J){this._listeners===void 0&&(this._listeners={});const ve=this._listeners;ve[I]===void 0&&(ve[I]=[]),ve[I].indexOf(J)===-1&&ve[I].push(J)}hasEventListener(I,J){if(this._listeners===void 0)return!1;const ve=this._listeners;return ve[I]!==void 0&&ve[I].indexOf(J)!==-1}removeEventListener(I,J){if(this._listeners===void 0)return;const Ve=this._listeners[I];if(Ve!==void 0){const F=Ve.indexOf(J);F!==-1&&Ve.splice(F,1)}}dispatchEvent(I){if(this._listeners===void 0)return;const ve=this._listeners[I.type];if(ve!==void 0){I.target=this;const Ve=ve.slice(0);for(let F=0,L=Ve.length;F<L;F++)Ve[F].call(this,I);I.target=null}}}const ko=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gv=1234567;const Ch=Math.PI/180,Pf=180/Math.PI;function Uf(){const be=Math.random()*4294967295|0,I=Math.random()*4294967295|0,J=Math.random()*4294967295|0,ve=Math.random()*4294967295|0;return(ko[be&255]+ko[be>>8&255]+ko[be>>16&255]+ko[be>>24&255]+"-"+ko[I&255]+ko[I>>8&255]+"-"+ko[I>>16&15|64]+ko[I>>24&255]+"-"+ko[J&63|128]+ko[J>>8&255]+"-"+ko[J>>16&255]+ko[J>>24&255]+ko[ve&255]+ko[ve>>8&255]+ko[ve>>16&255]+ko[ve>>24&255]).toLowerCase()}function Co(be,I,J){return Math.max(I,Math.min(J,be))}function Z0(be,I){return(be%I+I)%I}function i2(be,I,J,ve,Ve){return ve+(be-I)*(Ve-ve)/(J-I)}function a2(be,I,J){return be!==I?(J-be)/(I-be):0}function Ph(be,I,J){return(1-J)*be+J*I}function o2(be,I,J,ve){return Ph(be,I,1-Math.exp(-J*ve))}function s2(be,I=1){return I-Math.abs(Z0(be,I*2)-I)}function l2(be,I,J){return be<=I?0:be>=J?1:(be=(be-I)/(J-I),be*be*(3-2*be))}function u2(be,I,J){return be<=I?0:be>=J?1:(be=(be-I)/(J-I),be*be*be*(be*(be*6-15)+10))}function c2(be,I){return be+Math.floor(Math.random()*(I-be+1))}function f2(be,I){return be+Math.random()*(I-be)}function h2(be){return be*(.5-Math.random())}function p2(be){be!==void 0&&(gv=be);let I=gv+=1831565813;return I=Math.imul(I^I>>>15,I|1),I^=I+Math.imul(I^I>>>7,I|61),((I^I>>>14)>>>0)/4294967296}function d2(be){return be*Ch}function m2(be){return be*Pf}function j0(be){return(be&be-1)===0&&be!==0}function g2(be){return Math.pow(2,Math.ceil(Math.log(be)/Math.LN2))}function rd(be){return Math.pow(2,Math.floor(Math.log(be)/Math.LN2))}function v2(be,I,J,ve,Ve){const F=Math.cos,L=Math.sin,e=F(J/2),T=L(J/2),b=F((I+ve)/2),a=L((I+ve)/2),_=F((I-ve)/2),g=L((I-ve)/2),h=F((ve-I)/2),o=L((ve-I)/2);switch(Ve){case"XYX":be.set(e*a,T*_,T*g,e*b);break;case"YZY":be.set(T*g,e*a,T*_,e*b);break;case"ZXZ":be.set(T*_,T*g,e*a,e*b);break;case"XZX":be.set(e*a,T*o,T*h,e*b);break;case"YXY":be.set(T*h,e*a,T*o,e*b);break;case"ZYZ":be.set(T*o,T*h,e*a,e*b);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Ve)}}function _f(be,I){switch(I.constructor){case Float32Array:return be;case Uint32Array:return be/4294967295;case Uint16Array:return be/65535;case Uint8Array:return be/255;case Int32Array:return Math.max(be/2147483647,-1);case Int16Array:return Math.max(be/32767,-1);case Int8Array:return Math.max(be/127,-1);default:throw new Error("Invalid component type.")}}function Ko(be,I){switch(I.constructor){case Float32Array:return be;case Uint32Array:return Math.round(be*4294967295);case Uint16Array:return Math.round(be*65535);case Uint8Array:return Math.round(be*255);case Int32Array:return Math.round(be*2147483647);case Int16Array:return Math.round(be*32767);case Int8Array:return Math.round(be*127);default:throw new Error("Invalid component type.")}}const y2={DEG2RAD:Ch,RAD2DEG:Pf,generateUUID:Uf,clamp:Co,euclideanModulo:Z0,mapLinear:i2,inverseLerp:a2,lerp:Ph,damp:o2,pingpong:s2,smoothstep:l2,smootherstep:u2,randInt:c2,randFloat:f2,randFloatSpread:h2,seededRandom:p2,degToRad:d2,radToDeg:m2,isPowerOfTwo:j0,ceilPowerOfTwo:g2,floorPowerOfTwo:rd,setQuaternionFromProperEuler:v2,normalize:Ko,denormalize:_f};class Kr{constructor(I=0,J=0){Kr.prototype.isVector2=!0,this.x=I,this.y=J}get width(){return this.x}set width(I){this.x=I}get height(){return this.y}set height(I){this.y=I}set(I,J){return this.x=I,this.y=J,this}setScalar(I){return this.x=I,this.y=I,this}setX(I){return this.x=I,this}setY(I){return this.y=I,this}setComponent(I,J){switch(I){case 0:this.x=J;break;case 1:this.y=J;break;default:throw new Error("index is out of range: "+I)}return this}getComponent(I){switch(I){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+I)}}clone(){return new this.constructor(this.x,this.y)}copy(I){return this.x=I.x,this.y=I.y,this}add(I){return this.x+=I.x,this.y+=I.y,this}addScalar(I){return this.x+=I,this.y+=I,this}addVectors(I,J){return this.x=I.x+J.x,this.y=I.y+J.y,this}addScaledVector(I,J){return this.x+=I.x*J,this.y+=I.y*J,this}sub(I){return this.x-=I.x,this.y-=I.y,this}subScalar(I){return this.x-=I,this.y-=I,this}subVectors(I,J){return this.x=I.x-J.x,this.y=I.y-J.y,this}multiply(I){return this.x*=I.x,this.y*=I.y,this}multiplyScalar(I){return this.x*=I,this.y*=I,this}divide(I){return this.x/=I.x,this.y/=I.y,this}divideScalar(I){return this.multiplyScalar(1/I)}applyMatrix3(I){const J=this.x,ve=this.y,Ve=I.elements;return this.x=Ve[0]*J+Ve[3]*ve+Ve[6],this.y=Ve[1]*J+Ve[4]*ve+Ve[7],this}min(I){return this.x=Math.min(this.x,I.x),this.y=Math.min(this.y,I.y),this}max(I){return this.x=Math.max(this.x,I.x),this.y=Math.max(this.y,I.y),this}clamp(I,J){return this.x=Math.max(I.x,Math.min(J.x,this.x)),this.y=Math.max(I.y,Math.min(J.y,this.y)),this}clampScalar(I,J){return this.x=Math.max(I,Math.min(J,this.x)),this.y=Math.max(I,Math.min(J,this.y)),this}clampLength(I,J){const ve=this.length();return this.divideScalar(ve||1).multiplyScalar(Math.max(I,Math.min(J,ve)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(I){return this.x*I.x+this.y*I.y}cross(I){return this.x*I.y-this.y*I.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(I){const J=Math.sqrt(this.lengthSq()*I.lengthSq());if(J===0)return Math.PI/2;const ve=this.dot(I)/J;return Math.acos(Co(ve,-1,1))}distanceTo(I){return Math.sqrt(this.distanceToSquared(I))}distanceToSquared(I){const J=this.x-I.x,ve=this.y-I.y;return J*J+ve*ve}manhattanDistanceTo(I){return Math.abs(this.x-I.x)+Math.abs(this.y-I.y)}setLength(I){return this.normalize().multiplyScalar(I)}lerp(I,J){return this.x+=(I.x-this.x)*J,this.y+=(I.y-this.y)*J,this}lerpVectors(I,J,ve){return this.x=I.x+(J.x-I.x)*ve,this.y=I.y+(J.y-I.y)*ve,this}equals(I){return I.x===this.x&&I.y===this.y}fromArray(I,J=0){return this.x=I[J],this.y=I[J+1],this}toArray(I=[],J=0){return I[J]=this.x,I[J+1]=this.y,I}fromBufferAttribute(I,J){return this.x=I.getX(J),this.y=I.getY(J),this}rotateAround(I,J){const ve=Math.cos(J),Ve=Math.sin(J),F=this.x-I.x,L=this.y-I.y;return this.x=F*ve-L*Ve+I.x,this.y=F*Ve+L*ve+I.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class li{constructor(I,J,ve,Ve,F,L,e,T,b){li.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],I!==void 0&&this.set(I,J,ve,Ve,F,L,e,T,b)}set(I,J,ve,Ve,F,L,e,T,b){const a=this.elements;return a[0]=I,a[1]=Ve,a[2]=e,a[3]=J,a[4]=F,a[5]=T,a[6]=ve,a[7]=L,a[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(I){const J=this.elements,ve=I.elements;return J[0]=ve[0],J[1]=ve[1],J[2]=ve[2],J[3]=ve[3],J[4]=ve[4],J[5]=ve[5],J[6]=ve[6],J[7]=ve[7],J[8]=ve[8],this}extractBasis(I,J,ve){return I.setFromMatrix3Column(this,0),J.setFromMatrix3Column(this,1),ve.setFromMatrix3Column(this,2),this}setFromMatrix4(I){const J=I.elements;return this.set(J[0],J[4],J[8],J[1],J[5],J[9],J[2],J[6],J[10]),this}multiply(I){return this.multiplyMatrices(this,I)}premultiply(I){return this.multiplyMatrices(I,this)}multiplyMatrices(I,J){const ve=I.elements,Ve=J.elements,F=this.elements,L=ve[0],e=ve[3],T=ve[6],b=ve[1],a=ve[4],_=ve[7],g=ve[2],h=ve[5],o=ve[8],t=Ve[0],i=Ve[3],n=Ve[6],r=Ve[1],s=Ve[4],l=Ve[7],u=Ve[2],d=Ve[5],c=Ve[8];return F[0]=L*t+e*r+T*u,F[3]=L*i+e*s+T*d,F[6]=L*n+e*l+T*c,F[1]=b*t+a*r+_*u,F[4]=b*i+a*s+_*d,F[7]=b*n+a*l+_*c,F[2]=g*t+h*r+o*u,F[5]=g*i+h*s+o*d,F[8]=g*n+h*l+o*c,this}multiplyScalar(I){const J=this.elements;return J[0]*=I,J[3]*=I,J[6]*=I,J[1]*=I,J[4]*=I,J[7]*=I,J[2]*=I,J[5]*=I,J[8]*=I,this}determinant(){const I=this.elements,J=I[0],ve=I[1],Ve=I[2],F=I[3],L=I[4],e=I[5],T=I[6],b=I[7],a=I[8];return J*L*a-J*e*b-ve*F*a+ve*e*T+Ve*F*b-Ve*L*T}invert(){const I=this.elements,J=I[0],ve=I[1],Ve=I[2],F=I[3],L=I[4],e=I[5],T=I[6],b=I[7],a=I[8],_=a*L-e*b,g=e*T-a*F,h=b*F-L*T,o=J*_+ve*g+Ve*h;if(o===0)return this.set(0,0,0,0,0,0,0,0,0);const t=1/o;return I[0]=_*t,I[1]=(Ve*b-a*ve)*t,I[2]=(e*ve-Ve*L)*t,I[3]=g*t,I[4]=(a*J-Ve*T)*t,I[5]=(Ve*F-e*J)*t,I[6]=h*t,I[7]=(ve*T-b*J)*t,I[8]=(L*J-ve*F)*t,this}transpose(){let I;const J=this.elements;return I=J[1],J[1]=J[3],J[3]=I,I=J[2],J[2]=J[6],J[6]=I,I=J[5],J[5]=J[7],J[7]=I,this}getNormalMatrix(I){return this.setFromMatrix4(I).invert().transpose()}transposeIntoArray(I){const J=this.elements;return I[0]=J[0],I[1]=J[3],I[2]=J[6],I[3]=J[1],I[4]=J[4],I[5]=J[7],I[6]=J[2],I[7]=J[5],I[8]=J[8],this}setUvTransform(I,J,ve,Ve,F,L,e){const T=Math.cos(F),b=Math.sin(F);return this.set(ve*T,ve*b,-ve*(T*L+b*e)+L+I,-Ve*b,Ve*T,-Ve*(-b*L+T*e)+e+J,0,0,1),this}scale(I,J){return this.premultiply(s0.makeScale(I,J)),this}rotate(I){return this.premultiply(s0.makeRotation(-I)),this}translate(I,J){return this.premultiply(s0.makeTranslation(I,J)),this}makeTranslation(I,J){return I.isVector2?this.set(1,0,I.x,0,1,I.y,0,0,1):this.set(1,0,I,0,1,J,0,0,1),this}makeRotation(I){const J=Math.cos(I),ve=Math.sin(I);return this.set(J,-ve,0,ve,J,0,0,0,1),this}makeScale(I,J){return this.set(I,0,0,0,J,0,0,0,1),this}equals(I){const J=this.elements,ve=I.elements;for(let Ve=0;Ve<9;Ve++)if(J[Ve]!==ve[Ve])return!1;return!0}fromArray(I,J=0){for(let ve=0;ve<9;ve++)this.elements[ve]=I[ve+J];return this}toArray(I=[],J=0){const ve=this.elements;return I[J]=ve[0],I[J+1]=ve[1],I[J+2]=ve[2],I[J+3]=ve[3],I[J+4]=ve[4],I[J+5]=ve[5],I[J+6]=ve[6],I[J+7]=ve[7],I[J+8]=ve[8],I}clone(){return new this.constructor().fromArray(this.elements)}}const s0=new li;function D1(be){for(let I=be.length-1;I>=0;--I)if(be[I]>=65535)return!0;return!1}function id(be){return document.createElementNS("http://www.w3.org/1999/xhtml",be)}const vv={};function Rh(be){be in vv||(vv[be]=!0,console.warn(be))}function Mf(be){return be<.04045?be*.0773993808:Math.pow(be*.9478672986+.0521327014,2.4)}function l0(be){return be<.0031308?be*12.92:1.055*Math.pow(be,.41666)-.055}const x2=new li().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),_2=new li().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function b2(be){return be.convertSRGBToLinear().applyMatrix3(_2)}function w2(be){return be.applyMatrix3(x2).convertLinearToSRGB()}const T2={[ql]:be=>be,[ei]:be=>be.convertSRGBToLinear(),[O1]:b2},M2={[ql]:be=>be,[ei]:be=>be.convertLinearToSRGB(),[O1]:w2},wl={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(be){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!be},get workingColorSpace(){return ql},set workingColorSpace(be){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(be,I,J){if(this.enabled===!1||I===J||!I||!J)return be;const ve=T2[I],Ve=M2[J];if(ve===void 0||Ve===void 0)throw new Error(`Unsupported color space conversion, "${I}" to "${J}".`);return Ve(ve(be))},fromWorkingColorSpace:function(be,I){return this.convert(be,this.workingColorSpace,I)},toWorkingColorSpace:function(be,I){return this.convert(be,I,this.workingColorSpace)}};let tf;class z1{static getDataURL(I){if(/^data:/i.test(I.src)||typeof HTMLCanvasElement>"u")return I.src;let J;if(I instanceof HTMLCanvasElement)J=I;else{tf===void 0&&(tf=id("canvas")),tf.width=I.width,tf.height=I.height;const ve=tf.getContext("2d");I instanceof ImageData?ve.putImageData(I,0,0):ve.drawImage(I,0,0,I.width,I.height),J=tf}return J.width>2048||J.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",I),J.toDataURL("image/jpeg",.6)):J.toDataURL("image/png")}static sRGBToLinear(I){if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap){const J=id("canvas");J.width=I.width,J.height=I.height;const ve=J.getContext("2d");ve.drawImage(I,0,0,I.width,I.height);const Ve=ve.getImageData(0,0,I.width,I.height),F=Ve.data;for(let L=0;L<F.length;L++)F[L]=Mf(F[L]/255)*255;return ve.putImageData(Ve,0,0),J}else if(I.data){const J=I.data.slice(0);for(let ve=0;ve<J.length;ve++)J instanceof Uint8Array||J instanceof Uint8ClampedArray?J[ve]=Math.floor(Mf(J[ve]/255)*255):J[ve]=Mf(J[ve]);return{data:J,width:I.width,height:I.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),I}}let A2=0;class F1{constructor(I=null){this.isSource=!0,Object.defineProperty(this,"id",{value:A2++}),this.uuid=Uf(),this.data=I,this.version=0}set needsUpdate(I){I===!0&&this.version++}toJSON(I){const J=I===void 0||typeof I=="string";if(!J&&I.images[this.uuid]!==void 0)return I.images[this.uuid];const ve={uuid:this.uuid,url:""},Ve=this.data;if(Ve!==null){let F;if(Array.isArray(Ve)){F=[];for(let L=0,e=Ve.length;L<e;L++)Ve[L].isDataTexture?F.push(u0(Ve[L].image)):F.push(u0(Ve[L]))}else F=u0(Ve);ve.url=F}return J||(I.images[this.uuid]=ve),ve}}function u0(be){return typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&be instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&be instanceof ImageBitmap?z1.getDataURL(be):be.data?{data:Array.from(be.data),width:be.width,height:be.height,type:be.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let S2=0;class Vs extends Ac{constructor(I=Vs.DEFAULT_IMAGE,J=Vs.DEFAULT_MAPPING,ve=El,Ve=El,F=rl,L=zh,e=kl,T=Uu,b=Vs.DEFAULT_ANISOTROPY,a=vc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:S2++}),this.uuid=Uf(),this.name="",this.source=new F1(I),this.mipmaps=[],this.mapping=J,this.channel=0,this.wrapS=ve,this.wrapT=Ve,this.magFilter=F,this.minFilter=L,this.anisotropy=b,this.format=e,this.internalFormat=null,this.type=T,this.offset=new Kr(0,0),this.repeat=new Kr(1,1),this.center=new Kr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new li,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof a=="string"?this.colorSpace=a:(Rh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=a===gc?ei:vc),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(I=null){this.source.data=I}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(I){return this.name=I.name,this.source=I.source,this.mipmaps=I.mipmaps.slice(0),this.mapping=I.mapping,this.channel=I.channel,this.wrapS=I.wrapS,this.wrapT=I.wrapT,this.magFilter=I.magFilter,this.minFilter=I.minFilter,this.anisotropy=I.anisotropy,this.format=I.format,this.internalFormat=I.internalFormat,this.type=I.type,this.offset.copy(I.offset),this.repeat.copy(I.repeat),this.center.copy(I.center),this.rotation=I.rotation,this.matrixAutoUpdate=I.matrixAutoUpdate,this.matrix.copy(I.matrix),this.generateMipmaps=I.generateMipmaps,this.premultiplyAlpha=I.premultiplyAlpha,this.flipY=I.flipY,this.unpackAlignment=I.unpackAlignment,this.colorSpace=I.colorSpace,this.userData=JSON.parse(JSON.stringify(I.userData)),this.needsUpdate=!0,this}toJSON(I){const J=I===void 0||typeof I=="string";if(!J&&I.textures[this.uuid]!==void 0)return I.textures[this.uuid];const ve={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(I).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ve.userData=this.userData),J||(I.textures[this.uuid]=ve),ve}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(I){if(this.mapping!==A1)return I;if(I.applyMatrix3(this.matrix),I.x<0||I.x>1)switch(this.wrapS){case N0:I.x=I.x-Math.floor(I.x);break;case El:I.x=I.x<0?0:1;break;case B0:Math.abs(Math.floor(I.x)%2)===1?I.x=Math.ceil(I.x)-I.x:I.x=I.x-Math.floor(I.x);break}if(I.y<0||I.y>1)switch(this.wrapT){case N0:I.y=I.y-Math.floor(I.y);break;case El:I.y=I.y<0?0:1;break;case B0:Math.abs(Math.floor(I.y)%2)===1?I.y=Math.ceil(I.y)-I.y:I.y=I.y-Math.floor(I.y);break}return this.flipY&&(I.y=1-I.y),I}set needsUpdate(I){I===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Rh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ei?gc:R1}set encoding(I){Rh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=I===gc?ei:vc}}Vs.DEFAULT_IMAGE=null;Vs.DEFAULT_MAPPING=A1;Vs.DEFAULT_ANISOTROPY=1;class ma{constructor(I=0,J=0,ve=0,Ve=1){ma.prototype.isVector4=!0,this.x=I,this.y=J,this.z=ve,this.w=Ve}get width(){return this.z}set width(I){this.z=I}get height(){return this.w}set height(I){this.w=I}set(I,J,ve,Ve){return this.x=I,this.y=J,this.z=ve,this.w=Ve,this}setScalar(I){return this.x=I,this.y=I,this.z=I,this.w=I,this}setX(I){return this.x=I,this}setY(I){return this.y=I,this}setZ(I){return this.z=I,this}setW(I){return this.w=I,this}setComponent(I,J){switch(I){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;case 3:this.w=J;break;default:throw new Error("index is out of range: "+I)}return this}getComponent(I){switch(I){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+I)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(I){return this.x=I.x,this.y=I.y,this.z=I.z,this.w=I.w!==void 0?I.w:1,this}add(I){return this.x+=I.x,this.y+=I.y,this.z+=I.z,this.w+=I.w,this}addScalar(I){return this.x+=I,this.y+=I,this.z+=I,this.w+=I,this}addVectors(I,J){return this.x=I.x+J.x,this.y=I.y+J.y,this.z=I.z+J.z,this.w=I.w+J.w,this}addScaledVector(I,J){return this.x+=I.x*J,this.y+=I.y*J,this.z+=I.z*J,this.w+=I.w*J,this}sub(I){return this.x-=I.x,this.y-=I.y,this.z-=I.z,this.w-=I.w,this}subScalar(I){return this.x-=I,this.y-=I,this.z-=I,this.w-=I,this}subVectors(I,J){return this.x=I.x-J.x,this.y=I.y-J.y,this.z=I.z-J.z,this.w=I.w-J.w,this}multiply(I){return this.x*=I.x,this.y*=I.y,this.z*=I.z,this.w*=I.w,this}multiplyScalar(I){return this.x*=I,this.y*=I,this.z*=I,this.w*=I,this}applyMatrix4(I){const J=this.x,ve=this.y,Ve=this.z,F=this.w,L=I.elements;return this.x=L[0]*J+L[4]*ve+L[8]*Ve+L[12]*F,this.y=L[1]*J+L[5]*ve+L[9]*Ve+L[13]*F,this.z=L[2]*J+L[6]*ve+L[10]*Ve+L[14]*F,this.w=L[3]*J+L[7]*ve+L[11]*Ve+L[15]*F,this}divideScalar(I){return this.multiplyScalar(1/I)}setAxisAngleFromQuaternion(I){this.w=2*Math.acos(I.w);const J=Math.sqrt(1-I.w*I.w);return J<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=I.x/J,this.y=I.y/J,this.z=I.z/J),this}setAxisAngleFromRotationMatrix(I){let J,ve,Ve,F;const T=I.elements,b=T[0],a=T[4],_=T[8],g=T[1],h=T[5],o=T[9],t=T[2],i=T[6],n=T[10];if(Math.abs(a-g)<.01&&Math.abs(_-t)<.01&&Math.abs(o-i)<.01){if(Math.abs(a+g)<.1&&Math.abs(_+t)<.1&&Math.abs(o+i)<.1&&Math.abs(b+h+n-3)<.1)return this.set(1,0,0,0),this;J=Math.PI;const s=(b+1)/2,l=(h+1)/2,u=(n+1)/2,d=(a+g)/4,c=(_+t)/4,w=(o+i)/4;return s>l&&s>u?s<.01?(ve=0,Ve=.707106781,F=.707106781):(ve=Math.sqrt(s),Ve=d/ve,F=c/ve):l>u?l<.01?(ve=.707106781,Ve=0,F=.707106781):(Ve=Math.sqrt(l),ve=d/Ve,F=w/Ve):u<.01?(ve=.707106781,Ve=.707106781,F=0):(F=Math.sqrt(u),ve=c/F,Ve=w/F),this.set(ve,Ve,F,J),this}let r=Math.sqrt((i-o)*(i-o)+(_-t)*(_-t)+(g-a)*(g-a));return Math.abs(r)<.001&&(r=1),this.x=(i-o)/r,this.y=(_-t)/r,this.z=(g-a)/r,this.w=Math.acos((b+h+n-1)/2),this}min(I){return this.x=Math.min(this.x,I.x),this.y=Math.min(this.y,I.y),this.z=Math.min(this.z,I.z),this.w=Math.min(this.w,I.w),this}max(I){return this.x=Math.max(this.x,I.x),this.y=Math.max(this.y,I.y),this.z=Math.max(this.z,I.z),this.w=Math.max(this.w,I.w),this}clamp(I,J){return this.x=Math.max(I.x,Math.min(J.x,this.x)),this.y=Math.max(I.y,Math.min(J.y,this.y)),this.z=Math.max(I.z,Math.min(J.z,this.z)),this.w=Math.max(I.w,Math.min(J.w,this.w)),this}clampScalar(I,J){return this.x=Math.max(I,Math.min(J,this.x)),this.y=Math.max(I,Math.min(J,this.y)),this.z=Math.max(I,Math.min(J,this.z)),this.w=Math.max(I,Math.min(J,this.w)),this}clampLength(I,J){const ve=this.length();return this.divideScalar(ve||1).multiplyScalar(Math.max(I,Math.min(J,ve)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(I){return this.x*I.x+this.y*I.y+this.z*I.z+this.w*I.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(I){return this.normalize().multiplyScalar(I)}lerp(I,J){return this.x+=(I.x-this.x)*J,this.y+=(I.y-this.y)*J,this.z+=(I.z-this.z)*J,this.w+=(I.w-this.w)*J,this}lerpVectors(I,J,ve){return this.x=I.x+(J.x-I.x)*ve,this.y=I.y+(J.y-I.y)*ve,this.z=I.z+(J.z-I.z)*ve,this.w=I.w+(J.w-I.w)*ve,this}equals(I){return I.x===this.x&&I.y===this.y&&I.z===this.z&&I.w===this.w}fromArray(I,J=0){return this.x=I[J],this.y=I[J+1],this.z=I[J+2],this.w=I[J+3],this}toArray(I=[],J=0){return I[J]=this.x,I[J+1]=this.y,I[J+2]=this.z,I[J+3]=this.w,I}fromBufferAttribute(I,J){return this.x=I.getX(J),this.y=I.getY(J),this.z=I.getZ(J),this.w=I.getW(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class E2 extends Ac{constructor(I=1,J=1,ve={}){super(),this.isRenderTarget=!0,this.width=I,this.height=J,this.depth=1,this.scissor=new ma(0,0,I,J),this.scissorTest=!1,this.viewport=new ma(0,0,I,J);const Ve={width:I,height:J,depth:1};ve.encoding!==void 0&&(Rh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),ve.colorSpace=ve.encoding===gc?ei:vc),this.texture=new Vs(Ve,ve.mapping,ve.wrapS,ve.wrapT,ve.magFilter,ve.minFilter,ve.format,ve.type,ve.anisotropy,ve.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=ve.generateMipmaps!==void 0?ve.generateMipmaps:!1,this.texture.internalFormat=ve.internalFormat!==void 0?ve.internalFormat:null,this.texture.minFilter=ve.minFilter!==void 0?ve.minFilter:rl,this.depthBuffer=ve.depthBuffer!==void 0?ve.depthBuffer:!0,this.stencilBuffer=ve.stencilBuffer!==void 0?ve.stencilBuffer:!1,this.depthTexture=ve.depthTexture!==void 0?ve.depthTexture:null,this.samples=ve.samples!==void 0?ve.samples:0}setSize(I,J,ve=1){(this.width!==I||this.height!==J||this.depth!==ve)&&(this.width=I,this.height=J,this.depth=ve,this.texture.image.width=I,this.texture.image.height=J,this.texture.image.depth=ve,this.dispose()),this.viewport.set(0,0,I,J),this.scissor.set(0,0,I,J)}clone(){return new this.constructor().copy(this)}copy(I){this.width=I.width,this.height=I.height,this.depth=I.depth,this.scissor.copy(I.scissor),this.scissorTest=I.scissorTest,this.viewport.copy(I.viewport),this.texture=I.texture.clone(),this.texture.isRenderTargetTexture=!0;const J=Object.assign({},I.texture.image);return this.texture.source=new F1(J),this.depthBuffer=I.depthBuffer,this.stencilBuffer=I.stencilBuffer,I.depthTexture!==null&&(this.depthTexture=I.depthTexture.clone()),this.samples=I.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xc extends E2{constructor(I=1,J=1,ve={}){super(I,J,ve),this.isWebGLRenderTarget=!0}}class N1 extends Vs{constructor(I=null,J=1,ve=1,Ve=1){super(null),this.isDataArrayTexture=!0,this.image={data:I,width:J,height:ve,depth:Ve},this.magFilter=$o,this.minFilter=$o,this.wrapR=El,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class k2 extends Vs{constructor(I=null,J=1,ve=1,Ve=1){super(null),this.isData3DTexture=!0,this.image={data:I,width:J,height:ve,depth:Ve},this.magFilter=$o,this.minFilter=$o,this.wrapR=El,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _c{constructor(I=0,J=0,ve=0,Ve=1){this.isQuaternion=!0,this._x=I,this._y=J,this._z=ve,this._w=Ve}static slerpFlat(I,J,ve,Ve,F,L,e){let T=ve[Ve+0],b=ve[Ve+1],a=ve[Ve+2],_=ve[Ve+3];const g=F[L+0],h=F[L+1],o=F[L+2],t=F[L+3];if(e===0){I[J+0]=T,I[J+1]=b,I[J+2]=a,I[J+3]=_;return}if(e===1){I[J+0]=g,I[J+1]=h,I[J+2]=o,I[J+3]=t;return}if(_!==t||T!==g||b!==h||a!==o){let i=1-e;const n=T*g+b*h+a*o+_*t,r=n>=0?1:-1,s=1-n*n;if(s>Number.EPSILON){const u=Math.sqrt(s),d=Math.atan2(u,n*r);i=Math.sin(i*d)/u,e=Math.sin(e*d)/u}const l=e*r;if(T=T*i+g*l,b=b*i+h*l,a=a*i+o*l,_=_*i+t*l,i===1-e){const u=1/Math.sqrt(T*T+b*b+a*a+_*_);T*=u,b*=u,a*=u,_*=u}}I[J]=T,I[J+1]=b,I[J+2]=a,I[J+3]=_}static multiplyQuaternionsFlat(I,J,ve,Ve,F,L){const e=ve[Ve],T=ve[Ve+1],b=ve[Ve+2],a=ve[Ve+3],_=F[L],g=F[L+1],h=F[L+2],o=F[L+3];return I[J]=e*o+a*_+T*h-b*g,I[J+1]=T*o+a*g+b*_-e*h,I[J+2]=b*o+a*h+e*g-T*_,I[J+3]=a*o-e*_-T*g-b*h,I}get x(){return this._x}set x(I){this._x=I,this._onChangeCallback()}get y(){return this._y}set y(I){this._y=I,this._onChangeCallback()}get z(){return this._z}set z(I){this._z=I,this._onChangeCallback()}get w(){return this._w}set w(I){this._w=I,this._onChangeCallback()}set(I,J,ve,Ve){return this._x=I,this._y=J,this._z=ve,this._w=Ve,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(I){return this._x=I.x,this._y=I.y,this._z=I.z,this._w=I.w,this._onChangeCallback(),this}setFromEuler(I,J){const ve=I._x,Ve=I._y,F=I._z,L=I._order,e=Math.cos,T=Math.sin,b=e(ve/2),a=e(Ve/2),_=e(F/2),g=T(ve/2),h=T(Ve/2),o=T(F/2);switch(L){case"XYZ":this._x=g*a*_+b*h*o,this._y=b*h*_-g*a*o,this._z=b*a*o+g*h*_,this._w=b*a*_-g*h*o;break;case"YXZ":this._x=g*a*_+b*h*o,this._y=b*h*_-g*a*o,this._z=b*a*o-g*h*_,this._w=b*a*_+g*h*o;break;case"ZXY":this._x=g*a*_-b*h*o,this._y=b*h*_+g*a*o,this._z=b*a*o+g*h*_,this._w=b*a*_-g*h*o;break;case"ZYX":this._x=g*a*_-b*h*o,this._y=b*h*_+g*a*o,this._z=b*a*o-g*h*_,this._w=b*a*_+g*h*o;break;case"YZX":this._x=g*a*_+b*h*o,this._y=b*h*_+g*a*o,this._z=b*a*o-g*h*_,this._w=b*a*_-g*h*o;break;case"XZY":this._x=g*a*_-b*h*o,this._y=b*h*_-g*a*o,this._z=b*a*o+g*h*_,this._w=b*a*_+g*h*o;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+L)}return J!==!1&&this._onChangeCallback(),this}setFromAxisAngle(I,J){const ve=J/2,Ve=Math.sin(ve);return this._x=I.x*Ve,this._y=I.y*Ve,this._z=I.z*Ve,this._w=Math.cos(ve),this._onChangeCallback(),this}setFromRotationMatrix(I){const J=I.elements,ve=J[0],Ve=J[4],F=J[8],L=J[1],e=J[5],T=J[9],b=J[2],a=J[6],_=J[10],g=ve+e+_;if(g>0){const h=.5/Math.sqrt(g+1);this._w=.25/h,this._x=(a-T)*h,this._y=(F-b)*h,this._z=(L-Ve)*h}else if(ve>e&&ve>_){const h=2*Math.sqrt(1+ve-e-_);this._w=(a-T)/h,this._x=.25*h,this._y=(Ve+L)/h,this._z=(F+b)/h}else if(e>_){const h=2*Math.sqrt(1+e-ve-_);this._w=(F-b)/h,this._x=(Ve+L)/h,this._y=.25*h,this._z=(T+a)/h}else{const h=2*Math.sqrt(1+_-ve-e);this._w=(L-Ve)/h,this._x=(F+b)/h,this._y=(T+a)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(I,J){let ve=I.dot(J)+1;return ve<Number.EPSILON?(ve=0,Math.abs(I.x)>Math.abs(I.z)?(this._x=-I.y,this._y=I.x,this._z=0,this._w=ve):(this._x=0,this._y=-I.z,this._z=I.y,this._w=ve)):(this._x=I.y*J.z-I.z*J.y,this._y=I.z*J.x-I.x*J.z,this._z=I.x*J.y-I.y*J.x,this._w=ve),this.normalize()}angleTo(I){return 2*Math.acos(Math.abs(Co(this.dot(I),-1,1)))}rotateTowards(I,J){const ve=this.angleTo(I);if(ve===0)return this;const Ve=Math.min(1,J/ve);return this.slerp(I,Ve),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(I){return this._x*I._x+this._y*I._y+this._z*I._z+this._w*I._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let I=this.length();return I===0?(this._x=0,this._y=0,this._z=0,this._w=1):(I=1/I,this._x=this._x*I,this._y=this._y*I,this._z=this._z*I,this._w=this._w*I),this._onChangeCallback(),this}multiply(I){return this.multiplyQuaternions(this,I)}premultiply(I){return this.multiplyQuaternions(I,this)}multiplyQuaternions(I,J){const ve=I._x,Ve=I._y,F=I._z,L=I._w,e=J._x,T=J._y,b=J._z,a=J._w;return this._x=ve*a+L*e+Ve*b-F*T,this._y=Ve*a+L*T+F*e-ve*b,this._z=F*a+L*b+ve*T-Ve*e,this._w=L*a-ve*e-Ve*T-F*b,this._onChangeCallback(),this}slerp(I,J){if(J===0)return this;if(J===1)return this.copy(I);const ve=this._x,Ve=this._y,F=this._z,L=this._w;let e=L*I._w+ve*I._x+Ve*I._y+F*I._z;if(e<0?(this._w=-I._w,this._x=-I._x,this._y=-I._y,this._z=-I._z,e=-e):this.copy(I),e>=1)return this._w=L,this._x=ve,this._y=Ve,this._z=F,this;const T=1-e*e;if(T<=Number.EPSILON){const h=1-J;return this._w=h*L+J*this._w,this._x=h*ve+J*this._x,this._y=h*Ve+J*this._y,this._z=h*F+J*this._z,this.normalize(),this._onChangeCallback(),this}const b=Math.sqrt(T),a=Math.atan2(b,e),_=Math.sin((1-J)*a)/b,g=Math.sin(J*a)/b;return this._w=L*_+this._w*g,this._x=ve*_+this._x*g,this._y=Ve*_+this._y*g,this._z=F*_+this._z*g,this._onChangeCallback(),this}slerpQuaternions(I,J,ve){return this.copy(I).slerp(J,ve)}random(){const I=Math.random(),J=Math.sqrt(1-I),ve=Math.sqrt(I),Ve=2*Math.PI*Math.random(),F=2*Math.PI*Math.random();return this.set(J*Math.cos(Ve),ve*Math.sin(F),ve*Math.cos(F),J*Math.sin(Ve))}equals(I){return I._x===this._x&&I._y===this._y&&I._z===this._z&&I._w===this._w}fromArray(I,J=0){return this._x=I[J],this._y=I[J+1],this._z=I[J+2],this._w=I[J+3],this._onChangeCallback(),this}toArray(I=[],J=0){return I[J]=this._x,I[J+1]=this._y,I[J+2]=this._z,I[J+3]=this._w,I}fromBufferAttribute(I,J){return this._x=I.getX(J),this._y=I.getY(J),this._z=I.getZ(J),this._w=I.getW(J),this}toJSON(){return this.toArray()}_onChange(I){return this._onChangeCallback=I,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Hn{constructor(I=0,J=0,ve=0){Hn.prototype.isVector3=!0,this.x=I,this.y=J,this.z=ve}set(I,J,ve){return ve===void 0&&(ve=this.z),this.x=I,this.y=J,this.z=ve,this}setScalar(I){return this.x=I,this.y=I,this.z=I,this}setX(I){return this.x=I,this}setY(I){return this.y=I,this}setZ(I){return this.z=I,this}setComponent(I,J){switch(I){case 0:this.x=J;break;case 1:this.y=J;break;case 2:this.z=J;break;default:throw new Error("index is out of range: "+I)}return this}getComponent(I){switch(I){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+I)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(I){return this.x=I.x,this.y=I.y,this.z=I.z,this}add(I){return this.x+=I.x,this.y+=I.y,this.z+=I.z,this}addScalar(I){return this.x+=I,this.y+=I,this.z+=I,this}addVectors(I,J){return this.x=I.x+J.x,this.y=I.y+J.y,this.z=I.z+J.z,this}addScaledVector(I,J){return this.x+=I.x*J,this.y+=I.y*J,this.z+=I.z*J,this}sub(I){return this.x-=I.x,this.y-=I.y,this.z-=I.z,this}subScalar(I){return this.x-=I,this.y-=I,this.z-=I,this}subVectors(I,J){return this.x=I.x-J.x,this.y=I.y-J.y,this.z=I.z-J.z,this}multiply(I){return this.x*=I.x,this.y*=I.y,this.z*=I.z,this}multiplyScalar(I){return this.x*=I,this.y*=I,this.z*=I,this}multiplyVectors(I,J){return this.x=I.x*J.x,this.y=I.y*J.y,this.z=I.z*J.z,this}applyEuler(I){return this.applyQuaternion(yv.setFromEuler(I))}applyAxisAngle(I,J){return this.applyQuaternion(yv.setFromAxisAngle(I,J))}applyMatrix3(I){const J=this.x,ve=this.y,Ve=this.z,F=I.elements;return this.x=F[0]*J+F[3]*ve+F[6]*Ve,this.y=F[1]*J+F[4]*ve+F[7]*Ve,this.z=F[2]*J+F[5]*ve+F[8]*Ve,this}applyNormalMatrix(I){return this.applyMatrix3(I).normalize()}applyMatrix4(I){const J=this.x,ve=this.y,Ve=this.z,F=I.elements,L=1/(F[3]*J+F[7]*ve+F[11]*Ve+F[15]);return this.x=(F[0]*J+F[4]*ve+F[8]*Ve+F[12])*L,this.y=(F[1]*J+F[5]*ve+F[9]*Ve+F[13])*L,this.z=(F[2]*J+F[6]*ve+F[10]*Ve+F[14])*L,this}applyQuaternion(I){const J=this.x,ve=this.y,Ve=this.z,F=I.x,L=I.y,e=I.z,T=I.w,b=T*J+L*Ve-e*ve,a=T*ve+e*J-F*Ve,_=T*Ve+F*ve-L*J,g=-F*J-L*ve-e*Ve;return this.x=b*T+g*-F+a*-e-_*-L,this.y=a*T+g*-L+_*-F-b*-e,this.z=_*T+g*-e+b*-L-a*-F,this}project(I){return this.applyMatrix4(I.matrixWorldInverse).applyMatrix4(I.projectionMatrix)}unproject(I){return this.applyMatrix4(I.projectionMatrixInverse).applyMatrix4(I.matrixWorld)}transformDirection(I){const J=this.x,ve=this.y,Ve=this.z,F=I.elements;return this.x=F[0]*J+F[4]*ve+F[8]*Ve,this.y=F[1]*J+F[5]*ve+F[9]*Ve,this.z=F[2]*J+F[6]*ve+F[10]*Ve,this.normalize()}divide(I){return this.x/=I.x,this.y/=I.y,this.z/=I.z,this}divideScalar(I){return this.multiplyScalar(1/I)}min(I){return this.x=Math.min(this.x,I.x),this.y=Math.min(this.y,I.y),this.z=Math.min(this.z,I.z),this}max(I){return this.x=Math.max(this.x,I.x),this.y=Math.max(this.y,I.y),this.z=Math.max(this.z,I.z),this}clamp(I,J){return this.x=Math.max(I.x,Math.min(J.x,this.x)),this.y=Math.max(I.y,Math.min(J.y,this.y)),this.z=Math.max(I.z,Math.min(J.z,this.z)),this}clampScalar(I,J){return this.x=Math.max(I,Math.min(J,this.x)),this.y=Math.max(I,Math.min(J,this.y)),this.z=Math.max(I,Math.min(J,this.z)),this}clampLength(I,J){const ve=this.length();return this.divideScalar(ve||1).multiplyScalar(Math.max(I,Math.min(J,ve)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(I){return this.x*I.x+this.y*I.y+this.z*I.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(I){return this.normalize().multiplyScalar(I)}lerp(I,J){return this.x+=(I.x-this.x)*J,this.y+=(I.y-this.y)*J,this.z+=(I.z-this.z)*J,this}lerpVectors(I,J,ve){return this.x=I.x+(J.x-I.x)*ve,this.y=I.y+(J.y-I.y)*ve,this.z=I.z+(J.z-I.z)*ve,this}cross(I){return this.crossVectors(this,I)}crossVectors(I,J){const ve=I.x,Ve=I.y,F=I.z,L=J.x,e=J.y,T=J.z;return this.x=Ve*T-F*e,this.y=F*L-ve*T,this.z=ve*e-Ve*L,this}projectOnVector(I){const J=I.lengthSq();if(J===0)return this.set(0,0,0);const ve=I.dot(this)/J;return this.copy(I).multiplyScalar(ve)}projectOnPlane(I){return c0.copy(this).projectOnVector(I),this.sub(c0)}reflect(I){return this.sub(c0.copy(I).multiplyScalar(2*this.dot(I)))}angleTo(I){const J=Math.sqrt(this.lengthSq()*I.lengthSq());if(J===0)return Math.PI/2;const ve=this.dot(I)/J;return Math.acos(Co(ve,-1,1))}distanceTo(I){return Math.sqrt(this.distanceToSquared(I))}distanceToSquared(I){const J=this.x-I.x,ve=this.y-I.y,Ve=this.z-I.z;return J*J+ve*ve+Ve*Ve}manhattanDistanceTo(I){return Math.abs(this.x-I.x)+Math.abs(this.y-I.y)+Math.abs(this.z-I.z)}setFromSpherical(I){return this.setFromSphericalCoords(I.radius,I.phi,I.theta)}setFromSphericalCoords(I,J,ve){const Ve=Math.sin(J)*I;return this.x=Ve*Math.sin(ve),this.y=Math.cos(J)*I,this.z=Ve*Math.cos(ve),this}setFromCylindrical(I){return this.setFromCylindricalCoords(I.radius,I.theta,I.y)}setFromCylindricalCoords(I,J,ve){return this.x=I*Math.sin(J),this.y=ve,this.z=I*Math.cos(J),this}setFromMatrixPosition(I){const J=I.elements;return this.x=J[12],this.y=J[13],this.z=J[14],this}setFromMatrixScale(I){const J=this.setFromMatrixColumn(I,0).length(),ve=this.setFromMatrixColumn(I,1).length(),Ve=this.setFromMatrixColumn(I,2).length();return this.x=J,this.y=ve,this.z=Ve,this}setFromMatrixColumn(I,J){return this.fromArray(I.elements,J*4)}setFromMatrix3Column(I,J){return this.fromArray(I.elements,J*3)}setFromEuler(I){return this.x=I._x,this.y=I._y,this.z=I._z,this}setFromColor(I){return this.x=I.r,this.y=I.g,this.z=I.b,this}equals(I){return I.x===this.x&&I.y===this.y&&I.z===this.z}fromArray(I,J=0){return this.x=I[J],this.y=I[J+1],this.z=I[J+2],this}toArray(I=[],J=0){return I[J]=this.x,I[J+1]=this.y,I[J+2]=this.z,I}fromBufferAttribute(I,J){return this.x=I.getX(J),this.y=I.getY(J),this.z=I.getZ(J),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const I=(Math.random()-.5)*2,J=Math.random()*Math.PI*2,ve=Math.sqrt(1-I**2);return this.x=ve*Math.cos(J),this.y=ve*Math.sin(J),this.z=I,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const c0=new Hn,yv=new _c;class Bh{constructor(I=new Hn(1/0,1/0,1/0),J=new Hn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=I,this.max=J}set(I,J){return this.min.copy(I),this.max.copy(J),this}setFromArray(I){this.makeEmpty();for(let J=0,ve=I.length;J<ve;J+=3)this.expandByPoint(lu.fromArray(I,J));return this}setFromBufferAttribute(I){this.makeEmpty();for(let J=0,ve=I.count;J<ve;J++)this.expandByPoint(lu.fromBufferAttribute(I,J));return this}setFromPoints(I){this.makeEmpty();for(let J=0,ve=I.length;J<ve;J++)this.expandByPoint(I[J]);return this}setFromCenterAndSize(I,J){const ve=lu.copy(J).multiplyScalar(.5);return this.min.copy(I).sub(ve),this.max.copy(I).add(ve),this}setFromObject(I,J=!1){return this.makeEmpty(),this.expandByObject(I,J)}clone(){return new this.constructor().copy(this)}copy(I){return this.min.copy(I.min),this.max.copy(I.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(I){return this.isEmpty()?I.set(0,0,0):I.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(I){return this.isEmpty()?I.set(0,0,0):I.subVectors(this.max,this.min)}expandByPoint(I){return this.min.min(I),this.max.max(I),this}expandByVector(I){return this.min.sub(I),this.max.add(I),this}expandByScalar(I){return this.min.addScalar(-I),this.max.addScalar(I),this}expandByObject(I,J=!1){if(I.updateWorldMatrix(!1,!1),I.boundingBox!==void 0)I.boundingBox===null&&I.computeBoundingBox(),nf.copy(I.boundingBox),nf.applyMatrix4(I.matrixWorld),this.union(nf);else{const Ve=I.geometry;if(Ve!==void 0)if(J&&Ve.attributes!==void 0&&Ve.attributes.position!==void 0){const F=Ve.attributes.position;for(let L=0,e=F.count;L<e;L++)lu.fromBufferAttribute(F,L).applyMatrix4(I.matrixWorld),this.expandByPoint(lu)}else Ve.boundingBox===null&&Ve.computeBoundingBox(),nf.copy(Ve.boundingBox),nf.applyMatrix4(I.matrixWorld),this.union(nf)}const ve=I.children;for(let Ve=0,F=ve.length;Ve<F;Ve++)this.expandByObject(ve[Ve],J);return this}containsPoint(I){return!(I.x<this.min.x||I.x>this.max.x||I.y<this.min.y||I.y>this.max.y||I.z<this.min.z||I.z>this.max.z)}containsBox(I){return this.min.x<=I.min.x&&I.max.x<=this.max.x&&this.min.y<=I.min.y&&I.max.y<=this.max.y&&this.min.z<=I.min.z&&I.max.z<=this.max.z}getParameter(I,J){return J.set((I.x-this.min.x)/(this.max.x-this.min.x),(I.y-this.min.y)/(this.max.y-this.min.y),(I.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(I){return!(I.max.x<this.min.x||I.min.x>this.max.x||I.max.y<this.min.y||I.min.y>this.max.y||I.max.z<this.min.z||I.min.z>this.max.z)}intersectsSphere(I){return this.clampPoint(I.center,lu),lu.distanceToSquared(I.center)<=I.radius*I.radius}intersectsPlane(I){let J,ve;return I.normal.x>0?(J=I.normal.x*this.min.x,ve=I.normal.x*this.max.x):(J=I.normal.x*this.max.x,ve=I.normal.x*this.min.x),I.normal.y>0?(J+=I.normal.y*this.min.y,ve+=I.normal.y*this.max.y):(J+=I.normal.y*this.max.y,ve+=I.normal.y*this.min.y),I.normal.z>0?(J+=I.normal.z*this.min.z,ve+=I.normal.z*this.max.z):(J+=I.normal.z*this.max.z,ve+=I.normal.z*this.min.z),J<=-I.constant&&ve>=-I.constant}intersectsTriangle(I){if(this.isEmpty())return!1;this.getCenter(yh),Cp.subVectors(this.max,yh),rf.subVectors(I.a,yh),af.subVectors(I.b,yh),of.subVectors(I.c,yh),Pu.subVectors(af,rf),Ru.subVectors(of,af),ac.subVectors(rf,of);let J=[0,-Pu.z,Pu.y,0,-Ru.z,Ru.y,0,-ac.z,ac.y,Pu.z,0,-Pu.x,Ru.z,0,-Ru.x,ac.z,0,-ac.x,-Pu.y,Pu.x,0,-Ru.y,Ru.x,0,-ac.y,ac.x,0];return!f0(J,rf,af,of,Cp)||(J=[1,0,0,0,1,0,0,0,1],!f0(J,rf,af,of,Cp))?!1:(Pp.crossVectors(Pu,Ru),J=[Pp.x,Pp.y,Pp.z],f0(J,rf,af,of,Cp))}clampPoint(I,J){return J.copy(I).clamp(this.min,this.max)}distanceToPoint(I){return this.clampPoint(I,lu).distanceTo(I)}getBoundingSphere(I){return this.isEmpty()?I.makeEmpty():(this.getCenter(I.center),I.radius=this.getSize(lu).length()*.5),I}intersect(I){return this.min.max(I.min),this.max.min(I.max),this.isEmpty()&&this.makeEmpty(),this}union(I){return this.min.min(I.min),this.max.max(I.max),this}applyMatrix4(I){return this.isEmpty()?this:(su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(I),su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(I),su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(I),su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(I),su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(I),su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(I),su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(I),su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(I),this.setFromPoints(su),this)}translate(I){return this.min.add(I),this.max.add(I),this}equals(I){return I.min.equals(this.min)&&I.max.equals(this.max)}}const su=[new Hn,new Hn,new Hn,new Hn,new Hn,new Hn,new Hn,new Hn],lu=new Hn,nf=new Bh,rf=new Hn,af=new Hn,of=new Hn,Pu=new Hn,Ru=new Hn,ac=new Hn,yh=new Hn,Cp=new Hn,Pp=new Hn,oc=new Hn;function f0(be,I,J,ve,Ve){for(let F=0,L=be.length-3;F<=L;F+=3){oc.fromArray(be,F);const e=Ve.x*Math.abs(oc.x)+Ve.y*Math.abs(oc.y)+Ve.z*Math.abs(oc.z),T=I.dot(oc),b=J.dot(oc),a=ve.dot(oc);if(Math.max(-Math.max(T,b,a),Math.min(T,b,a))>e)return!1}return!0}const L2=new Bh,xh=new Hn,h0=new Hn;class K0{constructor(I=new Hn,J=-1){this.center=I,this.radius=J}set(I,J){return this.center.copy(I),this.radius=J,this}setFromPoints(I,J){const ve=this.center;J!==void 0?ve.copy(J):L2.setFromPoints(I).getCenter(ve);let Ve=0;for(let F=0,L=I.length;F<L;F++)Ve=Math.max(Ve,ve.distanceToSquared(I[F]));return this.radius=Math.sqrt(Ve),this}copy(I){return this.center.copy(I.center),this.radius=I.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(I){return I.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(I){return I.distanceTo(this.center)-this.radius}intersectsSphere(I){const J=this.radius+I.radius;return I.center.distanceToSquared(this.center)<=J*J}intersectsBox(I){return I.intersectsSphere(this)}intersectsPlane(I){return Math.abs(I.distanceToPoint(this.center))<=this.radius}clampPoint(I,J){const ve=this.center.distanceToSquared(I);return J.copy(I),ve>this.radius*this.radius&&(J.sub(this.center).normalize(),J.multiplyScalar(this.radius).add(this.center)),J}getBoundingBox(I){return this.isEmpty()?(I.makeEmpty(),I):(I.set(this.center,this.center),I.expandByScalar(this.radius),I)}applyMatrix4(I){return this.center.applyMatrix4(I),this.radius=this.radius*I.getMaxScaleOnAxis(),this}translate(I){return this.center.add(I),this}expandByPoint(I){if(this.isEmpty())return this.center.copy(I),this.radius=0,this;xh.subVectors(I,this.center);const J=xh.lengthSq();if(J>this.radius*this.radius){const ve=Math.sqrt(J),Ve=(ve-this.radius)*.5;this.center.addScaledVector(xh,Ve/ve),this.radius+=Ve}return this}union(I){return I.isEmpty()?this:this.isEmpty()?(this.copy(I),this):(this.center.equals(I.center)===!0?this.radius=Math.max(this.radius,I.radius):(h0.subVectors(I.center,this.center).setLength(I.radius),this.expandByPoint(xh.copy(I.center).add(h0)),this.expandByPoint(xh.copy(I.center).sub(h0))),this)}equals(I){return I.center.equals(this.center)&&I.radius===this.radius}clone(){return new this.constructor().copy(this)}}const uu=new Hn,p0=new Hn,Rp=new Hn,Iu=new Hn,d0=new Hn,Ip=new Hn,m0=new Hn;class B1{constructor(I=new Hn,J=new Hn(0,0,-1)){this.origin=I,this.direction=J}set(I,J){return this.origin.copy(I),this.direction.copy(J),this}copy(I){return this.origin.copy(I.origin),this.direction.copy(I.direction),this}at(I,J){return J.copy(this.origin).addScaledVector(this.direction,I)}lookAt(I){return this.direction.copy(I).sub(this.origin).normalize(),this}recast(I){return this.origin.copy(this.at(I,uu)),this}closestPointToPoint(I,J){J.subVectors(I,this.origin);const ve=J.dot(this.direction);return ve<0?J.copy(this.origin):J.copy(this.origin).addScaledVector(this.direction,ve)}distanceToPoint(I){return Math.sqrt(this.distanceSqToPoint(I))}distanceSqToPoint(I){const J=uu.subVectors(I,this.origin).dot(this.direction);return J<0?this.origin.distanceToSquared(I):(uu.copy(this.origin).addScaledVector(this.direction,J),uu.distanceToSquared(I))}distanceSqToSegment(I,J,ve,Ve){p0.copy(I).add(J).multiplyScalar(.5),Rp.copy(J).sub(I).normalize(),Iu.copy(this.origin).sub(p0);const F=I.distanceTo(J)*.5,L=-this.direction.dot(Rp),e=Iu.dot(this.direction),T=-Iu.dot(Rp),b=Iu.lengthSq(),a=Math.abs(1-L*L);let _,g,h,o;if(a>0)if(_=L*T-e,g=L*e-T,o=F*a,_>=0)if(g>=-o)if(g<=o){const t=1/a;_*=t,g*=t,h=_*(_+L*g+2*e)+g*(L*_+g+2*T)+b}else g=F,_=Math.max(0,-(L*g+e)),h=-_*_+g*(g+2*T)+b;else g=-F,_=Math.max(0,-(L*g+e)),h=-_*_+g*(g+2*T)+b;else g<=-o?(_=Math.max(0,-(-L*F+e)),g=_>0?-F:Math.min(Math.max(-F,-T),F),h=-_*_+g*(g+2*T)+b):g<=o?(_=0,g=Math.min(Math.max(-F,-T),F),h=g*(g+2*T)+b):(_=Math.max(0,-(L*F+e)),g=_>0?F:Math.min(Math.max(-F,-T),F),h=-_*_+g*(g+2*T)+b);else g=L>0?-F:F,_=Math.max(0,-(L*g+e)),h=-_*_+g*(g+2*T)+b;return ve&&ve.copy(this.origin).addScaledVector(this.direction,_),Ve&&Ve.copy(p0).addScaledVector(Rp,g),h}intersectSphere(I,J){uu.subVectors(I.center,this.origin);const ve=uu.dot(this.direction),Ve=uu.dot(uu)-ve*ve,F=I.radius*I.radius;if(Ve>F)return null;const L=Math.sqrt(F-Ve),e=ve-L,T=ve+L;return T<0?null:e<0?this.at(T,J):this.at(e,J)}intersectsSphere(I){return this.distanceSqToPoint(I.center)<=I.radius*I.radius}distanceToPlane(I){const J=I.normal.dot(this.direction);if(J===0)return I.distanceToPoint(this.origin)===0?0:null;const ve=-(this.origin.dot(I.normal)+I.constant)/J;return ve>=0?ve:null}intersectPlane(I,J){const ve=this.distanceToPlane(I);return ve===null?null:this.at(ve,J)}intersectsPlane(I){const J=I.distanceToPoint(this.origin);return J===0||I.normal.dot(this.direction)*J<0}intersectBox(I,J){let ve,Ve,F,L,e,T;const b=1/this.direction.x,a=1/this.direction.y,_=1/this.direction.z,g=this.origin;return b>=0?(ve=(I.min.x-g.x)*b,Ve=(I.max.x-g.x)*b):(ve=(I.max.x-g.x)*b,Ve=(I.min.x-g.x)*b),a>=0?(F=(I.min.y-g.y)*a,L=(I.max.y-g.y)*a):(F=(I.max.y-g.y)*a,L=(I.min.y-g.y)*a),ve>L||F>Ve||((F>ve||isNaN(ve))&&(ve=F),(L<Ve||isNaN(Ve))&&(Ve=L),_>=0?(e=(I.min.z-g.z)*_,T=(I.max.z-g.z)*_):(e=(I.max.z-g.z)*_,T=(I.min.z-g.z)*_),ve>T||e>Ve)||((e>ve||ve!==ve)&&(ve=e),(T<Ve||Ve!==Ve)&&(Ve=T),Ve<0)?null:this.at(ve>=0?ve:Ve,J)}intersectsBox(I){return this.intersectBox(I,uu)!==null}intersectTriangle(I,J,ve,Ve,F){d0.subVectors(J,I),Ip.subVectors(ve,I),m0.crossVectors(d0,Ip);let L=this.direction.dot(m0),e;if(L>0){if(Ve)return null;e=1}else if(L<0)e=-1,L=-L;else return null;Iu.subVectors(this.origin,I);const T=e*this.direction.dot(Ip.crossVectors(Iu,Ip));if(T<0)return null;const b=e*this.direction.dot(d0.cross(Iu));if(b<0||T+b>L)return null;const a=-e*Iu.dot(m0);return a<0?null:this.at(a/L,F)}applyMatrix4(I){return this.origin.applyMatrix4(I),this.direction.transformDirection(I),this}equals(I){return I.origin.equals(this.origin)&&I.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ja{constructor(I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i){ja.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I!==void 0&&this.set(I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i)}set(I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i){const n=this.elements;return n[0]=I,n[4]=J,n[8]=ve,n[12]=Ve,n[1]=F,n[5]=L,n[9]=e,n[13]=T,n[2]=b,n[6]=a,n[10]=_,n[14]=g,n[3]=h,n[7]=o,n[11]=t,n[15]=i,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ja().fromArray(this.elements)}copy(I){const J=this.elements,ve=I.elements;return J[0]=ve[0],J[1]=ve[1],J[2]=ve[2],J[3]=ve[3],J[4]=ve[4],J[5]=ve[5],J[6]=ve[6],J[7]=ve[7],J[8]=ve[8],J[9]=ve[9],J[10]=ve[10],J[11]=ve[11],J[12]=ve[12],J[13]=ve[13],J[14]=ve[14],J[15]=ve[15],this}copyPosition(I){const J=this.elements,ve=I.elements;return J[12]=ve[12],J[13]=ve[13],J[14]=ve[14],this}setFromMatrix3(I){const J=I.elements;return this.set(J[0],J[3],J[6],0,J[1],J[4],J[7],0,J[2],J[5],J[8],0,0,0,0,1),this}extractBasis(I,J,ve){return I.setFromMatrixColumn(this,0),J.setFromMatrixColumn(this,1),ve.setFromMatrixColumn(this,2),this}makeBasis(I,J,ve){return this.set(I.x,J.x,ve.x,0,I.y,J.y,ve.y,0,I.z,J.z,ve.z,0,0,0,0,1),this}extractRotation(I){const J=this.elements,ve=I.elements,Ve=1/sf.setFromMatrixColumn(I,0).length(),F=1/sf.setFromMatrixColumn(I,1).length(),L=1/sf.setFromMatrixColumn(I,2).length();return J[0]=ve[0]*Ve,J[1]=ve[1]*Ve,J[2]=ve[2]*Ve,J[3]=0,J[4]=ve[4]*F,J[5]=ve[5]*F,J[6]=ve[6]*F,J[7]=0,J[8]=ve[8]*L,J[9]=ve[9]*L,J[10]=ve[10]*L,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromEuler(I){const J=this.elements,ve=I.x,Ve=I.y,F=I.z,L=Math.cos(ve),e=Math.sin(ve),T=Math.cos(Ve),b=Math.sin(Ve),a=Math.cos(F),_=Math.sin(F);if(I.order==="XYZ"){const g=L*a,h=L*_,o=e*a,t=e*_;J[0]=T*a,J[4]=-T*_,J[8]=b,J[1]=h+o*b,J[5]=g-t*b,J[9]=-e*T,J[2]=t-g*b,J[6]=o+h*b,J[10]=L*T}else if(I.order==="YXZ"){const g=T*a,h=T*_,o=b*a,t=b*_;J[0]=g+t*e,J[4]=o*e-h,J[8]=L*b,J[1]=L*_,J[5]=L*a,J[9]=-e,J[2]=h*e-o,J[6]=t+g*e,J[10]=L*T}else if(I.order==="ZXY"){const g=T*a,h=T*_,o=b*a,t=b*_;J[0]=g-t*e,J[4]=-L*_,J[8]=o+h*e,J[1]=h+o*e,J[5]=L*a,J[9]=t-g*e,J[2]=-L*b,J[6]=e,J[10]=L*T}else if(I.order==="ZYX"){const g=L*a,h=L*_,o=e*a,t=e*_;J[0]=T*a,J[4]=o*b-h,J[8]=g*b+t,J[1]=T*_,J[5]=t*b+g,J[9]=h*b-o,J[2]=-b,J[6]=e*T,J[10]=L*T}else if(I.order==="YZX"){const g=L*T,h=L*b,o=e*T,t=e*b;J[0]=T*a,J[4]=t-g*_,J[8]=o*_+h,J[1]=_,J[5]=L*a,J[9]=-e*a,J[2]=-b*a,J[6]=h*_+o,J[10]=g-t*_}else if(I.order==="XZY"){const g=L*T,h=L*b,o=e*T,t=e*b;J[0]=T*a,J[4]=-_,J[8]=b*a,J[1]=g*_+t,J[5]=L*a,J[9]=h*_-o,J[2]=o*_-h,J[6]=e*a,J[10]=t*_+g}return J[3]=0,J[7]=0,J[11]=0,J[12]=0,J[13]=0,J[14]=0,J[15]=1,this}makeRotationFromQuaternion(I){return this.compose(C2,I,P2)}lookAt(I,J,ve){const Ve=this.elements;return Us.subVectors(I,J),Us.lengthSq()===0&&(Us.z=1),Us.normalize(),Ou.crossVectors(ve,Us),Ou.lengthSq()===0&&(Math.abs(ve.z)===1?Us.x+=1e-4:Us.z+=1e-4,Us.normalize(),Ou.crossVectors(ve,Us)),Ou.normalize(),Op.crossVectors(Us,Ou),Ve[0]=Ou.x,Ve[4]=Op.x,Ve[8]=Us.x,Ve[1]=Ou.y,Ve[5]=Op.y,Ve[9]=Us.y,Ve[2]=Ou.z,Ve[6]=Op.z,Ve[10]=Us.z,this}multiply(I){return this.multiplyMatrices(this,I)}premultiply(I){return this.multiplyMatrices(I,this)}multiplyMatrices(I,J){const ve=I.elements,Ve=J.elements,F=this.elements,L=ve[0],e=ve[4],T=ve[8],b=ve[12],a=ve[1],_=ve[5],g=ve[9],h=ve[13],o=ve[2],t=ve[6],i=ve[10],n=ve[14],r=ve[3],s=ve[7],l=ve[11],u=ve[15],d=Ve[0],c=Ve[4],w=Ve[8],m=Ve[12],f=Ve[1],x=Ve[5],y=Ve[9],v=Ve[13],M=Ve[2],p=Ve[6],S=Ve[10],A=Ve[14],k=Ve[3],C=Ve[7],P=Ve[11],R=Ve[15];return F[0]=L*d+e*f+T*M+b*k,F[4]=L*c+e*x+T*p+b*C,F[8]=L*w+e*y+T*S+b*P,F[12]=L*m+e*v+T*A+b*R,F[1]=a*d+_*f+g*M+h*k,F[5]=a*c+_*x+g*p+h*C,F[9]=a*w+_*y+g*S+h*P,F[13]=a*m+_*v+g*A+h*R,F[2]=o*d+t*f+i*M+n*k,F[6]=o*c+t*x+i*p+n*C,F[10]=o*w+t*y+i*S+n*P,F[14]=o*m+t*v+i*A+n*R,F[3]=r*d+s*f+l*M+u*k,F[7]=r*c+s*x+l*p+u*C,F[11]=r*w+s*y+l*S+u*P,F[15]=r*m+s*v+l*A+u*R,this}multiplyScalar(I){const J=this.elements;return J[0]*=I,J[4]*=I,J[8]*=I,J[12]*=I,J[1]*=I,J[5]*=I,J[9]*=I,J[13]*=I,J[2]*=I,J[6]*=I,J[10]*=I,J[14]*=I,J[3]*=I,J[7]*=I,J[11]*=I,J[15]*=I,this}determinant(){const I=this.elements,J=I[0],ve=I[4],Ve=I[8],F=I[12],L=I[1],e=I[5],T=I[9],b=I[13],a=I[2],_=I[6],g=I[10],h=I[14],o=I[3],t=I[7],i=I[11],n=I[15];return o*(+F*T*_-Ve*b*_-F*e*g+ve*b*g+Ve*e*h-ve*T*h)+t*(+J*T*h-J*b*g+F*L*g-Ve*L*h+Ve*b*a-F*T*a)+i*(+J*b*_-J*e*h-F*L*_+ve*L*h+F*e*a-ve*b*a)+n*(-Ve*e*a-J*T*_+J*e*g+Ve*L*_-ve*L*g+ve*T*a)}transpose(){const I=this.elements;let J;return J=I[1],I[1]=I[4],I[4]=J,J=I[2],I[2]=I[8],I[8]=J,J=I[6],I[6]=I[9],I[9]=J,J=I[3],I[3]=I[12],I[12]=J,J=I[7],I[7]=I[13],I[13]=J,J=I[11],I[11]=I[14],I[14]=J,this}setPosition(I,J,ve){const Ve=this.elements;return I.isVector3?(Ve[12]=I.x,Ve[13]=I.y,Ve[14]=I.z):(Ve[12]=I,Ve[13]=J,Ve[14]=ve),this}invert(){const I=this.elements,J=I[0],ve=I[1],Ve=I[2],F=I[3],L=I[4],e=I[5],T=I[6],b=I[7],a=I[8],_=I[9],g=I[10],h=I[11],o=I[12],t=I[13],i=I[14],n=I[15],r=_*i*b-t*g*b+t*T*h-e*i*h-_*T*n+e*g*n,s=o*g*b-a*i*b-o*T*h+L*i*h+a*T*n-L*g*n,l=a*t*b-o*_*b+o*e*h-L*t*h-a*e*n+L*_*n,u=o*_*T-a*t*T-o*e*g+L*t*g+a*e*i-L*_*i,d=J*r+ve*s+Ve*l+F*u;if(d===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const c=1/d;return I[0]=r*c,I[1]=(t*g*F-_*i*F-t*Ve*h+ve*i*h+_*Ve*n-ve*g*n)*c,I[2]=(e*i*F-t*T*F+t*Ve*b-ve*i*b-e*Ve*n+ve*T*n)*c,I[3]=(_*T*F-e*g*F-_*Ve*b+ve*g*b+e*Ve*h-ve*T*h)*c,I[4]=s*c,I[5]=(a*i*F-o*g*F+o*Ve*h-J*i*h-a*Ve*n+J*g*n)*c,I[6]=(o*T*F-L*i*F-o*Ve*b+J*i*b+L*Ve*n-J*T*n)*c,I[7]=(L*g*F-a*T*F+a*Ve*b-J*g*b-L*Ve*h+J*T*h)*c,I[8]=l*c,I[9]=(o*_*F-a*t*F-o*ve*h+J*t*h+a*ve*n-J*_*n)*c,I[10]=(L*t*F-o*e*F+o*ve*b-J*t*b-L*ve*n+J*e*n)*c,I[11]=(a*e*F-L*_*F-a*ve*b+J*_*b+L*ve*h-J*e*h)*c,I[12]=u*c,I[13]=(a*t*Ve-o*_*Ve+o*ve*g-J*t*g-a*ve*i+J*_*i)*c,I[14]=(o*e*Ve-L*t*Ve-o*ve*T+J*t*T+L*ve*i-J*e*i)*c,I[15]=(L*_*Ve-a*e*Ve+a*ve*T-J*_*T-L*ve*g+J*e*g)*c,this}scale(I){const J=this.elements,ve=I.x,Ve=I.y,F=I.z;return J[0]*=ve,J[4]*=Ve,J[8]*=F,J[1]*=ve,J[5]*=Ve,J[9]*=F,J[2]*=ve,J[6]*=Ve,J[10]*=F,J[3]*=ve,J[7]*=Ve,J[11]*=F,this}getMaxScaleOnAxis(){const I=this.elements,J=I[0]*I[0]+I[1]*I[1]+I[2]*I[2],ve=I[4]*I[4]+I[5]*I[5]+I[6]*I[6],Ve=I[8]*I[8]+I[9]*I[9]+I[10]*I[10];return Math.sqrt(Math.max(J,ve,Ve))}makeTranslation(I,J,ve){return I.isVector3?this.set(1,0,0,I.x,0,1,0,I.y,0,0,1,I.z,0,0,0,1):this.set(1,0,0,I,0,1,0,J,0,0,1,ve,0,0,0,1),this}makeRotationX(I){const J=Math.cos(I),ve=Math.sin(I);return this.set(1,0,0,0,0,J,-ve,0,0,ve,J,0,0,0,0,1),this}makeRotationY(I){const J=Math.cos(I),ve=Math.sin(I);return this.set(J,0,ve,0,0,1,0,0,-ve,0,J,0,0,0,0,1),this}makeRotationZ(I){const J=Math.cos(I),ve=Math.sin(I);return this.set(J,-ve,0,0,ve,J,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(I,J){const ve=Math.cos(J),Ve=Math.sin(J),F=1-ve,L=I.x,e=I.y,T=I.z,b=F*L,a=F*e;return this.set(b*L+ve,b*e-Ve*T,b*T+Ve*e,0,b*e+Ve*T,a*e+ve,a*T-Ve*L,0,b*T-Ve*e,a*T+Ve*L,F*T*T+ve,0,0,0,0,1),this}makeScale(I,J,ve){return this.set(I,0,0,0,0,J,0,0,0,0,ve,0,0,0,0,1),this}makeShear(I,J,ve,Ve,F,L){return this.set(1,ve,F,0,I,1,L,0,J,Ve,1,0,0,0,0,1),this}compose(I,J,ve){const Ve=this.elements,F=J._x,L=J._y,e=J._z,T=J._w,b=F+F,a=L+L,_=e+e,g=F*b,h=F*a,o=F*_,t=L*a,i=L*_,n=e*_,r=T*b,s=T*a,l=T*_,u=ve.x,d=ve.y,c=ve.z;return Ve[0]=(1-(t+n))*u,Ve[1]=(h+l)*u,Ve[2]=(o-s)*u,Ve[3]=0,Ve[4]=(h-l)*d,Ve[5]=(1-(g+n))*d,Ve[6]=(i+r)*d,Ve[7]=0,Ve[8]=(o+s)*c,Ve[9]=(i-r)*c,Ve[10]=(1-(g+t))*c,Ve[11]=0,Ve[12]=I.x,Ve[13]=I.y,Ve[14]=I.z,Ve[15]=1,this}decompose(I,J,ve){const Ve=this.elements;let F=sf.set(Ve[0],Ve[1],Ve[2]).length();const L=sf.set(Ve[4],Ve[5],Ve[6]).length(),e=sf.set(Ve[8],Ve[9],Ve[10]).length();this.determinant()<0&&(F=-F),I.x=Ve[12],I.y=Ve[13],I.z=Ve[14],Tl.copy(this);const b=1/F,a=1/L,_=1/e;return Tl.elements[0]*=b,Tl.elements[1]*=b,Tl.elements[2]*=b,Tl.elements[4]*=a,Tl.elements[5]*=a,Tl.elements[6]*=a,Tl.elements[8]*=_,Tl.elements[9]*=_,Tl.elements[10]*=_,J.setFromRotationMatrix(Tl),ve.x=F,ve.y=L,ve.z=e,this}makePerspective(I,J,ve,Ve,F,L,e=mu){const T=this.elements,b=2*F/(J-I),a=2*F/(ve-Ve),_=(J+I)/(J-I),g=(ve+Ve)/(ve-Ve);let h,o;if(e===mu)h=-(L+F)/(L-F),o=-2*L*F/(L-F);else if(e===nd)h=-L/(L-F),o=-L*F/(L-F);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+e);return T[0]=b,T[4]=0,T[8]=_,T[12]=0,T[1]=0,T[5]=a,T[9]=g,T[13]=0,T[2]=0,T[6]=0,T[10]=h,T[14]=o,T[3]=0,T[7]=0,T[11]=-1,T[15]=0,this}makeOrthographic(I,J,ve,Ve,F,L,e=mu){const T=this.elements,b=1/(J-I),a=1/(ve-Ve),_=1/(L-F),g=(J+I)*b,h=(ve+Ve)*a;let o,t;if(e===mu)o=(L+F)*_,t=-2*_;else if(e===nd)o=F*_,t=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+e);return T[0]=2*b,T[4]=0,T[8]=0,T[12]=-g,T[1]=0,T[5]=2*a,T[9]=0,T[13]=-h,T[2]=0,T[6]=0,T[10]=t,T[14]=-o,T[3]=0,T[7]=0,T[11]=0,T[15]=1,this}equals(I){const J=this.elements,ve=I.elements;for(let Ve=0;Ve<16;Ve++)if(J[Ve]!==ve[Ve])return!1;return!0}fromArray(I,J=0){for(let ve=0;ve<16;ve++)this.elements[ve]=I[ve+J];return this}toArray(I=[],J=0){const ve=this.elements;return I[J]=ve[0],I[J+1]=ve[1],I[J+2]=ve[2],I[J+3]=ve[3],I[J+4]=ve[4],I[J+5]=ve[5],I[J+6]=ve[6],I[J+7]=ve[7],I[J+8]=ve[8],I[J+9]=ve[9],I[J+10]=ve[10],I[J+11]=ve[11],I[J+12]=ve[12],I[J+13]=ve[13],I[J+14]=ve[14],I[J+15]=ve[15],I}}const sf=new Hn,Tl=new ja,C2=new Hn(0,0,0),P2=new Hn(1,1,1),Ou=new Hn,Op=new Hn,Us=new Hn,xv=new ja,_v=new _c;class ud{constructor(I=0,J=0,ve=0,Ve=ud.DEFAULT_ORDER){this.isEuler=!0,this._x=I,this._y=J,this._z=ve,this._order=Ve}get x(){return this._x}set x(I){this._x=I,this._onChangeCallback()}get y(){return this._y}set y(I){this._y=I,this._onChangeCallback()}get z(){return this._z}set z(I){this._z=I,this._onChangeCallback()}get order(){return this._order}set order(I){this._order=I,this._onChangeCallback()}set(I,J,ve,Ve=this._order){return this._x=I,this._y=J,this._z=ve,this._order=Ve,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(I){return this._x=I._x,this._y=I._y,this._z=I._z,this._order=I._order,this._onChangeCallback(),this}setFromRotationMatrix(I,J=this._order,ve=!0){const Ve=I.elements,F=Ve[0],L=Ve[4],e=Ve[8],T=Ve[1],b=Ve[5],a=Ve[9],_=Ve[2],g=Ve[6],h=Ve[10];switch(J){case"XYZ":this._y=Math.asin(Co(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(-a,h),this._z=Math.atan2(-L,F)):(this._x=Math.atan2(g,b),this._z=0);break;case"YXZ":this._x=Math.asin(-Co(a,-1,1)),Math.abs(a)<.9999999?(this._y=Math.atan2(e,h),this._z=Math.atan2(T,b)):(this._y=Math.atan2(-_,F),this._z=0);break;case"ZXY":this._x=Math.asin(Co(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-_,h),this._z=Math.atan2(-L,b)):(this._y=0,this._z=Math.atan2(T,F));break;case"ZYX":this._y=Math.asin(-Co(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(g,h),this._z=Math.atan2(T,F)):(this._x=0,this._z=Math.atan2(-L,b));break;case"YZX":this._z=Math.asin(Co(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(-a,b),this._y=Math.atan2(-_,F)):(this._x=0,this._y=Math.atan2(e,h));break;case"XZY":this._z=Math.asin(-Co(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(g,b),this._y=Math.atan2(e,F)):(this._x=Math.atan2(-a,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+J)}return this._order=J,ve===!0&&this._onChangeCallback(),this}setFromQuaternion(I,J,ve){return xv.makeRotationFromQuaternion(I),this.setFromRotationMatrix(xv,J,ve)}setFromVector3(I,J=this._order){return this.set(I.x,I.y,I.z,J)}reorder(I){return _v.setFromEuler(this),this.setFromQuaternion(_v,I)}equals(I){return I._x===this._x&&I._y===this._y&&I._z===this._z&&I._order===this._order}fromArray(I){return this._x=I[0],this._y=I[1],this._z=I[2],I[3]!==void 0&&(this._order=I[3]),this._onChangeCallback(),this}toArray(I=[],J=0){return I[J]=this._x,I[J+1]=this._y,I[J+2]=this._z,I[J+3]=this._order,I}_onChange(I){return this._onChangeCallback=I,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ud.DEFAULT_ORDER="XYZ";class U1{constructor(){this.mask=1}set(I){this.mask=(1<<I|0)>>>0}enable(I){this.mask|=1<<I|0}enableAll(){this.mask=-1}toggle(I){this.mask^=1<<I|0}disable(I){this.mask&=~(1<<I|0)}disableAll(){this.mask=0}test(I){return(this.mask&I.mask)!==0}isEnabled(I){return(this.mask&(1<<I|0))!==0}}let R2=0;const bv=new Hn,lf=new _c,cu=new ja,Dp=new Hn,_h=new Hn,I2=new Hn,O2=new _c,wv=new Hn(1,0,0),Tv=new Hn(0,1,0),Mv=new Hn(0,0,1),D2={type:"added"},Av={type:"removed"};class Io extends Ac{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:R2++}),this.uuid=Uf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Io.DEFAULT_UP.clone();const I=new Hn,J=new ud,ve=new _c,Ve=new Hn(1,1,1);function F(){ve.setFromEuler(J,!1)}function L(){J.setFromQuaternion(ve,void 0,!1)}J._onChange(F),ve._onChange(L),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:I},rotation:{configurable:!0,enumerable:!0,value:J},quaternion:{configurable:!0,enumerable:!0,value:ve},scale:{configurable:!0,enumerable:!0,value:Ve},modelViewMatrix:{value:new ja},normalMatrix:{value:new li}}),this.matrix=new ja,this.matrixWorld=new ja,this.matrixAutoUpdate=Io.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Io.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new U1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(I){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(I),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(I){return this.quaternion.premultiply(I),this}setRotationFromAxisAngle(I,J){this.quaternion.setFromAxisAngle(I,J)}setRotationFromEuler(I){this.quaternion.setFromEuler(I,!0)}setRotationFromMatrix(I){this.quaternion.setFromRotationMatrix(I)}setRotationFromQuaternion(I){this.quaternion.copy(I)}rotateOnAxis(I,J){return lf.setFromAxisAngle(I,J),this.quaternion.multiply(lf),this}rotateOnWorldAxis(I,J){return lf.setFromAxisAngle(I,J),this.quaternion.premultiply(lf),this}rotateX(I){return this.rotateOnAxis(wv,I)}rotateY(I){return this.rotateOnAxis(Tv,I)}rotateZ(I){return this.rotateOnAxis(Mv,I)}translateOnAxis(I,J){return bv.copy(I).applyQuaternion(this.quaternion),this.position.add(bv.multiplyScalar(J)),this}translateX(I){return this.translateOnAxis(wv,I)}translateY(I){return this.translateOnAxis(Tv,I)}translateZ(I){return this.translateOnAxis(Mv,I)}localToWorld(I){return this.updateWorldMatrix(!0,!1),I.applyMatrix4(this.matrixWorld)}worldToLocal(I){return this.updateWorldMatrix(!0,!1),I.applyMatrix4(cu.copy(this.matrixWorld).invert())}lookAt(I,J,ve){I.isVector3?Dp.copy(I):Dp.set(I,J,ve);const Ve=this.parent;this.updateWorldMatrix(!0,!1),_h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cu.lookAt(_h,Dp,this.up):cu.lookAt(Dp,_h,this.up),this.quaternion.setFromRotationMatrix(cu),Ve&&(cu.extractRotation(Ve.matrixWorld),lf.setFromRotationMatrix(cu),this.quaternion.premultiply(lf.invert()))}add(I){if(arguments.length>1){for(let J=0;J<arguments.length;J++)this.add(arguments[J]);return this}return I===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",I),this):(I&&I.isObject3D?(I.parent!==null&&I.parent.remove(I),I.parent=this,this.children.push(I),I.dispatchEvent(D2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",I),this)}remove(I){if(arguments.length>1){for(let ve=0;ve<arguments.length;ve++)this.remove(arguments[ve]);return this}const J=this.children.indexOf(I);return J!==-1&&(I.parent=null,this.children.splice(J,1),I.dispatchEvent(Av)),this}removeFromParent(){const I=this.parent;return I!==null&&I.remove(this),this}clear(){for(let I=0;I<this.children.length;I++){const J=this.children[I];J.parent=null,J.dispatchEvent(Av)}return this.children.length=0,this}attach(I){return this.updateWorldMatrix(!0,!1),cu.copy(this.matrixWorld).invert(),I.parent!==null&&(I.parent.updateWorldMatrix(!0,!1),cu.multiply(I.parent.matrixWorld)),I.applyMatrix4(cu),this.add(I),I.updateWorldMatrix(!1,!0),this}getObjectById(I){return this.getObjectByProperty("id",I)}getObjectByName(I){return this.getObjectByProperty("name",I)}getObjectByProperty(I,J){if(this[I]===J)return this;for(let ve=0,Ve=this.children.length;ve<Ve;ve++){const L=this.children[ve].getObjectByProperty(I,J);if(L!==void 0)return L}}getObjectsByProperty(I,J){let ve=[];this[I]===J&&ve.push(this);for(let Ve=0,F=this.children.length;Ve<F;Ve++){const L=this.children[Ve].getObjectsByProperty(I,J);L.length>0&&(ve=ve.concat(L))}return ve}getWorldPosition(I){return this.updateWorldMatrix(!0,!1),I.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(I){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,I,I2),I}getWorldScale(I){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,O2,I),I}getWorldDirection(I){this.updateWorldMatrix(!0,!1);const J=this.matrixWorld.elements;return I.set(J[8],J[9],J[10]).normalize()}raycast(){}traverse(I){I(this);const J=this.children;for(let ve=0,Ve=J.length;ve<Ve;ve++)J[ve].traverse(I)}traverseVisible(I){if(this.visible===!1)return;I(this);const J=this.children;for(let ve=0,Ve=J.length;ve<Ve;ve++)J[ve].traverseVisible(I)}traverseAncestors(I){const J=this.parent;J!==null&&(I(J),J.traverseAncestors(I))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(I){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||I)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,I=!0);const J=this.children;for(let ve=0,Ve=J.length;ve<Ve;ve++){const F=J[ve];(F.matrixWorldAutoUpdate===!0||I===!0)&&F.updateMatrixWorld(I)}}updateWorldMatrix(I,J){const ve=this.parent;if(I===!0&&ve!==null&&ve.matrixWorldAutoUpdate===!0&&ve.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),J===!0){const Ve=this.children;for(let F=0,L=Ve.length;F<L;F++){const e=Ve[F];e.matrixWorldAutoUpdate===!0&&e.updateWorldMatrix(!1,!0)}}}toJSON(I){const J=I===void 0||typeof I=="string",ve={};J&&(I={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ve.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const Ve={};Ve.uuid=this.uuid,Ve.type=this.type,this.name!==""&&(Ve.name=this.name),this.castShadow===!0&&(Ve.castShadow=!0),this.receiveShadow===!0&&(Ve.receiveShadow=!0),this.visible===!1&&(Ve.visible=!1),this.frustumCulled===!1&&(Ve.frustumCulled=!1),this.renderOrder!==0&&(Ve.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(Ve.userData=this.userData),Ve.layers=this.layers.mask,Ve.matrix=this.matrix.toArray(),Ve.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(Ve.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ve.type="InstancedMesh",Ve.count=this.count,Ve.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(Ve.instanceColor=this.instanceColor.toJSON()));function F(e,T){return e[T.uuid]===void 0&&(e[T.uuid]=T.toJSON(I)),T.uuid}if(this.isScene)this.background&&(this.background.isColor?Ve.background=this.background.toJSON():this.background.isTexture&&(Ve.background=this.background.toJSON(I).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(Ve.environment=this.environment.toJSON(I).uuid);else if(this.isMesh||this.isLine||this.isPoints){Ve.geometry=F(I.geometries,this.geometry);const e=this.geometry.parameters;if(e!==void 0&&e.shapes!==void 0){const T=e.shapes;if(Array.isArray(T))for(let b=0,a=T.length;b<a;b++){const _=T[b];F(I.shapes,_)}else F(I.shapes,T)}}if(this.isSkinnedMesh&&(Ve.bindMode=this.bindMode,Ve.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(F(I.skeletons,this.skeleton),Ve.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const e=[];for(let T=0,b=this.material.length;T<b;T++)e.push(F(I.materials,this.material[T]));Ve.material=e}else Ve.material=F(I.materials,this.material);if(this.children.length>0){Ve.children=[];for(let e=0;e<this.children.length;e++)Ve.children.push(this.children[e].toJSON(I).object)}if(this.animations.length>0){Ve.animations=[];for(let e=0;e<this.animations.length;e++){const T=this.animations[e];Ve.animations.push(F(I.animations,T))}}if(J){const e=L(I.geometries),T=L(I.materials),b=L(I.textures),a=L(I.images),_=L(I.shapes),g=L(I.skeletons),h=L(I.animations),o=L(I.nodes);e.length>0&&(ve.geometries=e),T.length>0&&(ve.materials=T),b.length>0&&(ve.textures=b),a.length>0&&(ve.images=a),_.length>0&&(ve.shapes=_),g.length>0&&(ve.skeletons=g),h.length>0&&(ve.animations=h),o.length>0&&(ve.nodes=o)}return ve.object=Ve,ve;function L(e){const T=[];for(const b in e){const a=e[b];delete a.metadata,T.push(a)}return T}}clone(I){return new this.constructor().copy(this,I)}copy(I,J=!0){if(this.name=I.name,this.up.copy(I.up),this.position.copy(I.position),this.rotation.order=I.rotation.order,this.quaternion.copy(I.quaternion),this.scale.copy(I.scale),this.matrix.copy(I.matrix),this.matrixWorld.copy(I.matrixWorld),this.matrixAutoUpdate=I.matrixAutoUpdate,this.matrixWorldNeedsUpdate=I.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=I.matrixWorldAutoUpdate,this.layers.mask=I.layers.mask,this.visible=I.visible,this.castShadow=I.castShadow,this.receiveShadow=I.receiveShadow,this.frustumCulled=I.frustumCulled,this.renderOrder=I.renderOrder,this.animations=I.animations.slice(),this.userData=JSON.parse(JSON.stringify(I.userData)),J===!0)for(let ve=0;ve<I.children.length;ve++){const Ve=I.children[ve];this.add(Ve.clone())}return this}}Io.DEFAULT_UP=new Hn(0,1,0);Io.DEFAULT_MATRIX_AUTO_UPDATE=!0;Io.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ml=new Hn,fu=new Hn,g0=new Hn,hu=new Hn,uf=new Hn,cf=new Hn,Sv=new Hn,v0=new Hn,y0=new Hn,x0=new Hn;let zp=!1;class Sl{constructor(I=new Hn,J=new Hn,ve=new Hn){this.a=I,this.b=J,this.c=ve}static getNormal(I,J,ve,Ve){Ve.subVectors(ve,J),Ml.subVectors(I,J),Ve.cross(Ml);const F=Ve.lengthSq();return F>0?Ve.multiplyScalar(1/Math.sqrt(F)):Ve.set(0,0,0)}static getBarycoord(I,J,ve,Ve,F){Ml.subVectors(Ve,J),fu.subVectors(ve,J),g0.subVectors(I,J);const L=Ml.dot(Ml),e=Ml.dot(fu),T=Ml.dot(g0),b=fu.dot(fu),a=fu.dot(g0),_=L*b-e*e;if(_===0)return F.set(-2,-1,-1);const g=1/_,h=(b*T-e*a)*g,o=(L*a-e*T)*g;return F.set(1-h-o,o,h)}static containsPoint(I,J,ve,Ve){return this.getBarycoord(I,J,ve,Ve,hu),hu.x>=0&&hu.y>=0&&hu.x+hu.y<=1}static getUV(I,J,ve,Ve,F,L,e,T){return zp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),zp=!0),this.getInterpolation(I,J,ve,Ve,F,L,e,T)}static getInterpolation(I,J,ve,Ve,F,L,e,T){return this.getBarycoord(I,J,ve,Ve,hu),T.setScalar(0),T.addScaledVector(F,hu.x),T.addScaledVector(L,hu.y),T.addScaledVector(e,hu.z),T}static isFrontFacing(I,J,ve,Ve){return Ml.subVectors(ve,J),fu.subVectors(I,J),Ml.cross(fu).dot(Ve)<0}set(I,J,ve){return this.a.copy(I),this.b.copy(J),this.c.copy(ve),this}setFromPointsAndIndices(I,J,ve,Ve){return this.a.copy(I[J]),this.b.copy(I[ve]),this.c.copy(I[Ve]),this}setFromAttributeAndIndices(I,J,ve,Ve){return this.a.fromBufferAttribute(I,J),this.b.fromBufferAttribute(I,ve),this.c.fromBufferAttribute(I,Ve),this}clone(){return new this.constructor().copy(this)}copy(I){return this.a.copy(I.a),this.b.copy(I.b),this.c.copy(I.c),this}getArea(){return Ml.subVectors(this.c,this.b),fu.subVectors(this.a,this.b),Ml.cross(fu).length()*.5}getMidpoint(I){return I.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(I){return Sl.getNormal(this.a,this.b,this.c,I)}getPlane(I){return I.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(I,J){return Sl.getBarycoord(I,this.a,this.b,this.c,J)}getUV(I,J,ve,Ve,F){return zp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),zp=!0),Sl.getInterpolation(I,this.a,this.b,this.c,J,ve,Ve,F)}getInterpolation(I,J,ve,Ve,F){return Sl.getInterpolation(I,this.a,this.b,this.c,J,ve,Ve,F)}containsPoint(I){return Sl.containsPoint(I,this.a,this.b,this.c)}isFrontFacing(I){return Sl.isFrontFacing(this.a,this.b,this.c,I)}intersectsBox(I){return I.intersectsTriangle(this)}closestPointToPoint(I,J){const ve=this.a,Ve=this.b,F=this.c;let L,e;uf.subVectors(Ve,ve),cf.subVectors(F,ve),v0.subVectors(I,ve);const T=uf.dot(v0),b=cf.dot(v0);if(T<=0&&b<=0)return J.copy(ve);y0.subVectors(I,Ve);const a=uf.dot(y0),_=cf.dot(y0);if(a>=0&&_<=a)return J.copy(Ve);const g=T*_-a*b;if(g<=0&&T>=0&&a<=0)return L=T/(T-a),J.copy(ve).addScaledVector(uf,L);x0.subVectors(I,F);const h=uf.dot(x0),o=cf.dot(x0);if(o>=0&&h<=o)return J.copy(F);const t=h*b-T*o;if(t<=0&&b>=0&&o<=0)return e=b/(b-o),J.copy(ve).addScaledVector(cf,e);const i=a*o-h*_;if(i<=0&&_-a>=0&&h-o>=0)return Sv.subVectors(F,Ve),e=(_-a)/(_-a+(h-o)),J.copy(Ve).addScaledVector(Sv,e);const n=1/(i+t+g);return L=t*n,e=g*n,J.copy(ve).addScaledVector(uf,L).addScaledVector(cf,e)}equals(I){return I.a.equals(this.a)&&I.b.equals(this.b)&&I.c.equals(this.c)}}let z2=0;class Uh extends Ac{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:z2++}),this.uuid=Uf(),this.name="",this.type="Material",this.blending=Tf,this.side=Hu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=T1,this.blendDst=M1,this.blendEquation=xf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=D0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Z_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=o0,this.stencilZFail=o0,this.stencilZPass=o0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(I){this._alphaTest>0!=I>0&&this.version++,this._alphaTest=I}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(I){if(I!==void 0)for(const J in I){const ve=I[J];if(ve===void 0){console.warn(`THREE.Material: parameter '${J}' has value of undefined.`);continue}const Ve=this[J];if(Ve===void 0){console.warn(`THREE.Material: '${J}' is not a property of THREE.${this.type}.`);continue}Ve&&Ve.isColor?Ve.set(ve):Ve&&Ve.isVector3&&ve&&ve.isVector3?Ve.copy(ve):this[J]=ve}}toJSON(I){const J=I===void 0||typeof I=="string";J&&(I={textures:{},images:{}});const ve={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};ve.uuid=this.uuid,ve.type=this.type,this.name!==""&&(ve.name=this.name),this.color&&this.color.isColor&&(ve.color=this.color.getHex()),this.roughness!==void 0&&(ve.roughness=this.roughness),this.metalness!==void 0&&(ve.metalness=this.metalness),this.sheen!==void 0&&(ve.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ve.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(ve.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ve.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(ve.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ve.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(ve.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ve.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(ve.shininess=this.shininess),this.clearcoat!==void 0&&(ve.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ve.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ve.clearcoatMap=this.clearcoatMap.toJSON(I).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ve.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(I).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ve.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(I).uuid,ve.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(ve.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(ve.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(ve.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ve.iridescenceMap=this.iridescenceMap.toJSON(I).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ve.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(I).uuid),this.anisotropy!==void 0&&(ve.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(ve.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(ve.anisotropyMap=this.anisotropyMap.toJSON(I).uuid),this.map&&this.map.isTexture&&(ve.map=this.map.toJSON(I).uuid),this.matcap&&this.matcap.isTexture&&(ve.matcap=this.matcap.toJSON(I).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ve.alphaMap=this.alphaMap.toJSON(I).uuid),this.lightMap&&this.lightMap.isTexture&&(ve.lightMap=this.lightMap.toJSON(I).uuid,ve.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ve.aoMap=this.aoMap.toJSON(I).uuid,ve.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ve.bumpMap=this.bumpMap.toJSON(I).uuid,ve.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ve.normalMap=this.normalMap.toJSON(I).uuid,ve.normalMapType=this.normalMapType,ve.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ve.displacementMap=this.displacementMap.toJSON(I).uuid,ve.displacementScale=this.displacementScale,ve.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ve.roughnessMap=this.roughnessMap.toJSON(I).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ve.metalnessMap=this.metalnessMap.toJSON(I).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ve.emissiveMap=this.emissiveMap.toJSON(I).uuid),this.specularMap&&this.specularMap.isTexture&&(ve.specularMap=this.specularMap.toJSON(I).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ve.specularIntensityMap=this.specularIntensityMap.toJSON(I).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ve.specularColorMap=this.specularColorMap.toJSON(I).uuid),this.envMap&&this.envMap.isTexture&&(ve.envMap=this.envMap.toJSON(I).uuid,this.combine!==void 0&&(ve.combine=this.combine)),this.envMapIntensity!==void 0&&(ve.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(ve.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(ve.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ve.gradientMap=this.gradientMap.toJSON(I).uuid),this.transmission!==void 0&&(ve.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ve.transmissionMap=this.transmissionMap.toJSON(I).uuid),this.thickness!==void 0&&(ve.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ve.thicknessMap=this.thicknessMap.toJSON(I).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(ve.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(ve.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(ve.size=this.size),this.shadowSide!==null&&(ve.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(ve.sizeAttenuation=this.sizeAttenuation),this.blending!==Tf&&(ve.blending=this.blending),this.side!==Hu&&(ve.side=this.side),this.vertexColors&&(ve.vertexColors=!0),this.opacity<1&&(ve.opacity=this.opacity),this.transparent===!0&&(ve.transparent=this.transparent),ve.depthFunc=this.depthFunc,ve.depthTest=this.depthTest,ve.depthWrite=this.depthWrite,ve.colorWrite=this.colorWrite,ve.stencilWrite=this.stencilWrite,ve.stencilWriteMask=this.stencilWriteMask,ve.stencilFunc=this.stencilFunc,ve.stencilRef=this.stencilRef,ve.stencilFuncMask=this.stencilFuncMask,ve.stencilFail=this.stencilFail,ve.stencilZFail=this.stencilZFail,ve.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(ve.rotation=this.rotation),this.polygonOffset===!0&&(ve.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ve.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ve.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(ve.linewidth=this.linewidth),this.dashSize!==void 0&&(ve.dashSize=this.dashSize),this.gapSize!==void 0&&(ve.gapSize=this.gapSize),this.scale!==void 0&&(ve.scale=this.scale),this.dithering===!0&&(ve.dithering=!0),this.alphaTest>0&&(ve.alphaTest=this.alphaTest),this.alphaHash===!0&&(ve.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(ve.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(ve.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(ve.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(ve.wireframe=this.wireframe),this.wireframeLinewidth>1&&(ve.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ve.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ve.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(ve.flatShading=this.flatShading),this.visible===!1&&(ve.visible=!1),this.toneMapped===!1&&(ve.toneMapped=!1),this.fog===!1&&(ve.fog=!1),Object.keys(this.userData).length>0&&(ve.userData=this.userData);function Ve(F){const L=[];for(const e in F){const T=F[e];delete T.metadata,L.push(T)}return L}if(J){const F=Ve(I.textures),L=Ve(I.images);F.length>0&&(ve.textures=F),L.length>0&&(ve.images=L)}return ve}clone(){return new this.constructor().copy(this)}copy(I){this.name=I.name,this.blending=I.blending,this.side=I.side,this.vertexColors=I.vertexColors,this.opacity=I.opacity,this.transparent=I.transparent,this.blendSrc=I.blendSrc,this.blendDst=I.blendDst,this.blendEquation=I.blendEquation,this.blendSrcAlpha=I.blendSrcAlpha,this.blendDstAlpha=I.blendDstAlpha,this.blendEquationAlpha=I.blendEquationAlpha,this.depthFunc=I.depthFunc,this.depthTest=I.depthTest,this.depthWrite=I.depthWrite,this.stencilWriteMask=I.stencilWriteMask,this.stencilFunc=I.stencilFunc,this.stencilRef=I.stencilRef,this.stencilFuncMask=I.stencilFuncMask,this.stencilFail=I.stencilFail,this.stencilZFail=I.stencilZFail,this.stencilZPass=I.stencilZPass,this.stencilWrite=I.stencilWrite;const J=I.clippingPlanes;let ve=null;if(J!==null){const Ve=J.length;ve=new Array(Ve);for(let F=0;F!==Ve;++F)ve[F]=J[F].clone()}return this.clippingPlanes=ve,this.clipIntersection=I.clipIntersection,this.clipShadows=I.clipShadows,this.shadowSide=I.shadowSide,this.colorWrite=I.colorWrite,this.precision=I.precision,this.polygonOffset=I.polygonOffset,this.polygonOffsetFactor=I.polygonOffsetFactor,this.polygonOffsetUnits=I.polygonOffsetUnits,this.dithering=I.dithering,this.alphaTest=I.alphaTest,this.alphaHash=I.alphaHash,this.alphaToCoverage=I.alphaToCoverage,this.premultipliedAlpha=I.premultipliedAlpha,this.forceSinglePass=I.forceSinglePass,this.visible=I.visible,this.toneMapped=I.toneMapped,this.userData=JSON.parse(JSON.stringify(I.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(I){I===!0&&this.version++}}const j1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Al={h:0,s:0,l:0},Fp={h:0,s:0,l:0};function _0(be,I,J){return J<0&&(J+=1),J>1&&(J-=1),J<1/6?be+(I-be)*6*J:J<1/2?I:J<2/3?be+(I-be)*6*(2/3-J):be}class Vi{constructor(I,J,ve){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(I,J,ve)}set(I,J,ve){if(J===void 0&&ve===void 0){const Ve=I;Ve&&Ve.isColor?this.copy(Ve):typeof Ve=="number"?this.setHex(Ve):typeof Ve=="string"&&this.setStyle(Ve)}else this.setRGB(I,J,ve);return this}setScalar(I){return this.r=I,this.g=I,this.b=I,this}setHex(I,J=ei){return I=Math.floor(I),this.r=(I>>16&255)/255,this.g=(I>>8&255)/255,this.b=(I&255)/255,wl.toWorkingColorSpace(this,J),this}setRGB(I,J,ve,Ve=wl.workingColorSpace){return this.r=I,this.g=J,this.b=ve,wl.toWorkingColorSpace(this,Ve),this}setHSL(I,J,ve,Ve=wl.workingColorSpace){if(I=Z0(I,1),J=Co(J,0,1),ve=Co(ve,0,1),J===0)this.r=this.g=this.b=ve;else{const F=ve<=.5?ve*(1+J):ve+J-ve*J,L=2*ve-F;this.r=_0(L,F,I+1/3),this.g=_0(L,F,I),this.b=_0(L,F,I-1/3)}return wl.toWorkingColorSpace(this,Ve),this}setStyle(I,J=ei){function ve(F){F!==void 0&&parseFloat(F)<1&&console.warn("THREE.Color: Alpha component of "+I+" will be ignored.")}let Ve;if(Ve=/^(\w+)\(([^\)]*)\)/.exec(I)){let F;const L=Ve[1],e=Ve[2];switch(L){case"rgb":case"rgba":if(F=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(e))return ve(F[4]),this.setRGB(Math.min(255,parseInt(F[1],10))/255,Math.min(255,parseInt(F[2],10))/255,Math.min(255,parseInt(F[3],10))/255,J);if(F=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(e))return ve(F[4]),this.setRGB(Math.min(100,parseInt(F[1],10))/100,Math.min(100,parseInt(F[2],10))/100,Math.min(100,parseInt(F[3],10))/100,J);break;case"hsl":case"hsla":if(F=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(e))return ve(F[4]),this.setHSL(parseFloat(F[1])/360,parseFloat(F[2])/100,parseFloat(F[3])/100,J);break;default:console.warn("THREE.Color: Unknown color model "+I)}}else if(Ve=/^\#([A-Fa-f\d]+)$/.exec(I)){const F=Ve[1],L=F.length;if(L===3)return this.setRGB(parseInt(F.charAt(0),16)/15,parseInt(F.charAt(1),16)/15,parseInt(F.charAt(2),16)/15,J);if(L===6)return this.setHex(parseInt(F,16),J);console.warn("THREE.Color: Invalid hex color "+I)}else if(I&&I.length>0)return this.setColorName(I,J);return this}setColorName(I,J=ei){const ve=j1[I.toLowerCase()];return ve!==void 0?this.setHex(ve,J):console.warn("THREE.Color: Unknown color "+I),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(I){return this.r=I.r,this.g=I.g,this.b=I.b,this}copySRGBToLinear(I){return this.r=Mf(I.r),this.g=Mf(I.g),this.b=Mf(I.b),this}copyLinearToSRGB(I){return this.r=l0(I.r),this.g=l0(I.g),this.b=l0(I.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(I=ei){return wl.fromWorkingColorSpace(Lo.copy(this),I),Math.round(Co(Lo.r*255,0,255))*65536+Math.round(Co(Lo.g*255,0,255))*256+Math.round(Co(Lo.b*255,0,255))}getHexString(I=ei){return("000000"+this.getHex(I).toString(16)).slice(-6)}getHSL(I,J=wl.workingColorSpace){wl.fromWorkingColorSpace(Lo.copy(this),J);const ve=Lo.r,Ve=Lo.g,F=Lo.b,L=Math.max(ve,Ve,F),e=Math.min(ve,Ve,F);let T,b;const a=(e+L)/2;if(e===L)T=0,b=0;else{const _=L-e;switch(b=a<=.5?_/(L+e):_/(2-L-e),L){case ve:T=(Ve-F)/_+(Ve<F?6:0);break;case Ve:T=(F-ve)/_+2;break;case F:T=(ve-Ve)/_+4;break}T/=6}return I.h=T,I.s=b,I.l=a,I}getRGB(I,J=wl.workingColorSpace){return wl.fromWorkingColorSpace(Lo.copy(this),J),I.r=Lo.r,I.g=Lo.g,I.b=Lo.b,I}getStyle(I=ei){wl.fromWorkingColorSpace(Lo.copy(this),I);const J=Lo.r,ve=Lo.g,Ve=Lo.b;return I!==ei?`color(${I} ${J.toFixed(3)} ${ve.toFixed(3)} ${Ve.toFixed(3)})`:`rgb(${Math.round(J*255)},${Math.round(ve*255)},${Math.round(Ve*255)})`}offsetHSL(I,J,ve){return this.getHSL(Al),Al.h+=I,Al.s+=J,Al.l+=ve,this.setHSL(Al.h,Al.s,Al.l),this}add(I){return this.r+=I.r,this.g+=I.g,this.b+=I.b,this}addColors(I,J){return this.r=I.r+J.r,this.g=I.g+J.g,this.b=I.b+J.b,this}addScalar(I){return this.r+=I,this.g+=I,this.b+=I,this}sub(I){return this.r=Math.max(0,this.r-I.r),this.g=Math.max(0,this.g-I.g),this.b=Math.max(0,this.b-I.b),this}multiply(I){return this.r*=I.r,this.g*=I.g,this.b*=I.b,this}multiplyScalar(I){return this.r*=I,this.g*=I,this.b*=I,this}lerp(I,J){return this.r+=(I.r-this.r)*J,this.g+=(I.g-this.g)*J,this.b+=(I.b-this.b)*J,this}lerpColors(I,J,ve){return this.r=I.r+(J.r-I.r)*ve,this.g=I.g+(J.g-I.g)*ve,this.b=I.b+(J.b-I.b)*ve,this}lerpHSL(I,J){this.getHSL(Al),I.getHSL(Fp);const ve=Ph(Al.h,Fp.h,J),Ve=Ph(Al.s,Fp.s,J),F=Ph(Al.l,Fp.l,J);return this.setHSL(ve,Ve,F),this}setFromVector3(I){return this.r=I.x,this.g=I.y,this.b=I.z,this}applyMatrix3(I){const J=this.r,ve=this.g,Ve=this.b,F=I.elements;return this.r=F[0]*J+F[3]*ve+F[6]*Ve,this.g=F[1]*J+F[4]*ve+F[7]*Ve,this.b=F[2]*J+F[5]*ve+F[8]*Ve,this}equals(I){return I.r===this.r&&I.g===this.g&&I.b===this.b}fromArray(I,J=0){return this.r=I[J],this.g=I[J+1],this.b=I[J+2],this}toArray(I=[],J=0){return I[J]=this.r,I[J+1]=this.g,I[J+2]=this.b,I}fromBufferAttribute(I,J){return this.r=I.getX(J),this.g=I.getY(J),this.b=I.getZ(J),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Lo=new Vi;Vi.NAMES=j1;class V1 extends Uh{constructor(I){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(I)}copy(I){return super.copy(I),this.color.copy(I.color),this.map=I.map,this.lightMap=I.lightMap,this.lightMapIntensity=I.lightMapIntensity,this.aoMap=I.aoMap,this.aoMapIntensity=I.aoMapIntensity,this.specularMap=I.specularMap,this.alphaMap=I.alphaMap,this.envMap=I.envMap,this.combine=I.combine,this.reflectivity=I.reflectivity,this.refractionRatio=I.refractionRatio,this.wireframe=I.wireframe,this.wireframeLinewidth=I.wireframeLinewidth,this.wireframeLinecap=I.wireframeLinecap,this.wireframeLinejoin=I.wireframeLinejoin,this.fog=I.fog,this}}const Ua=new Hn,Np=new Kr;class Hs{constructor(I,J,ve=!1){if(Array.isArray(I))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=I,this.itemSize=J,this.count=I!==void 0?I.length/J:0,this.normalized=ve,this.usage=dv,this.updateRange={offset:0,count:-1},this.gpuType=Fu,this.version=0}onUploadCallback(){}set needsUpdate(I){I===!0&&this.version++}setUsage(I){return this.usage=I,this}copy(I){return this.name=I.name,this.array=new I.array.constructor(I.array),this.itemSize=I.itemSize,this.count=I.count,this.normalized=I.normalized,this.usage=I.usage,this.gpuType=I.gpuType,this}copyAt(I,J,ve){I*=this.itemSize,ve*=J.itemSize;for(let Ve=0,F=this.itemSize;Ve<F;Ve++)this.array[I+Ve]=J.array[ve+Ve];return this}copyArray(I){return this.array.set(I),this}applyMatrix3(I){if(this.itemSize===2)for(let J=0,ve=this.count;J<ve;J++)Np.fromBufferAttribute(this,J),Np.applyMatrix3(I),this.setXY(J,Np.x,Np.y);else if(this.itemSize===3)for(let J=0,ve=this.count;J<ve;J++)Ua.fromBufferAttribute(this,J),Ua.applyMatrix3(I),this.setXYZ(J,Ua.x,Ua.y,Ua.z);return this}applyMatrix4(I){for(let J=0,ve=this.count;J<ve;J++)Ua.fromBufferAttribute(this,J),Ua.applyMatrix4(I),this.setXYZ(J,Ua.x,Ua.y,Ua.z);return this}applyNormalMatrix(I){for(let J=0,ve=this.count;J<ve;J++)Ua.fromBufferAttribute(this,J),Ua.applyNormalMatrix(I),this.setXYZ(J,Ua.x,Ua.y,Ua.z);return this}transformDirection(I){for(let J=0,ve=this.count;J<ve;J++)Ua.fromBufferAttribute(this,J),Ua.transformDirection(I),this.setXYZ(J,Ua.x,Ua.y,Ua.z);return this}set(I,J=0){return this.array.set(I,J),this}getComponent(I,J){let ve=this.array[I*this.itemSize+J];return this.normalized&&(ve=_f(ve,this.array)),ve}setComponent(I,J,ve){return this.normalized&&(ve=Ko(ve,this.array)),this.array[I*this.itemSize+J]=ve,this}getX(I){let J=this.array[I*this.itemSize];return this.normalized&&(J=_f(J,this.array)),J}setX(I,J){return this.normalized&&(J=Ko(J,this.array)),this.array[I*this.itemSize]=J,this}getY(I){let J=this.array[I*this.itemSize+1];return this.normalized&&(J=_f(J,this.array)),J}setY(I,J){return this.normalized&&(J=Ko(J,this.array)),this.array[I*this.itemSize+1]=J,this}getZ(I){let J=this.array[I*this.itemSize+2];return this.normalized&&(J=_f(J,this.array)),J}setZ(I,J){return this.normalized&&(J=Ko(J,this.array)),this.array[I*this.itemSize+2]=J,this}getW(I){let J=this.array[I*this.itemSize+3];return this.normalized&&(J=_f(J,this.array)),J}setW(I,J){return this.normalized&&(J=Ko(J,this.array)),this.array[I*this.itemSize+3]=J,this}setXY(I,J,ve){return I*=this.itemSize,this.normalized&&(J=Ko(J,this.array),ve=Ko(ve,this.array)),this.array[I+0]=J,this.array[I+1]=ve,this}setXYZ(I,J,ve,Ve){return I*=this.itemSize,this.normalized&&(J=Ko(J,this.array),ve=Ko(ve,this.array),Ve=Ko(Ve,this.array)),this.array[I+0]=J,this.array[I+1]=ve,this.array[I+2]=Ve,this}setXYZW(I,J,ve,Ve,F){return I*=this.itemSize,this.normalized&&(J=Ko(J,this.array),ve=Ko(ve,this.array),Ve=Ko(Ve,this.array),F=Ko(F,this.array)),this.array[I+0]=J,this.array[I+1]=ve,this.array[I+2]=Ve,this.array[I+3]=F,this}onUpload(I){return this.onUploadCallback=I,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const I={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(I.name=this.name),this.usage!==dv&&(I.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(I.updateRange=this.updateRange),I}}class H1 extends Hs{constructor(I,J,ve){super(new Uint16Array(I),J,ve)}}class G1 extends Hs{constructor(I,J,ve){super(new Uint32Array(I),J,ve)}}class yc extends Hs{constructor(I,J,ve){super(new Float32Array(I),J,ve)}}let F2=0;const nl=new ja,b0=new Io,ff=new Hn,js=new Bh,bh=new Bh,ro=new Hn;class qu extends Ac{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:F2++}),this.uuid=Uf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(I){return Array.isArray(I)?this.index=new(D1(I)?G1:H1)(I,1):this.index=I,this}getAttribute(I){return this.attributes[I]}setAttribute(I,J){return this.attributes[I]=J,this}deleteAttribute(I){return delete this.attributes[I],this}hasAttribute(I){return this.attributes[I]!==void 0}addGroup(I,J,ve=0){this.groups.push({start:I,count:J,materialIndex:ve})}clearGroups(){this.groups=[]}setDrawRange(I,J){this.drawRange.start=I,this.drawRange.count=J}applyMatrix4(I){const J=this.attributes.position;J!==void 0&&(J.applyMatrix4(I),J.needsUpdate=!0);const ve=this.attributes.normal;if(ve!==void 0){const F=new li().getNormalMatrix(I);ve.applyNormalMatrix(F),ve.needsUpdate=!0}const Ve=this.attributes.tangent;return Ve!==void 0&&(Ve.transformDirection(I),Ve.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(I){return nl.makeRotationFromQuaternion(I),this.applyMatrix4(nl),this}rotateX(I){return nl.makeRotationX(I),this.applyMatrix4(nl),this}rotateY(I){return nl.makeRotationY(I),this.applyMatrix4(nl),this}rotateZ(I){return nl.makeRotationZ(I),this.applyMatrix4(nl),this}translate(I,J,ve){return nl.makeTranslation(I,J,ve),this.applyMatrix4(nl),this}scale(I,J,ve){return nl.makeScale(I,J,ve),this.applyMatrix4(nl),this}lookAt(I){return b0.lookAt(I),b0.updateMatrix(),this.applyMatrix4(b0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ff).negate(),this.translate(ff.x,ff.y,ff.z),this}setFromPoints(I){const J=[];for(let ve=0,Ve=I.length;ve<Ve;ve++){const F=I[ve];J.push(F.x,F.y,F.z||0)}return this.setAttribute("position",new yc(J,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bh);const I=this.attributes.position,J=this.morphAttributes.position;if(I&&I.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Hn(-1/0,-1/0,-1/0),new Hn(1/0,1/0,1/0));return}if(I!==void 0){if(this.boundingBox.setFromBufferAttribute(I),J)for(let ve=0,Ve=J.length;ve<Ve;ve++){const F=J[ve];js.setFromBufferAttribute(F),this.morphTargetsRelative?(ro.addVectors(this.boundingBox.min,js.min),this.boundingBox.expandByPoint(ro),ro.addVectors(this.boundingBox.max,js.max),this.boundingBox.expandByPoint(ro)):(this.boundingBox.expandByPoint(js.min),this.boundingBox.expandByPoint(js.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new K0);const I=this.attributes.position,J=this.morphAttributes.position;if(I&&I.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Hn,1/0);return}if(I){const ve=this.boundingSphere.center;if(js.setFromBufferAttribute(I),J)for(let F=0,L=J.length;F<L;F++){const e=J[F];bh.setFromBufferAttribute(e),this.morphTargetsRelative?(ro.addVectors(js.min,bh.min),js.expandByPoint(ro),ro.addVectors(js.max,bh.max),js.expandByPoint(ro)):(js.expandByPoint(bh.min),js.expandByPoint(bh.max))}js.getCenter(ve);let Ve=0;for(let F=0,L=I.count;F<L;F++)ro.fromBufferAttribute(I,F),Ve=Math.max(Ve,ve.distanceToSquared(ro));if(J)for(let F=0,L=J.length;F<L;F++){const e=J[F],T=this.morphTargetsRelative;for(let b=0,a=e.count;b<a;b++)ro.fromBufferAttribute(e,b),T&&(ff.fromBufferAttribute(I,b),ro.add(ff)),Ve=Math.max(Ve,ve.distanceToSquared(ro))}this.boundingSphere.radius=Math.sqrt(Ve),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const I=this.index,J=this.attributes;if(I===null||J.position===void 0||J.normal===void 0||J.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const ve=I.array,Ve=J.position.array,F=J.normal.array,L=J.uv.array,e=Ve.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hs(new Float32Array(4*e),4));const T=this.getAttribute("tangent").array,b=[],a=[];for(let f=0;f<e;f++)b[f]=new Hn,a[f]=new Hn;const _=new Hn,g=new Hn,h=new Hn,o=new Kr,t=new Kr,i=new Kr,n=new Hn,r=new Hn;function s(f,x,y){_.fromArray(Ve,f*3),g.fromArray(Ve,x*3),h.fromArray(Ve,y*3),o.fromArray(L,f*2),t.fromArray(L,x*2),i.fromArray(L,y*2),g.sub(_),h.sub(_),t.sub(o),i.sub(o);const v=1/(t.x*i.y-i.x*t.y);isFinite(v)&&(n.copy(g).multiplyScalar(i.y).addScaledVector(h,-t.y).multiplyScalar(v),r.copy(h).multiplyScalar(t.x).addScaledVector(g,-i.x).multiplyScalar(v),b[f].add(n),b[x].add(n),b[y].add(n),a[f].add(r),a[x].add(r),a[y].add(r))}let l=this.groups;l.length===0&&(l=[{start:0,count:ve.length}]);for(let f=0,x=l.length;f<x;++f){const y=l[f],v=y.start,M=y.count;for(let p=v,S=v+M;p<S;p+=3)s(ve[p+0],ve[p+1],ve[p+2])}const u=new Hn,d=new Hn,c=new Hn,w=new Hn;function m(f){c.fromArray(F,f*3),w.copy(c);const x=b[f];u.copy(x),u.sub(c.multiplyScalar(c.dot(x))).normalize(),d.crossVectors(w,x);const v=d.dot(a[f])<0?-1:1;T[f*4]=u.x,T[f*4+1]=u.y,T[f*4+2]=u.z,T[f*4+3]=v}for(let f=0,x=l.length;f<x;++f){const y=l[f],v=y.start,M=y.count;for(let p=v,S=v+M;p<S;p+=3)m(ve[p+0]),m(ve[p+1]),m(ve[p+2])}}computeVertexNormals(){const I=this.index,J=this.getAttribute("position");if(J!==void 0){let ve=this.getAttribute("normal");if(ve===void 0)ve=new Hs(new Float32Array(J.count*3),3),this.setAttribute("normal",ve);else for(let g=0,h=ve.count;g<h;g++)ve.setXYZ(g,0,0,0);const Ve=new Hn,F=new Hn,L=new Hn,e=new Hn,T=new Hn,b=new Hn,a=new Hn,_=new Hn;if(I)for(let g=0,h=I.count;g<h;g+=3){const o=I.getX(g+0),t=I.getX(g+1),i=I.getX(g+2);Ve.fromBufferAttribute(J,o),F.fromBufferAttribute(J,t),L.fromBufferAttribute(J,i),a.subVectors(L,F),_.subVectors(Ve,F),a.cross(_),e.fromBufferAttribute(ve,o),T.fromBufferAttribute(ve,t),b.fromBufferAttribute(ve,i),e.add(a),T.add(a),b.add(a),ve.setXYZ(o,e.x,e.y,e.z),ve.setXYZ(t,T.x,T.y,T.z),ve.setXYZ(i,b.x,b.y,b.z)}else for(let g=0,h=J.count;g<h;g+=3)Ve.fromBufferAttribute(J,g+0),F.fromBufferAttribute(J,g+1),L.fromBufferAttribute(J,g+2),a.subVectors(L,F),_.subVectors(Ve,F),a.cross(_),ve.setXYZ(g+0,a.x,a.y,a.z),ve.setXYZ(g+1,a.x,a.y,a.z),ve.setXYZ(g+2,a.x,a.y,a.z);this.normalizeNormals(),ve.needsUpdate=!0}}normalizeNormals(){const I=this.attributes.normal;for(let J=0,ve=I.count;J<ve;J++)ro.fromBufferAttribute(I,J),ro.normalize(),I.setXYZ(J,ro.x,ro.y,ro.z)}toNonIndexed(){function I(e,T){const b=e.array,a=e.itemSize,_=e.normalized,g=new b.constructor(T.length*a);let h=0,o=0;for(let t=0,i=T.length;t<i;t++){e.isInterleavedBufferAttribute?h=T[t]*e.data.stride+e.offset:h=T[t]*a;for(let n=0;n<a;n++)g[o++]=b[h++]}return new Hs(g,a,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const J=new qu,ve=this.index.array,Ve=this.attributes;for(const e in Ve){const T=Ve[e],b=I(T,ve);J.setAttribute(e,b)}const F=this.morphAttributes;for(const e in F){const T=[],b=F[e];for(let a=0,_=b.length;a<_;a++){const g=b[a],h=I(g,ve);T.push(h)}J.morphAttributes[e]=T}J.morphTargetsRelative=this.morphTargetsRelative;const L=this.groups;for(let e=0,T=L.length;e<T;e++){const b=L[e];J.addGroup(b.start,b.count,b.materialIndex)}return J}toJSON(){const I={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(I.uuid=this.uuid,I.type=this.type,this.name!==""&&(I.name=this.name),Object.keys(this.userData).length>0&&(I.userData=this.userData),this.parameters!==void 0){const T=this.parameters;for(const b in T)T[b]!==void 0&&(I[b]=T[b]);return I}I.data={attributes:{}};const J=this.index;J!==null&&(I.data.index={type:J.array.constructor.name,array:Array.prototype.slice.call(J.array)});const ve=this.attributes;for(const T in ve){const b=ve[T];I.data.attributes[T]=b.toJSON(I.data)}const Ve={};let F=!1;for(const T in this.morphAttributes){const b=this.morphAttributes[T],a=[];for(let _=0,g=b.length;_<g;_++){const h=b[_];a.push(h.toJSON(I.data))}a.length>0&&(Ve[T]=a,F=!0)}F&&(I.data.morphAttributes=Ve,I.data.morphTargetsRelative=this.morphTargetsRelative);const L=this.groups;L.length>0&&(I.data.groups=JSON.parse(JSON.stringify(L)));const e=this.boundingSphere;return e!==null&&(I.data.boundingSphere={center:e.center.toArray(),radius:e.radius}),I}clone(){return new this.constructor().copy(this)}copy(I){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const J={};this.name=I.name;const ve=I.index;ve!==null&&this.setIndex(ve.clone(J));const Ve=I.attributes;for(const b in Ve){const a=Ve[b];this.setAttribute(b,a.clone(J))}const F=I.morphAttributes;for(const b in F){const a=[],_=F[b];for(let g=0,h=_.length;g<h;g++)a.push(_[g].clone(J));this.morphAttributes[b]=a}this.morphTargetsRelative=I.morphTargetsRelative;const L=I.groups;for(let b=0,a=L.length;b<a;b++){const _=L[b];this.addGroup(_.start,_.count,_.materialIndex)}const e=I.boundingBox;e!==null&&(this.boundingBox=e.clone());const T=I.boundingSphere;return T!==null&&(this.boundingSphere=T.clone()),this.drawRange.start=I.drawRange.start,this.drawRange.count=I.drawRange.count,this.userData=I.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ev=new ja,sc=new B1,Bp=new K0,kv=new Hn,hf=new Hn,pf=new Hn,df=new Hn,w0=new Hn,Up=new Hn,jp=new Kr,Vp=new Kr,Hp=new Kr,Lv=new Hn,Cv=new Hn,Pv=new Hn,Gp=new Hn,Wp=new Hn;class Wl extends Io{constructor(I=new qu,J=new V1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=I,this.material=J,this.updateMorphTargets()}copy(I,J){return super.copy(I,J),I.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=I.morphTargetInfluences.slice()),I.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},I.morphTargetDictionary)),this.material=I.material,this.geometry=I.geometry,this}updateMorphTargets(){const J=this.geometry.morphAttributes,ve=Object.keys(J);if(ve.length>0){const Ve=J[ve[0]];if(Ve!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let F=0,L=Ve.length;F<L;F++){const e=Ve[F].name||String(F);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=F}}}}getVertexPosition(I,J){const ve=this.geometry,Ve=ve.attributes.position,F=ve.morphAttributes.position,L=ve.morphTargetsRelative;J.fromBufferAttribute(Ve,I);const e=this.morphTargetInfluences;if(F&&e){Up.set(0,0,0);for(let T=0,b=F.length;T<b;T++){const a=e[T],_=F[T];a!==0&&(w0.fromBufferAttribute(_,I),L?Up.addScaledVector(w0,a):Up.addScaledVector(w0.sub(J),a))}J.add(Up)}return J}raycast(I,J){const ve=this.geometry,Ve=this.material,F=this.matrixWorld;Ve!==void 0&&(ve.boundingSphere===null&&ve.computeBoundingSphere(),Bp.copy(ve.boundingSphere),Bp.applyMatrix4(F),sc.copy(I.ray).recast(I.near),!(Bp.containsPoint(sc.origin)===!1&&(sc.intersectSphere(Bp,kv)===null||sc.origin.distanceToSquared(kv)>(I.far-I.near)**2))&&(Ev.copy(F).invert(),sc.copy(I.ray).applyMatrix4(Ev),!(ve.boundingBox!==null&&sc.intersectsBox(ve.boundingBox)===!1)&&this._computeIntersections(I,J,sc)))}_computeIntersections(I,J,ve){let Ve;const F=this.geometry,L=this.material,e=F.index,T=F.attributes.position,b=F.attributes.uv,a=F.attributes.uv1,_=F.attributes.normal,g=F.groups,h=F.drawRange;if(e!==null)if(Array.isArray(L))for(let o=0,t=g.length;o<t;o++){const i=g[o],n=L[i.materialIndex],r=Math.max(i.start,h.start),s=Math.min(e.count,Math.min(i.start+i.count,h.start+h.count));for(let l=r,u=s;l<u;l+=3){const d=e.getX(l),c=e.getX(l+1),w=e.getX(l+2);Ve=qp(this,n,I,ve,b,a,_,d,c,w),Ve&&(Ve.faceIndex=Math.floor(l/3),Ve.face.materialIndex=i.materialIndex,J.push(Ve))}}else{const o=Math.max(0,h.start),t=Math.min(e.count,h.start+h.count);for(let i=o,n=t;i<n;i+=3){const r=e.getX(i),s=e.getX(i+1),l=e.getX(i+2);Ve=qp(this,L,I,ve,b,a,_,r,s,l),Ve&&(Ve.faceIndex=Math.floor(i/3),J.push(Ve))}}else if(T!==void 0)if(Array.isArray(L))for(let o=0,t=g.length;o<t;o++){const i=g[o],n=L[i.materialIndex],r=Math.max(i.start,h.start),s=Math.min(T.count,Math.min(i.start+i.count,h.start+h.count));for(let l=r,u=s;l<u;l+=3){const d=l,c=l+1,w=l+2;Ve=qp(this,n,I,ve,b,a,_,d,c,w),Ve&&(Ve.faceIndex=Math.floor(l/3),Ve.face.materialIndex=i.materialIndex,J.push(Ve))}}else{const o=Math.max(0,h.start),t=Math.min(T.count,h.start+h.count);for(let i=o,n=t;i<n;i+=3){const r=i,s=i+1,l=i+2;Ve=qp(this,L,I,ve,b,a,_,r,s,l),Ve&&(Ve.faceIndex=Math.floor(i/3),J.push(Ve))}}}}function N2(be,I,J,ve,Ve,F,L,e){let T;if(I.side===bs?T=ve.intersectTriangle(L,F,Ve,!0,e):T=ve.intersectTriangle(Ve,F,L,I.side===Hu,e),T===null)return null;Wp.copy(e),Wp.applyMatrix4(be.matrixWorld);const b=J.ray.origin.distanceTo(Wp);return b<J.near||b>J.far?null:{distance:b,point:Wp.clone(),object:be}}function qp(be,I,J,ve,Ve,F,L,e,T,b){be.getVertexPosition(e,hf),be.getVertexPosition(T,pf),be.getVertexPosition(b,df);const a=N2(be,I,J,ve,hf,pf,df,Gp);if(a){Ve&&(jp.fromBufferAttribute(Ve,e),Vp.fromBufferAttribute(Ve,T),Hp.fromBufferAttribute(Ve,b),a.uv=Sl.getInterpolation(Gp,hf,pf,df,jp,Vp,Hp,new Kr)),F&&(jp.fromBufferAttribute(F,e),Vp.fromBufferAttribute(F,T),Hp.fromBufferAttribute(F,b),a.uv1=Sl.getInterpolation(Gp,hf,pf,df,jp,Vp,Hp,new Kr),a.uv2=a.uv1),L&&(Lv.fromBufferAttribute(L,e),Cv.fromBufferAttribute(L,T),Pv.fromBufferAttribute(L,b),a.normal=Sl.getInterpolation(Gp,hf,pf,df,Lv,Cv,Pv,new Hn),a.normal.dot(ve.direction)>0&&a.normal.multiplyScalar(-1));const _={a:e,b:T,c:b,normal:new Hn,materialIndex:0};Sl.getNormal(hf,pf,df,_.normal),a.face=_}return a}class jh extends qu{constructor(I=1,J=1,ve=1,Ve=1,F=1,L=1){super(),this.type="BoxGeometry",this.parameters={width:I,height:J,depth:ve,widthSegments:Ve,heightSegments:F,depthSegments:L};const e=this;Ve=Math.floor(Ve),F=Math.floor(F),L=Math.floor(L);const T=[],b=[],a=[],_=[];let g=0,h=0;o("z","y","x",-1,-1,ve,J,I,L,F,0),o("z","y","x",1,-1,ve,J,-I,L,F,1),o("x","z","y",1,1,I,ve,J,Ve,L,2),o("x","z","y",1,-1,I,ve,-J,Ve,L,3),o("x","y","z",1,-1,I,J,ve,Ve,F,4),o("x","y","z",-1,-1,I,J,-ve,Ve,F,5),this.setIndex(T),this.setAttribute("position",new yc(b,3)),this.setAttribute("normal",new yc(a,3)),this.setAttribute("uv",new yc(_,2));function o(t,i,n,r,s,l,u,d,c,w,m){const f=l/c,x=u/w,y=l/2,v=u/2,M=d/2,p=c+1,S=w+1;let A=0,k=0;const C=new Hn;for(let P=0;P<S;P++){const R=P*x-v;for(let O=0;O<p;O++){const X=O*f-y;C[t]=X*r,C[i]=R*s,C[n]=M,b.push(C.x,C.y,C.z),C[t]=0,C[i]=0,C[n]=d>0?1:-1,a.push(C.x,C.y,C.z),_.push(O/c),_.push(1-P/w),A+=1}}for(let P=0;P<w;P++)for(let R=0;R<c;R++){const O=g+R+p*P,X=g+R+p*(P+1),D=g+(R+1)+p*(P+1),V=g+(R+1)+p*P;T.push(O,X,V),T.push(X,D,V),k+=6}e.addGroup(h,k,m),h+=k,g+=A}}copy(I){return super.copy(I),this.parameters=Object.assign({},I.parameters),this}static fromJSON(I){return new jh(I.width,I.height,I.depth,I.widthSegments,I.heightSegments,I.depthSegments)}}function Rf(be){const I={};for(const J in be){I[J]={};for(const ve in be[J]){const Ve=be[J][ve];Ve&&(Ve.isColor||Ve.isMatrix3||Ve.isMatrix4||Ve.isVector2||Ve.isVector3||Ve.isVector4||Ve.isTexture||Ve.isQuaternion)?Ve.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),I[J][ve]=null):I[J][ve]=Ve.clone():Array.isArray(Ve)?I[J][ve]=Ve.slice():I[J][ve]=Ve}}return I}function Jo(be){const I={};for(let J=0;J<be.length;J++){const ve=Rf(be[J]);for(const Ve in ve)I[Ve]=ve[Ve]}return I}function B2(be){const I=[];for(let J=0;J<be.length;J++)I.push(be[J].clone());return I}function W1(be){return be.getRenderTarget()===null?be.outputColorSpace:ql}const U2={clone:Rf,merge:Jo};var j2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,V2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class bc extends Uh{constructor(I){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=j2,this.fragmentShader=V2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,I!==void 0&&this.setValues(I)}copy(I){return super.copy(I),this.fragmentShader=I.fragmentShader,this.vertexShader=I.vertexShader,this.uniforms=Rf(I.uniforms),this.uniformsGroups=B2(I.uniformsGroups),this.defines=Object.assign({},I.defines),this.wireframe=I.wireframe,this.wireframeLinewidth=I.wireframeLinewidth,this.fog=I.fog,this.lights=I.lights,this.clipping=I.clipping,this.extensions=Object.assign({},I.extensions),this.glslVersion=I.glslVersion,this}toJSON(I){const J=super.toJSON(I);J.glslVersion=this.glslVersion,J.uniforms={};for(const Ve in this.uniforms){const L=this.uniforms[Ve].value;L&&L.isTexture?J.uniforms[Ve]={type:"t",value:L.toJSON(I).uuid}:L&&L.isColor?J.uniforms[Ve]={type:"c",value:L.getHex()}:L&&L.isVector2?J.uniforms[Ve]={type:"v2",value:L.toArray()}:L&&L.isVector3?J.uniforms[Ve]={type:"v3",value:L.toArray()}:L&&L.isVector4?J.uniforms[Ve]={type:"v4",value:L.toArray()}:L&&L.isMatrix3?J.uniforms[Ve]={type:"m3",value:L.toArray()}:L&&L.isMatrix4?J.uniforms[Ve]={type:"m4",value:L.toArray()}:J.uniforms[Ve]={value:L}}Object.keys(this.defines).length>0&&(J.defines=this.defines),J.vertexShader=this.vertexShader,J.fragmentShader=this.fragmentShader,J.lights=this.lights,J.clipping=this.clipping;const ve={};for(const Ve in this.extensions)this.extensions[Ve]===!0&&(ve[Ve]=!0);return Object.keys(ve).length>0&&(J.extensions=ve),J}}class q1 extends Io{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ja,this.projectionMatrix=new ja,this.projectionMatrixInverse=new ja,this.coordinateSystem=mu}copy(I,J){return super.copy(I,J),this.matrixWorldInverse.copy(I.matrixWorldInverse),this.projectionMatrix.copy(I.projectionMatrix),this.projectionMatrixInverse.copy(I.projectionMatrixInverse),this.coordinateSystem=I.coordinateSystem,this}getWorldDirection(I){this.updateWorldMatrix(!0,!1);const J=this.matrixWorld.elements;return I.set(-J[8],-J[9],-J[10]).normalize()}updateMatrixWorld(I){super.updateMatrixWorld(I),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(I,J){super.updateWorldMatrix(I,J),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class xs extends q1{constructor(I=50,J=1,ve=.1,Ve=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=I,this.zoom=1,this.near=ve,this.far=Ve,this.focus=10,this.aspect=J,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(I,J){return super.copy(I,J),this.fov=I.fov,this.zoom=I.zoom,this.near=I.near,this.far=I.far,this.focus=I.focus,this.aspect=I.aspect,this.view=I.view===null?null:Object.assign({},I.view),this.filmGauge=I.filmGauge,this.filmOffset=I.filmOffset,this}setFocalLength(I){const J=.5*this.getFilmHeight()/I;this.fov=Pf*2*Math.atan(J),this.updateProjectionMatrix()}getFocalLength(){const I=Math.tan(Ch*.5*this.fov);return .5*this.getFilmHeight()/I}getEffectiveFOV(){return Pf*2*Math.atan(Math.tan(Ch*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(I,J,ve,Ve,F,L){this.aspect=I/J,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=I,this.view.fullHeight=J,this.view.offsetX=ve,this.view.offsetY=Ve,this.view.width=F,this.view.height=L,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const I=this.near;let J=I*Math.tan(Ch*.5*this.fov)/this.zoom,ve=2*J,Ve=this.aspect*ve,F=-.5*Ve;const L=this.view;if(this.view!==null&&this.view.enabled){const T=L.fullWidth,b=L.fullHeight;F+=L.offsetX*Ve/T,J-=L.offsetY*ve/b,Ve*=L.width/T,ve*=L.height/b}const e=this.filmOffset;e!==0&&(F+=I*e/this.getFilmWidth()),this.projectionMatrix.makePerspective(F,F+Ve,J,J-ve,I,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(I){const J=super.toJSON(I);return J.object.fov=this.fov,J.object.zoom=this.zoom,J.object.near=this.near,J.object.far=this.far,J.object.focus=this.focus,J.object.aspect=this.aspect,this.view!==null&&(J.object.view=Object.assign({},this.view)),J.object.filmGauge=this.filmGauge,J.object.filmOffset=this.filmOffset,J}}const mf=-90,gf=1;class H2 extends Io{constructor(I,J,ve){super(),this.type="CubeCamera",this.renderTarget=ve,this.coordinateSystem=null;const Ve=new xs(mf,gf,I,J);Ve.layers=this.layers,this.add(Ve);const F=new xs(mf,gf,I,J);F.layers=this.layers,this.add(F);const L=new xs(mf,gf,I,J);L.layers=this.layers,this.add(L);const e=new xs(mf,gf,I,J);e.layers=this.layers,this.add(e);const T=new xs(mf,gf,I,J);T.layers=this.layers,this.add(T);const b=new xs(mf,gf,I,J);b.layers=this.layers,this.add(b)}updateCoordinateSystem(){const I=this.coordinateSystem,J=this.children.concat(),[ve,Ve,F,L,e,T]=J;for(const b of J)this.remove(b);if(I===mu)ve.up.set(0,1,0),ve.lookAt(1,0,0),Ve.up.set(0,1,0),Ve.lookAt(-1,0,0),F.up.set(0,0,-1),F.lookAt(0,1,0),L.up.set(0,0,1),L.lookAt(0,-1,0),e.up.set(0,1,0),e.lookAt(0,0,1),T.up.set(0,1,0),T.lookAt(0,0,-1);else if(I===nd)ve.up.set(0,-1,0),ve.lookAt(-1,0,0),Ve.up.set(0,-1,0),Ve.lookAt(1,0,0),F.up.set(0,0,1),F.lookAt(0,1,0),L.up.set(0,0,-1),L.lookAt(0,-1,0),e.up.set(0,-1,0),e.lookAt(0,0,1),T.up.set(0,-1,0),T.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+I);for(const b of J)this.add(b),b.updateMatrixWorld()}update(I,J){this.parent===null&&this.updateMatrixWorld();const ve=this.renderTarget;this.coordinateSystem!==I.coordinateSystem&&(this.coordinateSystem=I.coordinateSystem,this.updateCoordinateSystem());const[Ve,F,L,e,T,b]=this.children,a=I.getRenderTarget(),_=I.xr.enabled;I.xr.enabled=!1;const g=ve.texture.generateMipmaps;ve.texture.generateMipmaps=!1,I.setRenderTarget(ve,0),I.render(J,Ve),I.setRenderTarget(ve,1),I.render(J,F),I.setRenderTarget(ve,2),I.render(J,L),I.setRenderTarget(ve,3),I.render(J,e),I.setRenderTarget(ve,4),I.render(J,T),ve.texture.generateMipmaps=g,I.setRenderTarget(ve,5),I.render(J,b),I.setRenderTarget(a),I.xr.enabled=_,ve.texture.needsPMREMUpdate=!0}}class X1 extends Vs{constructor(I,J,ve,Ve,F,L,e,T,b,a){I=I!==void 0?I:[],J=J!==void 0?J:kf,super(I,J,ve,Ve,F,L,e,T,b,a),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(I){this.image=I}}class G2 extends xc{constructor(I=1,J={}){super(I,I,J),this.isWebGLCubeRenderTarget=!0;const ve={width:I,height:I,depth:1},Ve=[ve,ve,ve,ve,ve,ve];J.encoding!==void 0&&(Rh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),J.colorSpace=J.encoding===gc?ei:vc),this.texture=new X1(Ve,J.mapping,J.wrapS,J.wrapT,J.magFilter,J.minFilter,J.format,J.type,J.anisotropy,J.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=J.generateMipmaps!==void 0?J.generateMipmaps:!1,this.texture.minFilter=J.minFilter!==void 0?J.minFilter:rl}fromEquirectangularTexture(I,J){this.texture.type=J.type,this.texture.colorSpace=J.colorSpace,this.texture.generateMipmaps=J.generateMipmaps,this.texture.minFilter=J.minFilter,this.texture.magFilter=J.magFilter;const ve={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},Ve=new jh(5,5,5),F=new bc({name:"CubemapFromEquirect",uniforms:Rf(ve.uniforms),vertexShader:ve.vertexShader,fragmentShader:ve.fragmentShader,side:bs,blending:Nu});F.uniforms.tEquirect.value=J;const L=new Wl(Ve,F),e=J.minFilter;return J.minFilter===zh&&(J.minFilter=rl),new H2(1,10,this).update(I,L),J.minFilter=e,L.geometry.dispose(),L.material.dispose(),this}clear(I,J,ve,Ve){const F=I.getRenderTarget();for(let L=0;L<6;L++)I.setRenderTarget(this,L),I.clear(J,ve,Ve);I.setRenderTarget(F)}}const T0=new Hn,W2=new Hn,q2=new li;class Du{constructor(I=new Hn(1,0,0),J=0){this.isPlane=!0,this.normal=I,this.constant=J}set(I,J){return this.normal.copy(I),this.constant=J,this}setComponents(I,J,ve,Ve){return this.normal.set(I,J,ve),this.constant=Ve,this}setFromNormalAndCoplanarPoint(I,J){return this.normal.copy(I),this.constant=-J.dot(this.normal),this}setFromCoplanarPoints(I,J,ve){const Ve=T0.subVectors(ve,J).cross(W2.subVectors(I,J)).normalize();return this.setFromNormalAndCoplanarPoint(Ve,I),this}copy(I){return this.normal.copy(I.normal),this.constant=I.constant,this}normalize(){const I=1/this.normal.length();return this.normal.multiplyScalar(I),this.constant*=I,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(I){return this.normal.dot(I)+this.constant}distanceToSphere(I){return this.distanceToPoint(I.center)-I.radius}projectPoint(I,J){return J.copy(I).addScaledVector(this.normal,-this.distanceToPoint(I))}intersectLine(I,J){const ve=I.delta(T0),Ve=this.normal.dot(ve);if(Ve===0)return this.distanceToPoint(I.start)===0?J.copy(I.start):null;const F=-(I.start.dot(this.normal)+this.constant)/Ve;return F<0||F>1?null:J.copy(I.start).addScaledVector(ve,F)}intersectsLine(I){const J=this.distanceToPoint(I.start),ve=this.distanceToPoint(I.end);return J<0&&ve>0||ve<0&&J>0}intersectsBox(I){return I.intersectsPlane(this)}intersectsSphere(I){return I.intersectsPlane(this)}coplanarPoint(I){return I.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(I,J){const ve=J||q2.getNormalMatrix(I),Ve=this.coplanarPoint(T0).applyMatrix4(I),F=this.normal.applyMatrix3(ve).normalize();return this.constant=-Ve.dot(F),this}translate(I){return this.constant-=I.dot(this.normal),this}equals(I){return I.normal.equals(this.normal)&&I.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lc=new K0,Xp=new Hn;class J0{constructor(I=new Du,J=new Du,ve=new Du,Ve=new Du,F=new Du,L=new Du){this.planes=[I,J,ve,Ve,F,L]}set(I,J,ve,Ve,F,L){const e=this.planes;return e[0].copy(I),e[1].copy(J),e[2].copy(ve),e[3].copy(Ve),e[4].copy(F),e[5].copy(L),this}copy(I){const J=this.planes;for(let ve=0;ve<6;ve++)J[ve].copy(I.planes[ve]);return this}setFromProjectionMatrix(I,J=mu){const ve=this.planes,Ve=I.elements,F=Ve[0],L=Ve[1],e=Ve[2],T=Ve[3],b=Ve[4],a=Ve[5],_=Ve[6],g=Ve[7],h=Ve[8],o=Ve[9],t=Ve[10],i=Ve[11],n=Ve[12],r=Ve[13],s=Ve[14],l=Ve[15];if(ve[0].setComponents(T-F,g-b,i-h,l-n).normalize(),ve[1].setComponents(T+F,g+b,i+h,l+n).normalize(),ve[2].setComponents(T+L,g+a,i+o,l+r).normalize(),ve[3].setComponents(T-L,g-a,i-o,l-r).normalize(),ve[4].setComponents(T-e,g-_,i-t,l-s).normalize(),J===mu)ve[5].setComponents(T+e,g+_,i+t,l+s).normalize();else if(J===nd)ve[5].setComponents(e,_,t,s).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+J);return this}intersectsObject(I){if(I.boundingSphere!==void 0)I.boundingSphere===null&&I.computeBoundingSphere(),lc.copy(I.boundingSphere).applyMatrix4(I.matrixWorld);else{const J=I.geometry;J.boundingSphere===null&&J.computeBoundingSphere(),lc.copy(J.boundingSphere).applyMatrix4(I.matrixWorld)}return this.intersectsSphere(lc)}intersectsSprite(I){return lc.center.set(0,0,0),lc.radius=.7071067811865476,lc.applyMatrix4(I.matrixWorld),this.intersectsSphere(lc)}intersectsSphere(I){const J=this.planes,ve=I.center,Ve=-I.radius;for(let F=0;F<6;F++)if(J[F].distanceToPoint(ve)<Ve)return!1;return!0}intersectsBox(I){const J=this.planes;for(let ve=0;ve<6;ve++){const Ve=J[ve];if(Xp.x=Ve.normal.x>0?I.max.x:I.min.x,Xp.y=Ve.normal.y>0?I.max.y:I.min.y,Xp.z=Ve.normal.z>0?I.max.z:I.min.z,Ve.distanceToPoint(Xp)<0)return!1}return!0}containsPoint(I){const J=this.planes;for(let ve=0;ve<6;ve++)if(J[ve].distanceToPoint(I)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Y1(){let be=null,I=!1,J=null,ve=null;function Ve(F,L){J(F,L),ve=be.requestAnimationFrame(Ve)}return{start:function(){I!==!0&&J!==null&&(ve=be.requestAnimationFrame(Ve),I=!0)},stop:function(){be.cancelAnimationFrame(ve),I=!1},setAnimationLoop:function(F){J=F},setContext:function(F){be=F}}}function X2(be,I){const J=I.isWebGL2,ve=new WeakMap;function Ve(b,a){const _=b.array,g=b.usage,h=be.createBuffer();be.bindBuffer(a,h),be.bufferData(a,_,g),b.onUploadCallback();let o;if(_ instanceof Float32Array)o=be.FLOAT;else if(_ instanceof Uint16Array)if(b.isFloat16BufferAttribute)if(J)o=be.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else o=be.UNSIGNED_SHORT;else if(_ instanceof Int16Array)o=be.SHORT;else if(_ instanceof Uint32Array)o=be.UNSIGNED_INT;else if(_ instanceof Int32Array)o=be.INT;else if(_ instanceof Int8Array)o=be.BYTE;else if(_ instanceof Uint8Array)o=be.UNSIGNED_BYTE;else if(_ instanceof Uint8ClampedArray)o=be.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:h,type:o,bytesPerElement:_.BYTES_PER_ELEMENT,version:b.version}}function F(b,a,_){const g=a.array,h=a.updateRange;be.bindBuffer(_,b),h.count===-1?be.bufferSubData(_,0,g):(J?be.bufferSubData(_,h.offset*g.BYTES_PER_ELEMENT,g,h.offset,h.count):be.bufferSubData(_,h.offset*g.BYTES_PER_ELEMENT,g.subarray(h.offset,h.offset+h.count)),h.count=-1),a.onUploadCallback()}function L(b){return b.isInterleavedBufferAttribute&&(b=b.data),ve.get(b)}function e(b){b.isInterleavedBufferAttribute&&(b=b.data);const a=ve.get(b);a&&(be.deleteBuffer(a.buffer),ve.delete(b))}function T(b,a){if(b.isGLBufferAttribute){const g=ve.get(b);(!g||g.version<b.version)&&ve.set(b,{buffer:b.buffer,type:b.type,bytesPerElement:b.elementSize,version:b.version});return}b.isInterleavedBufferAttribute&&(b=b.data);const _=ve.get(b);_===void 0?ve.set(b,Ve(b,a)):_.version<b.version&&(F(_.buffer,b,a),_.version=b.version)}return{get:L,remove:e,update:T}}class $0 extends qu{constructor(I=1,J=1,ve=1,Ve=1){super(),this.type="PlaneGeometry",this.parameters={width:I,height:J,widthSegments:ve,heightSegments:Ve};const F=I/2,L=J/2,e=Math.floor(ve),T=Math.floor(Ve),b=e+1,a=T+1,_=I/e,g=J/T,h=[],o=[],t=[],i=[];for(let n=0;n<a;n++){const r=n*g-L;for(let s=0;s<b;s++){const l=s*_-F;o.push(l,-r,0),t.push(0,0,1),i.push(s/e),i.push(1-n/T)}}for(let n=0;n<T;n++)for(let r=0;r<e;r++){const s=r+b*n,l=r+b*(n+1),u=r+1+b*(n+1),d=r+1+b*n;h.push(s,l,d),h.push(l,u,d)}this.setIndex(h),this.setAttribute("position",new yc(o,3)),this.setAttribute("normal",new yc(t,3)),this.setAttribute("uv",new yc(i,2))}copy(I){return super.copy(I),this.parameters=Object.assign({},I.parameters),this}static fromJSON(I){return new $0(I.width,I.height,I.widthSegments,I.heightSegments)}}var Y2=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Z2=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,K2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,J2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$2=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Q2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,eb=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tb=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nb=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rb=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ib=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ab=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ob=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sb=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,lb=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ub=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cb=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fb=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,db=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,mb=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,gb=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vb=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yb=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xb=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,_b=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bb=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,wb="gl_FragColor = linearToOutputTexel( gl_FragColor );",Tb=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Mb=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ab=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Sb=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Eb=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kb=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Lb=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Cb=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Pb=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Rb=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ib=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ob=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Db=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zb=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Fb=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nb=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bb=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ub=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jb=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Vb=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Hb=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Gb=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Wb=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qb=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Xb=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Yb=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Zb=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Kb=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Jb=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,$b=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Qb=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,ew=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nw=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rw=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iw=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,aw=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ow=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,sw=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,lw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uw=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,cw=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pw=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,mw=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,gw=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vw=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,yw=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xw=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_w=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,bw=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ww=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Tw=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Mw=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Aw=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Sw=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ew=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,kw=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Lw=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Cw=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Pw=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Rw=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Iw=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ow=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Dw=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zw=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Fw=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Nw=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Bw=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Uw=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Vw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Hw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Gw=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ww=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qw=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Yw=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Kw=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jw=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$w=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Qw=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,e3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,t3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,n3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,r3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,i3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a3=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,o3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s3=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l3=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,c3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,h3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,p3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,g3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,b3=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,w3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,T3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qr={alphahash_fragment:Y2,alphahash_pars_fragment:Z2,alphamap_fragment:K2,alphamap_pars_fragment:J2,alphatest_fragment:$2,alphatest_pars_fragment:Q2,aomap_fragment:eb,aomap_pars_fragment:tb,begin_vertex:nb,beginnormal_vertex:rb,bsdfs:ib,iridescence_fragment:ab,bumpmap_pars_fragment:ob,clipping_planes_fragment:sb,clipping_planes_pars_fragment:lb,clipping_planes_pars_vertex:ub,clipping_planes_vertex:cb,color_fragment:fb,color_pars_fragment:hb,color_pars_vertex:pb,color_vertex:db,common:mb,cube_uv_reflection_fragment:gb,defaultnormal_vertex:vb,displacementmap_pars_vertex:yb,displacementmap_vertex:xb,emissivemap_fragment:_b,emissivemap_pars_fragment:bb,colorspace_fragment:wb,colorspace_pars_fragment:Tb,envmap_fragment:Mb,envmap_common_pars_fragment:Ab,envmap_pars_fragment:Sb,envmap_pars_vertex:Eb,envmap_physical_pars_fragment:Bb,envmap_vertex:kb,fog_vertex:Lb,fog_pars_vertex:Cb,fog_fragment:Pb,fog_pars_fragment:Rb,gradientmap_pars_fragment:Ib,lightmap_fragment:Ob,lightmap_pars_fragment:Db,lights_lambert_fragment:zb,lights_lambert_pars_fragment:Fb,lights_pars_begin:Nb,lights_toon_fragment:Ub,lights_toon_pars_fragment:jb,lights_phong_fragment:Vb,lights_phong_pars_fragment:Hb,lights_physical_fragment:Gb,lights_physical_pars_fragment:Wb,lights_fragment_begin:qb,lights_fragment_maps:Xb,lights_fragment_end:Yb,logdepthbuf_fragment:Zb,logdepthbuf_pars_fragment:Kb,logdepthbuf_pars_vertex:Jb,logdepthbuf_vertex:$b,map_fragment:Qb,map_pars_fragment:ew,map_particle_fragment:tw,map_particle_pars_fragment:nw,metalnessmap_fragment:rw,metalnessmap_pars_fragment:iw,morphcolor_vertex:aw,morphnormal_vertex:ow,morphtarget_pars_vertex:sw,morphtarget_vertex:lw,normal_fragment_begin:uw,normal_fragment_maps:cw,normal_pars_fragment:fw,normal_pars_vertex:hw,normal_vertex:pw,normalmap_pars_fragment:dw,clearcoat_normal_fragment_begin:mw,clearcoat_normal_fragment_maps:gw,clearcoat_pars_fragment:vw,iridescence_pars_fragment:yw,opaque_fragment:xw,packing:_w,premultiplied_alpha_fragment:bw,project_vertex:ww,dithering_fragment:Tw,dithering_pars_fragment:Mw,roughnessmap_fragment:Aw,roughnessmap_pars_fragment:Sw,shadowmap_pars_fragment:Ew,shadowmap_pars_vertex:kw,shadowmap_vertex:Lw,shadowmask_pars_fragment:Cw,skinbase_vertex:Pw,skinning_pars_vertex:Rw,skinning_vertex:Iw,skinnormal_vertex:Ow,specularmap_fragment:Dw,specularmap_pars_fragment:zw,tonemapping_fragment:Fw,tonemapping_pars_fragment:Nw,transmission_fragment:Bw,transmission_pars_fragment:Uw,uv_pars_fragment:jw,uv_pars_vertex:Vw,uv_vertex:Hw,worldpos_vertex:Gw,background_vert:Ww,background_frag:qw,backgroundCube_vert:Xw,backgroundCube_frag:Yw,cube_vert:Zw,cube_frag:Kw,depth_vert:Jw,depth_frag:$w,distanceRGBA_vert:Qw,distanceRGBA_frag:e3,equirect_vert:t3,equirect_frag:n3,linedashed_vert:r3,linedashed_frag:i3,meshbasic_vert:a3,meshbasic_frag:o3,meshlambert_vert:s3,meshlambert_frag:l3,meshmatcap_vert:u3,meshmatcap_frag:c3,meshnormal_vert:f3,meshnormal_frag:h3,meshphong_vert:p3,meshphong_frag:d3,meshphysical_vert:m3,meshphysical_frag:g3,meshtoon_vert:v3,meshtoon_frag:y3,points_vert:x3,points_frag:_3,shadow_vert:b3,shadow_frag:w3,sprite_vert:T3,sprite_frag:M3},Cr={common:{diffuse:{value:new Vi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new li},alphaMap:{value:null},alphaMapTransform:{value:new li},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new li}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new li}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new li}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new li},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new li},normalScale:{value:new Kr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new li},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new li}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new li}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new li}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new li},alphaTest:{value:0},uvTransform:{value:new li}},sprite:{diffuse:{value:new Vi(16777215)},opacity:{value:1},center:{value:new Kr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new li},alphaMap:{value:null},alphaMapTransform:{value:new li},alphaTest:{value:0}}},Hl={basic:{uniforms:Jo([Cr.common,Cr.specularmap,Cr.envmap,Cr.aomap,Cr.lightmap,Cr.fog]),vertexShader:Qr.meshbasic_vert,fragmentShader:Qr.meshbasic_frag},lambert:{uniforms:Jo([Cr.common,Cr.specularmap,Cr.envmap,Cr.aomap,Cr.lightmap,Cr.emissivemap,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,Cr.fog,Cr.lights,{emissive:{value:new Vi(0)}}]),vertexShader:Qr.meshlambert_vert,fragmentShader:Qr.meshlambert_frag},phong:{uniforms:Jo([Cr.common,Cr.specularmap,Cr.envmap,Cr.aomap,Cr.lightmap,Cr.emissivemap,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,Cr.fog,Cr.lights,{emissive:{value:new Vi(0)},specular:{value:new Vi(1118481)},shininess:{value:30}}]),vertexShader:Qr.meshphong_vert,fragmentShader:Qr.meshphong_frag},standard:{uniforms:Jo([Cr.common,Cr.envmap,Cr.aomap,Cr.lightmap,Cr.emissivemap,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,Cr.roughnessmap,Cr.metalnessmap,Cr.fog,Cr.lights,{emissive:{value:new Vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag},toon:{uniforms:Jo([Cr.common,Cr.aomap,Cr.lightmap,Cr.emissivemap,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,Cr.gradientmap,Cr.fog,Cr.lights,{emissive:{value:new Vi(0)}}]),vertexShader:Qr.meshtoon_vert,fragmentShader:Qr.meshtoon_frag},matcap:{uniforms:Jo([Cr.common,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,Cr.fog,{matcap:{value:null}}]),vertexShader:Qr.meshmatcap_vert,fragmentShader:Qr.meshmatcap_frag},points:{uniforms:Jo([Cr.points,Cr.fog]),vertexShader:Qr.points_vert,fragmentShader:Qr.points_frag},dashed:{uniforms:Jo([Cr.common,Cr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qr.linedashed_vert,fragmentShader:Qr.linedashed_frag},depth:{uniforms:Jo([Cr.common,Cr.displacementmap]),vertexShader:Qr.depth_vert,fragmentShader:Qr.depth_frag},normal:{uniforms:Jo([Cr.common,Cr.bumpmap,Cr.normalmap,Cr.displacementmap,{opacity:{value:1}}]),vertexShader:Qr.meshnormal_vert,fragmentShader:Qr.meshnormal_frag},sprite:{uniforms:Jo([Cr.sprite,Cr.fog]),vertexShader:Qr.sprite_vert,fragmentShader:Qr.sprite_frag},background:{uniforms:{uvTransform:{value:new li},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qr.background_vert,fragmentShader:Qr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Qr.backgroundCube_vert,fragmentShader:Qr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qr.cube_vert,fragmentShader:Qr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qr.equirect_vert,fragmentShader:Qr.equirect_frag},distanceRGBA:{uniforms:Jo([Cr.common,Cr.displacementmap,{referencePosition:{value:new Hn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qr.distanceRGBA_vert,fragmentShader:Qr.distanceRGBA_frag},shadow:{uniforms:Jo([Cr.lights,Cr.fog,{color:{value:new Vi(0)},opacity:{value:1}}]),vertexShader:Qr.shadow_vert,fragmentShader:Qr.shadow_frag}};Hl.physical={uniforms:Jo([Hl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new li},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new li},clearcoatNormalScale:{value:new Kr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new li},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new li},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new li},sheen:{value:0},sheenColor:{value:new Vi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new li},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new li},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new li},transmissionSamplerSize:{value:new Kr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new li},attenuationDistance:{value:0},attenuationColor:{value:new Vi(0)},specularColor:{value:new Vi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new li},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new li},anisotropyVector:{value:new Kr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new li}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag};const Yp={r:0,b:0,g:0};function A3(be,I,J,ve,Ve,F,L){const e=new Vi(0);let T=F===!0?0:1,b,a,_=null,g=0,h=null;function o(i,n){let r=!1,s=n.isScene===!0?n.background:null;switch(s&&s.isTexture&&(s=(n.backgroundBlurriness>0?J:I).get(s)),s===null?t(e,T):s&&s.isColor&&(t(s,1),r=!0),be.xr.getEnvironmentBlendMode()){case"opaque":r=!0;break;case"additive":ve.buffers.color.setClear(0,0,0,1,L),r=!0;break;case"alpha-blend":ve.buffers.color.setClear(0,0,0,0,L),r=!0;break}(be.autoClear||r)&&be.clear(be.autoClearColor,be.autoClearDepth,be.autoClearStencil),s&&(s.isCubeTexture||s.mapping===ld)?(a===void 0&&(a=new Wl(new jh(1,1,1),new bc({name:"BackgroundCubeMaterial",uniforms:Rf(Hl.backgroundCube.uniforms),vertexShader:Hl.backgroundCube.vertexShader,fragmentShader:Hl.backgroundCube.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(d,c,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Ve.update(a)),a.material.uniforms.envMap.value=s,a.material.uniforms.flipEnvMap.value=s.isCubeTexture&&s.isRenderTargetTexture===!1?-1:1,a.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,a.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,a.material.toneMapped=s.colorSpace!==ei,(_!==s||g!==s.version||h!==be.toneMapping)&&(a.material.needsUpdate=!0,_=s,g=s.version,h=be.toneMapping),a.layers.enableAll(),i.unshift(a,a.geometry,a.material,0,0,null)):s&&s.isTexture&&(b===void 0&&(b=new Wl(new $0(2,2),new bc({name:"BackgroundMaterial",uniforms:Rf(Hl.background.uniforms),vertexShader:Hl.background.vertexShader,fragmentShader:Hl.background.fragmentShader,side:Hu,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),Ve.update(b)),b.material.uniforms.t2D.value=s,b.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,b.material.toneMapped=s.colorSpace!==ei,s.matrixAutoUpdate===!0&&s.updateMatrix(),b.material.uniforms.uvTransform.value.copy(s.matrix),(_!==s||g!==s.version||h!==be.toneMapping)&&(b.material.needsUpdate=!0,_=s,g=s.version,h=be.toneMapping),b.layers.enableAll(),i.unshift(b,b.geometry,b.material,0,0,null))}function t(i,n){i.getRGB(Yp,W1(be)),ve.buffers.color.setClear(Yp.r,Yp.g,Yp.b,n,L)}return{getClearColor:function(){return e},setClearColor:function(i,n=1){e.set(i),T=n,t(e,T)},getClearAlpha:function(){return T},setClearAlpha:function(i){T=i,t(e,T)},render:o}}function S3(be,I,J,ve){const Ve=be.getParameter(be.MAX_VERTEX_ATTRIBS),F=ve.isWebGL2?null:I.get("OES_vertex_array_object"),L=ve.isWebGL2||F!==null,e={},T=i(null);let b=T,a=!1;function _(M,p,S,A,k){let C=!1;if(L){const P=t(A,S,p);b!==P&&(b=P,h(b.object)),C=n(M,A,S,k),C&&r(M,A,S,k)}else{const P=p.wireframe===!0;(b.geometry!==A.id||b.program!==S.id||b.wireframe!==P)&&(b.geometry=A.id,b.program=S.id,b.wireframe=P,C=!0)}k!==null&&J.update(k,be.ELEMENT_ARRAY_BUFFER),(C||a)&&(a=!1,w(M,p,S,A),k!==null&&be.bindBuffer(be.ELEMENT_ARRAY_BUFFER,J.get(k).buffer))}function g(){return ve.isWebGL2?be.createVertexArray():F.createVertexArrayOES()}function h(M){return ve.isWebGL2?be.bindVertexArray(M):F.bindVertexArrayOES(M)}function o(M){return ve.isWebGL2?be.deleteVertexArray(M):F.deleteVertexArrayOES(M)}function t(M,p,S){const A=S.wireframe===!0;let k=e[M.id];k===void 0&&(k={},e[M.id]=k);let C=k[p.id];C===void 0&&(C={},k[p.id]=C);let P=C[A];return P===void 0&&(P=i(g()),C[A]=P),P}function i(M){const p=[],S=[],A=[];for(let k=0;k<Ve;k++)p[k]=0,S[k]=0,A[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:p,enabledAttributes:S,attributeDivisors:A,object:M,attributes:{},index:null}}function n(M,p,S,A){const k=b.attributes,C=p.attributes;let P=0;const R=S.getAttributes();for(const O in R)if(R[O].location>=0){const D=k[O];let V=C[O];if(V===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(V=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(V=M.instanceColor)),D===void 0||D.attribute!==V||V&&D.data!==V.data)return!0;P++}return b.attributesNum!==P||b.index!==A}function r(M,p,S,A){const k={},C=p.attributes;let P=0;const R=S.getAttributes();for(const O in R)if(R[O].location>=0){let D=C[O];D===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(D=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(D=M.instanceColor));const V={};V.attribute=D,D&&D.data&&(V.data=D.data),k[O]=V,P++}b.attributes=k,b.attributesNum=P,b.index=A}function s(){const M=b.newAttributes;for(let p=0,S=M.length;p<S;p++)M[p]=0}function l(M){u(M,0)}function u(M,p){const S=b.newAttributes,A=b.enabledAttributes,k=b.attributeDivisors;S[M]=1,A[M]===0&&(be.enableVertexAttribArray(M),A[M]=1),k[M]!==p&&((ve.isWebGL2?be:I.get("ANGLE_instanced_arrays"))[ve.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](M,p),k[M]=p)}function d(){const M=b.newAttributes,p=b.enabledAttributes;for(let S=0,A=p.length;S<A;S++)p[S]!==M[S]&&(be.disableVertexAttribArray(S),p[S]=0)}function c(M,p,S,A,k,C,P){P===!0?be.vertexAttribIPointer(M,p,S,k,C):be.vertexAttribPointer(M,p,S,A,k,C)}function w(M,p,S,A){if(ve.isWebGL2===!1&&(M.isInstancedMesh||A.isInstancedBufferGeometry)&&I.get("ANGLE_instanced_arrays")===null)return;s();const k=A.attributes,C=S.getAttributes(),P=p.defaultAttributeValues;for(const R in C){const O=C[R];if(O.location>=0){let X=k[R];if(X===void 0&&(R==="instanceMatrix"&&M.instanceMatrix&&(X=M.instanceMatrix),R==="instanceColor"&&M.instanceColor&&(X=M.instanceColor)),X!==void 0){const D=X.normalized,V=X.itemSize,j=J.get(X);if(j===void 0)continue;const B=j.buffer,W=j.type,q=j.bytesPerElement,re=ve.isWebGL2===!0&&(W===be.INT||W===be.UNSIGNED_INT||X.gpuType===S1);if(X.isInterleavedBufferAttribute){const ee=X.data,K=ee.stride,Y=X.offset;if(ee.isInstancedInterleavedBuffer){for(let $=0;$<O.locationSize;$++)u(O.location+$,ee.meshPerAttribute);M.isInstancedMesh!==!0&&A._maxInstanceCount===void 0&&(A._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let $=0;$<O.locationSize;$++)l(O.location+$);be.bindBuffer(be.ARRAY_BUFFER,B);for(let $=0;$<O.locationSize;$++)c(O.location+$,V/O.locationSize,W,D,K*q,(Y+V/O.locationSize*$)*q,re)}else{if(X.isInstancedBufferAttribute){for(let ee=0;ee<O.locationSize;ee++)u(O.location+ee,X.meshPerAttribute);M.isInstancedMesh!==!0&&A._maxInstanceCount===void 0&&(A._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let ee=0;ee<O.locationSize;ee++)l(O.location+ee);be.bindBuffer(be.ARRAY_BUFFER,B);for(let ee=0;ee<O.locationSize;ee++)c(O.location+ee,V/O.locationSize,W,D,V*q,V/O.locationSize*ee*q,re)}}else if(P!==void 0){const D=P[R];if(D!==void 0)switch(D.length){case 2:be.vertexAttrib2fv(O.location,D);break;case 3:be.vertexAttrib3fv(O.location,D);break;case 4:be.vertexAttrib4fv(O.location,D);break;default:be.vertexAttrib1fv(O.location,D)}}}}d()}function m(){y();for(const M in e){const p=e[M];for(const S in p){const A=p[S];for(const k in A)o(A[k].object),delete A[k];delete p[S]}delete e[M]}}function f(M){if(e[M.id]===void 0)return;const p=e[M.id];for(const S in p){const A=p[S];for(const k in A)o(A[k].object),delete A[k];delete p[S]}delete e[M.id]}function x(M){for(const p in e){const S=e[p];if(S[M.id]===void 0)continue;const A=S[M.id];for(const k in A)o(A[k].object),delete A[k];delete S[M.id]}}function y(){v(),a=!0,b!==T&&(b=T,h(b.object))}function v(){T.geometry=null,T.program=null,T.wireframe=!1}return{setup:_,reset:y,resetDefaultState:v,dispose:m,releaseStatesOfGeometry:f,releaseStatesOfProgram:x,initAttributes:s,enableAttribute:l,disableUnusedAttributes:d}}function E3(be,I,J,ve){const Ve=ve.isWebGL2;let F;function L(b){F=b}function e(b,a){be.drawArrays(F,b,a),J.update(a,F,1)}function T(b,a,_){if(_===0)return;let g,h;if(Ve)g=be,h="drawArraysInstanced";else if(g=I.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[h](F,b,a,_),J.update(a,F,_)}this.setMode=L,this.render=e,this.renderInstances=T}function k3(be,I,J){let ve;function Ve(){if(ve!==void 0)return ve;if(I.has("EXT_texture_filter_anisotropic")===!0){const c=I.get("EXT_texture_filter_anisotropic");ve=be.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else ve=0;return ve}function F(c){if(c==="highp"){if(be.getShaderPrecisionFormat(be.VERTEX_SHADER,be.HIGH_FLOAT).precision>0&&be.getShaderPrecisionFormat(be.FRAGMENT_SHADER,be.HIGH_FLOAT).precision>0)return"highp";c="mediump"}return c==="mediump"&&be.getShaderPrecisionFormat(be.VERTEX_SHADER,be.MEDIUM_FLOAT).precision>0&&be.getShaderPrecisionFormat(be.FRAGMENT_SHADER,be.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const L=typeof WebGL2RenderingContext<"u"&&be.constructor.name==="WebGL2RenderingContext";let e=J.precision!==void 0?J.precision:"highp";const T=F(e);T!==e&&(console.warn("THREE.WebGLRenderer:",e,"not supported, using",T,"instead."),e=T);const b=L||I.has("WEBGL_draw_buffers"),a=J.logarithmicDepthBuffer===!0,_=be.getParameter(be.MAX_TEXTURE_IMAGE_UNITS),g=be.getParameter(be.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=be.getParameter(be.MAX_TEXTURE_SIZE),o=be.getParameter(be.MAX_CUBE_MAP_TEXTURE_SIZE),t=be.getParameter(be.MAX_VERTEX_ATTRIBS),i=be.getParameter(be.MAX_VERTEX_UNIFORM_VECTORS),n=be.getParameter(be.MAX_VARYING_VECTORS),r=be.getParameter(be.MAX_FRAGMENT_UNIFORM_VECTORS),s=g>0,l=L||I.has("OES_texture_float"),u=s&&l,d=L?be.getParameter(be.MAX_SAMPLES):0;return{isWebGL2:L,drawBuffers:b,getMaxAnisotropy:Ve,getMaxPrecision:F,precision:e,logarithmicDepthBuffer:a,maxTextures:_,maxVertexTextures:g,maxTextureSize:h,maxCubemapSize:o,maxAttributes:t,maxVertexUniforms:i,maxVaryings:n,maxFragmentUniforms:r,vertexTextures:s,floatFragmentTextures:l,floatVertexTextures:u,maxSamples:d}}function L3(be){const I=this;let J=null,ve=0,Ve=!1,F=!1;const L=new Du,e=new li,T={value:null,needsUpdate:!1};this.uniform=T,this.numPlanes=0,this.numIntersection=0,this.init=function(_,g){const h=_.length!==0||g||ve!==0||Ve;return Ve=g,ve=_.length,h},this.beginShadows=function(){F=!0,a(null)},this.endShadows=function(){F=!1},this.setGlobalState=function(_,g){J=a(_,g,0)},this.setState=function(_,g,h){const o=_.clippingPlanes,t=_.clipIntersection,i=_.clipShadows,n=be.get(_);if(!Ve||o===null||o.length===0||F&&!i)F?a(null):b();else{const r=F?0:ve,s=r*4;let l=n.clippingState||null;T.value=l,l=a(o,g,s,h);for(let u=0;u!==s;++u)l[u]=J[u];n.clippingState=l,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=r}};function b(){T.value!==J&&(T.value=J,T.needsUpdate=ve>0),I.numPlanes=ve,I.numIntersection=0}function a(_,g,h,o){const t=_!==null?_.length:0;let i=null;if(t!==0){if(i=T.value,o!==!0||i===null){const n=h+t*4,r=g.matrixWorldInverse;e.getNormalMatrix(r),(i===null||i.length<n)&&(i=new Float32Array(n));for(let s=0,l=h;s!==t;++s,l+=4)L.copy(_[s]).applyMatrix4(r,e),L.normal.toArray(i,l),i[l+3]=L.constant}T.value=i,T.needsUpdate=!0}return I.numPlanes=t,I.numIntersection=0,i}}function C3(be){let I=new WeakMap;function J(L,e){return e===z0?L.mapping=kf:e===F0&&(L.mapping=Lf),L}function ve(L){if(L&&L.isTexture&&L.isRenderTargetTexture===!1){const e=L.mapping;if(e===z0||e===F0)if(I.has(L)){const T=I.get(L).texture;return J(T,L.mapping)}else{const T=L.image;if(T&&T.height>0){const b=new G2(T.height/2);return b.fromEquirectangularTexture(be,L),I.set(L,b),L.addEventListener("dispose",Ve),J(b.texture,L.mapping)}else return null}}return L}function Ve(L){const e=L.target;e.removeEventListener("dispose",Ve);const T=I.get(e);T!==void 0&&(I.delete(e),T.dispose())}function F(){I=new WeakMap}return{get:ve,dispose:F}}class P3 extends q1{constructor(I=-1,J=1,ve=1,Ve=-1,F=.1,L=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=I,this.right=J,this.top=ve,this.bottom=Ve,this.near=F,this.far=L,this.updateProjectionMatrix()}copy(I,J){return super.copy(I,J),this.left=I.left,this.right=I.right,this.top=I.top,this.bottom=I.bottom,this.near=I.near,this.far=I.far,this.zoom=I.zoom,this.view=I.view===null?null:Object.assign({},I.view),this}setViewOffset(I,J,ve,Ve,F,L){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=I,this.view.fullHeight=J,this.view.offsetX=ve,this.view.offsetY=Ve,this.view.width=F,this.view.height=L,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const I=(this.right-this.left)/(2*this.zoom),J=(this.top-this.bottom)/(2*this.zoom),ve=(this.right+this.left)/2,Ve=(this.top+this.bottom)/2;let F=ve-I,L=ve+I,e=Ve+J,T=Ve-J;if(this.view!==null&&this.view.enabled){const b=(this.right-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom;F+=b*this.view.offsetX,L=F+b*this.view.width,e-=a*this.view.offsetY,T=e-a*this.view.height}this.projectionMatrix.makeOrthographic(F,L,e,T,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(I){const J=super.toJSON(I);return J.object.zoom=this.zoom,J.object.left=this.left,J.object.right=this.right,J.object.top=this.top,J.object.bottom=this.bottom,J.object.near=this.near,J.object.far=this.far,this.view!==null&&(J.object.view=Object.assign({},this.view)),J}}const bf=4,Rv=[.125,.215,.35,.446,.526,.582],pc=20,M0=new P3,Iv=new Vi;let A0=null;const hc=(1+Math.sqrt(5))/2,vf=1/hc,Ov=[new Hn(1,1,1),new Hn(-1,1,1),new Hn(1,1,-1),new Hn(-1,1,-1),new Hn(0,hc,vf),new Hn(0,hc,-vf),new Hn(vf,0,hc),new Hn(-vf,0,hc),new Hn(hc,vf,0),new Hn(-hc,vf,0)];class Dv{constructor(I){this._renderer=I,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(I,J=0,ve=.1,Ve=100){A0=this._renderer.getRenderTarget(),this._setSize(256);const F=this._allocateTargets();return F.depthBuffer=!0,this._sceneToCubeUV(I,ve,Ve,F),J>0&&this._blur(F,0,0,J),this._applyPMREM(F),this._cleanup(F),F}fromEquirectangular(I,J=null){return this._fromTexture(I,J)}fromCubemap(I,J=null){return this._fromTexture(I,J)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Nv(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Fv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(I){this._lodMax=Math.floor(Math.log2(I)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let I=0;I<this._lodPlanes.length;I++)this._lodPlanes[I].dispose()}_cleanup(I){this._renderer.setRenderTarget(A0),I.scissorTest=!1,Zp(I,0,0,I.width,I.height)}_fromTexture(I,J){I.mapping===kf||I.mapping===Lf?this._setSize(I.image.length===0?16:I.image[0].width||I.image[0].image.width):this._setSize(I.image.width/4),A0=this._renderer.getRenderTarget();const ve=J||this._allocateTargets();return this._textureToCubeUV(I,ve),this._applyPMREM(ve),this._cleanup(ve),ve}_allocateTargets(){const I=3*Math.max(this._cubeSize,112),J=4*this._cubeSize,ve={magFilter:rl,minFilter:rl,generateMipmaps:!1,type:Fh,format:kl,colorSpace:ql,depthBuffer:!1},Ve=zv(I,J,ve);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==I||this._pingPongRenderTarget.height!==J){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=zv(I,J,ve);const{_lodMax:F}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=R3(F)),this._blurMaterial=I3(F,I,J)}return Ve}_compileMaterial(I){const J=new Wl(this._lodPlanes[0],I);this._renderer.compile(J,M0)}_sceneToCubeUV(I,J,ve,Ve){const e=new xs(90,1,J,ve),T=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],a=this._renderer,_=a.autoClear,g=a.toneMapping;a.getClearColor(Iv),a.toneMapping=Bu,a.autoClear=!1;const h=new V1({name:"PMREM.Background",side:bs,depthWrite:!1,depthTest:!1}),o=new Wl(new jh,h);let t=!1;const i=I.background;i?i.isColor&&(h.color.copy(i),I.background=null,t=!0):(h.color.copy(Iv),t=!0);for(let n=0;n<6;n++){const r=n%3;r===0?(e.up.set(0,T[n],0),e.lookAt(b[n],0,0)):r===1?(e.up.set(0,0,T[n]),e.lookAt(0,b[n],0)):(e.up.set(0,T[n],0),e.lookAt(0,0,b[n]));const s=this._cubeSize;Zp(Ve,r*s,n>2?s:0,s,s),a.setRenderTarget(Ve),t&&a.render(o,e),a.render(I,e)}o.geometry.dispose(),o.material.dispose(),a.toneMapping=g,a.autoClear=_,I.background=i}_textureToCubeUV(I,J){const ve=this._renderer,Ve=I.mapping===kf||I.mapping===Lf;Ve?(this._cubemapMaterial===null&&(this._cubemapMaterial=Nv()),this._cubemapMaterial.uniforms.flipEnvMap.value=I.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Fv());const F=Ve?this._cubemapMaterial:this._equirectMaterial,L=new Wl(this._lodPlanes[0],F),e=F.uniforms;e.envMap.value=I;const T=this._cubeSize;Zp(J,0,0,3*T,2*T),ve.setRenderTarget(J),ve.render(L,M0)}_applyPMREM(I){const J=this._renderer,ve=J.autoClear;J.autoClear=!1;for(let Ve=1;Ve<this._lodPlanes.length;Ve++){const F=Math.sqrt(this._sigmas[Ve]*this._sigmas[Ve]-this._sigmas[Ve-1]*this._sigmas[Ve-1]),L=Ov[(Ve-1)%Ov.length];this._blur(I,Ve-1,Ve,F,L)}J.autoClear=ve}_blur(I,J,ve,Ve,F){const L=this._pingPongRenderTarget;this._halfBlur(I,L,J,ve,Ve,"latitudinal",F),this._halfBlur(L,I,ve,ve,Ve,"longitudinal",F)}_halfBlur(I,J,ve,Ve,F,L,e){const T=this._renderer,b=this._blurMaterial;L!=="latitudinal"&&L!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const a=3,_=new Wl(this._lodPlanes[Ve],b),g=b.uniforms,h=this._sizeLods[ve]-1,o=isFinite(F)?Math.PI/(2*h):2*Math.PI/(2*pc-1),t=F/o,i=isFinite(F)?1+Math.floor(a*t):pc;i>pc&&console.warn(`sigmaRadians, ${F}, is too large and will clip, as it requested ${i} samples when the maximum is set to ${pc}`);const n=[];let r=0;for(let c=0;c<pc;++c){const w=c/t,m=Math.exp(-w*w/2);n.push(m),c===0?r+=m:c<i&&(r+=2*m)}for(let c=0;c<n.length;c++)n[c]=n[c]/r;g.envMap.value=I.texture,g.samples.value=i,g.weights.value=n,g.latitudinal.value=L==="latitudinal",e&&(g.poleAxis.value=e);const{_lodMax:s}=this;g.dTheta.value=o,g.mipInt.value=s-ve;const l=this._sizeLods[Ve],u=3*l*(Ve>s-bf?Ve-s+bf:0),d=4*(this._cubeSize-l);Zp(J,u,d,3*l,2*l),T.setRenderTarget(J),T.render(_,M0)}}function R3(be){const I=[],J=[],ve=[];let Ve=be;const F=be-bf+1+Rv.length;for(let L=0;L<F;L++){const e=Math.pow(2,Ve);J.push(e);let T=1/e;L>be-bf?T=Rv[L-be+bf-1]:L===0&&(T=0),ve.push(T);const b=1/(e-2),a=-b,_=1+b,g=[a,a,_,a,_,_,a,a,_,_,a,_],h=6,o=6,t=3,i=2,n=1,r=new Float32Array(t*o*h),s=new Float32Array(i*o*h),l=new Float32Array(n*o*h);for(let d=0;d<h;d++){const c=d%3*2/3-1,w=d>2?0:-1,m=[c,w,0,c+2/3,w,0,c+2/3,w+1,0,c,w,0,c+2/3,w+1,0,c,w+1,0];r.set(m,t*o*d),s.set(g,i*o*d);const f=[d,d,d,d,d,d];l.set(f,n*o*d)}const u=new qu;u.setAttribute("position",new Hs(r,t)),u.setAttribute("uv",new Hs(s,i)),u.setAttribute("faceIndex",new Hs(l,n)),I.push(u),Ve>bf&&Ve--}return{lodPlanes:I,sizeLods:J,sigmas:ve}}function zv(be,I,J){const ve=new xc(be,I,J);return ve.texture.mapping=ld,ve.texture.name="PMREM.cubeUv",ve.scissorTest=!0,ve}function Zp(be,I,J,ve,Ve){be.viewport.set(I,J,ve,Ve),be.scissor.set(I,J,ve,Ve)}function I3(be,I,J){const ve=new Float32Array(pc),Ve=new Hn(0,1,0);return new bc({name:"SphericalGaussianBlur",defines:{n:pc,CUBEUV_TEXEL_WIDTH:1/I,CUBEUV_TEXEL_HEIGHT:1/J,CUBEUV_MAX_MIP:`${be}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ve},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Ve}},vertexShader:Q0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function Fv(){return new bc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Q0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function Nv(){return new bc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Q0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function Q0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function O3(be){let I=new WeakMap,J=null;function ve(e){if(e&&e.isTexture){const T=e.mapping,b=T===z0||T===F0,a=T===kf||T===Lf;if(b||a)if(e.isRenderTargetTexture&&e.needsPMREMUpdate===!0){e.needsPMREMUpdate=!1;let _=I.get(e);return J===null&&(J=new Dv(be)),_=b?J.fromEquirectangular(e,_):J.fromCubemap(e,_),I.set(e,_),_.texture}else{if(I.has(e))return I.get(e).texture;{const _=e.image;if(b&&_&&_.height>0||a&&_&&Ve(_)){J===null&&(J=new Dv(be));const g=b?J.fromEquirectangular(e):J.fromCubemap(e);return I.set(e,g),e.addEventListener("dispose",F),g.texture}else return null}}}return e}function Ve(e){let T=0;const b=6;for(let a=0;a<b;a++)e[a]!==void 0&&T++;return T===b}function F(e){const T=e.target;T.removeEventListener("dispose",F);const b=I.get(T);b!==void 0&&(I.delete(T),b.dispose())}function L(){I=new WeakMap,J!==null&&(J.dispose(),J=null)}return{get:ve,dispose:L}}function D3(be){const I={};function J(ve){if(I[ve]!==void 0)return I[ve];let Ve;switch(ve){case"WEBGL_depth_texture":Ve=be.getExtension("WEBGL_depth_texture")||be.getExtension("MOZ_WEBGL_depth_texture")||be.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ve=be.getExtension("EXT_texture_filter_anisotropic")||be.getExtension("MOZ_EXT_texture_filter_anisotropic")||be.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ve=be.getExtension("WEBGL_compressed_texture_s3tc")||be.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||be.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ve=be.getExtension("WEBGL_compressed_texture_pvrtc")||be.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ve=be.getExtension(ve)}return I[ve]=Ve,Ve}return{has:function(ve){return J(ve)!==null},init:function(ve){ve.isWebGL2?J("EXT_color_buffer_float"):(J("WEBGL_depth_texture"),J("OES_texture_float"),J("OES_texture_half_float"),J("OES_texture_half_float_linear"),J("OES_standard_derivatives"),J("OES_element_index_uint"),J("OES_vertex_array_object"),J("ANGLE_instanced_arrays")),J("OES_texture_float_linear"),J("EXT_color_buffer_half_float"),J("WEBGL_multisampled_render_to_texture")},get:function(ve){const Ve=J(ve);return Ve===null&&console.warn("THREE.WebGLRenderer: "+ve+" extension not supported."),Ve}}}function z3(be,I,J,ve){const Ve={},F=new WeakMap;function L(_){const g=_.target;g.index!==null&&I.remove(g.index);for(const o in g.attributes)I.remove(g.attributes[o]);for(const o in g.morphAttributes){const t=g.morphAttributes[o];for(let i=0,n=t.length;i<n;i++)I.remove(t[i])}g.removeEventListener("dispose",L),delete Ve[g.id];const h=F.get(g);h&&(I.remove(h),F.delete(g)),ve.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,J.memory.geometries--}function e(_,g){return Ve[g.id]===!0||(g.addEventListener("dispose",L),Ve[g.id]=!0,J.memory.geometries++),g}function T(_){const g=_.attributes;for(const o in g)I.update(g[o],be.ARRAY_BUFFER);const h=_.morphAttributes;for(const o in h){const t=h[o];for(let i=0,n=t.length;i<n;i++)I.update(t[i],be.ARRAY_BUFFER)}}function b(_){const g=[],h=_.index,o=_.attributes.position;let t=0;if(h!==null){const r=h.array;t=h.version;for(let s=0,l=r.length;s<l;s+=3){const u=r[s+0],d=r[s+1],c=r[s+2];g.push(u,d,d,c,c,u)}}else if(o!==void 0){const r=o.array;t=o.version;for(let s=0,l=r.length/3-1;s<l;s+=3){const u=s+0,d=s+1,c=s+2;g.push(u,d,d,c,c,u)}}else return;const i=new(D1(g)?G1:H1)(g,1);i.version=t;const n=F.get(_);n&&I.remove(n),F.set(_,i)}function a(_){const g=F.get(_);if(g){const h=_.index;h!==null&&g.version<h.version&&b(_)}else b(_);return F.get(_)}return{get:e,update:T,getWireframeAttribute:a}}function F3(be,I,J,ve){const Ve=ve.isWebGL2;let F;function L(g){F=g}let e,T;function b(g){e=g.type,T=g.bytesPerElement}function a(g,h){be.drawElements(F,h,e,g*T),J.update(h,F,1)}function _(g,h,o){if(o===0)return;let t,i;if(Ve)t=be,i="drawElementsInstanced";else if(t=I.get("ANGLE_instanced_arrays"),i="drawElementsInstancedANGLE",t===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}t[i](F,h,e,g*T,o),J.update(h,F,o)}this.setMode=L,this.setIndex=b,this.render=a,this.renderInstances=_}function N3(be){const I={geometries:0,textures:0},J={frame:0,calls:0,triangles:0,points:0,lines:0};function ve(F,L,e){switch(J.calls++,L){case be.TRIANGLES:J.triangles+=e*(F/3);break;case be.LINES:J.lines+=e*(F/2);break;case be.LINE_STRIP:J.lines+=e*(F-1);break;case be.LINE_LOOP:J.lines+=e*F;break;case be.POINTS:J.points+=e*F;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",L);break}}function Ve(){J.calls=0,J.triangles=0,J.points=0,J.lines=0}return{memory:I,render:J,programs:null,autoReset:!0,reset:Ve,update:ve}}function B3(be,I){return be[0]-I[0]}function U3(be,I){return Math.abs(I[1])-Math.abs(be[1])}function j3(be,I,J){const ve={},Ve=new Float32Array(8),F=new WeakMap,L=new ma,e=[];for(let b=0;b<8;b++)e[b]=[b,0];function T(b,a,_){const g=b.morphTargetInfluences;if(I.isWebGL2===!0){const o=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,t=o!==void 0?o.length:0;let i=F.get(a);if(i===void 0||i.count!==t){let p=function(){v.dispose(),F.delete(a),a.removeEventListener("dispose",p)};var h=p;i!==void 0&&i.texture.dispose();const s=a.morphAttributes.position!==void 0,l=a.morphAttributes.normal!==void 0,u=a.morphAttributes.color!==void 0,d=a.morphAttributes.position||[],c=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let m=0;s===!0&&(m=1),l===!0&&(m=2),u===!0&&(m=3);let f=a.attributes.position.count*m,x=1;f>I.maxTextureSize&&(x=Math.ceil(f/I.maxTextureSize),f=I.maxTextureSize);const y=new Float32Array(f*x*4*t),v=new N1(y,f,x,t);v.type=Fu,v.needsUpdate=!0;const M=m*4;for(let S=0;S<t;S++){const A=d[S],k=c[S],C=w[S],P=f*x*4*S;for(let R=0;R<A.count;R++){const O=R*M;s===!0&&(L.fromBufferAttribute(A,R),y[P+O+0]=L.x,y[P+O+1]=L.y,y[P+O+2]=L.z,y[P+O+3]=0),l===!0&&(L.fromBufferAttribute(k,R),y[P+O+4]=L.x,y[P+O+5]=L.y,y[P+O+6]=L.z,y[P+O+7]=0),u===!0&&(L.fromBufferAttribute(C,R),y[P+O+8]=L.x,y[P+O+9]=L.y,y[P+O+10]=L.z,y[P+O+11]=C.itemSize===4?L.w:1)}}i={count:t,texture:v,size:new Kr(f,x)},F.set(a,i),a.addEventListener("dispose",p)}let n=0;for(let s=0;s<g.length;s++)n+=g[s];const r=a.morphTargetsRelative?1:1-n;_.getUniforms().setValue(be,"morphTargetBaseInfluence",r),_.getUniforms().setValue(be,"morphTargetInfluences",g),_.getUniforms().setValue(be,"morphTargetsTexture",i.texture,J),_.getUniforms().setValue(be,"morphTargetsTextureSize",i.size)}else{const o=g===void 0?0:g.length;let t=ve[a.id];if(t===void 0||t.length!==o){t=[];for(let l=0;l<o;l++)t[l]=[l,0];ve[a.id]=t}for(let l=0;l<o;l++){const u=t[l];u[0]=l,u[1]=g[l]}t.sort(U3);for(let l=0;l<8;l++)l<o&&t[l][1]?(e[l][0]=t[l][0],e[l][1]=t[l][1]):(e[l][0]=Number.MAX_SAFE_INTEGER,e[l][1]=0);e.sort(B3);const i=a.morphAttributes.position,n=a.morphAttributes.normal;let r=0;for(let l=0;l<8;l++){const u=e[l],d=u[0],c=u[1];d!==Number.MAX_SAFE_INTEGER&&c?(i&&a.getAttribute("morphTarget"+l)!==i[d]&&a.setAttribute("morphTarget"+l,i[d]),n&&a.getAttribute("morphNormal"+l)!==n[d]&&a.setAttribute("morphNormal"+l,n[d]),Ve[l]=c,r+=c):(i&&a.hasAttribute("morphTarget"+l)===!0&&a.deleteAttribute("morphTarget"+l),n&&a.hasAttribute("morphNormal"+l)===!0&&a.deleteAttribute("morphNormal"+l),Ve[l]=0)}const s=a.morphTargetsRelative?1:1-r;_.getUniforms().setValue(be,"morphTargetBaseInfluence",s),_.getUniforms().setValue(be,"morphTargetInfluences",Ve)}}return{update:T}}function V3(be,I,J,ve){let Ve=new WeakMap;function F(T){const b=ve.render.frame,a=T.geometry,_=I.get(T,a);if(Ve.get(_)!==b&&(I.update(_),Ve.set(_,b)),T.isInstancedMesh&&(T.hasEventListener("dispose",e)===!1&&T.addEventListener("dispose",e),Ve.get(T)!==b&&(J.update(T.instanceMatrix,be.ARRAY_BUFFER),T.instanceColor!==null&&J.update(T.instanceColor,be.ARRAY_BUFFER),Ve.set(T,b))),T.isSkinnedMesh){const g=T.skeleton;Ve.get(g)!==b&&(g.update(),Ve.set(g,b))}return _}function L(){Ve=new WeakMap}function e(T){const b=T.target;b.removeEventListener("dispose",e),J.remove(b.instanceMatrix),b.instanceColor!==null&&J.remove(b.instanceColor)}return{update:F,dispose:L}}const Z1=new Vs,K1=new N1,J1=new k2,$1=new X1,Bv=[],Uv=[],jv=new Float32Array(16),Vv=new Float32Array(9),Hv=new Float32Array(4);function jf(be,I,J){const ve=be[0];if(ve<=0||ve>0)return be;const Ve=I*J;let F=Bv[Ve];if(F===void 0&&(F=new Float32Array(Ve),Bv[Ve]=F),I!==0){ve.toArray(F,0);for(let L=1,e=0;L!==I;++L)e+=J,be[L].toArray(F,e)}return F}function Xa(be,I){if(be.length!==I.length)return!1;for(let J=0,ve=be.length;J<ve;J++)if(be[J]!==I[J])return!1;return!0}function Ya(be,I){for(let J=0,ve=I.length;J<ve;J++)be[J]=I[J]}function cd(be,I){let J=Uv[I];J===void 0&&(J=new Int32Array(I),Uv[I]=J);for(let ve=0;ve!==I;++ve)J[ve]=be.allocateTextureUnit();return J}function H3(be,I){const J=this.cache;J[0]!==I&&(be.uniform1f(this.addr,I),J[0]=I)}function G3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y)&&(be.uniform2f(this.addr,I.x,I.y),J[0]=I.x,J[1]=I.y);else{if(Xa(J,I))return;be.uniform2fv(this.addr,I),Ya(J,I)}}function W3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z)&&(be.uniform3f(this.addr,I.x,I.y,I.z),J[0]=I.x,J[1]=I.y,J[2]=I.z);else if(I.r!==void 0)(J[0]!==I.r||J[1]!==I.g||J[2]!==I.b)&&(be.uniform3f(this.addr,I.r,I.g,I.b),J[0]=I.r,J[1]=I.g,J[2]=I.b);else{if(Xa(J,I))return;be.uniform3fv(this.addr,I),Ya(J,I)}}function q3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z||J[3]!==I.w)&&(be.uniform4f(this.addr,I.x,I.y,I.z,I.w),J[0]=I.x,J[1]=I.y,J[2]=I.z,J[3]=I.w);else{if(Xa(J,I))return;be.uniform4fv(this.addr,I),Ya(J,I)}}function X3(be,I){const J=this.cache,ve=I.elements;if(ve===void 0){if(Xa(J,I))return;be.uniformMatrix2fv(this.addr,!1,I),Ya(J,I)}else{if(Xa(J,ve))return;Hv.set(ve),be.uniformMatrix2fv(this.addr,!1,Hv),Ya(J,ve)}}function Y3(be,I){const J=this.cache,ve=I.elements;if(ve===void 0){if(Xa(J,I))return;be.uniformMatrix3fv(this.addr,!1,I),Ya(J,I)}else{if(Xa(J,ve))return;Vv.set(ve),be.uniformMatrix3fv(this.addr,!1,Vv),Ya(J,ve)}}function Z3(be,I){const J=this.cache,ve=I.elements;if(ve===void 0){if(Xa(J,I))return;be.uniformMatrix4fv(this.addr,!1,I),Ya(J,I)}else{if(Xa(J,ve))return;jv.set(ve),be.uniformMatrix4fv(this.addr,!1,jv),Ya(J,ve)}}function K3(be,I){const J=this.cache;J[0]!==I&&(be.uniform1i(this.addr,I),J[0]=I)}function J3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y)&&(be.uniform2i(this.addr,I.x,I.y),J[0]=I.x,J[1]=I.y);else{if(Xa(J,I))return;be.uniform2iv(this.addr,I),Ya(J,I)}}function $3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z)&&(be.uniform3i(this.addr,I.x,I.y,I.z),J[0]=I.x,J[1]=I.y,J[2]=I.z);else{if(Xa(J,I))return;be.uniform3iv(this.addr,I),Ya(J,I)}}function Q3(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z||J[3]!==I.w)&&(be.uniform4i(this.addr,I.x,I.y,I.z,I.w),J[0]=I.x,J[1]=I.y,J[2]=I.z,J[3]=I.w);else{if(Xa(J,I))return;be.uniform4iv(this.addr,I),Ya(J,I)}}function e5(be,I){const J=this.cache;J[0]!==I&&(be.uniform1ui(this.addr,I),J[0]=I)}function t5(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y)&&(be.uniform2ui(this.addr,I.x,I.y),J[0]=I.x,J[1]=I.y);else{if(Xa(J,I))return;be.uniform2uiv(this.addr,I),Ya(J,I)}}function n5(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z)&&(be.uniform3ui(this.addr,I.x,I.y,I.z),J[0]=I.x,J[1]=I.y,J[2]=I.z);else{if(Xa(J,I))return;be.uniform3uiv(this.addr,I),Ya(J,I)}}function r5(be,I){const J=this.cache;if(I.x!==void 0)(J[0]!==I.x||J[1]!==I.y||J[2]!==I.z||J[3]!==I.w)&&(be.uniform4ui(this.addr,I.x,I.y,I.z,I.w),J[0]=I.x,J[1]=I.y,J[2]=I.z,J[3]=I.w);else{if(Xa(J,I))return;be.uniform4uiv(this.addr,I),Ya(J,I)}}function i5(be,I,J){const ve=this.cache,Ve=J.allocateTextureUnit();ve[0]!==Ve&&(be.uniform1i(this.addr,Ve),ve[0]=Ve),J.setTexture2D(I||Z1,Ve)}function a5(be,I,J){const ve=this.cache,Ve=J.allocateTextureUnit();ve[0]!==Ve&&(be.uniform1i(this.addr,Ve),ve[0]=Ve),J.setTexture3D(I||J1,Ve)}function o5(be,I,J){const ve=this.cache,Ve=J.allocateTextureUnit();ve[0]!==Ve&&(be.uniform1i(this.addr,Ve),ve[0]=Ve),J.setTextureCube(I||$1,Ve)}function s5(be,I,J){const ve=this.cache,Ve=J.allocateTextureUnit();ve[0]!==Ve&&(be.uniform1i(this.addr,Ve),ve[0]=Ve),J.setTexture2DArray(I||K1,Ve)}function l5(be){switch(be){case 5126:return H3;case 35664:return G3;case 35665:return W3;case 35666:return q3;case 35674:return X3;case 35675:return Y3;case 35676:return Z3;case 5124:case 35670:return K3;case 35667:case 35671:return J3;case 35668:case 35672:return $3;case 35669:case 35673:return Q3;case 5125:return e5;case 36294:return t5;case 36295:return n5;case 36296:return r5;case 35678:case 36198:case 36298:case 36306:case 35682:return i5;case 35679:case 36299:case 36307:return a5;case 35680:case 36300:case 36308:case 36293:return o5;case 36289:case 36303:case 36311:case 36292:return s5}}function u5(be,I){be.uniform1fv(this.addr,I)}function c5(be,I){const J=jf(I,this.size,2);be.uniform2fv(this.addr,J)}function f5(be,I){const J=jf(I,this.size,3);be.uniform3fv(this.addr,J)}function h5(be,I){const J=jf(I,this.size,4);be.uniform4fv(this.addr,J)}function p5(be,I){const J=jf(I,this.size,4);be.uniformMatrix2fv(this.addr,!1,J)}function d5(be,I){const J=jf(I,this.size,9);be.uniformMatrix3fv(this.addr,!1,J)}function m5(be,I){const J=jf(I,this.size,16);be.uniformMatrix4fv(this.addr,!1,J)}function g5(be,I){be.uniform1iv(this.addr,I)}function v5(be,I){be.uniform2iv(this.addr,I)}function y5(be,I){be.uniform3iv(this.addr,I)}function x5(be,I){be.uniform4iv(this.addr,I)}function _5(be,I){be.uniform1uiv(this.addr,I)}function b5(be,I){be.uniform2uiv(this.addr,I)}function w5(be,I){be.uniform3uiv(this.addr,I)}function T5(be,I){be.uniform4uiv(this.addr,I)}function M5(be,I,J){const ve=this.cache,Ve=I.length,F=cd(J,Ve);Xa(ve,F)||(be.uniform1iv(this.addr,F),Ya(ve,F));for(let L=0;L!==Ve;++L)J.setTexture2D(I[L]||Z1,F[L])}function A5(be,I,J){const ve=this.cache,Ve=I.length,F=cd(J,Ve);Xa(ve,F)||(be.uniform1iv(this.addr,F),Ya(ve,F));for(let L=0;L!==Ve;++L)J.setTexture3D(I[L]||J1,F[L])}function S5(be,I,J){const ve=this.cache,Ve=I.length,F=cd(J,Ve);Xa(ve,F)||(be.uniform1iv(this.addr,F),Ya(ve,F));for(let L=0;L!==Ve;++L)J.setTextureCube(I[L]||$1,F[L])}function E5(be,I,J){const ve=this.cache,Ve=I.length,F=cd(J,Ve);Xa(ve,F)||(be.uniform1iv(this.addr,F),Ya(ve,F));for(let L=0;L!==Ve;++L)J.setTexture2DArray(I[L]||K1,F[L])}function k5(be){switch(be){case 5126:return u5;case 35664:return c5;case 35665:return f5;case 35666:return h5;case 35674:return p5;case 35675:return d5;case 35676:return m5;case 5124:case 35670:return g5;case 35667:case 35671:return v5;case 35668:case 35672:return y5;case 35669:case 35673:return x5;case 5125:return _5;case 36294:return b5;case 36295:return w5;case 36296:return T5;case 35678:case 36198:case 36298:case 36306:case 35682:return M5;case 35679:case 36299:case 36307:return A5;case 35680:case 36300:case 36308:case 36293:return S5;case 36289:case 36303:case 36311:case 36292:return E5}}class L5{constructor(I,J,ve){this.id=I,this.addr=ve,this.cache=[],this.setValue=l5(J.type)}}class C5{constructor(I,J,ve){this.id=I,this.addr=ve,this.cache=[],this.size=J.size,this.setValue=k5(J.type)}}class P5{constructor(I){this.id=I,this.seq=[],this.map={}}setValue(I,J,ve){const Ve=this.seq;for(let F=0,L=Ve.length;F!==L;++F){const e=Ve[F];e.setValue(I,J[e.id],ve)}}}const S0=/(\w+)(\])?(\[|\.)?/g;function Gv(be,I){be.seq.push(I),be.map[I.id]=I}function R5(be,I,J){const ve=be.name,Ve=ve.length;for(S0.lastIndex=0;;){const F=S0.exec(ve),L=S0.lastIndex;let e=F[1];const T=F[2]==="]",b=F[3];if(T&&(e=e|0),b===void 0||b==="["&&L+2===Ve){Gv(J,b===void 0?new L5(e,be,I):new C5(e,be,I));break}else{let _=J.map[e];_===void 0&&(_=new P5(e),Gv(J,_)),J=_}}}class Qp{constructor(I,J){this.seq=[],this.map={};const ve=I.getProgramParameter(J,I.ACTIVE_UNIFORMS);for(let Ve=0;Ve<ve;++Ve){const F=I.getActiveUniform(J,Ve),L=I.getUniformLocation(J,F.name);R5(F,L,this)}}setValue(I,J,ve,Ve){const F=this.map[J];F!==void 0&&F.setValue(I,ve,Ve)}setOptional(I,J,ve){const Ve=J[ve];Ve!==void 0&&this.setValue(I,ve,Ve)}static upload(I,J,ve,Ve){for(let F=0,L=J.length;F!==L;++F){const e=J[F],T=ve[e.id];T.needsUpdate!==!1&&e.setValue(I,T.value,Ve)}}static seqWithValue(I,J){const ve=[];for(let Ve=0,F=I.length;Ve!==F;++Ve){const L=I[Ve];L.id in J&&ve.push(L)}return ve}}function Wv(be,I,J){const ve=be.createShader(I);return be.shaderSource(ve,J),be.compileShader(ve),ve}let I5=0;function O5(be,I){const J=be.split(`
`),ve=[],Ve=Math.max(I-6,0),F=Math.min(I+6,J.length);for(let L=Ve;L<F;L++){const e=L+1;ve.push(`${e===I?">":" "} ${e}: ${J[L]}`)}return ve.join(`
`)}function D5(be){switch(be){case ql:return["Linear","( value )"];case ei:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",be),["Linear","( value )"]}}function qv(be,I,J){const ve=be.getShaderParameter(I,be.COMPILE_STATUS),Ve=be.getShaderInfoLog(I).trim();if(ve&&Ve==="")return"";const F=/ERROR: 0:(\d+)/.exec(Ve);if(F){const L=parseInt(F[1]);return J.toUpperCase()+`

`+Ve+`

`+O5(be.getShaderSource(I),L)}else return Ve}function z5(be,I){const J=D5(I);return"vec4 "+be+"( vec4 value ) { return LinearTo"+J[0]+J[1]+"; }"}function F5(be,I){let J;switch(I){case P_:J="Linear";break;case R_:J="Reinhard";break;case I_:J="OptimizedCineon";break;case O_:J="ACESFilmic";break;case D_:J="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",I),J="Linear"}return"vec3 "+be+"( vec3 color ) { return "+J+"ToneMapping( color ); }"}function N5(be){return[be.extensionDerivatives||be.envMapCubeUVHeight||be.bumpMap||be.normalMapTangentSpace||be.clearcoatNormalMap||be.flatShading||be.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(be.extensionFragDepth||be.logarithmicDepthBuffer)&&be.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",be.extensionDrawBuffers&&be.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(be.extensionShaderTextureLOD||be.envMap||be.transmission)&&be.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Th).join(`
`)}function B5(be){const I=[];for(const J in be){const ve=be[J];ve!==!1&&I.push("#define "+J+" "+ve)}return I.join(`
`)}function U5(be,I){const J={},ve=be.getProgramParameter(I,be.ACTIVE_ATTRIBUTES);for(let Ve=0;Ve<ve;Ve++){const F=be.getActiveAttrib(I,Ve),L=F.name;let e=1;F.type===be.FLOAT_MAT2&&(e=2),F.type===be.FLOAT_MAT3&&(e=3),F.type===be.FLOAT_MAT4&&(e=4),J[L]={type:F.type,location:be.getAttribLocation(I,L),locationSize:e}}return J}function Th(be){return be!==""}function Xv(be,I){const J=I.numSpotLightShadows+I.numSpotLightMaps-I.numSpotLightShadowsWithMaps;return be.replace(/NUM_DIR_LIGHTS/g,I.numDirLights).replace(/NUM_SPOT_LIGHTS/g,I.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,I.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,J).replace(/NUM_RECT_AREA_LIGHTS/g,I.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,I.numPointLights).replace(/NUM_HEMI_LIGHTS/g,I.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,I.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,I.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,I.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,I.numPointLightShadows)}function Yv(be,I){return be.replace(/NUM_CLIPPING_PLANES/g,I.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,I.numClippingPlanes-I.numClipIntersection)}const j5=/^[ \t]*#include +<([\w\d./]+)>/gm;function V0(be){return be.replace(j5,H5)}const V5=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function H5(be,I){let J=Qr[I];if(J===void 0){const ve=V5.get(I);if(ve!==void 0)J=Qr[ve],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',I,ve);else throw new Error("Can not resolve #include <"+I+">")}return V0(J)}const G5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zv(be){return be.replace(G5,W5)}function W5(be,I,J,ve){let Ve="";for(let F=parseInt(I);F<parseInt(J);F++)Ve+=ve.replace(/\[\s*i\s*\]/g,"[ "+F+" ]").replace(/UNROLLED_LOOP_INDEX/g,F);return Ve}function Kv(be){let I="precision "+be.precision+` float;
precision `+be.precision+" int;";return be.precision==="highp"?I+=`
#define HIGH_PRECISION`:be.precision==="mediump"?I+=`
#define MEDIUM_PRECISION`:be.precision==="lowp"&&(I+=`
#define LOW_PRECISION`),I}function q5(be){let I="SHADOWMAP_TYPE_BASIC";return be.shadowMapType===w1?I="SHADOWMAP_TYPE_PCF":be.shadowMapType===u_?I="SHADOWMAP_TYPE_PCF_SOFT":be.shadowMapType===pu&&(I="SHADOWMAP_TYPE_VSM"),I}function X5(be){let I="ENVMAP_TYPE_CUBE";if(be.envMap)switch(be.envMapMode){case kf:case Lf:I="ENVMAP_TYPE_CUBE";break;case ld:I="ENVMAP_TYPE_CUBE_UV";break}return I}function Y5(be){let I="ENVMAP_MODE_REFLECTION";if(be.envMap)switch(be.envMapMode){case Lf:I="ENVMAP_MODE_REFRACTION";break}return I}function Z5(be){let I="ENVMAP_BLENDING_NONE";if(be.envMap)switch(be.combine){case X0:I="ENVMAP_BLENDING_MULTIPLY";break;case L_:I="ENVMAP_BLENDING_MIX";break;case C_:I="ENVMAP_BLENDING_ADD";break}return I}function K5(be){const I=be.envMapCubeUVHeight;if(I===null)return null;const J=Math.log2(I)-2,ve=1/I;return{texelWidth:1/(3*Math.max(Math.pow(2,J),7*16)),texelHeight:ve,maxMip:J}}function J5(be,I,J,ve){const Ve=be.getContext(),F=J.defines;let L=J.vertexShader,e=J.fragmentShader;const T=q5(J),b=X5(J),a=Y5(J),_=Z5(J),g=K5(J),h=J.isWebGL2?"":N5(J),o=B5(F),t=Ve.createProgram();let i,n,r=J.glslVersion?"#version "+J.glslVersion+`
`:"";J.isRawShaderMaterial?(i=["#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,o].filter(Th).join(`
`),i.length>0&&(i+=`
`),n=[h,"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,o].filter(Th).join(`
`),n.length>0&&(n+=`
`)):(i=[Kv(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,o,J.instancing?"#define USE_INSTANCING":"",J.instancingColor?"#define USE_INSTANCING_COLOR":"",J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.map?"#define USE_MAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+a:"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.displacementMap?"#define USE_DISPLACEMENTMAP":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.mapUv?"#define MAP_UV "+J.mapUv:"",J.alphaMapUv?"#define ALPHAMAP_UV "+J.alphaMapUv:"",J.lightMapUv?"#define LIGHTMAP_UV "+J.lightMapUv:"",J.aoMapUv?"#define AOMAP_UV "+J.aoMapUv:"",J.emissiveMapUv?"#define EMISSIVEMAP_UV "+J.emissiveMapUv:"",J.bumpMapUv?"#define BUMPMAP_UV "+J.bumpMapUv:"",J.normalMapUv?"#define NORMALMAP_UV "+J.normalMapUv:"",J.displacementMapUv?"#define DISPLACEMENTMAP_UV "+J.displacementMapUv:"",J.metalnessMapUv?"#define METALNESSMAP_UV "+J.metalnessMapUv:"",J.roughnessMapUv?"#define ROUGHNESSMAP_UV "+J.roughnessMapUv:"",J.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+J.anisotropyMapUv:"",J.clearcoatMapUv?"#define CLEARCOATMAP_UV "+J.clearcoatMapUv:"",J.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+J.clearcoatNormalMapUv:"",J.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+J.clearcoatRoughnessMapUv:"",J.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+J.iridescenceMapUv:"",J.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+J.iridescenceThicknessMapUv:"",J.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+J.sheenColorMapUv:"",J.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+J.sheenRoughnessMapUv:"",J.specularMapUv?"#define SPECULARMAP_UV "+J.specularMapUv:"",J.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+J.specularColorMapUv:"",J.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+J.specularIntensityMapUv:"",J.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+J.transmissionMapUv:"",J.thicknessMapUv?"#define THICKNESSMAP_UV "+J.thicknessMapUv:"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.flatShading?"#define FLAT_SHADED":"",J.skinning?"#define USE_SKINNING":"",J.morphTargets?"#define USE_MORPHTARGETS":"",J.morphNormals&&J.flatShading===!1?"#define USE_MORPHNORMALS":"",J.morphColors&&J.isWebGL2?"#define USE_MORPHCOLORS":"",J.morphTargetsCount>0&&J.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",J.morphTargetsCount>0&&J.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+J.morphTextureStride:"",J.morphTargetsCount>0&&J.isWebGL2?"#define MORPHTARGETS_COUNT "+J.morphTargetsCount:"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+T:"",J.sizeAttenuation?"#define USE_SIZEATTENUATION":"",J.useLegacyLights?"#define LEGACY_LIGHTS":"",J.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",J.logarithmicDepthBuffer&&J.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Th).join(`
`),n=[h,Kv(J),"#define SHADER_TYPE "+J.shaderType,"#define SHADER_NAME "+J.shaderName,o,J.useFog&&J.fog?"#define USE_FOG":"",J.useFog&&J.fogExp2?"#define FOG_EXP2":"",J.map?"#define USE_MAP":"",J.matcap?"#define USE_MATCAP":"",J.envMap?"#define USE_ENVMAP":"",J.envMap?"#define "+b:"",J.envMap?"#define "+a:"",J.envMap?"#define "+_:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",J.lightMap?"#define USE_LIGHTMAP":"",J.aoMap?"#define USE_AOMAP":"",J.bumpMap?"#define USE_BUMPMAP":"",J.normalMap?"#define USE_NORMALMAP":"",J.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",J.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",J.emissiveMap?"#define USE_EMISSIVEMAP":"",J.anisotropy?"#define USE_ANISOTROPY":"",J.anisotropyMap?"#define USE_ANISOTROPYMAP":"",J.clearcoat?"#define USE_CLEARCOAT":"",J.clearcoatMap?"#define USE_CLEARCOATMAP":"",J.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",J.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",J.iridescence?"#define USE_IRIDESCENCE":"",J.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",J.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",J.specularMap?"#define USE_SPECULARMAP":"",J.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",J.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",J.roughnessMap?"#define USE_ROUGHNESSMAP":"",J.metalnessMap?"#define USE_METALNESSMAP":"",J.alphaMap?"#define USE_ALPHAMAP":"",J.alphaTest?"#define USE_ALPHATEST":"",J.alphaHash?"#define USE_ALPHAHASH":"",J.sheen?"#define USE_SHEEN":"",J.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",J.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",J.transmission?"#define USE_TRANSMISSION":"",J.transmissionMap?"#define USE_TRANSMISSIONMAP":"",J.thicknessMap?"#define USE_THICKNESSMAP":"",J.vertexTangents&&J.flatShading===!1?"#define USE_TANGENT":"",J.vertexColors||J.instancingColor?"#define USE_COLOR":"",J.vertexAlphas?"#define USE_COLOR_ALPHA":"",J.vertexUv1s?"#define USE_UV1":"",J.vertexUv2s?"#define USE_UV2":"",J.vertexUv3s?"#define USE_UV3":"",J.pointsUvs?"#define USE_POINTS_UV":"",J.gradientMap?"#define USE_GRADIENTMAP":"",J.flatShading?"#define FLAT_SHADED":"",J.doubleSided?"#define DOUBLE_SIDED":"",J.flipSided?"#define FLIP_SIDED":"",J.shadowMapEnabled?"#define USE_SHADOWMAP":"",J.shadowMapEnabled?"#define "+T:"",J.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",J.useLegacyLights?"#define LEGACY_LIGHTS":"",J.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",J.logarithmicDepthBuffer&&J.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",J.toneMapping!==Bu?"#define TONE_MAPPING":"",J.toneMapping!==Bu?Qr.tonemapping_pars_fragment:"",J.toneMapping!==Bu?F5("toneMapping",J.toneMapping):"",J.dithering?"#define DITHERING":"",J.opaque?"#define OPAQUE":"",Qr.colorspace_pars_fragment,z5("linearToOutputTexel",J.outputColorSpace),J.useDepthPacking?"#define DEPTH_PACKING "+J.depthPacking:"",`
`].filter(Th).join(`
`)),L=V0(L),L=Xv(L,J),L=Yv(L,J),e=V0(e),e=Xv(e,J),e=Yv(e,J),L=Zv(L),e=Zv(e),J.isWebGL2&&J.isRawShaderMaterial!==!0&&(r=`#version 300 es
`,i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+i,n=["#define varying in",J.glslVersion===mv?"":"layout(location = 0) out highp vec4 pc_fragColor;",J.glslVersion===mv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+n);const s=r+i+L,l=r+n+e,u=Wv(Ve,Ve.VERTEX_SHADER,s),d=Wv(Ve,Ve.FRAGMENT_SHADER,l);if(Ve.attachShader(t,u),Ve.attachShader(t,d),J.index0AttributeName!==void 0?Ve.bindAttribLocation(t,0,J.index0AttributeName):J.morphTargets===!0&&Ve.bindAttribLocation(t,0,"position"),Ve.linkProgram(t),be.debug.checkShaderErrors){const m=Ve.getProgramInfoLog(t).trim(),f=Ve.getShaderInfoLog(u).trim(),x=Ve.getShaderInfoLog(d).trim();let y=!0,v=!0;if(Ve.getProgramParameter(t,Ve.LINK_STATUS)===!1)if(y=!1,typeof be.debug.onShaderError=="function")be.debug.onShaderError(Ve,t,u,d);else{const M=qv(Ve,u,"vertex"),p=qv(Ve,d,"fragment");console.error("THREE.WebGLProgram: Shader Error "+Ve.getError()+" - VALIDATE_STATUS "+Ve.getProgramParameter(t,Ve.VALIDATE_STATUS)+`

Program Info Log: `+m+`
`+M+`
`+p)}else m!==""?console.warn("THREE.WebGLProgram: Program Info Log:",m):(f===""||x==="")&&(v=!1);v&&(this.diagnostics={runnable:y,programLog:m,vertexShader:{log:f,prefix:i},fragmentShader:{log:x,prefix:n}})}Ve.deleteShader(u),Ve.deleteShader(d);let c;this.getUniforms=function(){return c===void 0&&(c=new Qp(Ve,t)),c};let w;return this.getAttributes=function(){return w===void 0&&(w=U5(Ve,t)),w},this.destroy=function(){ve.releaseStatesOfProgram(this),Ve.deleteProgram(t),this.program=void 0},this.type=J.shaderType,this.name=J.shaderName,this.id=I5++,this.cacheKey=I,this.usedTimes=1,this.program=t,this.vertexShader=u,this.fragmentShader=d,this}let $5=0;class Q5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(I){const J=I.vertexShader,ve=I.fragmentShader,Ve=this._getShaderStage(J),F=this._getShaderStage(ve),L=this._getShaderCacheForMaterial(I);return L.has(Ve)===!1&&(L.add(Ve),Ve.usedTimes++),L.has(F)===!1&&(L.add(F),F.usedTimes++),this}remove(I){const J=this.materialCache.get(I);for(const ve of J)ve.usedTimes--,ve.usedTimes===0&&this.shaderCache.delete(ve.code);return this.materialCache.delete(I),this}getVertexShaderID(I){return this._getShaderStage(I.vertexShader).id}getFragmentShaderID(I){return this._getShaderStage(I.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(I){const J=this.materialCache;let ve=J.get(I);return ve===void 0&&(ve=new Set,J.set(I,ve)),ve}_getShaderStage(I){const J=this.shaderCache;let ve=J.get(I);return ve===void 0&&(ve=new eT(I),J.set(I,ve)),ve}}class eT{constructor(I){this.id=$5++,this.code=I,this.usedTimes=0}}function tT(be,I,J,ve,Ve,F,L){const e=new U1,T=new Q5,b=[],a=Ve.isWebGL2,_=Ve.logarithmicDepthBuffer,g=Ve.vertexTextures;let h=Ve.precision;const o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function t(m){return m===0?"uv":`uv${m}`}function i(m,f,x,y,v){const M=y.fog,p=v.geometry,S=m.isMeshStandardMaterial?y.environment:null,A=(m.isMeshStandardMaterial?J:I).get(m.envMap||S),k=A&&A.mapping===ld?A.image.height:null,C=o[m.type];m.precision!==null&&(h=Ve.getMaxPrecision(m.precision),h!==m.precision&&console.warn("THREE.WebGLProgram.getParameters:",m.precision,"not supported, using",h,"instead."));const P=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,R=P!==void 0?P.length:0;let O=0;p.morphAttributes.position!==void 0&&(O=1),p.morphAttributes.normal!==void 0&&(O=2),p.morphAttributes.color!==void 0&&(O=3);let X,D,V,j;if(C){const wt=Hl[C];X=wt.vertexShader,D=wt.fragmentShader}else X=m.vertexShader,D=m.fragmentShader,T.update(m),V=T.getVertexShaderID(m),j=T.getFragmentShaderID(m);const B=be.getRenderTarget(),W=v.isInstancedMesh===!0,q=!!m.map,re=!!m.matcap,ee=!!A,K=!!m.aoMap,Y=!!m.lightMap,$=!!m.bumpMap,ne=!!m.normalMap,ae=!!m.displacementMap,se=!!m.emissiveMap,ce=!!m.metalnessMap,me=!!m.roughnessMap,ye=m.anisotropy>0,Te=m.clearcoat>0,Ce=m.iridescence>0,pe=m.sheen>0,fe=m.transmission>0,Oe=ye&&!!m.anisotropyMap,Se=Te&&!!m.clearcoatMap,Me=Te&&!!m.clearcoatNormalMap,ue=Te&&!!m.clearcoatRoughnessMap,le=Ce&&!!m.iridescenceMap,ie=Ce&&!!m.iridescenceThicknessMap,ge=pe&&!!m.sheenColorMap,Ae=pe&&!!m.sheenRoughnessMap,we=!!m.specularMap,Ne=!!m.specularColorMap,He=!!m.specularIntensityMap,de=fe&&!!m.transmissionMap,Le=fe&&!!m.thicknessMap,Ee=!!m.gradientMap,Re=!!m.alphaMap,je=m.alphaTest>0,Fe=!!m.alphaHash,Xe=!!m.extensions,Ze=!!p.attributes.uv1,at=!!p.attributes.uv2,lt=!!p.attributes.uv3;let ot=Bu;return m.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(ot=be.toneMapping),{isWebGL2:a,shaderID:C,shaderType:m.type,shaderName:m.name,vertexShader:X,fragmentShader:D,defines:m.defines,customVertexShaderID:V,customFragmentShaderID:j,isRawShaderMaterial:m.isRawShaderMaterial===!0,glslVersion:m.glslVersion,precision:h,instancing:W,instancingColor:W&&v.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:B===null?be.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:ql,map:q,matcap:re,envMap:ee,envMapMode:ee&&A.mapping,envMapCubeUVHeight:k,aoMap:K,lightMap:Y,bumpMap:$,normalMap:ne,displacementMap:g&&ae,emissiveMap:se,normalMapObjectSpace:ne&&m.normalMapType===Y_,normalMapTangentSpace:ne&&m.normalMapType===I1,metalnessMap:ce,roughnessMap:me,anisotropy:ye,anisotropyMap:Oe,clearcoat:Te,clearcoatMap:Se,clearcoatNormalMap:Me,clearcoatRoughnessMap:ue,iridescence:Ce,iridescenceMap:le,iridescenceThicknessMap:ie,sheen:pe,sheenColorMap:ge,sheenRoughnessMap:Ae,specularMap:we,specularColorMap:Ne,specularIntensityMap:He,transmission:fe,transmissionMap:de,thicknessMap:Le,gradientMap:Ee,opaque:m.transparent===!1&&m.blending===Tf,alphaMap:Re,alphaTest:je,alphaHash:Fe,combine:m.combine,mapUv:q&&t(m.map.channel),aoMapUv:K&&t(m.aoMap.channel),lightMapUv:Y&&t(m.lightMap.channel),bumpMapUv:$&&t(m.bumpMap.channel),normalMapUv:ne&&t(m.normalMap.channel),displacementMapUv:ae&&t(m.displacementMap.channel),emissiveMapUv:se&&t(m.emissiveMap.channel),metalnessMapUv:ce&&t(m.metalnessMap.channel),roughnessMapUv:me&&t(m.roughnessMap.channel),anisotropyMapUv:Oe&&t(m.anisotropyMap.channel),clearcoatMapUv:Se&&t(m.clearcoatMap.channel),clearcoatNormalMapUv:Me&&t(m.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ue&&t(m.clearcoatRoughnessMap.channel),iridescenceMapUv:le&&t(m.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&t(m.iridescenceThicknessMap.channel),sheenColorMapUv:ge&&t(m.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&t(m.sheenRoughnessMap.channel),specularMapUv:we&&t(m.specularMap.channel),specularColorMapUv:Ne&&t(m.specularColorMap.channel),specularIntensityMapUv:He&&t(m.specularIntensityMap.channel),transmissionMapUv:de&&t(m.transmissionMap.channel),thicknessMapUv:Le&&t(m.thicknessMap.channel),alphaMapUv:Re&&t(m.alphaMap.channel),vertexTangents:!!p.attributes.tangent&&(ne||ye),vertexColors:m.vertexColors,vertexAlphas:m.vertexColors===!0&&!!p.attributes.color&&p.attributes.color.itemSize===4,vertexUv1s:Ze,vertexUv2s:at,vertexUv3s:lt,pointsUvs:v.isPoints===!0&&!!p.attributes.uv&&(q||Re),fog:!!M,useFog:m.fog===!0,fogExp2:M&&M.isFogExp2,flatShading:m.flatShading===!0,sizeAttenuation:m.sizeAttenuation===!0,logarithmicDepthBuffer:_,skinning:v.isSkinnedMesh===!0,morphTargets:p.morphAttributes.position!==void 0,morphNormals:p.morphAttributes.normal!==void 0,morphColors:p.morphAttributes.color!==void 0,morphTargetsCount:R,morphTextureStride:O,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numSpotLightMaps:f.spotLightMap.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numDirLightShadows:f.directionalShadowMap.length,numPointLightShadows:f.pointShadowMap.length,numSpotLightShadows:f.spotShadowMap.length,numSpotLightShadowsWithMaps:f.numSpotLightShadowsWithMaps,numClippingPlanes:L.numPlanes,numClipIntersection:L.numIntersection,dithering:m.dithering,shadowMapEnabled:be.shadowMap.enabled&&x.length>0,shadowMapType:be.shadowMap.type,toneMapping:ot,useLegacyLights:be._useLegacyLights,premultipliedAlpha:m.premultipliedAlpha,doubleSided:m.side===Gl,flipSided:m.side===bs,useDepthPacking:m.depthPacking>=0,depthPacking:m.depthPacking||0,index0AttributeName:m.index0AttributeName,extensionDerivatives:Xe&&m.extensions.derivatives===!0,extensionFragDepth:Xe&&m.extensions.fragDepth===!0,extensionDrawBuffers:Xe&&m.extensions.drawBuffers===!0,extensionShaderTextureLOD:Xe&&m.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:a||ve.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||ve.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||ve.has("EXT_shader_texture_lod"),customProgramCacheKey:m.customProgramCacheKey()}}function n(m){const f=[];if(m.shaderID?f.push(m.shaderID):(f.push(m.customVertexShaderID),f.push(m.customFragmentShaderID)),m.defines!==void 0)for(const x in m.defines)f.push(x),f.push(m.defines[x]);return m.isRawShaderMaterial===!1&&(r(f,m),s(f,m),f.push(be.outputColorSpace)),f.push(m.customProgramCacheKey),f.join()}function r(m,f){m.push(f.precision),m.push(f.outputColorSpace),m.push(f.envMapMode),m.push(f.envMapCubeUVHeight),m.push(f.mapUv),m.push(f.alphaMapUv),m.push(f.lightMapUv),m.push(f.aoMapUv),m.push(f.bumpMapUv),m.push(f.normalMapUv),m.push(f.displacementMapUv),m.push(f.emissiveMapUv),m.push(f.metalnessMapUv),m.push(f.roughnessMapUv),m.push(f.anisotropyMapUv),m.push(f.clearcoatMapUv),m.push(f.clearcoatNormalMapUv),m.push(f.clearcoatRoughnessMapUv),m.push(f.iridescenceMapUv),m.push(f.iridescenceThicknessMapUv),m.push(f.sheenColorMapUv),m.push(f.sheenRoughnessMapUv),m.push(f.specularMapUv),m.push(f.specularColorMapUv),m.push(f.specularIntensityMapUv),m.push(f.transmissionMapUv),m.push(f.thicknessMapUv),m.push(f.combine),m.push(f.fogExp2),m.push(f.sizeAttenuation),m.push(f.morphTargetsCount),m.push(f.morphAttributeCount),m.push(f.numDirLights),m.push(f.numPointLights),m.push(f.numSpotLights),m.push(f.numSpotLightMaps),m.push(f.numHemiLights),m.push(f.numRectAreaLights),m.push(f.numDirLightShadows),m.push(f.numPointLightShadows),m.push(f.numSpotLightShadows),m.push(f.numSpotLightShadowsWithMaps),m.push(f.shadowMapType),m.push(f.toneMapping),m.push(f.numClippingPlanes),m.push(f.numClipIntersection),m.push(f.depthPacking)}function s(m,f){e.disableAll(),f.isWebGL2&&e.enable(0),f.supportsVertexTextures&&e.enable(1),f.instancing&&e.enable(2),f.instancingColor&&e.enable(3),f.matcap&&e.enable(4),f.envMap&&e.enable(5),f.normalMapObjectSpace&&e.enable(6),f.normalMapTangentSpace&&e.enable(7),f.clearcoat&&e.enable(8),f.iridescence&&e.enable(9),f.alphaTest&&e.enable(10),f.vertexColors&&e.enable(11),f.vertexAlphas&&e.enable(12),f.vertexUv1s&&e.enable(13),f.vertexUv2s&&e.enable(14),f.vertexUv3s&&e.enable(15),f.vertexTangents&&e.enable(16),f.anisotropy&&e.enable(17),m.push(e.mask),e.disableAll(),f.fog&&e.enable(0),f.useFog&&e.enable(1),f.flatShading&&e.enable(2),f.logarithmicDepthBuffer&&e.enable(3),f.skinning&&e.enable(4),f.morphTargets&&e.enable(5),f.morphNormals&&e.enable(6),f.morphColors&&e.enable(7),f.premultipliedAlpha&&e.enable(8),f.shadowMapEnabled&&e.enable(9),f.useLegacyLights&&e.enable(10),f.doubleSided&&e.enable(11),f.flipSided&&e.enable(12),f.useDepthPacking&&e.enable(13),f.dithering&&e.enable(14),f.transmission&&e.enable(15),f.sheen&&e.enable(16),f.opaque&&e.enable(17),f.pointsUvs&&e.enable(18),m.push(e.mask)}function l(m){const f=o[m.type];let x;if(f){const y=Hl[f];x=U2.clone(y.uniforms)}else x=m.uniforms;return x}function u(m,f){let x;for(let y=0,v=b.length;y<v;y++){const M=b[y];if(M.cacheKey===f){x=M,++x.usedTimes;break}}return x===void 0&&(x=new J5(be,f,m,F),b.push(x)),x}function d(m){if(--m.usedTimes===0){const f=b.indexOf(m);b[f]=b[b.length-1],b.pop(),m.destroy()}}function c(m){T.remove(m)}function w(){T.dispose()}return{getParameters:i,getProgramCacheKey:n,getUniforms:l,acquireProgram:u,releaseProgram:d,releaseShaderCache:c,programs:b,dispose:w}}function nT(){let be=new WeakMap;function I(F){let L=be.get(F);return L===void 0&&(L={},be.set(F,L)),L}function J(F){be.delete(F)}function ve(F,L,e){be.get(F)[L]=e}function Ve(){be=new WeakMap}return{get:I,remove:J,update:ve,dispose:Ve}}function rT(be,I){return be.groupOrder!==I.groupOrder?be.groupOrder-I.groupOrder:be.renderOrder!==I.renderOrder?be.renderOrder-I.renderOrder:be.material.id!==I.material.id?be.material.id-I.material.id:be.z!==I.z?be.z-I.z:be.id-I.id}function Jv(be,I){return be.groupOrder!==I.groupOrder?be.groupOrder-I.groupOrder:be.renderOrder!==I.renderOrder?be.renderOrder-I.renderOrder:be.z!==I.z?I.z-be.z:be.id-I.id}function $v(){const be=[];let I=0;const J=[],ve=[],Ve=[];function F(){I=0,J.length=0,ve.length=0,Ve.length=0}function L(_,g,h,o,t,i){let n=be[I];return n===void 0?(n={id:_.id,object:_,geometry:g,material:h,groupOrder:o,renderOrder:_.renderOrder,z:t,group:i},be[I]=n):(n.id=_.id,n.object=_,n.geometry=g,n.material=h,n.groupOrder=o,n.renderOrder=_.renderOrder,n.z=t,n.group=i),I++,n}function e(_,g,h,o,t,i){const n=L(_,g,h,o,t,i);h.transmission>0?ve.push(n):h.transparent===!0?Ve.push(n):J.push(n)}function T(_,g,h,o,t,i){const n=L(_,g,h,o,t,i);h.transmission>0?ve.unshift(n):h.transparent===!0?Ve.unshift(n):J.unshift(n)}function b(_,g){J.length>1&&J.sort(_||rT),ve.length>1&&ve.sort(g||Jv),Ve.length>1&&Ve.sort(g||Jv)}function a(){for(let _=I,g=be.length;_<g;_++){const h=be[_];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:J,transmissive:ve,transparent:Ve,init:F,push:e,unshift:T,finish:a,sort:b}}function iT(){let be=new WeakMap;function I(ve,Ve){const F=be.get(ve);let L;return F===void 0?(L=new $v,be.set(ve,[L])):Ve>=F.length?(L=new $v,F.push(L)):L=F[Ve],L}function J(){be=new WeakMap}return{get:I,dispose:J}}function aT(){const be={};return{get:function(I){if(be[I.id]!==void 0)return be[I.id];let J;switch(I.type){case"DirectionalLight":J={direction:new Hn,color:new Vi};break;case"SpotLight":J={position:new Hn,direction:new Hn,color:new Vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":J={position:new Hn,color:new Vi,distance:0,decay:0};break;case"HemisphereLight":J={direction:new Hn,skyColor:new Vi,groundColor:new Vi};break;case"RectAreaLight":J={color:new Vi,position:new Hn,halfWidth:new Hn,halfHeight:new Hn};break}return be[I.id]=J,J}}}function oT(){const be={};return{get:function(I){if(be[I.id]!==void 0)return be[I.id];let J;switch(I.type){case"DirectionalLight":J={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kr};break;case"SpotLight":J={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kr};break;case"PointLight":J={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kr,shadowCameraNear:1,shadowCameraFar:1e3};break}return be[I.id]=J,J}}}let sT=0;function lT(be,I){return(I.castShadow?2:0)-(be.castShadow?2:0)+(I.map?1:0)-(be.map?1:0)}function uT(be,I){const J=new aT,ve=oT(),Ve={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let a=0;a<9;a++)Ve.probe.push(new Hn);const F=new Hn,L=new ja,e=new ja;function T(a,_){let g=0,h=0,o=0;for(let x=0;x<9;x++)Ve.probe[x].set(0,0,0);let t=0,i=0,n=0,r=0,s=0,l=0,u=0,d=0,c=0,w=0;a.sort(lT);const m=_===!0?Math.PI:1;for(let x=0,y=a.length;x<y;x++){const v=a[x],M=v.color,p=v.intensity,S=v.distance,A=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)g+=M.r*p*m,h+=M.g*p*m,o+=M.b*p*m;else if(v.isLightProbe)for(let k=0;k<9;k++)Ve.probe[k].addScaledVector(v.sh.coefficients[k],p);else if(v.isDirectionalLight){const k=J.get(v);if(k.color.copy(v.color).multiplyScalar(v.intensity*m),v.castShadow){const C=v.shadow,P=ve.get(v);P.shadowBias=C.bias,P.shadowNormalBias=C.normalBias,P.shadowRadius=C.radius,P.shadowMapSize=C.mapSize,Ve.directionalShadow[t]=P,Ve.directionalShadowMap[t]=A,Ve.directionalShadowMatrix[t]=v.shadow.matrix,l++}Ve.directional[t]=k,t++}else if(v.isSpotLight){const k=J.get(v);k.position.setFromMatrixPosition(v.matrixWorld),k.color.copy(M).multiplyScalar(p*m),k.distance=S,k.coneCos=Math.cos(v.angle),k.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),k.decay=v.decay,Ve.spot[n]=k;const C=v.shadow;if(v.map&&(Ve.spotLightMap[c]=v.map,c++,C.updateMatrices(v),v.castShadow&&w++),Ve.spotLightMatrix[n]=C.matrix,v.castShadow){const P=ve.get(v);P.shadowBias=C.bias,P.shadowNormalBias=C.normalBias,P.shadowRadius=C.radius,P.shadowMapSize=C.mapSize,Ve.spotShadow[n]=P,Ve.spotShadowMap[n]=A,d++}n++}else if(v.isRectAreaLight){const k=J.get(v);k.color.copy(M).multiplyScalar(p),k.halfWidth.set(v.width*.5,0,0),k.halfHeight.set(0,v.height*.5,0),Ve.rectArea[r]=k,r++}else if(v.isPointLight){const k=J.get(v);if(k.color.copy(v.color).multiplyScalar(v.intensity*m),k.distance=v.distance,k.decay=v.decay,v.castShadow){const C=v.shadow,P=ve.get(v);P.shadowBias=C.bias,P.shadowNormalBias=C.normalBias,P.shadowRadius=C.radius,P.shadowMapSize=C.mapSize,P.shadowCameraNear=C.camera.near,P.shadowCameraFar=C.camera.far,Ve.pointShadow[i]=P,Ve.pointShadowMap[i]=A,Ve.pointShadowMatrix[i]=v.shadow.matrix,u++}Ve.point[i]=k,i++}else if(v.isHemisphereLight){const k=J.get(v);k.skyColor.copy(v.color).multiplyScalar(p*m),k.groundColor.copy(v.groundColor).multiplyScalar(p*m),Ve.hemi[s]=k,s++}}r>0&&(I.isWebGL2||be.has("OES_texture_float_linear")===!0?(Ve.rectAreaLTC1=Cr.LTC_FLOAT_1,Ve.rectAreaLTC2=Cr.LTC_FLOAT_2):be.has("OES_texture_half_float_linear")===!0?(Ve.rectAreaLTC1=Cr.LTC_HALF_1,Ve.rectAreaLTC2=Cr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),Ve.ambient[0]=g,Ve.ambient[1]=h,Ve.ambient[2]=o;const f=Ve.hash;(f.directionalLength!==t||f.pointLength!==i||f.spotLength!==n||f.rectAreaLength!==r||f.hemiLength!==s||f.numDirectionalShadows!==l||f.numPointShadows!==u||f.numSpotShadows!==d||f.numSpotMaps!==c)&&(Ve.directional.length=t,Ve.spot.length=n,Ve.rectArea.length=r,Ve.point.length=i,Ve.hemi.length=s,Ve.directionalShadow.length=l,Ve.directionalShadowMap.length=l,Ve.pointShadow.length=u,Ve.pointShadowMap.length=u,Ve.spotShadow.length=d,Ve.spotShadowMap.length=d,Ve.directionalShadowMatrix.length=l,Ve.pointShadowMatrix.length=u,Ve.spotLightMatrix.length=d+c-w,Ve.spotLightMap.length=c,Ve.numSpotLightShadowsWithMaps=w,f.directionalLength=t,f.pointLength=i,f.spotLength=n,f.rectAreaLength=r,f.hemiLength=s,f.numDirectionalShadows=l,f.numPointShadows=u,f.numSpotShadows=d,f.numSpotMaps=c,Ve.version=sT++)}function b(a,_){let g=0,h=0,o=0,t=0,i=0;const n=_.matrixWorldInverse;for(let r=0,s=a.length;r<s;r++){const l=a[r];if(l.isDirectionalLight){const u=Ve.directional[g];u.direction.setFromMatrixPosition(l.matrixWorld),F.setFromMatrixPosition(l.target.matrixWorld),u.direction.sub(F),u.direction.transformDirection(n),g++}else if(l.isSpotLight){const u=Ve.spot[o];u.position.setFromMatrixPosition(l.matrixWorld),u.position.applyMatrix4(n),u.direction.setFromMatrixPosition(l.matrixWorld),F.setFromMatrixPosition(l.target.matrixWorld),u.direction.sub(F),u.direction.transformDirection(n),o++}else if(l.isRectAreaLight){const u=Ve.rectArea[t];u.position.setFromMatrixPosition(l.matrixWorld),u.position.applyMatrix4(n),e.identity(),L.copy(l.matrixWorld),L.premultiply(n),e.extractRotation(L),u.halfWidth.set(l.width*.5,0,0),u.halfHeight.set(0,l.height*.5,0),u.halfWidth.applyMatrix4(e),u.halfHeight.applyMatrix4(e),t++}else if(l.isPointLight){const u=Ve.point[h];u.position.setFromMatrixPosition(l.matrixWorld),u.position.applyMatrix4(n),h++}else if(l.isHemisphereLight){const u=Ve.hemi[i];u.direction.setFromMatrixPosition(l.matrixWorld),u.direction.transformDirection(n),i++}}}return{setup:T,setupView:b,state:Ve}}function Qv(be,I){const J=new uT(be,I),ve=[],Ve=[];function F(){ve.length=0,Ve.length=0}function L(_){ve.push(_)}function e(_){Ve.push(_)}function T(_){J.setup(ve,_)}function b(_){J.setupView(ve,_)}return{init:F,state:{lightsArray:ve,shadowsArray:Ve,lights:J},setupLights:T,setupLightsView:b,pushLight:L,pushShadow:e}}function cT(be,I){let J=new WeakMap;function ve(F,L=0){const e=J.get(F);let T;return e===void 0?(T=new Qv(be,I),J.set(F,[T])):L>=e.length?(T=new Qv(be,I),e.push(T)):T=e[L],T}function Ve(){J=new WeakMap}return{get:ve,dispose:Ve}}class fT extends Uh{constructor(I){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=q_,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(I)}copy(I){return super.copy(I),this.depthPacking=I.depthPacking,this.map=I.map,this.alphaMap=I.alphaMap,this.displacementMap=I.displacementMap,this.displacementScale=I.displacementScale,this.displacementBias=I.displacementBias,this.wireframe=I.wireframe,this.wireframeLinewidth=I.wireframeLinewidth,this}}class hT extends Uh{constructor(I){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(I)}copy(I){return super.copy(I),this.map=I.map,this.alphaMap=I.alphaMap,this.displacementMap=I.displacementMap,this.displacementScale=I.displacementScale,this.displacementBias=I.displacementBias,this}}const pT=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dT=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function mT(be,I,J){let ve=new J0;const Ve=new Kr,F=new Kr,L=new ma,e=new fT({depthPacking:X_}),T=new hT,b={},a=J.maxTextureSize,_={[Hu]:bs,[bs]:Hu,[Gl]:Gl},g=new bc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Kr},radius:{value:4}},vertexShader:pT,fragmentShader:dT}),h=g.clone();h.defines.HORIZONTAL_PASS=1;const o=new qu;o.setAttribute("position",new Hs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const t=new Wl(o,g),i=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=w1;let n=this.type;this.render=function(u,d,c){if(i.enabled===!1||i.autoUpdate===!1&&i.needsUpdate===!1||u.length===0)return;const w=be.getRenderTarget(),m=be.getActiveCubeFace(),f=be.getActiveMipmapLevel(),x=be.state;x.setBlending(Nu),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);const y=n!==pu&&this.type===pu,v=n===pu&&this.type!==pu;for(let M=0,p=u.length;M<p;M++){const S=u[M],A=S.shadow;if(A===void 0){console.warn("THREE.WebGLShadowMap:",S,"has no shadow.");continue}if(A.autoUpdate===!1&&A.needsUpdate===!1)continue;Ve.copy(A.mapSize);const k=A.getFrameExtents();if(Ve.multiply(k),F.copy(A.mapSize),(Ve.x>a||Ve.y>a)&&(Ve.x>a&&(F.x=Math.floor(a/k.x),Ve.x=F.x*k.x,A.mapSize.x=F.x),Ve.y>a&&(F.y=Math.floor(a/k.y),Ve.y=F.y*k.y,A.mapSize.y=F.y)),A.map===null||y===!0||v===!0){const P=this.type!==pu?{minFilter:$o,magFilter:$o}:{};A.map!==null&&A.map.dispose(),A.map=new xc(Ve.x,Ve.y,P),A.map.texture.name=S.name+".shadowMap",A.camera.updateProjectionMatrix()}be.setRenderTarget(A.map),be.clear();const C=A.getViewportCount();for(let P=0;P<C;P++){const R=A.getViewport(P);L.set(F.x*R.x,F.y*R.y,F.x*R.z,F.y*R.w),x.viewport(L),A.updateMatrices(S,P),ve=A.getFrustum(),l(d,c,A.camera,S,this.type)}A.isPointLightShadow!==!0&&this.type===pu&&r(A,c),A.needsUpdate=!1}n=this.type,i.needsUpdate=!1,be.setRenderTarget(w,m,f)};function r(u,d){const c=I.update(t);g.defines.VSM_SAMPLES!==u.blurSamples&&(g.defines.VSM_SAMPLES=u.blurSamples,h.defines.VSM_SAMPLES=u.blurSamples,g.needsUpdate=!0,h.needsUpdate=!0),u.mapPass===null&&(u.mapPass=new xc(Ve.x,Ve.y)),g.uniforms.shadow_pass.value=u.map.texture,g.uniforms.resolution.value=u.mapSize,g.uniforms.radius.value=u.radius,be.setRenderTarget(u.mapPass),be.clear(),be.renderBufferDirect(d,null,c,g,t,null),h.uniforms.shadow_pass.value=u.mapPass.texture,h.uniforms.resolution.value=u.mapSize,h.uniforms.radius.value=u.radius,be.setRenderTarget(u.map),be.clear(),be.renderBufferDirect(d,null,c,h,t,null)}function s(u,d,c,w){let m=null;const f=c.isPointLight===!0?u.customDistanceMaterial:u.customDepthMaterial;if(f!==void 0)m=f;else if(m=c.isPointLight===!0?T:e,be.localClippingEnabled&&d.clipShadows===!0&&Array.isArray(d.clippingPlanes)&&d.clippingPlanes.length!==0||d.displacementMap&&d.displacementScale!==0||d.alphaMap&&d.alphaTest>0||d.map&&d.alphaTest>0){const x=m.uuid,y=d.uuid;let v=b[x];v===void 0&&(v={},b[x]=v);let M=v[y];M===void 0&&(M=m.clone(),v[y]=M),m=M}if(m.visible=d.visible,m.wireframe=d.wireframe,w===pu?m.side=d.shadowSide!==null?d.shadowSide:d.side:m.side=d.shadowSide!==null?d.shadowSide:_[d.side],m.alphaMap=d.alphaMap,m.alphaTest=d.alphaTest,m.map=d.map,m.clipShadows=d.clipShadows,m.clippingPlanes=d.clippingPlanes,m.clipIntersection=d.clipIntersection,m.displacementMap=d.displacementMap,m.displacementScale=d.displacementScale,m.displacementBias=d.displacementBias,m.wireframeLinewidth=d.wireframeLinewidth,m.linewidth=d.linewidth,c.isPointLight===!0&&m.isMeshDistanceMaterial===!0){const x=be.properties.get(m);x.light=c}return m}function l(u,d,c,w,m){if(u.visible===!1)return;if(u.layers.test(d.layers)&&(u.isMesh||u.isLine||u.isPoints)&&(u.castShadow||u.receiveShadow&&m===pu)&&(!u.frustumCulled||ve.intersectsObject(u))){u.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,u.matrixWorld);const y=I.update(u),v=u.material;if(Array.isArray(v)){const M=y.groups;for(let p=0,S=M.length;p<S;p++){const A=M[p],k=v[A.materialIndex];if(k&&k.visible){const C=s(u,k,w,m);be.renderBufferDirect(c,null,y,C,u,A)}}}else if(v.visible){const M=s(u,v,w,m);be.renderBufferDirect(c,null,y,M,u,null)}}const x=u.children;for(let y=0,v=x.length;y<v;y++)l(x[y],d,c,w,m)}}function gT(be,I,J){const ve=J.isWebGL2;function Ve(){let Re=!1;const je=new ma;let Fe=null;const Xe=new ma(0,0,0,0);return{setMask:function(Ze){Fe!==Ze&&!Re&&(be.colorMask(Ze,Ze,Ze,Ze),Fe=Ze)},setLocked:function(Ze){Re=Ze},setClear:function(Ze,at,lt,ot,bt){bt===!0&&(Ze*=ot,at*=ot,lt*=ot),je.set(Ze,at,lt,ot),Xe.equals(je)===!1&&(be.clearColor(Ze,at,lt,ot),Xe.copy(je))},reset:function(){Re=!1,Fe=null,Xe.set(-1,0,0,0)}}}function F(){let Re=!1,je=null,Fe=null,Xe=null;return{setTest:function(Ze){Ze?B(be.DEPTH_TEST):W(be.DEPTH_TEST)},setMask:function(Ze){je!==Ze&&!Re&&(be.depthMask(Ze),je=Ze)},setFunc:function(Ze){if(Fe!==Ze){switch(Ze){case w_:be.depthFunc(be.NEVER);break;case T_:be.depthFunc(be.ALWAYS);break;case M_:be.depthFunc(be.LESS);break;case D0:be.depthFunc(be.LEQUAL);break;case A_:be.depthFunc(be.EQUAL);break;case S_:be.depthFunc(be.GEQUAL);break;case E_:be.depthFunc(be.GREATER);break;case k_:be.depthFunc(be.NOTEQUAL);break;default:be.depthFunc(be.LEQUAL)}Fe=Ze}},setLocked:function(Ze){Re=Ze},setClear:function(Ze){Xe!==Ze&&(be.clearDepth(Ze),Xe=Ze)},reset:function(){Re=!1,je=null,Fe=null,Xe=null}}}function L(){let Re=!1,je=null,Fe=null,Xe=null,Ze=null,at=null,lt=null,ot=null,bt=null;return{setTest:function(wt){Re||(wt?B(be.STENCIL_TEST):W(be.STENCIL_TEST))},setMask:function(wt){je!==wt&&!Re&&(be.stencilMask(wt),je=wt)},setFunc:function(wt,ht,ct){(Fe!==wt||Xe!==ht||Ze!==ct)&&(be.stencilFunc(wt,ht,ct),Fe=wt,Xe=ht,Ze=ct)},setOp:function(wt,ht,ct){(at!==wt||lt!==ht||ot!==ct)&&(be.stencilOp(wt,ht,ct),at=wt,lt=ht,ot=ct)},setLocked:function(wt){Re=wt},setClear:function(wt){bt!==wt&&(be.clearStencil(wt),bt=wt)},reset:function(){Re=!1,je=null,Fe=null,Xe=null,Ze=null,at=null,lt=null,ot=null,bt=null}}}const e=new Ve,T=new F,b=new L,a=new WeakMap,_=new WeakMap;let g={},h={},o=new WeakMap,t=[],i=null,n=!1,r=null,s=null,l=null,u=null,d=null,c=null,w=null,m=!1,f=null,x=null,y=null,v=null,M=null;const p=be.getParameter(be.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let S=!1,A=0;const k=be.getParameter(be.VERSION);k.indexOf("WebGL")!==-1?(A=parseFloat(/^WebGL (\d)/.exec(k)[1]),S=A>=1):k.indexOf("OpenGL ES")!==-1&&(A=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),S=A>=2);let C=null,P={};const R=be.getParameter(be.SCISSOR_BOX),O=be.getParameter(be.VIEWPORT),X=new ma().fromArray(R),D=new ma().fromArray(O);function V(Re,je,Fe,Xe){const Ze=new Uint8Array(4),at=be.createTexture();be.bindTexture(Re,at),be.texParameteri(Re,be.TEXTURE_MIN_FILTER,be.NEAREST),be.texParameteri(Re,be.TEXTURE_MAG_FILTER,be.NEAREST);for(let lt=0;lt<Fe;lt++)ve&&(Re===be.TEXTURE_3D||Re===be.TEXTURE_2D_ARRAY)?be.texImage3D(je,0,be.RGBA,1,1,Xe,0,be.RGBA,be.UNSIGNED_BYTE,Ze):be.texImage2D(je+lt,0,be.RGBA,1,1,0,be.RGBA,be.UNSIGNED_BYTE,Ze);return at}const j={};j[be.TEXTURE_2D]=V(be.TEXTURE_2D,be.TEXTURE_2D,1),j[be.TEXTURE_CUBE_MAP]=V(be.TEXTURE_CUBE_MAP,be.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve&&(j[be.TEXTURE_2D_ARRAY]=V(be.TEXTURE_2D_ARRAY,be.TEXTURE_2D_ARRAY,1,1),j[be.TEXTURE_3D]=V(be.TEXTURE_3D,be.TEXTURE_3D,1,1)),e.setClear(0,0,0,1),T.setClear(1),b.setClear(0),B(be.DEPTH_TEST),T.setFunc(D0),ae(!1),se(Ng),B(be.CULL_FACE),$(Nu);function B(Re){g[Re]!==!0&&(be.enable(Re),g[Re]=!0)}function W(Re){g[Re]!==!1&&(be.disable(Re),g[Re]=!1)}function q(Re,je){return h[Re]!==je?(be.bindFramebuffer(Re,je),h[Re]=je,ve&&(Re===be.DRAW_FRAMEBUFFER&&(h[be.FRAMEBUFFER]=je),Re===be.FRAMEBUFFER&&(h[be.DRAW_FRAMEBUFFER]=je)),!0):!1}function re(Re,je){let Fe=t,Xe=!1;if(Re)if(Fe=o.get(je),Fe===void 0&&(Fe=[],o.set(je,Fe)),Re.isWebGLMultipleRenderTargets){const Ze=Re.texture;if(Fe.length!==Ze.length||Fe[0]!==be.COLOR_ATTACHMENT0){for(let at=0,lt=Ze.length;at<lt;at++)Fe[at]=be.COLOR_ATTACHMENT0+at;Fe.length=Ze.length,Xe=!0}}else Fe[0]!==be.COLOR_ATTACHMENT0&&(Fe[0]=be.COLOR_ATTACHMENT0,Xe=!0);else Fe[0]!==be.BACK&&(Fe[0]=be.BACK,Xe=!0);Xe&&(J.isWebGL2?be.drawBuffers(Fe):I.get("WEBGL_draw_buffers").drawBuffersWEBGL(Fe))}function ee(Re){return i!==Re?(be.useProgram(Re),i=Re,!0):!1}const K={[xf]:be.FUNC_ADD,[f_]:be.FUNC_SUBTRACT,[h_]:be.FUNC_REVERSE_SUBTRACT};if(ve)K[Vg]=be.MIN,K[Hg]=be.MAX;else{const Re=I.get("EXT_blend_minmax");Re!==null&&(K[Vg]=Re.MIN_EXT,K[Hg]=Re.MAX_EXT)}const Y={[p_]:be.ZERO,[d_]:be.ONE,[m_]:be.SRC_COLOR,[T1]:be.SRC_ALPHA,[b_]:be.SRC_ALPHA_SATURATE,[x_]:be.DST_COLOR,[v_]:be.DST_ALPHA,[g_]:be.ONE_MINUS_SRC_COLOR,[M1]:be.ONE_MINUS_SRC_ALPHA,[__]:be.ONE_MINUS_DST_COLOR,[y_]:be.ONE_MINUS_DST_ALPHA};function $(Re,je,Fe,Xe,Ze,at,lt,ot){if(Re===Nu){n===!0&&(W(be.BLEND),n=!1);return}if(n===!1&&(B(be.BLEND),n=!0),Re!==c_){if(Re!==r||ot!==m){if((s!==xf||d!==xf)&&(be.blendEquation(be.FUNC_ADD),s=xf,d=xf),ot)switch(Re){case Tf:be.blendFuncSeparate(be.ONE,be.ONE_MINUS_SRC_ALPHA,be.ONE,be.ONE_MINUS_SRC_ALPHA);break;case Bg:be.blendFunc(be.ONE,be.ONE);break;case Ug:be.blendFuncSeparate(be.ZERO,be.ONE_MINUS_SRC_COLOR,be.ZERO,be.ONE);break;case jg:be.blendFuncSeparate(be.ZERO,be.SRC_COLOR,be.ZERO,be.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}else switch(Re){case Tf:be.blendFuncSeparate(be.SRC_ALPHA,be.ONE_MINUS_SRC_ALPHA,be.ONE,be.ONE_MINUS_SRC_ALPHA);break;case Bg:be.blendFunc(be.SRC_ALPHA,be.ONE);break;case Ug:be.blendFuncSeparate(be.ZERO,be.ONE_MINUS_SRC_COLOR,be.ZERO,be.ONE);break;case jg:be.blendFunc(be.ZERO,be.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}l=null,u=null,c=null,w=null,r=Re,m=ot}return}Ze=Ze||je,at=at||Fe,lt=lt||Xe,(je!==s||Ze!==d)&&(be.blendEquationSeparate(K[je],K[Ze]),s=je,d=Ze),(Fe!==l||Xe!==u||at!==c||lt!==w)&&(be.blendFuncSeparate(Y[Fe],Y[Xe],Y[at],Y[lt]),l=Fe,u=Xe,c=at,w=lt),r=Re,m=!1}function ne(Re,je){Re.side===Gl?W(be.CULL_FACE):B(be.CULL_FACE);let Fe=Re.side===bs;je&&(Fe=!Fe),ae(Fe),Re.blending===Tf&&Re.transparent===!1?$(Nu):$(Re.blending,Re.blendEquation,Re.blendSrc,Re.blendDst,Re.blendEquationAlpha,Re.blendSrcAlpha,Re.blendDstAlpha,Re.premultipliedAlpha),T.setFunc(Re.depthFunc),T.setTest(Re.depthTest),T.setMask(Re.depthWrite),e.setMask(Re.colorWrite);const Xe=Re.stencilWrite;b.setTest(Xe),Xe&&(b.setMask(Re.stencilWriteMask),b.setFunc(Re.stencilFunc,Re.stencilRef,Re.stencilFuncMask),b.setOp(Re.stencilFail,Re.stencilZFail,Re.stencilZPass)),me(Re.polygonOffset,Re.polygonOffsetFactor,Re.polygonOffsetUnits),Re.alphaToCoverage===!0?B(be.SAMPLE_ALPHA_TO_COVERAGE):W(be.SAMPLE_ALPHA_TO_COVERAGE)}function ae(Re){f!==Re&&(Re?be.frontFace(be.CW):be.frontFace(be.CCW),f=Re)}function se(Re){Re!==s_?(B(be.CULL_FACE),Re!==x&&(Re===Ng?be.cullFace(be.BACK):Re===l_?be.cullFace(be.FRONT):be.cullFace(be.FRONT_AND_BACK))):W(be.CULL_FACE),x=Re}function ce(Re){Re!==y&&(S&&be.lineWidth(Re),y=Re)}function me(Re,je,Fe){Re?(B(be.POLYGON_OFFSET_FILL),(v!==je||M!==Fe)&&(be.polygonOffset(je,Fe),v=je,M=Fe)):W(be.POLYGON_OFFSET_FILL)}function ye(Re){Re?B(be.SCISSOR_TEST):W(be.SCISSOR_TEST)}function Te(Re){Re===void 0&&(Re=be.TEXTURE0+p-1),C!==Re&&(be.activeTexture(Re),C=Re)}function Ce(Re,je,Fe){Fe===void 0&&(C===null?Fe=be.TEXTURE0+p-1:Fe=C);let Xe=P[Fe];Xe===void 0&&(Xe={type:void 0,texture:void 0},P[Fe]=Xe),(Xe.type!==Re||Xe.texture!==je)&&(C!==Fe&&(be.activeTexture(Fe),C=Fe),be.bindTexture(Re,je||j[Re]),Xe.type=Re,Xe.texture=je)}function pe(){const Re=P[C];Re!==void 0&&Re.type!==void 0&&(be.bindTexture(Re.type,null),Re.type=void 0,Re.texture=void 0)}function fe(){try{be.compressedTexImage2D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Oe(){try{be.compressedTexImage3D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Se(){try{be.texSubImage2D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Me(){try{be.texSubImage3D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ue(){try{be.compressedTexSubImage2D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function le(){try{be.compressedTexSubImage3D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ie(){try{be.texStorage2D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ge(){try{be.texStorage3D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ae(){try{be.texImage2D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function we(){try{be.texImage3D.apply(be,arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ne(Re){X.equals(Re)===!1&&(be.scissor(Re.x,Re.y,Re.z,Re.w),X.copy(Re))}function He(Re){D.equals(Re)===!1&&(be.viewport(Re.x,Re.y,Re.z,Re.w),D.copy(Re))}function de(Re,je){let Fe=_.get(je);Fe===void 0&&(Fe=new WeakMap,_.set(je,Fe));let Xe=Fe.get(Re);Xe===void 0&&(Xe=be.getUniformBlockIndex(je,Re.name),Fe.set(Re,Xe))}function Le(Re,je){const Xe=_.get(je).get(Re);a.get(je)!==Xe&&(be.uniformBlockBinding(je,Xe,Re.__bindingPointIndex),a.set(je,Xe))}function Ee(){be.disable(be.BLEND),be.disable(be.CULL_FACE),be.disable(be.DEPTH_TEST),be.disable(be.POLYGON_OFFSET_FILL),be.disable(be.SCISSOR_TEST),be.disable(be.STENCIL_TEST),be.disable(be.SAMPLE_ALPHA_TO_COVERAGE),be.blendEquation(be.FUNC_ADD),be.blendFunc(be.ONE,be.ZERO),be.blendFuncSeparate(be.ONE,be.ZERO,be.ONE,be.ZERO),be.colorMask(!0,!0,!0,!0),be.clearColor(0,0,0,0),be.depthMask(!0),be.depthFunc(be.LESS),be.clearDepth(1),be.stencilMask(4294967295),be.stencilFunc(be.ALWAYS,0,4294967295),be.stencilOp(be.KEEP,be.KEEP,be.KEEP),be.clearStencil(0),be.cullFace(be.BACK),be.frontFace(be.CCW),be.polygonOffset(0,0),be.activeTexture(be.TEXTURE0),be.bindFramebuffer(be.FRAMEBUFFER,null),ve===!0&&(be.bindFramebuffer(be.DRAW_FRAMEBUFFER,null),be.bindFramebuffer(be.READ_FRAMEBUFFER,null)),be.useProgram(null),be.lineWidth(1),be.scissor(0,0,be.canvas.width,be.canvas.height),be.viewport(0,0,be.canvas.width,be.canvas.height),g={},C=null,P={},h={},o=new WeakMap,t=[],i=null,n=!1,r=null,s=null,l=null,u=null,d=null,c=null,w=null,m=!1,f=null,x=null,y=null,v=null,M=null,X.set(0,0,be.canvas.width,be.canvas.height),D.set(0,0,be.canvas.width,be.canvas.height),e.reset(),T.reset(),b.reset()}return{buffers:{color:e,depth:T,stencil:b},enable:B,disable:W,bindFramebuffer:q,drawBuffers:re,useProgram:ee,setBlending:$,setMaterial:ne,setFlipSided:ae,setCullFace:se,setLineWidth:ce,setPolygonOffset:me,setScissorTest:ye,activeTexture:Te,bindTexture:Ce,unbindTexture:pe,compressedTexImage2D:fe,compressedTexImage3D:Oe,texImage2D:Ae,texImage3D:we,updateUBOMapping:de,uniformBlockBinding:Le,texStorage2D:ie,texStorage3D:ge,texSubImage2D:Se,texSubImage3D:Me,compressedTexSubImage2D:ue,compressedTexSubImage3D:le,scissor:Ne,viewport:He,reset:Ee}}function vT(be,I,J,ve,Ve,F,L){const e=Ve.isWebGL2,T=Ve.maxTextures,b=Ve.maxCubemapSize,a=Ve.maxTextureSize,_=Ve.maxSamples,g=I.has("WEBGL_multisampled_render_to_texture")?I.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),o=new WeakMap;let t;const i=new WeakMap;let n=!1;try{n=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function r(pe,fe){return n?new OffscreenCanvas(pe,fe):id("canvas")}function s(pe,fe,Oe,Se){let Me=1;if((pe.width>Se||pe.height>Se)&&(Me=Se/Math.max(pe.width,pe.height)),Me<1||fe===!0)if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap){const ue=fe?rd:Math.floor,le=ue(Me*pe.width),ie=ue(Me*pe.height);t===void 0&&(t=r(le,ie));const ge=Oe?r(le,ie):t;return ge.width=le,ge.height=ie,ge.getContext("2d").drawImage(pe,0,0,le,ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+le+"x"+ie+")."),ge}else return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),pe;return pe}function l(pe){return j0(pe.width)&&j0(pe.height)}function u(pe){return e?!1:pe.wrapS!==El||pe.wrapT!==El||pe.minFilter!==$o&&pe.minFilter!==rl}function d(pe,fe){return pe.generateMipmaps&&fe&&pe.minFilter!==$o&&pe.minFilter!==rl}function c(pe){be.generateMipmap(pe)}function w(pe,fe,Oe,Se,Me=!1){if(e===!1)return fe;if(pe!==null){if(be[pe]!==void 0)return be[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let ue=fe;return fe===be.RED&&(Oe===be.FLOAT&&(ue=be.R32F),Oe===be.HALF_FLOAT&&(ue=be.R16F),Oe===be.UNSIGNED_BYTE&&(ue=be.R8)),fe===be.RED_INTEGER&&(Oe===be.UNSIGNED_BYTE&&(ue=be.R8UI),Oe===be.UNSIGNED_SHORT&&(ue=be.R16UI),Oe===be.UNSIGNED_INT&&(ue=be.R32UI),Oe===be.BYTE&&(ue=be.R8I),Oe===be.SHORT&&(ue=be.R16I),Oe===be.INT&&(ue=be.R32I)),fe===be.RG&&(Oe===be.FLOAT&&(ue=be.RG32F),Oe===be.HALF_FLOAT&&(ue=be.RG16F),Oe===be.UNSIGNED_BYTE&&(ue=be.RG8)),fe===be.RGBA&&(Oe===be.FLOAT&&(ue=be.RGBA32F),Oe===be.HALF_FLOAT&&(ue=be.RGBA16F),Oe===be.UNSIGNED_BYTE&&(ue=Se===ei&&Me===!1?be.SRGB8_ALPHA8:be.RGBA8),Oe===be.UNSIGNED_SHORT_4_4_4_4&&(ue=be.RGBA4),Oe===be.UNSIGNED_SHORT_5_5_5_1&&(ue=be.RGB5_A1)),(ue===be.R16F||ue===be.R32F||ue===be.RG16F||ue===be.RG32F||ue===be.RGBA16F||ue===be.RGBA32F)&&I.get("EXT_color_buffer_float"),ue}function m(pe,fe,Oe){return d(pe,Oe)===!0||pe.isFramebufferTexture&&pe.minFilter!==$o&&pe.minFilter!==rl?Math.log2(Math.max(fe.width,fe.height))+1:pe.mipmaps!==void 0&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?fe.mipmaps.length:1}function f(pe){return pe===$o||pe===Gg||pe===e0?be.NEAREST:be.LINEAR}function x(pe){const fe=pe.target;fe.removeEventListener("dispose",x),v(fe),fe.isVideoTexture&&o.delete(fe)}function y(pe){const fe=pe.target;fe.removeEventListener("dispose",y),p(fe)}function v(pe){const fe=ve.get(pe);if(fe.__webglInit===void 0)return;const Oe=pe.source,Se=i.get(Oe);if(Se){const Me=Se[fe.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&M(pe),Object.keys(Se).length===0&&i.delete(Oe)}ve.remove(pe)}function M(pe){const fe=ve.get(pe);be.deleteTexture(fe.__webglTexture);const Oe=pe.source,Se=i.get(Oe);delete Se[fe.__cacheKey],L.memory.textures--}function p(pe){const fe=pe.texture,Oe=ve.get(pe),Se=ve.get(fe);if(Se.__webglTexture!==void 0&&(be.deleteTexture(Se.__webglTexture),L.memory.textures--),pe.depthTexture&&pe.depthTexture.dispose(),pe.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++){if(Array.isArray(Oe.__webglFramebuffer[Me]))for(let ue=0;ue<Oe.__webglFramebuffer[Me].length;ue++)be.deleteFramebuffer(Oe.__webglFramebuffer[Me][ue]);else be.deleteFramebuffer(Oe.__webglFramebuffer[Me]);Oe.__webglDepthbuffer&&be.deleteRenderbuffer(Oe.__webglDepthbuffer[Me])}else{if(Array.isArray(Oe.__webglFramebuffer))for(let Me=0;Me<Oe.__webglFramebuffer.length;Me++)be.deleteFramebuffer(Oe.__webglFramebuffer[Me]);else be.deleteFramebuffer(Oe.__webglFramebuffer);if(Oe.__webglDepthbuffer&&be.deleteRenderbuffer(Oe.__webglDepthbuffer),Oe.__webglMultisampledFramebuffer&&be.deleteFramebuffer(Oe.__webglMultisampledFramebuffer),Oe.__webglColorRenderbuffer)for(let Me=0;Me<Oe.__webglColorRenderbuffer.length;Me++)Oe.__webglColorRenderbuffer[Me]&&be.deleteRenderbuffer(Oe.__webglColorRenderbuffer[Me]);Oe.__webglDepthRenderbuffer&&be.deleteRenderbuffer(Oe.__webglDepthRenderbuffer)}if(pe.isWebGLMultipleRenderTargets)for(let Me=0,ue=fe.length;Me<ue;Me++){const le=ve.get(fe[Me]);le.__webglTexture&&(be.deleteTexture(le.__webglTexture),L.memory.textures--),ve.remove(fe[Me])}ve.remove(fe),ve.remove(pe)}let S=0;function A(){S=0}function k(){const pe=S;return pe>=T&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+T),S+=1,pe}function C(pe){const fe=[];return fe.push(pe.wrapS),fe.push(pe.wrapT),fe.push(pe.wrapR||0),fe.push(pe.magFilter),fe.push(pe.minFilter),fe.push(pe.anisotropy),fe.push(pe.internalFormat),fe.push(pe.format),fe.push(pe.type),fe.push(pe.generateMipmaps),fe.push(pe.premultiplyAlpha),fe.push(pe.flipY),fe.push(pe.unpackAlignment),fe.push(pe.colorSpace),fe.join()}function P(pe,fe){const Oe=ve.get(pe);if(pe.isVideoTexture&&Te(pe),pe.isRenderTargetTexture===!1&&pe.version>0&&Oe.__version!==pe.version){const Se=pe.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(Oe,pe,fe);return}}J.bindTexture(be.TEXTURE_2D,Oe.__webglTexture,be.TEXTURE0+fe)}function R(pe,fe){const Oe=ve.get(pe);if(pe.version>0&&Oe.__version!==pe.version){q(Oe,pe,fe);return}J.bindTexture(be.TEXTURE_2D_ARRAY,Oe.__webglTexture,be.TEXTURE0+fe)}function O(pe,fe){const Oe=ve.get(pe);if(pe.version>0&&Oe.__version!==pe.version){q(Oe,pe,fe);return}J.bindTexture(be.TEXTURE_3D,Oe.__webglTexture,be.TEXTURE0+fe)}function X(pe,fe){const Oe=ve.get(pe);if(pe.version>0&&Oe.__version!==pe.version){re(Oe,pe,fe);return}J.bindTexture(be.TEXTURE_CUBE_MAP,Oe.__webglTexture,be.TEXTURE0+fe)}const D={[N0]:be.REPEAT,[El]:be.CLAMP_TO_EDGE,[B0]:be.MIRRORED_REPEAT},V={[$o]:be.NEAREST,[Gg]:be.NEAREST_MIPMAP_NEAREST,[e0]:be.NEAREST_MIPMAP_LINEAR,[rl]:be.LINEAR,[z_]:be.LINEAR_MIPMAP_NEAREST,[zh]:be.LINEAR_MIPMAP_LINEAR},j={[K_]:be.NEVER,[r2]:be.ALWAYS,[J_]:be.LESS,[Q_]:be.LEQUAL,[$_]:be.EQUAL,[n2]:be.GEQUAL,[e2]:be.GREATER,[t2]:be.NOTEQUAL};function B(pe,fe,Oe){if(Oe?(be.texParameteri(pe,be.TEXTURE_WRAP_S,D[fe.wrapS]),be.texParameteri(pe,be.TEXTURE_WRAP_T,D[fe.wrapT]),(pe===be.TEXTURE_3D||pe===be.TEXTURE_2D_ARRAY)&&be.texParameteri(pe,be.TEXTURE_WRAP_R,D[fe.wrapR]),be.texParameteri(pe,be.TEXTURE_MAG_FILTER,V[fe.magFilter]),be.texParameteri(pe,be.TEXTURE_MIN_FILTER,V[fe.minFilter])):(be.texParameteri(pe,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(pe,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),(pe===be.TEXTURE_3D||pe===be.TEXTURE_2D_ARRAY)&&be.texParameteri(pe,be.TEXTURE_WRAP_R,be.CLAMP_TO_EDGE),(fe.wrapS!==El||fe.wrapT!==El)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),be.texParameteri(pe,be.TEXTURE_MAG_FILTER,f(fe.magFilter)),be.texParameteri(pe,be.TEXTURE_MIN_FILTER,f(fe.minFilter)),fe.minFilter!==$o&&fe.minFilter!==rl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),fe.compareFunction&&(be.texParameteri(pe,be.TEXTURE_COMPARE_MODE,be.COMPARE_REF_TO_TEXTURE),be.texParameteri(pe,be.TEXTURE_COMPARE_FUNC,j[fe.compareFunction])),I.has("EXT_texture_filter_anisotropic")===!0){const Se=I.get("EXT_texture_filter_anisotropic");if(fe.magFilter===$o||fe.minFilter!==e0&&fe.minFilter!==zh||fe.type===Fu&&I.has("OES_texture_float_linear")===!1||e===!1&&fe.type===Fh&&I.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||ve.get(fe).__currentAnisotropy)&&(be.texParameterf(pe,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,Ve.getMaxAnisotropy())),ve.get(fe).__currentAnisotropy=fe.anisotropy)}}function W(pe,fe){let Oe=!1;pe.__webglInit===void 0&&(pe.__webglInit=!0,fe.addEventListener("dispose",x));const Se=fe.source;let Me=i.get(Se);Me===void 0&&(Me={},i.set(Se,Me));const ue=C(fe);if(ue!==pe.__cacheKey){Me[ue]===void 0&&(Me[ue]={texture:be.createTexture(),usedTimes:0},L.memory.textures++,Oe=!0),Me[ue].usedTimes++;const le=Me[pe.__cacheKey];le!==void 0&&(Me[pe.__cacheKey].usedTimes--,le.usedTimes===0&&M(fe)),pe.__cacheKey=ue,pe.__webglTexture=Me[ue].texture}return Oe}function q(pe,fe,Oe){let Se=be.TEXTURE_2D;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Se=be.TEXTURE_2D_ARRAY),fe.isData3DTexture&&(Se=be.TEXTURE_3D);const Me=W(pe,fe),ue=fe.source;J.bindTexture(Se,pe.__webglTexture,be.TEXTURE0+Oe);const le=ve.get(ue);if(ue.version!==le.__version||Me===!0){J.activeTexture(be.TEXTURE0+Oe),be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,fe.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,fe.unpackAlignment),be.pixelStorei(be.UNPACK_COLORSPACE_CONVERSION_WEBGL,be.NONE);const ie=u(fe)&&l(fe.image)===!1;let ge=s(fe.image,ie,!1,a);ge=Ce(fe,ge);const Ae=l(ge)||e,we=F.convert(fe.format,fe.colorSpace);let Ne=F.convert(fe.type),He=w(fe.internalFormat,we,Ne,fe.colorSpace);B(Se,fe,Ae);let de;const Le=fe.mipmaps,Ee=e&&fe.isVideoTexture!==!0,Re=le.__version===void 0||Me===!0,je=m(fe,ge,Ae);if(fe.isDepthTexture)He=be.DEPTH_COMPONENT,e?fe.type===Fu?He=be.DEPTH_COMPONENT32F:fe.type===zu?He=be.DEPTH_COMPONENT24:fe.type===dc?He=be.DEPTH24_STENCIL8:He=be.DEPTH_COMPONENT16:fe.type===Fu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===mc&&He===be.DEPTH_COMPONENT&&fe.type!==Y0&&fe.type!==zu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=zu,Ne=F.convert(fe.type)),fe.format===Cf&&He===be.DEPTH_COMPONENT&&(He=be.DEPTH_STENCIL,fe.type!==dc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=dc,Ne=F.convert(fe.type))),Re&&(Ee?J.texStorage2D(be.TEXTURE_2D,1,He,ge.width,ge.height):J.texImage2D(be.TEXTURE_2D,0,He,ge.width,ge.height,0,we,Ne,null));else if(fe.isDataTexture)if(Le.length>0&&Ae){Ee&&Re&&J.texStorage2D(be.TEXTURE_2D,je,He,Le[0].width,Le[0].height);for(let Fe=0,Xe=Le.length;Fe<Xe;Fe++)de=Le[Fe],Ee?J.texSubImage2D(be.TEXTURE_2D,Fe,0,0,de.width,de.height,we,Ne,de.data):J.texImage2D(be.TEXTURE_2D,Fe,He,de.width,de.height,0,we,Ne,de.data);fe.generateMipmaps=!1}else Ee?(Re&&J.texStorage2D(be.TEXTURE_2D,je,He,ge.width,ge.height),J.texSubImage2D(be.TEXTURE_2D,0,0,0,ge.width,ge.height,we,Ne,ge.data)):J.texImage2D(be.TEXTURE_2D,0,He,ge.width,ge.height,0,we,Ne,ge.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){Ee&&Re&&J.texStorage3D(be.TEXTURE_2D_ARRAY,je,He,Le[0].width,Le[0].height,ge.depth);for(let Fe=0,Xe=Le.length;Fe<Xe;Fe++)de=Le[Fe],fe.format!==kl?we!==null?Ee?J.compressedTexSubImage3D(be.TEXTURE_2D_ARRAY,Fe,0,0,0,de.width,de.height,ge.depth,we,de.data,0,0):J.compressedTexImage3D(be.TEXTURE_2D_ARRAY,Fe,He,de.width,de.height,ge.depth,0,de.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ee?J.texSubImage3D(be.TEXTURE_2D_ARRAY,Fe,0,0,0,de.width,de.height,ge.depth,we,Ne,de.data):J.texImage3D(be.TEXTURE_2D_ARRAY,Fe,He,de.width,de.height,ge.depth,0,we,Ne,de.data)}else{Ee&&Re&&J.texStorage2D(be.TEXTURE_2D,je,He,Le[0].width,Le[0].height);for(let Fe=0,Xe=Le.length;Fe<Xe;Fe++)de=Le[Fe],fe.format!==kl?we!==null?Ee?J.compressedTexSubImage2D(be.TEXTURE_2D,Fe,0,0,de.width,de.height,we,de.data):J.compressedTexImage2D(be.TEXTURE_2D,Fe,He,de.width,de.height,0,de.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ee?J.texSubImage2D(be.TEXTURE_2D,Fe,0,0,de.width,de.height,we,Ne,de.data):J.texImage2D(be.TEXTURE_2D,Fe,He,de.width,de.height,0,we,Ne,de.data)}else if(fe.isDataArrayTexture)Ee?(Re&&J.texStorage3D(be.TEXTURE_2D_ARRAY,je,He,ge.width,ge.height,ge.depth),J.texSubImage3D(be.TEXTURE_2D_ARRAY,0,0,0,0,ge.width,ge.height,ge.depth,we,Ne,ge.data)):J.texImage3D(be.TEXTURE_2D_ARRAY,0,He,ge.width,ge.height,ge.depth,0,we,Ne,ge.data);else if(fe.isData3DTexture)Ee?(Re&&J.texStorage3D(be.TEXTURE_3D,je,He,ge.width,ge.height,ge.depth),J.texSubImage3D(be.TEXTURE_3D,0,0,0,0,ge.width,ge.height,ge.depth,we,Ne,ge.data)):J.texImage3D(be.TEXTURE_3D,0,He,ge.width,ge.height,ge.depth,0,we,Ne,ge.data);else if(fe.isFramebufferTexture){if(Re)if(Ee)J.texStorage2D(be.TEXTURE_2D,je,He,ge.width,ge.height);else{let Fe=ge.width,Xe=ge.height;for(let Ze=0;Ze<je;Ze++)J.texImage2D(be.TEXTURE_2D,Ze,He,Fe,Xe,0,we,Ne,null),Fe>>=1,Xe>>=1}}else if(Le.length>0&&Ae){Ee&&Re&&J.texStorage2D(be.TEXTURE_2D,je,He,Le[0].width,Le[0].height);for(let Fe=0,Xe=Le.length;Fe<Xe;Fe++)de=Le[Fe],Ee?J.texSubImage2D(be.TEXTURE_2D,Fe,0,0,we,Ne,de):J.texImage2D(be.TEXTURE_2D,Fe,He,we,Ne,de);fe.generateMipmaps=!1}else Ee?(Re&&J.texStorage2D(be.TEXTURE_2D,je,He,ge.width,ge.height),J.texSubImage2D(be.TEXTURE_2D,0,0,0,we,Ne,ge)):J.texImage2D(be.TEXTURE_2D,0,He,we,Ne,ge);d(fe,Ae)&&c(Se),le.__version=ue.version,fe.onUpdate&&fe.onUpdate(fe)}pe.__version=fe.version}function re(pe,fe,Oe){if(fe.image.length!==6)return;const Se=W(pe,fe),Me=fe.source;J.bindTexture(be.TEXTURE_CUBE_MAP,pe.__webglTexture,be.TEXTURE0+Oe);const ue=ve.get(Me);if(Me.version!==ue.__version||Se===!0){J.activeTexture(be.TEXTURE0+Oe),be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,fe.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,fe.unpackAlignment),be.pixelStorei(be.UNPACK_COLORSPACE_CONVERSION_WEBGL,be.NONE);const le=fe.isCompressedTexture||fe.image[0].isCompressedTexture,ie=fe.image[0]&&fe.image[0].isDataTexture,ge=[];for(let Fe=0;Fe<6;Fe++)!le&&!ie?ge[Fe]=s(fe.image[Fe],!1,!0,b):ge[Fe]=ie?fe.image[Fe].image:fe.image[Fe],ge[Fe]=Ce(fe,ge[Fe]);const Ae=ge[0],we=l(Ae)||e,Ne=F.convert(fe.format,fe.colorSpace),He=F.convert(fe.type),de=w(fe.internalFormat,Ne,He,fe.colorSpace),Le=e&&fe.isVideoTexture!==!0,Ee=ue.__version===void 0||Se===!0;let Re=m(fe,Ae,we);B(be.TEXTURE_CUBE_MAP,fe,we);let je;if(le){Le&&Ee&&J.texStorage2D(be.TEXTURE_CUBE_MAP,Re,de,Ae.width,Ae.height);for(let Fe=0;Fe<6;Fe++){je=ge[Fe].mipmaps;for(let Xe=0;Xe<je.length;Xe++){const Ze=je[Xe];fe.format!==kl?Ne!==null?Le?J.compressedTexSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe,0,0,Ze.width,Ze.height,Ne,Ze.data):J.compressedTexImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe,de,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?J.texSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe,0,0,Ze.width,Ze.height,Ne,He,Ze.data):J.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe,de,Ze.width,Ze.height,0,Ne,He,Ze.data)}}}else{je=fe.mipmaps,Le&&Ee&&(je.length>0&&Re++,J.texStorage2D(be.TEXTURE_CUBE_MAP,Re,de,ge[0].width,ge[0].height));for(let Fe=0;Fe<6;Fe++)if(ie){Le?J.texSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,ge[Fe].width,ge[Fe].height,Ne,He,ge[Fe].data):J.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,de,ge[Fe].width,ge[Fe].height,0,Ne,He,ge[Fe].data);for(let Xe=0;Xe<je.length;Xe++){const at=je[Xe].image[Fe].image;Le?J.texSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe+1,0,0,at.width,at.height,Ne,He,at.data):J.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe+1,de,at.width,at.height,0,Ne,He,at.data)}}else{Le?J.texSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,Ne,He,ge[Fe]):J.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,de,Ne,He,ge[Fe]);for(let Xe=0;Xe<je.length;Xe++){const Ze=je[Xe];Le?J.texSubImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe+1,0,0,Ne,He,Ze.image[Fe]):J.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe+1,de,Ne,He,Ze.image[Fe])}}}d(fe,we)&&c(be.TEXTURE_CUBE_MAP),ue.__version=Me.version,fe.onUpdate&&fe.onUpdate(fe)}pe.__version=fe.version}function ee(pe,fe,Oe,Se,Me,ue){const le=F.convert(Oe.format,Oe.colorSpace),ie=F.convert(Oe.type),ge=w(Oe.internalFormat,le,ie,Oe.colorSpace);if(!ve.get(fe).__hasExternalTextures){const we=Math.max(1,fe.width>>ue),Ne=Math.max(1,fe.height>>ue);Me===be.TEXTURE_3D||Me===be.TEXTURE_2D_ARRAY?J.texImage3D(Me,ue,ge,we,Ne,fe.depth,0,le,ie,null):J.texImage2D(Me,ue,ge,we,Ne,0,le,ie,null)}J.bindFramebuffer(be.FRAMEBUFFER,pe),ye(fe)?g.framebufferTexture2DMultisampleEXT(be.FRAMEBUFFER,Se,Me,ve.get(Oe).__webglTexture,0,me(fe)):(Me===be.TEXTURE_2D||Me>=be.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=be.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&be.framebufferTexture2D(be.FRAMEBUFFER,Se,Me,ve.get(Oe).__webglTexture,ue),J.bindFramebuffer(be.FRAMEBUFFER,null)}function K(pe,fe,Oe){if(be.bindRenderbuffer(be.RENDERBUFFER,pe),fe.depthBuffer&&!fe.stencilBuffer){let Se=be.DEPTH_COMPONENT16;if(Oe||ye(fe)){const Me=fe.depthTexture;Me&&Me.isDepthTexture&&(Me.type===Fu?Se=be.DEPTH_COMPONENT32F:Me.type===zu&&(Se=be.DEPTH_COMPONENT24));const ue=me(fe);ye(fe)?g.renderbufferStorageMultisampleEXT(be.RENDERBUFFER,ue,Se,fe.width,fe.height):be.renderbufferStorageMultisample(be.RENDERBUFFER,ue,Se,fe.width,fe.height)}else be.renderbufferStorage(be.RENDERBUFFER,Se,fe.width,fe.height);be.framebufferRenderbuffer(be.FRAMEBUFFER,be.DEPTH_ATTACHMENT,be.RENDERBUFFER,pe)}else if(fe.depthBuffer&&fe.stencilBuffer){const Se=me(fe);Oe&&ye(fe)===!1?be.renderbufferStorageMultisample(be.RENDERBUFFER,Se,be.DEPTH24_STENCIL8,fe.width,fe.height):ye(fe)?g.renderbufferStorageMultisampleEXT(be.RENDERBUFFER,Se,be.DEPTH24_STENCIL8,fe.width,fe.height):be.renderbufferStorage(be.RENDERBUFFER,be.DEPTH_STENCIL,fe.width,fe.height),be.framebufferRenderbuffer(be.FRAMEBUFFER,be.DEPTH_STENCIL_ATTACHMENT,be.RENDERBUFFER,pe)}else{const Se=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Me=0;Me<Se.length;Me++){const ue=Se[Me],le=F.convert(ue.format,ue.colorSpace),ie=F.convert(ue.type),ge=w(ue.internalFormat,le,ie,ue.colorSpace),Ae=me(fe);Oe&&ye(fe)===!1?be.renderbufferStorageMultisample(be.RENDERBUFFER,Ae,ge,fe.width,fe.height):ye(fe)?g.renderbufferStorageMultisampleEXT(be.RENDERBUFFER,Ae,ge,fe.width,fe.height):be.renderbufferStorage(be.RENDERBUFFER,ge,fe.width,fe.height)}}be.bindRenderbuffer(be.RENDERBUFFER,null)}function Y(pe,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(J.bindFramebuffer(be.FRAMEBUFFER,pe),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!ve.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),P(fe.depthTexture,0);const Se=ve.get(fe.depthTexture).__webglTexture,Me=me(fe);if(fe.depthTexture.format===mc)ye(fe)?g.framebufferTexture2DMultisampleEXT(be.FRAMEBUFFER,be.DEPTH_ATTACHMENT,be.TEXTURE_2D,Se,0,Me):be.framebufferTexture2D(be.FRAMEBUFFER,be.DEPTH_ATTACHMENT,be.TEXTURE_2D,Se,0);else if(fe.depthTexture.format===Cf)ye(fe)?g.framebufferTexture2DMultisampleEXT(be.FRAMEBUFFER,be.DEPTH_STENCIL_ATTACHMENT,be.TEXTURE_2D,Se,0,Me):be.framebufferTexture2D(be.FRAMEBUFFER,be.DEPTH_STENCIL_ATTACHMENT,be.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function $(pe){const fe=ve.get(pe),Oe=pe.isWebGLCubeRenderTarget===!0;if(pe.depthTexture&&!fe.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");Y(fe.__webglFramebuffer,pe)}else if(Oe){fe.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)J.bindFramebuffer(be.FRAMEBUFFER,fe.__webglFramebuffer[Se]),fe.__webglDepthbuffer[Se]=be.createRenderbuffer(),K(fe.__webglDepthbuffer[Se],pe,!1)}else J.bindFramebuffer(be.FRAMEBUFFER,fe.__webglFramebuffer),fe.__webglDepthbuffer=be.createRenderbuffer(),K(fe.__webglDepthbuffer,pe,!1);J.bindFramebuffer(be.FRAMEBUFFER,null)}function ne(pe,fe,Oe){const Se=ve.get(pe);fe!==void 0&&ee(Se.__webglFramebuffer,pe,pe.texture,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,0),Oe!==void 0&&$(pe)}function ae(pe){const fe=pe.texture,Oe=ve.get(pe),Se=ve.get(fe);pe.addEventListener("dispose",y),pe.isWebGLMultipleRenderTargets!==!0&&(Se.__webglTexture===void 0&&(Se.__webglTexture=be.createTexture()),Se.__version=fe.version,L.memory.textures++);const Me=pe.isWebGLCubeRenderTarget===!0,ue=pe.isWebGLMultipleRenderTargets===!0,le=l(pe)||e;if(Me){Oe.__webglFramebuffer=[];for(let ie=0;ie<6;ie++)if(e&&fe.mipmaps&&fe.mipmaps.length>0){Oe.__webglFramebuffer[ie]=[];for(let ge=0;ge<fe.mipmaps.length;ge++)Oe.__webglFramebuffer[ie][ge]=be.createFramebuffer()}else Oe.__webglFramebuffer[ie]=be.createFramebuffer()}else{if(e&&fe.mipmaps&&fe.mipmaps.length>0){Oe.__webglFramebuffer=[];for(let ie=0;ie<fe.mipmaps.length;ie++)Oe.__webglFramebuffer[ie]=be.createFramebuffer()}else Oe.__webglFramebuffer=be.createFramebuffer();if(ue)if(Ve.drawBuffers){const ie=pe.texture;for(let ge=0,Ae=ie.length;ge<Ae;ge++){const we=ve.get(ie[ge]);we.__webglTexture===void 0&&(we.__webglTexture=be.createTexture(),L.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(e&&pe.samples>0&&ye(pe)===!1){const ie=ue?fe:[fe];Oe.__webglMultisampledFramebuffer=be.createFramebuffer(),Oe.__webglColorRenderbuffer=[],J.bindFramebuffer(be.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);for(let ge=0;ge<ie.length;ge++){const Ae=ie[ge];Oe.__webglColorRenderbuffer[ge]=be.createRenderbuffer(),be.bindRenderbuffer(be.RENDERBUFFER,Oe.__webglColorRenderbuffer[ge]);const we=F.convert(Ae.format,Ae.colorSpace),Ne=F.convert(Ae.type),He=w(Ae.internalFormat,we,Ne,Ae.colorSpace,pe.isXRRenderTarget===!0),de=me(pe);be.renderbufferStorageMultisample(be.RENDERBUFFER,de,He,pe.width,pe.height),be.framebufferRenderbuffer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0+ge,be.RENDERBUFFER,Oe.__webglColorRenderbuffer[ge])}be.bindRenderbuffer(be.RENDERBUFFER,null),pe.depthBuffer&&(Oe.__webglDepthRenderbuffer=be.createRenderbuffer(),K(Oe.__webglDepthRenderbuffer,pe,!0)),J.bindFramebuffer(be.FRAMEBUFFER,null)}}if(Me){J.bindTexture(be.TEXTURE_CUBE_MAP,Se.__webglTexture),B(be.TEXTURE_CUBE_MAP,fe,le);for(let ie=0;ie<6;ie++)if(e&&fe.mipmaps&&fe.mipmaps.length>0)for(let ge=0;ge<fe.mipmaps.length;ge++)ee(Oe.__webglFramebuffer[ie][ge],pe,fe,be.COLOR_ATTACHMENT0,be.TEXTURE_CUBE_MAP_POSITIVE_X+ie,ge);else ee(Oe.__webglFramebuffer[ie],pe,fe,be.COLOR_ATTACHMENT0,be.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0);d(fe,le)&&c(be.TEXTURE_CUBE_MAP),J.unbindTexture()}else if(ue){const ie=pe.texture;for(let ge=0,Ae=ie.length;ge<Ae;ge++){const we=ie[ge],Ne=ve.get(we);J.bindTexture(be.TEXTURE_2D,Ne.__webglTexture),B(be.TEXTURE_2D,we,le),ee(Oe.__webglFramebuffer,pe,we,be.COLOR_ATTACHMENT0+ge,be.TEXTURE_2D,0),d(we,le)&&c(be.TEXTURE_2D)}J.unbindTexture()}else{let ie=be.TEXTURE_2D;if((pe.isWebGL3DRenderTarget||pe.isWebGLArrayRenderTarget)&&(e?ie=pe.isWebGL3DRenderTarget?be.TEXTURE_3D:be.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),J.bindTexture(ie,Se.__webglTexture),B(ie,fe,le),e&&fe.mipmaps&&fe.mipmaps.length>0)for(let ge=0;ge<fe.mipmaps.length;ge++)ee(Oe.__webglFramebuffer[ge],pe,fe,be.COLOR_ATTACHMENT0,ie,ge);else ee(Oe.__webglFramebuffer,pe,fe,be.COLOR_ATTACHMENT0,ie,0);d(fe,le)&&c(ie),J.unbindTexture()}pe.depthBuffer&&$(pe)}function se(pe){const fe=l(pe)||e,Oe=pe.isWebGLMultipleRenderTargets===!0?pe.texture:[pe.texture];for(let Se=0,Me=Oe.length;Se<Me;Se++){const ue=Oe[Se];if(d(ue,fe)){const le=pe.isWebGLCubeRenderTarget?be.TEXTURE_CUBE_MAP:be.TEXTURE_2D,ie=ve.get(ue).__webglTexture;J.bindTexture(le,ie),c(le),J.unbindTexture()}}}function ce(pe){if(e&&pe.samples>0&&ye(pe)===!1){const fe=pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture],Oe=pe.width,Se=pe.height;let Me=be.COLOR_BUFFER_BIT;const ue=[],le=pe.stencilBuffer?be.DEPTH_STENCIL_ATTACHMENT:be.DEPTH_ATTACHMENT,ie=ve.get(pe),ge=pe.isWebGLMultipleRenderTargets===!0;if(ge)for(let Ae=0;Ae<fe.length;Ae++)J.bindFramebuffer(be.FRAMEBUFFER,ie.__webglMultisampledFramebuffer),be.framebufferRenderbuffer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0+Ae,be.RENDERBUFFER,null),J.bindFramebuffer(be.FRAMEBUFFER,ie.__webglFramebuffer),be.framebufferTexture2D(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0+Ae,be.TEXTURE_2D,null,0);J.bindFramebuffer(be.READ_FRAMEBUFFER,ie.__webglMultisampledFramebuffer),J.bindFramebuffer(be.DRAW_FRAMEBUFFER,ie.__webglFramebuffer);for(let Ae=0;Ae<fe.length;Ae++){ue.push(be.COLOR_ATTACHMENT0+Ae),pe.depthBuffer&&ue.push(le);const we=ie.__ignoreDepthValues!==void 0?ie.__ignoreDepthValues:!1;if(we===!1&&(pe.depthBuffer&&(Me|=be.DEPTH_BUFFER_BIT),pe.stencilBuffer&&(Me|=be.STENCIL_BUFFER_BIT)),ge&&be.framebufferRenderbuffer(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.RENDERBUFFER,ie.__webglColorRenderbuffer[Ae]),we===!0&&(be.invalidateFramebuffer(be.READ_FRAMEBUFFER,[le]),be.invalidateFramebuffer(be.DRAW_FRAMEBUFFER,[le])),ge){const Ne=ve.get(fe[Ae]).__webglTexture;be.framebufferTexture2D(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,Ne,0)}be.blitFramebuffer(0,0,Oe,Se,0,0,Oe,Se,Me,be.NEAREST),h&&be.invalidateFramebuffer(be.READ_FRAMEBUFFER,ue)}if(J.bindFramebuffer(be.READ_FRAMEBUFFER,null),J.bindFramebuffer(be.DRAW_FRAMEBUFFER,null),ge)for(let Ae=0;Ae<fe.length;Ae++){J.bindFramebuffer(be.FRAMEBUFFER,ie.__webglMultisampledFramebuffer),be.framebufferRenderbuffer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0+Ae,be.RENDERBUFFER,ie.__webglColorRenderbuffer[Ae]);const we=ve.get(fe[Ae]).__webglTexture;J.bindFramebuffer(be.FRAMEBUFFER,ie.__webglFramebuffer),be.framebufferTexture2D(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0+Ae,be.TEXTURE_2D,we,0)}J.bindFramebuffer(be.DRAW_FRAMEBUFFER,ie.__webglMultisampledFramebuffer)}}function me(pe){return Math.min(_,pe.samples)}function ye(pe){const fe=ve.get(pe);return e&&pe.samples>0&&I.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Te(pe){const fe=L.render.frame;o.get(pe)!==fe&&(o.set(pe,fe),pe.update())}function Ce(pe,fe){const Oe=pe.colorSpace,Se=pe.format,Me=pe.type;return pe.isCompressedTexture===!0||pe.format===U0||Oe!==ql&&Oe!==vc&&(Oe===ei?e===!1?I.has("EXT_sRGB")===!0&&Se===kl?(pe.format=U0,pe.minFilter=rl,pe.generateMipmaps=!1):fe=z1.sRGBToLinear(fe):(Se!==kl||Me!==Uu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Oe)),fe}this.allocateTextureUnit=k,this.resetTextureUnits=A,this.setTexture2D=P,this.setTexture2DArray=R,this.setTexture3D=O,this.setTextureCube=X,this.rebindTextures=ne,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=se,this.updateMultisampleRenderTarget=ce,this.setupDepthRenderbuffer=$,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=ye}function yT(be,I,J){const ve=J.isWebGL2;function Ve(F,L=vc){let e;if(F===Uu)return be.UNSIGNED_BYTE;if(F===E1)return be.UNSIGNED_SHORT_4_4_4_4;if(F===k1)return be.UNSIGNED_SHORT_5_5_5_1;if(F===F_)return be.BYTE;if(F===N_)return be.SHORT;if(F===Y0)return be.UNSIGNED_SHORT;if(F===S1)return be.INT;if(F===zu)return be.UNSIGNED_INT;if(F===Fu)return be.FLOAT;if(F===Fh)return ve?be.HALF_FLOAT:(e=I.get("OES_texture_half_float"),e!==null?e.HALF_FLOAT_OES:null);if(F===B_)return be.ALPHA;if(F===kl)return be.RGBA;if(F===U_)return be.LUMINANCE;if(F===j_)return be.LUMINANCE_ALPHA;if(F===mc)return be.DEPTH_COMPONENT;if(F===Cf)return be.DEPTH_STENCIL;if(F===U0)return e=I.get("EXT_sRGB"),e!==null?e.SRGB_ALPHA_EXT:null;if(F===V_)return be.RED;if(F===L1)return be.RED_INTEGER;if(F===H_)return be.RG;if(F===C1)return be.RG_INTEGER;if(F===P1)return be.RGBA_INTEGER;if(F===t0||F===n0||F===r0||F===i0)if(L===ei)if(e=I.get("WEBGL_compressed_texture_s3tc_srgb"),e!==null){if(F===t0)return e.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(F===n0)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(F===r0)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(F===i0)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(e=I.get("WEBGL_compressed_texture_s3tc"),e!==null){if(F===t0)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(F===n0)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(F===r0)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(F===i0)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(F===Wg||F===qg||F===Xg||F===Yg)if(e=I.get("WEBGL_compressed_texture_pvrtc"),e!==null){if(F===Wg)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(F===qg)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(F===Xg)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(F===Yg)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(F===G_)return e=I.get("WEBGL_compressed_texture_etc1"),e!==null?e.COMPRESSED_RGB_ETC1_WEBGL:null;if(F===Zg||F===Kg)if(e=I.get("WEBGL_compressed_texture_etc"),e!==null){if(F===Zg)return L===ei?e.COMPRESSED_SRGB8_ETC2:e.COMPRESSED_RGB8_ETC2;if(F===Kg)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:e.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(F===Jg||F===$g||F===Qg||F===ev||F===tv||F===nv||F===rv||F===iv||F===av||F===ov||F===sv||F===lv||F===uv||F===cv)if(e=I.get("WEBGL_compressed_texture_astc"),e!==null){if(F===Jg)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:e.COMPRESSED_RGBA_ASTC_4x4_KHR;if(F===$g)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:e.COMPRESSED_RGBA_ASTC_5x4_KHR;if(F===Qg)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:e.COMPRESSED_RGBA_ASTC_5x5_KHR;if(F===ev)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:e.COMPRESSED_RGBA_ASTC_6x5_KHR;if(F===tv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:e.COMPRESSED_RGBA_ASTC_6x6_KHR;if(F===nv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:e.COMPRESSED_RGBA_ASTC_8x5_KHR;if(F===rv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:e.COMPRESSED_RGBA_ASTC_8x6_KHR;if(F===iv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:e.COMPRESSED_RGBA_ASTC_8x8_KHR;if(F===av)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:e.COMPRESSED_RGBA_ASTC_10x5_KHR;if(F===ov)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:e.COMPRESSED_RGBA_ASTC_10x6_KHR;if(F===sv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:e.COMPRESSED_RGBA_ASTC_10x8_KHR;if(F===lv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:e.COMPRESSED_RGBA_ASTC_10x10_KHR;if(F===uv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:e.COMPRESSED_RGBA_ASTC_12x10_KHR;if(F===cv)return L===ei?e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:e.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(F===a0)if(e=I.get("EXT_texture_compression_bptc"),e!==null){if(F===a0)return L===ei?e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:e.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(F===W_||F===fv||F===hv||F===pv)if(e=I.get("EXT_texture_compression_rgtc"),e!==null){if(F===a0)return e.COMPRESSED_RED_RGTC1_EXT;if(F===fv)return e.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(F===hv)return e.COMPRESSED_RED_GREEN_RGTC2_EXT;if(F===pv)return e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return F===dc?ve?be.UNSIGNED_INT_24_8:(e=I.get("WEBGL_depth_texture"),e!==null?e.UNSIGNED_INT_24_8_WEBGL:null):be[F]!==void 0?be[F]:null}return{convert:Ve}}class xT extends xs{constructor(I=[]){super(),this.isArrayCamera=!0,this.cameras=I}}class Kp extends Io{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _T={type:"move"};class E0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Hn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Hn),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Hn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Hn),this._grip}dispatchEvent(I){return this._targetRay!==null&&this._targetRay.dispatchEvent(I),this._grip!==null&&this._grip.dispatchEvent(I),this._hand!==null&&this._hand.dispatchEvent(I),this}connect(I){if(I&&I.hand){const J=this._hand;if(J)for(const ve of I.hand.values())this._getHandJoint(J,ve)}return this.dispatchEvent({type:"connected",data:I}),this}disconnect(I){return this.dispatchEvent({type:"disconnected",data:I}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(I,J,ve){let Ve=null,F=null,L=null;const e=this._targetRay,T=this._grip,b=this._hand;if(I&&J.session.visibilityState!=="visible-blurred"){if(b&&I.hand){L=!0;for(const t of I.hand.values()){const i=J.getJointPose(t,ve),n=this._getHandJoint(b,t);i!==null&&(n.matrix.fromArray(i.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=i.radius),n.visible=i!==null}const a=b.joints["index-finger-tip"],_=b.joints["thumb-tip"],g=a.position.distanceTo(_.position),h=.02,o=.005;b.inputState.pinching&&g>h+o?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:I.handedness,target:this})):!b.inputState.pinching&&g<=h-o&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:I.handedness,target:this}))}else T!==null&&I.gripSpace&&(F=J.getPose(I.gripSpace,ve),F!==null&&(T.matrix.fromArray(F.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,F.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(F.linearVelocity)):T.hasLinearVelocity=!1,F.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(F.angularVelocity)):T.hasAngularVelocity=!1));e!==null&&(Ve=J.getPose(I.targetRaySpace,ve),Ve===null&&F!==null&&(Ve=F),Ve!==null&&(e.matrix.fromArray(Ve.transform.matrix),e.matrix.decompose(e.position,e.rotation,e.scale),e.matrixWorldNeedsUpdate=!0,Ve.linearVelocity?(e.hasLinearVelocity=!0,e.linearVelocity.copy(Ve.linearVelocity)):e.hasLinearVelocity=!1,Ve.angularVelocity?(e.hasAngularVelocity=!0,e.angularVelocity.copy(Ve.angularVelocity)):e.hasAngularVelocity=!1,this.dispatchEvent(_T)))}return e!==null&&(e.visible=Ve!==null),T!==null&&(T.visible=F!==null),b!==null&&(b.visible=L!==null),this}_getHandJoint(I,J){if(I.joints[J.jointName]===void 0){const ve=new Kp;ve.matrixAutoUpdate=!1,ve.visible=!1,I.joints[J.jointName]=ve,I.add(ve)}return I.joints[J.jointName]}}class bT extends Vs{constructor(I,J,ve,Ve,F,L,e,T,b,a){if(a=a!==void 0?a:mc,a!==mc&&a!==Cf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ve===void 0&&a===mc&&(ve=zu),ve===void 0&&a===Cf&&(ve=dc),super(null,Ve,F,L,e,T,a,ve,b),this.isDepthTexture=!0,this.image={width:I,height:J},this.magFilter=e!==void 0?e:$o,this.minFilter=T!==void 0?T:$o,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(I){return super.copy(I),this.compareFunction=I.compareFunction,this}toJSON(I){const J=super.toJSON(I);return this.compareFunction!==null&&(J.compareFunction=this.compareFunction),J}}class wT extends Ac{constructor(I,J){super();const ve=this;let Ve=null,F=1,L=null,e="local-floor",T=1,b=null,a=null,_=null,g=null,h=null,o=null;const t=J.getContextAttributes();let i=null,n=null;const r=[],s=[],l=new xs;l.layers.enable(1),l.viewport=new ma;const u=new xs;u.layers.enable(2),u.viewport=new ma;const d=[l,u],c=new xT;c.layers.enable(1),c.layers.enable(2);let w=null,m=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(R){let O=r[R];return O===void 0&&(O=new E0,r[R]=O),O.getTargetRaySpace()},this.getControllerGrip=function(R){let O=r[R];return O===void 0&&(O=new E0,r[R]=O),O.getGripSpace()},this.getHand=function(R){let O=r[R];return O===void 0&&(O=new E0,r[R]=O),O.getHandSpace()};function f(R){const O=s.indexOf(R.inputSource);if(O===-1)return;const X=r[O];X!==void 0&&(X.update(R.inputSource,R.frame,b||L),X.dispatchEvent({type:R.type,data:R.inputSource}))}function x(){Ve.removeEventListener("select",f),Ve.removeEventListener("selectstart",f),Ve.removeEventListener("selectend",f),Ve.removeEventListener("squeeze",f),Ve.removeEventListener("squeezestart",f),Ve.removeEventListener("squeezeend",f),Ve.removeEventListener("end",x),Ve.removeEventListener("inputsourceschange",y);for(let R=0;R<r.length;R++){const O=s[R];O!==null&&(s[R]=null,r[R].disconnect(O))}w=null,m=null,I.setRenderTarget(i),h=null,g=null,_=null,Ve=null,n=null,P.stop(),ve.isPresenting=!1,ve.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(R){F=R,ve.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(R){e=R,ve.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||L},this.setReferenceSpace=function(R){b=R},this.getBaseLayer=function(){return g!==null?g:h},this.getBinding=function(){return _},this.getFrame=function(){return o},this.getSession=function(){return Ve},this.setSession=async function(R){if(Ve=R,Ve!==null){if(i=I.getRenderTarget(),Ve.addEventListener("select",f),Ve.addEventListener("selectstart",f),Ve.addEventListener("selectend",f),Ve.addEventListener("squeeze",f),Ve.addEventListener("squeezestart",f),Ve.addEventListener("squeezeend",f),Ve.addEventListener("end",x),Ve.addEventListener("inputsourceschange",y),t.xrCompatible!==!0&&await J.makeXRCompatible(),Ve.renderState.layers===void 0||I.capabilities.isWebGL2===!1){const O={antialias:Ve.renderState.layers===void 0?t.antialias:!0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:F};h=new XRWebGLLayer(Ve,J,O),Ve.updateRenderState({baseLayer:h}),n=new xc(h.framebufferWidth,h.framebufferHeight,{format:kl,type:Uu,colorSpace:I.outputColorSpace,stencilBuffer:t.stencil})}else{let O=null,X=null,D=null;t.depth&&(D=t.stencil?J.DEPTH24_STENCIL8:J.DEPTH_COMPONENT24,O=t.stencil?Cf:mc,X=t.stencil?dc:zu);const V={colorFormat:J.RGBA8,depthFormat:D,scaleFactor:F};_=new XRWebGLBinding(Ve,J),g=_.createProjectionLayer(V),Ve.updateRenderState({layers:[g]}),n=new xc(g.textureWidth,g.textureHeight,{format:kl,type:Uu,depthTexture:new bT(g.textureWidth,g.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,O),stencilBuffer:t.stencil,colorSpace:I.outputColorSpace,samples:t.antialias?4:0});const j=I.properties.get(n);j.__ignoreDepthValues=g.ignoreDepthValues}n.isXRRenderTarget=!0,this.setFoveation(T),b=null,L=await Ve.requestReferenceSpace(e),P.setContext(Ve),P.start(),ve.isPresenting=!0,ve.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(Ve!==null)return Ve.environmentBlendMode};function y(R){for(let O=0;O<R.removed.length;O++){const X=R.removed[O],D=s.indexOf(X);D>=0&&(s[D]=null,r[D].disconnect(X))}for(let O=0;O<R.added.length;O++){const X=R.added[O];let D=s.indexOf(X);if(D===-1){for(let j=0;j<r.length;j++)if(j>=s.length){s.push(X),D=j;break}else if(s[j]===null){s[j]=X,D=j;break}if(D===-1)break}const V=r[D];V&&V.connect(X)}}const v=new Hn,M=new Hn;function p(R,O,X){v.setFromMatrixPosition(O.matrixWorld),M.setFromMatrixPosition(X.matrixWorld);const D=v.distanceTo(M),V=O.projectionMatrix.elements,j=X.projectionMatrix.elements,B=V[14]/(V[10]-1),W=V[14]/(V[10]+1),q=(V[9]+1)/V[5],re=(V[9]-1)/V[5],ee=(V[8]-1)/V[0],K=(j[8]+1)/j[0],Y=B*ee,$=B*K,ne=D/(-ee+K),ae=ne*-ee;O.matrixWorld.decompose(R.position,R.quaternion,R.scale),R.translateX(ae),R.translateZ(ne),R.matrixWorld.compose(R.position,R.quaternion,R.scale),R.matrixWorldInverse.copy(R.matrixWorld).invert();const se=B+ne,ce=W+ne,me=Y-ae,ye=$+(D-ae),Te=q*W/ce*se,Ce=re*W/ce*se;R.projectionMatrix.makePerspective(me,ye,Te,Ce,se,ce),R.projectionMatrixInverse.copy(R.projectionMatrix).invert()}function S(R,O){O===null?R.matrixWorld.copy(R.matrix):R.matrixWorld.multiplyMatrices(O.matrixWorld,R.matrix),R.matrixWorldInverse.copy(R.matrixWorld).invert()}this.updateCamera=function(R){if(Ve===null)return;c.near=u.near=l.near=R.near,c.far=u.far=l.far=R.far,(w!==c.near||m!==c.far)&&(Ve.updateRenderState({depthNear:c.near,depthFar:c.far}),w=c.near,m=c.far);const O=R.parent,X=c.cameras;S(c,O);for(let D=0;D<X.length;D++)S(X[D],O);X.length===2?p(c,l,u):c.projectionMatrix.copy(l.projectionMatrix),A(R,c,O)};function A(R,O,X){X===null?R.matrix.copy(O.matrixWorld):(R.matrix.copy(X.matrixWorld),R.matrix.invert(),R.matrix.multiply(O.matrixWorld)),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld(!0);const D=R.children;for(let V=0,j=D.length;V<j;V++)D[V].updateMatrixWorld(!0);R.projectionMatrix.copy(O.projectionMatrix),R.projectionMatrixInverse.copy(O.projectionMatrixInverse),R.isPerspectiveCamera&&(R.fov=Pf*2*Math.atan(1/R.projectionMatrix.elements[5]),R.zoom=1)}this.getCamera=function(){return c},this.getFoveation=function(){if(!(g===null&&h===null))return T},this.setFoveation=function(R){T=R,g!==null&&(g.fixedFoveation=R),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=R)};let k=null;function C(R,O){if(a=O.getViewerPose(b||L),o=O,a!==null){const X=a.views;h!==null&&(I.setRenderTargetFramebuffer(n,h.framebuffer),I.setRenderTarget(n));let D=!1;X.length!==c.cameras.length&&(c.cameras.length=0,D=!0);for(let V=0;V<X.length;V++){const j=X[V];let B=null;if(h!==null)B=h.getViewport(j);else{const q=_.getViewSubImage(g,j);B=q.viewport,V===0&&(I.setRenderTargetTextures(n,q.colorTexture,g.ignoreDepthValues?void 0:q.depthStencilTexture),I.setRenderTarget(n))}let W=d[V];W===void 0&&(W=new xs,W.layers.enable(V),W.viewport=new ma,d[V]=W),W.matrix.fromArray(j.transform.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale),W.projectionMatrix.fromArray(j.projectionMatrix),W.projectionMatrixInverse.copy(W.projectionMatrix).invert(),W.viewport.set(B.x,B.y,B.width,B.height),V===0&&(c.matrix.copy(W.matrix),c.matrix.decompose(c.position,c.quaternion,c.scale)),D===!0&&c.cameras.push(W)}}for(let X=0;X<r.length;X++){const D=s[X],V=r[X];D!==null&&V!==void 0&&V.update(D,O,b||L)}k&&k(R,O),O.detectedPlanes&&ve.dispatchEvent({type:"planesdetected",data:O}),o=null}const P=new Y1;P.setAnimationLoop(C),this.setAnimationLoop=function(R){k=R},this.dispose=function(){}}}function TT(be,I){function J(i,n){i.matrixAutoUpdate===!0&&i.updateMatrix(),n.value.copy(i.matrix)}function ve(i,n){n.color.getRGB(i.fogColor.value,W1(be)),n.isFog?(i.fogNear.value=n.near,i.fogFar.value=n.far):n.isFogExp2&&(i.fogDensity.value=n.density)}function Ve(i,n,r,s,l){n.isMeshBasicMaterial||n.isMeshLambertMaterial?F(i,n):n.isMeshToonMaterial?(F(i,n),_(i,n)):n.isMeshPhongMaterial?(F(i,n),a(i,n)):n.isMeshStandardMaterial?(F(i,n),g(i,n),n.isMeshPhysicalMaterial&&h(i,n,l)):n.isMeshMatcapMaterial?(F(i,n),o(i,n)):n.isMeshDepthMaterial?F(i,n):n.isMeshDistanceMaterial?(F(i,n),t(i,n)):n.isMeshNormalMaterial?F(i,n):n.isLineBasicMaterial?(L(i,n),n.isLineDashedMaterial&&e(i,n)):n.isPointsMaterial?T(i,n,r,s):n.isSpriteMaterial?b(i,n):n.isShadowMaterial?(i.color.value.copy(n.color),i.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}function F(i,n){i.opacity.value=n.opacity,n.color&&i.diffuse.value.copy(n.color),n.emissive&&i.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(i.map.value=n.map,J(n.map,i.mapTransform)),n.alphaMap&&(i.alphaMap.value=n.alphaMap,J(n.alphaMap,i.alphaMapTransform)),n.bumpMap&&(i.bumpMap.value=n.bumpMap,J(n.bumpMap,i.bumpMapTransform),i.bumpScale.value=n.bumpScale,n.side===bs&&(i.bumpScale.value*=-1)),n.normalMap&&(i.normalMap.value=n.normalMap,J(n.normalMap,i.normalMapTransform),i.normalScale.value.copy(n.normalScale),n.side===bs&&i.normalScale.value.negate()),n.displacementMap&&(i.displacementMap.value=n.displacementMap,J(n.displacementMap,i.displacementMapTransform),i.displacementScale.value=n.displacementScale,i.displacementBias.value=n.displacementBias),n.emissiveMap&&(i.emissiveMap.value=n.emissiveMap,J(n.emissiveMap,i.emissiveMapTransform)),n.specularMap&&(i.specularMap.value=n.specularMap,J(n.specularMap,i.specularMapTransform)),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest);const r=I.get(n).envMap;if(r&&(i.envMap.value=r,i.flipEnvMap.value=r.isCubeTexture&&r.isRenderTargetTexture===!1?-1:1,i.reflectivity.value=n.reflectivity,i.ior.value=n.ior,i.refractionRatio.value=n.refractionRatio),n.lightMap){i.lightMap.value=n.lightMap;const s=be._useLegacyLights===!0?Math.PI:1;i.lightMapIntensity.value=n.lightMapIntensity*s,J(n.lightMap,i.lightMapTransform)}n.aoMap&&(i.aoMap.value=n.aoMap,i.aoMapIntensity.value=n.aoMapIntensity,J(n.aoMap,i.aoMapTransform))}function L(i,n){i.diffuse.value.copy(n.color),i.opacity.value=n.opacity,n.map&&(i.map.value=n.map,J(n.map,i.mapTransform))}function e(i,n){i.dashSize.value=n.dashSize,i.totalSize.value=n.dashSize+n.gapSize,i.scale.value=n.scale}function T(i,n,r,s){i.diffuse.value.copy(n.color),i.opacity.value=n.opacity,i.size.value=n.size*r,i.scale.value=s*.5,n.map&&(i.map.value=n.map,J(n.map,i.uvTransform)),n.alphaMap&&(i.alphaMap.value=n.alphaMap,J(n.alphaMap,i.alphaMapTransform)),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest)}function b(i,n){i.diffuse.value.copy(n.color),i.opacity.value=n.opacity,i.rotation.value=n.rotation,n.map&&(i.map.value=n.map,J(n.map,i.mapTransform)),n.alphaMap&&(i.alphaMap.value=n.alphaMap,J(n.alphaMap,i.alphaMapTransform)),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest)}function a(i,n){i.specular.value.copy(n.specular),i.shininess.value=Math.max(n.shininess,1e-4)}function _(i,n){n.gradientMap&&(i.gradientMap.value=n.gradientMap)}function g(i,n){i.metalness.value=n.metalness,n.metalnessMap&&(i.metalnessMap.value=n.metalnessMap,J(n.metalnessMap,i.metalnessMapTransform)),i.roughness.value=n.roughness,n.roughnessMap&&(i.roughnessMap.value=n.roughnessMap,J(n.roughnessMap,i.roughnessMapTransform)),I.get(n).envMap&&(i.envMapIntensity.value=n.envMapIntensity)}function h(i,n,r){i.ior.value=n.ior,n.sheen>0&&(i.sheenColor.value.copy(n.sheenColor).multiplyScalar(n.sheen),i.sheenRoughness.value=n.sheenRoughness,n.sheenColorMap&&(i.sheenColorMap.value=n.sheenColorMap,J(n.sheenColorMap,i.sheenColorMapTransform)),n.sheenRoughnessMap&&(i.sheenRoughnessMap.value=n.sheenRoughnessMap,J(n.sheenRoughnessMap,i.sheenRoughnessMapTransform))),n.clearcoat>0&&(i.clearcoat.value=n.clearcoat,i.clearcoatRoughness.value=n.clearcoatRoughness,n.clearcoatMap&&(i.clearcoatMap.value=n.clearcoatMap,J(n.clearcoatMap,i.clearcoatMapTransform)),n.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap.value=n.clearcoatRoughnessMap,J(n.clearcoatRoughnessMap,i.clearcoatRoughnessMapTransform)),n.clearcoatNormalMap&&(i.clearcoatNormalMap.value=n.clearcoatNormalMap,J(n.clearcoatNormalMap,i.clearcoatNormalMapTransform),i.clearcoatNormalScale.value.copy(n.clearcoatNormalScale),n.side===bs&&i.clearcoatNormalScale.value.negate())),n.iridescence>0&&(i.iridescence.value=n.iridescence,i.iridescenceIOR.value=n.iridescenceIOR,i.iridescenceThicknessMinimum.value=n.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum.value=n.iridescenceThicknessRange[1],n.iridescenceMap&&(i.iridescenceMap.value=n.iridescenceMap,J(n.iridescenceMap,i.iridescenceMapTransform)),n.iridescenceThicknessMap&&(i.iridescenceThicknessMap.value=n.iridescenceThicknessMap,J(n.iridescenceThicknessMap,i.iridescenceThicknessMapTransform))),n.transmission>0&&(i.transmission.value=n.transmission,i.transmissionSamplerMap.value=r.texture,i.transmissionSamplerSize.value.set(r.width,r.height),n.transmissionMap&&(i.transmissionMap.value=n.transmissionMap,J(n.transmissionMap,i.transmissionMapTransform)),i.thickness.value=n.thickness,n.thicknessMap&&(i.thicknessMap.value=n.thicknessMap,J(n.thicknessMap,i.thicknessMapTransform)),i.attenuationDistance.value=n.attenuationDistance,i.attenuationColor.value.copy(n.attenuationColor)),n.anisotropy>0&&(i.anisotropyVector.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation)),n.anisotropyMap&&(i.anisotropyMap.value=n.anisotropyMap,J(n.anisotropyMap,i.anisotropyMapTransform))),i.specularIntensity.value=n.specularIntensity,i.specularColor.value.copy(n.specularColor),n.specularColorMap&&(i.specularColorMap.value=n.specularColorMap,J(n.specularColorMap,i.specularColorMapTransform)),n.specularIntensityMap&&(i.specularIntensityMap.value=n.specularIntensityMap,J(n.specularIntensityMap,i.specularIntensityMapTransform))}function o(i,n){n.matcap&&(i.matcap.value=n.matcap)}function t(i,n){const r=I.get(n).light;i.referencePosition.value.setFromMatrixPosition(r.matrixWorld),i.nearDistance.value=r.shadow.camera.near,i.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:ve,refreshMaterialUniforms:Ve}}function MT(be,I,J,ve){let Ve={},F={},L=[];const e=J.isWebGL2?be.getParameter(be.MAX_UNIFORM_BUFFER_BINDINGS):0;function T(r,s){const l=s.program;ve.uniformBlockBinding(r,l)}function b(r,s){let l=Ve[r.id];l===void 0&&(o(r),l=a(r),Ve[r.id]=l,r.addEventListener("dispose",i));const u=s.program;ve.updateUBOMapping(r,u);const d=I.render.frame;F[r.id]!==d&&(g(r),F[r.id]=d)}function a(r){const s=_();r.__bindingPointIndex=s;const l=be.createBuffer(),u=r.__size,d=r.usage;return be.bindBuffer(be.UNIFORM_BUFFER,l),be.bufferData(be.UNIFORM_BUFFER,u,d),be.bindBuffer(be.UNIFORM_BUFFER,null),be.bindBufferBase(be.UNIFORM_BUFFER,s,l),l}function _(){for(let r=0;r<e;r++)if(L.indexOf(r)===-1)return L.push(r),r;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(r){const s=Ve[r.id],l=r.uniforms,u=r.__cache;be.bindBuffer(be.UNIFORM_BUFFER,s);for(let d=0,c=l.length;d<c;d++){const w=l[d];if(h(w,d,u)===!0){const m=w.__offset,f=Array.isArray(w.value)?w.value:[w.value];let x=0;for(let y=0;y<f.length;y++){const v=f[y],M=t(v);typeof v=="number"?(w.__data[0]=v,be.bufferSubData(be.UNIFORM_BUFFER,m+x,w.__data)):v.isMatrix3?(w.__data[0]=v.elements[0],w.__data[1]=v.elements[1],w.__data[2]=v.elements[2],w.__data[3]=v.elements[0],w.__data[4]=v.elements[3],w.__data[5]=v.elements[4],w.__data[6]=v.elements[5],w.__data[7]=v.elements[0],w.__data[8]=v.elements[6],w.__data[9]=v.elements[7],w.__data[10]=v.elements[8],w.__data[11]=v.elements[0]):(v.toArray(w.__data,x),x+=M.storage/Float32Array.BYTES_PER_ELEMENT)}be.bufferSubData(be.UNIFORM_BUFFER,m,w.__data)}}be.bindBuffer(be.UNIFORM_BUFFER,null)}function h(r,s,l){const u=r.value;if(l[s]===void 0){if(typeof u=="number")l[s]=u;else{const d=Array.isArray(u)?u:[u],c=[];for(let w=0;w<d.length;w++)c.push(d[w].clone());l[s]=c}return!0}else if(typeof u=="number"){if(l[s]!==u)return l[s]=u,!0}else{const d=Array.isArray(l[s])?l[s]:[l[s]],c=Array.isArray(u)?u:[u];for(let w=0;w<d.length;w++){const m=d[w];if(m.equals(c[w])===!1)return m.copy(c[w]),!0}}return!1}function o(r){const s=r.uniforms;let l=0;const u=16;let d=0;for(let c=0,w=s.length;c<w;c++){const m=s[c],f={boundary:0,storage:0},x=Array.isArray(m.value)?m.value:[m.value];for(let y=0,v=x.length;y<v;y++){const M=x[y],p=t(M);f.boundary+=p.boundary,f.storage+=p.storage}if(m.__data=new Float32Array(f.storage/Float32Array.BYTES_PER_ELEMENT),m.__offset=l,c>0){d=l%u;const y=u-d;d!==0&&y-f.boundary<0&&(l+=u-d,m.__offset=l)}l+=f.storage}return d=l%u,d>0&&(l+=u-d),r.__size=l,r.__cache={},this}function t(r){const s={boundary:0,storage:0};return typeof r=="number"?(s.boundary=4,s.storage=4):r.isVector2?(s.boundary=8,s.storage=8):r.isVector3||r.isColor?(s.boundary=16,s.storage=12):r.isVector4?(s.boundary=16,s.storage=16):r.isMatrix3?(s.boundary=48,s.storage=48):r.isMatrix4?(s.boundary=64,s.storage=64):r.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",r),s}function i(r){const s=r.target;s.removeEventListener("dispose",i);const l=L.indexOf(s.__bindingPointIndex);L.splice(l,1),be.deleteBuffer(Ve[s.id]),delete Ve[s.id],delete F[s.id]}function n(){for(const r in Ve)be.deleteBuffer(Ve[r]);L=[],Ve={},F={}}return{bind:T,update:b,dispose:n}}function AT(){const be=id("canvas");return be.style.display="block",be}class Q1{constructor(I={}){const{canvas:J=AT(),context:ve=null,depth:Ve=!0,stencil:F=!0,alpha:L=!1,antialias:e=!1,premultipliedAlpha:T=!0,preserveDrawingBuffer:b=!1,powerPreference:a="default",failIfMajorPerformanceCaveat:_=!1}=I;this.isWebGLRenderer=!0;let g;ve!==null?g=ve.getContextAttributes().alpha:g=L;const h=new Uint32Array(4),o=new Int32Array(4);let t=null,i=null;const n=[],r=[];this.domElement=J,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ei,this._useLegacyLights=!1,this.toneMapping=Bu,this.toneMappingExposure=1;const s=this;let l=!1,u=0,d=0,c=null,w=-1,m=null;const f=new ma,x=new ma;let y=null;const v=new Vi(0);let M=0,p=J.width,S=J.height,A=1,k=null,C=null;const P=new ma(0,0,p,S),R=new ma(0,0,p,S);let O=!1;const X=new J0;let D=!1,V=!1,j=null;const B=new ja,W=new Kr,q=new Hn,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ee(){return c===null?A:1}let K=ve;function Y(Ke,De){for(let Be=0;Be<Ke.length;Be++){const Qe=Ke[Be],rt=J.getContext(Qe,De);if(rt!==null)return rt}return null}try{const Ke={alpha:!0,depth:Ve,stencil:F,antialias:e,premultipliedAlpha:T,preserveDrawingBuffer:b,powerPreference:a,failIfMajorPerformanceCaveat:_};if("setAttribute"in J&&J.setAttribute("data-engine",`three.js r${q0}`),J.addEventListener("webglcontextlost",je,!1),J.addEventListener("webglcontextrestored",Fe,!1),J.addEventListener("webglcontextcreationerror",Xe,!1),K===null){const De=["webgl2","webgl","experimental-webgl"];if(s.isWebGL1Renderer===!0&&De.shift(),K=Y(De,Ke),K===null)throw Y(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&K instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ke){throw console.error("THREE.WebGLRenderer: "+Ke.message),Ke}let $,ne,ae,se,ce,me,ye,Te,Ce,pe,fe,Oe,Se,Me,ue,le,ie,ge,Ae,we,Ne,He,de,Le;function Ee(){$=new D3(K),ne=new k3(K,$,I),$.init(ne),He=new yT(K,$,ne),ae=new gT(K,$,ne),se=new N3(K),ce=new nT,me=new vT(K,$,ae,ce,ne,He,se),ye=new C3(s),Te=new O3(s),Ce=new X2(K,ne),de=new S3(K,$,Ce,ne),pe=new z3(K,Ce,se,de),fe=new V3(K,pe,Ce,se),Ae=new j3(K,ne,me),le=new L3(ce),Oe=new tT(s,ye,Te,$,ne,de,le),Se=new TT(s,ce),Me=new iT,ue=new cT($,ne),ge=new A3(s,ye,Te,ae,fe,g,T),ie=new mT(s,fe,ne),Le=new MT(K,se,ne,ae),we=new E3(K,$,se,ne),Ne=new F3(K,$,se,ne),se.programs=Oe.programs,s.capabilities=ne,s.extensions=$,s.properties=ce,s.renderLists=Me,s.shadowMap=ie,s.state=ae,s.info=se}Ee();const Re=new wT(s,K);this.xr=Re,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const Ke=$.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){const Ke=$.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(Ke){Ke!==void 0&&(A=Ke,this.setSize(p,S,!1))},this.getSize=function(Ke){return Ke.set(p,S)},this.setSize=function(Ke,De,Be=!0){if(Re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}p=Ke,S=De,J.width=Math.floor(Ke*A),J.height=Math.floor(De*A),Be===!0&&(J.style.width=Ke+"px",J.style.height=De+"px"),this.setViewport(0,0,Ke,De)},this.getDrawingBufferSize=function(Ke){return Ke.set(p*A,S*A).floor()},this.setDrawingBufferSize=function(Ke,De,Be){p=Ke,S=De,A=Be,J.width=Math.floor(Ke*Be),J.height=Math.floor(De*Be),this.setViewport(0,0,Ke,De)},this.getCurrentViewport=function(Ke){return Ke.copy(f)},this.getViewport=function(Ke){return Ke.copy(P)},this.setViewport=function(Ke,De,Be,Qe){Ke.isVector4?P.set(Ke.x,Ke.y,Ke.z,Ke.w):P.set(Ke,De,Be,Qe),ae.viewport(f.copy(P).multiplyScalar(A).floor())},this.getScissor=function(Ke){return Ke.copy(R)},this.setScissor=function(Ke,De,Be,Qe){Ke.isVector4?R.set(Ke.x,Ke.y,Ke.z,Ke.w):R.set(Ke,De,Be,Qe),ae.scissor(x.copy(R).multiplyScalar(A).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(Ke){ae.setScissorTest(O=Ke)},this.setOpaqueSort=function(Ke){k=Ke},this.setTransparentSort=function(Ke){C=Ke},this.getClearColor=function(Ke){return Ke.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(Ke=!0,De=!0,Be=!0){let Qe=0;if(Ke){let rt=!1;if(c!==null){const vt=c.texture.format;rt=vt===P1||vt===C1||vt===L1}if(rt){const vt=c.texture.type,mt=vt===Uu||vt===zu||vt===Y0||vt===dc||vt===E1||vt===k1,xt=ge.getClearColor(),dt=ge.getClearAlpha(),Et=xt.r,pt=xt.g,gt=xt.b;mt?(h[0]=Et,h[1]=pt,h[2]=gt,h[3]=dt,K.clearBufferuiv(K.COLOR,0,h)):(o[0]=Et,o[1]=pt,o[2]=gt,o[3]=dt,K.clearBufferiv(K.COLOR,0,o))}else Qe|=K.COLOR_BUFFER_BIT}De&&(Qe|=K.DEPTH_BUFFER_BIT),Be&&(Qe|=K.STENCIL_BUFFER_BIT),K.clear(Qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){J.removeEventListener("webglcontextlost",je,!1),J.removeEventListener("webglcontextrestored",Fe,!1),J.removeEventListener("webglcontextcreationerror",Xe,!1),Me.dispose(),ue.dispose(),ce.dispose(),ye.dispose(),Te.dispose(),fe.dispose(),de.dispose(),Le.dispose(),Oe.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",wt),Re.removeEventListener("sessionend",ht),j&&(j.dispose(),j=null),ct.stop()};function je(Ke){Ke.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),l=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),l=!1;const Ke=se.autoReset,De=ie.enabled,Be=ie.autoUpdate,Qe=ie.needsUpdate,rt=ie.type;Ee(),se.autoReset=Ke,ie.enabled=De,ie.autoUpdate=Be,ie.needsUpdate=Qe,ie.type=rt}function Xe(Ke){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ke.statusMessage)}function Ze(Ke){const De=Ke.target;De.removeEventListener("dispose",Ze),at(De)}function at(Ke){lt(Ke),ce.remove(Ke)}function lt(Ke){const De=ce.get(Ke).programs;De!==void 0&&(De.forEach(function(Be){Oe.releaseProgram(Be)}),Ke.isShaderMaterial&&Oe.releaseShaderCache(Ke))}this.renderBufferDirect=function(Ke,De,Be,Qe,rt,vt){De===null&&(De=re);const mt=rt.isMesh&&rt.matrixWorld.determinant()<0,xt=Ye(Ke,De,Be,Qe,rt);ae.setMaterial(Qe,mt);let dt=Be.index,Et=1;if(Qe.wireframe===!0){if(dt=pe.getWireframeAttribute(Be),dt===void 0)return;Et=2}const pt=Be.drawRange,gt=Be.attributes.position;let Mt=pt.start*Et,Nt=(pt.start+pt.count)*Et;vt!==null&&(Mt=Math.max(Mt,vt.start*Et),Nt=Math.min(Nt,(vt.start+vt.count)*Et)),dt!==null?(Mt=Math.max(Mt,0),Nt=Math.min(Nt,dt.count)):gt!=null&&(Mt=Math.max(Mt,0),Nt=Math.min(Nt,gt.count));const Bt=Nt-Mt;if(Bt<0||Bt===1/0)return;de.setup(rt,Qe,xt,Be,dt);let Ut,Jt=we;if(dt!==null&&(Ut=Ce.get(dt),Jt=Ne,Jt.setIndex(Ut)),rt.isMesh)Qe.wireframe===!0?(ae.setLineWidth(Qe.wireframeLinewidth*ee()),Jt.setMode(K.LINES)):Jt.setMode(K.TRIANGLES);else if(rt.isLine){let Vt=Qe.linewidth;Vt===void 0&&(Vt=1),ae.setLineWidth(Vt*ee()),rt.isLineSegments?Jt.setMode(K.LINES):rt.isLineLoop?Jt.setMode(K.LINE_LOOP):Jt.setMode(K.LINE_STRIP)}else rt.isPoints?Jt.setMode(K.POINTS):rt.isSprite&&Jt.setMode(K.TRIANGLES);if(rt.isInstancedMesh)Jt.renderInstances(Mt,Bt,rt.count);else if(Be.isInstancedBufferGeometry){const Vt=Be._maxInstanceCount!==void 0?Be._maxInstanceCount:1/0,Qt=Math.min(Be.instanceCount,Vt);Jt.renderInstances(Mt,Bt,Qt)}else Jt.render(Mt,Bt)},this.compile=function(Ke,De){function Be(Qe,rt,vt){Qe.transparent===!0&&Qe.side===Gl&&Qe.forceSinglePass===!1?(Qe.side=bs,Qe.needsUpdate=!0,et(Qe,rt,vt),Qe.side=Hu,Qe.needsUpdate=!0,et(Qe,rt,vt),Qe.side=Gl):et(Qe,rt,vt)}i=ue.get(Ke),i.init(),r.push(i),Ke.traverseVisible(function(Qe){Qe.isLight&&Qe.layers.test(De.layers)&&(i.pushLight(Qe),Qe.castShadow&&i.pushShadow(Qe))}),i.setupLights(s._useLegacyLights),Ke.traverse(function(Qe){const rt=Qe.material;if(rt)if(Array.isArray(rt))for(let vt=0;vt<rt.length;vt++){const mt=rt[vt];Be(mt,Ke,Qe)}else Be(rt,Ke,Qe)}),r.pop(),i=null};let ot=null;function bt(Ke){ot&&ot(Ke)}function wt(){ct.stop()}function ht(){ct.start()}const ct=new Y1;ct.setAnimationLoop(bt),typeof self<"u"&&ct.setContext(self),this.setAnimationLoop=function(Ke){ot=Ke,Re.setAnimationLoop(Ke),Ke===null?ct.stop():ct.start()},Re.addEventListener("sessionstart",wt),Re.addEventListener("sessionend",ht),this.render=function(Ke,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(l===!0)return;Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),Re.enabled===!0&&Re.isPresenting===!0&&(Re.cameraAutoUpdate===!0&&Re.updateCamera(De),De=Re.getCamera()),Ke.isScene===!0&&Ke.onBeforeRender(s,Ke,De,c),i=ue.get(Ke,r.length),i.init(),r.push(i),B.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),X.setFromProjectionMatrix(B),V=this.localClippingEnabled,D=le.init(this.clippingPlanes,V),t=Me.get(Ke,n.length),t.init(),n.push(t),Tt(Ke,De,0,s.sortObjects),t.finish(),s.sortObjects===!0&&t.sort(k,C),this.info.render.frame++,D===!0&&le.beginShadows();const Be=i.state.shadowsArray;if(ie.render(Be,Ke,De),D===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),ge.render(t,Ke),i.setupLights(s._useLegacyLights),De.isArrayCamera){const Qe=De.cameras;for(let rt=0,vt=Qe.length;rt<vt;rt++){const mt=Qe[rt];Lt(t,Ke,mt,mt.viewport)}}else Lt(t,Ke,De);c!==null&&(me.updateMultisampleRenderTarget(c),me.updateRenderTargetMipmap(c)),Ke.isScene===!0&&Ke.onAfterRender(s,Ke,De),de.resetDefaultState(),w=-1,m=null,r.pop(),r.length>0?i=r[r.length-1]:i=null,n.pop(),n.length>0?t=n[n.length-1]:t=null};function Tt(Ke,De,Be,Qe){if(Ke.visible===!1)return;if(Ke.layers.test(De.layers)){if(Ke.isGroup)Be=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(De);else if(Ke.isLight)i.pushLight(Ke),Ke.castShadow&&i.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||X.intersectsSprite(Ke)){Qe&&q.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(B);const mt=fe.update(Ke),xt=Ke.material;xt.visible&&t.push(Ke,mt,xt,Be,q.z,null)}}else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(!Ke.frustumCulled||X.intersectsObject(Ke))){const mt=fe.update(Ke),xt=Ke.material;if(Qe&&(Ke.boundingSphere!==void 0?(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),q.copy(Ke.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),q.copy(mt.boundingSphere.center)),q.applyMatrix4(Ke.matrixWorld).applyMatrix4(B)),Array.isArray(xt)){const dt=mt.groups;for(let Et=0,pt=dt.length;Et<pt;Et++){const gt=dt[Et],Mt=xt[gt.materialIndex];Mt&&Mt.visible&&t.push(Ke,mt,Mt,Be,q.z,gt)}}else xt.visible&&t.push(Ke,mt,xt,Be,q.z,null)}}const vt=Ke.children;for(let mt=0,xt=vt.length;mt<xt;mt++)Tt(vt[mt],De,Be,Qe)}function Lt(Ke,De,Be,Qe){const rt=Ke.opaque,vt=Ke.transmissive,mt=Ke.transparent;i.setupLightsView(Be),D===!0&&le.setGlobalState(s.clippingPlanes,Be),vt.length>0&&kt(rt,vt,De,Be),Qe&&ae.viewport(f.copy(Qe)),rt.length>0&&Ot(rt,De,Be),vt.length>0&&Ot(vt,De,Be),mt.length>0&&Ot(mt,De,Be),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function kt(Ke,De,Be,Qe){const rt=ne.isWebGL2;j===null&&(j=new xc(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")?Fh:Uu,minFilter:zh,samples:rt?4:0})),s.getDrawingBufferSize(W),rt?j.setSize(W.x,W.y):j.setSize(rd(W.x),rd(W.y));const vt=s.getRenderTarget();s.setRenderTarget(j),s.getClearColor(v),M=s.getClearAlpha(),M<1&&s.setClearColor(16777215,.5),s.clear();const mt=s.toneMapping;s.toneMapping=Bu,Ot(Ke,Be,Qe),me.updateMultisampleRenderTarget(j),me.updateRenderTargetMipmap(j);let xt=!1;for(let dt=0,Et=De.length;dt<Et;dt++){const pt=De[dt],gt=pt.object,Mt=pt.geometry,Nt=pt.material,Bt=pt.group;if(Nt.side===Gl&&gt.layers.test(Qe.layers)){const Ut=Nt.side;Nt.side=bs,Nt.needsUpdate=!0,Pt(gt,Be,Qe,Mt,Nt,Bt),Nt.side=Ut,Nt.needsUpdate=!0,xt=!0}}xt===!0&&(me.updateMultisampleRenderTarget(j),me.updateRenderTargetMipmap(j)),s.setRenderTarget(vt),s.setClearColor(v,M),s.toneMapping=mt}function Ot(Ke,De,Be){const Qe=De.isScene===!0?De.overrideMaterial:null;for(let rt=0,vt=Ke.length;rt<vt;rt++){const mt=Ke[rt],xt=mt.object,dt=mt.geometry,Et=Qe===null?mt.material:Qe,pt=mt.group;xt.layers.test(Be.layers)&&Pt(xt,De,Be,dt,Et,pt)}}function Pt(Ke,De,Be,Qe,rt,vt){Ke.onBeforeRender(s,De,Be,Qe,rt,vt),Ke.modelViewMatrix.multiplyMatrices(Be.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),rt.onBeforeRender(s,De,Be,Qe,Ke,vt),rt.transparent===!0&&rt.side===Gl&&rt.forceSinglePass===!1?(rt.side=bs,rt.needsUpdate=!0,s.renderBufferDirect(Be,De,Qe,rt,Ke,vt),rt.side=Hu,rt.needsUpdate=!0,s.renderBufferDirect(Be,De,Qe,rt,Ke,vt),rt.side=Gl):s.renderBufferDirect(Be,De,Qe,rt,Ke,vt),Ke.onAfterRender(s,De,Be,Qe,rt,vt)}function et(Ke,De,Be){De.isScene!==!0&&(De=re);const Qe=ce.get(Ke),rt=i.state.lights,vt=i.state.shadowsArray,mt=rt.state.version,xt=Oe.getParameters(Ke,rt.state,vt,De,Be),dt=Oe.getProgramCacheKey(xt);let Et=Qe.programs;Qe.environment=Ke.isMeshStandardMaterial?De.environment:null,Qe.fog=De.fog,Qe.envMap=(Ke.isMeshStandardMaterial?Te:ye).get(Ke.envMap||Qe.environment),Et===void 0&&(Ke.addEventListener("dispose",Ze),Et=new Map,Qe.programs=Et);let pt=Et.get(dt);if(pt!==void 0){if(Qe.currentProgram===pt&&Qe.lightsStateVersion===mt)return nt(Ke,xt),pt}else xt.uniforms=Oe.getUniforms(Ke),Ke.onBuild(Be,xt,s),Ke.onBeforeCompile(xt,s),pt=Oe.acquireProgram(xt,dt),Et.set(dt,pt),Qe.uniforms=xt.uniforms;const gt=Qe.uniforms;(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(gt.clippingPlanes=le.uniform),nt(Ke,xt),Qe.needsLights=ut(Ke),Qe.lightsStateVersion=mt,Qe.needsLights&&(gt.ambientLightColor.value=rt.state.ambient,gt.lightProbe.value=rt.state.probe,gt.directionalLights.value=rt.state.directional,gt.directionalLightShadows.value=rt.state.directionalShadow,gt.spotLights.value=rt.state.spot,gt.spotLightShadows.value=rt.state.spotShadow,gt.rectAreaLights.value=rt.state.rectArea,gt.ltc_1.value=rt.state.rectAreaLTC1,gt.ltc_2.value=rt.state.rectAreaLTC2,gt.pointLights.value=rt.state.point,gt.pointLightShadows.value=rt.state.pointShadow,gt.hemisphereLights.value=rt.state.hemi,gt.directionalShadowMap.value=rt.state.directionalShadowMap,gt.directionalShadowMatrix.value=rt.state.directionalShadowMatrix,gt.spotShadowMap.value=rt.state.spotShadowMap,gt.spotLightMatrix.value=rt.state.spotLightMatrix,gt.spotLightMap.value=rt.state.spotLightMap,gt.pointShadowMap.value=rt.state.pointShadowMap,gt.pointShadowMatrix.value=rt.state.pointShadowMatrix);const Mt=pt.getUniforms(),Nt=Qp.seqWithValue(Mt.seq,gt);return Qe.currentProgram=pt,Qe.uniformsList=Nt,pt}function nt(Ke,De){const Be=ce.get(Ke);Be.outputColorSpace=De.outputColorSpace,Be.instancing=De.instancing,Be.instancingColor=De.instancingColor,Be.skinning=De.skinning,Be.morphTargets=De.morphTargets,Be.morphNormals=De.morphNormals,Be.morphColors=De.morphColors,Be.morphTargetsCount=De.morphTargetsCount,Be.numClippingPlanes=De.numClippingPlanes,Be.numIntersection=De.numClipIntersection,Be.vertexAlphas=De.vertexAlphas,Be.vertexTangents=De.vertexTangents,Be.toneMapping=De.toneMapping}function Ye(Ke,De,Be,Qe,rt){De.isScene!==!0&&(De=re),me.resetTextureUnits();const vt=De.fog,mt=Qe.isMeshStandardMaterial?De.environment:null,xt=c===null?s.outputColorSpace:c.isXRRenderTarget===!0?c.texture.colorSpace:ql,dt=(Qe.isMeshStandardMaterial?Te:ye).get(Qe.envMap||mt),Et=Qe.vertexColors===!0&&!!Be.attributes.color&&Be.attributes.color.itemSize===4,pt=!!Be.attributes.tangent&&(!!Qe.normalMap||Qe.anisotropy>0),gt=!!Be.morphAttributes.position,Mt=!!Be.morphAttributes.normal,Nt=!!Be.morphAttributes.color;let Bt=Bu;Qe.toneMapped&&(c===null||c.isXRRenderTarget===!0)&&(Bt=s.toneMapping);const Ut=Be.morphAttributes.position||Be.morphAttributes.normal||Be.morphAttributes.color,Jt=Ut!==void 0?Ut.length:0,Vt=ce.get(Qe),Qt=i.state.lights;if(D===!0&&(V===!0||Ke!==m)){const vn=Ke===m&&Qe.id===w;le.setState(Qe,Ke,vn)}let qt=!1;Qe.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==Qt.state.version||Vt.outputColorSpace!==xt||rt.isInstancedMesh&&Vt.instancing===!1||!rt.isInstancedMesh&&Vt.instancing===!0||rt.isSkinnedMesh&&Vt.skinning===!1||!rt.isSkinnedMesh&&Vt.skinning===!0||rt.isInstancedMesh&&Vt.instancingColor===!0&&rt.instanceColor===null||rt.isInstancedMesh&&Vt.instancingColor===!1&&rt.instanceColor!==null||Vt.envMap!==dt||Qe.fog===!0&&Vt.fog!==vt||Vt.numClippingPlanes!==void 0&&(Vt.numClippingPlanes!==le.numPlanes||Vt.numIntersection!==le.numIntersection)||Vt.vertexAlphas!==Et||Vt.vertexTangents!==pt||Vt.morphTargets!==gt||Vt.morphNormals!==Mt||Vt.morphColors!==Nt||Vt.toneMapping!==Bt||ne.isWebGL2===!0&&Vt.morphTargetsCount!==Jt)&&(qt=!0):(qt=!0,Vt.__version=Qe.version);let gn=Vt.currentProgram;qt===!0&&(gn=et(Qe,De,rt));let wn=!1,hn=!1,Xt=!1;const an=gn.getUniforms(),tn=Vt.uniforms;if(ae.useProgram(gn.program)&&(wn=!0,hn=!0,Xt=!0),Qe.id!==w&&(w=Qe.id,hn=!0),wn||m!==Ke){if(an.setValue(K,"projectionMatrix",Ke.projectionMatrix),ne.logarithmicDepthBuffer&&an.setValue(K,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),m!==Ke&&(m=Ke,hn=!0,Xt=!0),Qe.isShaderMaterial||Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshStandardMaterial||Qe.envMap){const vn=an.map.cameraPosition;vn!==void 0&&vn.setValue(K,q.setFromMatrixPosition(Ke.matrixWorld))}(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&an.setValue(K,"isOrthographic",Ke.isOrthographicCamera===!0),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial||Qe.isShadowMaterial||rt.isSkinnedMesh)&&an.setValue(K,"viewMatrix",Ke.matrixWorldInverse)}if(rt.isSkinnedMesh){an.setOptional(K,rt,"bindMatrix"),an.setOptional(K,rt,"bindMatrixInverse");const vn=rt.skeleton;vn&&(ne.floatVertexTextures?(vn.boneTexture===null&&vn.computeBoneTexture(),an.setValue(K,"boneTexture",vn.boneTexture,me),an.setValue(K,"boneTextureSize",vn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const cn=Be.morphAttributes;if((cn.position!==void 0||cn.normal!==void 0||cn.color!==void 0&&ne.isWebGL2===!0)&&Ae.update(rt,Be,gn),(hn||Vt.receiveShadow!==rt.receiveShadow)&&(Vt.receiveShadow=rt.receiveShadow,an.setValue(K,"receiveShadow",rt.receiveShadow)),Qe.isMeshGouraudMaterial&&Qe.envMap!==null&&(tn.envMap.value=dt,tn.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),hn&&(an.setValue(K,"toneMappingExposure",s.toneMappingExposure),Vt.needsLights&&tt(tn,Xt),vt&&Qe.fog===!0&&Se.refreshFogUniforms(tn,vt),Se.refreshMaterialUniforms(tn,Qe,A,S,j),Qp.upload(K,Vt.uniformsList,tn,me)),Qe.isShaderMaterial&&Qe.uniformsNeedUpdate===!0&&(Qp.upload(K,Vt.uniformsList,tn,me),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&an.setValue(K,"center",rt.center),an.setValue(K,"modelViewMatrix",rt.modelViewMatrix),an.setValue(K,"normalMatrix",rt.normalMatrix),an.setValue(K,"modelMatrix",rt.matrixWorld),Qe.isShaderMaterial||Qe.isRawShaderMaterial){const vn=Qe.uniformsGroups;for(let yn=0,Pn=vn.length;yn<Pn;yn++)if(ne.isWebGL2){const In=vn[yn];Le.update(In,gn),Le.bind(In,gn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return gn}function tt(Ke,De){Ke.ambientLightColor.needsUpdate=De,Ke.lightProbe.needsUpdate=De,Ke.directionalLights.needsUpdate=De,Ke.directionalLightShadows.needsUpdate=De,Ke.pointLights.needsUpdate=De,Ke.pointLightShadows.needsUpdate=De,Ke.spotLights.needsUpdate=De,Ke.spotLightShadows.needsUpdate=De,Ke.rectAreaLights.needsUpdate=De,Ke.hemisphereLights.needsUpdate=De}function ut(Ke){return Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0}this.getActiveCubeFace=function(){return u},this.getActiveMipmapLevel=function(){return d},this.getRenderTarget=function(){return c},this.setRenderTargetTextures=function(Ke,De,Be){ce.get(Ke.texture).__webglTexture=De,ce.get(Ke.depthTexture).__webglTexture=Be;const Qe=ce.get(Ke);Qe.__hasExternalTextures=!0,Qe.__hasExternalTextures&&(Qe.__autoAllocateDepthBuffer=Be===void 0,Qe.__autoAllocateDepthBuffer||$.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Qe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ke,De){const Be=ce.get(Ke);Be.__webglFramebuffer=De,Be.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(Ke,De=0,Be=0){c=Ke,u=De,d=Be;let Qe=!0,rt=null,vt=!1,mt=!1;if(Ke){const dt=ce.get(Ke);dt.__useDefaultFramebuffer!==void 0?(ae.bindFramebuffer(K.FRAMEBUFFER,null),Qe=!1):dt.__webglFramebuffer===void 0?me.setupRenderTarget(Ke):dt.__hasExternalTextures&&me.rebindTextures(Ke,ce.get(Ke.texture).__webglTexture,ce.get(Ke.depthTexture).__webglTexture);const Et=Ke.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(mt=!0);const pt=ce.get(Ke).__webglFramebuffer;Ke.isWebGLCubeRenderTarget?(Array.isArray(pt[De])?rt=pt[De][Be]:rt=pt[De],vt=!0):ne.isWebGL2&&Ke.samples>0&&me.useMultisampledRTT(Ke)===!1?rt=ce.get(Ke).__webglMultisampledFramebuffer:Array.isArray(pt)?rt=pt[Be]:rt=pt,f.copy(Ke.viewport),x.copy(Ke.scissor),y=Ke.scissorTest}else f.copy(P).multiplyScalar(A).floor(),x.copy(R).multiplyScalar(A).floor(),y=O;if(ae.bindFramebuffer(K.FRAMEBUFFER,rt)&&ne.drawBuffers&&Qe&&ae.drawBuffers(Ke,rt),ae.viewport(f),ae.scissor(x),ae.setScissorTest(y),vt){const dt=ce.get(Ke.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+De,dt.__webglTexture,Be)}else if(mt){const dt=ce.get(Ke.texture),Et=De||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,dt.__webglTexture,Be||0,Et)}w=-1},this.readRenderTargetPixels=function(Ke,De,Be,Qe,rt,vt,mt){if(!(Ke&&Ke.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xt=ce.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&mt!==void 0&&(xt=xt[mt]),xt){ae.bindFramebuffer(K.FRAMEBUFFER,xt);try{const dt=Ke.texture,Et=dt.format,pt=dt.type;if(Et!==kl&&He.convert(Et)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=pt===Fh&&($.has("EXT_color_buffer_half_float")||ne.isWebGL2&&$.has("EXT_color_buffer_float"));if(pt!==Uu&&He.convert(pt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(pt===Fu&&(ne.isWebGL2||$.has("OES_texture_float")||$.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=Ke.width-Qe&&Be>=0&&Be<=Ke.height-rt&&K.readPixels(De,Be,Qe,rt,He.convert(Et),He.convert(pt),vt)}finally{const dt=c!==null?ce.get(c).__webglFramebuffer:null;ae.bindFramebuffer(K.FRAMEBUFFER,dt)}}},this.copyFramebufferToTexture=function(Ke,De,Be=0){const Qe=Math.pow(2,-Be),rt=Math.floor(De.image.width*Qe),vt=Math.floor(De.image.height*Qe);me.setTexture2D(De,0),K.copyTexSubImage2D(K.TEXTURE_2D,Be,0,0,Ke.x,Ke.y,rt,vt),ae.unbindTexture()},this.copyTextureToTexture=function(Ke,De,Be,Qe=0){const rt=De.image.width,vt=De.image.height,mt=He.convert(Be.format),xt=He.convert(Be.type);me.setTexture2D(Be,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Be.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Be.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Be.unpackAlignment),De.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Qe,Ke.x,Ke.y,rt,vt,mt,xt,De.image.data):De.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Qe,Ke.x,Ke.y,De.mipmaps[0].width,De.mipmaps[0].height,mt,De.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,Qe,Ke.x,Ke.y,mt,xt,De.image),Qe===0&&Be.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(Ke,De,Be,Qe,rt=0){if(s.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const vt=Ke.max.x-Ke.min.x+1,mt=Ke.max.y-Ke.min.y+1,xt=Ke.max.z-Ke.min.z+1,dt=He.convert(Qe.format),Et=He.convert(Qe.type);let pt;if(Qe.isData3DTexture)me.setTexture3D(Qe,0),pt=K.TEXTURE_3D;else if(Qe.isDataArrayTexture)me.setTexture2DArray(Qe,0),pt=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Qe.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qe.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Qe.unpackAlignment);const gt=K.getParameter(K.UNPACK_ROW_LENGTH),Mt=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Nt=K.getParameter(K.UNPACK_SKIP_PIXELS),Bt=K.getParameter(K.UNPACK_SKIP_ROWS),Ut=K.getParameter(K.UNPACK_SKIP_IMAGES),Jt=Be.isCompressedTexture?Be.mipmaps[0]:Be.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,Jt.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Jt.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Ke.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,Ke.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Ke.min.z),Be.isDataTexture||Be.isData3DTexture?K.texSubImage3D(pt,rt,De.x,De.y,De.z,vt,mt,xt,dt,Et,Jt.data):Be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(pt,rt,De.x,De.y,De.z,vt,mt,xt,dt,Jt.data)):K.texSubImage3D(pt,rt,De.x,De.y,De.z,vt,mt,xt,dt,Et,Jt),K.pixelStorei(K.UNPACK_ROW_LENGTH,gt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Mt),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Nt),K.pixelStorei(K.UNPACK_SKIP_ROWS,Bt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Ut),rt===0&&Qe.generateMipmaps&&K.generateMipmap(pt),ae.unbindTexture()},this.initTexture=function(Ke){Ke.isCubeTexture?me.setTextureCube(Ke,0):Ke.isData3DTexture?me.setTexture3D(Ke,0):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?me.setTexture2DArray(Ke,0):me.setTexture2D(Ke,0),ae.unbindTexture()},this.resetState=function(){u=0,d=0,c=null,ae.reset(),de.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return mu}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(I){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!I}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ei?gc:R1}set outputEncoding(I){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=I===gc?ei:ql}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(I){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=I}}class ST extends Q1{}ST.prototype.isWebGL1Renderer=!0;class ET extends Io{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(I,J){return super.copy(I,J),I.background!==null&&(this.background=I.background.clone()),I.environment!==null&&(this.environment=I.environment.clone()),I.fog!==null&&(this.fog=I.fog.clone()),this.backgroundBlurriness=I.backgroundBlurriness,this.backgroundIntensity=I.backgroundIntensity,I.overrideMaterial!==null&&(this.overrideMaterial=I.overrideMaterial.clone()),this.matrixAutoUpdate=I.matrixAutoUpdate,this}toJSON(I){const J=super.toJSON(I);return this.fog!==null&&(J.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(J.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(J.object.backgroundIntensity=this.backgroundIntensity),J}}class kT extends Uh{constructor(I){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Vi(16777215),this.specular=new Vi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=I1,this.normalScale=new Kr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(I)}copy(I){return super.copy(I),this.color.copy(I.color),this.specular.copy(I.specular),this.shininess=I.shininess,this.map=I.map,this.lightMap=I.lightMap,this.lightMapIntensity=I.lightMapIntensity,this.aoMap=I.aoMap,this.aoMapIntensity=I.aoMapIntensity,this.emissive.copy(I.emissive),this.emissiveMap=I.emissiveMap,this.emissiveIntensity=I.emissiveIntensity,this.bumpMap=I.bumpMap,this.bumpScale=I.bumpScale,this.normalMap=I.normalMap,this.normalMapType=I.normalMapType,this.normalScale.copy(I.normalScale),this.displacementMap=I.displacementMap,this.displacementScale=I.displacementScale,this.displacementBias=I.displacementBias,this.specularMap=I.specularMap,this.alphaMap=I.alphaMap,this.envMap=I.envMap,this.combine=I.combine,this.reflectivity=I.reflectivity,this.refractionRatio=I.refractionRatio,this.wireframe=I.wireframe,this.wireframeLinewidth=I.wireframeLinewidth,this.wireframeLinecap=I.wireframeLinecap,this.wireframeLinejoin=I.wireframeLinejoin,this.flatShading=I.flatShading,this.fog=I.fog,this}}class em extends Io{constructor(I,J=1){super(),this.isLight=!0,this.type="Light",this.color=new Vi(I),this.intensity=J}dispose(){}copy(I,J){return super.copy(I,J),this.color.copy(I.color),this.intensity=I.intensity,this}toJSON(I){const J=super.toJSON(I);return J.object.color=this.color.getHex(),J.object.intensity=this.intensity,this.groundColor!==void 0&&(J.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(J.object.distance=this.distance),this.angle!==void 0&&(J.object.angle=this.angle),this.decay!==void 0&&(J.object.decay=this.decay),this.penumbra!==void 0&&(J.object.penumbra=this.penumbra),this.shadow!==void 0&&(J.object.shadow=this.shadow.toJSON()),J}}const k0=new ja,e1=new Hn,t1=new Hn;class ey{constructor(I){this.camera=I,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Kr(512,512),this.map=null,this.mapPass=null,this.matrix=new ja,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new J0,this._frameExtents=new Kr(1,1),this._viewportCount=1,this._viewports=[new ma(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(I){const J=this.camera,ve=this.matrix;e1.setFromMatrixPosition(I.matrixWorld),J.position.copy(e1),t1.setFromMatrixPosition(I.target.matrixWorld),J.lookAt(t1),J.updateMatrixWorld(),k0.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k0),ve.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ve.multiply(k0)}getViewport(I){return this._viewports[I]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(I){return this.camera=I.camera.clone(),this.bias=I.bias,this.radius=I.radius,this.mapSize.copy(I.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const I={};return this.bias!==0&&(I.bias=this.bias),this.normalBias!==0&&(I.normalBias=this.normalBias),this.radius!==1&&(I.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(I.mapSize=this.mapSize.toArray()),I.camera=this.camera.toJSON(!1).object,delete I.camera.matrix,I}}class LT extends ey{constructor(){super(new xs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(I){const J=this.camera,ve=Pf*2*I.angle*this.focus,Ve=this.mapSize.width/this.mapSize.height,F=I.distance||J.far;(ve!==J.fov||Ve!==J.aspect||F!==J.far)&&(J.fov=ve,J.aspect=Ve,J.far=F,J.updateProjectionMatrix()),super.updateMatrices(I)}copy(I){return super.copy(I),this.focus=I.focus,this}}class CT extends em{constructor(I,J,ve=0,Ve=Math.PI/3,F=0,L=2){super(I,J),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Io.DEFAULT_UP),this.updateMatrix(),this.target=new Io,this.distance=ve,this.angle=Ve,this.penumbra=F,this.decay=L,this.map=null,this.shadow=new LT}get power(){return this.intensity*Math.PI}set power(I){this.intensity=I/Math.PI}dispose(){this.shadow.dispose()}copy(I,J){return super.copy(I,J),this.distance=I.distance,this.angle=I.angle,this.penumbra=I.penumbra,this.decay=I.decay,this.target=I.target.clone(),this.shadow=I.shadow.clone(),this}}const n1=new ja,wh=new Hn,L0=new Hn;class PT extends ey{constructor(){super(new xs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Kr(4,2),this._viewportCount=6,this._viewports=[new ma(2,1,1,1),new ma(0,1,1,1),new ma(3,1,1,1),new ma(1,1,1,1),new ma(3,0,1,1),new ma(1,0,1,1)],this._cubeDirections=[new Hn(1,0,0),new Hn(-1,0,0),new Hn(0,0,1),new Hn(0,0,-1),new Hn(0,1,0),new Hn(0,-1,0)],this._cubeUps=[new Hn(0,1,0),new Hn(0,1,0),new Hn(0,1,0),new Hn(0,1,0),new Hn(0,0,1),new Hn(0,0,-1)]}updateMatrices(I,J=0){const ve=this.camera,Ve=this.matrix,F=I.distance||ve.far;F!==ve.far&&(ve.far=F,ve.updateProjectionMatrix()),wh.setFromMatrixPosition(I.matrixWorld),ve.position.copy(wh),L0.copy(ve.position),L0.add(this._cubeDirections[J]),ve.up.copy(this._cubeUps[J]),ve.lookAt(L0),ve.updateMatrixWorld(),Ve.makeTranslation(-wh.x,-wh.y,-wh.z),n1.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n1)}}class RT extends em{constructor(I,J,ve=0,Ve=2){super(I,J),this.isPointLight=!0,this.type="PointLight",this.distance=ve,this.decay=Ve,this.shadow=new PT}get power(){return this.intensity*4*Math.PI}set power(I){this.intensity=I/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(I,J){return super.copy(I,J),this.distance=I.distance,this.decay=I.decay,this.shadow=I.shadow.clone(),this}}class IT extends em{constructor(I,J){super(I,J),this.isAmbientLight=!0,this.type="AmbientLight"}}class r1{constructor(I=1,J=0,ve=0){return this.radius=I,this.phi=J,this.theta=ve,this}set(I,J,ve){return this.radius=I,this.phi=J,this.theta=ve,this}copy(I){return this.radius=I.radius,this.phi=I.phi,this.theta=I.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(I){return this.setFromCartesianCoords(I.x,I.y,I.z)}setFromCartesianCoords(I,J,ve){return this.radius=Math.sqrt(I*I+J*J+ve*ve),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(I,ve),this.phi=Math.acos(Co(J/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q0);const i1={type:"change"},C0={type:"start"},a1={type:"end"},Jp=new B1,o1=new Du,OT=Math.cos(70*y2.DEG2RAD);class DT extends Ac{constructor(I,J){super(),this.object=I,this.domElement=J,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Hn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qc.ROTATE,MIDDLE:Qc.DOLLY,RIGHT:Qc.PAN},this.touches={ONE:ef.ROTATE,TWO:ef.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return e.phi},this.getAzimuthalAngle=function(){return e.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",fe),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",fe),this._domElementKeyEvents=null},this.saveState=function(){ve.target0.copy(ve.target),ve.position0.copy(ve.object.position),ve.zoom0=ve.object.zoom},this.reset=function(){ve.target.copy(ve.target0),ve.object.position.copy(ve.position0),ve.object.zoom=ve.zoom0,ve.object.updateProjectionMatrix(),ve.dispatchEvent(i1),ve.update(),F=Ve.NONE},this.update=function(){const Ae=new Hn,we=new _c().setFromUnitVectors(I.up,new Hn(0,1,0)),Ne=we.clone().invert(),He=new Hn,de=new _c,Le=new Hn,Ee=2*Math.PI;return function(){const je=ve.object.position;Ae.copy(je).sub(ve.target),Ae.applyQuaternion(we),e.setFromVector3(Ae),ve.autoRotate&&F===Ve.NONE&&x(m()),ve.enableDamping?(e.theta+=T.theta*ve.dampingFactor,e.phi+=T.phi*ve.dampingFactor):(e.theta+=T.theta,e.phi+=T.phi);let Fe=ve.minAzimuthAngle,Xe=ve.maxAzimuthAngle;isFinite(Fe)&&isFinite(Xe)&&(Fe<-Math.PI?Fe+=Ee:Fe>Math.PI&&(Fe-=Ee),Xe<-Math.PI?Xe+=Ee:Xe>Math.PI&&(Xe-=Ee),Fe<=Xe?e.theta=Math.max(Fe,Math.min(Xe,e.theta)):e.theta=e.theta>(Fe+Xe)/2?Math.max(Fe,e.theta):Math.min(Xe,e.theta)),e.phi=Math.max(ve.minPolarAngle,Math.min(ve.maxPolarAngle,e.phi)),e.makeSafe(),ve.enableDamping===!0?ve.target.addScaledVector(a,ve.dampingFactor):ve.target.add(a),ve.zoomToCursor&&d||ve.object.isOrthographicCamera?e.radius=C(e.radius):e.radius=C(e.radius*b),Ae.setFromSpherical(e),Ae.applyQuaternion(Ne),je.copy(ve.target).add(Ae),ve.object.lookAt(ve.target),ve.enableDamping===!0?(T.theta*=1-ve.dampingFactor,T.phi*=1-ve.dampingFactor,a.multiplyScalar(1-ve.dampingFactor)):(T.set(0,0,0),a.set(0,0,0));let Ze=!1;if(ve.zoomToCursor&&d){let at=null;if(ve.object.isPerspectiveCamera){const lt=Ae.length();at=C(lt*b);const ot=lt-at;ve.object.position.addScaledVector(l,ot),ve.object.updateMatrixWorld()}else if(ve.object.isOrthographicCamera){const lt=new Hn(u.x,u.y,0);lt.unproject(ve.object),ve.object.zoom=Math.max(ve.minZoom,Math.min(ve.maxZoom,ve.object.zoom/b)),ve.object.updateProjectionMatrix(),Ze=!0;const ot=new Hn(u.x,u.y,0);ot.unproject(ve.object),ve.object.position.sub(ot).add(lt),ve.object.updateMatrixWorld(),at=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),ve.zoomToCursor=!1;at!==null&&(this.screenSpacePanning?ve.target.set(0,0,-1).transformDirection(ve.object.matrix).multiplyScalar(at).add(ve.object.position):(Jp.origin.copy(ve.object.position),Jp.direction.set(0,0,-1).transformDirection(ve.object.matrix),Math.abs(ve.object.up.dot(Jp.direction))<OT?I.lookAt(ve.target):(o1.setFromNormalAndCoplanarPoint(ve.object.up,ve.target),Jp.intersectPlane(o1,ve.target))))}else ve.object.isOrthographicCamera&&(ve.object.zoom=Math.max(ve.minZoom,Math.min(ve.maxZoom,ve.object.zoom/b)),ve.object.updateProjectionMatrix(),Ze=!0);return b=1,d=!1,Ze||He.distanceToSquared(ve.object.position)>L||8*(1-de.dot(ve.object.quaternion))>L||Le.distanceToSquared(ve.target)>0?(ve.dispatchEvent(i1),He.copy(ve.object.position),de.copy(ve.object.quaternion),Le.copy(ve.target),Ze=!1,!0):!1}}(),this.dispose=function(){ve.domElement.removeEventListener("contextmenu",Me),ve.domElement.removeEventListener("pointerdown",ce),ve.domElement.removeEventListener("pointercancel",ye),ve.domElement.removeEventListener("wheel",pe),ve.domElement.removeEventListener("pointermove",me),ve.domElement.removeEventListener("pointerup",ye),ve._domElementKeyEvents!==null&&(ve._domElementKeyEvents.removeEventListener("keydown",fe),ve._domElementKeyEvents=null)};const ve=this,Ve={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let F=Ve.NONE;const L=1e-6,e=new r1,T=new r1;let b=1;const a=new Hn,_=new Kr,g=new Kr,h=new Kr,o=new Kr,t=new Kr,i=new Kr,n=new Kr,r=new Kr,s=new Kr,l=new Hn,u=new Kr;let d=!1;const c=[],w={};function m(){return 2*Math.PI/60/60*ve.autoRotateSpeed}function f(){return Math.pow(.95,ve.zoomSpeed)}function x(Ae){T.theta-=Ae}function y(Ae){T.phi-=Ae}const v=function(){const Ae=new Hn;return function(Ne,He){Ae.setFromMatrixColumn(He,0),Ae.multiplyScalar(-Ne),a.add(Ae)}}(),M=function(){const Ae=new Hn;return function(Ne,He){ve.screenSpacePanning===!0?Ae.setFromMatrixColumn(He,1):(Ae.setFromMatrixColumn(He,0),Ae.crossVectors(ve.object.up,Ae)),Ae.multiplyScalar(Ne),a.add(Ae)}}(),p=function(){const Ae=new Hn;return function(Ne,He){const de=ve.domElement;if(ve.object.isPerspectiveCamera){const Le=ve.object.position;Ae.copy(Le).sub(ve.target);let Ee=Ae.length();Ee*=Math.tan(ve.object.fov/2*Math.PI/180),v(2*Ne*Ee/de.clientHeight,ve.object.matrix),M(2*He*Ee/de.clientHeight,ve.object.matrix)}else ve.object.isOrthographicCamera?(v(Ne*(ve.object.right-ve.object.left)/ve.object.zoom/de.clientWidth,ve.object.matrix),M(He*(ve.object.top-ve.object.bottom)/ve.object.zoom/de.clientHeight,ve.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),ve.enablePan=!1)}}();function S(Ae){ve.object.isPerspectiveCamera||ve.object.isOrthographicCamera?b/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ve.enableZoom=!1)}function A(Ae){ve.object.isPerspectiveCamera||ve.object.isOrthographicCamera?b*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ve.enableZoom=!1)}function k(Ae){if(!ve.zoomToCursor)return;d=!0;const we=ve.domElement.getBoundingClientRect(),Ne=Ae.clientX-we.left,He=Ae.clientY-we.top,de=we.width,Le=we.height;u.x=Ne/de*2-1,u.y=-(He/Le)*2+1,l.set(u.x,u.y,1).unproject(I).sub(I.position).normalize()}function C(Ae){return Math.max(ve.minDistance,Math.min(ve.maxDistance,Ae))}function P(Ae){_.set(Ae.clientX,Ae.clientY)}function R(Ae){k(Ae),n.set(Ae.clientX,Ae.clientY)}function O(Ae){o.set(Ae.clientX,Ae.clientY)}function X(Ae){g.set(Ae.clientX,Ae.clientY),h.subVectors(g,_).multiplyScalar(ve.rotateSpeed);const we=ve.domElement;x(2*Math.PI*h.x/we.clientHeight),y(2*Math.PI*h.y/we.clientHeight),_.copy(g),ve.update()}function D(Ae){r.set(Ae.clientX,Ae.clientY),s.subVectors(r,n),s.y>0?S(f()):s.y<0&&A(f()),n.copy(r),ve.update()}function V(Ae){t.set(Ae.clientX,Ae.clientY),i.subVectors(t,o).multiplyScalar(ve.panSpeed),p(i.x,i.y),o.copy(t),ve.update()}function j(Ae){k(Ae),Ae.deltaY<0?A(f()):Ae.deltaY>0&&S(f()),ve.update()}function B(Ae){let we=!1;switch(Ae.code){case ve.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?y(2*Math.PI*ve.rotateSpeed/ve.domElement.clientHeight):p(0,ve.keyPanSpeed),we=!0;break;case ve.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?y(-2*Math.PI*ve.rotateSpeed/ve.domElement.clientHeight):p(0,-ve.keyPanSpeed),we=!0;break;case ve.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?x(2*Math.PI*ve.rotateSpeed/ve.domElement.clientHeight):p(ve.keyPanSpeed,0),we=!0;break;case ve.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?x(-2*Math.PI*ve.rotateSpeed/ve.domElement.clientHeight):p(-ve.keyPanSpeed,0),we=!0;break}we&&(Ae.preventDefault(),ve.update())}function W(){if(c.length===1)_.set(c[0].pageX,c[0].pageY);else{const Ae=.5*(c[0].pageX+c[1].pageX),we=.5*(c[0].pageY+c[1].pageY);_.set(Ae,we)}}function q(){if(c.length===1)o.set(c[0].pageX,c[0].pageY);else{const Ae=.5*(c[0].pageX+c[1].pageX),we=.5*(c[0].pageY+c[1].pageY);o.set(Ae,we)}}function re(){const Ae=c[0].pageX-c[1].pageX,we=c[0].pageY-c[1].pageY,Ne=Math.sqrt(Ae*Ae+we*we);n.set(0,Ne)}function ee(){ve.enableZoom&&re(),ve.enablePan&&q()}function K(){ve.enableZoom&&re(),ve.enableRotate&&W()}function Y(Ae){if(c.length==1)g.set(Ae.pageX,Ae.pageY);else{const Ne=ge(Ae),He=.5*(Ae.pageX+Ne.x),de=.5*(Ae.pageY+Ne.y);g.set(He,de)}h.subVectors(g,_).multiplyScalar(ve.rotateSpeed);const we=ve.domElement;x(2*Math.PI*h.x/we.clientHeight),y(2*Math.PI*h.y/we.clientHeight),_.copy(g)}function $(Ae){if(c.length===1)t.set(Ae.pageX,Ae.pageY);else{const we=ge(Ae),Ne=.5*(Ae.pageX+we.x),He=.5*(Ae.pageY+we.y);t.set(Ne,He)}i.subVectors(t,o).multiplyScalar(ve.panSpeed),p(i.x,i.y),o.copy(t)}function ne(Ae){const we=ge(Ae),Ne=Ae.pageX-we.x,He=Ae.pageY-we.y,de=Math.sqrt(Ne*Ne+He*He);r.set(0,de),s.set(0,Math.pow(r.y/n.y,ve.zoomSpeed)),S(s.y),n.copy(r)}function ae(Ae){ve.enableZoom&&ne(Ae),ve.enablePan&&$(Ae)}function se(Ae){ve.enableZoom&&ne(Ae),ve.enableRotate&&Y(Ae)}function ce(Ae){ve.enabled!==!1&&(c.length===0&&(ve.domElement.setPointerCapture(Ae.pointerId),ve.domElement.addEventListener("pointermove",me),ve.domElement.addEventListener("pointerup",ye)),ue(Ae),Ae.pointerType==="touch"?Oe(Ae):Te(Ae))}function me(Ae){ve.enabled!==!1&&(Ae.pointerType==="touch"?Se(Ae):Ce(Ae))}function ye(Ae){le(Ae),c.length===0&&(ve.domElement.releasePointerCapture(Ae.pointerId),ve.domElement.removeEventListener("pointermove",me),ve.domElement.removeEventListener("pointerup",ye)),ve.dispatchEvent(a1),F=Ve.NONE}function Te(Ae){let we;switch(Ae.button){case 0:we=ve.mouseButtons.LEFT;break;case 1:we=ve.mouseButtons.MIDDLE;break;case 2:we=ve.mouseButtons.RIGHT;break;default:we=-1}switch(we){case Qc.DOLLY:if(ve.enableZoom===!1)return;R(Ae),F=Ve.DOLLY;break;case Qc.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(ve.enablePan===!1)return;O(Ae),F=Ve.PAN}else{if(ve.enableRotate===!1)return;P(Ae),F=Ve.ROTATE}break;case Qc.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(ve.enableRotate===!1)return;P(Ae),F=Ve.ROTATE}else{if(ve.enablePan===!1)return;O(Ae),F=Ve.PAN}break;default:F=Ve.NONE}F!==Ve.NONE&&ve.dispatchEvent(C0)}function Ce(Ae){switch(F){case Ve.ROTATE:if(ve.enableRotate===!1)return;X(Ae);break;case Ve.DOLLY:if(ve.enableZoom===!1)return;D(Ae);break;case Ve.PAN:if(ve.enablePan===!1)return;V(Ae);break}}function pe(Ae){ve.enabled===!1||ve.enableZoom===!1||F!==Ve.NONE||(Ae.preventDefault(),ve.dispatchEvent(C0),j(Ae),ve.dispatchEvent(a1))}function fe(Ae){ve.enabled===!1||ve.enablePan===!1||B(Ae)}function Oe(Ae){switch(ie(Ae),c.length){case 1:switch(ve.touches.ONE){case ef.ROTATE:if(ve.enableRotate===!1)return;W(),F=Ve.TOUCH_ROTATE;break;case ef.PAN:if(ve.enablePan===!1)return;q(),F=Ve.TOUCH_PAN;break;default:F=Ve.NONE}break;case 2:switch(ve.touches.TWO){case ef.DOLLY_PAN:if(ve.enableZoom===!1&&ve.enablePan===!1)return;ee(),F=Ve.TOUCH_DOLLY_PAN;break;case ef.DOLLY_ROTATE:if(ve.enableZoom===!1&&ve.enableRotate===!1)return;K(),F=Ve.TOUCH_DOLLY_ROTATE;break;default:F=Ve.NONE}break;default:F=Ve.NONE}F!==Ve.NONE&&ve.dispatchEvent(C0)}function Se(Ae){switch(ie(Ae),F){case Ve.TOUCH_ROTATE:if(ve.enableRotate===!1)return;Y(Ae),ve.update();break;case Ve.TOUCH_PAN:if(ve.enablePan===!1)return;$(Ae),ve.update();break;case Ve.TOUCH_DOLLY_PAN:if(ve.enableZoom===!1&&ve.enablePan===!1)return;ae(Ae),ve.update();break;case Ve.TOUCH_DOLLY_ROTATE:if(ve.enableZoom===!1&&ve.enableRotate===!1)return;se(Ae),ve.update();break;default:F=Ve.NONE}}function Me(Ae){ve.enabled!==!1&&Ae.preventDefault()}function ue(Ae){c.push(Ae)}function le(Ae){delete w[Ae.pointerId];for(let we=0;we<c.length;we++)if(c[we].pointerId==Ae.pointerId){c.splice(we,1);return}}function ie(Ae){let we=w[Ae.pointerId];we===void 0&&(we=new Kr,w[Ae.pointerId]=we),we.set(Ae.pageX,Ae.pageY)}function ge(Ae){const we=Ae.pointerId===c[0].pointerId?c[1]:c[0];return w[we.pointerId]}ve.domElement.addEventListener("contextmenu",Me),ve.domElement.addEventListener("pointerdown",ce),ve.domElement.addEventListener("pointercancel",ye),ve.domElement.addEventListener("wheel",pe,{passive:!1}),this.update()}}const ju=new ET,Gu=new xs(75,window.innerWidth/window.innerHeight,.1,2e3);let ty,ad,If=[];Gu.position.z=100;Gu.lookAt(new Hn(0,0,0));const ny=()=>{requestAnimationFrame(ny),ad.render(ju,Gu)},zT=be=>{let I=be.clientWidth-3,J=be.clientHeight-3;ad.setSize(I,J),Gu.aspect=I/J,Gu.updateProjectionMatrix()},FT=(be,I)=>{ad=new Q1({antialias:!0,canvas:be}),new DT(Gu,ad.domElement),ny()},s1=(be,I,J)=>{ju.clear(),ty=be;let ve="cut_see_through",Ve=ry(ve),F=iy(I,ve),L=new Wl(F,Ve);jT(L),If=[L],ju.add(L),Gu.position.z=J,Gu.lookAt(new Hn(0,0,0))},NT=be=>{let I=ry(be.material_type);be.wireframe===!0&&(I.wireframe=!0);let J=iy(be.iso_value,be.material_type),ve=new Wl(J,I);If.push(ve),console.log(If),ju.add(ve)},BT=be=>{ju.remove(If[be]),If.splice(be,1)},UT=(be,I)=>{If[be].visible=I},ry=be=>{const I=new kT({onBeforeCompile:J=>{I.vertexColors=!0,I.userData.shader=J,J.fragmentShader=J.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
          diffuseColor = vColor;`)}});switch(I.vertexColors=!0,I.side=Gl,be){case"full":I.transparent=!1;break;case"cut_full":I.transparent=!0;break;case"see_through":I.transparent=!0;break;case"cut_see_through":I.transparent=!0;break}return I},iy=(be,I)=>{let J=ty.get_res(be,I);const ve=J.vertices,Ve=Array.from(J.indices),F=J.normals,L=J.colors;console.log(L);const e=new qu;return e.setIndex(Ve),e.setAttribute("position",new Hs(ve,3)),e.setAttribute("normal",new Hs(F,3)),e.setAttribute("color",new Hs(L,4,!0)),e},jT=be=>{const I=new IT(16777215,1);ju.add(I);var J=new CT(16777215,2,1e3);J.position.set(0,0,200),J.target=be,ju.add(J);var ve=new RT(16711680,1,200);ve.position.set(0,0,150),ju.add(ve)};function VT(be){return be&&be.__esModule&&Object.prototype.hasOwnProperty.call(be,"default")?be.default:be}var ay={exports:{}};(function(be,I){/*! For license information please see plotly.min.js.LICENSE.txt */(function(J,ve){be.exports=ve()})(self,function(){return function(){var J={98847:function(F,L,e){var T=e(71828),b={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in b){var _=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");T.addStyleRule(_,b[a])}},98222:function(F,L,e){F.exports=e(82887)},27206:function(F,L,e){F.exports=e(60822)},59893:function(F,L,e){F.exports=e(23381)},5224:function(F,L,e){F.exports=e(83832)},59509:function(F,L,e){F.exports=e(72201)},75557:function(F,L,e){F.exports=e(91815)},40338:function(F,L,e){F.exports=e(21462)},35080:function(F,L,e){F.exports=e(51319)},61396:function(F,L,e){F.exports=e(57516)},40549:function(F,L,e){F.exports=e(98128)},49866:function(F,L,e){F.exports=e(99442)},36089:function(F,L,e){F.exports=e(93740)},19548:function(F,L,e){F.exports=e(8729)},35831:function(F,L,e){F.exports=e(93814)},61039:function(F,L,e){F.exports=e(14382)},97040:function(F,L,e){F.exports=e(51759)},77986:function(F,L,e){F.exports=e(10421)},24296:function(F,L,e){F.exports=e(43102)},58872:function(F,L,e){F.exports=e(92165)},29626:function(F,L,e){F.exports=e(3325)},65591:function(F,L,e){F.exports=e(36071)},69738:function(F,L,e){F.exports=e(43905)},92650:function(F,L,e){F.exports=e(35902)},35630:function(F,L,e){F.exports=e(69816)},73434:function(F,L,e){F.exports=e(94507)},27909:function(F,L,e){var T=e(19548);T.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),F.exports=T},46163:function(F,L,e){F.exports=e(15154)},96881:function(F,L,e){F.exports=e(64943)},50581:function(F,L,e){F.exports=e(21164)},55334:function(F,L,e){F.exports=e(54186)},65317:function(F,L,e){F.exports=e(94873)},10021:function(F,L,e){F.exports=e(67618)},54201:function(F,L,e){F.exports=e(58810)},5861:function(F,L,e){F.exports=e(20593)},16122:function(F,L,e){F.exports=e(29396)},83043:function(F,L,e){F.exports=e(13551)},48131:function(F,L,e){F.exports=e(46858)},47582:function(F,L,e){F.exports=e(17988)},21641:function(F,L,e){F.exports=e(68868)},96268:function(F,L,e){F.exports=e(20467)},19440:function(F,L,e){F.exports=e(91271)},99488:function(F,L,e){F.exports=e(21461)},97393:function(F,L,e){F.exports=e(85956)},25743:function(F,L,e){F.exports=e(52979)},66398:function(F,L,e){F.exports=e(32275)},17280:function(F,L,e){F.exports=e(6419)},77900:function(F,L,e){F.exports=e(61510)},81299:function(F,L,e){F.exports=e(87619)},93005:function(F,L,e){F.exports=e(93601)},40344:function(F,L,e){F.exports=e(96595)},47645:function(F,L,e){F.exports=e(70954)},6197:function(F,L,e){F.exports=e(47462)},4534:function(F,L,e){F.exports=e(17659)},85461:function(F,L,e){F.exports=e(19990)},82884:function(F){F.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(F,L,e){var T=e(82884),b=e(41940),a=e(85555),_=e(44467).templatedArray;e(24695),F.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:b({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:b({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(F,L,e){var T=e(71828),b=e(89298),a=e(92605).draw;function _(h){var o=h._fullLayout;T.filterVisible(o.annotations).forEach(function(t){var i=b.getFromId(h,t.xref),n=b.getFromId(h,t.yref),r=b.getRefType(t.xref),s=b.getRefType(t.yref);t._extremes={},r==="range"&&g(t,i),s==="range"&&g(t,n)})}function g(h,o){var t,i=o._id,n=i.charAt(0),r=h[n],s=h["a"+n],l=h[n+"ref"],u=h["a"+n+"ref"],d=h["_"+n+"padplus"],c=h["_"+n+"padminus"],w={x:1,y:-1}[n]*h[n+"shift"],m=3*h.arrowsize*h.arrowwidth||0,f=m+w,x=m-w,y=3*h.startarrowsize*h.arrowwidth||0,v=y+w,M=y-w;if(u===l){var p=b.findExtremes(o,[o.r2c(r)],{ppadplus:f,ppadminus:x}),S=b.findExtremes(o,[o.r2c(s)],{ppadplus:Math.max(d,v),ppadminus:Math.max(c,M)});t={min:[p.min[0],S.min[0]],max:[p.max[0],S.max[0]]}}else v=s?v+s:v,M=s?M-s:M,t=b.findExtremes(o,[o.r2c(r)],{ppadplus:Math.max(d,f,v),ppadminus:Math.max(c,x,M)});h._extremes[i]=t}F.exports=function(h){var o=h._fullLayout;if(T.filterVisible(o.annotations).length&&h._fullData.length)return T.syncOrAsync([a,_],h)}},44317:function(F,L,e){var T=e(71828),b=e(73972),a=e(44467).arrayEditor;function _(h,o){var t,i,n,r,s,l,u,d=h._fullLayout.annotations,c=[],w=[],m=[],f=(o||[]).length;for(t=0;t<d.length;t++)if(r=(n=d[t]).clicktoshow){for(i=0;i<f;i++)if(l=(s=o[i]).xaxis,u=s.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(s.x)===g(n._xclick,l)&&u.d2r(s.y)===g(n._yclick,u)){(n.visible?r==="onout"?w:m:c).push(t);break}i===f&&n.visible&&r==="onout"&&w.push(t)}return{on:c,off:w,explicitOff:m}}function g(h,o){return o.type==="log"?o.l2r(h):o.d2r(h)}F.exports={hasClickToShow:function(h,o){var t=_(h,o);return t.on.length>0||t.explicitOff.length>0},onClick:function(h,o){var t,i,n=_(h,o),r=n.on,s=n.off.concat(n.explicitOff),l={},u=h._fullLayout.annotations;if(r.length||s.length){for(t=0;t<r.length;t++)(i=a(h.layout,"annotations",u[r[t]])).modifyItem("visible",!0),T.extendFlat(l,i.getUpdateObj());for(t=0;t<s.length;t++)(i=a(h.layout,"annotations",u[s[t]])).modifyItem("visible",!1),T.extendFlat(l,i.getUpdateObj());return b.call("update",h,{},l)}}}},25625:function(F,L,e){var T=e(71828),b=e(7901);F.exports=function(a,_,g,h){h("opacity");var o=h("bgcolor"),t=h("bordercolor"),i=b.opacity(t);h("borderpad");var n=h("borderwidth"),r=h("showarrow");if(h("text",r?" ":g._dfltTitle.annotation),h("textangle"),T.coerceFont(h,"font",g.font),h("width"),h("align"),h("height")&&h("valign"),r){var s,l,u=h("arrowside");u.indexOf("end")!==-1&&(s=h("arrowhead"),l=h("arrowsize")),u.indexOf("start")!==-1&&(h("startarrowhead",s),h("startarrowsize",l)),h("arrowcolor",i?_.bordercolor:b.defaultLine),h("arrowwidth",2*(i&&n||1)),h("standoff"),h("startstandoff")}var d=h("hovertext"),c=g.hoverlabel||{};if(d){var w=h("hoverlabel.bgcolor",c.bgcolor||(b.opacity(o)?b.rgb(o):b.defaultLine)),m=h("hoverlabel.bordercolor",c.bordercolor||b.contrast(w));T.coerceFont(h,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||m})}h("captureevents",!!d)}},94128:function(F,L,e){var T=e(92770),b=e(58163);F.exports=function(a,_,g,h){_=_||{};var o=g==="log"&&_.type==="linear",t=g==="linear"&&_.type==="log";if(o||t)for(var i,n,r=a._fullLayout.annotations,s=_._id.charAt(0),l=0;l<r.length;l++)i=r[l],n="annotations["+l+"].",i[s+"ref"]===_._id&&u(s),i["a"+s+"ref"]===_._id&&u("a"+s);function u(d){var c=i[d],w=null;w=o?b(c,_.range):Math.pow(10,c),T(w)||(w=null),h(n+d,w)}}},84046:function(F,L,e){var T=e(71828),b=e(89298),a=e(85501),_=e(25625),g=e(50215);function h(o,t,i){function n(S,A){return T.coerce(o,t,g,S,A)}var r=n("visible"),s=n("clicktoshow");if(r||s){_(o,t,i,n);for(var l=t.showarrow,u=["x","y"],d=[-10,-30],c={_fullLayout:i},w=0;w<2;w++){var m=u[w],f=b.coerceRef(o,t,c,m,"","paper");if(f!=="paper"&&b.getFromId(c,f)._annIndices.push(t._index),b.coercePosition(t,c,n,f,m,.5),l){var x="a"+m,y=b.coerceRef(o,t,c,x,"pixel",["pixel","paper"]);y!=="pixel"&&y!==f&&(y=t[x]="pixel");var v=y==="pixel"?d[w]:.4;b.coercePosition(t,c,n,y,x,v)}n(m+"anchor"),n(m+"shift")}if(T.noneOrAll(o,t,["x","y"]),l&&T.noneOrAll(o,t,["ax","ay"]),s){var M=n("xclick"),p=n("yclick");t._xclick=M===void 0?t.x:b.cleanPosition(M,c,t.xref),t._yclick=p===void 0?t.y:b.cleanPosition(p,c,t.yref)}}}F.exports=function(o,t){a(o,t,{name:"annotations",handleItemDefaults:h})}},92605:function(F,L,e){var T=e(39898),b=e(73972),a=e(74875),_=e(71828),g=_.strTranslate,h=e(89298),o=e(7901),t=e(91424),i=e(30211),n=e(63893),r=e(6964),s=e(28569),l=e(44467).arrayEditor,u=e(13011);function d(m,f){var x=m._fullLayout.annotations[f]||{},y=h.getFromId(m,x.xref),v=h.getFromId(m,x.yref);y&&y.setScale(),v&&v.setScale(),w(m,x,f,!1,y,v)}function c(m,f,x,y,v){var M=v[x],p=v[x+"ref"],S=x.indexOf("y")!==-1,A=h.getRefType(p)==="domain",k=S?y.h:y.w;return m?A?M+(S?-f:f)/m._length:m.p2r(m.r2p(M)+f):M+(S?-f:f)/k}function w(m,f,x,y,v,M){var p,S,A=m._fullLayout,k=m._fullLayout._size,C=m._context.edits;y?(p="annotation-"+y,S=y+".annotations"):(p="annotation",S="annotations");var P=l(m.layout,S,f),R=P.modifyBase,O=P.modifyItem,X=P.getUpdateObj;A._infolayer.selectAll("."+p+'[data-index="'+x+'"]').remove();var D="clip"+A._uid+"_ann"+x;if(f._input&&f.visible!==!1){var V={x:{},y:{}},j=+f.textangle||0,B=A._infolayer.append("g").classed(p,!0).attr("data-index",String(x)).style("opacity",f.opacity),W=B.append("g").classed("annotation-text-g",!0),q=C[f.showarrow?"annotationTail":"annotationPosition"],re=f.captureevents||C.annotationText||q,ee=W.append("g").style("pointer-events",re?"all":null).call(r,"pointer").on("click",function(){m._dragging=!1,m.emit("plotly_clickannotation",Te(T.event))});f.hovertext&&ee.on("mouseover",function(){var fe=f.hoverlabel,Oe=fe.font,Se=this.getBoundingClientRect(),Me=m.getBoundingClientRect();i.loneHover({x0:Se.left-Me.left,x1:Se.right-Me.left,y:(Se.top+Se.bottom)/2-Me.top,text:f.hovertext,color:fe.bgcolor,borderColor:fe.bordercolor,fontFamily:Oe.family,fontSize:Oe.size,fontColor:Oe.color},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:m})}).on("mouseout",function(){i.loneUnhover(A._hoverlayer.node())});var K=f.borderwidth,Y=f.borderpad,$=K+Y,ne=ee.append("rect").attr("class","bg").style("stroke-width",K+"px").call(o.stroke,f.bordercolor).call(o.fill,f.bgcolor),ae=f.width||f.height,se=A._topclips.selectAll("#"+D).data(ae?[0]:[]);se.enter().append("clipPath").classed("annclip",!0).attr("id",D).append("rect"),se.exit().remove();var ce=f.font,me=A._meta?_.templateString(f.text,A._meta):f.text,ye=ee.append("text").classed("annotation-text",!0).text(me);C.annotationText?ye.call(n.makeEditable,{delegate:ee,gd:m}).call(Ce).on("edit",function(fe){f.text=fe,this.call(Ce),O("text",fe),v&&v.autorange&&R(v._name+".autorange",!0),M&&M.autorange&&R(M._name+".autorange",!0),b.call("_guiRelayout",m,X())}):ye.call(Ce)}else T.selectAll("#"+D).remove();function Te(fe){var Oe={index:x,annotation:f._input,fullAnnotation:f,event:fe};return y&&(Oe.subplotId=y),Oe}function Ce(fe){return fe.call(t.font,ce).attr({"text-anchor":{left:"start",right:"end"}[f.align]||"middle"}),n.convertToTspans(fe,m,pe),fe}function pe(){var fe=ye.selectAll("a");fe.size()===1&&fe.text()===ye.text()&&ee.insert("a",":first-child").attr({"xlink:xlink:href":fe.attr("xlink:href"),"xlink:xlink:show":fe.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ne.node());var Oe=ee.select(".annotation-text-math-group"),Se=!Oe.empty(),Me=t.bBox((Se?Oe:ye).node()),ue=Me.width,le=Me.height,ie=f.width||ue,ge=f.height||le,Ae=Math.round(ie+2*$),we=Math.round(ge+2*$);function Ne(xt,dt){return dt==="auto"&&(dt=xt<.3333333333333333?"left":xt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[dt]}for(var He=!1,de=["x","y"],Le=0;Le<de.length;Le++){var Ee,Re,je,Fe,Xe,Ze=de[Le],at=f[Ze+"ref"]||Ze,lt=f["a"+Ze+"ref"],ot={x:v,y:M}[Ze],bt=(j+(Ze==="x"?0:-90))*Math.PI/180,wt=Ae*Math.cos(bt),ht=we*Math.sin(bt),ct=Math.abs(wt)+Math.abs(ht),Tt=f[Ze+"anchor"],Lt=f[Ze+"shift"]*(Ze==="x"?1:-1),kt=V[Ze],Ot=h.getRefType(at);if(ot&&Ot!=="domain"){var Pt=ot.r2fraction(f[Ze]);(Pt<0||Pt>1)&&(lt===at?((Pt=ot.r2fraction(f["a"+Ze]))<0||Pt>1)&&(He=!0):He=!0),Ee=ot._offset+ot.r2p(f[Ze]),Fe=.5}else{var et=Ot==="domain";Ze==="x"?(je=f[Ze],Ee=et?ot._offset+ot._length*je:Ee=k.l+k.w*je):(je=1-f[Ze],Ee=et?ot._offset+ot._length*je:Ee=k.t+k.h*je),Fe=f.showarrow?.5:je}if(f.showarrow){kt.head=Ee;var nt=f["a"+Ze];if(Xe=wt*Ne(.5,f.xanchor)-ht*Ne(.5,f.yanchor),lt===at){var Ye=h.getRefType(lt);Ye==="domain"?(Ze==="y"&&(nt=1-nt),kt.tail=ot._offset+ot._length*nt):Ye==="paper"?Ze==="y"?(nt=1-nt,kt.tail=k.t+k.h*nt):kt.tail=k.l+k.w*nt:kt.tail=ot._offset+ot.r2p(nt),Re=Xe}else kt.tail=Ee+nt,Re=Xe+nt;kt.text=kt.tail+Xe;var tt=A[Ze==="x"?"width":"height"];if(at==="paper"&&(kt.head=_.constrain(kt.head,1,tt-1)),lt==="pixel"){var ut=-Math.max(kt.tail-3,kt.text),Ke=Math.min(kt.tail+3,kt.text)-tt;ut>0?(kt.tail+=ut,kt.text+=ut):Ke>0&&(kt.tail-=Ke,kt.text-=Ke)}kt.tail+=Lt,kt.head+=Lt}else Re=Xe=ct*Ne(Fe,Tt),kt.text=Ee+Xe;kt.text+=Lt,Xe+=Lt,Re+=Lt,f["_"+Ze+"padplus"]=ct/2+Re,f["_"+Ze+"padminus"]=ct/2-Re,f["_"+Ze+"size"]=ct,f["_"+Ze+"shift"]=Xe}if(He)ee.remove();else{var De=0,Be=0;if(f.align!=="left"&&(De=(ie-ue)*(f.align==="center"?.5:1)),f.valign!=="top"&&(Be=(ge-le)*(f.valign==="middle"?.5:1)),Se)Oe.select("svg").attr({x:$+De-1,y:$+Be}).call(t.setClipUrl,ae?D:null,m);else{var Qe=$+Be-Me.top,rt=$+De-Me.left;ye.call(n.positionText,rt,Qe).call(t.setClipUrl,ae?D:null,m)}se.select("rect").call(t.setRect,$,$,ie,ge),ne.call(t.setRect,K/2,K/2,Ae-K,we-K),ee.call(t.setTranslate,Math.round(V.x.text-Ae/2),Math.round(V.y.text-we/2)),W.attr({transform:"rotate("+j+","+V.x.text+","+V.y.text+")"});var vt,mt=function(xt,dt){B.selectAll(".annotation-arrow-g").remove();var Et=V.x.head,pt=V.y.head,gt=V.x.tail+xt,Mt=V.y.tail+dt,Nt=V.x.text+xt,Bt=V.y.text+dt,Ut=_.rotationXYMatrix(j,Nt,Bt),Jt=_.apply2DTransform(Ut),Vt=_.apply2DTransform2(Ut),Qt=+ne.attr("width"),qt=+ne.attr("height"),gn=Nt-.5*Qt,wn=gn+Qt,hn=Bt-.5*qt,Xt=hn+qt,an=[[gn,hn,gn,Xt],[gn,Xt,wn,Xt],[wn,Xt,wn,hn],[wn,hn,gn,hn]].map(Vt);if(!an.reduce(function(ar,Jn){return ar^!!_.segmentsIntersect(Et,pt,Et+1e6,pt+1e6,Jn[0],Jn[1],Jn[2],Jn[3])},!1)){an.forEach(function(ar){var Jn=_.segmentsIntersect(gt,Mt,Et,pt,ar[0],ar[1],ar[2],ar[3]);Jn&&(gt=Jn.x,Mt=Jn.y)});var tn=f.arrowwidth,cn=f.arrowcolor,vn=f.arrowside,yn=B.append("g").style({opacity:o.opacity(cn)}).classed("annotation-arrow-g",!0),Pn=yn.append("path").attr("d","M"+gt+","+Mt+"L"+Et+","+pt).style("stroke-width",tn+"px").call(o.stroke,o.rgb(cn));if(u(Pn,vn,f),C.annotationPosition&&Pn.node().parentNode&&!y){var In=Et,kn=pt;if(f.standoff){var zn=Math.sqrt(Math.pow(Et-gt,2)+Math.pow(pt-Mt,2));In+=f.standoff*(gt-Et)/zn,kn+=f.standoff*(Mt-pt)/zn}var er,ir,fr=yn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(gt-In)+","+(Mt-kn),transform:g(In,kn)}).style("stroke-width",tn+6+"px").call(o.stroke,"rgba(0,0,0,0)").call(o.fill,"rgba(0,0,0,0)");s.init({element:fr.node(),gd:m,prepFn:function(){var ar=t.getTranslate(ee);er=ar.x,ir=ar.y,v&&v.autorange&&R(v._name+".autorange",!0),M&&M.autorange&&R(M._name+".autorange",!0)},moveFn:function(ar,Jn){var br=Jt(er,ir),Gt=br[0]+ar,ln=br[1]+Jn;ee.call(t.setTranslate,Gt,ln),O("x",c(v,ar,"x",k,f)),O("y",c(M,Jn,"y",k,f)),f.axref===f.xref&&O("ax",c(v,ar,"ax",k,f)),f.ayref===f.yref&&O("ay",c(M,Jn,"ay",k,f)),yn.attr("transform",g(ar,Jn)),W.attr({transform:"rotate("+j+","+Gt+","+ln+")"})},doneFn:function(){b.call("_guiRelayout",m,X());var ar=document.querySelector(".js-notes-box-panel");ar&&ar.redraw(ar.selectedObj)}})}}};f.showarrow&&mt(0,0),q&&s.init({element:ee.node(),gd:m,prepFn:function(){vt=W.attr("transform")},moveFn:function(xt,dt){var Et="pointer";if(f.showarrow)f.axref===f.xref?O("ax",c(v,xt,"ax",k,f)):O("ax",f.ax+xt),f.ayref===f.yref?O("ay",c(M,dt,"ay",k.w,f)):O("ay",f.ay+dt),mt(xt,dt);else{if(y)return;var pt,gt;if(v)pt=c(v,xt,"x",k,f);else{var Mt=f._xsize/k.w,Nt=f.x+(f._xshift-f.xshift)/k.w-Mt/2;pt=s.align(Nt+xt/k.w,Mt,0,1,f.xanchor)}if(M)gt=c(M,dt,"y",k,f);else{var Bt=f._ysize/k.h,Ut=f.y-(f._yshift+f.yshift)/k.h-Bt/2;gt=s.align(Ut-dt/k.h,Bt,0,1,f.yanchor)}O("x",pt),O("y",gt),v&&M||(Et=s.getCursor(v?.5:pt,M?.5:gt,f.xanchor,f.yanchor))}W.attr({transform:g(xt,dt)+vt}),r(ee,Et)},clickFn:function(xt,dt){f.captureevents&&m.emit("plotly_clickannotation",Te(dt))},doneFn:function(){r(ee),b.call("_guiRelayout",m,X());var xt=document.querySelector(".js-notes-box-panel");xt&&xt.redraw(xt.selectedObj)}})}}}F.exports={draw:function(m){var f=m._fullLayout;f._infolayer.selectAll(".annotation").remove();for(var x=0;x<f.annotations.length;x++)f.annotations[x].visible&&d(m,x);return a.previousPromises(m)},drawOne:d,drawRaw:w}},13011:function(F,L,e){var T=e(39898),b=e(7901),a=e(82884),_=e(71828),g=_.strScale,h=_.strRotate,o=_.strTranslate;F.exports=function(t,i,n){var r,s,l,u,d=t.node(),c=a[n.arrowhead||0],w=a[n.startarrowhead||0],m=(n.arrowwidth||1)*(n.arrowsize||1),f=(n.arrowwidth||1)*(n.startarrowsize||1),x=i.indexOf("start")>=0,y=i.indexOf("end")>=0,v=c.backoff*m+n.standoff,M=w.backoff*f+n.startstandoff;if(d.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var p=r.x-s.x,S=r.y-s.y;if(u=(l=Math.atan2(S,p))+Math.PI,v&&M&&v+M>Math.sqrt(p*p+S*S))return void B();if(v){if(v*v>p*p+S*S)return void B();var A=v*Math.cos(l),k=v*Math.sin(l);s.x+=A,s.y+=k,t.attr({x2:s.x,y2:s.y})}if(M){if(M*M>p*p+S*S)return void B();var C=M*Math.cos(l),P=M*Math.sin(l);r.x-=C,r.y-=P,t.attr({x1:r.x,y1:r.y})}}else if(d.nodeName==="path"){var R=d.getTotalLength(),O="";if(R<v+M)return void B();var X=d.getPointAtLength(0),D=d.getPointAtLength(.1);l=Math.atan2(X.y-D.y,X.x-D.x),r=d.getPointAtLength(Math.min(M,R)),O="0px,"+M+"px,";var V=d.getPointAtLength(R),j=d.getPointAtLength(R-.1);u=Math.atan2(V.y-j.y,V.x-j.x),s=d.getPointAtLength(Math.max(0,R-v)),O+=R-(O?M+v:v)+"px,"+R+"px",t.style("stroke-dasharray",O)}function B(){t.style("stroke-dasharray","0px,100px")}function W(q,re,ee,K){q.path&&(q.noRotate&&(ee=0),T.select(d.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:o(re.x,re.y)+h(180*ee/Math.PI)+g(K)}).style({fill:b.rgb(n.arrowcolor),"stroke-width":0}))}x&&W(w,r,l,f),y&&W(c,s,u,m)}},32745:function(F,L,e){var T=e(92605),b=e(44317);F.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:T.draw,drawOne:T.drawOne,drawRaw:T.drawRaw,hasClickToShow:b.hasClickToShow,onClick:b.onClick,convertCoords:e(94128)}},26997:function(F,L,e){var T=e(50215),b=e(30962).overrideAll,a=e(44467).templatedArray;F.exports=b(a("annotation",{visible:T.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:T.xanchor,xshift:T.xshift,yanchor:T.yanchor,yshift:T.yshift,text:T.text,textangle:T.textangle,font:T.font,width:T.width,height:T.height,opacity:T.opacity,align:T.align,valign:T.valign,bgcolor:T.bgcolor,bordercolor:T.bordercolor,borderpad:T.borderpad,borderwidth:T.borderwidth,showarrow:T.showarrow,arrowcolor:T.arrowcolor,arrowhead:T.arrowhead,startarrowhead:T.startarrowhead,arrowside:T.arrowside,arrowsize:T.arrowsize,startarrowsize:T.startarrowsize,arrowwidth:T.arrowwidth,standoff:T.standoff,startstandoff:T.startstandoff,hovertext:T.hovertext,hoverlabel:T.hoverlabel,captureevents:T.captureevents}),"calc","from-root")},5485:function(F,L,e){var T=e(71828),b=e(89298);function a(_,g){var h=g.fullSceneLayout.domain,o=g.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},T.extendFlat(_._xa,t),b.setConvert(_._xa),_._xa._offset=o.l+h.x[0]*o.w,_._xa.l2p=function(){return .5*(1+_._pdata[0]/_._pdata[3])*o.w*(h.x[1]-h.x[0])},_._ya={},T.extendFlat(_._ya,t),b.setConvert(_._ya),_._ya._offset=o.t+(1-h.y[1])*o.h,_._ya.l2p=function(){return .5*(1-_._pdata[1]/_._pdata[3])*o.h*(h.y[1]-h.y[0])}}F.exports=function(_){for(var g=_.fullSceneLayout.annotations,h=0;h<g.length;h++)a(g[h],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()}},20226:function(F,L,e){var T=e(71828),b=e(89298),a=e(85501),_=e(25625),g=e(26997);function h(o,t,i,n){function r(l,u){return T.coerce(o,t,g,l,u)}function s(l){var u=l+"axis",d={_fullLayout:{}};return d._fullLayout[u]=i[u],b.coercePosition(t,d,r,l,l,.5)}r("visible")&&(_(o,t,n.fullLayout,r),s("x"),s("y"),s("z"),T.noneOrAll(o,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),T.noneOrAll(o,t,["ax","ay"])))}F.exports=function(o,t,i){a(o,t,{name:"annotations",handleItemDefaults:h,fullLayout:i.fullLayout})}},82188:function(F,L,e){var T=e(92605).drawRaw,b=e(63538),a=["x","y","z"];F.exports=function(_){for(var g=_.fullSceneLayout,h=_.dataScale,o=g.annotations,t=0;t<o.length;t++){for(var i=o[t],n=!1,r=0;r<3;r++){var s=a[r],l=i[s],u=g[s+"axis"].r2fraction(l);if(u<0||u>1){n=!0;break}}n?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+t+'"]').remove():(i._pdata=b(_.glplot.cameraParams,[g.xaxis.r2l(i.x)*h[0],g.yaxis.r2l(i.y)*h[1],g.zaxis.r2l(i.z)*h[2]]),T(_.graphDiv,i,t,_.id,i._xa,i._ya))}}},2468:function(F,L,e){var T=e(73972),b=e(71828);F.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(a,_){var g=T.subplotsRegistry.gl3d;if(g)for(var h=g.attrRegex,o=Object.keys(a),t=0;t<o.length;t++){var i=o[t];h.test(i)&&(a[i].annotations||[]).length&&(b.pushUnique(_._basePlotModules,g),b.pushUnique(_._subplots.gl3d,i))}},convert:e(5485),draw:e(82188)}},7561:function(F,L,e){F.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function(F,L,e){var T=e(7561),b=e(71828),a=e(50606),_=a.EPOCHJD,g=a.ONEDAY,h={valType:"enumerated",values:b.sortObjectKeys(T.calendars),editType:"calc",dflt:"gregorian"},o=function(m,f,x,y){var v={};return v[x]=h,b.coerce(m,f,v,x,y)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(m){var f=n[m];return f||(n[m]=T.instance(m))}function s(m){return b.extendFlat({},h,{description:m})}function l(m){return"Sets the calendar system to use with `"+m+"` date data."}var u={xcalendar:s(l("x"))},d=b.extendFlat({},u,{ycalendar:s(l("y"))}),c=b.extendFlat({},d,{zcalendar:s(l("z"))}),w=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));F.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:d,bar:d,box:d,heatmap:d,contour:d,histogram:d,histogram2d:d,histogram2dcontour:d,scatter3d:c,surface:c,mesh3d:c,scattergl:d,ohlc:u,candlestick:u},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:o,handleTraceDefaults:function(m,f,x,y){for(var v=0;v<x.length;v++)o(m,f,x[v]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(m,f,x){for(var y,v,M,p,S,A=Math.floor((f+.05)/g)+_,k=r(x).fromJD(A),C=0;(C=m.indexOf("%",C))!==-1;)(y=m.charAt(C+1))==="0"||y==="-"||y==="_"?(M=3,v=m.charAt(C+2),y==="_"&&(y="-")):(v=y,y="0",M=2),(p=i[v])?(S=p===t?t:k.formatDate(p[y]),m=m.substr(0,C)+S+m.substr(C+M),C+=S.length):C+=M;return m}}},22399:function(F,L){L.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],L.defaultLine="#444",L.lightLine="#eee",L.background="#fff",L.borderLine="#BEC8D9",L.lightFraction=90.9090909090909},7901:function(F,L,e){var T=e(84267),b=e(92770),a=e(73627).isTypedArray,_=F.exports={},g=e(22399);_.defaults=g.defaults;var h=_.defaultLine=g.defaultLine;_.lightLine=g.lightLine;var o=_.background=g.background;function t(i){if(b(i)||typeof i!="string")return i;var n=i.trim();if(n.substr(0,3)!=="rgb")return i;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return i;var s=r[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&s.length===4;if(!l&&s.length!==3)return i;for(var u=0;u<s.length;u++){if(!s[u].length||(s[u]=Number(s[u]),!(s[u]>=0)))return i;if(u===3)s[u]>1&&(s[u]=1);else if(s[u]>=1)return i}var d=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return l?"rgba("+d+", "+s[3]+")":"rgb("+d+")"}_.tinyRGB=function(i){var n=i.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},_.rgb=function(i){return _.tinyRGB(T(i))},_.opacity=function(i){return i?T(i).getAlpha():0},_.addOpacity=function(i,n){var r=T(i).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},_.combine=function(i,n){var r=T(i).toRgb();if(r.a===1)return T(i).toRgbString();var s=T(n||o).toRgb(),l=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},u={r:l.r*(1-r.a)+r.r*r.a,g:l.g*(1-r.a)+r.g*r.a,b:l.b*(1-r.a)+r.b*r.a};return T(u).toRgbString()},_.contrast=function(i,n,r){var s=T(i);return s.getAlpha()!==1&&(s=T(_.combine(i,o))),(s.isDark()?n?s.lighten(n):o:r?s.darken(r):h).toString()},_.stroke=function(i,n){var r=T(n);i.style({stroke:_.tinyRGB(r),"stroke-opacity":r.getAlpha()})},_.fill=function(i,n){var r=T(n);i.style({fill:_.tinyRGB(r),"fill-opacity":r.getAlpha()})},_.clean=function(i){if(i&&typeof i=="object"){var n,r,s,l,u=Object.keys(i);for(n=0;n<u.length;n++)if(l=i[s=u[n]],s.substr(s.length-5)==="color")if(Array.isArray(l))for(r=0;r<l.length;r++)l[r]=t(l[r]);else i[s]=t(l);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(l))for(r=0;r<l.length;r++)Array.isArray(l[r])&&(l[r][1]=t(l[r][1]));else if(Array.isArray(l)){var d=l[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(r=0;r<l.length;r++)_.clean(l[r])}else l&&typeof l=="object"&&!a(l)&&_.clean(l)}}},63583:function(F,L,e){var T=e(13838),b=e(41940),a=e(1426).extendFlat,_=e(30962).overrideAll;F.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:T.linecolor,outlinewidth:T.linewidth,bordercolor:T.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:a({},T.ticks,{dflt:""}),ticklabeloverflow:a({},T.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,labelalias:T.labelalias,tickfont:b({}),tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,separatethousands:T.separatethousands,exponentformat:T.exponentformat,minexponent:T.minexponent,showexponent:T.showexponent,title:{text:{valType:"string"},font:b({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:b({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(F){F.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(F,L,e){var T=e(71828),b=e(44467),a=e(26218),_=e(38701),g=e(96115),h=e(89426),o=e(63583);F.exports=function(t,i,n){var r=b.newContainer(i,"colorbar"),s=t.colorbar||{};function l(O,X){return T.coerce(s,r,o,O,X)}var u=n.margin||{t:0,b:0,l:0,r:0},d=n.width-u.l-u.r,c=n.height-u.t-u.b,w=l("orientation")==="v",m=l("thicknessmode");l("thickness",m==="fraction"?30/(w?d:c):30);var f=l("lenmode");l("len",f==="fraction"?1:w?c:d);var x,y,v,M=l("yref")==="paper",p=l("xref")==="paper",S="left";w?(v="middle",S=p?"left":"right",x=p?1.02:1,y=.5):(v=M?"bottom":"top",S="center",x=.5,y=M?1.02:1),T.coerce(s,r,{x:{valType:"number",min:p?-2:0,max:p?3:1,dflt:x}},"x"),T.coerce(s,r,{y:{valType:"number",min:M?-2:0,max:M?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",v),l("ypad"),T.noneOrAll(s,r,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var A=T.coerce(s,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:w?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",A.indexOf("inside")!==-1?"hide past domain":"hide past div"),a(s,r,l,"linear");var k=n.font,C={outerTicks:!1,font:k};A.indexOf("inside")!==-1&&(C.bgColor="black"),h(s,r,l,"linear",C),g(s,r,l,"linear",C),_(s,r,l,"linear",C),l("title.text",n._dfltTitle.colorbar);var P=r.showticklabels?r.tickfont:k,R=T.extendFlat({},P,{color:k.color,size:T.bigFont(P.size)});T.coerceFont(l,"title.font",R),l("title.side",w?"top":"right")}},98981:function(F,L,e){var T=e(39898),b=e(84267),a=e(74875),_=e(73972),g=e(89298),h=e(28569),o=e(71828),t=o.strTranslate,i=e(1426).extendFlat,n=e(6964),r=e(91424),s=e(7901),l=e(92998),u=e(63893),d=e(52075).flipScale,c=e(71453),w=e(52830),m=e(13838),f=e(18783),x=f.LINE_SPACING,y=f.FROM_TL,v=f.FROM_BR,M=e(30939).cn;F.exports={draw:function(p){var S=p._fullLayout._infolayer.selectAll("g."+M.colorbar).data(function(A){var k,C,P,R,O=A._fullLayout,X=A.calcdata,D=[];function V(ae){return i(ae,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function j(){typeof R.calc=="function"?R.calc(A,P,k):(k._fillgradient=C.reversescale?d(C.colorscale):C.colorscale,k._zrange=[C[R.min],C[R.max]])}for(var B=0;B<X.length;B++){var W=X[B];if((P=W[0].trace)._module){var q=P._module.colorbar;if(P.visible===!0&&q)for(var re=Array.isArray(q),ee=re?q:[q],K=0;K<ee.length;K++){var Y=(R=ee[K]).container;(C=Y?P[Y]:P)&&C.showscale&&((k=V(C.colorbar))._id="cb"+P.uid+(re&&Y?"-"+Y:""),k._traceIndex=P.index,k._propPrefix=(Y?Y+".":"")+"colorbar.",k._meta=P._meta,j(),D.push(k))}}}for(var $ in O._colorAxes)if((C=O[$]).showscale){var ne=O._colorAxes[$];(k=V(C.colorbar))._id="cb"+$,k._propPrefix=$+".colorbar.",k._meta=O._meta,R={min:"cmin",max:"cmax"},ne[0]!=="heatmap"&&(P=ne[1],R.calc=P._module.colorbar.calc),j(),D.push(k)}return D}(p),function(A){return A._id});S.enter().append("g").attr("class",function(A){return A._id}).classed(M.colorbar,!0),S.each(function(A){var k=T.select(this);o.ensureSingle(k,"rect",M.cbbg),o.ensureSingle(k,"g",M.cbfills),o.ensureSingle(k,"g",M.cblines),o.ensureSingle(k,"g",M.cbaxis,function(P){P.classed(M.crisp,!0)}),o.ensureSingle(k,"g",M.cbtitleunshift,function(P){P.append("g").classed(M.cbtitle,!0)}),o.ensureSingle(k,"rect",M.cboutline);var C=function(P,R,O){var X=R.orientation==="v",D=R.len,V=R.lenmode,j=R.thickness,B=R.thicknessmode,W=R.outlinewidth,q=R.borderwidth,re=R.bgcolor,ee=R.xanchor,K=R.yanchor,Y=R.xpad,$=R.ypad,ne=R.x,ae=X?R.y:1-R.y,se=R.yref==="paper",ce=R.xref==="paper",me=O._fullLayout,ye=me._size,Te=R._fillcolor,Ce=R._line,pe=R.title,fe=pe.side,Oe=R._zrange||T.extent((typeof Te=="function"?Te:Ce.color).domain()),Se=typeof Ce.color=="function"?Ce.color:function(){return Ce.color},Me=typeof Te=="function"?Te:function(){return Te},ue=R._levels,le=function(Ye,tt,ut){var Ke,De,Be=tt._levels,Qe=[],rt=[],vt=Be.end+Be.size/100,mt=Be.size,xt=1.001*ut[0]-.001*ut[1],dt=1.001*ut[1]-.001*ut[0];for(De=0;De<1e5&&(Ke=Be.start+De*mt,!(mt>0?Ke>=vt:Ke<=vt));De++)Ke>xt&&Ke<dt&&Qe.push(Ke);if(tt._fillgradient)rt=[0];else if(typeof tt._fillcolor=="function"){var Et=tt._filllevels;if(Et)for(vt=Et.end+Et.size/100,mt=Et.size,De=0;De<1e5&&(Ke=Et.start+De*mt,!(mt>0?Ke>=vt:Ke<=vt));De++)Ke>ut[0]&&Ke<ut[1]&&rt.push(Ke);else(rt=Qe.map(function(pt){return pt-Be.size/2})).push(rt[rt.length-1]+Be.size)}else tt._fillcolor&&typeof tt._fillcolor=="string"&&(rt=[0]);return Be.size<0&&(Qe.reverse(),rt.reverse()),{line:Qe,fill:rt}}(0,R,Oe),ie=le.fill,ge=le.line,Ae=Math.round(j*(B==="fraction"?X?ye.w:ye.h:1)),we=Ae/(X?ye.w:ye.h),Ne=Math.round(D*(V==="fraction"?X?ye.h:ye.w:1)),He=Ne/(X?ye.h:ye.w),de=ce?ye.w:O._fullLayout.width,Le=se?ye.h:O._fullLayout.height,Ee=Math.round(X?ne*de+Y:ae*Le+$),Re={center:.5,right:1}[ee]||0,je={top:1,middle:.5}[K]||0,Fe=X?ne-Re*we:ae-je*we,Xe=X?ae-je*He:ne-Re*He,Ze=Math.round(X?Le*(1-Xe):de*Xe);R._lenFrac=He,R._thickFrac=we,R._uFrac=Fe,R._vFrac=Xe;var at=R._axis=function(Ye,tt,ut){var Ke=Ye._fullLayout,De=tt.orientation==="v",Be={type:"linear",range:ut,tickmode:tt.tickmode,nticks:tt.nticks,tick0:tt.tick0,dtick:tt.dtick,tickvals:tt.tickvals,ticktext:tt.ticktext,ticks:tt.ticks,ticklen:tt.ticklen,tickwidth:tt.tickwidth,tickcolor:tt.tickcolor,showticklabels:tt.showticklabels,labelalias:tt.labelalias,ticklabelposition:tt.ticklabelposition,ticklabeloverflow:tt.ticklabeloverflow,ticklabelstep:tt.ticklabelstep,tickfont:tt.tickfont,tickangle:tt.tickangle,tickformat:tt.tickformat,exponentformat:tt.exponentformat,minexponent:tt.minexponent,separatethousands:tt.separatethousands,showexponent:tt.showexponent,showtickprefix:tt.showtickprefix,tickprefix:tt.tickprefix,showticksuffix:tt.showticksuffix,ticksuffix:tt.ticksuffix,title:tt.title,showline:!0,anchor:"free",side:De?"right":"bottom",position:1},Qe=De?"y":"x",rt={type:"linear",_id:Qe+tt._id},vt={letter:Qe,font:Ke.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ke.calendar};function mt(xt,dt){return o.coerce(Be,rt,m,xt,dt)}return c(Be,rt,mt,vt,Ke),w(Be,rt,mt,vt),rt}(O,R,Oe);at.position=we+(X?ne+Y/ye.w:ae+$/ye.h);var lt=["top","bottom"].indexOf(fe)!==-1;if(X&&lt&&(at.title.side=fe,at.titlex=ne+Y/ye.w,at.titley=Xe+(pe.side==="top"?He-$/ye.h:$/ye.h)),X||lt||(at.title.side=fe,at.titley=ae+$/ye.h,at.titlex=Xe+Y/ye.w),Ce.color&&R.tickmode==="auto"){at.tickmode="linear",at.tick0=ue.start;var ot=ue.size,bt=o.constrain(Ne/50,4,15)+1,wt=(Oe[1]-Oe[0])/((R.nticks||bt)*ot);if(wt>1){var ht=Math.pow(10,Math.floor(Math.log(wt)/Math.LN10));ot*=ht*o.roundUp(wt/ht,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(at.tick0=0)}at.dtick=ot}at.domain=X?[Xe+$/ye.h,Xe+He-$/ye.h]:[Xe+Y/ye.w,Xe+He-Y/ye.w],at.setScale(),P.attr("transform",t(Math.round(ye.l),Math.round(ye.t)));var ct,Tt=P.select("."+M.cbtitleunshift).attr("transform",t(-Math.round(ye.l),-Math.round(ye.t))),Lt=at.ticklabelposition,kt=at.title.font.size,Ot=P.select("."+M.cbaxis),Pt=0,et=0;function nt(Ye,tt){var ut={propContainer:at,propName:R._propPrefix+"title",traceIndex:R._traceIndex,_meta:R._meta,placeholder:me._dfltTitle.colorbar,containerGroup:P.select("."+M.cbtitle)},Ke=Ye.charAt(0)==="h"?Ye.substr(1):"h"+Ye;P.selectAll("."+Ke+",."+Ke+"-math-group").remove(),l.draw(O,Ye,i(ut,tt||{}))}return o.syncOrAsync([a.previousPromises,function(){var Ye,tt;(X&&lt||!X&&!lt)&&(fe==="top"&&(Ye=Y+ye.l+de*ne,tt=$+ye.t+Le*(1-Xe-He)+3+.75*kt),fe==="bottom"&&(Ye=Y+ye.l+de*ne,tt=$+ye.t+Le*(1-Xe)-3-.25*kt),fe==="right"&&(tt=$+ye.t+Le*ae+3+.75*kt,Ye=Y+ye.l+de*Xe),nt(at._id+"title",{attributes:{x:Ye,y:tt,"text-anchor":X?"start":"middle"}}))},function(){if(!X&&!lt||X&&lt){var Ye,tt=P.select("."+M.cbtitle),ut=tt.select("text"),Ke=[-W/2,W/2],De=tt.select(".h"+at._id+"title-math-group").node(),Be=15.6;if(ut.node()&&(Be=parseInt(ut.node().style.fontSize,10)*x),De?(Ye=r.bBox(De),et=Ye.width,(Pt=Ye.height)>Be&&(Ke[1]-=(Pt-Be)/2)):ut.node()&&!ut.classed(M.jsPlaceholder)&&(Ye=r.bBox(ut.node()),et=Ye.width,Pt=Ye.height),X){if(Pt){if(Pt+=5,fe==="top")at.domain[1]-=Pt/ye.h,Ke[1]*=-1;else{at.domain[0]+=Pt/ye.h;var Qe=u.lineCount(ut);Ke[1]+=(1-Qe)*Be}tt.attr("transform",t(Ke[0],Ke[1])),at.setScale()}}else et&&(fe==="right"&&(at.domain[0]+=(et+kt/2)/ye.w),tt.attr("transform",t(Ke[0],Ke[1])),at.setScale())}P.selectAll("."+M.cbfills+",."+M.cblines).attr("transform",X?t(0,Math.round(ye.h*(1-at.domain[1]))):t(Math.round(ye.w*at.domain[0]),0)),Ot.attr("transform",X?t(0,Math.round(-ye.t)):t(Math.round(-ye.l),0));var rt=P.select("."+M.cbfills).selectAll("rect."+M.cbfill).attr("style","").data(ie);rt.enter().append("rect").classed(M.cbfill,!0).attr("style",""),rt.exit().remove();var vt=Oe.map(at.c2p).map(Math.round).sort(function(pt,gt){return pt-gt});rt.each(function(pt,gt){var Mt=[gt===0?Oe[0]:(ie[gt]+ie[gt-1])/2,gt===ie.length-1?Oe[1]:(ie[gt]+ie[gt+1])/2].map(at.c2p).map(Math.round);X&&(Mt[1]=o.constrain(Mt[1]+(Mt[1]>Mt[0])?1:-1,vt[0],vt[1]));var Nt=T.select(this).attr(X?"x":"y",Ee).attr(X?"y":"x",T.min(Mt)).attr(X?"width":"height",Math.max(Ae,2)).attr(X?"height":"width",Math.max(T.max(Mt)-T.min(Mt),2));if(R._fillgradient)r.gradient(Nt,O,R._id,X?"vertical":"horizontalreversed",R._fillgradient,"fill");else{var Bt=Me(pt).replace("e-","");Nt.attr("fill",b(Bt).toHexString())}});var mt=P.select("."+M.cblines).selectAll("path."+M.cbline).data(Ce.color&&Ce.width?ge:[]);mt.enter().append("path").classed(M.cbline,!0),mt.exit().remove(),mt.each(function(pt){var gt=Ee,Mt=Math.round(at.c2p(pt))+Ce.width/2%1;T.select(this).attr("d","M"+(X?gt+","+Mt:Mt+","+gt)+(X?"h":"v")+Ae).call(r.lineGroupStyle,Ce.width,Se(pt),Ce.dash)}),Ot.selectAll("g."+at._id+"tick,path").remove();var xt=Ee+Ae+(W||0)/2-(R.ticks==="outside"?1:0),dt=g.calcTicks(at),Et=g.getTickSigns(at)[2];return g.drawTicks(O,at,{vals:at.ticks==="inside"?g.clipEnds(at,dt):dt,layer:Ot,path:g.makeTickPath(at,xt,Et),transFn:g.makeTransTickFn(at)}),g.drawLabels(O,at,{vals:dt,layer:Ot,transFn:g.makeTransTickLabelFn(at),labelFns:g.makeLabelFns(at,xt)})},function(){if(X&&!lt||!X&&lt){var Ye,tt,ut=at.position||0,Ke=at._offset+at._length/2;if(fe==="right")tt=Ke,Ye=ye.l+de*ut+10+kt*(at.showticklabels?1:.5);else if(Ye=Ke,fe==="bottom"&&(tt=ye.t+Le*ut+10+(Lt.indexOf("inside")===-1?at.tickfont.size:0)+(at.ticks!=="intside"&&R.ticklen||0)),fe==="top"){var De=pe.text.split("<br>").length;tt=ye.t+Le*ut+10-Ae-x*kt*De}nt((X?"h":"v")+at._id+"title",{avoid:{selection:T.select(O).selectAll("g."+at._id+"tick"),side:fe,offsetTop:X?0:ye.t,offsetLeft:X?ye.l:0,maxShift:X?me.width:me.height},attributes:{x:Ye,y:tt,"text-anchor":"middle"},transform:{rotate:X?-90:0,offset:0}})}},a.previousPromises,function(){var Ye,tt=Ae+W/2;Lt.indexOf("inside")===-1&&(Ye=r.bBox(Ot.node()),tt+=X?Ye.width:Ye.height),ct=Tt.select("text");var ut=0,Ke=X&&fe==="top",De=!X&&fe==="right",Be=0;if(ct.node()&&!ct.classed(M.jsPlaceholder)){var Qe,rt=Tt.select(".h"+at._id+"title-math-group").node();rt&&(X&&lt||!X&&!lt)?(ut=(Ye=r.bBox(rt)).width,Qe=Ye.height):(ut=(Ye=r.bBox(Tt.node())).right-ye.l-(X?Ee:Ze),Qe=Ye.bottom-ye.t-(X?Ze:Ee),X||fe!=="top"||(tt+=Ye.height,Be=Ye.height)),De&&(ct.attr("transform",t(ut/2+kt/2,0)),ut*=2),tt=Math.max(tt,X?ut:Qe)}var vt=2*(X?Y:$)+tt+q+W/2,mt=0;!X&&pe.text&&K==="bottom"&&ae<=0&&(vt+=mt=vt/2,Be+=mt),me._hColorbarMoveTitle=mt,me._hColorbarMoveCBTitle=Be;var xt=q+W,dt=(X?Ee:Ze)-xt/2-(X?Y:0),Et=(X?Ze:Ee)-(X?Ne:$+Be-mt);P.select("."+M.cbbg).attr("x",dt).attr("y",Et).attr(X?"width":"height",Math.max(vt-mt,2)).attr(X?"height":"width",Math.max(Ne+xt,2)).call(s.fill,re).call(s.stroke,R.bordercolor).style("stroke-width",q);var pt=De?Math.max(ut-10,0):0;P.selectAll("."+M.cboutline).attr("x",(X?Ee:Ze+Y)+pt).attr("y",(X?Ze+$-Ne:Ee)+(Ke?Pt:0)).attr(X?"width":"height",Math.max(Ae,2)).attr(X?"height":"width",Math.max(Ne-(X?2*$+Pt:2*Y+pt),2)).call(s.stroke,R.outlinecolor).style({fill:"none","stroke-width":W});var gt=X?Re*vt:0,Mt=X?0:(1-je)*vt-Be;if(gt=ce?ye.l-gt:-gt,Mt=se?ye.t-Mt:-Mt,P.attr("transform",t(gt,Mt)),!X&&(q||b(re).getAlpha()&&!b.equals(me.paper_bgcolor,re))){var Nt=Ot.selectAll("text"),Bt=Nt[0].length,Ut=P.select("."+M.cbbg).node(),Jt=r.bBox(Ut),Vt=r.getTranslate(P);Nt.each(function(vn,yn){var Pn=Bt-1;if(yn===0||yn===Pn){var In,kn=r.bBox(this),zn=r.getTranslate(this);if(yn===Pn){var er=kn.right+zn.x;(In=Jt.right+Vt.x+Ze-q-2+ne-er)>0&&(In=0)}else if(yn===0){var ir=kn.left+zn.x;(In=Jt.left+Vt.x+Ze+q+2-ir)<0&&(In=0)}In&&(Bt<3?this.setAttribute("transform","translate("+In+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Qt={},qt=y[ee],gn=v[ee],wn=y[K],hn=v[K],Xt=vt-Ae;X?(V==="pixels"?(Qt.y=ae,Qt.t=Ne*wn,Qt.b=Ne*hn):(Qt.t=Qt.b=0,Qt.yt=ae+D*wn,Qt.yb=ae-D*hn),B==="pixels"?(Qt.x=ne,Qt.l=vt*qt,Qt.r=vt*gn):(Qt.l=Xt*qt,Qt.r=Xt*gn,Qt.xl=ne-j*qt,Qt.xr=ne+j*gn)):(V==="pixels"?(Qt.x=ne,Qt.l=Ne*qt,Qt.r=Ne*gn):(Qt.l=Qt.r=0,Qt.xl=ne+D*qt,Qt.xr=ne-D*gn),B==="pixels"?(Qt.y=1-ae,Qt.t=vt*wn,Qt.b=vt*hn):(Qt.t=Xt*wn,Qt.b=Xt*hn,Qt.yt=ae-j*wn,Qt.yb=ae+j*hn));var an=R.y<.5?"b":"t",tn=R.x<.5?"l":"r";O._fullLayout._reservedMargin[R._id]={};var cn={r:me.width-dt-gt,l:dt+Qt.r,b:me.height-Et-Mt,t:Et+Qt.b};ce&&se?a.autoMargin(O,R._id,Qt):ce?O._fullLayout._reservedMargin[R._id][an]=cn[an]:se||X?O._fullLayout._reservedMargin[R._id][tn]=cn[tn]:O._fullLayout._reservedMargin[R._id][an]=cn[an]}],O)}(k,A,p);C&&C.then&&(p._promises||[]).push(C),p._context.edits.colorbarPosition&&function(P,R,O){var X,D,V,j=R.orientation==="v",B=O._fullLayout._size;h.init({element:P.node(),gd:O,prepFn:function(){X=P.attr("transform"),n(P)},moveFn:function(W,q){P.attr("transform",X+t(W,q)),D=h.align((j?R._uFrac:R._vFrac)+W/B.w,j?R._thickFrac:R._lenFrac,0,1,R.xanchor),V=h.align((j?R._vFrac:1-R._uFrac)-q/B.h,j?R._lenFrac:R._thickFrac,0,1,R.yanchor);var re=h.getCursor(D,V,R.xanchor,R.yanchor);n(P,re)},doneFn:function(){if(n(P),D!==void 0&&V!==void 0){var W={};W[R._propPrefix+"x"]=D,W[R._propPrefix+"y"]=V,R._traceIndex!==void 0?_.call("_guiRestyle",O,W,R._traceIndex):_.call("_guiRelayout",O,W)}}})}(k,A,p)}),S.exit().each(function(A){a.autoMargin(p,A._id)}).remove(),S.order()}}},76228:function(F,L,e){var T=e(71828);F.exports=function(b){return T.isPlainObject(b.colorbar)}},12311:function(F,L,e){F.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function(F,L,e){var T=e(63583),b=e(30587).counter,a=e(78607),_=e(63282).scales;function g(h){return"`"+h+"`"}a(_),F.exports=function(h,o){h=h||"";var t,i=(o=o||{}).cLetter||"c",n=("onlyIfNumerical"in o&&o.onlyIfNumerical,"noScale"in o?o.noScale:h==="marker.line"),r="showScaleDflt"in o?o.showScaleDflt:i==="z",s=typeof o.colorscaleDflt=="string"?_[o.colorscaleDflt]:null,l=o.editTypeOverride||"",u=h?h+".":"";"colorAttr"in o?(t=o.colorAttr,o.colorAttr):g(u+(t={z:"z",c:"color"}[i]));var d=i+"auto",c=i+"min",w=i+"max",m=i+"mid",f={};f[c]=f[w]=void 0;var x={};x[d]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},o.anim&&(y.color.anim=!0)),y[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:f},y[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},y[w]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},y[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:f},y.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:o.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(y.showscale={valType:"boolean",dflt:r,editType:"calc"},y.colorbar=T),o.noColorAxis||(y.coloraxis={valType:"subplotid",regex:b("coloraxis"),dflt:null,editType:"calc"}),y}},78803:function(F,L,e){var T=e(92770),b=e(71828),a=e(52075).extractOpts;F.exports=function(_,g,h){var o,t=_._fullLayout,i=h.vals,n=h.containerStr,r=n?b.nestedProperty(g,n).get():g,s=a(r),l=s.auto!==!1,u=s.min,d=s.max,c=s.mid,w=function(){return b.aggNums(Math.min,null,i)},m=function(){return b.aggNums(Math.max,null,i)};u===void 0?u=w():l&&(u=r._colorAx&&T(u)?Math.min(u,w()):w()),d===void 0?d=m():l&&(d=r._colorAx&&T(d)?Math.max(d,m()):m()),l&&c!==void 0&&(d-c>c-u?u=c-(d-c):d-c<c-u&&(d=c+(c-u))),u===d&&(u-=.5,d+=.5),s._sync("min",u),s._sync("max",d),s.autocolorscale&&(o=u*d<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,s._sync("colorscale",o))}},33046:function(F,L,e){var T=e(71828),b=e(52075).hasColorscale,a=e(52075).extractOpts;F.exports=function(_,g){function h(l,u){var d=l["_"+u];d!==void 0&&(l[u]=d)}function o(l,u){var d=u.container?T.nestedProperty(l,u.container).get():l;if(d)if(d.coloraxis)d._colorAx=g[d.coloraxis];else{var c=a(d),w=c.auto;(w||c.min===void 0)&&h(d,u.min),(w||c.max===void 0)&&h(d,u.max),c.autocolorscale&&h(d,"colorscale")}}for(var t=0;t<_.length;t++){var i=_[t],n=i._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)o(i,n[r]);else o(i,n);b(i,"marker.line")&&o(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in g._colorAxes)o(g[s],{min:"cmin",max:"cmax"})}},1586:function(F,L,e){var T=e(92770),b=e(71828),a=e(76228),_=e(62499),g=e(63282).isValid,h=e(73972).traceIs;function o(t,i){var n=i.slice(0,i.length-1);return i?b.nestedProperty(t,n).get()||{}:t}F.exports=function t(i,n,r,s,l){var u=l.prefix,d=l.cLetter,c="_module"in n,w=o(i,u),m=o(n,u),f=o(n._template||{},u)||{},x=function(){return delete i.coloraxis,delete n.coloraxis,t(i,n,r,s,l)};if(c){var y=r._colorAxes||{},v=s(u+"coloraxis");if(v){var M=h(n,"contour")&&b.nestedProperty(n,"contours.coloring").get()||"heatmap",p=y[v];return void(p?(p[2].push(x),p[0]!==M&&(p[0]=!1,b.warn(["Ignoring coloraxis:",v,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[v]=[M,n,[x]])}}var S=w[d+"min"],A=w[d+"max"],k=T(S)&&T(A)&&S<A;s(u+d+"auto",!k)?s(u+d+"mid"):(s(u+d+"min"),s(u+d+"max"));var C,P,R=w.colorscale,O=f.colorscale;R!==void 0&&(C=!g(R)),O!==void 0&&(C=!g(O)),s(u+"autocolorscale",C),s(u+"colorscale"),s(u+"reversescale"),u!=="marker.line."&&(u&&c&&(P=a(w)),s(u+"showscale",P)&&(u&&f&&(m._template=f),_(w,m,r)))}},52075:function(F,L,e){var T=e(39898),b=e(84267),a=e(92770),_=e(71828),g=e(7901),h=e(63282).isValid,o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var d,c,w,m=u._colorAx,f=m||u,x={};for(c=0;c<o.length;c++)x[w=o[c]]=f[w];if(m)for(d="c",c=0;c<t.length;c++)x[w=t[c]]=f["c"+w];else{var y;for(c=0;c<t.length;c++)((y="c"+(w=t[c]))in f||(y="z"+w)in f)&&(x[w]=f[y]);d=y.charAt(0)}return x._sync=function(v,M){var p=t.indexOf(v)!==-1?d+v:v;f[p]=f["_"+p]=M},x}function n(u){for(var d=i(u),c=d.min,w=d.max,m=d.reversescale?r(d.colorscale):d.colorscale,f=m.length,x=new Array(f),y=new Array(f),v=0;v<f;v++){var M=m[v];x[v]=c+M[0]*(w-c),y[v]=M[1]}return{domain:x,range:y}}function r(u){for(var d=u.length,c=new Array(d),w=d-1,m=0;w>=0;w--,m++){var f=u[w];c[m]=[1-f[0],f[1]]}return c}function s(u,d){d=d||{};for(var c=u.domain,w=u.range,m=w.length,f=new Array(m),x=0;x<m;x++){var y=b(w[x]).toRgb();f[x]=[y.r,y.g,y.b,y.a]}var v,M=T.scale.linear().domain(c).range(f).clamp(!0),p=d.noNumericCheck,S=d.returnArray;return(v=p&&S?M:p?function(A){return l(M(A))}:S?function(A){return a(A)?M(A):b(A).isValid()?A:g.defaultLine}:function(A){return a(A)?l(M(A)):b(A).isValid()?A:g.defaultLine}).domain=M.domain,v.range=function(){return w},v}function l(u){var d={r:u[0],g:u[1],b:u[2],a:u[3]};return b(d).toRgbString()}F.exports={hasColorscale:function(u,d,c){var w=d?_.nestedProperty(u,d).get()||{}:u,m=w[c||"color"],f=!1;if(_.isArrayOrTypedArray(m)){for(var x=0;x<m.length;x++)if(a(m[x])){f=!0;break}}return _.isPlainObject(w)&&(f||w.showscale===!0||a(w.cmin)&&a(w.cmax)||h(w.colorscale)||_.isPlainObject(w.colorbar))},extractOpts:i,extractScale:n,flipScale:r,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(u,d){return s(n(u),d)}}},21081:function(F,L,e){var T=e(63282),b=e(52075);F.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:T.scales,defaultScale:T.defaultScale,getScale:T.get,isValidScale:T.isValid,hasColorscale:b.hasColorscale,extractOpts:b.extractOpts,extractScale:b.extractScale,flipScale:b.flipScale,makeColorScaleFunc:b.makeColorScaleFunc,makeColorScaleFuncFromTrace:b.makeColorScaleFuncFromTrace}},72673:function(F,L,e){var T=e(1426).extendFlat,b=e(50693),a=e(63282).scales;F.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:T({_isSubplotObj:!0,editType:"calc"},b("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(F,L,e){var T=e(71828),b=e(44467),a=e(72673),_=e(1586);F.exports=function(g,h){function o(d,c){return T.coerce(g,h,a,d,c)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var t,i,n=h._colorAxes;function r(d,c){return T.coerce(t,i,a.coloraxis,d,c)}for(var s in n){var l=n[s];if(l[0])t=g[s]||{},(i=b.newContainer(h,s,"coloraxis"))._name=s,_(t,i,h,r,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete h._colorAxes[s]}}}},63282:function(F,L,e){var T=e(84267),b={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=b.RdBu;function _(g){var h=0;if(!Array.isArray(g)||g.length<2||!g[0]||!g[g.length-1]||+g[0][0]!=0||+g[g.length-1][0]!=1)return!1;for(var o=0;o<g.length;o++){var t=g[o];if(t.length!==2||+t[0]<h||!T(t[1]).isValid())return!1;h=+t[0]}return!0}F.exports={scales:b,defaultScale:a,get:function(g,h){if(h||(h=a),!g)return h;function o(){try{g=b[g]||JSON.parse(g)}catch{g=h}}return typeof g=="string"&&(o(),typeof g=="string"&&o()),_(g)?g:h},isValid:function(g){return b[g]!==void 0||_(g)}}},92807:function(F){F.exports=function(L,e,T,b,a){var _=(L-T)/(b-T),g=_+e/(b-T),h=(_+g)/2;return a==="left"||a==="bottom"?_:a==="center"||a==="middle"?h:a==="right"||a==="top"?g:_<.6666666666666666-h?_:g>1.3333333333333333-h?g:h}},70461:function(F,L,e){var T=e(71828),b=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];F.exports=function(a,_,g,h){return a=g==="left"?0:g==="center"?1:g==="right"?2:T.constrain(Math.floor(3*a),0,2),_=h==="bottom"?0:h==="middle"?1:h==="top"?2:T.constrain(Math.floor(3*_),0,2),b[_][a]}},64505:function(F,L){L.selectMode=function(e){return e==="lasso"||e==="select"},L.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},L.openMode=function(e){return e==="drawline"||e==="drawopenpath"},L.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},L.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},L.selectingOrDrawing=function(e){return L.freeMode(e)||L.rectMode(e)}},28569:function(F,L,e){var T=e(48956),b=e(57035),a=e(38520),_=e(71828).removeElement,g=e(85555),h=F.exports={};h.align=e(92807),h.getCursor=e(70461);var o=e(26041);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function i(n){return T(n.changedTouches?n.changedTouches[0]:n,document.body)}h.unhover=o.wrapped,h.unhoverRaw=o.raw,h.init=function(n){var r,s,l,u,d,c,w,m,f=n.gd,x=1,y=f._context.doubleClickDelay,v=n.element;f._mouseDownTime||(f._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=p,a?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=p,v.addEventListener("touchstart",p,{passive:!1})):v.ontouchstart=p;var M=n.clampFn||function(k,C,P){return Math.abs(k)<P&&(k=0),Math.abs(C)<P&&(C=0),[k,C]};function p(k){f._dragged=!1,f._dragging=!0;var C=i(k);r=C[0],s=C[1],w=k.target,c=k,m=k.buttons===2||k.ctrlKey,k.clientX===void 0&&k.clientY===void 0&&(k.clientX=r,k.clientY=s),(l=new Date().getTime())-f._mouseDownTime<y?x+=1:(x=1,f._mouseDownTime=l),n.prepFn&&n.prepFn(k,r,s),b&&!m?(d=t()).style.cursor=window.getComputedStyle(v).cursor:b||(d=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),n.dragmode!==!1&&(k.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(k){k.preventDefault();var C=i(k),P=n.minDrag||g.MINDRAG,R=M(C[0]-r,C[1]-s,P),O=R[0],X=R[1];(O||X)&&(f._dragged=!0,h.unhover(f,k)),f._dragged&&n.moveFn&&!m&&(f._dragdata={element:v,dx:O,dy:X},n.moveFn(O,X))}function A(k){if(delete f._dragdata,n.dragmode!==!1&&(k.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),b?_(d):u&&(d.documentElement.style.cursor=u,u=null),f._dragging){if(f._dragging=!1,new Date().getTime()-f._mouseDownTime>y&&(x=Math.max(x-1,1)),f._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(x,c),!m){var C;try{C=new MouseEvent("click",k)}catch{var P=i(k);(C=document.createEvent("MouseEvents")).initMouseEvent("click",k.bubbles,k.cancelable,k.view,k.detail,k.screenX,k.screenY,P[0],P[1],k.ctrlKey,k.altKey,k.shiftKey,k.metaKey,k.button,k.relatedTarget)}w.dispatchEvent(C)}f._dragging=!1,f._dragged=!1}else f._dragged=!1}},h.coverSlip=t},26041:function(F,L,e){var T=e(11086),b=e(79990),a=e(24401).getGraphDiv,_=e(26675),g=F.exports={};g.wrapped=function(h,o,t){(h=a(h))._fullLayout&&b.clear(h._fullLayout._uid+_.HOVERID),g.raw(h,o,t)},g.raw=function(h,o){var t=h._fullLayout,i=h._hoverdata;o||(o={}),o.target&&!h._dragged&&T.triggerHandler(h,"plotly_beforehover",o)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),h._hoverdata=void 0,o.target&&i&&h.emit("plotly_unhover",{event:o,points:i}))}},79952:function(F,L){L.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},L.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(F,L,e){var T=e(39898),b=e(71828),a=b.numberFormat,_=e(92770),g=e(84267),h=e(73972),o=e(7901),t=e(21081),i=b.strTranslate,n=e(63893),r=e(77922),s=e(18783).LINE_SPACING,l=e(37822).DESELECTDIM,u=e(34098),d=e(39984),c=e(23469).appendArrayPointValue,w=F.exports={};function m(Se,Me,ue){var le=Me.fillpattern,ie=le&&w.getPatternAttr(le.shape,0,"");if(ie){var ge=w.getPatternAttr(le.bgcolor,0,null),Ae=w.getPatternAttr(le.fgcolor,0,null),we=le.fgopacity,Ne=w.getPatternAttr(le.size,0,8),He=w.getPatternAttr(le.solidity,0,.3),de=Me.uid;w.pattern(Se,"point",ue,de,ie,Ne,He,void 0,le.fillmode,ge,Ae,we)}else Me.fillcolor&&Se.call(o.fill,Me.fillcolor)}w.font=function(Se,Me,ue,le){b.isPlainObject(Me)&&(le=Me.color,ue=Me.size,Me=Me.family),Me&&Se.style("font-family",Me),ue+1&&Se.style("font-size",ue+"px"),le&&Se.call(o.fill,le)},w.setPosition=function(Se,Me,ue){Se.attr("x",Me).attr("y",ue)},w.setSize=function(Se,Me,ue){Se.attr("width",Me).attr("height",ue)},w.setRect=function(Se,Me,ue,le,ie){Se.call(w.setPosition,Me,ue).call(w.setSize,le,ie)},w.translatePoint=function(Se,Me,ue,le){var ie=ue.c2p(Se.x),ge=le.c2p(Se.y);return!!(_(ie)&&_(ge)&&Me.node())&&(Me.node().nodeName==="text"?Me.attr("x",ie).attr("y",ge):Me.attr("transform",i(ie,ge)),!0)},w.translatePoints=function(Se,Me,ue){Se.each(function(le){var ie=T.select(this);w.translatePoint(le,ie,Me,ue)})},w.hideOutsideRangePoint=function(Se,Me,ue,le,ie,ge){Me.attr("display",ue.isPtWithinRange(Se,ie)&&le.isPtWithinRange(Se,ge)?null:"none")},w.hideOutsideRangePoints=function(Se,Me){if(Me._hasClipOnAxisFalse){var ue=Me.xaxis,le=Me.yaxis;Se.each(function(ie){var ge=ie[0].trace,Ae=ge.xcalendar,we=ge.ycalendar,Ne=h.traceIs(ge,"bar-like")?".bartext":".point,.textpoint";Se.selectAll(Ne).each(function(He){w.hideOutsideRangePoint(He,T.select(this),ue,le,Ae,we)})})}},w.crispRound=function(Se,Me,ue){return Me&&_(Me)?Se._context.staticPlot?Me:Me<1?1:Math.round(Me):ue||0},w.singleLineStyle=function(Se,Me,ue,le,ie){Me.style("fill","none");var ge=(((Se||[])[0]||{}).trace||{}).line||{},Ae=ue||ge.width||0,we=ie||ge.dash||"";o.stroke(Me,le||ge.color),w.dashLine(Me,we,Ae)},w.lineGroupStyle=function(Se,Me,ue,le){Se.style("fill","none").each(function(ie){var ge=(((ie||[])[0]||{}).trace||{}).line||{},Ae=Me||ge.width||0,we=le||ge.dash||"";T.select(this).call(o.stroke,ue||ge.color).call(w.dashLine,we,Ae)})},w.dashLine=function(Se,Me,ue){ue=+ue||0,Me=w.dashStyle(Me,ue),Se.style({"stroke-dasharray":Me,"stroke-width":ue+"px"})},w.dashStyle=function(Se,Me){Me=+Me||1;var ue=Math.max(Me,3);return Se==="solid"?Se="":Se==="dot"?Se=ue+"px,"+ue+"px":Se==="dash"?Se=3*ue+"px,"+3*ue+"px":Se==="longdash"?Se=5*ue+"px,"+5*ue+"px":Se==="dashdot"?Se=3*ue+"px,"+ue+"px,"+ue+"px,"+ue+"px":Se==="longdashdot"&&(Se=5*ue+"px,"+2*ue+"px,"+ue+"px,"+2*ue+"px"),Se},w.singleFillStyle=function(Se,Me){var ue=T.select(Se.node());m(Se,((ue.data()[0]||[])[0]||{}).trace||{},Me)},w.fillGroupStyle=function(Se,Me){Se.style("stroke-width",0).each(function(ue){var le=T.select(this);ue[0].trace&&m(le,ue[0].trace,Me)})};var f=e(90998);w.symbolNames=[],w.symbolFuncs=[],w.symbolBackOffs=[],w.symbolNeedLines={},w.symbolNoDot={},w.symbolNoFill={},w.symbolList=[],Object.keys(f).forEach(function(Se){var Me=f[Se],ue=Me.n;w.symbolList.push(ue,String(ue),Se,ue+100,String(ue+100),Se+"-open"),w.symbolNames[ue]=Se,w.symbolFuncs[ue]=Me.f,w.symbolBackOffs[ue]=Me.backoff||0,Me.needLine&&(w.symbolNeedLines[ue]=!0),Me.noDot?w.symbolNoDot[ue]=!0:w.symbolList.push(ue+200,String(ue+200),Se+"-dot",ue+300,String(ue+300),Se+"-open-dot"),Me.noFill&&(w.symbolNoFill[ue]=!0)});var x=w.symbolNames.length;function y(Se,Me,ue,le){var ie=Se%100;return w.symbolFuncs[ie](Me,ue,le)+(Se>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}w.symbolNumber=function(Se){if(_(Se))Se=+Se;else if(typeof Se=="string"){var Me=0;Se.indexOf("-open")>0&&(Me=100,Se=Se.replace("-open","")),Se.indexOf("-dot")>0&&(Me+=200,Se=Se.replace("-dot","")),(Se=w.symbolNames.indexOf(Se))>=0&&(Se+=Me)}return Se%100>=x||Se>=400?0:Math.floor(Math.max(Se,0))};var v={x1:1,x2:0,y1:0,y2:0},M={x1:0,x2:0,y1:1,y2:0},p=a("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:v},horizontalreversed:{node:"linearGradient",attrs:v,reversed:!0},vertical:{node:"linearGradient",attrs:M},verticalreversed:{node:"linearGradient",attrs:M,reversed:!0}};w.gradient=function(Se,Me,ue,le,ie,ge){for(var Ae=ie.length,we=S[le],Ne=new Array(Ae),He=0;He<Ae;He++)we.reversed?Ne[Ae-1-He]=[p(100*(1-ie[He][0])),ie[He][1]]:Ne[He]=[p(100*ie[He][0]),ie[He][1]];var de=Me._fullLayout,Le="g"+de._uid+"-"+ue,Ee=de._defs.select(".gradients").selectAll("#"+Le).data([le+Ne.join(";")],b.identity);Ee.exit().remove(),Ee.enter().append(we.node).each(function(){var Re=T.select(this);we.attrs&&Re.attr(we.attrs),Re.attr("id",Le);var je=Re.selectAll("stop").data(Ne);je.exit().remove(),je.enter().append("stop"),je.each(function(Fe){var Xe=g(Fe[1]);T.select(this).attr({offset:Fe[0]+"%","stop-color":o.tinyRGB(Xe),"stop-opacity":Xe.getAlpha()})})}),Se.style(ge,ee(Le,Me)).style(ge+"-opacity",null),Se.classed("gradient_filled",!0)},w.pattern=function(Se,Me,ue,le,ie,ge,Ae,we,Ne,He,de,Le){var Ee=Me==="legend";we&&(Ne==="overlay"?(He=we,de=o.contrast(He)):(He=void 0,de=we));var Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt=ue._fullLayout,ht="p"+wt._uid+"-"+le,ct={},Tt=g(de),Lt=o.tinyRGB(Tt),kt=Le*Tt.getAlpha();switch(ie){case"/":Re=ge*Math.sqrt(2),je=ge*Math.sqrt(2),at="path",ct={d:Fe="M-"+Re/4+","+je/4+"l"+Re/2+",-"+je/2+"M0,"+je+"L"+Re+",0M"+Re/4*3+","+je/4*5+"l"+Re/2+",-"+je/2,opacity:kt,stroke:Lt,"stroke-width":(Xe=Ae*ge)+"px"};break;case"\\":Re=ge*Math.sqrt(2),je=ge*Math.sqrt(2),at="path",ct={d:Fe="M"+Re/4*3+",-"+je/4+"l"+Re/2+","+je/2+"M0,0L"+Re+","+je+"M-"+Re/4+","+je/4*3+"l"+Re/2+","+je/2,opacity:kt,stroke:Lt,"stroke-width":(Xe=Ae*ge)+"px"};break;case"x":Re=ge*Math.sqrt(2),je=ge*Math.sqrt(2),Fe="M-"+Re/4+","+je/4+"l"+Re/2+",-"+je/2+"M0,"+je+"L"+Re+",0M"+Re/4*3+","+je/4*5+"l"+Re/2+",-"+je/2+"M"+Re/4*3+",-"+je/4+"l"+Re/2+","+je/2+"M0,0L"+Re+","+je+"M-"+Re/4+","+je/4*3+"l"+Re/2+","+je/2,Xe=ge-ge*Math.sqrt(1-Ae),at="path",ct={d:Fe,opacity:kt,stroke:Lt,"stroke-width":Xe+"px"};break;case"|":at="path",at="path",ct={d:Fe="M"+(Re=ge)/2+",0L"+Re/2+","+(je=ge),opacity:kt,stroke:Lt,"stroke-width":(Xe=Ae*ge)+"px"};break;case"-":at="path",at="path",ct={d:Fe="M0,"+(je=ge)/2+"L"+(Re=ge)+","+je/2,opacity:kt,stroke:Lt,"stroke-width":(Xe=Ae*ge)+"px"};break;case"+":at="path",Fe="M"+(Re=ge)/2+",0L"+Re/2+","+(je=ge)+"M0,"+je/2+"L"+Re+","+je/2,Xe=ge-ge*Math.sqrt(1-Ae),at="path",ct={d:Fe,opacity:kt,stroke:Lt,"stroke-width":Xe+"px"};break;case".":Re=ge,je=ge,Ae<Math.PI/4?Ze=Math.sqrt(Ae*ge*ge/Math.PI):(lt=Ae,ot=Math.PI/4,Ze=(bt=ge/2)+(ge/Math.sqrt(2)-bt)*(lt-ot)/(1-ot)),at="circle",ct={cx:Re/2,cy:je/2,r:Ze,opacity:kt,fill:Lt}}var Ot=[ie||"noSh",He||"noBg",de||"noFg",ge,Ae].join(";"),Pt=wt._defs.select(".patterns").selectAll("#"+ht).data([Ot],b.identity);Pt.exit().remove(),Pt.enter().append("pattern").each(function(){var et=T.select(this);if(et.attr({id:ht,width:Re+"px",height:je+"px",patternUnits:"userSpaceOnUse",patternTransform:Ee?"scale(0.8)":""}),He){var nt=g(He),Ye=o.tinyRGB(nt),tt=nt.getAlpha(),ut=et.selectAll("rect").data([0]);ut.exit().remove(),ut.enter().append("rect").attr({width:Re+"px",height:je+"px",fill:Ye,"fill-opacity":tt})}var Ke=et.selectAll(at).data([0]);Ke.exit().remove(),Ke.enter().append(at).attr(ct)}),Se.style("fill",ee(ht,ue)).style("fill-opacity",null),Se.classed("pattern_filled",!0)},w.initGradients=function(Se){var Me=Se._fullLayout;b.ensureSingle(Me._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),T.select(Se).selectAll(".gradient_filled").classed("gradient_filled",!1)},w.initPatterns=function(Se){var Me=Se._fullLayout;b.ensureSingle(Me._defs,"g","patterns").selectAll("pattern").remove(),T.select(Se).selectAll(".pattern_filled").classed("pattern_filled",!1)},w.getPatternAttr=function(Se,Me,ue){return Se&&b.isArrayOrTypedArray(Se)?Me<Se.length?Se[Me]:ue:Se},w.pointStyle=function(Se,Me,ue,le){if(Se.size()){var ie=w.makePointStyleFns(Me);Se.each(function(ge){w.singlePointStyle(ge,T.select(this),Me,ie,ue,le)})}},w.singlePointStyle=function(Se,Me,ue,le,ie,ge){var Ae=ue.marker,we=Ae.line;if(ge&&ge.i>=0&&Se.i===void 0&&(Se.i=ge.i),Me.style("opacity",le.selectedOpacityFn?le.selectedOpacityFn(Se):Se.mo===void 0?Ae.opacity:Se.mo),le.ms2mrc){var Ne;Ne=Se.ms==="various"||Ae.size==="various"?3:le.ms2mrc(Se.ms),Se.mrc=Ne,le.selectedSizeFn&&(Ne=Se.mrc=le.selectedSizeFn(Se));var He=w.symbolNumber(Se.mx||Ae.symbol)||0;Se.om=He%200>=100;var de=Oe(Se,ue),Le=$(Se,ue);Me.attr("d",y(He,Ne,de,Le))}var Ee,Re,je,Fe=!1;if(Se.so)je=we.outlierwidth,Re=we.outliercolor,Ee=Ae.outliercolor;else{var Xe=(we||{}).width;je=(Se.mlw+1||Xe+1||(Se.trace?(Se.trace.marker.line||{}).width:0)+1)-1||0,Re="mlc"in Se?Se.mlcc=le.lineScale(Se.mlc):b.isArrayOrTypedArray(we.color)?o.defaultLine:we.color,b.isArrayOrTypedArray(Ae.color)&&(Ee=o.defaultLine,Fe=!0),Ee="mc"in Se?Se.mcc=le.markerScale(Se.mc):Ae.color||Ae.colors||"rgba(0,0,0,0)",le.selectedColorFn&&(Ee=le.selectedColorFn(Se))}if(Se.om)Me.call(o.stroke,Ee).style({"stroke-width":(je||1)+"px",fill:"none"});else{Me.style("stroke-width",(Se.isBlank?0:je)+"px");var Ze=Ae.gradient,at=Se.mgt;at?Fe=!0:at=Ze&&Ze.type,b.isArrayOrTypedArray(at)&&(at=at[0],S[at]||(at=0));var lt=Ae.pattern,ot=lt&&w.getPatternAttr(lt.shape,Se.i,"");if(at&&at!=="none"){var bt=Se.mgc;bt?Fe=!0:bt=Ze.color;var wt=ue.uid;Fe&&(wt+="-"+Se.i),w.gradient(Me,ie,wt,at,[[0,bt],[1,Ee]],"fill")}else if(ot){var ht=!1,ct=lt.fgcolor;!ct&&ge&&ge.color&&(ct=ge.color,ht=!0);var Tt=w.getPatternAttr(ct,Se.i,ge&&ge.color||null),Lt=w.getPatternAttr(lt.bgcolor,Se.i,null),kt=lt.fgopacity,Ot=w.getPatternAttr(lt.size,Se.i,8),Pt=w.getPatternAttr(lt.solidity,Se.i,.3);ht=ht||Se.mcc||b.isArrayOrTypedArray(lt.shape)||b.isArrayOrTypedArray(lt.bgcolor)||b.isArrayOrTypedArray(lt.fgcolor)||b.isArrayOrTypedArray(lt.size)||b.isArrayOrTypedArray(lt.solidity);var et=ue.uid;ht&&(et+="-"+Se.i),w.pattern(Me,"point",ie,et,ot,Ot,Pt,Se.mcc,lt.fillmode,Lt,Tt,kt)}else b.isArrayOrTypedArray(Ee)?o.fill(Me,Ee[Se.i]):o.fill(Me,Ee);je&&o.stroke(Me,Re)}},w.makePointStyleFns=function(Se){var Me={},ue=Se.marker;return Me.markerScale=w.tryColorscale(ue,""),Me.lineScale=w.tryColorscale(ue,"line"),h.traceIs(Se,"symbols")&&(Me.ms2mrc=u.isBubble(Se)?d(Se):function(){return(ue.size||6)/2}),Se.selectedpoints&&b.extendFlat(Me,w.makeSelectedPointStyleFns(Se)),Me},w.makeSelectedPointStyleFns=function(Se){var Me={},ue=Se.selected||{},le=Se.unselected||{},ie=Se.marker||{},ge=ue.marker||{},Ae=le.marker||{},we=ie.opacity,Ne=ge.opacity,He=Ae.opacity,de=Ne!==void 0,Le=He!==void 0;(b.isArrayOrTypedArray(we)||de||Le)&&(Me.selectedOpacityFn=function(ot){var bt=ot.mo===void 0?ie.opacity:ot.mo;return ot.selected?de?Ne:bt:Le?He:l*bt});var Ee=ie.color,Re=ge.color,je=Ae.color;(Re||je)&&(Me.selectedColorFn=function(ot){var bt=ot.mcc||Ee;return ot.selected?Re||bt:je||bt});var Fe=ie.size,Xe=ge.size,Ze=Ae.size,at=Xe!==void 0,lt=Ze!==void 0;return h.traceIs(Se,"symbols")&&(at||lt)&&(Me.selectedSizeFn=function(ot){var bt=ot.mrc||Fe/2;return ot.selected?at?Xe/2:bt:lt?Ze/2:bt}),Me},w.makeSelectedTextStyleFns=function(Se){var Me={},ue=Se.selected||{},le=Se.unselected||{},ie=Se.textfont||{},ge=ue.textfont||{},Ae=le.textfont||{},we=ie.color,Ne=ge.color,He=Ae.color;return Me.selectedTextColorFn=function(de){var Le=de.tc||we;return de.selected?Ne||Le:He||(Ne?Le:o.addOpacity(Le,l))},Me},w.selectedPointStyle=function(Se,Me){if(Se.size()&&Me.selectedpoints){var ue=w.makeSelectedPointStyleFns(Me),le=Me.marker||{},ie=[];ue.selectedOpacityFn&&ie.push(function(ge,Ae){ge.style("opacity",ue.selectedOpacityFn(Ae))}),ue.selectedColorFn&&ie.push(function(ge,Ae){o.fill(ge,ue.selectedColorFn(Ae))}),ue.selectedSizeFn&&ie.push(function(ge,Ae){var we=Ae.mx||le.symbol||0,Ne=ue.selectedSizeFn(Ae);ge.attr("d",y(w.symbolNumber(we),Ne,Oe(Ae,Me),$(Ae,Me))),Ae.mrc2=Ne}),ie.length&&Se.each(function(ge){for(var Ae=T.select(this),we=0;we<ie.length;we++)ie[we](Ae,ge)})}},w.tryColorscale=function(Se,Me){var ue=Me?b.nestedProperty(Se,Me).get():Se;if(ue){var le=ue.color;if((ue.colorscale||ue._colorAx)&&b.isArrayOrTypedArray(le))return t.makeColorScaleFuncFromTrace(ue)}return b.identity};var A,k,C={start:1,end:-1,middle:0,bottom:1,top:-1};function P(Se,Me,ue,le,ie){var ge=T.select(Se.node().parentNode),Ae=Me.indexOf("top")!==-1?"top":Me.indexOf("bottom")!==-1?"bottom":"middle",we=Me.indexOf("left")!==-1?"end":Me.indexOf("right")!==-1?"start":"middle",Ne=le?le/.8+1:0,He=(n.lineCount(Se)-1)*s+1,de=C[we]*Ne,Le=.75*ue+C[Ae]*Ne+(C[Ae]-1)*He*ue/2;Se.attr("text-anchor",we),ie||ge.attr("transform",i(de,Le))}function R(Se,Me){var ue=Se.ts||Me.textfont.size;return _(ue)&&ue>0?ue:0}function O(Se,Me,ue){return ue&&(Se=W(Se)),Me?D(Se[1]):X(Se[0])}function X(Se){var Me=T.round(Se,2);return A=Me,Me}function D(Se){var Me=T.round(Se,2);return k=Me,Me}function V(Se,Me,ue,le){var ie=Se[0]-Me[0],ge=Se[1]-Me[1],Ae=ue[0]-Me[0],we=ue[1]-Me[1],Ne=Math.pow(ie*ie+ge*ge,.25),He=Math.pow(Ae*Ae+we*we,.25),de=(He*He*ie-Ne*Ne*Ae)*le,Le=(He*He*ge-Ne*Ne*we)*le,Ee=3*He*(Ne+He),Re=3*Ne*(Ne+He);return[[X(Me[0]+(Ee&&de/Ee)),D(Me[1]+(Ee&&Le/Ee))],[X(Me[0]-(Re&&de/Re)),D(Me[1]-(Re&&Le/Re))]]}w.textPointStyle=function(Se,Me,ue){if(Se.size()){var le;if(Me.selectedpoints){var ie=w.makeSelectedTextStyleFns(Me);le=ie.selectedTextColorFn}var ge=Me.texttemplate,Ae=ue._fullLayout;Se.each(function(we){var Ne=T.select(this),He=ge?b.extractOption(we,Me,"txt","texttemplate"):b.extractOption(we,Me,"tx","text");if(He||He===0){if(ge){var de=Me._module.formatLabels,Le=de?de(we,Me,Ae):{},Ee={};c(Ee,Me,we.i);var Re=Me._meta||{};He=b.texttemplateString(He,Le,Ae._d3locale,Ee,we,Re)}var je=we.tp||Me.textposition,Fe=R(we,Me),Xe=le?le(we):we.tc||Me.textfont.color;Ne.call(w.font,we.tf||Me.textfont.family,Fe,Xe).text(He).call(n.convertToTspans,ue).call(P,je,Fe,we.mrc)}else Ne.remove()})}},w.selectedTextStyle=function(Se,Me){if(Se.size()&&Me.selectedpoints){var ue=w.makeSelectedTextStyleFns(Me);Se.each(function(le){var ie=T.select(this),ge=ue.selectedTextColorFn(le),Ae=le.tp||Me.textposition,we=R(le,Me);o.fill(ie,ge);var Ne=h.traceIs(Me,"bar-like");P(ie,Ae,we,le.mrc2||le.mrc,Ne)})}},w.smoothopen=function(Se,Me){if(Se.length<3)return"M"+Se.join("L");var ue,le="M"+Se[0],ie=[];for(ue=1;ue<Se.length-1;ue++)ie.push(V(Se[ue-1],Se[ue],Se[ue+1],Me));for(le+="Q"+ie[0][0]+" "+Se[1],ue=2;ue<Se.length-1;ue++)le+="C"+ie[ue-2][1]+" "+ie[ue-1][0]+" "+Se[ue];return le+"Q"+ie[Se.length-3][1]+" "+Se[Se.length-1]},w.smoothclosed=function(Se,Me){if(Se.length<3)return"M"+Se.join("L")+"Z";var ue,le="M"+Se[0],ie=Se.length-1,ge=[V(Se[ie],Se[0],Se[1],Me)];for(ue=1;ue<ie;ue++)ge.push(V(Se[ue-1],Se[ue],Se[ue+1],Me));for(ge.push(V(Se[ie-1],Se[ie],Se[0],Me)),ue=1;ue<=ie;ue++)le+="C"+ge[ue-1][1]+" "+ge[ue][0]+" "+Se[ue];return le+"C"+ge[ie][1]+" "+ge[0][0]+" "+Se[0]+"Z"};var j={hv:function(Se,Me,ue){return"H"+X(Me[0])+"V"+O(Me,1,ue)},vh:function(Se,Me,ue){return"V"+D(Me[1])+"H"+O(Me,0,ue)},hvh:function(Se,Me,ue){return"H"+X((Se[0]+Me[0])/2)+"V"+D(Me[1])+"H"+O(Me,0,ue)},vhv:function(Se,Me,ue){return"V"+D((Se[1]+Me[1])/2)+"H"+X(Me[0])+"V"+O(Me,1,ue)}},B=function(Se,Me,ue){return"L"+O(Me,0,ue)+","+O(Me,1,ue)};function W(Se,Me){var ue=Se.backoff,le=Se.trace,ie=Se.d,ge=Se.i;if(ue&&le&&le.marker&&le.marker.angle%360==0&&le.line&&le.line.shape!=="spline"){var Ae=b.isArrayOrTypedArray(ue),we=Se,Ne=Me?Me[0]:A||0,He=Me?Me[1]:k||0,de=we[0],Le=we[1],Ee=de-Ne,Re=Le-He,je=Math.atan2(Re,Ee),Fe=Ae?ue[ge]:ue;if(Fe==="auto"){var Xe=we.i;le.type==="scatter"&&Xe--;var Ze=we.marker,at=Ze.symbol;b.isArrayOrTypedArray(at)&&(at=at[Xe]);var lt=Ze.size;b.isArrayOrTypedArray(lt)&&(lt=lt[Xe]),Fe=Ze?w.symbolBackOffs[w.symbolNumber(at)]*lt:0,Fe+=w.getMarkerStandoff(ie[Xe],le)||0}var ot=de-Fe*Math.cos(je),bt=Le-Fe*Math.sin(je);(ot<=de&&ot>=Ne||ot>=de&&ot<=Ne)&&(bt<=Le&&bt>=He||bt>=Le&&bt<=He)&&(Se=[ot,bt])}return Se}w.steps=function(Se){var Me=j[Se]||B;return function(ue){for(var le="M"+X(ue[0][0])+","+D(ue[0][1]),ie=ue.length,ge=1;ge<ie;ge++)le+=Me(ue[ge-1],ue[ge],ge===ie-1);return le}},w.applyBackoff=W,w.makeTester=function(){var Se=b.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(ue){ue.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Me=b.ensureSingle(Se,"path","js-reference-point",function(ue){ue.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=Se,w.testref=Me},w.savedBBoxes={};var q=0;function re(Se){var Me=Se.getAttribute("data-unformatted");if(Me!==null)return Me+Se.getAttribute("data-math")+Se.getAttribute("text-anchor")+Se.getAttribute("style")}function ee(Se,Me){if(!Se)return null;var ue=Me._context,le=ue._exportedPlot?"":ue._baseUrl||"";return le?"url('"+le+"#"+Se+"')":"url(#"+Se+")"}w.bBox=function(Se,Me,ue){var le,ie,ge;if(ue||(ue=re(Se)),ue){if(le=w.savedBBoxes[ue])return b.extendFlat({},le)}else if(Se.childNodes.length===1){var Ae=Se.childNodes[0];if(ue=re(Ae)){var we=+Ae.getAttribute("x")||0,Ne=+Ae.getAttribute("y")||0,He=Ae.getAttribute("transform");if(!He){var de=w.bBox(Ae,!1,ue);return we&&(de.left+=we,de.right+=we),Ne&&(de.top+=Ne,de.bottom+=Ne),de}if(ue+="~"+we+"~"+Ne+"~"+He,le=w.savedBBoxes[ue])return b.extendFlat({},le)}}Me?ie=Se:(ge=w.tester.node(),ie=Se.cloneNode(!0),ge.appendChild(ie)),T.select(ie).attr("transform",null).call(n.positionText,0,0);var Le=ie.getBoundingClientRect(),Ee=w.testref.node().getBoundingClientRect();Me||ge.removeChild(ie);var Re={height:Le.height,width:Le.width,left:Le.left-Ee.left,top:Le.top-Ee.top,right:Le.right-Ee.left,bottom:Le.bottom-Ee.top};return q>=1e4&&(w.savedBBoxes={},q=0),ue&&(w.savedBBoxes[ue]=Re),q++,b.extendFlat({},Re)},w.setClipUrl=function(Se,Me,ue){Se.attr("clip-path",ee(Me,ue))},w.getTranslate=function(Se){var Me=(Se[Se.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ue,le,ie){return[le,ie].join(" ")}).split(" ");return{x:+Me[0]||0,y:+Me[1]||0}},w.setTranslate=function(Se,Me,ue){var le=Se.attr?"attr":"getAttribute",ie=Se.attr?"attr":"setAttribute",ge=Se[le]("transform")||"";return Me=Me||0,ue=ue||0,ge=ge.replace(/(\btranslate\(.*?\);?)/,"").trim(),ge=(ge+=i(Me,ue)).trim(),Se[ie]("transform",ge),ge},w.getScale=function(Se){var Me=(Se[Se.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ue,le,ie){return[le,ie].join(" ")}).split(" ");return{x:+Me[0]||1,y:+Me[1]||1}},w.setScale=function(Se,Me,ue){var le=Se.attr?"attr":"getAttribute",ie=Se.attr?"attr":"setAttribute",ge=Se[le]("transform")||"";return Me=Me||1,ue=ue||1,ge=ge.replace(/(\bscale\(.*?\);?)/,"").trim(),ge=(ge+="scale("+Me+","+ue+")").trim(),Se[ie]("transform",ge),ge};var K=/\s*sc.*/;w.setPointGroupScale=function(Se,Me,ue){if(Me=Me||1,ue=ue||1,Se){var le=Me===1&&ue===1?"":"scale("+Me+","+ue+")";Se.each(function(){var ie=(this.getAttribute("transform")||"").replace(K,"");ie=(ie+=le).trim(),this.setAttribute("transform",ie)})}};var Y=/translate\([^)]*\)\s*$/;function $(Se,Me){var ue;return Se&&(ue=Se.mf),ue===void 0&&(ue=Me.marker&&Me.marker.standoff||0),Me._geo||Me._xA?ue:-ue}w.setTextPointsScale=function(Se,Me,ue){Se&&Se.each(function(){var le,ie=T.select(this),ge=ie.select("text");if(ge.node()){var Ae=parseFloat(ge.attr("x")||0),we=parseFloat(ge.attr("y")||0),Ne=(ie.attr("transform")||"").match(Y);le=Me===1&&ue===1?[]:[i(Ae,we),"scale("+Me+","+ue+")",i(-Ae,-we)],Ne&&le.push(Ne),ie.attr("transform",le.join(""))}})},w.getMarkerStandoff=$;var ne,ae,se,ce,me,ye,Te=Math.atan2,Ce=Math.cos,pe=Math.sin;function fe(Se,Me){var ue=Me[0],le=Me[1];return[ue*Ce(Se)-le*pe(Se),ue*pe(Se)+le*Ce(Se)]}function Oe(Se,Me){var ue,le,ie=Se.ma;ie===void 0&&(ie=Me.marker.angle||0);var ge=Me.marker.angleref;if(ge==="previous"||ge==="north"){if(Me._geo){var Ae=Me._geo.project(Se.lonlat);ue=Ae[0],le=Ae[1]}else{var we=Me._xA,Ne=Me._yA;if(!we||!Ne)return 90;ue=we.c2p(Se.x),le=Ne.c2p(Se.y)}if(Me._geo){var He,de=Se.lonlat[0],Le=Se.lonlat[1],Ee=Me._geo.project([de,Le+1e-5]),Re=Me._geo.project([de+1e-5,Le]),je=Te(Re[1]-le,Re[0]-ue),Fe=Te(Ee[1]-le,Ee[0]-ue);if(ge==="north")He=ie/180*Math.PI;else if(ge==="previous"){var Xe=de/180*Math.PI,Ze=Le/180*Math.PI,at=ne/180*Math.PI,lt=ae/180*Math.PI,ot=at-Xe,bt=Ce(lt)*pe(ot),wt=pe(lt)*Ce(Ze)-Ce(lt)*pe(Ze)*Ce(ot);He=-Te(bt,wt)-Math.PI,ne=de,ae=Le}var ht=fe(je,[Ce(He),0]),ct=fe(Fe,[pe(He),0]);ie=Te(ht[1]+ct[1],ht[0]+ct[0])/Math.PI*180,ge!=="previous"||ye===Me.uid&&Se.i===me+1||(ie=null)}if(ge==="previous"&&!Me._geo)if(ye===Me.uid&&Se.i===me+1&&_(ue)&&_(le)){var Tt=ue-se,Lt=le-ce,kt=Me.line&&Me.line.shape||"",Ot=kt.slice(kt.length-1);Ot==="h"&&(Lt=0),Ot==="v"&&(Tt=0),ie+=Te(Lt,Tt)/Math.PI*180+90}else ie=null}return se=ue,ce=le,me=Se.i,ye=Me.uid,ie}w.getMarkerAngle=Oe},90998:function(F,L,e){var T,b,a,_,g=e(95616),h=e(39898).round,o="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),n=Math.PI,r=Math.cos,s=Math.sin;function l(d){return d===null}function u(d,c,w){if(!(d&&d%360!=0||c))return w;if(a===d&&_===c&&T===w)return b;function m(O,X){var D=r(O),V=s(O),j=X[0],B=X[1]+(c||0);return[j*D-B*V,j*V+B*D]}a=d,_=c,T=w;for(var f=d/180*n,x=0,y=0,v=g(w),M="",p=0;p<v.length;p++){var S=v[p],A=S[0],k=x,C=y;if(A==="M"||A==="L")x=+S[1],y=+S[2];else if(A==="m"||A==="l")x+=+S[1],y+=+S[2];else if(A==="H")x=+S[1];else if(A==="h")x+=+S[1];else if(A==="V")y=+S[1];else if(A==="v")y+=+S[1];else if(A==="A"){x=+S[1],y=+S[2];var P=m(f,[+S[6],+S[7]]);S[6]=P[0],S[7]=P[1],S[3]=+S[3]+d}A!=="H"&&A!=="V"||(A="L"),A!=="h"&&A!=="v"||(A="l"),A!=="m"&&A!=="l"||(x-=k,y-=C);var R=m(f,[x,y]);A!=="H"&&A!=="V"||(A="L"),A!=="M"&&A!=="L"&&A!=="m"&&A!=="l"||(S[1]=R[0],S[2]=R[1]),S[0]=A,M+=S[0]+S.slice(1).join(",")}return b=M,M}F.exports={circle:{n:0,f:function(d,c,w){if(l(c))return o;var m=h(d,2),f="M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z";return w?u(c,w,f):f}},square:{n:1,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")}},diamond:{n:2,f:function(d,c,w){if(l(c))return o;var m=h(1.3*d,2);return u(c,w,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z")}},cross:{n:3,f:function(d,c,w){if(l(c))return o;var m=h(.4*d,2),f=h(1.2*d,2);return u(c,w,"M"+f+","+m+"H"+m+"V"+f+"H-"+m+"V"+m+"H-"+f+"V-"+m+"H-"+m+"V-"+f+"H"+m+"V-"+m+"H"+f+"Z")}},x:{n:4,f:function(d,c,w){if(l(c))return o;var m=h(.8*d/t,2),f="l"+m+","+m,x="l"+m+",-"+m,y="l-"+m+",-"+m,v="l-"+m+","+m;return u(c,w,"M0,"+m+f+x+y+x+y+v+y+v+f+v+f+"Z")}},"triangle-up":{n:5,f:function(d,c,w){if(l(c))return o;var m=h(2*d/i,2);return u(c,w,"M-"+m+","+h(d/2,2)+"H"+m+"L0,-"+h(d,2)+"Z")}},"triangle-down":{n:6,f:function(d,c,w){if(l(c))return o;var m=h(2*d/i,2);return u(c,w,"M-"+m+",-"+h(d/2,2)+"H"+m+"L0,"+h(d,2)+"Z")}},"triangle-left":{n:7,f:function(d,c,w){if(l(c))return o;var m=h(2*d/i,2);return u(c,w,"M"+h(d/2,2)+",-"+m+"V"+m+"L-"+h(d,2)+",0Z")}},"triangle-right":{n:8,f:function(d,c,w){if(l(c))return o;var m=h(2*d/i,2);return u(c,w,"M-"+h(d/2,2)+",-"+m+"V"+m+"L"+h(d,2)+",0Z")}},"triangle-ne":{n:9,f:function(d,c,w){if(l(c))return o;var m=h(.6*d,2),f=h(1.2*d,2);return u(c,w,"M-"+f+",-"+m+"H"+m+"V"+f+"Z")}},"triangle-se":{n:10,f:function(d,c,w){if(l(c))return o;var m=h(.6*d,2),f=h(1.2*d,2);return u(c,w,"M"+m+",-"+f+"V"+m+"H-"+f+"Z")}},"triangle-sw":{n:11,f:function(d,c,w){if(l(c))return o;var m=h(.6*d,2),f=h(1.2*d,2);return u(c,w,"M"+f+","+m+"H-"+m+"V-"+f+"Z")}},"triangle-nw":{n:12,f:function(d,c,w){if(l(c))return o;var m=h(.6*d,2),f=h(1.2*d,2);return u(c,w,"M-"+m+","+f+"V-"+m+"H"+f+"Z")}},pentagon:{n:13,f:function(d,c,w){if(l(c))return o;var m=h(.951*d,2),f=h(.588*d,2),x=h(-d,2),y=h(-.309*d,2);return u(c,w,"M"+m+","+y+"L"+f+","+h(.809*d,2)+"H-"+f+"L-"+m+","+y+"L0,"+x+"Z")}},hexagon:{n:14,f:function(d,c,w){if(l(c))return o;var m=h(d,2),f=h(d/2,2),x=h(d*i/2,2);return u(c,w,"M"+x+",-"+f+"V"+f+"L0,"+m+"L-"+x+","+f+"V-"+f+"L0,-"+m+"Z")}},hexagon2:{n:15,f:function(d,c,w){if(l(c))return o;var m=h(d,2),f=h(d/2,2),x=h(d*i/2,2);return u(c,w,"M-"+f+","+x+"H"+f+"L"+m+",0L"+f+",-"+x+"H-"+f+"L-"+m+",0Z")}},octagon:{n:16,f:function(d,c,w){if(l(c))return o;var m=h(.924*d,2),f=h(.383*d,2);return u(c,w,"M-"+f+",-"+m+"H"+f+"L"+m+",-"+f+"V"+f+"L"+f+","+m+"H-"+f+"L-"+m+","+f+"V-"+f+"Z")}},star:{n:17,f:function(d,c,w){if(l(c))return o;var m=1.4*d,f=h(.225*m,2),x=h(.951*m,2),y=h(.363*m,2),v=h(.588*m,2),M=h(-m,2),p=h(-.309*m,2),S=h(.118*m,2),A=h(.809*m,2);return u(c,w,"M"+f+","+p+"H"+x+"L"+y+","+S+"L"+v+","+A+"L0,"+h(.382*m,2)+"L-"+v+","+A+"L-"+y+","+S+"L-"+x+","+p+"H-"+f+"L0,"+M+"Z")}},hexagram:{n:18,f:function(d,c,w){if(l(c))return o;var m=h(.66*d,2),f=h(.38*d,2),x=h(.76*d,2);return u(c,w,"M-"+x+",0l-"+f+",-"+m+"h"+x+"l"+f+",-"+m+"l"+f+","+m+"h"+x+"l-"+f+","+m+"l"+f+","+m+"h-"+x+"l-"+f+","+m+"l-"+f+",-"+m+"h-"+x+"Z")}},"star-triangle-up":{n:19,f:function(d,c,w){if(l(c))return o;var m=h(d*i*.8,2),f=h(.8*d,2),x=h(1.6*d,2),y=h(4*d,2),v="A "+y+","+y+" 0 0 1 ";return u(c,w,"M-"+m+","+f+v+m+","+f+v+"0,-"+x+v+"-"+m+","+f+"Z")}},"star-triangle-down":{n:20,f:function(d,c,w){if(l(c))return o;var m=h(d*i*.8,2),f=h(.8*d,2),x=h(1.6*d,2),y=h(4*d,2),v="A "+y+","+y+" 0 0 1 ";return u(c,w,"M"+m+",-"+f+v+"-"+m+",-"+f+v+"0,"+x+v+m+",-"+f+"Z")}},"star-square":{n:21,f:function(d,c,w){if(l(c))return o;var m=h(1.1*d,2),f=h(2*d,2),x="A "+f+","+f+" 0 0 1 ";return u(c,w,"M-"+m+",-"+m+x+"-"+m+","+m+x+m+","+m+x+m+",-"+m+x+"-"+m+",-"+m+"Z")}},"star-diamond":{n:22,f:function(d,c,w){if(l(c))return o;var m=h(1.4*d,2),f=h(1.9*d,2),x="A "+f+","+f+" 0 0 1 ";return u(c,w,"M-"+m+",0"+x+"0,"+m+x+m+",0"+x+"0,-"+m+x+"-"+m+",0Z")}},"diamond-tall":{n:23,f:function(d,c,w){if(l(c))return o;var m=h(.7*d,2),f=h(1.4*d,2);return u(c,w,"M0,"+f+"L"+m+",0L0,-"+f+"L-"+m+",0Z")}},"diamond-wide":{n:24,f:function(d,c,w){if(l(c))return o;var m=h(1.4*d,2),f=h(.7*d,2);return u(c,w,"M0,"+f+"L"+m+",0L0,-"+f+"L-"+m+",0Z")}},hourglass:{n:25,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z")},noDot:!0},bowtie:{n:26,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,c,w){if(l(c))return o;var m=h(d,2),f=h(d/t,2);return u(c,w,"M"+f+","+f+"L-"+f+",-"+f+"M"+f+",-"+f+"L-"+f+","+f+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,c,w){if(l(c))return o;var m=h(1.3*d,2);return u(c,w,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,c,w){if(l(c))return o;var m=h(1.3*d,2),f=h(.65*d,2);return u(c,w,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+f+",-"+f+"L"+f+","+f+"M-"+f+","+f+"L"+f+",-"+f)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,c,w){if(l(c))return o;var m=h(1.4*d,2);return u(c,w,"M0,"+m+"V-"+m+"M"+m+",0H-"+m)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,c,w){if(l(c))return o;var m=h(1.2*d,2),f=h(.85*d,2);return u(c,w,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+f+","+f+"L-"+f+",-"+f+"M"+f+",-"+f+"L-"+f+","+f)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,c,w){if(l(c))return o;var m=h(d/2,2),f=h(d,2);return u(c,w,"M"+m+","+f+"V-"+f+"M"+(m-f)+",-"+f+"V"+f+"M"+f+","+m+"H-"+f+"M-"+f+","+(m-f)+"H"+f)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,c,w){if(l(c))return o;var m=h(1.2*d,2),f=h(1.6*d,2),x=h(.8*d,2);return u(c,w,"M-"+m+","+x+"L0,0M"+m+","+x+"L0,0M0,-"+f+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,c,w){if(l(c))return o;var m=h(1.2*d,2),f=h(1.6*d,2),x=h(.8*d,2);return u(c,w,"M-"+m+",-"+x+"L0,0M"+m+",-"+x+"L0,0M0,"+f+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,c,w){if(l(c))return o;var m=h(1.2*d,2),f=h(1.6*d,2),x=h(.8*d,2);return u(c,w,"M"+x+","+m+"L0,0M"+x+",-"+m+"L0,0M-"+f+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,c,w){if(l(c))return o;var m=h(1.2*d,2),f=h(1.6*d,2),x=h(.8*d,2);return u(c,w,"M-"+x+","+m+"L0,0M-"+x+",-"+m+"L0,0M"+f+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,c,w){if(l(c))return o;var m=h(1.4*d,2);return u(c,w,"M"+m+",0H-"+m)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,c,w){if(l(c))return o;var m=h(1.4*d,2);return u(c,w,"M0,"+m+"V-"+m)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M"+m+","+m+"L-"+m+",-"+m)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M0,0L-"+m+","+h(2*d,2)+"H"+m+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M0,0L-"+m+",-"+h(2*d,2)+"H"+m+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,c,w){if(l(c))return o;var m=h(2*d,2),f=h(d,2);return u(c,w,"M0,0L"+m+",-"+f+"V"+f+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,c,w){if(l(c))return o;var m=h(2*d,2),f=h(d,2);return u(c,w,"M0,0L-"+m+",-"+f+"V"+f+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M-"+m+",0H"+m+"M0,0L-"+m+","+h(2*d,2)+"H"+m+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,c,w){if(l(c))return o;var m=h(d,2);return u(c,w,"M-"+m+",0H"+m+"M0,0L-"+m+",-"+h(2*d,2)+"H"+m+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,c,w){if(l(c))return o;var m=h(2*d,2),f=h(d,2);return u(c,w,"M0,-"+f+"V"+f+"M0,0L"+m+",-"+f+"V"+f+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,c,w){if(l(c))return o;var m=h(2*d,2),f=h(d,2);return u(c,w,"M0,-"+f+"V"+f+"M0,0L-"+m+",-"+f+"V"+f+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,c,w){if(l(c))return o;var m=n/2.5,f=2*d*r(m),x=2*d*s(m);return u(c,w,"M0,0L"+-f+","+x+"L"+f+","+x+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,c,w){if(l(c))return o;var m=n/4,f=2*d*r(m),x=2*d*s(m);return u(c,w,"M0,0L"+-f+","+x+"A "+2*d+","+2*d+" 0 0 1 "+f+","+x+"Z")},backoff:.4,noDot:!0}}},25673:function(F){F.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(F,L,e){var T=e(92770),b=e(73972),a=e(89298),_=e(71828),g=e(45827);function h(o,t,i,n){var r=t["error_"+n]||{},s=[];if(r.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=g(r),u=0;u<o.length;u++){var d=o[u],c=d.i;if(c===void 0)c=u;else if(c===null)continue;var w=d[n];if(T(i.c2l(w))){var m=l(w,c);if(T(m[0])&&T(m[1])){var f=d[n+"s"]=w-m[0],x=d[n+"h"]=w+m[1];s.push(f,x)}}}var y=i._id,v=t._extremes[y],M=a.findExtremes(i,s,_.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(M.min),v.max=v.max.concat(M.max)}}F.exports=function(o){for(var t=o.calcdata,i=0;i<t.length;i++){var n=t[i],r=n[0].trace;if(r.visible===!0&&b.traceIs(r,"errorBarsOK")){var s=a.getFromId(o,r.xaxis),l=a.getFromId(o,r.yaxis);h(n,r,s,"x"),h(n,r,l,"y")}}}},45827:function(F){function L(e,T){return e==="percent"?function(b){return Math.abs(b*T/100)}:e==="constant"?function(){return Math.abs(T)}:e==="sqrt"?function(b){return Math.sqrt(Math.abs(b))}:void 0}F.exports=function(e){var T=e.type,b=e.symmetric;if(T==="data"){var a=e.array||[];if(b)return function(o,t){var i=+a[t];return[i,i]};var _=e.arrayminus||[];return function(o,t){var i=+a[t],n=+_[t];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var g=L(T,e.value),h=L(T,e.valueminus);return b||e.valueminus===void 0?function(o){var t=g(o);return[t,t]}:function(o){return[h(o),g(o)]}}},97587:function(F,L,e){var T=e(92770),b=e(73972),a=e(71828),_=e(44467),g=e(25673);F.exports=function(h,o,t,i){var n="error_"+i.axis,r=_.newContainer(o,n),s=h[n]||{};function l(w,m){return a.coerce(s,r,g,w,m)}if(l("visible",s.array!==void 0||s.value!==void 0||s.type==="sqrt")!==!1){var u=l("type","array"in s?"data":"percent"),d=!0;u!=="sqrt"&&(d=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in s))),u==="data"?(l("array"),l("traceref"),d||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),d||l("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(o["error_"+i.inherit]||{}).visible&&l(c,!(s.color||T(s.thickness)||T(s.width))),i.inherit&&r[c]||(l("color",t),l("thickness"),l("width",b.traceIs(o,"gl3d")?0:4))}}},37369:function(F,L,e){var T=e(71828),b=e(30962).overrideAll,a=e(25673),_={error_x:T.extendFlat({},a),error_y:T.extendFlat({},a)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var g={error_x:T.extendFlat({},a),error_y:T.extendFlat({},a),error_z:T.extendFlat({},a)};delete g.error_x.copy_ystyle,delete g.error_y.copy_ystyle,delete g.error_z.copy_ystyle,delete g.error_z.copy_zstyle,F.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:b(g,"calc","nested"),scattergl:b(_,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(h,o,t){(o.error_y||{}).visible&&(t.yerr=h.yh-h.y,o.error_y.symmetric||(t.yerrneg=h.y-h.ys)),(o.error_x||{}).visible&&(t.xerr=h.xh-h.x,o.error_x.symmetric||(t.xerrneg=h.x-h.xs))}}},19398:function(F,L,e){var T=e(39898),b=e(92770),a=e(91424),_=e(34098);F.exports=function(g,h,o,t){var i=o.xaxis,n=o.yaxis,r=t&&t.duration>0,s=g._context.staticPlot;h.each(function(l){var u,d=l[0].trace,c=d.error_x||{},w=d.error_y||{};d.ids&&(u=function(y){return y.id});var m=_.hasMarkers(d)&&d.marker.maxdisplayed>0;w.visible||c.visible||(l=[]);var f=T.select(this).selectAll("g.errorbar").data(l,u);if(f.exit().remove(),l.length){c.visible||f.selectAll("path.xerror").remove(),w.visible||f.selectAll("path.yerror").remove(),f.style("opacity",1);var x=f.enter().append("g").classed("errorbar",!0);r&&x.style("opacity",0).transition().duration(t.duration).style("opacity",1),a.setClipUrl(f,o.layerClipId,g),f.each(function(y){var v=T.select(this),M=function(P,R,O){var X={x:R.c2p(P.x),y:O.c2p(P.y)};return P.yh!==void 0&&(X.yh=O.c2p(P.yh),X.ys=O.c2p(P.ys),b(X.ys)||(X.noYS=!0,X.ys=O.c2p(P.ys,!0))),P.xh!==void 0&&(X.xh=R.c2p(P.xh),X.xs=R.c2p(P.xs),b(X.xs)||(X.noXS=!0,X.xs=R.c2p(P.xs,!0))),X}(y,i,n);if(!m||y.vis){var p,S=v.select("path.yerror");if(w.visible&&b(M.x)&&b(M.yh)&&b(M.ys)){var A=w.width;p="M"+(M.x-A)+","+M.yh+"h"+2*A+"m-"+A+",0V"+M.ys,M.noYS||(p+="m-"+A+",0h"+2*A),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=v.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",p)}else S.remove();var k=v.select("path.xerror");if(c.visible&&b(M.y)&&b(M.xh)&&b(M.xs)){var C=(c.copy_ystyle?w:c).width;p="M"+M.xh+","+(M.y-C)+"v"+2*C+"m0,-"+C+"H"+M.xs,M.noXS||(p+="m0,-"+C+"v"+2*C),k.size()?r&&(k=k.transition().duration(t.duration).ease(t.easing)):k=v.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("xerror",!0),k.attr("d",p)}else k.remove()}})}})}},62662:function(F,L,e){var T=e(39898),b=e(7901);F.exports=function(a){a.each(function(_){var g=_[0].trace,h=g.error_y||{},o=g.error_x||{},t=T.select(this);t.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(b.stroke,h.color),o.copy_ystyle&&(o=h),t.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(b.stroke,o.color)})}},77914:function(F,L,e){var T=e(41940),b=e(528).hoverlabel,a=e(1426).extendFlat;F.exports={hoverlabel:{bgcolor:a({},b.bgcolor,{arrayOk:!0}),bordercolor:a({},b.bordercolor,{arrayOk:!0}),font:T({arrayOk:!0,editType:"none"}),align:a({},b.align,{arrayOk:!0}),namelength:a({},b.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(F,L,e){var T=e(71828),b=e(73972);function a(_,g,h,o){o=o||T.identity,Array.isArray(_)&&(g[0][h]=o(_))}F.exports=function(_){var g=_.calcdata,h=_._fullLayout;function o(s){return function(l){return T.coerceHoverinfo({hoverinfo:l},{_module:s._module},h)}}for(var t=0;t<g.length;t++){var i=g[t],n=i[0].trace;if(!b.traceIs(n,"pie-like")){var r=b.traceIs(n,"2dMap")?a:T.fillArray;r(n.hoverinfo,i,"hi",o(n)),n.hovertemplate&&r(n.hovertemplate,i,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,i,"hbg"),r(n.hoverlabel.bordercolor,i,"hbc"),r(n.hoverlabel.font.size,i,"hts"),r(n.hoverlabel.font.color,i,"htc"),r(n.hoverlabel.font.family,i,"htf"),r(n.hoverlabel.namelength,i,"hnl"),r(n.hoverlabel.align,i,"hta"))}}}},75914:function(F,L,e){var T=e(73972),b=e(88335).hover;F.exports=function(a,_,g){var h=T.getComponentMethod("annotations","onClick")(a,a._hoverdata);function o(){a.emit("plotly_click",{points:a._hoverdata,event:_})}g!==void 0&&b(a,_,g,!0),a._hoverdata&&_&&_.target&&(h&&h.then?h.then(o):o(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}},26675:function(F){F.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(F,L,e){var T=e(71828),b=e(77914),a=e(38048);F.exports=function(_,g,h,o){var t=T.extendFlat({},o.hoverlabel);g.hovertemplate&&(t.namelength=-1),a(_,g,function(i,n){return T.coerce(_,g,b,i,n)},t)}},23469:function(F,L,e){var T=e(71828);L.getSubplot=function(o){return o.subplot||o.xaxis+o.yaxis||o.geo},L.isTraceInSubplots=function(o,t){if(o.type==="splom"){for(var i=o.xaxes||[],n=o.yaxes||[],r=0;r<i.length;r++)for(var s=0;s<n.length;s++)if(t.indexOf(i[r]+n[s])!==-1)return!0;return!1}return t.indexOf(L.getSubplot(o))!==-1},L.flat=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=t;return i},L.p2c=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=o[n].p2c(t);return i},L.getDistanceFunction=function(o,t,i,n){return o==="closest"?n||L.quadrature(t,i):o.charAt(0)==="x"?t:i},L.getClosest=function(o,t,i){if(i.index!==!1)i.index>=0&&i.index<o.length?i.distance=0:i.index=!1;else for(var n=0;n<o.length;n++){var r=t(o[n]);r<=i.distance&&(i.index=n,i.distance=r)}return i},L.inbox=function(o,t,i){return o*t<0||o===0?i:1/0},L.quadrature=function(o,t){return function(i){var n=o(i),r=t(i);return Math.sqrt(n*n+r*r)}},L.makeEventData=function(o,t,i){var n="index"in o?o.index:o.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var s=t._indexToPoints[n];s.length===1?r.pointIndex=s[0]:r.pointIndices=s}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,o,t,i,n):("xVal"in o?r.x=o.xVal:"x"in o&&(r.x=o.x),"yVal"in o?r.y=o.yVal:"y"in o&&(r.y=o.y),o.xa&&(r.xaxis=o.xa),o.ya&&(r.yaxis=o.ya),o.zLabelVal!==void 0&&(r.z=o.zLabelVal)),L.appendArrayPointValue(r,t,n),r},L.appendArrayPointValue=function(o,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var s=n[r],l=a(s);if(o[l]===void 0){var u=_(T.nestedProperty(t,s).get(),i);u!==void 0&&(o[l]=u)}}},L.appendArrayMultiPointValues=function(o,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var s=n[r],l=a(s);if(o[l]===void 0){for(var u=T.nestedProperty(t,s).get(),d=new Array(i.length),c=0;c<i.length;c++)d[c]=_(u,i[c]);o[l]=d}}};var b={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(o){return b[o]||o}function _(o,t){return Array.isArray(t)?Array.isArray(o)&&Array.isArray(o[t[0]])?o[t[0]][t[1]]:void 0:o[t]}var g={x:!0,y:!0},h={"x unified":!0,"y unified":!0};L.isUnifiedHover=function(o){return typeof o=="string"&&!!h[o]},L.isXYhover=function(o){return typeof o=="string"&&!!g[o]}},88335:function(F,L,e){var T=e(39898),b=e(92770),a=e(84267),_=e(71828),g=_.strTranslate,h=_.strRotate,o=e(11086),t=e(63893),i=e(39918),n=e(91424),r=e(7901),s=e(28569),l=e(89298),u=e(73972),d=e(23469),c=e(26675),w=e(99017),m=e(43969),f=c.YANGLE,x=Math.PI*f/180,y=1/Math.sin(x),v=Math.cos(x),M=Math.sin(x),p=c.HOVERARROWSIZE,S=c.HOVERTEXTPAD,A={box:!0,ohlc:!0,violin:!0,candlestick:!0},k={scatter:!0,scattergl:!0,splom:!0};function C(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}L.hover=function(Y,$,ne,ae){Y=_.getGraphDiv(Y);var se=$.target;_.throttle(Y._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(ce,me,ye,Te,Ce){ye||(ye="xy");var pe=Array.isArray(ye)?ye:[ye],fe=ce._fullLayout,Oe=fe._plots||[],Se=Oe[ye],Me=fe._has("cartesian");if(Se){var ue=Se.overlays.map(function(Gt){return Gt.id});pe=pe.concat(ue)}for(var le=pe.length,ie=new Array(le),ge=new Array(le),Ae=!1,we=0;we<le;we++){var Ne=pe[we];if(Oe[Ne])Ae=!0,ie[we]=Oe[Ne].xaxis,ge[we]=Oe[Ne].yaxis;else{if(!fe[Ne]||!fe[Ne]._subplot)return void _.warn("Unrecognized subplot: "+Ne);var He=fe[Ne]._subplot;ie[we]=He.xaxis,ge[we]=He.yaxis}}var de=me.hovermode||fe.hovermode;if(de&&!Ae&&(de="closest"),["x","y","closest","x unified","y unified"].indexOf(de)===-1||!ce.calcdata||ce.querySelector(".zoombox")||ce._dragging)return s.unhoverRaw(ce,me);var Le=fe.hoverdistance;Le===-1&&(Le=1/0);var Ee=fe.spikedistance;Ee===-1&&(Ee=1/0);var Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt,ht,ct,Tt,Lt=[],kt=[],Ot={hLinePoint:null,vLinePoint:null},Pt=!1;if(Array.isArray(me))for(de="array",Fe=0;Fe<me.length;Fe++)(Ze=ce.calcdata[me[Fe].curveNumber||0])&&(at=Ze[0].trace,Ze[0].trace.hoverinfo!=="skip"&&(kt.push(Ze),at.orientation==="h"&&(Pt=!0)));else{for(Xe=0;Xe<ce.calcdata.length;Xe++)Ze=ce.calcdata[Xe],(at=Ze[0].trace).hoverinfo!=="skip"&&d.isTraceInSubplots(at,pe)&&(kt.push(Ze),at.orientation==="h"&&(Pt=!0));var et,nt;if(Ce){if(o.triggerHandler(ce,"plotly_beforehover",me)===!1)return;var Ye=Ce.getBoundingClientRect();et=me.clientX-Ye.left,nt=me.clientY-Ye.top,fe._calcInverseTransform(ce);var tt=_.apply3DTransform(fe._invTransform)(et,nt);if(et=tt[0],nt=tt[1],et<0||et>ie[0]._length||nt<0||nt>ge[0]._length)return s.unhoverRaw(ce,me)}else et="xpx"in me?me.xpx:ie[0]._length/2,nt="ypx"in me?me.ypx:ge[0]._length/2;if(me.pointerX=et+ie[0]._offset,me.pointerY=nt+ge[0]._offset,Re="xval"in me?d.flat(pe,me.xval):d.p2c(ie,et),je="yval"in me?d.flat(pe,me.yval):d.p2c(ge,nt),!b(Re[0])||!b(je[0]))return _.warn("Fx.hover failed",me,ce),s.unhoverRaw(ce,me)}var ut=1/0;function Ke(Gt,ln){for(Xe=0;Xe<kt.length;Xe++)if((Ze=kt[Xe])&&Ze[0]&&Ze[0].trace&&(at=Ze[0].trace).visible===!0&&at._length!==0&&["carpet","contourcarpet"].indexOf(at._module.name)===-1){if(at.type==="splom"?lt=pe[ot=0]:(lt=d.getSubplot(at),ot=pe.indexOf(lt)),bt=de,d.isUnifiedHover(bt)&&(bt=bt.charAt(0)),ct={cd:Ze,trace:at,xa:ie[ot],ya:ge[ot],maxHoverDistance:Le,maxSpikeDistance:Ee,index:!1,distance:Math.min(ut,Le),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:r.defaultLine,name:at.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},fe[lt]&&(ct.subplot=fe[lt]._subplot),fe._splomScenes&&fe._splomScenes[at.uid]&&(ct.scene=fe._splomScenes[at.uid]),Tt=Lt.length,bt==="array"){var mn=me[Xe];"pointNumber"in mn?(ct.index=mn.pointNumber,bt="closest"):(bt="","xval"in mn&&(wt=mn.xval,bt="x"),"yval"in mn&&(ht=mn.yval,bt=bt?"closest":"y"))}else Gt!==void 0&&ln!==void 0?(wt=Gt,ht=ln):(wt=Re[ot],ht=je[ot]);if(Le!==0)if(at._module&&at._module.hoverPoints){var _n=at._module.hoverPoints(ct,wt,ht,bt,{finiteRange:!0,hoverLayer:fe._hoverlayer});if(_n)for(var Ln,Yn=0;Yn<_n.length;Yn++)Ln=_n[Yn],b(Ln.x0)&&b(Ln.y0)&&Lt.push(V(Ln,de))}else _.log("Unrecognized trace type in hover:",at);if(de==="closest"&&Lt.length>Tt&&(Lt.splice(0,Tt),ut=Lt[0].distance),Me&&Ee!==0&&Lt.length===0){ct.distance=Ee,ct.index=!1;var Nn=at._module.hoverPoints(ct,wt,ht,"closest",{hoverLayer:fe._hoverlayer});if(Nn&&(Nn=Nn.filter(function(Kt){return Kt.spikeDistance<=Ee})),Nn&&Nn.length){var Bn,rr=Nn.filter(function(Kt){return Kt.xa.showspikes&&Kt.xa.spikesnap!=="hovered data"});if(rr.length){var Yt=rr[0];b(Yt.x0)&&b(Yt.y0)&&(Bn=Be(Yt),(!Ot.vLinePoint||Ot.vLinePoint.spikeDistance>Bn.spikeDistance)&&(Ot.vLinePoint=Bn))}var An=Nn.filter(function(Kt){return Kt.ya.showspikes&&Kt.ya.spikesnap!=="hovered data"});if(An.length){var Ct=An[0];b(Ct.x0)&&b(Ct.y0)&&(Bn=Be(Ct),(!Ot.hLinePoint||Ot.hLinePoint.spikeDistance>Bn.spikeDistance)&&(Ot.hLinePoint=Bn))}}}}}function De(Gt,ln,mn){for(var _n,Ln=null,Yn=1/0,Nn=0;Nn<Gt.length;Nn++)_n=Gt[Nn].spikeDistance,mn&&Nn===0&&(_n=-1/0),_n<=Yn&&_n<=ln&&(Ln=Gt[Nn],Yn=_n);return Ln}function Be(Gt){return Gt?{xa:Gt.xa,ya:Gt.ya,x:Gt.xSpike!==void 0?Gt.xSpike:(Gt.x0+Gt.x1)/2,y:Gt.ySpike!==void 0?Gt.ySpike:(Gt.y0+Gt.y1)/2,distance:Gt.distance,spikeDistance:Gt.spikeDistance,curveNumber:Gt.trace.index,color:Gt.color,pointNumber:Gt.index}:null}Ke();var Qe={fullLayout:fe,container:fe._hoverlayer,event:me},rt=ce._spikepoints,vt={vLinePoint:Ot.vLinePoint,hLinePoint:Ot.hLinePoint};ce._spikepoints=vt;var mt=function(){Lt.sort(function(Gt,ln){return Gt.distance-ln.distance}),Lt=function(Gt,ln){for(var mn=ln.charAt(0),_n=[],Ln=[],Yn=[],Nn=0;Nn<Gt.length;Nn++){var Bn=Gt[Nn];u.traceIs(Bn.trace,"bar-like")||u.traceIs(Bn.trace,"box-violin")?Yn.push(Bn):Bn.trace[mn+"period"]?Ln.push(Bn):_n.push(Bn)}return _n.concat(Ln).concat(Yn)}(Lt,de)};mt();var xt=de.charAt(0),dt=(xt==="x"||xt==="y")&&Lt[0]&&k[Lt[0].trace.type];if(Me&&Ee!==0&&Lt.length!==0){var Et=De(Lt.filter(function(Gt){return Gt.ya.showspikes}),Ee,dt);Ot.hLinePoint=Be(Et);var pt=De(Lt.filter(function(Gt){return Gt.xa.showspikes}),Ee,dt);Ot.vLinePoint=Be(pt)}if(Lt.length===0){var gt=s.unhoverRaw(ce,me);return!Me||Ot.hLinePoint===null&&Ot.vLinePoint===null||B(rt)&&j(ce,Ot,Qe),gt}if(Me&&B(rt)&&j(ce,Ot,Qe),d.isXYhover(bt)&&Lt[0].length!==0&&Lt[0].trace.type!=="splom"){var Mt=Lt[0],Nt=(Lt=A[Mt.trace.type]?Lt.filter(function(Gt){return Gt.trace.index===Mt.trace.index}):[Mt]).length;Ke(q("x",Mt,fe),q("y",Mt,fe));var Bt,Ut=[],Jt={},Vt=0,Qt=function(Gt){var ln=A[Gt.trace.type]?C(Gt):Gt.trace.index;if(Jt[ln]){var mn=Jt[ln]-1,_n=Ut[mn];mn>0&&Math.abs(Gt.distance)<Math.abs(_n.distance)&&(Ut[mn]=Gt)}else Vt++,Jt[ln]=Vt,Ut.push(Gt)};for(Bt=0;Bt<Nt;Bt++)Qt(Lt[Bt]);for(Bt=Lt.length-1;Bt>Nt-1;Bt--)Qt(Lt[Bt]);Lt=Ut,mt()}var qt=ce._hoverdata,gn=[],wn=re(ce),hn=ee(ce);for(Fe=0;Fe<Lt.length;Fe++){var Xt=Lt[Fe],an=d.makeEventData(Xt,Xt.trace,Xt.cd);if(Xt.hovertemplate!==!1){var tn=!1;Xt.cd[Xt.index]&&Xt.cd[Xt.index].ht&&(tn=Xt.cd[Xt.index].ht),Xt.hovertemplate=tn||Xt.trace.hovertemplate||!1}if(Xt.xa&&Xt.ya){var cn=Xt.x0+Xt.xa._offset,vn=Xt.x1+Xt.xa._offset,yn=Xt.y0+Xt.ya._offset,Pn=Xt.y1+Xt.ya._offset,In=Math.min(cn,vn),kn=Math.max(cn,vn),zn=Math.min(yn,Pn),er=Math.max(yn,Pn);an.bbox={x0:In+hn,x1:kn+hn,y0:zn+wn,y1:er+wn}}Xt.eventData=[an],gn.push(an)}ce._hoverdata=gn;var ir=de==="y"&&(kt.length>1||Lt.length>1)||de==="closest"&&Pt&&Lt.length>1,fr=r.combine(fe.plot_bgcolor||r.background,fe.paper_bgcolor),ar=R(Lt,{gd:ce,hovermode:de,rotateLabels:ir,bgColor:fr,container:fe._hoverlayer,outerContainer:fe._paper.node(),commonLabelOpts:fe.hoverlabel,hoverdistance:fe.hoverdistance}),Jn=ar.hoverLabels;if(d.isUnifiedHover(de)||(function(Gt,ln,mn,_n){var Ln,Yn,Nn,Bn,rr,Yt,An,Ct=ln?"xa":"ya",Kt=ln?"ya":"xa",rn=0,Tn=1,Mn=Gt.size(),Cn=new Array(Mn),pn=0,en=_n.minX,nn=_n.maxX,fn=_n.minY,dn=_n.maxY,Rn=function(gr){return gr*mn._invScaleX},On=function(gr){return gr*mn._invScaleY};function qn(gr){var Er=gr[0],$n=gr[gr.length-1];if(Yn=Er.pmin-Er.pos-Er.dp+Er.size,Nn=$n.pos+$n.dp+$n.size-Er.pmax,Yn>.01){for(rr=gr.length-1;rr>=0;rr--)gr[rr].dp+=Yn;Ln=!1}if(!(Nn<.01)){if(Yn<-.01){for(rr=gr.length-1;rr>=0;rr--)gr[rr].dp-=Nn;Ln=!1}if(Ln){var _r=0;for(Bn=0;Bn<gr.length;Bn++)(Yt=gr[Bn]).pos+Yt.dp+Yt.size>Er.pmax&&_r++;for(Bn=gr.length-1;Bn>=0&&!(_r<=0);Bn--)(Yt=gr[Bn]).pos>Er.pmax-1&&(Yt.del=!0,_r--);for(Bn=0;Bn<gr.length&&!(_r<=0);Bn++)if((Yt=gr[Bn]).pos<Er.pmin+1)for(Yt.del=!0,_r--,Nn=2*Yt.size,rr=gr.length-1;rr>=0;rr--)gr[rr].dp-=Nn;for(Bn=gr.length-1;Bn>=0&&!(_r<=0);Bn--)(Yt=gr[Bn]).pos+Yt.dp+Yt.size>Er.pmax&&(Yt.del=!0,_r--)}}}for(Gt.each(function(gr){var Er=gr[Ct],$n=gr[Kt],_r=Er._id.charAt(0)==="x",Dr=Er.range;pn===0&&Dr&&Dr[0]>Dr[1]!==_r&&(Tn=-1);var ii=0,wi=_r?mn.width:mn.height;if(mn.hovermode==="x"||mn.hovermode==="y"){var yi,Ei,hi=X(gr,ln),Fi=gr.anchor,vo=Fi==="end"?-1:1;if(Fi==="middle")Ei=(yi=gr.crossPos+(_r?On(hi.y-gr.by/2):Rn(gr.bx/2+gr.tx2width/2)))+(_r?On(gr.by):Rn(gr.bx));else if(_r)Ei=(yi=gr.crossPos+On(p+hi.y)-On(gr.by/2-p))+On(gr.by);else{var Ra=Rn(vo*p+hi.x),Oo=Ra+Rn(vo*gr.bx);yi=gr.crossPos+Math.min(Ra,Oo),Ei=gr.crossPos+Math.max(Ra,Oo)}_r?fn!==void 0&&dn!==void 0&&Math.min(Ei,dn)-Math.max(yi,fn)>1&&($n.side==="left"?(ii=$n._mainLinePosition,wi=mn.width):wi=$n._mainLinePosition):en!==void 0&&nn!==void 0&&Math.min(Ei,nn)-Math.max(yi,en)>1&&($n.side==="top"?(ii=$n._mainLinePosition,wi=mn.height):wi=$n._mainLinePosition)}Cn[pn++]=[{datum:gr,traceIndex:gr.trace.index,dp:0,pos:gr.pos,posref:gr.posref,size:gr.by*(_r?y:1)/2,pmin:ii,pmax:wi}]}),Cn.sort(function(gr,Er){return gr[0].posref-Er[0].posref||Tn*(Er[0].traceIndex-gr[0].traceIndex)});!Ln&&rn<=Mn;){for(rn++,Ln=!0,Bn=0;Bn<Cn.length-1;){var Vn=Cn[Bn],tr=Cn[Bn+1],Zn=Vn[Vn.length-1],lr=tr[0];if((Yn=Zn.pos+Zn.dp+Zn.size-lr.pos-lr.dp+lr.size)>.01&&Zn.pmin===lr.pmin&&Zn.pmax===lr.pmax){for(rr=tr.length-1;rr>=0;rr--)tr[rr].dp+=Yn;for(Vn.push.apply(Vn,tr),Cn.splice(Bn+1,1),An=0,rr=Vn.length-1;rr>=0;rr--)An+=Vn[rr].dp;for(Nn=An/Vn.length,rr=Vn.length-1;rr>=0;rr--)Vn[rr].dp-=Nn;Ln=!1}else Bn++}Cn.forEach(qn)}for(Bn=Cn.length-1;Bn>=0;Bn--){var or=Cn[Bn];for(rr=or.length-1;rr>=0;rr--){var sr=or[rr],mr=sr.datum;mr.offset=sr.dp,mr.del=sr.del}}}(Jn,ir,fe,ar.commonLabelBoundingBox),D(Jn,ir,fe._invScaleX,fe._invScaleY)),Ce&&Ce.tagName){var br=u.getComponentMethod("annotations","hasClickToShow")(ce,gn);i(T.select(Ce),br?"pointer":"")}Ce&&!Te&&function(Gt,ln,mn){if(!mn||mn.length!==Gt._hoverdata.length)return!0;for(var _n=mn.length-1;_n>=0;_n--){var Ln=mn[_n],Yn=Gt._hoverdata[_n];if(Ln.curveNumber!==Yn.curveNumber||String(Ln.pointNumber)!==String(Yn.pointNumber)||String(Ln.pointNumbers)!==String(Yn.pointNumbers))return!0}return!1}(ce,0,qt)&&(qt&&ce.emit("plotly_unhover",{event:me,points:qt}),ce.emit("plotly_hover",{event:me,points:ce._hoverdata,xaxes:ie,yaxes:ge,xvals:Re,yvals:je}))})(Y,$,ne,ae,se)})},L.loneHover=function(Y,$){var ne=!0;Array.isArray(Y)||(ne=!1,Y=[Y]);var ae=$.gd,se=re(ae),ce=ee(ae),me=R(Y.map(function(Ce){var pe=Ce._x0||Ce.x0||Ce.x||0,fe=Ce._x1||Ce.x1||Ce.x||0,Oe=Ce._y0||Ce.y0||Ce.y||0,Se=Ce._y1||Ce.y1||Ce.y||0,Me=Ce.eventData;if(Me){var ue=Math.min(pe,fe),le=Math.max(pe,fe),ie=Math.min(Oe,Se),ge=Math.max(Oe,Se),Ae=Ce.trace;if(u.traceIs(Ae,"gl3d")){var we=ae._fullLayout[Ae.scene]._scene.container,Ne=we.offsetLeft,He=we.offsetTop;ue+=Ne,le+=Ne,ie+=He,ge+=He}Me.bbox={x0:ue+ce,x1:le+ce,y0:ie+se,y1:ge+se},$.inOut_bbox&&$.inOut_bbox.push(Me.bbox)}else Me=!1;return{color:Ce.color||r.defaultLine,x0:Ce.x0||Ce.x||0,x1:Ce.x1||Ce.x||0,y0:Ce.y0||Ce.y||0,y1:Ce.y1||Ce.y||0,xLabel:Ce.xLabel,yLabel:Ce.yLabel,zLabel:Ce.zLabel,text:Ce.text,name:Ce.name,idealAlign:Ce.idealAlign,borderColor:Ce.borderColor,fontFamily:Ce.fontFamily,fontSize:Ce.fontSize,fontColor:Ce.fontColor,nameLength:Ce.nameLength,textAlign:Ce.textAlign,trace:Ce.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ce.hovertemplate||!1,hovertemplateLabels:Ce.hovertemplateLabels||!1,eventData:Me}}),{gd:ae,hovermode:"closest",rotateLabels:!1,bgColor:$.bgColor||r.background,container:T.select($.container),outerContainer:$.outerContainer||$.container}).hoverLabels,ye=0,Te=0;return me.sort(function(Ce,pe){return Ce.y0-pe.y0}).each(function(Ce,pe){var fe=Ce.y0-Ce.by/2;Ce.offset=fe-5<ye?ye-fe+5:0,ye=fe+Ce.by+Ce.offset,pe===$.anchorIndex&&(Te=Ce.offset)}).each(function(Ce){Ce.offset-=Te}),D(me,!1,ae._fullLayout._invScaleX,ae._fullLayout._invScaleY),ne?me:me.node()};var P=/<extra>([\s\S]*)<\/extra>/;function R(Y,$){var ne=$.gd,ae=ne._fullLayout,se=$.hovermode,ce=$.rotateLabels,me=$.bgColor,ye=$.container,Te=$.outerContainer,Ce=$.commonLabelOpts||{};if(Y.length===0)return[[]];var pe=$.fontFamily||c.HOVERFONT,fe=$.fontSize||c.HOVERFONTSIZE,Oe=Y[0],Se=Oe.xa,Me=Oe.ya,ue=se.charAt(0),le=ue+"Label",ie=Oe[le];if(ie===void 0&&Se.type==="multicategory")for(var ge=0;ge<Y.length&&(ie=Y[ge][le])===void 0;ge++);var Ae=K(ne,Te),we=Ae.top,Ne=Ae.width,He=Ae.height,de=ie!==void 0&&Oe.distance<=$.hoverdistance&&(se==="x"||se==="y");if(de){var Le,Ee,Re=!0;for(Le=0;Le<Y.length;Le++)if(Re&&Y[Le].zLabel===void 0&&(Re=!1),Ee=Y[Le].hoverinfo||Y[Le].trace.hoverinfo){var je=Array.isArray(Ee)?Ee:Ee.split("+");if(je.indexOf("all")===-1&&je.indexOf(se)===-1){de=!1;break}}Re&&(de=!1)}var Fe=ye.selectAll("g.axistext").data(de?[0]:[]);Fe.enter().append("g").classed("axistext",!0),Fe.exit().remove();var Xe={minX:0,maxX:0,minY:0,maxY:0};if(Fe.each(function(){var gt=T.select(this),Mt=_.ensureSingle(gt,"path","",function(zn){zn.style({"stroke-width":"1px"})}),Nt=_.ensureSingle(gt,"text","",function(zn){zn.attr("data-notex",1)}),Bt=Ce.bgcolor||r.defaultLine,Ut=Ce.bordercolor||r.contrast(Bt),Jt=r.contrast(Bt),Vt={family:Ce.font.family||pe,size:Ce.font.size||fe,color:Ce.font.color||Jt};Mt.style({fill:Bt,stroke:Ut}),Nt.text(ie).call(n.font,Vt).call(t.positionText,0,0).call(t.convertToTspans,ne),gt.attr("transform","");var Qt,qt,gn=K(ne,Nt.node());if(se==="x"){var wn=Se.side==="top"?"-":"";Nt.attr("text-anchor","middle").call(t.positionText,0,Se.side==="top"?we-gn.bottom-p-S:we-gn.top+p+S),Qt=Se._offset+(Oe.x0+Oe.x1)/2,qt=Me._offset+(Se.side==="top"?0:Me._length);var hn=gn.width/2+S;Qt<hn?(Qt=hn,Mt.attr("d","M-"+(hn-p)+",0L-"+(hn-2*p)+","+wn+p+"H"+hn+"v"+wn+(2*S+gn.height)+"H-"+hn+"V"+wn+p+"Z")):Qt>ae.width-hn?(Qt=ae.width-hn,Mt.attr("d","M"+(hn-p)+",0L"+hn+","+wn+p+"v"+wn+(2*S+gn.height)+"H-"+hn+"V"+wn+p+"H"+(hn-2*p)+"Z")):Mt.attr("d","M0,0L"+p+","+wn+p+"H"+hn+"v"+wn+(2*S+gn.height)+"H-"+hn+"V"+wn+p+"H-"+p+"Z"),Xe.minX=Qt-hn,Xe.maxX=Qt+hn,Se.side==="top"?(Xe.minY=qt-(2*S+gn.height),Xe.maxY=qt-S):(Xe.minY=qt+S,Xe.maxY=qt+(2*S+gn.height))}else{var Xt,an,tn;Me.side==="right"?(Xt="start",an=1,tn="",Qt=Se._offset+Se._length):(Xt="end",an=-1,tn="-",Qt=Se._offset),qt=Me._offset+(Oe.y0+Oe.y1)/2,Nt.attr("text-anchor",Xt),Mt.attr("d","M0,0L"+tn+p+","+p+"V"+(S+gn.height/2)+"h"+tn+(2*S+gn.width)+"V-"+(S+gn.height/2)+"H"+tn+p+"V-"+p+"Z"),Xe.minY=qt-(S+gn.height/2),Xe.maxY=qt+(S+gn.height/2),Me.side==="right"?(Xe.minX=Qt+p,Xe.maxX=Qt+p+(2*S+gn.width)):(Xe.minX=Qt-p-(2*S+gn.width),Xe.maxX=Qt-p);var cn,vn=gn.height/2,yn=we-gn.top-vn,Pn="clip"+ae._uid+"commonlabel"+Me._id;if(Qt<gn.width+2*S+p){cn="M-"+(p+S)+"-"+vn+"h-"+(gn.width-S)+"V"+vn+"h"+(gn.width-S)+"Z";var In=gn.width-Qt+S;t.positionText(Nt,In,yn),Xt==="end"&&Nt.selectAll("tspan").each(function(){var zn=T.select(this),er=n.tester.append("text").text(zn.text()).call(n.font,Vt),ir=K(ne,er.node());Math.round(ir.width)<Math.round(gn.width)&&zn.attr("x",In-ir.width),er.remove()})}else t.positionText(Nt,an*(S+p),yn),cn=null;var kn=ae._topclips.selectAll("#"+Pn).data(cn?[0]:[]);kn.enter().append("clipPath").attr("id",Pn).append("path"),kn.exit().remove(),kn.select("path").attr("d",cn),n.setClipUrl(Nt,cn?Pn:null,ne)}gt.attr("transform",g(Qt,qt))}),d.isUnifiedHover(se)){ye.selectAll("g.hovertext").remove();var Ze=Y.filter(function(gt){return gt.hoverinfo!=="none"});if(Ze.length===0)return[];var at=ae.hoverlabel,lt=at.font,ot={showlegend:!0,legend:{title:{text:ie,font:lt},font:lt,bgcolor:at.bgcolor,bordercolor:at.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ae.legend?ae.legend.traceorder:void 0,orientation:"v"}},bt={font:lt};w(ot,bt,ne._fullData);var wt=bt.legend;wt.entries=[];for(var ht=0;ht<Ze.length;ht++){var ct=Ze[ht];if(ct.hoverinfo!=="none"){var Tt=O(ct,!0,se,ae,ie),Lt=Tt[0],kt=Tt[1];ct.name=kt,ct.text=kt!==""?kt+" : "+Lt:Lt;var Ot=ct.cd[ct.index];Ot&&(Ot.mc&&(ct.mc=Ot.mc),Ot.mcc&&(ct.mc=Ot.mcc),Ot.mlc&&(ct.mlc=Ot.mlc),Ot.mlcc&&(ct.mlc=Ot.mlcc),Ot.mlw&&(ct.mlw=Ot.mlw),Ot.mrc&&(ct.mrc=Ot.mrc),Ot.dir&&(ct.dir=Ot.dir)),ct._distinct=!0,wt.entries.push([ct])}}wt.entries.sort(function(gt,Mt){return gt[0].trace.index-Mt[0].trace.index}),wt.layer=ye,wt._inHover=!0,wt._groupTitleFont=at.grouptitlefont,m(ne,wt);var Pt,et,nt,Ye,tt=ye.select("g.legend"),ut=K(ne,tt.node()),Ke=ut.width+2*S,De=ut.height+2*S,Be=Ze[0],Qe=(Be.x0+Be.x1)/2,rt=(Be.y0+Be.y1)/2,vt=!(u.traceIs(Be.trace,"bar-like")||u.traceIs(Be.trace,"box-violin"));ue==="y"?vt?(et=rt-S,Pt=rt+S):(et=Math.min.apply(null,Ze.map(function(gt){return Math.min(gt.y0,gt.y1)})),Pt=Math.max.apply(null,Ze.map(function(gt){return Math.max(gt.y0,gt.y1)}))):et=Pt=_.mean(Ze.map(function(gt){return(gt.y0+gt.y1)/2}))-De/2,ue==="x"?vt?(nt=Qe+S,Ye=Qe-S):(nt=Math.max.apply(null,Ze.map(function(gt){return Math.max(gt.x0,gt.x1)})),Ye=Math.min.apply(null,Ze.map(function(gt){return Math.min(gt.x0,gt.x1)}))):nt=Ye=_.mean(Ze.map(function(gt){return(gt.x0+gt.x1)/2}))-Ke/2;var mt,xt,dt=Se._offset,Et=Me._offset;return Ye+=dt-Ke,et+=Et-De,mt=(nt+=dt)+Ke<Ne&&nt>=0?nt:Ye+Ke<Ne&&Ye>=0?Ye:dt+Ke<Ne?dt:nt-Qe<Qe-Ye+Ke?Ne-Ke:0,mt+=S,xt=(Pt+=Et)+De<He&&Pt>=0?Pt:et+De<He&&et>=0?et:Et+De<He?Et:Pt-rt<rt-et+De?He-De:0,xt+=S,tt.attr("transform",g(mt-1,xt-1)),tt}var pt=ye.selectAll("g.hovertext").data(Y,function(gt){return C(gt)});return pt.enter().append("g").classed("hovertext",!0).each(function(){var gt=T.select(this);gt.append("rect").call(r.fill,r.addOpacity(me,.8)),gt.append("text").classed("name",!0),gt.append("path").style("stroke-width","1px"),gt.append("text").classed("nums",!0).call(n.font,pe,fe)}),pt.exit().remove(),pt.each(function(gt){var Mt=T.select(this).attr("transform",""),Nt=gt.color;Array.isArray(Nt)&&(Nt=Nt[gt.eventData[0].pointNumber]);var Bt=gt.bgcolor||Nt,Ut=r.combine(r.opacity(Bt)?Bt:r.defaultLine,me),Jt=r.combine(r.opacity(Nt)?Nt:r.defaultLine,me),Vt=gt.borderColor||r.contrast(Ut),Qt=O(gt,de,se,ae,ie,Mt),qt=Qt[0],gn=Qt[1],wn=Mt.select("text.nums").call(n.font,gt.fontFamily||pe,gt.fontSize||fe,gt.fontColor||Vt).text(qt).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,ne),hn=Mt.select("text.name"),Xt=0,an=0;if(gn&&gn!==qt){hn.call(n.font,gt.fontFamily||pe,gt.fontSize||fe,Jt).text(gn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,ne);var tn=K(ne,hn.node());Xt=tn.width+2*S,an=tn.height+2*S}else hn.remove(),Mt.select("rect").remove();Mt.select("path").style({fill:Ut,stroke:Vt});var cn=gt.xa._offset+(gt.x0+gt.x1)/2,vn=gt.ya._offset+(gt.y0+gt.y1)/2,yn=Math.abs(gt.x1-gt.x0),Pn=Math.abs(gt.y1-gt.y0),In=K(ne,wn.node()),kn=In.width/ae._invScaleX,zn=In.height/ae._invScaleY;gt.ty0=(we-In.top)/ae._invScaleY,gt.bx=kn+2*S,gt.by=Math.max(zn+2*S,an),gt.anchor="start",gt.txwidth=kn,gt.tx2width=Xt,gt.offset=0;var er,ir,fr=(kn+p+S+Xt)*ae._invScaleX;if(ce)gt.pos=cn,er=vn+Pn/2+fr<=He,ir=vn-Pn/2-fr>=0,gt.idealAlign!=="top"&&er||!ir?er?(vn+=Pn/2,gt.anchor="start"):gt.anchor="middle":(vn-=Pn/2,gt.anchor="end"),gt.crossPos=vn;else{if(gt.pos=vn,er=cn+yn/2+fr<=Ne,ir=cn-yn/2-fr>=0,gt.idealAlign!=="left"&&er||!ir)if(er)cn+=yn/2,gt.anchor="start";else{gt.anchor="middle";var ar=fr/2,Jn=cn+ar-Ne,br=cn-ar;Jn>0&&(cn-=Jn),br<0&&(cn+=-br)}else cn-=yn/2,gt.anchor="end";gt.crossPos=cn}wn.attr("text-anchor",gt.anchor),Xt&&hn.attr("text-anchor",gt.anchor),Mt.attr("transform",g(cn,vn)+(ce?h(f):""))}),{hoverLabels:pt,commonLabelBoundingBox:Xe}}function O(Y,$,ne,ae,se,ce){var me="",ye="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=_.templateString(Y.name,Y.trace._meta)),me=W(Y.name,Y.nameLength));var Te=ne.charAt(0),Ce=Te==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(ye+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(ye+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(ye+=(ye?"z: ":"")+Y.zLabel)):$&&Y[Te+"Label"]===se?ye=Y[Ce+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(ye=Y.yLabel):ye=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(ye+=(ye?"<br>":"")+Y.text),Y.extraText!==void 0&&(ye+=(ye?"<br>":"")+Y.extraText),ce&&ye===""&&!Y.hovertemplate&&(me===""&&ce.remove(),ye=me);var pe=Y.hovertemplate||!1;if(pe){var fe=Y.hovertemplateLabels||Y;Y[Te+"Label"]!==se&&(fe[Te+"other"]=fe[Te+"Val"],fe[Te+"otherLabel"]=fe[Te+"Label"]),ye=(ye=_.hovertemplateString(pe,fe,ae._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(P,function(Oe,Se){return me=W(Se,Y.nameLength),""})}return[ye,me]}function X(Y,$){var ne=0,ae=Y.offset;return $&&(ae*=-M,ne=Y.offset*v),{x:ne,y:ae}}function D(Y,$,ne,ae){var se=function(me){return me*ne},ce=function(me){return me*ae};Y.each(function(me){var ye=T.select(this);if(me.del)return ye.remove();var Te,Ce,pe,fe,Oe=ye.select("text.nums"),Se=me.anchor,Me=Se==="end"?-1:1,ue=(fe=(pe=(Ce={start:1,end:-1,middle:0}[(Te=me).anchor])*(p+S))+Ce*(Te.txwidth+S),Te.anchor==="middle"&&(pe-=Te.tx2width/2,fe+=Te.txwidth/2+S),{alignShift:Ce,textShiftX:pe,text2ShiftX:fe}),le=X(me,$),ie=le.x,ge=le.y,Ae=Se==="middle";ye.select("path").attr("d",Ae?"M-"+se(me.bx/2+me.tx2width/2)+","+ce(ge-me.by/2)+"h"+se(me.bx)+"v"+ce(me.by)+"h-"+se(me.bx)+"Z":"M0,0L"+se(Me*p+ie)+","+ce(p+ge)+"v"+ce(me.by/2-p)+"h"+se(Me*me.bx)+"v-"+ce(me.by)+"H"+se(Me*p+ie)+"V"+ce(ge-p)+"Z");var we=ie+ue.textShiftX,Ne=ge+me.ty0-me.by/2+S,He=me.textAlign||"auto";He!=="auto"&&(He==="left"&&Se!=="start"?(Oe.attr("text-anchor","start"),we=Ae?-me.bx/2-me.tx2width/2+S:-me.bx-S):He==="right"&&Se!=="end"&&(Oe.attr("text-anchor","end"),we=Ae?me.bx/2-me.tx2width/2-S:me.bx+S)),Oe.call(t.positionText,se(we),ce(Ne)),me.tx2width&&(ye.select("text.name").call(t.positionText,se(ue.text2ShiftX+ue.alignShift*S+ie),ce(ge+me.ty0-me.by/2+S)),ye.select("rect").call(n.setRect,se(ue.text2ShiftX+(ue.alignShift-1)*me.tx2width/2+ie),ce(ge-me.by/2-1),se(me.tx2width),ce(me.by+2)))})}function V(Y,$){var ne=Y.index,ae=Y.trace||{},se=Y.cd[0],ce=Y.cd[ne]||{};function me(Oe){return Oe||b(Oe)&&Oe===0}var ye=Array.isArray(ne)?function(Oe,Se){var Me=_.castOption(se,ne,Oe);return me(Me)?Me:_.extractOption({},ae,"",Se)}:function(Oe,Se){return _.extractOption(ce,ae,Oe,Se)};function Te(Oe,Se,Me){var ue=ye(Se,Me);me(ue)&&(Y[Oe]=ue)}if(Te("hoverinfo","hi","hoverinfo"),Te("bgcolor","hbg","hoverlabel.bgcolor"),Te("borderColor","hbc","hoverlabel.bordercolor"),Te("fontFamily","htf","hoverlabel.font.family"),Te("fontSize","hts","hoverlabel.font.size"),Te("fontColor","htc","hoverlabel.font.color"),Te("nameLength","hnl","hoverlabel.namelength"),Te("textAlign","hta","hoverlabel.align"),Y.posref=$==="y"||$==="closest"&&ae.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=_.constrain(Y.x0,0,Y.xa._length),Y.x1=_.constrain(Y.x1,0,Y.xa._length),Y.y0=_.constrain(Y.y0,0,Y.ya._length),Y.y1=_.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:l.hoverLabelText(Y.xa,Y.xLabelVal,ae.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:l.hoverLabelText(Y.ya,Y.yLabelVal,ae.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var Ce=l.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+Ce+" / -"+l.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+="  "+Ce,$==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var pe=l.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+pe+" / -"+l.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+="  "+pe,$==="y"&&(Y.distance+=1)}var fe=Y.hoverinfo||Y.trace.hoverinfo;return fe&&fe!=="all"&&((fe=Array.isArray(fe)?fe:fe.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),fe.indexOf("y")===-1&&(Y.yLabel=void 0),fe.indexOf("z")===-1&&(Y.zLabel=void 0),fe.indexOf("text")===-1&&(Y.text=void 0),fe.indexOf("name")===-1&&(Y.name=void 0)),Y}function j(Y,$,ne){var ae,se,ce=ne.container,me=ne.fullLayout,ye=me._size,Te=ne.event,Ce=!!$.hLinePoint,pe=!!$.vLinePoint;if(ce.selectAll(".spikeline").remove(),pe||Ce){var fe=r.combine(me.plot_bgcolor,me.paper_bgcolor);if(Ce){var Oe,Se,Me=$.hLinePoint;ae=Me&&Me.xa,(se=Me&&Me.ya).spikesnap==="cursor"?(Oe=Te.pointerX,Se=Te.pointerY):(Oe=ae._offset+Me.x,Se=se._offset+Me.y);var ue,le,ie=a.readability(Me.color,fe)<1.5?r.contrast(fe):Me.color,ge=se.spikemode,Ae=se.spikethickness,we=se.spikecolor||ie,Ne=l.getPxPosition(Y,se);if(ge.indexOf("toaxis")!==-1||ge.indexOf("across")!==-1){if(ge.indexOf("toaxis")!==-1&&(ue=Ne,le=Oe),ge.indexOf("across")!==-1){var He=se._counterDomainMin,de=se._counterDomainMax;se.anchor==="free"&&(He=Math.min(He,se.position),de=Math.max(de,se.position)),ue=ye.l+He*ye.w,le=ye.l+de*ye.w}ce.insert("line",":first-child").attr({x1:ue,x2:le,y1:Se,y2:Se,"stroke-width":Ae,stroke:we,"stroke-dasharray":n.dashStyle(se.spikedash,Ae)}).classed("spikeline",!0).classed("crisp",!0),ce.insert("line",":first-child").attr({x1:ue,x2:le,y1:Se,y2:Se,"stroke-width":Ae+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}ge.indexOf("marker")!==-1&&ce.insert("circle",":first-child").attr({cx:Ne+(se.side!=="right"?Ae:-Ae),cy:Se,r:Ae,fill:we}).classed("spikeline",!0)}if(pe){var Le,Ee,Re=$.vLinePoint;ae=Re&&Re.xa,se=Re&&Re.ya,ae.spikesnap==="cursor"?(Le=Te.pointerX,Ee=Te.pointerY):(Le=ae._offset+Re.x,Ee=se._offset+Re.y);var je,Fe,Xe=a.readability(Re.color,fe)<1.5?r.contrast(fe):Re.color,Ze=ae.spikemode,at=ae.spikethickness,lt=ae.spikecolor||Xe,ot=l.getPxPosition(Y,ae);if(Ze.indexOf("toaxis")!==-1||Ze.indexOf("across")!==-1){if(Ze.indexOf("toaxis")!==-1&&(je=ot,Fe=Ee),Ze.indexOf("across")!==-1){var bt=ae._counterDomainMin,wt=ae._counterDomainMax;ae.anchor==="free"&&(bt=Math.min(bt,ae.position),wt=Math.max(wt,ae.position)),je=ye.t+(1-wt)*ye.h,Fe=ye.t+(1-bt)*ye.h}ce.insert("line",":first-child").attr({x1:Le,x2:Le,y1:je,y2:Fe,"stroke-width":at,stroke:lt,"stroke-dasharray":n.dashStyle(ae.spikedash,at)}).classed("spikeline",!0).classed("crisp",!0),ce.insert("line",":first-child").attr({x1:Le,x2:Le,y1:je,y2:Fe,"stroke-width":at+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}Ze.indexOf("marker")!==-1&&ce.insert("circle",":first-child").attr({cx:Le,cy:ot-(ae.side!=="top"?at:-at),r:at,fill:lt}).classed("spikeline",!0)}}}function B(Y,$){return!$||$.vLinePoint!==Y._spikepoints.vLinePoint||$.hLinePoint!==Y._spikepoints.hLinePoint}function W(Y,$){return t.plainText(Y||"",{len:$,allowedTags:["br","sub","sup","b","i","em"]})}function q(Y,$,ne){var ae=$[Y+"a"],se=$[Y+"Val"],ce=$.cd[0];if(ae.type==="category"||ae.type==="multicategory")se=ae._categoriesMap[se];else if(ae.type==="date"){var me=$.trace[Y+"periodalignment"];if(me){var ye=$.cd[$.index],Te=ye[Y+"Start"];Te===void 0&&(Te=ye[Y]);var Ce=ye[Y+"End"];Ce===void 0&&(Ce=ye[Y]);var pe=Ce-Te;me==="end"?se+=pe:me==="middle"&&(se+=pe/2)}se=ae.d2c(se)}return ce&&ce.t&&ce.t.posLetter===ae._id&&(ne.boxmode!=="group"&&ne.violinmode!=="group"||(se+=ce.t.dPos)),se}function re(Y){return Y.offsetTop+Y.clientTop}function ee(Y){return Y.offsetLeft+Y.clientLeft}function K(Y,$){var ne=Y._fullLayout,ae=$.getBoundingClientRect(),se=ae.left,ce=ae.top,me=se+ae.width,ye=ce+ae.height,Te=_.apply3DTransform(ne._invTransform)(se,ce),Ce=_.apply3DTransform(ne._invTransform)(me,ye),pe=Te[0],fe=Te[1],Oe=Ce[0],Se=Ce[1];return{x:pe,y:fe,width:Oe-pe,height:Se-fe,top:Math.min(fe,Se),left:Math.min(pe,Oe),right:Math.max(pe,Oe),bottom:Math.max(fe,Se)}}},38048:function(F,L,e){var T=e(71828),b=e(7901),a=e(23469).isUnifiedHover;F.exports=function(_,g,h,o){o=o||{};var t=g.legend;function i(n){o.font[n]||(o.font[n]=t?g.legend.font[n]:g.font[n])}g&&a(g.hovermode)&&(o.font||(o.font={}),i("size"),i("family"),i("color"),t?(o.bgcolor||(o.bgcolor=b.combine(g.legend.bgcolor,g.paper_bgcolor)),o.bordercolor||(o.bordercolor=g.legend.bordercolor)):o.bgcolor||(o.bgcolor=g.paper_bgcolor)),h("hoverlabel.bgcolor",o.bgcolor),h("hoverlabel.bordercolor",o.bordercolor),h("hoverlabel.namelength",o.namelength),T.coerceFont(h,"hoverlabel.font",o.font),h("hoverlabel.align",o.align)}},98212:function(F,L,e){var T=e(71828),b=e(528);F.exports=function(a,_){function g(h,o){return _[h]!==void 0?_[h]:T.coerce(a,_,b,h,o)}return g("clickmode"),g("hovermode")}},30211:function(F,L,e){var T=e(39898),b=e(71828),a=e(28569),_=e(23469),g=e(528),h=e(88335);F.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:g},attributes:e(77914),layoutAttributes:g,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:function(o,t,i){return b.castOption(o,t,"hoverlabel."+i)},castHoverinfo:function(o,t,i){return b.castOption(o,i,"hoverinfo",function(n){return b.coerceHoverinfo({hoverinfo:n},{_module:o._module},t)})},hover:h.hover,unhover:a.unhover,loneHover:h.loneHover,loneUnhover:function(o){var t=b.isD3Selection(o)?o:T.select(o);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function(F,L,e){var T=e(26675),b=e(41940),a=b({editType:"none"});a.family.dflt=T.HOVERFONT,a.size.dflt=T.HOVERFONTSIZE,F.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,grouptitlefont:b({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(F,L,e){var T=e(71828),b=e(528),a=e(98212),_=e(38048);F.exports=function(g,h){function o(r,s){return T.coerce(g,h,b,r,s)}a(g,h)&&(o("hoverdistance"),o("spikedistance")),o("dragmode")==="select"&&o("selectdirection");var t=h._has("mapbox"),i=h._has("geo"),n=h._basePlotModules.length;h.dragmode==="zoom"&&((t||i)&&n===1||t&&i&&n===2)&&(h.dragmode="pan"),_(g,h,o),T.coerceFont(o,"hoverlabel.grouptitlefont",h.hoverlabel.font)}},22774:function(F,L,e){var T=e(71828),b=e(38048),a=e(528);F.exports=function(_,g){b(_,g,function(h,o){return T.coerce(_,g,a,h,o)})}},83312:function(F,L,e){var T=e(71828),b=e(30587).counter,a=e(27670).Y,_=e(85555).idRegex,g=e(44467),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[b("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function o(n,r,s){var l=r[s+"axes"],u=Object.keys((n._splomAxes||{})[s]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(n,r,s,l,u,d){var c=r(n+"gap",s),w=r("domain."+n);r(n+"side",l);for(var m=new Array(u),f=w[0],x=(w[1]-f)/(u-c),y=x*(1-c),v=0;v<u;v++){var M=f+x*v;m[d?u-1-v:v]=[M,M+y]}return m}function i(n,r,s,l,u){var d,c=new Array(s);function w(m,f){r.indexOf(f)!==-1&&l[f]===void 0?(c[m]=f,l[f]=m):c[m]=""}if(Array.isArray(n))for(d=0;d<s;d++)w(d,n[d]);else for(w(0,u),d=1;d<s;d++)w(d,u+(d+1));return c}F.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},layoutAttributes:h,sizeDefaults:function(n,r){var s=n.grid||{},l=o(r,s,"x"),u=o(r,s,"y");if(n.grid||l||u){var d,c,w=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),m=Array.isArray(l),f=Array.isArray(u),x=m&&l!==s.xaxes&&f&&u!==s.yaxes;w?(d=s.subplots.length,c=s.subplots[0].length):(f&&(d=u.length),m&&(c=l.length));var y=g.newContainer(r,"grid"),v=P("rows",d),M=P("columns",c);if(v*M>1){w||m||f||P("pattern")==="independent"&&(w=!0),y._hasSubplotGrid=w;var p,S,A=P("roworder")==="top to bottom",k=w?.2:.1,C=w?.3:.1;x&&r._splomGridDflt&&(p=r._splomGridDflt.xside,S=r._splomGridDflt.yside),y._domains={x:t("x",P,k,p,M),y:t("y",P,C,S,v,A)}}else delete r.grid}function P(R,O){return T.coerce(s,y,h,R,O)}},contentDefaults:function(n,r){var s=r.grid;if(s&&s._domains){var l,u,d,c,w,m,f,x=n.grid||{},y=r._subplots,v=s._hasSubplotGrid,M=s.rows,p=s.columns,S=s.pattern==="independent",A=s._axisMap={};if(v){var k=x.subplots||[];m=s.subplots=new Array(M);var C=1;for(l=0;l<M;l++){var P=m[l]=new Array(p),R=k[l]||[];for(u=0;u<p;u++)if(S?(w=C===1?"xy":"x"+C+"y"+C,C++):w=R[u],P[u]="",y.cartesian.indexOf(w)!==-1){if(f=w.indexOf("y"),d=w.slice(0,f),c=w.slice(f),A[d]!==void 0&&A[d]!==u||A[c]!==void 0&&A[c]!==l)continue;P[u]=w,A[d]=u,A[c]=l}}}else{var O=o(r,x,"x"),X=o(r,x,"y");s.xaxes=i(O,y.xaxis,p,A,"x"),s.yaxes=i(X,y.yaxis,M,A,"y")}var D=s._anchors={},V=s.roworder==="top to bottom";for(var j in A){var B,W,q,re=j.charAt(0),ee=s[re+"side"];if(ee.length<8)D[j]="free";else if(re==="x"){if(ee.charAt(0)==="t"===V?(B=0,W=1,q=M):(B=M-1,W=-1,q=-1),v){var K=A[j];for(l=B;l!==q;l+=W)if((w=m[l][K])&&(f=w.indexOf("y"),w.slice(0,f)===j)){D[j]=w.slice(f);break}}else for(l=B;l!==q;l+=W)if(c=s.yaxes[l],y.cartesian.indexOf(j+c)!==-1){D[j]=c;break}}else if(ee.charAt(0)==="l"?(B=0,W=1,q=p):(B=p-1,W=-1,q=-1),v){var Y=A[j];for(l=B;l!==q;l+=W)if((w=m[Y][l])&&(f=w.indexOf("y"),w.slice(f)===j)){D[j]=w.slice(0,f);break}}else for(l=B;l!==q;l+=W)if(d=s.xaxes[l],y.cartesian.indexOf(d+j)!==-1){D[j]=d;break}}}}}},69819:function(F,L,e){var T=e(85555),b=e(44467).templatedArray;e(24695),F.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(F,L,e){var T=e(92770),b=e(58163);F.exports=function(a,_,g,h){_=_||{};var o=g==="log"&&_.type==="linear",t=g==="linear"&&_.type==="log";if(o||t){for(var i,n,r=a._fullLayout.images,s=_._id.charAt(0),l=0;l<r.length;l++)if(n="images["+l+"].",(i=r[l])[s+"ref"]===_._id){var u=i[s],d=i["size"+s],c=null,w=null;if(o){c=b(u,_.range);var m=d/Math.pow(10,c)/2;w=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else w=(c=Math.pow(10,u))*(Math.pow(10,d/2)-Math.pow(10,-d/2));T(c)?T(w)||(w=null):(c=null,w=null),h(n+s,c),h(n+"size"+s,w)}}}},81603:function(F,L,e){var T=e(71828),b=e(89298),a=e(85501),_=e(69819);function g(h,o,t){function i(c,w){return T.coerce(h,o,_,c,w)}var n=i("source");if(!i("visible",!!n))return o;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var r={_fullLayout:t},s=["x","y"],l=0;l<2;l++){var u=s[l],d=b.coerceRef(h,o,r,u,"paper",void 0);d!=="paper"&&b.getFromId(r,d)._imgIndices.push(o._index),b.coercePosition(o,r,i,d,u,0)}return o}F.exports=function(h,o){a(h,o,{name:"images",handleItemDefaults:g})}},80750:function(F,L,e){var T=e(39898),b=e(91424),a=e(89298),_=e(41675),g=e(77922);F.exports=function(h){var o,t,i=h._fullLayout,n=[],r={},s=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=_.ref2id(l.xref)+_.ref2id(l.yref);var u=i._plots[o];if(!u){s.push(l);continue}u.mainplot&&(o=u.mainplot.id),r[o]||(r[o]=[]),r[o].push(l)}else l.layer==="above"?n.push(l):s.push(l)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function w(p){var S=T.select(this);if(this._imgSrc!==p.source)if(S.attr("xmlns",g.svg),p.source&&p.source.slice(0,5)==="data:")S.attr("xlink:href",p.source),this._imgSrc=p.source;else{var A=new Promise((function(k){var C=new Image;function P(){S.remove(),k()}this.img=C,C.setAttribute("crossOrigin","anonymous"),C.onerror=P,C.onload=function(){var R=document.createElement("canvas");R.width=this.width,R.height=this.height,R.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var O=R.toDataURL("image/png");S.attr("xlink:href",O),k()},S.on("error",P),C.src=p.source,this._imgSrc=p.source}).bind(this));h._promises.push(A)}}function m(p){var S,A,k=T.select(this),C=a.getFromId(h,p.xref),P=a.getFromId(h,p.yref),R=a.getRefType(p.xref)==="domain",O=a.getRefType(p.yref)==="domain",X=i._size;S=C!==void 0?typeof p.xref=="string"&&R?C._length*p.sizex:Math.abs(C.l2p(p.sizex)-C.l2p(0)):p.sizex*X.w,A=P!==void 0?typeof p.yref=="string"&&O?P._length*p.sizey:Math.abs(P.l2p(p.sizey)-P.l2p(0)):p.sizey*X.h;var D,V,j=S*d[p.xanchor].offset,B=A*c[p.yanchor].offset,W=d[p.xanchor].sizing+c[p.yanchor].sizing;switch(D=C!==void 0?typeof p.xref=="string"&&R?C._length*p.x+C._offset:C.r2p(p.x)+C._offset:p.x*X.w+X.l,D+=j,V=P!==void 0?typeof p.yref=="string"&&O?P._length*(1-p.y)+P._offset:P.r2p(p.y)+P._offset:X.h-p.y*X.h+X.t,V+=B,p.sizing){case"fill":W+=" slice";break;case"stretch":W="none"}k.attr({x:D,y:V,width:S,height:A,preserveAspectRatio:W,opacity:p.opacity});var q=(C&&a.getRefType(p.xref)!=="domain"?C._id:"")+(P&&a.getRefType(p.yref)!=="domain"?P._id:"");b.setClipUrl(k,q?"clip"+i._uid+q:null,h)}var f=i._imageLowerLayer.selectAll("image").data(s),x=i._imageUpperLayer.selectAll("image").data(n);f.enter().append("image"),x.enter().append("image"),f.exit().remove(),x.exit().remove(),f.each(function(p){w.bind(this)(p),m.bind(this)(p)}),x.each(function(p){w.bind(this)(p),m.bind(this)(p)});var y=Object.keys(i._plots);for(t=0;t<y.length;t++){o=y[t];var v=i._plots[o];if(v.imagelayer){var M=v.imagelayer.selectAll("image").data(r[o]||[]);M.enter().append("image"),M.exit().remove(),M.each(function(p){w.bind(this)(p),m.bind(this)(p)})}}}},68804:function(F,L,e){F.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function(F,L,e){var T=e(41940),b=e(22399);F.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:T({editType:"legend"}),grouptitlefont:T({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:T({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(F){F.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(F,L,e){var T=e(73972),b=e(71828),a=e(44467),_=e(9012),g=e(33030),h=e(10820),o=e(10130);function t(i,n,r,s){var l=n[i]||{},u=a.newContainer(r,i);function d(W,q){return b.coerce(l,u,g,W,q)}var c=b.coerceFont(d,"font",r.font);if(d("bgcolor",r.paper_bgcolor),d("bordercolor"),d("visible")){for(var w,m=function(W,q){var re=w._input,ee=w;return b.coerce(re,ee,_,W,q)},f=r.font||{},x=b.coerceFont(d,"grouptitlefont",b.extendFlat({},f,{size:Math.round(1.1*f.size)})),y=0,v=!1,M="normal",p=(r.shapes||[]).filter(function(W){return W.showlegend}),S=s.concat(p).filter(function(W){return i===(W.legend||"legend")}),A=0;A<S.length;A++)if((w=S[A]).visible){var k=w._isShape;(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&w._module.attributes.showlegend.dflt===!1))&&(y++,w.showlegend&&(v=!0,(!k&&T.traceIs(w,"pie-like")||w._input.showlegend===!0)&&y++),b.coerceFont(m,"legendgrouptitle.font",x)),(!k&&T.traceIs(w,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(w.fill)!==-1)&&(M=o.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),w.legendgroup!==void 0&&w.legendgroup!==""&&(M=o.isReversed({traceorder:M})?"reversed+grouped":"grouped")}var C=b.coerce(n,r,h,"showlegend",v&&y>(i==="legend"?1:0));if(C===!1&&(r[i]=void 0),(C!==!1||l.uirevision)&&(d("uirevision",r.uirevision),C!==!1)){d("borderwidth");var P,R,O,X=d("orientation")==="h",D=d("yref")==="paper",V=d("xref")==="paper",j="left";if(X?(P=0,T.getComponentMethod("rangeslider","isVisible")(n.xaxis)?D?(R=1.1,O="bottom"):(R=1,O="top"):D?(R=-.1,O="top"):(R=0,O="bottom")):(R=1,O="auto",V?P=1.02:(P=1,j="right")),b.coerce(l,u,{x:{valType:"number",editType:"legend",min:V?-2:0,max:V?3:1,dflt:P}},"x"),b.coerce(l,u,{y:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:R}},"y"),d("traceorder",M),o.isGrouped(r[i])&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("xanchor",j),d("yanchor",O),d("valign"),b.noneOrAll(l,u,["x","y"]),d("title.text")){d("title.side",X?"left":"top");var B=b.extendFlat({},c,{size:b.bigFont(c.size)});b.coerceFont(d,"title.font",B)}}}}F.exports=function(i,n,r){var s,l=r.slice(),u=n.shapes;if(u)for(s=0;s<u.length;s++){var d=u[s];if(d.showlegend){var c={_input:d._input,visible:d.visible,showlegend:d.showlegend,legend:d.legend};l.push(c)}}var w=["legend"];for(s=0;s<l.length;s++)b.pushUnique(w,l[s].legend);for(n._legends=[],s=0;s<w.length;s++){var m=w[s];t(m,i,n,l),n[m]&&n[m].visible&&(n[m]._id=m),n._legends.push(m)}}},43969:function(F,L,e){var T=e(39898),b=e(71828),a=e(74875),_=e(73972),g=e(11086),h=e(28569),o=e(91424),t=e(7901),i=e(63893),n=e(85167),r=e(14928),s=e(18783),l=s.LINE_SPACING,u=s.FROM_TL,d=s.FROM_BR,c=e(82424),w=e(53630),m=e(10130),f=1,x=/^legend[0-9]*$/;function y(O,X){var D,V,j=X||{},B=O._fullLayout,W=R(j),q=j._inHover;if(q?(V=j.layer,D="hover"):(V=B._infolayer,D=W),V){var re;if(D+=B._uid,O._legendMouseDownTime||(O._legendMouseDownTime=0),q){if(!j.entries)return;re=c(j.entries,j)}else{for(var ee=(O.calcdata||[]).slice(),K=B.shapes,Y=0;Y<K.length;Y++){var $=K[Y];if($.showlegend){var ne={_isShape:!0,_fullInput:$,index:$._index,name:$.name||$.label.text||"shape "+$._index,legend:$.legend,legendgroup:$.legendgroup,legendgrouptitle:$.legendgrouptitle,legendrank:$.legendrank,legendwidth:$.legendwidth,showlegend:$.showlegend,visible:$.visible,opacity:$.opacity,mode:$.type==="line"?"lines":"markers",line:$.line,marker:{line:$.line,color:$.fillcolor,size:12,symbol:$.type==="rect"?"square":$.type==="circle"?"circle":"hexagon2"}};ee.push([{trace:ne}])}}re=B.showlegend&&c(ee,j,B._legends.length>1)}var ae=B.hiddenlabels||[];if(!(q||B.showlegend&&re.length))return V.selectAll("."+W).remove(),B._topdefs.select("#"+D).remove(),a.autoMargin(O,W);var se=b.ensureSingle(V,"g",W,function(Se){q||Se.attr("pointer-events","all")}),ce=b.ensureSingleById(B._topdefs,"clipPath",D,function(Se){Se.append("rect")}),me=b.ensureSingle(se,"rect","bg",function(Se){Se.attr("shape-rendering","crispEdges")});me.call(t.stroke,j.bordercolor).call(t.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px");var ye=b.ensureSingle(se,"g","scrollbox"),Te=j.title;if(j._titleWidth=0,j._titleHeight=0,Te.text){var Ce=b.ensureSingle(ye,"text",W+"titletext");Ce.attr("text-anchor","start").call(o.font,Te.font).text(Te.text),k(Ce,ye,O,j,f)}else ye.selectAll("."+W+"titletext").remove();var pe=b.ensureSingle(se,"rect","scrollbar",function(Se){Se.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),fe=ye.selectAll("g.groups").data(re);fe.enter().append("g").attr("class","groups"),fe.exit().remove();var Oe=fe.selectAll("g.traces").data(b.identity);Oe.enter().append("g").attr("class","traces"),Oe.exit().remove(),Oe.style("opacity",function(Se){var Me=Se[0].trace;return _.traceIs(Me,"pie-like")?ae.indexOf(Se[0].label)!==-1?.5:1:Me.visible==="legendonly"?.5:1}).each(function(){T.select(this).call(p,O,j)}).call(w,O,j).each(function(){q||T.select(this).call(A,O,W)}),b.syncOrAsync([a.previousPromises,function(){return function(Se,Me,ue,le){var ie=Se._fullLayout,ge=R(le);le||(le=ie[ge]);var Ae=ie._size,we=m.isVertical(le),Ne=m.isGrouped(le),He=le.entrywidthmode==="fraction",de=le.borderwidth,Le=2*de,Ee=r.itemGap,Re=le.itemwidth+2*Ee,je=2*(de+Ee),Fe=P(le),Xe=le.y<0||le.y===0&&Fe==="top",Ze=le.y>1||le.y===1&&Fe==="bottom",at=le.tracegroupgap,lt={};le._maxHeight=Math.max(Xe||Ze?ie.height/2:Ae.h,30);var ot=0;le._width=0,le._height=0;var bt=function(mt){var xt=0,dt=0,Et=mt.title.side;return Et&&(Et.indexOf("left")!==-1&&(xt=mt._titleWidth),Et.indexOf("top")!==-1&&(dt=mt._titleHeight)),[xt,dt]}(le);if(we)ue.each(function(mt){var xt=mt[0].height;o.setTranslate(this,de+bt[0],de+bt[1]+le._height+xt/2+Ee),le._height+=xt,le._width=Math.max(le._width,mt[0].width)}),ot=Re+le._width,le._width+=Ee+Re+Le,le._height+=je,Ne&&(Me.each(function(mt,xt){o.setTranslate(this,0,xt*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var wt=C(le),ht=le.x<0||le.x===0&&wt==="right",ct=le.x>1||le.x===1&&wt==="left",Tt=Ze||Xe,Lt=ie.width/2;le._maxWidth=Math.max(ht?Tt&&wt==="left"?Ae.l+Ae.w:Lt:ct?Tt&&wt==="right"?Ae.r+Ae.w:Lt:Ae.w,2*Re);var kt=0,Ot=0;ue.each(function(mt){var xt=v(mt,le,Re);kt=Math.max(kt,xt),Ot+=xt}),ot=null;var Pt=0;if(Ne){var et=0,nt=0,Ye=0;Me.each(function(){var mt=0,xt=0;T.select(this).selectAll("g.traces").each(function(Et){var pt=v(Et,le,Re),gt=Et[0].height;o.setTranslate(this,bt[0],bt[1]+de+Ee+gt/2+xt),xt+=gt,mt=Math.max(mt,pt),lt[Et[0].trace.legendgroup]=mt});var dt=mt+Ee;nt>0&&dt+de+nt>le._maxWidth?(Pt=Math.max(Pt,nt),nt=0,Ye+=et+at,et=xt):et=Math.max(et,xt),o.setTranslate(this,nt,Ye),nt+=dt}),le._width=Math.max(Pt,nt)+de,le._height=Ye+et+je}else{var tt=ue.size(),ut=Ot+Le+(tt-1)*Ee<le._maxWidth,Ke=0,De=0,Be=0,Qe=0;ue.each(function(mt){var xt=mt[0].height,dt=v(mt,le,Re),Et=ut?dt:kt;He||(Et+=Ee),Et+de+De-Ee>=le._maxWidth&&(Pt=Math.max(Pt,Qe),De=0,Be+=Ke,le._height+=Ke,Ke=0),o.setTranslate(this,bt[0]+de+De,bt[1]+de+Be+xt/2+Ee),Qe=De+dt+Ee,De+=Et,Ke=Math.max(Ke,xt)}),ut?(le._width=De+Le,le._height=Ke+je):(le._width=Math.max(Pt,Qe)+Le,le._height+=Ke+je)}}le._width=Math.ceil(Math.max(le._width+bt[0],le._titleWidth+2*(de+r.titlePad))),le._height=Math.ceil(Math.max(le._height+bt[1],le._titleHeight+2*(de+r.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var rt=Se._context.edits,vt=rt.legendText||rt.legendPosition;ue.each(function(mt){var xt=T.select(this).select("."+ge+"toggle"),dt=mt[0].height,Et=mt[0].trace.legendgroup,pt=v(mt,le,Re);Ne&&Et!==""&&(pt=lt[Et]);var gt=vt?Re:ot||pt;we||He||(gt+=Ee/2),o.setRect(xt,0,-dt/2,gt,dt)})}(O,fe,Oe,j)},function(){var Se,Me,ue,le,ie=B._size,ge=j.borderwidth,Ae=j.xref==="paper",we=j.yref==="paper";if(!q){var Ne,He;Ne=Ae?ie.l+ie.w*j.x-u[C(j)]*j._width:B.width*j.x-u[C(j)]*j._width,He=we?ie.t+ie.h*(1-j.y)-u[P(j)]*j._effHeight:B.height*(1-j.y)-u[P(j)]*j._effHeight;var de=function(Tt,Lt,kt,Ot){var Pt=Tt._fullLayout,et=Pt[Lt],nt=C(et),Ye=P(et),tt=et.xref==="paper",ut=et.yref==="paper";Tt._fullLayout._reservedMargin[Lt]={};var Ke=et.y<.5?"b":"t",De=et.x<.5?"l":"r",Be={r:Pt.width-kt,l:kt+et._width,b:Pt.height-Ot,t:Ot+et._effHeight};if(tt&&ut)return a.autoMargin(Tt,Lt,{x:et.x,y:et.y,l:et._width*u[nt],r:et._width*d[nt],b:et._effHeight*d[Ye],t:et._effHeight*u[Ye]});tt?Tt._fullLayout._reservedMargin[Lt][Ke]=Be[Ke]:ut||et.orientation==="v"?Tt._fullLayout._reservedMargin[Lt][De]=Be[De]:Tt._fullLayout._reservedMargin[Lt][Ke]=Be[Ke]}(O,W,Ne,He);if(de)return;if(B.margin.autoexpand){var Le=Ne,Ee=He;Ne=Ae?b.constrain(Ne,0,B.width-j._width):Le,He=we?b.constrain(He,0,B.height-j._effHeight):Ee,Ne!==Le&&b.log("Constrain "+W+".x to make legend fit inside graph"),He!==Ee&&b.log("Constrain "+W+".y to make legend fit inside graph")}o.setTranslate(se,Ne,He)}if(pe.on(".drag",null),se.on("wheel",null),q||j._height<=j._maxHeight||O._context.staticPlot){var Re=j._effHeight;q&&(Re=j._height),me.attr({width:j._width-ge,height:Re-ge,x:ge/2,y:ge/2}),o.setTranslate(ye,0,0),ce.select("rect").attr({width:j._width-2*ge,height:Re-2*ge,x:ge,y:ge}),o.setClipUrl(ye,D,O),o.setRect(pe,0,0,0,0),delete j._scrollY}else{var je,Fe,Xe,Ze=Math.max(r.scrollBarMinHeight,j._effHeight*j._effHeight/j._height),at=j._effHeight-Ze-2*r.scrollBarMargin,lt=j._height-j._effHeight,ot=at/lt,bt=Math.min(j._scrollY||0,lt);me.attr({width:j._width-2*ge+r.scrollBarWidth+r.scrollBarMargin,height:j._effHeight-ge,x:ge/2,y:ge/2}),ce.select("rect").attr({width:j._width-2*ge+r.scrollBarWidth+r.scrollBarMargin,height:j._effHeight-2*ge,x:ge,y:ge+bt}),o.setClipUrl(ye,D,O),ct(bt,Ze,ot),se.on("wheel",function(){ct(bt=b.constrain(j._scrollY+T.event.deltaY/at*lt,0,lt),Ze,ot),bt!==0&&bt!==lt&&T.event.preventDefault()});var wt=T.behavior.drag().on("dragstart",function(){var Tt=T.event.sourceEvent;je=Tt.type==="touchstart"?Tt.changedTouches[0].clientY:Tt.clientY,Xe=bt}).on("drag",function(){var Tt=T.event.sourceEvent;Tt.buttons===2||Tt.ctrlKey||(Fe=Tt.type==="touchmove"?Tt.changedTouches[0].clientY:Tt.clientY,bt=function(Lt,kt,Ot){var Pt=(Ot-kt)/ot+Lt;return b.constrain(Pt,0,lt)}(Xe,je,Fe),ct(bt,Ze,ot))});pe.call(wt);var ht=T.behavior.drag().on("dragstart",function(){var Tt=T.event.sourceEvent;Tt.type==="touchstart"&&(je=Tt.changedTouches[0].clientY,Xe=bt)}).on("drag",function(){var Tt=T.event.sourceEvent;Tt.type==="touchmove"&&(Fe=Tt.changedTouches[0].clientY,bt=function(Lt,kt,Ot){var Pt=(kt-Ot)/ot+Lt;return b.constrain(Pt,0,lt)}(Xe,je,Fe),ct(bt,Ze,ot))});ye.call(ht)}function ct(Tt,Lt,kt){j._scrollY=O._fullLayout[W]._scrollY=Tt,o.setTranslate(ye,0,-Tt),o.setRect(pe,j._width,r.scrollBarMargin+Tt*kt,r.scrollBarWidth,Lt),ce.select("rect").attr("y",ge+Tt)}O._context.edits.legendPosition&&(se.classed("cursor-move",!0),h.init({element:se.node(),gd:O,prepFn:function(){var Tt=o.getTranslate(se);ue=Tt.x,le=Tt.y},moveFn:function(Tt,Lt){var kt=ue+Tt,Ot=le+Lt;o.setTranslate(se,kt,Ot),Se=h.align(kt,j._width,ie.l,ie.l+ie.w,j.xanchor),Me=h.align(Ot+j._height,-j._height,ie.t+ie.h,ie.t,j.yanchor)},doneFn:function(){if(Se!==void 0&&Me!==void 0){var Tt={};Tt[W+".x"]=Se,Tt[W+".y"]=Me,_.call("_guiRelayout",O,Tt)}},clickFn:function(Tt,Lt){var kt=V.selectAll("g.traces").filter(function(){var Ot=this.getBoundingClientRect();return Lt.clientX>=Ot.left&&Lt.clientX<=Ot.right&&Lt.clientY>=Ot.top&&Lt.clientY<=Ot.bottom});kt.size()>0&&M(O,se,kt,Tt,Lt)}}))}],O)}}function v(O,X,D){var V=O[0],j=V.width,B=X.entrywidthmode,W=V.trace.legendwidth||X.entrywidth;return B==="fraction"?X._maxWidth*W:D+(W||j)}function M(O,X,D,V,j){var B=D.data()[0][0].trace,W={event:j,node:D.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:O.data,layout:O.layout,frames:O._transitionData._frames,config:O._context,fullData:O._fullData,fullLayout:O._fullLayout};B._group&&(W.group=B._group),_.traceIs(B,"pie-like")&&(W.label=D.datum()[0].label),g.triggerHandler(O,"plotly_legendclick",W)!==!1&&(V===1?X._clickTimeout=setTimeout(function(){O._fullLayout&&n(D,O,V)},O._context.doubleClickDelay):V===2&&(X._clickTimeout&&clearTimeout(X._clickTimeout),O._legendMouseDownTime=0,g.triggerHandler(O,"plotly_legenddoubleclick",W)!==!1&&n(D,O,V)))}function p(O,X,D){var V,j,B=R(D),W=O.data()[0][0],q=W.trace,re=_.traceIs(q,"pie-like"),ee=!D._inHover&&X._context.edits.legendText&&!re,K=D._maxNameLength;W.groupTitle?(V=W.groupTitle.text,j=W.groupTitle.font):(j=D.font,D.entries?V=W.text:(V=re?W.label:q.name,q._meta&&(V=b.templateString(V,q._meta))));var Y=b.ensureSingle(O,"text",B+"text");Y.attr("text-anchor","start").call(o.font,j).text(ee?S(V,K):V);var $=D.itemwidth+2*r.itemGap;i.positionText(Y,$,0),ee?Y.call(i.makeEditable,{gd:X,text:V}).call(k,O,X,D).on("edit",function(ne){this.text(S(ne,K)).call(k,O,X,D);var ae=W.trace._fullInput||{},se={};if(_.hasTransform(ae,"groupby")){var ce=_.getTransformIndices(ae,"groupby"),me=ce[ce.length-1],ye=b.keyedContainer(ae,"transforms["+me+"].styles","target","value.name");ye.set(W.trace._group,ne),se=ye.constructUpdate()}else se.name=ne;return ae._isShape?_.call("_guiRelayout",X,"shapes["+q.index+"].name",se.name):_.call("_guiRestyle",X,se,q.index)}):k(Y,O,X,D)}function S(O,X){var D=Math.max(4,X);if(O&&O.trim().length>=D/2)return O;for(var V=D-(O=O||"").length;V>0;V--)O+=" ";return O}function A(O,X,D){var V,j=X._context.doubleClickDelay,B=1,W=b.ensureSingle(O,"rect",D+"toggle",function(q){X._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});X._context.staticPlot||(W.on("mousedown",function(){(V=new Date().getTime())-X._legendMouseDownTime<j?B+=1:(B=1,X._legendMouseDownTime=V)}),W.on("mouseup",function(){if(!X._dragged&&!X._editing){var q=X._fullLayout[D];new Date().getTime()-X._legendMouseDownTime>j&&(B=Math.max(B-1,1)),M(X,q,O,B,T.event)}}))}function k(O,X,D,V,j){V._inHover&&O.attr("data-notex",!0),i.convertToTspans(O,D,function(){(function(B,W,q,re){var ee=B.data()[0][0];if(q._inHover||!ee||ee.trace.showlegend){var K=B.select("g[class*=math-group]"),Y=K.node(),$=R(q);q||(q=W._fullLayout[$]);var ne,ae,se=q.borderwidth,ce=(re===f?q.title.font:ee.groupTitle?ee.groupTitle.font:q.font).size*l;if(Y){var me=o.bBox(Y);ne=me.height,ae=me.width,re===f?o.setTranslate(K,se,se+.75*ne):o.setTranslate(K,0,.25*ne)}else{var ye="."+$+(re===f?"title":"")+"text",Te=B.select(ye),Ce=i.lineCount(Te),pe=Te.node();if(ne=ce*Ce,ae=pe?o.bBox(pe).width:0,re===f)q.title.side==="left"&&(ae+=2*r.itemGap),i.positionText(Te,se+r.titlePad,se+ce);else{var fe=2*r.itemGap+q.itemwidth;ee.groupTitle&&(fe=r.itemGap,ae-=q.itemwidth),i.positionText(Te,fe,-ce*((Ce-1)/2-.3))}}re===f?(q._titleWidth=ae,q._titleHeight=ne):(ee.lineHeight=ce,ee.height=Math.max(ne,16)+3,ee.width=ae)}else B.remove()})(X,D,V,j)})}function C(O){return b.isRightAnchor(O)?"right":b.isCenterAnchor(O)?"center":"left"}function P(O){return b.isBottomAnchor(O)?"bottom":b.isMiddleAnchor(O)?"middle":"top"}function R(O){return O._id||"legend"}F.exports=function(O,X){if(X)y(O,X);else{var D=O._fullLayout,V=D._legends;D._infolayer.selectAll('[class^="legend"]').each(function(){var W=T.select(this),q=W.attr("class").split(" ")[0];q.match(x)&&V.indexOf(q)===-1&&W.remove()});for(var j=0;j<V.length;j++){var B=V[j];y(O,O._fullLayout[B])}}}},82424:function(F,L,e){var T=e(73972),b=e(10130);F.exports=function(a,_,g){var h,o,t=_._inHover,i=b.isGrouped(_),n=b.isReversed(_),r={},s=[],l=!1,u={},d=0,c=0;function w(V,j,B){if(_.visible!==!1&&(!g||V===_._id))if(j!==""&&b.isGrouped(_))s.indexOf(j)===-1?(s.push(j),l=!0,r[j]=[B]):r[j].push(B);else{var W="~~i"+d;s.push(W),r[W]=[B],d++}}for(h=0;h<a.length;h++){var m=a[h],f=m[0],x=f.trace,y=x.legend,v=x.legendgroup;if(t||x.visible&&x.showlegend)if(T.traceIs(x,"pie-like"))for(u[v]||(u[v]={}),o=0;o<m.length;o++){var M=m[o].label;u[v][M]||(w(y,v,{label:M,color:m[o].color,i:m[o].i,trace:x,pts:m[o].pts}),u[v][M]=!0,c=Math.max(c,(M||"").length))}else w(y,v,f),c=Math.max(c,(x.name||"").length)}if(!s.length)return[];var p=!l||!i,S=[];for(h=0;h<s.length;h++){var A=r[s[h]];p?S.push(A[0]):S.push(A)}for(p&&(S=[S]),h=0;h<S.length;h++){var k=1/0;for(o=0;o<S[h].length;o++){var C=S[h][o].trace.legendrank;k>C&&(k=C)}S[h][0]._groupMinRank=k,S[h][0]._preGroupSort=h}var P=function(V,j){return V.trace.legendrank-j.trace.legendrank||V._preSort-j._preSort};for(S.forEach(function(V,j){V[0]._preGroupSort=j}),S.sort(function(V,j){return V[0]._groupMinRank-j[0]._groupMinRank||V[0]._preGroupSort-j[0]._preGroupSort}),h=0;h<S.length;h++){S[h].forEach(function(V,j){V._preSort=j}),S[h].sort(P);var R=S[h][0].trace,O=null;for(o=0;o<S[h].length;o++){var X=S[h][o].trace.legendgrouptitle;if(X&&X.text){O=X,t&&(X.font=_._groupTitleFont);break}}if(n&&S[h].reverse(),O){var D=!1;for(o=0;o<S[h].length;o++)if(T.traceIs(S[h][o].trace,"pie-like")){D=!0;break}S[h].unshift({i:-1,groupTitle:O,noClick:D,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:_.groupclick==="toggleitem"||R.visible}})}for(o=0;o<S[h].length;o++)S[h][o]=[S[h][o]]}return _._lgroupsLength=S.length,_._maxNameLength=c,S}},85167:function(F,L,e){var T=e(73972),b=e(71828),a=b.pushUnique,_=!0;F.exports=function(g,h,o){var t=h._fullLayout;if(!h._dragged&&!h._editing){var i,n=t.legend.itemclick,r=t.legend.itemdoubleclick,s=t.legend.groupclick;if(o===1&&n==="toggle"&&r==="toggleothers"&&_&&h.data&&h._context.showTips&&b.notifier(b._(h,"Double-click on legend to isolate one trace"),"long"),_=!1,o===1?i=n:o===2&&(i=r),i){var l=s==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],d=g.data()[0][0];if(!d.groupTitle||!d.noClick){var c=h._fullData,w=(t.shapes||[]).filter(function(Me){return Me.showlegend}),m=c.concat(w),f=d.trace;f._isShape&&(f=f._fullInput);var x,y,v,M,p,S=f.legendgroup,A={},k=[],C=[],P=[],R=(t.shapes||[]).map(function(Me){return Me._input}),O=!1,X=f.legend,D=f._fullInput;if(D&&D._isShape||!T.traceIs(f,"pie-like")){var V,j=S&&S.length,B=[];if(j)for(x=0;x<m.length;x++)(V=m[x]).visible&&V.legendgroup===S&&B.push(x);if(i==="toggle"){var W;switch(f.visible){case!0:W="legendonly";break;case!1:W=!1;break;case"legendonly":W=!0}if(j)if(l)for(x=0;x<m.length;x++){var q=m[x];q.visible!==!1&&q.legendgroup===S&&Se(q,W)}else Se(f,W);else Se(f,W)}else if(i==="toggleothers"){var re,ee,K,Y,$=!0;for(x=0;x<m.length;x++)if(re=(Y=m[x])===f,ee=Y.showlegend!==!0,!(re||ee||j&&Y.legendgroup===S||Y.legend!==X||Y.visible!==!0||T.traceIs(Y,"notLegendIsolatable"))){$=!1;break}for(x=0;x<m.length;x++)if((Y=m[x]).visible!==!1&&Y.legend===X&&!T.traceIs(Y,"notLegendIsolatable"))switch(f.visible){case"legendonly":Se(Y,!0);break;case!0:K=!!$||"legendonly",re=Y===f,ee=Y.showlegend!==!0&&!Y.legendgroup,Se(Y,!!(re||j&&Y.legendgroup===S||ee)||K)}}for(x=0;x<C.length;x++)if(v=C[x]){var ne=v.constructUpdate(),ae=Object.keys(ne);for(y=0;y<ae.length;y++)M=ae[y],(A[M]=A[M]||[])[P[x]]=ne[M]}for(p=Object.keys(A),x=0;x<p.length;x++)for(M=p[x],y=0;y<k.length;y++)A[M].hasOwnProperty(y)||(A[M][y]=void 0);O?T.call("_guiUpdate",h,A,{shapes:R},k):T.call("_guiRestyle",h,A,k)}else{var se=d.label,ce=u.indexOf(se);if(i==="toggle")ce===-1?u.push(se):u.splice(ce,1);else if(i==="toggleothers"){var me=ce!==-1,ye=[];for(x=0;x<h.calcdata.length;x++){var Te=h.calcdata[x];for(y=0;y<Te.length;y++){var Ce=Te[y].label;X===Te[0].trace.legend&&se!==Ce&&(u.indexOf(Ce)===-1&&(me=!0),a(u,Ce),ye.push(Ce))}}if(!me)for(var pe=0;pe<ye.length;pe++){var fe=u.indexOf(ye[pe]);fe!==-1&&u.splice(fe,1)}}T.call("_guiRelayout",h,"hiddenlabels",u)}}}}function Oe(Me,ue){var le=k.indexOf(Me),ie=A.visible;return ie||(ie=A.visible=[]),k.indexOf(Me)===-1&&(k.push(Me),le=k.length-1),ie[le]=ue,le}function Se(Me,ue){if(!d.groupTitle||l){var le,ie=Me._fullInput||Me,ge=ie._isShape,Ae=ie.index;if(Ae===void 0&&(Ae=ie._index),T.hasTransform(ie,"groupby")){var we=C[Ae];if(!we){var Ne=T.getTransformIndices(ie,"groupby"),He=Ne[Ne.length-1];we=b.keyedContainer(ie,"transforms["+He+"].styles","target","value.visible"),C[Ae]=we}var de=we.get(Me._group);de===void 0&&(de=!0),de!==!1&&we.set(Me._group,ue),P[Ae]=Oe(Ae,ie.visible!==!1)}else{var Le=ie.visible!==!1&&ue;ge?(le=Le,R[Ae].visible=le,O=!0):Oe(Ae,Le)}}}}},10130:function(F,L){L.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},L.isVertical=function(e){return e.orientation!=="h"},L.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function(F,L,e){F.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function(F,L,e){var T=e(39898),b=e(73972),a=e(71828),_=a.strTranslate,g=e(91424),h=e(7901),o=e(52075).extractOpts,t=e(34098),i=e(63463),n=e(53581).castOption,r=e(14928);function s(d,c){return(c?"radial":"horizontal")+(d?"":"reversed")}function l(d){var c=d[0].trace,w=c.contours,m=t.hasLines(c),f=t.hasMarkers(c),x=c.visible&&c.fill&&c.fill!=="none",y=!1,v=!1;if(w){var M=w.coloring;M==="lines"?y=!0:m=M==="none"||M==="heatmap"||w.showlines,w.type==="constraint"?x=w._operation!=="=":M!=="fill"&&M!=="heatmap"||(v=!0)}return{showMarker:f,showLine:m,showFill:x,showGradientLine:y,showGradientFill:v,anyLine:m||y,anyFill:x||v}}function u(d,c,w){return d&&a.isArrayOrTypedArray(d)?c:d>w?w:d}F.exports=function(d,c,w){var m=c._fullLayout;w||(w=m.legend);var f=w.itemsizing==="constant",x=w.itemwidth,y=(x+2*r.itemGap)/2,v=_(y,0),M=function(A,k,C,P){var R;if(A+1)R=A;else{if(!(k&&k.width>0))return 0;R=k.width}return f?P:Math.min(R,C)};function p(A,k,C){var P=A[0].trace,R=P.marker||{},O=R.line||{},X=C?P.visible&&P.type===C:b.traceIs(P,"bar"),D=T.select(k).select("g.legendpoints").selectAll("path.legend"+C).data(X?[A]:[]);D.enter().append("path").classed("legend"+C,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),D.exit().remove(),D.each(function(V){var j=T.select(this),B=V[0],W=M(B.mlw,R.line,5,2);j.style("stroke-width",W+"px");var q=B.mcc;if(!w._inHover&&"mc"in B){var re=o(R),ee=re.mid;ee===void 0&&(ee=(re.max+re.min)/2),q=g.tryColorscale(R,"")(ee)}var K=q||B.mc||R.color,Y=R.pattern,$=Y&&g.getPatternAttr(Y.shape,0,"");if($){var ne=g.getPatternAttr(Y.bgcolor,0,null),ae=g.getPatternAttr(Y.fgcolor,0,null),se=Y.fgopacity,ce=u(Y.size,8,10),me=u(Y.solidity,.5,1),ye="legend-"+P.uid;j.call(g.pattern,"legend",c,ye,$,ce,me,q,Y.fillmode,ne,ae,se)}else j.call(h.fill,K);W&&h.stroke(j,B.mlc||O.color)})}function S(A,k,C){var P=A[0],R=P.trace,O=C?R.visible&&R.type===C:b.traceIs(R,C),X=T.select(k).select("g.legendpoints").selectAll("path.legend"+C).data(O?[A]:[]);if(X.enter().append("path").classed("legend"+C,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),X.exit().remove(),X.size()){var D=R.marker||{},V=M(n(D.line.width,P.pts),D.line,5,2),j="pieLike",B=a.minExtend(R,{marker:{line:{width:V}}},j),W=a.minExtend(P,{trace:B},j);i(X,W,B,c)}}d.each(function(A){var k=T.select(this),C=a.ensureSingle(k,"g","layers");C.style("opacity",A[0].trace.opacity);var P=w.valign,R=A[0].lineHeight,O=A[0].height;if(P!=="middle"&&R&&O){var X={top:1,bottom:-1}[P]*(.5*(R-O+3));C.attr("transform",_(0,X))}else C.attr("transform",null);C.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0),C.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);var D=C.selectAll("g.legendsymbols").data([A]);D.enter().append("g").classed("legendsymbols",!0),D.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var k,C=A[0].trace,P=[];if(C.visible)switch(C.type){case"histogram2d":case"heatmap":P=[["M-15,-2V4H15V-2Z"]],k=!0;break;case"choropleth":case"choroplethmapbox":P=[["M-6,-6V6H6V-6Z"]],k=!0;break;case"densitymapbox":P=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],k="radial";break;case"cone":P=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],k=!1;break;case"streamtube":P=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],k=!1;break;case"surface":P=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],k=!0;break;case"mesh3d":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],k=!1;break;case"volume":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],k=!0;break;case"isosurface":P=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],k=!1}var R=T.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(P);R.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(O,X){var D,V=T.select(this),j=o(C),B=j.colorscale,W=j.reversescale;if(B){if(!k){var q=B.length;D=X===0?B[W?q-1:0][1]:X===1?B[W?0:q-1][1]:B[Math.floor((q-1)/2)][1]}}else{var re=C.vertexcolor||C.facecolor||C.color;D=a.isArrayOrTypedArray(re)?re[X]||re[0]:re}V.attr("d",O[0]),D?V.call(h.fill,D):V.call(function(ee){if(ee.size()){var K="legendfill-"+C.uid;g.gradient(ee,c,K,s(W,k==="radial"),B,"fill")}})})}).each(function(A){var k=A[0].trace,C=k.type==="waterfall";if(A[0]._distinct&&C){var P=A[0].trace[A[0].dir].marker;return A[0].mc=P.color,A[0].mlw=P.line.width,A[0].mlc=P.line.color,p(A,this,"waterfall")}var R=[];k.visible&&C&&(R=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var O=T.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(R);O.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(X){var D=T.select(this),V=k[X[0]].marker,j=M(void 0,V.line,5,2);D.attr("d",X[1]).style("stroke-width",j+"px").call(h.fill,V.color),j&&D.call(h.stroke,V.line.color)})}).each(function(A){p(A,this,"funnel")}).each(function(A){p(A,this)}).each(function(A){var k=A[0].trace,C=T.select(this).select("g.legendpoints").selectAll("path.legendbox").data(k.visible&&b.traceIs(k,"box-violin")?[A]:[]);C.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),C.exit().remove(),C.each(function(){var P=T.select(this);if(k.boxpoints!=="all"&&k.points!=="all"||h.opacity(k.fillcolor)!==0||h.opacity((k.line||{}).color)!==0){var R=M(void 0,k.line,5,2);P.style("stroke-width",R+"px").call(h.fill,k.fillcolor),R&&h.stroke(P,k.line.color)}else{var O=a.minExtend(k,{marker:{size:f?12:a.constrain(k.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});C.call(g.pointStyle,O,c)}})}).each(function(A){S(A,this,"funnelarea")}).each(function(A){S(A,this,"pie")}).each(function(A){var k,C,P=l(A),R=P.showFill,O=P.showLine,X=P.showGradientLine,D=P.showGradientFill,V=P.anyFill,j=P.anyLine,B=A[0],W=B.trace,q=o(W),re=q.colorscale,ee=q.reversescale,K=t.hasMarkers(W)||!V?"M5,0":j?"M5,-2":"M5,-3",Y=T.select(this),$=Y.select(".legendfill").selectAll("path").data(R||D?[A]:[]);if($.enter().append("path").classed("js-fill",!0),$.exit().remove(),$.attr("d",K+"h"+x+"v6h-"+x+"z").call(function(se){if(se.size())if(R)g.fillGroupStyle(se,c);else{var ce="legendfill-"+W.uid;g.gradient(se,c,ce,s(ee),re,"fill")}}),O||X){var ne=M(void 0,W.line,10,5);C=a.minExtend(W,{line:{width:ne}}),k=[a.minExtend(B,{trace:C})]}var ae=Y.select(".legendlines").selectAll("path").data(O||X?[k]:[]);ae.enter().append("path").classed("js-line",!0),ae.exit().remove(),ae.attr("d",K+(X?"l"+x+",0.0001":"h"+x)).call(O?g.lineGroupStyle:function(se){if(se.size()){var ce="legendline-"+W.uid;g.lineGroupStyle(se),g.gradient(se,c,ce,s(ee),re,"stroke")}})}).each(function(A){var k,C,P=l(A),R=P.anyFill,O=P.anyLine,X=P.showLine,D=P.showMarker,V=A[0],j=V.trace,B=!D&&!O&&!R&&t.hasText(j);function W(ae,se,ce,me){var ye=a.nestedProperty(j,ae).get(),Te=a.isArrayOrTypedArray(ye)&&se?se(ye):ye;if(f&&Te&&me!==void 0&&(Te=me),ce){if(Te<ce[0])return ce[0];if(Te>ce[1])return ce[1]}return Te}function q(ae){return V._distinct&&V.index&&ae[V.index]?ae[V.index]:ae[0]}if(D||B||X){var re={},ee={};if(D){re.mc=W("marker.color",q),re.mx=W("marker.symbol",q),re.mo=W("marker.opacity",a.mean,[.2,1]),re.mlc=W("marker.line.color",q),re.mlw=W("marker.line.width",a.mean,[0,5],2),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var K=W("marker.size",a.mean,[2,16],12);re.ms=K,ee.marker.size=K}X&&(ee.line={width:W("line.width",q,[0,10],5)}),B&&(re.tx="Aa",re.tp=W("textposition",q),re.ts=10,re.tc=W("textfont.color",q),re.tf=W("textfont.family",q)),k=[a.minExtend(V,re)],(C=a.minExtend(j,ee)).selectedpoints=null,C.texttemplate=null}var Y=T.select(this).select("g.legendpoints"),$=Y.selectAll("path.scatterpts").data(D?k:[]);$.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),$.exit().remove(),$.call(g.pointStyle,C,c),D&&(k[0].mrc=3);var ne=Y.selectAll("g.pointtext").data(B?k:[]);ne.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),ne.exit().remove(),ne.selectAll("text").call(g.textPointStyle,C,c)}).each(function(A){var k=A[0].trace,C=T.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(k.visible&&k.type==="candlestick"?[A,A]:[]);C.enter().append("path").classed("legendcandle",!0).attr("d",function(P,R){return R?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(P,R){var O=T.select(this),X=k[R?"increasing":"decreasing"],D=M(void 0,X.line,5,2);O.style("stroke-width",D+"px").call(h.fill,X.fillcolor),D&&h.stroke(O,X.line.color)})}).each(function(A){var k=A[0].trace,C=T.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(k.visible&&k.type==="ohlc"?[A,A]:[]);C.enter().append("path").classed("legendohlc",!0).attr("d",function(P,R){return R?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(P,R){var O=T.select(this),X=k[R?"increasing":"decreasing"],D=M(void 0,X.line,5,2);O.style("fill","none").call(g.dashLine,X.line.dash,D),D&&h.stroke(O,X.line.color)})})}},42068:function(F,L,e){e(93348),F.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(F,L,e){var T=e(73972),b=e(74875),a=e(41675),_=e(24255),g=e(34031).eraseActiveShape,h=e(71828),o=h._,t=F.exports={};function i(m,f){var x,y,v=f.currentTarget,M=v.getAttribute("data-attr"),p=v.getAttribute("data-val")||!0,S=m._fullLayout,A={},k=a.list(m,null,!0),C=S._cartesianSpikesEnabled;if(M==="zoom"){var P,R=p==="in"?.5:2,O=(1+R)/2,X=(1-R)/2;for(y=0;y<k.length;y++)if(!(x=k[y]).fixedrange)if(P=x._name,p==="auto")A[P+".autorange"]=!0;else if(p==="reset"){if(x._rangeInitial===void 0)A[P+".autorange"]=!0;else{var D=x._rangeInitial.slice();A[P+".range[0]"]=D[0],A[P+".range[1]"]=D[1]}x._showSpikeInitial!==void 0&&(A[P+".showspikes"]=x._showSpikeInitial,C!=="on"||x._showSpikeInitial||(C="off"))}else{var V=[x.r2l(x.range[0]),x.r2l(x.range[1])],j=[O*V[0]+X*V[1],O*V[1]+X*V[0]];A[P+".range[0]"]=x.l2r(j[0]),A[P+".range[1]"]=x.l2r(j[1])}}else M!=="hovermode"||p!=="x"&&p!=="y"||(p=S._isHoriz?"y":"x",v.setAttribute("data-val",p)),A[M]=p;S._cartesianSpikesEnabled=C,T.call("_guiRelayout",m,A)}function n(m,f){for(var x=f.currentTarget,y=x.getAttribute("data-attr"),v=x.getAttribute("data-val")||!0,M=m._fullLayout._subplots.gl3d||[],p={},S=y.split("."),A=0;A<M.length;A++)p[M[A]+"."+S[1]]=v;var k=v==="pan"?v:"zoom";p.dragmode=k,T.call("_guiRelayout",m,p)}function r(m,f){for(var x=f.currentTarget.getAttribute("data-attr"),y=x==="resetLastSave",v=x==="resetDefault",M=m._fullLayout,p=M._subplots.gl3d||[],S={},A=0;A<p.length;A++){var k,C=p[A],P=C+".camera",R=C+".aspectratio",O=C+".aspectmode",X=M[C]._scene;y?(S[P+".up"]=X.viewInitial.up,S[P+".eye"]=X.viewInitial.eye,S[P+".center"]=X.viewInitial.center,k=!0):v&&(S[P+".up"]=null,S[P+".eye"]=null,S[P+".center"]=null,k=!0),k&&(S[R+".x"]=X.viewInitial.aspectratio.x,S[R+".y"]=X.viewInitial.aspectratio.y,S[R+".z"]=X.viewInitial.aspectratio.z,S[O]=X.viewInitial.aspectmode)}T.call("_guiRelayout",m,S)}function s(m,f){var x=f.currentTarget,y=x._previousVal,v=m._fullLayout,M=v._subplots.gl3d||[],p=["xaxis","yaxis","zaxis"],S={},A={};if(y)A=y,x._previousVal=null;else{for(var k=0;k<M.length;k++){var C=M[k],P=v[C],R=C+".hovermode";S[R]=P.hovermode,A[R]=!1;for(var O=0;O<3;O++){var X=p[O],D=C+"."+X+".showspikes";A[D]=!1,S[D]=P[X].showspikes}}x._previousVal=S}return A}function l(m,f){for(var x=f.currentTarget,y=x.getAttribute("data-attr"),v=x.getAttribute("data-val")||!0,M=m._fullLayout,p=M._subplots.geo||[],S=0;S<p.length;S++){var A=p[S],k=M[A];if(y==="zoom"){var C=k.projection.scale,P=v==="in"?2*C:.5*C;T.call("_guiRelayout",m,A+".projection.scale",P)}}y==="reset"&&w(m,"geo")}function u(m){var f=m._fullLayout;return!f.hovermode&&(f._has("cartesian")?f._isHoriz?"y":"x":"closest")}function d(m){var f=u(m);T.call("_guiRelayout",m,"hovermode",f)}function c(m,f){for(var x=f.currentTarget.getAttribute("data-val"),y=m._fullLayout,v=y._subplots.mapbox||[],M={},p=0;p<v.length;p++){var S=v[p],A=y[S].zoom,k=x==="in"?1.05*A:A/1.05;M[S+".zoom"]=k}T.call("_guiRelayout",m,M)}function w(m,f){for(var x=m._fullLayout,y=x._subplots[f]||[],v={},M=0;M<y.length;M++)for(var p=y[M],S=x[p]._subplot.viewInitial,A=Object.keys(S),k=0;k<A.length;k++){var C=A[k];v[p+"."+C]=S[C]}T.call("_guiRelayout",m,v)}t.toImage={name:"toImage",title:function(m){var f=(m._context.toImageButtonOptions||{}).format||"png";return o(m,f==="png"?"Download plot as a png":"Download plot")},icon:_.camera,click:function(m){var f=m._context.toImageButtonOptions,x={format:f.format||"png"};h.notifier(o(m,"Taking snapshot - this may take a few seconds"),"long"),x.format!=="svg"&&h.isIE()&&(h.notifier(o(m,"IE only supports svg.  Changing format to svg."),"long"),x.format="svg"),["filename","width","height","scale"].forEach(function(y){y in f&&(x[y]=f[y])}),T.call("downloadImage",m,x).then(function(y){h.notifier(o(m,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){h.notifier(o(m,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(m){return o(m,"Edit in Chart Studio")},icon:_.disk,click:function(m){b.sendDataToCloud(m)}},t.editInChartStudio={name:"editInChartStudio",title:function(m){return o(m,"Edit in Chart Studio")},icon:_.pencil,click:function(m){b.sendDataToCloud(m)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(m){return o(m,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(m){return o(m,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(m){return o(m,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(m){return o(m,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(m){return o(m,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(m){return o(m,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:i},t.drawline={name:"drawline",title:function(m){return o(m,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:i},t.drawrect={name:"drawrect",title:function(m){return o(m,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(m){return o(m,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(m){return o(m,"Erase active shape")},icon:_.eraseshape,click:g},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(m){return o(m,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(m){return o(m,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(m){return o(m,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(m){return o(m,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(m){return o(m,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(m){return o(m,"Compare data on hover")},attr:"hovermode",val:function(m){return m._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(m){return o(m,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(m){return o(m,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(m){return o(m,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(m){return o(m,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(m){return o(m,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(m){return o(m,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(m){return o(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(m,f){var x=s(m,f);T.call("_guiRelayout",m,x)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(m){return o(m,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(m){return o(m,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(m){return o(m,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(m){return o(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:d},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(m){return o(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:d},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(m){return o(m,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:d},t.resetViewSankey={name:"resetSankeyGroup",title:function(m){return o(m,"Reset view")},icon:_.home,click:function(m){for(var f={"node.groups":[],"node.x":[],"node.y":[]},x=0;x<m._fullData.length;x++){var y=m._fullData[x]._viewInitial;f["node.groups"].push(y.node.groups.slice()),f["node.x"].push(y.node.x.slice()),f["node.y"].push(y.node.y.slice())}T.call("restyle",m,f)}},t.toggleHover={name:"toggleHover",title:function(m){return o(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(m,f){var x=s(m,f);x.hovermode=u(m),T.call("_guiRelayout",m,x)}},t.resetViews={name:"resetViews",title:function(m){return o(m,"Reset views")},icon:_.home,click:function(m,f){var x=f.currentTarget;x.setAttribute("data-attr","zoom"),x.setAttribute("data-val","reset"),i(m,f),x.setAttribute("data-attr","resetLastSave"),r(m,f),w(m,"geo"),w(m,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(m){return o(m,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(m){var f=m._fullLayout,x=f._cartesianSpikesEnabled;f._cartesianSpikesEnabled=x==="on"?"off":"on",T.call("_guiRelayout",m,function(y){for(var v=y._fullLayout._cartesianSpikesEnabled==="on",M=a.list(y,null,!0),p={},S=0;S<M.length;S++){var A=M[S];p[A._name+".showspikes"]=!!v||A._showSpikeInitial}return p}(m))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(m){return o(m,"Reset view")},attr:"reset",icon:_.home,click:function(m){w(m,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(m){return o(m,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(m){return o(m,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:c}},93348:function(F,L,e){var T=e(26023),b=Object.keys(T),a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(a),g=[];b.forEach(function(h){(function(o){if(_.indexOf(o._cat||o.name)===-1){var t=o.name,i=(o._cat||o.name).toLowerCase();g.indexOf(t)===-1&&g.push(t),g.indexOf(i)===-1&&g.push(i)}})(T[h])}),g.sort(),F.exports={DRAW_MODES:a,backButtons:_,foreButtons:g}},35750:function(F,L,e){var T=e(71828),b=e(7901),a=e(44467),_=e(42068);F.exports=function(g,h){var o=g.modebar||{},t=a.newContainer(h,"modebar");function i(r,s){return T.coerce(o,t,_,r,s)}i("orientation"),i("bgcolor",b.addOpacity(h.paper_bgcolor,.5));var n=b.contrast(b.rgb(h.modebar.bgcolor));i("color",b.addOpacity(n,.3)),i("activecolor",b.addOpacity(n,.7)),i("uirevision",h.uirevision),i("add"),i("remove")}},64168:function(F,L,e){F.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function(F,L,e){var T=e(41675),b=e(34098),a=e(73972),_=e(23469).isUnifiedHover,g=e(37676),h=e(26023),o=e(93348).DRAW_MODES,t=e(71828).extendDeep;F.exports=function(i){var n=i._fullLayout,r=i._context,s=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=r.modeBarButtons;l=Array.isArray(u)&&u.length?function(d){for(var c=t([],d),w=0;w<c.length;w++)for(var m=c[w],f=0;f<m.length;f++){var x=m[f];if(typeof x=="string"){if(h[x]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[w][f]=h[x]}}return c}(u):!r.displayModeBar&&r.watermark?[]:function(d){var c=d._fullLayout,w=d._fullData,m=d._context;function f(ye,Te){if(typeof Te=="string"){if(Te.toLowerCase()===ye.toLowerCase())return!0}else{var Ce=Te.name,pe=Te._cat||Te.name;if(Ce===ye||pe===ye.toLowerCase())return!0}return!1}var x=c.modebar.add;typeof x=="string"&&(x=[x]);var y=c.modebar.remove;typeof y=="string"&&(y=[y]);var v=m.modeBarButtonsToAdd.concat(x.filter(function(ye){for(var Te=0;Te<m.modeBarButtonsToRemove.length;Te++)if(f(ye,m.modeBarButtonsToRemove[Te]))return!1;return!0})),M=m.modeBarButtonsToRemove.concat(y.filter(function(ye){for(var Te=0;Te<m.modeBarButtonsToAdd.length;Te++)if(f(ye,m.modeBarButtonsToAdd[Te]))return!1;return!0})),p=c._has("cartesian"),S=c._has("gl3d"),A=c._has("geo"),k=c._has("pie"),C=c._has("funnelarea"),P=c._has("gl2d"),R=c._has("ternary"),O=c._has("mapbox"),X=c._has("polar"),D=c._has("smith"),V=c._has("sankey"),j=function(ye){for(var Te=T.list({_fullLayout:ye},null,!0),Ce=0;Ce<Te.length;Ce++)if(!Te[Ce].fixedrange)return!1;return!0}(c),B=_(c.hovermode),W=[];function q(ye){if(ye.length){for(var Te=[],Ce=0;Ce<ye.length;Ce++){for(var pe=ye[Ce],fe=h[pe],Oe=fe.name.toLowerCase(),Se=(fe._cat||fe.name).toLowerCase(),Me=!1,ue=0;ue<M.length;ue++){var le=M[ue].toLowerCase();if(le===Oe||le===Se){Me=!0;break}}Me||Te.push(h[pe])}W.push(Te)}}var re=["toImage"];m.showEditInChartStudio?re.push("editInChartStudio"):m.showSendToCloud&&re.push("sendDataToCloud"),q(re);var ee=[],K=[],Y=[],$=[];(p||P||k||C||R)+A+S+O+X+D>1?(K=["toggleHover"],Y=["resetViews"]):A?(ee=["zoomInGeo","zoomOutGeo"],K=["hoverClosestGeo"],Y=["resetGeo"]):S?(K=["hoverClosest3d"],Y=["resetCameraDefault3d","resetCameraLastSave3d"]):O?(ee=["zoomInMapbox","zoomOutMapbox"],K=["toggleHover"],Y=["resetViewMapbox"]):P?K=["hoverClosestGl2d"]:k?K=["hoverClosestPie"]:V?(K=["hoverClosestCartesian","hoverCompareCartesian"],Y=["resetViewSankey"]):K=["toggleHover"],p&&(K=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ye){for(var Te=0;Te<ye.length;Te++)if(!a.traceIs(ye[Te],"noHover"))return!1;return!0}(w)||B)&&(K=[]),!p&&!P||j||(ee=["zoomIn2d","zoomOut2d","autoScale2d"],Y[0]!=="resetViews"&&(Y=["resetScale2d"])),S?$=["zoom3d","pan3d","orbitRotation","tableRotation"]:(p||P)&&!j||R?$=["zoom2d","pan2d"]:O||A?$=["pan2d"]:X&&($=["zoom2d"]),function(ye){for(var Te=!1,Ce=0;Ce<ye.length&&!Te;Ce++){var pe=ye[Ce];pe._module&&pe._module.selectPoints&&(a.traceIs(pe,"scatter-like")?(b.hasMarkers(pe)||b.hasText(pe))&&(Te=!0):a.traceIs(pe,"box-violin")&&pe.boxpoints!=="all"&&pe.points!=="all"||(Te=!0))}return Te}(w)&&$.push("select2d","lasso2d");var ne=[],ae=function(ye){ne.indexOf(ye)===-1&&K.indexOf(ye)!==-1&&ne.push(ye)};if(Array.isArray(v)){for(var se=[],ce=0;ce<v.length;ce++){var me=v[ce];typeof me=="string"?(me=me.toLowerCase(),o.indexOf(me)!==-1?(c._has("mapbox")||c._has("cartesian"))&&$.push(me):me==="togglespikelines"?ae("toggleSpikelines"):me==="togglehover"?ae("toggleHover"):me==="hovercompare"?ae("hoverCompareCartesian"):me==="hoverclosest"?(ae("hoverClosestCartesian"),ae("hoverClosestGeo"),ae("hoverClosest3d"),ae("hoverClosestGl2d"),ae("hoverClosestPie")):me==="v1hovermode"&&(ae("toggleHover"),ae("hoverClosestCartesian"),ae("hoverCompareCartesian"),ae("hoverClosestGeo"),ae("hoverClosest3d"),ae("hoverClosestGl2d"),ae("hoverClosestPie"))):se.push(me)}v=se}return q($),q(ee.concat(Y)),q(ne),function(ye,Te){if(Te.length)if(Array.isArray(Te[0]))for(var Ce=0;Ce<Te.length;Ce++)ye.push(Te[Ce]);else ye.push(Te);return ye}(W,v)}(i),s?s.update(i,l):n._modeBar=g(i,l)}else s&&(s.destroy(),delete n._modeBar)}},37676:function(F,L,e){var T=e(39898),b=e(92770),a=e(71828),_=e(24255),g=e(11506).version,h=new DOMParser;function o(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=o.prototype;t.update=function(i,n){this.graphInfo=i;var r=this.graphInfo._context,s=this.graphInfo._fullLayout,l="modebar-"+s._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=s.modebar,d=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(l),a.addRelatedStyleRule(l,d+"#"+l+" .modebar-group","background-color: "+u.bgcolor),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(n),w=this.hasLogo!==r.displaylogo,m=this.locale!==r.locale;if(this.locale=r.locale,(c||w||m)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var f=this.getLogo();r.watermark&&(f.className=f.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var s=n.createGroup();r.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var d=n.createButton(l);n.buttonElements.push(d),s.appendChild(d)}),n.element.appendChild(s)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var s=i.title;s===void 0?s=i.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&r.setAttribute("data-title",s),i.attr!==void 0&&r.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),r.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(d){i.click(n.graphInfo,d),n.updateActiveButton(d.currentTarget)}),r.setAttribute("data-toggle",i.toggle||!1),i.toggle&&T.select(r).classed("active",!0);var u=i.icon;return typeof u=="function"?r.appendChild(u()):r.appendChild(this.createIcon(u||_.question)),r.setAttribute("data-gravity",i.gravity||"n"),r},t.createIcon=function(i){var n,r=b(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,r].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(s,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(l)}return i.svg&&(n=h.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,r=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var l=s.getAttribute("data-val")||!0,u=s.getAttribute("data-attr"),d=s.getAttribute("data-toggle")==="true",c=T.select(s);if(d)u===r&&c.classed("active",!c.classed("active"));else{var w=u===null?u:a.nestedProperty(n,u).get();c.classed("active",w===l)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var r=0;r<i.length;++r){if(i[r].length!==n[r].length)return!1;for(var s=0;s<i[r].length;s++)if(i[r][s].name!==n[r][s].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly.js")+" (v"+g+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(_.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},F.exports=function(i,n){var r=i._fullLayout,s=new o({graphInfo:i,container:r._modebardiv.node(),buttons:n});return r._privateplot&&T.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},37113:function(F,L,e){var T=e(41940),b=e(22399),a=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});F.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:T({editType:"plot"}),bgcolor:{valType:"color",dflt:b.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(F){F.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(F,L,e){var T=e(71828),b=e(7901),a=e(44467),_=e(85501),g=e(37113),h=e(89573);function o(t,i,n,r){var s=r.calendar;function l(d,c){return T.coerce(t,i,g.buttons,d,c)}if(l("visible")){var u=l("step");u!=="all"&&(!s||s==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}F.exports=function(t,i,n,r,s){var l=t.rangeselector||{},u=a.newContainer(i,"rangeselector");function d(m,f){return T.coerce(l,u,g,m,f)}if(d("visible",_(l,u,{name:"buttons",handleItemDefaults:o,calendar:s}).length>0)){var c=function(m,f,x){for(var y=x.filter(function(S){return f[S].anchor===m._id}),v=0,M=0;M<y.length;M++){var p=f[y[M]].domain;p&&(v=Math.max(p[1],v))}return[m.domain[0],v+h.yPad]}(i,n,r);d("x",c[0]),d("y",c[1]),T.noneOrAll(t,i,["x","y"]),d("xanchor"),d("yanchor"),T.coerceFont(d,"font",n.font);var w=d("bgcolor");d("activecolor",b.contrast(w,h.lightAmount,h.darkAmount)),d("bordercolor"),d("borderwidth")}}},21598:function(F,L,e){var T=e(39898),b=e(73972),a=e(74875),_=e(7901),g=e(91424),h=e(71828),o=h.strTranslate,t=e(63893),i=e(41675),n=e(18783),r=n.LINE_SPACING,s=n.FROM_TL,l=n.FROM_BR,u=e(89573),d=e(70565);function c(f){return f._id}function w(f,x,y){var v=h.ensureSingle(f,"rect","selector-rect",function(M){M.attr("shape-rendering","crispEdges")});v.attr({rx:u.rx,ry:u.ry}),v.call(_.stroke,x.bordercolor).call(_.fill,function(M,p){return p._isActive||p._isHovered?M.activecolor:M.bgcolor}(x,y)).style("stroke-width",x.borderwidth+"px")}function m(f,x,y,v){var M,p;h.ensureSingle(f,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(g.font,x.font).text((M=y,p=v._fullLayout._meta,M.label?p?h.templateString(M.label,p):M.label:M.step==="all"?"all":M.count+M.step.charAt(0))).call(function(S){t.convertToTspans(S,v)})}F.exports=function(f){var x=f._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var v=i.list(y,"x",!0),M=[],p=0;p<v.length;p++){var S=v[p];S.rangeselector&&S.rangeselector.visible&&M.push(S)}return M}(f),c);x.enter().append("g").classed("rangeselector",!0),x.exit().remove(),x.style({cursor:"pointer","pointer-events":"all"}),x.each(function(y){var v=T.select(this),M=y,p=M.rangeselector,S=v.selectAll("g.button").data(h.filterVisible(p.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(A){var k=T.select(this),C=d(M,A);A._isActive=function(P,R,O){if(R.step==="all")return P.autorange===!0;var X=Object.keys(O);return P.range[0]===O[X[0]]&&P.range[1]===O[X[1]]}(M,A,C),k.call(w,p,A),k.call(m,p,A,f),k.on("click",function(){f._dragged||b.call("_guiRelayout",f,C)}),k.on("mouseover",function(){A._isHovered=!0,k.call(w,p,A)}),k.on("mouseout",function(){A._isHovered=!1,k.call(w,p,A)})}),function(A,k,C,P,R){var O=0,X=0,D=C.borderwidth;k.each(function(){var re=T.select(this).select(".selector-text"),ee=C.font.size*r,K=Math.max(ee*t.lineCount(re),16)+3;X=Math.max(X,K)}),k.each(function(){var re=T.select(this),ee=re.select(".selector-rect"),K=re.select(".selector-text"),Y=K.node()&&g.bBox(K.node()).width,$=C.font.size*r,ne=t.lineCount(K),ae=Math.max(Y+10,u.minButtonWidth);re.attr("transform",o(D+O,D)),ee.attr({x:0,y:0,width:ae,height:X}),t.positionText(K,ae/2,X/2-(ne-1)*$/2+3),O+=ae+5});var V=A._fullLayout._size,j=V.l+V.w*C.x,B=V.t+V.h*(1-C.y),W="left";h.isRightAnchor(C)&&(j-=O,W="right"),h.isCenterAnchor(C)&&(j-=O/2,W="center");var q="top";h.isBottomAnchor(C)&&(B-=X,q="bottom"),h.isMiddleAnchor(C)&&(B-=X/2,q="middle"),O=Math.ceil(O),X=Math.ceil(X),j=Math.round(j),B=Math.round(B),a.autoMargin(A,P+"-range-selector",{x:C.x,y:C.y,l:O*s[W],r:O*l[W],b:X*l[q],t:X*s[q]}),R.attr("transform",o(j,B))}(f,S,p,M._name,v)})}},70565:function(F,L,e){var T=e(81041),b=e(71828).titleCase;F.exports=function(a,_){var g=a._name,h={};if(_.step==="all")h[g+".autorange"]=!0;else{var o=function(t,i){var n,r=t.range,s=new Date(t.r2l(r[1])),l=i.step,u=T["utc"+b(l)],d=i.count;switch(i.stepmode){case"backward":n=t.l2r(+u.offset(s,-d));break;case"todate":var c=u.offset(s,-d);n=t.l2r(+u.ceil(c))}return[n,r[1]]}(a,_);h[g+".range[0]"]=o[0],h[g+".range[1]"]=o[1]}return h}},97218:function(F,L,e){F.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function(F,L,e){var T=e(22399);F.exports={bgcolor:{valType:"color",dflt:T.background,editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(F,L,e){var T=e(41675).list,b=e(71739).getAutoRange,a=e(73251);F.exports=function(_){for(var g=T(_,"x",!0),h=0;h<g.length;h++){var o=g[h],t=o[a.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=b(_,o))}}},73251:function(F){F.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(F,L,e){var T=e(71828),b=e(44467),a=e(41675),_=e(75148),g=e(47850);F.exports=function(h,o,t){var i=h[t],n=o[t];if(i.rangeslider||o._requestRangeslider[n._id]){T.isPlainObject(i.rangeslider)||(i.rangeslider={});var r,s,l=i.rangeslider,u=b.newContainer(n,"rangeslider");if(v("visible")){v("bgcolor",o.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!n.isValidRange(l.range)),v("range");var d=o._subplots;if(d)for(var c=d.cartesian.filter(function(p){return p.substr(0,p.indexOf("y"))===a.name2id(t)}).map(function(p){return p.substr(p.indexOf("y"),p.length)}),w=T.simpleMap(c,a.id2name),m=0;m<w.length;m++){var f=w[m];r=l[f]||{},s=b.newContainer(u,f,"yaxis");var x,y=o[f];r.range&&y.isValidRange(r.range)&&(x="fixed"),M("rangemode",x)!=="match"&&M("range",y.range.slice())}u._input=l}}function v(p,S){return T.coerce(l,u,_,p,S)}function M(p,S){return T.coerce(r,s,g,p,S)}}},72413:function(F,L,e){var T=e(39898),b=e(73972),a=e(74875),_=e(71828),g=_.strTranslate,h=e(91424),o=e(7901),t=e(92998),i=e(93612),n=e(41675),r=e(28569),s=e(6964),l=e(73251);function u(x,y,v,M){var p=_.ensureSingle(x,"rect",l.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=M.borderwidth%2==0?M.borderwidth:M.borderwidth-1,A=-M._offsetShift,k=h.crispRound(y,M.borderwidth);p.attr({width:M._width+S,height:M._height+S,transform:g(A,A),"stroke-width":k}).call(o.stroke,M.bordercolor).call(o.fill,M.bgcolor)}function d(x,y,v,M){var p=y._fullLayout;_.ensureSingleById(p._topdefs,"clipPath",M._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:M._width,height:M._height})}function c(x,y,v,M){var p,S=y.calcdata,A=x.selectAll("g."+l.rangePlotClassName).data(v._subplotsWith,_.identity);A.enter().append("g").attr("class",function(k){return l.rangePlotClassName+" "+k}).call(h.setClipUrl,M._clipId,y),A.order(),A.exit().remove(),A.each(function(k,C){var P=T.select(this),R=C===0,O=n.getFromId(y,k,"y"),X=O._name,D=M[X],V={data:[],layout:{xaxis:{type:v.type,domain:[0,1],range:M.range.slice(),calendar:v.calendar},width:M._width,height:M._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};v.rangebreaks&&(V.layout.xaxis.rangebreaks=v.rangebreaks),V.layout[X]={type:O.type,domain:[0,1],range:D.rangemode!=="match"?D.range.slice():O.range.slice(),calendar:O.calendar},O.rangebreaks&&(V.layout[X].rangebreaks=O.rangebreaks),a.supplyDefaults(V);var j=V._fullLayout.xaxis,B=V._fullLayout[X];j.clearCalc(),j.setScale(),B.clearCalc(),B.setScale();var W={id:k,plotgroup:P,xaxis:j,yaxis:B,isRangePlot:!0};R?p=W:(W.mainplot="xy",W.mainplotinfo=p),i.rangePlot(y,W,function(q,re){for(var ee=[],K=0;K<q.length;K++){var Y=q[K],$=Y[0].trace;$.xaxis+$.yaxis===re&&ee.push(Y)}return ee}(S,k))})}function w(x,y,v,M,p){_.ensureSingle(x,"rect",l.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",M._height).call(o.fill,l.maskColor),_.ensureSingle(x,"rect",l.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",M._height).call(o.fill,l.maskColor),p.rangemode!=="match"&&(_.ensureSingle(x,"rect",l.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",M._width).call(o.fill,l.maskOppAxisColor),_.ensureSingle(x,"rect",l.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",M._width).style("border-top",l.maskOppBorder).call(o.fill,l.maskOppAxisColor))}function m(x,y,v,M){y._context.staticPlot||_.ensureSingle(x,"rect",l.slideBoxClassName,function(p){p.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:M._height,fill:l.slideBoxFill})}function f(x,y,v,M){var p=_.ensureSingle(x,"g",l.grabberMinClassName),S=_.ensureSingle(x,"g",l.grabberMaxClassName),A={x:0,width:l.handleWidth,rx:l.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},k={y:Math.round(M._height/4),height:Math.round(M._height/2)};_.ensureSingle(p,"rect",l.handleMinClassName,function(P){P.attr(A)}).attr(k),_.ensureSingle(S,"rect",l.handleMaxClassName,function(P){P.attr(A)}).attr(k);var C={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:y._context.staticPlot?void 0:l.grabAreaCursor};_.ensureSingle(p,"rect",l.grabAreaMinClassName,function(P){P.attr(C)}).attr("height",M._height),_.ensureSingle(S,"rect",l.grabAreaMaxClassName,function(P){P.attr(C)}).attr("height",M._height)}F.exports=function(x){for(var y=x._fullLayout,v=y._rangeSliderData,M=0;M<v.length;M++){var p=v[M][l.name];p._clipId=p._id+"-"+y._uid}var S=y._infolayer.selectAll("g."+l.containerClassName).data(v,function(A){return A._name});S.exit().each(function(A){var k=A[l.name];y._topdefs.select("#"+k._clipId).remove()}).remove(),v.length!==0&&(S.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),S.each(function(A){var k=T.select(this),C=A[l.name],P=y[n.id2name(A.anchor)],R=C[n.id2name(A.anchor)];if(C.range){var O,X=_.simpleMap(C.range,A.r2l),D=_.simpleMap(A.range,A.r2l);O=D[0]<D[1]?[Math.min(X[0],D[0]),Math.max(X[1],D[1])]:[Math.max(X[0],D[0]),Math.min(X[1],D[1])],C.range=C._input.range=_.simpleMap(O,A.l2r)}A.cleanRange("rangeslider.range");var V=y._size,j=A.domain;C._width=V.w*(j[1]-j[0]);var B=Math.round(V.l+V.w*j[0]),W=Math.round(V.t+V.h*(1-A._counterDomainMin)+(A.side==="bottom"?A._depth:0)+C._offsetShift+l.extraPad);k.attr("transform",g(B,W)),C._rl=_.simpleMap(C.range,A.r2l);var q=C._rl[0],re=C._rl[1],ee=re-q;if(C.p2d=function(ye){return ye/C._width*ee+q},C.d2p=function(ye){return(ye-q)/ee*C._width},A.rangebreaks){var K=A.locateBreaks(q,re);if(K.length){var Y,$,ne=0;for(Y=0;Y<K.length;Y++)ne+=($=K[Y]).max-$.min;var ae=C._width/(re-q-ne),se=[-ae*q];for(Y=0;Y<K.length;Y++)$=K[Y],se.push(se[se.length-1]-ae*($.max-$.min));for(C.d2p=function(ye){for(var Te=se[0],Ce=0;Ce<K.length;Ce++){var pe=K[Ce];if(ye>=pe.max)Te=se[Ce+1];else if(ye<pe.min)break}return Te+ae*ye},Y=0;Y<K.length;Y++)($=K[Y]).pmin=C.d2p($.min),$.pmax=C.d2p($.max);C.p2d=function(ye){for(var Te=se[0],Ce=0;Ce<K.length;Ce++){var pe=K[Ce];if(ye>=pe.pmax)Te=se[Ce+1];else if(ye<pe.pmin)break}return(ye-Te)/ae}}}if(R.rangemode!=="match"){var ce=P.r2l(R.range[0]),me=P.r2l(R.range[1])-ce;C.d2pOppAxis=function(ye){return(ye-ce)/me*C._height}}k.call(u,x,A,C).call(d,x,A,C).call(c,x,A,C).call(w,x,A,C,R).call(m,x,A,C).call(f,x,A,C),function(ye,Te,Ce,pe){if(!Te._context.staticPlot){var fe=ye.select("rect."+l.slideBoxClassName).node(),Oe=ye.select("rect."+l.grabAreaMinClassName).node(),Se=ye.select("rect."+l.grabAreaMaxClassName).node();ye.on("mousedown",Me),ye.on("touchstart",Me)}function Me(){var ue=T.event,le=ue.target,ie=ue.clientX||ue.touches[0].clientX,ge=ie-ye.node().getBoundingClientRect().left,Ae=pe.d2p(Ce._rl[0]),we=pe.d2p(Ce._rl[1]),Ne=r.coverSlip();function He(Le){var Ee,Re,je,Fe=+(Le.clientX||Le.touches[0].clientX)-ie;switch(le){case fe:if(je="ew-resize",Ae+Fe>Ce._length||we+Fe<0)return;Ee=Ae+Fe,Re=we+Fe;break;case Oe:if(je="col-resize",Ae+Fe>Ce._length)return;Ee=Ae+Fe,Re=we;break;case Se:if(je="col-resize",we+Fe<0)return;Ee=Ae,Re=we+Fe;break;default:je="ew-resize",Ee=ge,Re=ge+Fe}if(Re<Ee){var Xe=Re;Re=Ee,Ee=Xe}pe._pixelMin=Ee,pe._pixelMax=Re,s(T.select(Ne),je),function(Ze,at,lt,ot){function bt(ct){return lt.l2r(_.constrain(ct,ot._rl[0],ot._rl[1]))}var wt=bt(ot.p2d(ot._pixelMin)),ht=bt(ot.p2d(ot._pixelMax));window.requestAnimationFrame(function(){b.call("_guiRelayout",at,lt._name+".range",[wt,ht])})}(0,Te,Ce,pe)}function de(){Ne.removeEventListener("mousemove",He),Ne.removeEventListener("mouseup",de),this.removeEventListener("touchmove",He),this.removeEventListener("touchend",de),_.removeElement(Ne)}this.addEventListener("touchmove",He),this.addEventListener("touchend",de),Ne.addEventListener("mousemove",He),Ne.addEventListener("mouseup",de)}}(k,x,A,C),function(ye,Te,Ce,pe,fe,Oe){var Se=l.handleWidth/2;function Me(Le){return _.constrain(Le,0,pe._width)}function ue(Le){return _.constrain(Le,0,pe._height)}function le(Le){return _.constrain(Le,-Se,pe._width+Se)}var ie=Me(pe.d2p(Ce._rl[0])),ge=Me(pe.d2p(Ce._rl[1]));if(ye.select("rect."+l.slideBoxClassName).attr("x",ie).attr("width",ge-ie),ye.select("rect."+l.maskMinClassName).attr("width",ie),ye.select("rect."+l.maskMaxClassName).attr("x",ge).attr("width",pe._width-ge),Oe.rangemode!=="match"){var Ae=pe._height-ue(pe.d2pOppAxis(fe._rl[1])),we=pe._height-ue(pe.d2pOppAxis(fe._rl[0]));ye.select("rect."+l.maskMinOppAxisClassName).attr("x",ie).attr("height",Ae).attr("width",ge-ie),ye.select("rect."+l.maskMaxOppAxisClassName).attr("x",ie).attr("y",we).attr("height",pe._height-we).attr("width",ge-ie),ye.select("rect."+l.slideBoxClassName).attr("y",Ae).attr("height",we-Ae)}var Ne=.5,He=Math.round(le(ie-Se))-Ne,de=Math.round(le(ge-Se))+Ne;ye.select("g."+l.grabberMinClassName).attr("transform",g(He,Ne)),ye.select("g."+l.grabberMaxClassName).attr("transform",g(de,Ne))}(k,0,A,C,P,R),A.side==="bottom"&&t.draw(x,A._id+"title",{propContainer:A,propName:A._name+".title",placeholder:y._dfltTitle.x,attributes:{x:A._offset+A._length/2,y:W+C._height+C._offsetShift+10+1.5*A.title.font.size,"text-anchor":"middle"}})}))}},549:function(F,L,e){var T=e(41675),b=e(63893),a=e(73251),_=e(18783).LINE_SPACING,g=a.name;function h(o){var t=o&&o[g];return t&&t.visible}L.isVisible=h,L.makeData=function(o){var t=T.list({_fullLayout:o},"x",!0),i=o.margin,n=[];if(!o._has("gl2d"))for(var r=0;r<t.length;r++){var s=t[r];if(h(s)){n.push(s);var l=s[g];l._id=g+s._id,l._height=(o.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}o._rangeSliderData=n},L.autoMarginOpts=function(o,t){var i=o._fullLayout,n=t[g],r=t._id.charAt(0),s=0,l=0;return t.side==="bottom"&&(s=t._depth,t.title.text!==i._dfltTitle[r]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(b.BR_TAG_ALL)||[]).length*t.title.font.size*_)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+s+Math.max(i.margin.b,l),pad:a.extraPad+2*n._offsetShift}}},13137:function(F,L,e){var T=e(71828),b=e(75148),a=e(47850),_=e(549);F.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:T.extendFlat({},b,{yaxis:a})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}},47850:function(F){F.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(F,L,e){var T=e(50215),b=e(82196).line,a=e(79952).P,_=e(1426).extendFlat,g=e(30962).overrideAll,h=e(44467).templatedArray;e(24695),F.exports=g(h("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:_({},T.xref,{}),yref:_({},T.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:b.color,width:_({},b.width,{min:1,dflt:1}),dash:_({},a,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(F){F.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(F,L,e){var T=e(71828),b=e(89298),a=e(85501),_=e(8389),g=e(30477);function h(o,t,i){function n(k,C){return T.coerce(o,t,_,k,C)}var r=n("path"),s=n("type",r?"path":"rect")!=="path";s&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],u=0;u<2;u++){var d,c,w,m=l[u],f={_fullLayout:i},x=b.coerceRef(o,t,f,m);if((d=b.getFromId(f,x))._selectionIndices.push(t._index),w=g.rangeToShapePosition(d),c=g.shapePositionToRange(d),s){var y=m+"0",v=m+"1",M=o[y],p=o[v];o[y]=c(o[y],!0),o[v]=c(o[v],!0),b.coercePosition(t,f,n,x,y),b.coercePosition(t,f,n,x,v);var S=t[y],A=t[v];S!==void 0&&A!==void 0&&(t[y]=w(S),t[v]=w(A),o[y]=M,o[v]=p)}}s&&T.noneOrAll(o,t,["x0","x1","y0","y1"])}F.exports=function(o,t){a(o,t,{name:"selections",handleItemDefaults:h});for(var i=t.selections,n=0;n<i.length;n++){var r=i[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},32485:function(F,L,e){var T=e(60165).readPaths,b=e(42359),a=e(51873).clearOutlineControllers,_=e(7901),g=e(91424),h=e(44467).arrayEditor,o=e(30477),t=o.getPathString;function i(u){var d=u._fullLayout;for(var c in a(u),d._selectionLayer.selectAll("path").remove(),d._plots){var w=d._plots[c].selectionLayer;w&&w.selectAll("path").remove()}for(var m=0;m<d.selections.length;m++)r(u,m)}function n(u){return u._context.editSelection}function r(u,d){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+d+'"]').remove();var c=o.makeSelectionsOptionsAndPlotinfo(u,d),w=c.options,m=c.plotinfo;w._input&&function(f){var x=t(u,w),y={"data-index":d,"fill-rule":"evenodd",d:x},v=w.opacity,M="rgba(0,0,0,0)",p=w.line.color||_.contrast(u._fullLayout.plot_bgcolor),S=w.line.width,A=w.line.dash;S||(S=5,A="solid");var k=n(u)&&u._fullLayout._activeSelectionIndex===d;k&&(M=u._fullLayout.activeselection.fillcolor,v=u._fullLayout.activeselection.opacity);for(var C=[],P=1;P>=0;P--){var R=f.append("path").attr(y).style("opacity",P?.1:v).call(_.stroke,p).call(_.fill,M).call(g.dashLine,P?"solid":A,P?4+S:S);if(s(R,u,w),k){var O=h(u.layout,"selections",w);R.style({cursor:"move"});var X={element:R.node(),plotinfo:m,gd:u,editHelpers:O,isActiveSelection:!0},D=T(x,u);b(D,R,X)}else R.style("pointer-events",P?"all":"none");C[P]=R}var V=C[0];C[1].node().addEventListener("click",function(){return function(j,B){if(n(j)){var W=+B.node().getAttribute("data-index");if(W>=0){if(W===j._fullLayout._activeSelectionIndex)return void l(j);j._fullLayout._activeSelectionIndex=W,j._fullLayout._deactivateSelection=l,i(j)}}}(u,V)})}(u._fullLayout._selectionLayer)}function s(u,d,c){var w=c.xref+c.yref;g.setClipUrl(u,"clip"+d._fullLayout._uid+w,d)}function l(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(a(u),delete u._fullLayout._activeSelectionIndex,i(u))}F.exports={draw:i,drawOne:r,activateLastSelection:function(u){if(n(u)){var d=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=d,u._fullLayout._deactivateSelection=l,i(u)}}}},53777:function(F,L,e){var T=e(79952).P,b=e(1426).extendFlat;F.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:b({},T,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(F){F.exports=function(L,e,T){T("newselection.mode"),T("newselection.line.width")&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},35855:function(F,L,e){var T=e(64505).selectMode,b=e(51873).clearOutline,a=e(60165),_=a.readPaths,g=a.writePaths,h=a.fixDatesForPaths;F.exports=function(o,t){if(o.length){var i=o[0][0];if(i){var n=i.getAttribute("d"),r=t.gd,s=r._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,d=l.yaxis,c=t.isActiveSelection,w=t.dragmode,m=(r.layout||{}).selections||[];if(!T(w)&&c!==void 0){var f=r._fullLayout._activeSelectionIndex;if(f<m.length)switch(r._fullLayout.selections[f].type){case"rect":w="select";break;case"path":w="lasso"}}var x,y=_(n,r,l,c),v={xref:u._id,yref:d._id,opacity:s.opacity,line:{color:s.line.color,width:s.line.width,dash:s.line.dash}};y.length===1&&(x=y[0]),x&&x.length===5&&w==="select"?(v.type="rect",v.x0=x[0][1],v.y0=x[0][2],v.x1=x[2][1],v.y1=x[2][2]):(v.type="path",u&&d&&h(y,u,d),v.path=g(y),x=null),b(r);for(var M=t.editHelpers,p=(M||{}).modifyItem,S=[],A=0;A<m.length;A++){var k=r._fullLayout.selections[A];if(k){if(S[A]=k._input,c!==void 0&&A===r._fullLayout._activeSelectionIndex){var C=v;switch(k.type){case"rect":p("x0",C.x0),p("x1",C.x1),p("y0",C.y0),p("y1",C.y1);break;case"path":p("path",C.path)}}}else S[A]=k}return c===void 0?(S.push(v),S):M?M.getUpdateObj():{}}}}},75549:function(F,L,e){var T=e(71828).strTranslate;function b(a,_){switch(a.type){case"log":return a.p2d(_);case"date":return a.p2r(_,0,a.calendar);default:return a.p2r(_)}}F.exports={p2r:b,r2p:function(a,_){switch(a.type){case"log":return a.d2p(_);case"date":return a.r2p(_,0,a.calendar);default:return a.r2p(_)}},axValue:function(a){var _=a._id.charAt(0)==="y"?1:0;return function(g){return b(a,g[_])}},getTransform:function(a){return T(a.xaxis._offset,a.yaxis._offset)}}},47322:function(F,L,e){var T=e(32485),b=e(3937);F.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:T.draw,drawOne:T.drawOne,reselect:b.reselect,prepSelect:b.prepSelect,clearOutline:b.clearOutline,clearSelectionsCache:b.clearSelectionsCache,selectOnClick:b.selectOnClick}},3937:function(F,L,e){var T=e(52142),b=e(38258),a=e(73972),_=e(91424).dashStyle,g=e(7901),h=e(30211),o=e(23469).makeEventData,t=e(64505),i=t.freeMode,n=t.rectMode,r=t.drawMode,s=t.openMode,l=t.selectMode,u=e(30477),d=e(21459),c=e(42359),w=e(51873).clearOutline,m=e(60165),f=m.handleEllipse,x=m.readPaths,y=e(90551).newShapes,v=e(35855),M=e(32485).activateLastSelection,p=e(71828),S=p.sorterAsc,A=e(61082),k=e(79990),C=e(41675).getFromId,P=e(33306),R=e(61549).redrawReglTraces,O=e(34122),X=O.MINSELECT,D=A.filter,V=A.tester,j=e(75549),B=j.p2r,W=j.axValue,q=j.getTransform;function re(de){return de.subplot!==void 0}function ee(de,Le,Ee,Re,je,Fe,Xe){var Ze,at,lt,ot,bt,wt,ht,ct,Tt,Lt=Le._hoverdata,kt=Le._fullLayout.clickmode.indexOf("event")>-1,Ot=[];if(function(tt){return tt&&Array.isArray(tt)&&tt[0].hoverOnBox!==!0}(Lt)){ne(de,Le,Fe);var Pt=function(tt,ut){var Ke,De,Be=tt[0],Qe=-1,rt=[];for(De=0;De<ut.length;De++)if(Ke=ut[De],Be.fullData._expandedIndex===Ke.cd[0].trace._expandedIndex){if(Be.hoverOnBox===!0)break;Be.pointNumber!==void 0?Qe=Be.pointNumber:Be.binNumber!==void 0&&(Qe=Be.binNumber,rt=Be.pointNumbers);break}return{pointNumber:Qe,pointNumbers:rt,searchInfo:Ke}}(Lt,Ze=ce(Le,Ee,Re,je));if(Pt.pointNumbers.length>0?function(tt,ut){var Ke,De,Be,Qe=[];for(Be=0;Be<tt.length;Be++)(Ke=tt[Be]).cd[0].trace.selectedpoints&&Ke.cd[0].trace.selectedpoints.length>0&&Qe.push(Ke);if(Qe.length===1&&Qe[0]===ut.searchInfo&&(De=ut.searchInfo.cd[0].trace).selectedpoints.length===ut.pointNumbers.length){for(Be=0;Be<ut.pointNumbers.length;Be++)if(De.selectedpoints.indexOf(ut.pointNumbers[Be])<0)return!1;return!0}return!1}(Ze,Pt):function(tt){var ut,Ke,De=0;for(Ke=0;Ke<tt.length;Ke++)if((ut=tt[Ke].cd[0].trace).selectedpoints&&(ut.selectedpoints.length>1||(De+=ut.selectedpoints.length)>1))return!1;return De===1}(Ze)&&(wt=ye(Pt))){for(Xe&&Xe.remove(),Tt=0;Tt<Ze.length;Tt++)(at=Ze[Tt])._module.selectPoints(at,!1);Te(Le,Ze),ae(Fe),kt&&He(Le)}else{for(ht=de.shiftKey&&(wt!==void 0?wt:ye(Pt)),lt=function(tt,ut,Ke){return{pointNumber:tt,searchInfo:ut,subtract:!!Ke}}(Pt.pointNumber,Pt.searchInfo,ht),ot=$(Fe.selectionDefs.concat([lt])),Tt=0;Tt<Ze.length;Tt++)if(bt=pe(Ze[Tt]._module.selectPoints(Ze[Tt],ot),Ze[Tt]),Ot.length)for(var et=0;et<bt.length;et++)Ot.push(bt[et]);else Ot=bt;if(Te(Le,Ze,ct={points:Ot}),lt&&Fe&&Fe.selectionDefs.push(lt),Xe){var nt=Fe.mergedPolygons,Ye=s(Fe.dragmode);c(fe(nt,Ye),Xe,Fe)}kt&&Ne(Le,ct)}}}function K(de){return"pointNumber"in de&&"searchInfo"in de}function Y(de){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Le,Ee,Re,je){var Fe=de.searchInfo.cd[0].trace._expandedIndex;return je.cd[0].trace._expandedIndex===Fe&&Re===de.pointNumber},isRect:!1,degenerate:!1,subtract:!!de.subtract}}function $(de){if(de.length){for(var Le=[],Ee=K(de[0])?0:de[0][0][0],Re=Ee,je=K(de[0])?0:de[0][0][1],Fe=je,Xe=0;Xe<de.length;Xe++)if(K(de[Xe]))Le.push(Y(de[Xe]));else{var Ze=V(de[Xe]);Ze.subtract=!!de[Xe].subtract,Le.push(Ze),Ee=Math.min(Ee,Ze.xmin),Re=Math.max(Re,Ze.xmax),je=Math.min(je,Ze.ymin),Fe=Math.max(Fe,Ze.ymax)}return{xmin:Ee,xmax:Re,ymin:je,ymax:Fe,pts:[],contains:function(at,lt,ot,bt){for(var wt=!1,ht=0;ht<Le.length;ht++)Le[ht].contains(at,lt,ot,bt)&&(wt=!Le[ht].subtract);return wt},isRect:!1,degenerate:!1}}}function ne(de,Le,Ee){var Re=Le._fullLayout,je=Ee.plotinfo,Fe=Ee.dragmode,Xe=Re._lastSelectedSubplot&&Re._lastSelectedSubplot===je.id,Ze=(de.shiftKey||de.altKey)&&!(r(Fe)&&s(Fe));Xe&&Ze&&je.selection&&je.selection.selectionDefs&&!Ee.selectionDefs?(Ee.selectionDefs=je.selection.selectionDefs,Ee.mergedPolygons=je.selection.mergedPolygons):Ze&&je.selection||ae(Ee),Xe||(w(Le),Re._lastSelectedSubplot=je.id)}function ae(de,Le){var Ee=de.dragmode,Re=de.plotinfo,je=de.gd;(function(bt){return bt._fullLayout._activeShapeIndex>=0})(je)&&je._fullLayout._deactivateShape(je),function(bt){return bt._fullLayout._activeSelectionIndex>=0}(je)&&je._fullLayout._deactivateSelection(je);var Fe=je._fullLayout._zoomlayer,Xe=r(Ee),Ze=l(Ee);if(Xe||Ze){var at,lt,ot=Fe.selectAll(".select-outline-"+Re.id);ot&&je._fullLayout._outlining&&(Xe&&(at=y(ot,de)),at&&a.call("_guiRelayout",je,{shapes:at}),Ze&&!re(de)&&(lt=v(ot,de)),lt&&(je._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",je,{selections:lt}).then(function(){Le&&M(je)})),je._fullLayout._outlining=!1)}Re.selection={},Re.selection.selectionDefs=de.selectionDefs=[],Re.selection.mergedPolygons=de.mergedPolygons=[]}function se(de){return de._id}function ce(de,Le,Ee,Re){if(!de.calcdata)return[];var je,Fe,Xe,Ze=[],at=Le.map(se),lt=Ee.map(se);for(Xe=0;Xe<de.calcdata.length;Xe++)if((Fe=(je=de.calcdata[Xe])[0].trace).visible===!0&&Fe._module&&Fe._module.selectPoints)if(!re({subplot:Re})||Fe.subplot!==Re&&Fe.geo!==Re)if(Fe.type==="splom"){if(Fe._xaxes[at[0]]&&Fe._yaxes[lt[0]]){var ot=me(Fe._module,je,Le[0],Ee[0]);ot.scene=de._fullLayout._splomScenes[Fe.uid],Ze.push(ot)}}else if(Fe.type==="sankey"){var bt=me(Fe._module,je,Le[0],Ee[0]);Ze.push(bt)}else{if(at.indexOf(Fe.xaxis)===-1||lt.indexOf(Fe.yaxis)===-1)continue;Ze.push(me(Fe._module,je,C(de,Fe.xaxis),C(de,Fe.yaxis)))}else Ze.push(me(Fe._module,je,Le[0],Ee[0]));return Ze}function me(de,Le,Ee,Re){return{_module:de,cd:Le,xaxis:Ee,yaxis:Re}}function ye(de){var Le=de.searchInfo.cd[0].trace,Ee=de.pointNumber,Re=de.pointNumbers,je=Re.length>0?Re[0]:Ee;return!!Le.selectedpoints&&Le.selectedpoints.indexOf(je)>-1}function Te(de,Le,Ee){var Re,je;for(Re=0;Re<Le.length;Re++){var Fe=Le[Re].cd[0].trace._fullInput,Xe=de._fullLayout._tracePreGUI[Fe.uid]||{};Xe.selectedpoints===void 0&&(Xe.selectedpoints=Fe._input.selectedpoints||null)}if(Ee){var Ze=Ee.points||[];for(Re=0;Re<Le.length;Re++)(je=Le[Re].cd[0].trace)._input.selectedpoints=je._fullInput.selectedpoints=[],je._fullInput!==je&&(je.selectedpoints=[]);for(var at=0;at<Ze.length;at++){var lt=Ze[at],ot=lt.data,bt=lt.fullData,wt=lt.pointIndex,ht=lt.pointIndices;ht?([].push.apply(ot.selectedpoints,ht),je._fullInput!==je&&[].push.apply(bt.selectedpoints,ht)):(ot.selectedpoints.push(wt),je._fullInput!==je&&bt.selectedpoints.push(wt))}}else for(Re=0;Re<Le.length;Re++)delete(je=Le[Re].cd[0].trace).selectedpoints,delete je._input.selectedpoints,je._fullInput!==je&&delete je._fullInput.selectedpoints;(function(ct,Tt){for(var Lt=!1,kt=0;kt<Tt.length;kt++){var Ot=Tt[kt],Pt=Ot.cd;a.traceIs(Pt[0].trace,"regl")&&(Lt=!0);var et=Ot._module,nt=et.styleOnSelect||et.style;nt&&(nt(ct,Pt,Pt[0].node3),Pt[0].nodeRangePlot3&&nt(ct,Pt,Pt[0].nodeRangePlot3))}Lt&&(P(ct),R(ct))})(de,Le)}function Ce(de,Le,Ee){for(var Re=(Ee?T.difference:T.union)({regions:de},{regions:[Le]}).regions.reverse(),je=0;je<Re.length;je++){var Fe=Re[je];Fe.subtract=ie(Fe,Re.slice(0,je))}return Re}function pe(de,Le){if(Array.isArray(de))for(var Ee=Le.cd,Re=Le.cd[0].trace,je=0;je<de.length;je++)de[je]=o(de[je],Re,Ee);return de}function fe(de,Le){for(var Ee=[],Re=0;Re<de.length;Re++){Ee[Re]=[];for(var je=0;je<de[Re].length;je++){Ee[Re][je]=[],Ee[Re][je][0]=je?"L":"M";for(var Fe=0;Fe<de[Re][je].length;Fe++)Ee[Re][je].push(de[Re][je][Fe])}Le||Ee[Re].push(["Z",Ee[Re][0][1],Ee[Re][0][2]])}return Ee}function Oe(de,Le){for(var Ee,Re,je=[],Fe=[],Xe=0;Xe<Le.length;Xe++){var Ze=Le[Xe];Re=Ze._module.selectPoints(Ze,de),Fe.push(Re),Ee=pe(Re,Ze),je=je.concat(Ee)}return je}function Se(de,Le,Ee,Re,je){var Fe,Xe,Ze,at=!!Re;je&&(Fe=je.plotinfo,Xe=je.xaxes[0]._id,Ze=je.yaxes[0]._id);var lt=[],ot=[],bt=le(de),wt=de._fullLayout;if(Fe){var ht=wt._zoomlayer,ct=wt.dragmode,Tt=r(ct),Lt=l(ct);if(Tt||Lt){var kt=C(de,Xe,"x"),Ot=C(de,Ze,"y");if(kt&&Ot){var Pt=ht.selectAll(".select-outline-"+Fe.id);if(Pt&&de._fullLayout._outlining&&Pt.length){for(var et=Pt[0][0].getAttribute("d"),nt=x(et,de,Fe),Ye=[],tt=0;tt<nt.length;tt++){for(var ut=nt[tt],Ke=[],De=0;De<ut.length;De++)Ke.push([ge(kt,ut[De][1]),ge(Ot,ut[De][2])]);Ke.xref=Xe,Ke.yref=Ze,Ke.subtract=ie(Ke,Ye),Ye.push(Ke)}bt=bt.concat(Ye)}}}}var Be=Xe&&Ze?[Xe+Ze]:wt._subplots.cartesian;(function(Pn){var In=Pn.calcdata;if(In)for(var kn=0;kn<In.length;kn++){var zn=In[kn][0].trace,er=Pn._fullLayout._splomScenes;if(er){var ir=er[zn.uid];ir&&(ir.selectBatch=[])}}})(de);for(var Qe={},rt=0;rt<Be.length;rt++){var vt=Be[rt],mt=vt.indexOf("y"),xt=vt.slice(0,mt),dt=vt.slice(mt),Et=Xe&&Ze?Ee:void 0;if(Et=ue(bt,xt,dt,Et)){var pt=Re;if(!at){var gt=C(de,xt,"x"),Mt=C(de,dt,"y");pt=ce(de,[gt],[Mt],vt);for(var Nt=0;Nt<pt.length;Nt++){var Bt=pt[Nt],Ut=Bt.cd[0],Jt=Ut.trace;if(Bt._module.name==="scattergl"&&!Ut.t.xpx){var Vt=Jt.x,Qt=Jt.y,qt=Jt._length;Ut.t.xpx=[],Ut.t.ypx=[];for(var gn=0;gn<qt;gn++)Ut.t.xpx[gn]=gt.c2p(Vt[gn]),Ut.t.ypx[gn]=Mt.c2p(Qt[gn])}Bt._module.name==="splom"&&(Qe[Jt.uid]||(Qe[Jt.uid]=!0))}}var wn=Oe(Et,pt);lt=lt.concat(wn),ot=ot.concat(pt)}}var hn={points:lt};Te(de,ot,hn);var Xt=wt.clickmode.indexOf("event")>-1&&Le;if(!Fe&&Le){var an=le(de,!0);if(an.length){var tn=an[0].xref,cn=an[0].yref;if(tn&&cn){var vn=Ae(an);we([C(de,tn,"x"),C(de,cn,"y")])(hn,vn)}}de._fullLayout._noEmitSelectedAtStart?de._fullLayout._noEmitSelectedAtStart=!1:Xt&&Ne(de,hn),wt._reselect=!1}if(!Fe&&wt._deselect){var yn=wt._deselect;(function(Pn,In,kn){for(var zn=0;zn<kn.length;zn++){var er=kn[zn];if(er.xaxis&&er.xaxis._id===Pn&&er.yaxis&&er.yaxis._id===In)return!0}return!1})(Xe=yn.xref,Ze=yn.yref,ot)||Me(de,Xe,Ze,Re),Xt&&(hn.points.length?Ne(de,hn):He(de)),wt._deselect=!1}return{eventData:hn,selectionTesters:Ee}}function Me(de,Le,Ee,Re){Re=ce(de,[C(de,Le,"x")],[C(de,Ee,"y")],Le+Ee);for(var je=0;je<Re.length;je++){var Fe=Re[je];Fe._module.selectPoints(Fe,!1)}Te(de,Re)}function ue(de,Le,Ee,Re){for(var je,Fe=0;Fe<de.length;Fe++){var Xe=de[Fe];Le===Xe.xref&&Ee===Xe.yref&&(je?Re=$(je=Ce(je,Xe,!!Xe.subtract)):(je=[Xe],Re=V(Xe)))}return Re}function le(de,Le){for(var Ee=[],Re=de._fullLayout,je=Re.selections,Fe=je.length,Xe=0;Xe<Fe;Xe++)if(!Le||Xe===Re._activeSelectionIndex){var Ze=je[Xe];if(Ze){var at,lt,ot,bt,wt,ht=Ze.xref,ct=Ze.yref,Tt=C(de,ht,"x"),Lt=C(de,ct,"y");if(Ze.type==="rect"){wt=[];var kt=ge(Tt,Ze.x0),Ot=ge(Tt,Ze.x1),Pt=ge(Lt,Ze.y0),et=ge(Lt,Ze.y1);wt=[[kt,Pt],[kt,et],[Ot,et],[Ot,Pt]],at=Math.min(kt,Ot),lt=Math.max(kt,Ot),ot=Math.min(Pt,et),bt=Math.max(Pt,et),wt.xmin=at,wt.xmax=lt,wt.ymin=ot,wt.ymax=bt,wt.xref=ht,wt.yref=ct,wt.subtract=!1,wt.isRect=!0,Ee.push(wt)}else if(Ze.type==="path")for(var nt=Ze.path.split("Z"),Ye=[],tt=0;tt<nt.length;tt++){var ut=nt[tt];if(ut){ut+="Z";var Ke=u.extractPathCoords(ut,d.paramIsX,"raw"),De=u.extractPathCoords(ut,d.paramIsY,"raw");at=1/0,lt=-1/0,ot=1/0,bt=-1/0,wt=[];for(var Be=0;Be<Ke.length;Be++){var Qe=ge(Tt,Ke[Be]),rt=ge(Lt,De[Be]);wt.push([Qe,rt]),at=Math.min(Qe,at),lt=Math.max(Qe,lt),ot=Math.min(rt,ot),bt=Math.max(rt,bt)}wt.xmin=at,wt.xmax=lt,wt.ymin=ot,wt.ymax=bt,wt.xref=ht,wt.yref=ct,wt.subtract=ie(wt,Ye),Ye.push(wt),Ee.push(wt)}}}}return Ee}function ie(de,Le){for(var Ee=!1,Re=0;Re<Le.length;Re++)for(var je=Le[Re],Fe=0;Fe<de.length;Fe++)if(b(de[Fe],je)){Ee=!Ee;break}return Ee}function ge(de,Le){return de.type==="date"&&(Le=Le.replace("_"," ")),de.type==="log"?de.c2p(Le):de.r2p(Le,null,de.calendar)}function Ae(de){for(var Le=de.length,Ee=[],Re=0;Re<Le;Re++){var je=de[Re];Ee=(Ee=Ee.concat(je)).concat([je[0]])}return(Fe=Ee).isRect=Fe.length===5&&Fe[0][0]===Fe[4][0]&&Fe[0][1]===Fe[4][1]&&Fe[0][0]===Fe[1][0]&&Fe[2][0]===Fe[3][0]&&Fe[0][1]===Fe[3][1]&&Fe[1][1]===Fe[2][1]||Fe[0][1]===Fe[1][1]&&Fe[2][1]===Fe[3][1]&&Fe[0][0]===Fe[3][0]&&Fe[1][0]===Fe[2][0],Fe.isRect&&(Fe.xmin=Math.min(Fe[0][0],Fe[2][0]),Fe.xmax=Math.max(Fe[0][0],Fe[2][0]),Fe.ymin=Math.min(Fe[0][1],Fe[2][1]),Fe.ymax=Math.max(Fe[0][1],Fe[2][1])),Fe;var Fe}function we(de){return function(Le,Ee){for(var Re,je,Fe=0;Fe<de.length;Fe++){var Xe=de[Fe],Ze=Xe._id,at=Ze.charAt(0);if(Ee.isRect){Re||(Re={});var lt=Ee[at+"min"],ot=Ee[at+"max"];lt!==void 0&&ot!==void 0&&(Re[Ze]=[B(Xe,lt),B(Xe,ot)].sort(S))}else je||(je={}),je[Ze]=Ee.map(W(Xe))}Re&&(Le.range=Re),je&&(Le.lassoPoints=je)}}function Ne(de,Le){Le&&(Le.selections=(de.layout||{}).selections||[]),de.emit("plotly_selected",Le)}function He(de){de.emit("plotly_deselect",null)}F.exports={reselect:Se,prepSelect:function(de,Le,Ee,Re,je){var Fe=!re(Re),Xe=i(je),Ze=n(je),at=s(je),lt=r(je),ot=l(je),bt=je==="drawcircle",wt=je==="drawline"||bt,ht=Re.gd,ct=ht._fullLayout,Tt=ot&&ct.newselection.mode==="immediate"&&Fe,Lt=ct._zoomlayer,kt=Re.element.getBoundingClientRect(),Ot=Re.plotinfo,Pt=q(Ot),et=Le-kt.left,nt=Ee-kt.top;ct._calcInverseTransform(ht);var Ye=p.apply3DTransform(ct._invTransform)(et,nt);et=Ye[0],nt=Ye[1];var tt,ut,Ke,De,Be,Qe,rt,vt=ct._invScaleX,mt=ct._invScaleY,xt=et,dt=nt,Et="M"+et+","+nt,pt=Re.xaxes[0],gt=Re.yaxes[0],Mt=pt._length,Nt=gt._length,Bt=de.altKey&&!(r(je)&&at);ne(de,ht,Re),Xe&&(tt=D([[et,nt]],O.BENDPX));var Ut=Lt.selectAll("path.select-outline-"+Ot.id).data([1]),Jt=lt?ct.newshape:ct.newselection;lt&&(Re.hasText=Jt.label.text||Jt.label.texttemplate);var Vt=lt&&!at?Jt.fillcolor:"rgba(0,0,0,0)",Qt=Jt.line.color||(Fe?g.contrast(ht._fullLayout.plot_bgcolor):"#7f7f7f");Ut.enter().append("path").attr("class","select-outline select-outline-"+Ot.id).style({opacity:lt?Jt.opacity/2:1,"stroke-dasharray":_(Jt.line.dash,Jt.line.width),"stroke-width":Jt.line.width+"px","shape-rendering":"crispEdges"}).call(g.stroke,Qt).call(g.fill,Vt).attr("fill-rule","evenodd").classed("cursor-move",!!lt).attr("transform",Pt).attr("d",Et+"Z");var qt=Lt.append("path").attr("class","zoombox-corners").style({fill:g.background,stroke:g.defaultLine,"stroke-width":1}).attr("transform",Pt).attr("d","M0,0Z");if(lt&&Re.hasText){var gn=Lt.select(".label-temp");gn.empty()&&(gn=Lt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var wn=ct._uid+O.SELECTID,hn=[],Xt=ce(ht,Re.xaxes,Re.yaxes,Re.subplot);Tt&&!de.shiftKey&&(Re._clearSubplotSelections=function(){if(Fe){var tn=pt._id,cn=gt._id;Me(ht,tn,cn,Xt);for(var vn=(ht.layout||{}).selections||[],yn=[],Pn=!1,In=0;In<vn.length;In++){var kn=ct.selections[In];kn.xref!==tn||kn.yref!==cn?yn.push(vn[In]):Pn=!0}Pn&&(ht._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",ht,{selections:yn}))}});var an=function(tn){return tn.plotinfo.fillRangeItems||we(tn.xaxes.concat(tn.yaxes))}(Re);Re.moveFn=function(tn,cn){Re._clearSubplotSelections&&(Re._clearSubplotSelections(),Re._clearSubplotSelections=void 0),xt=Math.max(0,Math.min(Mt,vt*tn+et)),dt=Math.max(0,Math.min(Nt,mt*cn+nt));var vn=Math.abs(xt-et),yn=Math.abs(dt-nt);if(Ze){var Pn,In,kn;if(ot){var zn=ct.selectdirection;switch(Pn=zn==="any"?yn<Math.min(.6*vn,X)?"h":vn<Math.min(.6*yn,X)?"v":"d":zn){case"h":In=bt?Nt/2:0,kn=Nt;break;case"v":In=bt?Mt/2:0,kn=Mt}}if(lt)switch(ct.newshape.drawdirection){case"vertical":Pn="h",In=bt?Nt/2:0,kn=Nt;break;case"horizontal":Pn="v",In=bt?Mt/2:0,kn=Mt;break;case"ortho":vn<yn?(Pn="h",In=nt,kn=dt):(Pn="v",In=et,kn=xt);break;default:Pn="d"}Pn==="h"?((De=wt?f(bt,[xt,In],[xt,kn]):[[et,In],[et,kn],[xt,kn],[xt,In]]).xmin=wt?xt:Math.min(et,xt),De.xmax=wt?xt:Math.max(et,xt),De.ymin=Math.min(In,kn),De.ymax=Math.max(In,kn),qt.attr("d","M"+De.xmin+","+(nt-X)+"h-4v"+2*X+"h4ZM"+(De.xmax-1)+","+(nt-X)+"h4v"+2*X+"h-4Z")):Pn==="v"?((De=wt?f(bt,[In,dt],[kn,dt]):[[In,nt],[In,dt],[kn,dt],[kn,nt]]).xmin=Math.min(In,kn),De.xmax=Math.max(In,kn),De.ymin=wt?dt:Math.min(nt,dt),De.ymax=wt?dt:Math.max(nt,dt),qt.attr("d","M"+(et-X)+","+De.ymin+"v-4h"+2*X+"v4ZM"+(et-X)+","+(De.ymax-1)+"v4h"+2*X+"v-4Z")):Pn==="d"&&((De=wt?f(bt,[et,nt],[xt,dt]):[[et,nt],[et,dt],[xt,dt],[xt,nt]]).xmin=Math.min(et,xt),De.xmax=Math.max(et,xt),De.ymin=Math.min(nt,dt),De.ymax=Math.max(nt,dt),qt.attr("d","M0,0Z"))}else Xe&&(tt.addPt([xt,dt]),De=tt.filtered);if(Re.selectionDefs&&Re.selectionDefs.length?(Ke=Ce(Re.mergedPolygons,De,Bt),De.subtract=Bt,ut=$(Re.selectionDefs.concat([De]))):(Ke=[De],ut=V(De)),c(fe(Ke,at),Ut,Re),ot){var er,ir=Se(ht,!1),fr=ir.eventData?ir.eventData.points.slice():[];ir=Se(ht,!1,ut,Xt,Re),ut=ir.selectionTesters,rt=ir.eventData,er=tt?tt.filtered:Ae(Ke),k.throttle(wn,O.SELECTDELAY,function(){for(var ar=(hn=Oe(ut,Xt)).slice(),Jn=0;Jn<fr.length;Jn++){for(var br=fr[Jn],Gt=!1,ln=0;ln<ar.length;ln++)if(ar[ln].curveNumber===br.curveNumber&&ar[ln].pointNumber===br.pointNumber){Gt=!0;break}Gt||ar.push(br)}ar.length&&(rt||(rt={}),rt.points=ar),an(rt,er),function(mn,_n){mn.emit("plotly_selecting",_n)}(ht,rt)})}},Re.clickFn=function(tn,cn){if(qt.remove(),ht._fullLayout._activeShapeIndex>=0)ht._fullLayout._deactivateShape(ht);else if(!lt){var vn=ct.clickmode;k.done(wn).then(function(){if(k.clear(wn),tn===2){for(Ut.remove(),Be=0;Be<Xt.length;Be++)(Qe=Xt[Be])._module.selectPoints(Qe,!1);if(Te(ht,Xt),ae(Re),He(ht),Xt.length){var yn=Xt[0].xaxis,Pn=Xt[0].yaxis;if(yn&&Pn){for(var In=[],kn=ht._fullLayout.selections,zn=0;zn<kn.length;zn++){var er=kn[zn];er&&(er.xref===yn._id&&er.yref===Pn._id||In.push(er))}In.length<kn.length&&(ht._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",ht,{selections:In}))}}}else vn.indexOf("select")>-1&&ee(cn,ht,Re.xaxes,Re.yaxes,Re.subplot,Re,Ut),vn==="event"&&Ne(ht,void 0);h.click(ht,cn)}).catch(p.error)}},Re.doneFn=function(){qt.remove(),k.done(wn).then(function(){k.clear(wn),!Tt&&De&&Re.selectionDefs&&(De.subtract=Bt,Re.selectionDefs.push(De),Re.mergedPolygons.length=0,[].push.apply(Re.mergedPolygons,Ke)),(Tt||lt)&&ae(Re,Tt),Re.doneFnCompleted&&Re.doneFnCompleted(hn),ot&&Ne(ht,rt)}).catch(p.error)}},clearOutline:w,clearSelectionsCache:ae,selectOnClick:ee}},89827:function(F,L,e){var T=e(50215),b=e(41940),a=e(82196).line,_=e(79952).P,g=e(1426).extendFlat,h=e(44467).templatedArray,o=(e(24695),e(9012)),t=e(5386).R,i=e(37281);F.exports=h("shape",{visible:g({},o.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:g({},o.legend,{editType:"calc+arraydraw"}),legendgroup:g({},o.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:g({},o.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:b({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:g({},o.legendrank,{editType:"calc+arraydraw"}),legendwidth:g({},o.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:g({},T.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:g({},T.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:g({},a.color,{editType:"arraydraw"}),width:g({},a.width,{editType:"calc+arraydraw"}),dash:g({},_,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:b({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(F,L,e){var T=e(71828),b=e(89298),a=e(21459),_=e(30477);function g(i){return o(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function h(i){return o(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function o(i,n,r,s,l,u){var d=i/2,c=u;if(n==="pixel"){var w=l?_.extractPathCoords(l,u?a.paramIsY:a.paramIsX):[r,s],m=T.aggNums(Math.max,null,w),f=T.aggNums(Math.min,null,w),x=f<0?Math.abs(f)+d:d,y=m>0?m+d:d;return{ppad:d,ppadplus:c?x:y,ppadminus:c?y:x}}return{ppad:d}}function t(i,n,r,s,l){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(n!==void 0)return[u(n),u(r)];if(s){var d,c,w,m,f=1/0,x=-1/0,y=s.match(a.segmentRE);for(i.type==="date"&&(u=_.decodeDate(u)),d=0;d<y.length;d++)(c=l[y[d].charAt(0)].drawn)!==void 0&&(!(w=y[d].substr(1).match(a.paramRE))||w.length<c||((m=u(w[c]))<f&&(f=m),m>x&&(x=m)));return x>=f?[f,x]:void 0}}F.exports=function(i){var n=i._fullLayout,r=T.filterVisible(n.shapes);if(r.length&&i._fullData.length)for(var s=0;s<r.length;s++){var l,u,d=r[s];d._extremes={};var c=b.getRefType(d.xref),w=b.getRefType(d.yref);if(d.xref!=="paper"&&c!=="domain"){var m=d.xsizemode==="pixel"?d.xanchor:d.x0,f=d.xsizemode==="pixel"?d.xanchor:d.x1;(u=t(l=b.getFromId(i,d.xref),m,f,d.path,a.paramIsX))&&(d._extremes[l._id]=b.findExtremes(l,u,g(d)))}if(d.yref!=="paper"&&w!=="domain"){var x=d.ysizemode==="pixel"?d.yanchor:d.y0,y=d.ysizemode==="pixel"?d.yanchor:d.y1;(u=t(l=b.getFromId(i,d.yref),x,y,d.path,a.paramIsY))&&(d._extremes[l._id]=b.findExtremes(l,u,h(d)))}}}},21459:function(F){F.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(F,L,e){var T=e(71828),b=e(89298),a=e(85501),_=e(89827),g=e(30477);function h(o,t,i){function n(j,B){return T.coerce(o,t,_,j,B)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),T.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),s=n("type",r?"path":"rect"),l=s!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),d=n("ysizemode"),c=["x","y"],w=0;w<2;w++){var m,f,x,y=c[w],v=y+"anchor",M=y==="x"?u:d,p={_fullLayout:i},S=b.coerceRef(o,t,p,y,void 0,"paper");if(b.getRefType(S)==="range"?((m=b.getFromId(p,S))._shapeIndices.push(t._index),x=g.rangeToShapePosition(m),f=g.shapePositionToRange(m)):f=x=T.identity,l){var A=y+"0",k=y+"1",C=o[A],P=o[k];o[A]=f(o[A],!0),o[k]=f(o[k],!0),M==="pixel"?(n(A,0),n(k,10)):(b.coercePosition(t,p,n,S,A,.25),b.coercePosition(t,p,n,S,k,.75)),t[A]=x(t[A]),t[k]=x(t[k]),o[A]=C,o[k]=P}if(M==="pixel"){var R=o[v];o[v]=f(o[v],!0),b.coercePosition(t,p,n,S,v,.25),t[v]=x(t[v]),o[v]=R}}l&&T.noneOrAll(o,t,["x0","x1","y0","y1"]);var O,X,D=s==="line";if(l&&(O=n("label.texttemplate")),O||(X=n("label.text")),X||O){n("label.textangle");var V=n("label.textposition",D?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(j,B){return j?"bottom":B.indexOf("top")!==-1?"top":B.indexOf("bottom")!==-1?"bottom":"middle"}(D,V)),n("label.padding"),T.coerceFont(n,"label.font",i.font)}}}F.exports=function(o,t){a(o,t,{name:"shapes",handleItemDefaults:h})}},48100:function(F,L,e){var T=e(71828),b=e(89298),a=e(63893),_=e(91424),g=e(60165).readPaths,h=e(30477),o=h.getPathString,t=e(37281),i=e(18783).FROM_TL;F.exports=function(n,r,s,l){if(l.selectAll(".shape-label").remove(),s.label.text||s.label.texttemplate){var u;if(s.label.texttemplate){var d={};if(s.type!=="path"){var c=b.getFromId(n,s.xref),w=b.getFromId(n,s.yref);for(var m in t){var f=t[m](s,c,w);f!==void 0&&(d[m]=f)}}u=T.texttemplateStringForShapes(s.label.texttemplate,{},n._fullLayout._d3locale,d)}else u=s.label.text;var x,y,v,M,p={"data-index":r},S=s.label.font,A=l.append("g").attr(p).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(s.path){var k=o(n,s),C=g(k,n);x=1/0,v=1/0,y=-1/0,M=-1/0;for(var P=0;P<C.length;P++)for(var R=0;R<C[P].length;R++)for(var O=C[P][R],X=1;X<O.length;X+=2){var D=O[X],V=O[X+1];x=Math.min(x,D),y=Math.max(y,D),v=Math.min(v,V),M=Math.max(M,V)}}else{var j=b.getFromId(n,s.xref),B=b.getRefType(s.xref),W=b.getFromId(n,s.yref),q=b.getRefType(s.yref),re=h.getDataToPixel(n,j,!1,B),ee=h.getDataToPixel(n,W,!0,q);x=re(s.x0),y=re(s.x1),v=ee(s.y0),M=ee(s.y1)}var K=s.label.textangle;K==="auto"&&(K=s.type==="line"?function(se,ce,me,ye){var Te,Ce;return Ce=Math.abs(me-se),Te=me>=se?ce-ye:ye-ce,-180/Math.PI*Math.atan2(Te,Ce)}(x,v,y,M):0),A.call(function(se){return se.call(_.font,S).attr({}),a.convertToTspans(se,n),se});var Y=function(se,ce,me,ye,Te,Ce,pe){var fe,Oe,Se,Me,ue=Te.label.textposition,le=Te.label.textangle,ie=Te.label.padding,ge=Te.type,Ae=Math.PI/180*Ce,we=Math.sin(Ae),Ne=Math.cos(Ae),He=Te.label.xanchor,de=Te.label.yanchor;if(ge==="line"){ue==="start"?(fe=se,Oe=ce):ue==="end"?(fe=me,Oe=ye):(fe=(se+me)/2,Oe=(ce+ye)/2),He==="auto"&&(He=ue==="start"?le==="auto"?me>se?"left":me<se?"right":"center":me>se?"right":me<se?"left":"center":ue==="end"?le==="auto"?me>se?"right":me<se?"left":"center":me>se?"left":me<se?"right":"center":"center");var Le={bottom:-1,middle:0,top:1};if(le==="auto"){var Ee=Le[de];Se=-ie*we*Ee,Me=ie*Ne*Ee}else Se=ie*{left:1,center:0,right:-1}[He],Me=ie*Le[de];fe+=Se,Oe+=Me}else Se=ie+3,ue.indexOf("right")!==-1?(fe=Math.max(se,me)-Se,He==="auto"&&(He="right")):ue.indexOf("left")!==-1?(fe=Math.min(se,me)+Se,He==="auto"&&(He="left")):(fe=(se+me)/2,He==="auto"&&(He="center")),Oe=ue.indexOf("top")!==-1?Math.min(ce,ye):ue.indexOf("bottom")!==-1?Math.max(ce,ye):(ce+ye)/2,Me=ie,de==="bottom"?Oe-=Me:de==="top"&&(Oe+=Me);var Re=i[de],je=Te.label.font.size,Fe=pe.height;return{textx:fe+(Fe*Re-je)*we,texty:Oe+-(Fe*Re-je)*Ne,xanchor:He}}(x,v,y,M,s,K,_.bBox(A.node())),$=Y.textx,ne=Y.texty,ae=Y.xanchor;A.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ae],y:ne,x:$,transform:"rotate("+K+","+$+","+ne+")"}).call(a.positionText,$,ne)}}},42359:function(F,L,e){var T=e(71828).strTranslate,b=e(28569),a=e(64505),_=a.drawMode,g=a.selectMode,h=e(73972),o=e(7901),t=e(89995),i=t.i000,n=t.i090,r=t.i180,s=t.i270,l=e(51873).clearOutlineControllers,u=e(60165),d=u.pointsOnRectangle,c=u.pointsOnEllipse,w=u.writePaths,m=e(90551).newShapes,f=e(90551).createShapeObj,x=e(35855),y=e(48100);function v(M,p){var S,A,k,C=M[p][1],P=M[p][2],R=M.length;return A=M[S=(p+1)%R][1],k=M[S][2],A===C&&k===P&&(A=M[S=(p+2)%R][1],k=M[S][2]),[S,A,k]}F.exports=function M(p,S,A,k){k||(k=0);var C=A.gd;function P(){M(p,S,A,k++),(c(p[0])||A.hasText)&&R({redrawing:!0})}function R(Te){var Ce={};A.isActiveShape!==void 0&&(A.isActiveShape=!1,Ce=m(S,A)),A.isActiveSelection!==void 0&&(A.isActiveSelection=!1,Ce=x(S,A),C._fullLayout._reselect=!0),Object.keys(Ce).length&&h.call((Te||{}).redrawing?"relayout":"_guiRelayout",C,Ce)}var O,X,D,V,j,B=C._fullLayout._zoomlayer,W=A.dragmode,q=_(W),re=g(W);if((q||re)&&(C._fullLayout._outlining=!0),l(C),S.attr("d",w(p)),k||!A.isActiveShape&&!A.isActiveSelection||(j=function(Te,Ce){for(var pe=0;pe<Ce.length;pe++){var fe=Ce[pe];Te[pe]=[];for(var Oe=0;Oe<fe.length;Oe++){Te[pe][Oe]=[];for(var Se=0;Se<fe[Oe].length;Se++)Te[pe][Oe][Se]=fe[Oe][Se]}}return Te}([],p),function(Te){O=[];for(var Ce=0;Ce<p.length;Ce++){var pe=p[Ce],fe=d(pe),Oe=!fe&&c(pe);O[Ce]=[];for(var Se=pe.length,Me=0;Me<Se;Me++)if(pe[Me][0]!=="Z"&&(!Oe||Me===i||Me===n||Me===r||Me===s)){var ue,le=fe&&A.isActiveSelection;le&&(ue=v(pe,Me));var ie=pe[Me][1],ge=pe[Me][2],Ae=Te.append(le?"rect":"circle").attr("data-i",Ce).attr("data-j",Me).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(le){var we=ue[1]-ie,Ne=ue[2]-ge,He=Ne?5:Math.max(Math.min(25,Math.abs(we)-5),5),de=we?5:Math.max(Math.min(25,Math.abs(Ne)-5),5);Ae.classed(Ne?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",He).attr("height",de).attr("x",ie-He/2).attr("y",ge-de/2).attr("transform",T(we/2,Ne/2))}else Ae.classed("cursor-grab",!0).attr("r",5).attr("cx",ie).attr("cy",ge);O[Ce][Me]={element:Ae.node(),gd:C,prepFn:Y,doneFn:ne,clickFn:ae},b.init(O[Ce][Me])}}}(B.append("g").attr("class","outline-controllers")),function(){X=[],p.length&&(X[0]={element:S[0][0],gd:C,prepFn:ce,doneFn:me,clickFn:ye},b.init(X[0]))}()),q&&A.hasText){var ee=B.select(".label-temp"),K=f(S,A,A.dragmode);y(C,"label-temp",K,ee)}function Y(Te){D=+Te.srcElement.getAttribute("data-i"),V=+Te.srcElement.getAttribute("data-j"),O[D][V].moveFn=$}function $(Te,Ce){if(p.length){var pe=j[D][V][1],fe=j[D][V][2],Oe=p[D],Se=Oe.length;if(d(Oe)){var Me=Te,ue=Ce;A.isActiveSelection&&(v(Oe,V)[1]===Oe[V][1]?ue=0:Me=0);for(var le=0;le<Se;le++)if(le!==V){var ie=Oe[le];ie[1]===Oe[V][1]&&(ie[1]=pe+Me),ie[2]===Oe[V][2]&&(ie[2]=fe+ue)}if(Oe[V][1]=pe+Me,Oe[V][2]=fe+ue,!d(Oe))for(var ge=0;ge<Se;ge++)for(var Ae=0;Ae<Oe[ge].length;Ae++)Oe[ge][Ae]=j[D][ge][Ae]}else Oe[V][1]=pe+Te,Oe[V][2]=fe+Ce;P()}}function ne(){R()}function ae(Te,Ce){if(Te===2){D=+Ce.srcElement.getAttribute("data-i"),V=+Ce.srcElement.getAttribute("data-j");var pe=p[D];d(pe)||c(pe)||function(){if(p.length&&p[D]&&p[D].length){for(var fe=[],Oe=0;Oe<p[D].length;Oe++)Oe!==V&&fe.push(p[D][Oe]);fe.length>1&&(fe.length!==2||fe[1][0]!=="Z")&&(V===0&&(fe[0][0]="M"),p[D]=fe,P(),R())}}()}}function se(Te,Ce){(function(pe,fe){if(p.length)for(var Oe=0;Oe<p.length;Oe++)for(var Se=0;Se<p[Oe].length;Se++)for(var Me=0;Me+2<p[Oe][Se].length;Me+=2)p[Oe][Se][Me+1]=j[Oe][Se][Me+1]+pe,p[Oe][Se][Me+2]=j[Oe][Se][Me+2]+fe})(Te,Ce),P()}function ce(Te){(D=+Te.srcElement.getAttribute("data-i"))||(D=0),X[D].moveFn=se}function me(){R()}function ye(Te){Te===2&&function(Ce){if(g(Ce._fullLayout.dragmode)){l(Ce);var pe=Ce._fullLayout._activeSelectionIndex,fe=(Ce.layout||{}).selections||[];if(pe<fe.length){for(var Oe=[],Se=0;Se<fe.length;Se++)Se!==pe&&Oe.push(fe[Se]);delete Ce._fullLayout._activeSelectionIndex;var Me=Ce._fullLayout.selections[pe];Ce._fullLayout._deselect={xref:Me.xref,yref:Me.yref},h.call("_guiRelayout",Ce,{selections:Oe})}}}(C)}}},34031:function(F,L,e){var T=e(39898),b=e(73972),a=e(71828),_=e(89298),g=e(60165).readPaths,h=e(42359),o=e(48100),t=e(51873).clearOutlineControllers,i=e(7901),n=e(91424),r=e(44467).arrayEditor,s=e(28569),l=e(6964),u=e(21459),d=e(30477),c=d.getPathString;function w(p){var S=p._fullLayout;for(var A in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var k=S._plots[A].shapelayer;k&&(k.selectAll("path").remove(),k.selectAll("text").remove())}for(var C=0;C<S.shapes.length;C++)S.shapes[C].visible===!0&&x(p,C)}function m(p){return!!p._fullLayout._outlining}function f(p){return!p._context.edits.shapePosition}function x(p,S){p._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var A=d.makeShapesOptionsAndPlotinfo(p,S),k=A.options,C=A.plotinfo;function P(R){var O=c(p,k),X={"data-index":S,"fill-rule":k.fillrule,d:O},D=k.opacity,V=k.fillcolor,j=k.line.width?k.line.color:"rgba(0,0,0,0)",B=k.line.width,W=k.line.dash;B||k.editable!==!0||(B=5,W="solid");var q=O[O.length-1]!=="Z",re=f(p)&&k.editable&&p._fullLayout._activeShapeIndex===S;re&&(V=q?"rgba(0,0,0,0)":p._fullLayout.activeshape.fillcolor,D=p._fullLayout.activeshape.opacity);var ee,K=R.append("g").classed("shape-group",!0).attr({"data-index":S}),Y=K.append("path").attr(X).style("opacity",D).call(i.stroke,j).call(i.fill,V).call(n.dashLine,W,B);if(y(K,p,k),o(p,S,k,K),(re||p._context.edits.shapePosition)&&(ee=r(p.layout,"shapes",k)),re){Y.style({cursor:"move"});var $={element:Y.node(),plotinfo:C,gd:p,editHelpers:ee,hasText:k.label.text||k.label.texttemplate,isActiveShape:!0},ne=g(O,p);h(ne,Y,$)}else p._context.edits.shapePosition?function(ae,se,ce,me,ye,Te){var Ce,pe,fe,Oe,Se,Me,ue,le,ie,ge,Ae,we,Ne,He,de,Le,Ee=10,Re=10,je=ce.xsizemode==="pixel",Fe=ce.ysizemode==="pixel",Xe=ce.type==="line",Ze=ce.type==="path",at=Te.modifyItem,lt=T.select(se.node().parentNode),ot=_.getFromId(ae,ce.xref),bt=_.getRefType(ce.xref),wt=_.getFromId(ae,ce.yref),ht=_.getRefType(ce.yref),ct=d.getDataToPixel(ae,ot,!1,bt),Tt=d.getDataToPixel(ae,wt,!0,ht),Lt=d.getPixelToData(ae,ot,!1,bt),kt=d.getPixelToData(ae,wt,!0,ht),Ot=Xe?function(){var Ke=10,De=Math.max(ce.line.width,Ke),Be=ye.append("g").attr("data-index",me).attr("drag-helper",!0);Be.append("path").attr("d",se.attr("d")).style({cursor:"move","stroke-width":De,"stroke-opacity":"0"});var Qe={"fill-opacity":"0"},rt=Math.max(De/2,Ke);return Be.append("circle").attr({"data-line-point":"start-point",cx:je?ct(ce.xanchor)+ce.x0:ct(ce.x0),cy:Fe?Tt(ce.yanchor)-ce.y0:Tt(ce.y0),r:rt}).style(Qe).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:je?ct(ce.xanchor)+ce.x1:ct(ce.x1),cy:Fe?Tt(ce.yanchor)-ce.y1:Tt(ce.y1),r:rt}).style(Qe).classed("cursor-grab",!0),Be}():se,Pt={element:Ot.node(),gd:ae,prepFn:function(Ke){m(ae)||(je&&(Se=ct(ce.xanchor)),Fe&&(Me=Tt(ce.yanchor)),ce.type==="path"?de=ce.path:(Ce=je?ce.x0:ct(ce.x0),pe=Fe?ce.y0:Tt(ce.y0),fe=je?ce.x1:ct(ce.x1),Oe=Fe?ce.y1:Tt(ce.y1)),Ce<fe?(ie=Ce,Ne="x0",ge=fe,He="x1"):(ie=fe,Ne="x1",ge=Ce,He="x0"),!Fe&&pe<Oe||Fe&&pe>Oe?(ue=pe,Ae="y0",le=Oe,we="y1"):(ue=Oe,Ae="y1",le=pe,we="y0"),et(Ke),tt(ye,ce),function(De,Be,Qe){var rt=Be.xref,vt=Be.yref,mt=_.getFromId(Qe,rt),xt=_.getFromId(Qe,vt),dt="";rt==="paper"||mt.autorange||(dt+=rt),vt==="paper"||xt.autorange||(dt+=vt),n.setClipUrl(De,dt?"clip"+Qe._fullLayout._uid+dt:null,Qe)}(se,ce,ae),Pt.moveFn=Le==="move"?nt:Ye,Pt.altKey=Ke.altKey)},doneFn:function(){m(ae)||(l(se),ut(ye),y(se,ae,ce),b.call("_guiRelayout",ae,Te.getUpdateObj()))},clickFn:function(){m(ae)||ut(ye)}};function et(Ke){if(m(ae))Le=null;else if(Xe)Le=Ke.target.tagName==="path"?"move":Ke.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var De=Pt.element.getBoundingClientRect(),Be=De.right-De.left,Qe=De.bottom-De.top,rt=Ke.clientX-De.left,vt=Ke.clientY-De.top,mt=!Ze&&Be>Ee&&Qe>Re&&!Ke.shiftKey?s.getCursor(rt/Be,1-vt/Qe):"move";l(se,mt),Le=mt.split("-")[0]}}function nt(Ke,De){if(ce.type==="path"){var Be=function(vt){return vt},Qe=Be,rt=Be;je?at("xanchor",ce.xanchor=Lt(Se+Ke)):(Qe=function(vt){return Lt(ct(vt)+Ke)},ot&&ot.type==="date"&&(Qe=d.encodeDate(Qe))),Fe?at("yanchor",ce.yanchor=kt(Me+De)):(rt=function(vt){return kt(Tt(vt)+De)},wt&&wt.type==="date"&&(rt=d.encodeDate(rt))),at("path",ce.path=v(de,Qe,rt))}else je?at("xanchor",ce.xanchor=Lt(Se+Ke)):(at("x0",ce.x0=Lt(Ce+Ke)),at("x1",ce.x1=Lt(fe+Ke))),Fe?at("yanchor",ce.yanchor=kt(Me+De)):(at("y0",ce.y0=kt(pe+De)),at("y1",ce.y1=kt(Oe+De)));se.attr("d",c(ae,ce)),tt(ye,ce),o(ae,me,ce,lt)}function Ye(Ke,De){if(Ze){var Be=function(Qt){return Qt},Qe=Be,rt=Be;je?at("xanchor",ce.xanchor=Lt(Se+Ke)):(Qe=function(Qt){return Lt(ct(Qt)+Ke)},ot&&ot.type==="date"&&(Qe=d.encodeDate(Qe))),Fe?at("yanchor",ce.yanchor=kt(Me+De)):(rt=function(Qt){return kt(Tt(Qt)+De)},wt&&wt.type==="date"&&(rt=d.encodeDate(rt))),at("path",ce.path=v(de,Qe,rt))}else if(Xe){if(Le==="resize-over-start-point"){var vt=Ce+Ke,mt=Fe?pe-De:pe+De;at("x0",ce.x0=je?vt:Lt(vt)),at("y0",ce.y0=Fe?mt:kt(mt))}else if(Le==="resize-over-end-point"){var xt=fe+Ke,dt=Fe?Oe-De:Oe+De;at("x1",ce.x1=je?xt:Lt(xt)),at("y1",ce.y1=Fe?dt:kt(dt))}}else{var Et=function(Qt){return Le.indexOf(Qt)!==-1},pt=Et("n"),gt=Et("s"),Mt=Et("w"),Nt=Et("e"),Bt=pt?ue+De:ue,Ut=gt?le+De:le,Jt=Mt?ie+Ke:ie,Vt=Nt?ge+Ke:ge;Fe&&(pt&&(Bt=ue-De),gt&&(Ut=le-De)),(!Fe&&Ut-Bt>Re||Fe&&Bt-Ut>Re)&&(at(Ae,ce[Ae]=Fe?Bt:kt(Bt)),at(we,ce[we]=Fe?Ut:kt(Ut))),Vt-Jt>Ee&&(at(Ne,ce[Ne]=je?Jt:Lt(Jt)),at(He,ce[He]=je?Vt:Lt(Vt)))}se.attr("d",c(ae,ce)),tt(ye,ce),o(ae,me,ce,lt)}function tt(Ke,De){(je||Fe)&&function(){var Be=De.type!=="path",Qe=Ke.selectAll(".visual-cue").data([0]);Qe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var rt=ct(je?De.xanchor:a.midRange(Be?[De.x0,De.x1]:d.extractPathCoords(De.path,u.paramIsX))),vt=Tt(Fe?De.yanchor:a.midRange(Be?[De.y0,De.y1]:d.extractPathCoords(De.path,u.paramIsY)));if(rt=d.roundPositionForSharpStrokeRendering(rt,1),vt=d.roundPositionForSharpStrokeRendering(vt,1),je&&Fe){var mt="M"+(rt-1-1)+","+(vt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Qe.attr("d",mt)}else if(je){var xt="M"+(rt-1-1)+","+(vt-9-1)+"v18 h2 v-18 Z";Qe.attr("d",xt)}else{var dt="M"+(rt-9-1)+","+(vt-1-1)+"h18 v2 h-18 Z";Qe.attr("d",dt)}}()}function ut(Ke){Ke.selectAll(".visual-cue").remove()}s.init(Pt),Ot.node().onmousemove=et}(p,Y,k,S,R,ee):k.editable===!0&&Y.style("pointer-events",q||i.opacity(V)*D<=.5?"stroke":"all");Y.node().addEventListener("click",function(){return function(ae,se){if(f(ae)){var ce=+se.node().getAttribute("data-index");if(ce>=0){if(ce===ae._fullLayout._activeShapeIndex)return void M(ae);ae._fullLayout._activeShapeIndex=ce,ae._fullLayout._deactivateShape=M,w(ae)}}}(p,Y)})}k._input&&k.visible===!0&&(k.layer!=="below"?P(p._fullLayout._shapeUpperLayer):k.xref==="paper"||k.yref==="paper"?P(p._fullLayout._shapeLowerLayer):C._hadPlotinfo?P((C.mainplotinfo||C).shapelayer):P(p._fullLayout._shapeLowerLayer))}function y(p,S,A){var k=(A.xref+A.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(p,k?"clip"+S._fullLayout._uid+k:null,S)}function v(p,S,A){return p.replace(u.segmentRE,function(k){var C=0,P=k.charAt(0),R=u.paramIsX[P],O=u.paramIsY[P],X=u.numParams[P];return P+k.substr(1).replace(u.paramRE,function(D){return C>=X||(R[C]?D=S(D):O[C]&&(D=A(D)),C++),D})})}function M(p){f(p)&&p._fullLayout._activeShapeIndex>=0&&(t(p),delete p._fullLayout._activeShapeIndex,w(p))}F.exports={draw:w,drawOne:x,eraseActiveShape:function(p){if(f(p)){t(p);var S=p._fullLayout._activeShapeIndex,A=(p.layout||{}).shapes||[];if(S<A.length){for(var k=[],C=0;C<A.length;C++)C!==S&&k.push(A[C]);return delete p._fullLayout._activeShapeIndex,b.call("_guiRelayout",p,{shapes:k})}}},drawLabel:o}},29241:function(F,L,e){var T=e(30962).overrideAll,b=e(9012),a=e(41940),_=e(79952).P,g=e(1426).extendFlat,h=e(5386).R,o=e(37281);F.exports=T({newshape:{visible:g({},b.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:g({},b.legend,{}),legendgroup:g({},b.legendgroup,{}),legendgrouptitle:{text:g({},b.legendgrouptitle.text,{}),font:a({})},legendrank:g({},b.legendrank,{}),legendwidth:g({},b.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:g({},_,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:g({},b.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:h({newshape:!0},{keys:Object.keys(o)}),font:a({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(F){F.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(F,L,e){var T=e(7901),b=e(71828);F.exports=function(a,_,g){if(g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),b.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity"),g("newshape.line.width")){var h=(a||{}).plot_bgcolor||"#FFF";g("newshape.line.color",T.contrast(h)),g("newshape.line.dash")}var o=a.dragmode==="drawline",t=g("newshape.label.text"),i=g("newshape.label.texttemplate");if(t||i){g("newshape.label.textangle");var n=g("newshape.label.textposition",o?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",function(r,s){return r?"bottom":s.indexOf("top")!==-1?"top":s.indexOf("bottom")!==-1?"bottom":"middle"}(o,n)),g("newshape.label.padding"),b.coerceFont(g,"newshape.label.font",_.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}},60165:function(F,L,e){var T=e(95616),b=e(89995),a=b.CIRCLE_SIDES,_=b.SQRT2,g=e(75549),h=g.p2r,o=g.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function n(s,l){return Math.abs(s-l)<=1e-6}function r(s,l){var u=l[1]-s[1],d=l[2]-s[2];return Math.sqrt(u*u+d*d)}L.writePaths=function(s){var l=s.length;if(!l)return"M0,0Z";for(var u="",d=0;d<l;d++)for(var c=s[d].length,w=0;w<c;w++){var m=s[d][w][0];if(m==="Z")u+="Z";else for(var f=s[d][w].length,x=0;x<f;x++){var y=x;m==="Q"||m==="S"?y=i[x]:m==="C"&&(y=t[x]),u+=s[d][w][y],x>0&&x<f-1&&(u+=",")}}return u},L.readPaths=function(s,l,u,d){var c,w,m,f=T(s),x=[],y=-1,v=0,M=0,p=function(){w=v,m=M};p();for(var S=0;S<f.length;S++){var A,k,C,P,R=[],O=f[S][0],X=O;switch(O){case"M":x[++y]=[],v=+f[S][1],M=+f[S][2],R.push([X,v,M]),p();break;case"Q":case"S":A=+f[S][1],C=+f[S][2],v=+f[S][3],M=+f[S][4],R.push([X,v,M,A,C]);break;case"C":A=+f[S][1],C=+f[S][2],k=+f[S][3],P=+f[S][4],v=+f[S][5],M=+f[S][6],R.push([X,v,M,A,C,k,P]);break;case"T":case"L":v=+f[S][1],M=+f[S][2],R.push([X,v,M]);break;case"H":X="L",v=+f[S][1],R.push([X,v,M]);break;case"V":X="L",M=+f[S][1],R.push([X,v,M]);break;case"A":X="L";var D=+f[S][1],V=+f[S][2];+f[S][4]||(D=-D,V=-V);var j=v-D,B=M;for(c=1;c<=a/2;c++){var W=2*Math.PI*c/a;R.push([X,j+D*Math.cos(W),B+V*Math.sin(W)])}break;case"Z":v===w&&M===m||(v=w,M=m,R.push([X,v,M]))}for(var q=(u||{}).domain,re=l._fullLayout._size,ee=u&&u.xsizemode==="pixel",K=u&&u.ysizemode==="pixel",Y=d===!1,$=0;$<R.length;$++){for(c=0;c+2<7;c+=2){var ne=R[$][c+1],ae=R[$][c+2];ne!==void 0&&ae!==void 0&&(v=ne,M=ae,u&&(u.xaxis&&u.xaxis.p2r?(Y&&(ne-=u.xaxis._offset),ne=ee?o(u.xaxis,u.xanchor)+ne:h(u.xaxis,ne)):(Y&&(ne-=re.l),q?ne=q.x[0]+ne/re.w:ne/=re.w),u.yaxis&&u.yaxis.p2r?(Y&&(ae-=u.yaxis._offset),ae=K?o(u.yaxis,u.yanchor)-ae:h(u.yaxis,ae)):(Y&&(ae-=re.t),ae=q?q.y[1]-ae/re.h:1-ae/re.h)),R[$][c+1]=ne,R[$][c+2]=ae)}x[y].push(R[$].slice())}}return x},L.pointsOnRectangle=function(s){if(s.length!==5)return!1;for(var l=1;l<3;l++)if(!n(s[0][l]-s[1][l],s[3][l]-s[2][l])||!n(s[0][l]-s[3][l],s[1][l]-s[2][l]))return!1;return!(!n(s[0][1],s[1][1])&&!n(s[0][1],s[3][1])||!(r(s[0],s[1])*r(s[0],s[3])))},L.pointsOnEllipse=function(s){var l=s.length;if(l!==a+1)return!1;l=a;for(var u=0;u<l;u++){var d=(2*l-u)%l,c=(l/2+d)%l,w=(l/2+u)%l;if(!n(r(s[u],s[w]),r(s[d],s[c])))return!1}return!0},L.handleEllipse=function(s,l,u){if(!s)return[l,u];var d=L.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),c=(d.x1+d.x0)/2,w=(d.y1+d.y0)/2,m=(d.x1-d.x0)/2,f=(d.y1-d.y0)/2;m||(m=f/=_),f||(f=m/=_);for(var x=[],y=0;y<a;y++){var v=2*y*Math.PI/a;x.push([c+m*Math.cos(v),w+f*Math.sin(v)])}return x},L.ellipseOver=function(s){var l=s.x0,u=s.y0,d=s.x1,c=s.y1,w=d-l,m=c-u,f=((l-=w)+d)/2,x=((u-=m)+c)/2;return{x0:f-(w*=_),y0:x-(m*=_),x1:f+w,y1:x+m}},L.fixDatesForPaths=function(s,l,u){var d=l.type==="date",c=u.type==="date";if(!d&&!c)return s;for(var w=0;w<s.length;w++)for(var m=0;m<s[w].length;m++)for(var f=0;f+2<s[w][m].length;f+=2)d&&(s[w][m][f+1]=s[w][m][f+1].replace(" ","_")),c&&(s[w][m][f+2]=s[w][m][f+2].replace(" ","_"));return s}},90551:function(F,L,e){var T=e(64505),b=T.drawMode,a=T.openMode,_=e(89995),g=_.i000,h=_.i090,o=_.i180,t=_.i270,i=_.cos45,n=_.sin45,r=e(75549),s=r.p2r,l=r.r2p,u=e(51873).clearOutline,d=e(60165),c=d.readPaths,w=d.writePaths,m=d.ellipseOver,f=d.fixDatesForPaths;function x(y,v,M){var p,S=y[0][0],A=v.gd,k=S.getAttribute("d"),C=A._fullLayout.newshape,P=v.plotinfo,R=v.isActiveShape,O=P.xaxis,X=P.yaxis,D=!!P.domain||!P.xaxis,V=!!P.domain||!P.yaxis,j=a(M),B=c(k,A,P,R),W={editable:!0,visible:C.visible,name:C.name,showlegend:C.showlegend,legend:C.legend,legendwidth:C.legendwidth,legendgroup:C.legendgroup,legendgrouptitle:{text:C.legendgrouptitle.text,font:C.legendgrouptitle.font},legendrank:C.legendrank,label:C.label,xref:D?"paper":O._id,yref:V?"paper":X._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(j||(W.fillcolor=C.fillcolor,W.fillrule=C.fillrule),B.length===1&&(p=B[0]),p&&p.length===5&&M==="drawrect")W.type="rect",W.x0=p[0][1],W.y0=p[0][2],W.x1=p[2][1],W.y1=p[2][2];else if(p&&M==="drawline")W.type="line",W.x0=p[0][1],W.y0=p[0][2],W.x1=p[1][1],W.y1=p[1][2];else if(p&&M==="drawcircle"){W.type="circle";var q=p[g][1],re=p[h][1],ee=p[o][1],K=p[t][1],Y=p[g][2],$=p[h][2],ne=p[o][2],ae=p[t][2],se=P.xaxis&&(P.xaxis.type==="date"||P.xaxis.type==="log"),ce=P.yaxis&&(P.yaxis.type==="date"||P.yaxis.type==="log");se&&(q=l(P.xaxis,q),re=l(P.xaxis,re),ee=l(P.xaxis,ee),K=l(P.xaxis,K)),ce&&(Y=l(P.yaxis,Y),$=l(P.yaxis,$),ne=l(P.yaxis,ne),ae=l(P.yaxis,ae));var me=(re+K)/2,ye=(Y+ne)/2,Te=m({x0:me,y0:ye,x1:me+(K-re+ee-q)/2*i,y1:ye+(ae-$+ne-Y)/2*n});se&&(Te.x0=s(P.xaxis,Te.x0),Te.x1=s(P.xaxis,Te.x1)),ce&&(Te.y0=s(P.yaxis,Te.y0),Te.y1=s(P.yaxis,Te.y1)),W.x0=Te.x0,W.y0=Te.y0,W.x1=Te.x1,W.y1=Te.y1}else W.type="path",O&&X&&f(B,O,X),W.path=w(B),p=null;return W}F.exports={newShapes:function(y,v){if(y.length&&y[0][0]){var M=v.gd,p=v.isActiveShape,S=v.dragmode,A=(M.layout||{}).shapes||[];if(!b(S)&&p!==void 0){var k=M._fullLayout._activeShapeIndex;if(k<A.length)switch(M._fullLayout.shapes[k].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var C=A[k].path||"";S=C[C.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var P=x(y,v,S);u(M);for(var R=v.editHelpers,O=(R||{}).modifyItem,X=[],D=0;D<A.length;D++){var V=M._fullLayout.shapes[D];if(X[D]=V._input,p!==void 0&&D===M._fullLayout._activeShapeIndex){var j=P;switch(V.type){case"line":case"rect":case"circle":O("x0",j.x0),O("x1",j.x1),O("y0",j.y0),O("y1",j.y1);break;case"path":O("path",j.path)}}}return p===void 0?(X.push(P),X):R?R.getUpdateObj():{}}},createShapeObj:x}},51873:function(F){F.exports={clearOutlineControllers:function(L){var e=L._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(L){var e=L._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),L._fullLayout._outlining=!1}}},30477:function(F,L,e){var T=e(21459),b=e(71828),a=e(89298);L.rangeToShapePosition=function(_){return _.type==="log"?_.r2d:function(g){return g}},L.shapePositionToRange=function(_){return _.type==="log"?_.d2r:function(g){return g}},L.decodeDate=function(_){return function(g){return g.replace&&(g=g.replace("_"," ")),_(g)}},L.encodeDate=function(_){return function(g){return _(g).replace(" ","_")}},L.extractPathCoords=function(_,g,h){var o=[];return _.match(T.segmentRE).forEach(function(t){var i=g[t.charAt(0)].drawn;if(i!==void 0){var n=t.substr(1).match(T.paramRE);if(n&&!(n.length<i)){var r=n[i],s=h?r:b.cleanNumber(r);o.push(s)}}}),o},L.getDataToPixel=function(_,g,h,o){var t,i=_._fullLayout._size;if(g)if(o==="domain")t=function(r){return g._length*(h?1-r:r)+g._offset};else{var n=L.shapePositionToRange(g);t=function(r){return g._offset+g.r2p(n(r,!0))},g.type==="date"&&(t=L.decodeDate(t))}else t=h?function(r){return i.t+i.h*(1-r)}:function(r){return i.l+i.w*r};return t},L.getPixelToData=function(_,g,h,o){var t,i=_._fullLayout._size;if(g)if(o==="domain")t=function(r){var s=(r-g._offset)/g._length;return h?1-s:s};else{var n=L.rangeToShapePosition(g);t=function(r){return n(g.p2r(r-g._offset))}}else t=h?function(r){return 1-(r-i.t)/i.h}:function(r){return(r-i.l)/i.w};return t},L.roundPositionForSharpStrokeRendering=function(_,g){var h=Math.round(g%2)===1,o=Math.round(_);return h?o+.5:o},L.makeShapesOptionsAndPlotinfo=function(_,g){var h=_._fullLayout.shapes[g]||{},o=_._fullLayout._plots[h.xref+h.yref];return o?o._hadPlotinfo=!0:(o={},h.xref&&h.xref!=="paper"&&(o.xaxis=_._fullLayout[h.xref+"axis"]),h.yref&&h.yref!=="paper"&&(o.yaxis=_._fullLayout[h.yref+"axis"])),o.xsizemode=h.xsizemode,o.ysizemode=h.ysizemode,o.xanchor=h.xanchor,o.yanchor=h.yanchor,{options:h,plotinfo:o}},L.makeSelectionsOptionsAndPlotinfo=function(_,g){var h=_._fullLayout.selections[g]||{},o=_._fullLayout._plots[h.xref+h.yref];return o?o._hadPlotinfo=!0:(o={},h.xref&&(o.xaxis=_._fullLayout[h.xref+"axis"]),h.yref&&(o.yaxis=_._fullLayout[h.yref+"axis"])),{options:h,plotinfo:o}},L.getPathString=function(_,g){var h,o,t,i,n,r,s,l,u=g.type,d=a.getRefType(g.xref),c=a.getRefType(g.yref),w=a.getFromId(_,g.xref),m=a.getFromId(_,g.yref),f=_._fullLayout._size;if(w?d==="domain"?o=function(C){return w._offset+w._length*C}:(h=L.shapePositionToRange(w),o=function(C){return w._offset+w.r2p(h(C,!0))}):o=function(C){return f.l+f.w*C},m?c==="domain"?i=function(C){return m._offset+m._length*(1-C)}:(t=L.shapePositionToRange(m),i=function(C){return m._offset+m.r2p(t(C,!0))}):i=function(C){return f.t+f.h*(1-C)},u==="path")return w&&w.type==="date"&&(o=L.decodeDate(o)),m&&m.type==="date"&&(i=L.decodeDate(i)),function(C,P,R){var O=C.path,X=C.xsizemode,D=C.ysizemode,V=C.xanchor,j=C.yanchor;return O.replace(T.segmentRE,function(B){var W=0,q=B.charAt(0),re=T.paramIsX[q],ee=T.paramIsY[q],K=T.numParams[q],Y=B.substr(1).replace(T.paramRE,function($){return re[W]?$=X==="pixel"?P(V)+Number($):P($):ee[W]&&($=D==="pixel"?R(j)-Number($):R($)),++W>K&&($="X"),$});return W>K&&(Y=Y.replace(/[\s,]*X.*/,""),b.log("Ignoring extra params in segment "+B)),q+Y})}(g,o,i);if(g.xsizemode==="pixel"){var x=o(g.xanchor);n=x+g.x0,r=x+g.x1}else n=o(g.x0),r=o(g.x1);if(g.ysizemode==="pixel"){var y=i(g.yanchor);s=y-g.y0,l=y-g.y1}else s=i(g.y0),l=i(g.y1);if(u==="line")return"M"+n+","+s+"L"+r+","+l;if(u==="rect")return"M"+n+","+s+"H"+r+"V"+l+"H"+n+"Z";var v=(n+r)/2,M=(s+l)/2,p=Math.abs(v-n),S=Math.abs(M-s),A="A"+p+","+S,k=v+p+","+M;return"M"+k+A+" 0 1,1 "+v+","+(M-S)+A+" 0 0,1 "+k+"Z"}},89853:function(F,L,e){var T=e(34031);F.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:T.draw,drawOne:T.drawOne}},37281:function(F){function L(a,_){return _?_.d2l(a):a}function e(a,_){return _?_.l2d(a):a}function T(a,_){return L(a.x1,_)-L(a.x0,_)}function b(a,_,g){return L(a.y1,g)-L(a.y0,g)}F.exports={x0:function(a){return a.x0},x1:function(a){return a.x1},y0:function(a){return a.y0},y1:function(a){return a.y1},slope:function(a,_,g){return a.type!=="line"?void 0:b(a,0,g)/T(a,_)},dx:T,dy:b,width:function(a,_){return Math.abs(T(a,_))},height:function(a,_,g){return Math.abs(b(a,0,g))},length:function(a,_,g){return a.type!=="line"?void 0:Math.sqrt(Math.pow(T(a,_),2)+Math.pow(b(a,0,g),2))},xcenter:function(a,_){return e((L(a.x1,_)+L(a.x0,_))/2,_)},ycenter:function(a,_,g){return e((L(a.y1,g)+L(a.y0,g))/2,g)}}},75067:function(F,L,e){var T=e(41940),b=e(35025),a=e(1426).extendDeepAll,_=e(30962).overrideAll,g=e(85594),h=e(44467).templatedArray,o=e(98292),t=h("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});F.exports=_(h("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(b({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:g.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:T({})},font:T({}),activebgcolor:{valType:"color",dflt:o.gripBgActiveColor},bgcolor:{valType:"color",dflt:o.railBgColor},bordercolor:{valType:"color",dflt:o.railBorderColor},borderwidth:{valType:"number",min:0,dflt:o.railBorderWidth},ticklen:{valType:"number",min:0,dflt:o.tickLength},tickcolor:{valType:"color",dflt:o.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:o.minorTickLength}}),"arraydraw","from-root")},98292:function(F){F.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(F,L,e){var T=e(71828),b=e(85501),a=e(75067),_=e(98292).name,g=a.steps;function h(t,i,n){function r(c,w){return T.coerce(t,i,a,c,w)}for(var s=b(t,i,{name:"steps",handleItemDefaults:o}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?i.visible=!1:r("visible")){i._stepCount=l;var d=i._visibleSteps=T.filterVisible(s);(s[r("active")]||{}).visible||(i.active=d[0]._index),r("x"),r("y"),T.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),T.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),T.coerceFont(r,"currentvalue.font",i.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function o(t,i){function n(s,l){return T.coerce(t,i,g,s,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):i.visible=!1){n("method"),n("args");var r=n("label","step-"+i._index);n("value",r),n("execute")}}F.exports=function(t,i){b(t,i,{name:_,handleItemDefaults:h})}},44504:function(F,L,e){var T=e(39898),b=e(74875),a=e(7901),_=e(91424),g=e(71828),h=g.strTranslate,o=e(63893),t=e(44467).arrayEditor,i=e(98292),n=e(18783),r=n.LINE_SPACING,s=n.FROM_TL,l=n.FROM_BR;function u(R){return i.autoMarginIdRoot+R._index}function d(R){return R._index}function c(R,O){var X=_.tester.selectAll("g."+i.labelGroupClass).data(O._visibleSteps);X.enter().append("g").classed(i.labelGroupClass,!0);var D=0,V=0;X.each(function($){var ne=f(T.select(this),{step:$},O).node();if(ne){var ae=_.bBox(ne);V=Math.max(V,ae.height),D=Math.max(D,ae.width)}}),X.remove();var j=O._dims={};j.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var B=R._fullLayout._size;j.lx=B.l+B.w*O.x,j.ly=B.t+B.h*(1-O.y),O.lenmode==="fraction"?j.outerLength=Math.round(B.w*O.len):j.outerLength=O.len,j.inputAreaStart=0,j.inputAreaLength=Math.round(j.outerLength-O.pad.l-O.pad.r);var W=(j.inputAreaLength-2*i.stepInset)/(O._stepCount-1),q=D+i.labelPadding;if(j.labelStride=Math.max(1,Math.ceil(q/W)),j.labelHeight=V,j.currentValueMaxWidth=0,j.currentValueHeight=0,j.currentValueTotalHeight=0,j.currentValueMaxLines=1,O.currentvalue.visible){var re=_.tester.append("g");X.each(function($){var ne=w(re,O,$.label),ae=ne.node()&&_.bBox(ne.node())||{width:0,height:0},se=o.lineCount(ne);j.currentValueMaxWidth=Math.max(j.currentValueMaxWidth,Math.ceil(ae.width)),j.currentValueHeight=Math.max(j.currentValueHeight,Math.ceil(ae.height)),j.currentValueMaxLines=Math.max(j.currentValueMaxLines,se)}),j.currentValueTotalHeight=j.currentValueHeight+O.currentvalue.offset,re.remove()}j.height=j.currentValueTotalHeight+i.tickOffset+O.ticklen+i.labelOffset+j.labelHeight+O.pad.t+O.pad.b;var ee="left";g.isRightAnchor(O)&&(j.lx-=j.outerLength,ee="right"),g.isCenterAnchor(O)&&(j.lx-=j.outerLength/2,ee="center");var K="top";g.isBottomAnchor(O)&&(j.ly-=j.height,K="bottom"),g.isMiddleAnchor(O)&&(j.ly-=j.height/2,K="middle"),j.outerLength=Math.ceil(j.outerLength),j.height=Math.ceil(j.height),j.lx=Math.round(j.lx),j.ly=Math.round(j.ly);var Y={y:O.y,b:j.height*l[K],t:j.height*s[K]};O.lenmode==="fraction"?(Y.l=0,Y.xl=O.x-O.len*s[ee],Y.r=0,Y.xr=O.x+O.len*l[ee]):(Y.x=O.x,Y.l=j.outerLength*s[ee],Y.r=j.outerLength*l[ee]),b.autoMargin(R,u(O),Y)}function w(R,O,X){if(O.currentvalue.visible){var D,V,j=O._dims;switch(O.currentvalue.xanchor){case"right":D=j.inputAreaLength-i.currentValueInset-j.currentValueMaxWidth,V="left";break;case"center":D=.5*j.inputAreaLength,V="middle";break;default:D=i.currentValueInset,V="left"}var B=g.ensureSingle(R,"text",i.labelClass,function(Y){Y.attr({"text-anchor":V,"data-notex":1})}),W=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof X=="string")W+=X;else{var q=O.steps[O.active].label,re=O._gd._fullLayout._meta;re&&(q=g.templateString(q,re)),W+=q}O.currentvalue.suffix&&(W+=O.currentvalue.suffix),B.call(_.font,O.currentvalue.font).text(W).call(o.convertToTspans,O._gd);var ee=o.lineCount(B),K=(j.currentValueMaxLines+1-ee)*O.currentvalue.font.size*r;return o.positionText(B,D,K),B}}function m(R,O,X){g.ensureSingle(R,"rect",i.gripRectClass,function(D){D.call(M,O,R,X).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(a.stroke,X.bordercolor).call(a.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px")}function f(R,O,X){var D=g.ensureSingle(R,"text",i.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),V=O.step.label,j=X._gd._fullLayout._meta;return j&&(V=g.templateString(V,j)),D.call(_.font,X.font).text(V).call(o.convertToTspans,X._gd),D}function x(R,O){var X=g.ensureSingle(R,"g",i.labelsClass),D=O._dims,V=X.selectAll("g."+i.labelGroupClass).data(D.labelSteps);V.enter().append("g").classed(i.labelGroupClass,!0),V.exit().remove(),V.each(function(j){var B=T.select(this);B.call(f,j,O),_.setTranslate(B,A(O,j.fraction),i.tickOffset+O.ticklen+O.font.size*r+i.labelOffset+D.currentValueTotalHeight)})}function y(R,O,X,D,V){var j=Math.round(D*(X._stepCount-1)),B=X._visibleSteps[j]._index;B!==X.active&&v(R,O,X,B,!0,V)}function v(R,O,X,D,V,j){var B=X.active;X.active=D,t(R.layout,i.name,X).applyUpdate("active",D);var W=X.steps[X.active];O.call(S,X,j),O.call(w,X),R.emit("plotly_sliderchange",{slider:X,step:X.steps[X.active],interaction:V,previousActive:B}),W&&W.method&&V&&(O._nextMethod?(O._nextMethod.step=W,O._nextMethod.doCallback=V,O._nextMethod.doTransition=j):(O._nextMethod={step:W,doCallback:V,doTransition:j},O._nextMethodRaf=window.requestAnimationFrame(function(){var q=O._nextMethod.step;q.method&&(q.execute&&b.executeAPICommand(R,q.method,q.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function M(R,O,X){if(!O._context.staticPlot){var D=X.node(),V=T.select(O);R.on("mousedown",B),R.on("touchstart",B)}function j(){return X.data()[0]}function B(){var W=j();O.emit("plotly_sliderstart",{slider:W});var q=X.select("."+i.gripRectClass);T.event.stopPropagation(),T.event.preventDefault(),q.call(a.fill,W.activebgcolor);var re=k(W,T.mouse(D)[0]);function ee(){var Y=j(),$=k(Y,T.mouse(D)[0]);y(O,X,Y,$,!1)}function K(){var Y=j();Y._dragging=!1,q.call(a.fill,Y.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),O.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}y(O,X,W,re,!0),W._dragging=!0,V.on("mousemove",ee),V.on("touchmove",ee),V.on("mouseup",K),V.on("touchend",K)}}function p(R,O){var X=R.selectAll("rect."+i.tickRectClass).data(O._visibleSteps),D=O._dims;X.enter().append("rect").classed(i.tickRectClass,!0),X.exit().remove(),X.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),X.each(function(V,j){var B=j%D.labelStride==0,W=T.select(this);W.attr({height:B?O.ticklen:O.minorticklen}).call(a.fill,O.tickcolor),_.setTranslate(W,A(O,j/(O._stepCount-1))-.5*O.tickwidth,(B?i.tickOffset:i.minorTickOffset)+D.currentValueTotalHeight)})}function S(R,O,X){for(var D=R.select("rect."+i.gripRectClass),V=0,j=0;j<O._stepCount;j++)if(O._visibleSteps[j]._index===O.active){V=j;break}var B=A(O,V/(O._stepCount-1));if(!O._invokingCommand){var W=D;X&&O.transition.duration>0&&(W=W.transition().duration(O.transition.duration).ease(O.transition.easing)),W.attr("transform",h(B-.5*i.gripWidth,O._dims.currentValueTotalHeight))}}function A(R,O){var X=R._dims;return X.inputAreaStart+i.stepInset+(X.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,O))}function k(R,O){var X=R._dims;return Math.min(1,Math.max(0,(O-i.stepInset-X.inputAreaStart)/(X.inputAreaLength-2*i.stepInset-2*X.inputAreaStart)))}function C(R,O,X){var D=X._dims,V=g.ensureSingle(R,"rect",i.railTouchRectClass,function(j){j.call(M,O,R,X).style("pointer-events","all")});V.attr({width:D.inputAreaLength,height:Math.max(D.inputAreaWidth,i.tickOffset+X.ticklen+D.labelHeight)}).call(a.fill,X.bgcolor).attr("opacity",0),_.setTranslate(V,0,D.currentValueTotalHeight)}function P(R,O){var X=O._dims,D=X.inputAreaLength-2*i.railInset,V=g.ensureSingle(R,"rect",i.railRectClass);V.attr({width:D,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,O.bordercolor).call(a.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),_.setTranslate(V,i.railInset,.5*(X.inputAreaWidth-i.railWidth)+X.currentValueTotalHeight)}F.exports=function(R){var O=R._context.staticPlot,X=R._fullLayout,D=function(re,ee){for(var K=re[i.name],Y=[],$=0;$<K.length;$++){var ne=K[$];ne.visible&&(ne._gd=ee,Y.push(ne))}return Y}(X,R),V=X._infolayer.selectAll("g."+i.containerClassName).data(D.length>0?[0]:[]);function j(re){re._commandObserver&&(re._commandObserver.remove(),delete re._commandObserver),b.autoMargin(R,u(re))}if(V.enter().append("g").classed(i.containerClassName,!0).style("cursor",O?null:"ew-resize"),V.exit().each(function(){T.select(this).selectAll("g."+i.groupClassName).each(j)}).remove(),D.length!==0){var B=V.selectAll("g."+i.groupClassName).data(D,d);B.enter().append("g").classed(i.groupClassName,!0),B.exit().each(j).remove();for(var W=0;W<D.length;W++){var q=D[W];c(R,q)}B.each(function(re){var ee=T.select(this);(function(K){var Y=K._dims;Y.labelSteps=[];for(var $=K._stepCount,ne=0;ne<$;ne+=Y.labelStride)Y.labelSteps.push({fraction:ne/($-1),step:K._visibleSteps[ne]})})(re),b.manageCommandObserver(R,re,re._visibleSteps,function(K){var Y=ee.data()[0];Y.active!==K.index&&(Y._dragging||v(R,ee,Y,K.index,!1,!0))}),function(K,Y,$){($.steps[$.active]||{}).visible||($.active=$._visibleSteps[0]._index),Y.call(w,$).call(P,$).call(x,$).call(p,$).call(C,K,$).call(m,K,$);var ne=$._dims;_.setTranslate(Y,ne.lx+$.pad.l,ne.ly+$.pad.t),Y.call(S,$,!1),Y.call(w,$)}(R,T.select(this),re)})}}},23243:function(F,L,e){var T=e(98292);F.exports={moduleType:"component",name:T.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function(F,L,e){var T=e(39898),b=e(92770),a=e(74875),_=e(73972),g=e(71828),h=g.strTranslate,o=e(91424),t=e(7901),i=e(63893),n=e(37822),r=e(18783).OPPOSITE_SIDE,s=/ [XY][0-9]* /;F.exports={draw:function(l,u,d){var c,w=d.propContainer,m=d.propName,f=d.placeholder,x=d.traceIndex,y=d.avoid||{},v=d.attributes,M=d.transform,p=d.containerGroup,S=l._fullLayout,A=1,k=!1,C=w.title,P=(C&&C.text?C.text:"").trim(),R=C&&C.font?C.font:{},O=R.family,X=R.size,D=R.color;m==="title.text"?c="titleText":m.indexOf("axis")!==-1?c="axisTitleText":m.indexOf(!0)&&(c="colorbarTitleText");var V=l._context.edits[c];P===""?A=0:P.replace(s," % ")===f.replace(s," % ")&&(A=.2,k=!0,V||(P="")),d._meta?P=g.templateString(P,d._meta):S._meta&&(P=g.templateString(P,S._meta));var j,B=P||V;p||(p=g.ensureSingle(S._infolayer,"g","g-"+u),j=S._hColorbarMoveTitle);var W=p.selectAll("text").data(B?[0]:[]);if(W.enter().append("text"),W.text(P).attr("class",u),W.exit().remove(),!B)return p;function q(K){g.syncOrAsync([re,ee],K)}function re(K){var Y;return!M&&j&&(M={}),M?(Y="",M.rotate&&(Y+="rotate("+[M.rotate,v.x,v.y]+")"),(M.offset||j)&&(Y+=h(0,(M.offset||0)-(j||0)))):Y=null,K.attr("transform",Y),K.style({"font-family":O,"font-size":T.round(X,2)+"px",fill:t.rgb(D),opacity:A*t.opacity(D),"font-weight":a.fontWeight}).attr(v).call(i.convertToTspans,l),a.previousPromises(l)}function ee(K){var Y=T.select(K.node().parentNode);if(y&&y.selection&&y.side&&P){Y.attr("transform",null);var $=r[y.side],ne=y.side==="left"||y.side==="top"?-1:1,ae=b(y.pad)?y.pad:2,se=o.bBox(Y.node()),ce={t:0,b:0,l:0,r:0},me=l._fullLayout._reservedMargin;for(var ye in me)for(var Te in me[ye]){var Ce=me[ye][Te];ce[Te]=Math.max(ce[Te],Ce)}var pe={left:ce.l,top:ce.t,right:S.width-ce.r,bottom:S.height-ce.b},fe=y.maxShift||ne*(pe[y.side]-se[y.side]),Oe=0;if(fe<0)Oe=fe;else{var Se=y.offsetLeft||0,Me=y.offsetTop||0;se.left-=Se,se.right-=Se,se.top-=Me,se.bottom-=Me,y.selection.each(function(){var le=o.bBox(this);g.bBoxIntersect(se,le,ae)&&(Oe=Math.max(Oe,ne*(le[y.side]-se[$])+ae))}),Oe=Math.min(fe,Oe),w._titleScoot=Math.abs(Oe)}if(Oe>0||fe<0){var ue={left:[-Oe,0],right:[Oe,0],top:[0,-Oe],bottom:[0,Oe]}[y.side];Y.attr("transform",h(ue[0],ue[1]))}}}return W.call(q),V&&(P?W.on(".opacity",null):(A=0,k=!0,W.text(f).on("mouseover.opacity",function(){T.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})),W.call(i.makeEditable,{gd:l}).on("edit",function(K){x!==void 0?_.call("_guiRestyle",l,m,K,x):_.call("_guiRelayout",l,m,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(K){this.text(K||" ").call(i.positionText,v.x,v.y)})),W.classed("js-placeholder",k),p}}},7163:function(F,L,e){var T=e(41940),b=e(22399),a=e(1426).extendFlat,_=e(30962).overrideAll,g=e(35025),h=e(44467).templatedArray,o=h("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});F.exports=_(h("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:o,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(g({editType:"arraydraw"}),{}),font:T({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:b.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(F){F.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(F,L,e){var T=e(71828),b=e(85501),a=e(7163),_=e(75909).name,g=a.buttons;function h(t,i,n){function r(s,l){return T.coerce(t,i,a,s,l)}r("visible",b(t,i,{name:"buttons",handleItemDefaults:o}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),T.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),T.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function o(t,i){function n(r,s){return T.coerce(t,i,g,r,s)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}F.exports=function(t,i){b(t,i,{name:_,handleItemDefaults:h})}},13689:function(F,L,e){var T=e(39898),b=e(74875),a=e(7901),_=e(91424),g=e(71828),h=e(63893),o=e(44467).arrayEditor,t=e(18783).LINE_SPACING,i=e(75909),n=e(25849);function r(A){return A._index}function s(A,k){return+A.attr(i.menuIndexAttrName)===k._index}function l(A,k,C,P,R,O,X,D){k.active=X,o(A.layout,i.name,k).applyUpdate("active",X),k.type==="buttons"?d(A,P,null,null,k):k.type==="dropdown"&&(R.attr(i.menuIndexAttrName,"-1"),u(A,P,R,O,k),D||d(A,P,R,O,k))}function u(A,k,C,P,R){var O=g.ensureSingle(k,"g",i.headerClassName,function(W){W.style("pointer-events","all")}),X=R._dims,D=R.active,V=R.buttons[D]||i.blankHeaderOpts,j={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},B={width:X.headerWidth,height:X.headerHeight};O.call(c,R,V,A).call(p,R,j,B),g.ensureSingle(k,"text",i.headerArrowClassName,function(W){W.attr("text-anchor","end").call(_.font,R.font).text(i.arrowSymbol[R.direction])}).attr({x:X.headerWidth-i.arrowOffsetX+R.pad.l,y:X.headerHeight/2+i.textOffsetY+R.pad.t}),O.on("click",function(){C.call(S,String(s(C,R)?-1:R._index)),d(A,k,C,P,R)}),O.on("mouseover",function(){O.call(x)}),O.on("mouseout",function(){O.call(y,R)}),_.setTranslate(k,X.lx,X.ly)}function d(A,k,C,P,R){C||(C=k).attr("pointer-events","all");var O=function(Y){return+Y.attr(i.menuIndexAttrName)==-1}(C)&&R.type!=="buttons"?[]:R.buttons,X=R.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,D=C.selectAll("g."+X).data(g.filterVisible(O)),V=D.enter().append("g").classed(X,!0),j=D.exit();R.type==="dropdown"?(V.attr("opacity","0").transition().attr("opacity","1"),j.transition().attr("opacity","0").remove()):j.remove();var B=0,W=0,q=R._dims,re=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(re?W=q.headerHeight+i.gapButtonHeader:B=q.headerWidth+i.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(W=-i.gapButtonHeader+i.gapButton-q.openHeight),R.type==="dropdown"&&R.direction==="left"&&(B=-i.gapButtonHeader+i.gapButton-q.openWidth);var ee={x:q.lx+B+R.pad.l,y:q.ly+W+R.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},K={l:ee.x+R.borderwidth,t:ee.y+R.borderwidth};D.each(function(Y,$){var ne=T.select(this);ne.call(c,R,Y,A).call(p,R,ee),ne.on("click",function(){T.event.defaultPrevented||(Y.execute&&(Y.args2&&R.active===$?(l(A,R,0,k,C,P,-1),b.executeAPICommand(A,Y.method,Y.args2)):(l(A,R,0,k,C,P,$),b.executeAPICommand(A,Y.method,Y.args))),A.emit("plotly_buttonclicked",{menu:R,button:Y,active:R.active}))}),ne.on("mouseover",function(){ne.call(x)}),ne.on("mouseout",function(){ne.call(y,R),D.call(f,R)})}),D.call(f,R),re?(K.w=Math.max(q.openWidth,q.headerWidth),K.h=ee.y-K.t):(K.w=ee.x-K.l,K.h=Math.max(q.openHeight,q.headerHeight)),K.direction=R.direction,P&&(D.size()?function(Y,$,ne,ae,se,ce){var me,ye,Te,Ce=se.direction,pe=Ce==="up"||Ce==="down",fe=se._dims,Oe=se.active;if(pe)for(ye=0,Te=0;Te<Oe;Te++)ye+=fe.heights[Te]+i.gapButton;else for(me=0,Te=0;Te<Oe;Te++)me+=fe.widths[Te]+i.gapButton;ae.enable(ce,me,ye),ae.hbar&&ae.hbar.attr("opacity","0").transition().attr("opacity","1"),ae.vbar&&ae.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,P,R,K):function(Y){var $=!!Y.hbar,ne=!!Y.vbar;$&&Y.hbar.transition().attr("opacity","0").each("end",function(){$=!1,ne||Y.disable()}),ne&&Y.vbar.transition().attr("opacity","0").each("end",function(){ne=!1,$||Y.disable()})}(P))}function c(A,k,C,P){A.call(w,k).call(m,k,C,P)}function w(A,k){g.ensureSingle(A,"rect",i.itemRectClassName,function(C){C.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,k.bordercolor).call(a.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px")}function m(A,k,C,P){var R=g.ensureSingle(A,"text",i.itemTextClassName,function(D){D.attr({"text-anchor":"start","data-notex":1})}),O=C.label,X=P._fullLayout._meta;X&&(O=g.templateString(O,X)),R.call(_.font,k.font).text(O).call(h.convertToTspans,P)}function f(A,k){var C=k.active;A.each(function(P,R){var O=T.select(this);R===C&&k.showactive&&O.select("rect."+i.itemRectClassName).call(a.fill,i.activeColor)})}function x(A){A.select("rect."+i.itemRectClassName).call(a.fill,i.hoverColor)}function y(A,k){A.select("rect."+i.itemRectClassName).call(a.fill,k.bgcolor)}function v(A,k){var C=k._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},P=_.tester.selectAll("g."+i.dropdownButtonClassName).data(g.filterVisible(k.buttons));P.enter().append("g").classed(i.dropdownButtonClassName,!0);var R=["up","down"].indexOf(k.direction)!==-1;P.each(function(B,W){var q=T.select(this);q.call(c,k,B,A);var re=q.select("."+i.itemTextClassName),ee=re.node()&&_.bBox(re.node()).width,K=Math.max(ee+i.textPadX,i.minWidth),Y=k.font.size*t,$=h.lineCount(re),ne=Math.max(Y*$,i.minHeight)+i.textOffsetY;ne=Math.ceil(ne),K=Math.ceil(K),C.widths[W]=K,C.heights[W]=ne,C.height1=Math.max(C.height1,ne),C.width1=Math.max(C.width1,K),R?(C.totalWidth=Math.max(C.totalWidth,K),C.openWidth=C.totalWidth,C.totalHeight+=ne+i.gapButton,C.openHeight+=ne+i.gapButton):(C.totalWidth+=K+i.gapButton,C.openWidth+=K+i.gapButton,C.totalHeight=Math.max(C.totalHeight,ne),C.openHeight=C.totalHeight)}),R?C.totalHeight-=i.gapButton:C.totalWidth-=i.gapButton,C.headerWidth=C.width1+i.arrowPadX,C.headerHeight=C.height1,k.type==="dropdown"&&(R?(C.width1+=i.arrowPadX,C.totalHeight=C.height1):C.totalWidth=C.width1,C.totalWidth+=i.arrowPadX),P.remove();var O=C.totalWidth+k.pad.l+k.pad.r,X=C.totalHeight+k.pad.t+k.pad.b,D=A._fullLayout._size;C.lx=D.l+D.w*k.x,C.ly=D.t+D.h*(1-k.y);var V="left";g.isRightAnchor(k)&&(C.lx-=O,V="right"),g.isCenterAnchor(k)&&(C.lx-=O/2,V="center");var j="top";g.isBottomAnchor(k)&&(C.ly-=X,j="bottom"),g.isMiddleAnchor(k)&&(C.ly-=X/2,j="middle"),C.totalWidth=Math.ceil(C.totalWidth),C.totalHeight=Math.ceil(C.totalHeight),C.lx=Math.round(C.lx),C.ly=Math.round(C.ly),b.autoMargin(A,M(k),{x:k.x,y:k.y,l:O*({right:1,center:.5}[V]||0),r:O*({left:1,center:.5}[V]||0),b:X*({top:1,middle:.5}[j]||0),t:X*({bottom:1,middle:.5}[j]||0)})}function M(A){return i.autoMarginIdRoot+A._index}function p(A,k,C,P){P=P||{};var R=A.select("."+i.itemRectClassName),O=A.select("."+i.itemTextClassName),X=k.borderwidth,D=C.index,V=k._dims;_.setTranslate(A,X+C.x,X+C.y);var j=["up","down"].indexOf(k.direction)!==-1,B=P.height||(j?V.heights[D]:V.height1);R.attr({x:0,y:0,width:P.width||(j?V.width1:V.widths[D]),height:B});var W=k.font.size*t,q=(h.lineCount(O)-1)*W/2;h.positionText(O,i.textOffsetX,B/2-q+i.textOffsetY),j?C.y+=V.heights[D]+C.yPad:C.x+=V.widths[D]+C.xPad,C.index++}function S(A,k){A.attr(i.menuIndexAttrName,k||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}F.exports=function(A){var k=A._fullLayout,C=g.filterVisible(k[i.name]);function P(W){b.autoMargin(A,M(W))}var R=k._menulayer.selectAll("g."+i.containerClassName).data(C.length>0?[0]:[]);if(R.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),R.exit().each(function(){T.select(this).selectAll("g."+i.headerGroupClassName).each(P)}).remove(),C.length!==0){var O=R.selectAll("g."+i.headerGroupClassName).data(C,r);O.enter().append("g").classed(i.headerGroupClassName,!0);for(var X=g.ensureSingle(R,"g",i.dropdownButtonGroupClassName,function(W){W.style("pointer-events","all")}),D=0;D<C.length;D++){var V=C[D];v(A,V)}var j="updatemenus"+k._uid,B=new n(A,X,j);O.enter().size()&&(X.node().parentNode.appendChild(X.node()),X.call(S)),O.exit().each(function(W){X.call(S),P(W)}).remove(),O.each(function(W){var q=T.select(this),re=W.type==="dropdown"?X:null;b.manageCommandObserver(A,W,W.buttons,function(ee){l(A,W,W.buttons[ee.index],q,re,B,ee.index,!0)}),W.type==="dropdown"?(u(A,q,X,B,W),s(X,W)&&d(A,q,X,B,W)):d(A,q,null,null,W)})}}},20763:function(F,L,e){var T=e(75909);F.exports={moduleType:"component",name:T.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function(F,L,e){F.exports=g;var T=e(39898),b=e(7901),a=e(91424),_=e(71828);function g(h,o,t){this.gd=h,this.container=o,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}g.barWidth=2,g.barLength=20,g.barRadius=2,g.barPad=1,g.barColor="#808BA4",g.prototype.enable=function(h,o,t){var i=this.gd._fullLayout,n=i.width,r=i.height;this.position=h;var s,l,u,d,c=this.position.l,w=this.position.w,m=this.position.t,f=this.position.h,x=this.position.direction,y=x==="down",v=x==="left",M=x==="up",p=w,S=f;y||v||x==="right"||M||(this.position.direction="down",y=!0),y||M?(l=(s=c)+p,y?(u=m,S=(d=Math.min(u+S,r))-u):S=(d=m+S)-(u=Math.max(d-S,0))):(d=(u=m)+S,v?p=(l=c+p)-(s=Math.max(l-p,0)):(s=c,p=(l=Math.min(s+p,n))-s)),this._box={l:s,t:u,w:p,h:S};var A=w>p,k=g.barLength+2*g.barPad,C=g.barWidth+2*g.barPad,P=c,R=m+f;R+C>r&&(R=r-C);var O=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(b.fill,g.barColor),A?(this.hbar=O.attr({rx:g.barRadius,ry:g.barRadius,x:P,y:R,width:k,height:C}),this._hbarXMin=P+k/2,this._hbarTranslateMax=p-k):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var X=f>S,D=g.barWidth+2*g.barPad,V=g.barLength+2*g.barPad,j=c+w,B=m;j+D>n&&(j=n-D);var W=this.container.selectAll("rect.scrollbar-vertical").data(X?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-vertical",!0).call(b.fill,g.barColor),X?(this.vbar=W.attr({rx:g.barRadius,ry:g.barRadius,x:j,y:B,width:D,height:V}),this._vbarYMin=B+V/2,this._vbarTranslateMax=S-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,re=s-.5,ee=X?l+D+.5:l+.5,K=u-.5,Y=A?d+C+.5:d+.5,$=i._topdefs.selectAll("#"+q).data(A||X?[0]:[]);if($.exit().remove(),$.enter().append("clipPath").attr("id",q).append("rect"),A||X?(this._clipRect=$.select("rect").attr({x:Math.floor(re),y:Math.floor(K),width:Math.ceil(ee)-Math.floor(re),height:Math.ceil(Y)-Math.floor(K)}),this.container.call(a.setClipUrl,q,this.gd),this.bg.attr({x:c,y:m,width:w,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),A||X){var ne=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ne);var ae=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault(),T.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call(ae),X&&this.vbar.on(".drag",null).call(ae)}this.setTranslate(o,t)},g.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},g.prototype._onBoxDrag=function(){var h=this.translateX,o=this.translateY;this.hbar&&(h-=T.event.dx),this.vbar&&(o-=T.event.dy),this.setTranslate(h,o)},g.prototype._onBoxWheel=function(){var h=this.translateX,o=this.translateY;this.hbar&&(h+=T.event.deltaY),this.vbar&&(o+=T.event.deltaY),this.setTranslate(h,o)},g.prototype._onBarDrag=function(){var h=this.translateX,o=this.translateY;if(this.hbar){var t=h+this._hbarXMin,i=t+this._hbarTranslateMax;h=(_.constrain(T.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var n=o+this._vbarYMin,r=n+this._vbarTranslateMax;o=(_.constrain(T.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(h,o)},g.prototype.setTranslate=function(h,o){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(h=_.constrain(h||0,0,t),o=_.constrain(o||0,0,i),this.translateX=h,this.translateY=o,this.container.call(a.setTranslate,this._box.l-this.position.l-h,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+h-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var n=h/t;this.hbar.call(a.setTranslate,h+n*this._hbarTranslateMax,o)}if(this.vbar){var r=o/i;this.vbar.call(a.setTranslate,h,o+r*this._vbarTranslateMax)}}},18783:function(F){F.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(F){F.exports={axisRefDescription:function(L,e,T){return["If set to a",L,"axis id (e.g. *"+L+"* or","*"+L+"2*), the `"+L+"` position refers to a",L,"coordinate. If set to *paper*, the `"+L+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+T+"). If set to a",L,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+L+"2 domain* refers to the domain of the second",L," axis and a",L,"position of 0.5 refers to the","point between the",e,"and the",T,"of the domain of the","second",L,"axis."].join(" ")}}},22372:function(F){F.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(F){F.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(F){F.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(F){F.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(F){F.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(F){F.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(F){F.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(F,L){L.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],L.STYLE=L.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},77922:function(F,L){L.xmlns="http://www.w3.org/2000/xmlns/",L.svg="http://www.w3.org/2000/svg",L.xlink="http://www.w3.org/1999/xlink",L.svgAttrs={xmlns:L.svg,"xmlns:xlink":L.xlink}},8729:function(F,L,e){L.version=e(11506).version,e(7417),e(98847);for(var T=e(73972),b=L.register=T.register,a=e(10641),_=Object.keys(a),g=0;g<_.length;g++){var h=_[g];h.charAt(0)!=="_"&&(L[h]=a[h]),b({moduleType:"apiMethod",name:h,fn:a[h]})}b(e(67368)),b([e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(2199),e(30211),e(64168)]),b([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(b(window.PlotlyLocales),delete window.PlotlyLocales),L.Icons=e(24255);var o=e(30211),t=e(74875);L.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},L.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},L.Snapshot=e(44511),L.PlotSchema=e(86281)},24255:function(F){F.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(F,L){L.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},L.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},L.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},L.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},L.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},L.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function(F,L,e){var T=e(64872),b=T.mod,a=T.modHalf,_=Math.PI,g=2*_;function h(n){return Math.abs(n[1]-n[0])>g-1e-14}function o(n,r){return a(r-n,g)}function t(n,r){if(h(r))return!0;var s,l;r[0]<r[1]?(s=r[0],l=r[1]):(s=r[1],l=r[0]),(s=b(s,g))>(l=b(l,g))&&(l+=g);var u=b(n,g),d=u+g;return u>=s&&u<=l||d>=s&&d<=l}function i(n,r,s,l,u,d,c){u=u||0,d=d||0;var w,m,f,x,y,v=h([s,l]);function M(k,C){return[k*Math.cos(C)+u,d-k*Math.sin(C)]}v?(w=0,m=_,f=g):s<l?(w=s,f=l):(w=l,f=s),n<r?(x=n,y=r):(x=r,y=n);var p,S=Math.abs(f-w)<=_?0:1;function A(k,C,P){return"A"+[k,k]+" "+[0,S,P]+" "+M(k,C)}return v?p=x===null?"M"+M(y,w)+A(y,m,0)+A(y,f,0)+"Z":"M"+M(x,w)+A(x,m,0)+A(x,f,0)+"ZM"+M(y,w)+A(y,m,1)+A(y,f,1)+"Z":x===null?(p="M"+M(y,w)+A(y,f,0),c&&(p+="L0,0Z")):p="M"+M(x,w)+"L"+M(y,w)+A(y,f,0)+"L"+M(x,f)+A(x,w,1)+"Z",p}F.exports={deg2rad:function(n){return n/180*_},rad2deg:function(n){return n/_*180},angleDelta:o,angleDist:function(n,r){return Math.abs(o(n,r))},isFullCircle:h,isAngleInsideSector:t,isPtInsideSector:function(n,r,s,l){return!!t(r,l)&&(s[0]<s[1]?(u=s[0],d=s[1]):(u=s[1],d=s[0]),n>=u&&n<=d);var u,d},pathArc:function(n,r,s,l,u){return i(null,n,r,s,l,u,0)},pathSector:function(n,r,s,l,u){return i(null,n,r,s,l,u,1)},pathAnnulus:function(n,r,s,l,u,d){return i(n,r,s,l,u,d,1)}}},73627:function(F,L){var e=Array.isArray,T=ArrayBuffer,b=DataView;function a(h){return T.isView(h)&&!(h instanceof b)}function _(h){return e(h)||a(h)}function g(h,o,t){if(_(h)){if(_(h[0])){for(var i=t,n=0;n<h.length;n++)i=o(i,h[n].length);return i}return h.length}return 0}L.isTypedArray=a,L.isArrayOrTypedArray=_,L.isArray1D=function(h){return!_(h[0])},L.ensureArray=function(h,o){return e(h)||(h=[]),h.length=o,h},L.concat=function(){var h,o,t,i,n,r,s,l,u=[],d=!0,c=0;for(t=0;t<arguments.length;t++)(r=(i=arguments[t]).length)&&(o?u.push(i):(o=i,n=r),e(i)?h=!1:(d=!1,c?h!==i.constructor&&(h=!1):h=i.constructor),c+=r);if(!c)return[];if(!u.length)return o;if(d)return o.concat.apply(o,u);if(h){for((s=new h(c)).set(o),t=0;t<u.length;t++)i=u[t],s.set(i,n),n+=i.length;return s}for(s=new Array(c),l=0;l<o.length;l++)s[l]=o[l];for(t=0;t<u.length;t++){for(i=u[t],l=0;l<i.length;l++)s[n+l]=i[l];n+=l}return s},L.maxRowLength=function(h){return g(h,Math.max,0)},L.minRowLength=function(h){return g(h,Math.min,1/0)}},95218:function(F,L,e){var T=e(92770),b=e(50606).BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;F.exports=function(_){return typeof _=="string"&&(_=_.replace(a,"")),T(_)?Number(_):b}},33306:function(F){F.exports=function(L){var e=L._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},86367:function(F){F.exports=function(L){L._responsiveChartHandler&&(window.removeEventListener("resize",L._responsiveChartHandler),delete L._responsiveChartHandler)}},96554:function(F,L,e){var T=e(92770),b=e(84267),a=e(9012),_=e(63282),g=e(7901),h=e(37822).DESELECTDIM,o=e(65487),t=e(30587).counter,i=e(64872).modHalf,n=e(73627).isArrayOrTypedArray;function r(s,l){var u=L.valObjectMeta[l.valType];if(l.arrayOk&&n(s))return!0;if(u.validateFunction)return u.validateFunction(s,l);var d={},c=d,w={set:function(m){c=m}};return u.coerceFunction(s,w,d,l),c!==d}L.valObjectMeta={data_array:{coerceFunction:function(s,l,u){n(s)?l.set(s):u!==void 0&&l.set(u)}},enumerated:{coerceFunction:function(s,l,u,d){d.coerceNumber&&(s=+s),d.values.indexOf(s)===-1?l.set(u):l.set(s)},validateFunction:function(s,l){l.coerceNumber&&(s=+s);for(var u=l.values,d=0;d<u.length;d++){var c=String(u[d]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){if(new RegExp(c.substr(1,c.length-2)).test(s))return!0}else if(s===u[d])return!0}return!1}},boolean:{coerceFunction:function(s,l,u){s===!0||s===!1?l.set(s):l.set(u)}},number:{coerceFunction:function(s,l,u,d){!T(s)||d.min!==void 0&&s<d.min||d.max!==void 0&&s>d.max?l.set(u):l.set(+s)}},integer:{coerceFunction:function(s,l,u,d){s%1||!T(s)||d.min!==void 0&&s<d.min||d.max!==void 0&&s>d.max?l.set(u):l.set(+s)}},string:{coerceFunction:function(s,l,u,d){if(typeof s!="string"){var c=typeof s=="number";d.strict!==!0&&c?l.set(String(s)):l.set(u)}else d.noBlank&&!s?l.set(u):l.set(s)}},color:{coerceFunction:function(s,l,u){b(s).isValid()?l.set(s):l.set(u)}},colorlist:{coerceFunction:function(s,l,u){Array.isArray(s)&&s.length&&s.every(function(d){return b(d).isValid()})?l.set(s):l.set(u)}},colorscale:{coerceFunction:function(s,l,u){l.set(_.get(s,u))}},angle:{coerceFunction:function(s,l,u){s==="auto"?l.set("auto"):T(s)?l.set(i(+s,360)):l.set(u)}},subplotid:{coerceFunction:function(s,l,u,d){var c=d.regex||t(u);typeof s=="string"&&c.test(s)?l.set(s):l.set(u)},validateFunction:function(s,l){var u=l.dflt;return s===u||typeof s=="string"&&!!t(u).test(s)}},flaglist:{coerceFunction:function(s,l,u,d){if((d.extras||[]).indexOf(s)===-1)if(typeof s=="string"){for(var c=s.split("+"),w=0;w<c.length;){var m=c[w];d.flags.indexOf(m)===-1||c.indexOf(m)<w?c.splice(w,1):w++}c.length?l.set(c.join("+")):l.set(u)}else l.set(u);else l.set(s)}},any:{coerceFunction:function(s,l,u){s===void 0?l.set(u):l.set(s)}},info_array:{coerceFunction:function(s,l,u,d){function c(R,O,X){var D,V={set:function(j){D=j}};return X===void 0&&(X=O.dflt),L.valObjectMeta[O.valType].coerceFunction(R,V,X,O),D}var w=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var m,f,x,y,v,M,p=d.items,S=[],A=Array.isArray(p),k=A&&w&&Array.isArray(p[0]),C=w&&A&&!k,P=A&&!C?p.length:s.length;if(u=Array.isArray(u)?u:[],w)for(m=0;m<P;m++)for(S[m]=[],x=Array.isArray(s[m])?s[m]:[],v=C?p.length:A?p[m].length:x.length,f=0;f<v;f++)y=C?p[f]:A?p[m][f]:p,(M=c(x[f],y,(u[m]||[])[f]))!==void 0&&(S[m][f]=M);else for(m=0;m<P;m++)(M=c(s[m],A?p[m]:p,u[m]))!==void 0&&(S[m]=M);l.set(S)}else l.set(u)},validateFunction:function(s,l){if(!Array.isArray(s))return!1;var u=l.items,d=Array.isArray(u),c=l.dimensions===2;if(!l.freeLength&&s.length!==u.length)return!1;for(var w=0;w<s.length;w++)if(c){if(!Array.isArray(s[w])||!l.freeLength&&s[w].length!==u[w].length)return!1;for(var m=0;m<s[w].length;m++)if(!r(s[w][m],d?u[w][m]:u))return!1}else if(!r(s[w],d?u[w]:u))return!1;return!0}}},L.coerce=function(s,l,u,d,c){var w=o(u,d).get(),m=o(s,d),f=o(l,d),x=m.get(),y=l._template;if(x===void 0&&y&&(x=o(y,d).get(),y=0),c===void 0&&(c=w.dflt),w.arrayOk&&n(x))return f.set(x),x;var v=L.valObjectMeta[w.valType].coerceFunction;v(x,f,c,w);var M=f.get();return y&&M===c&&!r(x,w)&&(v(x=o(y,d).get(),f,c,w),M=f.get()),M},L.coerce2=function(s,l,u,d,c){var w=o(s,d),m=L.coerce(s,l,u,d,c);return w.get()!=null&&m},L.coerceFont=function(s,l,u){var d={};return u=u||{},d.family=s(l+".family",u.family),d.size=s(l+".size",u.size),d.color=s(l+".color",u.color),d},L.coercePattern=function(s,l,u,d){if(s(l+".shape")){s(l+".solidity"),s(l+".size");var c=s(l+".fillmode")==="overlay";if(!d){var w=s(l+".bgcolor",c?u:void 0);s(l+".fgcolor",c?g.contrast(w):u)}s(l+".fgopacity",c?.5:1)}},L.coerceHoverinfo=function(s,l,u){var d,c=l._module.attributes,w=c.hoverinfo?c:a,m=w.hoverinfo;if(u._dataLength===1){var f=m.dflt==="all"?m.flags.slice():m.dflt.split("+");f.splice(f.indexOf("name"),1),d=f.join("+")}return L.coerce(s,l,w,"hoverinfo",d)},L.coerceSelectionMarkerOpacity=function(s,l){if(s.marker){var u,d,c=s.marker.opacity;c!==void 0&&(n(c)||s.selected||s.unselected||(u=c,d=h*c),l("selected.marker.opacity",u),l("unselected.marker.opacity",d))}},L.validate=r},41631:function(F,L,e){var T,b,a=e(84096).i$,_=e(92770),g=e(47769),h=e(64872).mod,o=e(50606),t=o.BADNUM,i=o.ONEDAY,n=o.ONEHOUR,r=o.ONEMIN,s=o.ONESEC,l=o.EPOCHJD,u=e(73972),d=e(84096).g0,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=new Date().getFullYear()-70;function f(O){return O&&u.componentsRegistry.calendars&&typeof O=="string"&&O!=="gregorian"}function x(O,X){return String(O+Math.pow(10,X)).substr(1)}L.dateTick0=function(O,X){var D=function(j,B){return f(j)?B?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[j]:u.getComponentMethod("calendars","CANONICAL_TICK")[j]:B?"2000-01-02":"2000-01-01"}(O,!!X);if(X<2)return D;var V=L.dateTime2ms(D,O);return V+=i*(X-1),L.ms2DateTime(V,0,O)},L.dfltRange=function(O){return f(O)?u.getComponentMethod("calendars","DFLTRANGE")[O]:["2000-01-01","2001-01-01"]},L.isJSDate=function(O){return typeof O=="object"&&O!==null&&typeof O.getTime=="function"},L.dateTime2ms=function(O,X){if(L.isJSDate(O)){var D=O.getTimezoneOffset()*r,V=(O.getUTCMinutes()-O.getMinutes())*r+(O.getUTCSeconds()-O.getSeconds())*s+(O.getUTCMilliseconds()-O.getMilliseconds());if(V){var j=3*r;D=D-j/2+h(V-D+j/2,j)}return(O=Number(O)-D)>=T&&O<=b?O:t}if(typeof O!="string"&&typeof O!="number")return t;O=String(O);var B=f(X),W=O.charAt(0);!B||W!=="G"&&W!=="g"||(O=O.substr(1),X="");var q=B&&X.substr(0,7)==="chinese",re=O.match(q?w:c);if(!re)return t;var ee=re[1],K=re[3]||"1",Y=Number(re[5]||1),$=Number(re[7]||0),ne=Number(re[9]||0),ae=Number(re[11]||0);if(B){if(ee.length===2)return t;var se;ee=Number(ee);try{var ce=u.getComponentMethod("calendars","getCal")(X);if(q){var me=K.charAt(K.length-1)==="i";K=parseInt(K,10),se=ce.newDate(ee,ce.toMonthIndex(ee,K,me),Y)}else se=ce.newDate(ee,Number(K),Y)}catch{return t}return se?(se.toJD()-l)*i+$*n+ne*r+ae*s:t}ee=ee.length===2?(Number(ee)+2e3-m)%100+m:Number(ee),K-=1;var ye=new Date(Date.UTC(2e3,K,Y,$,ne));return ye.setUTCFullYear(ee),ye.getUTCMonth()!==K||ye.getUTCDate()!==Y?t:ye.getTime()+ae*s},T=L.MIN_MS=L.dateTime2ms("-9999"),b=L.MAX_MS=L.dateTime2ms("9999-12-31 23:59:59.9999"),L.isDateTime=function(O,X){return L.dateTime2ms(O,X)!==t};var y=90*i,v=3*n,M=5*r;function p(O,X,D,V,j){if((X||D||V||j)&&(O+=" "+x(X,2)+":"+x(D,2),(V||j)&&(O+=":"+x(V,2),j))){for(var B=4;j%10==0;)B-=1,j/=10;O+="."+x(j,B)}return O}L.ms2DateTime=function(O,X,D){if(typeof O!="number"||!(O>=T&&O<=b))return t;X||(X=0);var V,j,B,W,q,re,ee=Math.floor(10*h(O+.05,1)),K=Math.round(O-ee/10);if(f(D)){var Y=Math.floor(K/i)+l,$=Math.floor(h(O,i));try{V=u.getComponentMethod("calendars","getCal")(D).fromJD(Y).formatDate("yyyy-mm-dd")}catch{V=d("G%Y-%m-%d")(new Date(K))}if(V.charAt(0)==="-")for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;j=X<y?Math.floor($/n):0,B=X<y?Math.floor($%n/r):0,W=X<v?Math.floor($%r/s):0,q=X<M?$%s*10+ee:0}else re=new Date(K),V=d("%Y-%m-%d")(re),j=X<y?re.getUTCHours():0,B=X<y?re.getUTCMinutes():0,W=X<v?re.getUTCSeconds():0,q=X<M?10*re.getUTCMilliseconds()+ee:0;return p(V,j,B,W,q)},L.ms2DateTimeLocal=function(O){if(!(O>=T+i&&O<=b-i))return t;var X=Math.floor(10*h(O+.05,1)),D=new Date(Math.round(O-X/10));return p(a("%Y-%m-%d")(D),D.getHours(),D.getMinutes(),D.getSeconds(),10*D.getUTCMilliseconds()+X)},L.cleanDate=function(O,X,D){if(O===t)return X;if(L.isJSDate(O)||typeof O=="number"&&isFinite(O)){if(f(D))return g.error("JS Dates and milliseconds are incompatible with world calendars",O),X;if(!(O=L.ms2DateTimeLocal(+O))&&X!==void 0)return X}else if(!L.isDateTime(O,D))return g.error("unrecognized date",O),X;return O};var S=/%\d?f/g,A=/%h/g,k={1:"1",2:"1",3:"2",4:"2"};function C(O,X,D,V){O=O.replace(S,function(B){var W=Math.min(+B.charAt(1)||6,6);return(X/1e3%1+2).toFixed(W).substr(2).replace(/0+$/,"")||"0"});var j=new Date(Math.floor(X+.05));if(O=O.replace(A,function(){return k[D("%q")(j)]}),f(V))try{O=u.getComponentMethod("calendars","worldCalFmt")(O,X,V)}catch{return"Invalid"}return D(O)(j)}var P=[59,59.9,59.99,59.999,59.9999];L.formatDate=function(O,X,D,V,j,B){if(j=f(j)&&j,!X)if(D==="y")X=B.year;else if(D==="m")X=B.month;else{if(D!=="d")return function(W,q){var re=h(W+.05,i),ee=x(Math.floor(re/n),2)+":"+x(h(Math.floor(re/r),60),2);if(q!=="M"){_(q)||(q=0);var K=(100+Math.min(h(W/s,60),P[q])).toFixed(q).substr(1);q>0&&(K=K.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+K}return ee}(O,D)+`
`+C(B.dayMonthYear,O,V,j);X=B.dayMonth+`
`+B.year}return C(X,O,V,j)};var R=3*i;L.incrementMonth=function(O,X,D){D=f(D)&&D;var V=h(O,i);if(O=Math.round(O-V),D)try{var j=Math.round(O/i)+l,B=u.getComponentMethod("calendars","getCal")(D),W=B.fromJD(j);return X%12?B.add(W,X,"m"):B.add(W,X/12,"y"),(W.toJD()-l)*i+V}catch{g.error("invalid ms "+O+" in calendar "+D)}var q=new Date(O+R);return q.setUTCMonth(q.getUTCMonth()+X)+V-R},L.findExactDates=function(O,X){for(var D,V,j=0,B=0,W=0,q=0,re=f(X)&&u.getComponentMethod("calendars","getCal")(X),ee=0;ee<O.length;ee++)if(V=O[ee],_(V)){if(!(V%i))if(re)try{(D=re.fromJD(V/i+l)).day()===1?D.month()===1?j++:B++:W++}catch{}else(D=new Date(V)).getUTCDate()===1?D.getUTCMonth()===0?j++:B++:W++}else q++;W+=B+=j;var K=O.length-q;return{exactYears:j/K,exactMonths:B/K,exactDays:W/K}}},24401:function(F,L,e){var T=e(39898),b=e(47769),a=e(35657),_=e(79576);function g(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function h(n,r,s){var l="plotly.js-style-"+n,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var d=u.sheet;d.insertRule?d.insertRule(r+"{"+s+"}",0):d.addRule?d.addRule(r,s,0):b.warn("addStyleRule failed")}function o(n){var r=window.getComputedStyle(n,null),s=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return s==="none"?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var r=[];i(n);)r.push(n),n=n.parentNode;return r}function i(n){return n&&(n instanceof Element||n instanceof HTMLElement)}F.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=T.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:g,addStyleRule:function(n,r){h("global",n,r)},addRelatedStyleRule:h,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,s=document.getElementById(r);s&&g(s)},getFullTransformMatrix:function(n){var r=t(n),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(l){var u=o(l);if(u){var d=a.convertCssMatrix(u);s=_.multiply(s,s,d)}}),s},getElementTransformMatrix:o,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},11086:function(F,L,e){var T=e(15398).EventEmitter,b={init:function(a){if(a._ev instanceof T)return a;var _=new T,g=new T;return a._ev=_,a._internalEv=g,a.on=_.on.bind(_),a.once=_.once.bind(_),a.removeListener=_.removeListener.bind(_),a.removeAllListeners=_.removeAllListeners.bind(_),a._internalOn=g.on.bind(g),a._internalOnce=g.once.bind(g),a._removeInternalListener=g.removeListener.bind(g),a._removeAllInternalListeners=g.removeAllListeners.bind(g),a.emit=function(h,o){typeof jQuery<"u"&&jQuery(a).trigger(h,o),_.emit(h,o),g.emit(h,o)},a},triggerHandler:function(a,_,g){var h,o;typeof jQuery<"u"&&(h=jQuery(a).triggerHandler(_,g));var t=a._ev;if(!t)return h;var i,n=t._events[_];if(!n)return h;function r(s){return s.listener?(t.removeListener(_,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(t,[g]))):s.apply(t,[g])}for(n=Array.isArray(n)?n:[n],i=0;i<n.length-1;i++)r(n[i]);return o=r(n[i]),h!==void 0?h:o},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};F.exports=b},1426:function(F,L,e){var T=e(41965),b=Array.isArray;function a(_,g,h,o){var t,i,n,r,s,l,u,d=_[0],c=_.length;if(c===2&&b(d)&&b(_[1])&&d.length===0){if(u=function(m,f){var x,y;for(x=0;x<m.length;x++){if((y=m[x])!==null&&typeof y=="object")return!1;y!==void 0&&(f[x]=y)}return!0}(_[1],d),u)return d;d.splice(0,d.length)}for(var w=1;w<c;w++)for(i in t=_[w])n=d[i],r=t[i],o&&b(r)?d[i]=r:g&&r&&(T(r)||(s=b(r)))?(s?(s=!1,l=n&&b(n)?n:[]):l=n&&T(n)?n:{},d[i]=a([l,r],g,h,o)):(r!==void 0||h)&&(d[i]=r);return d}L.extendFlat=function(){return a(arguments,!1,!1,!1)},L.extendDeep=function(){return a(arguments,!0,!1,!1)},L.extendDeepAll=function(){return a(arguments,!0,!0,!1)},L.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},75744:function(F){F.exports=function(L){for(var e={},T=[],b=0,a=0;a<L.length;a++){var _=L[a];e[_]!==1&&(e[_]=1,T[b++]=_)}return T}},76756:function(F){function L(T){return T.visible===!0}function e(T){var b=T[0].trace;return b.visible===!0&&b._length!==0}F.exports=function(T){for(var b,a=(b=T,Array.isArray(b)&&Array.isArray(b[0])&&b[0][0]&&b[0][0].trace?e:L),_=[],g=0;g<T.length;g++){var h=T[g];a(h)&&_.push(h)}return _}},41327:function(F,L,e){var T=e(39898),b=e(24138),a=e(30774),_=e(29261),g=e(85268),h=e(23389),o=e(47769),t=e(41965),i=e(65487),n=e(61082),r=Object.keys(b),s={"ISO-3":h,"USA-states":h,"country names":function(u){for(var d=0;d<r.length;d++){var c=r[d];if(new RegExp(b[c]).test(u.trim().toLowerCase()))return c}return o.log("Unrecognized country name: "+u+"."),!1}};function l(u){var d=u.geojson,c=window.PlotlyGeoAssets||{},w=typeof d=="string"?c[d]:d;return t(w)?w:(o.error("Oops ... something went wrong when fetching "+d),!1)}F.exports={locationToFeature:function(u,d,c){if(!d||typeof d!="string")return!1;var w,m,f,x=s[u](d);if(x){if(u==="USA-states")for(w=[],f=0;f<c.length;f++)(m=c[f]).properties&&m.properties.gu&&m.properties.gu==="USA"&&w.push(m);else w=c;for(f=0;f<w.length;f++)if((m=w[f]).id===x)return m;o.log(["Location with id",x,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var d,c,w,m,f=u.geometry,x=f.coordinates,y=u.id,v=[];function M(p){for(var S=0;S<p.length-1;S++)if(p[S][0]>0&&p[S+1][0]<0)return S;return null}switch(d=y==="RUS"||y==="FJI"?function(p){var S;if(M(p)===null)S=p;else for(S=new Array(p.length),m=0;m<p.length;m++)S[m]=[p[m][0]<0?p[m][0]+360:p[m][0],p[m][1]];v.push(n.tester(S))}:y==="ATA"?function(p){var S=M(p);if(S===null)return v.push(n.tester(p));var A=new Array(p.length+1),k=0;for(m=0;m<p.length;m++)m>S?A[k++]=[p[m][0]+360,p[m][1]]:m===S?(A[k++]=p[m],A[k++]=[p[m][0],-90]):A[k++]=p[m];var C=n.tester(A);C.pts.pop(),v.push(C)}:function(p){v.push(n.tester(p))},f.type){case"MultiPolygon":for(c=0;c<x.length;c++)for(w=0;w<x[c].length;w++)d(x[c][w]);break;case"Polygon":for(c=0;c<x.length;c++)d(x[c])}return v},getTraceGeojson:l,extractTraceFeature:function(u){var d=u[0].trace,c=l(d);if(!c)return!1;var w,m={},f=[];for(w=0;w<d._length;w++){var x=u[w];(x.loc||x.loc===0)&&(m[x.loc]=x)}function y(p){var S=i(p,d.featureidkey||"id").get(),A=m[S];if(A){var k=p.geometry;if(k.type==="Polygon"||k.type==="MultiPolygon"){var C={type:"Feature",id:S,geometry:k,properties:{}};C.properties.ct=function(P){var R,O=P.geometry;if(O.type==="MultiPolygon")for(var X=O.coordinates,D=0,V=0;V<X.length;V++){var j={type:"Polygon",coordinates:X[V]},B=a.default(j);B>D&&(D=B,R=j)}else R=O;return _.default(R).geometry.coordinates}(C),A.fIn=p,A.fOut=C,f.push(C)}else o.log(["Location",A.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete m[S]}switch(c.type){case"FeatureCollection":var v=c.features;for(w=0;w<v.length;w++)y(v[w]);break;case"Feature":y(c);break;default:return o.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var M in m)o.log(["Location *"+M+"*","does not have a matching feature with id-key","*"+d.featureidkey+"*."].join(" "));return f},fetchTraceGeoData:function(u){var d=window.PlotlyGeoAssets||{},c=[];function w(y){return new Promise(function(v,M){T.json(y,function(p,S){if(p){delete d[y];var A=p.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return M(new Error(A))}return d[y]=S,v(S)})})}function m(y){return new Promise(function(v,M){var p=0,S=setInterval(function(){return d[y]&&d[y]!=="pending"?(clearInterval(S),v(d[y])):p>100?(clearInterval(S),M("Unexpected error while fetching from "+y)):void p++},50)})}for(var f=0;f<u.length;f++){var x=u[f][0].trace.geojson;typeof x=="string"&&(d[x]?d[x]==="pending"&&c.push(m(x)):(d[x]="pending",c.push(w(x))))}return c},computeBbox:function(u){return g.default(u)}}},18214:function(F,L,e){var T=e(50606).BADNUM;L.calcTraceToLineCoords=function(b){for(var a=b[0].trace.connectgaps,_=[],g=[],h=0;h<b.length;h++){var o=b[h].lonlat;o[0]!==T?g.push(o):!a&&g.length>0&&(_.push(g),g=[])}return g.length>0&&_.push(g),_},L.makeLine=function(b){return b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b}},L.makePolygon=function(b){if(b.length===1)return{type:"Polygon",coordinates:b};for(var a=new Array(b.length),_=0;_<b.length;_++)a[_]=[b[_]];return{type:"MultiPolygon",coordinates:a}},L.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(F,L,e){var T,b,a,_=e(64872).mod;function g(o,t,i,n,r,s,l,u){var d=i-o,c=r-o,w=l-r,m=n-t,f=s-t,x=u-s,y=d*x-w*m;if(y===0)return null;var v=(c*x-w*f)/y,M=(c*m-d*f)/y;return M<0||M>1||v<0||v>1?null:{x:o+d*v,y:t+m*v}}function h(o,t,i,n,r){var s=n*o+r*t;if(s<0)return n*n+r*r;if(s>i){var l=n-o,u=r-t;return l*l+u*u}var d=n*t-r*o;return d*d/i}L.segmentsIntersect=g,L.segmentDistance=function(o,t,i,n,r,s,l,u){if(g(o,t,i,n,r,s,l,u))return 0;var d=i-o,c=n-t,w=l-r,m=u-s,f=d*d+c*c,x=w*w+m*m,y=Math.min(h(d,c,f,r-o,s-t),h(d,c,f,l-o,u-t),h(w,m,x,o-r,t-s),h(w,m,x,i-r,n-s));return Math.sqrt(y)},L.getTextLocation=function(o,t,i,n){if(o===b&&n===a||(T={},b=o,a=n),T[i])return T[i];var r=o.getPointAtLength(_(i-n/2,t)),s=o.getPointAtLength(_(i+n/2,t)),l=Math.atan((s.y-r.y)/(s.x-r.x)),u=o.getPointAtLength(_(i,t)),d={x:(4*u.x+r.x+s.x)/6,y:(4*u.y+r.y+s.y)/6,theta:l};return T[i]=d,d},L.clearLocationCache=function(){b=null},L.getVisibleSegment=function(o,t,i){var n,r,s=t.left,l=t.right,u=t.top,d=t.bottom,c=0,w=o.getTotalLength(),m=w;function f(y){var v=o.getPointAtLength(y);y===0?n=v:y===w&&(r=v);var M=v.x<s?s-v.x:v.x>l?v.x-l:0,p=v.y<u?u-v.y:v.y>d?v.y-d:0;return Math.sqrt(M*M+p*p)}for(var x=f(c);x;){if((c+=x+i)>m)return;x=f(c)}for(x=f(m);x;){if(c>(m-=x+i))return;x=f(m)}return{min:c,max:m,len:m-c,total:w,isClosed:c===0&&m===w&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},L.findPointOnPath=function(o,t,i,n){for(var r,s,l,u=(n=n||{}).pathLength||o.getTotalLength(),d=n.tolerance||.001,c=n.iterationLimit||30,w=o.getPointAtLength(0)[i]>o.getPointAtLength(u)[i]?-1:1,m=0,f=0,x=u;m<c;){if(r=(f+x)/2,l=(s=o.getPointAtLength(r))[i]-t,Math.abs(l)<d)return s;w*l>0?x=r:f=r,m++}return s}},81697:function(F,L,e){var T=e(92770),b=e(84267),a=e(25075),_=e(21081),g=e(22399).defaultLine,h=e(73627).isArrayOrTypedArray,o=a(g);function t(r,s){var l=r;return l[3]*=s,l}function i(r){if(T(r))return o;var s=a(r);return s.length?s:o}function n(r){return T(r)?r:1}F.exports={formatColor:function(r,s,l){var u,d,c,w,m,f=r.color,x=h(f),y=h(s),v=_.extractOpts(r),M=[];if(u=v.colorscale!==void 0?_.makeColorScaleFuncFromTrace(r):i,d=x?function(S,A){return S[A]===void 0?o:a(u(S[A]))}:i,c=y?function(S,A){return S[A]===void 0?1:n(S[A])}:n,x||y)for(var p=0;p<l;p++)w=d(f,p),m=c(s,p),M[p]=t(w,m);else M=t(a(f),s);return M},parseColorScale:function(r){var s=_.extractOpts(r),l=s.colorscale;return s.reversescale&&(l=_.flipScale(s.colorscale)),l.map(function(u){var d=u[0],c=b(u[1]).toRgb();return{index:d,rgb:[c.r,c.g,c.b,c.a]}})}}},28984:function(F,L,e){var T=e(23389);function b(a){return[a]}F.exports={keyFun:function(a){return a.key},repeat:b,descend:T,wrap:b,unwrap:function(a){return a[0]}}},23389:function(F){F.exports=function(L){return L}},39240:function(F){F.exports=function(L,e){if(!e)return L;var T=1/Math.abs(e),b=T>1?(T*L+T*e)/T:L+e,a=String(b).length;if(a>16){var _=String(e).length;if(a>=String(L).length+_){var g=parseFloat(b).toPrecision(12);g.indexOf("e+")===-1&&(b=+g)}}return b}},71828:function(F,L,e){var T=e(39898),b=e(84096).g0,a=e(60721).WU,_=e(92770),g=e(50606),h=g.FP_SAFE,o=-h,t=g.BADNUM,i=F.exports={};i.adjustFormat=function(Y){return!Y||/^\d[.]\df/.test(Y)||/[.]\d%/.test(Y)?Y:Y==="0.f"?"~f":/^\d%/.test(Y)?"~%":/^\ds/.test(Y)?"~s":!/^[~,.0$]/.test(Y)&&/[&fps]/.test(Y)?"~"+Y:Y};var n={};i.warnBadFormat=function(Y){var $=String(Y);n[$]||(n[$]=1,i.warn('encountered bad format: "'+$+'"'))},i.noFormat=function(Y){return String(Y)},i.numberFormat=function(Y){var $;try{$=a(i.adjustFormat(Y))}catch{return i.warnBadFormat(Y),i.noFormat}return $},i.nestedProperty=e(65487),i.keyedContainer=e(66636),i.relativeAttr=e(6962),i.isPlainObject=e(41965),i.toLogRange=e(58163),i.relinkPrivateKeys=e(51332);var r=e(73627);i.isTypedArray=r.isTypedArray,i.isArrayOrTypedArray=r.isArrayOrTypedArray,i.isArray1D=r.isArray1D,i.ensureArray=r.ensureArray,i.concat=r.concat,i.maxRowLength=r.maxRowLength,i.minRowLength=r.minRowLength;var s=e(64872);i.mod=s.mod,i.modHalf=s.modHalf;var l=e(96554);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var u=e(41631);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var d=e(65888);i.findBin=d.findBin,i.sorterAsc=d.sorterAsc,i.sorterDes=d.sorterDes,i.distinctVals=d.distinctVals,i.roundUp=d.roundUp,i.sort=d.sort,i.findIndexOfMin=d.findIndexOfMin,i.sortObjectKeys=e(78607);var c=e(80038);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var w=e(35657);i.init2dArray=w.init2dArray,i.transposeRagged=w.transposeRagged,i.dot=w.dot,i.translationMatrix=w.translationMatrix,i.rotationMatrix=w.rotationMatrix,i.rotationXYMatrix=w.rotationXYMatrix,i.apply3DTransform=w.apply3DTransform,i.apply2DTransform=w.apply2DTransform,i.apply2DTransform2=w.apply2DTransform2,i.convertCssMatrix=w.convertCssMatrix,i.inverseTransformMatrix=w.inverseTransformMatrix;var m=e(26348);i.deg2rad=m.deg2rad,i.rad2deg=m.rad2deg,i.angleDelta=m.angleDelta,i.angleDist=m.angleDist,i.isFullCircle=m.isFullCircle,i.isAngleInsideSector=m.isAngleInsideSector,i.isPtInsideSector=m.isPtInsideSector,i.pathArc=m.pathArc,i.pathSector=m.pathSector,i.pathAnnulus=m.pathAnnulus;var f=e(99863);i.isLeftAnchor=f.isLeftAnchor,i.isCenterAnchor=f.isCenterAnchor,i.isRightAnchor=f.isRightAnchor,i.isTopAnchor=f.isTopAnchor,i.isMiddleAnchor=f.isMiddleAnchor,i.isBottomAnchor=f.isBottomAnchor;var x=e(87642);i.segmentsIntersect=x.segmentsIntersect,i.segmentDistance=x.segmentDistance,i.getTextLocation=x.getTextLocation,i.clearLocationCache=x.clearLocationCache,i.getVisibleSegment=x.getVisibleSegment,i.findPointOnPath=x.findPointOnPath;var y=e(1426);i.extendFlat=y.extendFlat,i.extendDeep=y.extendDeep,i.extendDeepAll=y.extendDeepAll,i.extendDeepNoArrays=y.extendDeepNoArrays;var v=e(47769);i.log=v.log,i.warn=v.warn,i.error=v.error;var M=e(30587);i.counterRegex=M.counter;var p=e(79990);i.throttle=p.throttle,i.throttleDone=p.done,i.clearThrottle=p.clear;var S=e(24401);function A(Y){var $={};for(var ne in Y)for(var ae=Y[ne],se=0;se<ae.length;se++)$[ae[se]]=+ne;return $}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(86367),i.preserveDrawingBuffer=e(45142),i.makeTraceGroups=e(77310),i._=e(15867),i.notifier=e(75046),i.filterUnique=e(75744),i.filterVisible=e(76756),i.pushUnique=e(75138),i.increment=e(39240),i.cleanNumber=e(95218),i.ensureNumber=function(Y){return _(Y)?(Y=Number(Y))>h||Y<o?t:Y:t},i.isIndex=function(Y,$){return!($!==void 0&&Y>=$)&&_(Y)&&Y>=0&&Y%1==0},i.noop=e(64213),i.identity=e(23389),i.repeat=function(Y,$){for(var ne=new Array($),ae=0;ae<$;ae++)ne[ae]=Y;return ne},i.swapAttrs=function(Y,$,ne,ae){ne||(ne="x"),ae||(ae="y");for(var se=0;se<$.length;se++){var ce=$[se],me=i.nestedProperty(Y,ce.replace("?",ne)),ye=i.nestedProperty(Y,ce.replace("?",ae)),Te=me.get();me.set(ye.get()),ye.set(Te)}},i.raiseToTop=function(Y){Y.parentNode.appendChild(Y)},i.cancelTransition=function(Y){return Y.transition().duration(0)},i.constrain=function(Y,$,ne){return $>ne?Math.max(ne,Math.min($,Y)):Math.max($,Math.min(ne,Y))},i.bBoxIntersect=function(Y,$,ne){return ne=ne||0,Y.left<=$.right+ne&&$.left<=Y.right+ne&&Y.top<=$.bottom+ne&&$.top<=Y.bottom+ne},i.simpleMap=function(Y,$,ne,ae,se){for(var ce=Y.length,me=new Array(ce),ye=0;ye<ce;ye++)me[ye]=$(Y[ye],ne,ae,se);return me},i.randstr=function Y($,ne,ae,se){if(ae||(ae=16),ne===void 0&&(ne=24),ne<=0)return"0";var ce,me,ye=Math.log(Math.pow(2,ne))/Math.log(ae),Te="";for(ce=2;ye===1/0;ce*=2)ye=Math.log(Math.pow(2,ne/ce))/Math.log(ae)*ce;var Ce=ye-Math.floor(ye);for(ce=0;ce<Math.floor(ye);ce++)Te=Math.floor(Math.random()*ae).toString(ae)+Te;Ce&&(me=Math.pow(ae,Ce),Te=Math.floor(Math.random()*me).toString(ae)+Te);var pe=parseInt(Te,ae);return $&&$[Te]||pe!==1/0&&pe>=Math.pow(2,ne)?se>10?(i.warn("randstr failed uniqueness"),Te):Y($,ne,ae,(se||0)+1):Te},i.OptionControl=function(Y,$){Y||(Y={}),$||($="opt");var ne={optionList:[],_newoption:function(ae){ae[$]=Y,ne[ae.name]=ae,ne.optionList.push(ae)}};return ne["_"+$]=Y,ne},i.smooth=function(Y,$){if(($=Math.round($)||0)<2)return Y;var ne,ae,se,ce,me=Y.length,ye=2*me,Te=2*$-1,Ce=new Array(Te),pe=new Array(me);for(ne=0;ne<Te;ne++)Ce[ne]=(1-Math.cos(Math.PI*(ne+1)/$))/(2*$);for(ne=0;ne<me;ne++){for(ce=0,ae=0;ae<Te;ae++)(se=ne+ae+1-$)<-me?se-=ye*Math.round(se/ye):se>=ye&&(se-=ye*Math.floor(se/ye)),se<0?se=-1-se:se>=me&&(se=ye-1-se),ce+=Y[se]*Ce[ae];pe[ne]=ce}return pe},i.syncOrAsync=function(Y,$,ne){var ae;function se(){return i.syncOrAsync(Y,$,ne)}for(;Y.length;)if((ae=(0,Y.splice(0,1)[0])($))&&ae.then)return ae.then(se);return ne&&ne($)},i.stripTrailingSlash=function(Y){return Y.substr(-1)==="/"?Y.substr(0,Y.length-1):Y},i.noneOrAll=function(Y,$,ne){if(Y){var ae,se=!1,ce=!0;for(ae=0;ae<ne.length;ae++)Y[ne[ae]]!=null?se=!0:ce=!1;if(se&&!ce)for(ae=0;ae<ne.length;ae++)Y[ne[ae]]=$[ne[ae]]}},i.mergeArray=function(Y,$,ne,ae){var se=typeof ae=="function";if(i.isArrayOrTypedArray(Y))for(var ce=Math.min(Y.length,$.length),me=0;me<ce;me++){var ye=Y[me];$[me][ne]=se?ae(ye):ye}},i.mergeArrayCastPositive=function(Y,$,ne){return i.mergeArray(Y,$,ne,function(ae){var se=+ae;return isFinite(se)&&se>0?se:0})},i.fillArray=function(Y,$,ne,ae){if(ae=ae||i.identity,i.isArrayOrTypedArray(Y))for(var se=0;se<$.length;se++)$[se][ne]=ae(Y[se])},i.castOption=function(Y,$,ne,ae){ae=ae||i.identity;var se=i.nestedProperty(Y,ne).get();return i.isArrayOrTypedArray(se)?Array.isArray($)&&i.isArrayOrTypedArray(se[$[0]])?ae(se[$[0]][$[1]]):ae(se[$]):se},i.extractOption=function(Y,$,ne,ae){if(ne in Y)return Y[ne];var se=i.nestedProperty($,ae).get();return Array.isArray(se)?void 0:se},i.tagSelected=function(Y,$,ne){var ae,se,ce=$.selectedpoints,me=$._indexToPoints;me&&(ae=A(me));for(var ye=0;ye<ce.length;ye++){var Te=ce[ye];if(i.isIndex(Te)||i.isArrayOrTypedArray(Te)&&i.isIndex(Te[0])&&i.isIndex(Te[1])){var Ce=ae?ae[Te]:Te,pe=ne?ne[Ce]:Ce;(se=pe)!==void 0&&se<Y.length&&(Y[pe].selected=1)}}},i.selIndices2selPoints=function(Y){var $=Y.selectedpoints,ne=Y._indexToPoints;if(ne){for(var ae=A(ne),se=[],ce=0;ce<$.length;ce++){var me=$[ce];if(i.isIndex(me)){var ye=ae[me];i.isIndex(ye)&&se.push(ye)}}return se}return $},i.getTargetArray=function(Y,$){var ne=$.target;if(typeof ne=="string"&&ne){var ae=i.nestedProperty(Y,ne).get();return!!Array.isArray(ae)&&ae}return!!Array.isArray(ne)&&ne},i.minExtend=function Y($,ne,ae){var se={};typeof ne!="object"&&(ne={});var ce,me,ye,Te=ae==="pieLike"?-1:3,Ce=Object.keys($);for(ce=0;ce<Ce.length;ce++)ye=$[me=Ce[ce]],me.charAt(0)!=="_"&&typeof ye!="function"&&(me==="module"?se[me]=ye:Array.isArray(ye)?se[me]=me==="colorscale"||Te===-1?ye.slice():ye.slice(0,Te):i.isTypedArray(ye)?se[me]=Te===-1?ye.subarray():ye.subarray(0,Te):se[me]=ye&&typeof ye=="object"?Y($[me],ne[me],ae):ye);for(Ce=Object.keys(ne),ce=0;ce<Ce.length;ce++)typeof(ye=ne[me=Ce[ce]])=="object"&&me in se&&typeof se[me]=="object"||(se[me]=ye);return se},i.titleCase=function(Y){return Y.charAt(0).toUpperCase()+Y.substr(1)},i.containsAny=function(Y,$){for(var ne=0;ne<$.length;ne++)if(Y.indexOf($[ne])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var k=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return k.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;i.isIOS=function(){return C.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var Y=P.exec(window.navigator.userAgent);if(Y&&Y.length===2){var $=parseInt(Y[1]);if(!isNaN($))return $}return null},i.isD3Selection=function(Y){return Y instanceof T.selection},i.ensureSingle=function(Y,$,ne,ae){var se=Y.select($+(ne?"."+ne:""));if(se.size())return se;var ce=Y.append($);return ne&&ce.classed(ne,!0),ae&&ce.call(ae),ce},i.ensureSingleById=function(Y,$,ne,ae){var se=Y.select($+"#"+ne);if(se.size())return se;var ce=Y.append($).attr("id",ne);return ae&&ce.call(ae),ce},i.objectFromPath=function(Y,$){for(var ne,ae=Y.split("."),se=ne={},ce=0;ce<ae.length;ce++){var me=ae[ce],ye=null,Te=ae[ce].match(/(.*)\[([0-9]+)\]/);Te?(me=Te[1],ye=Te[2],ne=ne[me]=[],ce===ae.length-1?ne[ye]=$:ne[ye]={},ne=ne[ye]):(ce===ae.length-1?ne[me]=$:ne[me]={},ne=ne[me])}return se};var R=/^([^\[\.]+)\.(.+)?/,O=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(Y){var $,ne,ae,se,ce,me,ye;if(typeof Y=="object"&&!Array.isArray(Y))for(ne in Y)Y.hasOwnProperty(ne)&&(($=ne.match(R))?(se=Y[ne],ae=$[1],delete Y[ne],Y[ae]=i.extendDeepNoArrays(Y[ae]||{},i.objectFromPath(ne,i.expandObjectPaths(se))[ae])):($=ne.match(O))?(se=Y[ne],ae=$[1],ce=parseInt($[2]),delete Y[ne],Y[ae]=Y[ae]||[],$[3]==="."?(ye=$[4],me=Y[ae][ce]=Y[ae][ce]||{},i.extendDeepNoArrays(me,i.objectFromPath(ye,i.expandObjectPaths(se)))):Y[ae][ce]=i.expandObjectPaths(se)):Y[ne]=i.expandObjectPaths(Y[ne]));return Y},i.numSeparate=function(Y,$,ne){if(ne||(ne=!1),typeof $!="string"||$.length===0)throw new Error("Separator string required for formatting!");typeof Y=="number"&&(Y=String(Y));var ae=/(\d+)(\d{3})/,se=$.charAt(0),ce=$.charAt(1),me=Y.split("."),ye=me[0],Te=me.length>1?se+me[1]:"";if(ce&&(me.length>1||ye.length>4||ne))for(;ae.test(ye);)ye=ye.replace(ae,"$1"+ce+"$2");return ye+Te},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var X=/^\w*$/;i.templateString=function(Y,$){var ne={};return Y.replace(i.TEMPLATE_STRING_REGEX,function(ae,se){var ce;return X.test(se)?ce=$[se]:(ne[se]=ne[se]||i.nestedProperty($,se).get,ce=ne[se]()),i.isValidTextValue(ce)?ce:""})};var D={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return q.apply(D,arguments)};var V={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return q.apply(V,arguments)};var j=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,B={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return q.apply(B,arguments)};var W=/^[:|\|]/;function q(Y,$,ne){var ae=this,se=arguments;$||($={});var ce={};return Y.replace(i.TEMPLATE_STRING_REGEX,function(me,ye,Te){var Ce=ye==="_xother"||ye==="_yother",pe=ye==="_xother_"||ye==="_yother_",fe=ye==="xother_"||ye==="yother_",Oe=ye==="xother"||ye==="yother"||Ce||fe||pe,Se=ye;(Ce||pe)&&(Se=Se.substring(1)),(fe||pe)&&(Se=Se.substring(0,Se.length-1));var Me,ue,le,ie=null,ge=null;if(ae.parseMultDiv){var Ae=function(de){var Le=de.match(j);return Le?{key:Le[1],op:Le[2],number:Number(Le[3])}:{key:de,op:null,number:null}}(Se);Se=Ae.key,ie=Ae.op,ge=Ae.number}if(Oe){if((Me=$[Se])===void 0)return""}else for(le=3;le<se.length;le++)if(ue=se[le]){if(ue.hasOwnProperty(Se)){Me=ue[Se];break}if(X.test(Se)||(Me=i.nestedProperty(ue,Se).get(),(Me=ce[Se]||i.nestedProperty(ue,Se).get())&&(ce[Se]=Me)),Me!==void 0)break}if(Me!==void 0&&(ie==="*"&&(Me*=ge),ie==="/"&&(Me/=ge)),Me===void 0&&ae)return ae.count<ae.max&&(i.warn("Variable '"+Se+"' in "+ae.name+" could not be found!"),Me=me),ae.count===ae.max&&i.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,me;if(Te){var we;if(Te[0]===":"&&(Me=(we=ne?ne.numberFormat:i.numberFormat)(Te.replace(W,""))(Me)),Te[0]==="|"){we=ne?ne.timeFormat:b;var Ne=i.dateTime2ms(Me);Me=i.formatDate(Ne,Te.replace(W,""),!1,we)}}else{var He=Se+"Label";$.hasOwnProperty(He)&&(Me=$[He])}return Oe&&(Me="("+Me+")",(Ce||pe)&&(Me=" "+Me),(fe||pe)&&(Me+=" ")),Me})}i.subplotSort=function(Y,$){for(var ne=Math.min(Y.length,$.length)+1,ae=0,se=0,ce=0;ce<ne;ce++){var me=Y.charCodeAt(ce)||0,ye=$.charCodeAt(ce)||0,Te=me>=48&&me<=57,Ce=ye>=48&&ye<=57;if(Te&&(ae=10*ae+me-48),Ce&&(se=10*se+ye-48),!Te||!Ce){if(ae!==se)return ae-se;if(me!==ye)return me-ye}}return se-ae};var re=2e9;i.seedPseudoRandom=function(){re=2e9},i.pseudoRandom=function(){var Y=re;return re=(69069*re+1)%4294967296,Math.abs(re-Y)<429496729?i.pseudoRandom():re/4294967296},i.fillText=function(Y,$,ne){var ae=Array.isArray(ne)?function(me){ne.push(me)}:function(me){ne.text=me},se=i.extractOption(Y,$,"htx","hovertext");if(i.isValidTextValue(se))return ae(se);var ce=i.extractOption(Y,$,"tx","text");return i.isValidTextValue(ce)?ae(ce):void 0},i.isValidTextValue=function(Y){return Y||Y===0},i.formatPercent=function(Y,$){$=$||0;for(var ne=(Math.round(100*Y*Math.pow(10,$))*Math.pow(.1,$)).toFixed($)+"%",ae=0;ae<$;ae++)ne.indexOf(".")!==-1&&(ne=(ne=ne.replace("0%","%")).replace(".%","%"));return ne},i.isHidden=function(Y){var $=window.getComputedStyle(Y).display;return!$||$==="none"},i.strTranslate=function(Y,$){return Y||$?"translate("+Y+","+$+")":""},i.strRotate=function(Y){return Y?"rotate("+Y+")":""},i.strScale=function(Y){return Y!==1?"scale("+Y+")":""},i.getTextTransform=function(Y){var $=Y.noCenter,ne=Y.textX,ae=Y.textY,se=Y.targetX,ce=Y.targetY,me=Y.anchorX||0,ye=Y.anchorY||0,Te=Y.rotate,Ce=Y.scale;return Ce?Ce>1&&(Ce=1):Ce=0,i.strTranslate(se-Ce*(ne+me),ce-Ce*(ae+ye))+i.strScale(Ce)+(Te?"rotate("+Te+($?"":" "+ne+" "+ae)+")":"")},i.setTransormAndDisplay=function(Y,$){Y.attr("transform",i.getTextTransform($)),Y.style("display",$.scale?null:"none")},i.ensureUniformFontSize=function(Y,$){var ne=i.extendFlat({},$);return ne.size=Math.max($.size,Y._fullLayout.uniformtext.minsize||0),ne},i.join2=function(Y,$,ne){var ae=Y.length;return ae>1?Y.slice(0,-1).join($)+ne+Y[ae-1]:Y.join($)},i.bigFont=function(Y){return Math.round(1.2*Y)};var ee=i.getFirefoxVersion(),K=ee!==null&&ee<86;i.getPositionFromD3Event=function(){return K?[T.event.layerX,T.event.layerY]:[T.event.offsetX,T.event.offsetY]}},41965:function(F){F.exports=function(L){return window&&window.process&&window.process.versions?Object.prototype.toString.call(L)==="[object Object]":Object.prototype.toString.call(L)==="[object Object]"&&Object.getPrototypeOf(L).hasOwnProperty("hasOwnProperty")}},66636:function(F,L,e){var T=e(65487),b=/^\w*$/;F.exports=function(a,_,g,h){var o,t,i;g=g||"name",h=h||"value";var n={};_&&_.length?(i=T(a,_),t=i.get()):t=a,_=_||"";var r={};if(t)for(o=0;o<t.length;o++)r[t[o][g]]=o;var s=b.test(h),l={set:function(u,d){var c=d===null?4:0;if(!t){if(!i||c===4)return;t=[],i.set(t)}var w=r[u];if(w===void 0){if(c===4)return;c|=3,w=t.length,r[u]=w}else d!==(s?t[w][h]:T(t[w],h).get())&&(c|=2);var m=t[w]=t[w]||{};return m[g]=u,s?m[h]=d:T(m,h).set(d),d!==null&&(c&=-5),n[w]=n[w]|c,l},get:function(u){if(t){var d=r[u];return d===void 0?void 0:s?t[d][h]:T(t[d],h).get()}},rename:function(u,d){var c=r[u];return c===void 0||(n[c]=1|n[c],r[d]=c,delete r[u],t[c][g]=d),l},remove:function(u){var d=r[u];if(d===void 0)return l;var c=t[d];if(Object.keys(c).length>2)return n[d]=2|n[d],l.set(u,null);if(s){for(o=d;o<t.length;o++)n[o]=3|n[o];for(o=d;o<t.length;o++)r[t[o][g]]--;t.splice(d,1),delete r[u]}else T(c,h).set(null),n[d]=6|n[d];return l},constructUpdate:function(){for(var u,d,c={},w=Object.keys(n),m=0;m<w.length;m++)d=w[m],u=_+"["+d+"]",t[d]?(1&n[d]&&(c[u+"."+g]=t[d][g]),2&n[d]&&(c[u+"."+h]=s?4&n[d]?null:t[d][h]:4&n[d]?null:T(t[d],h).get())):c[u]=null;return c}};return l}},15867:function(F,L,e){var T=e(73972);F.exports=function(b,a){for(var _=b._context.locale,g=0;g<2;g++){for(var h=b._context.locales,o=0;o<2;o++){var t=(h[_]||{}).dictionary;if(t){var i=t[a];if(i)return i}h=T.localeRegistry}var n=_.split("-")[0];if(n===_)break;_=n}return a}},47769:function(F,L,e){var T=e(72075).dfltConfig,b=e(75046),a=F.exports={};a.log=function(){var _;if(T.logging>1){var g=["LOG:"];for(_=0;_<arguments.length;_++)g.push(arguments[_]);console.trace.apply(console,g)}if(T.notifyOnLogging>1){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);b(h.join("<br>"),"long")}},a.warn=function(){var _;if(T.logging>0){var g=["WARN:"];for(_=0;_<arguments.length;_++)g.push(arguments[_]);console.trace.apply(console,g)}if(T.notifyOnLogging>0){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);b(h.join("<br>"),"stick")}},a.error=function(){var _;if(T.logging>0){var g=["ERROR:"];for(_=0;_<arguments.length;_++)g.push(arguments[_]);console.error.apply(console,g)}if(T.notifyOnLogging>0){var h=[];for(_=0;_<arguments.length;_++)h.push(arguments[_]);b(h.join("<br>"),"stick")}}},77310:function(F,L,e){var T=e(39898);F.exports=function(b,a,_){var g=b.selectAll("g."+_.replace(/\s/g,".")).data(a,function(o){return o[0].trace.uid});g.exit().remove(),g.enter().append("g").attr("class",_),g.order();var h=b.classed("rangeplot")?"nodeRangePlot3":"node3";return g.each(function(o){o[0][h]=T.select(this)}),g}},35657:function(F,L,e){var T=e(79576);L.init2dArray=function(b,a){for(var _=new Array(b),g=0;g<b;g++)_[g]=new Array(a);return _},L.transposeRagged=function(b){var a,_,g=0,h=b.length;for(a=0;a<h;a++)g=Math.max(g,b[a].length);var o=new Array(g);for(a=0;a<g;a++)for(o[a]=new Array(h),_=0;_<h;_++)o[a][_]=b[_][a];return o},L.dot=function(b,a){if(!b.length||!a.length||b.length!==a.length)return null;var _,g,h=b.length;if(b[0].length)for(_=new Array(h),g=0;g<h;g++)_[g]=L.dot(b[g],a);else if(a[0].length){var o=L.transposeRagged(a);for(_=new Array(o.length),g=0;g<o.length;g++)_[g]=L.dot(b,o[g])}else for(_=0,g=0;g<h;g++)_+=b[g]*a[g];return _},L.translationMatrix=function(b,a){return[[1,0,b],[0,1,a],[0,0,1]]},L.rotationMatrix=function(b){var a=b*Math.PI/180;return[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]]},L.rotationXYMatrix=function(b,a,_){return L.dot(L.dot(L.translationMatrix(a,_),L.rotationMatrix(b)),L.translationMatrix(-a,-_))},L.apply3DTransform=function(b){return function(){var a=arguments,_=arguments.length===1?a[0]:[a[0],a[1],a[2]||0];return L.dot(b,[_[0],_[1],_[2],1]).slice(0,3)}},L.apply2DTransform=function(b){return function(){var a=arguments;a.length===3&&(a=a[0]);var _=arguments.length===1?a[0]:[a[0],a[1]];return L.dot(b,[_[0],_[1],1]).slice(0,2)}},L.apply2DTransform2=function(b){var a=L.apply2DTransform(b);return function(_){return a(_.slice(0,2)).concat(a(_.slice(2,4)))}},L.convertCssMatrix=function(b){if(b){var a=b.length;if(a===16)return b;if(a===6)return[b[0],b[1],0,0,b[2],b[3],0,0,0,0,1,0,b[4],b[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},L.inverseTransformMatrix=function(b){var a=[];return T.invert(a,b),[[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]]}},64872:function(F){F.exports={mod:function(L,e){var T=L%e;return T<0?T+e:T},modHalf:function(L,e){return Math.abs(L)>e/2?L-Math.round(L/e)*e:L}}},65487:function(F,L,e){var T=e(92770),b=e(73627).isArrayOrTypedArray;function a(n,r){return function(){var s,l,u,d,c,w=n;for(d=0;d<r.length-1;d++){if((s=r[d])===-1){for(l=!0,u=[],c=0;c<w.length;c++)u[c]=a(w[c],r.slice(d+1))(),u[c]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof s=="number"&&!b(w)||typeof(w=w[s])!="object"||w===null)return}if(typeof w=="object"&&w!==null&&(u=w[r[d]])!==null)return u}}F.exports=function(n,r){if(T(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";for(var s,l,u,d=0,c=r.split(".");d<c.length;){if(s=String(c[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])c[d]=s[1];else{if(d!==0)throw"bad property string";c.splice(0,1)}for(l=s[2].substr(1,s[2].length-2).split("]["),u=0;u<l.length;u++)d++,c.splice(d,0,Number(l[u]))}d++}return typeof n!="object"?function(w,m,f){return{set:function(){throw"bad container"},get:function(){},astr:m,parts:f,obj:w}}(n,r,c):{set:h(n,c,r),get:a(n,c),astr:r,parts:c,obj:n}};var _=/(^|\.)args\[/;function g(n,r){return n===void 0||n===null&&!r.match(_)}function h(n,r,s){return function(l){var u,d,c=n,w="",m=g(l,s);for(d=0;d<r.length-1;d++){if(typeof(u=r[d])=="number"&&!b(c))throw"array index but container is not an array";if(u===-1){if(m=!t(c,r.slice(d+1),l,s))break;return}if(!i(c,u,r[d+1],m))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";w=o(w,u)}if(m){if(d===r.length-1&&(delete c[r[d]],Array.isArray(c)&&+r[d]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[r[d]]=l}}function o(n,r){var s=r;return T(r)?s="["+r+"]":n&&(s="."+r),n+s}function t(n,r,s,l){var u,d=b(s),c=!0,w=s,m=l.replace("-1",0),f=!d&&g(s,m),x=r[0];for(u=0;u<n.length;u++)m=l.replace("-1",u),d&&(f=g(w=s[u%s.length],m)),f&&(c=!1),i(n,u,x,f)&&h(n[u],r,l.replace("-1",u))(w);return c}function i(n,r,s,l){if(n[r]===void 0){if(l)return!1;n[r]=typeof s=="number"?[]:{}}return!0}},64213:function(F){F.exports=function(){}},75046:function(F,L,e){var T=e(39898),b=e(92770),a=[];F.exports=function(_,g){if(a.indexOf(_)===-1){a.push(_);var h=1e3;b(g)?h=g:g==="long"&&(h=3e3);var o=T.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var n=T.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),s=i.split(/<br\s*\/?>/g),l=0;l<s.length;l++)l&&r.append("br"),r.append("span").text(s[l]);g==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(h).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(n){var r=a.indexOf(n);r!==-1&&a.splice(r,1),T.select(this).remove()})}}},39918:function(F,L,e){var T=e(6964),b="data-savedcursor";F.exports=function(a,_){var g=a.attr(b);if(_){if(!g){for(var h=(a.attr("class")||"").split(" "),o=0;o<h.length;o++){var t=h[o];t.indexOf("cursor-")===0&&a.attr(b,t.substr(7)).classed(t,!1)}a.attr(b)||a.attr(b,"!!")}T(a,_)}else g&&(a.attr(b,null),g==="!!"?T(a):T(a,g))}},61082:function(F,L,e){var T=e(35657).dot,b=e(50606).BADNUM,a=F.exports={};a.tester=function(_){var g,h=_.slice(),o=h[0][0],t=o,i=h[0][1],n=i;for(h[h.length-1][0]===h[0][0]&&h[h.length-1][1]===h[0][1]||h.push(h[0]),g=1;g<h.length;g++)o=Math.min(o,h[g][0]),t=Math.max(t,h[g][0]),i=Math.min(i,h[g][1]),n=Math.max(n,h[g][1]);var r,s=!1;h.length===5&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(s=!0,r=function(d){return d[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(s=!0,r=function(d){return d[1]===h[0][1]}));var l=!0,u=h[0];for(g=1;g<h.length;g++)if(u[0]!==h[g][0]||u[1]!==h[g][1]){l=!1;break}return{xmin:o,xmax:t,ymin:i,ymax:n,pts:h,contains:s?function(d,c){var w=d[0],m=d[1];return!(w===b||w<o||w>t||m===b||m<i||m>n||c&&r(d))}:function(d,c){var w=d[0],m=d[1];if(w===b||w<o||w>t||m===b||m<i||m>n)return!1;var f,x,y,v,M,p=h.length,S=h[0][0],A=h[0][1],k=0;for(f=1;f<p;f++)if(x=S,y=A,S=h[f][0],A=h[f][1],!(w<(v=Math.min(x,S))||w>Math.max(x,S)||m>Math.max(y,A)))if(m<Math.min(y,A))w!==v&&k++;else{if(m===(M=S===x?m:y+(w-x)*(A-y)/(S-x)))return f!==1||!c;m<=M&&w!==v&&k++}return k%2==1},isRect:s,degenerate:l}},a.isSegmentBent=function(_,g,h,o){var t,i,n,r=_[g],s=[_[h][0]-r[0],_[h][1]-r[1]],l=T(s,s),u=Math.sqrt(l),d=[-s[1]/u,s[0]/u];for(t=g+1;t<h;t++)if(i=[_[t][0]-r[0],_[t][1]-r[1]],(n=T(i,s))<0||n>l||Math.abs(T(i,d))>o)return!0;return!1},a.filter=function(_,g){var h=[_[0]],o=0,t=0;function i(n){_.push(n);var r=h.length,s=o;h.splice(t+1);for(var l=s+1;l<_.length;l++)(l===_.length-1||a.isSegmentBent(_,s,l+1,g))&&(h.push(_[l]),h.length<r-2&&(o=l,t=h.length-1),s=l)}return _.length>1&&i(_.pop()),{addPt:i,raw:_,filtered:h}}},79749:function(F,L,e){var T=e(58617),b=e(98580);F.exports=function(a,_,g){var h=a._fullLayout,o=!0;return h._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(g);else if(!t.pick||h._has("parcoords")){try{t.regl=b({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:_||[],cachedCode:g||{}})}catch{o=!1}t.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(i){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),o||T({container:h._glcontainer.node()}),o}},45142:function(F,L,e){var T=e(92770),b=e(35791);F.exports=function(a){var _;if(typeof(_=a&&a.hasOwnProperty("userAgent")?a.userAgent:function(){var r;return typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var g=b({ua:{headers:{"user-agent":_}},tablet:!0,featureDetect:!1});if(!g){for(var h=_.split(" "),o=1;o<h.length;o++)if(h[o].indexOf("Safari")!==-1)for(var t=o-1;t>-1;t--){var i=h[t];if(i.substr(0,8)==="Version/"){var n=i.substr(8).split(".")[0];if(T(n)&&(n=+n),n>=13)return!0}}}return g}},75138:function(F){F.exports=function(L,e){if(e instanceof RegExp){for(var T=e.toString(),b=0;b<L.length;b++)if(L[b]instanceof RegExp&&L[b].toString()===T)return L;L.push(e)}else!e&&e!==0||L.indexOf(e)!==-1||L.push(e);return L}},10847:function(F,L,e){var T=e(71828),b=e(72075).dfltConfig,a={add:function(_,g,h,o,t){var i,n;_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},n=_.undoQueue.index,_.autoplay?_.undoQueue.inSequence||(_.autoplay=!1):(!_.undoQueue.sequence||_.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},_.undoQueue.queue.splice(n,_.undoQueue.queue.length-n,i),_.undoQueue.index+=1):i=_.undoQueue.queue[n-1],_.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(g),i.undo.args.unshift(h),i.redo.calls.push(o),i.redo.args.push(t)),_.undoQueue.queue.length>b.queueLength&&(_.undoQueue.queue.shift(),_.undoQueue.index--))},startSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!0,_.undoQueue.beginSequence=!0},stopSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!1,_.undoQueue.beginSequence=!1},undo:function(_){var g,h;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index<=0)){for(_.undoQueue.index--,g=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,h=0;h<g.undo.calls.length;h++)a.plotDo(_,g.undo.calls[h],g.undo.args[h]);_.undoQueue.inSequence=!1,_.autoplay=!1}},redo:function(_){var g,h;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index>=_.undoQueue.queue.length)){for(g=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,h=0;h<g.redo.calls.length;h++)a.plotDo(_,g.redo.calls[h],g.redo.args[h]);_.undoQueue.inSequence=!1,_.autoplay=!1,_.undoQueue.index++}},plotDo:function(_,g,h){_.autoplay=!0,h=function(o,t){for(var i,n=[],r=0;r<t.length;r++)i=t[r],n[r]=i===o?i:typeof i=="object"?Array.isArray(i)?T.extendDeep([],i):T.extendDeepAll({},i):i;return n}(_,h),g.apply(null,h)}};F.exports=a},30587:function(F,L){L.counter=function(e,T,b,a){var _=(T||"")+(b?"":"$"),g=a===!1?"":"^";return e==="xy"?new RegExp(g+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+_):new RegExp(g+e+"([2-9]|[1-9][0-9]+)?"+_)}},6962:function(F){var L=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;F.exports=function(T,b){for(;b;){var a=T.match(L);if(a)T=a[1];else{if(!T.match(e))throw new Error("bad relativeAttr call:"+[T,b]);T=""}if(b.charAt(0)!=="^")break;b=b.slice(1)}return T&&b.charAt(0)!=="["?T+"."+b:T+b}},51332:function(F,L,e){var T=e(73627).isArrayOrTypedArray,b=e(41965);F.exports=function a(_,g){for(var h in g){var o=g[h],t=_[h];if(t!==o)if(h.charAt(0)==="_"||typeof o=="function"){if(h in _)continue;_[h]=o}else if(T(o)&&T(t)&&b(o[0])){if(h==="customdata"||h==="ids")continue;for(var i=Math.min(o.length,t.length),n=0;n<i;n++)t[n]!==o[n]&&b(o[n])&&b(t[n])&&a(t[n],o[n])}else b(o)&&b(t)&&(a(t,o),Object.keys(t).length||delete _[h])}}},65888:function(F,L,e){var T=e(92770),b=e(47769),a=e(23389),_=e(50606).BADNUM,g=1e-9;function h(n,r){return n<r}function o(n,r){return n<=r}function t(n,r){return n>r}function i(n,r){return n>=r}L.findBin=function(n,r,s){if(T(r.start))return s?Math.ceil((n-r.start)/r.size-g)-1:Math.floor((n-r.start)/r.size+g);var l,u,d=0,c=r.length,w=0,m=c>1?(r[c-1]-r[0])/(c-1):1;for(u=m>=0?s?h:o:s?i:t,n+=m*g*(s?-1:1)*(m>=0?1:-1);d<c&&w++<100;)u(r[l=Math.floor((d+c)/2)],n)?d=l+1:c=l;return w>90&&b.log("Long binary search..."),d-1},L.sorterAsc=function(n,r){return n-r},L.sorterDes=function(n,r){return r-n},L.distinctVals=function(n){var r,s=n.slice();for(s.sort(L.sorterAsc),r=s.length-1;r>-1&&s[r]===_;r--);for(var l,u=s[r]-s[0]||1,d=u/(r||1)/1e4,c=[],w=0;w<=r;w++){var m=s[w],f=m-l;l===void 0?(c.push(m),l=m):f>d&&(u=Math.min(u,f),c.push(m),l=m)}return{vals:c,minDiff:u}},L.roundUp=function(n,r,s){for(var l,u=0,d=r.length-1,c=0,w=s?0:1,m=s?1:0,f=s?Math.ceil:Math.floor;u<d&&c++<100;)r[l=f((u+d)/2)]<=n?u=l+w:d=l-m;return r[u]},L.sort=function(n,r){for(var s=0,l=0,u=1;u<n.length;u++){var d=r(n[u],n[u-1]);if(d<0?s=1:d>0&&(l=1),s&&l)return n.sort(r)}return l?n:n.reverse()},L.findIndexOfMin=function(n,r){r=r||a;for(var s,l=1/0,u=0;u<n.length;u++){var d=r(n[u]);d<l&&(l=d,s=u)}return s}},6964:function(F){F.exports=function(L,e){(L.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&L.classed(T,!1)}),e&&L.classed("cursor-"+e,!0)}},58617:function(F,L,e){var T=e(7901),b=function(){};F.exports=function(a){for(var _ in a)typeof a[_]=="function"&&(a[_]=b);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var g=document.createElement("div");g.className="no-webgl",g.style.cursor="pointer",g.style.fontSize="24px",g.style.color=T.defaults[0],g.style.position="absolute",g.style.left=g.style.top="0px",g.style.width=g.style.height="100%",g.style["background-color"]=T.lightLine,g.style["z-index"]=30;var h=document.createElement("p");return h.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",h.style.position="relative",h.style.top="50%",h.style.left="50%",h.style.height="30%",h.style.width="50%",h.style.margin="-15% 0 0 -25%",g.appendChild(h),a.container.appendChild(g),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(F){F.exports=function(L){return Object.keys(L).sort()}},80038:function(F,L,e){var T=e(92770),b=e(73627).isArrayOrTypedArray;L.aggNums=function(a,_,g,h){var o,t;if((!h||h>g.length)&&(h=g.length),T(_)||(_=!1),b(g[0])){for(t=new Array(h),o=0;o<h;o++)t[o]=L.aggNums(a,_,g[o]);g=t}for(o=0;o<h;o++)T(_)?T(g[o])&&(_=a(+_,+g[o])):_=g[o];return _},L.len=function(a){return L.aggNums(function(_){return _+1},0,a)},L.mean=function(a,_){return _||(_=L.len(a)),L.aggNums(function(g,h){return g+h},0,a)/_},L.midRange=function(a){if(a!==void 0&&a.length!==0)return(L.aggNums(Math.max,null,a)+L.aggNums(Math.min,null,a))/2},L.variance=function(a,_,g){return _||(_=L.len(a)),T(g)||(g=L.mean(a,_)),L.aggNums(function(h,o){return h+Math.pow(o-g,2)},0,a)/_},L.stdev=function(a,_,g){return Math.sqrt(L.variance(a,_,g))},L.median=function(a){var _=a.slice().sort();return L.interp(_,.5)},L.interp=function(a,_){if(!T(_))throw"n should be a finite number";if((_=_*a.length-.5)<0)return a[0];if(_>a.length-1)return a[a.length-1];var g=_%1;return g*a[Math.ceil(_)]+(1-g)*a[Math.floor(_)]}},78614:function(F,L,e){var T=e(25075);F.exports=function(b){return b?T(b):[0,0,0,1]}},3883:function(F,L,e){var T=e(32396),b=e(91424),a=e(71828),_=null;F.exports=function(){if(_!==null)return _;_=!1;var g=a.isIE()||a.isSafari()||a.isIOS();if(window.navigator.userAgent&&!g){var h=Array.from(T.CSS_DECLARATIONS).reverse(),o=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof o=="function")_=h.some(function(n){return o.apply(null,n)});else{var t=b.tester.append("image").attr("style",T.STYLE),i=window.getComputedStyle(t.node()).imageRendering;_=h.some(function(n){var r=n[1];return i===r||i===r.toLowerCase()}),t.remove()}}return _}},63893:function(F,L,e){var T=e(39898),b=e(71828),a=b.strTranslate,_=e(77922),g=e(18783).LINE_SPACING,h=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;L.convertToTspans=function(O,X,D){var V=O.text(),j=!O.attr("data-notex")&&X&&X._context.typesetMath&&typeof MathJax<"u"&&V.match(h),B=T.select(O.node().parentNode);if(!B.empty()){var W=O.attr("class")?O.attr("class").split(" ")[0]:"text";return W+="-math",B.selectAll("svg."+W).remove(),B.selectAll("g."+W+"-group").remove(),O.style("display",null).attr({"data-unformatted":V,"data-math":"N"}),j?(X&&X._promises||[]).push(new Promise(function(re){O.style("display","none");var ee=parseInt(O.node().style.fontSize,10),K={fontSize:ee};(function(Y,$,ne){var ae,se,ce,me,ye=parseInt((MathJax.version||"").split(".")[0]);if(ye===2||ye===3){var Te=function(){var pe="math-output-"+b.randstr({},64),fe=(me=T.select("body").append("div").attr({id:pe}).style({visibility:"hidden",position:"absolute","font-size":$.fontSize+"px"}).text(Y.replace(o,"\\lt ").replace(t,"\\gt "))).node();return ye===2?MathJax.Hub.Typeset(fe):MathJax.typeset([fe])},Ce=function(){var pe=me.select(ye===2?".MathJax_SVG":".MathJax"),fe=!pe.empty()&&me.select("svg").node();if(fe){var Oe,Se=fe.getBoundingClientRect();Oe=ye===2?T.select("body").select("#MathJax_SVG_glyphs"):pe.select("defs"),ne(pe,Oe,Se)}else b.log("There was an error in the tex syntax.",Y),ne();me.remove()};ye===2?MathJax.Hub.Queue(function(){return se=b.extendDeepAll({},MathJax.Hub.config),ce=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((ae=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},Te,Ce,function(){if(ae!=="SVG")return MathJax.Hub.setRenderer(ae)},function(){return ce!==void 0&&(MathJax.Hub.processSectionDelay=ce),MathJax.Hub.Config(se)}):ye===3&&(se=b.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(ae=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Te(),Ce(),ae!=="svg"&&(MathJax.config.startup.output=ae),MathJax.config=se}))}else b.warn("No MathJax version:",MathJax.version)})(j[2],K,function(Y,$,ne){B.selectAll("svg."+W).remove(),B.selectAll("g."+W+"-group").remove();var ae=Y&&Y.select("svg");if(!ae||!ae.node())return q(),void re();var se=B.append("g").classed(W+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});se.node().appendChild(ae.node()),$&&$.node()&&ae.node().insertBefore($.node().cloneNode(!0),ae.node().firstChild);var ce=ne.width,me=ne.height;ae.attr({class:W,height:me,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ye=O.node().style.fill||"black",Te=ae.select("g");Te.attr({fill:ye,stroke:ye});var Ce=Te.node().getBoundingClientRect(),pe=Ce.width,fe=Ce.height;(pe>ce||fe>me)&&(ae.style("overflow","hidden"),pe=(Ce=ae.node().getBoundingClientRect()).width,fe=Ce.height);var Oe=+O.attr("x"),Se=+O.attr("y"),Me=-(ee||O.node().getBoundingClientRect().height)/4;if(W[0]==="y")se.attr({transform:"rotate("+[-90,Oe,Se]+")"+a(-pe/2,Me-fe/2)});else if(W[0]==="l")Se=Me-fe/2;else if(W[0]==="a"&&W.indexOf("atitle")!==0)Oe=0,Se=Me;else{var ue=O.attr("text-anchor");Oe-=pe*(ue==="middle"?.5:ue==="end"?1:0),Se=Se+Me-fe/2}ae.attr({x:Oe,y:Se}),D&&D.call(O,se),re(se)})})):q(),O}function q(){B.empty()||(W=O.attr("class")+"-math",B.select("svg."+W).remove()),O.text("").style("white-space","pre");var re=function(ee,K){K=K.replace(d," ");var Y,$=!1,ne=[],ae=-1;function se(){ae++;var Ae=document.createElementNS(_.svg,"tspan");T.select(Ae).attr({class:"line",dy:ae*g+"em"}),ee.appendChild(Ae),Y=Ae;var we=ne;if(ne=[{node:Ae}],we.length>1)for(var Ne=1;Ne<we.length;Ne++)ce(we[Ne])}function ce(Ae){var we,Ne=Ae.type,He={};if(Ne==="a"){we="a";var de=Ae.target,Le=Ae.href,Ee=Ae.popup;Le&&(He={"xlink:xlink:show":de==="_blank"||de.charAt(0)!=="_"?"new":"replace",target:de,"xlink:xlink:href":Le},Ee&&(He.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ee+'");return false;'))}else we="tspan";Ae.style&&(He.style=Ae.style);var Re=document.createElementNS(_.svg,we);if(Ne==="sup"||Ne==="sub"){me(Y,l),Y.appendChild(Re);var je=document.createElementNS(_.svg,"tspan");me(je,l),T.select(je).attr("dy",s[Ne]),He.dy=r[Ne],Y.appendChild(Re),Y.appendChild(je)}else Y.appendChild(Re);T.select(Re).attr(He),Y=Ae.node=Re,ne.push(Ae)}function me(Ae,we){Ae.appendChild(document.createTextNode(we))}function ye(Ae){if(ne.length!==1){var we=ne.pop();Ae!==we.type&&b.log("Start tag <"+we.type+"> doesnt match end tag <"+Ae+">. Pretending it did match.",K),Y=ne[ne.length-1].node}else b.log("Ignoring unexpected end tag </"+Ae+">.",K)}m.test(K)?se():(Y=ee,ne=[{node:ee}]);for(var Te=K.split(c),Ce=0;Ce<Te.length;Ce++){var pe=Te[Ce],fe=pe.match(w),Oe=fe&&fe[2].toLowerCase(),Se=n[Oe];if(Oe==="br")se();else if(Se===void 0)me(Y,k(pe));else if(fe[1])ye(Oe);else{var Me=fe[4],ue={type:Oe},le=M(Me,f);if(le?(le=le.replace(p,"$1 fill:"),Se&&(le+=";"+Se)):Se&&(le=Se),le&&(ue.style=le),Oe==="a"){$=!0;var ie=M(Me,x);if(ie){var ge=C(ie);ge&&(ue.href=ge,ue.target=M(Me,y)||"_blank",ue.popup=M(Me,v))}}ce(ue)}}return $}(O.node(),V);re&&O.style("pointer-events","all"),L.positionText(O),D&&D.call(O)}};var o=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},l="",u=["http:","https:","mailto:","",void 0,":"],d=L.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;L.BR_TAG_ALL=/<br(\s+.*)?>/gi;var f=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(O,X){if(!O)return null;var D=O.match(X),V=D&&(D[3]||D[4]);return V&&k(V)}var p=/(^|;)\s*color:/;L.plainText=function(O,X){for(var D=(X=X||{}).len!==void 0&&X.len!==-1?X.len:1/0,V=X.allowedTags!==void 0?X.allowedTags:["br"],j=O.split(c),B=[],W="",q=0,re=0;re<j.length;re++){var ee=j[re],K=ee.match(w),Y=K&&K[2].toLowerCase();if(Y)V.indexOf(Y)!==-1&&(B.push(ee),W=Y);else{var $=ee.length;if(q+$<D)B.push(ee),q+=$;else if(q<D){var ne=D-q;W&&(W!=="br"||ne<=3||$<=3)&&B.pop(),D>3?B.push(ee.substr(0,ne-3)+"..."):B.push(ee.substr(0,ne));break}W=""}}return B.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},A=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function k(O){return O.replace(A,function(X,D){return(D.charAt(0)==="#"?function(V){if(!(V>1114111)){var j=String.fromCodePoint;if(j)return j(V);var B=String.fromCharCode;return V<=65535?B(V):B(55232+(V>>10),V%1024+56320)}}(D.charAt(1)==="x"?parseInt(D.substr(2),16):parseInt(D.substr(1),10)):S[D])||X})}function C(O){var X=encodeURI(decodeURI(O)),D=document.createElement("a"),V=document.createElement("a");D.href=O,V.href=X;var j=D.protocol,B=V.protocol;return u.indexOf(j)!==-1&&u.indexOf(B)!==-1?X:""}function P(O,X,D){var V,j,B,W=D.horizontalAlign,q=D.verticalAlign||"top",re=O.node().getBoundingClientRect(),ee=X.node().getBoundingClientRect();return j=q==="bottom"?function(){return re.bottom-V.height}:q==="middle"?function(){return re.top+(re.height-V.height)/2}:function(){return re.top},B=W==="right"?function(){return re.right-V.width}:W==="center"?function(){return re.left+(re.width-V.width)/2}:function(){return re.left},function(){V=this.node().getBoundingClientRect();var K=B()-ee.left,Y=j()-ee.top,$=D.gd||{};if(D.gd){$._fullLayout._calcInverseTransform($);var ne=b.apply3DTransform($._fullLayout._invTransform)(K,Y);K=ne[0],Y=ne[1]}return this.style({top:Y+"px",left:K+"px","z-index":1e3}),this}}L.convertEntities=k,L.sanitizeHTML=function(O){O=O.replace(d," ");for(var X=document.createElement("p"),D=X,V=[],j=O.split(c),B=0;B<j.length;B++){var W=j[B],q=W.match(w),re=q&&q[2].toLowerCase();if(re in n)if(q[1])V.length&&(D=V.pop());else{var ee=q[4],K=M(ee,f),Y=K?{style:K}:{};if(re==="a"){var $=M(ee,x);if($){var ne=C($);if(ne){Y.href=ne;var ae=M(ee,y);ae&&(Y.target=ae)}}}var se=document.createElement(re);D.appendChild(se),T.select(se).attr(Y),D=se,V.push(se)}else D.appendChild(document.createTextNode(k(W)))}return X.innerHTML},L.lineCount=function(O){return O.selectAll("tspan.line").size()||1},L.positionText=function(O,X,D){return O.each(function(){var V=T.select(this);function j(q,re){return re===void 0?(re=V.attr(q))===null&&(V.attr(q,0),re=0):V.attr(q,re),re}var B=j("x",X),W=j("y",D);this.nodeName==="text"&&V.selectAll("tspan.line").attr({x:B,y:W})})};var R="1px ";L.makeTextShadow=function(O){return R+R+R+O+", -"+R+"-"+R+R+O+", "+R+"-"+R+R+O+", -"+R+R+R+O},L.makeEditable=function(O,X){var D=X.gd,V=X.delegate,j=T.dispatch("edit","input","cancel"),B=V||O;if(O.style({"pointer-events":V?"none":"all"}),O.size()!==1)throw new Error("boo");function W(){var re,ee,K,Y,$;re=T.select(D).select(".svg-container"),ee=re.append("div"),K=O.node().style,Y=parseFloat(K.fontSize||12),($=X.text)===void 0&&($=O.attr("data-unformatted")),ee.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":Y,color:X.fill||K.fill||"black",opacity:1,"background-color":X.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Y/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text($).call(P(O,re,X)).on("blur",function(){D._editing=!1,O.text(this.textContent).style({opacity:1});var se,ce=T.select(this).attr("class");(se=ce?"."+ce.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(O.node().parentNode).select(se).style({opacity:0});var me=this.textContent;T.select(this).transition().duration(0).remove(),T.select(document).on("mouseup",null),j.edit.call(O,me)}).on("focus",function(){var se=this;D._editing=!0,T.select(document).on("mouseup",function(){if(T.event.target===se)return!1;document.activeElement===ee.node()&&ee.node().blur()})}).on("keyup",function(){T.event.which===27?(D._editing=!1,O.style({opacity:1}),T.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(O,this.textContent)):(j.input.call(O,this.textContent),T.select(this).call(P(O,re,X)))}).on("keydown",function(){T.event.which===13&&this.blur()}).call(q),O.style({opacity:0});var ne,ae=B.attr("class");(ne=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(O.node().parentNode).select(ne).style({opacity:0})}function q(re){var ee=re.node(),K=document.createRange();K.selectNodeContents(ee);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(K),ee.focus()}return X.immediate?W():B.on("click",W),T.rebind(O,j,"on")}},79990:function(F,L){var e={};function T(b){b&&b.timer!==null&&(clearTimeout(b.timer),b.timer=null)}L.throttle=function(b,a,_){var g=e[b],h=Date.now();if(!g){for(var o in e)e[o].ts<h-6e4&&delete e[o];g=e[b]={ts:0,timer:null}}function t(){_(),g.ts=Date.now(),g.onDone&&(g.onDone(),g.onDone=null)}T(g),h>g.ts+a?t():g.timer=setTimeout(function(){t(),g.timer=null},a)},L.done=function(b){var a=e[b];return a&&a.timer?new Promise(function(_){var g=a.onDone;a.onDone=function(){g&&g(),_(),a.onDone=null}}):Promise.resolve()},L.clear=function(b){if(b)T(e[b]),delete e[b];else for(var a in e)L.clear(a)}},58163:function(F,L,e){var T=e(92770);F.exports=function(b,a){if(b>0)return Math.log(b)/Math.LN10;var _=Math.log(Math.min(a[0],a[1]))/Math.LN10;return T(_)||(_=Math.log(Math.max(a[0],a[1]))/Math.LN10-6),_}},90973:function(F,L,e){var T=F.exports={},b=e(78776).locationmodeToLayer,a=e(96892).zL;T.getTopojsonName=function(_){return[_.scope.replace(/ /g,"-"),"_",_.resolution.toString(),"m"].join("")},T.getTopojsonPath=function(_,g){return _+g+".json"},T.getTopojsonFeatures=function(_,g){var h=b[_.locationmode],o=g.objects[h];return a(g,o).features}},37815:function(F){F.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(F){F.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(F,L,e){var T=e(73972);F.exports=function(b){for(var a,_,g=T.layoutArrayContainers,h=T.layoutArrayRegexes,o=b.split("[")[0],t=0;t<h.length;t++)if((_=b.match(h[t]))&&_.index===0){a=_[0];break}if(a||(a=g[g.indexOf(o)]),!a)return!1;var i=b.substr(a.length);return i?!!(_=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:a,index:Number(_[1]),property:_[3]||""}:{array:a,index:"",property:""}}},30962:function(F,L,e){var T=e(1426).extendFlat,b=e(41965),a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},_={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},g=a.flags.slice().concat(["fullReplot"]),h=_.flags.slice().concat("layoutReplot");function o(n){for(var r={},s=0;s<n.length;s++)r[n[s]]=!1;return r}function t(n,r,s){var l=T({},n);for(var u in l){var d=l[u];b(d)&&(l[u]=i(d,r,0,u))}return s==="from-root"&&(l.editType=r),l}function i(n,r,s,l){if(n.valType){var u=T({},n);if(u.editType=r,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var d=0;d<n.items.length;d++)u.items[d]=i(n.items[d],r)}return u}return t(n,r,l.charAt(0)==="_"?"nested":"from-root")}F.exports={traces:a,layout:_,traceFlags:function(){return o(g)},layoutFlags:function(){return o(h)},update:function(n,r){var s=r.editType;if(s&&s!=="none")for(var l=s.split("+"),u=0;u<l.length;u++)n[l[u]]=!0},overrideAll:t}},58377:function(F,L,e){var T=e(92770),b=e(27812),a=e(73972),_=e(71828),g=e(74875),h=e(41675),o=e(7901),t=h.cleanId,i=h.getFromTrace,n=a.traceIs;function r(x,y){var v=x[y],M=y.charAt(0);v&&v!=="paper"&&(x[y]=t(v,M,!0))}function s(x){function y(v,M){var p=x[v],S=x.title&&x.title[M];p&&!S&&(x.title||(x.title={}),x.title[M]=x[v],delete x[v])}x&&(typeof x.title!="string"&&typeof x.title!="number"||(x.title={text:x.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(x){if(!_.isPlainObject(x))return!1;var y=x.name;return delete x.name,delete x.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function u(x,y,v,M){if(v&&!M)return x;if(M&&!v||!x.trim())return y;if(!y.trim())return x;var p,S=Math.min(x.length,y.length);for(p=0;p<S&&x.charAt(p)===y.charAt(p);p++);return x.substr(0,p).trim()}function d(x){var y="middle",v="center";return typeof x=="string"&&(x.indexOf("top")!==-1?y="top":x.indexOf("bottom")!==-1&&(y="bottom"),x.indexOf("left")!==-1?v="left":x.indexOf("right")!==-1&&(v="right")),y+" "+v}function c(x,y){return y in x&&typeof x[y]=="object"&&Object.keys(x[y]).length===0}L.clearPromiseQueue=function(x){Array.isArray(x._promises)&&x._promises.length>0&&_.log("Clearing previous rejected promises from queue."),x._promises=[]},L.cleanLayout=function(x){var y,v;x||(x={}),x.xaxis1&&(x.xaxis||(x.xaxis=x.xaxis1),delete x.xaxis1),x.yaxis1&&(x.yaxis||(x.yaxis=x.yaxis1),delete x.yaxis1),x.scene1&&(x.scene||(x.scene=x.scene1),delete x.scene1);var M=(g.subplotsRegistry.cartesian||{}).attrRegex,p=(g.subplotsRegistry.polar||{}).attrRegex,S=(g.subplotsRegistry.ternary||{}).attrRegex,A=(g.subplotsRegistry.gl3d||{}).attrRegex,k=Object.keys(x);for(y=0;y<k.length;y++){var C=k[y];if(M&&M.test(C)){var P=x[C];P.anchor&&P.anchor!=="free"&&(P.anchor=t(P.anchor)),P.overlaying&&(P.overlaying=t(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),P.autorange!=="withzero"&&P.autorange!=="tozero"||(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,c(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),s(P)}else if(p&&p.test(C))s(x[C].radialaxis);else if(S&&S.test(C)){var R=x[C];s(R.aaxis),s(R.baxis),s(R.caxis)}else if(A&&A.test(C)){var O=x[C],X=O.cameraposition;if(Array.isArray(X)&&X[0].length===4){var D=X[0],V=X[1],j=X[2],B=b([],D),W=[];for(v=0;v<3;++v)W[v]=V[v]+j*B[2+4*v];O.camera={eye:{x:W[0],y:W[1],z:W[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete O.cameraposition}s(O.xaxis),s(O.yaxis),s(O.zaxis)}}var q=Array.isArray(x.annotations)?x.annotations.length:0;for(y=0;y<q;y++){var re=x.annotations[y];_.isPlainObject(re)&&(re.ref&&(re.ref==="paper"?(re.xref="paper",re.yref="paper"):re.ref==="data"&&(re.xref="x",re.yref="y"),delete re.ref),r(re,"xref"),r(re,"yref"))}var ee=Array.isArray(x.shapes)?x.shapes.length:0;for(y=0;y<ee;y++){var K=x.shapes[y];_.isPlainObject(K)&&(r(K,"xref"),r(K,"yref"))}var Y=Array.isArray(x.images)?x.images.length:0;for(y=0;y<Y;y++){var $=x.images[y];_.isPlainObject($)&&(r($,"xref"),r($,"yref"))}var ne=x.legend;return ne&&(ne.x>3?(ne.x=1.02,ne.xanchor="left"):ne.x<-2&&(ne.x=-.02,ne.xanchor="right"),ne.y>3?(ne.y=1.02,ne.yanchor="bottom"):ne.y<-2&&(ne.y=-.02,ne.yanchor="top")),s(x),x.dragmode==="rotate"&&(x.dragmode="orbit"),o.clean(x),x.template&&x.template.layout&&L.cleanLayout(x.template.layout),x},L.cleanData=function(x){for(var y=0;y<x.length;y++){var v,M=x[y];if(M.type==="histogramy"&&"xbins"in M&&!("ybins"in M)&&(M.ybins=M.xbins,delete M.xbins),M.error_y&&"opacity"in M.error_y){var p=o.defaults,S=M.error_y.color||(n(M,"bar")?o.defaultLine:p[y%p.length]);M.error_y.color=o.addOpacity(o.rgb(S),o.opacity(S)*M.error_y.opacity),delete M.error_y.opacity}if("bardir"in M&&(M.bardir!=="h"||!n(M,"bar")&&M.type.substr(0,9)!=="histogram"||(M.orientation="h",L.swapXYData(M)),delete M.bardir),M.type==="histogramy"&&L.swapXYData(M),M.type!=="histogramx"&&M.type!=="histogramy"||(M.type="histogram"),"scl"in M&&!("colorscale"in M)&&(M.colorscale=M.scl,delete M.scl),"reversescl"in M&&!("reversescale"in M)&&(M.reversescale=M.reversescl,delete M.reversescl),M.xaxis&&(M.xaxis=t(M.xaxis,"x")),M.yaxis&&(M.yaxis=t(M.yaxis,"y")),n(M,"gl3d")&&M.scene&&(M.scene=g.subplotsRegistry.gl3d.cleanId(M.scene)),!n(M,"pie-like")&&!n(M,"bar-like"))if(Array.isArray(M.textposition))for(v=0;v<M.textposition.length;v++)M.textposition[v]=d(M.textposition[v]);else M.textposition&&(M.textposition=d(M.textposition));var A=a.getModule(M);if(A&&A.colorbar){var k=A.colorbar.container,C=k?M[k]:M;C&&C.colorscale&&(C.colorscale==="YIGnBu"&&(C.colorscale="YlGnBu"),C.colorscale==="YIOrRd"&&(C.colorscale="YlOrRd"))}if(M.type==="surface"&&_.isPlainObject(M.contours)){var P=["x","y","z"];for(v=0;v<P.length;v++){var R=M.contours[P[v]];_.isPlainObject(R)&&(R.highlightColor&&(R.highlightcolor=R.highlightColor,delete R.highlightColor),R.highlightWidth&&(R.highlightwidth=R.highlightWidth,delete R.highlightWidth))}}if(M.type==="candlestick"||M.type==="ohlc"){var O=(M.increasing||{}).showlegend!==!1,X=(M.decreasing||{}).showlegend!==!1,D=l(M.increasing),V=l(M.decreasing);if(D!==!1&&V!==!1){var j=u(D,V,O,X);j&&(M.name=j)}else!D&&!V||M.name||(M.name=D||V)}if(Array.isArray(M.transforms)){var B=M.transforms;for(v=0;v<B.length;v++){var W=B[v];if(_.isPlainObject(W))switch(W.type){case"filter":W.filtersrc&&(W.target=W.filtersrc,delete W.filtersrc),W.calendar&&(W.valuecalendar||(W.valuecalendar=W.calendar),delete W.calendar);break;case"groupby":if(W.styles=W.styles||W.style,W.styles&&!Array.isArray(W.styles)){var q=W.styles,re=Object.keys(q);W.styles=[];for(var ee=0;ee<re.length;ee++)W.styles.push({target:re[ee],value:q[re[ee]]})}}}}c(M,"line")&&delete M.line,"marker"in M&&(c(M.marker,"line")&&delete M.marker.line,c(M,"marker")&&delete M.marker),o.clean(M),M.autobinx&&(delete M.autobinx,delete M.xbins),M.autobiny&&(delete M.autobiny,delete M.ybins),s(M),M.colorbar&&s(M.colorbar),M.marker&&M.marker.colorbar&&s(M.marker.colorbar),M.line&&M.line.colorbar&&s(M.line.colorbar),M.aaxis&&s(M.aaxis),M.baxis&&s(M.baxis)}},L.swapXYData=function(x){var y;if(_.swapAttrs(x,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(x.z)&&Array.isArray(x.z[0])&&(x.transpose?delete x.transpose:x.transpose=!0),x.error_x&&x.error_y){var v=x.error_y,M="copy_ystyle"in v?v.copy_ystyle:!(v.color||v.thickness||v.width);_.swapAttrs(x,["error_?.copy_ystyle"]),M&&_.swapAttrs(x,["error_?.color","error_?.thickness","error_?.width"])}if(typeof x.hoverinfo=="string"){var p=x.hoverinfo.split("+");for(y=0;y<p.length;y++)p[y]==="x"?p[y]="y":p[y]==="y"&&(p[y]="x");x.hoverinfo=p.join("+")}},L.coerceTraceIndices=function(x,y){if(T(y))return[y];if(!Array.isArray(y)||!y.length)return x.data.map(function(p,S){return S});if(Array.isArray(y)){for(var v=[],M=0;M<y.length;M++)_.isIndex(y[M],x.data.length)?v.push(y[M]):_.warn("trace index (",y[M],") is not a number or is out of bounds");return v}return y},L.manageArrayContainers=function(x,y,v){var M=x.obj,p=x.parts,S=p.length,A=p[S-1],k=T(A);if(k&&y===null){var C=p.slice(0,S-1).join(".");_.nestedProperty(M,C).get().splice(A,1)}else k&&x.get()===void 0&&x.get()===void 0&&(v[x.astr]=null),x.set(y)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function m(x){var y=x.search(w);if(y>0)return x.substr(0,y)}L.hasParent=function(x,y){for(var v=m(y);v;){if(v in x)return!0;v=m(v)}return!1};var f=["x","y","z"];L.clearAxisTypes=function(x,y,v){for(var M=0;M<y.length;M++)for(var p=x._fullData[M],S=0;S<3;S++){var A=i(x,p,f[S]);if(A&&A.type!=="log"){var k=A._name,C=A._id.substr(1);if(C.substr(0,5)==="scene"){if(v[C]!==void 0)continue;k=C+"."+k}var P=k+".type";v[k]===void 0&&v[P]===void 0&&_.nestedProperty(x.layout,P).set(null)}}}},10641:function(F,L,e){var T=e(72391);L._doPlot=T._doPlot,L.newPlot=T.newPlot,L.restyle=T.restyle,L.relayout=T.relayout,L.redraw=T.redraw,L.update=T.update,L._guiRestyle=T._guiRestyle,L._guiRelayout=T._guiRelayout,L._guiUpdate=T._guiUpdate,L._storeDirectGUIEdit=T._storeDirectGUIEdit,L.react=T.react,L.extendTraces=T.extendTraces,L.prependTraces=T.prependTraces,L.addTraces=T.addTraces,L.deleteTraces=T.deleteTraces,L.moveTraces=T.moveTraces,L.purge=T.purge,L.addFrames=T.addFrames,L.deleteFrames=T.deleteFrames,L.animate=T.animate,L.setPlotConfig=T.setPlotConfig;var b=e(24401).getGraphDiv,a=e(34031).eraseActiveShape;L.deleteActiveShape=function(g){return a(b(g))},L.toImage=e(403),L.validate=e(84936),L.downloadImage=e(7239);var _=e(96318);L.makeTemplate=_.makeTemplate,L.validateTemplate=_.validateTemplate},6611:function(F,L,e){var T=e(41965),b=e(64213),a=e(47769),_=e(65888).sorterAsc,g=e(73972);L.containerArrayMatch=e(14458);var h=L.isAddVal=function(t){return t==="add"||T(t)},o=L.isRemoveVal=function(t){return t===null||t==="remove"};L.applyContainerArrayChanges=function(t,i,n,r,s){var l=i.astr,u=g.getComponentMethod(l,"supplyLayoutDefaults"),d=g.getComponentMethod(l,"draw"),c=g.getComponentMethod(l,"drawOne"),w=r.replot||r.recalc||u===b||d===b,m=t.layout,f=t._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",l);var x=n[""][""];if(o(x))i.set(null);else{if(!Array.isArray(x))return a.warn("Unrecognized full array edit value",l,x),!0;i.set(x)}return!w&&(u(m,f),d(t),!0)}var y,v,M,p,S,A,k,C,P=Object.keys(n).map(Number).sort(_),R=i.get(),O=R||[],X=s(f,l).get(),D=[],V=-1,j=O.length;for(y=0;y<P.length;y++)if(p=n[M=P[y]],S=Object.keys(p),A=p[""],k=h(A),M<0||M>O.length-(k?0:1))a.warn("index out of range",l,M);else if(A!==void 0)S.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",l,M),o(A)?D.push(M):k?(A==="add"&&(A={}),O.splice(M,0,A),X&&X.splice(M,0,{})):a.warn("Unrecognized full object edit value",l,M,A),V===-1&&(V=M);else for(v=0;v<S.length;v++)C=l+"["+M+"].",s(O[M],S[v],C).set(p[S[v]]);for(y=D.length-1;y>=0;y--)O.splice(D[y],1),X&&X.splice(D[y],1);if(O.length?R||i.set(O):i.set(null),w)return!1;if(u(m,f),c!==b){var B;if(V===-1)B=P;else{for(j=Math.max(O.length,j),B=[],y=0;y<P.length&&!((M=P[y])>=V);y++)B.push(M);for(y=V;y<j;y++)B.push(y)}for(y=0;y<B.length;y++)c(t,B[y])}else d(t);return!0}},72391:function(F,L,e){var T=e(39898),b=e(92770),a=e(57035),_=e(71828),g=_.nestedProperty,h=e(11086),o=e(10847),t=e(73972),i=e(86281),n=e(74875),r=e(89298),s=e(91424),l=e(7901),u=e(4305).initInteractions,d=e(77922),c=e(47322).clearOutline,w=e(72075).dfltConfig,m=e(6611),f=e(58377),x=e(61549),y=e(30962),v=e(85555).AX_NAME_PATTERN,M=0;function p(ie){var ge=ie._fullLayout;ge._redrawFromAutoMarginCount?ge._redrawFromAutoMarginCount--:ie.emit("plotly_afterplot")}function S(ie,ge){try{ie._fullLayout._paper.style("background",ge)}catch(Ae){_.error(Ae)}}function A(ie,ge){S(ie,l.combine(ge,"white"))}function k(ie,ge){if(!ie._context){ie._context=_.extendDeep({},w);var Ae=T.select("base");ie._context._baseUrl=Ae.size()&&Ae.attr("href")?window.location.href.split("#")[0]:""}var we,Ne,He,de=ie._context;if(ge){for(Ne=Object.keys(ge),we=0;we<Ne.length;we++)(He=Ne[we])!=="editable"&&He!=="edits"&&He in de&&(He==="setBackground"&&ge[He]==="opaque"?de[He]=A:de[He]=ge[He]);ge.plot3dPixelRatio&&!de.plotGlPixelRatio&&(de.plotGlPixelRatio=de.plot3dPixelRatio);var Le=ge.editable;if(Le!==void 0)for(de.editable=Le,Ne=Object.keys(de.edits),we=0;we<Ne.length;we++)de.edits[Ne[we]]=Le;if(ge.edits)for(Ne=Object.keys(ge.edits),we=0;we<Ne.length;we++)(He=Ne[we])in de.edits&&(de.edits[He]=ge.edits[He]);de._exportedPlot=ge._exportedPlot}de.staticPlot&&(de.editable=!1,de.edits={},de.autosizable=!1,de.scrollZoom=!1,de.doubleClick=!1,de.showTips=!1,de.showLink=!1,de.displayModeBar=!1),de.displayModeBar!=="hover"||a||(de.displayModeBar=!0),de.setBackground!=="transparent"&&typeof de.setBackground=="function"||(de.setBackground=S),de._hasZeroHeight=de._hasZeroHeight||ie.clientHeight===0,de._hasZeroWidth=de._hasZeroWidth||ie.clientWidth===0;var Ee=de.scrollZoom,Re=de._scrollZoom={};if(Ee===!0)Re.cartesian=1,Re.gl3d=1,Re.geo=1,Re.mapbox=1;else if(typeof Ee=="string"){var je=Ee.split("+");for(we=0;we<je.length;we++)Re[je[we]]=1}else Ee!==!1&&(Re.gl3d=1,Re.geo=1,Re.mapbox=1)}function C(ie,ge){var Ae,we,Ne=ge+1,He=[];for(Ae=0;Ae<ie.length;Ae++)(we=ie[Ae])<0?He.push(Ne+we):He.push(we);return He}function P(ie,ge,Ae){var we,Ne;for(we=0;we<ge.length;we++){if((Ne=ge[we])!==parseInt(Ne,10))throw new Error("all values in "+Ae+" must be integers");if(Ne>=ie.data.length||Ne<-ie.data.length)throw new Error(Ae+" must be valid indices for gd.data.");if(ge.indexOf(Ne,we+1)>-1||Ne>=0&&ge.indexOf(-ie.data.length+Ne)>-1||Ne<0&&ge.indexOf(ie.data.length+Ne)>-1)throw new Error("each index in "+Ae+" must be unique.")}}function R(ie,ge,Ae){if(!Array.isArray(ie.data))throw new Error("gd.data must be an array.");if(ge===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(ge)||(ge=[ge]),P(ie,ge,"currentIndices"),Ae===void 0||Array.isArray(Ae)||(Ae=[Ae]),Ae!==void 0&&P(ie,Ae,"newIndices"),Ae!==void 0&&ge.length!==Ae.length)throw new Error("current and new indices must be of equal length.")}function O(ie,ge,Ae,we,Ne){(function(Xe,Ze,at,lt){var ot=_.isPlainObject(lt);if(!Array.isArray(Xe.data))throw new Error("gd.data must be an array");if(!_.isPlainObject(Ze))throw new Error("update must be a key:value object");if(at===void 0)throw new Error("indices must be an integer or array of integers");for(var bt in P(Xe,at,"indices"),Ze){if(!Array.isArray(Ze[bt])||Ze[bt].length!==at.length)throw new Error("attribute "+bt+" must be an array of length equal to indices array length");if(ot&&(!(bt in lt)||!Array.isArray(lt[bt])||lt[bt].length!==Ze[bt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ie,ge,Ae,we);for(var He=function(Xe,Ze,at,lt){var ot,bt,wt,ht,ct,Tt=_.isPlainObject(lt),Lt=[];for(var kt in Array.isArray(at)||(at=[at]),at=C(at,Xe.data.length-1),Ze)for(var Ot=0;Ot<at.length;Ot++){if(ot=Xe.data[at[Ot]],bt=(wt=g(ot,kt)).get(),ht=Ze[kt][Ot],!_.isArrayOrTypedArray(ht))throw new Error("attribute: "+kt+" index: "+Ot+" must be an array");if(!_.isArrayOrTypedArray(bt))throw new Error("cannot extend missing or non-array attribute: "+kt);if(bt.constructor!==ht.constructor)throw new Error("cannot extend array with an array of a different type: "+kt);ct=Tt?lt[kt][Ot]:lt,b(ct)||(ct=-1),Lt.push({prop:wt,target:bt,insert:ht,maxp:Math.floor(ct)})}return Lt}(ie,ge,Ae,we),de={},Le={},Ee=0;Ee<He.length;Ee++){var Re=He[Ee].prop,je=He[Ee].maxp,Fe=Ne(He[Ee].target,He[Ee].insert,je);Re.set(Fe[0]),Array.isArray(de[Re.astr])||(de[Re.astr]=[]),de[Re.astr].push(Fe[1]),Array.isArray(Le[Re.astr])||(Le[Re.astr]=[]),Le[Re.astr].push(He[Ee].target.length)}return{update:de,maxPoints:Le}}function X(ie,ge){var Ae=new ie.constructor(ie.length+ge.length);return Ae.set(ie),Ae.set(ge,ie.length),Ae}function D(ie,ge,Ae,we){ie=_.getGraphDiv(ie),f.clearPromiseQueue(ie);var Ne={};if(typeof ge=="string")Ne[ge]=Ae;else{if(!_.isPlainObject(ge))return _.warn("Restyle fail.",ge,Ae,we),Promise.reject();Ne=_.extendFlat({},ge),we===void 0&&(we=Ae)}Object.keys(Ne).length&&(ie.changed=!0);var He=f.coerceTraceIndices(ie,we),de=W(ie,Ne,He),Le=de.flags;Le.calc&&(ie.calcdata=void 0),Le.clearAxisTypes&&f.clearAxisTypes(ie,He,{});var Ee=[];Le.fullReplot?Ee.push(L._doPlot):(Ee.push(n.previousPromises),n.supplyDefaults(ie),Le.markerSize&&(n.doCalcdata(ie),K(Ee)),Le.style&&Ee.push(x.doTraceStyle),Le.colorbars&&Ee.push(x.doColorBars),Ee.push(p)),Ee.push(n.rehover,n.redrag,n.reselect),o.add(ie,D,[ie,de.undoit,de.traces],D,[ie,de.redoit,de.traces]);var Re=_.syncOrAsync(Ee,ie);return Re&&Re.then||(Re=Promise.resolve()),Re.then(function(){return ie.emit("plotly_restyle",de.eventData),ie})}function V(ie){return ie===void 0?null:ie}function j(ie,ge){return ge?function(Ae,we,Ne){var He=g(Ae,we),de=He.set;return He.set=function(Le){B((Ne||"")+we,He.get(),Le,ie),de(Le)},He}:g}function B(ie,ge,Ae,we){if(Array.isArray(ge)||Array.isArray(Ae))for(var Ne=Array.isArray(ge)?ge:[],He=Array.isArray(Ae)?Ae:[],de=Math.max(Ne.length,He.length),Le=0;Le<de;Le++)B(ie+"["+Le+"]",Ne[Le],He[Le],we);else if(_.isPlainObject(ge)||_.isPlainObject(Ae)){var Ee=_.isPlainObject(ge)?ge:{},Re=_.isPlainObject(Ae)?Ae:{},je=_.extendFlat({},Ee,Re);for(var Fe in je)B(ie+"."+Fe,Ee[Fe],Re[Fe],we)}else we[ie]===void 0&&(we[ie]=V(ge))}function W(ie,ge,Ae){var we,Ne=ie._fullLayout,He=ie._fullData,de=ie.data,Le=Ne._guiEditing,Ee=j(Ne._preGUI,Le),Re=_.extendDeepAll({},ge);q(ge);var je,Fe=y.traceFlags(),Xe={},Ze={};function at(){return Ae.map(function(){})}function lt(Ut){var Jt=r.id2name(Ut);je.indexOf(Jt)===-1&&je.push(Jt)}function ot(Ut){return"LAYOUT"+Ut+".autorange"}function bt(Ut){return"LAYOUT"+Ut+".range"}function wt(Ut){for(var Jt=Ut;Jt<He.length;Jt++)if(He[Jt]._input===de[Ut])return He[Jt]}function ht(Ut,Jt,Vt){if(Array.isArray(Ut))Ut.forEach(function(gn){ht(gn,Jt,Vt)});else if(!(Ut in ge)&&!f.hasParent(ge,Ut)){var Qt;if(Ut.substr(0,6)==="LAYOUT")Qt=Ee(ie.layout,Ut.replace("LAYOUT",""));else{var qt=Ae[Vt];Qt=j(Ne._tracePreGUI[wt(qt)._fullInput.uid],Le)(de[qt],Ut)}Ut in Ze||(Ze[Ut]=at()),Ze[Ut][Vt]===void 0&&(Ze[Ut][Vt]=V(Qt.get())),Jt!==void 0&&Qt.set(Jt)}}function ct(Ut){return function(Jt){return He[Jt][Ut]}}function Tt(Ut){return function(Jt,Vt){return Jt===!1?He[Ae[Vt]][Ut]:null}}for(var Lt in ge){if(f.hasParent(ge,Lt))throw new Error("cannot set "+Lt+" and a parent attribute simultaneously");var kt,Ot,Pt,et,nt,Ye,tt=ge[Lt];if(Lt!=="autobinx"&&Lt!=="autobiny"||(Lt=Lt.charAt(Lt.length-1)+"bins",tt=Array.isArray(tt)?tt.map(Tt(Lt)):tt===!1?Ae.map(ct(Lt)):null),Xe[Lt]=tt,Lt.substr(0,6)!=="LAYOUT"){for(Ze[Lt]=at(),we=0;we<Ae.length;we++)if(kt=de[Ae[we]],Ot=wt(Ae[we]),et=(Pt=j(Ne._tracePreGUI[Ot._fullInput.uid],Le)(kt,Lt)).get(),(nt=Array.isArray(tt)?tt[we%tt.length]:tt)!==void 0){var ut=Pt.parts[Pt.parts.length-1],Ke=Lt.substr(0,Lt.length-ut.length-1),De=Ke?Ke+".":"",Be=Ke?g(Ot,Ke).get():Ot;if((Ye=i.getTraceValObject(Ot,Pt.parts))&&Ye.impliedEdits&&nt!==null)for(var Qe in Ye.impliedEdits)ht(_.relativeAttr(Lt,Qe),Ye.impliedEdits[Qe],we);else if(ut!=="thicknessmode"&&ut!=="lenmode"||et===nt||nt!=="fraction"&&nt!=="pixels"||!Be){if(Lt==="type"&&(nt==="pie"!=(et==="pie")||nt==="funnelarea"!=(et==="funnelarea"))){var rt="x",vt="y";nt!=="bar"&&et!=="bar"||kt.orientation!=="h"||(rt="y",vt="x"),_.swapAttrs(kt,["?","?src"],"labels",rt),_.swapAttrs(kt,["d?","?0"],"label",rt),_.swapAttrs(kt,["?","?src"],"values",vt),et==="pie"||et==="funnelarea"?(g(kt,"marker.color").set(g(kt,"marker.colors").get()),Ne._pielayer.selectAll("g.trace").remove()):t.traceIs(kt,"cartesian")&&g(kt,"marker.colors").set(g(kt,"marker.color").get())}}else{var mt=Ne._size,xt=Be.orient,dt=xt==="top"||xt==="bottom";if(ut==="thicknessmode"){var Et=dt?mt.h:mt.w;ht(De+"thickness",Be.thickness*(nt==="fraction"?1/Et:Et),we)}else{var pt=dt?mt.w:mt.h;ht(De+"len",Be.len*(nt==="fraction"?1/pt:pt),we)}}if(Ze[Lt][we]=V(et),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Lt)!==-1){if(Lt==="orientation"){Pt.set(nt);var gt=kt.x&&!kt.y?"h":"v";if((Pt.get()||gt)===Ot.orientation)continue}else Lt==="orientationaxes"&&(kt.orientation={v:"h",h:"v"}[Ot.orientation]);f.swapXYData(kt),Fe.calc=Fe.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(Pt.parts[0])!==-1?(f.manageArrayContainers(Pt,nt,Ze),Fe.calc=!0):(Ye?Ye.arrayOk&&!t.traceIs(Ot,"regl")&&(_.isArrayOrTypedArray(nt)||_.isArrayOrTypedArray(et))?Fe.calc=!0:y.update(Fe,Ye):Fe.calc=!0,Pt.set(nt))}if(["swapxyaxes","orientationaxes"].indexOf(Lt)!==-1&&r.swap(ie,Ae),Lt==="orientationaxes"){var Mt=g(ie.layout,"hovermode"),Nt=Mt.get();Nt==="x"?Mt.set("y"):Nt==="y"?Mt.set("x"):Nt==="x unified"?Mt.set("y unified"):Nt==="y unified"&&Mt.set("x unified")}if(["orientation","type"].indexOf(Lt)!==-1){for(je=[],we=0;we<Ae.length;we++){var Bt=de[Ae[we]];t.traceIs(Bt,"cartesian")&&(lt(Bt.xaxis||"x"),lt(Bt.yaxis||"y"))}ht(je.map(ot),!0,0),ht(je.map(bt),[0,1],0)}}else Pt=Ee(ie.layout,Lt.replace("LAYOUT","")),Ze[Lt]=[V(Pt.get())],Pt.set(Array.isArray(tt)?tt[0]:tt),Fe.calc=!0}return(Fe.calc||Fe.plot)&&(Fe.fullReplot=!0),{flags:Fe,undoit:Ze,redoit:Xe,traces:Ae,eventData:_.extendDeepNoArrays([],[Re,Ae])}}function q(ie){var ge,Ae,we,Ne=_.counterRegex("axis",".title",!1,!1),He=/colorbar\.title$/,de=Object.keys(ie);for(ge=0;ge<de.length;ge++)Ae=de[ge],we=ie[Ae],Ae!=="title"&&!Ne.test(Ae)&&!He.test(Ae)||typeof we!="string"&&typeof we!="number"?Ae.indexOf("titlefont")>-1&&Ae.indexOf("grouptitlefont")===-1?Le(Ae,Ae.replace("titlefont","title.font")):Ae.indexOf("titleposition")>-1?Le(Ae,Ae.replace("titleposition","title.position")):Ae.indexOf("titleside")>-1?Le(Ae,Ae.replace("titleside","title.side")):Ae.indexOf("titleoffset")>-1&&Le(Ae,Ae.replace("titleoffset","title.offset")):Le(Ae,Ae.replace("title","title.text"));function Le(Ee,Re){ie[Re]=ie[Ee],delete ie[Ee]}}function re(ie,ge,Ae){ie=_.getGraphDiv(ie),f.clearPromiseQueue(ie);var we={};if(typeof ge=="string")we[ge]=Ae;else{if(!_.isPlainObject(ge))return _.warn("Relayout fail.",ge,Ae),Promise.reject();we=_.extendFlat({},ge)}Object.keys(we).length&&(ie.changed=!0);var Ne=ae(ie,we),He=Ne.flags;He.calc&&(ie.calcdata=void 0);var de=[n.previousPromises];He.layoutReplot?de.push(x.layoutReplot):Object.keys(we).length&&(ee(ie,He,Ne)||n.supplyDefaults(ie),He.legend&&de.push(x.doLegend),He.layoutstyle&&de.push(x.layoutStyles),He.axrange&&K(de,Ne.rangesAltered),He.ticks&&de.push(x.doTicksRelayout),He.modebar&&de.push(x.doModeBar),He.camera&&de.push(x.doCamera),He.colorbars&&de.push(x.doColorBars),de.push(p)),de.push(n.rehover,n.redrag,n.reselect),o.add(ie,re,[ie,Ne.undoit],re,[ie,Ne.redoit]);var Le=_.syncOrAsync(de,ie);return Le&&Le.then||(Le=Promise.resolve(ie)),Le.then(function(){return ie.emit("plotly_relayout",Ne.eventData),ie})}function ee(ie,ge,Ae){var we=ie._fullLayout;if(!ge.axrange)return!1;for(var Ne in ge)if(Ne!=="axrange"&&ge[Ne])return!1;for(var He in Ae.rangesAltered){var de=r.id2name(He),Le=ie.layout[de],Ee=we[de];if(Ee.autorange=Le.autorange,Le.range&&(Ee.range=Le.range.slice()),Ee.cleanRange(),Ee._matchGroup){for(var Re in Ee._matchGroup)if(Re!==He){var je=we[r.id2name(Re)];je.autorange=Ee.autorange,je.range=Ee.range.slice(),je._input.range=Ee.range.slice()}}}return!0}function K(ie,ge){var Ae=ge?function(we){var Ne=[];for(var He in ge){var de=r.getFromId(we,He);if(Ne.push(He),(de.ticklabelposition||"").indexOf("inside")!==-1&&de._anchorAxis&&Ne.push(de._anchorAxis._id),de._matchGroup)for(var Le in de._matchGroup)ge[Le]||Ne.push(Le)}return r.draw(we,Ne,{skipTitle:!0})}:function(we){return r.draw(we,"redraw")};ie.push(c,x.doAutoRangeAndConstraints,Ae,x.drawData,x.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,$=/^[xyz]axis[0-9]*\.autorange$/,ne=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(ie,ge){var Ae,we,Ne,He=ie.layout,de=ie._fullLayout,Le=de._guiEditing,Ee=j(de._preGUI,Le),Re=Object.keys(ge),je=r.list(ie),Fe=_.extendDeepAll({},ge),Xe={};for(q(ge),Re=Object.keys(ge),we=0;we<Re.length;we++)if(Re[we].indexOf("allaxes")===0){for(Ne=0;Ne<je.length;Ne++){var Ze=je[Ne]._id.substr(1),at=Ze.indexOf("scene")!==-1?Ze+".":"",lt=Re[we].replace("allaxes",at+je[Ne]._name);ge[lt]||(ge[lt]=ge[Re[we]])}delete ge[Re[we]]}var ot=y.layoutFlags(),bt={},wt={};function ht(gn,wn){if(Array.isArray(gn))gn.forEach(function(Xt){ht(Xt,wn)});else if(!(gn in ge)&&!f.hasParent(ge,gn)){var hn=Ee(He,gn);gn in wt||(wt[gn]=V(hn.get())),wn!==void 0&&hn.set(wn)}}var ct,Tt={};function Lt(gn){var wn=r.name2id(gn.split(".")[0]);return Tt[wn]=1,wn}for(var kt in ge){if(f.hasParent(ge,kt))throw new Error("cannot set "+kt+" and a parent attribute simultaneously");for(var Ot=Ee(He,kt),Pt=ge[kt],et=Ot.parts.length-1;et>0&&typeof Ot.parts[et]!="string";)et--;var nt=Ot.parts[et],Ye=Ot.parts[et-1]+"."+nt,tt=Ot.parts.slice(0,et).join("."),ut=g(ie.layout,tt).get(),Ke=g(de,tt).get(),De=Ot.get();if(Pt!==void 0){bt[kt]=Pt,wt[kt]=nt==="reverse"?Pt:V(De);var Be=i.getLayoutValObject(de,Ot.parts);if(Be&&Be.impliedEdits&&Pt!==null)for(var Qe in Be.impliedEdits)ht(_.relativeAttr(kt,Qe),Be.impliedEdits[Qe]);if(["width","height"].indexOf(kt)!==-1)if(Pt){ht("autosize",null);var rt=kt==="height"?"width":"height";ht(rt,de[rt])}else de[kt]=ie._initialAutoSize[kt];else if(kt==="autosize")ht("width",Pt?null:de.width),ht("height",Pt?null:de.height);else if(Ye.match(Y))Lt(Ye),g(de,tt+"._inputRange").set(null);else if(Ye.match($)){Lt(Ye),g(de,tt+"._inputRange").set(null);var vt=g(de,tt).get();vt._inputDomain&&(vt._input.domain=vt._inputDomain.slice())}else Ye.match(ne)&&g(de,tt+"._inputDomain").set(null);if(nt==="type"){ct=ut;var mt=Ke.type==="linear"&&Pt==="log",xt=Ke.type==="log"&&Pt==="linear";if(mt||xt){if(ct&&ct.range)if(Ke.autorange)mt&&(ct.range=ct.range[1]>ct.range[0]?[1,2]:[2,1]);else{var dt=ct.range[0],Et=ct.range[1];mt?(dt<=0&&Et<=0&&ht(tt+".autorange",!0),dt<=0?dt=Et/1e6:Et<=0&&(Et=dt/1e6),ht(tt+".range[0]",Math.log(dt)/Math.LN10),ht(tt+".range[1]",Math.log(Et)/Math.LN10)):(ht(tt+".range[0]",Math.pow(10,dt)),ht(tt+".range[1]",Math.pow(10,Et)))}else ht(tt+".autorange",!0);Array.isArray(de._subplots.polar)&&de._subplots.polar.length&&de[Ot.parts[0]]&&Ot.parts[1]==="radialaxis"&&delete de[Ot.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ie,Ke,Pt,ht),t.getComponentMethod("images","convertCoords")(ie,Ke,Pt,ht)}else ht(tt+".autorange",!0),ht(tt+".range",null);g(de,tt+"._inputRange").set(null)}else if(nt.match(v)){var pt=g(de,kt).get(),gt=(Pt||{}).type;gt&&gt!=="-"||(gt="linear"),t.getComponentMethod("annotations","convertCoords")(ie,pt,gt,ht),t.getComponentMethod("images","convertCoords")(ie,pt,gt,ht)}var Mt=m.containerArrayMatch(kt);if(Mt){Ae=Mt.array,we=Mt.index;var Nt=Mt.property,Bt=Be||{editType:"calc"};we!==""&&Nt===""&&(m.isAddVal(Pt)?wt[kt]=null:m.isRemoveVal(Pt)?wt[kt]=(g(He,Ae).get()||[])[we]:_.warn("unrecognized full object value",ge)),y.update(ot,Bt),Xe[Ae]||(Xe[Ae]={});var Ut=Xe[Ae][we];Ut||(Ut=Xe[Ae][we]={}),Ut[Nt]=Pt,delete ge[kt]}else nt==="reverse"?(ut.range?ut.range.reverse():(ht(tt+".autorange",!0),ut.range=[1,0]),Ke.autorange?ot.calc=!0:ot.plot=!0):(kt==="dragmode"&&(Pt===!1&&De!==!1||Pt!==!1&&De===!1)||de._has("scatter-like")&&de._has("regl")&&kt==="dragmode"&&(Pt==="lasso"||Pt==="select")&&De!=="lasso"&&De!=="select"||de._has("gl2d")?ot.plot=!0:Be?y.update(ot,Be):ot.calc=!0,Ot.set(Pt))}}for(Ae in Xe)m.applyContainerArrayChanges(ie,Ee(He,Ae),Xe[Ae],ot,Ee)||(ot.plot=!0);for(var Jt in Tt){var Vt=(ct=r.getFromId(ie,Jt))&&ct._constraintGroup;if(Vt)for(var Qt in ot.calc=!0,Vt)Tt[Qt]||(r.getFromId(ie,Qt)._constraintShrinkable=!0)}(se(ie)||ge.height||ge.width)&&(ot.plot=!0);var qt=de.shapes;for(we=0;we<qt.length;we++)if(qt[we].showlegend){ot.calc=!0;break}return(ot.plot||ot.calc)&&(ot.layoutReplot=!0),{flags:ot,rangesAltered:Tt,undoit:wt,redoit:bt,eventData:Fe}}function se(ie){var ge=ie._fullLayout,Ae=ge.width,we=ge.height;return ie.layout.autosize&&n.plotAutoSize(ie,ie.layout,ge),ge.width!==Ae||ge.height!==we}function ce(ie,ge,Ae,we){ie=_.getGraphDiv(ie),f.clearPromiseQueue(ie),_.isPlainObject(ge)||(ge={}),_.isPlainObject(Ae)||(Ae={}),Object.keys(ge).length&&(ie.changed=!0),Object.keys(Ae).length&&(ie.changed=!0);var Ne=f.coerceTraceIndices(ie,we),He=W(ie,_.extendFlat({},ge),Ne),de=He.flags,Le=ae(ie,_.extendFlat({},Ae)),Ee=Le.flags;(de.calc||Ee.calc)&&(ie.calcdata=void 0),de.clearAxisTypes&&f.clearAxisTypes(ie,Ne,Ae);var Re=[];Ee.layoutReplot?Re.push(x.layoutReplot):de.fullReplot?Re.push(L._doPlot):(Re.push(n.previousPromises),ee(ie,Ee,Le)||n.supplyDefaults(ie),de.style&&Re.push(x.doTraceStyle),(de.colorbars||Ee.colorbars)&&Re.push(x.doColorBars),Ee.legend&&Re.push(x.doLegend),Ee.layoutstyle&&Re.push(x.layoutStyles),Ee.axrange&&K(Re,Le.rangesAltered),Ee.ticks&&Re.push(x.doTicksRelayout),Ee.modebar&&Re.push(x.doModeBar),Ee.camera&&Re.push(x.doCamera),Re.push(p)),Re.push(n.rehover,n.redrag,n.reselect),o.add(ie,ce,[ie,He.undoit,Le.undoit,He.traces],ce,[ie,He.redoit,Le.redoit,He.traces]);var je=_.syncOrAsync(Re,ie);return je&&je.then||(je=Promise.resolve(ie)),je.then(function(){return ie.emit("plotly_update",{data:He.eventData,layout:Le.eventData}),ie})}function me(ie){return function(ge){ge._fullLayout._guiEditing=!0;var Ae=ie.apply(null,arguments);return ge._fullLayout._guiEditing=!1,Ae}}var ye=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Te=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ce(ie,ge){for(var Ae=0;Ae<ge.length;Ae++){var we=ge[Ae],Ne=ie.match(we.pattern);if(Ne){var He=Ne[1]||"";return{head:He,tail:ie.substr(He.length+1),attr:we.attr}}}}function pe(ie,ge){var Ae=g(ge,ie).get();if(Ae!==void 0)return Ae;var we=ie.split(".");for(we.pop();we.length>1;)if(we.pop(),(Ae=g(ge,we.join(".")+".uirevision").get())!==void 0)return Ae;return ge.uirevision}function fe(ie,ge){for(var Ae=0;Ae<ge.length;Ae++)if(ge[Ae]._fullInput.uid===ie)return Ae;return-1}function Oe(ie,ge,Ae){for(var we=0;we<ge.length;we++)if(ge[we].uid===ie)return we;return!ge[Ae]||ge[Ae].uid?-1:Ae}function Se(ie,ge){var Ae=_.isPlainObject(ie),we=Array.isArray(ie);return Ae||we?(Ae&&_.isPlainObject(ge)||we&&Array.isArray(ge))&&JSON.stringify(ie)===JSON.stringify(ge):ie===ge}function Me(ie,ge,Ae,we){var Ne,He,de,Le=we.getValObject,Ee=we.flags,Re=we.immutable,je=we.inArray,Fe=we.arrayIndex;function Xe(){var ut=Ne.editType;je&&ut.indexOf("arraydraw")!==-1?_.pushUnique(Ee.arrays[je],Fe):(y.update(Ee,Ne),ut!=="none"&&Ee.nChanges++,we.transition&&Ne.anim&&Ee.nChangesAnim++,(Y.test(de)||$.test(de))&&(Ee.rangesAltered[Ae[0]]=1),ne.test(de)&&g(ge,"_inputDomain").set(null),He==="datarevision"&&(Ee.newDataRevision=1))}function Ze(ut){return ut.valType==="data_array"||ut.arrayOk}for(He in ie){if(Ee.calc&&!we.transition)return;var at=ie[He],lt=ge[He],ot=Ae.concat(He);if(de=ot.join("."),He.charAt(0)!=="_"&&typeof at!="function"&&at!==lt){if((He==="tick0"||He==="dtick")&&Ae[0]!=="geo"){var bt=ge.tickmode;if(bt==="auto"||bt==="array"||!bt)continue}if((He!=="range"||!ge.autorange)&&(He!=="zmin"&&He!=="zmax"||ge.type!=="contourcarpet")&&(Ne=Le(ot))&&(!Ne._compareAsJSON||JSON.stringify(at)!==JSON.stringify(lt))){var wt,ht=Ne.valType,ct=Ze(Ne),Tt=Array.isArray(at),Lt=Array.isArray(lt);if(Tt&&Lt){var kt="_input_"+He,Ot=ie[kt],Pt=ge[kt];if(Array.isArray(Ot)&&Ot===Pt)continue}if(lt===void 0)ct&&Tt?Ee.calc=!0:Xe();else if(Ne._isLinkedToArray){var et=[],nt=!1;je||(Ee.arrays[He]=et);var Ye=Math.min(at.length,lt.length),tt=Math.max(at.length,lt.length);if(Ye!==tt){if(Ne.editType!=="arraydraw"){Xe();continue}nt=!0}for(wt=0;wt<Ye;wt++)Me(at[wt],lt[wt],ot.concat(wt),_.extendFlat({inArray:He,arrayIndex:wt},we));if(nt)for(wt=Ye;wt<tt;wt++)et.push(wt)}else!ht&&_.isPlainObject(at)?Me(at,lt,ot,we):ct?Tt&&Lt?(Re&&(Ee.calc=!0),(Re||we.newDataRevision)&&Xe()):Tt!==Lt?Ee.calc=!0:Xe():Tt&&Lt&&at.length===lt.length&&String(at)===String(lt)||Xe()}}}for(He in ge)if(!(He in ie)&&He.charAt(0)!=="_"&&typeof ge[He]!="function"){if(Ze(Ne=Le(Ae.concat(He)))&&Array.isArray(ge[He]))return void(Ee.calc=!0);Xe()}}function ue(ie,ge){var Ae;for(Ae in ie)if(Ae.charAt(0)!=="_"){var we=ie[Ae],Ne=ge[Ae];if(we!==Ne)if(_.isPlainObject(we)&&_.isPlainObject(Ne)){if(ue(we,Ne))return!0}else{if(!Array.isArray(we)||!Array.isArray(Ne)||we.length!==Ne.length)return!0;for(var He=0;He<we.length;He++)if(we[He]!==Ne[He]&&(!_.isPlainObject(we[He])||!_.isPlainObject(Ne[He])||ue(we[He],Ne[He])))return!0}}}function le(ie){var ge=ie._fullLayout,Ae=ie.getBoundingClientRect();if(!_.equalDomRects(Ae,ge._lastBBox)){var we=ge._invTransform=_.inverseTransformMatrix(_.getFullTransformMatrix(ie));ge._invScaleX=Math.sqrt(we[0][0]*we[0][0]+we[0][1]*we[0][1]+we[0][2]*we[0][2]),ge._invScaleY=Math.sqrt(we[1][0]*we[1][0]+we[1][1]*we[1][1]+we[1][2]*we[1][2]),ge._lastBBox=Ae}}L.animate=function(ie,ge,Ae){if(ie=_.getGraphDiv(ie),!_.isPlotDiv(ie))throw new Error("This element is not a Plotly plot: "+ie+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var we=ie._transitionData;we._frameQueue||(we._frameQueue=[]);var Ne=(Ae=n.supplyAnimationDefaults(Ae)).transition,He=Ae.frame;function de(Re){return Array.isArray(Ne)?Re>=Ne.length?Ne[0]:Ne[Re]:Ne}function Le(Re){return Array.isArray(He)?Re>=He.length?He[0]:He[Re]:He}function Ee(Re,je){var Fe=0;return function(){if(Re&&++Fe===je)return Re()}}return we._frameWaitingCnt===void 0&&(we._frameWaitingCnt=0),new Promise(function(Re,je){function Fe(){ie.emit("plotly_animating"),we._lastFrameAt=-1/0,we._timeToNext=0,we._runningTransitions=0,we._currentFrame=null;var kt=function(){we._animationRaf=window.requestAnimationFrame(kt),Date.now()-we._lastFrameAt>we._timeToNext&&function(){we._currentFrame&&we._currentFrame.onComplete&&we._currentFrame.onComplete();var Ot=we._currentFrame=we._frameQueue.shift();if(Ot){var Pt=Ot.name?Ot.name.toString():null;ie._fullLayout._currentFrame=Pt,we._lastFrameAt=Date.now(),we._timeToNext=Ot.frameOpts.duration,n.transition(ie,Ot.frame.data,Ot.frame.layout,f.coerceTraceIndices(ie,Ot.frame.traces),Ot.frameOpts,Ot.transitionOpts).then(function(){Ot.onComplete&&Ot.onComplete()}),ie.emit("plotly_animatingframe",{name:Pt,frame:Ot.frame,animation:{frame:Ot.frameOpts,transition:Ot.transitionOpts}})}else ie.emit("plotly_animated"),window.cancelAnimationFrame(we._animationRaf),we._animationRaf=null}()};kt()}var Xe,Ze,at=0;function lt(kt){return Array.isArray(Ne)?at>=Ne.length?kt.transitionOpts=Ne[at]:kt.transitionOpts=Ne[0]:kt.transitionOpts=Ne,at++,kt}var ot=[],bt=ge==null,wt=Array.isArray(ge);if(bt||wt||!_.isPlainObject(ge)){if(bt||["string","number"].indexOf(typeof ge)!==-1)for(Xe=0;Xe<we._frames.length;Xe++)(Ze=we._frames[Xe])&&(bt||String(Ze.group)===String(ge))&&ot.push({type:"byname",name:String(Ze.name),data:lt({name:Ze.name})});else if(wt)for(Xe=0;Xe<ge.length;Xe++){var ht=ge[Xe];["number","string"].indexOf(typeof ht)!==-1?(ht=String(ht),ot.push({type:"byname",name:ht,data:lt({name:ht})})):_.isPlainObject(ht)&&ot.push({type:"object",data:lt(_.extendFlat({},ht))})}}else ot.push({type:"object",data:lt(_.extendFlat({},ge))});for(Xe=0;Xe<ot.length;Xe++)if((Ze=ot[Xe]).type==="byname"&&!we._frameHash[Ze.data.name])return _.warn('animate failure: frame not found: "'+Ze.data.name+'"'),void je();["next","immediate"].indexOf(Ae.mode)!==-1&&function(){if(we._frameQueue.length!==0){for(;we._frameQueue.length;){var kt=we._frameQueue.pop();kt.onInterrupt&&kt.onInterrupt()}ie.emit("plotly_animationinterrupted",[])}}(),Ae.direction==="reverse"&&ot.reverse();var ct=ie._fullLayout._currentFrame;if(ct&&Ae.fromcurrent){var Tt=-1;for(Xe=0;Xe<ot.length;Xe++)if((Ze=ot[Xe]).type==="byname"&&Ze.name===ct){Tt=Xe;break}if(Tt>0&&Tt<ot.length-1){var Lt=[];for(Xe=0;Xe<ot.length;Xe++)Ze=ot[Xe],(ot[Xe].type!=="byname"||Xe>Tt)&&Lt.push(Ze);ot=Lt}}ot.length>0?function(kt){if(kt.length!==0){for(var Ot=0;Ot<kt.length;Ot++){var Pt;Pt=kt[Ot].type==="byname"?n.computeFrame(ie,kt[Ot].name):kt[Ot].data;var et=Le(Ot),nt=de(Ot);nt.duration=Math.min(nt.duration,et.duration);var Ye={frame:Pt,name:kt[Ot].name,frameOpts:et,transitionOpts:nt};Ot===kt.length-1&&(Ye.onComplete=Ee(Re,2),Ye.onInterrupt=je),we._frameQueue.push(Ye)}Ae.mode==="immediate"&&(we._lastFrameAt=-1/0),we._animationRaf||Fe()}}(ot):(ie.emit("plotly_animated"),Re())})},L.addFrames=function(ie,ge,Ae){if(ie=_.getGraphDiv(ie),ge==null)return Promise.resolve();if(!_.isPlotDiv(ie))throw new Error("This element is not a Plotly plot: "+ie+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var we,Ne,He,de,Le=ie._transitionData._frames,Ee=ie._transitionData._frameHash;if(!Array.isArray(ge))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+ge);var Re=Le.length+2*ge.length,je=[],Fe={};for(we=ge.length-1;we>=0;we--)if(_.isPlainObject(ge[we])){var Xe=ge[we].name,Ze=(Ee[Xe]||Fe[Xe]||{}).name,at=ge[we].name,lt=Ee[Ze]||Fe[Ze];Ze&&at&&typeof at=="number"&&lt&&M<5&&(M++,_.warn('addFrames: overwriting frame "'+(Ee[Ze]||Fe[Ze]).name+'" with a frame whose name of type "number" also equates to "'+Ze+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),M===5&&_.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Fe[Xe]={name:Xe},je.push({frame:n.supplyFrameDefaults(ge[we]),index:Ae&&Ae[we]!==void 0&&Ae[we]!==null?Ae[we]:Re+we})}je.sort(function(kt,Ot){return kt.index>Ot.index?-1:kt.index<Ot.index?1:0});var ot=[],bt=[],wt=Le.length;for(we=je.length-1;we>=0;we--){if(typeof(Ne=je[we].frame).name=="number"&&_.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ne.name)for(;Ee[Ne.name="frame "+ie._transitionData._counter++];);if(Ee[Ne.name]){for(He=0;He<Le.length&&(Le[He]||{}).name!==Ne.name;He++);ot.push({type:"replace",index:He,value:Ne}),bt.unshift({type:"replace",index:He,value:Le[He]})}else de=Math.max(0,Math.min(je[we].index,wt)),ot.push({type:"insert",index:de,value:Ne}),bt.unshift({type:"delete",index:de}),wt++}var ht=n.modifyFrames,ct=n.modifyFrames,Tt=[ie,bt],Lt=[ie,ot];return o&&o.add(ie,ht,Tt,ct,Lt),n.modifyFrames(ie,ot)},L.deleteFrames=function(ie,ge){if(ie=_.getGraphDiv(ie),!_.isPlotDiv(ie))throw new Error("This element is not a Plotly plot: "+ie);var Ae,we,Ne=ie._transitionData._frames,He=[],de=[];if(!ge)for(ge=[],Ae=0;Ae<Ne.length;Ae++)ge.push(Ae);for((ge=ge.slice()).sort(),Ae=ge.length-1;Ae>=0;Ae--)we=ge[Ae],He.push({type:"delete",index:we}),de.unshift({type:"insert",index:we,value:Ne[we]});var Le=n.modifyFrames,Ee=n.modifyFrames,Re=[ie,de],je=[ie,He];return o&&o.add(ie,Le,Re,Ee,je),n.modifyFrames(ie,He)},L.addTraces=function ie(ge,Ae,we){ge=_.getGraphDiv(ge);var Ne,He,de=[],Le=L.deleteTraces,Ee=ie,Re=[ge,de],je=[ge,Ae];for(function(Fe,Xe,Ze){var at,lt;if(!Array.isArray(Fe.data))throw new Error("gd.data must be an array.");if(Xe===void 0)throw new Error("traces must be defined.");for(Array.isArray(Xe)||(Xe=[Xe]),at=0;at<Xe.length;at++)if(typeof(lt=Xe[at])!="object"||Array.isArray(lt)||lt===null)throw new Error("all values in traces array must be non-array objects");if(Ze===void 0||Array.isArray(Ze)||(Ze=[Ze]),Ze!==void 0&&Ze.length!==Xe.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(ge,Ae,we),Array.isArray(Ae)||(Ae=[Ae]),Ae=Ae.map(function(Fe){return _.extendFlat({},Fe)}),f.cleanData(Ae),Ne=0;Ne<Ae.length;Ne++)ge.data.push(Ae[Ne]);for(Ne=0;Ne<Ae.length;Ne++)de.push(-Ae.length+Ne);if(we===void 0)return He=L.redraw(ge),o.add(ge,Le,Re,Ee,je),He;Array.isArray(we)||(we=[we]);try{R(ge,de,we)}catch(Fe){throw ge.data.splice(ge.data.length-Ae.length,Ae.length),Fe}return o.startSequence(ge),o.add(ge,Le,Re,Ee,je),He=L.moveTraces(ge,de,we),o.stopSequence(ge),He},L.deleteTraces=function ie(ge,Ae){ge=_.getGraphDiv(ge);var we,Ne,He=[],de=L.addTraces,Le=ie,Ee=[ge,He,Ae],Re=[ge,Ae];if(Ae===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ae)||(Ae=[Ae]),P(ge,Ae,"indices"),(Ae=C(Ae,ge.data.length-1)).sort(_.sorterDes),we=0;we<Ae.length;we+=1)Ne=ge.data.splice(Ae[we],1)[0],He.push(Ne);var je=L.redraw(ge);return o.add(ge,de,Ee,Le,Re),je},L.extendTraces=function ie(ge,Ae,we,Ne){var He=O(ge=_.getGraphDiv(ge),Ae,we,Ne,function(Ee,Re,je){var Fe,Xe;if(_.isTypedArray(Ee))if(je<0){var Ze=new Ee.constructor(0),at=X(Ee,Re);je<0?(Fe=at,Xe=Ze):(Fe=Ze,Xe=at)}else if(Fe=new Ee.constructor(je),Xe=new Ee.constructor(Ee.length+Re.length-je),je===Re.length)Fe.set(Re),Xe.set(Ee);else if(je<Re.length){var lt=Re.length-je;Fe.set(Re.subarray(lt)),Xe.set(Ee),Xe.set(Re.subarray(0,lt),Ee.length)}else{var ot=je-Re.length,bt=Ee.length-ot;Fe.set(Ee.subarray(bt)),Fe.set(Re,ot),Xe.set(Ee.subarray(0,bt))}else Fe=Ee.concat(Re),Xe=je>=0&&je<Fe.length?Fe.splice(0,Fe.length-je):[];return[Fe,Xe]}),de=L.redraw(ge),Le=[ge,He.update,we,He.maxPoints];return o.add(ge,L.prependTraces,Le,ie,arguments),de},L.moveTraces=function ie(ge,Ae,we){var Ne,He=[],de=[],Le=ie,Ee=ie,Re=[ge=_.getGraphDiv(ge),we,Ae],je=[ge,Ae,we];if(R(ge,Ae,we),Ae=Array.isArray(Ae)?Ae:[Ae],we===void 0)for(we=[],Ne=0;Ne<Ae.length;Ne++)we.push(-Ae.length+Ne);for(we=Array.isArray(we)?we:[we],Ae=C(Ae,ge.data.length-1),we=C(we,ge.data.length-1),Ne=0;Ne<ge.data.length;Ne++)Ae.indexOf(Ne)===-1&&He.push(ge.data[Ne]);for(Ne=0;Ne<Ae.length;Ne++)de.push({newIndex:we[Ne],trace:ge.data[Ae[Ne]]});for(de.sort(function(Xe,Ze){return Xe.newIndex-Ze.newIndex}),Ne=0;Ne<de.length;Ne+=1)He.splice(de[Ne].newIndex,0,de[Ne].trace);ge.data=He;var Fe=L.redraw(ge);return o.add(ge,Le,Re,Ee,je),Fe},L.prependTraces=function ie(ge,Ae,we,Ne){var He=O(ge=_.getGraphDiv(ge),Ae,we,Ne,function(Ee,Re,je){var Fe,Xe;if(_.isTypedArray(Ee))if(je<=0){var Ze=new Ee.constructor(0),at=X(Re,Ee);je<0?(Fe=at,Xe=Ze):(Fe=Ze,Xe=at)}else if(Fe=new Ee.constructor(je),Xe=new Ee.constructor(Ee.length+Re.length-je),je===Re.length)Fe.set(Re),Xe.set(Ee);else if(je<Re.length){var lt=Re.length-je;Fe.set(Re.subarray(0,lt)),Xe.set(Re.subarray(lt)),Xe.set(Ee,lt)}else{var ot=je-Re.length;Fe.set(Re),Fe.set(Ee.subarray(0,ot),Re.length),Xe.set(Ee.subarray(ot))}else Fe=Re.concat(Ee),Xe=je>=0&&je<Fe.length?Fe.splice(je,Fe.length):[];return[Fe,Xe]}),de=L.redraw(ge),Le=[ge,He.update,we,He.maxPoints];return o.add(ge,L.extendTraces,Le,ie,arguments),de},L.newPlot=function(ie,ge,Ae,we){return ie=_.getGraphDiv(ie),n.cleanPlot([],{},ie._fullData||[],ie._fullLayout||{}),n.purge(ie),L._doPlot(ie,ge,Ae,we)},L._doPlot=function(ie,ge,Ae,we){var Ne;if(ie=_.getGraphDiv(ie),h.init(ie),_.isPlainObject(ge)){var He=ge;ge=He.data,Ae=He.layout,we=He.config,Ne=He.frames}if(h.triggerHandler(ie,"plotly_beforeplot",[ge,Ae,we])===!1)return Promise.reject();ge||Ae||_.isPlotDiv(ie)||_.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ie),k(ie,we),Ae||(Ae={}),T.select(ie).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(ie._promises)||(ie._promises=[]);var de=(ie.data||[]).length===0&&Array.isArray(ge);Array.isArray(ge)&&(f.cleanData(ge),de?ie.data=ge:ie.data.push.apply(ie.data,ge),ie.empty=!1),ie.layout&&!de||(ie.layout=f.cleanLayout(Ae)),n.supplyDefaults(ie);var Le=ie._fullLayout,Ee=Le._has("cartesian");Le._replotting=!0,(de||Le._shouldCreateBgLayer)&&(function(bt){var wt=T.select(bt),ht=bt._fullLayout;if(ht._calcInverseTransform=le,ht._calcInverseTransform(bt),ht._container=wt.selectAll(".plot-container").data([0]),ht._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ht._paperdiv=ht._container.selectAll(".svg-container").data([0]),ht._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ht._glcontainer=ht._paperdiv.selectAll(".gl-container").data([{}]),ht._glcontainer.enter().append("div").classed("gl-container",!0),ht._paperdiv.selectAll(".main-svg").remove(),ht._paperdiv.select(".modebar-container").remove(),ht._paper=ht._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ht._toppaper=ht._paperdiv.append("svg").classed("main-svg",!0),ht._modebardiv=ht._paperdiv.append("div"),delete ht._modeBar,ht._hoverpaper=ht._paperdiv.append("svg").classed("main-svg",!0),!ht._uid){var ct={};T.selectAll("defs").each(function(){this.id&&(ct[this.id.split("-")[1]]=1)}),ht._uid=_.randstr(ct)}ht._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),ht._defs=ht._paper.append("defs").attr("id","defs-"+ht._uid),ht._clips=ht._defs.append("g").classed("clips",!0),ht._topdefs=ht._toppaper.append("defs").attr("id","topdefs-"+ht._uid),ht._topclips=ht._topdefs.append("g").classed("clips",!0),ht._bgLayer=ht._paper.append("g").classed("bglayer",!0),ht._draggers=ht._paper.append("g").classed("draglayer",!0);var Tt=ht._paper.append("g").classed("layer-below",!0);ht._imageLowerLayer=Tt.append("g").classed("imagelayer",!0),ht._shapeLowerLayer=Tt.append("g").classed("shapelayer",!0),ht._cartesianlayer=ht._paper.append("g").classed("cartesianlayer",!0),ht._polarlayer=ht._paper.append("g").classed("polarlayer",!0),ht._smithlayer=ht._paper.append("g").classed("smithlayer",!0),ht._ternarylayer=ht._paper.append("g").classed("ternarylayer",!0),ht._geolayer=ht._paper.append("g").classed("geolayer",!0),ht._funnelarealayer=ht._paper.append("g").classed("funnelarealayer",!0),ht._pielayer=ht._paper.append("g").classed("pielayer",!0),ht._iciclelayer=ht._paper.append("g").classed("iciclelayer",!0),ht._treemaplayer=ht._paper.append("g").classed("treemaplayer",!0),ht._sunburstlayer=ht._paper.append("g").classed("sunburstlayer",!0),ht._indicatorlayer=ht._toppaper.append("g").classed("indicatorlayer",!0),ht._glimages=ht._paper.append("g").classed("glimages",!0);var Lt=ht._toppaper.append("g").classed("layer-above",!0);ht._imageUpperLayer=Lt.append("g").classed("imagelayer",!0),ht._shapeUpperLayer=Lt.append("g").classed("shapelayer",!0),ht._selectionLayer=ht._toppaper.append("g").classed("selectionlayer",!0),ht._infolayer=ht._toppaper.append("g").classed("infolayer",!0),ht._menulayer=ht._toppaper.append("g").classed("menulayer",!0),ht._zoomlayer=ht._toppaper.append("g").classed("zoomlayer",!0),ht._hoverlayer=ht._hoverpaper.append("g").classed("hoverlayer",!0),ht._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),bt.emit("plotly_framework")}(ie),Le._shouldCreateBgLayer&&delete Le._shouldCreateBgLayer),s.initGradients(ie),s.initPatterns(ie),de&&r.saveShowSpikeInitial(ie);var Re=!ie.calcdata||ie.calcdata.length!==(ie._fullData||[]).length;Re&&n.doCalcdata(ie);for(var je=0;je<ie.calcdata.length;je++)ie.calcdata[je][0].trace=ie._fullData[je];ie._context.responsive?ie._responsiveChartHandler||(ie._responsiveChartHandler=function(){_.isHidden(ie)||n.resize(ie)},window.addEventListener("resize",ie._responsiveChartHandler)):_.clearResponsive(ie);var Fe=_.extendFlat({},Le._size),Xe=0;function Ze(){if(n.clearAutoMarginIds(ie),x.drawMarginPushers(ie),r.allowAutoMargin(ie),ie._fullLayout.title.text&&ie._fullLayout.title.automargin&&n.allowAutoMargin(ie,"title.automargin"),Le._has("pie"))for(var bt=ie._fullData,wt=0;wt<bt.length;wt++){var ht=bt[wt];ht.type==="pie"&&ht.automargin&&n.allowAutoMargin(ie,"pie."+ht.uid+".automargin")}return n.doAutoMargin(ie),n.previousPromises(ie)}function at(){ie._transitioning||(x.doAutoRangeAndConstraints(ie),de&&r.saveRangeInitial(ie),t.getComponentMethod("rangeslider","calcAutorange")(ie))}var lt=[n.previousPromises,function(){if(Ne)return L.addFrames(ie,Ne)},function bt(){for(var wt=Le._basePlotModules,ht=0;ht<wt.length;ht++)wt[ht].drawFramework&&wt[ht].drawFramework(ie);!Le._glcanvas&&Le._has("gl")&&(Le._glcanvas=Le._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(kt){return kt.key}),Le._glcanvas.enter().append("canvas").attr("class",function(kt){return"gl-canvas gl-canvas-"+kt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var ct=ie._context.plotGlPixelRatio;if(Le._glcanvas){Le._glcanvas.attr("width",Le.width*ct).attr("height",Le.height*ct).style("width",Le.width+"px").style("height",Le.height+"px");var Tt=Le._glcanvas.data()[0].regl;if(Tt&&(Math.floor(Le.width*ct)!==Tt._gl.drawingBufferWidth||Math.floor(Le.height*ct)!==Tt._gl.drawingBufferHeight)){var Lt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Xe)return _.log(Lt+" Clearing graph and plotting again."),n.cleanPlot([],{},ie._fullData,Le),n.supplyDefaults(ie),Le=ie._fullLayout,n.doCalcdata(ie),Xe++,bt();_.error(Lt)}}return Le.modebar.orientation==="h"?Le._modebardiv.style("height",null).style("width","100%"):Le._modebardiv.style("width",null).style("height",Le.height+"px"),n.previousPromises(ie)},Ze,function(){if(n.didMarginChange(Fe,Le._size))return _.syncOrAsync([Ze,x.layoutStyles],ie)}];Ee&&lt.push(function(){if(Re)return _.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),at],ie);at()}),lt.push(x.layoutStyles),Ee&&lt.push(function(){return r.draw(ie,de?"":"redraw")},function(bt){bt._fullLayout._insideTickLabelsAutorange&&re(bt,bt._fullLayout._insideTickLabelsAutorange).then(function(){bt._fullLayout._insideTickLabelsAutorange=void 0})}),lt.push(x.drawData,x.finalDraw,u,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,function(bt){bt._fullLayout._insideTickLabelsAutorange&&de&&r.saveRangeInitial(bt,!0)},n.previousPromises);var ot=_.syncOrAsync(lt,ie);return ot&&ot.then||(ot=Promise.resolve()),ot.then(function(){return p(ie),ie})},L.purge=function(ie){var ge=(ie=_.getGraphDiv(ie))._fullLayout||{},Ae=ie._fullData||[];return n.cleanPlot([],{},Ae,ge),n.purge(ie),h.purge(ie),ge._container&&ge._container.remove(),delete ie._context,ie},L.react=function(ie,ge,Ae,we){var Ne,He;ie=_.getGraphDiv(ie),f.clearPromiseQueue(ie);var de=ie._fullData,Le=ie._fullLayout;if(_.isPlotDiv(ie)&&de&&Le){if(_.isPlainObject(ge)){var Ee=ge;ge=Ee.data,Ae=Ee.layout,we=Ee.config,Ne=Ee.frames}var Re=!1;if(we){var je=_.extendDeep({},ie._context);ie._context=void 0,k(ie,we),Re=ue(je,ie._context)}ie.data=ge||[],f.cleanData(ie.data),ie.layout=Ae||{},f.cleanLayout(ie.layout),function(tt,ut,Ke,De){var Be,Qe,rt,vt,mt,xt,dt,Et,pt,gt,Mt=De._preGUI,Nt=[],Bt={},Ut={};for(Be in Mt){if(mt=Ce(Be,ye)){if(pt=mt.head,gt=mt.tail,Qe=mt.attr||pt+".uirevision",(vt=(rt=g(De,Qe).get())&&pe(Qe,ut))&&vt===rt){if((xt=Mt[Be])===null&&(xt=void 0),Se(Et=(dt=g(ut,Be)).get(),xt)){Et===void 0&&gt==="autorange"&&Nt.push(pt),dt.set(V(g(De,Be).get()));continue}if(gt==="autorange"||gt.substr(0,6)==="range["){var Jt=Mt[pt+".range[0]"],Vt=Mt[pt+".range[1]"],Qt=Mt[pt+".autorange"];if(Qt||Qt===null&&Jt===null&&Vt===null){if(!(pt in Bt)){var qt=g(ut,pt).get();Bt[pt]=qt&&(qt.autorange||qt.autorange!==!1&&(!qt.range||qt.range.length!==2))}if(Bt[pt]){dt.set(V(g(De,Be).get()));continue}}}}}else _.warn("unrecognized GUI edit: "+Be);delete Mt[Be],mt&&mt.tail.substr(0,6)==="range["&&(Ut[mt.head]=1)}for(var gn=0;gn<Nt.length;gn++){var wn=Nt[gn];if(Ut[wn]){var hn=g(ut,wn).get();hn&&delete hn.autorange}}var Xt=De._tracePreGUI;for(var an in Xt){var tn,cn=Xt[an],vn=null;for(Be in cn){if(!vn){var yn=fe(an,Ke);if(yn<0){delete Xt[an];break}var Pn=Oe(an,tt,(tn=Ke[yn]._fullInput).index);if(Pn<0){delete Xt[an];break}vn=tt[Pn]}if(mt=Ce(Be,Te)){if(mt.attr?vt=(rt=g(De,mt.attr).get())&&pe(mt.attr,ut):(rt=tn.uirevision,(vt=vn.uirevision)===void 0&&(vt=ut.uirevision)),vt&&vt===rt&&((xt=cn[Be])===null&&(xt=void 0),Se(Et=(dt=g(vn,Be)).get(),xt))){dt.set(V(g(tn,Be).get()));continue}}else _.warn("unrecognized GUI edit: "+Be+" in trace uid "+an);delete cn[Be]}}}(ie.data,ie.layout,de,Le),n.supplyDefaults(ie,{skipUpdateCalc:!0});var Fe=ie._fullData,Xe=ie._fullLayout,Ze=Xe.datarevision===void 0,at=Xe.transition,lt=function(tt,ut,Ke,De,Be){var Qe=y.layoutFlags();return Qe.arrays={},Qe.rangesAltered={},Qe.nChanges=0,Qe.nChangesAnim=0,Me(ut,Ke,[],{getValObject:function(rt){return i.getLayoutValObject(Ke,rt)},flags:Qe,immutable:De,transition:Be,gd:tt}),(Qe.plot||Qe.calc)&&(Qe.layoutReplot=!0),Be&&Qe.nChanges&&Qe.nChangesAnim&&(Qe.anim=Qe.nChanges===Qe.nChangesAnim?"all":"some"),Qe}(ie,Le,Xe,Ze,at),ot=lt.newDataRevision,bt=function(tt,ut,Ke,De,Be,Qe){var rt=ut.length===Ke.length;if(!Be&&!rt)return{fullReplot:!0,calc:!0};var vt,mt,xt=y.traceFlags();xt.arrays={},xt.nChanges=0,xt.nChangesAnim=0;var dt={getValObject:function(pt){var gt=i.getTraceValObject(mt,pt);return!mt._module.animatable&&gt.anim&&(gt.anim=!1),gt},flags:xt,immutable:De,transition:Be,newDataRevision:Qe,gd:tt},Et={};for(vt=0;vt<ut.length;vt++)if(Ke[vt]){if(mt=Ke[vt]._fullInput,n.hasMakesDataTransform(mt)&&(mt=Ke[vt]),Et[mt.uid])continue;Et[mt.uid]=1,Me(ut[vt]._fullInput,mt,[],dt)}return(xt.calc||xt.plot)&&(xt.fullReplot=!0),Be&&xt.nChanges&&xt.nChangesAnim&&(xt.anim=xt.nChanges===xt.nChangesAnim&&rt?"all":"some"),xt}(ie,de,Fe,Ze,at,ot);if(se(ie)&&(lt.layoutReplot=!0),bt.calc||lt.calc){ie.calcdata=void 0;for(var wt=Object.getOwnPropertyNames(Xe),ht=0;ht<wt.length;ht++){var ct=wt[ht],Tt=ct.substring(0,5);if(Tt==="xaxis"||Tt==="yaxis"){var Lt=Xe[ct]._emptyCategories;Lt&&Lt()}}}else n.supplyDefaultsUpdateCalc(ie.calcdata,Fe);var kt=[];if(Ne&&(ie._transitionData={},n.createTransitionData(ie),kt.push(function(){return L.addFrames(ie,Ne)})),Xe.transition&&!Re&&(bt.anim||lt.anim))lt.ticks&&kt.push(x.doTicksRelayout),n.doCalcdata(ie),x.doAutoRangeAndConstraints(ie),kt.push(function(){return n.transitionFromReact(ie,bt,lt,Le)});else if(bt.fullReplot||lt.layoutReplot||Re)ie._fullLayout._skipDefaults=!0,kt.push(L._doPlot);else{for(var Ot in lt.arrays){var Pt=lt.arrays[Ot];if(Pt.length){var et=t.getComponentMethod(Ot,"drawOne");if(et!==_.noop)for(var nt=0;nt<Pt.length;nt++)et(ie,Pt[nt]);else{var Ye=t.getComponentMethod(Ot,"draw");if(Ye===_.noop)throw new Error("cannot draw components: "+Ot);Ye(ie)}}}kt.push(n.previousPromises),bt.style&&kt.push(x.doTraceStyle),(bt.colorbars||lt.colorbars)&&kt.push(x.doColorBars),lt.legend&&kt.push(x.doLegend),lt.layoutstyle&&kt.push(x.layoutStyles),lt.axrange&&K(kt),lt.ticks&&kt.push(x.doTicksRelayout),lt.modebar&&kt.push(x.doModeBar),lt.camera&&kt.push(x.doCamera),kt.push(p)}kt.push(n.rehover,n.redrag,n.reselect),(He=_.syncOrAsync(kt,ie))&&He.then||(He=Promise.resolve(ie))}else He=L.newPlot(ie,ge,Ae,we);return He.then(function(){return ie.emit("plotly_react",{data:ge,layout:Ae}),ie})},L.redraw=function(ie){if(ie=_.getGraphDiv(ie),!_.isPlotDiv(ie))throw new Error("This element is not a Plotly plot: "+ie);return f.cleanData(ie.data),f.cleanLayout(ie.layout),ie.calcdata=void 0,L._doPlot(ie).then(function(){return ie.emit("plotly_redraw"),ie})},L.relayout=re,L.restyle=D,L.setPlotConfig=function(ie){return _.extendFlat(w,ie)},L.update=ce,L._guiRelayout=me(re),L._guiRestyle=me(D),L._guiUpdate=me(ce),L._storeDirectGUIEdit=function(ie,ge,Ae){for(var we in Ae)B(we,g(ie,we).get(),Ae[we],ge)}},72075:function(F){var L={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function T(b,a){for(var _ in b){var g=b[_];g.valType?a[_]=g.dflt:(a[_]||(a[_]={}),T(g,a[_]))}})(L,e),F.exports={configAttributes:L,dfltConfig:e}},86281:function(F,L,e){var T=e(73972),b=e(71828),a=e(9012),_=e(10820),g=e(31391),h=e(85594),o=e(72075).configAttributes,t=e(30962),i=b.extendDeepAll,n=b.isPlainObject,r=b.isArrayOrTypedArray,s=b.nestedProperty,l=b.valObjectMeta,u="_isSubplotObj",d="_isLinkedToArray",c="_deprecated",w=[u,d,"_arrayAttrRegexps",c];function m(p,S,A){if(!p)return!1;if(p._isLinkedToArray){if(f(S[A]))A++;else if(A<S.length)return!1}for(;A<S.length;A++){var k=p[S[A]];if(!n(k)||(p=k,A===S.length-1))break;if(p._isLinkedToArray){if(!f(S[++A]))return!1}else if(p.valType==="info_array"){var C=S[++A];if(!f(C))return!1;var P=p.items;if(Array.isArray(P)){if(C>=P.length)return!1;if(p.dimensions===2){if(A++,S.length===A)return p;var R=S[A];if(!f(R))return!1;p=P[C][R]}else p=P[C]}else p=P}}return p}function f(p){return p===Math.round(p)&&p>=0}function x(){var p,S,A={};for(p in i(A,_),T.subplotsRegistry)if((S=T.subplotsRegistry[p]).layoutAttributes)if(Array.isArray(S.attr))for(var k=0;k<S.attr.length;k++)v(A,S,S.attr[k]);else v(A,S,S.attr==="subplot"?S.name:S.attr);for(p in T.componentsRegistry){var C=(S=T.componentsRegistry[p]).schema;if(C&&(C.subplots||C.layout)){var P=C.subplots;if(P&&P.xaxis&&!P.yaxis)for(var R in P.xaxis)delete A.yaxis[R];delete A.xaxis.shift,delete A.xaxis.autoshift}else S.name==="colorscale"?i(A,S.layoutAttributes):S.layoutAttributes&&M(A,S.layoutAttributes,S.name)}return{layoutAttributes:y(A)}}function y(p){return function(S){L.crawl(S,function(A,k,C){L.isValObject(A)?A.arrayOk!==!0&&A.valType!=="data_array"||(C[k+"src"]={valType:"string",editType:"none"}):n(A)&&(A.role="object")})}(p),function(S){L.crawl(S,function(A,k,C){if(A){var P=A[d];P&&(delete A[d],C[k]={items:{}},C[k].items[P]=A,C[k].role="object")}})}(p),function(S){(function A(k){for(var C in k)if(n(k[C]))A(k[C]);else if(Array.isArray(k[C]))for(var P=0;P<k[C].length;P++)A(k[C][P]);else k[C]instanceof RegExp&&(k[C]=k[C].toString())})(S)}(p),p}function v(p,S,A){var k=s(p,A),C=i({},S.layoutAttributes);C[u]=!0,k.set(C)}function M(p,S,A){var k=s(p,A);k.set(i(k.get()||{},S))}L.IS_SUBPLOT_OBJ=u,L.IS_LINKED_TO_ARRAY=d,L.DEPRECATED=c,L.UNDERSCORE_ATTRS=w,L.get=function(){var p={};T.allTypes.forEach(function(k){p[k]=function(C){var P,R;R=(P=T.modules[C]._module).basePlotModule;var O={type:null},X=i({},a),D=i({},P.attributes);L.crawl(D,function(B,W,q,re,ee){s(X,ee).set(void 0),B===void 0&&s(D,ee).set(void 0)}),i(O,X),T.traceIs(C,"noOpacity")&&delete O.opacity,T.traceIs(C,"showLegend")||(delete O.showlegend,delete O.legendgroup),T.traceIs(C,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel),P.selectPoints||delete O.selectedpoints,i(O,D),R.attributes&&i(O,R.attributes),O.type=C;var V={meta:P.meta||{},categories:P.categories||{},animatable:!!P.animatable,type:C,attributes:y(O)};if(P.layoutAttributes){var j={};i(j,P.layoutAttributes),V.layoutAttributes=y(j)}return P.animatable||L.crawl(V,function(B){L.isValObject(B)&&"anim"in B&&delete B.anim}),V}(k)});var S,A={};return Object.keys(T.transformsRegistry).forEach(function(k){A[k]=function(C){var P=T.transformsRegistry[C],R=i({},P.attributes);return Object.keys(T.componentsRegistry).forEach(function(O){var X=T.componentsRegistry[O];X.schema&&X.schema.transforms&&X.schema.transforms[C]&&Object.keys(X.schema.transforms[C]).forEach(function(D){M(R,X.schema.transforms[C][D],D)})}),{attributes:y(R)}}(k)}),{defs:{valObjects:l,metaKeys:w.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:p,layout:x(),transforms:A,frames:(S={frames:i({},g)},y(S),S.frames),animation:y(h),config:y(o)}},L.crawl=function(p,S,A,k){var C=A||0;k=k||"",Object.keys(p).forEach(function(P){var R=p[P];if(w.indexOf(P)===-1){var O=(k?k+".":"")+P;S(R,P,p,C,O),L.isValObject(R)||n(R)&&P!=="impliedEdits"&&L.crawl(R,S,C+1,O)}})},L.isValObject=function(p){return p&&p.valType!==void 0},L.findArrayAttributes=function(p){var S,A,k=[],C=[],P=[];function R(B,W,q,re){C=C.slice(0,re).concat([W]),P=P.slice(0,re).concat([B&&B._isLinkedToArray]),B&&(B.valType==="data_array"||B.arrayOk===!0)&&(C[re-1]!=="colorbar"||W!=="ticktext"&&W!=="tickvals")&&O(S,0,"")}function O(B,W,q){var re=B[C[W]],ee=q+C[W];if(W===C.length-1)r(re)&&k.push(A+ee);else if(P[W]){if(Array.isArray(re))for(var K=0;K<re.length;K++)n(re[K])&&O(re[K],W+1,ee+"["+K+"].")}else n(re)&&O(re,W+1,ee+".")}S=p,A="",L.crawl(a,R),p._module&&p._module.attributes&&L.crawl(p._module.attributes,R);var X=p.transforms;if(X)for(var D=0;D<X.length;D++){var V=X[D],j=V._module;j&&(A="transforms["+D+"].",S=V,L.crawl(j.attributes,R))}return k},L.getTraceValObject=function(p,S){var A,k,C=S[0],P=1;if(C==="transforms"){if(S.length===1)return a.transforms;var R=p.transforms;if(!Array.isArray(R)||!R.length)return!1;var O=S[1];if(!f(O)||O>=R.length)return!1;k=(A=(T.transformsRegistry[R[O].type]||{}).attributes)&&A[S[2]],P=3}else{var X=p._module;if(X||(X=(T.modules[p.type||a.type.dflt]||{})._module),!X)return!1;if(!(k=(A=X.attributes)&&A[C])){var D=X.basePlotModule;D&&D.attributes&&(k=D.attributes[C])}k||(k=a[C])}return m(k,S,P)},L.getLayoutValObject=function(p,S){var A=function(k,C){var P,R,O,X,D=k._basePlotModules;if(D){var V;for(P=0;P<D.length;P++){if((O=D[P]).attrRegex&&O.attrRegex.test(C)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;!V&&O.layoutAttributes&&(V=O.layoutAttributes)}var j=O.baseLayoutAttrOverrides;if(j&&C in j)return j[C]}if(V)return V}var B=k._modules;if(B){for(P=0;P<B.length;P++)if((X=B[P].layoutAttributes)&&C in X)return X[C]}for(R in T.componentsRegistry){if((O=T.componentsRegistry[R]).name==="colorscale"&&C.indexOf("coloraxis")===0)return O.layoutAttributes[C];if(!O.schema&&C===O.name)return O.layoutAttributes}return C in _&&_[C]}(p,S[0]);return m(A,S,1)}},44467:function(F,L,e){var T=e(71828),b=e(9012),a="templateitemname",_={name:{valType:"string",editType:"none"}};function g(o){return o&&typeof o=="string"}function h(o){var t=o.length-1;return o.charAt(t)!=="s"&&T.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}_[a]={valType:"string",editType:"calc"},L.templatedArray=function(o,t){return t._isLinkedToArray=o,t.name=_.name,t[a]=_[a],t},L.traceTemplater=function(o){var t,i,n={};for(t in o)i=o[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(r){var s={type:t=T.coerce(r,{},b,"type"),_template:null};if(t in n){i=o[t];var l=n[t]%i.length;n[t]++,s._template=i[l]}return s}}},L.newContainer=function(o,t,i){var n=o._template,r=n&&(n[t]||i&&n[i]);return T.isPlainObject(r)||(r=null),o[t]={_template:r}},L.arrayTemplater=function(o,t,i){var n=o._template,r=n&&n[h(t)],s=n&&n[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(u){var d={name:u.name,_input:u},c=d[a]=u[a];if(!g(c))return d._template=r,d;for(var w=0;w<s.length;w++){var m=s[w];if(m.name===c)return l[c]=1,d._template=m,d}return d[i]=u[i]||!1,d._template=!1,d},defaultItems:function(){for(var u=[],d=0;d<s.length;d++){var c=s[d],w=c.name;if(g(w)&&!l[w]){var m={_template:c,name:w,_input:{_templateitemname:w}};m[a]=c[a],u.push(m),l[w]=1}}return u}}},L.arrayDefaultKey=h,L.arrayEditor=function(o,t,i){var n=(T.nestedProperty(o,t).get()||[]).length,r=i._index,s=r>=n&&(i._input||{})._templateitemname;s&&(r=n);var l,u=t+"["+r+"]";function d(){l={},s&&(l[u]={},l[u][a]=s)}function c(m,f){s?T.nestedProperty(l[u],m).set(f):l[u+"."+m]=f}function w(){var m=l;return d(),m}return d(),{modifyBase:function(m,f){l[m]=f},modifyItem:c,getUpdateObj:w,applyUpdate:function(m,f){m&&c(m,f);var x=w();for(var y in x)T.nestedProperty(o,y).set(x[y])}}}},61549:function(F,L,e){var T=e(39898),b=e(73972),a=e(74875),_=e(71828),g=e(63893),h=e(33306),o=e(7901),t=e(91424),i=e(92998),n=e(64168),r=e(89298),s=e(18783),l=e(99082),u=l.enforce,d=l.clean,c=e(71739).doAutoRange,w="start";function m(M,p,S){for(var A=0;A<S.length;A++){var k=S[A][0],C=S[A][1];if(!(k[0]>=M[1]||k[1]<=M[0])&&C[0]<p[1]&&C[1]>p[0])return!0}return!1}function f(M){var p,S,A,k,C,P,R=M._fullLayout,O=R._size,X=O.p,D=r.list(M,"",!0);if(R._paperdiv.style({width:M._context.responsive&&R.autosize&&!M._context._hasZeroWidth&&!M.layout.width?"100%":R.width+"px",height:M._context.responsive&&R.autosize&&!M._context._hasZeroHeight&&!M.layout.height?"100%":R.height+"px"}).selectAll(".main-svg").call(t.setSize,R.width,R.height),M._context.setBackground(M,R.paper_bgcolor),L.drawMainTitle(M),n.manage(M),!R._has("cartesian"))return a.previousPromises(M);function V(Fe,Xe,Ze){var at=Fe._lw/2;return Fe._id.charAt(0)==="x"?Xe?Ze==="top"?Xe._offset-X-at:Xe._offset+Xe._length+X+at:O.t+O.h*(1-(Fe.position||0))+at%1:Xe?Ze==="right"?Xe._offset+Xe._length+X+at:Xe._offset-X-at:O.l+O.w*(Fe.position||0)+at%1}for(p=0;p<D.length;p++){var j=(k=D[p])._anchorAxis;k._linepositions={},k._lw=t.crispRound(M,k.linewidth,1),k._mainLinePosition=V(k,j,k.side),k._mainMirrorPosition=k.mirror&&j?V(k,j,s.OPPOSITE_SIDE[k.side]):null}var B=[],W=[],q=[],re=o.opacity(R.paper_bgcolor)===1&&o.opacity(R.plot_bgcolor)===1&&R.paper_bgcolor===R.plot_bgcolor;for(S in R._plots)if((A=R._plots[S]).mainplot)A.bg&&A.bg.remove(),A.bg=void 0;else{var ee=A.xaxis.domain,K=A.yaxis.domain,Y=A.plotgroup;if(m(ee,K,q)){var $=Y.node(),ne=A.bg=_.ensureSingle(Y,"rect","bg");$.insertBefore(ne.node(),$.childNodes[0]),W.push(S)}else Y.select("rect.bg").remove(),q.push([ee,K]),re||(B.push(S),W.push(S))}var ae,se,ce,me,ye,Te,Ce,pe,fe,Oe,Se,Me,ue,le=R._bgLayer.selectAll(".bg").data(B);for(le.enter().append("rect").classed("bg",!0),le.exit().remove(),le.each(function(Fe){R._plots[Fe].bg=T.select(this)}),p=0;p<W.length;p++)A=R._plots[W[p]],C=A.xaxis,P=A.yaxis,A.bg&&C._offset!==void 0&&P._offset!==void 0&&A.bg.call(t.setRect,C._offset-X,P._offset-X,C._length+2*X,P._length+2*X).call(o.fill,R.plot_bgcolor).style("stroke-width",0);if(!R._hasOnlyLargeSploms)for(S in R._plots){A=R._plots[S],C=A.xaxis,P=A.yaxis;var ie,ge,Ae=A.clipId="clip"+R._uid+S+"plot",we=_.ensureSingleById(R._clips,"clipPath",Ae,function(Fe){Fe.classed("plotclip",!0).append("rect")});A.clipRect=we.select("rect").attr({width:C._length,height:P._length}),t.setTranslate(A.plot,C._offset,P._offset),A._hasClipOnAxisFalse?(ie=null,ge=Ae):(ie=Ae,ge=null),t.setClipUrl(A.plot,ie,M),A.layerClipId=ge}function Ne(Fe){return"M"+ae+","+Fe+"H"+se}function He(Fe){return"M"+C._offset+","+Fe+"h"+C._length}function de(Fe){return"M"+Fe+","+pe+"V"+Ce}function Le(Fe){return P._shift!==void 0&&(Fe+=P._shift),"M"+Fe+","+P._offset+"v"+P._length}function Ee(Fe,Xe,Ze){if(!Fe.showline||S!==Fe._mainSubplot)return"";if(!Fe._anchorAxis)return Ze(Fe._mainLinePosition);var at=Xe(Fe._mainLinePosition);return Fe.mirror&&(at+=Xe(Fe._mainMirrorPosition)),at}for(S in R._plots){A=R._plots[S],C=A.xaxis,P=A.yaxis;var Re="M0,0";x(C,S)&&(ye=v(C,"left",P,D),ae=C._offset-(ye?X+ye:0),Te=v(C,"right",P,D),se=C._offset+C._length+(Te?X+Te:0),ce=V(C,P,"bottom"),me=V(C,P,"top"),!(ue=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ce,me]),Re=Ee(C,Ne,He),ue&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Re+=Ne(ce)+Ne(me)),A.xlines.style("stroke-width",C._lw+"px").call(o.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),A.xlines.attr("d",Re);var je="M0,0";x(P,S)&&(Se=v(P,"bottom",C,D),Ce=P._offset+P._length+(Se?X:0),Me=v(P,"top",C,D),pe=P._offset-(Me?X:0),fe=V(P,C,"left"),Oe=V(P,C,"right"),!(ue=!P._anchorAxis||S!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[S]=[fe,Oe]),je=Ee(P,de,Le),ue&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(je+=de(fe)+de(Oe)),A.ylines.style("stroke-width",P._lw+"px").call(o.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),A.ylines.attr("d",je)}return r.makeClipPaths(M),a.previousPromises(M)}function x(M,p){return(M.ticks||M.showline)&&(p===M._mainSubplot||M.mirror==="all"||M.mirror==="allticks")}function y(M,p,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var A=S._anchorAxis;if(!A)return!1;var k=s.FROM_BL[p];return S.side===p?A.domain[k]===M.domain[k]:S.mirror&&A.domain[1-k]===M.domain[1-k]}function v(M,p,S,A){if(y(M,p,S))return S._lw;for(var k=0;k<A.length;k++){var C=A[k];if(C._mainAxis===S._mainAxis&&y(M,p,C))return C._lw}return 0}L.layoutStyles=function(M){return _.syncOrAsync([a.doAutoMargin,f],M)},L.drawMainTitle=function(M){var p,S=M._fullLayout.title,A=M._fullLayout,k=function(V){var j=V.title,B="middle";return _.isRightAnchor(j)?B="end":_.isLeftAnchor(j)&&(B=w),B}(A),C=function(V){var j=V.title,B="0em";return _.isTopAnchor(j)?B=s.CAP_SHIFT+"em":_.isMiddleAnchor(j)&&(B=s.MID_SHIFT+"em"),B}(A),P=function(V,j){var B=V.title,W=V._size,q=0;return j!=="0em"&&j?j===s.CAP_SHIFT+"em"&&(q=B.pad.t):q=-B.pad.b,B.y==="auto"?W.t/2:B.yref==="paper"?W.t+W.h-W.h*B.y+q:V.height-V.height*B.y+q}(A,C),R=function(V,j){var B=V.title,W=V._size,q=0;return j===w?q=B.pad.l:j==="end"&&(q=-B.pad.r),B.xref==="paper"?W.l+W.w*B.x+q:V.width*B.x+q}(A,k);if(i.draw(M,"gtitle",{propContainer:A,propName:"title.text",placeholder:A._dfltTitle.plot,attributes:{x:R,y:P,"text-anchor":k,dy:C}}),S.text&&S.automargin){var O=T.selectAll(".gtitle"),X=t.bBox(O.node()).height,D=function(V,j,B){var W=j.y,q=j.yanchor,re=W>.5?"t":"b",ee=V._fullLayout.margin[re],K=0;return j.yref==="paper"?K=B+j.pad.t+j.pad.b:j.yref==="container"&&(K=function(Y,$,ne,ae,se){var ce=0;return ne==="middle"&&(ce+=se/2),Y==="t"?(ne==="top"&&(ce+=se),ce+=ae-$*ae):(ne==="bottom"&&(ce+=se),ce+=$*ae),ce}(re,W,q,V._fullLayout.height,B)+j.pad.t+j.pad.b),K>ee?K:0}(M,S,X);D>0&&(function(V,j,B,W){var q="title.automargin",re=V._fullLayout.title,ee=re.y>.5?"t":"b",K={x:re.x,y:re.y,t:0,b:0},Y={};re.yref==="paper"&&function($,ne,ae,se,ce){var me=ne.yref==="paper"?$._fullLayout._size.h:$._fullLayout.height,ye=_.isTopAnchor(ne)?se:se-ce,Te=ae==="b"?me-ye:ye;return!(_.isTopAnchor(ne)&&ae==="t"||_.isBottomAnchor(ne)&&ae==="b")&&Te<ce}(V,re,ee,j,W)?K[ee]=B:re.yref==="container"&&(Y[ee]=B,V._fullLayout._reservedMargin[q]=Y),a.allowAutoMargin(V,q),a.autoMargin(V,q,K)}(M,P,D,X),O.attr({x:R,y:P,"text-anchor":k,dy:(p=S.yanchor,p==="top"?s.CAP_SHIFT+.3+"em":p==="bottom"?"-0.3em":s.MID_SHIFT+"em")}).call(g.positionText,R,P))}},L.doTraceStyle=function(M){var p,S=M.calcdata,A=[];for(p=0;p<S.length;p++){var k=S[p],C=k[0]||{},P=C.trace||{},R=P._module||{},O=R.arraysToCalcdata;O&&O(k,P);var X=R.editStyle;X&&A.push({fn:X,cd0:C})}if(A.length){for(p=0;p<A.length;p++){var D=A[p];D.fn(M,D.cd0)}h(M),L.redrawReglTraces(M)}return a.style(M),b.getComponentMethod("legend","draw")(M),a.previousPromises(M)},L.doColorBars=function(M){return b.getComponentMethod("colorbar","draw")(M),a.previousPromises(M)},L.layoutReplot=function(M){var p=M.layout;return M.layout=void 0,b.call("_doPlot",M,"",p)},L.doLegend=function(M){return b.getComponentMethod("legend","draw")(M),a.previousPromises(M)},L.doTicksRelayout=function(M){return r.draw(M,"redraw"),M._fullLayout._hasOnlyLargeSploms&&(b.subplotsRegistry.splom.updateGrid(M),h(M),L.redrawReglTraces(M)),L.drawMainTitle(M),a.previousPromises(M)},L.doModeBar=function(M){var p=M._fullLayout;n.manage(M);for(var S=0;S<p._basePlotModules.length;S++){var A=p._basePlotModules[S].updateFx;A&&A(M)}return a.previousPromises(M)},L.doCamera=function(M){for(var p=M._fullLayout,S=p._subplots.gl3d,A=0;A<S.length;A++){var k=p[S[A]];k._scene.setViewport(k)}},L.drawData=function(M){var p=M._fullLayout;h(M);for(var S=p._basePlotModules,A=0;A<S.length;A++)S[A].plot(M);return L.redrawReglTraces(M),a.style(M),b.getComponentMethod("selections","draw")(M),b.getComponentMethod("shapes","draw")(M),b.getComponentMethod("annotations","draw")(M),b.getComponentMethod("images","draw")(M),p._replotting=!1,a.previousPromises(M)},L.redrawReglTraces=function(M){var p=M._fullLayout;if(p._has("regl")){var S,A,k=M._fullData,C=[],P=[];for(p._hasOnlyLargeSploms&&p._splomGrid.draw(),S=0;S<k.length;S++){var R=k[S];R.visible===!0&&R._length!==0&&(R.type==="splom"?p._splomScenes[R.uid].draw():R.type==="scattergl"?_.pushUnique(C,R.xaxis+R.yaxis):R.type==="scatterpolargl"&&_.pushUnique(P,R.subplot))}for(S=0;S<C.length;S++)(A=p._plots[C[S]])._scene&&A._scene.draw();for(S=0;S<P.length;S++)(A=p[P[S]]._subplot)._scene&&A._scene.draw()}},L.doAutoRangeAndConstraints=function(M){for(var p,S=r.list(M,"",!0),A={},k=0;k<S.length;k++)if(!A[(p=S[k])._id]){A[p._id]=1,d(M,p),c(M,p);var C=p._matchGroup;if(C)for(var P in C){var R=r.getFromId(M,P);c(M,R,p.range),A[P]=1}}u(M)},L.finalDraw=function(M){b.getComponentMethod("rangeslider","draw")(M),b.getComponentMethod("rangeselector","draw")(M)},L.drawMarginPushers=function(M){b.getComponentMethod("legend","draw")(M),b.getComponentMethod("rangeselector","draw")(M),b.getComponentMethod("sliders","draw")(M),b.getComponentMethod("updatemenus","draw")(M),b.getComponentMethod("colorbar","draw")(M)}},96318:function(F,L,e){var T=e(71828),b=T.isPlainObject,a=e(86281),_=e(74875),g=e(9012),h=e(44467),o=e(72075).dfltConfig;function t(c,w){c=T.extendDeep({},c);var m,f,x=Object.keys(c).sort();function y(A,k,C){if(b(k)&&b(A))t(A,k);else if(Array.isArray(k)&&Array.isArray(A)){var P=h.arrayTemplater({_template:c},C);for(f=0;f<k.length;f++){var R=k[f],O=P.newItem(R)._template;O&&t(O,R)}var X=P.defaultItems();for(f=0;f<X.length;f++)k.push(X[f]._template);for(f=0;f<k.length;f++)delete k[f].templateitemname}}for(m=0;m<x.length;m++){var v=x[m],M=c[v];if(v in w?y(M,w[v],v):w[v]=M,i(v)===v)for(var p in w){var S=i(p);p===S||S!==v||p in c||y(M,w[p],v)}}}function i(c){return c.replace(/[0-9]+$/,"")}function n(c,w,m,f,x){var y=x&&m(x);for(var v in c){var M=c[v],p=l(c,v,f),S=l(c,v,x),A=m(S);if(!A){var k=i(v);k!==v&&(A=m(S=l(c,k,x)))}if(!(y&&y===A||!A||A._noTemplating||A.valType==="data_array"||A.arrayOk&&Array.isArray(M)))if(!A.valType&&b(M))n(M,w,m,p,S);else if(A._isLinkedToArray&&Array.isArray(M))for(var C=!1,P=0,R={},O=0;O<M.length;O++){var X=M[O];if(b(X)){var D=X.name;if(D)R[D]||(n(X,w,m,l(M,P,p),l(M,P,S)),P++,R[D]=1);else if(!C){var V=l(c,h.arrayDefaultKey(v),f),j=l(M,P,p);n(X,w,m,j,l(M,P,S));var B=T.nestedProperty(w,j);T.nestedProperty(w,V).set(B.get()),B.set(null),C=!0}}}else T.nestedProperty(w,p).set(M)}}function r(c,w){return a.getLayoutValObject(c,T.nestedProperty({},w).parts)}function s(c,w){return a.getTraceValObject(c,T.nestedProperty({},w).parts)}function l(c,w,m){return m?Array.isArray(c)?m+"["+w+"]":m+"."+w:w}function u(c){for(var w=0;w<c.length;w++)if(b(c[w]))return!0}function d(c){var w;switch(c.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":w=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":w=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=w,c}L.makeTemplate=function(c){c=T.isPlainObject(c)?c:T.getGraphDiv(c),c=T.extendDeep({_context:o},{data:c.data,layout:c.layout}),_.supplyDefaults(c);var w=c.data||[],m=c.layout||{};m._basePlotModules=c._fullLayout._basePlotModules,m._modules=c._fullLayout._modules;var f={data:{},layout:{}};w.forEach(function(P){var R={};n(P,R,s.bind(null,P));var O=T.coerce(P,{},g,"type"),X=f.data[O];X||(X=f.data[O]=[]),X.push(R)}),n(m,f.layout,r.bind(null,m)),delete f.layout.template;var x=m.template;if(b(x)){var y,v,M,p,S,A,k=x.layout;b(k)&&t(k,f.layout);var C=x.data;if(b(C)){for(v in f.data)if(M=C[v],Array.isArray(M)){for(A=(S=f.data[v]).length,p=M.length,y=0;y<A;y++)t(M[y%p],S[y]);for(y=A;y<p;y++)S.push(T.extendDeep({},M[y]))}for(v in C)v in f.data||(f.data[v]=T.extendDeep([],C[v]))}}return f},L.validateTemplate=function(c,w){var m=T.extendDeep({},{_context:o,data:c.data,layout:c.layout}),f=m.layout||{};b(w)||(w=f.template||{});var x=w.layout,y=w.data,v=[];m.layout=f,m.layout.template=w,_.supplyDefaults(m);var M=m._fullLayout,p=m._fullData,S={};if(b(x)?(function X(D,V){for(var j in D)if(j.charAt(0)!=="_"&&b(D[j])){var B,W=i(j),q=[];for(B=0;B<V.length;B++)q.push(l(D,j,V[B])),W!==j&&q.push(l(D,W,V[B]));for(B=0;B<q.length;B++)S[q[B]]=1;X(D[j],q)}}(M,["layout"]),function X(D,V){for(var j in D)if(j.indexOf("defaults")===-1&&b(D[j])){var B=l(D,j,V);S[B]?X(D[j],B):v.push({code:"unused",path:B})}}(x,"layout")):v.push({code:"layout"}),b(y)){for(var A,k={},C=0;C<p.length;C++){var P=p[C];k[A=P.type]=(k[A]||0)+1,P._fullInput._template||v.push({code:"missing",index:P._fullInput.index,traceType:A})}for(A in y){var R=y[A].length,O=k[A]||0;R>O?v.push({code:"unused",traceType:A,templateCount:R,dataCount:O}):O>R&&v.push({code:"reused",traceType:A,templateCount:R,dataCount:O})}}else v.push({code:"data"});if(function X(D,V){for(var j in D)if(j.charAt(0)!=="_"){var B=D[j],W=l(D,j,V);b(B)?(Array.isArray(D)&&B._template===!1&&B.templateitemname&&v.push({code:"missing",path:W,templateitemname:B.templateitemname}),X(B,W)):Array.isArray(B)&&u(B)&&X(B,W)}}({data:p,layout:M},""),v.length)return v.map(d)}},403:function(F,L,e){var T=e(92770),b=e(72391),a=e(74875),_=e(71828),g=e(25095),h=e(5900),o=e(70942),t=e(11506).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};F.exports=function(n,r){var s,l,u,d;function c(O){return!(O in r)||_.validate(r[O],i[O])}if(r=r||{},_.isPlainObject(n)?(s=n.data||[],l=n.layout||{},u=n.config||{},d={}):(n=_.getGraphDiv(n),s=_.extendDeep([],n.data),l=_.extendDeep({},n.layout),u=n._context,d=n._fullLayout||{}),!c("width")&&r.width!==null||!c("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+_.join2(i.format.values,", "," or ")+".");var w={};function m(O,X){return _.coerce(r,w,i,O,X)}var f=m("format"),x=m("width"),y=m("height"),v=m("scale"),M=m("setBackground"),p=m("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var A=_.extendFlat({},l);x?A.width=x:r.width===null&&T(d.width)&&(A.width=d.width),y?A.height=y:r.height===null&&T(d.height)&&(A.height=d.height);var k=_.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),C=g.getRedrawFunc(S);function P(){return new Promise(function(O){setTimeout(O,g.getDelay(S._fullLayout))})}function R(){return new Promise(function(O,X){var D=h(S,f,v),V=S._fullLayout.width,j=S._fullLayout.height;function B(){b.purge(S),document.body.removeChild(S)}if(f==="full-json"){var W=a.graphJson(S,!1,"keepdata","object",!0,!0);return W.version=t,W=JSON.stringify(W),B(),O(p?W:g.encodeJSON(W))}if(B(),f==="svg")return O(p?D:g.encodeSVG(D));var q=document.createElement("canvas");q.id=_.randstr(),o({format:f,width:V,height:j,scale:v,canvas:q,svg:D,promise:!0}).then(O).catch(X)})}return new Promise(function(O,X){b.newPlot(S,s,A,k).then(C).then(P).then(R).then(function(D){O(function(V){return p?V.replace(g.IMAGE_URL_PREFIX,""):V}(D))}).catch(function(D){X(D)})})}},84936:function(F,L,e){var T=e(71828),b=e(74875),a=e(86281),_=e(72075).dfltConfig,g=T.isPlainObject,h=Array.isArray,o=T.isArrayOrTypedArray;function t(c,w,m,f,x,y){y=y||[];for(var v=Object.keys(c),M=0;M<v.length;M++){var p=v[M];if(p!=="transforms"){var S=y.slice();S.push(p);var A=c[p],k=w[p],C=l(m,p),P=(C||{}).valType,R=P==="info_array",O=P==="colorscale",X=(C||{}).items;if(s(m,p))if(g(A)&&g(k)&&P!=="any")t(A,k,C,f,x,S);else if(R&&h(A)){A.length>k.length&&f.push(r("unused",x,S.concat(k.length)));var D,V,j,B,W,q=k.length,re=Array.isArray(X);if(re&&(q=Math.min(q,X.length)),C.dimensions===2)for(V=0;V<q;V++)if(h(A[V])){A[V].length>k[V].length&&f.push(r("unused",x,S.concat(V,k[V].length)));var ee=k[V].length;for(D=0;D<(re?Math.min(ee,X[V].length):ee);D++)j=re?X[V][D]:X,B=A[V][D],W=k[V][D],T.validate(B,j)?W!==B&&W!==+B&&f.push(r("dynamic",x,S.concat(V,D),B,W)):f.push(r("value",x,S.concat(V,D),B))}else f.push(r("array",x,S.concat(V),A[V]));else for(V=0;V<q;V++)j=re?X[V]:X,B=A[V],W=k[V],T.validate(B,j)?W!==B&&W!==+B&&f.push(r("dynamic",x,S.concat(V),B,W)):f.push(r("value",x,S.concat(V),B))}else if(C.items&&!R&&h(A)){var K,Y,$=X[Object.keys(X)[0]],ne=[];for(K=0;K<k.length;K++){var ae=k[K]._index||K;if((Y=S.slice()).push(ae),g(A[ae])&&g(k[K])){ne.push(ae);var se=A[ae],ce=k[K];g(se)&&se.visible!==!1&&ce.visible===!1?f.push(r("invisible",x,Y)):t(se,ce,$,f,x,Y)}}for(K=0;K<A.length;K++)(Y=S.slice()).push(K),g(A[K])?ne.indexOf(K)===-1&&f.push(r("unused",x,Y)):f.push(r("object",x,Y,A[K]))}else!g(A)&&g(k)?f.push(r("object",x,S,A)):o(A)||!o(k)||R||O?p in w?T.validate(A,C)?C.valType==="enumerated"&&(C.coerceNumber&&A!==+k||A!==k)&&f.push(r("dynamic",x,S,A,k)):f.push(r("value",x,S,A)):f.push(r("unused",x,S,A)):f.push(r("array",x,S,A));else f.push(r("schema",x,S))}}return f}F.exports=function(c,w){c===void 0&&(c=[]),w===void 0&&(w={});var m,f,x=a.get(),y=[],v={_context:T.extendFlat({},_)};h(c)?(v.data=T.extendDeep([],c),m=c):(v.data=[],m=[],y.push(r("array","data"))),g(w)?(v.layout=T.extendDeep({},w),f=w):(v.layout={},f={},arguments.length>1&&y.push(r("object","layout"))),b.supplyDefaults(v);for(var M=v._fullData,p=m.length,S=0;S<p;S++){var A=m[S],k=["data",S];if(g(A)){var C=M[S],P=C.type,R=x.traces[P].attributes;R.type={valType:"enumerated",values:[P]},C.visible===!1&&A.visible!==!1&&y.push(r("invisible",k)),t(A,C,R,y,k);var O=A.transforms,X=C.transforms;if(O){h(O)||y.push(r("array",k,["transforms"])),k.push("transforms");for(var D=0;D<O.length;D++){var V=["transforms",D],j=O[D].type;if(g(O[D])){var B=x.transforms[j]?x.transforms[j].attributes:{};B.type={valType:"enumerated",values:Object.keys(x.transforms)},t(O[D],X[D],B,y,k,V)}else y.push(r("object",k,V))}}}else y.push(r("object",k))}var W=v._fullLayout,q=function(re,ee){for(var K=re.layout.layoutAttributes,Y=0;Y<ee.length;Y++){var $=ee[Y],ne=re.traces[$.type],ae=ne.layoutAttributes;ae&&($.subplot?T.extendFlat(K[ne.attributes.subplot.dflt],ae):T.extendFlat(K,ae))}return K}(x,M);return t(f,W,q,y,"layout"),y.length===0?void 0:y};var i={object:function(c,w){return(c==="layout"&&w===""?"The layout argument":c[0]==="data"&&w===""?"Trace "+c[1]+" in the data argument":n(c)+"key "+w)+" must be linked to an object container"},array:function(c,w){return(c==="data"?"The data argument":n(c)+"key "+w)+" must be linked to an array container"},schema:function(c,w){return n(c)+"key "+w+" is not part of the schema"},unused:function(c,w,m){var f=g(m)?"container":"key";return n(c)+f+" "+w+" did not get coerced"},dynamic:function(c,w,m,f){return[n(c)+"key",w,"(set to '"+m+"')","got reset to","'"+f+"'","during defaults."].join(" ")},invisible:function(c,w){return(w?n(c)+"item "+w:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,w,m){return[n(c)+"key "+w,"is set to an invalid value ("+m+")"].join(" ")}};function n(c){return h(c)?"In data trace "+c[1]+", ":"In "+c+", "}function r(c,w,m,f,x){var y,v;m=m||"",h(w)?(y=w[0],v=w[1]):(y=w,v=null);var M=function(S){if(!h(S))return String(S);for(var A="",k=0;k<S.length;k++){var C=S[k];typeof C=="number"?A=A.substr(0,A.length-1)+"["+C+"]":A+=C,k<S.length-1&&(A+=".")}return A}(m),p=i[c](w,M,f,x);return T.log(p),{code:c,container:y,trace:v,path:m,astr:M,msg:p}}function s(c,w){var m=d(w),f=m.keyMinusId,x=m.id;return!!(f in c&&c[f]._isSubplotObj&&x)||w in c}function l(c,w){return w in c?c[w]:c[d(w).keyMinusId]}var u=T.counterRegex("([a-z]+)");function d(c){var w=c.match(u);return{keyMinusId:w&&w[1],id:w&&w[2]}}},85594:function(F){F.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(F,L,e){var T=e(71828),b=e(44467);F.exports=function(a,_,g){var h,o,t=g.name,i=g.inclusionAttr||"visible",n=_[t],r=T.isArrayOrTypedArray(a[t])?a[t]:[],s=_[t]=[],l=b.arrayTemplater(_,t,i);for(h=0;h<r.length;h++){var u=r[h];T.isPlainObject(u)?o=l.newItem(u):(o=l.newItem({}))[i]=!1,o._index=h,o[i]!==!1&&g.handleItemDefaults(u,o,_,g),s.push(o)}var d=l.defaultItems();for(h=0;h<d.length;h++)(o=d[h])._index=s.length,g.handleItemDefaults({},o,_,g,{}),s.push(o);if(T.isArrayOrTypedArray(n)){var c=Math.min(n.length,s.length);for(h=0;h<c;h++)T.relinkPrivateKeys(s[h],n[h])}return s}},9012:function(F,L,e){var T=e(41940),b=e(77914);F.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:T({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(F,L,e){var T=e(92770),b=e(71828),a=b.dateTime2ms,_=b.incrementMonth,g=e(50606).ONEAVGMONTH;F.exports=function(h,o,t,i){if(o.type!=="date")return{vals:i};var n=h[t+"periodalignment"];if(!n)return{vals:i};var r,s=h[t+"period"];if(T(s)){if((s=+s)<=0)return{vals:i}}else if(typeof s=="string"&&s.charAt(0)==="M"){var l=+s.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};r=l}for(var u=o.calendar,d=n==="start",c=n==="end",w=h[t+"period0"],m=a(w,u)||0,f=[],x=[],y=[],v=i.length,M=0;M<v;M++){var p,S,A,k=i[M];if(r){for(p=Math.round((k-m)/(r*g)),A=_(m,r*p,u);A>k;)A=_(A,-r,u);for(;A<=k;)A=_(A,r,u);S=_(A,-r,u)}else{for(A=m+(p=Math.round((k-m)/s))*s;A>k;)A-=s;for(;A<=k;)A+=s;S=A-s}f[M]=d?S:c?A:(S+A)/2,x[M]=S,y[M]=A}return{vals:f,starts:x,ends:y}}},89502:function(F){F.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(F,L,e){var T=e(39898),b=e(92770),a=e(71828),_=e(50606).FP_SAFE,g=e(73972),h=e(91424),o=e(41675),t=o.getFromId,i=o.isLinked;function n(y,v){var M,p,S=[],A=y._fullLayout,k=s(A,v,0),C=s(A,v,1),P=u(y,v),R=P.min,O=P.max;if(R.length===0||O.length===0)return a.simpleMap(v.range,v.r2l);var X=R[0].val,D=O[0].val;for(M=1;M<R.length&&X===D;M++)X=Math.min(X,R[M].val);for(M=1;M<O.length&&X===D;M++)D=Math.max(D,O[M].val);var V=!1;if(v.range){var j=a.simpleMap(v.range,v.r2l);V=j[1]<j[0]}v.autorange==="reversed"&&(V=!0,v.autorange=!0);var B,W,q,re,ee,K,Y=v.rangemode,$=Y==="tozero",ne=Y==="nonnegative",ae=v._length,se=ae/10,ce=0;for(M=0;M<R.length;M++)for(B=R[M],p=0;p<O.length;p++)(K=(W=O[p]).val-B.val-r(v,B.val,W.val))>0&&((ee=ae-k(B)-C(W))>se?K/ee>ce&&(q=B,re=W,ce=K/ee):K/ae>ce&&(q={val:B.val,nopad:1},re={val:W.val,nopad:1},ce=K/ae));if(X===D){var me=X-1,ye=X+1;if($)if(X===0)S=[0,1];else{var Te=(X>0?O:R).reduce(function(pe,fe){return Math.max(pe,C(fe))},0),Ce=X/(1-Math.min(.5,Te/ae));S=X>0?[0,Ce]:[Ce,0]}else S=ne?[Math.max(0,me),Math.max(1,ye)]:[me,ye]}else $?(q.val>=0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:0,nopad:1})):ne&&(q.val-ce*k(q)<0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:1,nopad:1})),ce=(re.val-q.val-r(v,B.val,W.val))/(ae-k(q)-C(re)),S=[q.val-ce*k(q),re.val+ce*C(re)];return V&&S.reverse(),a.simpleMap(S,v.l2r||Number)}function r(y,v,M){var p=0;if(y.rangebreaks)for(var S=y.locateBreaks(v,M),A=0;A<S.length;A++){var k=S[A];p+=k.max-k.min}return p}function s(y,v,M){var p=.05*v._length,S=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(S.ticklabelposition||"").indexOf("inside")!==-1){var A=v.autorange==="reversed";if(!A){var k=a.simpleMap(v.range,v.r2l);A=k[1]<k[0]}A&&(M=!M)}var C=0;return i(y,v._id)||(C=function(P,R,O){var X=0,D=R._id.charAt(0)==="x";for(var V in P._plots){var j=P._plots[V];if(R._id===j.xaxis._id||R._id===j.yaxis._id){var B=(D?j.yaxis:j.xaxis)||{};if((B.ticklabelposition||"").indexOf("inside")!==-1&&(!O&&(B.side==="left"||B.side==="bottom")||O&&(B.side==="top"||B.side==="right"))){if(B._vals){var W=a.deg2rad(B._tickAngles[B._id+"tick"]||0),q=Math.abs(Math.cos(W)),re=Math.abs(Math.sin(W));if(!B._vals[0].bb){var ee=B._id+"tick";B._selections[ee].each(function(ae){var se=T.select(this);se.select(".text-math-group").empty()&&(ae.bb=h.bBox(se.node()))})}for(var K=0;K<B._vals.length;K++){var Y=B._vals[K].bb;if(Y){var $=2*l+Y.width,ne=2*l+Y.height;X=Math.max(X,D?Math.max($*q,ne*re):Math.max(ne*q,$*re))}}}B.ticks==="inside"&&B.ticklabelposition==="inside"&&(X+=B.ticklen||0)}}}return X}(y,v,M)),p=Math.max(C,p),v.constrain==="domain"&&v._inputDomain&&(p*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?p:C)}}F.exports={getAutoRange:n,makePadFn:s,doAutoRange:function(y,v,M){if(v.setScale(),v.autorange){v.range=M?M.slice():n(y,v),v._r=v.range.slice(),v._rl=a.simpleMap(v._r,v.r2l);var p=v._input,S={};S[v._attr+".range"]=v.range,S[v._attr+".autorange"]=v.autorange,g.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,S),p.range=v.range.slice(),p.autorange=v.autorange}var A=v._anchorAxis;if(A&&A.rangeslider){var k=A.rangeslider[v._name];k&&k.rangemode==="auto"&&(k.range=n(y,v)),A._input.rangeslider[v._name]=a.extendFlat({},k)}},findExtremes:function(y,v,M){M||(M={}),y._m||y.setScale();var p,S,A,k,C,P,R,O,X,D=[],V=[],j=v.length,B=M.padded||!1,W=M.tozero&&(y.type==="linear"||y.type==="-"),q=y.type==="log",re=!1,ee=M.vpadLinearized||!1;function K(ye){if(Array.isArray(ye))return re=!0,function(Ce){return Math.max(Number(ye[Ce]||0),0)};var Te=Math.max(Number(ye||0),0);return function(){return Te}}var Y=K((y._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),$=K((y._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),ne=K(M.vpadplus||M.vpad),ae=K(M.vpadminus||M.vpad);if(!re){if(O=1/0,X=-1/0,q)for(p=0;p<j;p++)(S=v[p])<O&&S>0&&(O=S),S>X&&S<_&&(X=S);else for(p=0;p<j;p++)(S=v[p])<O&&S>-_&&(O=S),S>X&&S<_&&(X=S);v=[O,X],j=2}var se={tozero:W,extrapad:B};function ce(ye){A=v[ye],b(A)&&(P=Y(ye),R=$(ye),ee?(k=y.c2l(A)-ae(ye),C=y.c2l(A)+ne(ye)):(O=A-ae(ye),X=A+ne(ye),q&&O<X/10&&(O=X/10),k=y.c2l(O),C=y.c2l(X)),W&&(k=Math.min(0,k),C=Math.max(0,C)),m(k)&&d(D,k,R,se),m(C)&&c(V,C,P,se))}var me=Math.min(6,j);for(p=0;p<me;p++)ce(p);for(p=j-1;p>=me;p--)ce(p);return{min:D,max:V,opts:M}},concatExtremes:u};var l=3;function u(y,v,M){var p,S,A,k=v._id,C=y._fullData,P=y._fullLayout,R=[],O=[];function X(W,q){for(p=0;p<q.length;p++){var re=W[q[p]],ee=(re._extremes||{})[k];if(re.visible===!0&&ee){for(S=0;S<ee.min.length;S++)A=ee.min[S],d(R,A.val,A.pad,{extrapad:A.extrapad});for(S=0;S<ee.max.length;S++)A=ee.max[S],c(O,A.val,A.pad,{extrapad:A.extrapad})}}}if(X(C,v._traceIndices),X(P.annotations||[],v._annIndices||[]),X(P.shapes||[],v._shapeIndices||[]),v._matchGroup&&!M){for(var D in v._matchGroup)if(D!==v._id){var V=t(y,D),j=u(y,V,!0),B=v._length/V._length;for(S=0;S<j.min.length;S++)A=j.min[S],d(R,A.val,A.pad*B,{extrapad:A.extrapad});for(S=0;S<j.max.length;S++)A=j.max[S],c(O,A.val,A.pad*B,{extrapad:A.extrapad})}}return{min:R,max:O}}function d(y,v,M,p){w(y,v,M,p,f)}function c(y,v,M,p){w(y,v,M,p,x)}function w(y,v,M,p,S){for(var A=p.tozero,k=p.extrapad,C=!0,P=0;P<y.length&&C;P++){var R=y[P];if(S(R.val,v)&&R.pad>=M&&(R.extrapad||!k)){C=!1;break}S(v,R.val)&&R.pad<=M&&(k||!R.extrapad)&&(y.splice(P,1),P--)}if(C){var O=A&&v===0;y.push({val:v,pad:O?0:M,extrapad:!O&&k})}}function m(y){return b(y)&&Math.abs(y)<_}function f(y,v){return y<=v}function x(y,v){return y>=v}},89298:function(F,L,e){var T=e(39898),b=e(92770),a=e(74875),_=e(73972),g=e(71828),h=g.strTranslate,o=e(63893),t=e(92998),i=e(7901),n=e(91424),r=e(13838),s=e(66287),l=e(50606),u=l.ONEMAXYEAR,d=l.ONEAVGYEAR,c=l.ONEMINYEAR,w=l.ONEMAXQUARTER,m=l.ONEAVGQUARTER,f=l.ONEMINQUARTER,x=l.ONEMAXMONTH,y=l.ONEAVGMONTH,v=l.ONEMINMONTH,M=l.ONEWEEK,p=l.ONEDAY,S=p/2,A=l.ONEHOUR,k=l.ONEMIN,C=l.ONESEC,P=l.MINUS_SIGN,R=l.BADNUM,O={K:"zeroline"},X={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},V={K:"tick",L:"path"},j={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},W=e(18783),q=W.MID_SHIFT,re=W.CAP_SHIFT,ee=W.LINE_SPACING,K=W.OPPOSITE_SIDE,Y=F.exports={};Y.setConvert=e(21994);var $=e(4322),ne=e(41675),ae=ne.idSort,se=ne.isLinked;Y.id2name=ne.id2name,Y.name2id=ne.name2id,Y.cleanId=ne.cleanId,Y.list=ne.list,Y.listIds=ne.listIds,Y.getFromId=ne.getFromId,Y.getFromTrace=ne.getFromTrace;var ce=e(71739);Y.getAutoRange=ce.getAutoRange,Y.findExtremes=ce.findExtremes;var me=1e-4;function ye(De){var Be=(De[1]-De[0])*me;return[De[0]-Be,De[1]+Be]}Y.coerceRef=function(De,Be,Qe,rt,vt,mt){var xt=rt.charAt(rt.length-1),dt=Qe._fullLayout._subplots[xt+"axis"],Et=rt+"ref",pt={};return vt||(vt=dt[0]||(typeof mt=="string"?mt:mt[0])),mt||(mt=vt),dt=dt.concat(dt.map(function(gt){return gt+" domain"})),pt[Et]={valType:"enumerated",values:dt.concat(mt?typeof mt=="string"?[mt]:mt:[]),dflt:vt},g.coerce(De,Be,pt,Et)},Y.getRefType=function(De){return De===void 0?De:De==="paper"?"paper":De==="pixel"?"pixel":/( domain)$/.test(De)?"domain":"range"},Y.coercePosition=function(De,Be,Qe,rt,vt,mt){var xt,dt;if(Y.getRefType(rt)!=="range")xt=g.ensureNumber,dt=Qe(vt,mt);else{var Et=Y.getFromId(Be,rt);dt=Qe(vt,mt=Et.fraction2r(mt)),xt=Et.cleanPos}De[vt]=xt(dt)},Y.cleanPosition=function(De,Be,Qe){return(Qe==="paper"||Qe==="pixel"?g.ensureNumber:Y.getFromId(Be,Qe).cleanPos)(De)},Y.redrawComponents=function(De,Be){Be=Be||Y.listIds(De);var Qe=De._fullLayout;function rt(vt,mt,xt,dt){for(var Et=_.getComponentMethod(vt,mt),pt={},gt=0;gt<Be.length;gt++)for(var Mt=Qe[Y.id2name(Be[gt])][xt],Nt=0;Nt<Mt.length;Nt++){var Bt=Mt[Nt];if(!pt[Bt]&&(Et(De,Bt),pt[Bt]=1,dt))return}}rt("annotations","drawOne","_annIndices"),rt("shapes","drawOne","_shapeIndices"),rt("images","draw","_imgIndices",!0),rt("selections","drawOne","_selectionIndices")};var Te=Y.getDataConversions=function(De,Be,Qe,rt){var vt,mt=Qe==="x"||Qe==="y"||Qe==="z"?Qe:rt;if(Array.isArray(mt)){if(vt={type:$(rt,void 0,{autotypenumbers:De._fullLayout.autotypenumbers}),_categories:[]},Y.setConvert(vt),vt.type==="category")for(var xt=0;xt<rt.length;xt++)vt.d2c(rt[xt])}else vt=Y.getFromTrace(De,Be,mt);return vt?{d2c:vt.d2c,c2d:vt.c2d}:mt==="ids"?{d2c:pe,c2d:pe}:{d2c:Ce,c2d:Ce}};function Ce(De){return+De}function pe(De){return String(De)}function fe(De,Be){return Math.abs((De/Be+.5)%1-.5)<.001}function Oe(De,Be){return Math.abs(De/Be-1)<.001}function Se(De){return+De.substring(1)}function Me(De,Be){return De.rangebreaks&&(Be=Be.filter(function(Qe){return De.maskBreaks(Qe.x)!==R})),Be}function ue(De){var Be=De._mainAxis,Qe=[];if(Be._vals){for(var rt=0;rt<Be._vals.length;rt++)if(!Be._vals[rt].noTick){var vt=Be.l2p(Be._vals[rt].x),mt=De.p2l(vt),xt=Y.tickText(De,mt);Be._vals[rt].minor&&(xt.minor=!0,xt.text=""),Qe.push(xt)}}return Me(De,Qe)}function le(De){var Be=ye(g.simpleMap(De.range,De.r2l)),Qe=Math.min(Be[0],Be[1]),rt=Math.max(Be[0],Be[1]),vt=De.type==="category"?De.d2l_noadd:De.d2l;De.type==="log"&&String(De.dtick).charAt(0)!=="L"&&(De.dtick="L"+Math.pow(10,Math.floor(Math.min(De.range[0],De.range[1]))-1));for(var mt=[],xt=0;xt<=1;xt++)if(!xt||De.minor){var dt=xt?De.minor.tickvals:De.tickvals,Et=xt?[]:De.ticktext;if(dt){Array.isArray(Et)||(Et=[]);for(var pt=0;pt<dt.length;pt++){var gt=vt(dt[pt]);if(gt>Qe&&gt<rt){var Mt=Et[pt]===void 0?Y.tickText(De,gt):Re(De,gt,String(Et[pt]));xt&&(Mt.minor=!0,Mt.text=""),mt.push(Mt)}}}}return Me(De,mt)}Y.getDataToCoordFunc=function(De,Be,Qe,rt){return Te(De,Be,Qe,rt).d2c},Y.counterLetter=function(De){var Be=De.charAt(0);return Be==="x"?"y":Be==="y"?"x":void 0},Y.minDtick=function(De,Be,Qe,rt){["log","category","multicategory"].indexOf(De.type)===-1&&rt?De._minDtick===void 0?(De._minDtick=Be,De._forceTick0=Qe):De._minDtick&&((De._minDtick/Be+1e-6)%1<2e-6&&((Qe-De._forceTick0)/Be%1+1.000001)%1<2e-6?(De._minDtick=Be,De._forceTick0=Qe):((Be/De._minDtick+1e-6)%1>2e-6||((Qe-De._forceTick0)/De._minDtick%1+1.000001)%1>2e-6)&&(De._minDtick=0)):De._minDtick=0},Y.saveRangeInitial=function(De,Be){for(var Qe=Y.list(De,"",!0),rt=!1,vt=0;vt<Qe.length;vt++){var mt=Qe[vt],xt=mt._rangeInitial===void 0,dt=xt||!(mt.range[0]===mt._rangeInitial[0]&&mt.range[1]===mt._rangeInitial[1]);(xt&&mt.autorange===!1||Be&&dt)&&(mt._rangeInitial=mt.range.slice(),rt=!0)}return rt},Y.saveShowSpikeInitial=function(De,Be){for(var Qe=Y.list(De,"",!0),rt=!1,vt="on",mt=0;mt<Qe.length;mt++){var xt=Qe[mt],dt=xt._showSpikeInitial===void 0,Et=dt||xt.showspikes!==xt._showspikes;(dt||Be&&Et)&&(xt._showSpikeInitial=xt.showspikes,rt=!0),vt!=="on"||xt.showspikes||(vt="off")}return De._fullLayout._cartesianSpikesEnabled=vt,rt},Y.autoBin=function(De,Be,Qe,rt,vt,mt){var xt,dt=g.aggNums(Math.min,null,De),Et=g.aggNums(Math.max,null,De);if(Be.type==="category"||Be.type==="multicategory")return{start:dt-.5,end:Et+.5,size:Math.max(1,Math.round(mt)||1),_dataSpan:Et-dt};if(vt||(vt=Be.calendar),xt=Be.type==="log"?{type:"linear",range:[dt,Et]}:{type:Be.type,range:g.simpleMap([dt,Et],Be.c2r,0,vt),calendar:vt},Y.setConvert(xt),mt=mt&&s.dtick(mt,xt.type))xt.dtick=mt,xt.tick0=s.tick0(void 0,xt.type,vt);else{var pt;if(Qe)pt=(Et-dt)/Qe;else{var gt=g.distinctVals(De),Mt=Math.pow(10,Math.floor(Math.log(gt.minDiff)/Math.LN10)),Nt=Mt*g.roundUp(gt.minDiff/Mt,[.9,1.9,4.9,9.9],!0);pt=Math.max(Nt,2*g.stdev(De)/Math.pow(De.length,rt?.25:.4)),b(pt)||(pt=1)}Y.autoTicks(xt,pt)}var Bt,Ut=xt.dtick,Jt=Y.tickIncrement(Y.tickFirst(xt),Ut,"reverse",vt);if(typeof Ut=="number")Jt=function(Vt,Qt,qt,gn,wn){var hn=0,Xt=0,an=0,tn=0;function cn(In){return(1+100*(In-Vt)/qt.dtick)%100<2}for(var vn=0;vn<Qt.length;vn++)Qt[vn]%1==0?an++:b(Qt[vn])||tn++,cn(Qt[vn])&&hn++,cn(Qt[vn]+qt.dtick/2)&&Xt++;var yn=Qt.length-tn;if(an===yn&&qt.type!=="date")qt.dtick<1?Vt=gn-.5*qt.dtick:(Vt-=.5)+qt.dtick<gn&&(Vt+=qt.dtick);else if(Xt<.1*yn&&(hn>.3*yn||cn(gn)||cn(wn))){var Pn=qt.dtick/2;Vt+=Vt+Pn<gn?Pn:-Pn}return Vt}(Jt,De,xt,dt,Et),Bt=Jt+(1+Math.floor((Et-Jt)/Ut))*Ut;else for(xt.dtick.charAt(0)==="M"&&(Jt=function(Vt,Qt,qt,gn,wn){var hn=g.findExactDates(Qt,wn);if(hn.exactDays>.8){var Xt=Number(qt.substr(1));hn.exactYears>.8&&Xt%12==0?Vt=Y.tickIncrement(Vt,"M6","reverse")+1.5*p:hn.exactMonths>.8?Vt=Y.tickIncrement(Vt,"M1","reverse")+15.5*p:Vt-=S;var an=Y.tickIncrement(Vt,qt);if(an<=gn)return an}return Vt}(Jt,De,Ut,dt,vt)),Bt=Jt;Bt<=Et;)Bt=Y.tickIncrement(Bt,Ut,!1,vt);return{start:Be.c2r(Jt,0,vt),end:Be.c2r(Bt,0,vt),size:Ut,_dataSpan:Et-dt}},Y.prepMinorTicks=function(De,Be,Qe){if(!Be.minor.dtick){delete De.dtick;var rt,vt=Be.dtick&&b(Be._tmin);if(vt){var mt=Y.tickIncrement(Be._tmin,Be.dtick,!0);rt=[Be._tmin,.99*mt+.01*Be._tmin]}else{var xt=g.simpleMap(Be.range,Be.r2l);rt=[xt[0],.8*xt[0]+.2*xt[1]]}if(De.range=g.simpleMap(rt,Be.l2r),De._isMinor=!0,Y.prepTicks(De,Qe),vt){var dt=b(Be.dtick),Et=b(De.dtick),pt=dt?Be.dtick:+Be.dtick.substring(1),gt=Et?De.dtick:+De.dtick.substring(1);dt&&Et?fe(pt,gt)?pt===2*M&&gt===2*p&&(De.dtick=M):pt===2*M&&gt===3*p?De.dtick=M:pt!==M||(Be._input.minor||{}).nticks?Oe(pt/gt,2.5)?De.dtick=pt/2:De.dtick=pt:De.dtick=p:String(Be.dtick).charAt(0)==="M"?Et?De.dtick="M1":fe(pt,gt)?pt>=12&&gt===2&&(De.dtick="M3"):De.dtick=Be.dtick:String(De.dtick).charAt(0)==="L"?String(Be.dtick).charAt(0)==="L"?fe(pt,gt)||(De.dtick=Oe(pt/gt,2.5)?Be.dtick/2:Be.dtick):De.dtick="D1":De.dtick==="D2"&&+Be.dtick>1&&(De.dtick=1)}De.range=Be.range}Be.minor._tick0Init===void 0&&(De.tick0=Be.tick0)},Y.prepTicks=function(De,Be){var Qe=g.simpleMap(De.range,De.r2l,void 0,void 0,Be);if(De.tickmode==="auto"||!De.dtick){var rt,vt=De.nticks;vt||(De.type==="category"||De.type==="multicategory"?(rt=De.tickfont?g.bigFont(De.tickfont.size||12):15,vt=De._length/rt):(rt=De._id.charAt(0)==="y"?40:80,vt=g.constrain(De._length/rt,4,9)+1),De._name==="radialaxis"&&(vt*=2)),De.minor&&De.minor.tickmode!=="array"||De.tickmode==="array"&&(vt*=100),De._roughDTick=Math.abs(Qe[1]-Qe[0])/vt,Y.autoTicks(De,De._roughDTick),De._minDtick>0&&De.dtick<2*De._minDtick&&(De.dtick=De._minDtick,De.tick0=De.l2r(De._forceTick0))}De.ticklabelmode==="period"&&function(mt){var xt;function dt(){return!(b(mt.dtick)||mt.dtick.charAt(0)!=="M")}var Et=dt(),pt=Y.getTickFormat(mt);if(pt){var gt=mt._dtickInit!==mt.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(xt=A,gt&&!Et&&mt.dtick<A&&(mt.dtick=A)):/%p/.test(pt)?(xt=S,gt&&!Et&&mt.dtick<S&&(mt.dtick=S)):/%[Aadejuwx]/.test(pt)?(xt=p,gt&&!Et&&mt.dtick<p&&(mt.dtick=p)):/%[UVW]/.test(pt)?(xt=M,gt&&!Et&&mt.dtick<M&&(mt.dtick=M)):/%[Bbm]/.test(pt)?(xt=y,gt&&(Et?Se(mt.dtick)<1:mt.dtick<v)&&(mt.dtick="M1")):/%[q]/.test(pt)?(xt=m,gt&&(Et?Se(mt.dtick)<3:mt.dtick<f)&&(mt.dtick="M3")):/%[Yy]/.test(pt)&&(xt=d,gt&&(Et?Se(mt.dtick)<12:mt.dtick<c)&&(mt.dtick="M12")))}(Et=dt())&&mt.tick0===mt._dowTick0&&(mt.tick0=mt._rawTick0),mt._definedDelta=xt}(De),De.tick0||(De.tick0=De.type==="date"?"2000-01-01":0),De.type==="date"&&De.dtick<.1&&(De.dtick=.1),Ee(De)},Y.calcTicks=function(De,Be){for(var Qe,rt,vt=De.type,mt=De.calendar,xt=De.ticklabelstep,dt=De.ticklabelmode==="period",Et=g.simpleMap(De.range,De.r2l,void 0,void 0,Be),pt=Et[1]<Et[0],gt=Math.min(Et[0],Et[1]),Mt=Math.max(Et[0],Et[1]),Nt=Math.max(1e3,De._length||0),Bt=[],Ut=[],Jt=[],Vt=[],Qt=De.minor&&(De.minor.ticks||De.minor.showgrid),qt=1;qt>=(Qt?0:1);qt--){var gn=!qt;qt?(De._dtickInit=De.dtick,De._tick0Init=De.tick0):(De.minor._dtickInit=De.minor.dtick,De.minor._tick0Init=De.minor.tick0);var wn=qt?De:g.extendFlat({},De,De.minor);if(gn?Y.prepMinorTicks(wn,De,Be):Y.prepTicks(wn,Be),wn.tickmode!=="array")if(wn.tickmode!=="sync"){var hn=ye(Et),Xt=hn[0],an=hn[1],tn=b(wn.dtick),cn=vt==="log"&&!(tn||wn.dtick.charAt(0)==="L"),vn=Y.tickFirst(wn,Be);if(qt){if(De._tmin=vn,vn<Xt!==pt)break;vt!=="category"&&vt!=="multicategory"||(an=pt?Math.max(-.5,an):Math.min(De._categories.length-.5,an))}var yn,Pn,In=null,kn=vn;qt&&(tn?Pn=De.dtick:vt==="date"?typeof De.dtick=="string"&&De.dtick.charAt(0)==="M"&&(Pn=y*De.dtick.substring(1)):Pn=De._roughDTick,yn=Math.round((De.r2l(kn)-De.r2l(De.tick0))/Pn)-1);var zn=wn.dtick;for(wn.rangebreaks&&wn._tick0Init!==wn.tick0&&(kn=Ye(kn,De),pt||(kn=Y.tickIncrement(kn,zn,!pt,mt))),qt&&dt&&(kn=Y.tickIncrement(kn,zn,!pt,mt),yn--);pt?kn>=an:kn<=an;kn=Y.tickIncrement(kn,zn,pt,mt)){if(qt&&yn++,wn.rangebreaks&&!pt){if(kn<Xt)continue;if(wn.maskBreaks(kn)===R&&Ye(kn,wn)>=Mt)break}if(Jt.length>Nt||kn===In)break;In=kn;var er={value:kn};qt?(cn&&kn!==(0|kn)&&(er.simpleLabel=!0),xt>1&&yn%xt&&(er.skipLabel=!0),Jt.push(er)):(er.minor=!0,Vt.push(er))}}else Jt=[],Bt=ue(De);else qt?(Jt=[],Bt=le(De)):(Vt=[],Ut=le(De))}if(Qt&&!(De.minor.ticks==="inside"&&De.ticks==="outside"||De.minor.ticks==="outside"&&De.ticks==="inside")){for(var ir=Jt.map(function(Ct){return Ct.value}),fr=[],ar=0;ar<Vt.length;ar++){var Jn=Vt[ar],br=Jn.value;if(ir.indexOf(br)===-1){for(var Gt=!1,ln=0;!Gt&&ln<Jt.length;ln++)1e7+Jt[ln].value===1e7+br&&(Gt=!0);Gt||fr.push(Jn)}}Vt=fr}if(dt&&function(Ct,Kt,rn){for(var Tn=0;Tn<Ct.length;Tn++){var Mn=Ct[Tn].value,Cn=Tn,pn=Tn+1;Tn<Ct.length-1?(Cn=Tn,pn=Tn+1):Tn>0?(Cn=Tn-1,pn=Tn):(Cn=Tn,pn=Tn);var en,nn=Ct[Cn].value,fn=Ct[pn].value,dn=Math.abs(fn-nn),Rn=rn||dn,On=0;Rn>=c?On=dn>=c&&dn<=u?dn:d:rn===m&&Rn>=f?On=dn>=f&&dn<=w?dn:m:Rn>=v?On=dn>=v&&dn<=x?dn:y:rn===M&&Rn>=M?On=M:Rn>=p?On=p:rn===S&&Rn>=S?On=S:rn===A&&Rn>=A&&(On=A),On>=dn&&(On=dn,en=!0);var qn=Mn+On;if(Kt.rangebreaks&&On>0){for(var Vn=0,tr=0;tr<84;tr++){var Zn=(tr+.5)/84;Kt.maskBreaks(Mn*(1-Zn)+Zn*qn)!==R&&Vn++}(On*=Vn/84)||(Ct[Tn].drop=!0),en&&dn>M&&(On=dn)}(On>0||Tn===0)&&(Ct[Tn].periodX=Mn+On/2)}}(Jt,De,De._definedDelta),De.rangebreaks){var mn=De._id.charAt(0)==="y",_n=1;De.tickmode==="auto"&&(_n=De.tickfont?De.tickfont.size:12);var Ln=NaN;for(Qe=Jt.length-1;Qe>-1;Qe--)if(Jt[Qe].drop)Jt.splice(Qe,1);else{Jt[Qe].value=Ye(Jt[Qe].value,De);var Yn=De.c2p(Jt[Qe].value);(mn?Ln>Yn-_n:Ln<Yn+_n)?Jt.splice(pt?Qe+1:Qe,1):Ln=Yn}}nt(De)&&Math.abs(Et[1]-Et[0])===360&&Jt.pop(),De._tmax=(Jt[Jt.length-1]||{}).value,De._prevDateHead="",De._inCalcTicks=!0;var Nn,Bn,rr=function(Ct){Ct.text="",De._prevDateHead=rt};for(Jt=Jt.concat(Vt),Qe=0;Qe<Jt.length;Qe++){var Yt=Jt[Qe].minor,An=Jt[Qe].value;Yt?Ut.push({x:An,minor:!0}):(rt=De._prevDateHead,Nn=Y.tickText(De,An,!1,Jt[Qe].simpleLabel),(Bn=Jt[Qe].periodX)!==void 0&&(Nn.periodX=Bn,(Bn>Mt||Bn<gt)&&(Bn>Mt&&(Nn.periodX=Mt),Bn<gt&&(Nn.periodX=gt),rr(Nn))),Jt[Qe].skipLabel&&rr(Nn),Bt.push(Nn))}return Bt=Bt.concat(Ut),De._inCalcTicks=!1,dt&&Bt.length&&(Bt[0].noTick=!0),Bt};var ie=[2,5,10],ge=[1,2,3,6,12],Ae=[1,2,5,10,15,30],we=[1,2,3,7,14],Ne=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],He=[-.301,0,.301,.699,1],de=[15,30,45,90,180];function Le(De,Be,Qe){return Be*g.roundUp(De/Be,Qe)}function Ee(De){var Be=De.dtick;if(De._tickexponent=0,b(Be)||typeof Be=="string"||(Be=1),De.type!=="category"&&De.type!=="multicategory"||(De._tickround=null),De.type==="date"){var Qe=De.r2l(De.tick0),rt=De.l2r(Qe).replace(/(^-|i)/g,""),vt=rt.length;if(String(Be).charAt(0)==="M")vt>10||rt.substr(5)!=="01-01"?De._tickround="d":De._tickround=+Be.substr(1)%12==0?"y":"m";else if(Be>=p&&vt<=10||Be>=15*p)De._tickround="d";else if(Be>=k&&vt<=16||Be>=A)De._tickround="M";else if(Be>=C&&vt<=19||Be>=k)De._tickround="S";else{var mt=De.l2r(Qe+Be).replace(/^-/,"").length;De._tickround=Math.max(vt,mt)-20,De._tickround<0&&(De._tickround=4)}}else if(b(Be)||Be.charAt(0)==="L"){var xt=De.range.map(De.r2d||Number);b(Be)||(Be=Number(Be.substr(1))),De._tickround=2-Math.floor(Math.log(Be)/Math.LN10+.01);var dt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Et=Math.floor(Math.log(dt)/Math.LN10+.01),pt=De.minexponent===void 0?3:De.minexponent;Math.abs(Et)>pt&&(Fe(De.exponentformat)&&!Xe(Et)?De._tickexponent=3*Math.round((Et-1)/3):De._tickexponent=Et)}else De._tickround=null}function Re(De,Be,Qe){var rt=De.tickfont||{};return{x:Be,dx:0,dy:0,text:Qe||"",fontSize:rt.size,font:rt.family,fontColor:rt.color}}Y.autoTicks=function(De,Be,Qe){var rt;function vt(Mt){return Math.pow(Mt,Math.floor(Math.log(Be)/Math.LN10))}if(De.type==="date"){De.tick0=g.dateTick0(De.calendar,0);var mt=2*Be;if(mt>d)Be/=d,rt=vt(10),De.dtick="M"+12*Le(Be,rt,ie);else if(mt>y)Be/=y,De.dtick="M"+Le(Be,1,ge);else if(mt>p){if(De.dtick=Le(Be,p,De._hasDayOfWeekBreaks?[1,2,7,14]:we),!Qe){var xt=Y.getTickFormat(De),dt=De.ticklabelmode==="period";dt&&(De._rawTick0=De.tick0),/%[uVW]/.test(xt)?De.tick0=g.dateTick0(De.calendar,2):De.tick0=g.dateTick0(De.calendar,1),dt&&(De._dowTick0=De.tick0)}}else mt>A?De.dtick=Le(Be,A,ge):mt>k?De.dtick=Le(Be,k,Ae):mt>C?De.dtick=Le(Be,C,Ae):(rt=vt(10),De.dtick=Le(Be,rt,ie))}else if(De.type==="log"){De.tick0=0;var Et=g.simpleMap(De.range,De.r2l);if(De._isMinor&&(Be*=1.5),Be>.7)De.dtick=Math.ceil(Be);else if(Math.abs(Et[1]-Et[0])<1){var pt=1.5*Math.abs((Et[1]-Et[0])/Be);Be=Math.abs(Math.pow(10,Et[1])-Math.pow(10,Et[0]))/pt,rt=vt(10),De.dtick="L"+Le(Be,rt,ie)}else De.dtick=Be>.3?"D2":"D1"}else De.type==="category"||De.type==="multicategory"?(De.tick0=0,De.dtick=Math.ceil(Math.max(Be,1))):nt(De)?(De.tick0=0,rt=1,De.dtick=Le(Be,rt,de)):(De.tick0=0,rt=vt(10),De.dtick=Le(Be,rt,ie));if(De.dtick===0&&(De.dtick=1),!b(De.dtick)&&typeof De.dtick!="string"){var gt=De.dtick;throw De.dtick=1,"ax.dtick error: "+String(gt)}},Y.tickIncrement=function(De,Be,Qe,rt){var vt=Qe?-1:1;if(b(Be))return g.increment(De,vt*Be);var mt=Be.charAt(0),xt=vt*Number(Be.substr(1));if(mt==="M")return g.incrementMonth(De,xt,rt);if(mt==="L")return Math.log(Math.pow(10,De)+xt)/Math.LN10;if(mt==="D"){var dt=Be==="D2"?He:Ne,Et=De+.01*vt,pt=g.roundUp(g.mod(Et,1),dt,Qe);return Math.floor(Et)+Math.log(T.round(Math.pow(10,pt),1))/Math.LN10}throw"unrecognized dtick "+String(Be)},Y.tickFirst=function(De,Be){var Qe=De.r2l||Number,rt=g.simpleMap(De.range,Qe,void 0,void 0,Be),vt=rt[1]<rt[0],mt=vt?Math.floor:Math.ceil,xt=ye(rt)[0],dt=De.dtick,Et=Qe(De.tick0);if(b(dt)){var pt=mt((xt-Et)/dt)*dt+Et;return De.type!=="category"&&De.type!=="multicategory"||(pt=g.constrain(pt,0,De._categories.length-1)),pt}var gt=dt.charAt(0),Mt=Number(dt.substr(1));if(gt==="M"){for(var Nt,Bt,Ut,Jt=0,Vt=Et;Jt<10;){if(((Nt=Y.tickIncrement(Vt,dt,vt,De.calendar))-xt)*(Vt-xt)<=0)return vt?Math.min(Vt,Nt):Math.max(Vt,Nt);Bt=(xt-(Vt+Nt)/2)/(Nt-Vt),Ut=gt+(Math.abs(Math.round(Bt))||1)*Mt,Vt=Y.tickIncrement(Vt,Ut,Bt<0?!vt:vt,De.calendar),Jt++}return g.error("tickFirst did not converge",De),Vt}if(gt==="L")return Math.log(mt((Math.pow(10,xt)-Et)/Mt)*Mt+Et)/Math.LN10;if(gt==="D"){var Qt=dt==="D2"?He:Ne,qt=g.roundUp(g.mod(xt,1),Qt,vt);return Math.floor(xt)+Math.log(T.round(Math.pow(10,qt),1))/Math.LN10}throw"unrecognized dtick "+String(dt)},Y.tickText=function(De,Be,Qe,rt){var vt,mt=Re(De,Be),xt=De.tickmode==="array",dt=Qe||xt,Et=De.type,pt=Et==="category"?De.d2l_noadd:De.d2l;if(xt&&Array.isArray(De.ticktext)){var gt=g.simpleMap(De.range,De.r2l),Mt=(Math.abs(gt[1]-gt[0])-(De._lBreaks||0))/1e4;for(vt=0;vt<De.ticktext.length&&!(Math.abs(Be-pt(De.tickvals[vt]))<Mt);vt++);if(vt<De.ticktext.length)return mt.text=String(De.ticktext[vt]),mt}function Nt(Vt){if(Vt===void 0)return!0;if(Qe)return Vt==="none";var Qt={first:De._tmin,last:De._tmax}[Vt];return Vt!=="all"&&Be!==Qt}var Bt=Qe?"never":De.exponentformat!=="none"&&Nt(De.showexponent)?"hide":"";if(Et==="date"?function(Vt,Qt,qt,gn){var wn=Vt._tickround,hn=qt&&Vt.hoverformat||Y.getTickFormat(Vt);gn&&(wn=b(wn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[wn]);var Xt,an=g.formatDate(Qt.x,hn,wn,Vt._dateFormat,Vt.calendar,Vt._extraFormat),tn=an.indexOf(`
`);if(tn!==-1&&(Xt=an.substr(tn+1),an=an.substr(0,tn)),gn&&(an==="00:00:00"||an==="00:00"?(an=Xt,Xt=""):an.length===8&&(an=an.replace(/:00$/,""))),Xt)if(qt)wn==="d"?an+=", "+Xt:an=Xt+(an?", "+an:"");else if(Vt._inCalcTicks&&Vt._prevDateHead===Xt){var cn=tt(Vt),vn=Vt._trueSide||Vt.side;(!cn&&vn==="top"||cn&&vn==="bottom")&&(an+="<br> ")}else Vt._prevDateHead=Xt,an+="<br>"+Xt;Qt.text=an}(De,mt,Qe,dt):Et==="log"?function(Vt,Qt,qt,gn,wn){var hn=Vt.dtick,Xt=Qt.x,an=Vt.tickformat,tn=typeof hn=="string"&&hn.charAt(0);if(wn==="never"&&(wn=""),gn&&tn!=="L"&&(hn="L3",tn="L"),an||tn==="L")Qt.text=Ze(Math.pow(10,Xt),Vt,wn,gn);else if(b(hn)||tn==="D"&&g.mod(Xt+.01,1)<.1){var cn=Math.round(Xt),vn=Math.abs(cn),yn=Vt.exponentformat;yn==="power"||Fe(yn)&&Xe(cn)?(Qt.text=cn===0?1:cn===1?"10":"10<sup>"+(cn>1?"":P)+vn+"</sup>",Qt.fontSize*=1.25):(yn==="e"||yn==="E")&&vn>2?Qt.text="1"+yn+(cn>0?"+":P)+vn:(Qt.text=Ze(Math.pow(10,Xt),Vt,"","fakehover"),hn==="D1"&&Vt._id.charAt(0)==="y"&&(Qt.dy-=Qt.fontSize/6))}else{if(tn!=="D")throw"unrecognized dtick "+String(hn);Qt.text=String(Math.round(Math.pow(10,g.mod(Xt,1)))),Qt.fontSize*=.75}if(Vt.dtick==="D1"){var Pn=String(Qt.text).charAt(0);Pn!=="0"&&Pn!=="1"||(Vt._id.charAt(0)==="y"?Qt.dx-=Qt.fontSize/4:(Qt.dy+=Qt.fontSize/2,Qt.dx+=(Vt.range[1]>Vt.range[0]?1:-1)*Qt.fontSize*(Xt<0?.5:.25)))}}(De,mt,0,dt,Bt):Et==="category"?function(Vt,Qt){var qt=Vt._categories[Math.round(Qt.x)];qt===void 0&&(qt=""),Qt.text=String(qt)}(De,mt):Et==="multicategory"?function(Vt,Qt,qt){var gn=Math.round(Qt.x),wn=Vt._categories[gn]||[],hn=wn[1]===void 0?"":String(wn[1]),Xt=wn[0]===void 0?"":String(wn[0]);qt?Qt.text=Xt+" - "+hn:(Qt.text=hn,Qt.text2=Xt)}(De,mt,Qe):nt(De)?function(Vt,Qt,qt,gn,wn){if(Vt.thetaunit!=="radians"||qt)Qt.text=Ze(Qt.x,Vt,wn,gn);else{var hn=Qt.x/180;if(hn===0)Qt.text="0";else{var Xt=function(tn){function cn(In,kn){return Math.abs(In-kn)<=1e-6}var vn=function(In){for(var kn=1;!cn(Math.round(In*kn)/kn,In);)kn*=10;return kn}(tn),yn=tn*vn,Pn=Math.abs(function In(kn,zn){return cn(zn,0)?kn:In(zn,kn%zn)}(yn,vn));return[Math.round(yn/Pn),Math.round(vn/Pn)]}(hn);if(Xt[1]>=100)Qt.text=Ze(g.deg2rad(Qt.x),Vt,wn,gn);else{var an=Qt.x<0;Xt[1]===1?Xt[0]===1?Qt.text="":Qt.text=Xt[0]+"":Qt.text=["<sup>",Xt[0],"</sup>","","<sub>",Xt[1],"</sub>",""].join(""),an&&(Qt.text=P+Qt.text)}}}}(De,mt,Qe,dt,Bt):function(Vt,Qt,qt,gn,wn){wn==="never"?wn="":Vt.showexponent==="all"&&Math.abs(Qt.x/Vt.dtick)<1e-6&&(wn="hide"),Qt.text=Ze(Qt.x,Vt,wn,gn)}(De,mt,0,dt,Bt),rt||(De.tickprefix&&!Nt(De.showtickprefix)&&(mt.text=De.tickprefix+mt.text),De.ticksuffix&&!Nt(De.showticksuffix)&&(mt.text+=De.ticksuffix)),De.labelalias&&De.labelalias.hasOwnProperty(mt.text)){var Ut=De.labelalias[mt.text];typeof Ut=="string"&&(mt.text=Ut)}if(De.tickson==="boundaries"||De.showdividers){var Jt=function(Vt){var Qt=De.l2p(Vt);return Qt>=0&&Qt<=De._length?Vt:null};mt.xbnd=[Jt(mt.x-.5),Jt(mt.x+De.dtick-.5)]}return mt},Y.hoverLabelText=function(De,Be,Qe){Qe&&(De=g.extendFlat({},De,{hoverformat:Qe}));var rt=Array.isArray(Be)?Be[0]:Be,vt=Array.isArray(Be)?Be[1]:void 0;if(vt!==void 0&&vt!==rt)return Y.hoverLabelText(De,rt,Qe)+" - "+Y.hoverLabelText(De,vt,Qe);var mt=De.type==="log"&&rt<=0,xt=Y.tickText(De,De.c2l(mt?-rt:rt),"hover").text;return mt?rt===0?"0":P+xt:xt};var je=["f","p","n","","m","","k","M","G","T"];function Fe(De){return De==="SI"||De==="B"}function Xe(De){return De>14||De<-15}function Ze(De,Be,Qe,rt){var vt=De<0,mt=Be._tickround,xt=Qe||Be.exponentformat||"B",dt=Be._tickexponent,Et=Y.getTickFormat(Be),pt=Be.separatethousands;if(rt){var gt={exponentformat:xt,minexponent:Be.minexponent,dtick:Be.showexponent==="none"?Be.dtick:b(De)&&Math.abs(De)||1,range:Be.showexponent==="none"?Be.range.map(Be.r2d):[0,De||1]};Ee(gt),mt=(Number(gt._tickround)||0)+4,dt=gt._tickexponent,Be.hoverformat&&(Et=Be.hoverformat)}if(Et)return Be._numFormat(Et)(De).replace(/-/g,P);var Mt,Nt=Math.pow(10,-mt)/2;if(xt==="none"&&(dt=0),(De=Math.abs(De))<Nt)De="0",vt=!1;else{if(De+=Nt,dt&&(De*=Math.pow(10,-dt),mt+=dt),mt===0)De=String(Math.floor(De));else if(mt<0){De=(De=String(Math.round(De))).substr(0,De.length+mt);for(var Bt=mt;Bt<0;Bt++)De+="0"}else{var Ut=(De=String(De)).indexOf(".")+1;Ut&&(De=De.substr(0,Ut+mt).replace(/\.?0+$/,""))}De=g.numSeparate(De,Be._separators,pt)}return dt&&xt!=="hide"&&(Fe(xt)&&Xe(dt)&&(xt="power"),Mt=dt<0?P+-dt:xt!=="power"?"+"+dt:String(dt),xt==="e"||xt==="E"?De+=xt+Mt:xt==="power"?De+="10<sup>"+Mt+"</sup>":xt==="B"&&dt===9?De+="B":Fe(xt)&&(De+=je[dt/3+5])),vt?P+De:De}function at(De,Be){if(De){var Qe=Object.keys(B).reduce(function(rt,vt){return Be.indexOf(vt)!==-1&&B[vt].forEach(function(mt){rt[mt]=1}),rt},{});Object.keys(De).forEach(function(rt){Qe[rt]||(rt.length===1?De[rt]=0:delete De[rt])})}}function lt(De,Be){for(var Qe=[],rt={},vt=0;vt<Be.length;vt++){var mt=Be[vt];rt[mt.text2]?rt[mt.text2].push(mt.x):rt[mt.text2]=[mt.x]}for(var xt in rt)Qe.push(Re(De,g.interp(rt[xt],.5),xt));return Qe}function ot(De){return De.periodX!==void 0?De.periodX:De.x}function bt(De){return[De.text,De.x,De.axInfo,De.font,De.fontSize,De.fontColor].join("_")}function wt(De){var Be=De.title.font.size,Qe=(De.title.text.match(o.BR_TAG_ALL)||[]).length;return De.title.hasOwnProperty("standoff")?Qe?Be*(re+Qe*ee):Be*re:Qe?Be*(Qe+1)*ee:Be}function ht(De,Be){var Qe=De.l2p(Be);return Qe>1&&Qe<De._length-1}function ct(De){var Be=T.select(De),Qe=Be.select(".text-math-group");return Qe.empty()?Be.select("text"):Qe}function Tt(De){return De._id+".automargin"}function Lt(De){return Tt(De)+".mirror"}function kt(De){return De._id+".rangeslider"}function Ot(De,Be){for(var Qe=0;Qe<Be.length;Qe++)De.indexOf(Be[Qe])===-1&&De.push(Be[Qe])}function Pt(De,Be,Qe){var rt,vt,mt=[],xt=[],dt=De.layout;for(rt=0;rt<Be.length;rt++)mt.push(Y.getFromId(De,Be[rt]));for(rt=0;rt<Qe.length;rt++)xt.push(Y.getFromId(De,Qe[rt]));var Et=Object.keys(r),pt=["anchor","domain","overlaying","position","side","tickangle","editType"],gt=["linear","log"];for(rt=0;rt<Et.length;rt++){var Mt=Et[rt],Nt=mt[0][Mt],Bt=xt[0][Mt],Ut=!0,Jt=!1,Vt=!1;if(Mt.charAt(0)!=="_"&&typeof Nt!="function"&&pt.indexOf(Mt)===-1){for(vt=1;vt<mt.length&&Ut;vt++){var Qt=mt[vt][Mt];Mt==="type"&&gt.indexOf(Nt)!==-1&&gt.indexOf(Qt)!==-1&&Nt!==Qt?Jt=!0:Qt!==Nt&&(Ut=!1)}for(vt=1;vt<xt.length&&Ut;vt++){var qt=xt[vt][Mt];Mt==="type"&&gt.indexOf(Bt)!==-1&&gt.indexOf(qt)!==-1&&Bt!==qt?Vt=!0:xt[vt][Mt]!==Bt&&(Ut=!1)}Ut&&(Jt&&(dt[mt[0]._name].type="linear"),Vt&&(dt[xt[0]._name].type="linear"),et(dt,Mt,mt,xt,De._fullLayout._dfltTitle))}}for(rt=0;rt<De._fullLayout.annotations.length;rt++){var gn=De._fullLayout.annotations[rt];Be.indexOf(gn.xref)!==-1&&Qe.indexOf(gn.yref)!==-1&&g.swapAttrs(dt.annotations[rt],["?"])}}function et(De,Be,Qe,rt,vt){var mt,xt=g.nestedProperty,dt=xt(De[Qe[0]._name],Be).get(),Et=xt(De[rt[0]._name],Be).get();for(Be==="title"&&(dt&&dt.text===vt.x&&(dt.text=vt.y),Et&&Et.text===vt.y&&(Et.text=vt.x)),mt=0;mt<Qe.length;mt++)xt(De,Qe[mt]._name+"."+Be).set(Et);for(mt=0;mt<rt.length;mt++)xt(De,rt[mt]._name+"."+Be).set(dt)}function nt(De){return De._id==="angularaxis"}function Ye(De,Be){for(var Qe=Be._rangebreaks.length,rt=0;rt<Qe;rt++){var vt=Be._rangebreaks[rt];if(De>=vt.min&&De<vt.max)return vt.max}return De}function tt(De){return(De.ticklabelposition||"").indexOf("inside")!==-1}function ut(De,Be){tt(De._anchorAxis||{})&&De._hideCounterAxisInsideTickLabels&&De._hideCounterAxisInsideTickLabels(Be)}function Ke(De,Be,Qe,rt){var vt,mt=De.anchor==="free"||De.overlaying!==void 0&&De.overlaying!==!1?De.overlaying:De._id;vt=rt?De.side==="right"?Be:-Be:Be,mt in Qe||(Qe[mt]={}),De.side in Qe[mt]||(Qe[mt][De.side]=0),Qe[mt][De.side]+=vt}Y.getTickFormat=function(De){var Be,Qe,rt,vt,mt,xt,dt,Et;function pt(Nt){return typeof Nt!="string"?Nt:Number(Nt.replace("M",""))*y}function gt(Nt,Bt){var Ut=["L","D"];if(typeof Nt==typeof Bt){if(typeof Nt=="number")return Nt-Bt;var Jt=Ut.indexOf(Nt.charAt(0)),Vt=Ut.indexOf(Bt.charAt(0));return Jt===Vt?Number(Nt.replace(/(L|D)/g,""))-Number(Bt.replace(/(L|D)/g,"")):Jt-Vt}return typeof Nt=="number"?1:-1}function Mt(Nt,Bt){var Ut=Bt[0]===null,Jt=Bt[1]===null,Vt=gt(Nt,Bt[0])>=0,Qt=gt(Nt,Bt[1])<=0;return(Ut||Vt)&&(Jt||Qt)}if(De.tickformatstops&&De.tickformatstops.length>0)switch(De.type){case"date":case"linear":for(Be=0;Be<De.tickformatstops.length;Be++)if((rt=De.tickformatstops[Be]).enabled&&(vt=De.dtick,mt=rt.dtickrange,xt=void 0,dt=void 0,Et=void 0,xt=pt||function(Nt){return Nt},dt=mt[0],Et=mt[1],(!dt&&typeof dt!="number"||xt(dt)<=xt(vt))&&(!Et&&typeof Et!="number"||xt(Et)>=xt(vt)))){Qe=rt;break}break;case"log":for(Be=0;Be<De.tickformatstops.length;Be++)if((rt=De.tickformatstops[Be]).enabled&&Mt(De.dtick,rt.dtickrange)){Qe=rt;break}}return Qe?Qe.value:De.tickformat},Y.getSubplots=function(De,Be){var Qe=De._fullLayout._subplots,rt=Qe.cartesian.concat(Qe.gl2d||[]),vt=Be?Y.findSubplotsWithAxis(rt,Be):rt;return vt.sort(function(mt,xt){var dt=mt.substr(1).split("y"),Et=xt.substr(1).split("y");return dt[0]===Et[0]?+dt[1]-+Et[1]:+dt[0]-+Et[0]}),vt},Y.findSubplotsWithAxis=function(De,Be){for(var Qe=new RegExp(Be._id.charAt(0)==="x"?"^"+Be._id+"y":Be._id+"$"),rt=[],vt=0;vt<De.length;vt++){var mt=De[vt];Qe.test(mt)&&rt.push(mt)}return rt},Y.makeClipPaths=function(De){var Be=De._fullLayout;if(!Be._hasOnlyLargeSploms){var Qe,rt,vt={_offset:0,_length:Be.width,_id:""},mt={_offset:0,_length:Be.height,_id:""},xt=Y.list(De,"x",!0),dt=Y.list(De,"y",!0),Et=[];for(Qe=0;Qe<xt.length;Qe++)for(Et.push({x:xt[Qe],y:mt}),rt=0;rt<dt.length;rt++)Qe===0&&Et.push({x:vt,y:dt[rt]}),Et.push({x:xt[Qe],y:dt[rt]});var pt=Be._clips.selectAll(".axesclip").data(Et,function(gt){return gt.x._id+gt.y._id});pt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gt){return"clip"+Be._uid+gt.x._id+gt.y._id}).append("rect"),pt.exit().remove(),pt.each(function(gt){T.select(this).select("rect").attr({x:gt.x._offset||0,y:gt.y._offset||0,width:gt.x._length||1,height:gt.y._length||1})})}},Y.draw=function(De,Be,Qe){var rt=De._fullLayout;Be==="redraw"&&rt._paper.selectAll("g.subplot").each(function(dt){var Et=dt[0],pt=rt._plots[Et];if(pt){var gt=pt.xaxis,Mt=pt.yaxis;pt.xaxislayer.selectAll("."+gt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Mt._id+"tick").remove(),pt.xaxislayer.selectAll("."+gt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Mt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+gt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Mt._id+"divider").remove(),pt.minorGridlayer&&pt.minorGridlayer.selectAll("path").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),rt._infolayer.select(".g-"+gt._id+"title").remove(),rt._infolayer.select(".g-"+Mt._id+"title").remove()}});var vt=Be&&Be!=="redraw"?Be:Y.listIds(De),mt=Y.list(De).filter(function(dt){return dt.autoshift}).map(function(dt){return dt.overlaying});vt.map(function(dt){var Et=Y.getFromId(De,dt);if(Et.tickmode==="sync"&&Et.overlaying){var pt=vt.findIndex(function(gt){return gt===Et.overlaying});pt>=0&&vt.unshift(vt.splice(pt,1).shift())}});var xt={false:{left:0,right:0}};return g.syncOrAsync(vt.map(function(dt){return function(){if(dt){var Et=Y.getFromId(De,dt);Qe||(Qe={}),Qe.axShifts=xt,Qe.overlayingShiftedAx=mt;var pt=Y.drawOne(De,Et,Qe);return Et._shiftPusher&&Ke(Et,Et._fullDepth||0,xt,!0),Et._r=Et.range.slice(),Et._rl=g.simpleMap(Et._r,Et.r2l),pt}}}))},Y.drawOne=function(De,Be,Qe){var rt,vt,mt,xt=(Qe=Qe||{}).axShifts||{},dt=Qe.overlayingShiftedAx||[];Be.setScale();var Et=De._fullLayout,pt=Be._id,gt=pt.charAt(0),Mt=Y.counterLetter(pt),Nt=Et._plots[Be._mainSubplot];if(Nt){if(Be._shiftPusher=Be.autoshift||dt.indexOf(Be._id)!==-1||dt.indexOf(Be.overlaying)!==-1,Be._shiftPusher&Be.anchor==="free"){var Bt=Be.linewidth/2||0;Be.ticks==="inside"&&(Bt+=Be.ticklen),Ke(Be,Bt,xt,!0),Ke(Be,Be.shift||0,xt,!1)}Qe.skipTitle===!0&&Be._shift!==void 0||(Be._shift=function(pn,en){return pn.autoshift?en[pn.overlaying][pn.side]:pn.shift||0}(Be,xt));var Ut=Nt[gt+"axislayer"],Jt=Be._mainLinePosition,Vt=Jt+=Be._shift,Qt=Be._mainMirrorPosition,qt=Be._vals=Y.calcTicks(Be),gn=[Be.mirror,Vt,Qt].join("_");for(rt=0;rt<qt.length;rt++)qt[rt].axInfo=gn;Be._selections={},Be._tickAngles&&(Be._prevTickAngles=Be._tickAngles),Be._tickAngles={},Be._depth=null;var wn={};if(Be.visible){var hn,Xt,an=Y.makeTransTickFn(Be),tn=Y.makeTransTickLabelFn(Be),cn=Be.ticks==="inside",vn=Be.ticks==="outside";if(Be.tickson==="boundaries"){var yn=function(pn,en){var nn,fn=[],dn=function(Rn,On){var qn=Rn.xbnd[On];qn!==null&&fn.push(g.extendFlat({},Rn,{x:qn}))};if(en.length){for(nn=0;nn<en.length;nn++)dn(en[nn],0);dn(en[nn-1],1)}return fn}(0,qt);Xt=Y.clipEnds(Be,yn),hn=cn?Xt:yn}else Xt=Y.clipEnds(Be,qt),hn=cn&&Be.ticklabelmode!=="period"?Xt:qt;var Pn,In=Be._gridVals=Xt,kn=function(pn,en){var nn,fn,dn=[],Rn=en.length&&en[en.length-1].x<en[0].x,On=function(Vn,tr){var Zn=Vn.xbnd[tr];Zn!==null&&dn.push(g.extendFlat({},Vn,{x:Zn}))};if(pn.showdividers&&en.length){for(nn=0;nn<en.length;nn++){var qn=en[nn];qn.text2!==fn&&On(qn,Rn?1:0),fn=qn.text2}On(en[nn-1],Rn?0:1)}return dn}(Be,qt);if(!Et._hasOnlyLargeSploms){var zn=Be._subplotsWith,er={};for(rt=0;rt<zn.length;rt++){vt=zn[rt];var ir=(mt=Et._plots[vt])[Mt+"axis"],fr=ir._mainAxis._id;if(!er[fr]){er[fr]=1;var ar=gt==="x"?"M0,"+ir._offset+"v"+ir._length:"M"+ir._offset+",0h"+ir._length;Y.drawGrid(De,Be,{vals:In,counterAxis:ir,layer:mt.gridlayer.select("."+pt),minorLayer:mt.minorGridlayer.select("."+pt),path:ar,transFn:an}),Y.drawZeroLine(De,Be,{counterAxis:ir,layer:mt.zerolinelayer,path:ar,transFn:an})}}}var Jn=Y.getTickSigns(Be),br=Y.getTickSigns(Be,"minor");if(Be.ticks||Be.minor&&Be.minor.ticks){var Gt,ln,mn,_n,Ln=Y.makeTickPath(Be,Vt,Jn[2]),Yn=Y.makeTickPath(Be,Vt,br[2],{minor:!0});if(Be._anchorAxis&&Be.mirror&&Be.mirror!==!0?(Gt=Y.makeTickPath(Be,Qt,Jn[3]),ln=Y.makeTickPath(Be,Qt,br[3],{minor:!0}),mn=Ln+Gt,_n=Yn+ln):(Gt="",ln="",mn=Ln,_n=Yn),Be.showdividers&&vn&&Be.tickson==="boundaries"){var Nn={};for(rt=0;rt<kn.length;rt++)Nn[kn[rt].x]=1;Pn=function(pn){return Nn[pn.x]?Gt:mn}}else Pn=function(pn){return pn.minor?_n:mn}}if(Y.drawTicks(De,Be,{vals:hn,layer:Ut,path:Pn,transFn:an}),Be.mirror==="allticks"){var Bn=Object.keys(Be._linepositions||{});for(rt=0;rt<Bn.length;rt++){vt=Bn[rt],mt=Et._plots[vt];var rr=Be._linepositions[vt]||[],Yt=rr[0],An=rr[1],Ct=rr[2],Kt=Y.makeTickPath(Be,Yt,Ct?Jn[0]:br[0],{minor:Ct})+Y.makeTickPath(Be,An,Ct?Jn[1]:br[1],{minor:Ct});Y.drawTicks(De,Be,{vals:hn,layer:mt[gt+"axislayer"],path:Kt,transFn:an})}}var rn=[];if(rn.push(function(){return Y.drawLabels(De,Be,{vals:qt,layer:Ut,plotinfo:mt,transFn:tn,labelFns:Y.makeLabelFns(Be,Vt)})}),Be.type==="multicategory"){var Tn={x:2,y:10}[gt];rn.push(function(){var pn={x:"height",y:"width"}[gt],en=Cn()[pn]+Tn+(Be._tickAngles[pt+"tick"]?Be.tickfont.size*ee:0);return Y.drawLabels(De,Be,{vals:lt(Be,qt),layer:Ut,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:an,labelFns:Y.makeLabelFns(Be,Vt+en*Jn[4])})}),rn.push(function(){return Be._depth=Jn[4]*(Cn("tick2")[Be.side]-Vt),function(pn,en,nn){var fn=en._id+"divider",dn=nn.vals,Rn=nn.layer.selectAll("path."+fn).data(dn,bt);Rn.exit().remove(),Rn.enter().insert("path",":first-child").classed(fn,1).classed("crisp",1).call(i.stroke,en.dividercolor).style("stroke-width",n.crispRound(pn,en.dividerwidth,1)+"px"),Rn.attr("transform",nn.transFn).attr("d",nn.path)}(De,Be,{vals:kn,layer:Ut,path:Y.makeTickPath(Be,Vt,Jn[4],{len:Be._depth}),transFn:an})})}else Be.title.hasOwnProperty("standoff")&&rn.push(function(){Be._depth=Jn[4]*(Cn()[Be.side]-Vt)});var Mn=_.getComponentMethod("rangeslider","isVisible")(Be);return Qe.skipTitle||Mn&&Be.side==="bottom"||rn.push(function(){return function(pn,en){var nn,fn=pn._fullLayout,dn=en._id,Rn=dn.charAt(0),On=en.title.font.size;if(en.title.hasOwnProperty("standoff"))nn=en._depth+en.title.standoff+wt(en);else{var qn=tt(en);if(en.type==="multicategory")nn=en._depth;else{var Vn=1.5*On;qn&&(Vn=.5*On,en.ticks==="outside"&&(Vn+=en.ticklen)),nn=10+Vn+(en.linewidth?en.linewidth-1:0)}qn||(nn+=Rn==="x"?en.side==="top"?On*(en.showticklabels?1:0):On*(en.showticklabels?1.5:.5):en.side==="right"?On*(en.showticklabels?1:.5):On*(en.showticklabels?.5:0))}var tr,Zn,lr,or,sr=Y.getPxPosition(pn,en);if(Rn==="x"?(Zn=en._offset+en._length/2,lr=en.side==="top"?sr-nn:sr+nn):(lr=en._offset+en._length/2,Zn=en.side==="right"?sr+nn:sr-nn,tr={rotate:"-90",offset:0}),en.type!=="multicategory"){var mr=en._selections[en._id+"tick"];if(or={selection:mr,side:en.side},mr&&mr.node()&&mr.node().parentNode){var gr=n.getTranslate(mr.node().parentNode);or.offsetLeft=gr.x,or.offsetTop=gr.y}en.title.hasOwnProperty("standoff")&&(or.pad=0)}return en._titleStandoff=nn,t.draw(pn,dn+"title",{propContainer:en,propName:en._name+".title.text",placeholder:fn._dfltTitle[Rn],avoid:or,transform:tr,attributes:{x:Zn,y:lr,"text-anchor":"middle"}})}(De,Be)}),rn.push(function(){var pn,en,nn,fn,dn=Be.side.charAt(0),Rn=K[Be.side].charAt(0),On=Y.getPxPosition(De,Be),qn=vn?Be.ticklen:0;(Be.automargin||Mn||Be._shiftPusher)&&(Be.type==="multicategory"?pn=Cn("tick2"):(pn=Cn(),gt==="x"&&dn==="b"&&(Be._depth=Math.max(pn.width>0?pn.bottom-On:0,qn))));var Vn=0,tr=0;if(Be._shiftPusher&&(Vn=Math.max(qn,pn.height>0?dn==="l"?On-pn.left:pn.right-On:0),Be.title.text!==Et._dfltTitle[gt]&&(tr=(Be._titleStandoff||0)+(Be._titleScoot||0),dn==="l"&&(tr+=wt(Be))),Be._fullDepth=Math.max(Vn,tr)),Be.automargin){en={x:0,y:0,r:0,l:0,t:0,b:0};var Zn=[0,1],lr=typeof Be._shift=="number"?Be._shift:0;if(gt==="x"){if(dn==="b"?en[dn]=Be._depth:(en[dn]=Be._depth=Math.max(pn.width>0?On-pn.top:0,qn),Zn.reverse()),pn.width>0){var or=pn.right-(Be._offset+Be._length);or>0&&(en.xr=1,en.r=or);var sr=Be._offset-pn.left;sr>0&&(en.xl=0,en.l=sr)}}else if(dn==="l"?(Be._depth=Math.max(pn.height>0?On-pn.left:0,qn),en[dn]=Be._depth-lr):(Be._depth=Math.max(pn.height>0?pn.right-On:0,qn),en[dn]=Be._depth+lr,Zn.reverse()),pn.height>0){var mr=pn.bottom-(Be._offset+Be._length);mr>0&&(en.yb=0,en.b=mr);var gr=Be._offset-pn.top;gr>0&&(en.yt=1,en.t=gr)}en[Mt]=Be.anchor==="free"?Be.position:Be._anchorAxis.domain[Zn[0]],Be.title.text!==Et._dfltTitle[gt]&&(en[dn]+=wt(Be)+(Be.title.standoff||0)),Be.mirror&&Be.anchor!=="free"&&((nn={x:0,y:0,r:0,l:0,t:0,b:0})[Rn]=Be.linewidth,Be.mirror&&Be.mirror!==!0&&(nn[Rn]+=qn),Be.mirror===!0||Be.mirror==="ticks"?nn[Mt]=Be._anchorAxis.domain[Zn[1]]:Be.mirror!=="all"&&Be.mirror!=="allticks"||(nn[Mt]=[Be._counterDomainMin,Be._counterDomainMax][Zn[1]]))}Mn&&(fn=_.getComponentMethod("rangeslider","autoMarginOpts")(De,Be)),typeof Be.automargin=="string"&&(at(en,Be.automargin),at(nn,Be.automargin)),a.autoMargin(De,Tt(Be),en),a.autoMargin(De,Lt(Be),nn),a.autoMargin(De,kt(Be),fn)}),g.syncOrAsync(rn)}}function Cn(pn){var en=pt+(pn||"tick");return wn[en]||(wn[en]=function(nn,fn){var dn,Rn,On,qn;return nn._selections[fn].size()?(dn=1/0,Rn=-1/0,On=1/0,qn=-1/0,nn._selections[fn].each(function(){var Vn=ct(this),tr=n.bBox(Vn.node().parentNode);dn=Math.min(dn,tr.top),Rn=Math.max(Rn,tr.bottom),On=Math.min(On,tr.left),qn=Math.max(qn,tr.right)})):(dn=0,Rn=0,On=0,qn=0),{top:dn,bottom:Rn,left:On,right:qn,height:Rn-dn,width:qn-On}}(Be,en)),wn[en]}},Y.getTickSigns=function(De,Be){var Qe=De._id.charAt(0),rt={x:"top",y:"right"}[Qe],vt=De.side===rt?1:-1,mt=[-1,1,vt,-vt];return(Be?(De.minor||{}).ticks:De.ticks)!=="inside"==(Qe==="x")&&(mt=mt.map(function(xt){return-xt})),De.side&&mt.push({l:-1,t:-1,r:1,b:1}[De.side.charAt(0)]),mt},Y.makeTransTickFn=function(De){return De._id.charAt(0)==="x"?function(Be){return h(De._offset+De.l2p(Be.x),0)}:function(Be){return h(0,De._offset+De.l2p(Be.x))}},Y.makeTransTickLabelFn=function(De){var Be=function(vt){var mt=vt.ticklabelposition||"",xt=function(Qt){return mt.indexOf(Qt)!==-1},dt=xt("top"),Et=xt("left"),pt=xt("right"),gt=xt("bottom"),Mt=xt("inside"),Nt=gt||Et||dt||pt;if(!Nt&&!Mt)return[0,0];var Bt=vt.side,Ut=Nt?(vt.tickwidth||0)/2:0,Jt=3,Vt=vt.tickfont?vt.tickfont.size:12;return(gt||dt)&&(Ut+=Vt*re,Jt+=(vt.linewidth||0)/2),(Et||pt)&&(Ut+=(vt.linewidth||0)/2,Jt+=3),Mt&&Bt==="top"&&(Jt-=Vt*(1-re)),(Et||dt)&&(Ut=-Ut),Bt!=="bottom"&&Bt!=="right"||(Jt=-Jt),[Nt?Ut:0,Mt?Jt:0]}(De),Qe=Be[0],rt=Be[1];return De._id.charAt(0)==="x"?function(vt){return h(Qe+De._offset+De.l2p(ot(vt)),rt)}:function(vt){return h(rt,Qe+De._offset+De.l2p(ot(vt)))}},Y.makeTickPath=function(De,Be,Qe,rt){rt||(rt={});var vt=rt.minor;if(vt&&!De.minor)return"";var mt=rt.len!==void 0?rt.len:vt?De.minor.ticklen:De.ticklen,xt=De._id.charAt(0),dt=(De.linewidth||1)/2;return xt==="x"?"M0,"+(Be+dt*Qe)+"v"+mt*Qe:"M"+(Be+dt*Qe)+",0h"+mt*Qe},Y.makeLabelFns=function(De,Be,Qe){var rt=De.ticklabelposition||"",vt=function(yn){return rt.indexOf(yn)!==-1},mt=vt("top"),xt=vt("left"),dt=vt("right"),Et=vt("bottom")||xt||mt||dt,pt=vt("inside"),gt=rt==="inside"&&De.ticks==="inside"||!pt&&De.ticks==="outside"&&De.tickson!=="boundaries",Mt=0,Nt=0,Bt=gt?De.ticklen:0;if(pt?Bt*=-1:Et&&(Bt=0),gt&&(Mt+=Bt,Qe)){var Ut=g.deg2rad(Qe);Mt=Bt*Math.cos(Ut)+1,Nt=Bt*Math.sin(Ut)}De.showticklabels&&(gt||De.showline)&&(Mt+=.2*De.tickfont.size);var Jt,Vt,Qt,qt,gn,wn={labelStandoff:Mt+=(De.linewidth||1)/2*(pt?-1:1),labelShift:Nt},hn=0,Xt=De.side,an=De._id.charAt(0),tn=De.tickangle;if(an==="x")qt=(gn=!pt&&Xt==="bottom"||pt&&Xt==="top")?1:-1,pt&&(qt*=-1),Jt=Nt*qt,Vt=Be+Mt*qt,Qt=gn?1:-.2,Math.abs(tn)===90&&(pt?Qt+=q:Qt=tn===-90&&Xt==="bottom"?re:tn===90&&Xt==="top"?q:.5,hn=q/2*(tn/90)),wn.xFn=function(yn){return yn.dx+Jt+hn*yn.fontSize},wn.yFn=function(yn){return yn.dy+Vt+yn.fontSize*Qt},wn.anchorFn=function(yn,Pn){if(Et){if(xt)return"end";if(dt)return"start"}return b(Pn)&&Pn!==0&&Pn!==180?Pn*qt<0!==pt?"end":"start":"middle"},wn.heightFn=function(yn,Pn,In){return Pn<-60||Pn>60?-.5*In:De.side==="top"!==pt?-In:0};else if(an==="y"){if(qt=(gn=!pt&&Xt==="left"||pt&&Xt==="right")?1:-1,pt&&(qt*=-1),Jt=Mt,Vt=Nt*qt,Qt=0,pt||Math.abs(tn)!==90||(Qt=tn===-90&&Xt==="left"||tn===90&&Xt==="right"?re:.5),pt){var cn=b(tn)?+tn:0;if(cn!==0){var vn=g.deg2rad(cn);hn=Math.abs(Math.sin(vn))*re*qt,Qt=0}}wn.xFn=function(yn){return yn.dx+Be-(Jt+yn.fontSize*Qt)*qt+hn*yn.fontSize},wn.yFn=function(yn){return yn.dy+Vt+yn.fontSize*q},wn.anchorFn=function(yn,Pn){return b(Pn)&&Math.abs(Pn)===90?"middle":gn?"end":"start"},wn.heightFn=function(yn,Pn,In){return De.side==="right"&&(Pn*=-1),Pn<-30?-In:Pn<30?-.5*In:0}}return wn},Y.drawTicks=function(De,Be,Qe){Qe=Qe||{};var rt=Be._id+"tick",vt=[].concat(Be.minor&&Be.minor.ticks?Qe.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Be.ticks?Qe.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),mt=Qe.layer.selectAll("path."+rt).data(vt,bt);mt.exit().remove(),mt.enter().append("path").classed(rt,1).classed("ticks",1).classed("crisp",Qe.crisp!==!1).each(function(xt){return i.stroke(T.select(this),xt.minor?Be.minor.tickcolor:Be.tickcolor)}).style("stroke-width",function(xt){return n.crispRound(De,xt.minor?Be.minor.tickwidth:Be.tickwidth,1)+"px"}).attr("d",Qe.path).style("display",null),ut(Be,[V]),mt.attr("transform",Qe.transFn)},Y.drawGrid=function(De,Be,Qe){if(Qe=Qe||{},Be.tickmode!=="sync"){var rt=Be._id+"grid",vt=Be.minor&&Be.minor.showgrid,mt=vt?Qe.vals.filter(function(Qt){return Qt.minor}):[],xt=Be.showgrid?Qe.vals.filter(function(Qt){return!Qt.minor}):[],dt=Qe.counterAxis;if(dt&&Y.shouldShowZeroLine(De,Be,dt))for(var Et=Be.tickmode==="array",pt=0;pt<xt.length;pt++){var gt=xt[pt].x;if(Et?!gt:Math.abs(gt)<Be.dtick/100){if(xt=xt.slice(0,pt).concat(xt.slice(pt+1)),!Et)break;pt--}}Be._gw=n.crispRound(De,Be.gridwidth,1);for(var Mt=vt?n.crispRound(De,Be.minor.gridwidth,1):0,Nt=Qe.layer,Bt=Qe.minorLayer,Ut=1;Ut>=0;Ut--){var Jt=Ut?Nt:Bt;if(Jt){var Vt=Jt.selectAll("path."+rt).data(Ut?xt:mt,bt);Vt.exit().remove(),Vt.enter().append("path").classed(rt,1).classed("crisp",Qe.crisp!==!1),Vt.attr("transform",Qe.transFn).attr("d",Qe.path).each(function(Qt){return i.stroke(T.select(this),Qt.minor?Be.minor.gridcolor:Be.gridcolor||"#ddd")}).style("stroke-dasharray",function(Qt){return n.dashStyle(Qt.minor?Be.minor.griddash:Be.griddash,Qt.minor?Be.minor.gridwidth:Be.gridwidth)}).style("stroke-width",function(Qt){return(Qt.minor?Mt:Be._gw)+"px"}).style("display",null),typeof Qe.path=="function"&&Vt.attr("d",Qe.path)}}ut(Be,[X,D])}},Y.drawZeroLine=function(De,Be,Qe){Qe=Qe||Qe;var rt=Be._id+"zl",vt=Y.shouldShowZeroLine(De,Be,Qe.counterAxis),mt=Qe.layer.selectAll("path."+rt).data(vt?[{x:0,id:Be._id}]:[]);mt.exit().remove(),mt.enter().append("path").classed(rt,1).classed("zl",1).classed("crisp",Qe.crisp!==!1).each(function(){Qe.layer.selectAll("path").sort(function(xt,dt){return ae(xt.id,dt.id)})}),mt.attr("transform",Qe.transFn).attr("d",Qe.path).call(i.stroke,Be.zerolinecolor||i.defaultLine).style("stroke-width",n.crispRound(De,Be.zerolinewidth,Be._gw||1)+"px").style("display",null),ut(Be,[O])},Y.drawLabels=function(De,Be,Qe){Qe=Qe||{};var rt=De._fullLayout,vt=Be._id,mt=vt.charAt(0),xt=Qe.cls||vt+"tick",dt=Qe.vals.filter(function(qt){return qt.text}),Et=Qe.labelFns,pt=Qe.secondary?0:Be.tickangle,gt=(Be._prevTickAngles||{})[xt],Mt=Qe.layer.selectAll("g."+xt).data(Be.showticklabels?dt:[],bt),Nt=[];function Bt(qt,gn){qt.each(function(wn){var hn=T.select(this),Xt=hn.select(".text-math-group"),an=Et.anchorFn(wn,gn),tn=Qe.transFn.call(hn.node(),wn)+(b(gn)&&+gn!=0?" rotate("+gn+","+Et.xFn(wn)+","+(Et.yFn(wn)-wn.fontSize/2)+")":""),cn=o.lineCount(hn),vn=ee*wn.fontSize,yn=Et.heightFn(wn,b(gn)?+gn:0,(cn-1)*vn);if(yn&&(tn+=h(0,yn)),Xt.empty()){var Pn=hn.select("text");Pn.attr({transform:tn,"text-anchor":an}),Pn.style("opacity",1),Be._adjustTickLabelsOverflow&&Be._adjustTickLabelsOverflow()}else{var In=n.bBox(Xt.node()).width*{end:-.5,start:.5}[an];Xt.attr("transform",tn+h(In,0))}})}Mt.enter().append("g").classed(xt,1).append("text").attr("text-anchor","middle").each(function(qt){var gn=T.select(this),wn=De._promises.length;gn.call(o.positionText,Et.xFn(qt),Et.yFn(qt)).call(n.font,qt.font,qt.fontSize,qt.fontColor).text(qt.text).call(o.convertToTspans,De),De._promises[wn]?Nt.push(De._promises.pop().then(function(){Bt(gn,pt)})):Bt(gn,pt)}),ut(Be,[j]),Mt.exit().remove(),Qe.repositionOnUpdate&&Mt.each(function(qt){T.select(this).select("text").call(o.positionText,Et.xFn(qt),Et.yFn(qt))}),Be._adjustTickLabelsOverflow=function(){var qt=Be.ticklabeloverflow;if(qt&&qt!=="allow"){var gn=qt.indexOf("hide")!==-1,wn=Be._id.charAt(0)==="x",hn=0,Xt=wn?De._fullLayout.width:De._fullLayout.height;if(qt.indexOf("domain")!==-1){var an=g.simpleMap(Be.range,Be.r2l);hn=Be.l2p(an[0])+Be._offset,Xt=Be.l2p(an[1])+Be._offset}var tn=Math.min(hn,Xt),cn=Math.max(hn,Xt),vn=Be.side,yn=1/0,Pn=-1/0;for(var In in Mt.each(function(er){var ir=T.select(this);if(ir.select(".text-math-group").empty()){var fr=n.bBox(ir.node()),ar=0;wn?(fr.right>cn||fr.left<tn)&&(ar=1):(fr.bottom>cn||fr.top+(Be.tickangle?0:er.fontSize/4)<tn)&&(ar=1);var Jn=ir.select("text");ar?gn&&Jn.style("opacity",0):(Jn.style("opacity",1),yn=vn==="bottom"||vn==="right"?Math.min(yn,wn?fr.top:fr.left):-1/0,Pn=vn==="top"||vn==="left"?Math.max(Pn,wn?fr.bottom:fr.right):1/0)}}),rt._plots){var kn=rt._plots[In];if(Be._id===kn.xaxis._id||Be._id===kn.yaxis._id){var zn=wn?kn.yaxis:kn.xaxis;zn&&(zn["_visibleLabelMin_"+Be._id]=yn,zn["_visibleLabelMax_"+Be._id]=Pn)}}}},Be._hideCounterAxisInsideTickLabels=function(qt){var gn=Be._id.charAt(0)==="x",wn=[];for(var hn in rt._plots){var Xt=rt._plots[hn];Be._id!==Xt.xaxis._id&&Be._id!==Xt.yaxis._id||wn.push(gn?Xt.yaxis:Xt.xaxis)}wn.forEach(function(an,tn){an&&tt(an)&&(qt||[O,D,X,V,j]).forEach(function(cn){var vn=cn.K==="tick"&&cn.L==="text"&&Be.ticklabelmode==="period",yn=rt._plots[Be._mainSubplot];(cn.K===O.K?yn.zerolinelayer.selectAll("."+Be._id+"zl"):cn.K===D.K?yn.minorGridlayer.selectAll("."+Be._id):cn.K===X.K?yn.gridlayer.selectAll("."+Be._id):yn[Be._id.charAt(0)+"axislayer"]).each(function(){var Pn=T.select(this);cn.L&&(Pn=Pn.selectAll(cn.L)),Pn.each(function(In){var kn=Be.l2p(vn?ot(In):In.x)+Be._offset,zn=T.select(this);kn<Be["_visibleLabelMax_"+an._id]&&kn>Be["_visibleLabelMin_"+an._id]?zn.style("display","none"):cn.K!=="tick"||tn||zn.style("display",null)})})})})},Bt(Mt,gt+1?gt:pt);var Ut=null;Be._selections&&(Be._selections[xt]=Mt);var Jt=[function(){return Nt.length&&Promise.all(Nt)}];Be.automargin&&rt._redrawFromAutoMarginCount&&gt===90?(Ut=90,Jt.push(function(){Bt(Mt,gt)})):Jt.push(function(){if(Bt(Mt,pt),dt.length&&mt==="x"&&!b(pt)&&(Be.type!=="log"||String(Be.dtick).charAt(0)!=="D")){Ut=0;var qt,gn=0,wn=[];if(Mt.each(function(ir){gn=Math.max(gn,ir.fontSize);var fr=Be.l2p(ir.x),ar=ct(this),Jn=n.bBox(ar.node());wn.push({top:0,bottom:10,height:10,left:fr-Jn.width/2,right:fr+Jn.width/2+2,width:Jn.width+2})}),Be.tickson!=="boundaries"&&!Be.showdividers||Qe.secondary){var hn=dt.length,Xt=Math.abs((dt[hn-1].x-dt[0].x)*Be._m)/(hn-1),an=Be.ticklabelposition||"",tn=function(ir){return an.indexOf(ir)!==-1},cn=tn("top"),vn=tn("left"),yn=tn("right"),Pn=tn("bottom")||vn||cn||yn?(Be.tickwidth||0)+6:0,In=Xt<2.5*gn||Be.type==="multicategory"||Be._name==="realaxis";for(qt=0;qt<wn.length-1;qt++)if(g.bBoxIntersect(wn[qt],wn[qt+1],Pn)){Ut=In?90:30;break}}else{var kn=2;for(Be.ticks&&(kn+=Be.tickwidth/2),qt=0;qt<wn.length;qt++){var zn=dt[qt].xbnd,er=wn[qt];if(zn[0]!==null&&er.left-Be.l2p(zn[0])<kn||zn[1]!==null&&Be.l2p(zn[1])-er.right<kn){Ut=90;break}}}Ut&&Bt(Mt,Ut)}}),Be._tickAngles&&Jt.push(function(){Be._tickAngles[xt]=Ut===null?b(pt)?pt:0:Ut});var Vt=Be._anchorAxis;Vt&&Vt.autorange&&tt(Be)&&!se(rt,Be._id)&&(rt._insideTickLabelsAutorange||(rt._insideTickLabelsAutorange={}),rt._insideTickLabelsAutorange[Vt._name+".autorange"]=Vt.autorange,Jt.push(function(){Mt.each(function(qt,gn){var wn=ct(this);wn.select(".text-math-group").empty()&&(Be._vals[gn].bb=n.bBox(wn.node()))})}));var Qt=g.syncOrAsync(Jt);return Qt&&Qt.then&&De._promises.push(Qt),Qt},Y.getPxPosition=function(De,Be){var Qe,rt=De._fullLayout._size,vt=Be._id.charAt(0),mt=Be.side;return Be.anchor!=="free"?Qe=Be._anchorAxis:vt==="x"?Qe={_offset:rt.t+(1-(Be.position||0))*rt.h,_length:0}:vt==="y"&&(Qe={_offset:rt.l+(Be.position||0)*rt.w+Be._shift,_length:0}),mt==="top"||mt==="left"?Qe._offset:mt==="bottom"||mt==="right"?Qe._offset+Qe._length:void 0},Y.shouldShowZeroLine=function(De,Be,Qe){var rt=g.simpleMap(Be.range,Be.r2l);return rt[0]*rt[1]<=0&&Be.zeroline&&(Be.type==="linear"||Be.type==="-")&&!(Be.rangebreaks&&Be.maskBreaks(0)===R)&&(ht(Be,0)||!function(vt,mt,xt,dt){var Et=xt._mainAxis;if(Et){var pt=vt._fullLayout,gt=mt._id.charAt(0),Mt=Y.counterLetter(mt._id),Nt=mt._offset+(Math.abs(dt[0])<Math.abs(dt[1])==(gt==="x")?0:mt._length),Bt=pt._plots[xt._mainSubplot];if(!(Bt.mainplotinfo||Bt).overlays.length)return Qt(xt);for(var Ut=Y.list(vt,Mt),Jt=0;Jt<Ut.length;Jt++){var Vt=Ut[Jt];if(Vt._mainAxis===Et&&Qt(Vt))return!0}}function Qt(qt){if(!qt.showline||!qt.linewidth)return!1;var gn=Math.max((qt.linewidth+mt.zerolinewidth)/2,1);function wn(an){return typeof an=="number"&&Math.abs(an-Nt)<gn}if(wn(qt._mainLinePosition)||wn(qt._mainMirrorPosition))return!0;var hn=qt._linepositions||{};for(var Xt in hn)if(wn(hn[Xt][0])||wn(hn[Xt][1]))return!0}}(De,Be,Qe,rt)||function(vt,mt){for(var xt=vt._fullData,dt=mt._mainSubplot,Et=mt._id.charAt(0),pt=0;pt<xt.length;pt++){var gt=xt[pt];if(gt.visible===!0&&gt.xaxis+gt.yaxis===dt&&(_.traceIs(gt,"bar-like")&&gt.orientation==={x:"h",y:"v"}[Et]||gt.fill&&gt.fill.charAt(gt.fill.length-1)===Et))return!0}return!1}(De,Be))},Y.clipEnds=function(De,Be){return Be.filter(function(Qe){return ht(De,Qe.x)})},Y.allowAutoMargin=function(De){for(var Be=Y.list(De,"",!0),Qe=0;Qe<Be.length;Qe++){var rt=Be[Qe];rt.automargin&&(a.allowAutoMargin(De,Tt(rt)),rt.mirror&&a.allowAutoMargin(De,Lt(rt))),_.getComponentMethod("rangeslider","isVisible")(rt)&&a.allowAutoMargin(De,kt(rt))}},Y.swap=function(De,Be){for(var Qe=function(vt,mt){var xt,dt,Et=[];for(xt=0;xt<mt.length;xt++){var pt=[],gt=vt._fullData[mt[xt]].xaxis,Mt=vt._fullData[mt[xt]].yaxis;if(gt&&Mt){for(dt=0;dt<Et.length;dt++)Et[dt].x.indexOf(gt)===-1&&Et[dt].y.indexOf(Mt)===-1||pt.push(dt);if(pt.length){var Nt,Bt=Et[pt[0]];if(pt.length>1)for(dt=1;dt<pt.length;dt++)Nt=Et[pt[dt]],Ot(Bt.x,Nt.x),Ot(Bt.y,Nt.y);Ot(Bt.x,[gt]),Ot(Bt.y,[Mt])}else Et.push({x:[gt],y:[Mt]})}}return Et}(De,Be),rt=0;rt<Qe.length;rt++)Pt(De,Qe[rt].x,Qe[rt].y)}},4322:function(F,L,e){var T=e(92770),b=e(71828),a=e(50606).BADNUM,_=b.isArrayOrTypedArray,g=b.isDateTime,h=b.cleanNumber,o=Math.round;function t(n,r){return r?T(n):typeof n=="number"}function i(n){return Math.max(1,(n-1)/1e3)}F.exports=function(n,r,s){var l=n,u=s.noMultiCategory;if(_(l)&&!l.length)return"-";if(!u&&function(f){return _(f[0])&&_(f[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var d=[],c=0;c<l.length;c++)if(_(l[c]))for(var w=0;w<l[c].length;w++)d.push(l[c][w]);l=d}if(function(f,x){for(var y=f.length,v=i(y),M=0,p=0,S={},A=0;A<y;A+=v){var k=f[o(A)],C=String(k);S[C]||(S[C]=1,g(k,x)&&M++,T(k)&&p++)}return M>2*p}(l,r))return"date";var m=s.autotypenumbers!=="strict";return function(f,x){for(var y=f.length,v=i(y),M=0,p=0,S={},A=0;A<y;A+=v){var k=f[o(A)],C=String(k);if(!S[C]){S[C]=1;var P=typeof k;P==="boolean"?p++:(x?h(k)!==a:P==="number")?M++:P==="string"&&p++}}return p>2*M}(l,m)?"category":function(f,x){for(var y=f.length,v=0;v<y;v++)if(t(f[v],x))return!0;return!1}(l,m)?"linear":"-"}},71453:function(F,L,e){var T=e(92770),b=e(73972),a=e(71828),_=e(44467),g=e(85501),h=e(13838),o=e(26218),t=e(38701),i=e(96115),n=e(89426),r=e(15258),s=e(92128),l=e(21994),u=e(85555).WEEKDAY_PATTERN,d=e(85555).HOUR_PATTERN;function c(f,x,y){function v(R,O){return a.coerce(f,x,h.rangebreaks,R,O)}if(v("enabled")){var M=v("bounds");if(M&&M.length>=2){var p,S,A="";if(M.length===2){for(p=0;p<2;p++)if(S=m(M[p])){A=u;break}}var k=v("pattern",A);if(k===u)for(p=0;p<2;p++)(S=m(M[p]))&&(x.bounds[p]=M[p]=S-1);if(k)for(p=0;p<2;p++)switch(S=M[p],k){case u:if(!T(S)||(S=+S)!==Math.floor(S)||S<0||S>=7)return void(x.enabled=!1);x.bounds[p]=M[p]=S;break;case d:if(!T(S)||(S=+S)<0||S>24)return void(x.enabled=!1);x.bounds[p]=M[p]=S}if(y.autorange===!1){var C=y.range;if(C[0]<C[1]){if(M[0]<C[0]&&M[1]>C[1])return void(x.enabled=!1)}else if(M[0]>C[0]&&M[1]<C[1])return void(x.enabled=!1)}}else{var P=v("values");if(!P||!P.length)return void(x.enabled=!1);v("dvalue")}}}F.exports=function(f,x,y,v,M){var p,S=v.letter,A=v.font||{},k=v.splomStash||{},C=y("visible",!v.visibleDflt),P=x._template||{},R=x.type||P.type||"-";R==="date"&&(b.getComponentMethod("calendars","handleDefaults")(f,x,"calendar",v.calendar),v.noTicklabelmode||(p=y("ticklabelmode")));var O="";v.noTicklabelposition&&R!=="multicategory"||(O=a.coerce(f,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:p==="period"?["outside","inside"]:S==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),v.noTicklabeloverflow||y("ticklabeloverflow",O.indexOf("inside")!==-1?"hide past domain":R==="category"||R==="multicategory"?"allow":"hide past div"),l(x,M);var X=!x.isValidRange(f.range);X&&v.reverseDflt&&(X="reversed"),!y("autorange",X)||R!=="linear"&&R!=="-"||y("rangemode"),y("range"),x.cleanRange(),r(f,x,y,v),R==="category"||v.noHover||y("hoverformat");var D=y("color"),V=D!==h.color.dflt?D:A.color,j=k.label||M._dfltTitle[S];if(n(f,x,y,R,v),!C)return x;y("title.text",j),a.coerceFont(y,"title.font",{family:A.family,size:a.bigFont(A.size),color:V}),o(f,x,y,R);var B=v.hasMinor;if(B&&(_.newContainer(x,"minor"),o(f,x,y,R,{isMinor:!0})),i(f,x,y,R,v),t(f,x,y,v),B){var W=v.isMinor;v.isMinor=!0,t(f,x,y,v),v.isMinor=W}s(f,x,y,{dfltColor:D,bgColor:v.bgColor,showGrid:v.showGrid,hasMinor:B,attributes:h}),!B||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&y("mirror");var q,re=R==="multicategory";if(v.noTickson||R!=="category"&&!re||!x.ticks&&!x.showgrid||(re&&(q="boundaries"),y("tickson",q)==="boundaries"&&delete x.ticklabelposition),re&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),R==="date")if(g(f,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),x.rangebreaks.length){for(var ee=0;ee<x.rangebreaks.length;ee++)if(x.rangebreaks[ee].pattern===u){x._hasDayOfWeekBreaks=!0;break}if(l(x,M),M._has("scattergl")||M._has("splom"))for(var K=0;K<v.data.length;K++){var Y=v.data[K];Y.type!=="scattergl"&&Y.type!=="splom"||(Y.visible=!1,a.warn(Y.type+" traces do not work on axes with rangebreaks. Setting trace "+Y.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(f){if(typeof f=="string")return w[f.substr(0,3).toLowerCase()]}},12663:function(F,L,e){var T=e(31562),b=T.FORMAT_LINK,a=T.DATE_FORMAT_LINK;function _(h,o){return["Sets the "+h+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+b+"."].join(" ")}function g(h,o){return _(h,o)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}F.exports={axisHoverFormat:function(h,o){return{valType:"string",dflt:"",editType:"none",description:(o?_:g)("hover text",h)+["By default the values are formatted using "+(o?"generic number format":"`"+h+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:_,descriptionWithDates:g}},41675:function(F,L,e){var T=e(73972),b=e(85555);function a(_,g){if(g&&g.length){for(var h=0;h<g.length;h++)if(g[h][_])return!0}return!1}L.id2name=function(_){if(typeof _=="string"&&_.match(b.AX_ID_PATTERN)){var g=_.split(" ")[0].substr(1);return g==="1"&&(g=""),_.charAt(0)+"axis"+g}},L.name2id=function(_){if(_.match(b.AX_NAME_PATTERN)){var g=_.substr(5);return g==="1"&&(g=""),_.charAt(0)+g}},L.cleanId=function(_,g,h){var o=/( domain)$/.test(_);if(typeof _=="string"&&_.match(b.AX_ID_PATTERN)&&(!g||_.charAt(0)===g)&&(!o||h)){var t=_.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),_.charAt(0)+t+(o&&h?" domain":"")}},L.list=function(_,g,h){var o=_._fullLayout;if(!o)return[];var t,i=L.listIds(_,g),n=new Array(i.length);for(t=0;t<i.length;t++){var r=i[t];n[t]=o[r.charAt(0)+"axis"+r.substr(1)]}if(!h){var s=o._subplots.gl3d||[];for(t=0;t<s.length;t++){var l=o[s[t]];g?n.push(l[g+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},L.listIds=function(_,g){var h=_._fullLayout;if(!h)return[];var o=h._subplots;return g?o[g+"axis"]:o.xaxis.concat(o.yaxis)},L.getFromId=function(_,g,h){var o=_._fullLayout;return g=g===void 0||typeof g!="string"?g:g.replace(" domain",""),h==="x"?g=g.replace(/y[0-9]*/,""):h==="y"&&(g=g.replace(/x[0-9]*/,"")),o[L.id2name(g)]},L.getFromTrace=function(_,g,h){var o=_._fullLayout,t=null;if(T.traceIs(g,"gl3d")){var i=g.scene;i.substr(0,5)==="scene"&&(t=o[i][h+"axis"])}else t=L.getFromId(_,g[h+"axis"]||h);return t},L.idSort=function(_,g){var h=_.charAt(0),o=g.charAt(0);return h!==o?h>o?1:-1:+(_.substr(1)||1)-+(g.substr(1)||1)},L.ref2id=function(_){return!!/^[xyz]/.test(_)&&_.split(" ")[0]},L.isLinked=function(_,g){return a(g,_._axisMatchGroups)||a(g,_._axisConstraintGroups)}},15258:function(F){F.exports=function(L,e,T,b){if(e.type==="category"){var a,_=L.categoryarray,g=Array.isArray(_)&&_.length>0;g&&(a="array");var h,o=T("categoryorder",a);o==="array"&&(h=T("categoryarray")),g||o!=="array"||(o=e.categoryorder="trace"),o==="trace"?e._initialCategories=[]:o==="array"?e._initialCategories=h.slice():(h=function(t,i){var n,r,s,l=i.dataAttr||t._id.charAt(0),u={};if(i.axData)n=i.axData;else for(n=[],r=0;r<i.data.length;r++){var d=i.data[r];d[l+"axis"]===t._id&&n.push(d)}for(r=0;r<n.length;r++){var c=n[r][l];for(s=0;s<c.length;s++){var w=c[s];w!=null&&(u[w]=1)}}return Object.keys(u)}(e,b).sort(),o==="category ascending"?e._initialCategories=h:o==="category descending"&&(e._initialCategories=h.reverse()))}}},66287:function(F,L,e){var T=e(92770),b=e(71828),a=e(50606),_=a.ONEDAY,g=a.ONEWEEK;L.dtick=function(h,o){var t=o==="log",i=o==="date",n=o==="category",r=i?_:1;if(!h)return r;if(T(h))return(h=Number(h))<=0?r:n?Math.max(1,Math.round(h)):i?Math.max(.1,h):h;if(typeof h!="string"||!i&&!t)return r;var s=h.charAt(0),l=h.substr(1);return(l=T(l)?Number(l):0)<=0||!(i&&s==="M"&&l===Math.round(l)||t&&s==="L"||t&&s==="D"&&(l===1||l===2))?r:h},L.tick0=function(h,o,t,i){return o==="date"?b.cleanDate(h,b.dateTick0(t,i%g==0?1:0)):i!=="D1"&&i!=="D2"?T(h)?Number(h):0:void 0}},85555:function(F,L,e){var T=e(30587).counter;F.exports={idRegex:{x:T("x","( domain)?"),y:T("y","( domain)?")},attrRegex:T("[xy]axis"),xAxisMatch:T("xaxis"),yAxisMatch:T("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(F,L,e){var T=e(71828),b=e(71739),a=e(41675).id2name,_=e(13838),g=e(42449),h=e(21994),o=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function i(c,w,m){var f=m.axIds,x=m.layoutOut,y=m.hasImage,v=x._axisConstraintGroups,M=x._axisMatchGroups,p=w._id,S=p.charAt(0),A=((x._splomAxes||{})[S]||{})[p]||{},k=w._id,C=k.charAt(0)==="x";function P($,ne){return T.coerce(c,w,_,$,ne)}w._matchGroup=null,w._constraintGroup=null,P("constrain",y?"domain":"range"),T.coerce(c,w,{constraintoward:{valType:"enumerated",values:C?["left","center","right"]:["bottom","middle","top"],dflt:C?"center":"middle"}},"constraintoward");var R,O,X=w.type,D=[];for(R=0;R<f.length;R++)(O=f[R])!==k&&x[a(O)].type===X&&D.push(O);var V=r(v,k);if(V){var j=[];for(R=0;R<D.length;R++)V[O=D[R]]||j.push(O);D=j}var B,W,q=D.length;q&&(c.matches||A.matches)&&(B=T.coerce(c,w,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(A.matches)!==-1?A.matches:void 0}},"matches"));var re=y&&!C?w.anchor:void 0;if(q&&!B&&(c.scaleanchor||re)&&(W=T.coerce(c,w,{scaleanchor:{valType:"enumerated",values:D}},"scaleanchor",re)),B){w._matchGroup=s(M,k,B,1);var ee=x[a(B)],K=n(x,w)/n(x,ee);C!==(B.charAt(0)==="x")&&(K=(C?"x":"y")+K),s(v,k,B,K)}else c.matches&&f.indexOf(c.matches)!==-1&&T.warn("ignored "+w._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(W){var Y=P("scaleratio");Y||(Y=w.scaleratio=1),s(v,k,W,Y)}else c.scaleanchor&&f.indexOf(c.scaleanchor)!==-1&&T.warn("ignored "+w._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(c,w){var m=w.domain;return m||(m=c[a(w.overlaying)].domain),m[1]-m[0]}function r(c,w){for(var m=0;m<c.length;m++)if(c[m][w])return c[m];return null}function s(c,w,m,f){var x,y,v,M,p,S=r(c,w);S===null?((S={})[w]=1,p=c.length,c.push(S)):p=c.indexOf(S);var A=Object.keys(S);for(x=0;x<c.length;x++)if(v=c[x],x!==p&&v[m]){var k=v[m];for(y=0;y<A.length;y++)v[M=A[y]]=l(k,l(f,S[M]));return void c.splice(p,1)}if(f!==1)for(y=0;y<A.length;y++){var C=A[y];S[C]=l(f,S[C])}S[m]=1}function l(c,w){var m,f,x="",y="";typeof c=="string"&&(m=(x=c.match(/^[xy]*/)[0]).length,c=+c.substr(m)),typeof w=="string"&&(f=(y=w.match(/^[xy]*/)[0]).length,w=+w.substr(f));var v=c*w;return m||f?m&&f&&x.charAt(0)!==y.charAt(0)?m===f?v:(m>f?x.substr(f):y.substr(m))+v:x+y+c*w:v}function u(c,w){for(var m=w._size,f=m.h/m.w,x={},y=Object.keys(c),v=0;v<y.length;v++){var M=y[v],p=c[M];if(typeof p=="string"){var S=p.match(/^[xy]*/)[0],A=S.length;p=+p.substr(A);for(var k=S.charAt(0)==="y"?f:1/f,C=0;C<A;C++)p*=k}x[M]=p}return x}function d(c,w){var m=c._inputDomain,f=t[c.constraintoward],x=m[0]+(m[1]-m[0])*f;c.domain=c._input.domain=[x+(m[0]-x)/w,x+(m[1]-x)/w],c.setScale()}L.handleDefaults=function(c,w,m){var f,x,y,v,M,p,S,A,k=m.axIds,C=m.axHasImage,P=w._axisConstraintGroups=[],R=w._axisMatchGroups=[];for(f=0;f<k.length;f++)i(M=c[v=a(k[f])],p=w[v],{axIds:k,layoutOut:w,hasImage:C[v]});function O(ee,K){for(f=0;f<ee.length;f++)for(y in x=ee[f])w[a(y)][K]=x}for(O(R,"_matchGroup"),f=0;f<P.length;f++)for(y in x=P[f])if((p=w[a(y)]).fixedrange){for(var X in x){var D=a(X);(c[D]||{}).fixedrange===!1&&T.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),w[D].fixedrange=!0}break}for(f=0;f<P.length;){for(y in x=P[f]){(p=w[a(y)])._matchGroup&&Object.keys(p._matchGroup).length===Object.keys(x).length&&(P.splice(f,1),f--);break}f++}O(P,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],j=!1,B=!1;function W(){A=p[S],S==="rangebreaks"&&(B=p._hasDayOfWeekBreaks)}for(f=0;f<R.length;f++){x=R[f];for(var q=0;q<V.length;q++){var re;for(y in S=V[q],A=null,x)if(M=c[v=a(y)],p=w[v],S in p){if(!p.matches&&(re=p,S in M)){W();break}A===null&&S in M&&W()}if(S==="range"&&A&&(j=!0),S==="autorange"&&A===null&&j&&(A=!1),A===null&&S in re&&(A=re[S]),A!==null)for(y in x)(p=w[a(y)])[S]=S==="range"?A.slice():A,S==="rangebreaks"&&(p._hasDayOfWeekBreaks=B,h(p,w))}}},L.enforce=function(c){var w,m,f,x,y,v,M,p,S=c._fullLayout,A=S._axisConstraintGroups||[];for(w=0;w<A.length;w++){f=u(A[w],S);var k=Object.keys(f),C=1/0,P=0,R=1/0,O={},X={},D=!1;for(m=0;m<k.length;m++)X[x=k[m]]=y=S[a(x)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),O[x]=v=Math.abs(y._m)/f[x],C=Math.min(C,v),y.constrain!=="domain"&&y._constraintShrinkable||(R=Math.min(R,v)),delete y._constraintShrinkable,P=Math.max(P,v),y.constrain==="domain"&&(D=!0);if(!(C>o*P)||D){for(m=0;m<k.length;m++)if(v=O[x=k[m]],M=(y=X[x]).constrain,v!==R||M==="domain")if(p=v/R,M==="range")g(y,p);else{var V=y._inputDomain,j=(y.domain[1]-y.domain[0])/(V[1]-V[0]),B=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((p/=j)*B<1){y.domain=y._input.domain=V.slice(),g(y,p);continue}if(B<1&&(y.range=y._input.range=y._inputRange.slice(),p*=B),y.autorange){var W=y.r2l(y.range[0]),q=y.r2l(y.range[1]),re=(W+q)/2,ee=re,K=re,Y=Math.abs(q-re),$=re-Y*p*1.0001,ne=re+Y*p*1.0001,ae=b.makePadFn(S,y,0),se=b.makePadFn(S,y,1);d(y,p);var ce,me,ye=Math.abs(y._m),Te=b.concatExtremes(c,y),Ce=Te.min,pe=Te.max;for(me=0;me<Ce.length;me++)(ce=Ce[me].val-ae(Ce[me])/ye)>$&&ce<ee&&(ee=ce);for(me=0;me<pe.length;me++)(ce=pe[me].val+se(pe[me])/ye)<ne&&ce>K&&(K=ce);p/=(K-ee)/(2*Y),ee=y.l2r(ee),K=y.l2r(K),y.range=y._input.range=W<q?[ee,K]:[K,ee]}d(y,p)}}}},L.getAxisGroup=function(c,w){for(var m=c._axisMatchGroups,f=0;f<m.length;f++)if(m[f][w])return"g"+f;return w},L.clean=function(c,w){if(w._inputDomain){for(var m=!1,f=w._id,x=c._fullLayout._axisConstraintGroups,y=0;y<x.length;y++)if(x[y][f]){m=!0;break}m&&w.constrain==="domain"||(w._input.domain=w.domain=w._inputDomain,delete w._inputDomain)}}},29323:function(F,L,e){var T=e(39898),b=e(71828),a=b.numberFormat,_=e(84267),g=e(38520),h=e(73972),o=b.strTranslate,t=e(63893),i=e(7901),n=e(91424),r=e(30211),s=e(89298),l=e(6964),u=e(28569),d=e(64505),c=d.selectingOrDrawing,w=d.freeMode,m=e(18783).FROM_TL,f=e(33306),x=e(61549).redrawReglTraces,y=e(74875),v=e(41675).getFromId,M=e(47322).prepSelect,p=e(47322).clearOutline,S=e(47322).selectOnClick,A=e(42449),k=e(85555),C=k.MINDRAG,P=k.MINZOOM,R=!0;function O(ce,me,ye,Te){var Ce=b.ensureSingle(ce.draglayer,me,ye,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ce.id)});return Ce.call(l,Te),Ce.node()}function X(ce,me,ye,Te,Ce,pe,fe){var Oe=O(ce,"rect",me,ye);return T.select(Oe).call(n.setRect,Te,Ce,pe,fe),Oe}function D(ce,me){for(var ye=0;ye<ce.length;ye++)if(!ce[ye].fixedrange)return me;return""}function V(ce,me,ye,Te,Ce){for(var pe=0;pe<ce.length;pe++){var fe=ce[pe];if(!fe.fixedrange)if(fe.rangebreaks){var Oe=fe._id.charAt(0)==="y",Se=Oe?1-me:me,Me=Oe?1-ye:ye;Te[fe._name+".range[0]"]=fe.l2r(fe.p2l(Se*fe._length)),Te[fe._name+".range[1]"]=fe.l2r(fe.p2l(Me*fe._length))}else{var ue=fe._rl[0],le=fe._rl[1]-ue;Te[fe._name+".range[0]"]=fe.l2r(ue+le*me),Te[fe._name+".range[1]"]=fe.l2r(ue+le*ye)}}if(Ce&&Ce.length){var ie=(me+(1-ye))/2;V(Ce,ie,1-ie,Te,[])}}function j(ce,me){for(var ye=0;ye<ce.length;ye++){var Te=ce[ye];if(!Te.fixedrange)if(Te.rangebreaks){var Ce=Te._length,pe=(Te.p2l(0+me)-Te.p2l(0)+(Te.p2l(Ce+me)-Te.p2l(Ce)))/2;Te.range=[Te.l2r(Te._rl[0]-pe),Te.l2r(Te._rl[1]-pe)]}else Te.range=[Te.l2r(Te._rl[0]-me/Te._m),Te.l2r(Te._rl[1]-me/Te._m)]}}function B(ce){return 1-(ce>=0?Math.min(ce,.9):1/(1/Math.max(ce,-.3)+3.222))}function W(ce,me,ye,Te,Ce){return ce.append("path").attr("class","zoombox").style({fill:me>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",o(ye,Te)).attr("d",Ce+"Z")}function q(ce,me,ye){return ce.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",o(me,ye)).attr("d","M0,0Z")}function re(ce,me,ye,Te,Ce,pe){ce.attr("d",Te+"M"+ye.l+","+ye.t+"v"+ye.h+"h"+ye.w+"v-"+ye.h+"h-"+ye.w+"Z"),ee(ce,me,Ce,pe)}function ee(ce,me,ye,Te){ye||(ce.transition().style("fill",Te>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),me.transition().style("opacity",1).duration(200))}function K(ce){T.select(ce).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(ce){R&&ce.data&&ce._context.showTips&&(b.notifier(b._(ce,"Double-click to zoom back out"),"long"),R=!1)}function $(ce){var me=Math.floor(Math.min(ce.b-ce.t,ce.r-ce.l,P)/2);return"M"+(ce.l-3.5)+","+(ce.t-.5+me)+"h3v"+-me+"h"+me+"v-3h-"+(me+3)+"ZM"+(ce.r+3.5)+","+(ce.t-.5+me)+"h-3v"+-me+"h"+-me+"v-3h"+(me+3)+"ZM"+(ce.r+3.5)+","+(ce.b+.5-me)+"h-3v"+me+"h"+-me+"v3h"+(me+3)+"ZM"+(ce.l-3.5)+","+(ce.b+.5-me)+"h3v"+me+"h"+me+"v3h-"+(me+3)+"Z"}function ne(ce,me,ye,Te,Ce){for(var pe,fe,Oe,Se,Me=!1,ue={},le={},ie=(Ce||{}).xaHash,ge=(Ce||{}).yaHash,Ae=0;Ae<me.length;Ae++){var we=me[Ae];for(pe in ye)if(we[pe]){for(Oe in we)Ce&&(ie[Oe]||ge[Oe])||(Oe.charAt(0)==="x"?ye:Te)[Oe]||(ue[Oe]=pe);for(fe in Te)Ce&&(ie[fe]||ge[fe])||!we[fe]||(Me=!0)}for(fe in Te)if(we[fe])for(Se in we)Ce&&(ie[Se]||ge[Se])||(Se.charAt(0)==="x"?ye:Te)[Se]||(le[Se]=fe)}Me&&(b.extendFlat(ue,le),le={});var Ne={},He=[];for(Oe in ue){var de=v(ce,Oe);He.push(de),Ne[de._id]=de}var Le={},Ee=[];for(Se in le){var Re=v(ce,Se);Ee.push(Re),Le[Re._id]=Re}return{xaHash:Ne,yaHash:Le,xaxes:He,yaxes:Ee,xLinks:ue,yLinks:le,isSubplotConstrained:Me}}function ae(ce,me){if(g){var ye=ce.onwheel!==void 0?"wheel":"mousewheel";ce._onwheel&&ce.removeEventListener(ye,ce._onwheel),ce._onwheel=me,ce.addEventListener(ye,me,{passive:!1})}else ce.onwheel!==void 0?ce.onwheel=me:ce.onmousewheel!==void 0?ce.onmousewheel=me:ce.isAddedWheelEvent||(ce.isAddedWheelEvent=!0,ce.addEventListener("wheel",me,{passive:!1}))}function se(ce){var me=[];for(var ye in ce)me.push(ce[ye]);return me}F.exports={makeDragBox:function(ce,me,ye,Te,Ce,pe,fe,Oe){var Se,Me,ue,le,ie,ge,Ae,we,Ne,He,de,Le,Ee,Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt,ht=ce._fullLayout._zoomlayer,ct=fe+Oe==="nsew",Tt=(fe+Oe).length===1;function Lt(){if(Se=me.xaxis,Me=me.yaxis,Ne=Se._length,He=Me._length,Ae=Se._offset,we=Me._offset,(ue={})[Se._id]=Se,(le={})[Me._id]=Me,fe&&Oe)for(var Xt=me.overlays,an=0;an<Xt.length;an++){var tn=Xt[an].xaxis;ue[tn._id]=tn;var cn=Xt[an].yaxis;le[cn._id]=cn}ie=se(ue),ge=se(le),Ee=D(ie,Oe),Re=D(ge,fe),je=!Re&&!Ee,Le=ne(ce,ce._fullLayout._axisMatchGroups,ue,le);var vn=(de=ne(ce,ce._fullLayout._axisConstraintGroups,ue,le,Le)).isSubplotConstrained||Le.isSubplotConstrained;Fe=Oe||vn,Xe=fe||vn;var yn=ce._fullLayout;Ze=yn._has("scattergl"),at=yn._has("splom"),lt=yn._has("svg")}ye+=me.yaxis._shift,Lt();var kt=function(Xt,an,tn){return Xt?Xt==="nsew"?tn?"":an==="pan"?"move":"crosshair":Xt.toLowerCase()+"-resize":"pointer"}(Re+Ee,ce._fullLayout.dragmode,ct),Ot=X(me,fe+Oe+"drag",kt,ye,Te,Ce,pe);if(je&&!ct)return Ot.onmousedown=null,Ot.style.pointerEvents="none",Ot;var Pt,et,nt,Ye,tt,ut,Ke,De,Be,Qe,rt={element:Ot,gd:ce,plotinfo:me};function vt(){rt.plotinfo.selection=!1,p(ce)}function mt(Xt,an){var tn=rt.gd;if(tn._fullLayout._activeShapeIndex>=0)tn._fullLayout._deactivateShape(tn);else{var cn=tn._fullLayout.clickmode;if(K(tn),Xt!==2||Tt||Vt(),ct)cn.indexOf("select")>-1&&S(an,tn,ie,ge,me.id,rt),cn.indexOf("event")>-1&&r.click(tn,an,me.id);else if(Xt===1&&Tt){var vn=fe?Me:Se,yn=fe==="s"||Oe==="w"?0:1,Pn=vn._name+".range["+yn+"]",In=function(er,ir){var fr,ar=er.range[ir],Jn=Math.abs(ar-er.range[1-ir]);return er.type==="date"?ar:er.type==="log"?(fr=Math.ceil(Math.max(0,-Math.log(Jn)/Math.LN10))+3,a("."+fr+"g")(Math.pow(10,ar))):(fr=Math.floor(Math.log(Math.abs(ar))/Math.LN10)-Math.floor(Math.log(Jn)/Math.LN10)+4,a("."+String(fr)+"g")(ar))}(vn,yn),kn="left",zn="middle";if(vn.fixedrange)return;fe?(zn=fe==="n"?"top":"bottom",vn.side==="right"&&(kn="right")):Oe==="e"&&(kn="right"),tn._context.showAxisRangeEntryBoxes&&T.select(Ot).call(t.makeEditable,{gd:tn,immediate:!0,background:tn._fullLayout.paper_bgcolor,text:String(In),fill:vn.tickfont?vn.tickfont.color:"#444",horizontalAlign:kn,verticalAlign:zn}).on("edit",function(er){var ir=vn.d2r(er);ir!==void 0&&h.call("_guiRelayout",tn,Pn,ir)})}}}function xt(Xt,an){if(ce._transitioningWithDuration)return!1;var tn=Math.max(0,Math.min(Ne,bt*Xt+Pt)),cn=Math.max(0,Math.min(He,wt*an+et)),vn=Math.abs(tn-Pt),yn=Math.abs(cn-et);function Pn(){Ke="",nt.r=nt.l,nt.t=nt.b,Be.attr("d","M0,0Z")}if(nt.l=Math.min(Pt,tn),nt.r=Math.max(Pt,tn),nt.t=Math.min(et,cn),nt.b=Math.max(et,cn),de.isSubplotConstrained)vn>P||yn>P?(Ke="xy",vn/Ne>yn/He?(yn=vn*He/Ne,et>cn?nt.t=et-yn:nt.b=et+yn):(vn=yn*Ne/He,Pt>tn?nt.l=Pt-vn:nt.r=Pt+vn),Be.attr("d",$(nt))):Pn();else if(Le.isSubplotConstrained)if(vn>P||yn>P){Ke="xy";var In=Math.min(nt.l/Ne,(He-nt.b)/He),kn=Math.max(nt.r/Ne,(He-nt.t)/He);nt.l=In*Ne,nt.r=kn*Ne,nt.b=(1-In)*He,nt.t=(1-kn)*He,Be.attr("d",$(nt))}else Pn();else!Re||yn<Math.min(Math.max(.6*vn,C),P)?vn<C||!Ee?Pn():(nt.t=0,nt.b=He,Ke="x",Be.attr("d",function(zn,er){return"M"+(zn.l-.5)+","+(er-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(zn.r+.5)+","+(er-P-.5)+"h3v"+(2*P+1)+"h-3Z"}(nt,et))):!Ee||vn<Math.min(.6*yn,P)?(nt.l=0,nt.r=Ne,Ke="y",Be.attr("d",function(zn,er){return"M"+(er-P-.5)+","+(zn.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(er-P-.5)+","+(zn.b+.5)+"v3h"+(2*P+1)+"v-3Z"}(nt,Pt))):(Ke="xy",Be.attr("d",$(nt)));nt.w=nt.r-nt.l,nt.h=nt.b-nt.t,Ke&&(Qe=!0),ce._dragged=Qe,re(De,Be,nt,tt,ut,Ye),dt(),ce.emit("plotly_relayouting",ot),ut=!0}function dt(){ot={},Ke!=="xy"&&Ke!=="x"||(V(ie,nt.l/Ne,nt.r/Ne,ot,de.xaxes),Ut("x",ot)),Ke!=="xy"&&Ke!=="y"||(V(ge,(He-nt.b)/He,(He-nt.t)/He,ot,de.yaxes),Ut("y",ot))}function Et(){dt(),K(ce),Qt(),Y(ce)}rt.prepFn=function(Xt,an,tn){var cn=rt.dragmode,vn=ce._fullLayout.dragmode;vn!==cn&&(rt.dragmode=vn),Lt(),bt=ce._fullLayout._invScaleX,wt=ce._fullLayout._invScaleY,je||(ct?Xt.shiftKey?vn==="pan"?vn="zoom":c(vn)||(vn="pan"):Xt.ctrlKey&&(vn="pan"):vn="pan"),w(vn)?rt.minDrag=1:rt.minDrag=void 0,c(vn)?(rt.xaxes=ie,rt.yaxes=ge,M(Xt,an,tn,rt,vn)):(rt.clickFn=mt,c(cn)&&vt(),je||(vn==="zoom"?(rt.moveFn=xt,rt.doneFn=Et,rt.minDrag=1,function(yn,Pn,In){var kn=Ot.getBoundingClientRect();Pt=Pn-kn.left,et=In-kn.top,ce._fullLayout._calcInverseTransform(ce);var zn=b.apply3DTransform(ce._fullLayout._invTransform)(Pt,et);Pt=zn[0],et=zn[1],nt={l:Pt,r:Pt,w:0,t:et,b:et,h:0},Ye=ce._hmpixcount?ce._hmlumcount/ce._hmpixcount:_(ce._fullLayout.plot_bgcolor).getLuminance(),ut=!1,Ke="xy",Qe=!1,De=W(ht,Ye,Ae,we,tt="M0,0H"+Ne+"V"+He+"H0V0"),Be=q(ht,Ae,we)}(0,an,tn)):vn==="pan"&&(rt.moveFn=Bt,rt.doneFn=Qt))),ce._fullLayout._redrag=function(){var yn=ce._dragdata;if(yn&&yn.element===Ot){var Pn=ce._fullLayout.dragmode;c(Pn)||(Lt(),qt([0,0,Ne,He]),rt.moveFn(yn.dx,yn.dy))}}},u.init(rt);var pt=[0,0,Ne,He],gt=null,Mt=k.REDRAWDELAY,Nt=me.mainplot?ce._fullLayout._plots[me.mainplot]:me;function Bt(Xt,an){if(Xt*=bt,an*=wt,!ce._transitioningWithDuration){if(ce._fullLayout._replotting=!0,Ee==="ew"||Re==="ns"){var tn=Ee?-Xt:0,cn=Re?-an:0;if(Le.isSubplotConstrained){if(Ee&&Re){var vn=(Xt/Ne-an/He)/2;tn=-(Xt=vn*Ne),cn=-(an=-vn*He)}Re?tn=-cn*Ne/He:cn=-tn*He/Ne}return Ee&&(j(ie,Xt),Ut("x")),Re&&(j(ge,an),Ut("y")),qt([tn,cn,Ne,He]),Jt(),void ce.emit("plotly_relayouting",ot)}var yn,Pn,In=Ee==="w"==(Re==="n")?1:-1;if(Ee&&Re&&(de.isSubplotConstrained||Le.isSubplotConstrained)){var kn=(Xt/Ne+In*an/He)/2;Xt=kn*Ne,an=In*kn*He}if(Ee==="w"?Xt=fr(ie,0,Xt):Ee==="e"?Xt=fr(ie,1,-Xt):Ee||(Xt=0),Re==="n"?an=fr(ge,1,an):Re==="s"?an=fr(ge,0,-an):Re||(an=0),yn=Ee==="w"?Xt:0,Pn=Re==="n"?an:0,de.isSubplotConstrained&&!Le.isSubplotConstrained||Le.isSubplotConstrained&&Ee&&Re&&In>0){var zn;if(Le.isSubplotConstrained||!Ee&&Re.length===1){for(zn=0;zn<ie.length;zn++)ie[zn].range=ie[zn]._r.slice(),A(ie[zn],1-an/He);yn=(Xt=an*Ne/He)/2}if(Le.isSubplotConstrained||!Re&&Ee.length===1){for(zn=0;zn<ge.length;zn++)ge[zn].range=ge[zn]._r.slice(),A(ge[zn],1-Xt/Ne);Pn=(an=Xt*He/Ne)/2}}Le.isSubplotConstrained&&Re||Ut("x"),Le.isSubplotConstrained&&Ee||Ut("y");var er=Ne-Xt,ir=He-an;!Le.isSubplotConstrained||Ee&&Re||(Ee?(Pn=yn?0:Xt*He/Ne,ir=er*He/Ne):(yn=Pn?0:an*Ne/He,er=ir*Ne/He)),qt([yn,Pn,er,ir]),Jt(),ce.emit("plotly_relayouting",ot)}function fr(ar,Jn,br){for(var Gt,ln,mn=1-Jn,_n=0;_n<ar.length;_n++){var Ln=ar[_n];if(!Ln.fixedrange){Gt=Ln,ln=Ln._rl[mn]+(Ln._rl[Jn]-Ln._rl[mn])/B(br/Ln._length);var Yn=Ln.l2r(ln);Yn!==!1&&Yn!==void 0&&(Ln.range[Jn]=Yn)}}return Gt._length*(Gt._rl[Jn]-ln)/(Gt._rl[Jn]-Gt._rl[mn])}}function Ut(Xt,an){for(var tn=Le.isSubplotConstrained?{x:ge,y:ie}[Xt]:Le[Xt+"axes"],cn=Le.isSubplotConstrained?{x:ie,y:ge}[Xt]:[],vn=0;vn<tn.length;vn++){var yn=tn[vn],Pn=yn._id,In=Le.xLinks[Pn]||Le.yLinks[Pn],kn=cn[0]||ue[In]||le[In];kn&&(an?(an[yn._name+".range[0]"]=an[kn._name+".range[0]"],an[yn._name+".range[1]"]=an[kn._name+".range[1]"]):yn.range=kn.range.slice())}}function Jt(){var Xt,an=[];function tn(Pn){for(Xt=0;Xt<Pn.length;Xt++)Pn[Xt].fixedrange||an.push(Pn[Xt]._id)}function cn(Pn,In){for(Xt=0;Xt<Pn.length;Xt++){var kn=Pn[Xt],zn=kn[In];kn.fixedrange||zn.tickmode!=="sync"||an.push(zn._id)}}for(Fe&&(tn(ie),tn(de.xaxes),tn(Le.xaxes),cn(me.overlays,"xaxis")),Xe&&(tn(ge),tn(de.yaxes),tn(Le.yaxes),cn(me.overlays,"yaxis")),ot={},Xt=0;Xt<an.length;Xt++){var vn=an[Xt],yn=v(ce,vn);s.drawOne(ce,yn,{skipTitle:!0}),ot[yn._name+".range[0]"]=yn.range[0],ot[yn._name+".range[1]"]=yn.range[1]}s.redrawComponents(ce,an)}function Vt(){if(!ce._transitioningWithDuration){var Xt=ce._context.doubleClick,an=[];Ee&&(an=an.concat(ie)),Re&&(an=an.concat(ge)),Le.xaxes&&(an=an.concat(Le.xaxes)),Le.yaxes&&(an=an.concat(Le.yaxes));var tn,cn,vn,yn={};if(Xt==="reset+autosize"){for(Xt="autosize",cn=0;cn<an.length;cn++)if((tn=an[cn])._rangeInitial&&(tn.range[0]!==tn._rangeInitial[0]||tn.range[1]!==tn._rangeInitial[1])||!tn._rangeInitial&&!tn.autorange){Xt="reset";break}}if(Xt==="autosize")for(cn=0;cn<an.length;cn++)(tn=an[cn]).fixedrange||(yn[tn._name+".autorange"]=!0);else if(Xt==="reset")for((Ee||de.isSubplotConstrained)&&(an=an.concat(de.xaxes)),Re&&!de.isSubplotConstrained&&(an=an.concat(de.yaxes)),de.isSubplotConstrained&&(Ee?Re||(an=an.concat(ge)):an=an.concat(ie)),cn=0;cn<an.length;cn++)(tn=an[cn]).fixedrange||(tn._rangeInitial?(vn=tn._rangeInitial,yn[tn._name+".range[0]"]=vn[0],yn[tn._name+".range[1]"]=vn[1]):yn[tn._name+".autorange"]=!0);ce.emit("plotly_doubleclick",null),h.call("_guiRelayout",ce,yn)}}function Qt(){qt([0,0,Ne,He]),b.syncOrAsync([y.previousPromises,function(){ce._fullLayout._replotting=!1,h.call("_guiRelayout",ce,ot)}],ce)}function qt(Xt){var an,tn,cn,vn,yn=ce._fullLayout,Pn=yn._plots,In=yn._subplots.cartesian;if(at&&h.subplotsRegistry.splom.drag(ce),Ze){for(an=0;an<In.length;an++)if(cn=(tn=Pn[In[an]]).xaxis,vn=tn.yaxis,tn._scene){var kn=b.simpleMap(cn.range,cn.r2l),zn=b.simpleMap(vn.range,vn.r2l);tn._scene.update({range:[kn[0],zn[0],kn[1],zn[1]]})}}if((at||Ze)&&(f(ce),x(ce)),lt){var er=Xt[2]/Se._length,ir=Xt[3]/Me._length;for(an=0;an<In.length;an++){cn=(tn=Pn[In[an]]).xaxis,vn=tn.yaxis;var fr,ar,Jn,br,Gt=(Fe||Le.isSubplotConstrained)&&!cn.fixedrange&&ue[cn._id],ln=(Xe||Le.isSubplotConstrained)&&!vn.fixedrange&&le[vn._id];if(Gt?(fr=er,Jn=Oe||Le.isSubplotConstrained?Xt[0]:hn(cn,fr)):Le.xaHash[cn._id]?(fr=er,Jn=Xt[0]*cn._length/Se._length):Le.yaHash[cn._id]?(fr=ir,Jn=Re==="ns"?-Xt[1]*cn._length/Me._length:hn(cn,fr,{n:"top",s:"bottom"}[Re])):Jn=wn(cn,fr=gn(cn,er,ir)),ln?(ar=ir,br=fe||Le.isSubplotConstrained?Xt[1]:hn(vn,ar)):Le.yaHash[vn._id]?(ar=ir,br=Xt[1]*vn._length/Me._length):Le.xaHash[vn._id]?(ar=er,br=Ee==="ew"?-Xt[0]*vn._length/Se._length:hn(vn,ar,{e:"right",w:"left"}[Ee])):br=wn(vn,ar=gn(vn,er,ir)),fr||ar){fr||(fr=1),ar||(ar=1);var mn=cn._offset-Jn/fr,_n=vn._offset-br/ar;tn.clipRect.call(n.setTranslate,Jn,br).call(n.setScale,fr,ar),tn.plot.call(n.setTranslate,mn,_n).call(n.setScale,1/fr,1/ar),fr===tn.xScaleFactor&&ar===tn.yScaleFactor||(n.setPointGroupScale(tn.zoomScalePts,fr,ar),n.setTextPointsScale(tn.zoomScaleTxt,fr,ar)),n.hideOutsideRangePoints(tn.clipOnAxisFalseTraces,tn),tn.xScaleFactor=fr,tn.yScaleFactor=ar}}}}function gn(Xt,an,tn){return Xt.fixedrange?0:Fe&&de.xaHash[Xt._id]?an:Xe&&(de.isSubplotConstrained?de.xaHash:de.yaHash)[Xt._id]?tn:0}function wn(Xt,an){return an?(Xt.range=Xt._r.slice(),A(Xt,an),hn(Xt,an)):0}function hn(Xt,an,tn){return Xt._length*(1-an)*m[tn||Xt.constraintoward||"middle"]}return fe.length*Oe.length!=1&&ae(Ot,function(Xt){if(ce._context._scrollZoom.cartesian||ce._fullLayout._enablescrollzoom){if(vt(),ce._transitioningWithDuration)return Xt.preventDefault(),void Xt.stopPropagation();Lt(),clearTimeout(gt);var an=-Xt.deltaY;if(isFinite(an)||(an=Xt.wheelDelta/10),isFinite(an)){var tn,cn=Math.exp(-Math.min(Math.max(an,-20),20)/200),vn=Nt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),yn=(Xt.clientX-vn.left)/vn.width,Pn=(vn.bottom-Xt.clientY)/vn.height;if(Fe){for(Oe||(yn=.5),tn=0;tn<ie.length;tn++)In(ie[tn],yn,cn);Ut("x"),pt[2]*=cn,pt[0]+=pt[2]*yn*(1/cn-1)}if(Xe){for(fe||(Pn=.5),tn=0;tn<ge.length;tn++)In(ge[tn],Pn,cn);Ut("y"),pt[3]*=cn,pt[1]+=pt[3]*(1-Pn)*(1/cn-1)}qt(pt),Jt(),ce.emit("plotly_relayouting",ot),gt=setTimeout(function(){ce._fullLayout&&(pt=[0,0,Ne,He],Qt())},Mt),Xt.preventDefault()}else b.log("Did not find wheel motion attributes: ",Xt)}function In(kn,zn,er){if(!kn.fixedrange){var ir=b.simpleMap(kn.range,kn.r2l),fr=ir[0]+(ir[1]-ir[0])*zn;kn.range=ir.map(function(ar){return kn.l2r(fr+(ar-fr)*er)})}}}),Ot},makeDragger:O,makeRectDragger:X,makeZoombox:W,makeCorners:q,updateZoombox:re,xyCorners:$,transitionZoombox:ee,removeZoombox:K,showDoubleClickNotifier:Y,attachWheelEventHandler:ae}},4305:function(F,L,e){var T=e(39898),b=e(30211),a=e(28569),_=e(6964),g=e(29323).makeDragBox,h=e(85555).DRAGGERSIZE;L.initInteractions=function(o){var t=o._fullLayout;if(o._context.staticPlot)T.select(o).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var s=n.split("y"),l=r.split("y");return s[0]===l[0]?Number(s[1]||1)-Number(l[1]||1):Number(s[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],s=r.xaxis,l=r.yaxis;if(!r.mainplot){var u=g(o,r,s._offset,l._offset,s._length,l._length,"ns","ew");u.onmousemove=function(w){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===n&&o._fullLayout._plots[n]&&b.hover(o,w,n)},b.hover(o,w,n),o._fullLayout._lasthover=u,o._fullLayout._hoversubplot=n},u.onmouseout=function(w){o._dragging||(o._fullLayout._hoversubplot=null,a.unhover(o,w))},o._context.showAxisDragHandles&&(g(o,r,s._offset-h,l._offset-h,h,h,"n","w"),g(o,r,s._offset+s._length,l._offset-h,h,h,"n","e"),g(o,r,s._offset-h,l._offset+l._length,h,h,"s","w"),g(o,r,s._offset+s._length,l._offset+l._length,h,h,"s","e"))}if(o._context.showAxisDragHandles){if(n===s._mainSubplot){var d=s._mainLinePosition;s.side==="top"&&(d-=h),g(o,r,s._offset+.1*s._length,d,.8*s._length,h,"","ew"),g(o,r,s._offset,d,.1*s._length,h,"","w"),g(o,r,s._offset+.9*s._length,d,.1*s._length,h,"","e")}if(n===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=h),g(o,r,c,l._offset+.1*l._length,h,.8*l._length,"ns",""),g(o,r,c,l._offset+.9*l._length,h,.1*l._length,"s",""),g(o,r,c,l._offset,h,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(n){n.target=o._fullLayout._lasthover,b.hover(o,n,t._hoversubplot)},i.onclick=function(n){n.target=o._fullLayout._lasthover,b.click(o,n)},i.onmousedown=function(n){o._fullLayout._lasthover.onmousedown(n)},L.updateFx(o)}},L.updateFx=function(o){var t=o._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";_(t._draggers,i)}},76325:function(F,L,e){var T=e(73972),b=e(71828),a=e(41675);F.exports=function(_){return function(g,h){var o=g[_];if(Array.isArray(o))for(var t=T.subplotsRegistry.cartesian,i=t.idRegex,n=h._subplots,r=n.xaxis,s=n.yaxis,l=n.cartesian,u=h._has("cartesian")||h._has("gl2d"),d=0;d<o.length;d++){var c=o[d];if(b.isPlainObject(c)){var w=a.cleanId(c.xref,"x",!1),m=a.cleanId(c.yref,"y",!1),f=i.x.test(w),x=i.y.test(m);if(f||x){u||b.pushUnique(h._basePlotModules,t);var y=!1;f&&r.indexOf(w)===-1&&(r.push(w),y=!0),x&&s.indexOf(m)===-1&&(s.push(m),y=!0),y&&f&&x&&l.push(w+m)}}}}}},93612:function(F,L,e){var T=e(39898),b=e(73972),a=e(71828),_=e(74875),g=e(91424),h=e(27659).a0,o=e(41675),t=e(85555),i=e(77922),n=a.ensureSingle;function r(c,w,m){return a.ensureSingle(c,w,m,function(f){f.datum(m)})}function s(c,w,m,f,x){for(var y,v,M,p=t.traceLayerClasses,S=c._fullLayout,A=S._modules,k=[],C=[],P=0;P<A.length;P++){var R=(y=A[P]).name,O=b.modules[R].categories;if(O.svg){var X=y.layerName||R+"layer",D=y.plot;M=(v=h(m,D))[0],m=v[1],M.length&&k.push({i:p.indexOf(X),className:X,plotMethod:D,cdModule:M}),O.zoomScale&&C.push("."+X)}}k.sort(function(B,W){return B.i-W.i});var V=w.plot.selectAll("g.mlayer").data(k,function(B){return B.className});if(V.enter().append("g").attr("class",function(B){return B.className}).classed("mlayer",!0).classed("rangeplot",w.isRangePlot),V.exit().remove(),V.order(),V.each(function(B){var W=T.select(this),q=B.className;B.plotMethod(c,w,B.cdModule,W,f,x),t.clipOnAxisFalseQuery.indexOf("."+q)===-1&&g.setClipUrl(W,w.layerClipId,c)}),S._has("scattergl")&&(y=b.getModule("scattergl"),M=h(m,y)[0],y.plot(c,w,M)),!c._context.staticPlot&&(w._hasClipOnAxisFalse&&(w.clipOnAxisFalseTraces=w.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),C.length)){var j=w.plot.selectAll(C.join(",")).selectAll(".trace");w.zoomScalePts=j.selectAll("path.point"),w.zoomScaleTxt=j.selectAll(".textpoint")}}function l(c,w){var m=w.plotgroup,f=w.id,x=t.layerValue2layerClass[w.xaxis.layer],y=t.layerValue2layerClass[w.yaxis.layer],v=c._fullLayout._hasOnlyLargeSploms;if(w.mainplot){var M=w.mainplotinfo,p=M.plotgroup,S=f+"-x",A=f+"-y";w.minorGridlayer=M.minorGridlayer,w.gridlayer=M.gridlayer,w.zerolinelayer=M.zerolinelayer,n(M.overlinesBelow,"path",S),n(M.overlinesBelow,"path",A),n(M.overaxesBelow,"g",S),n(M.overaxesBelow,"g",A),w.plot=n(M.overplot,"g",f),n(M.overlinesAbove,"path",S),n(M.overlinesAbove,"path",A),n(M.overaxesAbove,"g",S),n(M.overaxesAbove,"g",A),w.xlines=p.select(".overlines-"+x).select("."+S),w.ylines=p.select(".overlines-"+y).select("."+A),w.xaxislayer=p.select(".overaxes-"+x).select("."+S),w.yaxislayer=p.select(".overaxes-"+y).select("."+A)}else if(v)w.xlines=n(m,"path","xlines-above"),w.ylines=n(m,"path","ylines-above"),w.xaxislayer=n(m,"g","xaxislayer-above"),w.yaxislayer=n(m,"g","yaxislayer-above");else{var k=n(m,"g","layer-subplot");w.shapelayer=n(k,"g","shapelayer"),w.imagelayer=n(k,"g","imagelayer"),w.minorGridlayer=n(m,"g","minor-gridlayer"),w.gridlayer=n(m,"g","gridlayer"),w.zerolinelayer=n(m,"g","zerolinelayer"),n(m,"path","xlines-below"),n(m,"path","ylines-below"),w.overlinesBelow=n(m,"g","overlines-below"),n(m,"g","xaxislayer-below"),n(m,"g","yaxislayer-below"),w.overaxesBelow=n(m,"g","overaxes-below"),w.plot=n(m,"g","plot"),w.overplot=n(m,"g","overplot"),w.xlines=n(m,"path","xlines-above"),w.ylines=n(m,"path","ylines-above"),w.overlinesAbove=n(m,"g","overlines-above"),n(m,"g","xaxislayer-above"),n(m,"g","yaxislayer-above"),w.overaxesAbove=n(m,"g","overaxes-above"),w.xlines=m.select(".xlines-"+x),w.ylines=m.select(".ylines-"+y),w.xaxislayer=m.select(".xaxislayer-"+x),w.yaxislayer=m.select(".yaxislayer-"+y)}v||(r(w.minorGridlayer,"g",w.xaxis._id),r(w.minorGridlayer,"g",w.yaxis._id),w.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(o.idSort),r(w.gridlayer,"g",w.xaxis._id),r(w.gridlayer,"g",w.yaxis._id),w.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(o.idSort)),w.xlines.style("fill","none").classed("crisp",!0),w.ylines.style("fill","none").classed("crisp",!0)}function u(c,w){if(c){var m={};for(var f in c.each(function(M){var p=M[0];T.select(this).remove(),d(p,w),m[p]=!0}),w._plots)for(var x=w._plots[f].overlays||[],y=0;y<x.length;y++){var v=x[y];m[v.id]&&v.plot.selectAll(".trace").remove()}}}function d(c,w){w._draggers.selectAll("g."+c).remove(),w._defs.select("#clip"+w._uid+c+"plot").remove()}L.name="cartesian",L.attr=["xaxis","yaxis"],L.idRoot=["x","y"],L.idRegex=t.idRegex,L.attrRegex=t.attrRegex,L.attributes=e(89502),L.layoutAttributes=e(13838),L.supplyLayoutDefaults=e(86763),L.transitionAxes=e(66847),L.finalizeSubplots=function(c,w){var m,f,x,y=w._subplots,v=y.xaxis,M=y.yaxis,p=y.cartesian,S=p.concat(y.gl2d||[]),A={},k={};for(m=0;m<S.length;m++){var C=S[m].split("y");A[C[0]]=1,k["y"+C[1]]=1}for(m=0;m<v.length;m++)A[f=v[m]]||(x=(c[o.id2name(f)]||{}).anchor,t.idRegex.y.test(x)||(x="y"),p.push(f+x),S.push(f+x),k[x]||(k[x]=1,a.pushUnique(M,x)));for(m=0;m<M.length;m++)k[x=M[m]]||(f=(c[o.id2name(x)]||{}).anchor,t.idRegex.x.test(f)||(f="x"),p.push(f+x),S.push(f+x),A[f]||(A[f]=1,a.pushUnique(v,f)));if(!S.length){for(var P in f="",x="",c)t.attrRegex.test(P)&&(P.charAt(0)==="x"?(!f||+P.substr(5)<+f.substr(5))&&(f=P):(!x||+P.substr(5)<+x.substr(5))&&(x=P));f=f?o.name2id(f):"x",x=x?o.name2id(x):"y",v.push(f),M.push(x),p.push(f+x)}},L.plot=function(c,w,m,f){var x,y=c._fullLayout,v=y._subplots.cartesian,M=c.calcdata;if(!Array.isArray(w))for(w=[],x=0;x<M.length;x++)w.push(x);for(x=0;x<v.length;x++){for(var p,S=v[x],A=y._plots[S],k=[],C=0;C<M.length;C++){var P=M[C],R=P[0].trace;R.xaxis+R.yaxis===S&&((w.indexOf(R.index)!==-1||R.carpet)&&(p&&p[0].trace.xaxis+p[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(R.fill)!==-1&&k.indexOf(p)===-1&&k.push(p),k.push(P)),p=P)}s(c,A,k,m,f)}},L.clean=function(c,w,m,f){var x,y,v,M=f._plots||{},p=w._plots||{},S=f._subplots||{};if(f._hasOnlyLargeSploms&&!w._hasOnlyLargeSploms)for(v in M)(x=M[v]).plotgroup&&x.plotgroup.remove();var A=f._has&&f._has("gl"),k=w._has&&w._has("gl");if(A&&!k)for(v in M)(x=M[v])._scene&&x._scene.destroy();if(S.xaxis&&S.yaxis){var C=o.listIds({_fullLayout:f});for(y=0;y<C.length;y++){var P=C[y];w[o.id2name(P)]||f._infolayer.selectAll(".g-"+P+"title").remove()}}var R=f._has&&f._has("cartesian"),O=w._has&&w._has("cartesian");if(R&&!O)u(f._cartesianlayer.selectAll(".subplot"),f),f._defs.selectAll(".axesclip").remove(),delete f._axisConstraintGroups,delete f._axisMatchGroups;else if(S.cartesian)for(y=0;y<S.cartesian.length;y++){var X=S.cartesian[y];if(!p[X]){var D="."+X+",."+X+"-x,."+X+"-y";f._cartesianlayer.selectAll(D).remove(),d(X,f)}}},L.drawFramework=function(c){var w=c._fullLayout,m=function(x){var y,v,M,p,S,A,k=x._fullLayout,C=k._subplots.cartesian,P=C.length,R=[],O=[];for(y=0;y<P;y++){M=C[y],S=(p=k._plots[M]).xaxis,A=p.yaxis;var X=S._mainAxis,D=A._mainAxis,V=X._id+D._id,j=k._plots[V];p.overlays=[],V!==M&&j?(p.mainplot=V,p.mainplotinfo=j,O.push(M)):(p.mainplot=void 0,p.mainplotinfo=void 0,R.push(M))}for(y=0;y<O.length;y++)M=O[y],(p=k._plots[M]).mainplotinfo.overlays.push(p);var B=R.concat(O),W=new Array(P);for(y=0;y<P;y++){M=B[y],S=(p=k._plots[M]).xaxis,A=p.yaxis;var q=[M,S.layer,A.layer,S.overlaying||"",A.overlaying||""];for(v=0;v<p.overlays.length;v++)q.push(p.overlays[v].id);W[y]=q}return W}(c),f=w._cartesianlayer.selectAll(".subplot").data(m,String);f.enter().append("g").attr("class",function(x){return"subplot "+x[0]}),f.order(),f.exit().call(u,w),f.each(function(x){var y=x[0],v=w._plots[y];v.plotgroup=T.select(this),l(c,v),v.draglayer=n(w._draggers,"g",y)})},L.rangePlot=function(c,w,m){l(c,w),s(c,w,m),_.style(c)},L.toSVG=function(c){var w=c._fullLayout._glimages,m=T.select(c).selectAll(".svg-container");m.filter(function(f,x){return x===m.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var f=this,x=f.toDataURL("image/png");w.append("svg:image").attr({xmlns:i.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})})},L.updateFx=e(4305).updateFx},13838:function(F,L,e){var T=e(41940),b=e(22399),a=e(79952).P,_=e(1426).extendFlat,g=e(44467).templatedArray,h=e(12663).descriptionWithDates,o=e(50606).ONEDAY,t=e(85555),i=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},s=_({},r,{values:r.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},w={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=5),A}function f(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=1),A}var x={valType:"color",dflt:b.defaultLine,editType:"ticks"},y={valType:"color",dflt:b.lightLine,editType:"ticks"};function v(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=1),A}var M=_({},a,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};F.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:b.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:T({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:g("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:o},editType:"calc"}),tickmode:s,nticks:l(),tick0:u,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:w,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:f(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:T({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:h("tick label")},tickformatstops:g("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:h("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:b.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:y,gridwidth:v(),griddash:M,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:b.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:b.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:l("minor"),tick0:u,dtick:d,tickvals:c,ticks:w,ticklen:m("minor"),tickwidth:f("minor"),tickcolor:x,gridcolor:y,gridwidth:v("minor"),griddash:M,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:T({editType:"ticks"})}}},86763:function(F,L,e){var T=e(71828),b=e(7901),a=e(23469).isUnifiedHover,_=e(98212),g=e(44467),h=e(10820),o=e(13838),t=e(951),i=e(71453),n=e(99082),r=e(52830),s=e(41675),l=s.id2name,u=s.name2id,d=e(85555).AX_ID_PATTERN,c=e(73972),w=c.traceIs,m=c.getComponentMethod;function f(x,y,v){Array.isArray(x[y])?x[y].push(v):x[y]=[v]}F.exports=function(x,y,v){var M,p,S=y.autotypenumbers,A={},k={},C={},P={},R={},O={},X={},D={},V={},j={};for(M=0;M<v.length;M++){var B=v[M];if(w(B,"cartesian")||w(B,"gl2d")){var W,q;if(B.xaxis)W=l(B.xaxis),f(A,W,B);else if(B.xaxes)for(p=0;p<B.xaxes.length;p++)f(A,l(B.xaxes[p]),B);if(B.yaxis)q=l(B.yaxis),f(A,q,B);else if(B.yaxes)for(p=0;p<B.yaxes.length;p++)f(A,l(B.yaxes[p]),B);B.type==="funnel"?B.orientation==="h"?(W&&(k[W]=!0),q&&(X[q]=!0)):q&&(C[q]=!0):B.type==="image"?(q&&(D[q]=!0),W&&(D[W]=!0)):(q&&(R[q]=!0,O[q]=!0),w(B,"carpet")&&(B.type!=="carpet"||B._cheater)||W&&(P[W]=!0)),B.type==="carpet"&&B._cheater&&W&&(k[W]=!0),w(B,"2dMap")&&(V[W]=!0,V[q]=!0),w(B,"oriented")&&(j[B.orientation==="h"?q:W]=!0)}}var re=y._subplots,ee=re.xaxis,K=re.yaxis,Y=T.simpleMap(ee,l),$=T.simpleMap(K,l),ne=Y.concat($),ae=b.background;ee.length&&K.length&&(ae=T.coerce(x,y,h,"plot_bgcolor"));var se,ce,me,ye,Te,Ce=b.combine(ae,y.paper_bgcolor);function pe(){var Tt=A[se]||[];Te._traceIndices=Tt.map(function(Lt){return Lt._expandedIndex}),Te._annIndices=[],Te._shapeIndices=[],Te._selectionIndices=[],Te._imgIndices=[],Te._subplotsWith=[],Te._counterAxes=[],Te._name=Te._attr=se,Te._id=ce}function fe(Tt,Lt){return T.coerce(ye,Te,o,Tt,Lt)}function Oe(Tt,Lt){return T.coerce2(ye,Te,o,Tt,Lt)}function Se(Tt){return Tt==="x"?K:ee}function Me(Tt,Lt){for(var kt=Tt==="x"?Y:$,Ot=[],Pt=0;Pt<kt.length;Pt++){var et=kt[Pt];et===Lt||(x[et]||{}).overlaying||Ot.push(u(et))}return Ot}var ue={x:Se("x"),y:Se("y")},le=ue.x.concat(ue.y),ie={},ge=[];function Ae(){var Tt=ye.matches;d.test(Tt)&&le.indexOf(Tt)===-1&&(ie[Tt]=ye.type,ge=Object.keys(ie))}var we=_(x,y),Ne=a(we);for(M=0;M<ne.length;M++){se=ne[M],ce=u(se),me=se.charAt(0),T.isPlainObject(x[se])||(x[se]={}),ye=x[se],Te=g.newContainer(y,se,me+"axis"),pe();var He=me==="x"&&!P[se]&&k[se]||me==="y"&&!R[se]&&C[se],de=me==="y"&&(!O[se]&&X[se]||D[se]),Le={hasMinor:!0,letter:me,font:y.font,outerTicks:V[se],showGrid:!j[se],data:A[se]||[],bgColor:Ce,calendar:y.calendar,automargin:!0,visibleDflt:He,reverseDflt:de,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[me]||{})[ce]};fe("uirevision",y.uirevision),t(ye,Te,fe,Le),i(ye,Te,fe,Le,y);var Ee=Ne&&me===we.charAt(0),Re=Oe("spikecolor",Ne?Te.color:void 0),je=Oe("spikethickness",Ne?1.5:void 0),Fe=Oe("spikedash",Ne?"dot":void 0),Xe=Oe("spikemode",Ne?"across":void 0),Ze=Oe("spikesnap");fe("showspikes",!!(Ee||Re||je||Fe||Xe||Ze))||(delete Te.spikecolor,delete Te.spikethickness,delete Te.spikedash,delete Te.spikemode,delete Te.spikesnap);var at=l(ye.overlaying),lt=[0,1];if(y[at]!==void 0){var ot=l(y[at].anchor);y[ot]!==void 0&&(lt=y[ot].domain)}r(ye,Te,fe,{letter:me,counterAxes:ue[me],overlayableAxes:Me(me,se),grid:y.grid,overlayingDomain:lt}),fe("title.standoff"),Ae(),Te._input=ye}for(M=0;M<ge.length;){ce=ge[M++],me=(se=l(ce)).charAt(0),T.isPlainObject(x[se])||(x[se]={}),ye=x[se],Te=g.newContainer(y,se,me+"axis"),pe();var bt={letter:me,font:y.font,outerTicks:V[se],showGrid:!j[se],data:[],bgColor:Ce,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[me]||{})[ce]};fe("uirevision",y.uirevision),Te.type=ie[ce]||"linear",i(ye,Te,fe,bt,y),r(ye,Te,fe,{letter:me,counterAxes:ue[me],overlayableAxes:Me(me,se),grid:y.grid}),fe("fixedrange"),Ae(),Te._input=ye}var wt=m("rangeslider","handleDefaults"),ht=m("rangeselector","handleDefaults");for(M=0;M<Y.length;M++)se=Y[M],ye=x[se],Te=y[se],wt(x,y,se),Te.type==="date"&&ht(ye,Te,y,$,Te.calendar),fe("fixedrange");for(M=0;M<$.length;M++){se=$[M],ye=x[se],Te=y[se];var ct=y[l(Te.anchor)];fe("fixedrange",m("rangeslider","isVisible")(ct))}n.handleDefaults(x,y,{axIds:le.concat(ge).sort(s.idSort),axHasImage:D})}},92128:function(F,L,e){var T=e(84267).mix,b=e(22399),a=e(71828);F.exports=function(_,g,h,o){var t=(o=o||{}).dfltColor;function i(x,y){return a.coerce2(_,g,o.attributes,x,y)}var n=i("linecolor",t),r=i("linewidth");h("showline",o.showLine||!!n||!!r)||(delete g.linecolor,delete g.linewidth);var s=i("gridcolor",T(t,o.bgColor,o.blend||b.lightFraction).toRgbString()),l=i("gridwidth"),u=i("griddash");if(h("showgrid",o.showGrid||!!s||!!l||!!u)||(delete g.gridcolor,delete g.gridwidth,delete g.griddash),o.hasMinor){var d=i("minor.gridcolor",T(g.gridcolor,o.bgColor,67).toRgbString()),c=i("minor.gridwidth",g.gridwidth||1),w=i("minor.griddash",g.griddash||"solid");h("minor.showgrid",!!d||!!c||!!w)||(delete g.minor.gridcolor,delete g.minor.gridwidth,delete g.minor.griddash)}if(!o.noZeroLine){var m=i("zerolinecolor",t),f=i("zerolinewidth");h("zeroline",o.showGrid||!!m||!!f)||(delete g.zerolinecolor,delete g.zerolinewidth)}}},52830:function(F,L,e){var T=e(92770),b=e(71828);F.exports=function(a,_,g,h){var o,t,i,n,r,s,l=h.counterAxes||[],u=h.overlayableAxes||[],d=h.letter,c=h.grid,w=h.overlayingDomain;c&&(t=c._domains[d][c._axisMap[_._id]],o=c._anchors[_._id],t&&(i=c[d+"side"].split(" ")[0],n=c.domain[d][i==="right"||i==="top"?1:0])),t=t||[0,1],o=o||(T(a.position)?"free":l[0]||"free"),i=i||(d==="x"?"bottom":"left"),n=n||0,r=0,s=!1;var m=b.coerce(a,_,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:o}},"anchor"),f=b.coerce(a,_,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");m==="free"&&(d==="y"&&(g("autoshift")&&(n=f==="left"?w[0]:w[1],s=!_.automargin||_.automargin,r=f==="left"?-3:3),g("shift",r)),g("position",n)),g("automargin",s);var x=!1;if(u.length&&(x=b.coerce(a,_,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!x){var y=g("domain",t);y[0]>y[1]-.000244140625&&(_.domain=t),b.noneOrAll(a.domain,_.domain,t),_.tickmode==="sync"&&(_.tickmode="auto")}return g("layer"),_}},89426:function(F,L,e){var T=e(59652);F.exports=function(b,a,_,g,h){h||(h={});var o=h.tickSuffixDflt,t=T(b);_("tickprefix")&&_("showtickprefix",t),_("ticksuffix",o)&&_("showticksuffix",t)}},42449:function(F,L,e){var T=e(18783).FROM_BL;F.exports=function(b,a,_){_===void 0&&(_=T[b.constraintoward||"center"]);var g=[b.r2l(b.range[0]),b.r2l(b.range[1])],h=g[0]+(g[1]-g[0])*_;b.range=b._input.range=[b.l2r(h+(g[0]-h)*a),b.l2r(h+(g[1]-h)*a)],b.setScale()}},21994:function(F,L,e){var T=e(39898),b=e(84096).g0,a=e(71828),_=a.numberFormat,g=e(92770),h=a.cleanNumber,o=a.ms2DateTime,t=a.dateTime2ms,i=a.ensureNumber,n=a.isArrayOrTypedArray,r=e(50606),s=r.FP_SAFE,l=r.BADNUM,u=r.LOG_CLIP,d=r.ONEWEEK,c=r.ONEDAY,w=r.ONEHOUR,m=r.ONEMIN,f=r.ONESEC,x=e(41675),y=e(85555),v=y.HOUR_PATTERN,M=y.WEEKDAY_PATTERN;function p(A){return Math.pow(10,A)}function S(A){return A!=null}F.exports=function(A,k){k=k||{};var C=A._id||"x",P=C.charAt(0);function R(ne,ae){if(ne>0)return Math.log(ne)/Math.LN10;if(ne<=0&&ae&&A.range&&A.range.length===2){var se=A.range[0],ce=A.range[1];return .5*(se+ce-2*u*Math.abs(se-ce))}return l}function O(ne,ae,se,ce){if((ce||{}).msUTC&&g(ne))return+ne;var me=t(ne,se||A.calendar);if(me===l){if(!g(ne))return l;ne=+ne;var ye=Math.floor(10*a.mod(ne+.05,1)),Te=Math.round(ne-ye/10);me=t(new Date(Te))+ye/10}return me}function X(ne,ae,se){return o(ne,ae,se||A.calendar)}function D(ne){return A._categories[Math.round(ne)]}function V(ne){if(S(ne)){if(A._categoriesMap===void 0&&(A._categoriesMap={}),A._categoriesMap[ne]!==void 0)return A._categoriesMap[ne];A._categories.push(typeof ne=="number"?String(ne):ne);var ae=A._categories.length-1;return A._categoriesMap[ne]=ae,ae}return l}function j(ne){if(A._categoriesMap)return A._categoriesMap[ne]}function B(ne){var ae=j(ne);return ae!==void 0?ae:g(ne)?+ne:void 0}function W(ne){return g(ne)?+ne:j(ne)}function q(ne,ae,se){return T.round(se+ae*ne,2)}function re(ne,ae,se){return(ne-se)/ae}var ee=function(ne){return g(ne)?q(ne,A._m,A._b):l},K=function(ne){return re(ne,A._m,A._b)};if(A.rangebreaks){var Y=P==="y";ee=function(ne){if(!g(ne))return l;var ae=A._rangebreaks.length;if(!ae)return q(ne,A._m,A._b);var se=Y;A.range[0]>A.range[1]&&(se=!se);for(var ce=se?-1:1,me=ce*ne,ye=0,Te=0;Te<ae;Te++){var Ce=ce*A._rangebreaks[Te].min,pe=ce*A._rangebreaks[Te].max;if(me<Ce)break;if(!(me>pe)){ye=me<(Ce+pe)/2?Te:Te+1;break}ye=Te+1}var fe=A._B[ye]||0;return isFinite(fe)?q(ne,A._m2,fe):0},K=function(ne){var ae=A._rangebreaks.length;if(!ae)return re(ne,A._m,A._b);for(var se=0,ce=0;ce<ae&&!(ne<A._rangebreaks[ce].pmin);ce++)ne>A._rangebreaks[ce].pmax&&(se=ce+1);return re(ne,A._m2,A._B[se])}}A.c2l=A.type==="log"?R:i,A.l2c=A.type==="log"?p:i,A.l2p=ee,A.p2l=K,A.c2p=A.type==="log"?function(ne,ae){return ee(R(ne,ae))}:ee,A.p2c=A.type==="log"?function(ne){return p(K(ne))}:K,["linear","-"].indexOf(A.type)!==-1?(A.d2r=A.r2d=A.d2c=A.r2c=A.d2l=A.r2l=h,A.c2d=A.c2r=A.l2d=A.l2r=i,A.d2p=A.r2p=function(ne){return A.l2p(h(ne))},A.p2d=A.p2r=K,A.cleanPos=i):A.type==="log"?(A.d2r=A.d2l=function(ne,ae){return R(h(ne),ae)},A.r2d=A.r2c=function(ne){return p(h(ne))},A.d2c=A.r2l=h,A.c2d=A.l2r=i,A.c2r=R,A.l2d=p,A.d2p=function(ne,ae){return A.l2p(A.d2r(ne,ae))},A.p2d=function(ne){return p(K(ne))},A.r2p=function(ne){return A.l2p(h(ne))},A.p2r=K,A.cleanPos=i):A.type==="date"?(A.d2r=A.r2d=a.identity,A.d2c=A.r2c=A.d2l=A.r2l=O,A.c2d=A.c2r=A.l2d=A.l2r=X,A.d2p=A.r2p=function(ne,ae,se){return A.l2p(O(ne,0,se))},A.p2d=A.p2r=function(ne,ae,se){return X(K(ne),ae,se)},A.cleanPos=function(ne){return a.cleanDate(ne,l,A.calendar)}):A.type==="category"?(A.d2c=A.d2l=V,A.r2d=A.c2d=A.l2d=D,A.d2r=A.d2l_noadd=B,A.r2c=function(ne){var ae=W(ne);return ae!==void 0?ae:A.fraction2r(.5)},A.l2r=A.c2r=i,A.r2l=W,A.d2p=function(ne){return A.l2p(A.r2c(ne))},A.p2d=function(ne){return D(K(ne))},A.r2p=A.d2p,A.p2r=K,A.cleanPos=function(ne){return typeof ne=="string"&&ne!==""?ne:i(ne)}):A.type==="multicategory"&&(A.r2d=A.c2d=A.l2d=D,A.d2r=A.d2l_noadd=B,A.r2c=function(ne){var ae=B(ne);return ae!==void 0?ae:A.fraction2r(.5)},A.r2c_just_indices=j,A.l2r=A.c2r=i,A.r2l=B,A.d2p=function(ne){return A.l2p(A.r2c(ne))},A.p2d=function(ne){return D(K(ne))},A.r2p=A.d2p,A.p2r=K,A.cleanPos=function(ne){return Array.isArray(ne)||typeof ne=="string"&&ne!==""?ne:i(ne)},A.setupMultiCategory=function(ne){var ae,se,ce=A._traceIndices,me=A._matchGroup;if(me&&A._categories.length===0){for(var ye in me)if(ye!==C){var Te=k[x.id2name(ye)];ce=ce.concat(Te._traceIndices)}}var Ce=[[0,{}],[0,{}]],pe=[];for(ae=0;ae<ce.length;ae++){var fe=ne[ce[ae]];if(P in fe){var Oe=fe[P],Se=fe._length||a.minRowLength(Oe);if(n(Oe[0])&&n(Oe[1]))for(se=0;se<Se;se++){var Me=Oe[0][se],ue=Oe[1][se];S(Me)&&S(ue)&&(pe.push([Me,ue]),Me in Ce[0][1]||(Ce[0][1][Me]=Ce[0][0]++),ue in Ce[1][1]||(Ce[1][1][ue]=Ce[1][0]++))}}}for(pe.sort(function(le,ie){var ge=Ce[0][1],Ae=ge[le[0]]-ge[ie[0]];if(Ae)return Ae;var we=Ce[1][1];return we[le[1]]-we[ie[1]]}),ae=0;ae<pe.length;ae++)V(pe[ae])}),A.fraction2r=function(ne){var ae=A.r2l(A.range[0]),se=A.r2l(A.range[1]);return A.l2r(ae+ne*(se-ae))},A.r2fraction=function(ne){var ae=A.r2l(A.range[0]),se=A.r2l(A.range[1]);return(A.r2l(ne)-ae)/(se-ae)},A.cleanRange=function(ne,ae){ae||(ae={}),ne||(ne="range");var se,ce,me=a.nestedProperty(A,ne).get();if(ce=(ce=A.type==="date"?a.dfltRange(A.calendar):P==="y"?y.DFLTRANGEY:A._name==="realaxis"?[0,1]:ae.dfltRange||y.DFLTRANGEX).slice(),A.rangemode!=="tozero"&&A.rangemode!=="nonnegative"||(ce[0]=0),me&&me.length===2)for(A.type!=="date"||A.autorange||(me[0]=a.cleanDate(me[0],l,A.calendar),me[1]=a.cleanDate(me[1],l,A.calendar)),se=0;se<2;se++)if(A.type==="date"){if(!a.isDateTime(me[se],A.calendar)){A[ne]=ce;break}if(A.r2l(me[0])===A.r2l(me[1])){var ye=a.constrain(A.r2l(me[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);me[0]=A.l2r(ye-1e3),me[1]=A.l2r(ye+1e3);break}}else{if(!g(me[se])){if(!g(me[1-se])){A[ne]=ce;break}me[se]=me[1-se]*(se?10:.1)}if(me[se]<-s?me[se]=-s:me[se]>s&&(me[se]=s),me[0]===me[1]){var Te=Math.max(1,Math.abs(1e-6*me[0]));me[0]-=Te,me[1]+=Te}}else a.nestedProperty(A,ne).set(ce)},A.setScale=function(ne){var ae=k._size;if(A.overlaying){var se=x.getFromId({_fullLayout:k},A.overlaying);A.domain=se.domain}var ce=ne&&A._r?"_r":"range",me=A.calendar;A.cleanRange(ce);var ye,Te,Ce=A.r2l(A[ce][0],me),pe=A.r2l(A[ce][1],me),fe=P==="y";if(fe?(A._offset=ae.t+(1-A.domain[1])*ae.h,A._length=ae.h*(A.domain[1]-A.domain[0]),A._m=A._length/(Ce-pe),A._b=-A._m*pe):(A._offset=ae.l+A.domain[0]*ae.w,A._length=ae.w*(A.domain[1]-A.domain[0]),A._m=A._length/(pe-Ce),A._b=-A._m*Ce),A._rangebreaks=[],A._lBreaks=0,A._m2=0,A._B=[],A.rangebreaks&&(A._rangebreaks=A.locateBreaks(Math.min(Ce,pe),Math.max(Ce,pe)),A._rangebreaks.length)){for(ye=0;ye<A._rangebreaks.length;ye++)Te=A._rangebreaks[ye],A._lBreaks+=Math.abs(Te.max-Te.min);var Oe=fe;Ce>pe&&(Oe=!Oe),Oe&&A._rangebreaks.reverse();var Se=Oe?-1:1;for(A._m2=Se*A._length/(Math.abs(pe-Ce)-A._lBreaks),A._B.push(-A._m2*(fe?pe:Ce)),ye=0;ye<A._rangebreaks.length;ye++)Te=A._rangebreaks[ye],A._B.push(A._B[A._B.length-1]-Se*A._m2*(Te.max-Te.min));for(ye=0;ye<A._rangebreaks.length;ye++)(Te=A._rangebreaks[ye]).pmin=ee(Te.min),Te.pmax=ee(Te.max)}if(!isFinite(A._m)||!isFinite(A._b)||A._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},A.maskBreaks=function(ne){var ae,se,ce,me,ye,Te=A.rangebreaks||[];Te._cachedPatterns||(Te._cachedPatterns=Te.map(function(Me){return Me.enabled&&Me.bounds?a.simpleMap(Me.bounds,Me.pattern?h:A.d2c):null})),Te._cachedValues||(Te._cachedValues=Te.map(function(Me){return Me.enabled&&Me.values?a.simpleMap(Me.values,A.d2c).sort(a.sorterAsc):null}));for(var Ce=0;Ce<Te.length;Ce++){var pe=Te[Ce];if(pe.enabled){if(pe.bounds){var fe=pe.pattern;switch(se=(ae=Te._cachedPatterns[Ce])[0],ce=ae[1],fe){case M:me=(ye=new Date(ne)).getUTCDay(),se>ce&&(ce+=7,me<se&&(me+=7));break;case v:me=(ye=new Date(ne)).getUTCHours()+(ye.getUTCMinutes()/60+ye.getUTCSeconds()/3600+ye.getUTCMilliseconds()/36e5),se>ce&&(ce+=24,me<se&&(me+=24));break;case"":me=ne}if(me>=se&&me<ce)return l}else for(var Oe=Te._cachedValues[Ce],Se=0;Se<Oe.length;Se++)if(ce=(se=Oe[Se])+pe.dvalue,ne>=se&&ne<ce)return l}}return ne},A.locateBreaks=function(ne,ae){var se,ce,me,ye,Te=[];if(!A.rangebreaks)return Te;var Ce=A.rangebreaks.slice().sort(function(we,Ne){return we.pattern===M&&Ne.pattern===v?-1:Ne.pattern===M&&we.pattern===v?1:0}),pe=function(we,Ne){if((we=a.constrain(we,ne,ae))!==(Ne=a.constrain(Ne,ne,ae))){for(var He=!0,de=0;de<Te.length;de++){var Le=Te[de];we<Le.max&&Ne>=Le.min&&(we<Le.min&&(Le.min=we),Ne>Le.max&&(Le.max=Ne),He=!1)}He&&Te.push({min:we,max:Ne})}};for(se=0;se<Ce.length;se++){var fe=Ce[se];if(fe.enabled)if(fe.bounds){var Oe=ne,Se=ae;fe.pattern&&(Oe=Math.floor(Oe)),me=(ce=a.simpleMap(fe.bounds,fe.pattern?h:A.r2l))[0],ye=ce[1];var Me,ue,le=new Date(Oe);switch(fe.pattern){case M:ue=d,Me=(ye-me+(ye<me?7:0))*c,Oe+=me*c-(le.getUTCDay()*c+le.getUTCHours()*w+le.getUTCMinutes()*m+le.getUTCSeconds()*f+le.getUTCMilliseconds());break;case v:ue=c,Me=(ye-me+(ye<me?24:0))*w,Oe+=me*w-(le.getUTCHours()*w+le.getUTCMinutes()*m+le.getUTCSeconds()*f+le.getUTCMilliseconds());break;default:Oe=Math.min(ce[0],ce[1]),Me=ue=(Se=Math.max(ce[0],ce[1]))-Oe}for(var ie=Oe;ie<Se;ie+=ue)pe(ie,ie+Me)}else for(var ge=a.simpleMap(fe.values,A.d2c),Ae=0;Ae<ge.length;Ae++)pe(me=ge[Ae],ye=me+fe.dvalue)}return Te.sort(function(we,Ne){return we.min-Ne.min}),Te},A.makeCalcdata=function(ne,ae,se){var ce,me,ye,Te,Ce=A.type,pe=Ce==="date"&&ne[ae+"calendar"];if(ae in ne){if(ce=ne[ae],Te=ne._length||a.minRowLength(ce),a.isTypedArray(ce)&&(Ce==="linear"||Ce==="log")){if(Te===ce.length)return ce;if(ce.subarray)return ce.subarray(0,Te)}if(Ce==="multicategory")return function(Se,Me){for(var ue=new Array(Me),le=0;le<Me;le++){var ie=(Se[0]||[])[le],ge=(Se[1]||[])[le];ue[le]=j([ie,ge])}return ue}(ce,Te);for(me=new Array(Te),ye=0;ye<Te;ye++)me[ye]=A.d2c(ce[ye],0,pe,se)}else{var fe=ae+"0"in ne?A.d2c(ne[ae+"0"],0,pe):0,Oe=ne["d"+ae]?Number(ne["d"+ae]):1;for(ce=ne[{x:"y",y:"x"}[ae]],Te=ne._length||ce.length,me=new Array(Te),ye=0;ye<Te;ye++)me[ye]=fe+ye*Oe}if(A.rangebreaks)for(ye=0;ye<Te;ye++)me[ye]=A.maskBreaks(me[ye]);return me},A.isValidRange=function(ne){return Array.isArray(ne)&&ne.length===2&&g(A.r2l(ne[0]))&&g(A.r2l(ne[1]))},A.isPtWithinRange=function(ne,ae){var se=A.c2l(ne[P],null,ae),ce=A.r2l(A.range[0]),me=A.r2l(A.range[1]);return ce<me?ce<=se&&se<=me:me<=se&&se<=ce},A._emptyCategories=function(){A._categories=[],A._categoriesMap={}},A.clearCalc=function(){var ne=A._matchGroup;if(ne){var ae=null,se=null;for(var ce in ne){var me=k[x.id2name(ce)];if(me._categories){ae=me._categories,se=me._categoriesMap;break}}ae&&se?(A._categories=ae,A._categoriesMap=se):A._emptyCategories()}else A._emptyCategories();if(A._initialCategories)for(var ye=0;ye<A._initialCategories.length;ye++)V(A._initialCategories[ye])},A.sortByInitialCategories=function(){var ne=[];if(A._emptyCategories(),A._initialCategories)for(var ae=0;ae<A._initialCategories.length;ae++)V(A._initialCategories[ae]);ne=ne.concat(A._traceIndices);var se=A._matchGroup;for(var ce in se)if(C!==ce){var me=k[x.id2name(ce)];me._categories=A._categories,me._categoriesMap=A._categoriesMap,ne=ne.concat(me._traceIndices)}return ne};var $=k._d3locale;A.type==="date"&&(A._dateFormat=$?$.timeFormat:b,A._extraFormat=k._extraFormat),A._separators=k.separators,A._numFormat=$?$.numberFormat:_,delete A._minDtick,delete A._forceTick0}},59652:function(F){F.exports=function(L){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return L[T]!==void 0});if(e.every(function(T){return L[T]===L[e[0]]})||e.length===1)return L[e[0]]}},96115:function(F,L,e){var T=e(71828),b=e(7901).contrast,a=e(13838),_=e(59652),g=e(85501);function h(o,t){function i(n,r){return T.coerce(o,t,a.tickformatstops,n,r)}i("enabled")&&(i("dtickrange"),i("value"))}F.exports=function(o,t,i,n,r){r||(r={});var s=i("labelalias");T.isPlainObject(s)||delete t.labelalias;var l=_(o);if(i("showticklabels")){var u=r.font||{},d=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?b(r.bgColor):d&&d!==a.color.dflt?d:u.color;if(T.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:c}),r.noTicklabelstep||n==="multicategory"||n==="log"||i("ticklabelstep"),r.noAng||i("tickangle"),n!=="category"){var w=i("tickformat");g(o,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||w||n==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},38701:function(F,L,e){var T=e(71828),b=e(13838);F.exports=function(a,_,g,h){var o=h.isMinor,t=o?a.minor||{}:a,i=o?_.minor:_,n=o?b.minor:b,r=o?"minor.":"",s=T.coerce2(t,i,n,"ticklen",o?.6*(_.ticklen||5):void 0),l=T.coerce2(t,i,n,"tickwidth",o?_.tickwidth||1:void 0),u=T.coerce2(t,i,n,"tickcolor",(o?_.tickcolor:void 0)||i.color);g(r+"ticks",!o&&h.outerTicks||s||l||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26218:function(F,L,e){var T=e(66287),b=e(71828).isArrayOrTypedArray;F.exports=function(a,_,g,h,o){o||(o={});var t=o.isMinor,i=t?a.minor||{}:a,n=t?_.minor:_,r=t?"minor.":"";function s(m){var f=i[m];return f!==void 0?f:(n._template||{})[m]}var l=s("tick0"),u=s("dtick"),d=s("tickvals"),c=g(r+"tickmode",b(d)?"array":u?"linear":"auto");if(c==="auto"||c==="sync")g(r+"nticks");else if(c==="linear"){var w=n.dtick=T.dtick(u,h);n.tick0=T.tick0(l,h,_.calendar,w)}else h!=="multicategory"&&(g(r+"tickvals")===void 0?n.tickmode="auto":t||g("ticktext"))}},66847:function(F,L,e){var T=e(39898),b=e(73972),a=e(71828),_=e(91424),g=e(89298);F.exports=function(h,o,t,i){var n=h._fullLayout;if(o.length!==0){var r,s,l,u;i&&(r=i());var d=T.ease(t.easing);return h._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var m={},f=0;f<o.length;f++){var x=o[f],y=x.plotinfo.xaxis,v=x.plotinfo.yaxis;x.xr0&&(m[y._name+".range"]=x.xr0.slice()),x.yr0&&(m[v._name+".range"]=x.yr0.slice())}return b.call("relayout",h,m).then(function(){for(var M=0;M<o.length;M++)c(o[M].plotinfo)})}()}),s=Date.now(),u=window.requestAnimationFrame(function m(){l=Date.now();for(var f=Math.min(1,(l-s)/t.duration),x=d(f),y=0;y<o.length;y++)w(o[y],x);l-s>t.duration?(function(){for(var v={},M=0;M<o.length;M++){var p=o[M],S=p.plotinfo.xaxis,A=p.plotinfo.yaxis;p.xr1&&(v[S._name+".range"]=p.xr1.slice()),p.yr1&&(v[A._name+".range"]=p.yr1.slice())}r&&r(),b.call("relayout",h,v).then(function(){for(var k=0;k<o.length;k++)c(o[k].plotinfo)})}(),u=window.cancelAnimationFrame(m)):u=window.requestAnimationFrame(m)}),Promise.resolve()}function c(m){var f=m.xaxis,x=m.yaxis;n._defs.select("#"+m.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),m.plot.call(_.setTranslate,f._offset,x._offset).call(_.setScale,1,1);var y=m.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(_.setPointGroupScale,1,1),y.selectAll(".textpoint").call(_.setTextPointsScale,1,1),y.call(_.hideOutsideRangePoints,m)}function w(m,f){var x=m.plotinfo,y=x.xaxis,v=x.yaxis,M=y._length,p=v._length,S=!!m.xr1,A=!!m.yr1,k=[];if(S){var C=a.simpleMap(m.xr0,y.r2l),P=a.simpleMap(m.xr1,y.r2l),R=C[1]-C[0],O=P[1]-P[0];k[0]=(C[0]*(1-f)+f*P[0]-C[0])/(C[1]-C[0])*M,k[2]=M*(1-f+f*O/R),y.range[0]=y.l2r(C[0]*(1-f)+f*P[0]),y.range[1]=y.l2r(C[1]*(1-f)+f*P[1])}else k[0]=0,k[2]=M;if(A){var X=a.simpleMap(m.yr0,v.r2l),D=a.simpleMap(m.yr1,v.r2l),V=X[1]-X[0],j=D[1]-D[0];k[1]=(X[1]*(1-f)+f*D[1]-X[1])/(X[0]-X[1])*p,k[3]=p*(1-f+f*j/V),v.range[0]=y.l2r(X[0]*(1-f)+f*D[0]),v.range[1]=v.l2r(X[1]*(1-f)+f*D[1])}else k[1]=0,k[3]=p;g.drawOne(h,y,{skipTitle:!0}),g.drawOne(h,v,{skipTitle:!0}),g.redrawComponents(h,[y._id,v._id]);var B=S?M/k[2]:1,W=A?p/k[3]:1,q=S?k[0]:0,re=A?k[1]:0,ee=S?k[0]/k[2]*M:0,K=A?k[1]/k[3]*p:0,Y=y._offset-ee,$=v._offset-K;x.clipRect.call(_.setTranslate,q,re).call(_.setScale,1/B,1/W),x.plot.call(_.setTranslate,Y,$).call(_.setScale,B,W),_.setPointGroupScale(x.zoomScalePts,1/B,1/W),_.setTextPointsScale(x.zoomScaleTxt,1/B,1/W)}g.redrawComponents(h)}},951:function(F,L,e){var T=e(73972).traceIs,b=e(4322);function a(g){return{v:"x",h:"y"}[g.orientation||"v"]}function _(g,h){var o=a(g),t=T(g,"box-violin"),i=T(g._fullInput||{},"candlestick");return t&&!i&&h===o&&g[o]===void 0&&g[o+"0"]===void 0}F.exports=function(g,h,o,t){o("autotypenumbers",t.autotypenumbersDflt),o("type",(t.splomStash||{}).type)==="-"&&(function(i,n){if(i.type==="-"){var r,s=i._id,l=s.charAt(0);s.indexOf("scene")!==-1&&(s=l);var u=function(v,M,p){for(var S=0;S<v.length;S++){var A=v[S];if(A.type==="splom"&&A._length>0&&(A["_"+p+"axes"]||{})[M]||(A[p+"axis"]||p)===M&&(_(A,p)||(A[p]||[]).length||A[p+"0"]))return A}}(n,s,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var d=l+"calendar",c=u[d],w={noMultiCategory:!T(u,"cartesian")||T(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(w.noMultiCategory=!0),w.autotypenumbers=i.autotypenumbers,_(u,l)){var m=a(u),f=[];for(r=0;r<n.length;r++){var x=n[r];T(x,"box-violin")&&(x[l+"axis"]||l)===s&&(x[m]!==void 0?f.push(x[m][0]):x.name!==void 0?f.push(x.name):f.push("text"),x[d]!==c&&(c=void 0))}i.type=b(f,c,w)}else if(u.type==="splom"){var y=u.dimensions[u._axesDim[s]];y.visible&&(i.type=b(y.values,c,w))}else i.type=b(u[l]||[u[l+"0"]],c,w)}else i.type="linear"}}(h,t.data),h.type==="-"?h.type="linear":g.type=h.type)}},31137:function(F,L,e){var T=e(73972),b=e(71828);function a(o,t,i){var n,r,s,l=!1;if(t.type==="data")n=o._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=o._fullLayout}return r=b.nestedProperty(n,t.prop).get(),(s=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&s[t.prop]!==r&&(l=!0),s[t.prop]=r,{changed:l,value:r}}function _(o,t){var i=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!b.isPlainObject(n))return i;r=n}return h(r,function(s,l,u){i.push({type:"layout",prop:s,value:u})},"",0),i}function g(o,t){var i,n,r,s,l=[];if(n=t[0],r=t[1],i=t[2],s={},typeof n=="string")s[n]=r;else{if(!b.isPlainObject(n))return l;s=n,i===void 0&&(i=r)}return i===void 0&&(i=null),h(s,function(u,d,c){var w,m;if(Array.isArray(c)){m=c.slice();var f=Math.min(m.length,o.data.length);i&&(f=Math.min(f,i.length)),w=[];for(var x=0;x<f;x++)w[x]=i?i[x]:x}else m=c,w=i?i.slice():null;if(w===null)Array.isArray(m)&&(m=m[0]);else if(Array.isArray(w)){if(!Array.isArray(m)){var y=m;m=[];for(var v=0;v<w.length;v++)m[v]=y}m.length=Math.min(w.length,m.length)}l.push({type:"data",prop:u,traces:w,value:m})},"",0),l}function h(o,t,i,n){Object.keys(o).forEach(function(r){var s=o[r];if(r[0]!=="_"){var l=i+(n>0?".":"")+r;b.isPlainObject(s)?h(s,t,l,n+1):t(l,r,s)}})}L.manageCommandObserver=function(o,t,i,n){var r={},s=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var l=L.hasSimpleAPICommandBindings(o,i,r.lookupTable);if(t&&t._commandObserver){if(l)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(l){a(o,l,r.cache),r.check=function(){if(s){var c=a(o,l,r.cache);return c.changed&&n&&r.lookupTable[c.value]!==void 0&&(r.disable(),Promise.resolve(n({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:r.lookupTable[c.value]})).then(r.enable,r.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)o._internalOn(u[d],r.check);r.remove=function(){for(var c=0;c<u.length;c++)o._removeInternalListener(u[c],r.check)}}else b.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){s=!1},r.enable=function(){s=!0},t&&(t._commandObserver=r),r},L.hasSimpleAPICommandBindings=function(o,t,i){var n,r,s=t.length;for(n=0;n<s;n++){var l,u=t[n],d=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!d)return!1;var w=L.computeAPICommandBindings(o,d,c);if(w.length!==1)return!1;if(r){if((l=w[0]).type!==r.type||l.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var m=0;m<r.traces.length;m++)if(r.traces[m]!==l.traces[m])return!1}else if(l.prop!==r.prop)return!1}else r=w[0],Array.isArray(r.traces)&&r.traces.sort();var f=(l=w[0]).value;if(Array.isArray(f)){if(f.length!==1)return!1;f=f[0]}i&&(i[f]=n)}return r},L.executeAPICommand=function(o,t,i){if(t==="skip")return Promise.resolve();var n=T.apiMethodRegistry[t],r=[o];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)r.push(i[s]);return n.apply(null,r).catch(function(l){return b.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},L.computeAPICommandBindings=function(o,t,i){var n;switch(Array.isArray(i)||(i=[]),t){case"restyle":n=g(o,i);break;case"relayout":n=_(0,i);break;case"update":n=g(o,[i[0],i[2]]).concat(_(0,[i[1]]));break;case"animate":n=function(r,s){return Array.isArray(s[0])&&s[0].length===1&&["string","number"].indexOf(typeof s[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}},27670:function(F,L,e){var T=e(1426).extendFlat;L.Y=function(b,a){a=a||{};var _={valType:"info_array",editType:(b=b||{}).editType,items:[{valType:"number",min:0,max:1,editType:b.editType},{valType:"number",min:0,max:1,editType:b.editType}],dflt:[0,1]},g=(b.name&&b.name,b.trace,a.description&&a.description,{x:T({},_,{}),y:T({},_,{}),editType:b.editType});return b.noGridCell||(g.row={valType:"integer",min:0,dflt:0,editType:b.editType},g.column={valType:"integer",min:0,dflt:0,editType:b.editType}),g},L.c=function(b,a,_,g){var h=g&&g.x||[0,1],o=g&&g.y||[0,1],t=a.grid;if(t){var i=_("domain.column");i!==void 0&&(i<t.columns?h=t._domains.x[i]:delete b.domain.column);var n=_("domain.row");n!==void 0&&(n<t.rows?o=t._domains.y[n]:delete b.domain.row)}var r=_("domain.x",h),s=_("domain.y",o);r[0]<r[1]||(b.domain.x=h.slice()),s[0]<s[1]||(b.domain.y=o.slice())}},41940:function(F){F.exports=function(L){var e=L.editType,T=L.colorEditType;T===void 0&&(T=e);var b={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:T},editType:e};return L.autoSize&&(b.size.dflt="auto"),L.autoColor&&(b.color.dflt="auto"),L.arrayOk&&(b.family.arrayOk=!0,b.size.arrayOk=!0,b.color.arrayOk=!0),b}},31391:function(F){F.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(F,L){L.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},L.axesNames=["lonaxis","lataxis"],L.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},L.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},L.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},L.clipPad=.001,L.precision=.1,L.landColor="#F0DC82",L.waterColor="#3399FF",L.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},L.sphereSVG={type:"Sphere"},L.fillLayers={ocean:1,land:1,lakes:1},L.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},L.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],L.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],L.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(F,L,e){var T=e(39898),b=e(27362),a=b.geoPath,_=b.geoDistance,g=e(65704),h=e(73972),o=e(71828),t=o.strTranslate,i=e(7901),n=e(91424),r=e(30211),s=e(74875),l=e(89298),u=e(71739).getAutoRange,d=e(28569),c=e(47322).prepSelect,w=e(47322).clearOutline,m=e(47322).selectOnClick,f=e(74455),x=e(78776),y=e(41327),v=e(90973),M=e(96892).zL;function p(k){this.id=k.id,this.graphDiv=k.graphDiv,this.container=k.container,this.topojsonURL=k.topojsonURL,this.isStatic=k.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=p.prototype;function A(k,C){var P=x.clipPad,R=k[0]+P,O=k[1]-P,X=C[0]+P,D=C[1]-P;R>0&&O<0&&(O+=360);var V=(O-R)/4;return{type:"Polygon",coordinates:[[[R,X],[R,D],[R+V,D],[R+2*V,D],[R+3*V,D],[O,D],[O,X],[O-V,X],[O-2*V,X],[O-3*V,X],[R,X]]]}}F.exports=function(k){return new p(k)},S.plot=function(k,C,P,R){var O=this;if(R)return O.update(k,C,!0);O._geoCalcData=k,O._fullLayout=C;var X=C[this.id],D=[],V=!1;for(var j in x.layerNameToAdjective)if(j!=="frame"&&X["show"+j]){V=!0;break}for(var B=!1,W=0;W<k.length;W++){var q=k[0][0].trace;q._geo=O,q.locationmode&&(V=!0);var re=q.marker;if(re){var ee=re.angle,K=re.angleref;(ee||K==="north"||K==="previous")&&(B=!0)}}if(this._hasMarkerAngles=B,V){var Y=v.getTopojsonName(X);O.topojson!==null&&Y===O.topojsonName||(O.topojsonName=Y,PlotlyGeoAssets.topojson[O.topojsonName]===void 0&&D.push(O.fetchTopojson()))}D=D.concat(y.fetchTraceGeoData(k)),P.push(new Promise(function($,ne){Promise.all(D).then(function(){O.topojson=PlotlyGeoAssets.topojson[O.topojsonName],O.update(k,C),$()}).catch(ne)}))},S.fetchTopojson=function(){var k=this,C=v.getTopojsonPath(k.topojsonURL,k.topojsonName);return new Promise(function(P,R){T.json(C,function(O,X){if(O)return O.status===404?R(new Error(["plotly.js could not find topojson file at",C+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):R(new Error(["unexpected error while fetching topojson file at",C].join(" ")));PlotlyGeoAssets.topojson[k.topojsonName]=X,P()})})},S.update=function(k,C,P){var R=C[this.id];this.hasChoropleth=!1;for(var O=0;O<k.length;O++){var X=k[O],D=X[0].trace;D.type==="choropleth"&&(this.hasChoropleth=!0),D.visible===!0&&D._length>0&&D._module.calcGeoJSON(X,C)}if(!P){if(this.updateProjection(k,C))return;this.viewInitial&&this.scope===R.scope||this.saveViewInitial(R)}this.scope=R.scope,this.updateBaseLayers(C,R),this.updateDims(C,R),this.updateFx(C,R),s.generalUpdatePerTraceModule(this.graphDiv,this,k,R);var V=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=V.selectAll(".point"),this.dataPoints.text=V.selectAll("text"),this.dataPaths.line=V.selectAll(".js-line");var j=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=j.selectAll("path"),this._render()},S.updateProjection=function(k,C){var P=this.graphDiv,R=C[this.id],O=C._size,X=R.domain,D=R.projection,V=R.lonaxis,j=R.lataxis,B=V._ax,W=j._ax,q=this.projection=function(le){var ie=le.projection,ge=ie.type,Ae=x.projNames[ge];Ae="geo"+o.titleCase(Ae);for(var we=(b[Ae]||g[Ae])(),Ne=le._isSatellite?180*Math.acos(1/ie.distance)/Math.PI:le._isClipped?x.lonaxisSpan[ge]/2:null,He=["center","rotate","parallels","clipExtent"],de=function(Re){return Re?we:[]},Le=0;Le<He.length;Le++){var Ee=He[Le];typeof we[Ee]!="function"&&(we[Ee]=de)}return we.isLonLatOverEdges=function(Re){if(we(Re)===null)return!0;if(Ne){var je=we.rotate();return _(Re,[-je[0],-je[1]])>Ne*Math.PI/180}return!1},we.getPath=function(){return a().projection(we)},we.getBounds=function(Re){return we.getPath().bounds(Re)},we.precision(x.precision),le._isSatellite&&we.tilt(ie.tilt).distance(ie.distance),Ne&&we.clipAngle(Ne-x.clipPad),we}(R),re=[[O.l+O.w*X.x[0],O.t+O.h*(1-X.y[1])],[O.l+O.w*X.x[1],O.t+O.h*(1-X.y[0])]],ee=R.center||{},K=D.rotation||{},Y=V.range||[],$=j.range||[];if(R.fitbounds){B._length=re[1][0]-re[0][0],W._length=re[1][1]-re[0][1],B.range=u(P,B),W.range=u(P,W);var ne=(B.range[0]+B.range[1])/2,ae=(W.range[0]+W.range[1])/2;if(R._isScoped)ee={lon:ne,lat:ae};else if(R._isClipped){ee={lon:ne,lat:ae},K={lon:ne,lat:ae,roll:K.roll};var se=D.type,ce=x.lonaxisSpan[se]/2||180,me=x.lataxisSpan[se]/2||90;Y=[ne-ce,ne+ce],$=[ae-me,ae+me]}else ee={lon:ne,lat:ae},K={lon:ne,lat:K.lat,roll:K.roll}}q.center([ee.lon-K.lon,ee.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(D.parallels);var ye=A(Y,$);q.fitExtent(re,ye);var Te=this.bounds=q.getBounds(ye),Ce=this.fitScale=q.scale(),pe=q.translate();if(R.fitbounds){var fe=q.getBounds(A(B.range,W.range)),Oe=Math.min((Te[1][0]-Te[0][0])/(fe[1][0]-fe[0][0]),(Te[1][1]-Te[0][1])/(fe[1][1]-fe[0][1]));isFinite(Oe)?q.scale(Oe*Ce):o.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(D.scale*Ce);var Se=this.midPt=[(Te[0][0]+Te[1][0])/2,(Te[0][1]+Te[1][1])/2];if(q.translate([pe[0]+(Se[0]-pe[0]),pe[1]+(Se[1]-pe[1])]).clipExtent(Te),R._isAlbersUsa){var Me=q([ee.lon,ee.lat]),ue=q.translate();q.translate([ue[0]-(Me[0]-ue[0]),ue[1]-(Me[1]-ue[1])])}},S.updateBaseLayers=function(k,C){var P=this,R=P.topojson,O=P.layers,X=P.basePaths;function D(q){return q==="lonaxis"||q==="lataxis"}function V(q){return!!x.lineLayers[q]}function j(q){return!!x.fillLayers[q]}var B=(this.hasChoropleth?x.layersForChoropleth:x.layers).filter(function(q){return V(q)||j(q)?C["show"+q]:!D(q)||C[q].showgrid}),W=P.framework.selectAll(".layer").data(B,String);W.exit().each(function(q){delete O[q],delete X[q],T.select(this).remove()}),W.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var re=O[q]=T.select(this);q==="bg"?P.bgRect=re.append("rect").style("pointer-events","all"):D(q)?X[q]=re.append("path").style("fill","none"):q==="backplot"?re.append("g").classed("choroplethlayer",!0):q==="frontplot"?re.append("g").classed("scatterlayer",!0):V(q)?X[q]=re.append("path").style("fill","none").style("stroke-miterlimit",2):j(q)&&(X[q]=re.append("path").style("stroke","none"))}),W.order(),W.each(function(q){var re=X[q],ee=x.layerNameToAdjective[q];q==="frame"?re.datum(x.sphereSVG):V(q)||j(q)?re.datum(M(R,R.objects[q])):D(q)&&re.datum(function(K,Y,$){var ne,ae,se,ce=Y[K],me=x.scopeDefaults[Y.scope];K==="lonaxis"?(ne=me.lonaxisRange,ae=me.lataxisRange,se=function(ue,le){return[ue,le]}):K==="lataxis"&&(ne=me.lataxisRange,ae=me.lonaxisRange,se=function(ue,le){return[le,ue]});var ye={type:"linear",range:[ne[0],ne[1]-1e-6],tick0:ce.tick0,dtick:ce.dtick};l.setConvert(ye,$);var Te=l.calcTicks(ye);Y.isScoped||K!=="lonaxis"||Te.pop();for(var Ce=Te.length,pe=new Array(Ce),fe=0;fe<Ce;fe++)for(var Oe=Te[fe].x,Se=pe[fe]=[],Me=ae[0];Me<ae[1]+2.5;Me+=2.5)Se.push(se(Oe,Me));return{type:"MultiLineString",coordinates:pe}}(q,C,k)).call(i.stroke,C[q].gridcolor).call(n.dashLine,C[q].griddash,C[q].gridwidth),V(q)?re.call(i.stroke,C[ee+"color"]).call(n.dashLine,"",C[ee+"width"]):j(q)&&re.call(i.fill,C[ee+"color"])})},S.updateDims=function(k,C){var P=this.bounds,R=(C.framewidth||0)/2,O=P[0][0]-R,X=P[0][1]-R,D=P[1][0]-O+R,V=P[1][1]-X+R;n.setRect(this.clipRect,O,X,D,V),this.bgRect.call(n.setRect,O,X,D,V).call(i.fill,C.bgcolor),this.xaxis._offset=O,this.xaxis._length=D,this.yaxis._offset=X,this.yaxis._length=V},S.updateFx=function(k,C){var P=this,R=P.graphDiv,O=P.bgRect,X=k.dragmode,D=k.clickmode;if(!P.isStatic){var V={element:P.bgRect.node(),gd:R,plotinfo:{id:P.id,xaxis:P.xaxis,yaxis:P.yaxis,fillRangeItems:function(B,W){W.isRect?(B.range={})[P.id]=[j([W.xmin,W.ymin]),j([W.xmax,W.ymax])]:(B.lassoPoints={})[P.id]=W.map(j)}},xaxes:[P.xaxis],yaxes:[P.yaxis],subplot:P.id,clickFn:function(B){B===2&&w(R)}};X==="pan"?(O.node().onmousedown=null,O.call(f(P,C)),O.on("dblclick.zoom",function(){var B=P.viewInitial,W={};for(var q in B)W[P.id+"."+q]=B[q];h.call("_guiRelayout",R,W),R.emit("plotly_doubleclick",null)}),R._context._scrollZoom.geo||O.on("wheel.zoom",null)):X!=="select"&&X!=="lasso"||(O.on(".zoom",null),V.prepFn=function(B,W,q){c(B,W,q,V,X)},d.init(V)),O.on("mousemove",function(){var B=P.projection.invert(o.getPositionFromD3Event());if(!B)return d.unhover(R,T.event);P.xaxis.p2c=function(){return B[0]},P.yaxis.p2c=function(){return B[1]},r.hover(R,T.event,P.id)}),O.on("mouseout",function(){R._dragging||d.unhover(R,T.event)}),O.on("click",function(){X!=="select"&&X!=="lasso"&&(D.indexOf("select")>-1&&m(T.event,R,[P.xaxis],[P.yaxis],P.id,V),D.indexOf("event")>-1&&r.click(R,T.event))})}function j(B){return P.projection.invert([B[0]+P.xaxis._offset,B[1]+P.yaxis._offset])}},S.makeFramework=function(){var k=this,C=k.graphDiv,P=C._fullLayout,R="clip"+P._uid+k.id;k.clipDef=P._clips.append("clipPath").attr("id",R),k.clipRect=k.clipDef.append("rect"),k.framework=T.select(k.container).append("g").attr("class","geo "+k.id).call(n.setClipUrl,R,C),k.project=function(O){var X=k.projection(O);return X?[X[0]-k.xaxis._offset,X[1]-k.yaxis._offset]:[null,null]},k.xaxis={_id:"x",c2p:function(O){return k.project(O)[0]}},k.yaxis={_id:"y",c2p:function(O){return k.project(O)[1]}},k.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(k.mockAxis,P)},S.saveViewInitial=function(k){var C,P=k.center||{},R=k.projection,O=R.rotation||{};this.viewInitial={fitbounds:k.fitbounds,"projection.scale":R.scale},C=k._isScoped?{"center.lon":P.lon,"center.lat":P.lat}:k._isClipped?{"projection.rotation.lon":O.lon,"projection.rotation.lat":O.lat}:{"center.lon":P.lon,"center.lat":P.lat,"projection.rotation.lon":O.lon},o.extendFlat(this.viewInitial,C)},S.render=function(k){this._hasMarkerAngles&&k?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var k,C=this.projection,P=C.getPath();function R(X){var D=C(X.lonlat);return D?t(D[0],D[1]):null}function O(X){return C.isLonLatOverEdges(X.lonlat)?"none":null}for(k in this.basePaths)this.basePaths[k].attr("d",P);for(k in this.dataPaths)this.dataPaths[k].attr("d",function(X){return P(X.geojson)});for(k in this.dataPoints)this.dataPoints[k].attr("display",O).attr("transform",R)}},44622:function(F,L,e){var T=e(27659).AU,b=e(71828).counterRegex,a=e(69082),_="geo",g=b(_),h={};h[_]={valType:"subplotid",dflt:_,editType:"calc"},F.exports={attr:_,name:_,idRoot:_,idRegex:g,attrRegex:g,attributes:h,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(o){for(var t=o._fullLayout,i=o.calcdata,n=t._subplots[_],r=0;r<n.length;r++){var s=n[r],l=T(i,_,s),u=t[s]._subplot;u||(u=a({id:s,graphDiv:o,container:t._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),t[s]._subplot=u),u.plot(l,t,o._promises)}},updateFx:function(o){for(var t=o._fullLayout,i=t._subplots[_],n=0;n<i.length;n++){var r=t[i[n]];r._subplot.updateFx(t,r)}},clean:function(o,t,i,n){for(var r=n._subplots[_]||[],s=0;s<r.length;s++){var l=r[s],u=n[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(F,L,e){var T=e(22399),b=e(27670).Y,a=e(79952).P,_=e(78776),g=e(30962).overrideAll,h=e(78607),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:T.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:a};(F.exports=g({domain:b({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:h(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:h(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:T.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:T.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:T.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:T.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:T.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(F,L,e){var T=e(71828),b=e(49119),a=e(27659).NG,_=e(78776),g=e(77519),h=_.axesNames;function o(t,i,n,r){var s=a(r.fullData,"geo",r.id).map(function(K){return K._expandedIndex}),l=n("resolution"),u=n("scope"),d=_.scopeDefaults[u],c=n("projection.type",d.projType),w=i._isAlbersUsa=c==="albers usa";w&&(u=i.scope="usa");var m=i._isScoped=u!=="world",f=i._isSatellite=c==="satellite",x=i._isConic=c.indexOf("conic")!==-1||c==="albers",y=i._isClipped=!!_.lonaxisSpan[c];if(t.visible===!1){var v=T.extendDeep({},i._template);v.showcoastlines=!1,v.showcountries=!1,v.showframe=!1,v.showlakes=!1,v.showland=!1,v.showocean=!1,v.showrivers=!1,v.showsubunits=!1,v.lonaxis&&(v.lonaxis.showgrid=!1),v.lataxis&&(v.lataxis.showgrid=!1),i._template=v}for(var M=n("visible"),p=0;p<h.length;p++){var S,A=h[p],k=[30,10][p];if(m)S=d[A+"Range"];else{var C=_[A+"Span"],P=(C[c]||C["*"])/2,R=n("projection.rotation."+A.substr(0,3),d.projRotate[p]);S=[R-P,R+P]}var O=n(A+".range",S);n(A+".tick0"),n(A+".dtick",k),n(A+".showgrid",!!M&&void 0)&&(n(A+".gridcolor"),n(A+".gridwidth"),n(A+".griddash")),i[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:s,setScale:T.identity,c2l:T.identity,r2l:T.identity,autorange:!0,range:O.slice(),_m:1,_input:{}}}var X=i.lonaxis.range,D=i.lataxis.range,V=X[0],j=X[1];V>0&&j<0&&(j+=360);var B,W,q,re=(V+j)/2;if(!w){var ee=m?d.projRotate:[re,0,0];B=n("projection.rotation.lon",ee[0]),n("projection.rotation.lat",ee[1]),n("projection.rotation.roll",ee[2]),n("showcoastlines",!m&&M)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!M&&void 0)&&n("oceancolor")}w?(W=-96.6,q=38.7):(W=m?re:B,q=(D[0]+D[1])/2),n("center.lon",W),n("center.lat",q),f&&(n("projection.tilt"),n("projection.distance")),x&&n("projection.parallels",d.projParallels||[0,60]),n("projection.scale"),n("showland",!!M&&void 0)&&n("landcolor"),n("showlakes",!!M&&void 0)&&n("lakecolor"),n("showrivers",!!M&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",m&&u!=="usa"&&M)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(n("showsubunits",M),n("subunitcolor"),n("subunitwidth")),m||n("showframe",M)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete i.projection.scale,m?(delete i.center.lon,delete i.center.lat):y?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}F.exports=function(t,i,n){b(t,i,n,{type:"geo",attributes:g,handleDefaults:o,fullData:n,partition:"y"})}},74455:function(F,L,e){var T=e(39898),b=e(71828),a=e(73972),_=Math.PI/180,g=180/Math.PI,h={cursor:"pointer"},o={cursor:"auto"};function t(m,f){return T.behavior.zoom().translate(f.translate()).scale(f.scale())}function i(m,f,x){var y=m.id,v=m.graphDiv,M=v.layout,p=M[y],S=v._fullLayout,A=S[y],k={},C={};function P(R,O){k[y+"."+R]=b.nestedProperty(p,R).get(),a.call("_storeDirectGUIEdit",M,S._preGUI,k);var X=b.nestedProperty(A,R);X.get()!==O&&(X.set(O),b.nestedProperty(p,R).set(O),C[y+"."+R]=O)}x(P),P("projection.scale",f.scale()/m.fitScale),P("fitbounds",!1),v.emit("plotly_relayout",C)}function n(m,f){var x=t(0,f);function y(v){var M=f.invert(m.midPt);v("center.lon",M[0]),v("center.lat",M[1])}return x.on("zoomstart",function(){T.select(this).style(h)}).on("zoom",function(){f.scale(T.event.scale).translate(T.event.translate),m.render(!0);var v=f.invert(m.midPt);m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/m.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){T.select(this).style(o),i(m,f,y)}),x}function r(m,f){var x,y,v,M,p,S,A,k,C,P=t(0,f);function R(X){return f.invert(X)}function O(X){var D=f.rotate(),V=f.invert(m.midPt);X("projection.rotation.lon",-D[0]),X("center.lon",V[0]),X("center.lat",V[1])}return P.on("zoomstart",function(){T.select(this).style(h),x=T.mouse(this),y=f.rotate(),v=f.translate(),M=y,p=R(x)}).on("zoom",function(){if(S=T.mouse(this),function(V){var j=R(V);if(!j)return!0;var B=f(j);return Math.abs(B[0]-V[0])>2||Math.abs(B[1]-V[1])>2}(x))return P.scale(f.scale()),void P.translate(f.translate());f.scale(T.event.scale),f.translate([v[0],T.event.translate[1]]),p?R(S)&&(k=R(S),A=[M[0]+(k[0]-p[0]),y[1],y[2]],f.rotate(A),M=A):p=R(x=S),C=!0,m.render(!0);var X=f.rotate(),D=f.invert(m.midPt);m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/m.fitScale,"geo.center.lon":D[0],"geo.center.lat":D[1],"geo.projection.rotation.lon":-X[0]})}).on("zoomend",function(){T.select(this).style(o),C&&i(m,f,O)}),P}function s(m,f){var x;f.rotate(),f.scale();var y=t(0,f),v=function(A){for(var k=0,C=arguments.length,P=[];++k<C;)P.push(arguments[k]);var R=T.dispatch.apply(null,P);return R.of=function(O,X){return function(D){var V;try{V=D.sourceEvent=T.event,D.target=A,T.event=D,R[D.type].apply(O,X)}finally{T.event=V}}},R}(y,"zoomstart","zoom","zoomend"),M=0,p=y.on;function S(A){var k=f.rotate();A("projection.rotation.lon",-k[0]),A("projection.rotation.lat",-k[1])}return y.on("zoomstart",function(){T.select(this).style(h);var A,k,C,P,R,O,X,D,V,j,B,W=T.mouse(this),q=f.rotate(),re=q,ee=f.translate(),K=(k=.5*(A=q)[0]*_,C=.5*A[1]*_,P=.5*A[2]*_,R=Math.sin(k),O=Math.cos(k),X=Math.sin(C),D=Math.cos(C),V=Math.sin(P),[O*D*(j=Math.cos(P))+R*X*V,R*D*j-O*X*V,O*X*j+R*D*V,O*D*V-R*X*j]);x=l(f,W),p.call(y,"zoom",function(){var Y,$,ne,ae,se,ce,me,ye,Te,Ce,pe=T.mouse(this);if(f.scale(T.event.scale),x){if(l(f,pe)){f.rotate(q).translate(ee);var fe=l(f,pe),Oe=function(ue,le){if(ue&&le){var ie=function(Ne,He){return[Ne[1]*He[2]-Ne[2]*He[1],Ne[2]*He[0]-Ne[0]*He[2],Ne[0]*He[1]-Ne[1]*He[0]]}(ue,le),ge=Math.sqrt(w(ie,ie)),Ae=.5*Math.acos(Math.max(-1,Math.min(1,w(ue,le)))),we=Math.sin(Ae)/ge;return ge&&[Math.cos(Ae),ie[2]*we,-ie[1]*we,ie[0]*we]}}(x,fe),Se=function(ue){return[Math.atan2(2*(ue[0]*ue[1]+ue[2]*ue[3]),1-2*(ue[1]*ue[1]+ue[2]*ue[2]))*g,Math.asin(Math.max(-1,Math.min(1,2*(ue[0]*ue[2]-ue[3]*ue[1]))))*g,Math.atan2(2*(ue[0]*ue[3]+ue[1]*ue[2]),1-2*(ue[2]*ue[2]+ue[3]*ue[3]))*g]}((ne=(Y=K)[0],ae=Y[1],se=Y[2],ce=Y[3],[ne*(me=($=Oe)[0])-ae*(ye=$[1])-se*(Te=$[2])-ce*(Ce=$[3]),ne*ye+ae*me+se*Ce-ce*Te,ne*Te-ae*Ce+se*me+ce*ye,ne*Ce+ae*Te-se*ye+ce*me])),Me=function(ue,le,ie){var ge=c(le,2,ue[0]);ge=c(ge,1,ue[1]),ge=c(ge,0,ue[2]-ie[2]);var Ae,we,Ne=le[0],He=le[1],de=le[2],Le=ge[0],Ee=ge[1],Re=ge[2],je=Math.atan2(He,Ne)*g,Fe=Math.sqrt(Ne*Ne+He*He);Math.abs(Ee)>Fe?(we=(Ee>0?90:-90)-je,Ae=0):(we=Math.asin(Ee/Fe)*g-je,Ae=Math.sqrt(Fe*Fe-Ee*Ee));var Xe=180-we-2*je,Ze=(Math.atan2(Re,Le)-Math.atan2(de,Ae))*g,at=(Math.atan2(Re,Le)-Math.atan2(de,-Ae))*g;return u(ie[0],ie[1],we,Ze)<=u(ie[0],ie[1],Xe,at)?[we,Ze,ie[2]]:[Xe,at,ie[2]]}(Se,x,re);isFinite(Me[0])&&isFinite(Me[1])&&isFinite(Me[2])||(Me=re),f.rotate(Me),re=Me}}else x=l(f,W=pe);v.of(this,arguments)({type:"zoom"})}),B=v.of(this,arguments),M++||B({type:"zoomstart"})}).on("zoomend",function(){var A;T.select(this).style(o),p.call(y,"zoom",null),A=v.of(this,arguments),--M||A({type:"zoomend"}),i(m,f,S)}).on("zoom.redraw",function(){m.render(!0);var A=f.rotate();m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/m.fitScale,"geo.projection.rotation.lon":-A[0],"geo.projection.rotation.lat":-A[1]})}),T.rebind(y,v,"on")}function l(m,f){var x=m.invert(f);return x&&isFinite(x[0])&&isFinite(x[1])&&function(y){var v=y[0]*_,M=y[1]*_,p=Math.cos(M);return[p*Math.cos(v),p*Math.sin(v),Math.sin(M)]}(x)}function u(m,f,x,y){var v=d(x-m),M=d(y-f);return Math.sqrt(v*v+M*M)}function d(m){return(m%360+540)%360-180}function c(m,f,x){var y=x*_,v=m.slice(),M=f===0?1:0,p=f===2?1:2,S=Math.cos(y),A=Math.sin(y);return v[M]=m[M]*S-m[p]*A,v[p]=m[p]*S+m[M]*A,v}function w(m,f){for(var x=0,y=0,v=m.length;y<v;++y)x+=m[y]*f[y];return x}F.exports=function(m,f){var x=m.projection;return(f._isScoped?n:f._isClipped?s:r)(m,x)}},27659:function(F,L,e){var T=e(73972),b=e(85555).SUBPLOT_PATTERN;L.AU=function(a,_,g){var h=T.subplotsRegistry[_];if(!h)return[];for(var o=h.attr,t=[],i=0;i<a.length;i++){var n=a[i];n[0].trace[o]===g&&t.push(n)}return t},L.a0=function(a,_){var g,h=[],o=[];if(!(g=typeof _=="string"?T.getModule(_).plot:typeof _=="function"?_:_.plot))return[h,a];for(var t=0;t<a.length;t++){var i=a[t],n=i[0].trace;n.visible===!0&&n._length!==0&&(n._module&&n._module.plot===g?h.push(i):o.push(i))}return[h,o]},L.NG=function(a,_,g){if(!T.subplotsRegistry[_])return[];var h,o,t,i=T.subplotsRegistry[_].attr,n=[];if(_==="gl2d"){var r=g.match(b);o="x"+r[1],t="y"+r[2]}for(var s=0;s<a.length;s++)h=a[s],_==="gl2d"&&T.traceIs(h,"gl2d")?h[i[0]]===o&&h[i[1]]===t&&n.push(h):h[i]===g&&n.push(h);return n}},75071:function(F,L,e){var T=e(16825),b=e(1195),a=e(48956),_=e(85555),g=e(38520);function h(o,t){this.element=o,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}F.exports=function(o){var t=o.mouseContainer,i=o.glplot,n=new h(t,i);function r(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function s(l,u,d){var c,w,m=o.calcDataBox(),f=i.viewBox,x=n.lastPos[0],y=n.lastPos[1],v=_.MINDRAG*i.pixelRatio,M=_.MINZOOM*i.pixelRatio;function p(R,O,X){var D=Math.min(O,X),V=Math.max(O,X);D!==V?(m[R]=D,m[R+2]=V,n.dataBox=m,o.setRanges(m)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(u*=i.pixelRatio,d*=i.pixelRatio,d=f[3]-f[1]-d,o.fullLayout.dragmode){case"zoom":if(l){var S=u/(f[2]-f[0])*(m[2]-m[0])+m[0],A=d/(f[3]-f[1])*(m[3]-m[1])+m[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=A,n.dragStart[0]=u,n.dragStart[1]=d),n.boxEnd[0]=S,n.boxEnd[1]=A,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var k=Math.abs(n.dragStart[0]-u)<M,C=Math.abs(n.dragStart[1]-d)<M;if(!function(){for(var R=o.graphDiv._fullLayout._axisConstraintGroups,O=o.xaxis._id,X=o.yaxis._id,D=0;D<R.length;D++)if(R[D][O]!==-1){if(R[D][X]!==-1)return!0;break}return!1}()||k&&C)k&&(n.boxEnd[0]=n.boxStart[0]),C&&(n.boxEnd[1]=n.boxStart[1]);else{c=n.boxEnd[0]-n.boxStart[0],w=n.boxEnd[1]-n.boxStart[1];var P=(m[3]-m[1])/(m[2]-m[0]);Math.abs(c*P)>Math.abs(w)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(c)*P*(w>=0?1:-1),n.boxEnd[1]<m[1]?(n.boxEnd[1]=m[1],n.boxEnd[0]=n.boxStart[0]+(m[1]-n.boxStart[1])/Math.abs(P)):n.boxEnd[1]>m[3]&&(n.boxEnd[1]=m[3],n.boxEnd[0]=n.boxStart[0]+(m[3]-n.boxStart[1])/Math.abs(P))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(w)/P*(c>=0?1:-1),n.boxEnd[0]<m[0]?(n.boxEnd[0]=m[0],n.boxEnd[1]=n.boxStart[1]+(m[0]-n.boxStart[0])*Math.abs(P)):n.boxEnd[0]>m[2]&&(n.boxEnd[0]=m[2],n.boxEnd[1]=n.boxStart[1]+(m[2]-n.boxStart[0])*Math.abs(P)))}}else n.boxEnabled?(c=n.boxStart[0]!==n.boxEnd[0],w=n.boxStart[1]!==n.boxEnd[1],c||w?(c&&(p(0,n.boxStart[0],n.boxEnd[0]),o.xaxis.autorange=!1),w&&(p(1,n.boxStart[1],n.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=d),Math.abs(n.dragStart[0]-u)<v&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-d)<v&&(d=n.dragStart[1]),c=(x-u)*(m[2]-m[0])/(i.viewBox[2]-i.viewBox[0]),w=(y-d)*(m[3]-m[1])/(i.viewBox[3]-i.viewBox[1]),m[0]+=c,m[2]+=c,m[1]+=w,m[3]+=w,o.setRanges(m),n.panning=!0,n.lastInputTime=Date.now(),r(),o.cameraChanged(),o.handleAnnotations()):n.panning&&(n.panning=!1,o.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=d}return n.mouseListener=T(t,s),t.addEventListener("touchstart",function(l){var u=a(l.changedTouches[0],t);s(0,u[0],u[1]),s(1,u[0],u[1]),l.preventDefault()},!!g&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=a(l.changedTouches[0],t);s(1,u[0],u[1]),l.preventDefault()},!!g&&{passive:!1}),t.addEventListener("touchend",function(l){s(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!g&&{passive:!1}),n.wheelListener=b(t,function(l,u){if(!o.scrollZoom)return!1;var d=o.calcDataBox(),c=i.viewBox,w=n.lastPos[0],m=n.lastPos[1],f=Math.exp(5*u/(c[3]-c[1])),x=w/(c[2]-c[0])*(d[2]-d[0])+d[0],y=m/(c[3]-c[1])*(d[3]-d[1])+d[1];return d[0]=(d[0]-x)*f+x,d[2]=(d[2]-x)*f+x,d[1]=(d[1]-y)*f+y,d[3]=(d[3]-y)*f+y,o.setRanges(d),n.lastInputTime=Date.now(),r(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),n}},82961:function(F,L,e){var T=e(89298),b=e(78614);function a(h){this.scene=h,this.gl=h.gl,this.pixelRatio=h.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var _=a.prototype,g=["xaxis","yaxis"];_.merge=function(h){var o,t,i,n,r,s,l,u,d,c,w;for(this.titleEnable=!1,this.backgroundColor=b(h.plot_bgcolor),c=0;c<2;++c){var m=(o=g[c]).charAt(0);for(i=(t=h[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[m]?"":t.title.text,w=0;w<=2;w+=2)this.labelEnable[c+w]=!1,this.labels[c+w]=i,this.labelColor[c+w]=b(t.title.font.color),this.labelFont[c+w]=t.title.font.family,this.labelSize[c+w]=t.title.font.size,this.labelPad[c+w]=this.getLabelPad(o,t),this.tickEnable[c+w]=!1,this.tickColor[c+w]=b((t.tickfont||{}).color),this.tickAngle[c+w]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+w]=this.getTickPad(t),this.tickMarkLength[c+w]=0,this.tickMarkWidth[c+w]=t.tickwidth||0,this.tickMarkColor[c+w]=b(t.tickcolor),this.borderLineEnable[c+w]=!1,this.borderLineColor[c+w]=b(t.linecolor),this.borderLineWidth[c+w]=t.linewidth||0;l=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(o,t)&&!l,s=this.hasAxisInAltrPos(o,t)&&!l,n=t.mirror||!1,u=l?String(n).indexOf("all")!==-1:!!n,d=l?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[c]=!0:s&&(this.labelEnable[c+2]=!0),r?this.tickEnable[c]=t.showticklabels:s&&(this.tickEnable[c+2]=t.showticklabels),(r||u)&&(this.borderLineEnable[c]=t.showline),(s||u)&&(this.borderLineEnable[c+2]=t.showline),(r||d)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(s||d)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=b(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=b(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},_.hasSharedAxis=function(h){var o=this.scene,t=o.fullLayout._subplots.gl2d;return T.findSubplotsWithAxis(t,h).indexOf(o.id)!==0},_.hasAxisInDfltPos=function(h,o){var t=o.side;return h==="xaxis"?t==="bottom":h==="yaxis"?t==="left":void 0},_.hasAxisInAltrPos=function(h,o){var t=o.side;return h==="xaxis"?t==="top":h==="yaxis"?t==="right":void 0},_.getLabelPad=function(h,o){var t=1.5,i=o.title.font.size,n=o.showticklabels;return h==="xaxis"?o.side==="top"?i*(t+(n?1:0))-10:i*(t+(n?.5:0))-10:h==="yaxis"?o.side==="right"?10+i*(t+(n?1:.5)):10+i*(t+(n?.5:0)):void 0},_.getTickPad=function(h){return h.ticks==="outside"?10+h.ticklen:15},_.getTickMarkLength=function(h){if(!h.ticks)return 0;var o=h.ticklen;return h.ticks==="inside"?-o:o},F.exports=function(h){return new a(h)}},4796:function(F,L,e){var T=e(30962).overrideAll,b=e(92918),a=e(10820),_=e(77922),g=e(85555),h=e(93612),o=e(528),t=e(27659).NG;L.name="gl2d",L.attr=["xaxis","yaxis"],L.idRoot=["x","y"],L.idRegex=g.idRegex,L.attrRegex=g.attrRegex,L.attributes=e(89502),L.supplyLayoutDefaults=function(i,n,r){n._has("cartesian")||h.supplyLayoutDefaults(i,n,r)},L.layoutAttrOverrides=T(h.layoutAttributes,"plot","from-root"),L.baseLayoutAttrOverrides=T({plot_bgcolor:a.plot_bgcolor,hoverlabel:o.hoverlabel},"plot","nested"),L.plot=function(i){for(var n=i._fullLayout,r=i._fullData,s=n._subplots.gl2d,l=0;l<s.length;l++){var u=s[l],d=n._plots[u],c=t(r,"gl2d",u),w=d._scene2d;w===void 0&&(w=new b({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},n),d._scene2d=w),w.plot(c,i.calcdata,n,i.layout)}},L.clean=function(i,n,r,s){for(var l=s._subplots.gl2d||[],u=0;u<l.length;u++){var d=l[u],c=s._plots[d];c._scene2d&&t(i,"gl2d",d).length===0&&(c._scene2d.destroy(),delete s._plots[d])}h.clean.apply(this,arguments)},L.drawFramework=function(i){i._context.staticPlot||h.drawFramework(i)},L.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,s=0;s<r.length;s++){var l=n._plots[r[s]]._scene2d,u=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:_.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},L.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,s=0;s<r.length;s++)n._plots[r[s]]._scene2d.updateFx(n.dragmode)}},92918:function(F,L,e){var T,b,a=e(73972),_=e(89298),g=e(30211),h=e(9330).gl_plot2d,o=e(9330).gl_spikes2d,t=e(9330).gl_select_box,i=e(40372),n=e(82961),r=e(75071),s=e(58617),l=e(99082),u=l.enforce,d=l.clean,c=e(71739).doAutoRange,w=e(64505),m=w.drawMode,f=w.selectMode,x=["xaxis","yaxis"],y=e(85555).SUBPLOT_PATTERN;function v(p,S){this.container=p.container,this.graphDiv=p.graphDiv,this.pixelRatio=p.plotGlPixelRatio||window.devicePixelRatio,this.id=p.id,this.staticPlot=!!p.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=h(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=o(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}F.exports=v;var M=v.prototype;M.makeFramework=function(){if(this.staticPlot){if(!(b||(T=document.createElement("canvas"),b=i({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=b}else{var p=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:p,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return s(this),void(this.stopped=!0);this.canvas=p,this.gl=S}var A=this.canvas;A.style.width="100%",A.style.height="100%",A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.style["pointer-events"]="none",this.updateSize(A);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var C=this.mouseContainer=document.createElement("div");C.style.position="absolute",C.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var P=this.container;P.appendChild(k),P.appendChild(C);var R=this;C.addEventListener("mouseout",function(){R.isMouseOver=!1,R.unhover()}),C.addEventListener("mouseover",function(){R.isMouseOver=!0})},M.toImage=function(p){p||(p="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var S=this.glplot.gl,A=S.drawingBufferWidth,k=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var C=new Uint8Array(A*k*4);S.readPixels(0,0,A,k,S.RGBA,S.UNSIGNED_BYTE,C);for(var P=0,R=k-1;P<R;++P,--R)for(var O=0;O<A;++O)for(var X=0;X<4;++X){var D=C[4*(A*P+O)+X];C[4*(A*P+O)+X]=C[4*(A*R+O)+X],C[4*(A*R+O)+X]=D}var V=document.createElement("canvas");V.width=A,V.height=k;var j,B=V.getContext("2d",{willReadFrequently:!0}),W=B.createImageData(A,k);switch(W.data.set(C),B.putImageData(W,0,0),p){case"jpeg":j=V.toDataURL("image/jpeg");break;case"webp":j=V.toDataURL("image/webp");break;default:j=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),j},M.updateSize=function(p){p||(p=this.canvas);var S=this.pixelRatio,A=this.fullLayout,k=A.width,C=A.height,P=0|Math.ceil(S*k),R=0|Math.ceil(S*C);return p.width===P&&p.height===R||(p.width=P,p.height=R),p},M.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var p=[_.calcTicks(this.xaxis),_.calcTicks(this.yaxis)],S=0;S<2;++S)for(var A=0;A<p[S].length;++A)p[S][A].text=p[S][A].text+"";return p},M.updateRefs=function(p){this.fullLayout=p;var S=this.id.match(y),A="xaxis"+S[1],k="yaxis"+S[2];this.xaxis=this.fullLayout[A],this.yaxis=this.fullLayout[k]},M.relayoutCallback=function(){var p=this.graphDiv,S=this.xaxis,A=this.yaxis,k=p.layout,C={},P=C[S._name+".range"]=S.range.slice(),R=C[A._name+".range"]=A.range.slice();C[S._name+".autorange"]=S.autorange,C[A._name+".autorange"]=A.autorange,a.call("_storeDirectGUIEdit",p.layout,p._fullLayout._preGUI,C);var O=k[S._name];O.range=P,O.autorange=S.autorange;var X=k[A._name];X.range=R,X.autorange=A.autorange,C.lastInputTime=this.camera.lastInputTime,p.emit("plotly_relayout",C)},M.cameraChanged=function(){var p=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(A,k){for(var C=0;C<2;++C){var P=A[C],R=k[C];if(P.length!==R.length)return!0;for(var O=0;O<P.length;++O)if(P[O].x!==R[O].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=p.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},M.handleAnnotations=function(){for(var p=this.graphDiv,S=this.fullLayout.annotations,A=0;A<S.length;A++){var k=S[A];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&a.getComponentMethod("annotations","drawOne")(p,A)}},M.destroy=function(){if(this.glplot){var p=this.traces;p&&Object.keys(p).map(function(S){p[S].dispose(),delete p[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},M.plot=function(p,S,A){var k=this.glplot;this.updateRefs(A),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(p,S),this.updateFx(A.dragmode);var C=A.width,P=A.height;this.updateSize(this.canvas);var R=this.glplotOptions;R.merge(A),R.screenBox=[0,0,C,P];var O={_fullLayout:{_axisConstraintGroups:A._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:A._size}};d(O,this.xaxis),d(O,this.yaxis);var X,D,V=A._size,j=this.xaxis.domain,B=this.yaxis.domain;for(R.viewBox=[V.l+j[0]*V.w,V.b+B[0]*V.h,C-V.r-(1-j[1])*V.w,P-V.t-(1-B[1])*V.h],this.mouseContainer.style.width=V.w*(j[1]-j[0])+"px",this.mouseContainer.style.height=V.h*(B[1]-B[0])+"px",this.mouseContainer.height=V.h*(B[1]-B[0]),this.mouseContainer.style.left=V.l+j[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-B[1])*V.h+"px",D=0;D<2;++D)(X=this[x[D]])._length=R.viewBox[D+2]-R.viewBox[D],c(this.graphDiv,X),X.setScale();u(O),R.ticks=this.computeTickMarks(),R.dataBox=this.calcDataBox(),R.merge(A),k.update(R),this.glplot.draw()},M.calcDataBox=function(){var p=this.xaxis,S=this.yaxis,A=p.range,k=S.range,C=p.r2l,P=S.r2l;return[C(A[0]),P(k[0]),C(A[1]),P(k[1])]},M.setRanges=function(p){var S=this.xaxis,A=this.yaxis,k=S.l2r,C=A.l2r;S.range=[k(p[0]),k(p[2])],A.range=[C(p[1]),C(p[3])]},M.updateTraces=function(p,S){var A,k,C,P=Object.keys(this.traces);this.fullData=p;e:for(A=0;A<P.length;A++){var R=P[A],O=this.traces[R];for(k=0;k<p.length;k++)if((C=p[k]).uid===R&&C.type===O.type)continue e;O.dispose(),delete this.traces[R]}for(A=0;A<p.length;A++){C=p[A];var X=S[A],D=this.traces[C.uid];D?D.update(C,X):(D=C._module.plot(this,C,X),this.traces[C.uid]=D)}this.glplot.objects.sort(function(V,j){return V._trace.index-j._trace.index})},M.updateFx=function(p){f(p)||m(p)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=p==="pan"?"move":p==="zoom"?"crosshair":null},M.emitPointAction=function(p,S){for(var A,k=p.trace.uid,C=p.pointIndex,P=0;P<this.fullData.length;P++)this.fullData[P].uid===k&&(A=this.fullData[P]);var R={x:p.traceCoord[0],y:p.traceCoord[1],curveNumber:A.index,pointNumber:C,data:A._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};g.appendArrayPointValue(R,A,C),this.graphDiv.emit(S,{points:[R]})},M.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var p=this.glplot,S=this.camera,A=S.mouseListener,k=this.lastButtonState===1&&A.buttons===0,C=this.fullLayout;this.lastButtonState=A.buttons,this.cameraChanged();var P,R=A.x*p.pixelRatio,O=this.canvas.height-p.pixelRatio*A.y;if(S.boxEnabled&&C.dragmode==="zoom"){this.selectBox.enabled=!0;for(var X=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],D=0;D<2;D++)S.boxStart[D]===S.boxEnd[D]&&(X[D]=p.dataBox[D],X[D+2]=p.dataBox[D+2]);p.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=C._size,j=this.xaxis.domain,B=this.yaxis.domain,W=(P=p.pick(R/p.pixelRatio+V.l+j[0]*V.w,O/p.pixelRatio-(V.t+(1-B[1])*V.h)))&&P.object._trace.handlePick(P);if(W&&k&&this.emitPointAction(W,"plotly_click"),P&&P.object._trace.hoverinfo!=="skip"&&C.hovermode&&W&&(!this.lastPickResult||this.lastPickResult.traceUid!==W.trace.uid||this.lastPickResult.dataCoord[0]!==W.dataCoord[0]||this.lastPickResult.dataCoord[1]!==W.dataCoord[1])){var q=W;this.lastPickResult={traceUid:W.trace?W.trace.uid:null,dataCoord:W.dataCoord.slice()},this.spikes.update({center:P.dataCoord}),q.screenCoord=[((p.viewBox[2]-p.viewBox[0])*(P.dataCoord[0]-p.dataBox[0])/(p.dataBox[2]-p.dataBox[0])+p.viewBox[0])/p.pixelRatio,(this.canvas.height-(p.viewBox[3]-p.viewBox[1])*(P.dataCoord[1]-p.dataBox[1])/(p.dataBox[3]-p.dataBox[1])-p.viewBox[1])/p.pixelRatio],this.emitPointAction(W,"plotly_hover");var re=this.fullData[q.trace.index]||{},ee=q.pointIndex,K=g.castHoverinfo(re,C,ee);if(K&&K!=="all"){var Y=K.split("+");Y.indexOf("x")===-1&&(q.traceCoord[0]=void 0),Y.indexOf("y")===-1&&(q.traceCoord[1]=void 0),Y.indexOf("z")===-1&&(q.traceCoord[2]=void 0),Y.indexOf("text")===-1&&(q.textLabel=void 0),Y.indexOf("name")===-1&&(q.name=void 0)}g.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:g.castHoverOption(re,ee,"bgcolor")||q.color,borderColor:g.castHoverOption(re,ee,"bordercolor"),fontFamily:g.castHoverOption(re,ee,"font.family"),fontSize:g.castHoverOption(re,ee,"font.size"),fontColor:g.castHoverOption(re,ee,"font.color"),nameLength:g.castHoverOption(re,ee,"namelength"),textAlign:g.castHoverOption(re,ee,"align")},{container:this.svgContainer,gd:this.graphDiv})}}P||this.unhover(),p.draw()}},M.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),g.loneUnhover(this.svgContainer))},M.hoverFormatter=function(p,S){if(S!==void 0){var A=this[p];return _.tickText(A,A.c2l(S),"hover").text}}},58547:function(F,L,e){var T=e(30962).overrideAll,b=e(528),a=e(33539),_=e(27659).NG,g=e(71828),h=e(77922),o="gl3d",t="scene";L.name=o,L.attr=t,L.idRoot=t,L.idRegex=L.attrRegex=g.counterRegex("scene"),L.attributes=e(59084),L.layoutAttributes=e(65500),L.baseLayoutAttrOverrides=T({hoverlabel:b.hoverlabel},"plot","nested"),L.supplyLayoutDefaults=e(24682),L.plot=function(i){for(var n=i._fullLayout,r=i._fullData,s=n._subplots[o],l=0;l<s.length;l++){var u=s[l],d=_(r,o,u),c=n[u],w=c.camera,m=c._scene;m||(m=new a({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:w},n),c._scene=m),m.viewInitial||(m.viewInitial={up:{x:w.up.x,y:w.up.y,z:w.up.z},eye:{x:w.eye.x,y:w.eye.y,z:w.eye.z},center:{x:w.center.x,y:w.center.y,z:w.center.z}}),m.plot(d,n,i.layout)}},L.clean=function(i,n,r,s){for(var l=s._subplots[o]||[],u=0;u<l.length;u++){var d=l[u];!n[d]&&s[d]._scene&&(s[d]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+d).remove())}},L.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots[o],s=n._size,l=0;l<r.length;l++){var u=n[r[l]],d=u.domain,c=u._scene,w=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":w,x:s.l+s.w*d.x[0],y:s.t+s.h*(1-d.y[1]),width:s.w*(d.x[1]-d.x[0]),height:s.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),c.destroy()}},L.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var n=i.substr(5);return n==="1"&&(n=""),t+n}},L.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots[o],s=0;s<r.length;s++)n[r[s]]._scene.updateFx(n.dragmode,n.hovermode)}},59084:function(F){F.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(F,L,e){var T=e(7901),b=e(13838),a=e(1426).extendFlat,_=e(30962).overrideAll;F.exports=_({visible:b.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:T.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:b.color,categoryorder:b.categoryorder,categoryarray:b.categoryarray,title:{text:b.title.text,font:b.title.font},type:a({},b.type,{values:["-","linear","log","date","category"]}),autotypenumbers:b.autotypenumbers,autorange:b.autorange,rangemode:b.rangemode,range:a({},b.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:b.minor.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,mirror:b.mirror,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,labelalias:b.labelalias,tickfont:b.tickfont,tickangle:b.tickangle,tickprefix:b.tickprefix,showtickprefix:b.showtickprefix,ticksuffix:b.ticksuffix,showticksuffix:b.showticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:b.showline,linecolor:b.linecolor,linewidth:b.linewidth,showgrid:b.showgrid,gridcolor:a({},b.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:b.gridwidth,zeroline:b.zeroline,zerolinecolor:b.zerolinecolor,zerolinewidth:b.zerolinewidth,_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},"plot","from-root")},3277:function(F,L,e){var T=e(84267).mix,b=e(71828),a=e(44467),_=e(77894),g=e(951),h=e(71453),o=["xaxis","yaxis","zaxis"];F.exports=function(t,i,n){var r,s;function l(c,w){return b.coerce(r,s,_,c,w)}for(var u=0;u<o.length;u++){var d=o[u];r=t[d]||{},(s=a.newContainer(i,d))._id=d[0]+n.scene,s._name=d,g(r,s,l,n),h(r,s,l,{font:n.font,letter:d[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",T(s.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",d[0]),s.setScale=b.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",s.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},30422:function(F,L,e){var T=e(78614),b=e(71828),a=["xaxis","yaxis","zaxis"];function _(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}_.prototype.merge=function(g,h){for(var o=this,t=0;t<3;++t){var i=h[a[t]];i.visible?(o.labels[t]=g._meta?b.templateString(i.title.text,g._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(o.labelColor[t]=T(i.title.font.color)),i.title.font.family&&(o.labelFont[t]=i.title.font.family),i.title.font.size&&(o.labelSize[t]=i.title.font.size)),"showline"in i&&(o.lineEnable[t]=i.showline),"linecolor"in i&&(o.lineColor[t]=T(i.linecolor)),"linewidth"in i&&(o.lineWidth[t]=i.linewidth),"showgrid"in i&&(o.gridEnable[t]=i.showgrid),"gridcolor"in i&&(o.gridColor[t]=T(i.gridcolor)),"gridwidth"in i&&(o.gridWidth[t]=i.gridwidth),i.type==="log"?o.zeroEnable[t]=!1:"zeroline"in i&&(o.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(o.zeroLineColor[t]=T(i.zerolinecolor)),"zerolinewidth"in i&&(o.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?o.lineTickEnable[t]=!0:o.lineTickEnable[t]=!1,"ticklen"in i&&(o.lineTickLength[t]=o._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(o.lineTickColor[t]=T(i.tickcolor)),"tickwidth"in i&&(o.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(o.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(o.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(o.tickColor[t]=T(i.tickfont.color)),i.tickfont.family&&(o.tickFont[t]=i.tickfont.family),i.tickfont.size&&(o.tickSize[t]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(o.lineTickMirror[t]=!0,o.lineMirror[t]=!0):i.mirror===!0?(o.lineTickMirror[t]=!1,o.lineMirror[t]=!0):(o.lineTickMirror[t]=!1,o.lineMirror[t]=!1):o.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(o.backgroundEnable[t]=!0,o.backgroundColor[t]=T(i.backgroundcolor)):o.backgroundEnable[t]=!1):(o.tickEnable[t]=!1,o.labelEnable[t]=!1,o.lineEnable[t]=!1,o.lineTickEnable[t]=!1,o.gridEnable[t]=!1,o.zeroEnable[t]=!1,o.backgroundEnable[t]=!1)}},F.exports=function(g,h){var o=new _;return o.merge(g,h),o}},24682:function(F,L,e){var T=e(71828),b=e(7901),a=e(73972),_=e(49119),g=e(3277),h=e(65500),o=e(27659).NG,t="gl3d";function i(n,r,s,l){for(var u=s("bgcolor"),d=b.combine(u,l.paper_bgcolor),c=["up","center","eye"],w=0;w<c.length;w++)s("camera."+c[w]+".x"),s("camera."+c[w]+".y"),s("camera."+c[w]+".z");s("camera.projection.type");var m=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),f=s("aspectmode",m?"manual":"auto");m||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},f==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var x=o(l.fullData,t,l.id);g(n,r,{font:l.font,scene:l.id,data:x,bgColor:d,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),a.getComponentMethod("annotations3d","handleDefaults")(n,r,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",n.camera&&n.camera.up){var v=n.camera.up.x,M=n.camera.up.y,p=n.camera.up.z;p!==0&&(v&&M&&p?p/Math.sqrt(v*v+M*M+p*p)>.999&&(y="turntable"):y="turntable")}else y="turntable";s("dragmode",y),s("hovermode",l.getDfltFromLayout("hovermode"))}F.exports=function(n,r,s){var l=r._basePlotModules.length>1;_(n,r,s,{type:t,attributes:h,handleDefaults:i,fullLayout:r,font:r.font,fullData:s,getDfltFromLayout:function(u){if(!l)return T.validate(n[u],h[u])?n[u]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},65500:function(F,L,e){var T=e(77894),b=e(27670).Y,a=e(1426).extendFlat,_=e(71828).counterRegex;function g(h,o,t){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}F.exports={_arrayAttrRegexps:[_("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:a(g(0,0,1),{}),center:a(g(0,0,0),{}),eye:a(g(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:b({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:T,yaxis:T,zaxis:T,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(F,L,e){var T=e(78614),b=["xaxis","yaxis","zaxis"];function a(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}a.prototype.merge=function(_){for(var g=0;g<3;++g){var h=_[b[g]];h.visible?(this.enabled[g]=h.showspikes,this.colors[g]=T(h.spikecolor),this.drawSides[g]=h.spikesides,this.lineWidth[g]=h.spikethickness):(this.enabled[g]=!1,this.drawSides[g]=!1)}},F.exports=function(_){var g=new a;return g.merge(_),g}},96085:function(F,L,e){F.exports=function(g){for(var h=g.axesOptions,o=g.glplot.axesPixels,t=g.fullSceneLayout,i=[[],[],[]],n=0;n<3;++n){var r=t[a[n]];if(r._length=(o[n].hi-o[n].lo)*o[n].pixelsPerDataUnit/g.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))i[n]=[];else{r._input_range=r.range.slice(),r.range[0]=o[n].lo/g.dataScale[n],r.range[1]=o[n].hi/g.dataScale[n],r._m=1/(g.dataScale[n]*o[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var s=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var l=r.nticks||b.constrain(r._length/40,4,9);T.autoTicks(r,Math.abs(r.range[1]-r.range[0])/l)}for(var u=T.calcTicks(r,{msUTC:!0}),d=0;d<u.length;++d)u[d].x=u[d].x*g.dataScale[n],r.type==="date"&&(u[d].text=u[d].text.replace(/\<br\>/g," "));i[n]=u,r.tickmode=s}}for(h.ticks=i,n=0;n<3;++n)for(_[n]=.5*(g.glplot.bounds[0][n]+g.glplot.bounds[1][n]),d=0;d<2;++d)h.bounds[d][n]=g.glplot.bounds[d][n];g.contourLevels=function(c){for(var w=new Array(3),m=0;m<3;++m){for(var f=c[m],x=new Array(f.length),y=0;y<f.length;++y)x[y]=f[y].x;w[m]=x}return w}(i)};var T=e(89298),b=e(71828),a=["xaxis","yaxis","zaxis"],_=[0,0,0]},63538:function(F){function L(e,T){var b,a,_=[0,0,0,0];for(b=0;b<4;++b)for(a=0;a<4;++a)_[a]+=e[4*b+a]*T[b];return _}F.exports=function(e,T){return L(e.projection,L(e.view,L(e.model,[T[0],T[1],T[2],1])))}},33539:function(F,L,e){var T,b,a=e(9330).gl_plot3d,_=a.createCamera,g=a.createScene,h=e(40372),o=e(38520),t=e(73972),i=e(71828),n=i.preserveDrawingBuffer(),r=e(89298),s=e(30211),l=e(78614),u=e(58617),d=e(63538),c=e(30422),w=e(13133),m=e(96085),f=!1;function x(S,A){var k=document.createElement("div"),C=S.container;this.graphDiv=S.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",k.appendChild(P),this.svgContainer=P,k.id=S.id,k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",C.appendChild(k),this.fullLayout=A,this.id=S.id||"scene",this.fullSceneLayout=A[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(A,A[this.id]),this.spikeOptions=w(A[this.id]),this.container=k,this.staticMode=!!S.staticPlot,this.pixelRatio=this.pixelRatio||S.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=x.prototype;y.prepareOptions=function(){var S=this,A={canvas:S.canvas,gl:S.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:S.container,axes:S.axesOptions,spikes:S.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:S.camera,pixelRatio:S.pixelRatio};if(S.staticMode){if(!(b||(T=document.createElement("canvas"),b=h({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");A.gl=b,A.canvas=T}return A};var v=!0;y.tryCreatePlot=function(){var S=this,A=S.prepareOptions(),k=!0;try{S.glplot=g(A)}catch{if(S.staticMode||!v||n)k=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=A.glOptions.preserveDrawingBuffer=!0,S.glplot=g(A)}catch{n=A.glOptions.preserveDrawingBuffer=!1,k=!1}}}return v=!1,k},y.initializeGLCamera=function(){var S=this,A=S.fullSceneLayout.camera,k=A.projection.type==="orthographic";S.camera=_(S.container,{center:[A.center.x,A.center.y,A.center.z],eye:[A.eye.x,A.eye.y,A.eye.z],up:[A.up.x,A.up.y,A.up.z],_ortho:k,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var S=this;if(S.initializeGLCamera(),!S.tryCreatePlot())return u(S);S.traces={},S.make4thDimension();var A=S.graphDiv,k=A.layout,C=function(){var R={};return S.isCameraChanged(k)&&(R[S.id+".camera"]=S.getCamera()),S.isAspectChanged(k)&&(R[S.id+".aspectratio"]=S.glplot.getAspectratio(),k[S.id].aspectmode!=="manual"&&(S.fullSceneLayout.aspectmode=k[S.id].aspectmode=R[S.id+".aspectmode"]="manual")),R},P=function(R){if(R.fullSceneLayout.dragmode!==!1){var O=C();R.saveLayout(k),R.graphDiv.emit("plotly_relayout",O)}};return S.glplot.canvas&&(S.glplot.canvas.addEventListener("mouseup",function(){P(S)}),S.glplot.canvas.addEventListener("touchstart",function(){f=!0}),S.glplot.canvas.addEventListener("wheel",function(R){if(A._context._scrollZoom.gl3d){if(S.camera._ortho){var O=R.deltaX>R.deltaY?1.1:.9090909090909091,X=S.glplot.getAspectratio();S.glplot.setAspectratio({x:O*X.x,y:O*X.y,z:O*X.z})}P(S)}},!!o&&{passive:!1}),S.glplot.canvas.addEventListener("mousemove",function(){if(S.fullSceneLayout.dragmode!==!1&&S.camera.mouseListener.buttons!==0){var R=C();S.graphDiv.emit("plotly_relayouting",R)}}),S.staticMode||S.glplot.canvas.addEventListener("webglcontextlost",function(R){A&&A.emit&&A.emit("plotly_webglcontextlost",{event:R,layer:S.id})},!1)),S.glplot.oncontextloss=function(){S.recoverContext()},S.glplot.onrender=function(){S.render()},!0},y.render=function(){var S,A=this,k=A.graphDiv,C=A.svgContainer,P=A.container.getBoundingClientRect();k._fullLayout._calcInverseTransform(k);var R=k._fullLayout._invScaleX,O=k._fullLayout._invScaleY,X=P.width*R,D=P.height*O;C.setAttributeNS(null,"viewBox","0 0 "+X+" "+D),C.setAttributeNS(null,"width",X),C.setAttributeNS(null,"height",D),m(A),A.glplot.axes.update(A.axesOptions);for(var V=Object.keys(A.traces),j=null,B=A.glplot.selection,W=0;W<V.length;++W)(S=A.traces[V[W]]).data.hoverinfo!=="skip"&&S.handlePick(B)&&(j=S),S.setContourLevels&&S.setContourLevels();function q(Ce,pe,fe){var Oe=A.fullSceneLayout[Ce+"axis"];return Oe.type!=="log"&&(pe=Oe.d2l(pe)),r.hoverLabelText(Oe,pe,fe)}if(j!==null){var re=d(A.glplot.cameraParams,B.dataCoordinate);S=j.data;var ee,K=k._fullData[S.index],Y=B.index,$={xLabel:q("x",B.traceCoordinate[0],S.xhoverformat),yLabel:q("y",B.traceCoordinate[1],S.yhoverformat),zLabel:q("z",B.traceCoordinate[2],S.zhoverformat)},ne=s.castHoverinfo(K,A.fullLayout,Y),ae=(ne||"").split("+"),se=ne&&ne==="all";K.hovertemplate||se||(ae.indexOf("x")===-1&&($.xLabel=void 0),ae.indexOf("y")===-1&&($.yLabel=void 0),ae.indexOf("z")===-1&&($.zLabel=void 0),ae.indexOf("text")===-1&&(B.textLabel=void 0),ae.indexOf("name")===-1&&(j.name=void 0));var ce=[];S.type==="cone"||S.type==="streamtube"?($.uLabel=q("x",B.traceCoordinate[3],S.uhoverformat),(se||ae.indexOf("u")!==-1)&&ce.push("u: "+$.uLabel),$.vLabel=q("y",B.traceCoordinate[4],S.vhoverformat),(se||ae.indexOf("v")!==-1)&&ce.push("v: "+$.vLabel),$.wLabel=q("z",B.traceCoordinate[5],S.whoverformat),(se||ae.indexOf("w")!==-1)&&ce.push("w: "+$.wLabel),$.normLabel=B.traceCoordinate[6].toPrecision(3),(se||ae.indexOf("norm")!==-1)&&ce.push("norm: "+$.normLabel),S.type==="streamtube"&&($.divergenceLabel=B.traceCoordinate[7].toPrecision(3),(se||ae.indexOf("divergence")!==-1)&&ce.push("divergence: "+$.divergenceLabel)),B.textLabel&&ce.push(B.textLabel),ee=ce.join("<br>")):S.type==="isosurface"||S.type==="volume"?($.valueLabel=r.hoverLabelText(A._mockAxis,A._mockAxis.d2l(B.traceCoordinate[3]),S.valuehoverformat),ce.push("value: "+$.valueLabel),B.textLabel&&ce.push(B.textLabel),ee=ce.join("<br>")):ee=B.textLabel;var me={x:B.traceCoordinate[0],y:B.traceCoordinate[1],z:B.traceCoordinate[2],data:K._input,fullData:K,curveNumber:K.index,pointNumber:Y};s.appendArrayPointValue(me,K,Y),S._module.eventData&&(me=K._module.eventData(me,B,K,{},Y));var ye={points:[me]};if(A.fullSceneLayout.hovermode){var Te=[];s.loneHover({trace:K,x:(.5+.5*re[0]/re[3])*X,y:(.5-.5*re[1]/re[3])*D,xLabel:$.xLabel,yLabel:$.yLabel,zLabel:$.zLabel,text:ee,name:j.name,color:s.castHoverOption(K,Y,"bgcolor")||j.color,borderColor:s.castHoverOption(K,Y,"bordercolor"),fontFamily:s.castHoverOption(K,Y,"font.family"),fontSize:s.castHoverOption(K,Y,"font.size"),fontColor:s.castHoverOption(K,Y,"font.color"),nameLength:s.castHoverOption(K,Y,"namelength"),textAlign:s.castHoverOption(K,Y,"align"),hovertemplate:i.castOption(K,Y,"hovertemplate"),hovertemplateLabels:i.extendFlat({},me,$),eventData:[me]},{container:C,gd:k,inOut_bbox:Te}),me.bbox=Te[0]}B.distance<5&&(B.buttons||f)?k.emit("plotly_click",ye):k.emit("plotly_hover",ye),this.oldEventData=ye}else s.loneUnhover(C),this.oldEventData&&k.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;A.drawAnnotations(A)},y.recoverContext=function(){var S=this;S.glplot.dispose();var A=function(){S.glplot.gl.isContextLost()?requestAnimationFrame(A):S.initializeGLPlot()?S.plot.apply(S,S.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(A)};var M=["xaxis","yaxis","zaxis"];function p(S,A,k){for(var C=S.fullSceneLayout,P=0;P<3;P++){var R=M[P],O=R.charAt(0),X=C[R],D=A[O],V=A[O+"calendar"],j=A["_"+O+"length"];if(i.isArrayOrTypedArray(D))for(var B,W=0;W<(j||D.length);W++)if(i.isArrayOrTypedArray(D[W]))for(var q=0;q<D[W].length;++q)B=X.d2l(D[W][q],0,V),!isNaN(B)&&isFinite(B)&&(k[0][P]=Math.min(k[0][P],B),k[1][P]=Math.max(k[1][P],B));else B=X.d2l(D[W],0,V),!isNaN(B)&&isFinite(B)&&(k[0][P]=Math.min(k[0][P],B),k[1][P]=Math.max(k[1][P],B));else k[0][P]=Math.min(k[0][P],0),k[1][P]=Math.max(k[1][P],j-1)}}y.plot=function(S,A,k){var C=this;if(C.plotArgs=[S,A,k],!C.glplot.contextLost){var P,R,O,X,D,V,j=A[C.id],B=k[C.id];C.fullLayout=A,C.fullSceneLayout=j,C.axesOptions.merge(A,j),C.spikeOptions.merge(j),C.setViewport(j),C.updateFx(j.dragmode,j.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(l(j.bgcolor)),C.setConvert(D),S?Array.isArray(S)||(S=[S]):S=[];var W=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(O=0;O<S.length;++O)(P=S[O]).visible===!0&&P._length!==0&&p(this,P,W);(function(we,Ne){for(var He=we.fullSceneLayout,de=He.annotations||[],Le=0;Le<3;Le++)for(var Ee=M[Le],Re=Ee.charAt(0),je=He[Ee],Fe=0;Fe<de.length;Fe++){var Xe=de[Fe];if(Xe.visible){var Ze=je.r2l(Xe[Re]);!isNaN(Ze)&&isFinite(Ze)&&(Ne[0][Le]=Math.min(Ne[0][Le],Ze),Ne[1][Le]=Math.max(Ne[1][Le],Ze))}}})(this,W);var q=[1,1,1];for(X=0;X<3;++X)W[1][X]===W[0][X]?q[X]=1:q[X]=1/(W[1][X]-W[0][X]);for(C.dataScale=q,C.convertAnnotations(this),O=0;O<S.length;++O)(P=S[O]).visible===!0&&P._length!==0&&((R=C.traces[P.uid])?R.data.type===P.type?R.update(P):(R.dispose(),R=P._module.plot(this,P),C.traces[P.uid]=R):(R=P._module.plot(this,P),C.traces[P.uid]=R),R.name=P.name);var re=Object.keys(C.traces);e:for(O=0;O<re.length;++O){for(X=0;X<S.length;++X)if(S[X].uid===re[O]&&S[X].visible===!0&&S[X]._length!==0)continue e;(R=C.traces[re[O]]).dispose(),delete C.traces[re[O]]}C.glplot.objects.sort(function(we,Ne){return we._trace.data.index-Ne._trace.data.index});var ee,K=[[0,0,0],[0,0,0]],Y=[],$={};for(O=0;O<3;++O){if((V=(D=j[M[O]]).type)in $?($[V].acc*=q[O],$[V].count+=1):$[V]={acc:q[O],count:1},D.autorange){K[0][O]=1/0,K[1][O]=-1/0;var ne=C.glplot.objects,ae=C.fullSceneLayout.annotations||[],se=D._name.charAt(0);for(X=0;X<ne.length;X++){var ce=ne[X],me=ce.bounds,ye=ce._trace.data._pad||0;ce.constructor.name==="ErrorBars"&&D._lowerLogErrorBound?K[0][O]=Math.min(K[0][O],D._lowerLogErrorBound):K[0][O]=Math.min(K[0][O],me[0][O]/q[O]-ye),K[1][O]=Math.max(K[1][O],me[1][O]/q[O]+ye)}for(X=0;X<ae.length;X++){var Te=ae[X];if(Te.visible){var Ce=D.r2l(Te[se]);K[0][O]=Math.min(K[0][O],Ce),K[1][O]=Math.max(K[1][O],Ce)}}if("rangemode"in D&&D.rangemode==="tozero"&&(K[0][O]=Math.min(K[0][O],0),K[1][O]=Math.max(K[1][O],0)),K[0][O]>K[1][O])K[0][O]=-1,K[1][O]=1;else{var pe=K[1][O]-K[0][O];K[0][O]-=pe/32,K[1][O]+=pe/32}if(D.autorange==="reversed"){var fe=K[0][O];K[0][O]=K[1][O],K[1][O]=fe}}else{var Oe=D.range;K[0][O]=D.r2l(Oe[0]),K[1][O]=D.r2l(Oe[1])}K[0][O]===K[1][O]&&(K[0][O]-=1,K[1][O]+=1),Y[O]=K[1][O]-K[0][O],C.glplot.setBounds(O,{min:K[0][O]*q[O],max:K[1][O]*q[O]})}var Se=j.aspectmode;if(Se==="cube")ee=[1,1,1];else if(Se==="manual"){var Me=j.aspectratio;ee=[Me.x,Me.y,Me.z]}else{if(Se!=="auto"&&Se!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ue=[1,1,1];for(O=0;O<3;++O){var le=$[V=(D=j[M[O]]).type];ue[O]=Math.pow(le.acc,1/le.count)/q[O]}ee=Se==="data"||Math.max.apply(null,ue)/Math.min.apply(null,ue)<=4?ue:[1,1,1]}j.aspectratio.x=B.aspectratio.x=ee[0],j.aspectratio.y=B.aspectratio.y=ee[1],j.aspectratio.z=B.aspectratio.z=ee[2],C.glplot.setAspectratio(j.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:j.aspectratio.x,y:j.aspectratio.y,z:j.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=j.aspectmode);var ie=j.domain||null,ge=A._size||null;if(ie&&ge){var Ae=C.container.style;Ae.position="absolute",Ae.left=ge.l+ie.x[0]*ge.w+"px",Ae.top=ge.t+(1-ie.y[1])*ge.h+"px",Ae.width=ge.w*(ie.x[1]-ie.x[0])+"px",Ae.height=ge.h*(ie.y[1]-ie.y[0])+"px"}C.glplot.redraw()}},y.destroy=function(){var S=this;S.glplot&&(S.camera.mouseListener.enabled=!1,S.container.removeEventListener("wheel",S.camera.wheelListener),S.camera=null,S.glplot.dispose(),S.container.parentNode.removeChild(S.container),S.glplot=null)},y.getCamera=function(){var S,A=this;return A.camera.view.recalcMatrix(A.camera.view.lastT()),{up:{x:(S=A.camera).up[0],y:S.up[1],z:S.up[2]},center:{x:S.center[0],y:S.center[1],z:S.center[2]},eye:{x:S.eye[0],y:S.eye[1],z:S.eye[2]},projection:{type:S._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(S){var A,k=this,C=S.camera;k.camera.lookAt.apply(this,[[(A=C).eye.x,A.eye.y,A.eye.z],[A.center.x,A.center.y,A.center.z],[A.up.x,A.up.y,A.up.z]]),k.glplot.setAspectratio(S.aspectratio),C.projection.type==="orthographic"!==k.camera._ortho&&(k.glplot.redraw(),k.glplot.clearRGBA(),k.glplot.dispose(),k.initializeGLPlot())},y.isCameraChanged=function(S){var A=this.getCamera(),k=i.nestedProperty(S,this.id+".camera").get();function C(X,D,V,j){var B=["up","center","eye"],W=["x","y","z"];return D[B[V]]&&X[B[V]][W[j]]===D[B[V]][W[j]]}var P=!1;if(k===void 0)P=!0;else{for(var R=0;R<3;R++)for(var O=0;O<3;O++)if(!C(A,k,R,O)){P=!0;break}(!k.projection||A.projection&&A.projection.type!==k.projection.type)&&(P=!0)}return P},y.isAspectChanged=function(S){var A=this.glplot.getAspectratio(),k=i.nestedProperty(S,this.id+".aspectratio").get();return k===void 0||k.x!==A.x||k.y!==A.y||k.z!==A.z},y.saveLayout=function(S){var A,k,C,P,R,O,X=this,D=X.fullLayout,V=X.isCameraChanged(S),j=X.isAspectChanged(S),B=V||j;if(B){var W={};V&&(A=X.getCamera(),C=(k=i.nestedProperty(S,X.id+".camera")).get(),W[X.id+".camera"]=C),j&&(P=X.glplot.getAspectratio(),O=(R=i.nestedProperty(S,X.id+".aspectratio")).get(),W[X.id+".aspectratio"]=O),t.call("_storeDirectGUIEdit",S,D._preGUI,W),V&&(k.set(A),i.nestedProperty(D,X.id+".camera").set(A)),j&&(R.set(P),i.nestedProperty(D,X.id+".aspectratio").set(P),X.glplot.redraw())}return B},y.updateFx=function(S,A){var k=this,C=k.camera;if(C)if(S==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(S==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var P=k.graphDiv,R=P._fullLayout,O=k.fullSceneLayout.camera,X=O.up.x,D=O.up.y,V=O.up.z;if(V/Math.sqrt(X*X+D*D+V*V)<.999){var j=k.id+".camera.up",B={x:0,y:0,z:1},W={};W[j]=B;var q=P.layout;t.call("_storeDirectGUIEdit",q,R._preGUI,W),O.up=B,i.nestedProperty(q,j).set(B)}}else C.keyBindingMode=S;k.fullSceneLayout.hovermode=A},y.toImage=function(S){var A=this;S||(S="png"),A.staticMode&&A.container.appendChild(T),A.glplot.redraw();var k=A.glplot.gl,C=k.drawingBufferWidth,P=k.drawingBufferHeight;k.bindFramebuffer(k.FRAMEBUFFER,null);var R=new Uint8Array(C*P*4);k.readPixels(0,0,C,P,k.RGBA,k.UNSIGNED_BYTE,R),function(j,B,W){for(var q=0,re=W-1;q<re;++q,--re)for(var ee=0;ee<B;++ee)for(var K=0;K<4;++K){var Y=4*(B*q+ee)+K,$=4*(B*re+ee)+K,ne=j[Y];j[Y]=j[$],j[$]=ne}}(R,C,P),function(j,B,W){for(var q=0;q<W;++q)for(var re=0;re<B;++re){var ee=4*(B*q+re),K=j[ee+3];if(K>0)for(var Y=255/K,$=0;$<3;++$)j[ee+$]=Math.min(Y*j[ee+$],255)}}(R,C,P);var O=document.createElement("canvas");O.width=C,O.height=P;var X,D=O.getContext("2d",{willReadFrequently:!0}),V=D.createImageData(C,P);switch(V.data.set(R),D.putImageData(V,0,0),S){case"jpeg":X=O.toDataURL("image/jpeg");break;case"webp":X=O.toDataURL("image/webp");break;default:X=O.toDataURL("image/png")}return A.staticMode&&A.container.removeChild(T),X},y.setConvert=function(){for(var S=0;S<3;S++){var A=this.fullSceneLayout[M[S]];r.setConvert(A,this.fullLayout),A.setScale=i.noop}},y.make4thDimension=function(){var S=this,A=S.graphDiv._fullLayout;S._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(S._mockAxis,A)},F.exports=x},90060:function(F){F.exports=function(L,e,T,b){b=b||L.length;for(var a=new Array(b),_=0;_<b;_++)a[_]=[L[_],e[_],T[_]];return a}},10820:function(F,L,e){var T=e(41940),b=e(85594),a=e(22399),_=e(29241),g=e(53777),h=e(35025),o=e(1426).extendFlat,t=T({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=a.defaultLine,F.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:T({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(h({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,newselection:g.newselection,activeselection:g.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},b.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:T({editType:"layoutstyle"})}}},77734:function(F,L,e){var T=e(78607),b="1.10.1",a=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',_=[' <a target="_blank" href="https://carto.com/">Carto</a>',a].join(" "),g=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),h={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:a,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:g,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:g,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},o=T(h);F.exports={requiredVersion:b,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:h,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+b+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(F,L,e){var T=e(71828);F.exports=function(b,a){var _=b.split(" "),g=_[0],h=_[1],o=T.isArrayOrTypedArray(a)?T.mean(a):a,t=.5+o/100,i=1.5+o/100,n=["",""],r=[0,0];switch(g){case"top":n[0]="top",r[1]=-i;break;case"bottom":n[0]="bottom",r[1]=i}switch(h){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},50101:function(F,L,e){var T=e(44517),b=e(71828),a=b.strTranslate,_=b.strScale,g=e(27659).AU,h=e(77922),o=e(39898),t=e(91424),i=e(63893),n=e(10481),r="mapbox",s=L.constants=e(77734);function l(u){return typeof u=="string"&&(s.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}L.name=r,L.attr="subplot",L.idRoot=r,L.idRegex=L.attrRegex=b.counterRegex(r),L.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},L.layoutAttributes=e(23585),L.supplyLayoutDefaults=e(77882),L.plot=function(u){var d=u._fullLayout,c=u.calcdata,w=d._subplots[r];if(T.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var m=function(p,S){var A=p._fullLayout;if(p._context.mapboxAccessToken==="")return"";for(var k=[],C=[],P=!1,R=!1,O=0;O<S.length;O++){var X=A[S[O]],D=X.accesstoken;l(X.style)&&(D?b.pushUnique(k,D):(l(X._input.style)&&(b.error("Uses Mapbox map style, but did not set an access token."),P=!0),R=!0)),D&&b.pushUnique(C,D)}if(R){var V=P?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw b.error(V),new Error(V)}return k.length?(k.length>1&&b.warn(s.multipleTokensErrorMsg),k[0]):(C.length&&b.log(["Listed mapbox access token(s)",C.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,w);T.accessToken=m;for(var f=0;f<w.length;f++){var x=w[f],y=g(c,r,x),v=d[x],M=v._subplot;M||(M=new n(u,x),d[x]._subplot=M),M.viewInitial||(M.viewInitial={center:b.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),M.plot(y,d,u._promises)}},L.clean=function(u,d,c,w){for(var m=w._subplots[r]||[],f=0;f<m.length;f++){var x=m[f];!d[x]&&w[x]._subplot&&w[x]._subplot.destroy()}},L.toSVG=function(u){for(var d=u._fullLayout,c=d._subplots[r],w=d._size,m=0;m<c.length;m++){var f=d[c[m]],x=f.domain,y=f._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":y,x:w.l+w.w*x.x[0],y:w.t+w.h*(1-x.y[1]),width:w.w*(x.x[1]-x.x[0]),height:w.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var v=o.select(f._subplot.div);if(v.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var M=d._glimages.append("g");M.attr("transform",a(w.l+w.w*x.x[0]+10,w.t+w.h*(1-x.y[0])-31)),M.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var p=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=d._glimages.append("g"),A=S.append("text");A.text(p).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":p});var k=t.bBox(A.node()),C=w.w*(x.x[1]-x.x[0]);if(k.width>C/2){var P=p.split("|").join("<br>");A.text(P).attr("data-unformatted",P).call(i.convertToTspans,u),k=t.bBox(A.node())}A.attr("transform",a(-3,8-k.height)),S.insert("rect",".static-attribution").attr({x:-k.width-6,y:-k.height-3,width:k.width+6,height:k.height+3,fill:"rgba(255, 255, 255, 0.75)"});var R=1;k.width+6>C&&(R=C/(k.width+6));var O=[w.l+w.w*x.x[1],w.t+w.h*(1-x.y[0])];S.attr("transform",a(O[0],O[1])+_(R))}},L.updateFx=function(u){for(var d=u._fullLayout,c=d._subplots[r],w=0;w<c.length;w++)d[c[w]]._subplot.updateFx(d)}},67911:function(F,L,e){var T=e(71828),b=e(63893).sanitizeHTML,a=e(13056),_=e(77734);function g(i,n){this.subplot=i,this.uid=i.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=_.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var h=g.prototype;function o(i){if(!i.visible)return!1;var n=i.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return T.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(i){var n={},r={};switch(i.type){case"circle":T.extendFlat(r,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":T.extendFlat(r,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":T.extendFlat(r,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,l=a(s.textposition,s.iconsize);T.extendFlat(n,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":s.placement}),T.extendFlat(r,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":T.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:n,paint:r}}h.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=o(i)},h.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},h.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},h.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},h.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},h.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},h.updateSource=function(i){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,o(i)){var r=function(s){var l,u=s.sourcetype,d=s.source,c={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof d=="string"?"url":"tiles":u==="raster"?(l="tiles",c.tileSize=256):u==="image"&&(l="url",c.coordinates=s.coordinates),c[l]=d,s.sourceattribution&&(c.attribution=b(s.sourceattribution)),c}(i);n.addSource(this.idSource,r)}},h.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var s=n[r].id;if(typeof s=="string"&&s.indexOf(_.traceLayerPrefix)===0){i=s;break}}return i},h.updateLayer=function(i){var n=this.subplot,r=t(i),s=this.lookupBelow(),l=this.findFollowingMapboxLayerId(s);this.removeLayer(),o(i)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:r.layout,paint:r.paint},l),this.layerType=i.type,this.below=s},h.updateStyle=function(i){if(o(i)){var n=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},h.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},h.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},F.exports=function(i,n,r){var s=new g(i,n);return s.update(r),s}},23585:function(F,L,e){var T=e(71828),b=e(7901).defaultLine,a=e(27670).Y,_=e(41940),g=e(82196).textposition,h=e(30962).overrideAll,o=e(44467).templatedArray,t=e(77734),i=_({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(F.exports=h({_arrayAttrRegexps:[T.counterRegex("mapbox",".layers",!0)],domain:a({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:o("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:b},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:b}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:T.extendFlat({},g,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(F,L,e){var T=e(71828),b=e(49119),a=e(85501),_=e(23585);function g(o,t,i,n){i("accesstoken",n.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var r=i("bounds.west"),s=i("bounds.east"),l=i("bounds.south"),u=i("bounds.north");r!==void 0&&s!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,a(o,t,{name:"layers",handleItemDefaults:h}),t._input=o}function h(o,t){function i(u,d){return T.coerce(o,t,_.layers,u,d)}if(i("visible")){var n,r=i("sourcetype"),s=r==="raster"||r==="image";i("source"),i("sourceattribution"),r==="vector"&&i("sourcelayer"),r==="image"&&i("coordinates"),s&&(n="raster");var l=i("type",n);s&&l!=="raster"&&(l=t.type="raster",T.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),T.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}F.exports=function(o,t,i){b(o,t,i,{type:"mapbox",attributes:_,handleDefaults:g,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(F,L,e){var T=e(44517),b=e(71828),a=e(41327),_=e(73972),g=e(89298),h=e(28569),o=e(30211),t=e(64505),i=t.drawMode,n=t.selectMode,r=e(47322).prepSelect,s=e(47322).clearOutline,l=e(47322).clearSelectionsCache,u=e(47322).selectOnClick,d=e(77734),c=e(67911);function w(M,p){this.id=p,this.gd=M;var S=M._fullLayout,A=M._context;this.container=S._glcontainer.node(),this.isStatic=A.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var m=w.prototype;m.plot=function(M,p,S){var A,k=this,C=p[k.id];k.map&&C.accesstoken!==k.accessToken&&(k.map.remove(),k.map=null,k.styleObj=null,k.traceHash={},k.layerList=[]),A=k.map?new Promise(function(P,R){k.updateMap(M,p,P,R)}):new Promise(function(P,R){k.createMap(M,p,P,R)}),S.push(A)},m.createMap=function(M,p,S,A){var k=this,C=p[k.id],P=k.styleObj=x(C.style);k.accessToken=C.accesstoken;var R=C.bounds,O=R?[[R.west,R.south],[R.east,R.north]]:null,X=k.map=new T.Map({container:k.div,style:P.style,center:v(C.center),zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,maxBounds:O,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new T.AttributionControl({compact:!0}));X._canvas.style.left="0px",X._canvas.style.top="0px",k.rejectOnError(A),k.isStatic||k.initFx(M,p);var D=[];D.push(new Promise(function(V){X.once("load",V)})),D=D.concat(a.fetchTraceGeoData(M)),Promise.all(D).then(function(){k.fillBelowLookup(M,p),k.updateData(M),k.updateLayout(p),k.resolveOnRender(S)}).catch(A)},m.updateMap=function(M,p,S,A){var k=this,C=k.map,P=p[this.id];k.rejectOnError(A);var R=[],O=x(P.style);JSON.stringify(k.styleObj)!==JSON.stringify(O)&&(k.styleObj=O,C.setStyle(O.style),k.traceHash={},R.push(new Promise(function(X){C.once("styledata",X)}))),R=R.concat(a.fetchTraceGeoData(M)),Promise.all(R).then(function(){k.fillBelowLookup(M,p),k.updateData(M),k.updateLayout(p),k.resolveOnRender(S)}).catch(A)},m.fillBelowLookup=function(M,p){var S,A,k=p[this.id].layers,C=this.belowLookup={},P=!1;for(S=0;S<M.length;S++){var R=M[S][0].trace,O=R._module;typeof R.below=="string"?A=R.below:O.getBelow&&(A=O.getBelow(R,this)),A===""&&(P=!0),C["trace-"+R.uid]=A||""}for(S=0;S<k.length;S++){var X=k[S];A=typeof X.below=="string"?X.below:P?"traces":"",C["layout-"+S]=A}var D,V,j={};for(D in C)j[A=C[D]]?j[A].push(D):j[A]=[D];for(A in j){var B=j[A];if(B.length>1)for(S=0;S<B.length;S++)(D=B[S]).indexOf("trace-")===0?(V=D.split("trace-")[1],this.traceHash[V]&&(this.traceHash[V].below=null)):D.indexOf("layout-")===0&&(V=D.split("layout-")[1],this.layerList[V]&&(this.layerList[V].below=null))}};var f={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function x(M){var p={};return b.isPlainObject(M)?(p.id=M.id,p.style=M):typeof M=="string"?(p.id=M,d.styleValuesMapbox.indexOf(M)!==-1?p.style=y(M):d.stylesNonMapbox[M]?p.style=d.stylesNonMapbox[M]:p.style=M):(p.id=d.styleValueDflt,p.style=y(d.styleValueDflt)),p.transition={duration:0,delay:0},p}function y(M){return d.styleUrlPrefix+M+"-"+d.styleUrlSuffix}function v(M){return[M.lon,M.lat]}m.updateData=function(M){var p,S,A,k,C=this.traceHash,P=M.slice().sort(function(V,j){return f[V[0].trace.type]-f[j[0].trace.type]});for(A=0;A<P.length;A++){var R=P[A],O=!1;(p=C[(S=R[0].trace).uid])&&(p.type===S.type?(p.update(R),O=!0):p.dispose()),!O&&S._module&&(C[S.uid]=S._module.plot(this,R))}var X=Object.keys(C);e:for(A=0;A<X.length;A++){var D=X[A];for(k=0;k<M.length;k++)if(D===(S=M[k][0].trace).uid)continue e;(p=C[D]).dispose(),delete C[D]}},m.updateLayout=function(M){var p=this.map,S=M[this.id];this.dragging||this.wheeling||(p.setCenter(v(S.center)),p.setZoom(S.zoom),p.setBearing(S.bearing),p.setPitch(S.pitch)),this.updateLayers(M),this.updateFramework(M),this.updateFx(M),this.map.resize(),this.gd._context._scrollZoom.mapbox?p.scrollZoom.enable():p.scrollZoom.disable()},m.resolveOnRender=function(M){var p=this.map;p.on("render",function S(){p.loaded()&&(p.off("render",S),setTimeout(M,10))})},m.rejectOnError=function(M){var p=this.map;function S(){M(new Error(d.mapOnErrorMsg))}p.once("error",S),p.once("style.error",S),p.once("source.error",S),p.once("tile.error",S),p.once("layer.error",S)},m.createFramework=function(M){var p=this,S=p.div=document.createElement("div");S.id=p.uid,S.style.position="absolute",p.container.appendChild(S),p.xaxis={_id:"x",c2p:function(A){return p.project(A).x}},p.yaxis={_id:"y",c2p:function(A){return p.project(A).y}},p.updateFramework(M),p.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},g.setConvert(p.mockAxis,M)},m.initFx=function(M,p){var S=this,A=S.gd,k=S.map;function C(){o.loneUnhover(p._hoverlayer)}function P(){var R=S.getView();A.emit("plotly_relayouting",S.getViewEditsWithDerived(R))}k.on("moveend",function(R){if(S.map){var O=A._fullLayout;if(R.originalEvent||S.wheeling){var X=O[S.id];_.call("_storeDirectGUIEdit",A.layout,O._preGUI,S.getViewEdits(X));var D=S.getView();X._input.center=X.center=D.center,X._input.zoom=X.zoom=D.zoom,X._input.bearing=X.bearing=D.bearing,X._input.pitch=X.pitch=D.pitch,A.emit("plotly_relayout",S.getViewEditsWithDerived(D))}R.originalEvent&&R.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),O._rehover&&O._rehover()}}),k.on("wheel",function(){S.wheeling=!0}),k.on("mousemove",function(R){var O=S.div.getBoundingClientRect(),X=[R.originalEvent.offsetX,R.originalEvent.offsetY];R.target.getBoundingClientRect=function(){return O},S.xaxis.p2c=function(){return k.unproject(X).lng},S.yaxis.p2c=function(){return k.unproject(X).lat},A._fullLayout._rehover=function(){A._fullLayout._hoversubplot===S.id&&A._fullLayout[S.id]&&o.hover(A,R,S.id)},o.hover(A,R,S.id),A._fullLayout._hoversubplot=S.id}),k.on("dragstart",function(){S.dragging=!0,C()}),k.on("zoomstart",C),k.on("mouseout",function(){A._fullLayout._hoversubplot=null}),k.on("drag",P),k.on("zoom",P),k.on("dblclick",function(){var R=A._fullLayout[S.id];_.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,S.getViewEdits(R));var O=S.viewInitial;k.setCenter(v(O.center)),k.setZoom(O.zoom),k.setBearing(O.bearing),k.setPitch(O.pitch);var X=S.getView();R._input.center=R.center=X.center,R._input.zoom=R.zoom=X.zoom,R._input.bearing=R.bearing=X.bearing,R._input.pitch=R.pitch=X.pitch,A.emit("plotly_doubleclick",null),A.emit("plotly_relayout",S.getViewEditsWithDerived(X))}),S.clearOutline=function(){l(S.dragOptions),s(S.dragOptions.gd)},S.onClickInPanFn=function(R){return function(O){var X=A._fullLayout.clickmode;X.indexOf("select")>-1&&u(O.originalEvent,A,[S.xaxis],[S.yaxis],S.id,R),X.indexOf("event")>-1&&o.click(A,O.originalEvent)}}},m.updateFx=function(M){var p=this,S=p.map,A=p.gd;if(!p.isStatic){var k,C=M.dragmode;k=function(O,X){X.isRect?(O.range={})[p.id]=[R([X.xmin,X.ymin]),R([X.xmax,X.ymax])]:(O.lassoPoints={})[p.id]=X.map(R)};var P=p.dragOptions;p.dragOptions=b.extendDeep(P||{},{dragmode:M.dragmode,element:p.div,gd:A,plotinfo:{id:p.id,domain:M[p.id].domain,xaxis:p.xaxis,yaxis:p.yaxis,fillRangeItems:k},xaxes:[p.xaxis],yaxes:[p.yaxis],subplot:p.id}),S.off("click",p.onClickInPanHandler),n(C)||i(C)?(S.dragPan.disable(),S.on("zoomstart",p.clearOutline),p.dragOptions.prepFn=function(O,X,D){r(O,X,D,p.dragOptions,C)},h.init(p.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",p.clearOutline),p.div.onmousedown=null,p.div.ontouchstart=null,p.div.removeEventListener("touchstart",p.div._ontouchstart),p.onClickInPanHandler=p.onClickInPanFn(p.dragOptions),S.on("click",p.onClickInPanHandler))}function R(O){var X=p.map.unproject(O);return[X.lng,X.lat]}},m.updateFramework=function(M){var p=M[this.id].domain,S=M._size,A=this.div.style;A.width=S.w*(p.x[1]-p.x[0])+"px",A.height=S.h*(p.y[1]-p.y[0])+"px",A.left=S.l+p.x[0]*S.w+"px",A.top=S.t+(1-p.y[1])*S.h+"px",this.xaxis._offset=S.l+p.x[0]*S.w,this.xaxis._length=S.w*(p.x[1]-p.x[0]),this.yaxis._offset=S.t+(1-p.y[1])*S.h,this.yaxis._length=S.h*(p.y[1]-p.y[0])},m.updateLayers=function(M){var p,S=M[this.id].layers,A=this.layerList;if(S.length!==A.length){for(p=0;p<A.length;p++)A[p].dispose();for(A=this.layerList=[],p=0;p<S.length;p++)A.push(c(this,p,S[p]))}else for(p=0;p<S.length;p++)A[p].update(S[p])},m.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},m.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},m.setOptions=function(M,p,S){for(var A in S)this.map[p](M,A,S[A])},m.getMapLayers=function(){return this.map.getStyle().layers},m.addLayer=function(M,p){var S=this.map;if(typeof p=="string"){if(p==="")return void S.addLayer(M,p);for(var A=this.getMapLayers(),k=0;k<A.length;k++)if(p===A[k].id)return void S.addLayer(M,p);b.warn(["Trying to add layer with *below* value",p,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(M)},m.project=function(M){return this.map.project(new T.LngLat(M[0],M[1]))},m.getView=function(){var M=this.map,p=M.getCenter(),S={lon:p.lng,lat:p.lat},A=M.getCanvas(),k=parseInt(A.style.width),C=parseInt(A.style.height);return{center:S,zoom:M.getZoom(),bearing:M.getBearing(),pitch:M.getPitch(),_derived:{coordinates:[M.unproject([0,0]).toArray(),M.unproject([k,0]).toArray(),M.unproject([k,C]).toArray(),M.unproject([0,C]).toArray()]}}},m.getViewEdits=function(M){for(var p=this.id,S=["center","zoom","bearing","pitch"],A={},k=0;k<S.length;k++){var C=S[k];A[p+"."+C]=M[C]}return A},m.getViewEditsWithDerived=function(M){var p=this.id,S=this.getViewEdits(M);return S[p+"._derived"]=M._derived,S},F.exports=w},35025:function(F){F.exports=function(L){var e=L.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function(F,L,e){var T=e(39898),b=e(84096).Dq,a=e(60721).FF,_=e(92770),g=e(73972),h=e(86281),o=e(44467),t=e(71828),i=e(7901),n=e(50606).BADNUM,r=e(41675),s=e(51873).clearOutline,l=e(21479),u=e(85594),d=e(31391),c=e(27659).a0,w=t.relinkPrivateKeys,m=t._,f=F.exports={};t.extendFlat(f,g),f.attributes=e(9012),f.attributes.type.values=f.allTypes,f.fontAttrs=e(41940),f.layoutAttributes=e(10820),f.fontWeight="normal";var x=f.transformsRegistry,y=e(31137);f.executeAPICommand=y.executeAPICommand,f.computeAPICommandBindings=y.computeAPICommandBindings,f.manageCommandObserver=y.manageCommandObserver,f.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,f.redrawText=function(j){return j=t.getGraphDiv(j),new Promise(function(B){setTimeout(function(){j._fullLayout&&(g.getComponentMethod("annotations","draw")(j),g.getComponentMethod("legend","draw")(j),g.getComponentMethod("colorbar","draw")(j),B(f.previousPromises(j)))},300)})},f.resize=function(j){var B;j=t.getGraphDiv(j);var W=new Promise(function(q,re){j&&!t.isHidden(j)||re(new Error("Resize must be passed a displayed plot div element.")),j._redrawTimer&&clearTimeout(j._redrawTimer),j._resolveResize&&(B=j._resolveResize),j._resolveResize=q,j._redrawTimer=setTimeout(function(){if(!j.layout||j.layout.width&&j.layout.height||t.isHidden(j))q(j);else{delete j.layout.width,delete j.layout.height;var ee=j.changed;j.autoplay=!0,g.call("relayout",j,{autosize:!0}).then(function(){j.changed=ee,j._resolveResize===q&&(delete j._resolveResize,q(j))})}},100)});return B&&B(W),W},f.previousPromises=function(j){if((j._promises||[]).length)return Promise.all(j._promises).then(function(){j._promises=[]})},f.addLinks=function(j){if(j._context.showLink||j._context.showSources){var B=j._fullLayout,W=t.ensureSingle(B._paper,"text","js-plot-link-container",function($){$.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var ne=T.select(this);ne.append("tspan").classed("js-link-to-tool",!0),ne.append("tspan").classed("js-link-spacer",!0),ne.append("tspan").classed("js-sourcelinks",!0)})}),q=W.node(),re={y:B._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=B.width-20?(re["text-anchor"]="start",re.x=5):(re["text-anchor"]="end",re.x=B._paper.attr("width")-7),W.attr(re);var ee=W.select(".js-link-to-tool"),K=W.select(".js-link-spacer"),Y=W.select(".js-sourcelinks");j._context.showSources&&j._context.showSources(j),j._context.showLink&&function($,ne){ne.text("");var ae=ne.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text($._context.linkText+" "+String.fromCharCode(187));if($._context.sendData)ae.on("click",function(){f.sendDataToCloud($)});else{var se=window.location.pathname.split("/"),ce=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+se[2].split(".")[0]+"/"+se[1]+ce})}}(j,ee),K.text(ee.text()&&Y.text()?" - ":"")}},f.sendDataToCloud=function(j){var B=(window.PLOTLYENV||{}).BASE_URL||j._context.plotlyServerURL;if(B){j.emit("plotly_beforeexport");var W=T.select(j).append("div").attr("id","hiddenform").style("display","none"),q=W.append("form").attr({action:B+"/external",method:"post",target:"_blank"});return q.append("input").attr({type:"text",name:"data"}).node().value=f.graphJson(j,!1,"keepdata"),q.node().submit(),W.remove(),j.emit("plotly_afterexport"),!1}};var v=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function p(j,B){var W=j._context.locale;W||(W="en-US");var q=!1,re={};function ee(se){for(var ce=!0,me=0;me<B.length;me++){var ye=B[me];re[ye]||(se[ye]?re[ye]=se[ye]:ce=!1)}ce&&(q=!0)}for(var K=0;K<2;K++){for(var Y=j._context.locales,$=0;$<2;$++){var ne=(Y[W]||{}).format;if(ne&&(ee(ne),q))break;Y=g.localeRegistry}var ae=W.split("-")[0];if(q||ae===W)break;W=ae}return q||ee(g.localeRegistry.en.format),re}function S(j,B){var W={_fullLayout:B},q=j._id.charAt(0)==="x",re=j._mainAxis._anchorAxis,ee="",K="",Y="";if(re&&(Y=re._mainAxis._id,ee=q?j._id+Y:Y+j._id),!ee||!B._plots[ee]){ee="";for(var $=j._counterAxes,ne=0;ne<$.length;ne++){var ae=$[ne],se=q?j._id+ae:ae+j._id;K||(K=se);var ce=r.getFromId(W,ae);if(Y&&ce.overlaying===Y){ee=se;break}}}return ee||K}function A(j){var B=j.transforms;if(Array.isArray(B)&&B.length)for(var W=0;W<B.length;W++){var q=B[W],re=q._module||x[q.type];if(re&&re.makesData)return!0}return!1}function k(j,B,W,q){for(var re=j.transforms,ee=[j],K=0;K<re.length;K++){var Y=re[K],$=x[Y.type];$&&$.transform&&(ee=$.transform(ee,{transform:Y,fullTrace:j,fullData:B,layout:W,fullLayout:q,transformIndex:K}))}return ee}function C(j){return typeof j=="string"&&j.substr(j.length-2)==="px"&&parseFloat(j)}function P(j){var B=j.margin;if(!j._size){var W=j._size={l:Math.round(B.l),r:Math.round(B.r),t:Math.round(B.t),b:Math.round(B.b),p:Math.round(B.pad)};W.w=Math.round(j.width)-W.l-W.r,W.h=Math.round(j.height)-W.t-W.b}j._pushmargin||(j._pushmargin={}),j._pushmarginIds||(j._pushmarginIds={}),j._reservedMargin||(j._reservedMargin={})}f.supplyDefaults=function(j,B){var W=B&&B.skipUpdateCalc,q=j._fullLayout||{};if(q._skipDefaults)delete q._skipDefaults;else{var re,ee=j._fullLayout={},K=j.layout||{},Y=j._fullData||[],$=j._fullData=[],ne=j.data||[],ae=j.calcdata||[],se=j._context||{};j._transitionData||f.createTransitionData(j),ee._dfltTitle={plot:m(j,"Click to enter Plot title"),x:m(j,"Click to enter X axis title"),y:m(j,"Click to enter Y axis title"),colorbar:m(j,"Click to enter Colorscale title"),annotation:m(j,"new text")},ee._traceWord=m(j,"trace");var ce=p(j,v);if(ee._mapboxAccessToken=se.mapboxAccessToken,q._initialAutoSizeIsDone){var me=q.width,ye=q.height;f.supplyLayoutGlobalDefaults(K,ee,ce),K.width||(ee.width=me),K.height||(ee.height=ye),f.sanitizeMargins(ee)}else{f.supplyLayoutGlobalDefaults(K,ee,ce);var Te=!K.width||!K.height,Ce=ee.autosize,pe=se.autosizable;Te&&(Ce||pe)?f.plotAutoSize(j,K,ee):Te&&f.sanitizeMargins(ee),!Ce&&Te&&(K.width=ee.width,K.height=ee.height)}ee._d3locale=function(je,Fe){return je.decimal=Fe.charAt(0),je.thousands=Fe.charAt(1),{numberFormat:function(Xe){try{Xe=a(je).format(t.adjustFormat(Xe))}catch{return t.warnBadFormat(Xe),t.noFormat}return Xe},timeFormat:b(je).utcFormat}}(ce,ee.separators),ee._extraFormat=p(j,M),ee._initialAutoSizeIsDone=!0,ee._dataLength=ne.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var fe=ee._subplots=function(){var je,Fe,Xe=g.collectableSubplotTypes,Ze={};if(!Xe){Xe=[];var at=g.subplotsRegistry;for(var lt in at){var ot=at[lt].attr;if(ot&&(Xe.push(lt),Array.isArray(ot)))for(Fe=0;Fe<ot.length;Fe++)t.pushUnique(Xe,ot[Fe])}}for(je=0;je<Xe.length;je++)Ze[Xe[je]]=[];return Ze}(),Oe=ee._splomAxes={x:{},y:{}},Se=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=function(je,Fe){var Xe,Ze,at=Fe.length,lt=[];for(Xe=0;Xe<je.length;Xe++){var ot=je[Xe]._fullInput;ot!==Ze&&lt.push(ot),Ze=ot}var bt=lt.length,wt=new Array(at),ht={};function ct(kt,Ot){wt[Ot]=kt,ht[kt]=1}function Tt(kt,Ot){if(kt&&typeof kt=="string"&&!ht[kt])return ct(kt,Ot),!0}for(Xe=0;Xe<at;Xe++){var Lt=Fe[Xe].uid;typeof Lt=="number"&&(Lt=String(Lt)),Tt(Lt,Xe)||Xe<bt&&Tt(lt[Xe].uid,Xe)||ct(t.randstr(ht),Xe)}return wt}(Y,ne),ee._globalTransforms=(j._context||{}).globalTransforms,f.supplyDataDefaults(ne,$,K,ee);var Me=Object.keys(Oe.x),ue=Object.keys(Oe.y);if(Me.length>1&&ue.length>1){for(g.getComponentMethod("grid","sizeDefaults")(K,ee),re=0;re<Me.length;re++)t.pushUnique(fe.xaxis,Me[re]);for(re=0;re<ue.length;re++)t.pushUnique(fe.yaxis,ue[re]);for(var le in Se)t.pushUnique(fe.cartesian,le)}if(ee._has=f._hasPlotType.bind(ee),Y.length===$.length)for(re=0;re<$.length;re++)w($[re],Y[re]);f.supplyLayoutModuleDefaults(K,ee,$,j._transitionData);var ie=ee._visibleModules,ge=[];for(re=0;re<ie.length;re++){var Ae=ie[re].crossTraceDefaults;Ae&&t.pushUnique(ge,Ae)}for(re=0;re<ge.length;re++)ge[re]($,ee);ee._hasOnlyLargeSploms=ee._basePlotModules.length===1&&ee._basePlotModules[0].name==="splom"&&Me.length>15&&ue.length>15&&ee.shapes.length===0&&ee.images.length===0,f.linkSubplots($,ee,Y,q),f.cleanPlot($,ee,Y,q);var we=!(!q._has||!q._has("gl2d")),Ne=!(!ee._has||!ee._has("gl2d")),He=!(!q._has||!q._has("cartesian"))||we,de=!(!ee._has||!ee._has("cartesian"))||Ne;He&&!de?q._bgLayer.remove():de&&!He&&(ee._shouldCreateBgLayer=!0),q._zoomlayer&&!j._dragging&&s({_fullLayout:q}),function(je,Fe){var Xe,Ze=[];Fe.meta&&(Xe=Fe._meta={meta:Fe.meta,layout:{meta:Fe.meta}});for(var at=0;at<je.length;at++){var lt=je[at];lt.meta?Ze[lt.index]=lt._meta={meta:lt.meta}:Fe.meta&&(lt._meta={meta:Fe.meta}),Fe.meta&&(lt._meta.layout={meta:Fe.meta})}Ze.length&&(Xe||(Xe=Fe._meta={}),Xe.data=Ze)}($,ee),w(ee,q),g.getComponentMethod("colorscale","crossTraceDefaults")($,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Le,Ee=ee._tracePreGUI,Re={};for(Le in Ee)Re[Le]="old";for(re=0;re<$.length;re++)Re[Le=$[re]._fullInput.uid]||(Ee[Le]={}),Re[Le]="new";for(Le in Re)Re[Le]==="old"&&delete Ee[Le];P(ee),g.getComponentMethod("rangeslider","makeData")(ee),W||ae.length!==$.length||f.supplyDefaultsUpdateCalc(ae,$)}},f.supplyDefaultsUpdateCalc=function(j,B){for(var W=0;W<B.length;W++){var q=B[W],re=(j[W]||[])[0];if(re&&re.trace){var ee=re.trace;if(ee._hasCalcTransform){var K,Y,$,ne=ee._arrayAttrs;for(K=0;K<ne.length;K++)Y=ne[K],$=t.nestedProperty(ee,Y).get().slice(),t.nestedProperty(q,Y).set($)}re.trace=q}}},f.createTransitionData=function(j){j._transitionData||(j._transitionData={}),j._transitionData._frames||(j._transitionData._frames=[]),j._transitionData._frameHash||(j._transitionData._frameHash={}),j._transitionData._counter||(j._transitionData._counter=0),j._transitionData._interruptCallbacks||(j._transitionData._interruptCallbacks=[])},f._hasPlotType=function(j){var B,W=this._basePlotModules||[];for(B=0;B<W.length;B++)if(W[B].name===j)return!0;var q=this._modules||[];for(B=0;B<q.length;B++){var re=q[B].name;if(re===j)return!0;var ee=g.modules[re];if(ee&&ee.categories[j])return!0}return!1},f.cleanPlot=function(j,B,W,q){var re,ee,K=q._basePlotModules||[];for(re=0;re<K.length;re++){var Y=K[re];Y.clean&&Y.clean(j,B,W,q)}var $=q._has&&q._has("gl"),ne=B._has&&B._has("gl");$&&!ne&&q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var ae=!!q._infolayer;e:for(re=0;re<W.length;re++){var se=W[re].uid;for(ee=0;ee<j.length;ee++)if(se===j[ee].uid)continue e;ae&&q._infolayer.select(".cb"+se).remove()}},f.linkSubplots=function(j,B,W,q){var re,ee,K=q._plots||{},Y=B._plots={},$=B._subplots,ne={_fullData:j,_fullLayout:B},ae=$.cartesian.concat($.gl2d||[]);for(re=0;re<ae.length;re++){var se,ce=ae[re],me=K[ce],ye=r.getFromId(ne,ce,"x"),Te=r.getFromId(ne,ce,"y");for(me?se=Y[ce]=me:(se=Y[ce]={}).id=ce,ye._counterAxes.push(Te._id),Te._counterAxes.push(ye._id),ye._subplotsWith.push(ce),Te._subplotsWith.push(ce),se.xaxis=ye,se.yaxis=Te,se._hasClipOnAxisFalse=!1,ee=0;ee<j.length;ee++){var Ce=j[ee];if(Ce.xaxis===se.xaxis._id&&Ce.yaxis===se.yaxis._id&&Ce.cliponaxis===!1){se._hasClipOnAxisFalse=!0;break}}}var pe,fe=r.list(ne,null,!0);for(re=0;re<fe.length;re++){var Oe=null;(pe=fe[re]).overlaying&&(Oe=r.getFromId(ne,pe.overlaying))&&Oe.overlaying&&(pe.overlaying=!1,Oe=null),pe._mainAxis=Oe||pe,Oe&&(pe.domain=Oe.domain.slice()),pe._anchorAxis=pe.anchor==="free"?null:r.getFromId(ne,pe.anchor)}for(re=0;re<fe.length;re++)if((pe=fe[re])._counterAxes.sort(r.idSort),pe._subplotsWith.sort(t.subplotSort),pe._mainSubplot=S(pe,B),pe._counterAxes.length&&(pe.spikemode&&pe.spikemode.indexOf("across")!==-1||pe.automargin&&pe.mirror&&pe.anchor!=="free"||g.getComponentMethod("rangeslider","isVisible")(pe))){var Se=1,Me=0;for(ee=0;ee<pe._counterAxes.length;ee++){var ue=r.getFromId(ne,pe._counterAxes[ee]);Se=Math.min(Se,ue.domain[0]),Me=Math.max(Me,ue.domain[1])}Se<Me&&(pe._counterDomainMin=Se,pe._counterDomainMax=Me)}},f.clearExpandedTraceDefaultColors=function(j){var B,W,q;for(W=[],(B=j._module._colorAttrs)||(j._module._colorAttrs=B=[],h.crawl(j._module.attributes,function(re,ee,K,Y){W[Y]=ee,W.length=Y+1,re.valType==="color"&&re.dflt===void 0&&B.push(W.join("."))})),q=0;q<B.length;q++)t.nestedProperty(j,"_input."+B[q]).get()||t.nestedProperty(j,B[q]).set(null)},f.supplyDataDefaults=function(j,B,W,q){var re,ee,K,Y=q._modules,$=q._visibleModules,ne=q._basePlotModules,ae=0,se=0;function ce(le){B.push(le);var ie=le._module;ie&&(t.pushUnique(Y,ie),le.visible===!0&&t.pushUnique($,ie),t.pushUnique(ne,le._module.basePlotModule),ae++,le._input.visible!==!1&&se++)}q._transformModules=[];var me={},ye=[],Te=(W.template||{}).data||{},Ce=o.traceTemplater(Te);for(re=0;re<j.length;re++){if(K=j[re],(ee=Ce.newTrace(K)).uid=q._traceUids[re],f.supplyTraceDefaults(K,ee,se,q,re),ee.index=re,ee._input=K,ee._expandedIndex=ae,ee.transforms&&ee.transforms.length)for(var pe=K.visible!==!1&&ee.visible===!1,fe=k(ee,B,W,q),Oe=0;Oe<fe.length;Oe++){var Se=fe[Oe],Me={_template:ee._template,type:ee.type,uid:ee.uid+Oe};pe&&Se.visible===!1&&delete Se.visible,f.supplyTraceDefaults(Se,Me,ae,q,re),w(Me,Se),Me.index=re,Me._input=K,Me._fullInput=ee,Me._expandedIndex=ae,Me._expandedInput=Se,ce(Me)}else ee._fullInput=ee,ee._expandedInput=ee,ce(ee);g.traceIs(ee,"carpetAxis")&&(me[ee.carpet]=ee),g.traceIs(ee,"carpetDependent")&&ye.push(re)}for(re=0;re<ye.length;re++)if((ee=B[ye[re]]).visible){var ue=me[ee.carpet];ee._carpet=ue,ue&&ue.visible?(ee.xaxis=ue.xaxis,ee.yaxis=ue.yaxis):ee.visible=!1}},f.supplyAnimationDefaults=function(j){var B;j=j||{};var W={};function q(re,ee){return t.coerce(j||{},W,u,re,ee)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(j.frame))for(W.frame=[],B=0;B<j.frame.length;B++)W.frame[B]=f.supplyAnimationFrameDefaults(j.frame[B]||{});else W.frame=f.supplyAnimationFrameDefaults(j.frame||{});if(Array.isArray(j.transition))for(W.transition=[],B=0;B<j.transition.length;B++)W.transition[B]=f.supplyAnimationTransitionDefaults(j.transition[B]||{});else W.transition=f.supplyAnimationTransitionDefaults(j.transition||{});return W},f.supplyAnimationFrameDefaults=function(j){var B={};function W(q,re){return t.coerce(j||{},B,u.frame,q,re)}return W("duration"),W("redraw"),B},f.supplyAnimationTransitionDefaults=function(j){var B={};function W(q,re){return t.coerce(j||{},B,u.transition,q,re)}return W("duration"),W("easing"),B},f.supplyFrameDefaults=function(j){var B={};function W(q,re){return t.coerce(j,B,d,q,re)}return W("group"),W("name"),W("traces"),W("baseframe"),W("data"),W("layout"),B},f.supplyTraceDefaults=function(j,B,W,q,re){var ee,K=q.colorway||i.defaults,Y=K[W%K.length];function $(fe,Oe){return t.coerce(j,B,f.attributes,fe,Oe)}var ne=$("visible");$("type"),$("name",q._traceWord+" "+re),$("uirevision",q.uirevision);var ae=f.getModule(B);if(B._module=ae,ae){var se=ae.basePlotModule,ce=se.attr,me=se.attributes;if(ce&&me){var ye=q._subplots,Te="";if(ne||se.name!=="gl2d"){if(Array.isArray(ce))for(ee=0;ee<ce.length;ee++){var Ce=ce[ee],pe=t.coerce(j,B,me,Ce);ye[Ce]&&t.pushUnique(ye[Ce],pe),Te+=pe}else Te=t.coerce(j,B,me,ce);ye[se.name]&&t.pushUnique(ye[se.name],Te)}}}return ne&&($("customdata"),$("ids"),$("meta"),g.traceIs(B,"showLegend")?(t.coerce(j,B,ae.attributes.showlegend?ae.attributes:f.attributes,"showlegend"),$("legend"),$("legendwidth"),$("legendgroup"),$("legendgrouptitle.text"),$("legendrank"),B._dfltShowLegend=!0):B._dfltShowLegend=!1,ae&&ae.supplyDefaults(j,B,Y,q),g.traceIs(B,"noOpacity")||$("opacity"),g.traceIs(B,"notLegendIsolatable")&&(B.visible=!!B.visible),g.traceIs(B,"noHover")||(B.hovertemplate||t.coerceHoverinfo(j,B,q),B.type!=="parcats"&&g.getComponentMethod("fx","supplyDefaults")(j,B,Y,q)),ae&&ae.selectPoints&&$("selectedpoints"),f.supplyTransformDefaults(j,B,q)),B},f.hasMakesDataTransform=A,f.supplyTransformDefaults=function(j,B,W){if(B._length||A(j)){var q=W._globalTransforms||[],re=W._transformModules||[];if(Array.isArray(j.transforms)||q.length!==0)for(var ee=j.transforms||[],K=q.concat(ee),Y=B.transforms=[],$=0;$<K.length;$++){var ne,ae=K[$],se=ae.type,ce=x[se],me=!(ae._module&&ae._module===ce),ye=ce&&typeof ce.transform=="function";ce||t.warn("Unrecognized transform type "+se+"."),ce&&ce.supplyDefaults&&(me||ye)?((ne=ce.supplyDefaults(ae,B,W,j)).type=se,ne._module=ce,t.pushUnique(re,ce)):ne=t.extendFlat({},ae),Y.push(ne)}}},f.supplyLayoutGlobalDefaults=function(j,B,W){function q(ae,se){return t.coerce(j,B,f.layoutAttributes,ae,se)}var re=j.template;t.isPlainObject(re)&&(B.template=re,B._template=re.layout,B._dataTemplate=re.data),q("autotypenumbers");var ee=t.coerceFont(q,"font"),K=ee.size;t.coerceFont(q,"title.font",t.extendFlat({},ee,{size:Math.round(1.4*K)})),q("title.text",B._dfltTitle.plot),q("title.xref");var Y=q("title.yref");q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l");var $=q("title.automargin");q("title.x"),q("title.xanchor"),q("title.y"),q("title.yanchor"),$&&(Y==="paper"&&(B.title.y!==0&&(B.title.y=1),B.title.yanchor==="auto"&&(B.title.yanchor=B.title.y===0?"top":"bottom")),Y==="container"&&(B.title.y==="auto"&&(B.title.y=1),B.title.yanchor==="auto"&&(B.title.yanchor=B.title.y<.5?"bottom":"top"))),q("uniformtext.mode")&&q("uniformtext.minsize"),q("autosize",!(j.width&&j.height)),q("width"),q("height"),q("minreducedwidth"),q("minreducedheight"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),j.width&&j.height&&f.sanitizeMargins(B),g.getComponentMethod("grid","sizeDefaults")(j,B),q("paper_bgcolor"),q("separators",W.decimal+W.thousands),q("hidesources"),q("colorway"),q("datarevision");var ne=q("uirevision");q("editrevision",ne),q("selectionrevision",ne),g.getComponentMethod("modebar","supplyLayoutDefaults")(j,B),g.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(j,B,q),g.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(j,B,q),q("meta"),t.isPlainObject(j.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),g.getComponentMethod("calendars","handleDefaults")(j,B,"calendar"),g.getComponentMethod("fx","supplyLayoutGlobalDefaults")(j,B,q),t.coerce(j,B,l,"scattermode")},f.plotAutoSize=function(j,B,W){var q,re,ee=j._context||{},K=ee.frameMargins,Y=t.isPlotDiv(j);if(Y&&j.emit("plotly_autosize"),ee.fillFrame)q=window.innerWidth,re=window.innerHeight,document.body.style.overflow="hidden";else{var $=Y?window.getComputedStyle(j):{};if(q=C($.width)||C($.maxWidth)||W.width,re=C($.height)||C($.maxHeight)||W.height,_(K)&&K>0){var ne=1-2*K;q=Math.round(ne*q),re=Math.round(ne*re)}}var ae=f.layoutAttributes.width.min,se=f.layoutAttributes.height.min;q<ae&&(q=ae),re<se&&(re=se);var ce=!B.width&&Math.abs(W.width-q)>1,me=!B.height&&Math.abs(W.height-re)>1;(me||ce)&&(ce&&(W.width=q),me&&(W.height=re)),j._initialAutoSize||(j._initialAutoSize={width:q,height:re}),f.sanitizeMargins(W)},f.supplyLayoutModuleDefaults=function(j,B,W,q){var re,ee,K,Y=g.componentsRegistry,$=B._basePlotModules,ne=g.subplotsRegistry.cartesian;for(re in Y)(K=Y[re]).includeBasePlot&&K.includeBasePlot(j,B);for(var ae in $.length||$.push(ne),B._has("cartesian")&&(g.getComponentMethod("grid","contentDefaults")(j,B),ne.finalizeSubplots(j,B)),B._subplots)B._subplots[ae].sort(t.subplotSort);for(ee=0;ee<$.length;ee++)(K=$[ee]).supplyLayoutDefaults&&K.supplyLayoutDefaults(j,B,W);var se=B._modules;for(ee=0;ee<se.length;ee++)(K=se[ee]).supplyLayoutDefaults&&K.supplyLayoutDefaults(j,B,W);var ce=B._transformModules;for(ee=0;ee<ce.length;ee++)(K=ce[ee]).supplyLayoutDefaults&&K.supplyLayoutDefaults(j,B,W,q);for(re in Y)(K=Y[re]).supplyLayoutDefaults&&K.supplyLayoutDefaults(j,B,W)},f.purge=function(j){var B=j._fullLayout||{};B._glcontainer!==void 0&&(B._glcontainer.selectAll(".gl-canvas").remove(),B._glcontainer.remove(),B._glcanvas=null),B._modeBar&&B._modeBar.destroy(),j._transitionData&&(j._transitionData._interruptCallbacks&&(j._transitionData._interruptCallbacks.length=0),j._transitionData._animationRaf&&window.cancelAnimationFrame(j._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(j),delete j.data,delete j.layout,delete j._fullData,delete j._fullLayout,delete j.calcdata,delete j.empty,delete j.fid,delete j.undoqueue,delete j.undonum,delete j.autoplay,delete j.changed,delete j._promises,delete j._redrawTimer,delete j._hmlumcount,delete j._hmpixcount,delete j._transitionData,delete j._transitioning,delete j._initialAutoSize,delete j._transitioningWithDuration,delete j._dragging,delete j._dragged,delete j._dragdata,delete j._hoverdata,delete j._snapshotInProgress,delete j._editing,delete j._mouseDownTime,delete j._legendMouseDownTime,j.removeAllListeners&&j.removeAllListeners()},f.style=function(j){var B,W=j._fullLayout._visibleModules,q=[];for(B=0;B<W.length;B++){var re=W[B];re.style&&t.pushUnique(q,re.style)}for(B=0;B<q.length;B++)q[B](j)},f.sanitizeMargins=function(j){if(j&&j.margin){var B,W=j.width,q=j.height,re=j.margin,ee=W-(re.l+re.r),K=q-(re.t+re.b);ee<0&&(B=(W-1)/(re.l+re.r),re.l=Math.floor(B*re.l),re.r=Math.floor(B*re.r)),K<0&&(B=(q-1)/(re.t+re.b),re.t=Math.floor(B*re.t),re.b=Math.floor(B*re.b))}},f.clearAutoMarginIds=function(j){j._fullLayout._pushmarginIds={}},f.allowAutoMargin=function(j,B){j._fullLayout._pushmarginIds[B]=1},f.autoMargin=function(j,B,W){var q=j._fullLayout,re=q.width,ee=q.height,K=q.margin,Y=q.minreducedwidth,$=q.minreducedheight,ne=t.constrain(re-K.l-K.r,2,Y),ae=t.constrain(ee-K.t-K.b,2,$),se=Math.max(0,re-ne),ce=Math.max(0,ee-ae),me=q._pushmargin,ye=q._pushmarginIds;if(K.autoexpand!==!1){if(W){var Te=W.pad;if(Te===void 0&&(Te=Math.min(12,K.l,K.r,K.t,K.b)),se){var Ce=(W.l+W.r)/se;Ce>1&&(W.l/=Ce,W.r/=Ce)}if(ce){var pe=(W.t+W.b)/ce;pe>1&&(W.t/=pe,W.b/=pe)}var fe=W.xl!==void 0?W.xl:W.x,Oe=W.xr!==void 0?W.xr:W.x,Se=W.yt!==void 0?W.yt:W.y,Me=W.yb!==void 0?W.yb:W.y;me[B]={l:{val:fe,size:W.l+Te},r:{val:Oe,size:W.r+Te},b:{val:Me,size:W.b+Te},t:{val:Se,size:W.t+Te}},ye[B]=1}else delete me[B],delete ye[B];if(!q._replotting)return f.doAutoMargin(j)}},f.doAutoMargin=function(j){var B=j._fullLayout,W=B.width,q=B.height;B._size||(B._size={}),P(B);var re=B._size,ee=B.margin,K={t:0,b:0,l:0,r:0},Y=t.extendFlat({},re),$=ee.l,ne=ee.r,ae=ee.t,se=ee.b,ce=B._pushmargin,me=B._pushmarginIds,ye=B.minreducedwidth,Te=B.minreducedheight;if(ee.autoexpand!==!1){for(var Ce in ce)me[Ce]||delete ce[Ce];var pe=j._fullLayout._reservedMargin;for(var fe in pe)for(var Oe in pe[fe]){var Se=pe[fe][Oe];K[Oe]=Math.max(K[Oe],Se)}for(var Me in ce.base={l:{val:0,size:$},r:{val:1,size:ne},t:{val:1,size:ae},b:{val:0,size:se}},K){var ue=0;for(var le in ce)le!=="base"&&_(ce[le][Me].size)&&(ue=ce[le][Me].size>ue?ce[le][Me].size:ue);var ie=Math.max(0,ee[Me]-ue);K[Me]=Math.max(0,K[Me]-ie)}for(var ge in ce){var Ae=ce[ge].l||{},we=ce[ge].b||{},Ne=Ae.val,He=Ae.size,de=we.val,Le=we.size,Ee=W-K.r-K.l,Re=q-K.t-K.b;for(var je in ce){if(_(He)&&ce[je].r){var Fe=ce[je].r.val,Xe=ce[je].r.size;if(Fe>Ne){var Ze=(He*Fe+(Xe-Ee)*Ne)/(Fe-Ne),at=(Xe*(1-Ne)+(He-Ee)*(1-Fe))/(Fe-Ne);Ze+at>$+ne&&($=Ze,ne=at)}}if(_(Le)&&ce[je].t){var lt=ce[je].t.val,ot=ce[je].t.size;if(lt>de){var bt=(Le*lt+(ot-Re)*de)/(lt-de),wt=(ot*(1-de)+(Le-Re)*(1-lt))/(lt-de);bt+wt>se+ae&&(se=bt,ae=wt)}}}}}var ht=t.constrain(W-ee.l-ee.r,2,ye),ct=t.constrain(q-ee.t-ee.b,2,Te),Tt=Math.max(0,W-ht),Lt=Math.max(0,q-ct);if(Tt){var kt=($+ne)/Tt;kt>1&&($/=kt,ne/=kt)}if(Lt){var Ot=(se+ae)/Lt;Ot>1&&(se/=Ot,ae/=Ot)}if(re.l=Math.round($)+K.l,re.r=Math.round(ne)+K.r,re.t=Math.round(ae)+K.t,re.b=Math.round(se)+K.b,re.p=Math.round(ee.pad),re.w=Math.round(W)-re.l-re.r,re.h=Math.round(q)-re.t-re.b,!B._replotting&&(f.didMarginChange(Y,re)||function(et){if("_redrawFromAutoMarginCount"in et._fullLayout)return!1;var nt=r.list(et,"",!0);for(var Ye in nt)if(nt[Ye].autoshift||nt[Ye].shift)return!0;return!1}(j))){"_redrawFromAutoMarginCount"in B?B._redrawFromAutoMarginCount++:B._redrawFromAutoMarginCount=1;var Pt=3*(1+Object.keys(me).length);if(B._redrawFromAutoMarginCount<Pt)return g.call("_doPlot",j);B._size=Y,t.warn("Too many auto-margin redraws.")}(function(et){var nt=r.list(et,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ye){for(var tt=0;tt<nt.length;tt++){var ut=nt[tt][Ye];ut&&ut()}})})(j)};var R=["l","r","t","b","p","w","h"];function O(j,B,W){var q=!1,re=[f.previousPromises,function(){if(j._transitionData)return j._transitioning=!1,function(K){var Y=Promise.resolve();if(!K)return Y;for(;K.length;)Y=Y.then(K.shift());return Y}(j._transitionData._interruptCallbacks)},W.prepareFn,f.rehover,f.reselect,function(){return j.emit("plotly_transitioning",[]),new Promise(function(K){j._transitioning=!0,B.duration>0&&(j._transitioningWithDuration=!0),j._transitionData._interruptCallbacks.push(function(){q=!0}),W.redraw&&j._transitionData._interruptCallbacks.push(function(){return g.call("redraw",j)}),j._transitionData._interruptCallbacks.push(function(){j.emit("plotly_transitioninterrupted",[])});var Y=0,$=0;function ne(){return Y++,function(){var ae;$++,q||$!==Y||(ae=K,j._transitionData&&(function(se){if(se)for(;se.length;)se.shift()}(j._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(W.redraw)return g.call("redraw",j)}).then(function(){j._transitioning=!1,j._transitioningWithDuration=!1,j.emit("plotly_transitioned",[])}).then(ae)))}}W.runFn(ne),setTimeout(ne())})}],ee=t.syncOrAsync(re,j);return ee&&ee.then||(ee=Promise.resolve()),ee.then(function(){return j})}f.didMarginChange=function(j,B){for(var W=0;W<R.length;W++){var q=R[W],re=j[q],ee=B[q];if(!_(re)||Math.abs(ee-re)>1)return!0}return!1},f.graphJson=function(j,B,W,q,re,ee){(re&&B&&!j._fullData||re&&!B&&!j._fullLayout)&&f.supplyDefaults(j);var K=re?j._fullData:j.data,Y=re?j._fullLayout:j.layout,$=(j._transitionData||{})._frames;function ne(ce,me){if(typeof ce=="function")return me?"_function_":null;if(t.isPlainObject(ce)){var ye,Te={};return Object.keys(ce).sort().forEach(function(Ce){if(["_","["].indexOf(Ce.charAt(0))===-1)if(typeof ce[Ce]!="function"){if(W==="keepdata"){if(Ce.substr(Ce.length-3)==="src")return}else if(W==="keepstream"){if(typeof(ye=ce[Ce+"src"])=="string"&&ye.indexOf(":")>0&&!t.isPlainObject(ce.stream))return}else if(W!=="keepall"&&typeof(ye=ce[Ce+"src"])=="string"&&ye.indexOf(":")>0)return;Te[Ce]=ne(ce[Ce],me)}else me&&(Te[Ce]="_function")}),Te}return Array.isArray(ce)?ce.map(function(Ce){return ne(Ce,me)}):t.isTypedArray(ce)?t.simpleMap(ce,t.identity):t.isJSDate(ce)?t.ms2DateTimeLocal(+ce):ce}var ae={data:(K||[]).map(function(ce){var me=ne(ce);return B&&delete me.fit,me})};if(!B&&(ae.layout=ne(Y),re)){var se=Y._size;ae.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return $&&(ae.frames=ne($)),ee&&(ae.config=ne(j._context,!0)),q==="object"?ae:JSON.stringify(ae)},f.modifyFrames=function(j,B){var W,q,re,ee=j._transitionData._frames,K=j._transitionData._frameHash;for(W=0;W<B.length;W++)switch((q=B[W]).type){case"replace":re=q.value;var Y=(ee[q.index]||{}).name,$=re.name;ee[q.index]=K[$]=re,$!==Y&&(delete K[Y],K[$]=re);break;case"insert":K[(re=q.value).name]=re,ee.splice(q.index,0,re);break;case"delete":delete K[(re=ee[q.index]).name],ee.splice(q.index,1)}return Promise.resolve()},f.computeFrame=function(j,B){var W,q,re,ee,K=j._transitionData._frameHash;if(!B)throw new Error("computeFrame must be given a string frame name");var Y=K[B.toString()];if(!Y)return!1;for(var $=[Y],ne=[Y.name];Y.baseframe&&(Y=K[Y.baseframe.toString()])&&ne.indexOf(Y.name)===-1;)$.push(Y),ne.push(Y.name);for(var ae={};Y=$.pop();)if(Y.layout&&(ae.layout=f.extendLayout(ae.layout,Y.layout)),Y.data){if(ae.data||(ae.data=[]),!(q=Y.traces))for(q=[],W=0;W<Y.data.length;W++)q[W]=W;for(ae.traces||(ae.traces=[]),W=0;W<Y.data.length;W++)(re=q[W])!=null&&((ee=ae.traces.indexOf(re))===-1&&(ee=ae.data.length,ae.traces[ee]=re),ae.data[ee]=f.extendTrace(ae.data[ee],Y.data[W]))}return ae},f.recomputeFrameHash=function(j){for(var B=j._transitionData._frameHash={},W=j._transitionData._frames,q=0;q<W.length;q++){var re=W[q];re&&re.name&&(B[re.name]=re)}},f.extendObjectWithContainers=function(j,B,W){var q,re,ee,K,Y,$,ne,ae=t.extendDeepNoArrays({},B||{}),se=t.expandObjectPaths(ae),ce={};if(W&&W.length)for(ee=0;ee<W.length;ee++)(re=(q=t.nestedProperty(se,W[ee])).get())===void 0?t.nestedProperty(ce,W[ee]).set(null):(q.set(null),t.nestedProperty(ce,W[ee]).set(re));if(j=t.extendDeepNoArrays(j||{},se),W&&W.length){for(ee=0;ee<W.length;ee++)if($=t.nestedProperty(ce,W[ee]).get()){for(ne=(Y=t.nestedProperty(j,W[ee])).get(),Array.isArray(ne)||(ne=[],Y.set(ne)),K=0;K<$.length;K++){var me=$[K];ne[K]=me===null?null:f.extendObjectWithContainers(ne[K],me)}Y.set(ne)}}return j},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=g.layoutArrayContainers,f.extendTrace=function(j,B){return f.extendObjectWithContainers(j,B,f.dataArrayContainers)},f.extendLayout=function(j,B){return f.extendObjectWithContainers(j,B,f.layoutArrayContainers)},f.transition=function(j,B,W,q,re,ee){var K={redraw:re.redraw},Y={},$=[];return K.prepareFn=function(){for(var ne=Array.isArray(B)?B.length:0,ae=q.slice(0,ne),se=0;se<ae.length;se++){var ce=ae[se],me=j._fullData[ce]._module;if(me){if(me.animatable){var ye=me.basePlotModule.name;Y[ye]||(Y[ye]=[]),Y[ye].push(ce)}j.data[ae[se]]=f.extendTrace(j.data[ae[se]],B[se])}}var Te=t.expandObjectPaths(t.extendDeepNoArrays({},W)),Ce=/^[xy]axis[0-9]*$/;for(var pe in Te)Ce.test(pe)&&delete Te[pe].range;f.extendLayout(j.layout,Te),delete j.calcdata,f.supplyDefaults(j),f.doCalcdata(j);var fe=t.expandObjectPaths(W);if(fe){var Oe=j._fullLayout._plots;for(var Se in Oe){var Me=Oe[Se],ue=Me.xaxis,le=Me.yaxis,ie=ue.range.slice(),ge=le.range.slice(),Ae=null,we=null,Ne=null,He=null;Array.isArray(fe[ue._name+".range"])?Ae=fe[ue._name+".range"].slice():Array.isArray((fe[ue._name]||{}).range)&&(Ae=fe[ue._name].range.slice()),Array.isArray(fe[le._name+".range"])?we=fe[le._name+".range"].slice():Array.isArray((fe[le._name]||{}).range)&&(we=fe[le._name].range.slice()),ie&&Ae&&(ue.r2l(ie[0])!==ue.r2l(Ae[0])||ue.r2l(ie[1])!==ue.r2l(Ae[1]))&&(Ne={xr0:ie,xr1:Ae}),ge&&we&&(le.r2l(ge[0])!==le.r2l(we[0])||le.r2l(ge[1])!==le.r2l(we[1]))&&(He={yr0:ge,yr1:we}),(Ne||He)&&$.push(t.extendFlat({plotinfo:Me},Ne,He))}}return Promise.resolve()},K.runFn=function(ne){var ae,se,ce=j._fullLayout._basePlotModules,me=$.length;if(W)for(se=0;se<ce.length;se++)ce[se].transitionAxes&&ce[se].transitionAxes(j,$,ee,ne);for(var ye in me?((ae=t.extendFlat({},ee)).duration=0,delete Y.cartesian):ae=ee,Y){var Te=Y[ye];j._fullData[Te[0]]._module.basePlotModule.plot(j,Te,ae,ne)}},O(j,ee,K)},f.transitionFromReact=function(j,B,W,q){var re=j._fullLayout,ee=re.transition,K={},Y=[];return K.prepareFn=function(){var $=re._plots;for(var ne in K.redraw=!1,B.anim==="some"&&(K.redraw=!0),W.anim==="some"&&(K.redraw=!0),$){var ae=$[ne],se=ae.xaxis,ce=ae.yaxis,me=q[se._name].range.slice(),ye=q[ce._name].range.slice(),Te=se.range.slice(),Ce=ce.range.slice();se.setScale(),ce.setScale();var pe=null,fe=null;se.r2l(me[0])===se.r2l(Te[0])&&se.r2l(me[1])===se.r2l(Te[1])||(pe={xr0:me,xr1:Te}),ce.r2l(ye[0])===ce.r2l(Ce[0])&&ce.r2l(ye[1])===ce.r2l(Ce[1])||(fe={yr0:ye,yr1:Ce}),(pe||fe)&&Y.push(t.extendFlat({plotinfo:ae},pe,fe))}return Promise.resolve()},K.runFn=function($){for(var ne,ae,se,ce=j._fullData,me=j._fullLayout._basePlotModules,ye=[],Te=0;Te<ce.length;Te++)ye.push(Te);function Ce(){if(j._fullLayout)for(var fe=0;fe<me.length;fe++)me[fe].transitionAxes&&me[fe].transitionAxes(j,Y,ne,$)}function pe(){if(j._fullLayout)for(var fe=0;fe<me.length;fe++)me[fe].plot(j,se,ae,$)}Y.length&&B.anim?ee.ordering==="traces first"?(ne=t.extendFlat({},ee,{duration:0}),se=ye,ae=ee,setTimeout(Ce,ee.duration),pe()):(ne=ee,se=null,ae=t.extendFlat({},ee,{duration:0}),setTimeout(pe,ne.duration),Ce()):Y.length?(ne=ee,Ce()):B.anim&&(se=ye,ae=ee,pe())},O(j,ee,K)},f.doCalcdata=function(j,B){var W,q,re,ee,K=r.list(j),Y=j._fullData,$=j._fullLayout,ne=new Array(Y.length),ae=(j.calcdata||[]).slice();for(j.calcdata=ne,$._numBoxes=0,$._numViolins=0,$._violinScaleGroupStats={},j._hmpixcount=0,j._hmlumcount=0,$._piecolormap={},$._sunburstcolormap={},$._treemapcolormap={},$._iciclecolormap={},$._funnelareacolormap={},re=0;re<Y.length;re++)Array.isArray(B)&&B.indexOf(re)===-1&&(ne[re]=ae[re]);for(re=0;re<Y.length;re++)(W=Y[re])._arrayAttrs=h.findArrayAttributes(W),W._extremes={};var se=$._subplots.polar||[];for(re=0;re<se.length;re++)K.push($[se[re]].radialaxis,$[se[re]].angularaxis);for(var ce in $._colorAxes){var me=$[ce];me.cauto!==!1&&(delete me.cmin,delete me.cmax)}var ye=!1;function Te(fe){if(W=Y[fe],q=W._module,W.visible===!0&&W.transforms){if(q&&q.calc){var Oe=q.calc(j,W);Oe[0]&&Oe[0].t&&Oe[0].t._scene&&delete Oe[0].t._scene.dirty}for(ee=0;ee<W.transforms.length;ee++){var Se=W.transforms[ee];(q=x[Se.type])&&q.calcTransform&&(W._hasCalcTransform=!0,ye=!0,q.calcTransform(j,W,Se))}}}function Ce(fe,Oe){if(W=Y[fe],!!(q=W._module).isContainer===Oe){var Se=[];if(W.visible===!0&&W._length!==0){delete W._indexToPoints;var Me=W.transforms||[];for(ee=Me.length-1;ee>=0;ee--)if(Me[ee].enabled){W._indexToPoints=Me[ee]._indexToPoints;break}q&&q.calc&&(Se=q.calc(j,W))}Array.isArray(Se)&&Se[0]||(Se=[{x:n,y:n}]),Se[0].t||(Se[0].t={}),Se[0].trace=W,ne[fe]=Se}}for(D(K,Y,$),re=0;re<Y.length;re++)Ce(re,!0);for(re=0;re<Y.length;re++)Te(re);for(ye&&D(K,Y,$),re=0;re<Y.length;re++)Ce(re,!0);for(re=0;re<Y.length;re++)Ce(re,!1);V(j);var pe=function(fe,Oe){var Se,Me,ue,le,ie,ge=[];function Ae(et,nt,Ye){var tt=nt._id.charAt(0);if(et==="histogram2dcontour"){var ut=nt._counterAxes[0],Ke=r.getFromId(Oe,ut),De=tt==="x"||ut==="x"&&Ke.type==="category",Be=tt==="y"||ut==="y"&&Ke.type==="category";return function(Qe,rt){return Qe===0||rt===0||De&&Qe===Ye[rt].length-1||Be&&rt===Ye.length-1?-1:(tt==="y"?rt:Qe)-1}}return function(Qe,rt){return tt==="y"?rt:Qe}}var we={min:function(et){return t.aggNums(Math.min,null,et)},max:function(et){return t.aggNums(Math.max,null,et)},sum:function(et){return t.aggNums(function(nt,Ye){return nt+Ye},null,et)},total:function(et){return t.aggNums(function(nt,Ye){return nt+Ye},null,et)},mean:function(et){return t.mean(et)},median:function(et){return t.median(et)}};for(Se=0;Se<fe.length;Se++){var Ne=fe[Se];if(Ne.type==="category"){var He=Ne.categoryorder.match(X);if(He){var de=He[1],Le=He[2],Ee=Ne._id.charAt(0),Re=Ee==="x",je=[];for(Me=0;Me<Ne._categories.length;Me++)je.push([Ne._categories[Me],[]]);for(Me=0;Me<Ne._traceIndices.length;Me++){var Fe=Ne._traceIndices[Me],Xe=Oe._fullData[Fe];if(Xe.visible===!0){var Ze=Xe.type;g.traceIs(Xe,"histogram")&&(delete Xe._xautoBinFinished,delete Xe._yautoBinFinished);var at=Ze==="splom",lt=Ze==="scattergl",ot=Oe.calcdata[Fe];for(ue=0;ue<ot.length;ue++){var bt,wt,ht=ot[ue];if(at){var ct=Xe._axesDim[Ne._id];if(!Re){var Tt=Xe._diag[ct][0];Tt&&(Ne=Oe._fullLayout[r.id2name(Tt)])}var Lt=ht.trace.dimensions[ct].values;for(le=0;le<Lt.length;le++)for(bt=Ne._categoriesMap[Lt[le]],ie=0;ie<ht.trace.dimensions.length;ie++)if(ie!==ct){var kt=ht.trace.dimensions[ie];je[bt][1].push(kt.values[le])}}else if(lt){for(le=0;le<ht.t.x.length;le++)Re?(bt=ht.t.x[le],wt=ht.t.y[le]):(bt=ht.t.y[le],wt=ht.t.x[le]),je[bt][1].push(wt);ht.t&&ht.t._scene&&delete ht.t._scene.dirty}else if(ht.hasOwnProperty("z")){wt=ht.z;var Ot=Ae(Xe.type,Ne,wt);for(le=0;le<wt.length;le++)for(ie=0;ie<wt[le].length;ie++)(bt=Ot(ie,le))+1&&je[bt][1].push(wt[le][ie])}else for((bt=ht.p)===void 0&&(bt=ht[Ee]),(wt=ht.s)===void 0&&(wt=ht.v),wt===void 0&&(wt=Re?ht.y:ht.x),Array.isArray(wt)||(wt=wt===void 0?[]:[wt]),le=0;le<wt.length;le++)je[bt][1].push(wt[le])}}}Ne._categoriesValue=je;var Pt=[];for(Me=0;Me<je.length;Me++)Pt.push([je[Me][0],we[de](je[Me][1])]);Pt.sort(function(et,nt){return et[1]-nt[1]}),Ne._categoriesAggregatedValue=Pt,Ne._initialCategories=Pt.map(function(et){return et[0]}),Le==="descending"&&Ne._initialCategories.reverse(),ge=ge.concat(Ne.sortByInitialCategories())}}}return ge}(K,j);if(pe.length){for($._numBoxes=0,$._numViolins=0,re=0;re<pe.length;re++)Ce(pe[re],!0);for(re=0;re<pe.length;re++)Ce(pe[re],!1);V(j)}g.getComponentMethod("fx","calc")(j),g.getComponentMethod("errorbars","calc")(j)};var X=/(total|sum|min|max|mean|median) (ascending|descending)/;function D(j,B,W){var q={};function re($){$.clearCalc(),$.type==="multicategory"&&$.setupMultiCategory(B),q[$._id]=1}t.simpleMap(j,re);for(var ee=W._axisMatchGroups||[],K=0;K<ee.length;K++)for(var Y in ee[K])q[Y]||re(W[r.id2name(Y)])}function V(j){var B,W,q,re=j._fullLayout,ee=re._visibleModules,K={};for(W=0;W<ee.length;W++){var Y=ee[W],$=Y.crossTraceCalc;if($){var ne=Y.basePlotModule.name;K[ne]?t.pushUnique(K[ne],$):K[ne]=[$]}}for(q in K){var ae=K[q],se=re._subplots[q];if(Array.isArray(se))for(B=0;B<se.length;B++){var ce=se[B],me=q==="cartesian"?re._plots[ce]:re[ce];for(W=0;W<ae.length;W++)ae[W](j,me,ce)}else for(W=0;W<ae.length;W++)ae[W](j)}}f.rehover=function(j){j._fullLayout._rehover&&j._fullLayout._rehover()},f.redrag=function(j){j._fullLayout._redrag&&j._fullLayout._redrag()},f.reselect=function(j){var B=j._fullLayout,W=(j.layout||{}).selections,q=B._previousSelections;B._previousSelections=W;var re=B._reselect||JSON.stringify(W)!==JSON.stringify(q);g.getComponentMethod("selections","reselect")(j,re)},f.generalUpdatePerTraceModule=function(j,B,W,q){var re,ee=B.traceHash,K={};for(re=0;re<W.length;re++){var Y=W[re],$=Y[0].trace;$.visible&&(K[$.type]=K[$.type]||[],K[$.type].push(Y))}for(var ne in ee)if(!K[ne]){var ae=ee[ne][0];ae[0].trace.visible=!1,K[ne]=[ae]}for(var se in K){var ce=K[se];ce[0][0].trace._module.plot(j,B,t.filterVisible(ce),q)}B.traceHash=K},f.plotBasePlot=function(j,B,W,q,re){var ee=g.getModule(j),K=c(B.calcdata,ee)[0];ee.plot(B,K,q,re)},f.cleanBasePlot=function(j,B,W,q,re){var ee=re._has&&re._has(j),K=W._has&&W._has(j);ee&&!K&&re["_"+j+"layer"].selectAll("g.trace").remove()}},9813:function(F){F.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(F,L,e){var T=e(71828),b=e(61082).tester,a=T.findIndexOfMin,_=T.isAngleInsideSector,g=T.angleDelta,h=T.angleDist;function o(r,s,l,u){var d,c,w=u[0],m=u[1],f=i(Math.sin(s)-Math.sin(r)),x=i(Math.cos(s)-Math.cos(r)),y=Math.tan(l),v=i(1/y),M=f/x,p=m-M*w;return v?f&&x?c=y*(d=p/(y-M)):x?(d=m*v,c=m):(d=w,c=w*y):f&&x?(d=0,c=p):x?(d=0,c=m):d=c=NaN,[d,c]}function t(r,s,l,u){return T.isFullCircle([s,l])?function(d,c){var w,m=c.length,f=new Array(m+1);for(w=0;w<m;w++){var x=c[w];f[w]=[d*Math.cos(x),d*Math.sin(x)]}return f[w]=f[0].slice(),f}(r,u):function(d,c,w,m){var f,x,y=m.length,v=[];function M(X){return[d*Math.cos(X),d*Math.sin(X)]}function p(X,D,V){return o(X,D,V,M(X))}function S(X){return T.mod(X,y)}function A(X){return _(X,[c,w])}var k=a(m,function(X){return A(X)?h(X,c):1/0}),C=p(m[k],m[S(k-1)],c);for(v.push(C),f=k,x=0;x<y;f++,x++){var P=m[S(f)];if(!A(P))break;v.push(M(P))}var R=a(m,function(X){return A(X)?h(X,w):1/0}),O=p(m[R],m[S(R+1)],w);return v.push(O),v.push([0,0]),v.push(v[0].slice()),v}(r,s,l,u)}function i(r){return Math.abs(r)>1e-10?r:0}function n(r,s,l){s=s||0,l=l||0;for(var u=r.length,d=new Array(u),c=0;c<u;c++){var w=r[c];d[c]=[s+w[0],l-w[1]]}return d}F.exports={isPtInsidePolygon:function(r,s,l,u,d){if(!_(s,u))return!1;var c,w;l[0]<l[1]?(c=l[0],w=l[1]):(c=l[1],w=l[0]);var m=b(t(c,u[0],u[1],d)),f=b(t(w,u[0],u[1],d)),x=[r*Math.cos(s),r*Math.sin(s)];return f.contains(x)&&!m.contains(x)},findPolygonOffset:function(r,s,l,u){for(var d=1/0,c=1/0,w=t(r,s,l,u),m=0;m<w.length;m++){var f=w[m];d=Math.min(d,f[0]),c=Math.min(c,-f[1])}return[d,c]},findEnclosingVertexAngles:function(r,s){var l=a(s,function(d){var c=g(d,r);return c>0?c:1/0}),u=T.mod(l+1,s.length);return[s[l],s[u]]},findIntersectionXY:o,findXYatLength:function(r,s,l,u){var d=-s*l,c=s*s+1,w=2*(s*d-l),m=d*d+l*l-r*r,f=Math.sqrt(w*w-4*c*m),x=(-w+f)/(2*c),y=(-w-f)/(2*c);return[[x,s*x+d+u],[y,s*y+d+u]]},clampTiny:i,pathPolygon:function(r,s,l,u,d,c){return"M"+n(t(r,s,l,u),d,c).join("L")},pathPolygonAnnulus:function(r,s,l,u,d,c,w){var m,f;r<s?(m=r,f=s):(m=s,f=r);var x=n(t(m,l,u,d),c,w);return"M"+n(t(f,l,u,d),c,w).reverse().join("L")+"M"+x.join("L")}}},23580:function(F,L,e){var T=e(27659).AU,b=e(71828).counterRegex,a=e(77997),_=e(9813),g=_.attr,h=_.name,o=b(h),t={};t[g]={valType:"subplotid",dflt:h,editType:"calc"},F.exports={attr:g,name:h,idRoot:h,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,s=n._subplots[h],l=0;l<s.length;l++){var u=s[l],d=T(r,h,u),c=n[u]._subplot;c||(c=a(i,u),n[u]._subplot=c),c.plot(d,n,i._promises)}},clean:function(i,n,r,s){for(var l=s._subplots[h]||[],u=s._has&&s._has("gl"),d=n._has&&n._has("gl"),c=u&&!d,w=0;w<l.length;w++){var m=l[w],f=s[m]._subplot;if(!n[m]&&f)for(var x in f.framework.remove(),f.layers["radial-axis-title"].remove(),f.clipPaths)f.clipPaths[x].remove();c&&f._scene&&(f._scene.destroy(),f._scene=null)}},toSVG:e(93612).toSVG}},73812:function(F,L,e){var T=e(22399),b=e(13838),a=e(27670).Y,_=e(71828).extendFlat,g=e(30962).overrideAll,h=g({color:b.color,showline:_({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:_({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash},"plot","from-root"),o=g({tickmode:b.minor.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,labelalias:b.labelalias,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,layer:b.layer},"plot","from-root"),t={visible:_({},b.visible,{dflt:!0}),type:_({},b.type,{values:["-","linear","log","date","category"]}),autotypenumbers:b.autotypenumbers,autorange:_({},b.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:_({},b.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:b.categoryorder,categoryarray:b.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:_({},b.title.text,{editType:"plot",dflt:""}),font:_({},b.title.font,{editType:"plot"}),editType:"plot"},hoverformat:b.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}};_(t,h,o);var i={visible:_({},b.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:b.autotypenumbers,categoryorder:b.categoryorder,categoryarray:b.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:b.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};_(i,h,o),F.exports={domain:a({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:T.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(F,L,e){var T=e(71828),b=e(7901),a=e(44467),_=e(49119),g=e(27659).NG,h=e(26218),o=e(38701),t=e(96115),i=e(89426),n=e(15258),r=e(92128),s=e(4322),l=e(73812),u=e(12101),d=e(9813),c=d.axisNames;function w(f,x,y,v){var M=y("bgcolor");v.bgColor=b.combine(M,v.paper_bgcolor);var p=y("sector");y("hole");var S,A=g(v.fullData,d.name,v.id),k=v.layoutOut;function C($,ne){return y(S+"."+$,ne)}for(var P=0;P<c.length;P++){S=c[P],T.isPlainObject(f[S])||(f[S]={});var R=f[S],O=a.newContainer(x,S);O._id=O._name=S,O._attr=v.id+"."+S,O._traceIndices=A.map(function($){return $._expandedIndex});var X=d.axisName2dataArray[S],D=m(R,O,C,A,X,v);n(R,O,C,{axData:A,dataAttr:X});var V=C("visible");switch(u(O,x,k),C("uirevision",x.uirevision),O._m=1,S){case"radialaxis":var j=C("autorange",!O.isValidRange(R.range));R.autorange=j,!j||D!=="linear"&&D!=="-"||C("rangemode"),j==="reversed"&&(O._m=-1),C("range"),O.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(D==="date"){T.log("Polar plots do not support date angular axes yet.");for(var B=0;B<A.length;B++)A[B].visible=!1;D=R.type=O.type="linear"}C(D==="linear"?"thetaunit":"period");var W=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[W])}if(i(R,O,C,O.type,{tickSuffixDflt:O.thetaunit==="degrees"?"":void 0}),V){var q,re,ee,K,Y=v.font||{};re=(q=C("color"))===R.color?q:Y.color,ee=Y.size,K=Y.family,h(R,O,C,O.type),t(R,O,C,O.type,{font:{color:re,size:ee,family:K}}),o(R,O,C,{outerTicks:!0}),r(R,O,C,{dfltColor:q,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[S]}),C("layer"),S==="radialaxis"&&(C("side"),C("angle",p[0]),C("title.text"),T.coerceFont(C,"title.font",{color:re,size:T.bigFont(ee),family:K}))}D!=="category"&&C("hoverformat"),O._input=R}x.angularaxis.type==="category"&&y("gridshape")}function m(f,x,y,v,M,p){var S=y("autotypenumbers",p.autotypenumbersDflt);if(y("type")==="-"){for(var A,k=0;k<v.length;k++)if(v[k].visible){A=v[k];break}A&&A[M]&&(x.type=s(A[M],"gregorian",{noMultiCategory:!0,autotypenumbers:S})),x.type==="-"?x.type="linear":f.type=x.type}return x.type}F.exports=function(f,x,y){_(f,x,y,{type:d.name,attributes:l,handleDefaults:w,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:y,layoutOut:x})}},77997:function(F,L,e){var T=e(39898),b=e(84267),a=e(73972),_=e(71828),g=_.strRotate,h=_.strTranslate,o=e(7901),t=e(91424),i=e(74875),n=e(89298),r=e(21994),s=e(12101),l=e(71739).doAutoRange,u=e(29323),d=e(28569),c=e(30211),w=e(92998),m=e(47322).prepSelect,f=e(47322).selectOnClick,x=e(47322).clearOutline,y=e(6964),v=e(33306),M=e(61549).redrawReglTraces,p=e(18783).MID_SHIFT,S=e(9813),A=e(10869),k=e(23893),C=k.smith,P=k.reactanceArc,R=k.resistanceArc,O=k.smithTransform,X=_._,D=_.mod,V=_.deg2rad,j=_.rad2deg;function B(K,Y,$){this.isSmith=$||!1,this.id=Y,this.gd=K,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var ne=K._fullLayout,ae="clip"+ne._uid+Y;this.clipIds.forTraces=ae+"-for-traces",this.clipPaths.forTraces=ne._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=ne["_"+($?"smith":"polar")+"layer"].append("g").attr("class",Y),this.getHole=function(se){return this.isSmith?0:se.hole},this.getSector=function(se){return this.isSmith?[0,360]:se.sector},this.getRadial=function(se){return this.isSmith?se.realaxis:se.radialaxis},this.getAngular=function(se){return this.isSmith?se.imaginaryaxis:se.angularaxis},$||(this.radialTickLayout=null,this.angularTickLayout=null)}var W=B.prototype;function q(K){var Y=K.ticks+String(K.ticklen)+String(K.showticklabels);return"side"in K&&(Y+=K.side),Y}function re(K,Y){return Y[_.findIndexOfMin(Y,function($){return _.angleDist(K,$)})]}function ee(K,Y,$){return Y?(K.attr("display",null),K.attr($)):K&&K.attr("display","none"),K}F.exports=function(K,Y,$){return new B(K,Y,$)},W.plot=function(K,Y){for(var $=this,ne=Y[$.id],ae=!1,se=0;se<K.length;se++)if(K[se][0].trace.cliponaxis===!1){ae=!0;break}$._hasClipOnAxisFalse=ae,$.updateLayers(Y,ne),$.updateLayout(Y,ne),i.generalUpdatePerTraceModule($.gd,$,K,ne),$.updateFx(Y,ne),$.isSmith&&(delete ne.realaxis.range,delete ne.imaginaryaxis.range)},W.updateLayers=function(K,Y){var $=this,ne=$.isSmith,ae=$.layers,se=$.getRadial(Y),ce=$.getAngular(Y),me=S.layerNames,ye=me.indexOf("frontplot"),Te=me.slice(0,ye),Ce=ce.layer==="below traces",pe=se.layer==="below traces";Ce&&Te.push("angular-line"),pe&&Te.push("radial-line"),Ce&&Te.push("angular-axis"),pe&&Te.push("radial-axis"),Te.push("frontplot"),Ce||Te.push("angular-line"),pe||Te.push("radial-line"),Ce||Te.push("angular-axis"),pe||Te.push("radial-axis");var fe=(ne?"smith":"polar")+"sublayer",Oe=$.framework.selectAll("."+fe).data(Te,String);Oe.enter().append("g").attr("class",function(Se){return fe+" "+Se}).each(function(Se){var Me=ae[Se]=T.select(this);switch(Se){case"frontplot":ne||Me.append("g").classed("barlayer",!0),Me.append("g").classed("scatterlayer",!0);break;case"backplot":Me.append("g").classed("maplayer",!0);break;case"plotbg":ae.bg=Me.append("path");break;case"radial-grid":case"angular-grid":Me.style("fill","none");break;case"radial-line":Me.append("line").style("fill","none");break;case"angular-line":Me.append("path").style("fill","none")}}),Oe.order()},W.updateLayout=function(K,Y){var $=this,ne=$.layers,ae=K._size,se=$.getRadial(Y),ce=$.getAngular(Y),me=Y.domain.x,ye=Y.domain.y;$.xOffset=ae.l+ae.w*me[0],$.yOffset=ae.t+ae.h*(1-ye[1]);var Te=$.xLength=ae.w*(me[1]-me[0]),Ce=$.yLength=ae.h*(ye[1]-ye[0]),pe=$.getSector(Y);$.sectorInRad=pe.map(V);var fe,Oe,Se,Me,ue,le=$.sectorBBox=function(lt){var ot,bt=lt[0],wt=lt[1]-bt,ht=D(bt,360),ct=ht+wt,Tt=Math.cos(V(ht)),Lt=Math.sin(V(ht)),kt=Math.cos(V(ct)),Ot=Math.sin(V(ct));return ot=ht<=90&&ct>=90||ht>90&&ct>=450?1:Lt<=0&&Ot<=0?0:Math.max(Lt,Ot),[ht<=180&&ct>=180||ht>180&&ct>=540?-1:Tt>=0&&kt>=0?0:Math.min(Tt,kt),ht<=270&&ct>=270||ht>270&&ct>=630?-1:Lt>=0&&Ot>=0?0:Math.min(Lt,Ot),ct>=360?1:Tt<=0&&kt<=0?0:Math.max(Tt,kt),ot]}(pe),ie=le[2]-le[0],ge=le[3]-le[1],Ae=Ce/Te,we=Math.abs(ge/ie);Ae>we?(fe=Te,ue=(Ce-(Oe=Te*we))/ae.h/2,Se=[me[0],me[1]],Me=[ye[0]+ue,ye[1]-ue]):(Oe=Ce,ue=(Te-(fe=Ce/we))/ae.w/2,Se=[me[0]+ue,me[1]-ue],Me=[ye[0],ye[1]]),$.xLength2=fe,$.yLength2=Oe,$.xDomain2=Se,$.yDomain2=Me;var Ne,He=$.xOffset2=ae.l+ae.w*Se[0],de=$.yOffset2=ae.t+ae.h*(1-Me[1]),Le=$.radius=fe/ie,Ee=$.innerRadius=$.getHole(Y)*Le,Re=$.cx=He-Le*le[0],je=$.cy=de+Le*le[3],Fe=$.cxx=Re-He,Xe=$.cyy=je-de,Ze=se.side;Ze==="counterclockwise"?(Ne=Ze,Ze="top"):Ze==="clockwise"&&(Ne=Ze,Ze="bottom"),$.radialAxis=$.mockAxis(K,Y,se,{_id:"x",side:Ze,_trueSide:Ne,domain:[Ee/ae.w,Le/ae.w]}),$.angularAxis=$.mockAxis(K,Y,ce,{side:"right",domain:[0,Math.PI],autorange:!1}),$.doAutoRange(K,Y),$.updateAngularAxis(K,Y),$.updateRadialAxis(K,Y),$.updateRadialAxisTitle(K,Y),$.xaxis=$.mockCartesianAxis(K,Y,{_id:"x",domain:Se}),$.yaxis=$.mockCartesianAxis(K,Y,{_id:"y",domain:Me});var at=$.pathSubplot();$.clipPaths.forTraces.select("path").attr("d",at).attr("transform",h(Fe,Xe)),ne.frontplot.attr("transform",h(He,de)).call(t.setClipUrl,$._hasClipOnAxisFalse?null:$.clipIds.forTraces,$.gd),ne.bg.attr("d",at).attr("transform",h(Re,je)).call(o.fill,Y.bgcolor)},W.mockAxis=function(K,Y,$,ne){var ae=_.extendFlat({},$,ne);return s(ae,Y,K),ae},W.mockCartesianAxis=function(K,Y,$){var ne=this,ae=ne.isSmith,se=$._id,ce=_.extendFlat({type:"linear"},$);r(ce,K);var me={x:[0,2],y:[1,3]};return ce.setRange=function(){var ye=ne.sectorBBox,Te=me[se],Ce=ne.radialAxis._rl,pe=(Ce[1]-Ce[0])/(1-ne.getHole(Y));ce.range=[ye[Te[0]]*pe,ye[Te[1]]*pe]},ce.isPtWithinRange=se!=="x"||ae?function(){return!0}:function(ye){return ne.isPtInside(ye)},ce.setRange(),ce.setScale(),ce},W.doAutoRange=function(K,Y){var $=this,ne=$.gd,ae=$.radialAxis,se=$.getRadial(Y);l(ne,ae);var ce=ae.range;se.range=ce.slice(),se._input.range=ce.slice(),ae._rl=[ae.r2l(ce[0],null,"gregorian"),ae.r2l(ce[1],null,"gregorian")]},W.updateRadialAxis=function(K,Y){var $=this,ne=$.gd,ae=$.layers,se=$.radius,ce=$.innerRadius,me=$.cx,ye=$.cy,Te=$.getRadial(Y),Ce=D($.getSector(Y)[0],360),pe=$.radialAxis,fe=ce<se,Oe=$.isSmith;Oe||($.fillViewInitialKey("radialaxis.angle",Te.angle),$.fillViewInitialKey("radialaxis.range",pe.range.slice()),pe.setGeometry()),pe.tickangle==="auto"&&Ce>90&&Ce<=270&&(pe.tickangle=180);var Se=Oe?function(de){var Le=O($,C([de.x,0]));return h(Le[0]-me,Le[1]-ye)}:function(de){return h(pe.l2p(de.x)+ce,0)},Me=Oe?function(de){return R($,de.x,-1/0,1/0)}:function(de){return $.pathArc(pe.r2p(de.x)+ce)},ue=q(Te);if($.radialTickLayout!==ue&&(ae["radial-axis"].selectAll(".xtick").remove(),$.radialTickLayout=ue),fe){pe.setScale();var le=0,ie=Oe?(pe.tickvals||[]).filter(function(de){return de>=0}).map(function(de){return n.tickText(pe,de,!0,!1)}):n.calcTicks(pe),ge=Oe?ie:n.clipEnds(pe,ie),Ae=n.getTickSigns(pe)[2];Oe&&((pe.ticks==="top"&&pe.side==="bottom"||pe.ticks==="bottom"&&pe.side==="top")&&(Ae=-Ae),pe.ticks==="top"&&pe.side==="top"&&(le=-pe.ticklen),pe.ticks==="bottom"&&pe.side==="bottom"&&(le=pe.ticklen)),n.drawTicks(ne,pe,{vals:ie,layer:ae["radial-axis"],path:n.makeTickPath(pe,0,Ae),transFn:Se,crisp:!1}),n.drawGrid(ne,pe,{vals:ge,layer:ae["radial-grid"],path:Me,transFn:_.noop,crisp:!1}),n.drawLabels(ne,pe,{vals:ie,layer:ae["radial-axis"],transFn:Se,labelFns:n.makeLabelFns(pe,le)})}var we=$.radialAxisAngle=$.vangles?j(re(V(Te.angle),$.vangles)):Te.angle,Ne=h(me,ye),He=Ne+g(-we);ee(ae["radial-axis"],fe&&(Te.showticklabels||Te.ticks),{transform:He}),ee(ae["radial-grid"],fe&&Te.showgrid,{transform:Oe?"":Ne}),ee(ae["radial-line"].select("line"),fe&&Te.showline,{x1:Oe?-se:ce,y1:0,x2:se,y2:0,transform:He}).attr("stroke-width",Te.linewidth).call(o.stroke,Te.linecolor)},W.updateRadialAxisTitle=function(K,Y,$){if(!this.isSmith){var ne=this,ae=ne.gd,se=ne.radius,ce=ne.cx,me=ne.cy,ye=ne.getRadial(Y),Te=ne.id+"title",Ce=0;if(ye.title){var pe=t.bBox(ne.layers["radial-axis"].node()).height,fe=ye.title.font.size,Oe=ye.side;Ce=Oe==="top"?fe:Oe==="counterclockwise"?-(pe+.4*fe):pe+.8*fe}var Se=$!==void 0?$:ne.radialAxisAngle,Me=V(Se),ue=Math.cos(Me),le=Math.sin(Me),ie=ce+se/2*ue+Ce*le,ge=me-se/2*le+Ce*ue;ne.layers["radial-axis-title"]=w.draw(ae,Te,{propContainer:ye,propName:ne.id+".radialaxis.title",placeholder:X(ae,"Click to enter radial axis title"),attributes:{x:ie,y:ge,"text-anchor":"middle"},transform:{rotate:-Se}})}},W.updateAngularAxis=function(K,Y){var $=this,ne=$.gd,ae=$.layers,se=$.radius,ce=$.innerRadius,me=$.cx,ye=$.cy,Te=$.getAngular(Y),Ce=$.angularAxis,pe=$.isSmith;pe||($.fillViewInitialKey("angularaxis.rotation",Te.rotation),Ce.setGeometry(),Ce.setScale());var fe=pe?function(de){var Le=O($,C([0,de.x]));return Math.atan2(Le[0]-me,Le[1]-ye)-Math.PI/2}:function(de){return Ce.t2g(de.x)};Ce.type==="linear"&&Ce.thetaunit==="radians"&&(Ce.tick0=j(Ce.tick0),Ce.dtick=j(Ce.dtick));var Oe=function(de){return h(me+se*Math.cos(de),ye-se*Math.sin(de))},Se=pe?function(de){var Le=O($,C([0,de.x]));return h(Le[0],Le[1])}:function(de){return Oe(fe(de))},Me=pe?function(de){var Le=O($,C([0,de.x])),Ee=Math.atan2(Le[0]-me,Le[1]-ye)-Math.PI/2;return h(Le[0],Le[1])+g(-j(Ee))}:function(de){var Le=fe(de);return Oe(Le)+g(-j(Le))},ue=pe?function(de){return P($,de.x,0,1/0)}:function(de){var Le=fe(de),Ee=Math.cos(Le),Re=Math.sin(Le);return"M"+[me+ce*Ee,ye-ce*Re]+"L"+[me+se*Ee,ye-se*Re]},le=n.makeLabelFns(Ce,0).labelStandoff,ie={xFn:function(de){var Le=fe(de);return Math.cos(Le)*le},yFn:function(de){var Le=fe(de),Ee=Math.sin(Le)>0?.2:1;return-Math.sin(Le)*(le+de.fontSize*Ee)+Math.abs(Math.cos(Le))*(de.fontSize*p)},anchorFn:function(de){var Le=fe(de),Ee=Math.cos(Le);return Math.abs(Ee)<.1?"middle":Ee>0?"start":"end"},heightFn:function(de,Le,Ee){var Re=fe(de);return-.5*(1+Math.sin(Re))*Ee}},ge=q(Te);$.angularTickLayout!==ge&&(ae["angular-axis"].selectAll("."+Ce._id+"tick").remove(),$.angularTickLayout=ge);var Ae,we=pe?[1/0].concat(Ce.tickvals||[]).map(function(de){return n.tickText(Ce,de,!0,!1)}):n.calcTicks(Ce);if(pe&&(we[0].text="",we[0].fontSize*=1.75),Y.gridshape==="linear"?(Ae=we.map(fe),_.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,$.vangles=Ae,Ce.type==="category"&&(we=we.filter(function(de){return _.isAngleInsideSector(fe(de),$.sectorInRad)})),Ce.visible){var Ne=Ce.ticks==="inside"?-1:1,He=(Ce.linewidth||1)/2;n.drawTicks(ne,Ce,{vals:we,layer:ae["angular-axis"],path:"M"+Ne*He+",0h"+Ne*Ce.ticklen,transFn:Me,crisp:!1}),n.drawGrid(ne,Ce,{vals:we,layer:ae["angular-grid"],path:ue,transFn:_.noop,crisp:!1}),n.drawLabels(ne,Ce,{vals:we,layer:ae["angular-axis"],repositionOnUpdate:!0,transFn:Se,labelFns:ie})}ee(ae["angular-line"].select("path"),Te.showline,{d:$.pathSubplot(),transform:h(me,ye)}).attr("stroke-width",Te.linewidth).call(o.stroke,Te.linecolor)},W.updateFx=function(K,Y){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(K),this.updateRadialDrag(K,Y,0),this.updateRadialDrag(K,Y,1)),this.updateHoverAndMainDrag(K))},W.updateHoverAndMainDrag=function(K){var Y,$,ne=this,ae=ne.isSmith,se=ne.gd,ce=ne.layers,me=K._zoomlayer,ye=S.MINZOOM,Te=S.OFFEDGE,Ce=ne.radius,pe=ne.innerRadius,fe=ne.cx,Oe=ne.cy,Se=ne.cxx,Me=ne.cyy,ue=ne.sectorInRad,le=ne.vangles,ie=ne.radialAxis,ge=A.clampTiny,Ae=A.findXYatLength,we=A.findEnclosingVertexAngles,Ne=S.cornerHalfWidth,He=S.cornerLen/2,de=u.makeDragger(ce,"path","maindrag",K.dragmode===!1?"none":"crosshair");T.select(de).attr("d",ne.pathSubplot()).attr("transform",h(fe,Oe)),de.onmousemove=function(Ke){c.hover(se,Ke,ne.id),se._fullLayout._lasthover=de,se._fullLayout._hoversubplot=ne.id},de.onmouseout=function(Ke){se._dragging||d.unhover(se,Ke)};var Le,Ee,Re,je,Fe,Xe,Ze,at,lt,ot={element:de,gd:se,subplot:ne.id,plotinfo:{id:ne.id,xaxis:ne.xaxis,yaxis:ne.yaxis},xaxes:[ne.xaxis],yaxes:[ne.yaxis]};function bt(Ke,De){return Math.sqrt(Ke*Ke+De*De)}function wt(Ke,De){return bt(Ke-Se,De-Me)}function ht(Ke,De){return Math.atan2(Me-De,Ke-Se)}function ct(Ke,De){return[Ke*Math.cos(De),Ke*Math.sin(-De)]}function Tt(Ke,De){if(Ke===0)return ne.pathSector(2*Ne);var Be=He/Ke,Qe=De-Be,rt=De+Be,vt=Math.max(0,Math.min(Ke,Ce)),mt=vt-Ne,xt=vt+Ne;return"M"+ct(mt,Qe)+"A"+[mt,mt]+" 0,0,0 "+ct(mt,rt)+"L"+ct(xt,rt)+"A"+[xt,xt]+" 0,0,1 "+ct(xt,Qe)+"Z"}function Lt(Ke,De,Be){if(Ke===0)return ne.pathSector(2*Ne);var Qe,rt,vt=ct(Ke,De),mt=ct(Ke,Be),xt=ge((vt[0]+mt[0])/2),dt=ge((vt[1]+mt[1])/2);if(xt&&dt){var Et=dt/xt,pt=-1/Et,gt=Ae(Ne,Et,xt,dt);Qe=Ae(He,pt,gt[0][0],gt[0][1]),rt=Ae(He,pt,gt[1][0],gt[1][1])}else{var Mt,Nt;dt?(Mt=He,Nt=Ne):(Mt=Ne,Nt=He),Qe=[[xt-Mt,dt-Nt],[xt+Mt,dt-Nt]],rt=[[xt-Mt,dt+Nt],[xt+Mt,dt+Nt]]}return"M"+Qe.join("L")+"L"+rt.reverse().join("L")+"Z"}function kt(Ke,De){return De=Math.max(Math.min(De,Ce),pe),Ke<Te?Ke=0:Ce-Ke<Te?Ke=Ce:De<Te?De=0:Ce-De<Te&&(De=Ce),Math.abs(De-Ke)>ye?(Ke<De?(Re=Ke,je=De):(Re=De,je=Ke),!0):(Re=null,je=null,!1)}function Ot(Ke,De){Ke=Ke||Fe,De=De||"M0,0Z",at.attr("d",Ke),lt.attr("d",De),u.transitionZoombox(at,lt,Xe,Ze),Xe=!0;var Be={};tt(Be),se.emit("plotly_relayouting",Be)}function Pt(Ke,De){var Be,Qe,rt=Le+(Ke*=Y),vt=Ee+(De*=$),mt=wt(Le,Ee),xt=Math.min(wt(rt,vt),Ce),dt=ht(Le,Ee);kt(mt,xt)&&(Be=Fe+ne.pathSector(je),Re&&(Be+=ne.pathSector(Re)),Qe=Tt(Re,dt)+Tt(je,dt)),Ot(Be,Qe)}function et(Ke,De,Be,Qe){var rt=A.findIntersectionXY(Be,Qe,Be,[Ke-Se,Me-De]);return bt(rt[0],rt[1])}function nt(Ke,De){var Be,Qe,rt=Le+Ke,vt=Ee+De,mt=ht(Le,Ee),xt=ht(rt,vt),dt=we(mt,le),Et=we(xt,le);kt(et(Le,Ee,dt[0],dt[1]),Math.min(et(rt,vt,Et[0],Et[1]),Ce))&&(Be=Fe+ne.pathSector(je),Re&&(Be+=ne.pathSector(Re)),Qe=[Lt(Re,dt[0],dt[1]),Lt(je,dt[0],dt[1])].join(" ")),Ot(Be,Qe)}function Ye(){if(u.removeZoombox(se),Re!==null&&je!==null){var Ke={};tt(Ke),u.showDoubleClickNotifier(se),a.call("_guiRelayout",se,Ke)}}function tt(Ke){var De=ie._rl,Be=(De[1]-De[0])/(1-pe/Ce)/Ce,Qe=[De[0]+(Re-pe)*Be,De[0]+(je-pe)*Be];Ke[ne.id+".radialaxis.range"]=Qe}function ut(Ke,De){var Be=se._fullLayout.clickmode;if(u.removeZoombox(se),Ke===2){var Qe={};for(var rt in ne.viewInitial)Qe[ne.id+"."+rt]=ne.viewInitial[rt];se.emit("plotly_doubleclick",null),a.call("_guiRelayout",se,Qe)}Be.indexOf("select")>-1&&Ke===1&&f(De,se,[ne.xaxis],[ne.yaxis],ne.id,ot),Be.indexOf("event")>-1&&c.click(se,De,ne.id)}ot.prepFn=function(Ke,De,Be){var Qe=se._fullLayout.dragmode,rt=de.getBoundingClientRect();se._fullLayout._calcInverseTransform(se);var vt=se._fullLayout._invTransform;Y=se._fullLayout._invScaleX,$=se._fullLayout._invScaleY;var mt=_.apply3DTransform(vt)(De-rt.left,Be-rt.top);if(Le=mt[0],Ee=mt[1],le){var xt=A.findPolygonOffset(Ce,ue[0],ue[1],le);Le+=Se+xt[0],Ee+=Me+xt[1]}switch(Qe){case"zoom":ot.clickFn=ut,ae||(ot.moveFn=le?nt:Pt,ot.doneFn=Ye,function(){Re=null,je=null,Fe=ne.pathSubplot(),Xe=!1;var dt=se._fullLayout[ne.id];Ze=b(dt.bgcolor).getLuminance(),(at=u.makeZoombox(me,Ze,fe,Oe,Fe)).attr("fill-rule","evenodd"),lt=u.makeCorners(me,fe,Oe),x(se)}());break;case"select":case"lasso":m(Ke,De,Be,ot,Qe)}},d.init(ot)},W.updateRadialDrag=function(K,Y,$){var ne=this,ae=ne.gd,se=ne.layers,ce=ne.radius,me=ne.innerRadius,ye=ne.cx,Te=ne.cy,Ce=ne.radialAxis,pe=S.radialDragBoxSize,fe=pe/2;if(Ce.visible){var Oe,Se,Me,ue=V(ne.radialAxisAngle),le=Ce._rl,ie=le[0],ge=le[1],Ae=le[$],we=.75*(le[1]-le[0])/(1-ne.getHole(Y))/ce;$?(Oe=ye+(ce+fe)*Math.cos(ue),Se=Te-(ce+fe)*Math.sin(ue),Me="radialdrag"):(Oe=ye+(me-fe)*Math.cos(ue),Se=Te-(me-fe)*Math.sin(ue),Me="radialdrag-inner");var Ne,He,de,Le=u.makeRectDragger(se,Me,"crosshair",-fe,-fe,pe,pe),Ee={element:Le,gd:ae};K.dragmode===!1&&(Ee.dragmode=!1),ee(T.select(Le),Ce.visible&&me<ce,{transform:h(Oe,Se)}),Ee.prepFn=function(){Ne=null,He=null,de=null,Ee.moveFn=Re,Ee.doneFn=je,x(ae)},Ee.clampFn=function(Ze,at){return Math.sqrt(Ze*Ze+at*at)<S.MINDRAG&&(Ze=0,at=0),[Ze,at]},d.init(Ee)}function Re(Ze,at){if(Ne)Ne(Ze,at);else{var lt=[Ze,-at],ot=[Math.cos(ue),Math.sin(ue)],bt=Math.abs(_.dot(lt,ot)/Math.sqrt(_.dot(lt,lt)));isNaN(bt)||(Ne=bt<.5?Fe:Xe)}var wt={};(function(ht){He!==null?ht[ne.id+".radialaxis.angle"]=He:de!==null&&(ht[ne.id+".radialaxis.range["+$+"]"]=de)})(wt),ae.emit("plotly_relayouting",wt)}function je(){He!==null?a.call("_guiRelayout",ae,ne.id+".radialaxis.angle",He):de!==null&&a.call("_guiRelayout",ae,ne.id+".radialaxis.range["+$+"]",de)}function Fe(Ze,at){if($!==0){var lt=Oe+Ze,ot=Se+at;He=Math.atan2(Te-ot,lt-ye),ne.vangles&&(He=re(He,ne.vangles)),He=j(He);var bt=h(ye,Te)+g(-He);se["radial-axis"].attr("transform",bt),se["radial-line"].select("line").attr("transform",bt);var wt=ne.gd._fullLayout,ht=wt[ne.id];ne.updateRadialAxisTitle(wt,ht,He)}}function Xe(Ze,at){var lt=_.dot([Ze,-at],[Math.cos(ue),Math.sin(ue)]);if(de=Ae-we*lt,we>0==($?de>ie:de<ge)){var ot=ae._fullLayout,bt=ot[ne.id];Ce.range[$]=de,Ce._rl[$]=de,ne.updateRadialAxis(ot,bt),ne.xaxis.setRange(),ne.xaxis.setScale(),ne.yaxis.setRange(),ne.yaxis.setScale();var wt=!1;for(var ht in ne.traceHash){var ct=ne.traceHash[ht],Tt=_.filterVisible(ct);ct[0][0].trace._module.plot(ae,ne,Tt,bt),a.traceIs(ht,"gl")&&Tt.length&&(wt=!0)}wt&&(v(ae),M(ae))}else de=null}},W.updateAngularDrag=function(K){var Y=this,$=Y.gd,ne=Y.layers,ae=Y.radius,se=Y.angularAxis,ce=Y.cx,me=Y.cy,ye=Y.cxx,Te=Y.cyy,Ce=S.angularDragBoxSize,pe=u.makeDragger(ne,"path","angulardrag",K.dragmode===!1?"none":"move"),fe={element:pe,gd:$};function Oe(Ee,Re){return Math.atan2(Te+Ce-Re,Ee-ye-Ce)}K.dragmode===!1?fe.dragmode=!1:T.select(pe).attr("d",Y.pathAnnulus(ae,ae+Ce)).attr("transform",h(ce,me)).call(y,"move");var Se,Me,ue,le,ie,ge,Ae=ne.frontplot.select(".scatterlayer").selectAll(".trace"),we=Ae.selectAll(".point"),Ne=Ae.selectAll(".textpoint");function He(Ee,Re){var je=Y.gd._fullLayout,Fe=je[Y.id],Xe=Oe(Se+Ee*K._invScaleX,Me+Re*K._invScaleY),Ze=j(Xe-ge);if(le=ue+Ze,ne.frontplot.attr("transform",h(Y.xOffset2,Y.yOffset2)+g([-Ze,ye,Te])),Y.vangles){ie=Y.radialAxisAngle+Ze;var at=h(ce,me)+g(-Ze),lt=h(ce,me)+g(-ie);ne.bg.attr("transform",at),ne["radial-grid"].attr("transform",at),ne["radial-axis"].attr("transform",lt),ne["radial-line"].select("line").attr("transform",lt),Y.updateRadialAxisTitle(je,Fe,ie)}else Y.clipPaths.forTraces.select("path").attr("transform",h(ye,Te)+g(Ze));we.each(function(){var Tt=T.select(this),Lt=t.getTranslate(Tt);Tt.attr("transform",h(Lt.x,Lt.y)+g([Ze]))}),Ne.each(function(){var Tt=T.select(this),Lt=Tt.select("text"),kt=t.getTranslate(Tt);Tt.attr("transform",g([Ze,Lt.attr("x"),Lt.attr("y")])+h(kt.x,kt.y))}),se.rotation=_.modHalf(le,360),Y.updateAngularAxis(je,Fe),Y._hasClipOnAxisFalse&&!_.isFullCircle(Y.sectorInRad)&&Ae.call(t.hideOutsideRangePoints,Y);var ot=!1;for(var bt in Y.traceHash)if(a.traceIs(bt,"gl")){var wt=Y.traceHash[bt],ht=_.filterVisible(wt);wt[0][0].trace._module.plot($,Y,ht,Fe),ht.length&&(ot=!0)}ot&&(v($),M($));var ct={};de(ct),$.emit("plotly_relayouting",ct)}function de(Ee){Ee[Y.id+".angularaxis.rotation"]=le,Y.vangles&&(Ee[Y.id+".radialaxis.angle"]=ie)}function Le(){Ne.select("text").attr("transform",null);var Ee={};de(Ee),a.call("_guiRelayout",$,Ee)}fe.prepFn=function(Ee,Re,je){var Fe=K[Y.id];ue=Fe.angularaxis.rotation;var Xe=pe.getBoundingClientRect();Se=Re-Xe.left,Me=je-Xe.top,$._fullLayout._calcInverseTransform($);var Ze=_.apply3DTransform(K._invTransform)(Se,Me);Se=Ze[0],Me=Ze[1],ge=Oe(Se,Me),fe.moveFn=He,fe.doneFn=Le,x($)},Y.vangles&&!_.isFullCircle(Y.sectorInRad)&&(fe.prepFn=_.noop,y(T.select(pe),null)),d.init(fe)},W.isPtInside=function(K){if(this.isSmith)return!0;var Y=this.sectorInRad,$=this.vangles,ne=this.angularAxis.c2g(K.theta),ae=this.radialAxis,se=ae.c2l(K.r),ce=ae._rl;return($?A.isPtInsidePolygon:_.isPtInsideSector)(se,ne,ce,Y,$)},W.pathArc=function(K){var Y=this.sectorInRad,$=this.vangles;return($?A.pathPolygon:_.pathArc)(K,Y[0],Y[1],$)},W.pathSector=function(K){var Y=this.sectorInRad,$=this.vangles;return($?A.pathPolygon:_.pathSector)(K,Y[0],Y[1],$)},W.pathAnnulus=function(K,Y){var $=this.sectorInRad,ne=this.vangles;return(ne?A.pathPolygonAnnulus:_.pathAnnulus)(K,Y,$[0],$[1],ne)},W.pathSubplot=function(){var K=this.innerRadius,Y=this.radius;return K?this.pathAnnulus(K,Y):this.pathSector(Y)},W.fillViewInitialKey=function(K,Y){K in this.viewInitial||(this.viewInitial[K]=Y)}},12101:function(F,L,e){var T=e(71828),b=e(21994),a=T.deg2rad,_=T.rad2deg;F.exports=function(g,h,o){switch(b(g,o),g._id){case"x":case"radialaxis":(function(t,i){var n=i._subplot;t.setGeometry=function(){var r=t._rl[0],s=t._rl[1],l=n.innerRadius,u=(n.radius-l)/(s-r),d=l/u,c=r>s?function(w){return w<=0}:function(w){return w>=0};t.c2g=function(w){var m=t.c2l(w)-r;return(c(m)?m:0)+d},t.g2c=function(w){return t.l2c(w+r-d)},t.g2p=function(w){return w*u},t.c2p=function(w){return t.g2p(t.c2g(w))}}})(g,h);break;case"angularaxis":(function(t,i){var n=t.type;if(n==="linear"){var r=t.d2c,s=t.c2d;t.d2c=function(l,u){return function(d,c){return c==="degrees"?a(d):d}(r(l),u)},t.c2d=function(l,u){return s(function(d,c){return c==="degrees"?_(d):d}(l,u))}}t.makeCalcdata=function(l,u){var d,c,w=l[u],m=l._length,f=function(p){return t.d2c(p,l.thetaunit)};if(w){if(T.isTypedArray(w)&&n==="linear"){if(m===w.length)return w;if(w.subarray)return w.subarray(0,m)}for(d=new Array(m),c=0;c<m;c++)d[c]=f(w[c])}else{var x=u+"0",y="d"+u,v=x in l?f(l[x]):0,M=l[y]?f(l[y]):(t.period||2*Math.PI)/m;for(d=new Array(m),c=0;c<m;c++)d[c]=v+c*M}return d},t.setGeometry=function(){var l,u,d,c,w=i.sector,m=w.map(a),f={clockwise:-1,counterclockwise:1}[t.direction],x=a(t.rotation),y=function(S){return f*S+x},v=function(S){return(S-x)/f};switch(n){case"linear":u=l=T.identity,c=a,d=_,t.range=T.isFullCircle(m)?[w[0],w[0]+360]:m.map(v).map(_);break;case"category":var M=t._categories.length,p=t.period?Math.max(t.period,M):M;p===0&&(p=1),u=c=function(S){return 2*S*Math.PI/p},l=d=function(S){return S*p/Math.PI/2},t.range=[0,p]}t.c2g=function(S){return y(u(S))},t.g2c=function(S){return l(v(S))},t.t2g=function(S){return y(c(S))},t.g2t=function(S){return d(v(S))}}})(g,h)}}},39779:function(F){F.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(F){function L(a){return a<0?-1:a>0?1:0}function e(a){var _=a[0],g=a[1];if(!isFinite(_)||!isFinite(g))return[1,0];var h=(_+1)*(_+1)+g*g;return[(_*_+g*g-1)/h,2*g/h]}function T(a,_){var g=_[0],h=_[1];return[g*a.radius+a.cx,-h*a.radius+a.cy]}function b(a,_){return _*a.radius}F.exports={smith:e,reactanceArc:function(a,_,g,h){var o=T(a,e([g,_])),t=o[0],i=o[1],n=T(a,e([h,_])),r=n[0],s=n[1];if(_===0)return["M"+t+","+i,"L"+r+","+s].join(" ");var l=b(a,1/Math.abs(_));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(_<0?1:0)+" "+r+","+s].join(" ")},resistanceArc:function(a,_,g,h){var o=b(a,1/(_+1)),t=T(a,e([_,g])),i=t[0],n=t[1],r=T(a,e([_,h])),s=r[0],l=r[1];if(L(g)!==L(h)){var u=T(a,e([_,0]));return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(0<g?0:1)+" "+u[0]+","+u[1],"A"+o+","+o+" 0 0,"+(h<0?0:1)+s+","+l].join(" ")}return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(h<g?0:1)+" "+s+","+l].join(" ")},smithTransform:T}},7504:function(F,L,e){var T=e(27659).AU,b=e(71828).counterRegex,a=e(77997),_=e(39779),g=_.attr,h=_.name,o=b(h),t={};t[g]={valType:"subplotid",dflt:h,editType:"calc"},F.exports={attr:g,name:h,idRoot:h,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,s=n._subplots[h],l=0;l<s.length;l++){var u=s[l],d=T(r,h,u),c=n[u]._subplot;c||(c=a(i,u,!0),n[u]._subplot=c),c.plot(d,n,i._promises)}},clean:function(i,n,r,s){for(var l=s._subplots[h]||[],u=0;u<l.length;u++){var d=l[u],c=s[d]._subplot;if(!n[d]&&c)for(var w in c.framework.remove(),c.clipPaths)c.clipPaths[w].remove()}},toSVG:e(93612).toSVG}},33419:function(F,L,e){var T=e(22399),b=e(13838),a=e(27670).Y,_=e(71828).extendFlat,g=e(30962).overrideAll,h=g({color:b.color,showline:_({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:_({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash},"plot","from-root"),o=g({ticklen:b.ticklen,tickwidth:_({},b.tickwidth,{dflt:2}),tickcolor:b.tickcolor,showticklabels:b.showticklabels,labelalias:b.labelalias,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,tickfont:b.tickfont,tickformat:b.tickformat,hoverformat:b.hoverformat,layer:b.layer},"plot","from-root"),t=_({visible:_({},b.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:_({},b.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},h,o),i=_({visible:_({},b.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:b.ticks,editType:"calc"},h,o);F.exports={domain:a({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:T.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},9558:function(F,L,e){var T,b,a,_=e(71828),g=e(7901),h=e(44467),o=e(49119),t=e(27659).NG,i=e(89426),n=e(96115),r=e(92128),s=e(21994),l=e(33419),u=e(39779),d=u.axisNames,c=(T=function(m){return m.slice().reverse().map(function(f){return-f}).concat([0]).concat(m)},b=String,a={},function(m){var f=b?b(m):m;if(f in a)return a[f];var x=T(m);return a[f]=x,x});function w(m,f,x,y){var v=x("bgcolor");y.bgColor=g.combine(v,y.paper_bgcolor);var M,p=t(y.fullData,u.name,y.id),S=y.layoutOut;function A(W,q){return x(M+"."+W,q)}for(var k=0;k<d.length;k++){M=d[k],_.isPlainObject(m[M])||(m[M]={});var C=m[M],P=h.newContainer(f,M);P._id=P._name=M,P._attr=y.id+"."+M,P._traceIndices=p.map(function(W){return W._expandedIndex});var R=A("visible");if(P.type="linear",s(P,S),i(C,P,A,P.type),R){var O,X,D,V,j=M==="realaxis";j&&A("side"),j?A("tickvals"):A("tickvals",c(f.realaxis.tickvals||l.realaxis.tickvals.dflt));var B=y.font||{};R&&(X=(O=A("color"))===C.color?O:B.color,D=B.size,V=B.family),n(C,P,A,P.type,{noTicklabelstep:!0,noAng:!j,noExp:!0,font:{color:X,size:D,family:V}}),_.coerce2(m,f,l,M+".ticklen"),_.coerce2(m,f,l,M+".tickwidth"),_.coerce2(m,f,l,M+".tickcolor",f.color),A("ticks")||(delete f[M].ticklen,delete f[M].tickwidth,delete f[M].tickcolor),r(C,P,A,{dfltColor:O,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[M]}),A("layer")}A("hoverformat"),delete P.type,P._input=C}}F.exports=function(m,f,x){o(m,f,x,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:w,font:f.font,paper_bgcolor:f.paper_bgcolor,fullData:x,layoutOut:f})}},49119:function(F,L,e){var T=e(71828),b=e(44467),a=e(27670).c;F.exports=function(_,g,h,o){var t,i,n=o.type,r=o.attributes,s=o.handleDefaults,l=o.partition||"x",u=g._subplots[n],d=u.length,c=d&&u[0].replace(/\d+$/,"");function w(y,v){return T.coerce(t,i,r,y,v)}for(var m=0;m<d;m++){var f=u[m];t=_[f]?_[f]:_[f]={},i=b.newContainer(g,f,c),o.noUirevision||w("uirevision",g.uirevision);var x={};x[l]=[m/d,(m+1)/d],a(i,g,w,x),o.id=f,s(t,i,w,o)}}},5386:function(F,L,e){var T=e(31562);function b(a){var _=a.description?" "+a.description:"",g=a.keys||[];if(g.length>0){for(var h=[],o=0;o<g.length;o++)h[o]="`"+g[o]+"`";_+="Finally, the template string has access to ",_=g.length===1?_+"variable "+h[0]:_+"variables "+h.slice(0,-1).join(", ")+" and "+h.slice(-1)+"."}return _}T.FORMAT_LINK,T.DATE_FORMAT_LINK,L.fF=function(a,_){a=a||{},b(_=_||{});var g={valType:"string",dflt:"",editType:a.editType||"none"};return a.arrayOk!==!1&&(g.arrayOk=!0),g},L.si=function(a,_){a=a||{},b(_=_||{});var g={valType:"string",dflt:"",editType:a.editType||"calc"};return a.arrayOk!==!1&&(g.arrayOk=!0),g},L.R=function(a,_){return _=_||{},(a=a||{}).newshape,b(_),{valType:"string",dflt:"",editType:a.editType||"arraydraw"}}},61639:function(F,L,e){var T=e(64380),b=e(27659).AU,a=e(71828).counterRegex,_="ternary";L.name=_;var g=L.attr="subplot";L.idRoot=_,L.idRegex=L.attrRegex=a(_),(L.attributes={})[g]={valType:"subplotid",dflt:"ternary",editType:"calc"},L.layoutAttributes=e(81367),L.supplyLayoutDefaults=e(25369),L.plot=function(h){for(var o=h._fullLayout,t=h.calcdata,i=o._subplots[_],n=0;n<i.length;n++){var r=i[n],s=b(t,_,r),l=o[r]._subplot;l||(l=new T({id:r,graphDiv:h,container:o._ternarylayer.node()},o),o[r]._subplot=l),l.plot(s,o,h._promises)}},L.clean=function(h,o,t,i){for(var n=i._subplots[_]||[],r=0;r<n.length;r++){var s=n[r],l=i[s]._subplot;!o[s]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},81367:function(F,L,e){var T=e(22399),b=e(27670).Y,a=e(13838),_=e(30962).overrideAll,g=e(1426).extendFlat,h={title:{text:a.title.text,font:a.title.font},color:a.color,tickmode:a.minor.tickmode,nticks:g({},a.nticks,{dflt:6,min:1}),tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,labelalias:a.labelalias,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:g({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:g({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,griddash:a.griddash,layer:a.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},o=F.exports=_({domain:b({name:"ternary"}),bgcolor:{valType:"color",dflt:T.background},sum:{valType:"number",dflt:1,min:0},aaxis:h,baxis:h,caxis:h},"plot","from-root");o.uirevision={valType:"any",editType:"none"},o.aaxis.uirevision=o.baxis.uirevision=o.caxis.uirevision={valType:"any",editType:"none"}},25369:function(F,L,e){var T=e(7901),b=e(44467),a=e(71828),_=e(49119),g=e(96115),h=e(89426),o=e(38701),t=e(26218),i=e(92128),n=e(81367),r=["aaxis","baxis","caxis"];function s(u,d,c,w){var m,f,x,y=c("bgcolor"),v=c("sum");w.bgColor=T.combine(y,w.paper_bgcolor);for(var M=0;M<r.length;M++)f=u[m=r[M]]||{},(x=b.newContainer(d,m))._name=m,l(f,x,w,d);var p=d.aaxis,S=d.baxis,A=d.caxis;p.min+S.min+A.min>=v&&(p.min=0,S.min=0,A.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,d,c,w){var m=n[d._name];function f(S,A){return a.coerce(u,d,m,S,A)}f("uirevision",w.uirevision),d.type="linear";var x=f("color"),y=x!==m.color.dflt?x:c.font.color,v=d._name.charAt(0).toUpperCase(),M="Component "+v,p=f("title.text",M);d._hovertitle=p===M?p:v,a.coerceFont(f,"title.font",{family:c.font.family,size:a.bigFont(c.font.size),color:y}),f("min"),t(u,d,f,"linear"),h(u,d,f,"linear"),g(u,d,f,"linear"),o(u,d,f,{outerTicks:!0}),f("showticklabels")&&(a.coerceFont(f,"tickfont",{family:c.font.family,size:c.font.size,color:y}),f("tickangle"),f("tickformat")),i(u,d,f,{dfltColor:x,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m}),f("hoverformat"),f("layer")}F.exports=function(u,d,c){_(u,d,c,{type:"ternary",attributes:n,handleDefaults:s,font:d.font,paper_bgcolor:d.paper_bgcolor})}},64380:function(F,L,e){var T=e(39898),b=e(84267),a=e(73972),_=e(71828),g=_.strTranslate,h=_._,o=e(7901),t=e(91424),i=e(21994),n=e(1426).extendFlat,r=e(74875),s=e(89298),l=e(28569),u=e(30211),d=e(64505),c=d.freeMode,w=d.rectMode,m=e(92998),f=e(47322).prepSelect,x=e(47322).selectOnClick,y=e(47322).clearOutline,v=e(47322).clearSelectionsCache,M=e(85555);function p(D,V){this.id=D.id,this.graphDiv=D.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}F.exports=p;var S=p.prototype;S.init=function(D){this.container=D._ternarylayer,this.defs=D._defs,this.layoutId=D._uid,this.traceHash={},this.layers={}},S.plot=function(D,V){var j=this,B=V[j.id],W=V._size;j._hasClipOnAxisFalse=!1;for(var q=0;q<D.length;q++)if(D[q][0].trace.cliponaxis===!1){j._hasClipOnAxisFalse=!0;break}j.updateLayers(B),j.adjustLayout(B,W),r.generalUpdatePerTraceModule(j.graphDiv,j,D,B),j.layers.plotbg.select("path").call(o.fill,B.bgcolor)},S.makeFramework=function(D){var V=this,j=V.graphDiv,B=D[V.id],W=V.clipId="clip"+V.layoutId+V.id,q=V.clipIdRelative="clip-relative"+V.layoutId+V.id;V.clipDef=_.ensureSingleById(D._clips,"clipPath",W,function(re){re.append("path").attr("d","M0,0Z")}),V.clipDefRelative=_.ensureSingleById(D._clips,"clipPath",q,function(re){re.append("path").attr("d","M0,0Z")}),V.plotContainer=_.ensureSingle(V.container,"g",V.id),V.updateLayers(B),t.setClipUrl(V.layers.backplot,W,j),t.setClipUrl(V.layers.grids,W,j)},S.updateLayers=function(D){var V=this.layers,j=["draglayer","plotbg","backplot","grids"];D.aaxis.layer==="below traces"&&j.push("aaxis","aline"),D.baxis.layer==="below traces"&&j.push("baxis","bline"),D.caxis.layer==="below traces"&&j.push("caxis","cline"),j.push("frontplot"),D.aaxis.layer==="above traces"&&j.push("aaxis","aline"),D.baxis.layer==="above traces"&&j.push("baxis","bline"),D.caxis.layer==="above traces"&&j.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(j,String),W=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var re=T.select(this);V[q]=re,q==="frontplot"?re.append("g").classed("scatterlayer",!0):q==="backplot"?re.append("g").classed("maplayer",!0):q==="plotbg"?re.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?re.append("path"):q==="grids"&&W.forEach(function(ee){V[ee]=re.append("g").classed("grid "+ee,!0)})}),B.order()};var A=Math.sqrt(4/3);S.adjustLayout=function(D,V){var j,B,W,q,re,ee,K=this,Y=D.domain,$=(Y.x[0]+Y.x[1])/2,ne=(Y.y[0]+Y.y[1])/2,ae=Y.x[1]-Y.x[0],se=Y.y[1]-Y.y[0],ce=ae*V.w,me=se*V.h,ye=D.sum,Te=D.aaxis.min,Ce=D.baxis.min,pe=D.caxis.min;ce>A*me?W=(q=me)*A:q=(W=ce)/A,re=ae*W/ce,ee=se*q/me,j=V.l+V.w*$-W/2,B=V.t+V.h*(1-ne)-q/2,K.x0=j,K.y0=B,K.w=W,K.h=q,K.sum=ye,K.xaxis={type:"linear",range:[Te+2*pe-ye,ye-Te-2*Ce],domain:[$-re/2,$+re/2],_id:"x"},i(K.xaxis,K.graphDiv._fullLayout),K.xaxis.setScale(),K.xaxis.isPtWithinRange=function(Ne){return Ne.a>=K.aaxis.range[0]&&Ne.a<=K.aaxis.range[1]&&Ne.b>=K.baxis.range[1]&&Ne.b<=K.baxis.range[0]&&Ne.c>=K.caxis.range[1]&&Ne.c<=K.caxis.range[0]},K.yaxis={type:"linear",range:[Te,ye-Ce-pe],domain:[ne-ee/2,ne+ee/2],_id:"y"},i(K.yaxis,K.graphDiv._fullLayout),K.yaxis.setScale(),K.yaxis.isPtWithinRange=function(){return!0};var fe=K.yaxis.domain[0],Oe=K.aaxis=n({},D.aaxis,{range:[Te,ye-Ce-pe],side:"left",tickangle:(+D.aaxis.tickangle||0)-30,domain:[fe,fe+ee*A],anchor:"free",position:0,_id:"y",_length:W});i(Oe,K.graphDiv._fullLayout),Oe.setScale();var Se=K.baxis=n({},D.baxis,{range:[ye-Te-pe,Ce],side:"bottom",domain:K.xaxis.domain,anchor:"free",position:0,_id:"x",_length:W});i(Se,K.graphDiv._fullLayout),Se.setScale();var Me=K.caxis=n({},D.caxis,{range:[ye-Te-Ce,pe],side:"right",tickangle:(+D.caxis.tickangle||0)+30,domain:[fe,fe+ee*A],anchor:"free",position:0,_id:"y",_length:W});i(Me,K.graphDiv._fullLayout),Me.setScale();var ue="M"+j+","+(B+q)+"h"+W+"l-"+W/2+",-"+q+"Z";K.clipDef.select("path").attr("d",ue),K.layers.plotbg.select("path").attr("d",ue);var le="M0,"+q+"h"+W+"l-"+W/2+",-"+q+"Z";K.clipDefRelative.select("path").attr("d",le);var ie=g(j,B);K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ie),K.clipDefRelative.select("path").attr("transform",null);var ge=g(j-Se._offset,B+q);K.layers.baxis.attr("transform",ge),K.layers.bgrid.attr("transform",ge);var Ae=g(j+W/2,B)+"rotate(30)"+g(0,-Oe._offset);K.layers.aaxis.attr("transform",Ae),K.layers.agrid.attr("transform",Ae);var we=g(j+W/2,B)+"rotate(-30)"+g(0,-Me._offset);K.layers.caxis.attr("transform",we),K.layers.cgrid.attr("transform",we),K.drawAxes(!0),K.layers.aline.select("path").attr("d",Oe.showline?"M"+j+","+(B+q)+"l"+W/2+",-"+q:"M0,0").call(o.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),K.layers.bline.select("path").attr("d",Se.showline?"M"+j+","+(B+q)+"h"+W:"M0,0").call(o.stroke,Se.linecolor||"#000").style("stroke-width",(Se.linewidth||0)+"px"),K.layers.cline.select("path").attr("d",Me.showline?"M"+(j+W/2)+","+B+"l"+W/2+","+q:"M0,0").call(o.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),K.graphDiv._context.staticPlot||K.initInteractions(),t.setClipUrl(K.layers.frontplot,K._hasClipOnAxisFalse?null:K.clipId,K.graphDiv)},S.drawAxes=function(D){var V=this,j=V.graphDiv,B=V.id.substr(7)+"title",W=V.layers,q=V.aaxis,re=V.baxis,ee=V.caxis;if(V.drawAx(q),V.drawAx(re),V.drawAx(ee),D){var K=Math.max(q.showticklabels?q.tickfont.size/2:0,(ee.showticklabels?.75*ee.tickfont.size:0)+(ee.ticks==="outside"?.87*ee.ticklen:0)),Y=(re.showticklabels?re.tickfont.size:0)+(re.ticks==="outside"?re.ticklen:0)+3;W["a-title"]=m.draw(j,"a"+B,{propContainer:q,propName:V.id+".aaxis.title",placeholder:h(j,"Click to enter Component A title"),attributes:{x:V.x0+V.w/2,y:V.y0-q.title.font.size/3-K,"text-anchor":"middle"}}),W["b-title"]=m.draw(j,"b"+B,{propContainer:re,propName:V.id+".baxis.title",placeholder:h(j,"Click to enter Component B title"),attributes:{x:V.x0-Y,y:V.y0+V.h+.83*re.title.font.size+Y,"text-anchor":"middle"}}),W["c-title"]=m.draw(j,"c"+B,{propContainer:ee,propName:V.id+".caxis.title",placeholder:h(j,"Click to enter Component C title"),attributes:{x:V.x0+V.w+Y,y:V.y0+V.h+.83*ee.title.font.size+Y,"text-anchor":"middle"}})}},S.drawAx=function(D){var V,j=this,B=j.graphDiv,W=D._name,q=W.charAt(0),re=D._id,ee=j.layers[W],K=q+"tickLayout",Y=(V=D).ticks+String(V.ticklen)+String(V.showticklabels);j[K]!==Y&&(ee.selectAll("."+re+"tick").remove(),j[K]=Y),D.setScale();var $=s.calcTicks(D),ne=s.clipEnds(D,$),ae=s.makeTransTickFn(D),se=s.getTickSigns(D)[2],ce=_.deg2rad(30),me=se*(D.linewidth||1)/2,ye=se*D.ticklen,Te=j.w,Ce=j.h,pe=q==="b"?"M0,"+me+"l"+Math.sin(ce)*ye+","+Math.cos(ce)*ye:"M"+me+",0l"+Math.cos(ce)*ye+","+-Math.sin(ce)*ye,fe={a:"M0,0l"+Ce+",-"+Te/2,b:"M0,0l-"+Te/2+",-"+Ce,c:"M0,0l-"+Ce+","+Te/2}[q];s.drawTicks(B,D,{vals:D.ticks==="inside"?ne:$,layer:ee,path:pe,transFn:ae,crisp:!1}),s.drawGrid(B,D,{vals:ne,layer:j.layers[q+"grid"],path:fe,transFn:ae,crisp:!1}),s.drawLabels(B,D,{vals:$,layer:ee,transFn:ae,labelFns:s.makeLabelFns(D,0,30)})};var k=M.MINZOOM/2+.87,C="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(.87*k+4.5)+"l2.6,1.5l-"+k/2+","+.87*k+"Z",P="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(.87*k+4.5)+"l-2.6,1.5l"+k/2+","+.87*k+"Z",R="m0,1l"+k/2+","+.87*k+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(.87*k+4.5)+"l-"+(k/2+2.6)+","+(.87*k+4.5)+"l2.6,1.5l"+k/2+",-"+.87*k+"Z",O=!0;function X(D){T.select(D).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){v(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var D,V,j,B,W,q,re,ee,K,Y,$,ne,ae=this,se=ae.layers.plotbg.select("path").node(),ce=ae.graphDiv,me=ce._fullLayout._zoomlayer;function ye(le){var ie={};return ie[ae.id+".aaxis.min"]=le.a,ie[ae.id+".baxis.min"]=le.b,ie[ae.id+".caxis.min"]=le.c,ie}function Te(le,ie){var ge=ce._fullLayout.clickmode;X(ce),le===2&&(ce.emit("plotly_doubleclick",null),a.call("_guiRelayout",ce,ye({a:0,b:0,c:0}))),ge.indexOf("select")>-1&&le===1&&x(ie,ce,[ae.xaxis],[ae.yaxis],ae.id,ae.dragOptions),ge.indexOf("event")>-1&&u.click(ce,ie,ae.id)}function Ce(le,ie){return 1-ie/ae.h}function pe(le,ie){return 1-(le+(ae.h-ie)/Math.sqrt(3))/ae.w}function fe(le,ie){return(le-(ae.h-ie)/Math.sqrt(3))/ae.w}function Oe(le,ie){var ge=j+le*D,Ae=B+ie*V,we=Math.max(0,Math.min(1,Ce(0,B),Ce(0,Ae))),Ne=Math.max(0,Math.min(1,pe(j,B),pe(ge,Ae))),He=Math.max(0,Math.min(1,fe(j,B),fe(ge,Ae))),de=(we/2+He)*ae.w,Le=(1-we/2-Ne)*ae.w,Ee=(de+Le)/2,Re=Le-de,je=(1-we)*ae.h,Fe=je-Re/A;Re<M.MINZOOM?(re=W,$.attr("d",K),ne.attr("d","M0,0Z")):(re={a:W.a+we*q,b:W.b+Ne*q,c:W.c+He*q},$.attr("d",K+"M"+de+","+je+"H"+Le+"L"+Ee+","+Fe+"L"+de+","+je+"Z"),ne.attr("d","M"+j+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+de+","+je+C+"M"+Le+","+je+P+"M"+Ee+","+Fe+R)),Y||($.transition().style("fill",ee>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200),Y=!0),ce.emit("plotly_relayouting",ye(re))}function Se(){X(ce),re!==W&&(a.call("_guiRelayout",ce,ye(re)),O&&ce.data&&ce._context.showTips&&(_.notifier(h(ce,"Double-click to zoom back out"),"long"),O=!1))}function Me(le,ie){var ge=le/ae.xaxis._m,Ae=ie/ae.yaxis._m,we=[(re={a:W.a-Ae,b:W.b+(ge+Ae)/2,c:W.c-(ge-Ae)/2}).a,re.b,re.c].sort(_.sorterAsc),Ne=we.indexOf(re.a),He=we.indexOf(re.b),de=we.indexOf(re.c);we[0]<0&&(we[1]+we[0]/2<0?(we[2]+=we[0]+we[1],we[0]=we[1]=0):(we[2]+=we[0]/2,we[1]+=we[0]/2,we[0]=0),re={a:we[Ne],b:we[He],c:we[de]},ie=(W.a-re.a)*ae.yaxis._m,le=(W.c-re.c-W.b+re.b)*ae.xaxis._m);var Le=g(ae.x0+le,ae.y0+ie);ae.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Le);var Ee=g(-le,-ie);ae.clipDefRelative.select("path").attr("transform",Ee),ae.aaxis.range=[re.a,ae.sum-re.b-re.c],ae.baxis.range=[ae.sum-re.a-re.c,re.b],ae.caxis.range=[ae.sum-re.a-re.b,re.c],ae.drawAxes(!1),ae._hasClipOnAxisFalse&&ae.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ae),ce.emit("plotly_relayouting",ye(re))}function ue(){a.call("_guiRelayout",ce,ye(re))}this.dragOptions={element:se,gd:ce,plotinfo:{id:ae.id,domain:ce._fullLayout[ae.id].domain,xaxis:ae.xaxis,yaxis:ae.yaxis},subplot:ae.id,prepFn:function(le,ie,ge){ae.dragOptions.xaxes=[ae.xaxis],ae.dragOptions.yaxes=[ae.yaxis],D=ce._fullLayout._invScaleX,V=ce._fullLayout._invScaleY;var Ae=ae.dragOptions.dragmode=ce._fullLayout.dragmode;c(Ae)?ae.dragOptions.minDrag=1:ae.dragOptions.minDrag=void 0,Ae==="zoom"?(ae.dragOptions.moveFn=Oe,ae.dragOptions.clickFn=Te,ae.dragOptions.doneFn=Se,function(we,Ne,He){var de=se.getBoundingClientRect();j=Ne-de.left,B=He-de.top,ce._fullLayout._calcInverseTransform(ce);var Le=ce._fullLayout._invTransform,Ee=_.apply3DTransform(Le)(j,B);j=Ee[0],B=Ee[1],W={a:ae.aaxis.range[0],b:ae.baxis.range[1],c:ae.caxis.range[1]},re=W,q=ae.aaxis.range[1]-W.a,ee=b(ae.graphDiv._fullLayout[ae.id].bgcolor).getLuminance(),K="M0,"+ae.h+"L"+ae.w/2+", 0L"+ae.w+","+ae.h+"Z",Y=!1,$=me.append("path").attr("class","zoombox").attr("transform",g(ae.x0,ae.y0)).style({fill:ee>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",K),ne=me.append("path").attr("class","zoombox-corners").attr("transform",g(ae.x0,ae.y0)).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ae.clearOutline(ce)}(0,ie,ge)):Ae==="pan"?(ae.dragOptions.moveFn=Me,ae.dragOptions.clickFn=Te,ae.dragOptions.doneFn=ue,W={a:ae.aaxis.range[0],b:ae.baxis.range[1],c:ae.caxis.range[1]},re=W,ae.clearOutline(ce)):(w(Ae)||c(Ae))&&f(le,ie,ge,ae.dragOptions,Ae)}},se.onmousemove=function(le){u.hover(ce,le,ae.id),ce._fullLayout._lasthover=se,ce._fullLayout._hoversubplot=ae.id},se.onmouseout=function(le){ce._dragging||l.unhover(ce,le)},l.init(this.dragOptions)}},73972:function(F,L,e){var T=e(47769),b=e(64213),a=e(75138),_=e(41965),g=e(24401).addStyleRule,h=e(1426),o=e(9012),t=e(10820),i=h.extendFlat,n=h.extendDeepAll;function r(x){var y=x.name,v=x.categories,M=x.meta;if(L.modules[y])T.log("Type "+y+" already registered");else{L.subplotsRegistry[x.basePlotModule.name]||function(O){var X=O.name;if(L.subplotsRegistry[X])T.log("Plot type "+X+" already registered.");else for(var D in d(O),L.subplotsRegistry[X]=O,L.componentsRegistry)m(D,O.name)}(x.basePlotModule);for(var p={},S=0;S<v.length;S++)p[v[S]]=!0,L.allCategories[v[S]]=!0;for(var A in L.modules[y]={_module:x,categories:p},M&&Object.keys(M).length&&(L.modules[y].meta=M),L.allTypes.push(y),L.componentsRegistry)c(A,y);x.layoutAttributes&&i(L.traceLayoutAttributes,x.layoutAttributes);var k=x.basePlotModule,C=k.name;if(C==="mapbox"){var P=k.constants.styleRules;for(var R in P)g(".js-plotly-plot .plotly .mapboxgl-"+R,P[R])}C!=="geo"&&C!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function s(x){if(typeof x.name!="string")throw new Error("Component module *name* must be a string.");var y=x.name;for(var v in L.componentsRegistry[y]=x,x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&a(L.layoutArrayContainers,y),d(x)),L.modules)c(y,v);for(var M in L.subplotsRegistry)m(y,M);for(var p in L.transformsRegistry)w(y,p);x.schema&&x.schema.layout&&n(t,x.schema.layout)}function l(x){if(typeof x.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+x.name,v=typeof x.transform=="function",M=typeof x.calcTransform=="function";if(!v&&!M)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var p in v&&M&&T.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),_(x.attributes)||T.log(y+" registered without an *attributes* object."),typeof x.supplyDefaults!="function"&&T.log(y+" registered without a *supplyDefaults* method."),L.transformsRegistry[x.name]=x,L.componentsRegistry)w(p,x.name)}function u(x){var y=x.name,v=y.split("-")[0],M=x.dictionary,p=x.format,S=M&&Object.keys(M).length,A=p&&Object.keys(p).length,k=L.localeRegistry,C=k[y];if(C||(k[y]=C={}),v!==y){var P=k[v];P||(k[v]=P={}),S&&P.dictionary===C.dictionary&&(P.dictionary=M),A&&P.format===C.format&&(P.format=p)}S&&(C.dictionary=M),A&&(C.format=p)}function d(x){if(x.layoutAttributes){var y=x.layoutAttributes._arrayAttrRegexps;if(y)for(var v=0;v<y.length;v++)a(L.layoutArrayRegexes,y[v])}}function c(x,y){var v=L.componentsRegistry[x].schema;if(v&&v.traces){var M=v.traces[y];M&&n(L.modules[y]._module.attributes,M)}}function w(x,y){var v=L.componentsRegistry[x].schema;if(v&&v.transforms){var M=v.transforms[y];M&&n(L.transformsRegistry[y].attributes,M)}}function m(x,y){var v=L.componentsRegistry[x].schema;if(v&&v.subplots){var M=L.subplotsRegistry[y],p=M.layoutAttributes,S=M.attr==="subplot"?M.name:M.attr;Array.isArray(S)&&(S=S[0]);var A=v.subplots[S];p&&A&&n(p,A)}}function f(x){return typeof x=="object"&&(x=x.type),x}L.modules={},L.allCategories={},L.allTypes=[],L.subplotsRegistry={},L.transformsRegistry={},L.componentsRegistry={},L.layoutArrayContainers=[],L.layoutArrayRegexes=[],L.traceLayoutAttributes={},L.localeRegistry={},L.apiMethodRegistry={},L.collectableSubplotTypes=null,L.register=function(x){if(L.collectableSubplotTypes=null,!x)throw new Error("No argument passed to Plotly.register.");x&&!Array.isArray(x)&&(x=[x]);for(var y=0;y<x.length;y++){var v=x[y];if(!v)throw new Error("Invalid module was attempted to be registered!");switch(v.moduleType){case"trace":r(v);break;case"transform":l(v);break;case"component":s(v);break;case"locale":u(v);break;case"apiMethod":var M=v.name;L.apiMethodRegistry[M]=v.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},L.getModule=function(x){var y=L.modules[f(x)];return!!y&&y._module},L.traceIs=function(x,y){if((x=f(x))==="various")return!1;var v=L.modules[x];return v||(x&&T.log("Unrecognized trace type "+x+"."),v=L.modules[o.type.dflt]),!!v.categories[y]},L.getTransformIndices=function(x,y){for(var v=[],M=x.transforms||[],p=0;p<M.length;p++)M[p].type===y&&v.push(p);return v},L.hasTransform=function(x,y){for(var v=x.transforms||[],M=0;M<v.length;M++)if(v[M].type===y)return!0;return!1},L.getComponentMethod=function(x,y){var v=L.componentsRegistry[x];return v&&v[y]||b},L.call=function(){var x=arguments[0],y=[].slice.call(arguments,1);return L.apiMethodRegistry[x].apply(null,y)}},61914:function(F,L,e){var T=e(73972),b=e(71828),a=b.extendFlat,_=b.extendDeep;function g(h){var o;switch(h){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}F.exports=function(h,o){var t,i,n=h.data,r=h.layout,s=_([],n),l=_({},r,g(o.tileClass)),u=h._context||{};if(o.width&&(l.width=o.width),o.height&&(l.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){l.annotations=[];var d=Object.keys(l);for(t=0;t<d.length;t++)i=d[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[d[t]].title={text:""});for(t=0;t<s.length;t++){var c=s[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),T.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(o.annotations))for(t=0;t<o.annotations.length;t++)l.annotations.push(o.annotations[t]);var w=Object.keys(l).filter(function(v){return v.match(/^scene\d*$/)});if(w.length){var m={};for(o.tileClass==="thumbnail"&&(m={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<w.length;t++){var f=l[w[t]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),a(f.xaxis,m),a(f.yaxis,m),a(f.zaxis,m),f._scene=null}}var x=document.createElement("div");o.tileClass&&(x.className=o.tileClass);var y={gd:x,td:x,layout:l,data:s,config:{staticPlot:o.staticPlot===void 0||o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return o.setBackground!=="transparent"&&(y.config.setBackground=o.setBackground||"opaque"),y.gd.defaultLayout=g(o.tileClass),y}},7239:function(F,L,e){var T=e(71828),b=e(403),a=e(22435),_=e(25095);F.exports=function(g,h){var o;return T.isPlainObject(g)||(o=T.getGraphDiv(g)),(h=h||{}).format=h.format||"png",h.width=h.width||null,h.height=h.height||null,h.imageDataOnly=!0,new Promise(function(t,i){o&&o._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),T.isIE()&&h.format!=="svg"&&i(new Error(_.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var n=b(g,h),r=h.filename||g.fn||"newplot";r+="."+h.format.replace("-","."),n.then(function(s){return o&&(o._snapshotInProgress=!1),a(s,r,h.format)}).then(function(s){t(s)}).catch(function(s){o&&(o._snapshotInProgress=!1),i(s)})})}},22435:function(F,L,e){var T=e(71828),b=e(25095);F.exports=function(a,_,g){var h=document.createElement("a"),o="download"in h;return new Promise(function(t,i){var n,r;if(T.isIE())return n=b.createBlob(a,"svg"),window.navigator.msSaveBlob(n,_),n=null,t(_);if(o)return n=b.createBlob(a,g),r=b.createObjectURL(n),h.href=r,h.download=_,document.body.appendChild(h),h.click(),document.body.removeChild(h),b.revokeObjectURL(r),n=null,t(_);if(T.isSafari()){var s=g==="svg"?",":";base64,";return b.octetStream(s+encodeURIComponent(a)),t(_)}i(new Error("download error"))})}},25095:function(F,L,e){var T=e(73972);L.getDelay=function(a){return a._has&&(a._has("gl3d")||a._has("gl2d")||a._has("mapbox"))?500:0},L.getRedrawFunc=function(a){return function(){T.getComponentMethod("colorbar","draw")(a)}},L.encodeSVG=function(a){return"data:image/svg+xml,"+encodeURIComponent(a)},L.encodeJSON=function(a){return"data:application/json,"+encodeURIComponent(a)};var b=window.URL||window.webkitURL;L.createObjectURL=function(a){return b.createObjectURL(a)},L.revokeObjectURL=function(a){return b.revokeObjectURL(a)},L.createBlob=function(a,_){if(_==="svg")return new window.Blob([a],{type:"image/svg+xml;charset=utf-8"});if(_==="full-json")return new window.Blob([a],{type:"application/json;charset=utf-8"});var g=function(h){for(var o=h.length,t=new ArrayBuffer(o),i=new Uint8Array(t),n=0;n<o;n++)i[n]=h.charCodeAt(n);return t}(window.atob(a));return new window.Blob([g],{type:"image/"+_})},L.octetStream=function(a){document.location.href="data:application/octet-stream"+a},L.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,L.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(F,L,e){var T=e(25095),b={getDelay:T.getDelay,getRedrawFunc:T.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};F.exports=b},70942:function(F,L,e){var T=e(71828),b=e(15398).EventEmitter,a=e(25095);F.exports=function(_){var g=_.emitter||new b,h=new Promise(function(o,t){var i=window.Image,n=_.svg,r=_.format||"png";if(T.isIE()&&r!=="svg"){var s=new Error(a.MSG_IE_BAD_FORMAT);return t(s),_.promise?h:g.emit("error",s)}var l,u,d=_.canvas,c=_.scale||1,w=_.width||300,m=_.height||150,f=c*w,x=c*m,y=d.getContext("2d",{willReadFrequently:!0}),v=new i;r==="svg"||T.isSafari()?u=a.encodeSVG(n):(l=a.createBlob(n,"svg"),u=a.createObjectURL(l)),d.width=f,d.height=x,v.onload=function(){var M;switch(l=null,a.revokeObjectURL(u),r!=="svg"&&y.drawImage(v,0,0,f,x),r){case"jpeg":M=d.toDataURL("image/jpeg");break;case"png":M=d.toDataURL("image/png");break;case"webp":M=d.toDataURL("image/webp");break;case"svg":M=u;break;default:var p="Image format is not jpeg, png, svg or webp.";if(t(new Error(p)),!_.promise)return g.emit("error",p)}o(M),_.promise||g.emit("success",M)},v.onerror=function(M){if(l=null,a.revokeObjectURL(u),t(M),!_.promise)return g.emit("error",M)},v.src=u});return _.promise?h:g}},56395:function(F,L,e){var T=e(15398).EventEmitter,b=e(73972),a=e(71828),_=e(25095),g=e(61914),h=e(5900),o=e(70942);F.exports=function(t,i){var n=new T,r=g(t,{format:"png"}),s=r.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var l=_.getRedrawFunc(s);return b.call("_doPlot",s,r.data,r.layout,r.config).then(l).then(function(){var u=_.getDelay(s._fullLayout);setTimeout(function(){var d=h(s),c=document.createElement("canvas");c.id=a.randstr(),(n=o({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:c,emitter:n,svg:d})).clean=function(){s&&document.body.removeChild(s)}},u)}).catch(function(u){n.emit("error",u)}),n}},5900:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(7901),g=e(77922),h=/"/g,o="TOBESTRIPPED",t=new RegExp('("'+o+")|("+o+'")',"g");F.exports=function(i,n,r){var s,l=i._fullLayout,u=l._paper,d=l._toppaper,c=l.width,w=l.height;u.insert("rect",":first-child").call(a.setRect,0,0,c,w).call(_.fill,l.paper_bgcolor);var m=l._basePlotModules||[];for(s=0;s<m.length;s++){var f=m[s];f.toSVG&&f.toSVG(i)}if(d){var x=d.node().childNodes,y=Array.prototype.slice.call(x);for(s=0;s<y.length;s++){var v=y[s];v.childNodes.length&&u.node().appendChild(v)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var p=T.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){p.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&p.style("font-family",S.replace(h,o))}else p.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var p=T.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&p.style("fill",S.replace(h,o));var A=this.style.stroke;A&&A.indexOf("url(")!==-1&&p.style("stroke",A.replace(h,o))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(g.xmlns,"xmlns",g.svg),u.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink),n==="svg"&&r&&(u.attr("width",r*c),u.attr("height",r*w),u.attr("viewBox","0 0 "+c+" "+w));var M=new window.XMLSerializer().serializeToString(u.node());return M=(M=(M=function(p){var S=T.select("body").append("div").style({display:"none"}).html(""),A=p.replace(/(&[^;]*;)/gi,function(k){return k==="&lt;"?"&#60;":k==="&rt;"?"&#62;":k.indexOf("<")!==-1||k.indexOf(">")!==-1?"":S.html(k).text()});return S.remove(),A}(M)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),b.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},75341:function(F,L,e){var T=e(71828);F.exports=function(b,a){for(var _=0;_<b.length;_++)b[_].i=_;T.mergeArray(a.text,b,"tx"),T.mergeArray(a.hovertext,b,"htx");var g=a.marker;if(g){T.mergeArray(g.opacity,b,"mo",!0),T.mergeArray(g.color,b,"mc");var h=g.line;h&&(T.mergeArray(h.color,b,"mlc"),T.mergeArrayCastPositive(h.width,b,"mlw"))}}},1486:function(F,L,e){var T=e(82196),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(5386).si,g=e(50693),h=e(41940),o=e(97313),t=e(79952).u,i=e(1426).extendFlat,n=h({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=i({},T.marker.line.width,{dflt:0}),s=i({width:r,editType:"calc"},g("marker.line")),l=i({line:s,editType:"calc"},g("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});F.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:T.text,texttemplate:_({editType:"plot"},{keys:o.eventDataKeys}),hovertext:T.hovertext,hovertemplate:a({},{keys:o.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},n,{}),insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},T.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:{marker:{opacity:T.selected.marker.opacity,color:T.selected.marker.color,editType:"style"},textfont:T.selected.textfont,editType:"style"},unselected:{marker:{opacity:T.unselected.marker.opacity,color:T.unselected.marker.color,editType:"style"},textfont:T.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(F,L,e){var T=e(89298),b=e(42973),a=e(52075).hasColorscale,_=e(78803),g=e(75341),h=e(66279);F.exports=function(o,t){var i,n,r,s,l,u,d=T.getFromId(o,t.xaxis||"x"),c=T.getFromId(o,t.yaxis||"y"),w={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=d.makeCalcdata(t,"x",w),r=c.makeCalcdata(t,"y"),s=b(t,c,"y",r),l=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",w),r=d.makeCalcdata(t,"x"),s=b(t,d,"x",r),l=!!t.xperiodalignment,u="x"),n=s.vals;for(var m=Math.min(n.length,i.length),f=new Array(m),x=0;x<m;x++)f[x]={p:n[x],s:i[x]},l&&(f[x].orig_p=r[x],f[x][u+"End"]=s.ends[x],f[x][u+"Start"]=s.starts[x]),t.ids&&(f[x].id=String(t.ids[x]));return a(t,"marker")&&_(o,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),a(t,"marker.line")&&_(o,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),g(f,t),h(f,t),f}},97313:function(F){F.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(F,L,e){var T=e(92770),b=e(71828).isArrayOrTypedArray,a=e(50606).BADNUM,_=e(73972),g=e(89298),h=e(99082).getAxisGroup,o=e(61546);function t(m,f,x,y,v){if(y.length){var M,p,S,A;switch(function(k,C){var P,R;for(P=0;P<C.length;P++){var O,X=C[P],D=X[0].trace,V=D.type==="funnel"?D._base:D.base,j=D.orientation==="h"?D.xcalendar:D.ycalendar,B=k.type==="category"||k.type==="multicategory"?function(){return null}:k.d2c;if(b(V)){for(R=0;R<Math.min(V.length,X.length);R++)O=B(V[R],0,j),T(O)?(X[R].b=+O,X[R].hasB=1):X[R].b=0;for(;R<X.length;R++)X[R].b=0}else{O=B(V,0,j);var W=T(O);for(O=W?O:0,R=0;R<X.length;R++)X[R].b=O,W&&(X[R].hasB=1)}}}(x,y),v.mode){case"overlay":i(f,x,y,v);break;case"group":for(M=[],p=[],S=0;S<y.length;S++)(A=y[S])[0].trace.offset===void 0?p.push(A):M.push(A);p.length&&function(k,C,P,R,O){var X=new o(R,{posAxis:C,sepNegVal:!1,overlapNoMerge:!O.norm});(function(D,V,j,B){for(var W=D._fullLayout,q=j.positions,re=j.distinctPositions,ee=j.minDiff,K=j.traces,Y=K.length,$=q.length!==re.length,ne=ee*(1-B.gap),ae=h(W,V._id)+K[0][0].trace.orientation,se=W._alignmentOpts[ae]||{},ce=0;ce<Y;ce++){var me,ye,Te=K[ce],Ce=Te[0].trace,pe=se[Ce.alignmentgroup]||{},fe=Object.keys(pe.offsetGroups||{}).length,Oe=(me=fe?ne/fe:$?ne/Y:ne)*(1-(B.groupgap||0));ye=fe?((2*Ce._offsetIndex+1-fe)*me-Oe)/2:$?((2*ce+1-Y)*me-Oe)/2:-Oe/2;var Se=Te[0].t;Se.barwidth=Oe,Se.poffset=ye,Se.bargroupwidth=ne,Se.bardelta=ee}j.binWidth=K[0][0].t.barwidth/100,r(j),s(V,j),l(V,j,$)})(k,C,X,O),function(D,V){for(var j=D.traces,B=0;B<j.length;B++){var W=j[B];if(W[0].trace.base===void 0)for(var q=new o([W],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<W.length;re++){var ee=W[re];if(ee.p!==a){var K=q.put(ee.p,ee.b+ee.s);K&&(ee.b=K)}}}}(X,C),O.norm?(d(X),c(P,X,O)):u(P,X)}(m,f,x,p,v),M.length&&i(f,x,M,v);break;case"stack":case"relative":for(M=[],p=[],S=0;S<y.length;S++)(A=y[S])[0].trace.base===void 0?p.push(A):M.push(A);p.length&&function(k,C,P,R,O){var X=new o(R,{posAxis:C,sepNegVal:O.mode==="relative",overlapNoMerge:!(O.norm||O.mode==="stack"||O.mode==="relative")});n(C,X,O),function(W,q,re){var ee,K,Y,$,ne,ae,se=w(W),ce=q.traces;for($=0;$<ce.length;$++)if((K=(ee=ce[$])[0].trace).type==="funnel")for(ne=0;ne<ee.length;ne++)(ae=ee[ne]).s!==a&&q.put(ae.p,-.5*ae.s);for($=0;$<ce.length;$++){Y=(K=(ee=ce[$])[0].trace).type==="funnel";var me=[];for(ne=0;ne<ee.length;ne++)if((ae=ee[ne]).s!==a){var ye;ye=Y?ae.s:ae.s+ae.b;var Te=q.put(ae.p,ye),Ce=Te+ye;ae.b=Te,ae[se]=Ce,re.norm||(me.push(Ce),ae.hasB&&me.push(Te))}re.norm||(K._extremes[W._id]=g.findExtremes(W,me,{tozero:!0,padded:!0}))}}(P,X,O);for(var D=0;D<R.length;D++)for(var V=R[D],j=0;j<V.length;j++){var B=V[j];B.s!==a&&B.b+B.s===X.get(B.p,B.s)&&(B._outmost=!0)}O.norm&&c(P,X,O)}(0,f,x,p,v),M.length&&i(f,x,M,v)}(function(k,C){var P,R,O,X=w(C),D={},V=1/0,j=-1/0;for(P=0;P<k.length;P++)for(O=k[P],R=0;R<O.length;R++){var B=O[R].p;T(B)&&(V=Math.min(V,B),j=Math.max(j,B))}var W=1e4/(j-V),q=D.round=function(ae){return String(Math.round(W*(ae-V)))};for(P=0;P<k.length;P++){(O=k[P])[0].t.extents=D;var re=O[0].t.poffset,ee=Array.isArray(re);for(R=0;R<O.length;R++){var K=O[R],Y=K[X]-K.w/2;if(T(Y)){var $=K[X]+K.w/2,ne=q(K.p);D[ne]?D[ne]=[Math.min(Y,D[ne][0]),Math.max($,D[ne][1])]:D[ne]=[Y,$]}K.p0=K.p+(ee?re[R]:re),K.p1=K.p0+K.w,K.s0=K.b,K.s1=K.s0+K.s}}})(y,f)}}function i(m,f,x,y){for(var v=0;v<x.length;v++){var M=x[v],p=new o([M],{posAxis:m,sepNegVal:!1,overlapNoMerge:!y.norm});n(m,p,y),y.norm?(d(p),c(f,p,y)):u(f,p)}}function n(m,f,x){for(var y=f.minDiff,v=f.traces,M=y*(1-x.gap),p=M*(1-(x.groupgap||0)),S=-p/2,A=0;A<v.length;A++){var k=v[A][0].t;k.barwidth=p,k.poffset=S,k.bargroupwidth=M,k.bardelta=y}f.binWidth=v[0][0].t.barwidth/100,r(f),s(m,f),l(m,f)}function r(m){var f,x,y=m.traces;for(f=0;f<y.length;f++){var v,M=y[f],p=M[0],S=p.trace,A=p.t,k=S._offset||S.offset,C=A.poffset;if(b(k)){for(v=Array.prototype.slice.call(k,0,M.length),x=0;x<v.length;x++)T(v[x])||(v[x]=C);for(x=v.length;x<M.length;x++)v.push(C);A.poffset=v}else k!==void 0&&(A.poffset=k);var P=S._width||S.width,R=A.barwidth;if(b(P)){var O=Array.prototype.slice.call(P,0,M.length);for(x=0;x<O.length;x++)T(O[x])||(O[x]=R);for(x=O.length;x<M.length;x++)O.push(R);if(A.barwidth=O,k===void 0){for(v=[],x=0;x<M.length;x++)v.push(C+(R-O[x])/2);A.poffset=v}}else P!==void 0&&(A.barwidth=P,k===void 0&&(A.poffset=C+(R-P)/2))}}function s(m,f){for(var x=f.traces,y=w(m),v=0;v<x.length;v++)for(var M=x[v],p=M[0].t,S=p.poffset,A=Array.isArray(S),k=p.barwidth,C=Array.isArray(k),P=0;P<M.length;P++){var R=M[P],O=R.w=C?k[P]:k;R.p===void 0&&(R.p=R[y],R["orig_"+y]=R[y]);var X=(A?S[P]:S)+O/2;R[y]=R.p+X}}function l(m,f,x){var y=f.traces,v=f.minDiff/2;g.minDtick(m,f.minDiff,f.distinctPositions[0],x);for(var M=0;M<y.length;M++){var p,S,A,k,C=y[M],P=C[0],R=P.trace,O=[];for(k=0;k<C.length;k++)S=(p=C[k]).p-v,A=p.p+v,O.push(S,A);if(R.width||R.offset){var X=P.t,D=X.poffset,V=X.barwidth,j=Array.isArray(D),B=Array.isArray(V);for(k=0;k<C.length;k++){p=C[k];var W=j?D[k]:D,q=B?V[k]:V;A=(S=p.p+W)+q,O.push(S,A)}}R._extremes[m._id]=g.findExtremes(m,O,{padded:!1})}}function u(m,f){for(var x=f.traces,y=w(m),v=0;v<x.length;v++){for(var M=x[v],p=M[0].trace,S=p.type==="scatter",A=p.orientation==="v",k=[],C=!1,P=0;P<M.length;P++){var R=M[P],O=S?0:R.b,X=S?A?R.y:R.x:O+R.s;R[y]=X,k.push(X),R.hasB&&k.push(O),R.hasB&&R.b||(C=!0)}p._extremes[m._id]=g.findExtremes(m,k,{tozero:C,padded:!0})}}function d(m){for(var f=m.traces,x=0;x<f.length;x++)for(var y=f[x],v=0;v<y.length;v++){var M=y[v];M.s!==a&&m.put(M.p,M.b+M.s)}}function c(m,f,x){var y=f.traces,v=w(m),M=x.norm==="fraction"?1:100,p=M/1e9,S=m.l2c(m.c2l(0)),A=x.mode==="stack"?M:S;function k(re){return T(m.c2l(re))&&(re<S-p||re>A+p||!T(S))}for(var C=0;C<y.length;C++){for(var P=y[C],R=P[0].trace,O=[],X=!1,D=!1,V=0;V<P.length;V++){var j=P[V];if(j.s!==a){var B=Math.abs(M/f.get(j.p,j.s));j.b*=B,j.s*=B;var W=j.b,q=W+j.s;j[v]=q,O.push(q),D=D||k(q),j.hasB&&(O.push(W),D=D||k(W)),j.hasB&&j.b||(X=!0)}}R._extremes[m._id]=g.findExtremes(m,O,{tozero:X,padded:D})}}function w(m){return m._id.charAt(0)}F.exports={crossTraceCalc:function(m,f){for(var x=f.xaxis,y=f.yaxis,v=m._fullLayout,M=m._fullData,p=m.calcdata,S=[],A=[],k=0;k<M.length;k++){var C=M[k];if(C.visible===!0&&_.traceIs(C,"bar")&&C.xaxis===x._id&&C.yaxis===y._id&&(C.orientation==="h"?S.push(p[k]):A.push(p[k]),C._computePh))for(var P=m.calcdata[k],R=0;R<P.length;R++)typeof P[R].ph0=="function"&&(P[R].ph0=P[R].ph0()),typeof P[R].ph1=="function"&&(P[R].ph1=P[R].ph1())}var O={xCat:x.type==="category"||x.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:v.barmode,norm:v.barnorm,gap:v.bargap,groupgap:v.bargroupgap};t(m,x,y,A,O),t(m,y,x,S,O)},setGroupPositions:t}},90769:function(F,L,e){var T=e(71828),b=e(7901),a=e(73972),_=e(67513),g=e(73927),h=e(98340),o=e(26125),t=e(1486),i=T.coerceFont;function n(r,s,l,u,d,c){var w=(c=c||{}).moduleHasSelected!==!1,m=c.moduleHasUnselected!==!1,f=c.moduleHasConstrain!==!1,x=c.moduleHasCliponaxis!==!1,y=c.moduleHasTextangle!==!1,v=c.moduleHasInsideanchor!==!1,M=!!c.hasPathbar,p=Array.isArray(d)||d==="auto",S=p||d==="inside",A=p||d==="outside";if(S||A){var k=i(u,"textfont",l.font),C=T.extendFlat({},k),P=!(r.textfont&&r.textfont.color);if(P&&delete C.color,i(u,"insidetextfont",C),M){var R=T.extendFlat({},k);P&&delete R.color,i(u,"pathbar.textfont",R)}A&&i(u,"outsidetextfont",k),w&&u("selected.textfont.color"),m&&u("unselected.textfont.color"),f&&u("constraintext"),x&&u("cliponaxis"),y&&u("textangle"),u("texttemplate")}S&&v&&u("insidetextanchor")}F.exports={supplyDefaults:function(r,s,l,u){function d(f,x){return T.coerce(r,s,t,f,x)}if(_(r,s,u,d)){g(r,s,u,d),d("xhoverformat"),d("yhoverformat"),d("orientation",s.x&&!s.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var c=d("textposition");n(r,0,u,d,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h(r,s,d,l,u);var w=(s.marker.line||{}).color,m=a.getComponentMethod("errorbars","supplyDefaults");m(r,s,w||b.defaultLine,{axis:"y"}),m(r,s,w||b.defaultLine,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(s,d)}else s.visible=!1},crossTraceDefaults:function(r,s){var l,u;function d(w){return T.coerce(u._input,u,t,w)}if(s.barmode==="group")for(var c=0;c<r.length;c++)(u=r[c]).type==="bar"&&(l=u._input,o(l,u,s,d))},handleText:n}},58065:function(F){F.exports=function(L,e,T){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),T.orientation==="h"?(L.label=L.y,L.value=L.x):(L.label=L.x,L.value=L.y),L}},69383:function(F,L,e){var T=e(92770),b=e(84267),a=e(71828).isArrayOrTypedArray;L.coerceString=function(_,g,h){if(typeof g=="string"){if(g||!_.noBlank)return g}else if((typeof g=="number"||g===!0)&&!_.strict)return String(g);return h!==void 0?h:_.dflt},L.coerceNumber=function(_,g,h){if(T(g)){g=+g;var o=_.min,t=_.max;if(!(o!==void 0&&g<o||t!==void 0&&g>t))return g}return h!==void 0?h:_.dflt},L.coerceColor=function(_,g,h){return b(g).isValid()?g:h!==void 0?h:_.dflt},L.coerceEnumerated=function(_,g,h){return _.coerceNumber&&(g=+g),_.values.indexOf(g)!==-1?g:h!==void 0?h:_.dflt},L.getValue=function(_,g){var h;return Array.isArray(_)?g<_.length&&(h=_[g]):h=_,h},L.getLineWidth=function(_,g){return 0<g.mlw?g.mlw:a(_.marker.line.width)?0:_.marker.line.width}},95423:function(F,L,e){var T=e(30211),b=e(73972),a=e(7901),_=e(71828).fillText,g=e(69383).getLineWidth,h=e(89298).hoverLabelText,o=e(50606).BADNUM;function t(n,r,s,l,u){var d,c,w,m,f,x,y,v=n.cd,M=v[0].trace,p=v[0].t,S=l==="closest",A=M.type==="waterfall",k=n.maxHoverDistance,C=n.maxSpikeDistance;M.orientation==="h"?(d=s,c=r,w="y",m="x",f=ee,x=q):(d=r,c=s,w="x",m="y",x=ee,f=q);var P=M[w+"period"],R=S||P;function O(me){return D(me,-1)}function X(me){return D(me,1)}function D(me,ye){var Te=me.w;return me[w]+ye*Te/2}function V(me){return me[w+"End"]-me[w+"Start"]}var j=S?O:P?function(me){return me.p-V(me)/2}:function(me){return Math.min(O(me),me.p-p.bardelta/2)},B=S?X:P?function(me){return me.p+V(me)/2}:function(me){return Math.max(X(me),me.p+p.bardelta/2)};function W(me,ye,Te){return u.finiteRange&&(Te=0),T.inbox(me-d,ye-d,Te+Math.min(1,Math.abs(ye-me)/y)-1)}function q(me){return W(j(me),B(me),k)}function re(me){var ye=me[m];if(A){var Te=Math.abs(me.rawS)||0;c>0?ye+=Te:c<0&&(ye-=Te)}return ye}function ee(me){var ye=c,Te=me.b,Ce=re(me);return T.inbox(Te-ye,Ce-ye,k+(Ce-ye)/(Ce-Te)-1)}var K=n[w+"a"],Y=n[m+"a"];y=Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0]));var $=T.getDistanceFunction(l,f,x,function(me){return(f(me)+x(me))/2});if(T.getClosest(v,$,n),n.index!==!1&&v[n.index].p!==o){R||(j=function(me){return Math.min(O(me),me.p-p.bargroupwidth/2)},B=function(me){return Math.max(X(me),me.p+p.bargroupwidth/2)});var ne=v[n.index],ae=M.base?ne.b+ne.s:ne.s;n[m+"0"]=n[m+"1"]=Y.c2p(ne[m],!0),n[m+"LabelVal"]=ae;var se=p.extents[p.extents.round(ne.p)];n[w+"0"]=K.c2p(S?j(ne):se[0],!0),n[w+"1"]=K.c2p(S?B(ne):se[1],!0);var ce=ne.orig_p!==void 0;return n[w+"LabelVal"]=ce?ne.orig_p:ne.p,n.labelLabel=h(K,n[w+"LabelVal"],M[w+"hoverformat"]),n.valueLabel=h(Y,n[m+"LabelVal"],M[m+"hoverformat"]),n.baseLabel=h(Y,ne.b,M[m+"hoverformat"]),n.spikeDistance=(function(me){var ye=c,Te=me.b,Ce=re(me);return T.inbox(Te-ye,Ce-ye,C+(Ce-ye)/(Ce-Te)-1)}(ne)+function(me){return W(O(me),X(me),C)}(ne))/2,n[w+"Spike"]=K.c2p(ne.p,!0),_(ne,M,n),n.hovertemplate=M.hovertemplate,n}}function i(n,r){var s=r.mcc||n.marker.color,l=r.mlcc||n.marker.line.color,u=g(n,r);return a.opacity(s)?s:a.opacity(l)&&u?l:void 0}F.exports={hoverPoints:function(n,r,s,l,u){var d=t(n,r,s,l,u);if(d){var c=d.cd,w=c[0].trace,m=c[d.index];return d.color=i(w,m),b.getComponentMethod("errorbars","hoverInfo")(m,w,d),[d]}},hoverOnBars:t,getTraceColor:i}},60822:function(F,L,e){F.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(F){F.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(F,L,e){var T=e(73972),b=e(89298),a=e(71828),_=e(43641);F.exports=function(g,h,o){function t(w,m){return a.coerce(g,h,_,w,m)}for(var i=!1,n=!1,r=!1,s={},l=t("barmode"),u=0;u<o.length;u++){var d=o[u];if(T.traceIs(d,"bar")&&d.visible){if(i=!0,l==="group"){var c=d.xaxis+d.yaxis;s[c]&&(r=!0),s[c]=!0}d.visible&&d.type==="histogram"&&b.getFromId({_fullLayout:h},d[d.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(n=!0)}}i?(l!=="overlay"&&t("barnorm"),t("bargap",n&&!r?0:.2),t("bargroupgap")):delete h.barmode}},17295:function(F,L,e){var T=e(39898),b=e(92770),a=e(71828),_=e(63893),g=e(7901),h=e(91424),o=e(73972),t=e(89298).tickText,i=e(72597),n=i.recordMinTextSize,r=i.clearMinTextSize,s=e(16688),l=e(69383),u=e(97313),d=e(1486),c=d.text,w=d.textposition,m=e(23469).appendArrayPointValue,f=u.TEXTPAD;function x(C){return C.id}function y(C){if(C.ids)return x}function v(C,P){return C<P?1:-1}function M(C,P,R,O){var X;return!P.uniformtext.mode&&p(R)?(O&&(X=O()),C.transition().duration(R.duration).ease(R.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})):C}function p(C){return C&&C.duration>0}function S(C){return C==="auto"?0:C}function A(C,P){var R=Math.PI/180*P,O=Math.abs(Math.sin(R)),X=Math.abs(Math.cos(R));return{x:C.width*X+C.height*O,y:C.width*O+C.height*X}}function k(C,P,R,O,X,D){var V=!!D.isHorizontal,j=!!D.constrained,B=D.angle||0,W=D.anchor||"end",q=W==="end",re=W==="start",ee=((D.leftToRight||0)+1)/2,K=1-ee,Y=X.width,$=X.height,ne=Math.abs(P-C),ae=Math.abs(O-R),se=ne>2*f&&ae>2*f?f:0;ne-=2*se,ae-=2*se;var ce=S(B);B!=="auto"||Y<=ne&&$<=ae||!(Y>ne||$>ae)||(Y>ae||$>ne)&&Y<$==ne<ae||(ce+=90);var me=A(X,ce),ye=1;j&&(ye=Math.min(1,ne/me.x,ae/me.y));var Te=X.left*K+X.right*ee,Ce=(X.top+X.bottom)/2,pe=(C+f)*K+(P-f)*ee,fe=(R+O)/2,Oe=0,Se=0;if(re||q){var Me=(V?me.x:me.y)/2,ue=V?v(C,P):v(R,O);V?re?(pe=C+ue*se,Oe=-ue*Me):(pe=P-ue*se,Oe=ue*Me):re?(fe=R+ue*se,Se=-ue*Me):(fe=O-ue*se,Se=ue*Me)}return{textX:Te,textY:Ce,targetX:pe,targetY:fe,anchorX:Oe,anchorY:Se,scale:ye,rotate:ce}}F.exports={plot:function(C,P,R,O,X,D){var V=P.xaxis,j=P.yaxis,B=C._fullLayout,W=C._context.staticPlot;X||(X={mode:B.barmode,norm:B.barmode,gap:B.bargap,groupgap:B.bargroupgap},r("bar",B));var q=a.makeTraceGroups(O,R,"trace bars").each(function(re){var ee=T.select(this),K=re[0].trace,Y=K.type==="waterfall",$=K.type==="funnel",ne=K.type==="bar"||$,ae=0;Y&&K.connector.visible&&K.connector.mode==="between"&&(ae=K.connector.line.width/2);var se=K.orientation==="h",ce=p(X),me=a.ensureSingle(ee,"g","points"),ye=y(K),Te=me.selectAll("g.point").data(a.identity,ye);Te.enter().append("g").classed("point",!0),Te.exit().remove(),Te.each(function(pe,fe){var Oe,Se,Me=T.select(this),ue=function(Re,je,Fe,Xe){var Ze=[],at=[],lt=Xe?je:Fe,ot=Xe?Fe:je;return Ze[0]=lt.c2p(Re.s0,!0),at[0]=ot.c2p(Re.p0,!0),Ze[1]=lt.c2p(Re.s1,!0),at[1]=ot.c2p(Re.p1,!0),Xe?[Ze,at]:[at,Ze]}(pe,V,j,se),le=ue[0][0],ie=ue[0][1],ge=ue[1][0],Ae=ue[1][1],we=(se?ie-le:Ae-ge)==0;if(we&&ne&&l.getLineWidth(K,pe)&&(we=!1),we||(we=!(b(le)&&b(ie)&&b(ge)&&b(Ae))),pe.isBlank=we,we&&(se?ie=le:Ae=ge),ae&&!we&&(se?(le-=v(le,ie)*ae,ie+=v(le,ie)*ae):(ge-=v(ge,Ae)*ae,Ae+=v(ge,Ae)*ae)),K.type==="waterfall"){if(!we){var Ne=K[pe.dir].marker;Oe=Ne.line.width,Se=Ne.color}}else Oe=l.getLineWidth(K,pe),Se=pe.mc||K.marker.color;function He(Re){var je=T.round(Oe/2%1,2);return X.gap===0&&X.groupgap===0?T.round(Math.round(Re)-je,2):Re}if(!C._context.staticPlot){var de=g.opacity(Se)<1||Oe>.01?He:function(Re,je,Fe){return Fe&&Re===je?Re:Math.abs(Re-je)>=2?He(Re):Re>je?Math.ceil(Re):Math.floor(Re)};le=de(le,ie,se),ie=de(ie,le,se),ge=de(ge,Ae,!se),Ae=de(Ae,ge,!se)}var Le=M(a.ensureSingle(Me,"path"),B,X,D);if(Le.style("vector-effect",W?"none":"non-scaling-stroke").attr("d",isNaN((ie-le)*(Ae-ge))||we&&C._context.staticPlot?"M0,0Z":"M"+le+","+ge+"V"+Ae+"H"+ie+"V"+ge+"Z").call(h.setClipUrl,P.layerClipId,C),!B.uniformtext.mode&&ce){var Ee=h.makePointStyleFns(K);h.singlePointStyle(pe,Le,K,Ee,C)}(function(Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt,ht){var ct,Tt=je.xaxis,Lt=je.yaxis,kt=Re._fullLayout;function Ot(Jt,Vt,Qt){return a.ensureSingle(Jt,"text").text(Vt).attr({class:"bartext bartext-"+ct,"text-anchor":"middle","data-notex":1}).call(h.font,Qt).call(_.convertToTspans,Re)}var Pt=Xe[0].trace,et=Pt.orientation==="h",nt=function(Jt,Vt,Qt,qt,gn){var wn,hn=Vt[0].trace;return wn=hn.texttemplate?function(Xt,an,tn,cn,vn){var yn=an[0].trace,Pn=a.castOption(yn,tn,"texttemplate");if(!Pn)return"";var In,kn,zn,er,ir=yn.type==="histogram",fr=yn.type==="waterfall",ar=yn.type==="funnel",Jn=yn.orientation==="h";function br(Nn){return t(er,er.c2l(Nn),!0).text}Jn?(In="y",kn=vn,zn="x",er=cn):(In="x",kn=cn,zn="y",er=vn);var Gt,ln=an[tn],mn={};mn.label=ln.p,mn.labelLabel=mn[In+"Label"]=(Gt=ln.p,t(kn,kn.c2l(Gt),!0).text);var _n=a.castOption(yn,ln.i,"text");(_n===0||_n)&&(mn.text=_n),mn.value=ln.s,mn.valueLabel=mn[zn+"Label"]=br(ln.s);var Ln={};m(Ln,yn,ln.i),(ir||Ln.x===void 0)&&(Ln.x=Jn?mn.value:mn.label),(ir||Ln.y===void 0)&&(Ln.y=Jn?mn.label:mn.value),(ir||Ln.xLabel===void 0)&&(Ln.xLabel=Jn?mn.valueLabel:mn.labelLabel),(ir||Ln.yLabel===void 0)&&(Ln.yLabel=Jn?mn.labelLabel:mn.valueLabel),fr&&(mn.delta=+ln.rawS||ln.s,mn.deltaLabel=br(mn.delta),mn.final=ln.v,mn.finalLabel=br(mn.final),mn.initial=mn.final-mn.delta,mn.initialLabel=br(mn.initial)),ar&&(mn.value=ln.s,mn.valueLabel=br(mn.value),mn.percentInitial=ln.begR,mn.percentInitialLabel=a.formatPercent(ln.begR),mn.percentPrevious=ln.difR,mn.percentPreviousLabel=a.formatPercent(ln.difR),mn.percentTotal=ln.sumR,mn.percenTotalLabel=a.formatPercent(ln.sumR));var Yn=a.castOption(yn,ln.i,"customdata");return Yn&&(mn.customdata=Yn),a.texttemplateString(Pn,mn,Xt._d3locale,Ln,mn,yn._meta||{})}(Jt,Vt,Qt,qt,gn):hn.textinfo?function(Xt,an,tn,cn){var vn=Xt[0].trace,yn=vn.orientation==="h",Pn=vn.type==="waterfall",In=vn.type==="funnel";function kn(Yn){return t(yn?tn:cn,+Yn,!0).text}var zn,er,ir=vn.textinfo,fr=Xt[an],ar=ir.split("+"),Jn=[],br=function(Yn){return ar.indexOf(Yn)!==-1};if(br("label")&&Jn.push((er=Xt[an].p,t(yn?cn:tn,er,!0).text)),br("text")&&((zn=a.castOption(vn,fr.i,"text"))===0||zn)&&Jn.push(zn),Pn){var Gt=+fr.rawS||fr.s,ln=fr.v,mn=ln-Gt;br("initial")&&Jn.push(kn(mn)),br("delta")&&Jn.push(kn(Gt)),br("final")&&Jn.push(kn(ln))}if(In){br("value")&&Jn.push(kn(fr.s));var _n=0;br("percent initial")&&_n++,br("percent previous")&&_n++,br("percent total")&&_n++;var Ln=_n>1;br("percent initial")&&(zn=a.formatPercent(fr.begR),Ln&&(zn+=" of initial"),Jn.push(zn)),br("percent previous")&&(zn=a.formatPercent(fr.difR),Ln&&(zn+=" of previous"),Jn.push(zn)),br("percent total")&&(zn=a.formatPercent(fr.sumR),Ln&&(zn+=" of total"),Jn.push(zn))}return Jn.join("<br>")}(Vt,Qt,qt,gn):l.getValue(hn.text,Qt),l.coerceString(c,wn)}(kt,Xe,Ze,Tt,Lt);ct=function(Jt,Vt){var Qt=l.getValue(Jt.textposition,Vt);return l.coerceEnumerated(w,Qt)}(Pt,Ze);var Ye=wt.mode==="stack"||wt.mode==="relative",tt=Xe[Ze],ut=!Ye||tt._outmost;if(nt&&ct!=="none"&&(!tt.isBlank&&at!==lt&&ot!==bt||ct!=="auto"&&ct!=="inside")){var Ke=kt.font,De=s.getBarColor(Xe[Ze],Pt),Be=s.getInsideTextFont(Pt,Ze,Ke,De),Qe=s.getOutsideTextFont(Pt,Ze,Ke),rt=Fe.datum();et?Tt.type==="log"&&rt.s0<=0&&(at=Tt.range[0]<Tt.range[1]?0:Tt._length):Lt.type==="log"&&rt.s0<=0&&(ot=Lt.range[0]<Lt.range[1]?Lt._length:0);var vt,mt,xt,dt,Et,pt=Math.abs(lt-at)-2*f,gt=Math.abs(bt-ot)-2*f;if(ct==="outside"&&(ut||tt.hasB||(ct="inside")),ct==="auto"&&(ut?(ct="inside",vt=Ot(Fe,nt,Et=a.ensureUniformFontSize(Re,Be)),xt=(mt=h.bBox(vt.node())).width,dt=mt.height,xt>0&&dt>0&&(xt<=pt&&dt<=gt||xt<=gt&&dt<=pt||(et?pt>=xt*(gt/dt):gt>=dt*(pt/xt)))?ct="inside":(ct="outside",vt.remove(),vt=null)):ct="inside"),!vt){var Mt=(vt=Ot(Fe,nt,Et=a.ensureUniformFontSize(Re,ct==="outside"?Qe:Be))).attr("transform");if(vt.attr("transform",""),xt=(mt=h.bBox(vt.node())).width,dt=mt.height,vt.attr("transform",Mt),xt<=0||dt<=0)return void vt.remove()}var Nt,Bt=Pt.textangle;Nt=ct==="outside"?function(Jt,Vt,Qt,qt,gn,wn){var hn,Xt=!!wn.isHorizontal,an=!!wn.constrained,tn=wn.angle||0,cn=gn.width,vn=gn.height,yn=Math.abs(Vt-Jt),Pn=Math.abs(qt-Qt);hn=Xt?Pn>2*f?f:0:yn>2*f?f:0;var In=1;an&&(In=Xt?Math.min(1,Pn/vn):Math.min(1,yn/cn));var kn=S(tn),zn=A(gn,kn),er=(Xt?zn.x:zn.y)/2,ir=(gn.left+gn.right)/2,fr=(gn.top+gn.bottom)/2,ar=(Jt+Vt)/2,Jn=(Qt+qt)/2,br=0,Gt=0,ln=Xt?v(Vt,Jt):v(Qt,qt);return Xt?(ar=Vt-ln*hn,br=ln*er):(Jn=qt+ln*hn,Gt=-ln*er),{textX:ir,textY:fr,targetX:ar,targetY:Jn,anchorX:br,anchorY:Gt,scale:In,rotate:kn}}(at,lt,ot,bt,mt,{isHorizontal:et,constrained:Pt.constraintext==="both"||Pt.constraintext==="outside",angle:Bt}):k(at,lt,ot,bt,mt,{isHorizontal:et,constrained:Pt.constraintext==="both"||Pt.constraintext==="inside",angle:Bt,anchor:Pt.insidetextanchor}),Nt.fontSize=Et.size,n(Pt.type==="histogram"?"bar":Pt.type,Nt,kt),tt.transform=Nt;var Ut=M(vt,kt,wt,ht);a.setTransormAndDisplay(Ut,Nt)}else Fe.select("text").remove()})(C,P,Me,re,fe,le,ie,ge,Ae,X,D),P.layerClipId&&h.hideOutsideRangePoint(pe,Me.select("text"),V,j,K.xcalendar,K.ycalendar)});var Ce=K.cliponaxis===!1;h.setClipUrl(ee,Ce?null:P.layerClipId,C)});o.getComponentMethod("errorbars","plot")(C,q,P,X)},toMoveInsideBar:k}},81974:function(F){function L(e,T,b,a,_){var g=T.c2p(a?e.s0:e.p0,!0),h=T.c2p(a?e.s1:e.p1,!0),o=b.c2p(a?e.p0:e.s0,!0),t=b.c2p(a?e.p1:e.s1,!0);return _?[(g+h)/2,(o+t)/2]:a?[h,(o+t)/2]:[(g+h)/2,t]}F.exports=function(e,T){var b,a=e.cd,_=e.xaxis,g=e.yaxis,h=a[0].trace,o=h.type==="funnel",t=h.orientation==="h",i=[];if(T===!1)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++){var n=a[b],r="ct"in n?n.ct:L(n,_,g,t,o);T.contains(r,!1,b,e)?(i.push({pointNumber:b,x:_.c2d(n.x),y:g.c2d(n.y)}),n.selected=1):n.selected=0}return i}},61546:function(F,L,e){F.exports=b;var T=e(71828).distinctVals;function b(a,_){this.traces=a,this.sepNegVal=_.sepNegVal,this.overlapNoMerge=_.overlapNoMerge;for(var g=1/0,h=_.posAxis._id.charAt(0),o=[],t=0;t<a.length;t++){for(var i=a[t],n=0;n<i.length;n++){var r=i[n],s=r.p;s===void 0&&(s=r[h]),s!==void 0&&o.push(s)}i[0]&&i[0].width1&&(g=Math.min(i[0].width1,g))}this.positions=o;var l=T(o);this.distinctPositions=l.vals,l.vals.length===1&&g!==1/0?this.minDiff=g:this.minDiff=Math.min(l.minDiff,g);var u=(_.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(a,_){var g=this.getLabel(a,_),h=this.bins[g]||0;return this.bins[g]=h+_,h},b.prototype.get=function(a,_){var g=this.getLabel(a,_);return this.bins[g]||0},b.prototype.getLabel=function(a,_){return(_<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?a:Math.round(a/this.binWidth))}},16688:function(F,L,e){var T=e(39898),b=e(7901),a=e(91424),_=e(71828),g=e(73972),h=e(72597).resizeText,o=e(1486),t=o.textfont,i=o.insidetextfont,n=o.outsidetextfont,r=e(69383);function s(x,y,v){a.pointStyle(x.selectAll("path"),y,v),l(x,y,v)}function l(x,y,v){x.selectAll("text").each(function(M){var p=T.select(this),S=_.ensureUniformFontSize(v,u(p,M,y,v));a.font(p,S)})}function u(x,y,v,M){var p=M._fullLayout.font,S=v.textfont;if(x.classed("bartext-inside")){var A=f(y,v);S=c(v,y.i,p,A)}else x.classed("bartext-outside")&&(S=w(v,y.i,p));return S}function d(x,y,v){return m(t,x.textfont,y,v)}function c(x,y,v,M){var p=d(x,y,v);return(x._input.textfont===void 0||x._input.textfont.color===void 0||Array.isArray(x.textfont.color)&&x.textfont.color[y]===void 0)&&(p={color:b.contrast(M),family:p.family,size:p.size}),m(i,x.insidetextfont,y,p)}function w(x,y,v){var M=d(x,y,v);return m(n,x.outsidetextfont,y,M)}function m(x,y,v,M){y=y||{};var p=r.getValue(y.family,v),S=r.getValue(y.size,v),A=r.getValue(y.color,v);return{family:r.coerceString(x.family,p,M.family),size:r.coerceNumber(x.size,S,M.size),color:r.coerceColor(x.color,A,M.color)}}function f(x,y){return y.type==="waterfall"?y[x.dir].marker.color:x.mcc||x.mc||y.marker.color}F.exports={style:function(x){var y=T.select(x).selectAll("g.barlayer").selectAll("g.trace");h(x,y,"bar");var v=y.size(),M=x._fullLayout;y.style("opacity",function(p){return p[0].trace.opacity}).each(function(p){(M.barmode==="stack"&&v>1||M.bargap===0&&M.bargroupgap===0&&!p[0].trace.marker.line.width)&&T.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(p){s(T.select(this),p[0].trace,x)}),g.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(x,y,v){var M=y[0].trace;M.selectedpoints?function(p,S,A){a.selectedPointStyle(p.selectAll("path"),S),function(k,C,P){k.each(function(R){var O,X=T.select(this);if(R.selected){O=_.ensureUniformFontSize(P,u(X,R,C,P));var D=C.selected.textfont&&C.selected.textfont.color;D&&(O.color=D),a.font(X,O)}else a.selectedTextStyle(X,C)})}(p.selectAll("text"),S,A)}(v,M,x):(s(v,M,x),g.getComponentMethod("errorbars","style")(v))},getInsideTextFont:c,getOutsideTextFont:w,getBarColor:f,resizeText:h}},98340:function(F,L,e){var T=e(7901),b=e(52075).hasColorscale,a=e(1586),_=e(71828).coercePattern;F.exports=function(g,h,o,t,i){var n=o("marker.color",t),r=b(g,"marker");r&&a(g,h,i,o,{prefix:"marker.",cLetter:"c"}),o("marker.line.color",T.defaultLine),b(g,"marker.line")&&a(g,h,i,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width"),o("marker.opacity"),_(o,"marker.pattern",n,r),o("selected.marker.color"),o("unselected.marker.color")}},72597:function(F,L,e){var T=e(39898),b=e(71828);function a(_){return"_"+_+"Text_minsize"}F.exports={recordMinTextSize:function(_,g,h){if(h.uniformtext.mode){var o=a(_),t=h.uniformtext.minsize,i=g.scale*g.fontSize;g.hide=i<t,h[o]=h[o]||1/0,g.hide||(h[o]=Math.min(h[o],Math.max(i,t)))}},clearMinTextSize:function(_,g){g[a(_)]=void 0},resizeText:function(_,g,h){var o=_._fullLayout,t=o["_"+h+"Text_minsize"];if(t){var i,n=o.uniformtext.mode==="hide";switch(h){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}g.selectAll(i).each(function(r){var s=r.transform;if(s){s.scale=n&&s.hide?0:t/s.fontSize;var l=T.select(this).select("text");b.setTransormAndDisplay(l,s)}})}}}},55023:function(F,L,e){var T=e(5386).fF,b=e(1426).extendFlat,a=e(81245),_=e(1486);F.exports={r:a.r,theta:a.theta,r0:a.r0,dr:a.dr,theta0:a.theta0,dtheta:a.dtheta,thetaunit:a.thetaunit,base:b({},_.base,{}),offset:b({},_.offset,{}),width:b({},_.width,{}),text:b({},_.text,{}),hovertext:b({},_.hovertext,{}),marker:_.marker,hoverinfo:a.hoverinfo,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},74692:function(F,L,e){var T=e(52075).hasColorscale,b=e(78803),a=e(75341),_=e(11661).setGroupPositions,g=e(66279),h=e(73972).traceIs,o=e(71828).extendFlat;F.exports={calc:function(t,i){for(var n=t._fullLayout,r=i.subplot,s=n[r].radialaxis,l=n[r].angularaxis,u=s.makeCalcdata(i,"r"),d=l.makeCalcdata(i,"theta"),c=i._length,w=new Array(c),m=u,f=d,x=0;x<c;x++)w[x]={p:f[x],s:m[x]};function y(v){var M=i[v];M!==void 0&&(i["_"+v]=Array.isArray(M)?l.makeCalcdata(i,v):l.d2c(M,i.thetaunit))}return l.type==="linear"&&(y("width"),y("offset")),T(i,"marker")&&b(t,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),T(i,"marker.line")&&b(t,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),a(w,i),g(w,i),w},crossTraceCalc:function(t,i,n){for(var r=t.calcdata,s=[],l=0;l<r.length;l++){var u=r[l],d=u[0].trace;d.visible===!0&&h(d,"bar")&&d.subplot===n&&s.push(u)}var c=o({},i.radialaxis,{_id:"x"}),w=i.angularaxis;_(t,w,c,s,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},6135:function(F,L,e){var T=e(71828),b=e(22184).handleRThetaDefaults,a=e(98340),_=e(55023);F.exports=function(g,h,o,t){function i(n,r){return T.coerce(g,h,_,n,r)}b(g,h,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),a(g,h,i,o,t),T.coerceSelectionMarkerOpacity(h,i)):h.visible=!1}},27379:function(F,L,e){var T=e(30211),b=e(71828),a=e(95423).getTraceColor,_=b.fillText,g=e(59150).makeHoverPointText,h=e(10869).isPtInsidePolygon;F.exports=function(o,t,i){var n=o.cd,r=n[0].trace,s=o.subplot,l=s.radialAxis,u=s.angularAxis,d=s.vangles,c=d?h:b.isPtInsideSector,w=o.maxHoverDistance,m=u._period||2*Math.PI,f=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),x=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(x+=Math.PI),T.getClosest(n,function(M){return c(f,x,[M.rp0,M.rp1],[M.thetag0,M.thetag1],d)?w+Math.min(1,Math.abs(M.thetag1-M.thetag0)/m)-1+(M.rp1-f)/(M.rp1-M.rp0)-1:1/0},o),o.index!==!1){var y=n[o.index];o.x0=o.x1=y.ct[0],o.y0=o.y1=y.ct[1];var v=b.extendFlat({},y,{r:y.s,theta:y.p});return _(y,r,o),g(v,r,s,o),o.hovertemplate=r.hovertemplate,o.color=a(r,y),o.xLabelVal=o.yLabelVal=void 0,y.s<0&&(o.idealAlign="left"),[o]}}},23381:function(F,L,e){F.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function(F){F.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(F,L,e){var T=e(71828),b=e(40151);F.exports=function(a,_,g){var h,o={};function t(r,s){return T.coerce(a[h]||{},_[h],b,r,s)}for(var i=0;i<g.length;i++){var n=g[i];n.type==="barpolar"&&n.visible===!0&&(o[h=n.subplot]||(t("barmode"),t("bargap"),o[h]=1))}}},60173:function(F,L,e){var T=e(39898),b=e(92770),a=e(71828),_=e(91424),g=e(10869);F.exports=function(h,o,t){var i=h._context.staticPlot,n=o.xaxis,r=o.yaxis,s=o.radialAxis,l=o.angularAxis,u=function(c){var w=c.cxx,m=c.cyy;return c.vangles?function(f,x,y,v){var M,p;a.angleDelta(y,v)>0?(M=y,p=v):(M=v,p=y);var S=[g.findEnclosingVertexAngles(M,c.vangles)[0],(M+p)/2,g.findEnclosingVertexAngles(p,c.vangles)[1]];return g.pathPolygonAnnulus(f,x,M,p,S,w,m)}:function(f,x,y,v){return a.pathAnnulus(f,x,y,v,w,m)}}(o),d=o.layers.frontplot.select("g.barlayer");a.makeTraceGroups(d,t,"trace bars").each(function(){var c=T.select(this),w=a.ensureSingle(c,"g","points").selectAll("g.point").data(a.identity);w.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(m){var f,x=T.select(this),y=m.rp0=s.c2p(m.s0),v=m.rp1=s.c2p(m.s1),M=m.thetag0=l.c2g(m.p0),p=m.thetag1=l.c2g(m.p1);if(b(y)&&b(v)&&b(M)&&b(p)&&y!==v&&M!==p){var S=s.c2g(m.s1),A=(M+p)/2;m.ct=[n.c2p(S*Math.cos(A)),r.c2p(S*Math.sin(A))],f=u(y,v,M,p)}else f="M0,0Z";a.ensureSingle(x,"path").attr("d",f)}),_.setClipUrl(c,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,h)})}},53522:function(F,L,e){var T=e(82196),b=e(1486),a=e(22399),_=e(12663).axisHoverFormat,g=e(5386).fF,h=e(1426).extendFlat,o=T.marker,t=o.line;F.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:h({},o.symbol,{arrayOk:!1,editType:"plot"}),opacity:h({},o.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:h({},o.angle,{arrayOk:!1,editType:"calc"}),size:h({},o.size,{arrayOk:!1,editType:"calc"}),color:h({},o.color,{arrayOk:!1,editType:"style"}),line:{color:h({},t.color,{arrayOk:!1,dflt:a.defaultLine,editType:"style"}),width:h({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,selected:{marker:T.selected.marker,editType:"style"},unselected:{marker:T.unselected.marker,editType:"style"},text:h({},T.text,{}),hovertext:h({},T.hovertext,{}),hovertemplate:g({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(F,L,e){var T=e(92770),b=e(89298),a=e(42973),_=e(71828),g=e(50606).BADNUM,h=_._;F.exports=function(c,w){var m,f,x,y,v,M,p,S=c._fullLayout,A=b.getFromId(c,w.xaxis||"x"),k=b.getFromId(c,w.yaxis||"y"),C=[],P=w.type==="violin"?"_numViolins":"_numBoxes";w.orientation==="h"?(x=A,y="x",v=k,M="y",p=!!w.yperiodalignment):(x=k,y="y",v=A,M="x",p=!!w.xperiodalignment);var R,O,X,D,V,j,B=function(je,Fe,Xe,Ze){var at,lt=Fe+"0"in je;if(Fe in je||lt&&"d"+Fe in je){var ot=Xe.makeCalcdata(je,Fe);return[a(je,Xe,Fe,ot).vals,ot]}at=lt?je[Fe+"0"]:"name"in je&&(Xe.type==="category"||T(je.name)&&["linear","log"].indexOf(Xe.type)!==-1||_.isDateTime(je.name)&&Xe.type==="date")?je.name:Ze;for(var bt=Xe.type==="multicategory"?Xe.r2c_just_indices(at):Xe.d2c(at,0,je[Fe+"calendar"]),wt=je._length,ht=new Array(wt),ct=0;ct<wt;ct++)ht[ct]=bt;return[ht]}(w,M,v,S[P]),W=B[0],q=B[1],re=_.distinctVals(W,v),ee=re.vals,K=re.minDiff/2,Y=(w.boxpoints||w.points)==="all"?_.identity:function(je){return je.v<R.lf||je.v>R.uf};if(w._hasPreCompStats){var $=w[y],ne=function(je){return x.d2c((w[je]||[])[m])},ae=1/0,se=-1/0;for(m=0;m<w._length;m++){var ce=W[m];if(T(ce)){if((R={}).pos=R[M]=ce,p&&q&&(R.orig_p=q[m]),R.q1=ne("q1"),R.med=ne("median"),R.q3=ne("q3"),O=[],$&&_.isArrayOrTypedArray($[m]))for(f=0;f<$[m].length;f++)(j=x.d2c($[m][f]))!==g&&(t(V={v:j,i:[m,f]},w,[m,f]),O.push(V));if(R.pts=O.sort(i),D=(X=R[y]=O.map(n)).length,R.med!==g&&R.q1!==g&&R.q3!==g&&R.med>=R.q1&&R.q3>=R.med){var me=ne("lowerfence");R.lf=me!==g&&me<=R.q1?me:r(R,X,D);var ye=ne("upperfence");R.uf=ye!==g&&ye>=R.q3?ye:s(R,X,D);var Te=ne("mean");R.mean=Te!==g?Te:D?_.mean(X,D):(R.q1+R.q3)/2;var Ce=ne("sd");R.sd=Te!==g&&Ce>=0?Ce:D?_.stdev(X,D,R.mean):R.q3-R.q1,R.lo=l(R),R.uo=u(R);var pe=ne("notchspan");pe=pe!==g&&pe>0?pe:d(R,D),R.ln=R.med-pe,R.un=R.med+pe;var fe=R.lf,Oe=R.uf;w.boxpoints&&X.length&&(fe=Math.min(fe,X[0]),Oe=Math.max(Oe,X[D-1])),w.notched&&(fe=Math.min(fe,R.ln),Oe=Math.max(Oe,R.un)),R.min=fe,R.max=Oe}else{var Se;_.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+R.q1,"median = "+R.med,"q3 = "+R.q3].join(`
`)),Se=R.med!==g?R.med:R.q1!==g?R.q3!==g?(R.q1+R.q3)/2:R.q1:R.q3!==g?R.q3:0,R.med=Se,R.q1=R.q3=Se,R.lf=R.uf=Se,R.mean=R.sd=Se,R.ln=R.un=Se,R.min=R.max=Se}ae=Math.min(ae,R.min),se=Math.max(se,R.max),R.pts2=O.filter(Y),C.push(R)}}w._extremes[x._id]=b.findExtremes(x,[ae,se],{padded:!0})}else{var Me=x.makeCalcdata(w,y),ue=function(je,Fe){for(var Xe=je.length,Ze=new Array(Xe+1),at=0;at<Xe;at++)Ze[at]=je[at]-Fe;return Ze[Xe]=je[Xe-1]+Fe,Ze}(ee,K),le=ee.length,ie=function(je){for(var Fe=new Array(je),Xe=0;Xe<je;Xe++)Fe[Xe]=[];return Fe}(le);for(m=0;m<w._length;m++)if(j=Me[m],T(j)){var ge=_.findBin(W[m],ue);ge>=0&&ge<le&&(t(V={v:j,i:m},w,m),ie[ge].push(V))}var Ae=1/0,we=-1/0,Ne=w.quartilemethod,He=Ne==="exclusive",de=Ne==="inclusive";for(m=0;m<le;m++)if(ie[m].length>0){var Le,Ee;(R={}).pos=R[M]=ee[m],O=R.pts=ie[m].sort(i),D=(X=R[y]=O.map(n)).length,R.min=X[0],R.max=X[D-1],R.mean=_.mean(X,D),R.sd=_.stdev(X,D,R.mean),R.med=_.interp(X,.5),D%2&&(He||de)?(He?(Le=X.slice(0,D/2),Ee=X.slice(D/2+1)):de&&(Le=X.slice(0,D/2+1),Ee=X.slice(D/2)),R.q1=_.interp(Le,.5),R.q3=_.interp(Ee,.5)):(R.q1=_.interp(X,.25),R.q3=_.interp(X,.75)),R.lf=r(R,X,D),R.uf=s(R,X,D),R.lo=l(R),R.uo=u(R);var Re=d(R,D);R.ln=R.med-Re,R.un=R.med+Re,Ae=Math.min(Ae,R.ln),we=Math.max(we,R.un),R.pts2=O.filter(Y),C.push(R)}w._extremes[x._id]=b.findExtremes(x,w.notched?Me.concat([Ae,we]):Me,{padded:!0})}return function(je,Fe){if(_.isArrayOrTypedArray(Fe.selectedpoints))for(var Xe=0;Xe<je.length;Xe++){for(var Ze=je[Xe].pts||[],at={},lt=0;lt<Ze.length;lt++)at[Ze[lt].i]=lt;_.tagSelected(Ze,Fe,at)}}(C,w),C.length>0?(C[0].t={num:S[P],dPos:K,posLetter:M,valLetter:y,labels:{med:h(c,"median:"),min:h(c,"min:"),q1:h(c,"q1:"),q3:h(c,"q3:"),max:h(c,"max:"),mean:w.boxmean==="sd"?h(c,"mean  :"):h(c,"mean:"),lf:h(c,"lower fence:"),uf:h(c,"upper fence:")}},S[P]++,C):[{t:{empty:!0}}]};var o={text:"tx",hovertext:"htx"};function t(c,w,m){for(var f in o)_.isArrayOrTypedArray(w[f])&&(Array.isArray(m)?_.isArrayOrTypedArray(w[f][m[0]])&&(c[o[f]]=w[f][m[0]][m[1]]):c[o[f]]=w[f][m])}function i(c,w){return c.v-w.v}function n(c){return c.v}function r(c,w,m){return m===0?c.q1:Math.min(c.q1,w[Math.min(_.findBin(2.5*c.q1-1.5*c.q3,w,!0)+1,m-1)])}function s(c,w,m){return m===0?c.q3:Math.max(c.q3,w[Math.max(_.findBin(2.5*c.q3-1.5*c.q1,w),0)])}function l(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function d(c,w){return w===0?0:1.57*(c.q3-c.q1)/Math.sqrt(w)}},37188:function(F,L,e){var T=e(89298),b=e(71828),a=e(99082).getAxisGroup,_=["v","h"];function g(h,o,t,i){var n,r,s,l=o.calcdata,u=o._fullLayout,d=i._id,c=d.charAt(0),w=[],m=0;for(n=0;n<t.length;n++)for(s=l[t[n]],r=0;r<s.length;r++)w.push(i.c2l(s[r].pos,!0)),m+=(s[r].pts2||[]).length;if(w.length){var f=b.distinctVals(w);i.type!=="category"&&i.type!=="multicategory"||(f.minDiff=1);var x=f.minDiff/2;T.minDtick(i,f.minDiff,f.vals[0],!0);var y=u[h==="violin"?"_numViolins":"_numBoxes"],v=u[h+"mode"]==="group"&&y>1,M=1-u[h+"gap"],p=1-u[h+"groupgap"];for(n=0;n<t.length;n++){var S,A,k,C,P,R,O=(s=l[t[n]])[0].trace,X=s[0].t,D=O.width,V=O.side;if(D)S=A=C=D/2,k=0;else if(S=x,v){var j=a(u,i._id)+O.orientation,B=(u._alignmentOpts[j]||{})[O.alignmentgroup]||{},W=Object.keys(B.offsetGroups||{}).length,q=W||y;A=S*M*p/q,k=2*S*(((W?O._offsetIndex:X.num)+.5)/q-.5)*M,C=S*M/q}else A=S*M*p,k=0,C=S;X.dPos=S,X.bPos=k,X.bdPos=A,X.wHover=C;var re,ee,K,Y,$,ne,ae=k+A,se=!!D;if(V==="positive"?(P=S*(D?1:.5),re=ae,R=re=k):V==="negative"?(P=re=k,R=S*(D?1:.5),ee=ae):(P=R=S,re=ee=ae),(O.boxpoints||O.points)&&m>0){var ce=O.pointpos,me=O.jitter,ye=O.marker.size/2,Te=0;ce+me>=0&&((Te=ae*(ce+me))>P?(se=!0,$=ye,K=Te):Te>re&&($=ye,K=P)),Te<=P&&(K=P);var Ce=0;ce-me<=0&&((Ce=-ae*(ce-me))>R?(se=!0,ne=ye,Y=Ce):Ce>ee&&(ne=ye,Y=R)),Ce<=R&&(Y=R)}else K=P,Y=R;var pe=new Array(s.length);for(r=0;r<s.length;r++)pe[r]=s[r].pos;O._extremes[d]=T.findExtremes(i,pe,{padded:se,vpadminus:Y,vpadplus:K,vpadLinearized:!0,ppadminus:{x:ne,y:$}[c],ppadplus:{x:$,y:ne}[c]})}}}F.exports={crossTraceCalc:function(h,o){for(var t=h.calcdata,i=o.xaxis,n=o.yaxis,r=0;r<_.length;r++){for(var s=_[r],l=s==="h"?n:i,u=[],d=0;d<t.length;d++){var c=t[d],w=c[0].t,m=c[0].trace;m.visible!==!0||m.type!=="box"&&m.type!=="candlestick"||w.empty||(m.orientation||"v")!==s||m.xaxis!==i._id||m.yaxis!==n._id||u.push(d)}g("box",h,u,l)}},setPositionOffset:g}},36411:function(F,L,e){var T=e(71828),b=e(73972),a=e(7901),_=e(73927),g=e(26125),h=e(4322),o=e(53522);function t(n,r,s,l){function u(V){var j=0;return V&&V.length&&(j+=1,T.isArrayOrTypedArray(V[0])&&V[0].length&&(j+=1)),j}function d(V){return T.validate(n[V],o[V])}var c,w=s("y"),m=s("x");if(r.type==="box"){var f=s("q1"),x=s("median"),y=s("q3");r._hasPreCompStats=f&&f.length&&x&&x.length&&y&&y.length,c=Math.min(T.minRowLength(f),T.minRowLength(x),T.minRowLength(y))}var v,M,p=u(w),S=u(m),A=p&&T.minRowLength(w),k=S&&T.minRowLength(m),C=l.calendar,P={autotypenumbers:l.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(p)){case"00":var R=d("x0")||d("dx");v=!d("y0")&&!d("dy")||R?"v":"h",M=c;break;case"10":v="v",M=Math.min(c,k);break;case"20":v="h",M=Math.min(c,m.length);break;case"01":v="h",M=Math.min(c,A);break;case"02":v="v",M=Math.min(c,w.length);break;case"12":v="v",M=Math.min(c,k,w.length);break;case"21":v="h",M=Math.min(c,m.length,A);break;case"11":M=0;break;case"22":var O,X=!1;for(O=0;O<m.length;O++)if(h(m[O],C,P)==="category"){X=!0;break}if(X)v="v",M=Math.min(c,k,w.length);else{for(O=0;O<w.length;O++)if(h(w[O],C,P)==="category"){X=!0;break}X?(v="h",M=Math.min(c,m.length,A)):(v="v",M=Math.min(c,k,w.length))}}else p>0?(v="v",M=S>0?Math.min(k,A):Math.min(A)):S>0?(v="h",M=Math.min(k)):M=0;if(M){r._length=M;var D=s("orientation",v);r._hasPreCompStats?D==="v"&&S===0?(s("x0",0),s("dx",1)):D==="h"&&p===0&&(s("y0",0),s("dy",1)):D==="v"&&S===0?s("x0"):D==="h"&&p===0&&s("y0"),b.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],l)}else r.visible=!1}function i(n,r,s,l){var u=l.prefix,d=T.coerce2(n,r,o,"marker.outliercolor"),c=s("marker.line.outliercolor"),w="outliers";r._hasPreCompStats?w="all":(d||c)&&(w="suspectedoutliers");var m=s(u+"points",w);m?(s("jitter",m==="all"?.3:0),s("pointpos",m==="all"?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.angle"),s("marker.color",r.line.color),s("marker.line.color"),s("marker.line.width"),m==="suspectedoutliers"&&(s("marker.line.outliercolor",r.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete r.marker;var f=s("hoveron");f!=="all"&&f.indexOf("points")===-1||s("hovertemplate"),T.coerceSelectionMarkerOpacity(r,s)}F.exports={supplyDefaults:function(n,r,s,l){function u(y,v){return T.coerce(n,r,o,y,v)}if(t(n,r,u,l),r.visible!==!1){_(n,r,l,u),u("xhoverformat"),u("yhoverformat");var d=r._hasPreCompStats;d&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||s),u("line.width"),u("fillcolor",a.addOpacity(r.line.color,.5));var c=!1;if(d){var w=u("mean"),m=u("sd");w&&w.length&&(c=!0,m&&m.length&&(c="sd"))}u("boxmean",c),u("whiskerwidth"),u("width"),u("quartilemethod");var f=!1;if(d){var x=u("notchspan");x&&x.length&&(f=!0)}else T.validate(n.notchwidth,o.notchwidth)&&(f=!0);u("notched",f)&&u("notchwidth"),i(n,r,u,{prefix:"box"})}},crossTraceDefaults:function(n,r){var s,l;function u(w){return T.coerce(l._input,l,o,w)}for(var d=0;d<n.length;d++){var c=(l=n[d]).type;c!=="box"&&c!=="violin"||(s=l._input,r[c+"mode"]==="group"&&g(s,l,r,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},74907:function(F){F.exports=function(L,e){return e.hoverOnBox&&(L.hoverOnBox=e.hoverOnBox),"xVal"in e&&(L.x=e.xVal),"yVal"in e&&(L.y=e.yVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},41868:function(F,L,e){var T=e(89298),b=e(71828),a=e(30211),_=e(7901),g=b.fillText;function h(t,i,n,r){var s,l,u,d,c,w,m,f,x,y,v,M,p,S,A=t.cd,k=t.xa,C=t.ya,P=A[0].trace,R=A[0].t,O=P.type==="violin",X=R.bdPos,D=R.wHover,V=function(Se){return u.c2l(Se.pos)+R.bPos-u.c2l(w)};O&&P.side!=="both"?(P.side==="positive"&&(x=function(Se){var Me=V(Se);return a.inbox(Me,Me+D,y)},M=X,p=0),P.side==="negative"&&(x=function(Se){var Me=V(Se);return a.inbox(Me-D,Me,y)},M=0,p=X)):(x=function(Se){var Me=V(Se);return a.inbox(Me-D,Me+D,y)},M=p=X),S=O?function(Se){return a.inbox(Se.span[0]-c,Se.span[1]-c,y)}:function(Se){return a.inbox(Se.min-c,Se.max-c,y)},P.orientation==="h"?(c=i,w=n,m=S,f=x,s="y",u=C,l="x",d=k):(c=n,w=i,m=x,f=S,s="x",u=k,l="y",d=C);var j=Math.min(1,X/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function B(Se){return(m(Se)+f(Se))/2}y=t.maxHoverDistance-j,v=t.maxSpikeDistance-j;var W=a.getDistanceFunction(r,m,f,B);if(a.getClosest(A,W,t),t.index===!1)return[];var q=A[t.index],re=P.line.color,ee=(P.marker||{}).color;_.opacity(re)&&P.line.width?t.color=re:_.opacity(ee)&&P.boxpoints?t.color=ee:t.color=P.fillcolor,t[s+"0"]=u.c2p(q.pos+R.bPos-p,!0),t[s+"1"]=u.c2p(q.pos+R.bPos+M,!0),t[s+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var K=s+"Spike";t.spikeDistance=B(q)*v/y,t[K]=u.c2p(q.pos,!0);var Y=P.boxmean||(P.meanline||{}).visible,$=P.boxpoints||P.points,ne=$&&Y?["max","uf","q3","med","mean","q1","lf","min"]:$&&!Y?["max","uf","q3","med","q1","lf","min"]:!$&&Y?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ae=d.range[1]<d.range[0];P.orientation===(ae?"v":"h")&&ne.reverse();for(var se=t.spikeDistance,ce=t[K],me=[],ye=0;ye<ne.length;ye++){var Te=ne[ye];if(Te in q){var Ce=q[Te],pe=d.c2p(Ce,!0),fe=b.extendFlat({},t);fe.attr=Te,fe[l+"0"]=fe[l+"1"]=pe,fe[l+"LabelVal"]=Ce,fe[l+"Label"]=(R.labels?R.labels[Te]+" ":"")+T.hoverLabelText(d,Ce,P[l+"hoverformat"]),fe.hoverOnBox=!0,Te==="mean"&&"sd"in q&&P.boxmean==="sd"&&(fe[l+"err"]=q.sd),fe.hovertemplate=!1,me.push(fe)}}t.name="",t.spikeDistance=void 0,t[K]=void 0;for(var Oe=0;Oe<me.length;Oe++)me[Oe].attr!=="med"?(me[Oe].name="",me[Oe].spikeDistance=void 0,me[Oe][K]=void 0):(me[Oe].spikeDistance=se,me[Oe][K]=ce);return me}function o(t,i,n){for(var r,s,l,u=t.cd,d=t.xa,c=t.ya,w=u[0].trace,m=d.c2p(i),f=c.c2p(n),x=a.quadrature(function(O){var X=Math.max(3,O.mrc||0);return Math.max(Math.abs(d.c2p(O.x)-m)-X,1-3/X)},function(O){var X=Math.max(3,O.mrc||0);return Math.max(Math.abs(c.c2p(O.y)-f)-X,1-3/X)}),y=!1,v=0;v<u.length;v++){s=u[v];for(var M=0;M<(s.pts||[]).length;M++){var p=x(l=s.pts[M]);p<=t.distance&&(t.distance=p,y=[v,M])}}if(!y)return!1;l=(s=u[y[0]]).pts[y[1]];var S=d.c2p(l.x,!0),A=c.c2p(l.y,!0),k=l.mrc||1;r=b.extendFlat({},t,{index:l.i,color:(w.marker||{}).color,name:w.name,x0:S-k,x1:S+k,y0:A-k,y1:A+k,spikeDistance:t.distance,hovertemplate:w.hovertemplate});var C,P=s.orig_p,R=P!==void 0?P:s.pos;return w.orientation==="h"?(C=c,r.xLabelVal=l.x,r.yLabelVal=R):(C=d,r.xLabelVal=R,r.yLabelVal=l.y),r[C._id.charAt(0)+"Spike"]=C.c2p(s.pos,!0),g(l,w,r),r}F.exports={hoverPoints:function(t,i,n,r){var s,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(h(t,i,n,r))),l.indexOf("points")!==-1&&(s=o(t,i,n)),r==="closest"?s?[s]:u:(s&&u.push(s),u)},hoverOnBoxes:h,hoverOnPoints:o}},83832:function(F,L,e){F.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(F){F.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(F,L,e){var T=e(73972),b=e(71828),a=e(40094);function _(g,h,o,t,i){for(var n=i+"Layout",r=!1,s=0;s<o.length;s++){var l=o[s];if(T.traceIs(l,n)){r=!0;break}}r&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}F.exports={supplyLayoutDefaults:function(g,h,o){_(0,0,o,function(t,i){return b.coerce(g,h,a,t,i)},"box")},_supply:_}},86047:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424);function _(o,t,i,n,r){var s,l,u=i.orientation==="h",d=t.val,c=t.pos,w=!!c.rangebreaks,m=n.bPos,f=n.wdPos||0,x=n.bPosPxOffset||0,y=i.whiskerwidth||0,v=i.notched||!1,M=v?1-2*i.notchwidth:1;Array.isArray(n.bdPos)?(s=n.bdPos[0],l=n.bdPos[1]):(s=n.bdPos,l=n.bdPos);var p=o.selectAll("path.box").data(i.type!=="violin"||i.box.visible?b.identity:[]);p.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),p.exit().remove(),p.each(function(S){if(S.empty)return"M0,0Z";var A=c.c2l(S.pos+m,!0),k=c.l2p(A-s)+x,C=c.l2p(A+l)+x,P=w?(k+C)/2:c.l2p(A)+x,R=i.whiskerwidth,O=w?k*R+(1-R)*P:c.l2p(A-f)+x,X=w?C*R+(1-R)*P:c.l2p(A+f)+x,D=c.l2p(A-s*M)+x,V=c.l2p(A+l*M)+x,j=d.c2p(S.q1,!0),B=d.c2p(S.q3,!0),W=b.constrain(d.c2p(S.med,!0),Math.min(j,B)+1,Math.max(j,B)-1),q=S.lf===void 0||i.boxpoints===!1,re=d.c2p(q?S.min:S.lf,!0),ee=d.c2p(q?S.max:S.uf,!0),K=d.c2p(S.ln,!0),Y=d.c2p(S.un,!0);u?T.select(this).attr("d","M"+W+","+D+"V"+V+"M"+j+","+k+"V"+C+(v?"H"+K+"L"+W+","+V+"L"+Y+","+C:"")+"H"+B+"V"+k+(v?"H"+Y+"L"+W+","+D+"L"+K+","+k:"")+"ZM"+j+","+P+"H"+re+"M"+B+","+P+"H"+ee+(y===0?"":"M"+re+","+O+"V"+X+"M"+ee+","+O+"V"+X)):T.select(this).attr("d","M"+D+","+W+"H"+V+"M"+k+","+j+"H"+C+(v?"V"+K+"L"+V+","+W+"L"+C+","+Y:"")+"V"+B+"H"+k+(v?"V"+Y+"L"+D+","+W+"L"+k+","+K:"")+"ZM"+P+","+j+"V"+re+"M"+P+","+B+"V"+ee+(y===0?"":"M"+O+","+re+"H"+X+"M"+O+","+ee+"H"+X))})}function g(o,t,i,n){var r=t.x,s=t.y,l=n.bdPos,u=n.bPos,d=i.boxpoints||i.points;b.seedPseudoRandom();var c=o.selectAll("g.points").data(d?function(m){return m.forEach(function(f){f.t=n,f.trace=i}),m}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var w=c.selectAll("path").data(function(m){var f,x,y=m.pts2,v=Math.max((m.max-m.min)/10,m.q3-m.q1),M=1e-9*v,p=.01*v,S=[],A=0;if(i.jitter){if(v===0)for(A=1,S=new Array(y.length),f=0;f<y.length;f++)S[f]=1;else for(f=0;f<y.length;f++){var k=Math.max(0,f-5),C=y[k].v,P=Math.min(y.length-1,f+5),R=y[P].v;d!=="all"&&(y[f].v<m.lf?R=Math.min(R,m.lf):C=Math.max(C,m.uf));var O=Math.sqrt(p*(P-k)/(R-C+M))||0;O=b.constrain(Math.abs(O),0,1),S.push(O),A=Math.max(O,A)}x=2*i.jitter/(A||1)}for(f=0;f<y.length;f++){var X=y[f],D=X.v,V=i.jitter?x*S[f]*(b.pseudoRandom()-.5):0,j=m.pos+u+l*(i.pointpos+V);i.orientation==="h"?(X.y=j,X.x=D):(X.x=j,X.y=D),d==="suspectedoutliers"&&D<m.uo&&D>m.lo&&(X.so=!0)}return y});w.enter().append("path").classed("point",!0),w.exit().remove(),w.call(a.translatePoints,r,s)}function h(o,t,i,n){var r,s,l=t.val,u=t.pos,d=!!u.rangebreaks,c=n.bPos,w=n.bPosPxOffset||0,m=i.boxmean||(i.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],s=n.bdPos[1]):(r=n.bdPos,s=n.bdPos);var f=o.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?b.identity:[]);f.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),f.exit().remove(),f.each(function(x){var y=u.c2l(x.pos+c,!0),v=u.l2p(y-r)+w,M=u.l2p(y+s)+w,p=d?(v+M)/2:u.l2p(y)+w,S=l.c2p(x.mean,!0),A=l.c2p(x.mean-x.sd,!0),k=l.c2p(x.mean+x.sd,!0);i.orientation==="h"?T.select(this).attr("d","M"+S+","+v+"V"+M+(m==="sd"?"m0,0L"+A+","+p+"L"+S+","+v+"L"+k+","+p+"Z":"")):T.select(this).attr("d","M"+v+","+S+"H"+M+(m==="sd"?"m0,0L"+p+","+A+"L"+v+","+S+"L"+p+","+k+"Z":""))})}F.exports={plot:function(o,t,i,n){var r=o._context.staticPlot,s=t.xaxis,l=t.yaxis;b.makeTraceGroups(n,i,"trace boxes").each(function(u){var d,c,w=T.select(this),m=u[0],f=m.t,x=m.trace;f.wdPos=f.bdPos*x.whiskerwidth,x.visible!==!0||f.empty?w.remove():(x.orientation==="h"?(d=l,c=s):(d=s,c=l),_(w,{pos:d,val:c},x,f,r),g(w,{x:s,y:l},x,f),h(w,{pos:d,val:c},x,f))})},plotBoxAndWhiskers:_,plotPoints:g,plotBoxMean:h}},24626:function(F){F.exports=function(L,e){var T,b,a=L.cd,_=L.xaxis,g=L.yaxis,h=[];if(e===!1)for(T=0;T<a.length;T++)for(b=0;b<(a[T].pts||[]).length;b++)a[T].pts[b].selected=0;else for(T=0;T<a.length;T++)for(b=0;b<(a[T].pts||[]).length;b++){var o=a[T].pts[b],t=_.c2p(o.x),i=g.c2p(o.y);e.contains([t,i],null,o.i,L)?(h.push({pointNumber:o.i,x:_.c2d(o.x),y:g.c2d(o.y)}),o.selected=1):o.selected=0}return h}},58063:function(F,L,e){var T=e(39898),b=e(7901),a=e(91424);F.exports={style:function(_,g,h){var o=h||T.select(_).selectAll("g.trace.boxes");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=T.select(this),n=t[0].trace,r=n.line.width;function s(d,c,w,m){d.style("stroke-width",c+"px").call(b.stroke,w).call(b.fill,m)}var l=i.selectAll("path.box");if(n.type==="candlestick")l.each(function(d){if(!d.empty){var c=T.select(this),w=n[d.dir];s(c,w.line.width,w.line.color,w.fillcolor),c.style("opacity",n.selectedpoints&&!d.selected?.3:1)}});else{s(l,r,n.line.color,n.fillcolor),i.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(b.stroke,n.line.color);var u=i.selectAll("path.point");a.pointStyle(u,n,_)}})},styleOnSelect:function(_,g,h){var o=g[0].trace,t=h.selectAll("path.point");o.selectedpoints?a.selectedPointStyle(t,o):a.pointStyle(t,o,_)}}},75343:function(F,L,e){var T=e(71828).extendFlat,b=e(12663).axisHoverFormat,a=e(2522),_=e(53522);function g(h){return{line:{color:T({},_.line.color,{dflt:h}),width:_.line.width,editType:"style"},fillcolor:_.fillcolor,editType:"style"}}F.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:a.x,open:a.open,high:a.high,low:a.low,close:a.close,line:{width:T({},_.line.width,{}),editType:"style"},increasing:g(a.increasing.line.color.dflt),decreasing:g(a.decreasing.line.color.dflt),text:a.text,hovertext:a.hovertext,whiskerwidth:T({},_.whiskerwidth,{dflt:0}),hoverlabel:a.hoverlabel}},41197:function(F,L,e){var T=e(71828),b=e(89298),a=e(42973),_=e(3485).calcCommon;function g(h,o,t,i){return{min:t,q1:Math.min(h,i),med:i,q3:Math.max(h,i),max:o}}F.exports=function(h,o){var t=h._fullLayout,i=b.getFromId(h,o.xaxis),n=b.getFromId(h,o.yaxis),r=i.makeCalcdata(o,"x"),s=a(o,i,"x",r).vals,l=_(h,o,r,s,n,g);return l.length?(T.extendFlat(l[0].t,{num:t._numBoxes,dPos:T.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},1026:function(F,L,e){var T=e(71828),b=e(7901),a=e(14555),_=e(73927),g=e(75343);function h(o,t,i,n){var r=i(n+".line.color");i(n+".line.width",t.line.width),i(n+".fillcolor",b.addOpacity(r,.5))}F.exports=function(o,t,i,n){function r(s,l){return T.coerce(o,t,g,s,l)}a(o,t,r,n)?(_(o,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),h(0,t,r,"increasing"),h(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(F,L,e){F.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function(F,L,e){var T=e(11500),b=e(44467);F.exports=function(a,_,g,h,o){h("a")||(h("da"),h("a0")),h("b")||(h("db"),h("b0")),function(t,i,n,r){["aaxis","baxis"].forEach(function(s){var l=s.charAt(0),u=t[s]||{},d=b.newContainer(i,s),c={noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:s,data:t[l],calendar:i.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};T(u,d,c),d._categories=d._categories||[],t[s]||u.type==="-"||(t[s]={type:u.type})})}(a,_,g,o)}},402:function(F,L,e){var T=e(71828).isArrayOrTypedArray;function b(a,_){if(!T(a)||_>=10)return null;for(var g=1/0,h=-1/0,o=a.length,t=0;t<o;t++){var i=a[t];if(T(i)){var n=b(i,_+1);n&&(g=Math.min(n[0],g),h=Math.max(n[1],h))}else g=Math.min(i,g),h=Math.max(i,h)}return[g,h]}F.exports=function(a){return b(a,0)}},99798:function(F,L,e){var T=e(41940),b=e(1928),a=e(22399),_=T({editType:"calc"});_.family.dflt='"Open Sans", verdana, arial, sans-serif',_.size.dflt=12,_.color.dflt=a.defaultLine,F.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:b,baxis:b,font:_,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0}},4536:function(F,L,e){var T=e(71828).isArrayOrTypedArray;F.exports=function(b,a,_,g){var h,o,t,i,n,r,s,l,u,d,c,w,m,f=T(_)?"a":"b",x=(f==="a"?b.aaxis:b.baxis).smoothing,y=f==="a"?b.a2i:b.b2j,v=f==="a"?_:g,M=f==="a"?g:_,p=f==="a"?a.a.length:a.b.length,S=f==="a"?a.b.length:a.a.length,A=Math.floor(f==="a"?b.b2j(M):b.a2i(M)),k=f==="a"?function(re){return b.evalxy([],re,A)}:function(re){return b.evalxy([],A,re)};x&&(t=Math.max(0,Math.min(S-2,A)),i=A-t,o=f==="a"?function(re,ee){return b.dxydi([],re,t,ee,i)}:function(re,ee){return b.dxydj([],t,re,i,ee)});var C=y(v[0]),P=y(v[1]),R=C<P?1:-1,O=1e-8*(P-C),X=R>0?Math.floor:Math.ceil,D=R>0?Math.ceil:Math.floor,V=R>0?Math.min:Math.max,j=R>0?Math.max:Math.min,B=X(C+O),W=D(P-O),q=[[s=k(C)]];for(h=B;h*R<W*R;h+=R)n=[],c=j(C,h),m=(w=V(P,h+R))-c,r=Math.max(0,Math.min(p-2,Math.floor(.5*(c+w)))),l=k(w),x&&(u=o(r,c-r),d=o(r,w-r),n.push([s[0]+u[0]/3*m,s[1]+u[1]/3*m]),n.push([l[0]-d[0]/3*m,l[1]-d[1]/3*m])),n.push(l),q.push(n),s=l;return q}},1928:function(F,L,e){var T=e(41940),b=e(22399),a=e(13838),_=e(12663).descriptionWithDates,g=e(30962).overrideAll,h=e(79952).P,o=e(1426).extendFlat;F.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:T({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:a.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:o({},a.labelalias,{editType:"calc"}),tickfont:T({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:_("tick label")},tickformatstops:g(a.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:b.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:o({},h,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:o({},h,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:b.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:T({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(F,L,e){var T=e(99798),b=e(7901).addOpacity,a=e(73972),_=e(71828),g=e(26218),h=e(96115),o=e(89426),t=e(15258),i=e(21994),n=e(4322);F.exports=function(r,s,l){var u=l.letter,d=l.font||{},c=T[u+"axis"];function w(R,O){return _.coerce(r,s,c,R,O)}function m(R,O){return _.coerce2(r,s,c,R,O)}l.name&&(s._name=l.name,s._id=l.name),w("autotypenumbers",l.autotypenumbersDflt);var f=w("type");f==="-"&&(l.data&&function(R,O){if(R.type==="-"){var X=R._id.charAt(0),D=R[X+"calendar"];R.type=n(O,D,{autotypenumbers:R.autotypenumbers})}}(s,l.data),s.type==="-"?s.type="linear":f=r.type=s.type),w("smoothing"),w("cheatertype"),w("showticklabels"),w("labelprefix",u+" = "),w("labelsuffix"),w("showtickprefix"),w("showticksuffix"),w("separatethousands"),w("tickformat"),w("exponentformat"),w("minexponent"),w("showexponent"),w("categoryorder"),w("tickmode"),w("tickvals"),w("ticktext"),w("tick0"),w("dtick"),s.tickmode==="array"&&(w("arraytick0"),w("arraydtick")),w("labelpadding"),s._hovertitle=u,f==="date"&&a.getComponentMethod("calendars","handleDefaults")(r,s,"calendar",l.calendar),i(s,l.fullLayout),s.c2p=_.identity;var x=w("color",l.dfltColor),y=x===r.color?x:d.color;w("title.text")&&(_.coerceFont(w,"title.font",{family:d.family,size:_.bigFont(d.size),color:y}),w("title.offset")),w("tickangle"),w("autorange",!s.isValidRange(r.range))&&w("rangemode"),w("range"),s.cleanRange(),w("fixedrange"),g(r,s,w,f),o(r,s,w,f,l),h(r,s,w,f,l),t(r,s,w,{data:l.data,dataAttr:u});var v=m("gridcolor",b(x,.3)),M=m("gridwidth"),p=m("griddash"),S=w("showgrid");S||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var A=m("startlinecolor",x),k=m("startlinewidth",M);w("startline",s.showgrid||!!A||!!k)||(delete s.startlinecolor,delete s.startlinewidth);var C=m("endlinecolor",x),P=m("endlinewidth",M);return w("endline",s.showgrid||!!C||!!P)||(delete s.endlinecolor,delete s.endlinewidth),S?(w("minorgridcount"),w("minorgridwidth",M),w("minorgriddash",p),w("minorgridcolor",b(v,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),s.showticklabels==="none"&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,w("tickmode"),s}},25281:function(F,L,e){var T=e(89298),b=e(71828).isArray1D,a=e(53824),_=e(402),g=e(20347),h=e(83311),o=e(44807),t=e(4742),i=e(72505),n=e(68296),r=e(11435);F.exports=function(s,l){var u=T.getFromId(s,l.xaxis),d=T.getFromId(s,l.yaxis),c=l.aaxis,w=l.baxis,m=l.x,f=l.y,x=[];m&&b(m)&&x.push("x"),f&&b(f)&&x.push("y"),x.length&&n(l,c,w,"a","b",x);var y=l._a=l._a||l.a,v=l._b=l._b||l.b;m=l._x||l.x,f=l._y||l.y;var M={};if(l._cheater){var p=c.cheatertype==="index"?y.length:y,S=w.cheatertype==="index"?v.length:v;m=a(p,S,l.cheaterslope)}l._x=m=t(m),l._y=f=t(f),i(m,y,v),i(f,y,v),r(l),l.setScale();var A=_(m),k=_(f),C=.5*(A[1]-A[0]),P=.5*(A[1]+A[0]),R=.5*(k[1]-k[0]),O=.5*(k[1]+k[0]),X=1.3;return A=[P-C*X,P+C*X],k=[O-R*X,O+R*X],l._extremes[u._id]=T.findExtremes(u,A,{padded:!0}),l._extremes[d._id]=T.findExtremes(d,k,{padded:!0}),g(l,"a","b"),g(l,"b","a"),h(l,c),h(l,w),M.clipsegments=o(l._xctrl,l._yctrl,c,w),M.x=m,M.y=f,M.a=y,M.b=v,[M]}},44807:function(F){F.exports=function(L,e,T,b){var a,_,g,h=[],o=!!T.smoothing,t=!!b.smoothing,i=L[0].length-1,n=L.length-1;for(a=0,_=[],g=[];a<=i;a++)_[a]=L[0][a],g[a]=e[0][a];for(h.push({x:_,y:g,bicubic:o}),a=0,_=[],g=[];a<=n;a++)_[a]=L[a][i],g[a]=e[a][i];for(h.push({x:_,y:g,bicubic:t}),a=i,_=[],g=[];a>=0;a--)_[i-a]=L[n][a],g[i-a]=e[n][a];for(h.push({x:_,y:g,bicubic:o}),a=n,_=[],g=[];a>=0;a--)_[n-a]=L[a][0],g[n-a]=e[a][0];return h.push({x:_,y:g,bicubic:t}),h}},20347:function(F,L,e){var T=e(89298),b=e(1426).extendFlat;F.exports=function(a,_,g){var h,o,t,i,n,r,s,l,u,d,c,w,m,f,x=a["_"+_],y=a[_+"axis"],v=y._gridlines=[],M=y._minorgridlines=[],p=y._boundarylines=[],S=a["_"+g],A=a[g+"axis"];y.tickmode==="array"&&(y.tickvals=x.slice());var k=a._xctrl,C=a._yctrl,P=k[0].length,R=k.length,O=a._a.length,X=a._b.length;T.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var D=y.smoothing?3:1;function V(B){var W,q,re,ee,K,Y,$,ne,ae,se,ce,me,ye=[],Te=[],Ce={};if(_==="b")for(q=a.b2j(B),re=Math.floor(Math.max(0,Math.min(X-2,q))),ee=q-re,Ce.length=X,Ce.crossLength=O,Ce.xy=function(pe){return a.evalxy([],pe,q)},Ce.dxy=function(pe,fe){return a.dxydi([],pe,re,fe,ee)},W=0;W<O;W++)Y=Math.min(O-2,W),$=W-Y,ne=a.evalxy([],W,q),A.smoothing&&W>0&&(ae=a.dxydi([],W-1,re,0,ee),ye.push(K[0]+ae[0]/3),Te.push(K[1]+ae[1]/3),se=a.dxydi([],W-1,re,1,ee),ye.push(ne[0]-se[0]/3),Te.push(ne[1]-se[1]/3)),ye.push(ne[0]),Te.push(ne[1]),K=ne;else for(W=a.a2i(B),Y=Math.floor(Math.max(0,Math.min(O-2,W))),$=W-Y,Ce.length=O,Ce.crossLength=X,Ce.xy=function(pe){return a.evalxy([],W,pe)},Ce.dxy=function(pe,fe){return a.dxydj([],Y,pe,$,fe)},q=0;q<X;q++)re=Math.min(X-2,q),ee=q-re,ne=a.evalxy([],W,q),A.smoothing&&q>0&&(ce=a.dxydj([],Y,q-1,$,0),ye.push(K[0]+ce[0]/3),Te.push(K[1]+ce[1]/3),me=a.dxydj([],Y,q-1,$,1),ye.push(ne[0]-me[0]/3),Te.push(ne[1]-me[1]/3)),ye.push(ne[0]),Te.push(ne[1]),K=ne;return Ce.axisLetter=_,Ce.axis=y,Ce.crossAxis=A,Ce.value=B,Ce.constvar=g,Ce.index=l,Ce.x=ye,Ce.y=Te,Ce.smoothing=A.smoothing,Ce}function j(B){var W,q,re,ee,K,Y=[],$=[],ne={};if(ne.length=x.length,ne.crossLength=S.length,_==="b")for(re=Math.max(0,Math.min(X-2,B)),K=Math.min(1,Math.max(0,B-re)),ne.xy=function(ae){return a.evalxy([],ae,B)},ne.dxy=function(ae,se){return a.dxydi([],ae,re,se,K)},W=0;W<P;W++)Y[W]=k[B*D][W],$[W]=C[B*D][W];else for(q=Math.max(0,Math.min(O-2,B)),ee=Math.min(1,Math.max(0,B-q)),ne.xy=function(ae){return a.evalxy([],B,ae)},ne.dxy=function(ae,se){return a.dxydj([],q,ae,ee,se)},W=0;W<R;W++)Y[W]=k[W][B*D],$[W]=C[W][B*D];return ne.axisLetter=_,ne.axis=y,ne.crossAxis=A,ne.value=x[B],ne.constvar=g,ne.index=B,ne.x=Y,ne.y=$,ne.smoothing=A.smoothing,ne}if(y.tickmode==="array"){for(i=5e-15,r=(n=[Math.floor((x.length-1-y.arraytick0)/y.arraydtick*(1+i)),Math.ceil(-y.arraytick0/y.arraydtick/(1+i))].sort(function(B,W){return B-W}))[0]-1,s=n[1]+1,l=r;l<s;l++)(o=y.arraytick0+y.arraydtick*l)<0||o>x.length-1||v.push(b(j(o),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r;l<s;l++)if(t=y.arraytick0+y.arraydtick*l,c=Math.min(t+y.arraydtick,x.length-1),!(t<0||t>x.length-1||c<0||c>x.length-1))for(w=x[t],m=x[c],h=0;h<y.minorgridcount;h++)(f=c-t)<=0||(d=w+(m-w)*(h+1)/(y.minorgridcount+1)*(y.arraydtick/f))<x[0]||d>x[x.length-1]||M.push(b(V(d),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&p.push(b(j(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&p.push(b(j(x.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(i=5e-15,r=(n=[Math.floor((x[x.length-1]-y.tick0)/y.dtick*(1+i)),Math.ceil((x[0]-y.tick0)/y.dtick/(1+i))].sort(function(B,W){return B-W}))[0],s=n[1],l=r;l<=s;l++)u=y.tick0+y.dtick*l,v.push(b(V(u),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r-1;l<s+1;l++)for(u=y.tick0+y.dtick*l,h=0;h<y.minorgridcount;h++)(d=u+y.dtick*(h+1)/(y.minorgridcount+1))<x[0]||d>x[x.length-1]||M.push(b(V(d),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&p.push(b(V(x[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&p.push(b(V(x[x.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},83311:function(F,L,e){var T=e(89298),b=e(1426).extendFlat;F.exports=function(a,_){var g,h,o,t=_._labels=[],i=_._gridlines;for(g=0;g<i.length;g++)o=i[g],["start","both"].indexOf(_.showticklabels)!==-1&&(h=T.tickText(_,o.value),b(h,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:g===0,isLast:g===i.length-1}),t.push(h)),["end","both"].indexOf(_.showticklabels)!==-1&&(h=T.tickText(_,o.value),b(h,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:g===0,isLast:g===i.length-1}),t.push(h))}},42048:function(F){F.exports=function(L,e,T,b){var a=L[0]-e[0],_=L[1]-e[1],g=T[0]-e[0],h=T[1]-e[1],o=Math.pow(a*a+_*_,.25),t=Math.pow(g*g+h*h,.25),i=(t*t*a-o*o*g)*b,n=(t*t*_-o*o*h)*b,r=t*(o+t)*3,s=o*(o+t)*3;return[[e[0]+(r&&i/r),e[1]+(r&&n/r)],[e[0]-(s&&i/s),e[1]-(s&&n/s)]]}},53824:function(F,L,e){var T=e(71828).isArrayOrTypedArray;F.exports=function(b,a,_){var g,h,o,t,i,n,r=[],s=T(b)?b.length:b,l=T(a)?a.length:a,u=T(b)?b:null,d=T(a)?a:null;u&&(o=(u.length-1)/(u[u.length-1]-u[0])/(s-1)),d&&(t=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var c=1/0,w=-1/0;for(h=0;h<l;h++)for(r[h]=[],i=d?(d[h]-d[0])*t:h/(l-1),g=0;g<s;g++)n=(u?(u[g]-u[0])*o:g/(s-1))-i*_,c=Math.min(n,c),w=Math.max(n,w),r[h][g]=n;var m=1/(w-c),f=-c*m;for(h=0;h<l;h++)for(g=0;g<s;g++)r[h][g]=m*r[h][g]+f;return r}},45664:function(F,L,e){var T=e(42048),b=e(71828).ensureArray;function a(_,g,h){var o=-.5*h[0]+1.5*g[0],t=-.5*h[1]+1.5*g[1];return[(2*o+_[0])/3,(2*t+_[1])/3]}F.exports=function(_,g,h,o,t,i){var n,r,s,l,u,d,c,w,m,f,x=h[0].length,y=h.length,v=t?3*x-2:x,M=i?3*y-2:y;for(_=b(_,M),g=b(g,M),s=0;s<M;s++)_[s]=b(_[s],v),g[s]=b(g[s],v);for(r=0,l=0;r<y;r++,l+=i?3:1)for(u=_[l],d=g[l],c=h[r],w=o[r],n=0,s=0;n<x;n++,s+=t?3:1)u[s]=c[n],d[s]=w[n];if(t)for(r=0,l=0;r<y;r++,l+=i?3:1){for(n=1,s=3;n<x-1;n++,s+=3)m=T([h[r][n-1],o[r][n-1]],[h[r][n],o[r][n]],[h[r][n+1],o[r][n+1]],t),_[l][s-1]=m[0][0],g[l][s-1]=m[0][1],_[l][s+1]=m[1][0],g[l][s+1]=m[1][1];f=a([_[l][0],g[l][0]],[_[l][2],g[l][2]],[_[l][3],g[l][3]]),_[l][1]=f[0],g[l][1]=f[1],f=a([_[l][v-1],g[l][v-1]],[_[l][v-3],g[l][v-3]],[_[l][v-4],g[l][v-4]]),_[l][v-2]=f[0],g[l][v-2]=f[1]}if(i)for(s=0;s<v;s++){for(l=3;l<M-3;l+=3)m=T([_[l-3][s],g[l-3][s]],[_[l][s],g[l][s]],[_[l+3][s],g[l+3][s]],i),_[l-1][s]=m[0][0],g[l-1][s]=m[0][1],_[l+1][s]=m[1][0],g[l+1][s]=m[1][1];f=a([_[0][s],g[0][s]],[_[2][s],g[2][s]],[_[3][s],g[3][s]]),_[1][s]=f[0],g[1][s]=f[1],f=a([_[M-1][s],g[M-1][s]],[_[M-3][s],g[M-3][s]],[_[M-4][s],g[M-4][s]]),_[M-2][s]=f[0],g[M-2][s]=f[1]}if(t&&i)for(l=1;l<M;l+=(l+1)%3==0?2:1){for(s=3;s<v-3;s+=3)m=T([_[l][s-3],g[l][s-3]],[_[l][s],g[l][s]],[_[l][s+3],g[l][s+3]],t),_[l][s-1]=.5*(_[l][s-1]+m[0][0]),g[l][s-1]=.5*(g[l][s-1]+m[0][1]),_[l][s+1]=.5*(_[l][s+1]+m[1][0]),g[l][s+1]=.5*(g[l][s+1]+m[1][1]);f=a([_[l][0],g[l][0]],[_[l][2],g[l][2]],[_[l][3],g[l][3]]),_[l][1]=.5*(_[l][1]+f[0]),g[l][1]=.5*(g[l][1]+f[1]),f=a([_[l][v-1],g[l][v-1]],[_[l][v-3],g[l][v-3]],[_[l][v-4],g[l][v-4]]),_[l][v-2]=.5*(_[l][v-2]+f[0]),g[l][v-2]=.5*(g[l][v-2]+f[1])}return[_,g]}},35509:function(F){F.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(F){F.exports=function(L,e,T){return e&&T?function(b,a,_,g,h){var o,t,i,n,r,s;b||(b=[]),a*=3,_*=3;var l=g*g,u=1-g,d=u*u,c=u*g*2,w=-3*d,m=3*(d-c),f=3*(c-l),x=3*l,y=h*h,v=y*h,M=1-h,p=M*M,S=p*M;for(s=0;s<L.length;s++)o=w*(r=L[s])[_][a]+m*r[_][a+1]+f*r[_][a+2]+x*r[_][a+3],t=w*r[_+1][a]+m*r[_+1][a+1]+f*r[_+1][a+2]+x*r[_+1][a+3],i=w*r[_+2][a]+m*r[_+2][a+1]+f*r[_+2][a+2]+x*r[_+2][a+3],n=w*r[_+3][a]+m*r[_+3][a+1]+f*r[_+3][a+2]+x*r[_+3][a+3],b[s]=S*o+3*(p*h*t+M*y*i)+v*n;return b}:e?function(b,a,_,g,h){var o,t,i,n;b||(b=[]),a*=3;var r=g*g,s=1-g,l=s*s,u=s*g*2,d=-3*l,c=3*(l-u),w=3*(u-r),m=3*r,f=1-h;for(i=0;i<L.length;i++)o=d*(n=L[i])[_][a]+c*n[_][a+1]+w*n[_][a+2]+m*n[_][a+3],t=d*n[_+1][a]+c*n[_+1][a+1]+w*n[_+1][a+2]+m*n[_+1][a+3],b[i]=f*o+h*t;return b}:T?function(b,a,_,g,h){var o,t,i,n,r,s;b||(b=[]),_*=3;var l=h*h,u=l*h,d=1-h,c=d*d,w=c*d;for(r=0;r<L.length;r++)o=(s=L[r])[_][a+1]-s[_][a],t=s[_+1][a+1]-s[_+1][a],i=s[_+2][a+1]-s[_+2][a],n=s[_+3][a+1]-s[_+3][a],b[r]=w*o+3*(c*h*t+d*l*i)+u*n;return b}:function(b,a,_,g,h){var o,t,i,n;b||(b=[]);var r=1-h;for(i=0;i<L.length;i++)o=(n=L[i])[_][a+1]-n[_][a],t=n[_+1][a+1]-n[_+1][a],b[i]=r*o+h*t;return b}}},73057:function(F){F.exports=function(L,e,T){return e&&T?function(b,a,_,g,h){var o,t,i,n,r,s;b||(b=[]),a*=3,_*=3;var l=g*g,u=l*g,d=1-g,c=d*d,w=c*d,m=h*h,f=1-h,x=f*f,y=f*h*2,v=-3*x,M=3*(x-y),p=3*(y-m),S=3*m;for(s=0;s<L.length;s++)o=v*(r=L[s])[_][a]+M*r[_+1][a]+p*r[_+2][a]+S*r[_+3][a],t=v*r[_][a+1]+M*r[_+1][a+1]+p*r[_+2][a+1]+S*r[_+3][a+1],i=v*r[_][a+2]+M*r[_+1][a+2]+p*r[_+2][a+2]+S*r[_+3][a+2],n=v*r[_][a+3]+M*r[_+1][a+3]+p*r[_+2][a+3]+S*r[_+3][a+3],b[s]=w*o+3*(c*g*t+d*l*i)+u*n;return b}:e?function(b,a,_,g,h){var o,t,i,n,r,s;b||(b=[]),a*=3;var l=h*h,u=l*h,d=1-h,c=d*d,w=c*d;for(r=0;r<L.length;r++)o=(s=L[r])[_+1][a]-s[_][a],t=s[_+1][a+1]-s[_][a+1],i=s[_+1][a+2]-s[_][a+2],n=s[_+1][a+3]-s[_][a+3],b[r]=w*o+3*(c*h*t+d*l*i)+u*n;return b}:T?function(b,a,_,g,h){var o,t,i,n;b||(b=[]),_*=3;var r=1-g,s=h*h,l=1-h,u=l*l,d=l*h*2,c=-3*u,w=3*(u-d),m=3*(d-s),f=3*s;for(i=0;i<L.length;i++)o=c*(n=L[i])[_][a]+w*n[_+1][a]+m*n[_+2][a]+f*n[_+3][a],t=c*n[_][a+1]+w*n[_+1][a+1]+m*n[_+2][a+1]+f*n[_+3][a+1],b[i]=r*o+g*t;return b}:function(b,a,_,g,h){var o,t,i,n;b||(b=[]);var r=1-g;for(i=0;i<L.length;i++)o=(n=L[i])[_+1][a]-n[_][a],t=n[_+1][a+1]-n[_][a+1],b[i]=r*o+g*t;return b}}},20349:function(F){F.exports=function(L,e,T,b,a){var _=e-2,g=T-2;return b&&a?function(h,o,t){var i,n,r,s,l,u;h||(h=[]);var d=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(t),g)),w=Math.max(0,Math.min(1,o-d)),m=Math.max(0,Math.min(1,t-c));d*=3,c*=3;var f=w*w,x=f*w,y=1-w,v=y*y,M=v*y,p=m*m,S=p*m,A=1-m,k=A*A,C=k*A;for(u=0;u<L.length;u++)i=M*(l=L[u])[c][d]+3*(v*w*l[c][d+1]+y*f*l[c][d+2])+x*l[c][d+3],n=M*l[c+1][d]+3*(v*w*l[c+1][d+1]+y*f*l[c+1][d+2])+x*l[c+1][d+3],r=M*l[c+2][d]+3*(v*w*l[c+2][d+1]+y*f*l[c+2][d+2])+x*l[c+2][d+3],s=M*l[c+3][d]+3*(v*w*l[c+3][d+1]+y*f*l[c+3][d+2])+x*l[c+3][d+3],h[u]=C*i+3*(k*m*n+A*p*r)+S*s;return h}:b?function(h,o,t){h||(h=[]);var i,n,r,s,l,u,d=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(t),g)),w=Math.max(0,Math.min(1,o-d)),m=Math.max(0,Math.min(1,t-c));d*=3;var f=w*w,x=f*w,y=1-w,v=y*y,M=v*y,p=1-m;for(l=0;l<L.length;l++)i=p*(u=L[l])[c][d]+m*u[c+1][d],n=p*u[c][d+1]+m*u[c+1][d+1],r=p*u[c][d+2]+m*u[c+1][d+1],s=p*u[c][d+3]+m*u[c+1][d+1],h[l]=M*i+3*(v*w*n+y*f*r)+x*s;return h}:a?function(h,o,t){h||(h=[]);var i,n,r,s,l,u,d=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(t),g)),w=Math.max(0,Math.min(1,o-d)),m=Math.max(0,Math.min(1,t-c));c*=3;var f=m*m,x=f*m,y=1-m,v=y*y,M=v*y,p=1-w;for(l=0;l<L.length;l++)i=p*(u=L[l])[c][d]+w*u[c][d+1],n=p*u[c+1][d]+w*u[c+1][d+1],r=p*u[c+2][d]+w*u[c+2][d+1],s=p*u[c+3][d]+w*u[c+3][d+1],h[l]=M*i+3*(v*m*n+y*f*r)+x*s;return h}:function(h,o,t){h||(h=[]);var i,n,r,s,l=Math.max(0,Math.min(Math.floor(o),_)),u=Math.max(0,Math.min(Math.floor(t),g)),d=Math.max(0,Math.min(1,o-l)),c=Math.max(0,Math.min(1,t-u)),w=1-c,m=1-d;for(r=0;r<L.length;r++)i=m*(s=L[r])[u][l]+d*s[u][l+1],n=m*s[u+1][l]+d*s[u+1][l+1],h[r]=w*i+c*n;return h}}},92087:function(F,L,e){var T=e(71828),b=e(19237),a=e(13145),_=e(99798),g=e(22399);F.exports=function(h,o,t,i){function n(s,l){return T.coerce(h,o,_,s,l)}o._clipPathId="clip"+o.uid+"carpet";var r=n("color",g.defaultLine);T.coerceFont(n,"font"),n("carpet"),a(h,o,i,n,r),o.a&&o.b?(o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),b(h,o,n)||(o.visible=!1),o._cheater&&n("cheaterslope")):o.visible=!1}},21462:function(F,L,e){F.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(F){F.exports=function(L,e){for(var T,b=L._fullData.length,a=0;a<b;a++){var _=L._fullData[a];if(_.index!==e.index&&_.type==="carpet"&&(T||(T=_),_.carpet===e.carpet))return _}return T}},67961:function(F){F.exports=function(L,e,T){if(L.length===0)return"";var b,a=[],_=T?3:1;for(b=0;b<L.length;b+=_)a.push(L[b]+","+e[b]),T&&b<L.length-_&&(a.push("C"),a.push([L[b+1]+","+e[b+1],L[b+2]+","+e[b+2]+" "].join(" ")));return a.join(T?"":"L")}},27669:function(F,L,e){var T=e(71828).isArrayOrTypedArray;F.exports=function(b,a,_){var g;for(T(b)?b.length>a.length&&(b=b.slice(0,a.length)):b=[],g=0;g<a.length;g++)b[g]=_(a[g]);return b}},11651:function(F){F.exports=function(L,e,T,b,a,_){var g=a[0]*L.dpdx(e),h=a[1]*L.dpdy(T),o=1,t=1;if(_){var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n=Math.sqrt(_[0]*_[0]+_[1]*_[1]),r=(a[0]*_[0]+a[1]*_[1])/i/n;t=Math.max(0,r)}var s=180*Math.atan2(h,g)/Math.PI;return s<-90?(s+=180,o=-o):s>90&&(s-=180,o=-o),{angle:s,flip:o,p:L.c2p(b,e,T),offsetMultplier:t}}},89740:function(F,L,e){var T=e(39898),b=e(91424),a=e(27669),_=e(67961),g=e(11651),h=e(63893),o=e(71828),t=o.strRotate,i=o.strTranslate,n=e(18783);function r(c,w,m,f,x,y,v){var M="const-"+x+"-lines",p=m.selectAll("."+M).data(y);p.enter().append("path").classed(M,!0).style("vector-effect",v?"none":"non-scaling-stroke"),p.each(function(S){var A=S,k=A.x,C=A.y,P=a([],k,c.c2p),R=a([],C,w.c2p),O="M"+_(P,R,A.smoothing);T.select(this).attr("d",O).style("stroke-width",A.width).style("stroke",A.color).style("stroke-dasharray",b.dashStyle(A.dash,A.width)).style("fill","none")}),p.exit().remove()}function s(c,w,m,f,x,y,v,M){var p=y.selectAll("text."+M).data(v);p.enter().append("text").classed(M,!0);var S=0,A={};return p.each(function(k,C){var P;if(k.axis.tickangle==="auto")P=g(f,w,m,k.xy,k.dxy);else{var R=(k.axis.tickangle+180)*Math.PI/180;P=g(f,w,m,k.xy,[Math.cos(R),Math.sin(R)])}C||(A={angle:P.angle,flip:P.flip});var O=(k.endAnchor?-1:1)*P.flip,X=T.select(this).attr({"text-anchor":O>0?"start":"end","data-notex":1}).call(b.font,k.font).text(k.text).call(h.convertToTspans,c),D=b.bBox(this);X.attr("transform",i(P.p[0],P.p[1])+t(P.angle)+i(k.axis.labelpadding*O,.3*D.height)),S=Math.max(S,D.width+k.axis.labelpadding)}),p.exit().remove(),A.maxExtent=S,A}F.exports=function(c,w,m,f){var x=c._context.staticPlot,y=w.xaxis,v=w.yaxis,M=c._fullLayout._clips;o.makeTraceGroups(f,m,"trace").each(function(p){var S=T.select(this),A=p[0],k=A.trace,C=k.aaxis,P=k.baxis,R=o.ensureSingle(S,"g","minorlayer"),O=o.ensureSingle(S,"g","majorlayer"),X=o.ensureSingle(S,"g","boundarylayer"),D=o.ensureSingle(S,"g","labellayer");S.style("opacity",k.opacity),r(y,v,O,0,"a",C._gridlines,!0),r(y,v,O,0,"b",P._gridlines,!0),r(y,v,R,0,"a",C._minorgridlines,!0),r(y,v,R,0,"b",P._minorgridlines,!0),r(y,v,X,0,"a-boundary",C._boundarylines,x),r(y,v,X,0,"b-boundary",P._boundarylines,x);var V=s(c,y,v,k,0,D,C._labels,"a-label"),j=s(c,y,v,k,0,D,P._labels,"b-label");(function(B,W,q,re,ee,K,Y,$){var ne,ae,se,ce,me=o.aggNums(Math.min,null,q.a),ye=o.aggNums(Math.max,null,q.a),Te=o.aggNums(Math.min,null,q.b),Ce=o.aggNums(Math.max,null,q.b);ne=.5*(me+ye),ae=Te,se=q.ab2xy(ne,ae,!0),ce=q.dxyda_rough(ne,ae),Y.angle===void 0&&o.extendFlat(Y,g(q,ee,K,se,q.dxydb_rough(ne,ae))),d(B,W,q,0,se,ce,q.aaxis,ee,K,Y,"a-title"),ne=me,ae=.5*(Te+Ce),se=q.ab2xy(ne,ae,!0),ce=q.dxydb_rough(ne,ae),$.angle===void 0&&o.extendFlat($,g(q,ee,K,se,q.dxyda_rough(ne,ae))),d(B,W,q,0,se,ce,q.baxis,ee,K,$,"b-title")})(c,D,k,0,y,v,V,j),function(B,W,q,re,ee){var K,Y,$,ne,ae=q.select("#"+B._clipPathId);ae.size()||(ae=q.append("clipPath").classed("carpetclip",!0));var se=o.ensureSingle(ae,"path","carpetboundary"),ce=W.clipsegments,me=[];for(ne=0;ne<ce.length;ne++)K=ce[ne],Y=a([],K.x,re.c2p),$=a([],K.y,ee.c2p),me.push(_(Y,$,K.bicubic));var ye="M"+me.join("L")+"Z";ae.attr("id",B._clipPathId),se.attr("d",ye)}(k,A,M,y,v)})};var l=n.LINE_SPACING,u=(1-n.MID_SHIFT)/l+1;function d(c,w,m,f,x,y,v,M,p,S,A){var k=[];v.title.text&&k.push(v.title.text);var C=w.selectAll("text."+A).data(k),P=S.maxExtent;C.enter().append("text").classed(A,!0),C.each(function(){var R=g(m,M,p,x,y);["start","both"].indexOf(v.showticklabels)===-1&&(P=0);var O=v.title.font.size;P+=O+v.title.offset;var X=(S.angle+(S.flip<0?180:0)-R.angle+450)%360,D=X>90&&X<270,V=T.select(this);V.text(v.title.text).call(h.convertToTspans,c),D&&(P=(-h.lineCount(V)+u)*l*O-P),V.attr("transform",i(R.p[0],R.p[1])+t(R.angle)+i(0,P)).attr("text-anchor","middle").call(b.font,v.title.font)}),C.exit().remove()}},11435:function(F,L,e){var T=e(35509),b=e(65888).findBin,a=e(45664),_=e(20349),g=e(54495),h=e(73057);F.exports=function(o){var t=o._a,i=o._b,n=t.length,r=i.length,s=o.aaxis,l=o.baxis,u=t[0],d=t[n-1],c=i[0],w=i[r-1],m=t[t.length-1]-t[0],f=i[i.length-1]-i[0],x=m*T.RELATIVE_CULL_TOLERANCE,y=f*T.RELATIVE_CULL_TOLERANCE;u-=x,d+=x,c-=y,w+=y,o.isVisible=function(v,M){return v>u&&v<d&&M>c&&M<w},o.isOccluded=function(v,M){return v<u||v>d||M<c||M>w},o.setScale=function(){var v=o._x,M=o._y,p=a(o._xctrl,o._yctrl,v,M,s.smoothing,l.smoothing);o._xctrl=p[0],o._yctrl=p[1],o.evalxy=_([o._xctrl,o._yctrl],n,r,s.smoothing,l.smoothing),o.dxydi=g([o._xctrl,o._yctrl],s.smoothing,l.smoothing),o.dxydj=h([o._xctrl,o._yctrl],s.smoothing,l.smoothing)},o.i2a=function(v){var M=Math.max(0,Math.floor(v[0]),n-2),p=v[0]-M;return(1-p)*t[M]+p*t[M+1]},o.j2b=function(v){var M=Math.max(0,Math.floor(v[1]),n-2),p=v[1]-M;return(1-p)*i[M]+p*i[M+1]},o.ij2ab=function(v){return[o.i2a(v[0]),o.j2b(v[1])]},o.a2i=function(v){var M=Math.max(0,Math.min(b(v,t),n-2)),p=t[M],S=t[M+1];return Math.max(0,Math.min(n-1,M+(v-p)/(S-p)))},o.b2j=function(v){var M=Math.max(0,Math.min(b(v,i),r-2)),p=i[M],S=i[M+1];return Math.max(0,Math.min(r-1,M+(v-p)/(S-p)))},o.ab2ij=function(v){return[o.a2i(v[0]),o.b2j(v[1])]},o.i2c=function(v,M){return o.evalxy([],v,M)},o.ab2xy=function(v,M,p){if(!p&&(v<t[0]||v>t[n-1]|M<i[0]||M>i[r-1]))return[!1,!1];var S=o.a2i(v),A=o.b2j(M),k=o.evalxy([],S,A);if(p){var C,P,R,O,X=0,D=0,V=[];v<t[0]?(C=0,P=0,X=(v-t[0])/(t[1]-t[0])):v>t[n-1]?(C=n-2,P=1,X=(v-t[n-1])/(t[n-1]-t[n-2])):P=S-(C=Math.max(0,Math.min(n-2,Math.floor(S)))),M<i[0]?(R=0,O=0,D=(M-i[0])/(i[1]-i[0])):M>i[r-1]?(R=r-2,O=1,D=(M-i[r-1])/(i[r-1]-i[r-2])):O=A-(R=Math.max(0,Math.min(r-2,Math.floor(A)))),X&&(o.dxydi(V,C,R,P,O),k[0]+=V[0]*X,k[1]+=V[1]*X),D&&(o.dxydj(V,C,R,P,O),k[0]+=V[0]*D,k[1]+=V[1]*D)}return k},o.c2p=function(v,M,p){return[M.c2p(v[0]),p.c2p(v[1])]},o.p2x=function(v,M,p){return[M.p2c(v[0]),p.p2c(v[1])]},o.dadi=function(v){var M=Math.max(0,Math.min(t.length-2,v));return t[M+1]-t[M]},o.dbdj=function(v){var M=Math.max(0,Math.min(i.length-2,v));return i[M+1]-i[M]},o.dxyda=function(v,M,p,S){var A=o.dxydi(null,v,M,p,S),k=o.dadi(v,p);return[A[0]/k,A[1]/k]},o.dxydb=function(v,M,p,S){var A=o.dxydj(null,v,M,p,S),k=o.dbdj(M,S);return[A[0]/k,A[1]/k]},o.dxyda_rough=function(v,M,p){var S=m*(p||.1),A=o.ab2xy(v+S,M,!0),k=o.ab2xy(v-S,M,!0);return[.5*(A[0]-k[0])/S,.5*(A[1]-k[1])/S]},o.dxydb_rough=function(v,M,p){var S=f*(p||.1),A=o.ab2xy(v,M+S,!0),k=o.ab2xy(v,M-S,!0);return[.5*(A[0]-k[0])/S,.5*(A[1]-k[1])/S]},o.dpdx=function(v){return v._m},o.dpdy=function(v){return v._m}}},72505:function(F,L,e){var T=e(71828);F.exports=function(b,a,_){var g,h,o,t=[],i=[],n=b[0].length,r=b.length;function s(B,W){var q,re=0,ee=0;return B>0&&(q=b[W][B-1])!==void 0&&(ee++,re+=q),B<n-1&&(q=b[W][B+1])!==void 0&&(ee++,re+=q),W>0&&(q=b[W-1][B])!==void 0&&(ee++,re+=q),W<r-1&&(q=b[W+1][B])!==void 0&&(ee++,re+=q),re/Math.max(1,ee)}var l,u,d,c,w,m,f,x,y,v,M,p=0;for(g=0;g<n;g++)for(h=0;h<r;h++)b[h][g]===void 0&&(t.push(g),i.push(h),b[h][g]=s(g,h)),p=Math.max(p,Math.abs(b[h][g]));if(!t.length)return b;var S=0,A=0,k=t.length;do{for(S=0,o=0;o<k;o++){g=t[o],h=i[o];var C,P,R,O,X,D,V=0,j=0;g===0?(R=a[X=Math.min(n-1,2)],O=a[1],C=b[h][X],j+=(P=b[h][1])+(P-C)*(a[0]-O)/(O-R),V++):g===n-1&&(R=a[X=Math.max(0,n-3)],O=a[n-2],C=b[h][X],j+=(P=b[h][n-2])+(P-C)*(a[n-1]-O)/(O-R),V++),(g===0||g===n-1)&&h>0&&h<r-1&&(l=_[h+1]-_[h],j+=((u=_[h]-_[h-1])*b[h+1][g]+l*b[h-1][g])/(u+l),V++),h===0?(R=_[D=Math.min(r-1,2)],O=_[1],C=b[D][g],j+=(P=b[1][g])+(P-C)*(_[0]-O)/(O-R),V++):h===r-1&&(R=_[D=Math.max(0,r-3)],O=_[r-2],C=b[D][g],j+=(P=b[r-2][g])+(P-C)*(_[r-1]-O)/(O-R),V++),(h===0||h===r-1)&&g>0&&g<n-1&&(l=a[g+1]-a[g],j+=((u=a[g]-a[g-1])*b[h][g+1]+l*b[h][g-1])/(u+l),V++),V?j/=V:(d=a[g+1]-a[g],c=a[g]-a[g-1],x=(w=_[h+1]-_[h])*(m=_[h]-_[h-1])*(w+m),j=((f=d*c*(d+c))*(m*b[h+1][g]+w*b[h-1][g])+x*(c*b[h][g+1]+d*b[h][g-1]))/(x*(c+d)+f*(m+w))),S+=(v=(y=j-b[h][g])/p)*v,M=V?0:.85,b[h][g]+=y*(1+M)}S=Math.sqrt(S)}while(A++<100&&S>1e-5);return T.log("Smoother converged to",S,"after",A,"iterations"),b}},19237:function(F,L,e){var T=e(71828).isArray1D;F.exports=function(b,a,_){var g=_("x"),h=g&&g.length,o=_("y"),t=o&&o.length;if(!h&&!t)return!1;if(a._cheater=!g,h&&!T(g)||t&&!T(o))a._length=null;else{var i=h?g.length:1/0;t&&(i=Math.min(i,o.length)),a.a&&a.a.length&&(i=Math.min(i,a.a.length)),a.b&&a.b.length&&(i=Math.min(i,a.b.length)),a._length=i}return!0}},69568:function(F,L,e){var T=e(5386).fF,b=e(19316),a=e(50693),_=e(9012),g=e(22399).defaultLine,h=e(1426).extendFlat,o=b.marker.line;F.exports=h({locations:{valType:"data_array",editType:"calc"},locationmode:b.locationmode,z:{valType:"data_array",editType:"calc"},geojson:h({},b.geojson,{}),featureidkey:b.featureidkey,text:h({},b.text,{}),hovertext:h({},b.hovertext,{}),marker:{line:{color:h({},o.color,{dflt:g}),width:h({},o.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:b.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:h({},_.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:T(),showlegend:h({},_.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(F,L,e){var T=e(92770),b=e(50606).BADNUM,a=e(78803),_=e(75225),g=e(66279);function h(o){return o&&typeof o=="string"}F.exports=function(o,t){var i,n=t._length,r=new Array(n);i=t.geojson?function(c){return h(c)||T(c)}:h;for(var s=0;s<n;s++){var l=r[s]={},u=t.locations[s],d=t.z[s];i(u)&&T(d)?(l.loc=u,l.z=d):(l.loc=null,l.z=b),l.index=s}return _(r,t),a(o,t,{vals:t.z,containerStr:"",cLetter:"z"}),g(r,t),r}},61869:function(F,L,e){var T=e(71828),b=e(1586),a=e(69568);F.exports=function(_,g,h,o){function t(l,u){return T.coerce(_,g,a,l,u)}var i=t("locations"),n=t("z");if(i&&i.length&&T.isArrayOrTypedArray(n)&&n.length){g._length=Math.min(i.length,n.length);var r,s=t("geojson");(typeof s=="string"&&s!==""||T.isPlainObject(s))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),b(_,g,o,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(g,t)}else g.visible=!1}},92069:function(F){F.exports=function(L,e,T,b,a){L.location=e.location,L.z=e.z;var _=b[a];return _.fIn&&_.fIn.properties&&(L.properties=_.fIn.properties),L.ct=_.ct,L}},42300:function(F,L,e){var T=e(89298),b=e(69568),a=e(71828).fillText;F.exports=function(_,g,h){var o,t,i,n,r=_.cd,s=r[0].trace,l=_.subplot,u=[g,h],d=[g+360,h];for(t=0;t<r.length;t++)if(n=!1,(o=r[t])._polygons){for(i=0;i<o._polygons.length;i++)o._polygons[i].contains(u)&&(n=!n),o._polygons[i].contains(d)&&(n=!n);if(n)break}if(n&&o)return _.x0=_.x1=_.xa.c2p(o.ct),_.y0=_.y1=_.ya.c2p(o.ct),_.index=o.index,_.location=o.loc,_.z=o.z,_.zLabel=T.tickText(l.mockAxis,l.mockAxis.c2l(o.z),"hover").text,_.hovertemplate=o.hovertemplate,function(c,w,m){if(!w.hovertemplate){var f=m.hi||w.hoverinfo,x=String(m.loc),y=f==="all"?b.hoverinfo.flags:f.split("+"),v=y.indexOf("name")!==-1,M=y.indexOf("location")!==-1,p=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,A=[];!v&&M?c.nameOverride=x:(v&&(c.nameOverride=w.name),M&&A.push(x)),p&&A.push(c.zLabel),S&&a(m,w,A),c.extraText=A.join("<br>")}}(_,s,o),[_]}},51319:function(F,L,e){F.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(F,L,e){var T=e(39898),b=e(71828),a=e(41327),_=e(90973).getTopojsonFeatures,g=e(71739).findExtremes,h=e(99636).style;F.exports={calcGeoJSON:function(o,t){for(var i=o[0].trace,n=t[i.geo],r=n._subplot,s=i.locationmode,l=i._length,u=s==="geojson-id"?a.extractTraceFeature(o):_(i,r.topojson),d=[],c=[],w=0;w<l;w++){var m=o[w],f=s==="geojson-id"?m.fOut:a.locationToFeature(s,m.loc,u);if(f){m.geojson=f,m.ct=f.properties.ct,m._polygons=a.feature2polygons(f);var x=a.computeBbox(f);d.push(x[0],x[2]),c.push(x[1],x[3])}else m.geojson=null}if(n.fitbounds==="geojson"&&s==="geojson-id"){var y=a.computeBbox(a.getTraceGeojson(i));d=[y[0],y[2]],c=[y[1],y[3]]}var v={padded:!0};i._extremes.lon=g(n.lonaxis._ax,d,v),i._extremes.lat=g(n.lataxis._ax,c,v)},plot:function(o,t,i){var n=t.layers.backplot.select(".choroplethlayer");b.makeTraceGroups(n,i,"trace choropleth").each(function(r){var s=T.select(this).selectAll("path.choroplethlocation").data(b.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),h(o,r)})}}},81253:function(F){F.exports=function(L,e){var T,b,a,_,g,h=L.cd,o=L.xaxis,t=L.yaxis,i=[];if(e===!1)for(T=0;T<h.length;T++)h[T].selected=0;else for(T=0;T<h.length;T++)(a=(b=h[T]).ct)&&(_=o.c2p(a),g=t.c2p(a),e.contains([_,g],null,T,L)?(i.push({pointNumber:T,lon:a[0],lat:a[1]}),b.selected=1):b.selected=0);return i}},99636:function(F,L,e){var T=e(39898),b=e(7901),a=e(91424),_=e(21081);function g(h,o){var t=o[0].trace,i=o[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},s=_.makeColorScaleFuncFromTrace(t);i.each(function(l){T.select(this).attr("fill",s(l.z)).call(b.stroke,l.mlc||r.color).call(a.dashLine,"",l.mlw||r.width||0).style("opacity",n.opacity)}),a.selectedPointStyle(i,t)}F.exports={style:function(h,o){o&&g(0,o)},styleOnSelect:function(h,o){var t=o[0].node3,i=o[0].trace;i.selectedpoints?a.selectedPointStyle(t.selectAll(".choroplethlocation"),i):g(0,o)}}},64496:function(F,L,e){var T=e(69568),b=e(50693),a=e(5386).fF,_=e(9012),g=e(1426).extendFlat;F.exports=g({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:g({},T.featureidkey,{}),below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,marker:{line:{color:g({},T.marker.line.color,{editType:"plot"}),width:g({},T.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:g({},T.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:g({},T.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g({},T.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:T.hoverinfo,hovertemplate:a({},{keys:["properties"]}),showlegend:g({},_.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(F,L,e){var T=e(92770),b=e(71828),a=e(21081),_=e(91424),g=e(18214).makeBlank,h=e(41327);function o(t){var i,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var s=_.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=s.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=b.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return b.extendFlat(r.fill.paint,{"fill-opacity":i}),b.extendFlat(r.line.paint,{"line-opacity":i}),r}F.exports={convert:function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,r={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},l=i._opts={fill:r,line:s,geojson:g()};if(!n)return l;var u=h.extractTraceFeature(t);if(!u)return l;var d,c,w,m=a.makeColorScaleFuncFromTrace(i),f=i.marker,x=f.line||{};b.isArrayOrTypedArray(f.opacity)&&(d=function(A){var k=A.mo;return T(k)?+b.constrain(k,0,1):0}),b.isArrayOrTypedArray(x.color)&&(c=function(A){return A.mlc}),b.isArrayOrTypedArray(x.width)&&(w=function(A){return A.mlw});for(var y=0;y<t.length;y++){var v=t[y],M=v.fOut;if(M){var p=M.properties;p.fc=m(v.z),d&&(p.mo=d(v)),c&&(p.mlc=c(v)),w&&(p.mlw=w(v)),v.ct=p.ct,v._polygons=h.feature2polygons(M)}}var S=d?{type:"identity",property:"mo"}:f.opacity;return b.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),b.extendFlat(s.paint,{"line-color":c?{type:"identity",property:"mlc"}:x.color,"line-width":w?{type:"identity",property:"mlw"}:x.width,"line-opacity":S}),r.layout.visibility="visible",s.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},o(t),l},convertOnSelect:o}},22654:function(F,L,e){var T=e(71828),b=e(1586),a=e(64496);F.exports=function(_,g,h,o){function t(s,l){return T.coerce(_,g,a,s,l)}var i=t("locations"),n=t("z"),r=t("geojson");T.isArrayOrTypedArray(i)&&i.length&&T.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||T.isPlainObject(r))?(t("featureidkey"),g._length=Math.min(i.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),b(_,g,o,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(g,t)):g.visible=!1}},57516:function(F,L,e){F.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(T,b){b&&b[0].trace._glTrace.updateOnSelect(b)},getBelow:function(T,b){for(var a=b.getMapLayers(),_=a.length-2;_>=0;_--){var g=a[_].id;if(typeof g=="string"&&g.indexOf("water")===0){for(var h=_+1;h<a.length;h++)if(typeof(g=a[h].id)=="string"&&g.indexOf("plotly-")===-1)return g}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(F,L,e){var T=e(82004).convert,b=e(82004).convertOnSelect,a=e(77734).traceLayerPrefix;function _(h,o){this.type="choroplethmapbox",this.subplot=h,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",a+o+"-fill"],["line",a+o+"-line"]],this.below=null}var g=_.prototype;g.update=function(h){this._update(T(h)),h[0].trace._glTrace=this},g.updateOnSelect=function(h){this._update(b(h))},g._update=function(h){var o=this.subplot,t=this.layerList,i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(h.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(h,i),this.below=i);for(var n=0;n<t.length;n++){var r=t[n],s=r[0],l=r[1],u=h[s];o.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&o.setOptions(l,"setPaintProperty",u.paint)}},g._addLayers=function(h,o){for(var t=this.subplot,i=this.layerList,n=this.sourceId,r=0;r<i.length;r++){var s=i[r],l=s[0],u=h[l];t.addLayer({type:l,id:s[1],source:n,layout:u.layout,paint:u.paint},o)}},g._removeLayers=function(){for(var h=this.subplot.map,o=this.layerList,t=o.length-1;t>=0;t--)h.removeLayer(o[t][1])},g.dispose=function(){var h=this.subplot.map;this._removeLayers(),h.removeSource(this.sourceId)},F.exports=function(h,o){var t=o[0].trace,i=new _(h,t.uid),n=i.sourceId,r=T(o),s=i.below=h.belowLookup["trace-"+t.uid];return h.map.addSource(n,{type:"geojson",data:r.geojson}),i._addLayers(r,s),o[0].trace._glTrace=i,i}},12674:function(F,L,e){var T=e(50693),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(2418),g=e(9012),h=e(1426).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["norm"]}),uhoverformat:b("u",1),vhoverformat:b("v",1),whoverformat:b("w",1),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),showlegend:h({},g.showlegend,{dflt:!1})};h(o,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=_[t]}),o.hoverinfo=h({},g.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,F.exports=o},31371:function(F,L,e){var T=e(78803);F.exports=function(b,a){for(var _=a.u,g=a.v,h=a.w,o=Math.min(a.x.length,a.y.length,a.z.length,_.length,g.length,h.length),t=-1/0,i=1/0,n=0;n<o;n++){var r=_[n],s=g[n],l=h[n],u=Math.sqrt(r*r+s*s+l*l);t=Math.max(t,u),i=Math.min(i,u)}a._len=o,a._normMax=t,T(b,a,{vals:[i,t],containerStr:"",cLetter:"c"})}},5453:function(F,L,e){var T=e(9330).gl_cone3d,b=e(9330).gl_cone3d.createConeMesh,a=e(71828).simpleMap,_=e(81697).parseColorScale,g=e(21081).extractOpts,h=e(90060);function o(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var t=o.prototype;t.handlePick=function(l){if(l.object===this.mesh){var u=l.index=l.data.index,d=this.data.x[u],c=this.data.y[u],w=this.data.z[u],m=this.data.u[u],f=this.data.v[u],x=this.data.w[u];l.traceCoordinate=[d,c,w,m,f,x,Math.sqrt(m*m+f*f+x*x)];var y=this.data.hovertext||this.data.text;return Array.isArray(y)&&y[u]!==void 0?l.textLabel=y[u]:y&&(l.textLabel=y),!0}};var i={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},r={tip:1,tail:1,cm:.75,center:.5};function s(l,u){var d=l.fullSceneLayout,c=l.dataScale,w={};function m(v,M){var p=d[M],S=c[i[M]];return a(v,function(A){return p.d2l(A)*S})}w.vectors=h(m(u.u,"xaxis"),m(u.v,"yaxis"),m(u.w,"zaxis"),u._len),w.positions=h(m(u.x,"xaxis"),m(u.y,"yaxis"),m(u.z,"zaxis"),u._len);var f=g(u);w.colormap=_(u),w.vertexIntensityBounds=[f.min/u._normMax,f.max/u._normMax],w.coneOffset=n[u.anchor],u.sizemode==="scaled"?w.coneSize=u.sizeref||.5:w.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var x=T(w),y=u.lightposition;return x.lightPosition=[y.x,y.y,y.z],x.ambient=u.lighting.ambient,x.diffuse=u.lighting.diffuse,x.specular=u.lighting.specular,x.roughness=u.lighting.roughness,x.fresnel=u.lighting.fresnel,x.opacity=u.opacity,u._pad=r[u.anchor]*x.vectorScale*x.coneScale*u._normMax,x}t.update=function(l){this.data=l;var u=s(this.scene,l);this.mesh.update(u)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(l,u){var d=l.glplot.gl,c=s(l,u),w=b(d,c),m=new o(l,u.uid);return m.mesh=w,m.data=u,w._trace=m,l.glplot.add(w),m}},91750:function(F,L,e){var T=e(71828),b=e(1586),a=e(12674);F.exports=function(_,g,h,o){function t(d,c){return T.coerce(_,g,a,d,c)}var i=t("u"),n=t("v"),r=t("w"),s=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&r&&r.length&&s&&s.length&&l&&l.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),b(_,g,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),g._length=null):g.visible=!1}},98128:function(F,L,e){F.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(T,b){return T.norm=b.traceCoordinate[6],T},meta:{}}},70600:function(F,L,e){var T=e(21606),b=e(82196),a=e(12663),_=a.axisHoverFormat,g=a.descriptionOnlyNumbers,h=e(50693),o=e(79952).P,t=e(41940),i=e(1426).extendFlat,n=e(74808),r=n.COMPARISON_OPS2,s=n.INTERVAL_OPS,l=b.line;F.exports=i({z:T.z,x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,text:T.text,hovertext:T.hovertext,transpose:T.transpose,xtype:T.xtype,ytype:T.ytype,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:T.hovertemplate,texttemplate:i({},T.texttemplate,{}),textfont:i({},T.textfont,{}),hoverongaps:T.hoverongaps,connectgaps:i({},T.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:g("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:o,smoothing:i({},l.smoothing,{}),editType:"plot"}},h("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(F,L,e){var T=e(21081),b=e(90757),a=e(18670),_=e(53572);F.exports=function(g,h){var o=b(g,h),t=o[0].z;a(h,t);var i,n=h.contours,r=T.extractOpts(h);if(n.coloring==="heatmap"&&r.auto&&h.autocontour===!1){var s=n.start,l=_(n),u=n.size||1,d=Math.floor((l-s)/u)+1;isFinite(u)||(u=1,d=1);var c=s-u/2;i=[c,c+d*u]}else i=t;return T.calc(g,h,{vals:i,cLetter:"z"}),o}},20083:function(F){F.exports=function(L,e){var T,b=L[0],a=b.z;switch(e.type){case"levels":var _=Math.min(a[0][0],a[0][1]);for(T=0;T<L.length;T++){var g=L[T];g.prefixBoundary=!g.edgepaths.length&&(_>g.level||g.starts.length&&_===g.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var h=b.x.length,o=b.y.length,t=-1/0,i=1/0;for(T=0;T<o;T++)i=Math.min(i,a[T][0]),i=Math.min(i,a[T][h-1]),t=Math.max(t,a[T][0]),t=Math.max(t,a[T][h-1]);for(T=1;T<h-1;T++)i=Math.min(i,a[0][T]),i=Math.min(i,a[o-1][T]),t=Math.max(t,a[0][T]),t=Math.max(t,a[o-1][T]);var n,r,s=e.value;switch(e._operation){case">":s>t&&(b.prefixBoundary=!0);break;case"<":(s<i||b.starts.length&&s===i)&&(b.prefixBoundary=!0);break;case"[]":n=Math.min(s[0],s[1]),((r=Math.max(s[0],s[1]))<i||n>t||b.starts.length&&r===i)&&(b.prefixBoundary=!0);break;case"][":n=Math.min(s[0],s[1]),r=Math.max(s[0],s[1]),n<i&&r>t&&(b.prefixBoundary=!0)}}}},90654:function(F,L,e){var T=e(21081),b=e(86068),a=e(53572);F.exports={min:"zmin",max:"zmax",calc:function(_,g,h){var o=g.contours,t=g.line,i=o.size||1,n=o.coloring,r=b(g,{isColorbar:!0});if(n==="heatmap"){var s=T.extractOpts(g);h._fillgradient=s.reversescale?T.flipScale(s.colorscale):s.colorscale,h._zrange=[s.min,s.max]}else n==="fill"&&(h._fillcolor=r);h._line={color:n==="lines"?r:t.color,width:o.showlines!==!1?t.width:0,dash:t.dash},h._levels={start:o.start,end:a(o),size:i}}}},36914:function(F){F.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(F,L,e){var T=e(92770),b=e(14523),a=e(7901),_=a.addOpacity,g=a.opacity,h=e(74808),o=h.CONSTRAINT_REDUCTION,t=h.COMPARISON_OPS2;F.exports=function(i,n,r,s,l,u){var d,c,w,m=n.contours,f=r("contours.operation");m._operation=o[f],function(x,y){var v;t.indexOf(y.operation)===-1?(x("contours.value",[0,1]),Array.isArray(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(v=parseFloat(y.value[0]),y.value=[v,v+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:T(y.value)&&(v=parseFloat(y.value),y.value=[v,v+1])):(x("contours.value",0),T(y.value)||(Array.isArray(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(r,m),f==="="?d=m.showlines=!0:(d=r("contours.showlines"),w=r("fillcolor",_((i.line||{}).color||l,.5))),d&&(c=r("line.color",w&&g(w)?_(n.fillcolor,1):l),r("line.width",2),r("line.dash")),r("line.smoothing"),b(r,s,c,u)}},64237:function(F,L,e){var T=e(74808),b=e(92770);function a(h,o){var t,i=Array.isArray(o);function n(r){return b(r)?+r:null}return T.COMPARISON_OPS2.indexOf(h)!==-1?t=n(i?o[0]:o):T.INTERVAL_OPS.indexOf(h)!==-1?t=i?[n(o[0]),n(o[1])]:[n(o),n(o)]:T.SET_OPS.indexOf(h)!==-1&&(t=i?o.map(n):[n(o)]),t}function _(h){return function(o){o=a(h,o);var t=Math.min(o[0],o[1]),i=Math.max(o[0],o[1]);return{start:t,end:i,size:i-t}}}function g(h){return function(o){return{start:o=a(h,o),end:1/0,size:1/0}}}F.exports={"[]":_("[]"),"][":_("]["),">":g(">"),"<":g("<"),"=":g("=")}},67217:function(F){F.exports=function(L,e,T,b){var a=b("contours.start"),_=b("contours.end"),g=a===!1||_===!1,h=T("contours.size");!(g?e.autocontour=!0:T("autocontour",!1))&&h||T("ncontours")}},84857:function(F,L,e){var T=e(71828);function b(a){return T.extendFlat({},a,{edgepaths:T.extendDeep([],a.edgepaths),paths:T.extendDeep([],a.paths),starts:T.extendDeep([],a.starts)})}F.exports=function(a,_){var g,h,o,t=function(r){return r.reverse()},i=function(r){return r};switch(_){case"=":case"<":return a;case">":for(a.length!==1&&T.warn("Contour data invalid for the specified inequality operation."),h=a[0],g=0;g<h.edgepaths.length;g++)h.edgepaths[g]=t(h.edgepaths[g]);for(g=0;g<h.paths.length;g++)h.paths[g]=t(h.paths[g]);for(g=0;g<h.starts.length;g++)h.starts[g]=t(h.starts[g]);return a;case"][":var n=t;t=i,i=n;case"[]":for(a.length!==2&&T.warn("Contour data invalid for the specified inequality range operation."),h=b(a[0]),o=b(a[1]),g=0;g<h.edgepaths.length;g++)h.edgepaths[g]=t(h.edgepaths[g]);for(g=0;g<h.paths.length;g++)h.paths[g]=t(h.paths[g]);for(g=0;g<h.starts.length;g++)h.starts[g]=t(h.starts[g]);for(;o.edgepaths.length;)h.edgepaths.push(i(o.edgepaths.shift()));for(;o.paths.length;)h.paths.push(i(o.paths.shift()));for(;o.starts.length;)h.starts.push(i(o.starts.shift()));return[h]}}},13031:function(F,L,e){var T=e(71828),b=e(67684),a=e(73927),_=e(83179),g=e(67217),h=e(8724),o=e(58623),t=e(70600);F.exports=function(i,n,r,s){function l(d,c){return T.coerce(i,n,t,d,c)}if(b(i,n,l,s)){a(i,n,s,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",T.isArray1D(n.z)),u?_(i,n,l,s,r):(g(i,n,l,function(d){return T.coerce2(i,n,t,d)}),h(i,n,l,s)),n.contours&&n.contours.coloring==="heatmap"&&o(l,s)}else n.visible=!1}},87558:function(F,L,e){var T=e(71828),b=e(64237),a=e(53572);F.exports=function(_,g,h){for(var o=_.type==="constraint"?b[_._operation](_.value):_,t=o.size,i=[],n=a(o),r=h.trace._carpetTrace,s=r?{xaxis:r.aaxis,yaxis:r.baxis,x:h.a,y:h.b}:{xaxis:g.xaxis,yaxis:g.yaxis,x:h.x,y:h.y},l=o.start;l<n;l+=t)if(i.push(T.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:h.z,smoothing:h.trace.line.smoothing},s)),i.length>1e3){T.warn("Too many contours, clipping at 1000",_);break}return i}},53572:function(F){F.exports=function(L){return L.end+L.size/1e6}},81696:function(F,L,e){var T=e(71828),b=e(36914);function a(h,o,t,i){return Math.abs(h[0]-o[0])<t&&Math.abs(h[1]-o[1])<i}function _(h,o,t,i,n){var r,s=o.join(","),l=h.crossings[s],u=function(ae,se,ce){var me=0,ye=0;return ae>20&&se?ae===208||ae===1114?me=ce[0]===0?1:-1:ye=ce[1]===0?1:-1:b.BOTTOMSTART.indexOf(ae)!==-1?ye=1:b.LEFTSTART.indexOf(ae)!==-1?me=1:b.TOPSTART.indexOf(ae)!==-1?ye=-1:me=-1,[me,ye]}(l,t,o),d=[g(h,o,[-u[0],-u[1]])],c=h.z.length,w=h.z[0].length,m=o.slice(),f=u.slice();for(r=0;r<1e4;r++){if(l>20?(l=b.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],h.crossings[s]=b.SADDLEREMAINDER[l]):delete h.crossings[s],!(u=b.NEWDELTA[l])){T.log("Found bad marching index:",l,o,h.level);break}d.push(g(h,o,u)),o[0]+=u[0],o[1]+=u[1],s=o.join(","),a(d[d.length-1],d[d.length-2],i,n)&&d.pop();var x=u[0]&&(o[0]<0||o[0]>w-2)||u[1]&&(o[1]<0||o[1]>c-2);if(o[0]===m[0]&&o[1]===m[1]&&u[0]===f[0]&&u[1]===f[1]||t&&x)break;l=h.crossings[s]}r===1e4&&T.log("Infinite loop in contour?");var y,v,M,p,S,A,k,C,P,R,O,X,D,V,j,B=a(d[0],d[d.length-1],i,n),W=0,q=.2*h.smoothing,re=[],ee=0;for(r=1;r<d.length;r++)X=d[r],D=d[r-1],V=X[2]-D[2],j=X[3]-D[3],W+=k=Math.sqrt(V*V+j*j),re.push(k);var K=W/re.length*q;function Y(ae){return d[ae%d.length]}for(r=d.length-2;r>=ee;r--)if((y=re[r])<K){for(M=0,v=r-1;v>=ee&&y+re[v]<K;v--)y+=re[v];if(B&&r===d.length-2)for(M=0;M<v&&y+re[M]<K;M++)y+=re[M];S=r-v+M+1,A=Math.floor((r+v+M+2)/2),p=B||r!==d.length-2?B||v!==-1?S%2?Y(A):[(Y(A)[0]+Y(A+1)[0])/2,(Y(A)[1]+Y(A+1)[1])/2]:d[0]:d[d.length-1],d.splice(v+1,r-v+1,p),r=v+1,M&&(ee=M),B&&(r===d.length-2?d[M]=d[d.length-1]:r===0&&(d[d.length-1]=d[0]))}for(d.splice(0,ee),r=0;r<d.length;r++)d[r].length=2;if(!(d.length<2))if(B)d.pop(),h.paths.push(d);else{t||T.log("Unclosed interior contour?",h.level,m.join(","),d.join("L"));var $=!1;for(C=0;C<h.edgepaths.length;C++)if(R=h.edgepaths[C],!$&&a(R[0],d[d.length-1],i,n)){d.pop(),$=!0;var ne=!1;for(P=0;P<h.edgepaths.length;P++)if(a((O=h.edgepaths[P])[O.length-1],d[0],i,n)){ne=!0,d.shift(),h.edgepaths.splice(C,1),P===C?h.paths.push(d.concat(O)):(P>C&&P--,h.edgepaths[P]=O.concat(d,R));break}ne||(h.edgepaths[C]=d.concat(R))}for(C=0;C<h.edgepaths.length&&!$;C++)a((R=h.edgepaths[C])[R.length-1],d[0],i,n)&&(d.shift(),h.edgepaths[C]=R.concat(d),$=!0);$||h.edgepaths.push(d)}}function g(h,o,t){var i=o[0]+Math.max(t[0],0),n=o[1]+Math.max(t[1],0),r=h.z[n][i],s=h.xaxis,l=h.yaxis;if(t[1]){var u=(h.level-r)/(h.z[n][i+1]-r),d=(u!==1?(1-u)*s.c2l(h.x[i]):0)+(u!==0?u*s.c2l(h.x[i+1]):0);return[s.c2p(s.l2c(d),!0),l.c2p(h.y[n],!0),i+u,n]}var c=(h.level-r)/(h.z[n+1][i]-r),w=(c!==1?(1-c)*l.c2l(h.y[n]):0)+(c!==0?c*l.c2l(h.y[n+1]):0);return[s.c2p(h.x[i],!0),l.c2p(l.l2c(w),!0),i,n+c]}F.exports=function(h,o,t){var i,n,r,s;for(o=o||.01,t=t||.01,n=0;n<h.length;n++){for(r=h[n],s=0;s<r.starts.length;s++)_(r,r.starts[s],"edge",o,t);for(i=0;Object.keys(r.crossings).length&&i<1e4;)i++,_(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,o,t);i===1e4&&T.log("Infinite loop in contour?")}}},52421:function(F,L,e){var T=e(7901),b=e(46248);F.exports=function(a,_,g,h,o){o||(o={}),o.isContour=!0;var t=b(a,_,g,h,o);return t&&t.forEach(function(i){var n=i.trace;n.contours.type==="constraint"&&(n.fillcolor&&T.opacity(n.fillcolor)?i.color=T.addOpacity(n.fillcolor,1):n.contours.showlines&&T.opacity(n.line.color)&&(i.color=T.addOpacity(n.line.color,1)))}),t}},99442:function(F,L,e){F.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(F,L,e){var T=e(71828);F.exports=function(b,a,_,g){if(g||(g={}),b("contours.showlabels")){var h=a.font;T.coerceFont(b,"contours.labelfont",{family:h.family,size:h.size,color:_}),b("contours.labelformat")}g.hasHover!==!1&&b("zhoverformat")}},86068:function(F,L,e){var T=e(39898),b=e(21081),a=e(53572);F.exports=function(_){var g=_.contours,h=g.start,o=a(g),t=g.size||1,i=Math.floor((o-h)/t)+1,n=g.coloring==="lines"?0:1,r=b.extractOpts(_);isFinite(t)||(t=1,i=1);var s,l,u=r.reversescale?b.flipScale(r.colorscale):r.colorscale,d=u.length,c=new Array(d),w=new Array(d),m=r.min,f=r.max;if(g.coloring==="heatmap"){for(l=0;l<d;l++)s=u[l],c[l]=s[0]*(f-m)+m,w[l]=s[1];var x=T.extent([m,f,g.start,g.start+t*(i-1)]),y=x[m<f?0:1],v=x[m<f?1:0];y!==m&&(c.splice(0,0,y),w.splice(0,0,w[0])),v!==f&&(c.push(v),w.push(w[w.length-1]))}else{var M=_._input&&typeof _._input.zmin=="number"&&typeof _._input.zmax=="number";for(M&&(h<=m||o>=f)&&(h<=m&&(h=m),o>=f&&(o=f),i=Math.floor((o-h)/t)+1,n=0),l=0;l<d;l++)s=u[l],c[l]=(s[0]*(i+n-1)-n/2)*t+h,w[l]=s[1];(M||_.autocontour)&&(c[0]>m&&(c.unshift(m),w.unshift(w[0])),c[c.length-1]<f&&(c.push(f),w.push(w[w.length-1])))}return b.makeColorScaleFunc({domain:c,range:w},{noNumericCheck:!0})}},87678:function(F,L,e){var T=e(36914);function b(a,_){var g=(_[0][0]>a?0:1)+(_[0][1]>a?0:2)+(_[1][1]>a?0:4)+(_[1][0]>a?0:8);return g===5||g===10?a>(_[0][0]+_[0][1]+_[1][0]+_[1][1])/4?g===5?713:1114:g===5?104:208:g===15?0:g}F.exports=function(a){var _,g,h,o,t,i,n,r,s,l=a[0].z,u=l.length,d=l[0].length,c=u===2||d===2;for(g=0;g<u-1;g++)for(o=[],g===0&&(o=o.concat(T.BOTTOMSTART)),g===u-2&&(o=o.concat(T.TOPSTART)),_=0;_<d-1;_++)for(h=o.slice(),_===0&&(h=h.concat(T.LEFTSTART)),_===d-2&&(h=h.concat(T.RIGHTSTART)),t=_+","+g,i=[[l[g][_],l[g][_+1]],[l[g+1][_],l[g+1][_+1]]],s=0;s<a.length;s++)(n=b((r=a[s]).level,i))&&(r.crossings[t]=n,h.indexOf(n)!==-1&&(r.starts.push([_,g]),c&&h.indexOf(n,h.indexOf(n)+1)!==-1&&r.starts.push([_,g])))}},29854:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(21081),g=e(63893),h=e(89298),o=e(21994),t=e(50347),i=e(87678),n=e(81696),r=e(87558),s=e(84857),l=e(20083),u=e(36914),d=u.LABELOPTIMIZER;function c(f,x){var y,v,M,p,S,A,k,C="",P=0,R=f.edgepaths.map(function(B,W){return W}),O=!0;function X(B){return Math.abs(B[1]-x[2][1])<.01}function D(B){return Math.abs(B[0]-x[0][0])<.01}function V(B){return Math.abs(B[0]-x[2][0])<.01}for(;R.length;){for(A=a.smoothopen(f.edgepaths[P],f.smoothing),C+=O?A:A.replace(/^M/,"L"),R.splice(R.indexOf(P),1),y=f.edgepaths[P][f.edgepaths[P].length-1],p=-1,M=0;M<4;M++){if(!y){b.log("Missing end?",P,f);break}for(k=y,Math.abs(k[1]-x[0][1])<.01&&!V(y)?v=x[1]:D(y)?v=x[0]:X(y)?v=x[3]:V(y)&&(v=x[2]),S=0;S<f.edgepaths.length;S++){var j=f.edgepaths[S][0];Math.abs(y[0]-v[0])<.01?Math.abs(y[0]-j[0])<.01&&(j[1]-y[1])*(v[1]-j[1])>=0&&(v=j,p=S):Math.abs(y[1]-v[1])<.01?Math.abs(y[1]-j[1])<.01&&(j[0]-y[0])*(v[0]-j[0])>=0&&(v=j,p=S):b.log("endpt to newendpt is not vert. or horz.",y,v,j)}if(y=v,p>=0)break;C+="L"+v}if(p===f.edgepaths.length){b.log("unclosed perimeter path");break}P=p,(O=R.indexOf(P)===-1)&&(P=R[0],C+="Z")}for(P=0;P<f.paths.length;P++)C+=a.smoothclosed(f.paths[P],f.smoothing);return C}function w(f,x,y,v){var M=x.width/2,p=x.height/2,S=f.x,A=f.y,k=f.theta,C=Math.cos(k)*M,P=Math.sin(k)*M,R=(S>v.center?v.right-S:S-v.left)/(C+Math.abs(Math.sin(k)*p)),O=(A>v.middle?v.bottom-A:A-v.top)/(Math.abs(P)+Math.cos(k)*p);if(R<1||O<1)return 1/0;var X=d.EDGECOST*(1/(R-1)+1/(O-1));X+=d.ANGLECOST*k*k;for(var D=S-C,V=A-P,j=S+C,B=A+P,W=0;W<y.length;W++){var q=y[W],re=Math.cos(q.theta)*q.width/2,ee=Math.sin(q.theta)*q.width/2,K=2*b.segmentDistance(D,V,j,B,q.x-re,q.y-ee,q.x+re,q.y+ee)/(x.height+q.height),Y=q.level===x.level,$=Y?d.SAMELEVELDISTANCE:1;if(K<=$)return 1/0;X+=d.NEIGHBORCOST*(Y?d.SAMELEVELFACTOR:1)/(K-$)}return X}function m(f){var x,y,v=f.trace._emptypoints,M=[],p=f.z.length,S=f.z[0].length,A=[];for(x=0;x<S;x++)A.push(1);for(x=0;x<p;x++)M.push(A.slice());for(x=0;x<v.length;x++)M[(y=v[x])[0]][y[1]]=0;return f.zmask=M,M}L.plot=function(f,x,y,v){var M=x.xaxis,p=x.yaxis;b.makeTraceGroups(v,y,"contour").each(function(S){var A=T.select(this),k=S[0],C=k.trace,P=k.x,R=k.y,O=C.contours,X=r(O,x,k),D=b.ensureSingle(A,"g","heatmapcoloring"),V=[];O.coloring==="heatmap"&&(V=[S]),t(f,x,V,D),i(X),n(X);var j=M.c2p(P[0],!0),B=M.c2p(P[P.length-1],!0),W=p.c2p(R[0],!0),q=p.c2p(R[R.length-1],!0),re=[[j,q],[B,q],[B,W],[j,W]],ee=X;O.type==="constraint"&&(ee=s(X,O._operation)),function(K,Y,$){var ne=b.ensureSingle(K,"g","contourbg").selectAll("path").data($.coloring==="fill"?[0]:[]);ne.enter().append("path"),ne.exit().remove(),ne.attr("d","M"+Y.join("L")+"Z").style("stroke","none")}(A,re,O),function(K,Y,$,ne){var ae=ne.coloring==="fill"||ne.type==="constraint"&&ne._operation!=="=",se="M"+$.join("L")+"Z";ae&&l(Y,ne);var ce=b.ensureSingle(K,"g","contourfill").selectAll("path").data(ae?Y:[]);ce.enter().append("path"),ce.exit().remove(),ce.each(function(me){var ye=(me.prefixBoundary?se:"")+c(me,$);ye?T.select(this).attr("d",ye).style("stroke","none"):T.select(this).remove()})}(A,ee,re,O),function(K,Y,$,ne,ae){var se=$._context.staticPlot,ce=b.ensureSingle(K,"g","contourlines"),me=ae.showlines!==!1,ye=ae.showlabels,Te=me&&ye,Ce=L.createLines(ce,me||ye,Y,se),pe=L.createLineClip(ce,Te,$,ne.trace.uid),fe=K.selectAll("g.contourlabels").data(ye?[0]:[]);if(fe.exit().remove(),fe.enter().append("g").classed("contourlabels",!0),ye){var Oe=[],Se=[];b.clearLocationCache();var Me=L.labelFormatter($,ne),ue=a.tester.append("text").attr("data-notex",1).call(a.font,ae.labelfont),le=Y[0].xaxis,ie=Y[0].yaxis,ge=le._length,Ae=ie._length,we=le.range,Ne=ie.range,He=b.aggNums(Math.min,null,ne.x),de=b.aggNums(Math.max,null,ne.x),Le=b.aggNums(Math.min,null,ne.y),Ee=b.aggNums(Math.max,null,ne.y),Re=Math.max(le.c2p(He,!0),0),je=Math.min(le.c2p(de,!0),ge),Fe=Math.max(ie.c2p(Ee,!0),0),Xe=Math.min(ie.c2p(Le,!0),Ae),Ze={};we[0]<we[1]?(Ze.left=Re,Ze.right=je):(Ze.left=je,Ze.right=Re),Ne[0]<Ne[1]?(Ze.top=Fe,Ze.bottom=Xe):(Ze.top=Xe,Ze.bottom=Fe),Ze.middle=(Ze.top+Ze.bottom)/2,Ze.center=(Ze.left+Ze.right)/2,Oe.push([[Ze.left,Ze.top],[Ze.right,Ze.top],[Ze.right,Ze.bottom],[Ze.left,Ze.bottom]]);var at=Math.sqrt(ge*ge+Ae*Ae),lt=u.LABELDISTANCE*at/Math.max(1,Y.length/u.LABELINCREASE);Ce.each(function(ot){var bt=L.calcTextOpts(ot.level,Me,ue,$);T.select(this).selectAll("path").each(function(){var wt=b.getVisibleSegment(this,Ze,bt.height/2);if(wt&&!(wt.len<(bt.width+bt.height)*u.LABELMIN))for(var ht=Math.min(Math.ceil(wt.len/lt),u.LABELMAX),ct=0;ct<ht;ct++){var Tt=L.findBestTextLocation(this,wt,bt,Se,Ze);if(!Tt)break;L.addLabelData(Tt,bt,Se,Oe)}})}),ue.remove(),L.drawLabels(fe,Se,$,pe,Te?Oe:null)}ye&&!me&&Ce.remove()}(A,X,f,k,O),function(K,Y,$,ne,ae){var se=ne.trace,ce=$._fullLayout._clips,me="clip"+se.uid,ye=ce.selectAll("#"+me).data(se.connectgaps?[]:[0]);if(ye.enter().append("clipPath").classed("contourclip",!0).attr("id",me),ye.exit().remove(),se.connectgaps===!1){var Te={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Y.xaxis,yaxis:Y.yaxis,x:ne.x,y:ne.y,z:m(ne),smoothing:0};i([Te]),n([Te]),l([Te],{type:"levels"}),b.ensureSingle(ye,"path","").attr("d",(Te.prefixBoundary?"M"+ae.join("L")+"Z":"")+c(Te,ae))}else me=null;a.setClipUrl(K,me,$)}(A,x,f,k,re)})},L.createLines=function(f,x,y,v){var M=y[0].smoothing,p=f.selectAll("g.contourlevel").data(x?y:[]);if(p.exit().remove(),p.enter().append("g").classed("contourlevel",!0),x){var S=p.selectAll("path.openline").data(function(k){return k.pedgepaths||k.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(k){return a.smoothopen(k,M)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke");var A=p.selectAll("path.closedline").data(function(k){return k.ppaths||k.paths});A.exit().remove(),A.enter().append("path").classed("closedline",!0),A.attr("d",function(k){return a.smoothclosed(k,M)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke")}return p},L.createLineClip=function(f,x,y,v){var M=x?"clipline"+v:null,p=y._fullLayout._clips.selectAll("#"+M).data(x?[0]:[]);return p.exit().remove(),p.enter().append("clipPath").classed("contourlineclip",!0).attr("id",M),a.setClipUrl(f,M,y),p},L.labelFormatter=function(f,x){var y=f._fullLayout,v=x.trace,M=v.contours,p={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(M.labelformat)p.tickformat=M.labelformat,o(p,y);else{var S=_.extractOpts(v);if(S&&S.colorbar&&S.colorbar._axis)p=S.colorbar._axis;else{if(M.type==="constraint"){var A=M.value;Array.isArray(A)?p.range=[A[0],A[A.length-1]]:p.range=[A,A]}else p.range=[M.start,M.end],p.nticks=(M.end-M.start)/M.size;p.range[0]===p.range[1]&&(p.range[1]+=p.range[0]||1),p.nticks||(p.nticks=1e3),o(p,y),h.prepTicks(p),p._tmin=null,p._tmax=null}}return function(k){return h.tickText(p,k).text}},L.calcTextOpts=function(f,x,y,v){var M=x(f);y.text(M).call(g.convertToTspans,v);var p=y.node(),S=a.bBox(p,!0);return{text:M,width:S.width,height:S.height,fontSize:+p.style["font-size"].replace("px",""),level:f,dy:(S.top+S.bottom)/2}},L.findBestTextLocation=function(f,x,y,v,M){var p,S,A,k,C,P=y.width;x.isClosed?(S=x.len/d.INITIALSEARCHPOINTS,p=x.min+S/2,A=x.max):(S=(x.len-P)/(d.INITIALSEARCHPOINTS+1),p=x.min+S+P/2,A=x.max-(S+P)/2);for(var R=1/0,O=0;O<d.ITERATIONS;O++){for(var X=p;X<A;X+=S){var D=b.getTextLocation(f,x.total,X,P),V=w(D,y,v,M);V<R&&(R=V,C=D,k=X)}if(R>2*d.MAXCOST)break;O&&(S/=2),A=(p=k-S/2)+1.5*S}if(R<=d.MAXCOST)return C},L.addLabelData=function(f,x,y,v){var M=x.fontSize,p=x.width+M/3,S=Math.max(0,x.height-M/3),A=f.x,k=f.y,C=f.theta,P=Math.sin(C),R=Math.cos(C),O=function(D,V){return[A+D*R-V*P,k+D*P+V*R]},X=[O(-p/2,-S/2),O(-p/2,S/2),O(p/2,S/2),O(p/2,-S/2)];y.push({text:x.text,x:A,y:k,dy:x.dy,theta:C,level:x.level,width:p,height:S}),v.push(X)},L.drawLabels=function(f,x,y,v,M){var p=f.selectAll("text").data(x,function(k){return k.text+","+k.x+","+k.y+","+k.theta});if(p.exit().remove(),p.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(k){var C=k.x+Math.sin(k.theta)*k.dy,P=k.y-Math.cos(k.theta)*k.dy;T.select(this).text(k.text).attr({x:C,y:P,transform:"rotate("+180*k.theta/Math.PI+" "+C+" "+P+")"}).call(g.convertToTspans,y)}),M){for(var S="",A=0;A<M.length;A++)S+="M"+M[A].join("L")+"Z";b.ensureSingle(v,"path","").attr("d",S)}}},18670:function(F,L,e){var T=e(89298),b=e(71828);function a(_,g,h){var o={type:"linear",range:[_,g]};return T.autoTicks(o,(g-_)/(h||15)),o}F.exports=function(_,g){var h=_.contours;if(_.autocontour){var o=_.zmin,t=_.zmax;(_.zauto||o===void 0)&&(o=b.aggNums(Math.min,null,g)),(_.zauto||t===void 0)&&(t=b.aggNums(Math.max,null,g));var i=a(o,t,_.ncontours);h.size=i.dtick,h.start=T.tickFirst(i),i.range.reverse(),h.end=T.tickFirst(i),h.start===o&&(h.start+=h.size),h.end===t&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),_._input.contours||(_._input.contours={}),b.extendFlat(_._input.contours,{start:h.start,end:h.end,size:h.size}),_._input.autocontour=!0}else if(h.type!=="constraint"){var n,r=h.start,s=h.end,l=_._input.contours;r>s&&(h.start=l.start=s,s=h.end=l.end=r,r=h.start),h.size>0||(n=r===s?1:a(r,s,_.ncontours).dtick,l.size=h.size=n)}}},84426:function(F,L,e){var T=e(39898),b=e(91424),a=e(70035),_=e(86068);F.exports=function(g){var h=T.select(g).selectAll("g.contour");h.style("opacity",function(o){return o[0].trace.opacity}),h.each(function(o){var t=T.select(this),i=o[0].trace,n=i.contours,r=i.line,s=n.size||1,l=n.start,u=n.type==="constraint",d=!u&&n.coloring==="lines",c=!u&&n.coloring==="fill",w=d||c?_(i):null;t.selectAll("g.contourlevel").each(function(x){T.select(this).selectAll("path").call(b.lineGroupStyle,r.width,d?w(x.level):r.color,r.dash)});var m=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(x){b.font(T.select(this),{family:m.family,size:m.size,color:m.color||(d?w(x.level):r.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var f;t.selectAll("g.contourfill path").style("fill",function(x){return f===void 0&&(f=x.level),w(x.level+.5*s)}),f===void 0&&(f=l),t.selectAll("g.contourbg path").style("fill",w(f-.5*s))}}),a(g)}},8724:function(F,L,e){var T=e(1586),b=e(14523);F.exports=function(a,_,g,h,o){var t,i=g("contours.coloring"),n="";i==="fill"&&(t=g("contours.showlines")),t!==!1&&(i!=="lines"&&(n=g("line.color","#000")),g("line.width",.5),g("line.dash")),i!=="none"&&(a.showlegend!==!0&&(_.showlegend=!1),_._dfltShowLegend=!1,T(a,_,h,g,{prefix:"",cLetter:"z"})),g("line.smoothing"),b(g,h,n,o)}},88085:function(F,L,e){var T=e(21606),b=e(70600),a=e(50693),_=e(1426).extendFlat,g=b.contours;F.exports=_({carpet:{valType:"string",editType:"calc"},z:T.z,a:T.x,a0:T.x0,da:T.dx,b:T.y,b0:T.y0,db:T.dy,text:T.text,hovertext:T.hovertext,transpose:T.transpose,atype:T.xtype,btype:T.ytype,fillcolor:b.fillcolor,autocontour:b.autocontour,ncontours:b.ncontours,contours:{type:g.type,start:g.start,end:g.end,size:g.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:g.showlines,showlabels:g.showlabels,labelfont:g.labelfont,labelformat:g.labelformat,operation:g.operation,value:g.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b.line.color,width:b.line.width,dash:b.line.dash,smoothing:b.line.smoothing,editType:"plot"},transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},59885:function(F,L,e){var T=e(78803),b=e(71828),a=e(68296),_=e(4742),g=e(824),h=e(43907),o=e(70769),t=e(75005),i=e(22882),n=e(18670);F.exports=function(r,s){var l=s._carpetTrace=i(r,s);if(l&&l.visible&&l.visible!=="legendonly"){if(!s.a||!s.b){var u=r.data[l.index],d=r.data[s.index];d.a||(d.a=u.a),d.b||(d.b=u.b),t(d,s,s._defaultColor,r._fullLayout)}var c=function(w,m){var f,x,y,v,M,p,S,A=m._carpetTrace,k=A.aaxis,C=A.baxis;k._minDtick=0,C._minDtick=0,b.isArray1D(m.z)&&a(m,k,C,"a","b",["z"]),f=m._a=m._a||m.a,v=m._b=m._b||m.b,f=f?k.makeCalcdata(m,"_a"):[],v=v?C.makeCalcdata(m,"_b"):[],x=m.a0||0,y=m.da||1,M=m.b0||0,p=m.db||1,S=m._z=_(m._z||m.z,m.transpose),m._emptypoints=h(S),g(S,m._emptypoints);var P=b.maxRowLength(S),R=m.xtype==="scaled"?"":f,O=o(m,R,x,y,P,k),X=m.ytype==="scaled"?"":v,D={a:O,b:o(m,X,M,p,S.length,C),z:S};return m.contours.type==="levels"&&m.contours.coloring!=="none"&&T(w,m,{vals:S,containerStr:"",cLetter:"z"}),[D]}(r,s);return n(s,s._z),c}}},75005:function(F,L,e){var T=e(71828),b=e(67684),a=e(88085),_=e(83179),g=e(67217),h=e(8724);F.exports=function(o,t,i,n){function r(s,l){return T.coerce(o,t,a,s,l)}if(r("carpet"),o.a&&o.b){if(!b(o,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?_(o,t,r,n,i,{hasHover:!1}):(g(o,t,r,function(s){return T.coerce2(o,t,a,s)}),h(o,t,r,n,{hasHover:!1}))}else t._defaultColor=i,t._length=null}},93740:function(F,L,e){F.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(F,L,e){var T=e(39898),b=e(27669),a=e(67961),_=e(91424),g=e(71828),h=e(87678),o=e(81696),t=e(29854),i=e(36914),n=e(84857),r=e(87558),s=e(20083),l=e(22882),u=e(4536);function d(m,f,x){var y=m.getPointAtLength(f),v=m.getPointAtLength(x),M=v.x-y.x,p=v.y-y.y,S=Math.sqrt(M*M+p*p);return[M/S,p/S]}function c(m){var f=Math.sqrt(m[0]*m[0]+m[1]*m[1]);return[m[0]/f,m[1]/f]}function w(m,f){var x=Math.abs(m[0]*f[0]+m[1]*f[1]);return Math.sqrt(1-x*x)/x}F.exports=function(m,f,x,y){var v=f.xaxis,M=f.yaxis;g.makeTraceGroups(y,x,"contour").each(function(p){var S=T.select(this),A=p[0],k=A.trace,C=k._carpetTrace=l(m,k),P=m.calcdata[C.index][0];if(C.visible&&C.visible!=="legendonly"){var R=A.a,O=A.b,X=k.contours,D=r(X,f,A),V=X.type==="constraint",j=X._operation,B=V?j==="="?"lines":"fill":X.coloring,W=[[R[0],O[O.length-1]],[R[R.length-1],O[O.length-1]],[R[R.length-1],O[0]],[R[0],O[0]]];h(D);var q=1e-8*(R[R.length-1]-R[0]),re=1e-8*(O[O.length-1]-O[0]);o(D,q,re);var ee,K,Y,$,ne=D;X.type==="constraint"&&(ne=n(D,j)),function(me,ye){var Te,Ce,pe,fe,Oe,Se,Me,ue,le;for(Te=0;Te<me.length;Te++){for(Oe=(fe=me[Te]).pedgepaths=[],Se=fe.ppaths=[],Ce=0;Ce<fe.edgepaths.length;Ce++){for(le=fe.edgepaths[Ce],Me=[],pe=0;pe<le.length;pe++)Me[pe]=ye(le[pe]);Oe.push(Me)}for(Ce=0;Ce<fe.paths.length;Ce++){for(le=fe.paths[Ce],ue=[],pe=0;pe<le.length;pe++)ue[pe]=ye(le[pe]);Se.push(ue)}}}(D,ce);var ae=[];for($=P.clipsegments.length-1;$>=0;$--)ee=P.clipsegments[$],K=b([],ee.x,v.c2p),Y=b([],ee.y,M.c2p),K.reverse(),Y.reverse(),ae.push(a(K,Y,ee.bicubic));var se="M"+ae.join("L")+"Z";(function(me,ye,Te,Ce,pe,fe){var Oe,Se,Me,ue,le=g.ensureSingle(me,"g","contourbg").selectAll("path").data(fe!=="fill"||pe?[]:[0]);le.enter().append("path"),le.exit().remove();var ie=[];for(ue=0;ue<ye.length;ue++)Oe=ye[ue],Se=b([],Oe.x,Te.c2p),Me=b([],Oe.y,Ce.c2p),ie.push(a(Se,Me,Oe.bicubic));le.attr("d","M"+ie.join("L")+"Z").style("stroke","none")})(S,P.clipsegments,v,M,V,B),function(me,ye,Te,Ce,pe,fe,Oe,Se,Me,ue,le){var ie=ue==="fill";ie&&s(pe,me.contours);var ge=g.ensureSingle(ye,"g","contourfill").selectAll("path").data(ie?pe:[]);ge.enter().append("path"),ge.exit().remove(),ge.each(function(Ae){var we=(Ae.prefixBoundary?le:"")+function(Ne,He,de,Le,Ee,Re,je,Fe){var Xe,Ze,at,lt,ot,bt,wt,ht="",ct=He.edgepaths.map(function(Ke,De){return De}),Tt=!0,Lt=1e-4*Math.abs(de[0][0]-de[2][0]),kt=1e-4*Math.abs(de[0][1]-de[2][1]);function Ot(Ke){return Math.abs(Ke[1]-de[0][1])<kt}function Pt(Ke){return Math.abs(Ke[1]-de[2][1])<kt}function et(Ke){return Math.abs(Ke[0]-de[0][0])<Lt}function nt(Ke){return Math.abs(Ke[0]-de[2][0])<Lt}function Ye(Ke,De){var Be,Qe,rt,vt,mt="";for(Ot(Ke)&&!nt(Ke)||Pt(Ke)&&!et(Ke)?(vt=Ee.aaxis,rt=u(Ee,Re,[Ke[0],De[0]],.5*(Ke[1]+De[1]))):(vt=Ee.baxis,rt=u(Ee,Re,.5*(Ke[0]+De[0]),[Ke[1],De[1]])),Be=1;Be<rt.length;Be++)for(mt+=vt.smoothing?"C":"L",Qe=0;Qe<rt[Be].length;Qe++){var xt=rt[Be][Qe];mt+=[je.c2p(xt[0]),Fe.c2p(xt[1])]+" "}return mt}for(Xe=0,Ze=null;ct.length;){var tt=He.edgepaths[Xe][0];for(Ze&&(ht+=Ye(Ze,tt)),wt=_.smoothopen(He.edgepaths[Xe].map(Le),He.smoothing),ht+=Tt?wt:wt.replace(/^M/,"L"),ct.splice(ct.indexOf(Xe),1),Ze=He.edgepaths[Xe][He.edgepaths[Xe].length-1],ot=-1,lt=0;lt<4;lt++){if(!Ze){g.log("Missing end?",Xe,He);break}for(Ot(Ze)&&!nt(Ze)?at=de[1]:et(Ze)?at=de[0]:Pt(Ze)?at=de[3]:nt(Ze)&&(at=de[2]),bt=0;bt<He.edgepaths.length;bt++){var ut=He.edgepaths[bt][0];Math.abs(Ze[0]-at[0])<Lt?Math.abs(Ze[0]-ut[0])<Lt&&(ut[1]-Ze[1])*(at[1]-ut[1])>=0&&(at=ut,ot=bt):Math.abs(Ze[1]-at[1])<kt?Math.abs(Ze[1]-ut[1])<kt&&(ut[0]-Ze[0])*(at[0]-ut[0])>=0&&(at=ut,ot=bt):g.log("endpt to newendpt is not vert. or horz.",Ze,at,ut)}if(ot>=0)break;ht+=Ye(Ze,at),Ze=at}if(ot===He.edgepaths.length){g.log("unclosed perimeter path");break}Xe=ot,(Tt=ct.indexOf(Xe)===-1)&&(Xe=ct[0],ht+=Ye(Ze,at)+"Z",Ze=null)}for(Xe=0;Xe<He.paths.length;Xe++)ht+=_.smoothclosed(He.paths[Xe].map(Le),He.smoothing);return ht}(0,Ae,fe,Oe,Se,Me,Te,Ce);we?T.select(this).attr("d",we).style("stroke","none"):T.select(this).remove()})}(k,S,v,M,ne,W,ce,C,P,B,se),function(me,ye,Te,Ce,pe,fe,Oe){var Se=Te._context.staticPlot,Me=g.ensureSingle(me,"g","contourlines"),ue=pe.showlines!==!1,le=pe.showlabels,ie=ue&&le,ge=t.createLines(Me,ue||le,ye,Se),Ae=t.createLineClip(Me,ie,Te,Ce.trace.uid),we=me.selectAll("g.contourlabels").data(le?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),le){var Ne=fe.xaxis,He=fe.yaxis,de=Ne._length,Le=He._length,Ee=[[[0,0],[de,0],[de,Le],[0,Le]]],Re=[];g.clearLocationCache();var je=t.labelFormatter(Te,Ce),Fe=_.tester.append("text").attr("data-notex",1).call(_.font,pe.labelfont),Xe={left:0,right:de,center:de/2,top:0,bottom:Le,middle:Le/2},Ze=Math.sqrt(de*de+Le*Le),at=i.LABELDISTANCE*Ze/Math.max(1,ye.length/i.LABELINCREASE);ge.each(function(lt){var ot=t.calcTextOpts(lt.level,je,Fe,Te);T.select(this).selectAll("path").each(function(bt){var wt=this,ht=g.getVisibleSegment(wt,Xe,ot.height/2);if(ht&&(function(kt,Ot,Pt,et,nt,Ye){for(var tt,ut=0;ut<Pt.pedgepaths.length;ut++)Ot===Pt.pedgepaths[ut]&&(tt=Pt.edgepaths[ut]);if(tt){var Ke=nt.a[0],De=nt.a[nt.a.length-1],Be=nt.b[0],Qe=nt.b[nt.b.length-1],rt=d(kt,0,1),vt=d(kt,et.total,et.total-1),mt=dt(tt[0],rt),xt=et.total-dt(tt[tt.length-1],vt);et.min<mt&&(et.min=mt),et.max>xt&&(et.max=xt),et.len=et.max-et.min}function dt(Et,pt){var gt,Mt=0,Nt=.1;return(Math.abs(Et[0]-Ke)<Nt||Math.abs(Et[0]-De)<Nt)&&(gt=c(nt.dxydb_rough(Et[0],Et[1],Nt)),Mt=Math.max(Mt,Ye*w(pt,gt)/2)),(Math.abs(Et[1]-Be)<Nt||Math.abs(Et[1]-Qe)<Nt)&&(gt=c(nt.dxyda_rough(Et[0],Et[1],Nt)),Mt=Math.max(Mt,Ye*w(pt,gt)/2)),Mt}}(wt,bt,lt,ht,Oe,ot.height),!(ht.len<(ot.width+ot.height)*i.LABELMIN)))for(var ct=Math.min(Math.ceil(ht.len/at),i.LABELMAX),Tt=0;Tt<ct;Tt++){var Lt=t.findBestTextLocation(wt,ht,ot,Re,Xe);if(!Lt)break;t.addLabelData(Lt,ot,Re,Ee)}})}),Fe.remove(),t.drawLabels(we,Re,Te,Ae,ie?Ee:null)}le&&!ue&&ge.remove()}(S,D,m,A,X,f,C),_.setClipUrl(S,C._clipPathId,m)}function ce(me){var ye=C.ab2xy(me[0],me[1],!0);return[v.c2p(ye[0]),M.c2p(ye[1])]}})}},64096:function(F,L,e){var T=e(50693),b=e(5386).fF,a=e(9012),_=e(99181),g=e(1426).extendFlat;F.exports=g({lon:_.lon,lat:_.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,hoverinfo:g({},a.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:b(),showlegend:g({},a.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(F,L,e){var T=e(92770),b=e(71828).isArrayOrTypedArray,a=e(50606).BADNUM,_=e(78803),g=e(71828)._;F.exports=function(h,o){for(var t=o._length,i=new Array(t),n=o.z,r=b(n)&&n.length,s=0;s<t;s++){var l=i[s]={},u=o.lon[s],d=o.lat[s];if(l.lonlat=T(u)&&T(d)?[+u,+d]:[a,a],r){var c=n[s];l.z=T(c)?c:a}}return _(h,o,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:g(h,"lat:")+" ",lon:g(h,"lon:")+" "}}),i}},52414:function(F,L,e){var T=e(92770),b=e(71828),a=e(7901),_=e(21081),g=e(50606).BADNUM,h=e(18214).makeBlank;F.exports=function(o){var t=o[0].trace,i=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:h()};if(!i)return n;var r,s=[],l=t.z,u=t.radius,d=b.isArrayOrTypedArray(l)&&l.length,c=b.isArrayOrTypedArray(u);for(r=0;r<o.length;r++){var w=o[r],m=w.lonlat;if(m[0]!==g){var f={};if(d){var x=w.z;f.z=x!==g?x:0}c&&(f.r=T(u[r])&&u[r]>0?+u[r]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:f})}}var y=_.extractOpts(t),v=y.reversescale?_.flipScale(y.colorscale):y.colorscale,M=v[0][1],p=["interpolate",["linear"],["heatmap-density"],0,a.opacity(M)<1?M:a.addOpacity(M,0)];for(r=1;r<v.length;r++)p.push(v[r][0],v[r][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return b.extendFlat(n.heatmap.paint,{"heatmap-weight":d?S:1/(y.max-y.min),"heatmap-color":p,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:s},n.heatmap.layout.visibility="visible",n}},79429:function(F,L,e){var T=e(71828),b=e(1586),a=e(64096);F.exports=function(_,g,h,o){function t(s,l){return T.coerce(_,g,a,s,l)}var i=t("lon")||[],n=t("lat")||[],r=Math.min(i.length,n.length);r?(g._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),b(_,g,o,t,{prefix:"",cLetter:"z"})):g.visible=!1}},62474:function(F){F.exports=function(L,e){return L.lon=e.lon,L.lat=e.lat,L.z=e.z,L}},84684:function(F,L,e){var T=e(89298),b=e(28178).hoverPoints,a=e(28178).getExtraText;F.exports=function(_,g,h){var o=b(_,g,h);if(o){var t=o[0],i=t.cd,n=i[0].trace,r=i[t.index];if(delete t.color,"z"in r){var s=t.subplot.mockAxis;t.z=r.z,t.zLabel=T.tickText(s,s.c2l(r.z),"hover").text}return t.extraText=a(n,r,i[0].t.labels),[t]}}},93814:function(F,L,e){F.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(T,b){for(var a=b.getMapLayers(),_=0;_<a.length;_++){var g=a[_],h=g.id;if(g.type==="symbol"&&typeof h=="string"&&h.indexOf("plotly-")===-1)return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(F,L,e){var T=e(52414),b=e(77734).traceLayerPrefix;function a(g,h){this.type="densitymapbox",this.subplot=g,this.uid=h,this.sourceId="source-"+h,this.layerList=[["heatmap",b+h+"-heatmap"]],this.below=null}var _=a.prototype;_.update=function(g){var h=this.subplot,o=this.layerList,t=T(g),i=h.belowLookup["trace-"+this.uid];h.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var n=0;n<o.length;n++){var r=o[n],s=r[0],l=r[1],u=t[s];h.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&h.setOptions(l,"setPaintProperty",u.paint)}},_._addLayers=function(g,h){for(var o=this.subplot,t=this.layerList,i=this.sourceId,n=0;n<t.length;n++){var r=t[n],s=r[0],l=g[s];o.addLayer({type:s,id:r[1],source:i,layout:l.layout,paint:l.paint},h)}},_._removeLayers=function(){for(var g=this.subplot.map,h=this.layerList,o=h.length-1;o>=0;o--)g.removeLayer(h[o][1])},_.dispose=function(){var g=this.subplot.map;this._removeLayers(),g.removeSource(this.sourceId)},F.exports=function(g,h){var o=h[0].trace,t=new a(g,o.uid),i=t.sourceId,n=T(h),r=t.below=g.belowLookup["trace-"+o.uid];return g.map.addSource(i,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},49789:function(F,L,e){var T=e(71828);F.exports=function(b,a){for(var _=0;_<b.length;_++)b[_].i=_;T.mergeArray(a.text,b,"tx"),T.mergeArray(a.hovertext,b,"htx");var g=a.marker;if(g){T.mergeArray(g.opacity,b,"mo"),T.mergeArray(g.color,b,"mc");var h=g.line;h&&(T.mergeArray(h.color,b,"mlc"),T.mergeArrayCastPositive(h.width,b,"mlw"))}}},1285:function(F,L,e){var T,b=e(1486),a=e(82196).line,_=e(9012),g=e(12663).axisHoverFormat,h=e(5386).fF,o=e(5386).si,t=e(18517),i=e(1426).extendFlat,n=e(7901);F.exports={x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),hovertext:b.hovertext,hovertemplate:h({},{keys:t.eventDataKeys}),hoverinfo:i({},_.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:b.text,textposition:b.textposition,insidetextanchor:i({},b.insidetextanchor,{dflt:"middle"}),textangle:i({},b.textangle,{dflt:0}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:b.outsidetextfont,constraintext:b.constraintext,cliponaxis:b.cliponaxis,orientation:i({},b.orientation,{}),offset:i({},b.offset,{arrayOk:!1}),width:i({},b.width,{arrayOk:!1}),marker:(T=i({},b.marker),delete T.pattern,T),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},a.color,{dflt:n.defaultLine}),width:i({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup}},9532:function(F,L,e){var T=e(89298),b=e(42973),a=e(49789),_=e(66279),g=e(50606).BADNUM;function h(o){return o===g?0:o}F.exports=function(o,t){var i,n,r,s,l,u,d,c,w=T.getFromId(o,t.xaxis||"x"),m=T.getFromId(o,t.yaxis||"y");t.orientation==="h"?(i=w.makeCalcdata(t,"x"),r=m.makeCalcdata(t,"y"),s=b(t,m,"y",r),l=!!t.yperiodalignment,u="y"):(i=m.makeCalcdata(t,"y"),r=w.makeCalcdata(t,"x"),s=b(t,w,"x",r),l=!!t.xperiodalignment,u="x"),n=s.vals;var f,x=Math.min(n.length,i.length),y=new Array(x);for(t._base=[],d=0;d<x;d++){i[d]<0&&(i[d]=g);var v=!1;i[d]!==g&&d+1<x&&i[d+1]!==g&&(v=!0),c=y[d]={p:n[d],s:i[d],cNext:v},t._base[d]=-.5*c.s,l&&(y[d].orig_p=r[d],y[d][u+"End"]=s.ends[d],y[d][u+"Start"]=s.starts[d]),t.ids&&(c.id=String(t.ids[d])),d===0&&(y[0].vTotal=0),y[0].vTotal+=h(c.s),c.begR=h(c.s)/h(y[0].s)}for(d=0;d<x;d++)(c=y[d]).s!==g&&(c.sumR=c.s/y[0].vTotal,c.difR=f!==void 0?c.s/f:1,f=c.s);return a(y,t),_(y,t),y}},18517:function(F){F.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(F,L,e){var T=e(11661).setGroupPositions;F.exports=function(b,a){var _,g,h=b._fullLayout,o=b._fullData,t=b.calcdata,i=a.xaxis,n=a.yaxis,r=[],s=[],l=[];for(g=0;g<o.length;g++){var u=o[g],d=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="funnel"&&(_=t[g],d?l.push(_):s.push(_),r.push(_))}var c={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};for(T(b,i,n,s,c),T(b,n,i,l,c),g=0;g<r.length;g++){_=r[g];for(var w=0;w<_.length;w++)w+1<_.length&&(_[w].nextP0=_[w+1].p0,_[w].nextS0=_[w+1].s0,_[w].nextP1=_[w+1].p1,_[w].nextS1=_[w+1].s1)}}},26199:function(F,L,e){var T=e(71828),b=e(26125),a=e(90769).handleText,_=e(67513),g=e(73927),h=e(1285),o=e(7901);F.exports={supplyDefaults:function(t,i,n,r){function s(c,w){return T.coerce(t,i,h,c,w)}if(_(t,i,r,s)){g(t,i,r,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var l=s("text");s("hovertext"),s("hovertemplate");var u=s("textposition");a(t,i,r,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||s("textinfo",Array.isArray(l)?"text+value":"value");var d=s("marker.color",n);s("marker.line.color",o.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",function(c){var w=T.isArrayOrTypedArray(c)?"#000":c;return o.addOpacity(w,.5*o.opacity(w))}(d)),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(t,i){var n,r;function s(u){return T.coerce(r._input,r,h,u)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)n=(r=t[l])._input,b(n,r,i,s)}}},34598:function(F){F.exports=function(L,e){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(L.percentInitial=e.percentInitial),"percentPrevious"in e&&(L.percentPrevious=e.percentPrevious),"percentTotal"in e&&(L.percentTotal=e.percentTotal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},63341:function(F,L,e){var T=e(7901).opacity,b=e(95423).hoverOnBars,a=e(71828).formatPercent;F.exports=function(_,g,h,o,t){var i=b(_,g,h,o,t);if(i){var n=i.cd,r=n[0].trace,s=r.orientation==="h",l=n[i.index];i[(s?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=a(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=a(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=a(l.sumR,1);var u=l.hi||r.hoverinfo,d=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",w=u.split("+"),m=function(f){return c||w.indexOf(f)!==-1};m("percent initial")&&d.push(i.percentInitialLabel+" of initial"),m("percent previous")&&d.push(i.percentPreviousLabel+" of previous"),m("percent total")&&d.push(i.percentTotalLabel+" of total")}return i.extraText=d.join("<br>"),i.color=function(f,x){var y=f.marker,v=x.mc||y.color,M=x.mlc||y.line.color,p=x.mlw||y.line.width;return T(v)?v:T(M)&&p?M:void 0}(r,l),[i]}}},51759:function(F,L,e){F.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(F){F.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(F,L,e){var T=e(71828),b=e(10440);F.exports=function(a,_,g){var h=!1;function o(n,r){return T.coerce(a,_,b,n,r)}for(var t=0;t<g.length;t++){var i=g[t];if(i.visible&&i.type==="funnel"){h=!0;break}}h&&(o("funnelmode"),o("funnelgap",.2),o("funnelgroupgap"))}},80461:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(50606).BADNUM,g=e(17295),h=e(72597).clearMinTextSize;function o(t,i,n,r){var s=[],l=[],u=r?i:n,d=r?n:i;return s[0]=u.c2p(t.s0,!0),l[0]=d.c2p(t.p0,!0),s[1]=u.c2p(t.s1,!0),l[1]=d.c2p(t.p1,!0),s[2]=u.c2p(t.nextS0,!0),l[2]=d.c2p(t.nextP0,!0),s[3]=u.c2p(t.nextS1,!0),l[3]=d.c2p(t.nextP1,!0),r?[s,l]:[l,s]}F.exports=function(t,i,n,r){var s=t._fullLayout;h("funnel",s),function(l,u,d,c){var w=u.xaxis,m=u.yaxis;b.makeTraceGroups(c,d,"trace bars").each(function(f){var x=T.select(this),y=f[0].trace,v=b.ensureSingle(x,"g","regions");if(y.connector&&y.connector.visible){var M=y.orientation==="h",p=v.selectAll("g.region").data(b.identity);p.enter().append("g").classed("region",!0),p.exit().remove();var S=p.size();p.each(function(A,k){if(k===S-1||A.cNext){var C=o(A,w,m,M),P=C[0],R=C[1],O="";P[0]!==_&&R[0]!==_&&P[1]!==_&&R[1]!==_&&P[2]!==_&&R[2]!==_&&P[3]!==_&&R[3]!==_&&(O+=M?"M"+P[0]+","+R[1]+"L"+P[2]+","+R[2]+"H"+P[3]+"L"+P[1]+","+R[1]+"Z":"M"+P[1]+","+R[1]+"L"+P[2]+","+R[3]+"V"+R[2]+"L"+P[1]+","+R[0]+"Z"),O===""&&(O="M0,0Z"),b.ensureSingle(T.select(this),"path").attr("d",O).call(a.setClipUrl,u.layerClipId,l)}})}else v.remove()})}(t,i,n,r),function(l,u,d,c){var w=u.xaxis,m=u.yaxis;b.makeTraceGroups(c,d,"trace bars").each(function(f){var x=T.select(this),y=f[0].trace,v=b.ensureSingle(x,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var M=y.orientation==="h",p=v.selectAll("g.line").data(b.identity);p.enter().append("g").classed("line",!0),p.exit().remove();var S=p.size();p.each(function(A,k){if(k===S-1||A.cNext){var C=o(A,w,m,M),P=C[0],R=C[1],O="";P[3]!==void 0&&R[3]!==void 0&&(M?(O+="M"+P[0]+","+R[1]+"L"+P[2]+","+R[2],O+="M"+P[1]+","+R[1]+"L"+P[3]+","+R[2]):(O+="M"+P[1]+","+R[1]+"L"+P[2]+","+R[3],O+="M"+P[1]+","+R[0]+"L"+P[2]+","+R[2])),O===""&&(O="M0,0Z"),b.ensureSingle(T.select(this),"path").attr("d",O).call(a.setClipUrl,u.layerClipId,l)}})}else v.remove()})}(t,i,n,r),g.plot(t,i,n,r,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},68266:function(F,L,e){var T=e(39898),b=e(91424),a=e(7901),_=e(37822).DESELECTDIM,g=e(16688),h=e(72597).resizeText,o=g.styleTextPoints;F.exports={style:function(t,i,n){var r=n||T.select(t).selectAll("g.funnellayer").selectAll("g.trace");h(t,r,"funnel"),r.style("opacity",function(s){return s[0].trace.opacity}),r.each(function(s){var l=T.select(this),u=s[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=u.marker;T.select(this).call(a.fill,d.mc||c.color).call(a.stroke,d.mlc||c.line.color).call(b.dashLine,c.line.dash,d.mlw||c.line.width).style("opacity",u.selectedpoints&&!d.selected?_:1)}}),o(l,u,t),l.selectAll(".regions").each(function(){T.select(this).selectAll("path").style("stroke-width",0).call(a.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var d=u.connector.line;b.lineGroupStyle(T.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},86807:function(F,L,e){var T=e(34e3),b=e(9012),a=e(27670).Y,_=e(5386).fF,g=e(5386).si,h=e(1426).extendFlat;F.exports={labels:T.labels,label0:T.label0,dlabel:T.dlabel,values:T.values,marker:{colors:T.marker.colors,line:{color:h({},T.marker.line.color,{dflt:null}),width:h({},T.marker.line.width,{dflt:1}),editType:"calc"},pattern:T.marker.pattern,editType:"calc"},text:T.text,hovertext:T.hovertext,scalegroup:h({},T.scalegroup,{}),textinfo:h({},T.textinfo,{flags:["label","text","value","percent"]}),texttemplate:g({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:h({},b.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","text","percent"]}),textposition:h({},T.textposition,{values:["inside","none"],dflt:"inside"}),textfont:T.textfont,insidetextfont:T.insidetextfont,title:{text:T.title.text,font:T.title.font,position:h({},T.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:a({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(F,L,e){var T=e(74875);L.name="funnelarea",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},89574:function(F,L,e){var T=e(32354);F.exports={calc:function(b,a){return T.calc(b,a)},crossTraceCalc:function(b){T.crossTraceCalc(b,{type:"funnelarea"})}}},86282:function(F,L,e){var T=e(71828),b=e(86807),a=e(27670).c,_=e(90769).handleText,g=e(37434).handleLabelsAndValues,h=e(37434).handleMarkerDefaults;F.exports=function(o,t,i,n){function r(x,y){return T.coerce(o,t,b,x,y)}var s=r("labels"),l=r("values"),u=g(s,l),d=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),d){t._length=d,h(o,t,n,r),r("scalegroup");var c,w=r("text"),m=r("texttemplate");if(m||(c=r("textinfo",Array.isArray(w)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),m||c&&c!=="none"){var f=r("textposition");_(o,t,n,r,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}a(t,n,r),r("title.text")&&(r("title.position"),T.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},10421:function(F,L,e){F.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function(F,L,e){var T=e(92774).hiddenlabels;F.exports={hiddenlabels:T,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(F,L,e){var T=e(71828),b=e(80097);F.exports=function(a,_){function g(h,o){return T.coerce(a,_,b,h,o)}g("hiddenlabels"),g("funnelareacolorway",_.colorway),g("extendfunnelareacolors")}},79187:function(F,L,e){var T=e(39898),b=e(91424),a=e(71828),_=a.strScale,g=a.strTranslate,h=e(63893),o=e(17295).toMoveInsideBar,t=e(72597),i=t.recordMinTextSize,n=t.clearMinTextSize,r=e(53581),s=e(14575),l=s.attachFxHandlers,u=s.determineInsideTextFont,d=s.layoutAreas,c=s.prerenderTitles,w=s.positionTitleOutside,m=s.formatSliceLabel;function f(x,y){return"l"+(y[0]-x[0])+","+(y[1]-x[1])}F.exports=function(x,y){var v=x._context.staticPlot,M=x._fullLayout;n("funnelarea",M),c(y,x),d(y,M._size),a.makeTraceGroups(M._funnelarealayer,y,"trace").each(function(p){var S=T.select(this),A=p[0],k=A.trace;(function(C){if(C.length){var P=C[0],R=P.trace,O=R.aspectratio,X=R.baseratio;X>.999&&(X=.999);var D,V,j,B=Math.pow(X,2),W=P.vTotal,q=W,re=W*B/(1-B)/W,ee=[];for(ee.push(Me()),V=C.length-1;V>-1;V--)if(!(j=C[V]).hidden){var K=j.v/q;re+=K,ee.push(Me())}var Y=1/0,$=-1/0;for(V=0;V<ee.length;V++)D=ee[V],Y=Math.min(Y,D[1]),$=Math.max($,D[1]);for(V=0;V<ee.length;V++)ee[V][1]-=($+Y)/2;var ne=ee[ee.length-1][0],ae=P.r,se=($-Y)/2,ce=ae/ne,me=ae/se*O;for(P.r=me*se,V=0;V<ee.length;V++)ee[V][0]*=ce,ee[V][1]*=me;var ye,Te,Ce=[-(D=ee[0])[0],D[1]],pe=[D[0],D[1]],fe=0;for(V=C.length-1;V>-1;V--)if(!(j=C[V]).hidden){var Oe=ee[fe+=1][0],Se=ee[fe][1];j.TL=[-Oe,Se],j.TR=[Oe,Se],j.BL=Ce,j.BR=pe,j.pxmid=(ye=j.TR,Te=j.BR,[.5*(ye[0]+Te[0]),.5*(ye[1]+Te[1])]),Ce=j.TL,pe=j.TR}}function Me(){var ue,le={x:ue=Math.sqrt(re),y:-ue};return[le.x,le.y]}})(p),S.each(function(){var C=T.select(this).selectAll("g.slice").data(p);C.enter().append("g").classed("slice",!0),C.exit().remove(),C.each(function(R,O){if(R.hidden)T.select(this).selectAll("path,g").remove();else{R.pointNumber=R.i,R.curveNumber=k.index;var X=A.cx,D=A.cy,V=T.select(this),j=V.selectAll("path.surface").data([R]);j.enter().append("path").classed("surface",!0).style({"pointer-events":v?"none":"all"}),V.call(l,x,p);var B="M"+(X+R.TR[0])+","+(D+R.TR[1])+f(R.TR,R.BR)+f(R.BR,R.BL)+f(R.BL,R.TL)+"Z";j.attr("d",B),m(x,R,A);var W=r.castOption(k.textposition,R.pts),q=V.selectAll("g.slicetext").data(R.text&&W!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var re=a.ensureSingle(T.select(this),"text","",function(ce){ce.attr("data-notex",1)}),ee=a.ensureUniformFontSize(x,u(k,R,M.font));re.text(R.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,ee).call(h.convertToTspans,x);var K,Y,$,ne=b.bBox(re.node()),ae=Math.min(R.BL[1],R.BR[1])+D,se=Math.max(R.TL[1],R.TR[1])+D;Y=Math.max(R.TL[0],R.BL[0])+X,$=Math.min(R.TR[0],R.BR[0])+X,(K=o(Y,$,ae,se,ne,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ee.size,i(k.type,K,M),p[O].transform=K,a.setTransormAndDisplay(re,K)})}});var P=T.select(this).selectAll("g.titletext").data(k.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var R=a.ensureSingle(T.select(this),"text","",function(D){D.attr("data-notex",1)}),O=k.title.text;k._meta&&(O=a.templateString(O,k._meta)),R.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,k.title.font).call(h.convertToTspans,x);var X=w(A,M._size);R.attr("transform",g(X.x,X.y)+_(Math.min(1,X.scale))+g(X.tx,X.ty))})})})}},71858:function(F,L,e){var T=e(39898),b=e(63463),a=e(72597).resizeText;F.exports=function(_){var g=_._fullLayout._funnelarealayer.selectAll(".trace");a(_,g,"funnelarea"),g.each(function(h){var o=h[0].trace,t=T.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){T.select(this).call(b,i,o,_)})})}},21606:function(F,L,e){var T=e(82196),b=e(9012),a=e(41940),_=e(12663).axisHoverFormat,g=e(5386).fF,h=e(5386).si,o=e(50693),t=e(1426).extendFlat;F.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},T.x,{impliedEdits:{xtype:"array"}}),x0:t({},T.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},T.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},T.y,{impliedEdits:{ytype:"array"}}),y0:t({},T.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},T.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},T.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},T.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},T.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},T.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},T.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},T.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:g(),texttemplate:h({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:a({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},b.showlegend,{dflt:!1})},{transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},90757:function(F,L,e){var T=e(73972),b=e(71828),a=e(89298),_=e(42973),g=e(17562),h=e(78803),o=e(68296),t=e(4742),i=e(824),n=e(43907),r=e(70769),s=e(50606).BADNUM;function l(u){for(var d=[],c=u.length,w=0;w<c;w++){var m=u[w];m!==s&&d.push(m)}return d}F.exports=function(u,d){var c,w,m,f,x,y,v,M,p,S,A,k=a.getFromId(u,d.xaxis||"x"),C=a.getFromId(u,d.yaxis||"y"),P=T.traceIs(d,"contour"),R=T.traceIs(d,"histogram"),O=T.traceIs(d,"gl2d"),X=P?"best":d.zsmooth;if(k._minDtick=0,C._minDtick=0,R)f=(A=g(u,d)).orig_x,c=A.x,w=A.x0,m=A.dx,M=A.orig_y,x=A.y,y=A.y0,v=A.dy,p=A.z;else{var D=d.z;b.isArray1D(D)?(o(d,k,C,"x","y",["z"]),c=d._x,x=d._y,D=d._z):(f=d.x?k.makeCalcdata(d,"x"):[],M=d.y?C.makeCalcdata(d,"y"):[],c=_(d,k,"x",f).vals,x=_(d,C,"y",M).vals,d._x=c,d._y=x),w=d.x0,m=d.dx,y=d.y0,v=d.dy,p=t(D,d,k,C)}function V($){X=d._input.zsmooth=d.zsmooth=!1,b.warn('cannot use zsmooth: "fast": '+$)}function j($){if($.length>1){var ne=($[$.length-1]-$[0])/($.length-1),ae=Math.abs(ne/100);for(S=0;S<$.length-1;S++)if(Math.abs($[S+1]-$[S]-ne)>ae)return!1}return!0}(k.rangebreaks||C.rangebreaks)&&(p=function($,ne,ae){for(var se=[],ce=-1,me=0;me<ae.length;me++)if(ne[me]!==s){se[++ce]=[];for(var ye=0;ye<ae[me].length;ye++)$[ye]!==s&&se[ce].push(ae[me][ye])}return se}(c,x,p),R||(c=l(c),x=l(x),d._x=c,d._y=x)),R||!P&&!d.connectgaps||(d._emptypoints=n(p),i(p,d._emptypoints)),d._islinear=!1,k.type==="log"||C.type==="log"?X==="fast"&&V("log axis found"):j(c)?j(x)?d._islinear=!0:X==="fast"&&V("y scale is not linear"):X==="fast"&&V("x scale is not linear");var B=b.maxRowLength(p),W=d.xtype==="scaled"?"":c,q=r(d,W,w,m,B,k),re=d.ytype==="scaled"?"":x,ee=r(d,re,y,v,p.length,C);O||(d._extremes[k._id]=a.findExtremes(k,q),d._extremes[C._id]=a.findExtremes(C,ee));var K={x:q,y:ee,z:p,text:d._text||d.text,hovertext:d._hovertext||d.hovertext};if(d.xperiodalignment&&f&&(K.orig_x=f),d.yperiodalignment&&M&&(K.orig_y=M),W&&W.length===q.length-1&&(K.xCenter=W),re&&re.length===ee.length-1&&(K.yCenter=re),R&&(K.xRanges=A.xRanges,K.yRanges=A.yRanges,K.pts=A.pts),P||h(u,d,{vals:p,cLetter:"z"}),P&&d.contours&&d.contours.coloring==="heatmap"){var Y={type:d.type==="contour"?"heatmap":"histogram2d",xcalendar:d.xcalendar,ycalendar:d.ycalendar};K.xfill=r(Y,W,w,m,B,k),K.yfill=r(Y,re,y,v,p.length,C)}return[K]}},4742:function(F,L,e){var T=e(92770),b=e(71828),a=e(50606).BADNUM;F.exports=function(_,g,h,o){var t,i,n,r,s,l;function u(x){if(T(x))return+x}if(g&&g.transpose){for(t=0,s=0;s<_.length;s++)t=Math.max(t,_[s].length);if(t===0)return!1;n=function(x){return x.length},r=function(x,y,v){return(x[v]||[])[y]}}else t=_.length,n=function(x,y){return x[y].length},r=function(x,y,v){return(x[y]||[])[v]};var d=function(x,y,v){return y===a||v===a?a:r(x,y,v)};function c(x){if(g&&g.type!=="carpet"&&g.type!=="contourcarpet"&&x&&x.type==="category"&&g["_"+x._id.charAt(0)].length){var y=x._id.charAt(0),v={},M=g["_"+y+"CategoryMap"]||g[y];for(s=0;s<M.length;s++)v[M[s]]=s;return function(p){var S=v[x._categories[p]];return S+1?S:a}}return b.identity}var w=c(h),m=c(o);o&&o.type==="category"&&(t=o._categories.length);var f=new Array(t);for(s=0;s<t;s++)for(i=h&&h.type==="category"?h._categories.length:n(_,s),f[s]=new Array(i),l=0;l<i;l++)f[s][l]=u(d(_,m(s),w(l)));return f}},61243:function(F){F.exports={min:"zmin",max:"zmax"}},68296:function(F,L,e){var T=e(71828),b=e(50606).BADNUM,a=e(42973);F.exports=function(_,g,h,o,t,i){var n=_._length,r=g.makeCalcdata(_,o),s=h.makeCalcdata(_,t);r=a(_,g,o,r).vals,s=a(_,h,t,s).vals;var l,u,d,c,w=_.text,m=w!==void 0&&T.isArray1D(w),f=_.hovertext,x=f!==void 0&&T.isArray1D(f),y=T.distinctVals(r),v=y.vals,M=T.distinctVals(s),p=M.vals,S=[],A=p.length,k=v.length;for(l=0;l<i.length;l++)S[l]=T.init2dArray(A,k);m&&(d=T.init2dArray(A,k)),x&&(c=T.init2dArray(A,k));var C=T.init2dArray(A,k);for(l=0;l<n;l++)if(r[l]!==b&&s[l]!==b){var P=T.findBin(r[l]+y.minDiff/2,v),R=T.findBin(s[l]+M.minDiff/2,p);for(u=0;u<i.length;u++){var O=_[i[u]];S[u][R][P]=O[l],C[R][P]=l}m&&(d[R][P]=w[l]),x&&(c[R][P]=f[l])}for(_["_"+o]=v,_["_"+t]=p,u=0;u<i.length;u++)_["_"+i[u]]=S[u];m&&(_._text=d),x&&(_._hovertext=c),g&&g.type==="category"&&(_["_"+o+"CategoryMap"]=v.map(function(X){return g._categories[X]})),h&&h.type==="category"&&(_["_"+t+"CategoryMap"]=p.map(function(X){return h._categories[X]})),_._after2before=C}},76382:function(F,L,e){var T=e(71828),b=e(67684),a=e(58623),_=e(73927),g=e(49901),h=e(1586),o=e(21606);F.exports=function(t,i,n,r){function s(l,u){return T.coerce(t,i,o,l,u)}b(t,i,s,r)?(_(t,i,r,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),a(s,r),g(t,i,s,r),s("hoverongaps"),s("connectgaps",T.isArray1D(i.z)&&i.zsmooth!==!1),h(t,i,r,s,{prefix:"",cLetter:"z"})):i.visible=!1}},43907:function(F,L,e){var T=e(71828).maxRowLength;F.exports=function(b){var a,_,g,h,o,t,i,n,r=[],s={},l=[],u=b[0],d=[],c=[0,0,0],w=T(b);for(_=0;_<b.length;_++)for(a=d,d=u,u=b[_+1]||[],g=0;g<w;g++)d[g]===void 0&&((t=(d[g-1]!==void 0?1:0)+(d[g+1]!==void 0?1:0)+(a[g]!==void 0?1:0)+(u[g]!==void 0?1:0))?(_===0&&t++,g===0&&t++,_===b.length-1&&t++,g===d.length-1&&t++,t<4&&(s[[_,g]]=[_,g,t]),r.push([_,g,t])):l.push([_,g]));for(;l.length;){for(i={},n=!1,o=l.length-1;o>=0;o--)(t=((s[[(_=(h=l[o])[0])-1,g=h[1]]]||c)[2]+(s[[_+1,g]]||c)[2]+(s[[_,g-1]]||c)[2]+(s[[_,g+1]]||c)[2])/20)&&(i[h]=[_,g,t],l.splice(o,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(h in i)s[h]=i[h],r.push(i[h])}return r.sort(function(m,f){return f[2]-m[2]})}},46248:function(F,L,e){var T=e(30211),b=e(71828),a=e(89298),_=e(21081).extractOpts;F.exports=function(g,h,o,t,i){i||(i={});var n,r,s,l,u=i.isContour,d=g.cd[0],c=d.trace,w=g.xa,m=g.ya,f=d.x,x=d.y,y=d.z,v=d.xCenter,M=d.yCenter,p=d.zmask,S=c.zhoverformat,A=f,k=x;if(g.index!==!1){try{s=Math.round(g.index[1]),l=Math.round(g.index[0])}catch{return void b.error("Error hovering on heatmap, pointNumber must be [row,col], found:",g.index)}if(s<0||s>=y[0].length||l<0||l>y.length)return}else{if(T.inbox(h-f[0],h-f[f.length-1],0)>0||T.inbox(o-x[0],o-x[x.length-1],0)>0)return;if(u){var C;for(A=[2*f[0]-f[1]],C=1;C<f.length;C++)A.push((f[C]+f[C-1])/2);for(A.push([2*f[f.length-1]-f[f.length-2]]),k=[2*x[0]-x[1]],C=1;C<x.length;C++)k.push((x[C]+x[C-1])/2);k.push([2*x[x.length-1]-x[x.length-2]])}s=Math.max(0,Math.min(A.length-2,b.findBin(h,A))),l=Math.max(0,Math.min(k.length-2,b.findBin(o,k)))}var P,R,O=w.c2p(f[s]),X=w.c2p(f[s+1]),D=m.c2p(x[l]),V=m.c2p(x[l+1]);u?(P=d.orig_x||f,R=d.orig_y||x,X=O,n=P[s],V=D,r=R[l]):(P=d.orig_x||v||f,R=d.orig_y||M||x,n=v?P[s]:(P[s]+P[s+1])/2,r=M?R[l]:(R[l]+R[l+1])/2,w&&w.type==="category"&&(n=f[s]),m&&m.type==="category"&&(r=x[l]),c.zsmooth&&(O=X=w.c2p(n),D=V=m.c2p(r)));var j=y[l][s];if(p&&!p[l][s]&&(j=void 0),j!==void 0||c.hoverongaps){var B;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[l])?B=d.hovertext[l][s]:Array.isArray(d.text)&&Array.isArray(d.text[l])&&(B=d.text[l][s]);var W=_(c),q={type:"linear",range:[W.min,W.max],hoverformat:S,_separators:w._separators,_numFormat:w._numFormat},re=a.tickText(q,j,"hover").text;return[b.extendFlat(g,{index:c._after2before?c._after2before[l][s]:[l,s],distance:g.maxHoverDistance,spikeDistance:g.maxSpikeDistance,x0:O,x1:X,y0:D,y1:V,xLabelVal:n,yLabelVal:r,zLabelVal:j,zLabel:re,text:B})]}}},92165:function(F,L,e){F.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(F,L,e){var T=e(71828),b=[[-1,0],[1,0],[0,-1],[0,1]];function a(g){return .5-.25*Math.min(1,.5*g)}function _(g,h,o){var t,i,n,r,s,l,u,d,c,w,m,f,x,y=0;for(r=0;r<h.length;r++){for(i=(t=h[r])[0],n=t[1],m=g[i][n],w=0,c=0,s=0;s<4;s++)(u=g[i+(l=b[s])[0]])&&(d=u[n+l[1]])!==void 0&&(w===0?f=x=d:(f=Math.min(f,d),x=Math.max(x,d)),c++,w+=d);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";g[i][n]=w/c,m===void 0?c<4&&(y=1):(g[i][n]=(1+o)*g[i][n]-o*m,x>f&&(y=Math.max(y,Math.abs(g[i][n]-m)/(x-f))))}return y}F.exports=function(g,h){var o,t=1;for(_(g,h),o=0;o<h.length&&!(h[o][2]<4);o++);for(h=h.slice(o),o=0;o<100&&t>.01;o++)t=_(g,h,a(t));return t>.01&&T.log("interp2d didn't converge quickly",t),g}},58623:function(F,L,e){var T=e(71828);F.exports=function(b,a){b("texttemplate");var _=T.extendFlat({},a.font,{color:"auto",size:"auto"});T.coerceFont(b,"textfont",_)}},70769:function(F,L,e){var T=e(73972),b=e(71828).isArrayOrTypedArray;F.exports=function(a,_,g,h,o,t){var i,n,r,s=[],l=T.traceIs(a,"contour"),u=T.traceIs(a,"histogram"),d=T.traceIs(a,"gl2d");if(b(_)&&_.length>1&&!u&&t.type!=="category"){var c=_.length;if(!(c<=o))return l?_.slice(0,o):_.slice(0,o+1);if(l||d)s=_.slice(0,o);else if(o===1)s=[_[0]-.5,_[0]+.5];else{for(s=[1.5*_[0]-.5*_[1]],r=1;r<c;r++)s.push(.5*(_[r-1]+_[r]));s.push(1.5*_[c-1]-.5*_[c-2])}if(c<o){var w=s[s.length-1],m=w-s[s.length-2];for(r=c;r<o;r++)w+=m,s.push(w)}}else{var f=a[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(g,0,f):b(_)&&_.length===1?_[0]:g===void 0?0:(t.type==="log"?t.d2c:t.r2c)(g,0,f),n=h||1,r=l||d?0:-.5;r<o;r++)s.push(i+n*r)}return s}},50347:function(F,L,e){var T=e(39898),b=e(84267),a=e(73972),_=e(91424),g=e(89298),h=e(71828),o=e(63893),t=e(8225),i=e(7901),n=e(21081).extractOpts,r=e(21081).makeColorScaleFuncFromTrace,s=e(77922),l=e(18783).LINE_SPACING,u=e(3883),d=e(32396).STYLE,c="heatmap-label";function w(v){return v.selectAll("g."+c)}function m(v){w(v).remove()}function f(v,M){var p=M.length-2,S=h.constrain(h.findBin(v,M),0,p),A=M[S],k=M[S+1],C=h.constrain(S+(v-A)/(k-A)-.5,0,p),P=Math.round(C),R=Math.abs(C-P);return C&&C!==p&&R?{bin0:P,frac:R,bin1:Math.round(P+R/(C-P))}:{bin0:P,bin1:P,frac:0}}function x(v,M){var p=M.length-1,S=h.constrain(h.findBin(v,M),0,p),A=M[S],k=(v-A)/(M[S+1]-A)||0;return k<=0?{bin0:S,bin1:S,frac:0}:k<.5?{bin0:S,bin1:S+1,frac:k}:{bin0:S+1,bin1:S,frac:1-k}}function y(v,M,p){v[M]=p[0],v[M+1]=p[1],v[M+2]=p[2],v[M+3]=Math.round(255*p[3])}F.exports=function(v,M,p,S){var A=M.xaxis,k=M.yaxis;h.makeTraceGroups(S,p,"hm").each(function(C){var P,R,O,X,D,V,j,B,W=T.select(this),q=C[0],re=q.trace,ee=re.xgap||0,K=re.ygap||0,Y=q.z,$=q.x,ne=q.y,ae=q.xCenter,se=q.yCenter,ce=a.traceIs(re,"contour"),me=ce?"best":re.zsmooth,ye=Y.length,Te=h.maxRowLength(Y),Ce=!1,pe=!1;for(V=0;P===void 0&&V<$.length-1;)P=A.c2p($[V]),V++;for(V=$.length-1;R===void 0&&V>0;)R=A.c2p($[V]),V--;for(R<P&&(O=R,R=P,P=O,Ce=!0),V=0;X===void 0&&V<ne.length-1;)X=k.c2p(ne[V]),V++;for(V=ne.length-1;D===void 0&&V>0;)D=k.c2p(ne[V]),V--;D<X&&(O=X,X=D,D=O,pe=!0),ce&&(ae=$,se=ne,$=q.xfill,ne=q.yfill);var fe="default";if(me?fe=me==="best"?"smooth":"fast":re._islinear&&ee===0&&K===0&&u()&&(fe="fast"),fe!=="fast"){var Oe=me==="best"?0:.5;P=Math.max(-Oe*A._length,P),R=Math.min((1+Oe)*A._length,R),X=Math.max(-Oe*k._length,X),D=Math.min((1+Oe)*k._length,D)}var Se,Me,ue=Math.round(R-P),le=Math.round(D-X);if(P>=A._length||R<=0||X>=k._length||D<=0)return W.selectAll("image").data([]).exit().remove(),void m(W);fe==="fast"?(Se=Te,Me=ye):(Se=ue,Me=le);var ie=document.createElement("canvas");ie.width=Se,ie.height=Me;var ge,Ae,we=ie.getContext("2d"),Ne=r(re,{noNumericCheck:!0,returnArray:!0});fe==="fast"?(ge=Ce?function(Gt){return Te-1-Gt}:h.identity,Ae=pe?function(Gt){return ye-1-Gt}:h.identity):(ge=function(Gt){return h.constrain(Math.round(A.c2p($[Gt])-P),0,ue)},Ae=function(Gt){return h.constrain(Math.round(k.c2p(ne[Gt])-X),0,le)});var He,de,Le,Ee,Re=Ae(0),je=[Re,Re],Fe=Ce?0:1,Xe=pe?0:1,Ze=0,at=0,lt=0,ot=0;function bt(Gt,ln){if(Gt!==void 0){var mn=Ne(Gt);return mn[0]=Math.round(mn[0]),mn[1]=Math.round(mn[1]),mn[2]=Math.round(mn[2]),Ze+=ln,at+=mn[0]*ln,lt+=mn[1]*ln,ot+=mn[2]*ln,mn}return[0,0,0,0]}function wt(Gt,ln,mn,_n){var Ln=Gt[mn.bin0];if(Ln===void 0)return bt(void 0,1);var Yn,Nn=Gt[mn.bin1],Bn=ln[mn.bin0],rr=ln[mn.bin1],Yt=Nn-Ln||0,An=Bn-Ln||0;return Yn=Nn===void 0?rr===void 0?0:Bn===void 0?2*(rr-Ln):2*(2*rr-Bn-Ln)/3:rr===void 0?Bn===void 0?0:2*(2*Ln-Nn-Bn)/3:Bn===void 0?2*(2*rr-Nn-Ln)/3:rr+Ln-Nn-Bn,bt(Ln+mn.frac*Yt+_n.frac*(An+mn.frac*Yn))}if(fe!=="default"){var ht,ct=0;try{ht=new Uint8Array(Se*Me*4)}catch{ht=new Array(Se*Me*4)}if(fe==="smooth"){var Tt,Lt,kt,Ot=ae||$,Pt=se||ne,et=new Array(Ot.length),nt=new Array(Pt.length),Ye=new Array(ue),tt=ae?x:f,ut=se?x:f;for(V=0;V<Ot.length;V++)et[V]=Math.round(A.c2p(Ot[V])-P);for(V=0;V<Pt.length;V++)nt[V]=Math.round(k.c2p(Pt[V])-X);for(V=0;V<ue;V++)Ye[V]=tt(V,et);for(j=0;j<le;j++)for(Lt=Y[(Tt=ut(j,nt)).bin0],kt=Y[Tt.bin1],V=0;V<ue;V++,ct+=4)y(ht,ct,Ee=wt(Lt,kt,Ye[V],Tt))}else for(j=0;j<ye;j++)for(Le=Y[j],je=Ae(j),V=0;V<Te;V++)Ee=bt(Le[V],1),y(ht,ct=4*(je*Te+ge(V)),Ee);var Ke=we.createImageData(Se,Me);try{Ke.data.set(ht)}catch{var De=Ke.data,Be=De.length;for(j=0;j<Be;j++)De[j]=ht[j]}we.putImageData(Ke,0,0)}else{var Qe=Math.floor(ee/2),rt=Math.floor(K/2);for(j=0;j<ye;j++)if(Le=Y[j],je.reverse(),je[Xe]=Ae(j+1),je[0]!==je[1]&&je[0]!==void 0&&je[1]!==void 0)for(He=[de=ge(0),de],V=0;V<Te;V++)He.reverse(),He[Fe]=ge(V+1),He[0]!==He[1]&&He[0]!==void 0&&He[1]!==void 0&&(Ee=bt(Le[V],(He[1]-He[0])*(je[1]-je[0])),we.fillStyle="rgba("+Ee.join(",")+")",we.fillRect(He[0]+Qe,je[0]+rt,He[1]-He[0]-ee,je[1]-je[0]-K))}at=Math.round(at/Ze),lt=Math.round(lt/Ze),ot=Math.round(ot/Ze);var vt=b("rgb("+at+","+lt+","+ot+")");v._hmpixcount=(v._hmpixcount||0)+Ze,v._hmlumcount=(v._hmlumcount||0)+Ze*vt.getLuminance();var mt=W.selectAll("image").data(C);mt.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),mt.attr({height:le,width:ue,x:P,y:X,"xlink:href":ie.toDataURL("image/png")}),fe!=="fast"||me||mt.attr("style",d),m(W);var xt=re.texttemplate;if(xt){var dt=n(re),Et={type:"linear",range:[dt.min,dt.max],_separators:A._separators,_numFormat:A._numFormat},pt=re.type==="histogram2dcontour",gt=re.type==="contour",Mt=gt?ye-1:ye,Nt=gt?1:0,Bt=gt?Te-1:Te,Ut=[];for(V=gt?1:0;V<Mt;V++){var Jt;if(gt)Jt=q.y[V];else if(pt){if(V===0||V===ye-1)continue;Jt=q.y[V]}else if(q.yCenter)Jt=q.yCenter[V];else{if(V+1===ye&&q.y[V+1]===void 0)continue;Jt=(q.y[V]+q.y[V+1])/2}var Vt=Math.round(k.c2p(Jt));if(!(0>Vt||Vt>k._length))for(j=Nt;j<Bt;j++){var Qt;if(gt)Qt=q.x[j];else if(pt){if(j===0||j===Te-1)continue;Qt=q.x[j]}else if(q.xCenter)Qt=q.xCenter[j];else{if(j+1===Te&&q.x[j+1]===void 0)continue;Qt=(q.x[j]+q.x[j+1])/2}var qt=Math.round(A.c2p(Qt));if(!(0>qt||qt>A._length)){var gn=t({x:Qt,y:Jt},re,v._fullLayout);gn.x=Qt,gn.y=Jt;var wn=q.z[V][j];wn===void 0?(gn.z="",gn.zLabel=""):(gn.z=wn,gn.zLabel=g.tickText(Et,wn,"hover").text);var hn=q.text&&q.text[V]&&q.text[V][j];hn!==void 0&&hn!==!1||(hn=""),gn.text=hn;var Xt=h.texttemplateString(xt,gn,v._fullLayout._d3locale,gn,re._meta||{});if(Xt){var an=Xt.split("<br>"),tn=an.length,cn=0;for(B=0;B<tn;B++)cn=Math.max(cn,an[B].length);Ut.push({l:tn,c:cn,t:Xt,x:qt,y:Vt,z:wn})}}}}var vn=re.textfont,yn=vn.family,Pn=vn.size,In=v._fullLayout.font.size;if(!Pn||Pn==="auto"){var kn=1/0,zn=1/0,er=0,ir=0;for(B=0;B<Ut.length;B++){var fr=Ut[B];if(er=Math.max(er,fr.l),ir=Math.max(ir,fr.c),B<Ut.length-1){var ar=Ut[B+1],Jn=Math.abs(ar.x-fr.x),br=Math.abs(ar.y-fr.y);Jn&&(kn=Math.min(kn,Jn)),br&&(zn=Math.min(zn,br))}}isFinite(kn)&&isFinite(zn)?(kn-=ee,zn-=K,kn/=ir,zn/=er,kn/=l/2,zn/=l,Pn=Math.min(Math.floor(kn),Math.floor(zn),In)):Pn=In}if(Pn<=0||!isFinite(Pn))return;w(W).data(Ut).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Gt){var ln=T.select(this),mn=vn.color;mn&&mn!=="auto"||(mn=i.contrast("rgba("+Ne(Gt.z).join()+")")),ln.attr("data-notex",1).call(o.positionText,function(_n){return _n.x}(Gt),function(_n){return _n.y-Pn*(_n.l*l/2-1)}(Gt)).call(_.font,yn,Pn,mn).text(Gt.t).call(o.convertToTspans,v)})}})}},70035:function(F,L,e){var T=e(39898);F.exports=function(b){T.select(b).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},49901:function(F){F.exports=function(L,e,T){T("zsmooth")===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},67684:function(F,L,e){var T=e(92770),b=e(71828),a=e(73972);function _(g,h){var o=h(g);return(o?h(g+"type","array"):"scaled")==="scaled"&&(h(g+"0"),h("d"+g)),o}F.exports=function(g,h,o,t,i,n){var r,s,l=o("z");if(i=i||"x",n=n||"y",l===void 0||!l.length)return 0;if(b.isArray1D(g.z)){r=o(i),s=o(n);var u=b.minRowLength(r),d=b.minRowLength(s);if(u===0||d===0)return 0;h._length=Math.min(u,d,l.length)}else{if(r=_(i,o),s=_(n,o),!function(c){for(var w,m=!0,f=!1,x=!1,y=0;y<c.length;y++){if(w=c[y],!b.isArrayOrTypedArray(w)){m=!1;break}w.length>0&&(f=!0);for(var v=0;v<w.length;v++)if(T(w[v])){x=!0;break}}return m&&f&&x}(l))return 0;o("transpose"),h._length=null}return g.type==="heatmapgl"||a.getComponentMethod("calendars","handleTraceDefaults")(g,h,[i,n],t),!0}},16063:function(F,L,e){for(var T=e(21606),b=e(50693),a=e(1426).extendFlat,_=e(30962).overrideAll,g=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],h={},o=0;o<g.length;o++){var t=g[o];h[t]=T[t]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},a(h,b("",{cLetter:"z",autoColorDflt:!1})),F.exports=_(h,"calc","nested")},59560:function(F,L,e){var T=e(9330).gl_heatmap2d,b=e(89298),a=e(78614);function _(h,o){this.scene=h,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=T(h.glplot,this.options),this.heatmap._trace=this}var g=_.prototype;g.handlePick=function(h){var o=this.options,t=o.shape,i=h.pointId,n=i%t[0],r=Math.floor(i/t[0]),s=i;return{trace:this,dataCoord:h.dataCoord,traceCoord:[o.x[n],o.y[r],o.z[s]],textLabel:this.textLabels[i],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},g.update=function(h,o){var t=o[0];this.index=h.index,this.name=h.name,this.hoverinfo=h.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var n=i[0].length,r=i.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=h.zsmooth;var s=function(w){for(var m=w.colorscale,f=w.zmin,x=w.zmax,y=m.length,v=new Array(y),M=new Array(4*y),p=0;p<y;p++){var S=m[p],A=a(S[1]);v[p]=f+S[0]*(x-f);for(var k=0;k<4;k++)M[4*p+k]=A[k]}return{colorLevels:v,colorValues:M}}(h);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],h.text),this.heatmap.update(this.options);var l,u,d=this.scene.xaxis,c=this.scene.yaxis;h.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),h._extremes[d._id]=b.findExtremes(d,t.x,l),h._extremes[c._id]=b.findExtremes(c,t.y,u)},g.dispose=function(){this.heatmap.dispose()},F.exports=function(h,o,t){var i=new _(h,o.uid);return i.update(o,t),i}},19600:function(F,L,e){var T=e(71828),b=e(67684),a=e(1586),_=e(16063);F.exports=function(g,h,o,t){function i(n,r){return T.coerce(g,h,_,n,r)}b(g,h,i,t)?(i("text"),i("zsmooth"),a(g,h,t,i,{prefix:"",cLetter:"z"})):h.visible=!1}},3325:function(F,L,e){F.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(F,L,e){var T=e(1486),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(5386).si,g=e(41940),h=e(17656),o=e(72406),t=e(1426).extendFlat;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:b("x"),yhoverformat:b("y"),text:t({},T.text,{}),hovertext:t({},T.hovertext,{}),orientation:T.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:h("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:h("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({},{keys:o.eventDataKeys}),texttemplate:_({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},T.textposition,{arrayOk:!1}),textfont:g({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:g({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:g({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:T.insidetextanchor,textangle:T.textangle,cliponaxis:T.cliponaxis,constraintext:T.constraintext,marker:T.marker,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,_deprecated:{bardir:T._deprecated.bardir}}},42174:function(F){F.exports=function(L,e){for(var T=L.length,b=0,a=0;a<T;a++)e[a]?(L[a]/=e[a],b+=L[a]):L[a]=null;return b}},17656:function(F){F.exports=function(L,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(F,L,e){var T=e(92770);F.exports={count:function(b,a,_){return _[b]++,1},sum:function(b,a,_,g){var h=g[a];return T(h)?(h=Number(h),_[b]+=h,h):0},avg:function(b,a,_,g,h){var o=g[a];return T(o)&&(o=Number(o),_[b]+=o,h[b]++),0},min:function(b,a,_,g){var h=g[a];if(T(h)){if(h=Number(h),!T(_[b]))return _[b]=h,h;if(_[b]>h){var o=h-_[b];return _[b]=h,o}}return 0},max:function(b,a,_,g){var h=g[a];if(T(h)){if(h=Number(h),!T(_[b]))return _[b]=h,h;if(_[b]<h){var o=h-_[b];return _[b]=h,o}}return 0}}},40965:function(F,L,e){var T=e(50606),b=T.ONEAVGYEAR,a=T.ONEAVGMONTH,_=T.ONEDAY,g=T.ONEHOUR,h=T.ONEMIN,o=T.ONESEC,t=e(89298).tickIncrement;function i(l,u,d,c){if(l*u<=0)return 1/0;for(var w=Math.abs(u-l),m=d.type==="date",f=n(w,m),x=0;x<10;x++){var y=n(80*f,m);if(f===y||!r(y,l,u,m,d,c))break;f=y}return f}function n(l,u){return u&&l>o?l>_?l>1.1*b?b:l>1.1*a?a:_:l>g?g:l>h?h:o:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function r(l,u,d,c,w,m){if(c&&l>_){var f=s(u,w,m),x=s(d,w,m),y=l===b?0:1;return f[y]!==x[y]}return Math.floor(d/l)-Math.floor(u/l)>.1}function s(l,u,d){var c=u.c2d(l,b,d).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}F.exports=function(l,u,d,c,w){var m,f,x=-1.1*u,y=-.1*u,v=l-y,M=d[0],p=d[1],S=Math.min(i(M+y,M+v,c,w),i(p+y,p+v,c,w)),A=Math.min(i(M+x,M+y,c,w),i(p+x,p+y,c,w));if(S>A&&A<Math.abs(p-M)/4e3?(m=S,f=!1):(m=Math.min(S,A),f=!0),c.type==="date"&&m>_){var k=m===b?1:6,C=m===b?"M12":"M1";return function(P,R){var O=c.c2d(P,b,w),X=O.indexOf("-",k);X>0&&(O=O.substr(0,X));var D=c.d2c(O,0,w);if(D<P){var V=t(D,C,!1,w);(D+V)/2<P+l&&(D=V)}return R&&f?t(D,C,!0,w):D}}return function(P,R){var O=m*Math.round(P/m);return O+m/10<P&&O+.9*m<P+l&&(O+=m),R&&f&&(O-=m),O}}},72138:function(F,L,e){var T=e(92770),b=e(71828),a=e(73972),_=e(89298),g=e(75341),h=e(59575),o=e(36362),t=e(42174),i=e(40965);function n(r,s,l,u,d){var c,w,m,f,x,y,v,M=u+"bins",p=r._fullLayout,S=s["_"+u+"bingroup"],A=p._histogramBinOpts[S],k=p.barmode==="overlay",C=function(pe){return l.r2c(pe,0,f)},P=function(pe){return l.c2r(pe,0,f)},R=l.type==="date"?function(pe){return pe||pe===0?b.cleanDate(pe,null,f):null}:function(pe){return T(pe)?Number(pe):null};function O(pe,fe,Oe){fe[pe+"Found"]?(fe[pe]=R(fe[pe]),fe[pe]===null&&(fe[pe]=Oe[pe])):(y[pe]=fe[pe]=Oe[pe],b.nestedProperty(w[0],M+"."+pe).set(Oe[pe]))}if(s["_"+u+"autoBinFinished"])delete s["_"+u+"autoBinFinished"];else{w=A.traces;var X=[],D=!0,V=!1,j=!1;for(c=0;c<w.length;c++)if((m=w[c]).visible){var B=A.dirs[c];x=m["_"+B+"pos0"]=l.makeCalcdata(m,B),X=b.concat(X,x),delete m["_"+u+"autoBinFinished"],s.visible===!0&&(D?D=!1:(delete m._autoBin,m["_"+u+"autoBinFinished"]=1),a.traceIs(m,"2dMap")&&(V=!0),m.type==="histogram2dcontour"&&(j=!0))}f=w[0][u+"calendar"];var W=_.autoBin(X,l,A.nbins,V,f,A.sizeFound&&A.size),q=w[0]._autoBin={};if(y=q[A.dirs[0]]={},j&&(A.size||(W.start=P(_.tickIncrement(C(W.start),W.size,!0,f))),A.end===void 0&&(W.end=P(_.tickIncrement(C(W.end),W.size,!1,f)))),k&&!a.traceIs(s,"2dMap")&&W._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"){if(d)return[W,x,!0];W=function(pe,fe,Oe,Se,Me){var ue,le,ie,ge=pe._fullLayout,Ae=function(at,lt){for(var ot=lt.xaxis,bt=lt.yaxis,wt=lt.orientation,ht=[],ct=at._fullData,Tt=0;Tt<ct.length;Tt++){var Lt=ct[Tt];Lt.type==="histogram"&&Lt.visible===!0&&Lt.orientation===wt&&Lt.xaxis===ot&&Lt.yaxis===bt&&ht.push(Lt)}return ht}(pe,fe),we=!1,Ne=1/0,He=[fe];for(ue=0;ue<Ae.length;ue++)if((le=Ae[ue])===fe)we=!0;else if(we){var de=n(pe,le,Oe,Se,!0),Le=de[0],Ee=de[2];le["_"+Se+"autoBinFinished"]=1,le["_"+Se+"pos0"]=de[1],Ee?He.push(le):Ne=Math.min(Ne,Le.size)}else ie=ge._histogramBinOpts[le["_"+Se+"bingroup"]],Ne=Math.min(Ne,ie.size||le[Me].size);var Re=new Array(He.length);for(ue=0;ue<He.length;ue++)for(var je=He[ue]["_"+Se+"pos0"],Fe=0;Fe<je.length;Fe++)if(je[Fe]!==void 0){Re[ue]=je[Fe];break}for(isFinite(Ne)||(Ne=b.distinctVals(Re).minDiff),ue=0;ue<He.length;ue++){var Xe=(le=He[ue])[Se+"calendar"],Ze={start:Oe.c2r(Re[ue]-Ne/2,0,Xe),end:Oe.c2r(Re[ue]+Ne/2,0,Xe),size:Ne};le._input[Me]=le[Me]=Ze,(ie=ge._histogramBinOpts[le["_"+Se+"bingroup"]])&&b.extendFlat(ie,Ze)}return fe[Me]}(r,s,l,u,M)}(v=m.cumulative||{}).enabled&&v.currentbin!=="include"&&(v.direction==="decreasing"?W.start=P(_.tickIncrement(C(W.start),W.size,!0,f)):W.end=P(_.tickIncrement(C(W.end),W.size,!1,f))),A.size=W.size,A.sizeFound||(y.size=W.size,b.nestedProperty(w[0],M+".size").set(W.size)),O("start",A,W),O("end",A,W)}x=s["_"+u+"pos0"],delete s["_"+u+"pos0"];var re=s._input[M]||{},ee=b.extendFlat({},A),K=A.start,Y=l.r2l(re.start),$=Y!==void 0;if((A.startFound||$)&&Y!==l.r2l(K)){var ne=$?Y:b.aggNums(Math.min,null,x),ae={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:A.size,tick0:K,calendar:f,range:[ne,_.tickIncrement(ne,A.size,!1,f)].map(l.l2r)},se=_.tickFirst(ae);se>l.r2l(ne)&&(se=_.tickIncrement(se,A.size,!0,f)),ee.start=l.l2r(se),$||b.nestedProperty(s,M+".start").set(ee.start)}var ce=A.end,me=l.r2l(re.end),ye=me!==void 0;if((A.endFound||ye)&&me!==l.r2l(ce)){var Te=ye?me:b.aggNums(Math.max,null,x);ee.end=l.l2r(Te),ye||b.nestedProperty(s,M+".start").set(ee.end)}var Ce="autobin"+u;return s._input[Ce]===!1&&(s._input[M]=b.extendFlat({},s[M]||{}),delete s._input[Ce],delete s[Ce]),[ee,x]}F.exports={calc:function(r,s){var l,u,d,c,w=[],m=[],f=s.orientation==="h",x=_.getFromId(r,f?s.yaxis:s.xaxis),y=f?"y":"x",v={x:"y",y:"x"}[y],M=s[y+"calendar"],p=s.cumulative,S=n(r,s,x,y),A=S[0],k=S[1],C=typeof A.size=="string",P=[],R=C?P:A,O=[],X=[],D=[],V=0,j=s.histnorm,B=s.histfunc,W=j.indexOf("density")!==-1;p.enabled&&W&&(j=j.replace(/ ?density$/,""),W=!1);var q,re=B==="max"||B==="min"?null:0,ee=h.count,K=o[j],Y=!1,$=function(le){return x.r2c(le,0,M)};for(b.isArrayOrTypedArray(s[v])&&B!=="count"&&(q=s[v],Y=B==="avg",ee=h[B]),l=$(A.start),d=$(A.end)+(l-_.tickIncrement(l,A.size,!1,M))/1e6;l<d&&w.length<1e6&&(u=_.tickIncrement(l,A.size,!1,M),w.push((l+u)/2),m.push(re),D.push([]),P.push(l),W&&O.push(1/(u-l)),Y&&X.push(0),!(u<=l));)l=u;P.push(l),C||x.type!=="date"||(R={start:$(R.start),end:$(R.end),size:R.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var ne=s["_"+y+"bingroup"],ae={leftGap:1/0,rightGap:1/0};ne&&(r._fullLayout._roundFnOpts[ne]||(r._fullLayout._roundFnOpts[ne]=ae),ae=r._fullLayout._roundFnOpts[ne]);var se,ce=m.length,me=!0,ye=ae.leftGap,Te=ae.rightGap,Ce={};for(l=0;l<k.length;l++){var pe=k[l];(c=b.findBin(pe,R))>=0&&c<ce&&(V+=ee(c,l,m,q,X),me&&D[c].length&&pe!==k[D[c][0]]&&(me=!1),D[c].push(l),Ce[l]=c,ye=Math.min(ye,pe-P[c]),Te=Math.min(Te,P[c+1]-pe))}ae.leftGap=ye,ae.rightGap=Te,me||(se=function(le,ie){return function(){var ge=r._fullLayout._roundFnOpts[ne];return i(ge.leftGap,ge.rightGap,P,x,M)(le,ie)}}),Y&&(V=t(m,X)),K&&K(m,V,O),p.enabled&&function(le,ie,ge){var Ae,we,Ne;function He(Le){Ne=le[Le],le[Le]/=2}function de(Le){we=le[Le],le[Le]=Ne+we/2,Ne+=we}if(ge==="half")if(ie==="increasing")for(He(0),Ae=1;Ae<le.length;Ae++)de(Ae);else for(He(le.length-1),Ae=le.length-2;Ae>=0;Ae--)de(Ae);else if(ie==="increasing"){for(Ae=1;Ae<le.length;Ae++)le[Ae]+=le[Ae-1];ge==="exclude"&&(le.unshift(0),le.pop())}else{for(Ae=le.length-2;Ae>=0;Ae--)le[Ae]+=le[Ae+1];ge==="exclude"&&(le.push(0),le.shift())}}(m,p.direction,p.currentbin);var fe=Math.min(w.length,m.length),Oe=[],Se=0,Me=fe-1;for(l=0;l<fe;l++)if(m[l]){Se=l;break}for(l=fe-1;l>=Se;l--)if(m[l]){Me=l;break}for(l=Se;l<=Me;l++)if(T(w[l])&&T(m[l])){var ue={p:w[l],s:m[l],b:0};p.enabled||(ue.pts=D[l],me?ue.ph0=ue.ph1=D[l].length?k[D[l][0]]:w[l]:(s._computePh=!0,ue.ph0=se(P[l]),ue.ph1=se(P[l+1],!0))),Oe.push(ue)}return Oe.length===1&&(Oe[0].width1=_.tickIncrement(Oe[0].p,A.size,!1,M)-Oe[0].p),g(Oe,s),b.isArrayOrTypedArray(s.selectedpoints)&&b.tagSelected(Oe,s,Ce),Oe},calcAllAutoBins:n}},72406:function(F){F.exports={eventDataKeys:["binNumber"]}},82222:function(F,L,e){var T=e(71828),b=e(41675),a=e(73972).traceIs,_=e(26125),g=T.nestedProperty,h=e(99082).getAxisGroup,o=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];F.exports=function(i,n){var r,s,l,u,d,c,w,m=n._histogramBinOpts={},f=[],x={},y=[];function v(W,q){return T.coerce(r._input,r,r._module.attributes,W,q)}function M(W){return W.orientation==="v"?"x":"y"}function p(W,q,re){var ee=W.uid+"__"+re;q||(q=ee);var K=function(ae,se){return b.getFromTrace({_fullLayout:n},ae,se).type}(W,re),Y=W[re+"calendar"]||"",$=m[q],ne=!0;$&&(K===$.axType&&Y===$.calendar?(ne=!1,$.traces.push(W),$.dirs.push(re)):(q=ee,K!==$.axType&&T.warn(["Attempted to group the bins of trace",W.index,"set on a","type:"+K,"axis","with bins on","type:"+$.axType,"axis."].join(" ")),Y!==$.calendar&&T.warn(["Attempted to group the bins of trace",W.index,"set with a",Y,"calendar","with bins",$.calendar?"on a "+$.calendar+" calendar":"w/o a set calendar"].join(" ")))),ne&&(m[q]={traces:[W],dirs:[re],axType:K,calendar:W[re+"calendar"]||""}),W["_"+re+"bingroup"]=q}for(d=0;d<i.length;d++)r=i[d],a(r,"histogram")&&(f.push(r),delete r._xautoBinFinished,delete r._yautoBinFinished,a(r,"2dMap")||_(r._input,r,n,v));var S=n._alignmentOpts||{};for(d=0;d<f.length;d++){if(r=f[d],l="",!a(r,"2dMap")){if(u=M(r),n.barmode==="group"&&r.alignmentgroup){var A=r[u+"axis"],k=h(n,A)+r.orientation;(S[k]||{})[r.alignmentgroup]&&(l=k)}l||n.barmode==="overlay"||(l=h(n,r.xaxis)+h(n,r.yaxis)+M(r))}l?(x[l]||(x[l]=[]),x[l].push(r)):y.push(r)}for(l in x)if((s=x[l]).length!==1){var C=!1;for(s.length&&(r=s[0],C=v("bingroup")),l=C||l,d=0;d<s.length;d++){var P=(r=s[d])._input.bingroup;P&&P!==l&&T.warn(["Trace",r.index,"must match","within bingroup",l+".","Ignoring its bingroup:",P,"setting."].join(" ")),r.bingroup=l,p(r,l,M(r))}}else y.push(s[0]);for(d=0;d<y.length;d++){r=y[d];var R=v("bingroup");if(a(r,"2dMap"))for(w=0;w<2;w++){var O=v((u=t[w])+"bingroup",R?R+"__"+u:null);p(r,O,u)}else p(r,R,M(r))}for(l in m){var X=m[l];for(s=X.traces,c=0;c<o.length;c++){var D,V,j=o[c],B=j.name;if(B!=="nbins"||!X.sizeFound){for(d=0;d<s.length;d++){if(r=s[d],u=X.dirs[d],D=j.aStr[u],g(r._input,D).get()!==void 0){X[B]=v(D),X[B+"Found"]=!0;break}(V=(r._autoBin||{})[u]||{})[B]&&g(r,D).set(V[B])}if(B==="start"||B==="end")for(;d<s.length;d++)(r=s[d])["_"+u+"bingroup"]&&v(D,(V=(r._autoBin||{})[u]||{})[B]);B!=="nbins"||X.sizeFound||X.nbinsFound||(r=s[0],X[B]=v(D))}}}}},11385:function(F,L,e){var T=e(73972),b=e(71828),a=e(7901),_=e(90769).handleText,g=e(98340),h=e(7745);F.exports=function(o,t,i,n){function r(y,v){return b.coerce(o,t,h,y,v)}var s=r("x"),l=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var u=r("textposition");_(o,t,n,r,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var d=r("orientation",l&&!s?"h":"v"),c=d==="v"?"x":"y",w=d==="v"?"y":"x",m=s&&l?Math.min(b.minRowLength(s)&&b.minRowLength(l)):b.minRowLength(t[c]||[]);if(m){t._length=m,T.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y"],n),t[w]&&r("histfunc"),r("histnorm"),r("autobin"+c),g(o,t,r,i,n),b.coerceSelectionMarkerOpacity(t,r);var f=(t.marker.line||{}).color,x=T.getComponentMethod("errorbars","supplyDefaults");x(o,t,f||a.defaultLine,{axis:"y"}),x(o,t,f||a.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(F){F.exports=function(L,e,T,b,a){if(L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(L.z=e.zLabelVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),!(T.cumulative||{}).enabled){var _,g=Array.isArray(a)?b[0].pts[a[0]][a[1]]:b[a].pts;if(L.pointNumbers=g,L.binNumber=L.pointNumber,delete L.pointNumber,delete L.pointIndex,T._indexToPoints){_=[];for(var h=0;h<g.length;h++)_=_.concat(T._indexToPoints[g[h]])}else _=g;L.pointIndices=_}return L}},76440:function(F,L,e){var T=e(95423).hoverPoints,b=e(89298).hoverLabelText;F.exports=function(a,_,g,h,o){var t=T(a,_,g,h,o);if(t){var i=(a=t[0]).cd[a.index],n=a.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";a[r+"Label"]=b(a[r+"a"],[i.ph0,i.ph1],n[r+"hoverformat"])}return t}}},36071:function(F,L,e){F.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(F){F.exports={percent:function(L,e){for(var T=L.length,b=100/e,a=0;a<T;a++)L[a]*=b},probability:function(L,e){for(var T=L.length,b=0;b<T;b++)L[b]/=e},density:function(L,e,T,b){var a=L.length;b=b||1;for(var _=0;_<a;_++)L[_]*=T[_]*b},"probability density":function(L,e,T,b){var a=L.length;b&&(e/=b);for(var _=0;_<a;_++)L[_]*=T[_]/e}}},35361:function(F,L,e){var T=e(7745),b=e(17656),a=e(21606),_=e(9012),g=e(12663).axisHoverFormat,h=e(5386).fF,o=e(5386).si,t=e(50693),i=e(1426).extendFlat;F.exports=i({x:T.x,y:T.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:b("x"),nbinsy:T.nbinsy,ybins:b("y"),autobinx:T.autobinx,autobiny:T.autobiny,bingroup:i({},T.bingroup,{}),xbingroup:i({},T.bingroup,{}),ybingroup:i({},T.bingroup,{}),xgap:a.xgap,ygap:a.ygap,zsmooth:a.zsmooth,xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z",1),hovertemplate:h({},{keys:"z"}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:a.textfont,showlegend:i({},_.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(F,L,e){var T=e(71828),b=e(89298),a=e(59575),_=e(36362),g=e(42174),h=e(40965),o=e(72138).calcAllAutoBins;function t(r,s,l,u){var d,c=new Array(r);if(u)for(d=0;d<r;d++)c[d]=1/(s[d+1]-s[d]);else{var w=1/l;for(d=0;d<r;d++)c[d]=w}return c}function i(r,s){return{start:r(s.start),end:r(s.end),size:s.size}}function n(r,s,l,u,d,c){var w,m=r.length-1,f=new Array(m),x=h(l,u,r,d,c);for(w=0;w<m;w++){var y=(s||[])[w];f[w]=y===void 0?[x(r[w]),x(r[w+1],!0)]:[y,y]}return f}F.exports=function(r,s){var l,u,d,c,w=b.getFromId(r,s.xaxis),m=b.getFromId(r,s.yaxis),f=s.xcalendar,x=s.ycalendar,y=function(bt){return w.r2c(bt,0,f)},v=function(bt){return m.r2c(bt,0,x)},M=o(r,s,w,"x"),p=M[0],S=M[1],A=o(r,s,m,"y"),k=A[0],C=A[1],P=s._length;S.length>P&&S.splice(P,S.length-P),C.length>P&&C.splice(P,C.length-P);var R=[],O=[],X=[],D=typeof p.size=="string",V=typeof k.size=="string",j=[],B=[],W=D?j:p,q=V?B:k,re=0,ee=[],K=[],Y=s.histnorm,$=s.histfunc,ne=Y.indexOf("density")!==-1,ae=$==="max"||$==="min"?null:0,se=a.count,ce=_[Y],me=!1,ye=[],Te=[],Ce="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";Ce&&$!=="count"&&(me=$==="avg",se=a[$]);var pe=p.size,fe=y(p.start),Oe=y(p.end)+(fe-b.tickIncrement(fe,pe,!1,f))/1e6;for(l=fe;l<Oe;l=b.tickIncrement(l,pe,!1,f))O.push(ae),j.push(l),me&&X.push(0);j.push(l);var Se,Me=O.length,ue=(l-fe)/Me,le=(Se=fe+ue/2,w.c2r(Se,0,f)),ie=k.size,ge=v(k.start),Ae=v(k.end)+(ge-b.tickIncrement(ge,ie,!1,x))/1e6;for(l=ge;l<Ae;l=b.tickIncrement(l,ie,!1,x)){R.push(O.slice()),B.push(l);var we=new Array(Me);for(u=0;u<Me;u++)we[u]=[];K.push(we),me&&ee.push(X.slice())}B.push(l);var Ne=R.length,He=(l-ge)/Ne,de=function(bt){return m.c2r(bt,0,x)}(ge+He/2);ne&&(ye=t(O.length,W,ue,D),Te=t(R.length,q,He,V)),D||w.type!=="date"||(W=i(y,W)),V||m.type!=="date"||(q=i(v,q));var Le=!0,Ee=!0,Re=new Array(Me),je=new Array(Ne),Fe=1/0,Xe=1/0,Ze=1/0,at=1/0;for(l=0;l<P;l++){var lt=S[l],ot=C[l];d=T.findBin(lt,W),c=T.findBin(ot,q),d>=0&&d<Me&&c>=0&&c<Ne&&(re+=se(d,l,R[c],Ce,ee[c]),K[c][d].push(l),Le&&(Re[d]===void 0?Re[d]=lt:Re[d]!==lt&&(Le=!1)),Ee&&(je[c]===void 0?je[c]=ot:je[c]!==ot&&(Ee=!1)),Fe=Math.min(Fe,lt-j[d]),Xe=Math.min(Xe,j[d+1]-lt),Ze=Math.min(Ze,ot-B[c]),at=Math.min(at,B[c+1]-ot))}if(me)for(c=0;c<Ne;c++)re+=g(R[c],ee[c]);if(ce)for(c=0;c<Ne;c++)ce(R[c],re,ye,Te[c]);return{x:S,xRanges:n(j,Le&&Re,Fe,Xe,w,f),x0:le,dx:ue,y:C,yRanges:n(B,Ee&&je,Ze,at,m,x),y0:de,dy:He,z:R,pts:K}}},93888:function(F,L,e){var T=e(71828),b=e(75238),a=e(49901),_=e(1586),g=e(58623),h=e(35361);F.exports=function(o,t,i,n){function r(s,l){return T.coerce(o,t,h,s,l)}b(o,t,r,n),t.visible!==!1&&(a(o,t,r,n),_(o,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),g(r,n),r("xhoverformat"),r("yhoverformat"))}},76128:function(F,L,e){var T=e(46248),b=e(89298).hoverLabelText;F.exports=function(a,_,g,h,o){var t=T(a,_,g,h,o);if(t){var i=(a=t[0]).index,n=i[0],r=i[1],s=a.cd[0],l=s.trace,u=s.xRanges[r],d=s.yRanges[n];return a.xLabel=b(a.xa,[u[0],u[1]],l.xhoverformat),a.yLabel=b(a.ya,[d[0],d[1]],l.yhoverformat),t}}},43905:function(F,L,e){F.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(F,L,e){var T=e(73972),b=e(71828);F.exports=function(a,_,g,h){var o=g("x"),t=g("y"),i=b.minRowLength(o),n=b.minRowLength(t);i&&n?(_._length=Math.min(i,n),T.getComponentMethod("calendars","handleTraceDefaults")(a,_,["x","y"],h),(g("z")||g("marker.color"))&&g("histfunc"),g("histnorm"),g("autobinx"),g("autobiny")):_.visible=!1}},99066:function(F,L,e){var T=e(35361),b=e(70600),a=e(50693),_=e(12663).axisHoverFormat,g=e(1426).extendFlat;F.exports=g({x:T.x,y:T.y,z:T.z,marker:T.marker,histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:T.xbins,nbinsy:T.nbinsy,ybins:T.ybins,autobinx:T.autobinx,autobiny:T.autobiny,bingroup:T.bingroup,xbingroup:T.xbingroup,ybingroup:T.ybingroup,autocontour:b.autocontour,ncontours:b.ncontours,contours:b.contours,line:{color:b.line.color,width:g({},b.line.width,{dflt:.5}),dash:b.line.dash,smoothing:b.line.smoothing,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:T.hovertemplate,texttemplate:b.texttemplate,textfont:b.textfont},a("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(F,L,e){var T=e(71828),b=e(75238),a=e(67217),_=e(8724),g=e(58623),h=e(99066);F.exports=function(o,t,i,n){function r(s,l){return T.coerce(o,t,h,s,l)}b(o,t,r,n),t.visible!==!1&&(a(o,t,r,function(s){return T.coerce2(o,t,h,s)}),_(o,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&g(r,n))}},35902:function(F,L,e){F.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(50693),_=e(27670).Y,g=e(34e3),h=e(57564),o=e(45802),t=e(43473),i=e(1426).extendFlat,n=e(79952).u;F.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:o.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:h.marker.colors,line:h.marker.line,pattern:n,editType:"calc"},a("marker",{colorAttr:"colors",anim:!1})),leaf:h.leaf,pathbar:o.pathbar,text:g.text,textinfo:h.textinfo,texttemplate:b({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:g.hovertext,hoverinfo:h.hoverinfo,hovertemplate:T({},{keys:t.eventDataKeys}),textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:o.outsidetextfont,textposition:o.textposition,sort:g.sort,root:h.root,domain:_({name:"icicle",trace:!0,editType:"calc"})}},96346:function(F,L,e){var T=e(74875);L.name="icicle",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},46584:function(F,L,e){var T=e(52147);L.y=function(b,a){return T.calc(b,a)},L.T=function(b){return T._runCrossTraceCalc("icicle",b)}},56524:function(F,L,e){var T=e(71828),b=e(46291),a=e(7901),_=e(27670).c,g=e(90769).handleText,h=e(97313).TEXTPAD,o=e(37434).handleMarkerDefaults,t=e(21081),i=t.hasColorscale,n=t.handleDefaults;F.exports=function(r,s,l,u){function d(v,M){return T.coerce(r,s,b,v,M)}var c=d("labels"),w=d("parents");if(c&&c.length&&w&&w.length){var m=d("values");m&&m.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var f=d("text");d("texttemplate"),s.texttemplate||d("textinfo",Array.isArray(f)?"text+label":"label"),d("hovertext"),d("hovertemplate");var x=d("pathbar.visible");g(r,s,u,d,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition"),o(r,s,u,d);var y=s._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis;y&&n(r,s,u,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",y?1:.7),s._hovered={marker:{line:{width:2,color:a.contrast(u.paper_bgcolor)}}},x&&(d("pathbar.thickness",s.pathbar.textfont.size+2*h),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),_(s,u,d),s._length=null}else s.visible=!1}},90666:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(63893),g=e(21538),h=e(82454).styleOne,o=e(43473),t=e(2791),i=e(83523),n=e(24714).formatSliceLabel,r=!1;F.exports=function(s,l,u,d,c){var w=c.width,m=c.height,f=c.viewX,x=c.viewY,y=c.pathSlice,v=c.toMoveInsideSlice,M=c.strTransform,p=c.hasTransition,S=c.handleSlicesExit,A=c.makeUpdateSliceInterpolator,k=c.makeUpdateTextInterpolator,C=c.prevEntry,P=s._context.staticPlot,R=s._fullLayout,O=l[0].trace,X=O.textposition.indexOf("left")!==-1,D=O.textposition.indexOf("right")!==-1,V=O.textposition.indexOf("bottom")!==-1,j=g(u,[w,m],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}).descendants(),B=1/0,W=-1/0;j.forEach(function(Y){var $=Y.depth;$>=O._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(B=Math.min(B,$),W=Math.max(W,$))}),d=d.data(j,t.getPtId),O._maxVisibleLayers=isFinite(W)?W-B+1:0,d.enter().append("g").classed("slice",!0),S(d,r,{},[w,m],y),d.order();var q=null;if(p&&C){var re=t.getPtId(C);d.each(function(Y){q===null&&t.getPtId(Y)===re&&(q={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var ee=function(){return q||{x0:0,x1:w,y0:0,y1:m}},K=d;return p&&(K=K.transition().each("end",function(){var Y=T.select(this);t.setSliceCursor(Y,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(Y){Y._x0=f(Y.x0),Y._x1=f(Y.x1),Y._y0=x(Y.y0),Y._y1=x(Y.y1),Y._hoverX=f(Y.x1-O.tiling.pad),Y._hoverY=x(V?Y.y1-O.tiling.pad/2:Y.y0+O.tiling.pad/2);var $=T.select(this),ne=b.ensureSingle($,"path","surface",function(me){me.style("pointer-events",P?"none":"all")});p?ne.transition().attrTween("d",function(me){var ye=A(me,r,ee(),[w,m],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(Te){return y(ye(Te))}}):ne.attr("d",y),$.call(i,u,s,l,{styleOne:h,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,s,{isTransitioning:s._transitioning}),ne.call(h,Y,O,s,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":Y._text=n(Y,u,O,l,R)||"";var ae=b.ensureSingle($,"g","slicetext"),se=b.ensureSingle(ae,"text","",function(me){me.attr("data-notex",1)}),ce=b.ensureUniformFontSize(s,t.determineTextFont(O,Y,R.font));se.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":X?"start":"middle").call(a.font,ce).call(_.convertToTspans,s),Y.textBB=a.bBox(se.node()),Y.transform=v(Y,{fontSize:ce.size}),Y.transform.fontSize=ce.size,p?se.transition().attrTween("transform",function(me){var ye=k(me,r,ee(),[w,m]);return function(Te){return M(ye(Te))}}):se.attr("transform",M(Y))}),q}},69816:function(F,L,e){F.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function(F){F.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(F,L,e){var T=e(71828),b=e(92894);F.exports=function(a,_){function g(h,o){return T.coerce(a,_,b,h,o)}g("iciclecolorway",_.colorway),g("extendiciclecolors")}},21538:function(F,L,e){var T=e(674),b=e(14102);F.exports=function(a,_,g){var h=g.flipX,o=g.flipY,t=g.orientation==="h",i=g.maxDepth,n=_[0],r=_[1];i&&(n=(a.height+1)*_[0]/Math.min(a.height+1,i),r=(a.height+1)*_[1]/Math.min(a.height+1,i));var s=T.partition().padding(g.pad.inner).size(t?[_[1],n]:[_[0],r])(a);return(t||h||o)&&b(s,_,{swapXY:t,flipX:h,flipY:o}),s}},85596:function(F,L,e){var T=e(80694),b=e(90666);F.exports=function(a,_,g,h){return T(a,_,g,h,{type:"icicle",drawDescendants:b})}},82454:function(F,L,e){var T=e(39898),b=e(7901),a=e(71828),_=e(72597).resizeText,g=e(43467);function h(o,t,i,n){var r=t.data.data,s=!t.children,l=r.i,u=a.castOption(i,l,"marker.line.color")||b.defaultLine,d=a.castOption(i,l,"marker.line.width")||0;o.call(g,t,i,n).style("stroke-width",d).call(b.stroke,u).style("opacity",s?i.leaf.opacity:null)}F.exports={style:function(o){var t=o._fullLayout._iciclelayer.selectAll(".trace");_(o,t,"icicle"),t.each(function(i){var n=T.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(s){T.select(this).call(h,s,r,o)})})},styleOne:h}},17230:function(F,L,e){for(var T=e(9012),b=e(5386).fF,a=e(1426).extendFlat,_=e(51877).colormodel,g=["rgb","rgba","rgba256","hsl","hsla"],h=[],o=[],t=0;t<g.length;t++){var i=_[g[t]];h.push("For the `"+g[t]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),o.push("For the `"+g[t]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}F.exports=a({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:g,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:a({},T.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:b({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(F,L,e){var T=e(71828),b=e(51877),a=e(92770),_=e(89298),g=e(71828).maxRowLength,h=e(67395).A;function o(i,n,r,s){return function(l){return T.constrain((l-i)*n,r,s)}}function t(i,n){return function(r){return T.constrain(r,i,n)}}F.exports=function(i,n){var r,s;if(n._hasZ)r=n.z.length,s=g(n.z);else if(n._hasSource){var l=h(n.source);r=l.height,s=l.width}var u,d=_.getFromId(i,n.xaxis||"x"),c=_.getFromId(i,n.yaxis||"y"),w=d.d2c(n.x0)-n.dx/2,m=c.d2c(n.y0)-n.dy/2,f=[w,w+s*n.dx],x=[m,m+r*n.dy];if(d&&d.type==="log")for(u=0;u<s;u++)f.push(w+u*n.dx);if(c&&c.type==="log")for(u=0;u<r;u++)x.push(m+u*n.dy);return n._extremes[d._id]=_.findExtremes(d,f),n._extremes[c._id]=_.findExtremes(c,x),n._scaler=function(y){var v=b.colormodel[y.colormodel],M=(v.colormodel||y.colormodel).length;y._sArray=[];for(var p=0;p<M;p++)v.min[p]!==y.zmin[p]||v.max[p]!==y.zmax[p]?y._sArray.push(o(y.zmin[p],(v.max[p]-v.min[p])/(y.zmax[p]-y.zmin[p]),v.min[p],v.max[p])):y._sArray.push(t(v.min[p],v.max[p]));return function(S){for(var A=S.slice(0,M),k=0;k<M;k++){var C=A[k];if(!a(C))return!1;A[k]=y._sArray[k](C)}return A}}(n),[{x0:w,y0:m,z:n.z,w:s,h:r}]}},51877:function(F){F.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(L){return L.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(L){return L.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(L){return L.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(L){var e=L.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(L){var e=L.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13245:function(F,L,e){var T=e(71828),b=e(17230),a=e(51877),_=e(25095).IMAGE_URL_PREFIX;F.exports=function(g,h){function o(n,r){return T.coerce(g,h,b,n,r)}o("source"),h.source&&!h.source.match(_)&&delete h.source,h._hasSource=!!h.source;var t,i=o("z");h._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),h._hasZ||h._hasSource?(o("x0"),o("y0"),o("dx"),o("dy"),h._hasZ?(o("colormodel","rgb"),o("zmin",(t=a.colormodel[h.colormodel]).zminDflt||t.min),o("zmax",t.zmaxDflt||t.max)):h._hasSource&&(h.colormodel="rgba256",t=a.colormodel[h.colormodel],h.zmin=t.zminDflt,h.zmax=t.zmaxDflt),o("zsmooth"),o("text"),o("hovertext"),o("hovertemplate"),h._length=null):h.visible=!1}},30835:function(F){F.exports=function(L,e){return"xVal"in e&&(L.x=e.xVal),"yVal"in e&&(L.y=e.yVal),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L.color=e.color,L.colormodel=e.trace.colormodel,L.z||(L.z=e.color),L}},67395:function(F,L,e){var T=e(33575),b=e(25095).IMAGE_URL_PREFIX,a=e(12856).Buffer;L.A=function(_){var g=_.replace(b,""),h=new a(g,"base64");return T(h)}},28749:function(F,L,e){var T=e(30211),b=e(71828),a=e(51877);F.exports=function(_,g,h){var o=_.cd[0],t=o.trace,i=_.xa,n=_.ya;if(!(T.inbox(g-o.x0,g-(o.x0+o.w*t.dx),0)>0||T.inbox(h-o.y0,h-(o.y0+o.h*t.dy),0)>0)){var r,s=Math.floor((g-o.x0)/t.dx),l=Math.floor(Math.abs(h-o.y0)/t.dy);if(t._hasZ?r=o.z[l][s]:t._hasSource&&(r=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,l,1,1).data),r){var u,d=o.hi||t.hoverinfo;if(d){var c=d.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(u=!0)}var w,m=a.colormodel[t.colormodel],f=m.colormodel||t.colormodel,x=f.length,y=t._scaler(r),v=m.suffix,M=[];(t.hovertemplate||u)&&(M.push("["+[y[0]+v[0],y[1]+v[1],y[2]+v[2]].join(", ")),x===4&&M.push(", "+y[3]+v[3]),M.push("]"),M=M.join(""),_.extraText=f.toUpperCase()+": "+M),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[l])?w=t.hovertext[l][s]:Array.isArray(t.text)&&Array.isArray(t.text[l])&&(w=t.text[l][s]);var p=n.c2p(o.y0+(l+.5)*t.dy),S=o.x0+(s+.5)*t.dx,A=o.y0+(l+.5)*t.dy,k="["+r.slice(0,t.colormodel.length).join(", ")+"]";return[b.extendFlat(_,{index:[l,s],x0:i.c2p(o.x0+s*t.dx),x1:i.c2p(o.x0+(s+1)*t.dx),y0:p,y1:p,color:y,xVal:S,xLabelVal:S,yVal:A,yLabelVal:A,zLabelVal:k,text:w,hovertemplateLabels:{zLabel:k,colorLabel:M,"color[0]Label":y[0]+v[0],"color[1]Label":y[1]+v[1],"color[2]Label":y[2]+v[2],"color[3]Label":y[3]+v[3]}})]}}}},94507:function(F,L,e){F.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(F,L,e){var T=e(39898),b=e(71828),a=b.strTranslate,_=e(77922),g=e(51877),h=e(3883),o=e(32396).STYLE;F.exports=function(t,i,n,r){var s=i.xaxis,l=i.yaxis,u=!t._context._exportedPlot&&h();b.makeTraceGroups(r,n,"im").each(function(d){var c=T.select(this),w=d[0],m=w.trace,f=(m.zsmooth==="fast"||m.zsmooth===!1&&u)&&!m._hasZ&&m._hasSource&&s.type==="linear"&&l.type==="linear";m._realImage=f;var x,y,v,M,p,S,A=w.z,k=w.x0,C=w.y0,P=w.w,R=w.h,O=m.dx,X=m.dy;for(S=0;x===void 0&&S<P;)x=s.c2p(k+S*O),S++;for(S=P;y===void 0&&S>0;)y=s.c2p(k+S*O),S--;for(S=0;M===void 0&&S<R;)M=l.c2p(C+S*X),S++;for(S=R;p===void 0&&S>0;)p=l.c2p(C+S*X),S--;y<x&&(v=y,y=x,x=v),p<M&&(v=M,M=p,p=v),f||(x=Math.max(-.5*s._length,x),y=Math.min(1.5*s._length,y),M=Math.max(-.5*l._length,M),p=Math.min(1.5*l._length,p));var D=Math.round(y-x),V=Math.round(p-M);if(D<=0||V<=0)c.selectAll("image").data([]).exit().remove();else{var j=c.selectAll("image").data([d]);j.enter().append("svg:image").attr({xmlns:_.svg,preserveAspectRatio:"none"}),j.exit().remove();var B=m.zsmooth===!1?o:"";if(f){var W=b.simpleMap(s.range,s.r2l),q=b.simpleMap(l.range,l.r2l),re=W[1]<W[0],ee=q[1]>q[0];if(re||ee){var K=x+D/2,Y=M+V/2;B+="transform:"+a(K+"px",Y+"px")+"scale("+(re?-1:1)+","+(ee?-1:1)+")"+a(-K+"px",-Y+"px")+";"}}j.attr("style",B);var $=new Promise(function(ae){if(m._hasZ)ae();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===P&&m._canvas.el.height===R&&m._canvas.source===m.source)ae();else{var se=document.createElement("canvas");se.width=P,se.height=R;var ce=se.getContext("2d",{willReadFrequently:!0});m._image=m._image||new Image;var me=m._image;me.onload=function(){ce.drawImage(me,0,0),m._canvas={el:se,source:m.source},ae()},me.setAttribute("src",m.source)}}).then(function(){var ae,se;if(m._hasZ)se=ne(function(me,ye){return A[ye][me]}),ae=se.toDataURL("image/png");else if(m._hasSource)if(f)ae=m.source;else{var ce=m._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,P,R).data;se=ne(function(me,ye){var Te=4*(ye*P+me);return[ce[Te],ce[Te+1],ce[Te+2],ce[Te+3]]}),ae=se.toDataURL("image/png")}j.attr({"xlink:href":ae,height:V,width:D,x,y:M})});t._promises.push($)}function ne(ae){var se=document.createElement("canvas");se.width=D,se.height=V;var ce,me=se.getContext("2d",{willReadFrequently:!0}),ye=function(ie){return b.constrain(Math.round(s.c2p(k+ie*O)-x),0,D)},Te=function(ie){return b.constrain(Math.round(l.c2p(C+ie*X)-M),0,V)},Ce=g.colormodel[m.colormodel],pe=Ce.colormodel||m.colormodel,fe=Ce.fmt;for(S=0;S<w.w;S++){var Oe=ye(S),Se=ye(S+1);if(Se!==Oe&&!isNaN(Se)&&!isNaN(Oe))for(var Me=0;Me<w.h;Me++){var ue=Te(Me),le=Te(Me+1);le===ue||isNaN(le)||isNaN(ue)||!ae(S,Me)||(ce=m._scaler(ae(S,Me)),me.fillStyle=ce?pe+"("+fe(ce).join(",")+")":"rgba(0,0,0,0)",me.fillRect(Oe,ue,Se-Oe,le-ue))}}return se}})}},12826:function(F,L,e){var T=e(39898);F.exports=function(b){T.select(b).selectAll(".im image").style("opacity",function(a){return a[0].trace.opacity})}},54846:function(F,L,e){var T=e(1426).extendFlat,b=e(1426).extendDeep,a=e(30962).overrideAll,_=e(41940),g=e(22399),h=e(27670).Y,o=e(13838),t=e(44467).templatedArray,i=e(22372),n=e(12663).descriptionOnlyNumbers,r=_({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:g.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",b({},s,{range:l}));F.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:h({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:T({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:T({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:T({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:b({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:a({range:l,visible:T({},o.visible,{dflt:!0}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:T({},o.ticks,{dflt:"outside"}),ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:_({}),tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,separatethousands:o.separatethousands,exponentformat:o.exponentformat,minexponent:o.minexponent,showexponent:o.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:T({},s.line.color,{}),width:T({},s.line.width,{dflt:1}),editType:"plot"},thickness:T({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(F,L,e){var T=e(74875);L.name="indicator",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},24667:function(F){F.exports={calc:function(L,e){var T=[],b=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var a=e._lastValue,_=a;return e._hasDelta&&typeof e.delta.reference=="number"&&(_=e.delta.reference),T[0]={y:b,lastY:a,delta:b-_,relativeDelta:(b-_)/_},T}}},84577:function(F){F.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(F,L,e){var T=e(71828),b=e(54846),a=e(27670).c,_=e(44467),g=e(85501),h=e(84577),o=e(26218),t=e(38701),i=e(96115),n=e(89426);function r(s,l){function u(d,c){return T.coerce(s,l,b.gauge.steps,d,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}F.exports={supplyDefaults:function(s,l,u,d){function c(C,P){return T.coerce(s,l,b,C,P)}a(l,d,c),c("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var w=c("value");l._range=[0,typeof w=="number"?1.5*w:1];var m,f,x,y,v,M,p=new Array(2);function S(C,P){return T.coerce(x,y,b.gauge,C,P)}function A(C,P){return T.coerce(v,M,b.gauge.axis,C,P)}if(l._hasNumber&&(c("number.valueformat"),c("number.font.color",d.font.color),c("number.font.family",d.font.family),c("number.font.size"),l.number.font.size===void 0&&(l.number.font.size=h.defaultNumberFontSize,p[0]=!0),c("number.prefix"),c("number.suffix"),m=l.number.font.size),l._hasDelta&&(c("delta.font.color",d.font.color),c("delta.font.family",d.font.family),c("delta.font.size"),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(m||h.defaultNumberFontSize),p[1]=!0),c("delta.reference",l.value),c("delta.relative"),c("delta.valueformat",l.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),f=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||p[0])&&(!l._hasDelta||p[1])||!1,c("title.font.color",d.font.color),c("title.font.family",d.font.family),c("title.font.size",.25*(m||f||h.defaultNumberFontSize)),c("title.text"),l._hasGauge){(x=s.gauge)||(x={}),y=_.newContainer(l,"gauge"),S("shape"),(l._isBullet=l.gauge.shape==="bullet")||c("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||c("align","center"),S("bgcolor",d.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",h.valueThickness*(l.gauge.shape==="bullet"?.5:1)),g(x,y,{name:"steps",handleItemDefaults:r}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),v={},x&&(v=x.axis||{}),M=_.newContainer(y,"axis"),A("visible"),l._range=A("range",l._range);var k={outerTicks:!0};o(v,M,A,"linear"),n(v,M,A,"linear",k),i(v,M,A,"linear",k),t(v,M,A,k)}else c("title.align","center"),c("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},15154:function(F,L,e){F.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function(F,L,e){var T=e(39898),b=e(81684).sX,a=e(81684).k4,_=e(71828),g=_.strScale,h=_.strTranslate,o=_.rad2deg,t=e(18783).MID_SHIFT,i=e(91424),n=e(84577),r=e(63893),s=e(89298),l=e(71453),u=e(52830),d=e(13838),c=e(7901),w={left:"start",center:"middle",right:"end"},m={left:0,center:.5,right:1},f=/[yzafpnmkMGTPEZY]/;function x(A){return A&&A.duration>0}function y(A){A.each(function(k){c.stroke(T.select(this),k.line.color)}).each(function(k){c.fill(T.select(this),k.color)}).style("stroke-width",function(k){return k.line.width})}function v(A,k,C){var P=A._fullLayout,R=_.extendFlat({type:"linear",ticks:"outside",range:C,showline:!0},k),O={type:"linear",_id:"x"+k._id},X={letter:"x",font:P.font,noHover:!0,noTickson:!0};function D(V,j){return _.coerce(R,O,d,V,j)}return l(R,O,D,X,P),u(R,O,D,X),O}function M(A,k,C){return[Math.min(k/A.width,C/A.height),A,k+"x"+C]}function p(A,k,C,P){var R=document.createElementNS("http://www.w3.org/2000/svg","text"),O=T.select(R);return O.text(A).attr("x",0).attr("y",0).attr("text-anchor",C).attr("data-unformatted",A).call(r.convertToTspans,P).call(i.font,k),i.bBox(O.node())}function S(A,k,C,P,R,O){var X="_cache"+k;A[X]&&A[X].key===R||(A[X]={key:R,value:C});var D=_.aggNums(O,null,[A[X].value,P],2);return A[X].value=D,D}F.exports=function(A,k,C,P){var R,O=A._fullLayout;x(C)&&P&&(R=P()),_.makeTraceGroups(O._indicatorlayer,k,"trace").each(function(X){var D,V,j,B,W,q=X[0].trace,re=T.select(this),ee=q._hasGauge,K=q._isAngular,Y=q._isBullet,$=q.domain,ne={w:O._size.w*($.x[1]-$.x[0]),h:O._size.h*($.y[1]-$.y[0]),l:O._size.l+O._size.w*$.x[0],r:O._size.r+O._size.w*(1-$.x[1]),t:O._size.t+O._size.h*(1-$.y[1]),b:O._size.b+O._size.h*$.y[0]},ae=ne.l+ne.w/2,se=ne.t+ne.h/2,ce=Math.min(ne.w/2,ne.h),me=n.innerRadius*ce,ye=q.align||"center";if(V=se,ee){if(K&&(D=ae,V=se+ce/2,j=function(ue){return function(le,ie){return[ie/Math.sqrt(le.width/2*(le.width/2)+le.height*le.height),le,ie]}(ue,.9*me)}),Y){var Te=n.bulletPadding,Ce=1-n.bulletNumberDomainSize+Te;D=ne.l+(Ce+(1-Ce)*m[ye])*ne.w,j=function(ue){return M(ue,(n.bulletNumberDomainSize-Te)*ne.w,ne.h)}}}else D=ne.l+m[ye]*ne.w,j=function(ue){return M(ue,ne.w,ne.h)};(function(ue,le,ie,ge){var Ae,we,Ne,He=ie[0].trace,de=ge.numbersX,Le=ge.numbersY,Ee=He.align||"center",Re=w[Ee],je=ge.transitionOpts,Fe=ge.onComplete,Xe=_.ensureSingle(le,"g","numbers"),Ze=[];He._hasNumber&&Ze.push("number"),He._hasDelta&&(Ze.push("delta"),He.delta.position==="left"&&Ze.reverse());var at=Xe.selectAll("text").data(Ze);function lt(kt,Ot,Pt,et){if(!kt.match("s")||Pt>=0==et>=0||Ot(Pt).slice(-1).match(f)||Ot(et).slice(-1).match(f))return Ot;var nt=kt.slice().replace("s","f").replace(/\d+/,function(tt){return parseInt(tt)-1}),Ye=v(ue,{tickformat:nt});return function(tt){return Math.abs(tt)<1?s.tickText(Ye,tt).text:Ot(tt)}}at.enter().append("text"),at.attr("text-anchor",function(){return Re}).attr("class",function(kt){return kt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),at.exit().remove();var ot,bt=He.mode+He.align;if(He._hasDelta&&(ot=function(){var kt=v(ue,{tickformat:He.delta.valueformat},He._range);kt.setScale(),s.prepTicks(kt);var Ot=function(De){return s.tickText(kt,De).text},Pt=He.delta.suffix,et=He.delta.prefix,nt=function(De){return He.delta.relative?De.relativeDelta:De.delta},Ye=function(De,Be){return De===0||typeof De!="number"||isNaN(De)?"-":(De>0?He.delta.increasing.symbol:He.delta.decreasing.symbol)+et+Be(De)+Pt},tt=function(De){return De.delta>=0?He.delta.increasing.color:He.delta.decreasing.color};He._deltaLastValue===void 0&&(He._deltaLastValue=nt(ie[0]));var ut=Xe.select("text.delta");function Ke(){ut.text(Ye(nt(ie[0]),Ot)).call(c.fill,tt(ie[0])).call(r.convertToTspans,ue)}return ut.call(i.font,He.delta.font).call(c.fill,tt({delta:He._deltaLastValue})),x(je)?ut.transition().duration(je.duration).ease(je.easing).tween("text",function(){var De=T.select(this),Be=nt(ie[0]),Qe=He._deltaLastValue,rt=lt(He.delta.valueformat,Ot,Qe,Be),vt=a(Qe,Be);return He._deltaLastValue=Be,function(mt){De.text(Ye(vt(mt),rt)),De.call(c.fill,tt({delta:vt(mt)}))}}).each("end",function(){Ke(),Fe&&Fe()}).each("interrupt",function(){Ke(),Fe&&Fe()}):Ke(),we=p(Ye(nt(ie[0]),Ot),He.delta.font,Re,ue),ut}(),bt+=He.delta.position+He.delta.font.size+He.delta.font.family+He.delta.valueformat,bt+=He.delta.increasing.symbol+He.delta.decreasing.symbol,Ne=we),He._hasNumber&&(function(){var kt=v(ue,{tickformat:He.number.valueformat},He._range);kt.setScale(),s.prepTicks(kt);var Ot=function(tt){return s.tickText(kt,tt).text},Pt=He.number.suffix,et=He.number.prefix,nt=Xe.select("text.number");function Ye(){var tt=typeof ie[0].y=="number"?et+Ot(ie[0].y)+Pt:"-";nt.text(tt).call(i.font,He.number.font).call(r.convertToTspans,ue)}x(je)?nt.transition().duration(je.duration).ease(je.easing).each("end",function(){Ye(),Fe&&Fe()}).each("interrupt",function(){Ye(),Fe&&Fe()}).attrTween("text",function(){var tt=T.select(this),ut=a(ie[0].lastY,ie[0].y);He._lastValue=ie[0].y;var Ke=lt(He.number.valueformat,Ot,ie[0].lastY,ie[0].y);return function(De){tt.text(et+Ke(ut(De))+Pt)}}):Ye(),Ae=p(et+Ot(ie[0].y)+Pt,He.number.font,Re,ue)}(),bt+=He.number.font.size+He.number.font.family+He.number.valueformat+He.number.suffix+He.number.prefix,Ne=Ae),He._hasDelta&&He._hasNumber){var wt,ht,ct=[(Ae.left+Ae.right)/2,(Ae.top+Ae.bottom)/2],Tt=[(we.left+we.right)/2,(we.top+we.bottom)/2],Lt=.75*He.delta.font.size;He.delta.position==="left"&&(wt=S(He,"deltaPos",0,-1*(Ae.width*m[He.align]+we.width*(1-m[He.align])+Lt),bt,Math.min),ht=ct[1]-Tt[1],Ne={width:Ae.width+we.width+Lt,height:Math.max(Ae.height,we.height),left:we.left+wt,right:Ae.right,top:Math.min(Ae.top,we.top+ht),bottom:Math.max(Ae.bottom,we.bottom+ht)}),He.delta.position==="right"&&(wt=S(He,"deltaPos",0,Ae.width*(1-m[He.align])+we.width*m[He.align]+Lt,bt,Math.max),ht=ct[1]-Tt[1],Ne={width:Ae.width+we.width+Lt,height:Math.max(Ae.height,we.height),left:Ae.left,right:we.right+wt,top:Math.min(Ae.top,we.top+ht),bottom:Math.max(Ae.bottom,we.bottom+ht)}),He.delta.position==="bottom"&&(wt=null,ht=we.height,Ne={width:Math.max(Ae.width,we.width),height:Ae.height+we.height,left:Math.min(Ae.left,we.left),right:Math.max(Ae.right,we.right),top:Ae.bottom-Ae.height,bottom:Ae.bottom+we.height}),He.delta.position==="top"&&(wt=null,ht=Ae.top,Ne={width:Math.max(Ae.width,we.width),height:Ae.height+we.height,left:Math.min(Ae.left,we.left),right:Math.max(Ae.right,we.right),top:Ae.bottom-Ae.height-we.height,bottom:Ae.bottom}),ot.attr({dx:wt,dy:ht})}(He._hasNumber||He._hasDelta)&&Xe.attr("transform",function(){var kt=ge.numbersScaler(Ne);bt+=kt[2];var Ot,Pt=S(He,"numbersScale",1,kt[0],bt,Math.min);He._scaleNumbers||(Pt=1),Ot=He._isAngular?Le-Pt*Ne.bottom:Le-Pt*(Ne.top+Ne.bottom)/2,He._numbersTop=Pt*Ne.top+Ot;var et=Ne[Ee];Ee==="center"&&(et=(Ne.left+Ne.right)/2);var nt=de-Pt*et;return nt=S(He,"numbersTranslate",0,nt,bt,Math.max),h(nt,Ot)+g(Pt)})})(A,re,X,{numbersX:D,numbersY:V,numbersScaler:j,transitionOpts:C,onComplete:R}),ee&&(B={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},W={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var pe=re.selectAll("g.angular").data(K?X:[]);pe.exit().remove();var fe=re.selectAll("g.angularaxis").data(K?X:[]);fe.exit().remove(),K&&function(ue,le,ie,ge){var Ae,we,Ne,He,de=ie[0].trace,Le=ge.size,Ee=ge.radius,Re=ge.innerRadius,je=ge.gaugeBg,Fe=ge.gaugeOutline,Xe=[Le.l+Le.w/2,Le.t+Le.h/2+Ee/2],Ze=ge.gauge,at=ge.layer,lt=ge.transitionOpts,ot=ge.onComplete,bt=Math.PI/2;function wt(mt){var xt=de.gauge.axis.range[0],dt=(mt-xt)/(de.gauge.axis.range[1]-xt)*Math.PI-bt;return dt<-bt?-bt:dt>bt?bt:dt}function ht(mt){return T.svg.arc().innerRadius((Re+Ee)/2-mt/2*(Ee-Re)).outerRadius((Re+Ee)/2+mt/2*(Ee-Re)).startAngle(-bt)}function ct(mt){mt.attr("d",function(xt){return ht(xt.thickness).startAngle(wt(xt.range[0])).endAngle(wt(xt.range[1]))()})}Ze.enter().append("g").classed("angular",!0),Ze.attr("transform",h(Xe[0],Xe[1])),at.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),at.selectAll("g.xangularaxistick,path,text").remove(),(Ae=v(ue,de.gauge.axis)).type="linear",Ae.range=de.gauge.axis.range,Ae._id="xangularaxis",Ae.ticklabeloverflow="allow",Ae.setScale();var Tt=function(mt){return(Ae.range[0]-mt.x)/(Ae.range[1]-Ae.range[0])*Math.PI+Math.PI},Lt={},kt=s.makeLabelFns(Ae,0).labelStandoff;Lt.xFn=function(mt){var xt=Tt(mt);return Math.cos(xt)*kt},Lt.yFn=function(mt){var xt=Tt(mt),dt=Math.sin(xt)>0?.2:1;return-Math.sin(xt)*(kt+mt.fontSize*dt)+Math.abs(Math.cos(xt))*(mt.fontSize*t)},Lt.anchorFn=function(mt){var xt=Tt(mt),dt=Math.cos(xt);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},Lt.heightFn=function(mt,xt,dt){var Et=Tt(mt);return-.5*(1+Math.sin(Et))*dt};var Ot=function(mt){return h(Xe[0]+Ee*Math.cos(mt),Xe[1]-Ee*Math.sin(mt))};if(Ne=function(mt){return Ot(Tt(mt))},we=s.calcTicks(Ae),He=s.getTickSigns(Ae)[2],Ae.visible){He=Ae.ticks==="inside"?-1:1;var Pt=(Ae.linewidth||1)/2;s.drawTicks(ue,Ae,{vals:we,layer:at,path:"M"+He*Pt+",0h"+He*Ae.ticklen,transFn:function(mt){var xt=Tt(mt);return Ot(xt)+"rotate("+-o(xt)+")"}}),s.drawLabels(ue,Ae,{vals:we,layer:at,transFn:Ne,labelFns:Lt})}var et=[je].concat(de.gauge.steps),nt=Ze.selectAll("g.bg-arc").data(et);nt.enter().append("g").classed("bg-arc",!0).append("path"),nt.select("path").call(ct).call(y),nt.exit().remove();var Ye=ht(de.gauge.bar.thickness),tt=Ze.selectAll("g.value-arc").data([de.gauge.bar]);tt.enter().append("g").classed("value-arc",!0).append("path");var ut,Ke,De,Be=tt.select("path");x(lt)?(Be.transition().duration(lt.duration).ease(lt.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attrTween("d",(ut=Ye,Ke=wt(ie[0].lastY),De=wt(ie[0].y),function(){var mt=b(Ke,De);return function(xt){return ut.endAngle(mt(xt))()}})),de._lastValue=ie[0].y):Be.attr("d",typeof ie[0].y=="number"?Ye.endAngle(wt(ie[0].y)):"M0,0Z"),Be.call(y),tt.exit().remove(),et=[];var Qe=de.gauge.threshold.value;(Qe||Qe===0)&&et.push({range:[Qe,Qe],color:de.gauge.threshold.color,line:{color:de.gauge.threshold.line.color,width:de.gauge.threshold.line.width},thickness:de.gauge.threshold.thickness});var rt=Ze.selectAll("g.threshold-arc").data(et);rt.enter().append("g").classed("threshold-arc",!0).append("path"),rt.select("path").call(ct).call(y),rt.exit().remove();var vt=Ze.selectAll("g.gauge-outline").data([Fe]);vt.enter().append("g").classed("gauge-outline",!0).append("path"),vt.select("path").call(ct).call(y),vt.exit().remove()}(A,0,X,{radius:ce,innerRadius:me,gauge:pe,layer:fe,size:ne,gaugeBg:B,gaugeOutline:W,transitionOpts:C,onComplete:R});var Oe=re.selectAll("g.bullet").data(Y?X:[]);Oe.exit().remove();var Se=re.selectAll("g.bulletaxis").data(Y?X:[]);Se.exit().remove(),Y&&function(ue,le,ie,ge){var Ae,we,Ne,He,de,Le=ie[0].trace,Ee=ge.gauge,Re=ge.layer,je=ge.gaugeBg,Fe=ge.gaugeOutline,Xe=ge.size,Ze=Le.domain,at=ge.transitionOpts,lt=ge.onComplete;Ee.enter().append("g").classed("bullet",!0),Ee.attr("transform",h(Xe.l,Xe.t)),Re.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Re.selectAll("g.xbulletaxistick,path,text").remove();var ot=Xe.h,bt=Le.gauge.bar.thickness*ot,wt=Ze.x[0],ht=Ze.x[0]+(Ze.x[1]-Ze.x[0])*(Le._hasNumber||Le._hasDelta?1-n.bulletNumberDomainSize:1);function ct(nt){nt.attr("width",function(Ye){return Math.max(0,Ae.c2p(Ye.range[1])-Ae.c2p(Ye.range[0]))}).attr("x",function(Ye){return Ae.c2p(Ye.range[0])}).attr("y",function(Ye){return .5*(1-Ye.thickness)*ot}).attr("height",function(Ye){return Ye.thickness*ot})}(Ae=v(ue,Le.gauge.axis))._id="xbulletaxis",Ae.domain=[wt,ht],Ae.setScale(),we=s.calcTicks(Ae),Ne=s.makeTransTickFn(Ae),He=s.getTickSigns(Ae)[2],de=Xe.t+Xe.h,Ae.visible&&(s.drawTicks(ue,Ae,{vals:Ae.ticks==="inside"?s.clipEnds(Ae,we):we,layer:Re,path:s.makeTickPath(Ae,de,He),transFn:Ne}),s.drawLabels(ue,Ae,{vals:we,layer:Re,transFn:Ne,labelFns:s.makeLabelFns(Ae,de)}));var Tt=[je].concat(Le.gauge.steps),Lt=Ee.selectAll("g.bg-bullet").data(Tt);Lt.enter().append("g").classed("bg-bullet",!0).append("rect"),Lt.select("rect").call(ct).call(y),Lt.exit().remove();var kt=Ee.selectAll("g.value-bullet").data([Le.gauge.bar]);kt.enter().append("g").classed("value-bullet",!0).append("rect"),kt.select("rect").attr("height",bt).attr("y",(ot-bt)/2).call(y),x(at)?kt.select("rect").transition().duration(at.duration).ease(at.easing).each("end",function(){lt&&lt()}).each("interrupt",function(){lt&&lt()}).attr("width",Math.max(0,Ae.c2p(Math.min(Le.gauge.axis.range[1],ie[0].y)))):kt.select("rect").attr("width",typeof ie[0].y=="number"?Math.max(0,Ae.c2p(Math.min(Le.gauge.axis.range[1],ie[0].y))):0),kt.exit().remove();var Ot=ie.filter(function(){return Le.gauge.threshold.value||Le.gauge.threshold.value===0}),Pt=Ee.selectAll("g.threshold-bullet").data(Ot);Pt.enter().append("g").classed("threshold-bullet",!0).append("line"),Pt.select("line").attr("x1",Ae.c2p(Le.gauge.threshold.value)).attr("x2",Ae.c2p(Le.gauge.threshold.value)).attr("y1",(1-Le.gauge.threshold.thickness)/2*ot).attr("y2",(1-(1-Le.gauge.threshold.thickness)/2)*ot).call(c.stroke,Le.gauge.threshold.line.color).style("stroke-width",Le.gauge.threshold.line.width),Pt.exit().remove();var et=Ee.selectAll("g.gauge-outline").data([Fe]);et.enter().append("g").classed("gauge-outline",!0).append("rect"),et.select("rect").call(ct).call(y),et.exit().remove()}(A,0,X,{gauge:Oe,layer:Se,size:ne,gaugeBg:B,gaugeOutline:W,transitionOpts:C,onComplete:R});var Me=re.selectAll("text.title").data(X);Me.exit().remove(),Me.enter().append("text").classed("title",!0),Me.attr("text-anchor",function(){return Y?w.right:w[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(r.convertToTspans,A),Me.attr("transform",function(){var ue,le=ne.l+ne.w*m[q.title.align],ie=n.titlePadding,ge=i.bBox(Me.node());return ee?(K&&(ue=q.gauge.axis.visible?i.bBox(fe.node()).top-ie-ge.bottom:ne.t+ne.h/2-ce/2-ge.bottom-ie),Y&&(ue=V-(ge.top+ge.bottom)/2,le=ne.l-n.bulletPadding*ne.w)):ue=q._numbersTop-ie-ge.bottom,h(le,ue)})})}},16249:function(F,L,e){var T=e(50693),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(2418),g=e(9012),h=e(1426).extendFlat,o=e(30962).overrideAll,t=F.exports=o(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),valuehoverformat:b("value",1),showlegend:h({},g.showlegend,{dflt:!1})},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:h({},g.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(F,L,e){var T=e(78803),b=e(88489).processGrid,a=e(88489).filter;F.exports=function(_,g){g._len=Math.min(g.x.length,g.y.length,g.z.length,g.value.length),g._x=a(g.x,g._len),g._y=a(g.y,g._len),g._z=a(g.z,g._len),g._value=a(g.value,g._len);var h=b(g);g._gridFill=h.fill,g._Xs=h.Xs,g._Ys=h.Ys,g._Zs=h.Zs,g._len=h.len;for(var o=1/0,t=-1/0,i=0;i<g._len;i++){var n=g._value[i];o=Math.min(o,n),t=Math.max(t,n)}g._minValues=o,g._maxValues=t,g._vMin=g.isomin===void 0||g.isomin===null?o:g.isomin,g._vMax=g.isomax===void 0||g.isomin===null?t:g.isomax,T(_,g,{vals:[g._vMin,g._vMax],containerStr:"",cLetter:"c"})}},22674:function(F,L,e){var T=e(9330).gl_mesh3d,b=e(81697).parseColorScale,a=e(78614),_=e(21081).extractOpts,g=e(90060),h=function(r,s){for(var l=s.length-1;l>0;l--){var u=Math.min(s[l],s[l-1]),d=Math.max(s[l],s[l-1]);if(d>u&&u<r&&r<=d)return{id:l,distRatio:(d-r)/(d-u)}}return{id:0,distRatio:0}};function o(r,s,l){this.scene=r,this.uid=l,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var t=o.prototype;t.handlePick=function(r){if(r.object===this.mesh){var s=r.data.index,l=this.data._meshX[s],u=this.data._meshY[s],d=this.data._meshZ[s],c=this.data._Ys.length,w=this.data._Zs.length,m=h(l,this.data._Xs).id,f=h(u,this.data._Ys).id,x=h(d,this.data._Zs).id,y=r.index=x+w*f+w*c*m;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[y]!==void 0?r.textLabel=v[y]:v&&(r.textLabel=v),!0}},t.update=function(r){var s=this.scene,l=s.fullSceneLayout;function u(w,m,f,x){return m.map(function(y){return w.d2l(y,0,x)*f})}this.data=n(r);var d={positions:g(u(l.xaxis,r._meshX,s.dataScale[0],r.xcalendar),u(l.yaxis,r._meshY,s.dataScale[1],r.ycalendar),u(l.zaxis,r._meshZ,s.dataScale[2],r.zcalendar)),cells:g(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:a(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},c=_(r);d.vertexIntensity=r._meshIntensity,d.vertexIntensityBounds=[c.min,c.max],d.colormap=b(r),this.mesh.update(d)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(r){r._meshI=[],r._meshJ=[],r._meshK=[];var s,l,u,d,c,w,m,f=r.surface.show,x=r.spaceframe.show,y=r.surface.fill,v=r.spaceframe.fill,M=!1,p=!1,S=0,A=r._Xs,k=r._Ys,C=r._Zs,P=A.length,R=k.length,O=C.length,X=i.indexOf(r._gridFill.replace(/-/g,"").replace(/\+/g,"")),D=function(Ee,Re,je){switch(X){case 5:return je+O*Re+O*R*Ee;case 4:return je+O*Ee+O*P*Re;case 3:return Re+R*je+R*O*Ee;case 2:return Re+R*Ee+R*P*je;case 1:return Ee+P*je+P*O*Re;default:return Ee+P*Re+P*R*je}},V=r._minValues,j=r._maxValues,B=r._vMin,W=r._vMax;function q(Ee,Re,je){for(var Fe=w.length,Xe=l;Xe<Fe;Xe++)if(Ee===u[Xe]&&Re===d[Xe]&&je===c[Xe])return Xe;return-1}function re(){l=s}function ee(){u=[],d=[],c=[],w=[],s=0,re()}function K(Ee,Re,je,Fe){return u.push(Ee),d.push(Re),c.push(je),w.push(Fe),++s-1}function Y(Ee,Re,je){for(var Fe=[],Xe=0;Xe<Ee.length;Xe++)Fe[Xe]=Ee[Xe]*(1-je)+je*Re[Xe];return Fe}function $(Ee){m=Ee}function ne(Ee,Re){return Ee==="all"||Ee===null||Ee.indexOf(Re)>-1}function ae(Ee,Re){return Ee===null?Re:Ee}function se(Ee,Re,je){re();var Fe,Xe,Ze,at=[Re],lt=[je];if(m>=1)at=[Re],lt=[je];else if(m>0){var ot=function(Pt,et){var nt=Pt[0],Ye=Pt[1],tt=Pt[2],ut=function(xt,dt,Et){for(var pt=[],gt=0;gt<xt.length;gt++)pt[gt]=(xt[gt]+dt[gt]+Et[gt])/3;return pt}(nt,Ye,tt),Ke=Math.sqrt(1-m),De=Y(ut,nt,Ke),Be=Y(ut,Ye,Ke),Qe=Y(ut,tt,Ke),rt=et[0],vt=et[1],mt=et[2];return{xyzv:[[nt,Ye,Be],[Be,De,nt],[Ye,tt,Qe],[Qe,Be,Ye],[tt,nt,De],[De,Qe,tt]],abc:[[rt,vt,-1],[-1,-1,rt],[vt,mt,-1],[-1,-1,vt],[mt,rt,-1],[-1,-1,mt]]}}(Re,je);at=ot.xyzv,lt=ot.abc}for(var bt=0;bt<at.length;bt++){Re=at[bt],je=lt[bt];for(var wt=[],ht=0;ht<3;ht++){var ct=Re[ht][0],Tt=Re[ht][1],Lt=Re[ht][2],kt=Re[ht][3],Ot=je[ht]>-1?je[ht]:q(ct,Tt,Lt);wt[ht]=Ot>-1?Ot:K(ct,Tt,Lt,ae(Ee,kt))}Fe=wt[0],Xe=wt[1],Ze=wt[2],r._meshI.push(Fe),r._meshJ.push(Xe),r._meshK.push(Ze),++S}}function ce(Ee,Re,je,Fe){var Xe=Ee[3];Xe<je&&(Xe=je),Xe>Fe&&(Xe=Fe);for(var Ze=(Ee[3]-Xe)/(Ee[3]-Re[3]+1e-9),at=[],lt=0;lt<4;lt++)at[lt]=(1-Ze)*Ee[lt]+Ze*Re[lt];return at}function me(Ee,Re,je){return Ee>=Re&&Ee<=je}function ye(Ee){var Re=.001*(W-B);return Ee>=B-Re&&Ee<=W+Re}function Te(Ee){for(var Re=[],je=0;je<4;je++){var Fe=Ee[je];Re.push([r._x[Fe],r._y[Fe],r._z[Fe],r._value[Fe]])}return Re}var Ce=3;function pe(Ee,Re,je,Fe,Xe,Ze){Ze||(Ze=1),je=[-1,-1,-1];var at=!1,lt=[me(Re[0][3],Fe,Xe),me(Re[1][3],Fe,Xe),me(Re[2][3],Fe,Xe)];if(!lt[0]&&!lt[1]&&!lt[2])return!1;var ot=function(wt,ht,ct){return ye(ht[0][3])&&ye(ht[1][3])&&ye(ht[2][3])?(se(wt,ht,ct),!0):Ze<Ce&&pe(wt,ht,ct,B,W,++Ze)};if(lt[0]&&lt[1]&&lt[2])return ot(Ee,Re,je)||at;var bt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(wt){if(lt[wt[0]]&&lt[wt[1]]&&!lt[wt[2]]){var ht=Re[wt[0]],ct=Re[wt[1]],Tt=Re[wt[2]],Lt=ce(Tt,ht,Fe,Xe),kt=ce(Tt,ct,Fe,Xe);at=ot(Ee,[kt,Lt,ht],[-1,-1,je[wt[0]]])||at,at=ot(Ee,[ht,ct,kt],[je[wt[0]],je[wt[1]],-1])||at,bt=!0}}),bt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(wt){if(lt[wt[0]]&&!lt[wt[1]]&&!lt[wt[2]]){var ht=Re[wt[0]],ct=Re[wt[1]],Tt=Re[wt[2]],Lt=ce(ct,ht,Fe,Xe),kt=ce(Tt,ht,Fe,Xe);at=ot(Ee,[kt,Lt,ht],[-1,-1,je[wt[0]]])||at,bt=!0}}),at}function fe(Ee,Re,je,Fe){var Xe=!1,Ze=Te(Re),at=[me(Ze[0][3],je,Fe),me(Ze[1][3],je,Fe),me(Ze[2][3],je,Fe),me(Ze[3][3],je,Fe)];if(!(at[0]||at[1]||at[2]||at[3]))return Xe;if(at[0]&&at[1]&&at[2]&&at[3])return p&&(Xe=function(ot,bt,wt){var ht=function(ct,Tt,Lt){se(ot,[bt[ct],bt[Tt],bt[Lt]],[wt[ct],wt[Tt],wt[Lt]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}(Ee,Ze,Re)||Xe),Xe;var lt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ot){if(at[ot[0]]&&at[ot[1]]&&at[ot[2]]&&!at[ot[3]]){var bt=Ze[ot[0]],wt=Ze[ot[1]],ht=Ze[ot[2]],ct=Ze[ot[3]];if(p)Xe=se(Ee,[bt,wt,ht],[Re[ot[0]],Re[ot[1]],Re[ot[2]]])||Xe;else{var Tt=ce(ct,bt,je,Fe),Lt=ce(ct,wt,je,Fe),kt=ce(ct,ht,je,Fe);Xe=se(null,[Tt,Lt,kt],[-1,-1,-1])||Xe}lt=!0}}),lt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ot){if(at[ot[0]]&&at[ot[1]]&&!at[ot[2]]&&!at[ot[3]]){var bt=Ze[ot[0]],wt=Ze[ot[1]],ht=Ze[ot[2]],ct=Ze[ot[3]],Tt=ce(ht,bt,je,Fe),Lt=ce(ht,wt,je,Fe),kt=ce(ct,wt,je,Fe),Ot=ce(ct,bt,je,Fe);p?(Xe=se(Ee,[bt,Ot,Tt],[Re[ot[0]],-1,-1])||Xe,Xe=se(Ee,[wt,Lt,kt],[Re[ot[1]],-1,-1])||Xe):Xe=function(Pt,et,nt){var Ye=function(tt,ut,Ke){se(null,[et[tt],et[ut],et[Ke]],[nt[tt],nt[ut],nt[Ke]])};Ye(0,1,2),Ye(2,3,0)}(0,[Tt,Lt,kt,Ot],[-1,-1,-1,-1])||Xe,lt=!0}}),lt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ot){if(at[ot[0]]&&!at[ot[1]]&&!at[ot[2]]&&!at[ot[3]]){var bt=Ze[ot[0]],wt=Ze[ot[1]],ht=Ze[ot[2]],ct=Ze[ot[3]],Tt=ce(wt,bt,je,Fe),Lt=ce(ht,bt,je,Fe),kt=ce(ct,bt,je,Fe);p?(Xe=se(Ee,[bt,Tt,Lt],[Re[ot[0]],-1,-1])||Xe,Xe=se(Ee,[bt,Lt,kt],[Re[ot[0]],-1,-1])||Xe,Xe=se(Ee,[bt,kt,Tt],[Re[ot[0]],-1,-1])||Xe):Xe=se(null,[Tt,Lt,kt],[-1,-1,-1])||Xe,lt=!0}})),Xe}function Oe(Ee,Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt){var ht=!1;return M&&(ne(Ee,"A")&&(ht=fe(null,[Re,je,Fe,Ze],bt,wt)||ht),ne(Ee,"B")&&(ht=fe(null,[je,Fe,Xe,ot],bt,wt)||ht),ne(Ee,"C")&&(ht=fe(null,[je,Ze,at,ot],bt,wt)||ht),ne(Ee,"D")&&(ht=fe(null,[Fe,Ze,lt,ot],bt,wt)||ht),ne(Ee,"E")&&(ht=fe(null,[je,Fe,Ze,ot],bt,wt)||ht)),p&&(ht=fe(Ee,[je,Fe,Ze,ot],bt,wt)||ht),ht}function Se(Ee,Re,je,Fe,Xe,Ze,at,lt){return[lt[0]===!0||pe(Ee,Te([Re,je,Fe]),[Re,je,Fe],Ze,at),lt[1]===!0||pe(Ee,Te([Fe,Xe,Re]),[Fe,Xe,Re],Ze,at)]}function Me(Ee,Re,je,Fe,Xe,Ze,at,lt,ot){return lt?Se(Ee,Re,je,Xe,Fe,Ze,at,ot):Se(Ee,je,Xe,Fe,Re,Ze,at,ot)}function ue(Ee,Re,je,Fe,Xe,Ze,at){var lt,ot,bt,wt,ht=!1,ct=function(){ht=pe(Ee,[lt,ot,bt],[-1,-1,-1],Xe,Ze)||ht,ht=pe(Ee,[bt,wt,lt],[-1,-1,-1],Xe,Ze)||ht},Tt=at[0],Lt=at[1],kt=at[2];return Tt&&(lt=Y(Te([D(Re,je-0,Fe-0)])[0],Te([D(Re-1,je-0,Fe-0)])[0],Tt),ot=Y(Te([D(Re,je-0,Fe-1)])[0],Te([D(Re-1,je-0,Fe-1)])[0],Tt),bt=Y(Te([D(Re,je-1,Fe-1)])[0],Te([D(Re-1,je-1,Fe-1)])[0],Tt),wt=Y(Te([D(Re,je-1,Fe-0)])[0],Te([D(Re-1,je-1,Fe-0)])[0],Tt),ct()),Lt&&(lt=Y(Te([D(Re-0,je,Fe-0)])[0],Te([D(Re-0,je-1,Fe-0)])[0],Lt),ot=Y(Te([D(Re-0,je,Fe-1)])[0],Te([D(Re-0,je-1,Fe-1)])[0],Lt),bt=Y(Te([D(Re-1,je,Fe-1)])[0],Te([D(Re-1,je-1,Fe-1)])[0],Lt),wt=Y(Te([D(Re-1,je,Fe-0)])[0],Te([D(Re-1,je-1,Fe-0)])[0],Lt),ct()),kt&&(lt=Y(Te([D(Re-0,je-0,Fe)])[0],Te([D(Re-0,je-0,Fe-1)])[0],kt),ot=Y(Te([D(Re-0,je-1,Fe)])[0],Te([D(Re-0,je-1,Fe-1)])[0],kt),bt=Y(Te([D(Re-1,je-1,Fe)])[0],Te([D(Re-1,je-1,Fe-1)])[0],kt),wt=Y(Te([D(Re-1,je-0,Fe)])[0],Te([D(Re-1,je-0,Fe-1)])[0],kt),ct()),ht}function le(Ee,Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt,ht){var ct=Ee;return ht?(M&&Ee==="even"&&(ct=null),Oe(ct,Re,je,Fe,Xe,Ze,at,lt,ot,bt,wt)):(M&&Ee==="odd"&&(ct=null),Oe(ct,ot,lt,at,Ze,Xe,Fe,je,Re,bt,wt))}function ie(Ee,Re,je,Fe,Xe){for(var Ze=[],at=0,lt=0;lt<Re.length;lt++)for(var ot=Re[lt],bt=1;bt<O;bt++)for(var wt=1;wt<R;wt++)Ze.push(Me(Ee,D(ot,wt-1,bt-1),D(ot,wt-1,bt),D(ot,wt,bt-1),D(ot,wt,bt),je,Fe,(ot+wt+bt)%2,Xe&&Xe[at]?Xe[at]:[])),at++;return Ze}function ge(Ee,Re,je,Fe,Xe){for(var Ze=[],at=0,lt=0;lt<Re.length;lt++)for(var ot=Re[lt],bt=1;bt<P;bt++)for(var wt=1;wt<O;wt++)Ze.push(Me(Ee,D(bt-1,ot,wt-1),D(bt,ot,wt-1),D(bt-1,ot,wt),D(bt,ot,wt),je,Fe,(bt+ot+wt)%2,Xe&&Xe[at]?Xe[at]:[])),at++;return Ze}function Ae(Ee,Re,je,Fe,Xe){for(var Ze=[],at=0,lt=0;lt<Re.length;lt++)for(var ot=Re[lt],bt=1;bt<R;bt++)for(var wt=1;wt<P;wt++)Ze.push(Me(Ee,D(wt-1,bt-1,ot),D(wt-1,bt,ot),D(wt,bt-1,ot),D(wt,bt,ot),je,Fe,(wt+bt+ot)%2,Xe&&Xe[at]?Xe[at]:[])),at++;return Ze}function we(Ee,Re,je){for(var Fe=1;Fe<O;Fe++)for(var Xe=1;Xe<R;Xe++)for(var Ze=1;Ze<P;Ze++)le(Ee,D(Ze-1,Xe-1,Fe-1),D(Ze-1,Xe-1,Fe),D(Ze-1,Xe,Fe-1),D(Ze-1,Xe,Fe),D(Ze,Xe-1,Fe-1),D(Ze,Xe-1,Fe),D(Ze,Xe,Fe-1),D(Ze,Xe,Fe),Re,je,(Ze+Xe+Fe)%2)}function Ne(Ee,Re,je,Fe,Xe,Ze){for(var at=[],lt=0,ot=0;ot<Re.length;ot++)for(var bt=Re[ot],wt=1;wt<O;wt++)for(var ht=1;ht<R;ht++)at.push(ue(Ee,bt,ht,wt,je,Fe,Xe[ot],Ze&&Ze[lt]&&Ze[lt])),lt++;return at}function He(Ee,Re,je,Fe,Xe,Ze){for(var at=[],lt=0,ot=0;ot<Re.length;ot++)for(var bt=Re[ot],wt=1;wt<P;wt++)for(var ht=1;ht<O;ht++)at.push(ue(Ee,wt,bt,ht,je,Fe,Xe[ot],Ze&&Ze[lt]&&Ze[lt])),lt++;return at}function de(Ee,Re,je,Fe,Xe,Ze){for(var at=[],lt=0,ot=0;ot<Re.length;ot++)for(var bt=Re[ot],wt=1;wt<R;wt++)for(var ht=1;ht<P;ht++)at.push(ue(Ee,ht,wt,bt,je,Fe,Xe[ot],Ze&&Ze[lt]&&Ze[lt])),lt++;return at}function Le(Ee,Re){for(var je=[],Fe=Ee;Fe<Re;Fe++)je.push(Fe);return je}return function(){ee(),function(){for(var ot=0;ot<P;ot++)for(var bt=0;bt<R;bt++)for(var wt=0;wt<O;wt++){var ht=D(ot,bt,wt);K(r._x[ht],r._y[ht],r._z[ht],r._value[ht])}}();var Ee=null;if(x&&v&&($(v),p=!0,we(Ee,B,W),p=!1),f&&y){$(y);for(var Re=r.surface.pattern,je=r.surface.count,Fe=0;Fe<je;Fe++){var Xe=je===1?.5:Fe/(je-1),Ze=(1-Xe)*B+Xe*W,at=Math.abs(Ze-V)>Math.abs(Ze-j)?[V,Ze]:[Ze,j];M=!0,we(Re,at[0],at[1]),M=!1}}var lt=[[Math.min(B,j),Math.max(B,j)],[Math.min(V,W),Math.max(V,W)]];["x","y","z"].forEach(function(ot){for(var bt=[],wt=0;wt<lt.length;wt++){var ht=0,ct=lt[wt][0],Tt=lt[wt][1],Lt=r.slices[ot];if(Lt.show&&Lt.fill){$(Lt.fill);var kt=[],Ot=[],Pt=[];if(Lt.locations.length)for(var et=0;et<Lt.locations.length;et++){var nt=h(Lt.locations[et],ot==="x"?A:ot==="y"?k:C);nt.distRatio===0?kt.push(nt.id):nt.id>0&&(Ot.push(nt.id),ot==="x"?Pt.push([nt.distRatio,0,0]):ot==="y"?Pt.push([0,nt.distRatio,0]):Pt.push([0,0,nt.distRatio]))}else kt=Le(1,ot==="x"?P-1:ot==="y"?R-1:O-1);Ot.length>0&&(bt[ht]=ot==="x"?Ne(Ee,Ot,ct,Tt,Pt,bt[ht]):ot==="y"?He(Ee,Ot,ct,Tt,Pt,bt[ht]):de(Ee,Ot,ct,Tt,Pt,bt[ht]),ht++),kt.length>0&&(bt[ht]=ot==="x"?ie(Ee,kt,ct,Tt,bt[ht]):ot==="y"?ge(Ee,kt,ct,Tt,bt[ht]):Ae(Ee,kt,ct,Tt,bt[ht]),ht++)}var Ye=r.caps[ot];Ye.show&&Ye.fill&&($(Ye.fill),bt[ht]=ot==="x"?ie(Ee,[0,P-1],ct,Tt,bt[ht]):ot==="y"?ge(Ee,[0,R-1],ct,Tt,bt[ht]):Ae(Ee,[0,O-1],ct,Tt,bt[ht]),ht++)}}),S===0&&ee(),r._meshX=u,r._meshY=d,r._meshZ=c,r._meshIntensity=w,r._Xs=A,r._Ys=k,r._Zs=C}(),r}F.exports={findNearestOnAxis:h,generateIsoMeshes:n,createIsosurfaceTrace:function(r,s){var l=r.glplot.gl,u=T({gl:l}),d=new o(r,u,s.uid);return u._trace=d,d.update(s),r.glplot.add(u),d}}},82738:function(F,L,e){var T=e(71828),b=e(73972),a=e(16249),_=e(1586);function g(h,o,t,i,n){var r=n("isomin"),s=n("isomax");s!=null&&r!=null&&r>s&&(o.isomin=null,o.isomax=null);var l=n("x"),u=n("y"),d=n("z"),c=n("value");l&&l.length&&u&&u.length&&d&&d.length&&c&&c.length?(b.getComponentMethod("calendars","handleTraceDefaults")(h,o,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(w){n(w+"hoverformat");var m="caps."+w;n(m+".show")&&n(m+".fill");var f="slices."+w;n(f+".show")&&(n(f+".fill"),n(f+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){n(w)}),_(h,o,i,n,{prefix:"",cLetter:"c"}),o._length=null):o.visible=!1}F.exports={supplyDefaults:function(h,o,t,i){g(h,o,0,i,function(n,r){return T.coerce(h,o,a,n,r)})},supplyIsoDefaults:g}},64943:function(F,L,e){F.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(F,L,e){var T=e(50693),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(54532),g=e(9012),h=e(1426).extendFlat;F.exports=h({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"}),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},T("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},_.contours.x.show,{}),color:_.contours.x.color,width:_.contours.x.width,editType:"calc"},lightposition:{x:h({},_.lightposition.x,{dflt:1e5}),y:h({},_.lightposition.y,{dflt:1e5}),z:h({},_.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},_.lighting),hoverinfo:h({},g.hoverinfo,{editType:"calc"}),showlegend:h({},g.showlegend,{dflt:!1})})},82932:function(F,L,e){var T=e(78803);F.exports=function(b,a){a.intensity&&T(b,a,{vals:a.intensity,containerStr:"",cLetter:"c"})}},91134:function(F,L,e){var T=e(9330).gl_mesh3d,b=e(9330).delaunay_triangulate,a=e(9330).alpha_shape,_=e(9330).convex_hull,g=e(81697).parseColorScale,h=e(78614),o=e(21081).extractOpts,t=e(90060);function i(d,c,w){this.scene=d,this.uid=w,this.mesh=c,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=i.prototype;function r(d){for(var c=[],w=d.length,m=0;m<w;m++)c[m]=h(d[m]);return c}function s(d,c,w,m){for(var f=[],x=c.length,y=0;y<x;y++)f[y]=d.d2l(c[y],0,m)*w;return f}function l(d){for(var c=[],w=d.length,m=0;m<w;m++)c[m]=Math.round(d[m]);return c}function u(d,c){for(var w=d.length,m=0;m<w;m++)if(d[m]<=-.5||d[m]>=c-.5)return!1;return!0}n.handlePick=function(d){if(d.object===this.mesh){var c=d.index=d.data.index;d.data._cellCenter?d.traceCoordinate=d.data.dataCoordinate:d.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[c]!==void 0?d.textLabel=w[c]:w&&(d.textLabel=w),!0}},n.update=function(d){var c=this.scene,w=c.fullSceneLayout;this.data=d;var m,f=d.x.length,x=t(s(w.xaxis,d.x,c.dataScale[0],d.xcalendar),s(w.yaxis,d.y,c.dataScale[1],d.ycalendar),s(w.zaxis,d.z,c.dataScale[2],d.zcalendar));if(d.i&&d.j&&d.k){if(d.i.length!==d.j.length||d.j.length!==d.k.length||!u(d.i,f)||!u(d.j,f)||!u(d.k,f))return;m=t(l(d.i),l(d.j),l(d.k))}else m=d.alphahull===0?_(x):d.alphahull>0?a(d.alphahull,x):function(p,S){for(var A=["x","y","z"].indexOf(p),k=[],C=S.length,P=0;P<C;P++)k[P]=[S[P][(A+1)%3],S[P][(A+2)%3]];return b(k)}(d.delaunayaxis,x);var y={positions:x,cells:m,lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,contourEnable:d.contour.show,contourColor:h(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading};if(d.intensity){var v=o(d);this.color="#fff";var M=d.intensitymode;y[M+"Intensity"]=d.intensity,y[M+"IntensityBounds"]=[v.min,v.max],y.colormap=g(d)}else d.vertexcolor?(this.color=d.vertexcolor[0],y.vertexColors=r(d.vertexcolor)):d.facecolor?(this.color=d.facecolor[0],y.cellColors=r(d.facecolor)):(this.color=d.color,y.meshColor=h(d.color));this.mesh.update(y)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(d,c){var w=d.glplot.gl,m=T({gl:w}),f=new i(d,m,c.uid);return m._trace=f,f.update(c),d.glplot.add(m),f}},58669:function(F,L,e){var T=e(73972),b=e(71828),a=e(1586),_=e(2418);F.exports=function(g,h,o,t){function i(r,s){return b.coerce(g,h,_,r,s)}function n(r){var s=r.map(function(l){var u=i(l);return u&&b.isArrayOrTypedArray(u)?u:null});return s.every(function(l){return l&&l.length===s[0].length})&&s}n(["x","y","z"])?(n(["i","j","k"]),(!h.i||h.j&&h.k)&&(!h.j||h.k&&h.i)&&(!h.k||h.i&&h.j)?(T.getComponentMethod("calendars","handleTraceDefaults")(g,h,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){i(r)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in g?(i("intensity"),i("intensitymode"),a(g,h,t,i,{prefix:"",cLetter:"c"})):(h.showscale=!1,"facecolor"in g?i("facecolor"):"vertexcolor"in g?i("vertexcolor"):i("color",o)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),h._length=null):h.visible=!1):h.visible=!1}},21164:function(F,L,e){F.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(F,L,e){var T=e(71828).extendFlat,b=e(82196),a=e(12663).axisHoverFormat,_=e(79952).P,g=e(77914),h=e(22372),o=h.INCREASING.COLOR,t=h.DECREASING.COLOR,i=b.line;function n(r){return{line:{color:T({},i.color,{dflt:r}),width:i.width,dash:_,editType:"style"},editType:"style"}}F.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:T({},i.width,{}),dash:T({},_,{}),editType:"style"},increasing:n(o),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:T({},g.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(F,L,e){var T=e(71828),b=T._,a=e(89298),_=e(42973),g=e(50606).BADNUM;function h(t,i,n,r){return{o:t,h:i,l:n,c:r}}function o(t,i,n,r,s,l){for(var u=s.makeCalcdata(i,"open"),d=s.makeCalcdata(i,"high"),c=s.makeCalcdata(i,"low"),w=s.makeCalcdata(i,"close"),m=Array.isArray(i.text),f=Array.isArray(i.hovertext),x=!0,y=null,v=!!i.xperiodalignment,M=[],p=0;p<r.length;p++){var S=r[p],A=u[p],k=d[p],C=c[p],P=w[p];if(S!==g&&A!==g&&k!==g&&C!==g&&P!==g){P===A?y!==null&&P!==y&&(x=P>y):x=P>A,y=P;var R=l(A,k,C,P);R.pos=S,R.yc=(A+P)/2,R.i=p,R.dir=x?"increasing":"decreasing",R.x=R.pos,R.y=[C,k],v&&(R.orig_p=n[p]),m&&(R.tx=i.text[p]),f&&(R.htx=i.hovertext[p]),M.push(R)}else M.push({pos:S,empty:!0})}return i._extremes[s._id]=a.findExtremes(s,T.concat(c,d),{padded:!0}),M.length&&(M[0].t={labels:{open:b(t,"open:")+" ",high:b(t,"high:")+" ",low:b(t,"low:")+" ",close:b(t,"close:")+" "}}),M}F.exports={calc:function(t,i){var n=a.getFromId(t,i.xaxis),r=a.getFromId(t,i.yaxis),s=function(w,m,f){var x=f._minDiff;if(!x){var y,v=w._fullData,M=[];for(x=1/0,y=0;y<v.length;y++){var p=v[y];if(p.type==="ohlc"&&p.visible===!0&&p.xaxis===m._id){M.push(p);var S=m.makeCalcdata(p,"x");p._origX=S;var A=_(f,m,"x",S).vals;p._xcalc=A;var k=T.distinctVals(A).minDiff;k&&isFinite(k)&&(x=Math.min(x,k))}}for(x===1/0&&(x=1),y=0;y<M.length;y++)M[y]._minDiff=x}return x*f.tickwidth}(t,n,i),l=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var d=i._xcalc;i._xcalc=null;var c=o(t,i,u,d,r,h);return i._extremes[n._id]=a.findExtremes(n,d,{vpad:l/2}),c.length?(T.extendFlat(c[0].t,{wHover:l/2,tickLen:s}),c):[{t:{empty:!0}}]},calcCommon:o}},16169:function(F,L,e){var T=e(71828),b=e(14555),a=e(73927),_=e(2522);function g(h,o,t,i){t(i+".line.color"),t(i+".line.width",o.line.width),t(i+".line.dash",o.line.dash)}F.exports=function(h,o,t,i){function n(r,s){return T.coerce(h,o,_,r,s)}b(h,o,n,i)?(a(h,o,i,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),g(0,o,n,"increasing"),g(0,o,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),i._requestRangeslider[o.xaxis]=!0):o.visible=!1}},66449:function(F,L,e){var T=e(89298),b=e(71828),a=e(30211),_=e(7901),g=e(71828).fillText,h=e(22372),o={increasing:h.INCREASING.SYMBOL,decreasing:h.DECREASING.SYMBOL};function t(r,s,l,u){var d,c,w=r.cd,m=r.xa,f=w[0].trace,x=w[0].t,y=f.type,v=y==="ohlc"?"l":"min",M=y==="ohlc"?"h":"max",p=x.bPos||0,S=function(B){return B.pos+p-s},A=x.bdPos||x.tickLen,k=x.wHover,C=Math.min(1,A/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));function P(B){var W=S(B);return a.inbox(W-k,W+k,d)}function R(B){var W=B[v],q=B[M];return W===q||a.inbox(W-l,q-l,d)}function O(B){return(P(B)+R(B))/2}d=r.maxHoverDistance-C,c=r.maxSpikeDistance-C;var X=a.getDistanceFunction(u,P,R,O);if(a.getClosest(w,X,r),r.index===!1)return null;var D=w[r.index];if(D.empty)return null;var V=f[D.dir],j=V.line.color;return _.opacity(j)&&V.line.width?r.color=j:r.color=V.fillcolor,r.x0=m.c2p(D.pos+p-A,!0),r.x1=m.c2p(D.pos+p+A,!0),r.xLabelVal=D.orig_p!==void 0?D.orig_p:D.pos,r.spikeDistance=O(D)*c/d,r.xSpike=m.c2p(D.pos,!0),r}function i(r,s,l,u){var d=r.cd,c=r.ya,w=d[0].trace,m=d[0].t,f=[],x=t(r,s,l,u);if(!x)return[];var y=d[x.index].hi||w.hoverinfo,v=y.split("+");if(y!=="all"&&v.indexOf("y")===-1)return[];for(var M=["high","open","close","low"],p={},S=0;S<M.length;S++){var A,k=M[S],C=w[k][x.index],P=c.c2p(C,!0);C in p?(A=p[C]).yLabel+="<br>"+m.labels[k]+T.hoverLabelText(c,C,w.yhoverformat):((A=b.extendFlat({},x)).y0=A.y1=P,A.yLabelVal=C,A.yLabel=m.labels[k]+T.hoverLabelText(c,C,w.yhoverformat),A.name="",f.push(A),p[C]=A)}return f}function n(r,s,l,u){var d=r.cd,c=r.ya,w=d[0].trace,m=d[0].t,f=t(r,s,l,u);if(!f)return[];var x=d[f.index],y=f.index=x.i,v=x.dir;function M(R){return m.labels[R]+T.hoverLabelText(c,w[R][y],w.yhoverformat)}var p=x.hi||w.hoverinfo,S=p.split("+"),A=p==="all",k=A||S.indexOf("y")!==-1,C=A||S.indexOf("text")!==-1,P=k?[M("open"),M("high"),M("low"),M("close")+"  "+o[v]]:[];return C&&g(x,w,P),f.extraText=P.join("<br>"),f.y0=f.y1=c.c2p(x.yc,!0),[f]}F.exports={hoverPoints:function(r,s,l,u){return r.cd[0].trace.hoverlabel.split?i(r,s,l,u):n(r,s,l,u)},hoverSplit:i,hoverOnPoints:n}},54186:function(F,L,e){F.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function(F,L,e){var T=e(73972),b=e(71828);F.exports=function(a,_,g,h){var o=g("x"),t=g("open"),i=g("high"),n=g("low"),r=g("close");if(g("hoverlabel.split"),T.getComponentMethod("calendars","handleTraceDefaults")(a,_,["x"],h),t&&i&&n&&r){var s=Math.min(t.length,i.length,n.length,r.length);return o&&(s=Math.min(s,b.minRowLength(o))),_._length=s,s}}},72314:function(F,L,e){var T=e(39898),b=e(71828);F.exports=function(a,_,g,h){var o=_.yaxis,t=_.xaxis,i=!!t.rangebreaks;b.makeTraceGroups(h,g,"trace ohlc").each(function(n){var r=T.select(this),s=n[0],l=s.t;if(s.trace.visible!==!0||l.empty)r.remove();else{var u=l.tickLen,d=r.selectAll("path").data(b.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(c){if(c.empty)return"M0,0Z";var w=t.c2p(c.pos-u,!0),m=t.c2p(c.pos+u,!0),f=i?(w+m)/2:t.c2p(c.pos,!0);return"M"+w+","+o.c2p(c.o,!0)+"H"+f+"M"+f+","+o.c2p(c.h,!0)+"V"+o.c2p(c.l,!0)+"M"+m+","+o.c2p(c.c,!0)+"H"+f})}})}},67324:function(F){F.exports=function(L,e){var T,b=L.cd,a=L.xaxis,_=L.yaxis,g=[],h=b[0].t.bPos||0;if(e===!1)for(T=0;T<b.length;T++)b[T].selected=0;else for(T=0;T<b.length;T++){var o=b[T];e.contains([a.c2p(o.pos+h),_.c2p(o.yc)],null,o.i,L)?(g.push({pointNumber:o.i,x:a.c2d(o.pos),y:_.c2d(o.yc)}),o.selected=1):o.selected=0}return g}},53101:function(F,L,e){var T=e(39898),b=e(91424),a=e(7901);F.exports=function(_,g,h){var o=h||T.select(_).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=t[0].trace;T.select(this).selectAll("path").each(function(n){if(!n.empty){var r=i[n.dir].line;T.select(this).style("fill","none").call(a.stroke,r.color).call(b.dashLine,r.dash,r.width).style("opacity",i.selectedpoints&&!n.selected?.3:1)}})})}},99506:function(F,L,e){var T=e(1426).extendFlat,b=e(9012),a=e(41940),_=e(50693),g=e(5386).fF,h=e(27670).Y,o=T({editType:"calc"},_("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:g({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});F.exports={domain:h({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:T({},b.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:g({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:a({editType:"calc"}),tickfont:a({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:o,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(F,L,e){var T=e(27659).a0,b=e(45784),a="parcats";L.name=a,L.plot=function(_,g,h,o){var t=T(_.calcdata,a);if(t.length){var i=t[0];b(_,i,h,o)}},L.clean=function(_,g,h,o){var t=o._has&&o._has("parcats"),i=g._has&&g._has("parcats");t&&!i&&o._paperdiv.selectAll(".parcats").remove()}},28699:function(F,L,e){var T=e(28984).wrap,b=e(52075).hasColorscale,a=e(78803),_=e(75744),g=e(91424),h=e(71828),o=e(92770);function t(r,s,l){r.valueInds.push(s),r.count+=l}function i(r,s,l){return{categoryInds:r,color:s,rawColor:l,valueInds:[],count:0}}function n(r,s,l){r.valueInds.push(s),r.count+=l}F.exports=function(r,s){var l=h.filterVisible(s.dimensions);if(l.length===0)return[];var u,d,c,w=l.map(function(q){var re;if(q.categoryorder==="trace")re=null;else if(q.categoryorder==="array")re=q.categoryarray;else{re=_(q.values);for(var ee=!0,K=0;K<re.length;K++)if(!o(re[K])){ee=!1;break}re.sort(ee?h.sorterAsc:void 0),q.categoryorder==="category descending"&&(re=re.reverse())}return function(Y,$){$=$==null?[]:$.map(function(Ce){return Ce});var ne={},ae={},se=[];$.forEach(function(Ce,pe){ne[Ce]=0,ae[Ce]=pe});for(var ce=0;ce<Y.length;ce++){var me,ye=Y[ce];ne[ye]===void 0?(ne[ye]=1,me=$.push(ye)-1,ae[ye]=me):(ne[ye]++,me=ae[ye]),se.push(me)}var Te=$.map(function(Ce){return ne[Ce]});return{uniqueValues:$,uniqueCounts:Te,inds:se}}(q.values,re)});u=h.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(q){var re,ee=q.map(function(K){return K.displayindex});if(function(K){for(var Y=new Array(K.length),$=0;$<K.length;$++){if(K[$]<0||K[$]>=K.length||Y[K[$]]!==void 0)return!1;Y[K[$]]=!0}return!0}(ee))for(re=0;re<q.length;re++)q[re]._displayindex=q[re].displayindex;else for(re=0;re<q.length;re++)q[re]._displayindex=re}(l),l.forEach(function(q,re){(function(ee,K){ee._categoryarray=K.uniqueValues,ee.ticktext===null||ee.ticktext===void 0?ee._ticktext=[]:ee._ticktext=ee.ticktext.slice();for(var Y=ee._ticktext.length;Y<K.uniqueValues.length;Y++)ee._ticktext.push(K.uniqueValues[Y])})(q,w[re])});var m,f=s.line;f?(b(s,"line")&&a(r,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),m=g.tryColorscale(f)):m=h.identity;var x,y,v,M,p,S=l[0].values.length,A={},k=w.map(function(q){return q.inds});for(c=0,x=0;x<S;x++){var C=[];for(y=0;y<k.length;y++)C.push(k[y][x]);d=u[x%u.length],c+=d;var P=(v=x,M=void 0,p=void 0,h.isArrayOrTypedArray(f.color)?p=M=f.color[v%f.color.length]:M=f.color,{color:m(M),rawColor:p}),R=C+"-"+P.rawColor;A[R]===void 0&&(A[R]=i(C,P.color,P.rawColor)),n(A[R],x,d)}var O,X=l.map(function(q,re){return function(ee,K,Y,$,ne){return{dimensionInd:ee,containerInd:K,displayInd:Y,dimensionLabel:$,count:ne,categories:[],dragX:null}}(re,q._index,q._displayindex,q.label,c)});for(x=0;x<S;x++)for(d=u[x%u.length],y=0;y<X.length;y++){var D=X[y].containerInd,V=w[y].inds[x],j=X[y].categories;if(j[V]===void 0){var B=s.dimensions[D]._categoryarray[V],W=s.dimensions[D]._ticktext[V];j[V]={dimensionInd:y,categoryInd:O=V,categoryValue:B,displayInd:O,categoryLabel:W,valueInds:[],count:0,dragY:null}}t(j[V],x,d)}return T(function(q,re,ee){var K=q.map(function(Y){return Y.categories.length}).reduce(function(Y,$){return Math.max(Y,$)});return{dimensions:q,paths:re,trace:void 0,maxCats:K,count:ee}}(X,A,c))}},14647:function(F,L,e){var T=e(71828),b=e(52075).hasColorscale,a=e(1586),_=e(27670).c,g=e(85501),h=e(99506),o=e(94397);function t(i,n){function r(m,f){return T.coerce(i,n,h.dimensions,m,f)}var s=r("values"),l=r("visible");if(s&&s.length||(l=n.visible=!1),l){r("label"),r("displayindex",n._index);var u,d=i.categoryarray,c=Array.isArray(d)&&d.length>0;c&&(u="array");var w=r("categoryorder",u);w==="array"?(r("categoryarray"),r("ticktext")):(delete i.categoryarray,delete i.ticktext),c||w!=="array"||(n.categoryorder="trace")}}F.exports=function(i,n,r,s){function l(m,f){return T.coerce(i,n,h,m,f)}var u=g(i,n,{name:"dimensions",handleItemDefaults:t}),d=function(m,f,x,y,v){v("line.shape"),v("line.hovertemplate");var M=v("line.color",y.colorway[0]);if(b(m,"line")&&T.isArrayOrTypedArray(M)){if(M.length)return v("line.colorscale"),a(m,f,y,v,{prefix:"line.",cLetter:"c"}),M.length;f.line.color=x}return 1/0}(i,n,r,s,l);_(n,s,l),Array.isArray(u)&&u.length||(n.visible=!1),o(n,u,"values",d),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var c={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};T.coerceFont(l,"labelfont",c);var w={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};T.coerceFont(l,"tickfont",w)}},94873:function(F,L,e){F.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function(F,L,e){var T=e(39898),b=e(81684).k4,a=e(72391),_=e(30211),g=e(71828),h=g.strTranslate,o=e(91424),t=e(84267),i=e(63893);function n(ee,K,Y,$){var ne=K._context.staticPlot,ae=ee.map(j.bind(0,K,Y)),se=$.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",ne?"none":"all");var ce=se.selectAll("g.trace.parcats").data(ae,r),me=ce.enter().append("g").attr("class","trace parcats");ce.attr("transform",function(ue){return h(ue.x,ue.y)}),me.append("g").attr("class","paths");var ye=ce.select("g.paths").selectAll("path.path").data(function(ue){return ue.paths},r);ye.attr("fill",function(ue){return ue.model.color});var Te=ye.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ue){return ue.model.color}).attr("fill-opacity",0);f(Te),ye.attr("d",function(ue){return ue.svgD}),Te.empty()||ye.sort(l),ye.exit().remove(),ye.on("mouseover",u).on("mouseout",d).on("click",m),me.append("g").attr("class","dimensions");var Ce=ce.select("g.dimensions").selectAll("g.dimension").data(function(ue){return ue.dimensions},r);Ce.enter().append("g").attr("class","dimension"),Ce.attr("transform",function(ue){return h(ue.x,0)}),Ce.exit().remove();var pe=Ce.selectAll("g.category").data(function(ue){return ue.categories},r),fe=pe.enter().append("g").attr("class","category");pe.attr("transform",function(ue){return h(0,ue.y)}),fe.append("rect").attr("class","catrect").attr("pointer-events","none"),pe.select("rect.catrect").attr("fill","none").attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}),y(fe);var Oe=pe.selectAll("rect.bandrect").data(function(ue){return ue.bands},r);Oe.each(function(){g.raiseToTop(this)}),Oe.attr("fill",function(ue){return ue.color});var Se=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ue){return ue.color}).attr("fill-opacity",0);Oe.attr("fill",function(ue){return ue.color}).attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}).attr("y",function(ue){return ue.y}).attr("cursor",function(ue){return ue.parcatsViewModel.arrangement==="fixed"?"default":ue.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),v(Se),Oe.exit().remove(),fe.append("text").attr("class","catlabel").attr("pointer-events","none");var Me=K._fullLayout.paper_bgcolor;pe.select("text.catlabel").attr("text-anchor",function(ue){return s(ue)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Me)).style("fill","rgb(0, 0, 0)").attr("x",function(ue){return s(ue)?ue.width+5:-5}).attr("y",function(ue){return ue.height/2}).text(function(ue){return ue.model.categoryLabel}).each(function(ue){o.font(T.select(this),ue.parcatsViewModel.categorylabelfont),i.convertToTspans(T.select(this),K)}),fe.append("text").attr("class","dimlabel"),pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ue){return ue.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(ue){return ue.width/2}).attr("y",-5).text(function(ue,le){return le===0?ue.parcatsViewModel.model.dimensions[ue.model.dimensionInd].dimensionLabel:null}).each(function(ue){o.font(T.select(this),ue.parcatsViewModel.labelfont)}),pe.selectAll("rect.bandrect").on("mouseover",k).on("mouseout",C),pe.exit().remove(),Ce.call(T.behavior.drag().origin(function(ue){return{x:ue.x,y:0}}).on("dragstart",P).on("drag",R).on("dragend",O)),ce.each(function(ue){ue.traceSelection=T.select(this),ue.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path"),ue.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ce.exit().remove()}function r(ee){return ee.key}function s(ee){var K=ee.parcatsViewModel.dimensions.length,Y=ee.parcatsViewModel.dimensions[K-1].model.dimensionInd;return ee.model.dimensionInd===Y}function l(ee,K){return ee.model.rawColor>K.model.rawColor?1:ee.model.rawColor<K.model.rawColor?-1:0}function u(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){g.raiseToTop(this),x(T.select(this));var K=c(ee),Y=w(ee);if(ee.parcatsViewModel.graphDiv.emit("plotly_hover",{points:K,event:T.event,constraints:Y}),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var $,ne,ae,se=T.mouse(this)[0],ce=ee.parcatsViewModel.graphDiv,me=ee.parcatsViewModel.trace,ye=ce._fullLayout,Te=ye._paperdiv.node().getBoundingClientRect(),Ce=ee.parcatsViewModel.graphDiv.getBoundingClientRect();for(ae=0;ae<ee.leftXs.length-1;ae++)if(ee.leftXs[ae]+ee.dimWidths[ae]-2<=se&&se<=ee.leftXs[ae+1]+2){var pe=ee.parcatsViewModel.dimensions[ae],fe=ee.parcatsViewModel.dimensions[ae+1];$=(pe.x+pe.width+fe.x)/2,ne=(ee.topYs[ae]+ee.topYs[ae+1]+ee.height)/2;break}var Oe=ee.parcatsViewModel.x+$,Se=ee.parcatsViewModel.y+ne,Me=t.mostReadable(ee.model.color,["black","white"]),ue=ee.model.count,le=ue/ee.parcatsViewModel.model.count,ie={countLabel:ue,probabilityLabel:le.toFixed(3)},ge=[];ee.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ge.push(["Count:",ie.countLabel].join(" ")),ee.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ge.push(["P:",ie.probabilityLabel].join(" "));var Ae=ge.join("<br>"),we=T.mouse(ce)[0];_.loneHover({trace:me,x:Oe-Te.left+Ce.left,y:Se-Te.top+Ce.top,text:Ae,color:ee.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Me,idealAlign:we<Oe?"right":"left",hovertemplate:(me.line||{}).hovertemplate,hovertemplateLabels:ie,eventData:[{data:me._input,fullData:me,count:ue,probability:le}]},{container:ye._hoverlayer.node(),outerContainer:ye._paper.node(),gd:ce})}}}function d(ee){if(!ee.parcatsViewModel.dragDimension&&(f(T.select(this)),_.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ee.parcatsViewModel.pathSelection.sort(l),ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var K=c(ee),Y=w(ee);ee.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:K,event:T.event,constraints:Y})}}function c(ee){for(var K=[],Y=X(ee.parcatsViewModel),$=0;$<ee.model.valueInds.length;$++){var ne=ee.model.valueInds[$];K.push({curveNumber:Y,pointNumber:ne})}return K}function w(ee){for(var K={},Y=ee.parcatsViewModel.model.dimensions,$=0;$<Y.length;$++){var ne=Y[$],ae=ne.categories[ee.model.categoryInds[$]];K[ne.containerInd]=ae.categoryValue}return ee.model.rawColor!==void 0&&(K.color=ee.model.rawColor),K}function m(ee){if(ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var K=c(ee),Y=w(ee);ee.parcatsViewModel.graphDiv.emit("plotly_click",{points:K,event:T.event,constraints:Y})}}function f(ee){ee.attr("fill",function(K){return K.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function x(ee){ee.attr("fill-opacity",.8).attr("stroke",function(K){return t.mostReadable(K.model.color,["black","white"])}).attr("stroke-width",.3)}function y(ee){ee.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function v(ee){ee.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(ee){var K=ee.parcatsViewModel.pathSelection,Y=ee.categoryViewModel.model.dimensionInd,$=ee.categoryViewModel.model.categoryInd;return K.filter(function(ne){return ne.model.categoryInds[Y]===$&&ne.model.color===ee.color})}function p(ee,K,Y){var $=T.select(ee).datum(),ne=$.categoryViewModel.model,ae=$.parcatsViewModel.graphDiv,se=T.select(ee.parentNode).selectAll("rect.bandrect"),ce=[];se.each(function(ye){M(ye).each(function(Te){Array.prototype.push.apply(ce,c(Te))})});var me={};me[ne.dimensionInd]=ne.categoryValue,ae.emit(K,{points:ce,event:Y,constraints:me})}function S(ee,K,Y){var $=T.select(ee).datum(),ne=$.categoryViewModel.model,ae=$.parcatsViewModel.graphDiv,se=M($),ce=[];se.each(function(ye){Array.prototype.push.apply(ce,c(ye))});var me={};me[ne.dimensionInd]=ne.categoryValue,$.rawColor!==void 0&&(me.color=$.rawColor),ae.emit(K,{points:ce,event:Y,constraints:me})}function A(ee,K,Y){ee._fullLayout._calcInverseTransform(ee);var $,ne,ae=ee._fullLayout._invScaleX,se=ee._fullLayout._invScaleY,ce=T.select(Y.parentNode).select("rect.catrect"),me=ce.node().getBoundingClientRect(),ye=ce.datum(),Te=ye.parcatsViewModel,Ce=Te.model.dimensions[ye.model.dimensionInd],pe=Te.trace,fe=me.top+me.height/2;Te.dimensions.length>1&&Ce.displayInd===Te.dimensions.length-1?($=me.left,ne="left"):($=me.left+me.width,ne="right");var Oe=ye.model.count,Se=ye.model.categoryLabel,Me=Oe/ye.parcatsViewModel.model.count,ue={countLabel:Oe,categoryLabel:Se,probabilityLabel:Me.toFixed(3)},le=[];ye.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&le.push(["Count:",ue.countLabel].join(" ")),ye.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&le.push(["P("+ue.categoryLabel+"):",ue.probabilityLabel].join(" "));var ie=le.join("<br>");return{trace:pe,x:ae*($-K.left),y:se*(fe-K.top),text:ie,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ne,hovertemplate:pe.hovertemplate,hovertemplateLabels:ue,eventData:[{data:pe._input,fullData:pe,count:Oe,category:Se,probability:Me}]}}function k(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(T.mouse(this)[1]<-1)return;var K,Y=ee.parcatsViewModel.graphDiv,$=Y._fullLayout,ne=$._paperdiv.node().getBoundingClientRect(),ae=ee.parcatsViewModel.hoveron,se=this;ae==="color"?(function(ce){var me=T.select(ce).datum(),ye=M(me);x(ye),ye.each(function(){g.raiseToTop(this)}),T.select(ce.parentNode).selectAll("rect.bandrect").filter(function(Te){return Te.color===me.color}).each(function(){g.raiseToTop(this),T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(se),S(se,"plotly_hover",T.event)):(function(ce){T.select(ce.parentNode).selectAll("rect.bandrect").each(function(me){var ye=M(me);x(ye),ye.each(function(){g.raiseToTop(this)})}),T.select(ce.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(se),p(se,"plotly_hover",T.event)),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ae==="category"?K=A(Y,ne,se):ae==="color"?K=function(ce,me,ye){ce._fullLayout._calcInverseTransform(ce);var Te,Ce,pe=ce._fullLayout._invScaleX,fe=ce._fullLayout._invScaleY,Oe=ye.getBoundingClientRect(),Se=T.select(ye).datum(),Me=Se.categoryViewModel,ue=Me.parcatsViewModel,le=ue.model.dimensions[Me.model.dimensionInd],ie=ue.trace,ge=Oe.y+Oe.height/2;ue.dimensions.length>1&&le.displayInd===ue.dimensions.length-1?(Te=Oe.left,Ce="left"):(Te=Oe.left+Oe.width,Ce="right");var Ae=Me.model.categoryLabel,we=Se.parcatsViewModel.model.count,Ne=0;Se.categoryViewModel.bands.forEach(function(at){at.color===Se.color&&(Ne+=at.count)});var He=Me.model.count,de=0;ue.pathSelection.each(function(at){at.model.color===Se.color&&(de+=at.model.count)});var Le=Ne/we,Ee=Ne/de,Re=Ne/He,je={countLabel:we,categoryLabel:Ae,probabilityLabel:Le.toFixed(3)},Fe=[];Me.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Fe.push(["Count:",je.countLabel].join(" ")),Me.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Fe.push("P(color  "+Ae+"): "+je.probabilityLabel),Fe.push("P("+Ae+" | color): "+Ee.toFixed(3)),Fe.push("P(color | "+Ae+"): "+Re.toFixed(3)));var Xe=Fe.join("<br>"),Ze=t.mostReadable(Se.color,["black","white"]);return{trace:ie,x:pe*(Te-me.left),y:fe*(ge-me.top),text:Xe,color:Se.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ze,fontSize:10,idealAlign:Ce,hovertemplate:ie.hovertemplate,hovertemplateLabels:je,eventData:[{data:ie._input,fullData:ie,category:Ae,count:we,probability:Le,categorycount:He,colorcount:de,bandcolorcount:Ne}]}}(Y,ne,se):ae==="dimension"&&(K=function(ce,me,ye){var Te=[];return T.select(ye.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){Te.push(A(ce,me,this))}),Te}(Y,ne,se)),K&&_.loneHover(K,{container:$._hoverlayer.node(),outerContainer:$._paper.node(),gd:Y}))}}function C(ee){var K=ee.parcatsViewModel;K.dragDimension||(f(K.pathSelection),y(K.dimensionSelection.selectAll("g.category")),v(K.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),_.loneUnhover(K.graphDiv._fullLayout._hoverlayer.node()),K.pathSelection.sort(l),K.hoverinfoItems.indexOf("skip")!==-1)||(ee.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",T.event):p(this,"plotly_unhover",T.event))}function P(ee){ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragDimensionDisplayInd=ee.model.displayInd,ee.initialDragDimensionDisplayInds=ee.parcatsViewModel.model.dimensions.map(function(K){return K.displayInd}),ee.dragHasMoved=!1,ee.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(K){var Y=T.mouse(this)[0],$=T.mouse(this)[1];-2<=Y&&Y<=K.width+2&&-2<=$&&$<=K.height+2&&(ee.dragCategoryDisplayInd=K.model.displayInd,ee.initialDragCategoryDisplayInds=ee.model.categories.map(function(ne){return ne.displayInd}),K.model.dragY=K.y,g.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(ne){ne.y<$&&$<=ne.y+ne.height&&(ee.potentialClickBand=this)}))}),ee.parcatsViewModel.dragDimension=ee,_.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function R(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragHasMoved=!0,ee.dragDimensionDisplayInd!==null)){var K=ee.dragDimensionDisplayInd,Y=K-1,$=K+1,ne=ee.parcatsViewModel.dimensions[K];if(ee.dragCategoryDisplayInd!==null){var ae=ne.categories[ee.dragCategoryDisplayInd];ae.model.dragY+=T.event.dy;var se=ae.model.dragY,ce=ae.model.displayInd,me=ne.categories,ye=me[ce-1],Te=me[ce+1];ye!==void 0&&se<ye.y+ye.height/2&&(ae.model.displayInd=ye.model.displayInd,ye.model.displayInd=ce),Te!==void 0&&se+ae.height>Te.y+Te.height/2&&(ae.model.displayInd=Te.model.displayInd,Te.model.displayInd=ce),ee.dragCategoryDisplayInd=ae.model.displayInd}if(ee.dragCategoryDisplayInd===null||ee.parcatsViewModel.arrangement==="freeform"){ne.model.dragX=T.event.x;var Ce=ee.parcatsViewModel.dimensions[Y],pe=ee.parcatsViewModel.dimensions[$];Ce!==void 0&&ne.model.dragX<Ce.x+Ce.width&&(ne.model.displayInd=Ce.model.displayInd,Ce.model.displayInd=K),pe!==void 0&&ne.model.dragX+ne.width>pe.x&&(ne.model.displayInd=pe.model.displayInd,pe.model.displayInd=ee.dragDimensionDisplayInd),ee.dragDimensionDisplayInd=ne.model.displayInd}q(ee.parcatsViewModel),W(ee.parcatsViewModel),V(ee.parcatsViewModel),D(ee.parcatsViewModel)}}function O(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&ee.dragDimensionDisplayInd!==null){T.select(this).selectAll("text").attr("font-weight","normal");var K={},Y=X(ee.parcatsViewModel),$=ee.parcatsViewModel.model.dimensions.map(function(Te){return Te.displayInd}),ne=ee.initialDragDimensionDisplayInds.some(function(Te,Ce){return Te!==$[Ce]});ne&&$.forEach(function(Te,Ce){var pe=ee.parcatsViewModel.model.dimensions[Ce].containerInd;K["dimensions["+pe+"].displayindex"]=Te});var ae=!1;if(ee.dragCategoryDisplayInd!==null){var se=ee.model.categories.map(function(Te){return Te.displayInd});if(ae=ee.initialDragCategoryDisplayInds.some(function(Te,Ce){return Te!==se[Ce]})){var ce=ee.model.categories.slice().sort(function(Te,Ce){return Te.displayInd-Ce.displayInd}),me=ce.map(function(Te){return Te.categoryValue}),ye=ce.map(function(Te){return Te.categoryLabel});K["dimensions["+ee.model.containerInd+"].categoryarray"]=[me],K["dimensions["+ee.model.containerInd+"].ticktext"]=[ye],K["dimensions["+ee.model.containerInd+"].categoryorder"]="array"}}ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!ee.dragHasMoved&&ee.potentialClickBand&&(ee.parcatsViewModel.hoveron==="color"?S(ee.potentialClickBand,"plotly_click",T.event.sourceEvent):p(ee.potentialClickBand,"plotly_click",T.event.sourceEvent)),ee.model.dragX=null,ee.dragCategoryDisplayInd!==null&&(ee.parcatsViewModel.dimensions[ee.dragDimensionDisplayInd].categories[ee.dragCategoryDisplayInd].model.dragY=null,ee.dragCategoryDisplayInd=null),ee.dragDimensionDisplayInd=null,ee.parcatsViewModel.dragDimension=null,ee.dragHasMoved=null,ee.potentialClickBand=null,q(ee.parcatsViewModel),W(ee.parcatsViewModel),T.transition().duration(300).ease("cubic-in-out").each(function(){V(ee.parcatsViewModel,!0),D(ee.parcatsViewModel,!0)}).each("end",function(){(ne||ae)&&a.restyle(ee.parcatsViewModel.graphDiv,K,[Y])})}}function X(ee){for(var K,Y=ee.graphDiv._fullData,$=0;$<Y.length;$++)if(ee.key===Y[$].uid){K=$;break}return K}function D(ee,K){var Y;K===void 0&&(K=!1),ee.pathSelection.data(function($){return $.paths},r),(Y=ee.pathSelection,K?Y.transition():Y).attr("d",function($){return $.svgD})}function V(ee,K){function Y(se){return K?se.transition():se}K===void 0&&(K=!1),ee.dimensionSelection.data(function(se){return se.dimensions},r);var $=ee.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},r);Y(ee.dimensionSelection).attr("transform",function(se){return h(se.x,0)}),Y($).attr("transform",function(se){return h(0,se.y)}),$.select(".dimlabel").text(function(se,ce){return ce===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}),$.select(".catlabel").attr("text-anchor",function(se){return s(se)?"start":"end"}).attr("x",function(se){return s(se)?se.width+5:-5}).each(function(se){var ce,me;s(se)?(ce=se.width+5,me="start"):(ce=-5,me="end"),T.select(this).selectAll("tspan").attr("x",ce).attr("text-anchor",me)});var ne=$.selectAll("rect.bandrect").data(function(se){return se.bands},r),ae=ne.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);ne.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),v(ae),ne.each(function(){g.raiseToTop(this)}),ne.exit().remove()}function j(ee,K,Y){var $,ne=Y[0],ae=K.margin||{l:80,r:80,t:100,b:80},se=ne.trace,ce=se.domain,me=K.width,ye=K.height,Te=Math.floor(me*(ce.x[1]-ce.x[0])),Ce=Math.floor(ye*(ce.y[1]-ce.y[0])),pe=ce.x[0]*me+ae.l,fe=K.height-ce.y[1]*K.height+ae.t,Oe=se.line.shape;$=se.hoverinfo==="all"?["count","probability"]:(se.hoverinfo||"").split("+");var Se={trace:se,key:se.uid,model:ne,x:pe,y:fe,width:Te,height:Ce,hoveron:se.hoveron,hoverinfoItems:$,arrangement:se.arrangement,bundlecolors:se.bundlecolors,sortpaths:se.sortpaths,labelfont:se.labelfont,categorylabelfont:se.tickfont,pathShape:Oe,dragDimension:null,margin:ae,paths:[],dimensions:[],graphDiv:ee,traceSelection:null,pathSelection:null,dimensionSelection:null};return ne.dimensions&&(q(Se),W(Se)),Se}function B(ee,K,Y,$,ne){var ae,se,ce=[],me=[];for(se=0;se<Y.length-1;se++)ae=b(Y[se]+ee[se],ee[se+1]),ce.push(ae(ne)),me.push(ae(1-ne));var ye="M "+ee[0]+","+K[0];for(ye+="l"+Y[0]+",0 ",se=1;se<Y.length;se++)ye+="C"+ce[se-1]+","+K[se-1]+" "+me[se-1]+","+K[se]+" "+ee[se]+","+K[se],ye+="l"+Y[se]+",0 ";for(ye+="l0,"+$+" ",ye+="l -"+Y[Y.length-1]+",0 ",se=Y.length-2;se>=0;se--)ye+="C"+me[se]+","+(K[se+1]+$)+" "+ce[se]+","+(K[se]+$)+" "+(ee[se]+Y[se])+","+(K[se]+$),ye+="l-"+Y[se]+",0 ";return ye+"Z"}function W(ee){var K=ee.dimensions,Y=ee.model,$=K.map(function(je){return je.categories.map(function(Fe){return Fe.y})}),ne=ee.model.dimensions.map(function(je){return je.categories.map(function(Fe){return Fe.displayInd})}),ae=ee.model.dimensions.map(function(je){return je.displayInd}),se=ee.dimensions.map(function(je){return je.model.dimensionInd}),ce=K.map(function(je){return je.x}),me=K.map(function(je){return je.width}),ye=[];for(var Te in Y.paths)Y.paths.hasOwnProperty(Te)&&ye.push(Y.paths[Te]);function Ce(je){var Fe=je.categoryInds.map(function(Xe,Ze){return ne[Ze][Xe]});return se.map(function(Xe){return Fe[Xe]})}ye.sort(function(je,Fe){var Xe=Ce(je),Ze=Ce(Fe);return ee.sortpaths==="backward"&&(Xe.reverse(),Ze.reverse()),Xe.push(je.valueInds[0]),Ze.push(Fe.valueInds[0]),ee.bundlecolors&&(Xe.unshift(je.rawColor),Ze.unshift(Fe.rawColor)),Xe<Ze?-1:Xe>Ze?1:0});for(var pe=new Array(ye.length),fe=K[0].model.count,Oe=K[0].categories.map(function(je){return je.height}).reduce(function(je,Fe){return je+Fe}),Se=0;Se<ye.length;Se++){var Me,ue=ye[Se];Me=fe>0?Oe*(ue.count/fe):0;for(var le,ie=new Array($.length),ge=0;ge<ue.categoryInds.length;ge++){var Ae=ue.categoryInds[ge],we=ne[ge][Ae],Ne=ae[ge];ie[Ne]=$[Ne][we],$[Ne][we]+=Me;var He=ee.dimensions[Ne].categories[we],de=He.bands.length,Le=He.bands[de-1];if(Le===void 0||ue.rawColor!==Le.rawColor){var Ee=Le===void 0?0:Le.y+Le.height;He.bands.push({key:Ee,color:ue.color,rawColor:ue.rawColor,height:Me,width:He.width,count:ue.count,y:Ee,categoryViewModel:He,parcatsViewModel:ee})}else{var Re=He.bands[de-1];Re.height+=Me,Re.count+=ue.count}}le=ee.pathShape==="hspline"?B(ce,ie,me,Me,.5):B(ce,ie,me,Me,0),pe[Se]={key:ue.valueInds[0],model:ue,height:Me,leftXs:ce,topYs:ie,dimWidths:me,svgD:le,parcatsViewModel:ee}}ee.paths=pe}function q(ee){var K=ee.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});K.sort(function(se,ce){return se.displayInd-ce.displayInd});var Y=[];for(var $ in K){var ne=K[$].dimensionInd,ae=ee.model.dimensions[ne];Y.push(re(ee,ae))}ee.dimensions=Y}function re(ee,K){var Y,$=ee.model.dimensions.length,ne=K.displayInd;Y=40+($>1?(ee.width-80-16)/($-1):0)*ne;var ae,se,ce,me,ye,Te=[],Ce=ee.model.maxCats,pe=K.categories.length,fe=K.count,Oe=ee.height-8*(Ce-1),Se=8*(Ce-pe)/2,Me=K.categories.map(function(ue){return{displayInd:ue.displayInd,categoryInd:ue.categoryInd}});for(Me.sort(function(ue,le){return ue.displayInd-le.displayInd}),ye=0;ye<pe;ye++)me=Me[ye].categoryInd,se=K.categories[me],ae=fe>0?se.count/fe*Oe:0,ce={key:se.valueInds[0],model:se,width:16,height:ae,y:se.dragY!==null?se.dragY:Se,bands:[],parcatsViewModel:ee},Se=Se+ae+8,Te.push(ce);return{key:K.dimensionInd,x:K.dragX!==null?K.dragX:Y,y:0,width:16,model:K,categories:Te,parcatsViewModel:ee,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}F.exports=function(ee,K,Y,$){n(Y,ee,$,K)}},45784:function(F,L,e){var T=e(45460);F.exports=function(b,a,_,g){var h=b._fullLayout,o=h._paper,t=h._size;T(b,o,a,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},_,g)}},73362:function(F,L,e){var T=e(50693),b=e(13838),a=e(41940),_=e(27670).Y,g=e(1426).extendFlat,h=e(44467).templatedArray;F.exports={domain:_({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:a({editType:"plot"}),tickfont:a({editType:"plot"}),rangefont:a({editType:"plot"}),dimensions:h("dimension",{label:{valType:"string",editType:"plot"},tickvals:g({},b.tickvals,{editType:"plot"}),ticktext:g({},b.ticktext,{editType:"plot"}),tickformat:g({},b.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:g({editType:"calc"},T("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(F,L,e){var T=e(25706),b=e(39898),a=e(28984).keyFun,_=e(28984).repeat,g=e(71828).sorterAsc,h=e(71828).strTranslate,o=T.bar.snapRatio;function t(A,k){return A*(1-o)+k*o}var i=T.bar.snapClose;function n(A,k){return A*(1-i)+k*i}function r(A,k,C,P){if(function(re,ee){for(var K=0;K<ee.length;K++)if(re>=ee[K][0]&&re<=ee[K][1])return!0;return!1}(C,P))return C;var R=A?-1:1,O=0,X=k.length-1;if(R<0){var D=O;O=X,X=D}for(var V=k[O],j=V,B=O;R*B<R*X;B+=R){var W=B+R,q=k[W];if(R*C<R*n(V,q))return t(V,j);if(R*C<R*q||W===X)return t(q,V);j=V,V=q}}function s(A){A.attr("x",-T.bar.captureWidth/2).attr("width",T.bar.captureWidth)}function l(A){A.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(A){if(!A.brush.filterSpecified)return"0,"+A.height;for(var k,C,P,R=d(A.brush.filter.getConsolidated(),A.height),O=[0],X=R.length?R[0][0]:null,D=0;D<R.length;D++)C=(k=R[D])[1]-k[0],O.push(X),O.push(C),(P=D+1)<R.length&&(X=R[P][0]-k[1]);return O.push(A.height),O}function d(A,k){return A.map(function(C){return C.map(function(P){return Math.max(0,P*k)}).sort(g)})}function c(){b.select(document.body).style("cursor",null)}function w(A){A.attr("stroke-dasharray",u)}function m(A,k){var C=b.select(A).selectAll(".highlight, .highlight-shadow");w(k?C.transition().duration(T.bar.snapDuration).each("end",k):C)}function f(A,k){var C,P=A.brush,R=NaN,O={};if(P.filterSpecified){var X=A.height,D=P.filter.getConsolidated(),V=d(D,X),j=NaN,B=NaN,W=NaN;for(C=0;C<=V.length;C++){var q=V[C];if(q&&q[0]<=k&&k<=q[1]){j=C;break}if(B=C?C-1:NaN,q&&q[0]>k){W=C;break}}if(R=j,isNaN(R)&&(R=isNaN(B)||isNaN(W)?isNaN(B)?W:B:k-V[B][1]<V[W][0]-k?B:W),!isNaN(R)){var re=V[R],ee=function(ne,ae){var se=T.bar.handleHeight;if(!(ae>ne[1]+se||ae<ne[0]-se))return ae>=.9*ne[1]+.1*ne[0]?"n":ae<=.9*ne[0]+.1*ne[1]?"s":"ns"}(re,k);ee&&(O.interval=D[R],O.intervalPix=re,O.region=ee)}}if(A.ordinal&&!O.region){var K=A.unitTickvals,Y=A.unitToPaddedPx.invert(k);for(C=0;C<K.length;C++){var $=[.25*K[Math.max(C-1,0)]+.75*K[C],.25*K[Math.min(C+1,K.length-1)]+.75*K[C]];if(Y>=$[0]&&Y<=$[1]){O.clickableOrdinalRange=$;break}}}return O}function x(A,k){b.event.sourceEvent.stopPropagation();var C=k.height-b.mouse(A)[1]-2*T.verticalPadding,P=k.brush.svgBrush;P.wasDragged=!0,P._dragging=!0,P.grabbingBar?P.newExtent=[C-P.grabPoint,C+P.barLength-P.grabPoint].map(k.unitToPaddedPx.invert):P.newExtent=[P.startExtent,k.unitToPaddedPx.invert(C)].sort(g),k.brush.filterSpecified=!0,P.extent=P.stayingIntervals.concat([P.newExtent]),P.brushCallback(k),m(A.parentNode)}function y(A,k){var C=f(k,k.height-b.mouse(A)[1]-2*T.verticalPadding),P="crosshair";C.clickableOrdinalRange?P="pointer":C.region&&(P=C.region+"-resize"),b.select(document.body).style("cursor",P)}function v(A){A.on("mousemove",function(k){b.event.preventDefault(),k.parent.inBrushDrag||y(this,k)}).on("mouseleave",function(k){k.parent.inBrushDrag||c()}).call(b.behavior.drag().on("dragstart",function(k){(function(C,P){b.event.sourceEvent.stopPropagation();var R=P.height-b.mouse(C)[1]-2*T.verticalPadding,O=P.unitToPaddedPx.invert(R),X=P.brush,D=f(P,R),V=D.interval,j=X.svgBrush;if(j.wasDragged=!1,j.grabbingBar=D.region==="ns",j.grabbingBar){var B=V.map(P.unitToPaddedPx);j.grabPoint=R-B[0]-T.verticalPadding,j.barLength=B[1]-B[0]}j.clickableOrdinalRange=D.clickableOrdinalRange,j.stayingIntervals=P.multiselect&&X.filterSpecified?X.filter.getConsolidated():[],V&&(j.stayingIntervals=j.stayingIntervals.filter(function(W){return W[0]!==V[0]&&W[1]!==V[1]})),j.startExtent=D.region?V[D.region==="s"?1:0]:O,P.parent.inBrushDrag=!0,j.brushStartCallback()})(this,k)}).on("drag",function(k){x(this,k)}).on("dragend",function(k){(function(C,P){var R=P.brush,O=R.filter,X=R.svgBrush;X._dragging||(y(C,P),x(C,P),P.brush.svgBrush.wasDragged=!1),X._dragging=!1,b.event.sourceEvent.stopPropagation();var D=X.grabbingBar;if(X.grabbingBar=!1,X.grabLocation=void 0,P.parent.inBrushDrag=!1,c(),!X.wasDragged)return X.wasDragged=void 0,X.clickableOrdinalRange?R.filterSpecified&&P.multiselect?X.extent.push(X.clickableOrdinalRange):(X.extent=[X.clickableOrdinalRange],R.filterSpecified=!0):D?(X.extent=X.stayingIntervals,X.extent.length===0&&p(R)):p(R),X.brushCallback(P),m(C.parentNode),void X.brushEndCallback(R.filterSpecified?O.getConsolidated():[]);var V=function(){O.set(O.getConsolidated())};if(P.ordinal){var j=P.unitTickvals;j[j.length-1]<j[0]&&j.reverse(),X.newExtent=[r(0,j,X.newExtent[0],X.stayingIntervals),r(1,j,X.newExtent[1],X.stayingIntervals)];var B=X.newExtent[1]>X.newExtent[0];X.extent=X.stayingIntervals.concat(B?[X.newExtent]:[]),X.extent.length||p(R),X.brushCallback(P),B?m(C.parentNode,V):(V(),m(C.parentNode))}else V();X.brushEndCallback(R.filterSpecified?O.getConsolidated():[])})(this,k)}))}function M(A,k){return A[0]-k[0]}function p(A){A.filterSpecified=!1,A.svgBrush.extent=[[-1/0,1/0]]}function S(A){for(var k,C=A.slice(),P=[],R=C.shift();R;){for(k=R.slice();(R=C.shift())&&R[0]<=k[1];)k[1]=Math.max(k[1],R[1]);P.push(k)}return P.length===1&&P[0][0]>P[0][1]&&(P=[]),P}F.exports={makeBrush:function(A,k,C,P,R,O){var X,D=function(){var V,j,B=[];return{set:function(W){(B=W.map(function(q){return q.slice().sort(g)}).sort(M)).length===1&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),V=S(B),j=B.reduce(function(q,re){return[Math.min(q[0],re[0]),Math.max(q[1],re[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return V},getBounds:function(){return j}}}();return D.set(C),{filter:D,filterSpecified:k,svgBrush:{extent:[],brushStartCallback:P,brushCallback:(X=R,function(V){var j=V.brush,B=function(q){return q.svgBrush.extent.map(function(re){return re.slice()})}(j),W=B.slice();j.filter.set(W),X()}),brushEndCallback:O}}},ensureAxisBrush:function(A,k,C){var P=A.selectAll("."+T.cn.axisBrush).data(_,a);P.enter().append("g").classed(T.cn.axisBrush,!0),function(R,O,X){var D=X._context.staticPlot,V=R.selectAll(".background").data(_);V.enter().append("rect").classed("background",!0).call(s).call(l).style("pointer-events",D?"none":"auto").attr("transform",h(0,T.verticalPadding)),V.call(v).attr("height",function(W){return W.height-T.verticalPadding});var j=R.selectAll(".highlight-shadow").data(_);j.enter().append("line").classed("highlight-shadow",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width+T.bar.strokeWidth).attr("stroke",O).attr("opacity",T.bar.strokeOpacity).attr("stroke-linecap","butt"),j.attr("y1",function(W){return W.height}).call(w);var B=R.selectAll(".highlight").data(_);B.enter().append("line").classed("highlight",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width-T.bar.strokeWidth).attr("stroke",T.bar.fillColor).attr("opacity",T.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(W){return W.height}).call(w)}(P,k,C)},cleanRanges:function(A,k){if(Array.isArray(A[0])?(A=A.map(function(P){return P.sort(g)}),A=k.multiselect?S(A.sort(M)):[A[0]]):A=[A.sort(g)],k.tickvals){var C=k.tickvals.slice().sort(g);if(!(A=A.map(function(P){var R=[r(0,C,P[0],[]),r(1,C,P[1],[])];if(R[1]>R[0])return R}).filter(function(P){return P})).length)return}return A.length>1?A:A[0]}}},71791:function(F,L,e){F.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(F,L,e){var T=e(39898),b=e(27659).a0,a=e(21341),_=e(77922);L.name="parcoords",L.plot=function(g){var h=b(g.calcdata,"parcoords")[0];h.length&&a(g,h)},L.clean=function(g,h,o,t){var i=t._has&&t._has("parcoords"),n=h._has&&h._has("parcoords");i&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},L.toSVG=function(g){var h=g._fullLayout._glimages,o=T.select(g).selectAll(".svg-container");o.filter(function(t,i){return i===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");h.append("svg:image").attr({xmlns:_.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){T.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(F,L,e){var T=e(71828).isArrayOrTypedArray,b=e(21081),a=e(28984).wrap;F.exports=function(_,g){var h,o;return b.hasColorscale(g,"line")&&T(g.line.color)?(h=g.line.color,o=b.extractOpts(g.line).colorscale,b.calc(_,g,{vals:h,containerStr:"line",cLetter:"c"})):(h=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=.5;return i}(g._length),o=[[0,g.line.color],[1,g.line.color]]),a({lineColor:h,cscale:o})}},25706:function(F){F.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(F,L,e){var T=e(71828),b=e(52075).hasColorscale,a=e(1586),_=e(27670).c,g=e(85501),h=e(89298),o=e(73362),t=e(57920),i=e(25706).maxDimensionCount,n=e(94397);function r(s,l,u,d){function c(y,v){return T.coerce(s,l,o.dimensions,y,v)}var w=c("values"),m=c("visible");if(w&&w.length||(m=l.visible=!1),m){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var f=c("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:f},h.setConvert(l._ax,d.layout),c("multiselect");var x=c("constraintrange");x&&(l.constraintrange=t.cleanRanges(x,l))}}F.exports=function(s,l,u,d){function c(y,v){return T.coerce(s,l,o,y,v)}var w=s.dimensions;Array.isArray(w)&&w.length>i&&(T.log("parcoords traces support up to "+i+" dimensions at the moment"),w.splice(i));var m=g(s,l,{name:"dimensions",layout:d,handleItemDefaults:r}),f=function(y,v,M,p,S){var A=S("line.color",M);if(b(y,"line")&&T.isArrayOrTypedArray(A)){if(A.length)return S("line.colorscale"),a(y,v,p,S,{prefix:"line.",cLetter:"c"}),A.length;v.line.color=M}return 1/0}(s,l,u,d,c);_(l,d,c),Array.isArray(m)&&m.length||(l.visible=!1),n(l,m,"values",f);var x={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};T.coerceFont(c,"labelfont",x),T.coerceFont(c,"tickfont",x),T.coerceFont(c,"rangefont",x),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},1602:function(F,L,e){var T=e(71828).isTypedArray;L.convertTypedArray=function(b){return T(b)?Array.prototype.slice.call(b):b},L.isOrdinal=function(b){return!!b.tickvals},L.isVisible=function(b){return b.visible||!("visible"in b)}},67618:function(F,L,e){var T=e(71791);T.plot=e(21341),F.exports=T},83398:function(F,L,e){var T=e(56068),b=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),a=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),_=e(25706).maxDimensionCount,g=e(71828),h=1e-6,o=new Uint8Array(4),t=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(f,x,y,v,M){var p=f._gl;p.enable(p.SCISSOR_TEST),p.scissor(x,y,v,M),f.clear({color:[0,0,0,0],depth:1})}function r(f,x,y,v,M,p){var S=p.key;y.drawCompleted||(function(A){A.read({x:0,y:0,width:1,height:1,data:o})}(f),y.drawCompleted=!0),function A(k){var C=Math.min(v,M-k*v);k===0&&(window.cancelAnimationFrame(y.currentRafs[S]),delete y.currentRafs[S],n(f,p.scissorX,p.scissorY,p.scissorWidth,p.viewBoxSize[1])),y.clearOnly||(p.count=2*C,p.offset=2*k*v,x(p),k*v+C<M&&(y.currentRafs[S]=window.requestAnimationFrame(function(){A(k+1)})),y.drawCompleted=!1)}(0)}function s(f,x){for(var y=new Array(256),v=0;v<256;v++)y[v]=f(v/255).concat(x);return y}function l(f,x){return(f>>>8*x)%256/255}function u(f,x,y){for(var v=new Array(8*x),M=0,p=0;p<x;p++)for(var S=0;S<2;S++)for(var A=0;A<4;A++){var k=4*f+A,C=y[64*p+k];k===63&&S===0&&(C*=-1),v[M++]=C}return v}function d(f){var x="0"+f;return x.substr(x.length-2)}function c(f){return f<_?"p"+d(f+1)+"_"+d(f+4):"colors"}function w(f,x,y,v,M,p,S,A,k,C,P,R,O,X){for(var D=[[],[]],V=0;V<64;V++)D[0][V]=V===M?1:0,D[1][V]=V===p?1:0;S*=X,A*=X,k*=X,C*=X;var j=f.lines.canvasOverdrag*X,B=f.domain,W=f.canvasWidth*X,q=f.canvasHeight*X,re=f.pad.l*X,ee=f.pad.b*X,K=f.layoutHeight*X,Y=f.layoutWidth*X,$=f.deselectedLines.color,ne=f.deselectedLines.opacity;return g.extendFlat({key:P,resolution:[W,q],viewBoxPos:[S+j,A],viewBoxSize:[k,C],i0:M,i1:p,dim0A:D[0].slice(0,16),dim0B:D[0].slice(16,32),dim0C:D[0].slice(32,48),dim0D:D[0].slice(48,64),dim1A:D[1].slice(0,16),dim1B:D[1].slice(16,32),dim1C:D[1].slice(32,48),dim1D:D[1].slice(48,64),drwLayer:R,contextColor:[$[0]/255,$[1]/255,$[2]/255,ne!=="auto"?$[3]*ne:Math.max(.00392156862745098,Math.pow(1/f.lines.color.length,.3333333333333333))],scissorX:(v===x?0:S+j)+(re-j)+Y*B.x[0],scissorWidth:(v===y?W-S+j:k+.5)+(v===x?S+j:0),scissorY:A+ee+K*B.y[0],scissorHeight:C,viewportX:re-j+Y*B.x[0],viewportY:ee+K*B.y[0],viewportWidth:W,viewportHeight:q},O)}function m(f){var x=2047,y=Math.max(0,Math.floor(f[0]*x),0),v=Math.min(x,Math.ceil(f[1]*x),x);return[Math.min(y,v),Math.max(y,v)]}F.exports=function(f,x){var y,v,M,p,S,A=x.context,k=x.pick,C=x.regl,P=C._gl,R=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(R[0],Math.min(R[1],x.viewModel.plotGlPixelRatio)),X={currentRafs:{},drawCompleted:!0,clearOnly:!1},D=function(q){for(var re={},ee=0;ee<=_;ee+=4)re[c(ee)]=q.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return re}(C),V=C.texture(i),j=[];W(x);var B=C({profile:!1,blend:{enable:A,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!A,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:b,frag:a,primitive:"lines",lineWidth:O,attributes:D,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:V,contextColor:C.prop("contextColor"),maskTexture:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});function W(q){y=q.model,v=q.viewModel,M=v.dimensions.slice(),p=M[0]?M[0].values.length:0;var re=y.lines,ee=k?re.color.map(function(Y,$){return $/re.color.length}):re.color,K=function(Y,$,ne){for(var ae,se=new Array(Y*(_+4)),ce=0,me=0;me<Y;me++){for(var ye=0;ye<_;ye++)se[ce++]=ye<$.length?$[ye].paddedUnitValues[me]:.5;se[ce++]=l(me,2),se[ce++]=l(me,1),se[ce++]=l(me,0),se[ce++]=(ae=ne[me],Math.max(h,Math.min(.999999,ae)))}return se}(p,M,ee);(function(Y,$,ne){for(var ae=0;ae<=_;ae+=4)Y[c(ae)](u(ae/4,$,ne))})(D,p,K),A||k||(V=C.texture(g.extendFlat({data:s(y.unitToColor,255)},i)))}return{render:function(q,re,ee){var K,Y,$,ne=q.length,ae=1/0,se=-1/0;for(K=0;K<ne;K++)q[K].dim0.canvasX<ae&&(ae=q[K].dim0.canvasX,Y=K),q[K].dim1.canvasX>se&&(se=q[K].dim1.canvasX,$=K);ne===0&&n(C,0,0,y.canvasWidth,y.canvasHeight);var ce=function(ue){var le,ie,ge,Ae=[[],[]];for(ge=0;ge<64;ge++){var we=!ue&&ge<M.length?M[ge].brush.filter.getBounds():[-1/0,1/0];Ae[0][ge]=we[0],Ae[1][ge]=we[1]}var Ne=new Array(16384);for(le=0;le<16384;le++)Ne[le]=255;if(!ue)for(le=0;le<M.length;le++){var He=le%8,de=(le-He)/8,Le=Math.pow(2,He),Ee=M[le].brush.filter.get();if(!(Ee.length<2)){var Re=m(Ee[0])[1];for(ie=1;ie<Ee.length;ie++){var je=m(Ee[ie]);for(ge=Re+1;ge<je[0];ge++)Ne[8*ge+de]&=~Le;Re=Math.max(Re,je[1])}}}var Fe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ne};return S?S(Fe):S=C.texture(Fe),{maskTexture:S,maskHeight:2048,loA:Ae[0].slice(0,16),loB:Ae[0].slice(16,32),loC:Ae[0].slice(32,48),loD:Ae[0].slice(48,64),hiA:Ae[1].slice(0,16),hiB:Ae[1].slice(16,32),hiC:Ae[1].slice(32,48),hiD:Ae[1].slice(48,64)}}(A);for(K=0;K<ne;K++){var me=q[K],ye=me.dim0.crossfilterDimensionIndex,Te=me.dim1.crossfilterDimensionIndex,Ce=me.canvasX,pe=me.canvasY,fe=Ce+me.panelSizeX,Oe=me.plotGlPixelRatio;if(re||!j[ye]||j[ye][0]!==Ce||j[ye][1]!==fe){j[ye]=[Ce,fe];var Se=w(y,Y,$,K,ye,Te,Ce,pe,me.panelSizeX,me.panelSizeY,me.dim0.crossfilterDimensionIndex,A?0:k?2:1,ce,Oe);X.clearOnly=ee;var Me=re?y.lines.blockLineCount:p;r(C,B,X,Me,p,Se)}}},readPixel:function(q,re){return C.read({x:q,y:re,width:1,height:1,data:t}),t},readPixels:function(q,re,ee,K){var Y=new Uint8Array(4*ee*K);return C.read({x:q,y:re,width:ee,height:K,data:Y}),Y},destroy:function(){for(var q in f.style["pointer-events"]="none",V.destroy(),S&&S.destroy(),D)D[q].destroy()},update:W}}},94397:function(F){F.exports=function(L,e,T,b){var a,_;for(b||(b=1/0),a=0;a<e.length;a++)(_=e[a]).visible&&(b=Math.min(b,_[T].length));for(b===1/0&&(b=0),L._length=b,a=0;a<e.length;a++)(_=e[a]).visible&&(_._length=b);return b}},17171:function(F,L,e){var T=e(39898),b=e(71828),a=b.numberFormat,_=e(36652),g=e(89298),h=b.strRotate,o=b.strTranslate,t=e(63893),i=e(91424),n=e(21081),r=e(28984),s=r.keyFun,l=r.repeat,u=r.unwrap,d=e(1602),c=e(25706),w=e(57920),m=e(83398);function f(V,j,B){return b.aggNums(V,null,j,B)}function x(V,j){return v(f(Math.min,V,j),f(Math.max,V,j))}function y(V){var j=V.range;return j?v(j[0],j[1]):x(V.values,V._length)}function v(V,j){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(j)&&isFinite(j)||(j=0),V===j&&(V===0?(V-=1,j+=1):(V*=.9,j*=1.1)),[V,j]}function M(V,j,B,W,q){var re,ee,K=y(B);return W?T.scale.ordinal().domain(W.map((re=a(B.tickformat),ee=q,ee?function(Y,$){var ne=ee[$];return ne??re(Y)}:re))).range(W.map(function(Y){var $=(Y-K[0])/(K[1]-K[0]);return V-j+$*(2*j-V)})):T.scale.linear().domain(K).range([V-j,j])}function p(V){if(V.tickvals){var j=y(V);return T.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(B){return(B-j[0])/(j[1]-j[0])}))}}function S(V){var j=V.map(function(q){return q[0]}),B=V.map(function(q){var re=_(q[1]);return T.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),W="rgb".split("").map(function(q){return T.scale.linear().clamp(!0).domain(j).range(B.map((re=q,function(ee){return ee[re]})));var re});return function(q){return W.map(function(re){return re(q)})}}function A(V){return V.dimensions.some(function(j){return j.brush.filterSpecified})}function k(V,j,B){var W=u(j),q=W.trace,re=d.convertTypedArray(W.lineColor),ee=q.line,K={color:_(q.unselected.line.color),opacity:q.unselected.line.opacity},Y=n.extractOpts(ee),$=Y.reversescale?n.flipScale(W.cscale):W.cscale,ne=q.domain,ae=q.dimensions,se=V.width,ce=q.labelangle,me=q.labelside,ye=q.labelfont,Te=q.tickfont,Ce=q.rangefont,pe=b.extendDeepNoArrays({},ee,{color:re.map(T.scale.linear().domain(y({values:re,range:[Y.min,Y.max],_length:q._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),fe=Math.floor(se*(ne.x[1]-ne.x[0])),Oe=Math.floor(V.height*(ne.y[1]-ne.y[0])),Se=V.margin||{l:80,r:80,t:100,b:80},Me=fe,ue=Oe;return{key:B,colCount:ae.filter(d.isVisible).length,dimensions:ae,tickDistance:c.tickDistance,unitToColor:S($),lines:pe,deselectedLines:K,labelAngle:ce,labelSide:me,labelFont:ye,tickFont:Te,rangeFont:Ce,layoutWidth:se,layoutHeight:V.height,domain:ne,translateX:ne.x[0]*se,translateY:V.height-ne.y[1]*V.height,pad:Se,canvasWidth:Me*c.canvasPixelRatio+2*pe.canvasOverdrag,canvasHeight:ue*c.canvasPixelRatio,width:Me,height:ue,canvasPixelRatio:c.canvasPixelRatio}}function C(V,j,B){var W=B.width,q=B.height,re=B.dimensions,ee=B.canvasPixelRatio,K=function(se){return W*se/Math.max(1,B.colCount-1)},Y=c.verticalPadding/q,$=function(se,ce){return T.scale.linear().range([ce,se-ce])}(q,c.verticalPadding),ne={key:B.key,xScale:K,model:B,inBrushDrag:!1},ae={};return ne.dimensions=re.filter(d.isVisible).map(function(se,ce){var me=function(we,Ne){return T.scale.linear().domain(y(we)).range([Ne,1-Ne])}(se,Y),ye=ae[se.label];ae[se.label]=(ye||0)+1;var Te=se.label+(ye?"__"+ye:""),Ce=se.constraintrange,pe=Ce&&Ce.length;pe&&!Array.isArray(Ce[0])&&(Ce=[Ce]);var fe=pe?Ce.map(function(we){return we.map(me)}):[[-1/0,1/0]],Oe=se.values;Oe.length>se._length&&(Oe=Oe.slice(0,se._length));var Se,Me=se.tickvals;function ue(we,Ne){return{val:we,text:Se[Ne]}}function le(we,Ne){return we.val-Ne.val}if(Array.isArray(Me)&&Me.length){Se=se.ticktext,Array.isArray(Se)&&Se.length?Se.length>Me.length?Se=Se.slice(0,Me.length):Me.length>Se.length&&(Me=Me.slice(0,Se.length)):Se=Me.map(a(se.tickformat));for(var ie=1;ie<Me.length;ie++)if(Me[ie]<Me[ie-1]){for(var ge=Me.map(ue).sort(le),Ae=0;Ae<Me.length;Ae++)Me[Ae]=ge[Ae].val,Se[Ae]=ge[Ae].text;break}}else Me=void 0;return Oe=d.convertTypedArray(Oe),{key:Te,label:se.label,tickFormat:se.tickformat,tickvals:Me,ticktext:Se,ordinal:d.isOrdinal(se),multiselect:se.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:se._index,height:q,values:Oe,paddedUnitValues:Oe.map(me),unitTickvals:Me&&Me.map(me),xScale:K,x:K(ce),canvasX:K(ce)*ee,unitToPaddedPx:$,domainScale:M(q,c.verticalPadding,se,Me,Se),ordinalScale:p(se),parent:ne,model:B,brush:w.makeBrush(V,pe,fe,function(){V.linePickActive(!1)},function(){var we=ne;we.focusLayer&&we.focusLayer.render(we.panels,!0);var Ne=A(we);!V.contextShown()&&Ne?(we.contextLayer&&we.contextLayer.render(we.panels,!0),V.contextShown(!0)):V.contextShown()&&!Ne&&(we.contextLayer&&we.contextLayer.render(we.panels,!0,!0),V.contextShown(!1))},function(we){if(ne.focusLayer.render(ne.panels,!0),ne.pickLayer&&ne.pickLayer.render(ne.panels,!0),V.linePickActive(!0),j&&j.filterChanged){var Ne=me.invert,He=we.map(function(de){return de.map(Ne).sort(b.sorterAsc)}).sort(function(de,Le){return de[0]-Le[0]});j.filterChanged(ne.key,se._index,He)}})}}),ne}function P(V){V.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(V,j){var B=j==="top"?1:-1,W=V*Math.PI/180;return{dir:B,dx:Math.sin(W),dy:Math.cos(W),degrees:V}}function O(V,j,B){for(var W=j.panels||(j.panels=[]),q=V.data(),re=0;re<q.length-1;re++){var ee=W[re]||(W[re]={}),K=q[re],Y=q[re+1];ee.dim0=K,ee.dim1=Y,ee.canvasX=K.canvasX,ee.panelSizeX=Y.canvasX-K.canvasX,ee.panelSizeY=j.model.canvasHeight,ee.y=0,ee.canvasY=0,ee.plotGlPixelRatio=B}}function X(V,j){return g.tickText(V._ax,j,!1).text}function D(V,j){if(V.ordinal)return"";var B=V.domainScale.domain(),W=B[j?B.length-1:0];return X(V.model.dimensions[V.visibleIndex],W)}F.exports=function(V,j,B,W){var q=V._context.staticPlot,re=V._fullLayout,ee=re._toppaper,K=re._glcontainer,Y=V._context.plotGlPixelRatio,$=V._fullLayout.paper_bgcolor;(function(we){for(var Ne=0;Ne<we.length;Ne++)for(var He=0;He<we[Ne].length;He++)for(var de=we[Ne][He].trace,Le=de.dimensions,Ee=0;Ee<Le.length;Ee++){var Re=Le[Ee].values,je=Le[Ee]._ax;je&&(je.range?je.range=v(je.range[0],je.range[1]):je.range=x(Re,de._length),je.dtick||(je.dtick=.01*(Math.abs(je.range[1]-je.range[0])||1)),je.tickformat=Le[Ee].tickformat,g.calcTicks(je),je.cleanRange())}})(j);var ne,ae,se=(ne=!0,ae=!1,{linePickActive:function(we){return arguments.length?ne=!!we:ne},contextShown:function(we){return arguments.length?ae=!!we:ae}}),ce=j.filter(function(we){return u(we).trace.visible}).map(k.bind(0,B)).map(C.bind(0,se,W));K.each(function(we,Ne){return b.extendFlat(we,ce[Ne])});var me=K.selectAll(".gl-canvas").each(function(we){we.viewModel=ce[0],we.viewModel.plotGlPixelRatio=Y,we.viewModel.paperColor=$,we.model=we.viewModel?we.viewModel.model:null}),ye=null;me.filter(function(we){return we.pick}).style("pointer-events",q?"none":"auto").on("mousemove",function(we){if(se.linePickActive()&&we.lineLayer&&W&&W.hover){var Ne=T.event,He=this.width,de=this.height,Le=T.mouse(this),Ee=Le[0],Re=Le[1];if(Ee<0||Re<0||Ee>=He||Re>=de)return;var je=we.lineLayer.readPixel(Ee,de-1-Re),Fe=je[3]!==0,Xe=Fe?je[2]+256*(je[1]+256*je[0]):null,Ze={x:Ee,y:Re,clientX:Ne.clientX,clientY:Ne.clientY,dataIndex:we.model.key,curveNumber:Xe};Xe!==ye&&(Fe?W.hover(Ze):W.unhover&&W.unhover(Ze),ye=Xe)}}),me.style("opacity",function(we){return we.pick?0:1}),ee.style("background","rgba(255, 255, 255, 0)");var Te=ee.selectAll("."+c.cn.parcoords).data(ce,s);Te.exit().remove(),Te.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),Te.attr("transform",function(we){return o(we.model.translateX,we.model.translateY)});var Ce=Te.selectAll("."+c.cn.parcoordsControlView).data(l,s);Ce.enter().append("g").classed(c.cn.parcoordsControlView,!0),Ce.attr("transform",function(we){return o(we.model.pad.l,we.model.pad.t)});var pe=Ce.selectAll("."+c.cn.yAxis).data(function(we){return we.dimensions},s);pe.enter().append("g").classed(c.cn.yAxis,!0),Ce.each(function(we){O(pe,we,Y)}),me.each(function(we){if(we.viewModel){!we.lineLayer||W?we.lineLayer=m(this,we):we.lineLayer.update(we),(we.key||we.key===0)&&(we.viewModel[we.key]=we.lineLayer);var Ne=!we.context||W;we.lineLayer.render(we.viewModel.panels,Ne)}}),pe.attr("transform",function(we){return o(we.xScale(we.xIndex),0)}),pe.call(T.behavior.drag().origin(function(we){return we}).on("drag",function(we){var Ne=we.parent;se.linePickActive(!1),we.x=Math.max(-c.overdrag,Math.min(we.model.width+c.overdrag,T.event.x)),we.canvasX=we.x*we.model.canvasPixelRatio,pe.sort(function(He,de){return He.x-de.x}).each(function(He,de){He.xIndex=de,He.x=we===He?He.x:He.xScale(He.xIndex),He.canvasX=He.x*He.model.canvasPixelRatio}),O(pe,Ne,Y),pe.filter(function(He){return Math.abs(we.xIndex-He.xIndex)!==0}).attr("transform",function(He){return o(He.xScale(He.xIndex),0)}),T.select(this).attr("transform",o(we.x,0)),pe.each(function(He,de,Le){Le===we.parent.key&&(Ne.dimensions[de]=He)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!A(Ne)),Ne.focusLayer.render&&Ne.focusLayer.render(Ne.panels)}).on("dragend",function(we){var Ne=we.parent;we.x=we.xScale(we.xIndex),we.canvasX=we.x*we.model.canvasPixelRatio,O(pe,Ne,Y),T.select(this).attr("transform",function(He){return o(He.x,0)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!A(Ne)),Ne.focusLayer&&Ne.focusLayer.render(Ne.panels),Ne.pickLayer&&Ne.pickLayer.render(Ne.panels,!0),se.linePickActive(!0),W&&W.axesMoved&&W.axesMoved(Ne.key,Ne.dimensions.map(function(He){return He.crossfilterDimensionIndex}))})),pe.exit().remove();var fe=pe.selectAll("."+c.cn.axisOverlays).data(l,s);fe.enter().append("g").classed(c.cn.axisOverlays,!0),fe.selectAll("."+c.cn.axis).remove();var Oe=fe.selectAll("."+c.cn.axis).data(l,s);Oe.enter().append("g").classed(c.cn.axis,!0),Oe.each(function(we){var Ne=we.model.height/we.model.tickDistance,He=we.domainScale,de=He.domain();T.select(this).call(T.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ne,we.tickFormat).tickValues(we.ordinal?de:null).tickFormat(function(Le){return d.isOrdinal(we)?Le:X(we.model.dimensions[we.visibleIndex],Le)}).scale(He)),i.font(Oe.selectAll("text"),we.model.tickFont)}),Oe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Oe.selectAll("text").style("text-shadow",t.makeTextShadow($)).style("cursor","default");var Se=fe.selectAll("."+c.cn.axisHeading).data(l,s);Se.enter().append("g").classed(c.cn.axisHeading,!0);var Me=Se.selectAll("."+c.cn.axisTitle).data(l,s);Me.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",q?"none":"auto"),Me.text(function(we){return we.label}).each(function(we){var Ne=T.select(this);i.font(Ne,we.model.labelFont),t.convertToTspans(Ne,V)}).attr("transform",function(we){var Ne=R(we.model.labelAngle,we.model.labelSide),He=c.axisTitleOffset;return(Ne.dir>0?"":o(0,2*He+we.model.height))+h(Ne.degrees)+o(-He*Ne.dx,-He*Ne.dy)}).attr("text-anchor",function(we){var Ne=R(we.model.labelAngle,we.model.labelSide);return 2*Math.abs(Ne.dx)>Math.abs(Ne.dy)?Ne.dir*Ne.dx<0?"start":"end":"middle"});var ue=fe.selectAll("."+c.cn.axisExtent).data(l,s);ue.enter().append("g").classed(c.cn.axisExtent,!0);var le=ue.selectAll("."+c.cn.axisExtentTop).data(l,s);le.enter().append("g").classed(c.cn.axisExtentTop,!0),le.attr("transform",o(0,-c.axisExtentOffset));var ie=le.selectAll("."+c.cn.axisExtentTopText).data(l,s);ie.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(P),ie.text(function(we){return D(we,!0)}).each(function(we){i.font(T.select(this),we.model.rangeFont)});var ge=ue.selectAll("."+c.cn.axisExtentBottom).data(l,s);ge.enter().append("g").classed(c.cn.axisExtentBottom,!0),ge.attr("transform",function(we){return o(0,we.model.height+c.axisExtentOffset)});var Ae=ge.selectAll("."+c.cn.axisExtentBottomText).data(l,s);Ae.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),Ae.text(function(we){return D(we,!1)}).each(function(we){i.font(T.select(this),we.model.rangeFont)}),w.ensureAxisBrush(fe,$,V)}},21341:function(F,L,e){var T=e(17171),b=e(79749),a=e(1602).isVisible,_={};function g(h,o,t){var i=o.indexOf(t),n=h.indexOf(i);return n===-1&&(n+=o.length),n}(F.exports=function(h,o){var t=h._fullLayout;if(b(h,[],_)){var i={},n={},r={},s={},l=t._size;o.forEach(function(u,d){var c=u[0].trace;r[d]=c.index;var w=s[d]=c._fullInput.index;i[d]=h.data[w].dimensions,n[d]=h.data[w].dimensions.slice()}),T(h,o,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,d,c){var w=n[u][d],m=c.map(function(p){return p.slice()}),f="dimensions["+d+"].constraintrange",x=t._tracePreGUI[h._fullData[r[u]]._fullInput.uid];if(x[f]===void 0){var y=w.constraintrange;x[f]=y||null}var v=h._fullData[r[u]].dimensions[d];m.length?(m.length===1&&(m=m[0]),w.constraintrange=m,v.constraintrange=m.slice(),m=[m]):(delete w.constraintrange,delete v.constraintrange,m=null);var M={};M[f]=m,h.emit("plotly_restyle",[M,[s[u]]])},hover:function(u){h.emit("plotly_hover",u)},unhover:function(u){h.emit("plotly_unhover",u)},axesMoved:function(u,d){var c=function(w,m){return function(f,x){return g(w,m,f)-g(w,m,x)}}(d,n[u].filter(a));i[u].sort(c),n[u].filter(function(w){return!a(w)}).sort(function(w){return n[u].indexOf(w)}).forEach(function(w){i[u].splice(i[u].indexOf(w),1),i[u].splice(n[u].indexOf(w),0,w)}),h.emit("plotly_restyle",[{dimensions:[i[u]]},[s[u]]])}})}}).reglPrecompiled=_},34e3:function(F,L,e){var T=e(9012),b=e(27670).Y,a=e(41940),_=e(22399),g=e(5386).fF,h=e(5386).si,o=e(1426).extendFlat,t=e(79952).u,i=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});F.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:o({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:g({},{keys:["label","color","value","percent","text"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:o({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:o({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:b({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:o({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(F,L,e){var T=e(74875);L.name="pie",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},32354:function(F,L,e){var T=e(92770),b=e(84267),a=e(7901),_={};function g(o){return function(t,i){return!!t&&!!(t=b(t)).isValid()&&(t=a.addOpacity(t,t.getAlpha()),o[i]||(o[i]=t),t)}}function h(o,t){var i,n=JSON.stringify(o),r=t[n];if(!r){for(r=o.slice(),i=0;i<o.length;i++)r.push(b(o[i]).lighten(20).toHexString());for(i=0;i<o.length;i++)r.push(b(o[i]).darken(20).toHexString());t[n]=r}return r}F.exports={calc:function(o,t){var i,n,r=[],s=o._fullLayout,l=s.hiddenlabels||[],u=t.labels,d=t.marker.colors||[],c=t.values,w=t._length,m=t._hasValues&&w;if(t.dlabel)for(u=new Array(w),i=0;i<w;i++)u[i]=String(t.label0+i*t.dlabel);var f={},x=g(s["_"+t.type+"colormap"]),y=0,v=!1;for(i=0;i<w;i++){var M,p,S;if(m){if(M=c[i],!T(M))continue;M=+M}else M=1;(p=u[i])!==void 0&&p!==""||(p=i);var A=f[p=String(p)];A===void 0?(f[p]=r.length,(S=l.indexOf(p)!==-1)||(y+=M),r.push({v:M,label:p,color:x(d[i],p),i,pts:[i],hidden:S})):(v=!0,(n=r[A]).v+=M,n.pts.push(i),n.hidden||(y+=M),n.color===!1&&d[i]&&(n.color=x(d[i],p)))}return r=r.filter(function(k){return k.v>=0}),(t.type==="funnelarea"?v:t.sort)&&r.sort(function(k,C){return C.v-k.v}),r[0]&&(r[0].vTotal=y),r},crossTraceCalc:function(o,t){var i=(t||{}).type;i||(i="pie");var n=o._fullLayout,r=o.calcdata,s=n[i+"colorway"],l=n["_"+i+"colormap"];n["extend"+i+"colors"]&&(s=h(s,_));for(var u=0,d=0;d<r.length;d++){var c=r[d];if(c[0].trace.type===i)for(var w=0;w<c.length;w++){var m=c[w];m.color===!1&&(l[m.label]?m.color=l[m.label]:(l[m.label]=m.color=s[u%s.length],u++))}}},makePullColorFn:g,generateExtendedColors:h}},37434:function(F,L,e){var T=e(92770),b=e(71828),a=e(34e3),_=e(27670).c,g=e(90769).handleText,h=e(71828).coercePattern;function o(i,n){var r=Array.isArray(i),s=b.isArrayOrTypedArray(n),l=Math.min(r?i.length:1/0,s?n.length:1/0);if(isFinite(l)||(l=0),l&&s){for(var u,d=0;d<l;d++){var c=n[d];if(T(c)&&c>0){u=!0;break}}u||(l=0)}return{hasLabels:r,hasValues:s,len:l}}function t(i,n,r,s,l){s("marker.line.width")&&s("marker.line.color",l?void 0:r.paper_bgcolor);var u=s("marker.colors");h(s,"marker.pattern",u),i.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=i.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}F.exports={handleLabelsAndValues:o,handleMarkerDefaults:t,supplyDefaults:function(i,n,r,s){function l(v,M){return b.coerce(i,n,a,v,M)}var u=o(l("labels"),l("values")),d=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),d){n._length=d,t(i,n,s,l,!0),l("scalegroup");var c,w=l("text"),m=l("texttemplate");if(m||(c=l("textinfo",Array.isArray(w)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),m||c&&c!=="none"){var f=l("textposition");g(i,n,s,l,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(f)||f==="auto"||f==="outside")&&l("automargin"),(f==="inside"||f==="auto"||Array.isArray(f))&&l("insidetextorientation")}_(n,s,l);var x=l("hole");if(l("title.text")){var y=l("title.position",x?"middle center":"top center");x||y!=="middle center"||(n.title.position="top center"),b.coerceFont(l,"title.font",s.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},20007:function(F,L,e){var T=e(23469).appendArrayMultiPointValues;F.exports=function(b,a){var _={curveNumber:a.index,pointNumbers:b.pts,data:a._input,fullData:a,label:b.label,color:b.color,value:b.v,percent:b.percent,text:b.text,bbox:b.bbox,v:b.v};return b.pts.length===1&&(_.pointNumber=_.i=b.pts[0]),T(_,a,b.pts),a.type==="funnelarea"&&(delete _.v,delete _.i),_}},22209:function(F,L,e){var T=e(91424),b=e(7901);F.exports=function(a,_,g,h){var o=g.marker.pattern;o&&o.shape?T.pointStyle(a,g,h,_):b.fill(a,_.color)}},53581:function(F,L,e){var T=e(71828);function b(a){return a.indexOf("e")!==-1?a.replace(/[.]?0+e/,"e"):a.indexOf(".")!==-1?a.replace(/[.]?0+$/,""):a}L.formatPiePercent=function(a,_){var g=b((100*a).toPrecision(3));return T.numSeparate(g,_)+"%"},L.formatPieValue=function(a,_){var g=b(a.toPrecision(10));return T.numSeparate(g,_)},L.getFirstFilled=function(a,_){if(Array.isArray(a))for(var g=0;g<_.length;g++){var h=a[_[g]];if(h||h===0||h==="")return h}},L.castOption=function(a,_){return Array.isArray(a)?L.getFirstFilled(a,_):a||void 0},L.getRotationAngle=function(a){return(a==="auto"?0:a)*Math.PI/180}},58810:function(F,L,e){F.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(F){F.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(F,L,e){var T=e(71828),b=e(92774);F.exports=function(a,_){function g(h,o){return T.coerce(a,_,b,h,o)}g("hiddenlabels"),g("piecolorway",_.colorway),g("extendpiecolors")}},14575:function(F,L,e){var T=e(39898),b=e(74875),a=e(30211),_=e(7901),g=e(91424),h=e(71828),o=h.strScale,t=h.strTranslate,i=e(63893),n=e(72597),r=n.recordMinTextSize,s=n.clearMinTextSize,l=e(97313).TEXTPAD,u=e(53581),d=e(20007),c=e(71828).isValidTextValue;function w(j,B,W){var q=W[0],re=q.cx,ee=q.cy,K=q.trace,Y=K.type==="funnelarea";"_hasHoverLabel"in K||(K._hasHoverLabel=!1),"_hasHoverEvent"in K||(K._hasHoverEvent=!1),j.on("mouseover",function($){var ne=B._fullLayout,ae=B._fullData[K.index];if(!B._dragging&&ne.hovermode!==!1){var se=ae.hoverinfo;if(Array.isArray(se)&&(se=a.castHoverinfo({hoverinfo:[u.castOption(se,$.pts)],_module:K._module},ne,0)),se==="all"&&(se="label+text+value+percent+name"),ae.hovertemplate||se!=="none"&&se!=="skip"&&se){var ce=$.rInscribed||0,me=re+$.pxmid[0]*(1-ce),ye=ee+$.pxmid[1]*(1-ce),Te=ne.separators,Ce=[];if(se&&se.indexOf("label")!==-1&&Ce.push($.label),$.text=u.castOption(ae.hovertext||ae.text,$.pts),se&&se.indexOf("text")!==-1){var pe=$.text;h.isValidTextValue(pe)&&Ce.push(pe)}$.value=$.v,$.valueLabel=u.formatPieValue($.v,Te),se&&se.indexOf("value")!==-1&&Ce.push($.valueLabel),$.percent=$.v/q.vTotal,$.percentLabel=u.formatPiePercent($.percent,Te),se&&se.indexOf("percent")!==-1&&Ce.push($.percentLabel);var fe=ae.hoverlabel,Oe=fe.font,Se=[];a.loneHover({trace:K,x0:me-ce*q.r,x1:me+ce*q.r,y:ye,_x0:Y?re+$.TL[0]:me-ce*q.r,_x1:Y?re+$.TR[0]:me+ce*q.r,_y0:Y?ee+$.TL[1]:ye-ce*q.r,_y1:Y?ee+$.BL[1]:ye+ce*q.r,text:Ce.join("<br>"),name:ae.hovertemplate||se.indexOf("name")!==-1?ae.name:void 0,idealAlign:$.pxmid[0]<0?"left":"right",color:u.castOption(fe.bgcolor,$.pts)||$.color,borderColor:u.castOption(fe.bordercolor,$.pts),fontFamily:u.castOption(Oe.family,$.pts),fontSize:u.castOption(Oe.size,$.pts),fontColor:u.castOption(Oe.color,$.pts),nameLength:u.castOption(fe.namelength,$.pts),textAlign:u.castOption(fe.align,$.pts),hovertemplate:u.castOption(ae.hovertemplate,$.pts),hovertemplateLabels:$,eventData:[d($,ae)]},{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:B,inOut_bbox:Se}),$.bbox=Se[0],K._hasHoverLabel=!0}K._hasHoverEvent=!0,B.emit("plotly_hover",{points:[d($,ae)],event:T.event})}}),j.on("mouseout",function($){var ne=B._fullLayout,ae=B._fullData[K.index],se=T.select(this).datum();K._hasHoverEvent&&($.originalEvent=T.event,B.emit("plotly_unhover",{points:[d(se,ae)],event:T.event}),K._hasHoverEvent=!1),K._hasHoverLabel&&(a.loneUnhover(ne._hoverlayer.node()),K._hasHoverLabel=!1)}),j.on("click",function($){var ne=B._fullLayout,ae=B._fullData[K.index];B._dragging||ne.hovermode===!1||(B._hoverdata=[d($,ae)],a.click(B,T.event))})}function m(j,B,W){var q=u.castOption(j.insidetextfont.color,B.pts);!q&&j._input.textfont&&(q=u.castOption(j._input.textfont.color,B.pts));var re=u.castOption(j.insidetextfont.family,B.pts)||u.castOption(j.textfont.family,B.pts)||W.family,ee=u.castOption(j.insidetextfont.size,B.pts)||u.castOption(j.textfont.size,B.pts)||W.size;return{color:q||_.contrast(B.color),family:re,size:ee}}function f(j,B){for(var W,q,re=0;re<j.length;re++)if((q=(W=j[re][0]).trace).title.text){var ee=q.title.text;q._meta&&(ee=h.templateString(ee,q._meta));var K=g.tester.append("text").attr("data-notex",1).text(ee).call(g.font,q.title.font).call(i.convertToTspans,B),Y=g.bBox(K.node(),!0);W.titleBox={width:Y.width,height:Y.height},K.remove()}}function x(j,B,W){var q=W.r||B.rpx1,re=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var ee,K=B.ring,Y=K===1&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,$=B.halfangle,ne=B.midangle,ae=W.trace.insidetextorientation,se=ae==="horizontal",ce=ae==="tangential",me=ae==="radial",ye=ae==="auto",Te=[];if(!ye){var Ce,pe=function(le,ie){if(function(Ne,He){var de=Ne.startangle,Le=Ne.stopangle;return de>He&&He>Le||de<He&&He<Le}(B,le)){var ge=Math.abs(le-B.startangle),Ae=Math.abs(le-B.stopangle),we=ge<Ae?ge:Ae;(ee=ie==="tan"?v(j,q,K,we,0):y(j,q,K,we,Math.PI/2)).textPosAngle=le,Te.push(ee)}};if(se||ce){for(Ce=4;Ce>=-4;Ce-=2)pe(Math.PI*Ce,"tan");for(Ce=4;Ce>=-4;Ce-=2)pe(Math.PI*(Ce+1),"tan")}if(se||me){for(Ce=4;Ce>=-4;Ce-=2)pe(Math.PI*(Ce+1.5),"rad");for(Ce=4;Ce>=-4;Ce-=2)pe(Math.PI*(Ce+.5),"rad")}}if(Y||ye||se){var fe=Math.sqrt(j.width*j.width+j.height*j.height);if((ee={scale:re*q*2/fe,rCenter:1-re,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,ee.scale>=1)return ee;Te.push(ee)}(ye||me)&&((ee=y(j,q,K,$,ne)).textPosAngle=(B.startangle+B.stopangle)/2,Te.push(ee)),(ye||ce)&&((ee=v(j,q,K,$,ne)).textPosAngle=(B.startangle+B.stopangle)/2,Te.push(ee));for(var Oe=0,Se=0,Me=0;Me<Te.length;Me++){var ue=Te[Me].scale;if(Se<ue&&(Se=ue,Oe=Me),!ye&&Se>=1)break}return Te[Oe]}function y(j,B,W,q,re){B=Math.max(0,B-2*l);var ee=j.width/j.height,K=S(ee,q,B,W);return{scale:2*K/j.height,rCenter:M(ee,K/B),rotate:p(re)}}function v(j,B,W,q,re){B=Math.max(0,B-2*l);var ee=j.height/j.width,K=S(ee,q,B,W);return{scale:2*K/j.width,rCenter:M(ee,K/B),rotate:p(re+Math.PI/2)}}function M(j,B){return Math.cos(B)-j*B}function p(j){return(180/Math.PI*j+720)%180-90}function S(j,B,W,q){var re=j+1/(2*Math.tan(B));return W*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt(j*j+q/2)+j))}function A(j,B){return j.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(j.halfangle)),j.ring/2):1}function k(j,B){var W=B.pxmid[0],q=B.pxmid[1],re=j.width/2,ee=j.height/2;return W<0&&(re*=-1),q<0&&(ee*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(ee)*(re>0?1:-1)/2,y:ee/(1+W*W/(q*q)),outside:!0}}function C(j,B){var W,q,re,ee=j.trace,K={x:j.cx,y:j.cy},Y={tx:0,ty:0};Y.ty+=ee.title.font.size,re=R(ee),ee.title.position.indexOf("top")!==-1?(K.y-=(1+re)*j.r,Y.ty-=j.titleBox.height):ee.title.position.indexOf("bottom")!==-1&&(K.y+=(1+re)*j.r);var $,ne=j.r/(($=j.trace.aspectratio)===void 0?1:$),ae=B.w*(ee.domain.x[1]-ee.domain.x[0])/2;return ee.title.position.indexOf("left")!==-1?(ae+=ne,K.x-=(1+re)*ne,Y.tx+=j.titleBox.width/2):ee.title.position.indexOf("center")!==-1?ae*=2:ee.title.position.indexOf("right")!==-1&&(ae+=ne,K.x+=(1+re)*ne,Y.tx-=j.titleBox.width/2),W=ae/j.titleBox.width,q=P(j,B)/j.titleBox.height,{x:K.x,y:K.y,scale:Math.min(W,q),tx:Y.tx,ty:Y.ty}}function P(j,B){var W=j.trace,q=B.h*(W.domain.y[1]-W.domain.y[0]);return Math.min(j.titleBox.height,q/2)}function R(j){var B,W=j.pull;if(!W)return 0;if(Array.isArray(W))for(W=0,B=0;B<j.pull.length;B++)j.pull[B]>W&&(W=j.pull[B]);return W}function O(j,B){for(var W=[],q=0;q<j.length;q++){var re=j[q][0],ee=re.trace,K=ee.domain,Y=B.w*(K.x[1]-K.x[0]),$=B.h*(K.y[1]-K.y[0]);ee.title.text&&ee.title.position!=="middle center"&&($-=P(re,B));var ne=Y/2,ae=$/2;ee.type!=="funnelarea"||ee.scalegroup||(ae/=ee.aspectratio),re.r=Math.min(ne,ae)/(1+R(ee)),re.cx=B.l+B.w*(ee.domain.x[1]+ee.domain.x[0])/2,re.cy=B.t+B.h*(1-ee.domain.y[0])-$/2,ee.title.text&&ee.title.position.indexOf("bottom")!==-1&&(re.cy-=P(re,B)),ee.scalegroup&&W.indexOf(ee.scalegroup)===-1&&W.push(ee.scalegroup)}(function(se,ce){for(var me,ye,Te,Ce=0;Ce<ce.length;Ce++){var pe=1/0,fe=ce[Ce];for(ye=0;ye<se.length;ye++)if((Te=(me=se[ye][0]).trace).scalegroup===fe){var Oe;if(Te.type==="pie")Oe=me.r*me.r;else if(Te.type==="funnelarea"){var Se,Me;Te.aspectratio>1?Me=(Se=me.r)/Te.aspectratio:Se=(Me=me.r)*Te.aspectratio,Oe=(Se*=(1+Te.baseratio)/2)*Me}pe=Math.min(pe,Oe/me.vTotal)}for(ye=0;ye<se.length;ye++)if((Te=(me=se[ye][0]).trace).scalegroup===fe){var ue=pe*me.vTotal;Te.type==="funnelarea"&&(ue/=(1+Te.baseratio)/2,ue/=Te.aspectratio),me.r=Math.sqrt(ue)}}})(j,W)}function X(j,B){return[j*Math.sin(B),-j*Math.cos(B)]}function D(j,B,W){var q=j._fullLayout,re=W.trace,ee=re.texttemplate,K=re.textinfo;if(!ee&&K&&K!=="none"){var Y,$=K.split("+"),ne=function(Oe){return $.indexOf(Oe)!==-1},ae=ne("label"),se=ne("text"),ce=ne("value"),me=ne("percent"),ye=q.separators;if(Y=ae?[B.label]:[],se){var Te=u.getFirstFilled(re.text,B.pts);c(Te)&&Y.push(Te)}ce&&Y.push(u.formatPieValue(B.v,ye)),me&&Y.push(u.formatPiePercent(B.v/W.vTotal,ye)),B.text=Y.join("<br>")}if(ee){var Ce=h.castOption(re,B.i,"texttemplate");if(Ce){var pe=function(Oe){return{label:Oe.label,value:Oe.v,valueLabel:u.formatPieValue(Oe.v,q.separators),percent:Oe.v/W.vTotal,percentLabel:u.formatPiePercent(Oe.v/W.vTotal,q.separators),color:Oe.color,text:Oe.text,customdata:h.castOption(re,Oe.i,"customdata")}}(B),fe=u.getFirstFilled(re.text,B.pts);(c(fe)||fe==="")&&(pe.text=fe),B.text=h.texttemplateString(Ce,pe,j._fullLayout._d3locale,pe,re._meta||{})}else B.text=""}}function V(j,B){var W=j.rotate*Math.PI/180,q=Math.cos(W),re=Math.sin(W),ee=(B.left+B.right)/2,K=(B.top+B.bottom)/2;j.textX=ee*q-K*re,j.textY=ee*re+K*q,j.noCenter=!0}F.exports={plot:function(j,B){var W=j._context.staticPlot,q=j._fullLayout,re=q._size;s("pie",q),f(B,j),O(B,re);var ee=h.makeTraceGroups(q._pielayer,B,"trace").each(function(K){var Y=T.select(this),$=K[0],ne=$.trace;(function(ae){var se,ce,me,ye=ae[0],Te=ye.r,Ce=ye.trace,pe=u.getRotationAngle(Ce.rotation),fe=2*Math.PI/ye.vTotal,Oe="px0",Se="px1";if(Ce.direction==="counterclockwise"){for(se=0;se<ae.length&&ae[se].hidden;se++);if(se===ae.length)return;pe+=fe*ae[se].v,fe*=-1,Oe="px1",Se="px0"}for(me=X(Te,pe),se=0;se<ae.length;se++)(ce=ae[se]).hidden||(ce[Oe]=me,ce.startangle=pe,pe+=fe*ce.v/2,ce.pxmid=X(Te,pe),ce.midangle=pe,me=X(Te,pe+=fe*ce.v/2),ce.stopangle=pe,ce[Se]=me,ce.largeArc=ce.v>ye.vTotal/2?1:0,ce.halfangle=Math.PI*Math.min(ce.v/ye.vTotal,.5),ce.ring=1-Ce.hole,ce.rInscribed=A(ce,ye))})(K),Y.attr("stroke-linejoin","round"),Y.each(function(){var ae=T.select(this).selectAll("g.slice").data(K);ae.enter().append("g").classed("slice",!0),ae.exit().remove();var se=[[[],[]],[[],[]]],ce=!1;ae.each(function(Se,Me){if(Se.hidden)T.select(this).selectAll("path,g").remove();else{Se.pointNumber=Se.i,Se.curveNumber=ne.index,se[Se.pxmid[1]<0?0:1][Se.pxmid[0]<0?0:1].push(Se);var ue=$.cx,le=$.cy,ie=T.select(this),ge=ie.selectAll("path.surface").data([Se]);if(ge.enter().append("path").classed("surface",!0).style({"pointer-events":W?"none":"all"}),ie.call(w,j,K),ne.pull){var Ae=+u.castOption(ne.pull,Se.pts)||0;Ae>0&&(ue+=Ae*Se.pxmid[0],le+=Ae*Se.pxmid[1])}Se.cxFinal=ue,Se.cyFinal=le;var we=ne.hole;if(Se.v===$.vTotal){var Ne="M"+(ue+Se.px0[0])+","+(le+Se.px0[1])+Re(Se.px0,Se.pxmid,!0,1)+Re(Se.pxmid,Se.px0,!0,1)+"Z";we?ge.attr("d","M"+(ue+we*Se.px0[0])+","+(le+we*Se.px0[1])+Re(Se.px0,Se.pxmid,!1,we)+Re(Se.pxmid,Se.px0,!1,we)+"Z"+Ne):ge.attr("d",Ne)}else{var He=Re(Se.px0,Se.px1,!0,1);if(we){var de=1-we;ge.attr("d","M"+(ue+we*Se.px1[0])+","+(le+we*Se.px1[1])+Re(Se.px1,Se.px0,!1,we)+"l"+de*Se.px0[0]+","+de*Se.px0[1]+He+"Z")}else ge.attr("d","M"+ue+","+le+"l"+Se.px0[0]+","+Se.px0[1]+He+"Z")}D(j,Se,$);var Le=u.castOption(ne.textposition,Se.pts),Ee=ie.selectAll("g.slicetext").data(Se.text&&Le!=="none"?[0]:[]);Ee.enter().append("g").classed("slicetext",!0),Ee.exit().remove(),Ee.each(function(){var je=h.ensureSingle(T.select(this),"text","",function(wt){wt.attr("data-notex",1)}),Fe=h.ensureUniformFontSize(j,Le==="outside"?function(wt,ht,ct){return{color:u.castOption(wt.outsidetextfont.color,ht.pts)||u.castOption(wt.textfont.color,ht.pts)||ct.color,family:u.castOption(wt.outsidetextfont.family,ht.pts)||u.castOption(wt.textfont.family,ht.pts)||ct.family,size:u.castOption(wt.outsidetextfont.size,ht.pts)||u.castOption(wt.textfont.size,ht.pts)||ct.size}}(ne,Se,q.font):m(ne,Se,q.font));je.text(Se.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(g.font,Fe).call(i.convertToTspans,j);var Xe,Ze=g.bBox(je.node());if(Le==="outside")Xe=k(Ze,Se);else if(Xe=x(Ze,Se,$),Le==="auto"&&Xe.scale<1){var at=h.ensureUniformFontSize(j,ne.outsidetextfont);je.call(g.font,at),Xe=k(Ze=g.bBox(je.node()),Se)}var lt=Xe.textPosAngle,ot=lt===void 0?Se.pxmid:X($.r,lt);if(Xe.targetX=ue+ot[0]*Xe.rCenter+(Xe.x||0),Xe.targetY=le+ot[1]*Xe.rCenter+(Xe.y||0),V(Xe,Ze),Xe.outside){var bt=Xe.targetY;Se.yLabelMin=bt-Ze.height/2,Se.yLabelMid=bt,Se.yLabelMax=bt+Ze.height/2,Se.labelExtraX=0,Se.labelExtraY=0,ce=!0}Xe.fontSize=Fe.size,r(ne.type,Xe,q),K[Me].transform=Xe,h.setTransormAndDisplay(je,Xe)})}function Re(je,Fe,Xe,Ze){var at=Ze*(Fe[0]-je[0]),lt=Ze*(Fe[1]-je[1]);return"a"+Ze*$.r+","+Ze*$.r+" 0 "+Se.largeArc+(Xe?" 1 ":" 0 ")+at+","+lt}});var me=T.select(this).selectAll("g.titletext").data(ne.title.text?[0]:[]);if(me.enter().append("g").classed("titletext",!0),me.exit().remove(),me.each(function(){var Se,Me=h.ensureSingle(T.select(this),"text","",function(le){le.attr("data-notex",1)}),ue=ne.title.text;ne._meta&&(ue=h.templateString(ue,ne._meta)),Me.text(ue).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(g.font,ne.title.font).call(i.convertToTspans,j),Se=ne.title.position==="middle center"?function(le){var ie=Math.sqrt(le.titleBox.width*le.titleBox.width+le.titleBox.height*le.titleBox.height);return{x:le.cx,y:le.cy,scale:le.trace.hole*le.r*2/ie,tx:0,ty:-le.titleBox.height/2+le.trace.title.font.size}}($):C($,re),Me.attr("transform",t(Se.x,Se.y)+o(Math.min(1,Se.scale))+t(Se.tx,Se.ty))}),ce&&function(Se,Me){var ue,le,ie,ge,Ae,we,Ne,He,de,Le,Ee,Re,je;function Fe(lt,ot){return lt.pxmid[1]-ot.pxmid[1]}function Xe(lt,ot){return ot.pxmid[1]-lt.pxmid[1]}function Ze(lt,ot){ot||(ot={});var bt,wt,ht,ct,Tt=ot.labelExtraY+(le?ot.yLabelMax:ot.yLabelMin),Lt=le?lt.yLabelMin:lt.yLabelMax,kt=le?lt.yLabelMax:lt.yLabelMin,Ot=lt.cyFinal+Ae(lt.px0[1],lt.px1[1]),Pt=Tt-Lt;if(Pt*Ne>0&&(lt.labelExtraY=Pt),Array.isArray(Me.pull))for(wt=0;wt<Le.length;wt++)(ht=Le[wt])===lt||(u.castOption(Me.pull,lt.pts)||0)>=(u.castOption(Me.pull,ht.pts)||0)||((lt.pxmid[1]-ht.pxmid[1])*Ne>0?(Pt=ht.cyFinal+Ae(ht.px0[1],ht.px1[1])-Lt-lt.labelExtraY)*Ne>0&&(lt.labelExtraY+=Pt):(kt+lt.labelExtraY-Ot)*Ne>0&&(bt=3*we*Math.abs(wt-Le.indexOf(lt)),(ct=ht.cxFinal+ge(ht.px0[0],ht.px1[0])+bt-(lt.cxFinal+lt.pxmid[0])-lt.labelExtraX)*we>0&&(lt.labelExtraX+=ct)))}for(le=0;le<2;le++)for(ie=le?Fe:Xe,Ae=le?Math.max:Math.min,Ne=le?1:-1,ue=0;ue<2;ue++){for(ge=ue?Math.max:Math.min,we=ue?1:-1,(He=Se[le][ue]).sort(ie),de=Se[1-le][ue],Le=de.concat(He),Re=[],Ee=0;Ee<He.length;Ee++)He[Ee].yLabelMid!==void 0&&Re.push(He[Ee]);for(je=!1,Ee=0;le&&Ee<de.length;Ee++)if(de[Ee].yLabelMid!==void 0){je=de[Ee];break}for(Ee=0;Ee<Re.length;Ee++){var at=Ee&&Re[Ee-1];je&&!Ee&&(at=je),Ze(Re[Ee],at)}}}(se,ne),function(Se,Me){Se.each(function(ue){var le=T.select(this);if(ue.labelExtraX||ue.labelExtraY){var ie=le.select("g.slicetext text");ue.transform.targetX+=ue.labelExtraX,ue.transform.targetY+=ue.labelExtraY,h.setTransormAndDisplay(ie,ue.transform);var ge=ue.cxFinal+ue.pxmid[0],Ae="M"+ge+","+(ue.cyFinal+ue.pxmid[1]),we=(ue.yLabelMax-ue.yLabelMin)*(ue.pxmid[0]<0?-1:1)/4;if(ue.labelExtraX){var Ne=ue.labelExtraX*ue.pxmid[1]/ue.pxmid[0],He=ue.yLabelMid+ue.labelExtraY-(ue.cyFinal+ue.pxmid[1]);Math.abs(Ne)>Math.abs(He)?Ae+="l"+He*ue.pxmid[0]/ue.pxmid[1]+","+He+"H"+(ge+ue.labelExtraX+we):Ae+="l"+ue.labelExtraX+","+Ne+"v"+(He-Ne)+"h"+we}else Ae+="V"+(ue.yLabelMid+ue.labelExtraY)+"h"+we;h.ensureSingle(le,"path","textline").call(_.stroke,Me.outsidetextfont.color).attr({"stroke-width":Math.min(2,Me.outsidetextfont.size/8),d:Ae,fill:"none"})}else le.select("path.textline").remove()})}(ae,ne),ce&&ne.automargin){var ye=g.bBox(Y.node()),Te=ne.domain,Ce=re.w*(Te.x[1]-Te.x[0]),pe=re.h*(Te.y[1]-Te.y[0]),fe=(.5*Ce-$.r)/re.w,Oe=(.5*pe-$.r)/re.h;b.autoMargin(j,"pie."+ne.uid+".automargin",{xl:Te.x[0]-fe,xr:Te.x[1]+fe,yb:Te.y[0]-Oe,yt:Te.y[1]+Oe,l:Math.max($.cx-$.r-ye.left,0),r:Math.max(ye.right-($.cx+$.r),0),b:Math.max(ye.bottom-($.cy+$.r),0),t:Math.max($.cy-$.r-ye.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var K=T.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)},formatSliceLabel:D,transformInsideText:x,determineInsideTextFont:m,positionTitleOutside:C,prerenderTitles:f,layoutAreas:O,attachFxHandlers:w,computeTransform:V}},68357:function(F,L,e){var T=e(39898),b=e(63463),a=e(72597).resizeText;F.exports=function(_){var g=_._fullLayout._pielayer.selectAll(".trace");a(_,g,"pie"),g.each(function(h){var o=h[0].trace,t=T.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){T.select(this).call(b,i,o,_)})})}},63463:function(F,L,e){var T=e(7901),b=e(53581).castOption,a=e(22209);F.exports=function(_,g,h,o){var t=h.marker.line,i=b(t.color,g.pts)||T.defaultLine,n=b(t.width,g.pts)||0;_.call(a,g,h,o).style("stroke-width",n).call(T.stroke,i)}},10959:function(F,L,e){var T=e(82196);F.exports={x:T.x,y:T.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:T.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(F,L,e){var T=e(9330).gl_pointcloud2d,b=e(78614),a=e(71739).findExtremes,_=e(34603);function g(o,t){this.scene=o,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=T(o.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var h=g.prototype;h.handlePick=function(o){var t=this.idToIndex[o.pointId];return{trace:this,dataCoord:o.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},h.update=function(o){this.index=o.index,this.textLabels=o.text,this.name=o.name,this.hoverinfo=o.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(o),this.color=_(o,{})},h.updateFast=function(o){var t,i,n,r,s,l,u=this.xData=this.pickXData=o.x,d=this.yData=this.pickYData=o.y,c=this.pickXYData=o.xy,w=o.xbounds&&o.ybounds,m=o.indices,f=this.bounds;if(c){if(n=c,t=c.length>>>1,w)f[0]=o.xbounds[0],f[2]=o.xbounds[1],f[1]=o.ybounds[0],f[3]=o.ybounds[1];else for(l=0;l<t;l++)r=n[2*l],s=n[2*l+1],r<f[0]&&(f[0]=r),r>f[2]&&(f[2]=r),s<f[1]&&(f[1]=s),s>f[3]&&(f[3]=s);if(m)i=m;else for(i=new Int32Array(t),l=0;l<t;l++)i[l]=l}else for(t=u.length,n=new Float32Array(2*t),i=new Int32Array(t),l=0;l<t;l++)r=u[l],s=d[l],i[l]=l,n[2*l]=r,n[2*l+1]=s,r<f[0]&&(f[0]=r),r>f[2]&&(f[2]=r),s<f[1]&&(f[1]=s),s>f[3]&&(f[3]=s);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=n;var x=b(o.marker.color),y=b(o.marker.border.color),v=o.opacity*o.marker.opacity;x[3]*=v,this.pointcloudOptions.color=x;var M=o.marker.blend;M===null&&(M=u.length<100||d.length<100),this.pointcloudOptions.blend=M,y[3]*=v,this.pointcloudOptions.borderColor=y;var p=o.marker.sizemin,S=Math.max(o.marker.sizemax,o.marker.sizemin);this.pointcloudOptions.sizeMin=p,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=o.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var A=this.scene.xaxis,k=this.scene.yaxis,C=S/2||.5;o._extremes[A._id]=a(A,[f[0],f[2]],{ppad:C}),o._extremes[k._id]=a(k,[f[1],f[3]],{ppad:C})},h.dispose=function(){this.pointcloud.dispose()},F.exports=function(o,t){var i=new g(o,t.uid);return i.update(t),i}},33876:function(F,L,e){var T=e(71828),b=e(10959);F.exports=function(a,_,g){function h(o,t){return T.coerce(a,_,b,o,t)}h("x"),h("y"),h("xbounds"),h("ybounds"),a.xy&&a.xy instanceof Float32Array&&(_.xy=a.xy),a.indices&&a.indices instanceof Int32Array&&(_.indices=a.indices),h("text"),h("marker.color",g),h("marker.opacity"),h("marker.blend"),h("marker.sizemin"),h("marker.sizemax"),h("marker.border.color",g),h("marker.border.arearatio"),_._length=null}},20593:function(F,L,e){F.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(F,L,e){var T=e(41940),b=e(9012),a=e(22399),_=e(77914),g=e(27670).Y,h=e(5386).fF,o=e(50693),t=e(44467).templatedArray,i=e(12663).descriptionOnlyNumbers,n=e(1426).extendFlat,r=e(30962).overrideAll;(F.exports=r({hoverinfo:n({},b.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:_.hoverlabel,domain:g({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:T({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:h({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(o().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(F,L,e){var T=e(30962).overrideAll,b=e(27659).a0,a=e(60436),_=e(528),g=e(6964),h=e(28569),o=e(47322).prepSelect,t=e(71828),i=e(73972),n="sankey";function r(s,l){var u=s._fullData[l],d=s._fullLayout,c=d.dragmode,w=d.dragmode==="pan"?"move":"crosshair",m=u._bgRect;if(m&&c!=="pan"&&c!=="zoom"){g(m,w);var f={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},x={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},y={gd:s,element:m.node(),plotinfo:{id:l,xaxis:f,yaxis:x,fillRangeItems:t.noop},subplot:l,xaxes:[f],yaxes:[x],doneFnCompleted:function(v){var M,p=s._fullData[l],S=p.node.groups.slice(),A=[];function k(O){for(var X=p._sankey.graph.nodes,D=0;D<X.length;D++)if(X[D].pointNumber===O)return X[D]}for(var C=0;C<v.length;C++){var P=k(v[C].pointNumber);if(P)if(P.group){for(var R=0;R<P.childrenNodes.length;R++)A.push(P.childrenNodes[R].pointNumber);S[P.pointNumber-p.node._count]=!1}else A.push(P.pointNumber)}M=S.filter(Boolean).concat([A]),i.call("_guiRestyle",s,{"node.groups":[M]},l)},prepFn:function(v,M,p){o(v,M,p,y,c)}};h.init(y)}}L.name=n,L.baseLayoutAttrOverrides=T({hoverlabel:_.hoverlabel},"plot","nested"),L.plot=function(s){var l=b(s.calcdata,n)[0];a(s,l),L.updateFx(s)},L.clean=function(s,l,u,d){var c=d._has&&d._has(n),w=l._has&&l._has(n);c&&!w&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},L.updateFx=function(s){for(var l=0;l<s._fullData.length;l++)r(s,l)}},92930:function(F,L,e){var T=e(68664),b=e(71828),a=e(28984).wrap,_=b.isArrayOrTypedArray,g=b.isIndex,h=e(21081);F.exports=function(o,t){var i=function(n){var r,s=n.node,l=n.link,u=[],d=_(l.color),c=_(l.customdata),w={},m={},f=l.colorscales.length;for(r=0;r<f;r++){var x=l.colorscales[r],y=h.extractScale(x,{cLetter:"c"}),v=h.makeColorScaleFunc(y);m[x.label]=v}var M=0;for(r=0;r<l.value.length;r++)l.source[r]>M&&(M=l.source[r]),l.target[r]>M&&(M=l.target[r]);var p,S=M+1;n.node._count=S;var A=n.node.groups,k={};for(r=0;r<A.length;r++){var C=A[r];for(p=0;p<C.length;p++){var P=C[p],R=S+r;k.hasOwnProperty(P)?b.warn("Node "+P+" is already part of a group."):k[P]=R}}var O={source:[],target:[]};for(r=0;r<l.value.length;r++){var X=l.value[r],D=l.source[r],V=l.target[r];if(X>0&&g(D,S)&&g(V,S)&&(!k.hasOwnProperty(D)||!k.hasOwnProperty(V)||k[D]!==k[V])){k.hasOwnProperty(V)&&(V=k[V]),k.hasOwnProperty(D)&&(D=k[D]),V=+V,w[D=+D]=w[V]=!0;var j="";l.label&&l.label[r]&&(j=l.label[r]);var B=null;j&&m.hasOwnProperty(j)&&(B=m[j]),u.push({pointNumber:r,label:j,color:d?l.color[r]:l.color,customdata:c?l.customdata[r]:l.customdata,concentrationscale:B,source:D,target:V,value:+X}),O.source.push(D),O.target.push(V)}}var W=S+A.length,q=_(s.color),re=_(s.customdata),ee=[];for(r=0;r<W;r++)if(w[r]){var K=s.label[r];ee.push({group:r>S-1,childrenNodes:[],pointNumber:r,label:K,color:q?s.color[r]:s.color,customdata:re?s.customdata[r]:s.customdata})}var Y=!1;return function($,ne,ae){for(var se=b.init2dArray($,0),ce=0;ce<Math.min(ne.length,ae.length);ce++)if(b.isIndex(ne[ce],$)&&b.isIndex(ae[ce],$)){if(ne[ce]===ae[ce])return!0;se[ne[ce]].push(ae[ce])}return T(se).components.some(function(me){return me.length>1})}(W,O.source,O.target)&&(Y=!0),{circular:Y,links:u,nodes:ee,groups:A,groupLookup:k}}(t);return a({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},85247:function(F){F.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(F,L,e){var T=e(71828),b=e(39953),a=e(7901),_=e(84267),g=e(27670).c,h=e(38048),o=e(44467),t=e(85501);function i(n,r){function s(l,u){return T.coerce(n,r,b.link.colorscales,l,u)}s("label"),s("cmin"),s("cmax"),s("colorscale")}F.exports=function(n,r,s,l){function u(S,A){return T.coerce(n,r,b,S,A)}var d=T.extendDeep(l.hoverlabel,n.hoverlabel),c=n.node,w=o.newContainer(r,"node");function m(S,A){return T.coerce(c,w,b.node,S,A)}m("label"),m("groups"),m("x"),m("y"),m("pad"),m("thickness"),m("line.color"),m("line.width"),m("hoverinfo",n.hoverinfo),h(c,w,m,d),m("hovertemplate");var f=l.colorway;m("color",w.label.map(function(S,A){return a.addOpacity(function(k){return f[k%f.length]}(A),.8)})),m("customdata");var x=n.link||{},y=o.newContainer(r,"link");function v(S,A){return T.coerce(x,y,b.link,S,A)}v("label"),v("arrowlen"),v("source"),v("target"),v("value"),v("line.color"),v("line.width"),v("hoverinfo",n.hoverinfo),h(x,y,v,d),v("hovertemplate");var M,p=_(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";v("color",T.repeat(p,y.value.length)),v("customdata"),t(x,y,{name:"colorscales",handleItemDefaults:i}),g(r,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),w.x.length&&w.y.length&&(M="freeform"),u("arrangement",M),T.coerceFont(u,"textfont",T.extendFlat({},l.font)),r._length=null}},29396:function(F,L,e){F.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function(F,L,e){var T=e(39898),b=e(71828),a=b.numberFormat,_=e(3393),g=e(30211),h=e(7901),o=e(85247).cn,t=b._;function i(x){return x!==""}function n(x,y){return x.filter(function(v){return v.key===y.traceId})}function r(x,y){T.select(x).select("path").style("fill-opacity",y),T.select(x).select("rect").style("fill-opacity",y)}function s(x){T.select(x).select("text.name").style("fill","black")}function l(x){return function(y){return x.node.sourceLinks.indexOf(y.link)!==-1||x.node.targetLinks.indexOf(y.link)!==-1}}function u(x){return function(y){return y.node.sourceLinks.indexOf(x.link)!==-1||y.node.targetLinks.indexOf(x.link)!==-1}}function d(x,y,v){y&&v&&n(v,y).selectAll("."+o.sankeyLink).filter(l(y)).call(w.bind(0,y,v,!1))}function c(x,y,v){y&&v&&n(v,y).selectAll("."+o.sankeyLink).filter(l(y)).call(m.bind(0,y,v,!1))}function w(x,y,v,M){var p=M.datum().link.label;M.style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),p&&n(y,x).selectAll("."+o.sankeyLink).filter(function(S){return S.link.label===p}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),v&&n(y,x).selectAll("."+o.sankeyNode).filter(u(x)).call(d)}function m(x,y,v,M){var p=M.datum().link.label;M.style("fill-opacity",function(S){return S.tinyColorAlpha}),p&&n(y,x).selectAll("."+o.sankeyLink).filter(function(S){return S.link.label===p}).style("fill-opacity",function(S){return S.tinyColorAlpha}),v&&n(y,x).selectAll(o.sankeyNode).filter(u(x)).call(c)}function f(x,y){var v=x.hoverlabel||{},M=b.nestedProperty(v,y).get();return!Array.isArray(M)&&M}F.exports=function(x,y){for(var v=x._fullLayout,M=v._paper,p=v._size,S=0;S<x._fullData.length;S++)if(x._fullData[S].visible&&x._fullData[S].type===o.sankey&&!x._fullData[S]._viewInitial){var A=x._fullData[S].node;x._fullData[S]._viewInitial={node:{groups:A.groups.slice(),x:A.x.slice(),y:A.y.slice()}}}var k=t(x,"source:")+" ",C=t(x,"target:")+" ",P=t(x,"concentration:")+" ",R=t(x,"incoming flow count:")+" ",O=t(x,"outgoing flow count:")+" ";_(x,M,y,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{linkEvents:{hover:function(X,D,V){x._fullLayout.hovermode!==!1&&(T.select(X).call(w.bind(0,D,V,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,x.emit("plotly_hover",{event:T.event,points:[D.link]})))},follow:function(X,D){if(x._fullLayout.hovermode!==!1){var V=D.link.trace.link;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){for(var j=[],B=0,W=0;W<D.flow.links.length;W++){var q=D.flow.links[W];if(x._fullLayout.hovermode!=="closest"||D.link.pointNumber===q.pointNumber){D.link.pointNumber===q.pointNumber&&(B=W),q.fullData=q.trace,V=D.link.trace.link;var re=K(q),ee={valueLabel:a(D.valueFormat)(q.value)+D.valueSuffix};j.push({x:re[0],y:re[1],name:ee.valueLabel,text:[q.label||"",k+q.source.label,C+q.target.label,q.concentrationscale?P+a("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:f(V,"bgcolor")||h.addOpacity(q.color,1),borderColor:f(V,"bordercolor"),fontFamily:f(V,"font.family"),fontSize:f(V,"font.size"),fontColor:f(V,"font.color"),nameLength:f(V,"namelength"),textAlign:f(V,"align"),idealAlign:T.event.x<re[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:ee,eventData:[q]})}}g.loneHover(j,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:x,anchorIndex:B}).each(function(){D.link.concentrationscale||r(this,.65),s(this)})}}function K(Y){var $,ne;Y.circular?($=(Y.circularPathData.leftInnerExtent+Y.circularPathData.rightInnerExtent)/2,ne=Y.circularPathData.verticalFullExtent):($=(Y.source.x1+Y.target.x0)/2,ne=(Y.y0+Y.y1)/2);var ae=[$,ne];return Y.trace.orientation==="v"&&ae.reverse(),ae[0]+=D.parent.translateX,ae[1]+=D.parent.translateY,ae}},unhover:function(X,D,V){x._fullLayout.hovermode!==!1&&(T.select(X).call(m.bind(0,D,V,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,x.emit("plotly_unhover",{event:T.event,points:[D.link]})),g.loneUnhover(v._hoverlayer.node()))},select:function(X,D){var V=D.link;V.originalEvent=T.event,x._hoverdata=[V],g.click(x,{target:!0})}},nodeEvents:{hover:function(X,D,V){x._fullLayout.hovermode!==!1&&(T.select(X).call(d,D,V),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,x.emit("plotly_hover",{event:T.event,points:[D.node]})))},follow:function(X,D){if(x._fullLayout.hovermode!==!1){var V=D.node.trace.node;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){var j=T.select(X).select("."+o.nodeRect),B=x._fullLayout._paperdiv.node().getBoundingClientRect(),W=j.node().getBoundingClientRect(),q=W.left-2-B.left,re=W.right+2-B.left,ee=W.top+W.height/4-B.top,K={valueLabel:a(D.valueFormat)(D.node.value)+D.valueSuffix};D.node.fullData=D.node.trace,x._fullLayout._calcInverseTransform(x);var Y=x._fullLayout._invScaleX,$=x._fullLayout._invScaleY,ne=g.loneHover({x0:Y*q,x1:Y*re,y:$*ee,name:a(D.valueFormat)(D.node.value)+D.valueSuffix,text:[D.node.label,R+D.node.targetLinks.length,O+D.node.sourceLinks.length].filter(i).join("<br>"),color:f(V,"bgcolor")||D.tinyColorHue,borderColor:f(V,"bordercolor"),fontFamily:f(V,"font.family"),fontSize:f(V,"font.size"),fontColor:f(V,"font.color"),nameLength:f(V,"namelength"),textAlign:f(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:K,eventData:[D.node]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:x});r(ne,.85),s(ne)}}},unhover:function(X,D,V){x._fullLayout.hovermode!==!1&&(T.select(X).call(c,D,V),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,x.emit("plotly_unhover",{event:T.event,points:[D.node]})),g.loneUnhover(v._hoverlayer.node()))},select:function(X,D,V){var j=D.node;j.originalEvent=T.event,x._hoverdata=[j],T.select(X).call(c,D,V),g.click(x,{target:!0})}}})}},3393:function(F,L,e){var T=e(49887),b=e(81684).k4,a=e(39898),_=e(30838),g=e(86781),h=e(85247),o=e(84267),t=e(7901),i=e(91424),n=e(71828),r=n.strTranslate,s=n.strRotate,l=e(28984),u=l.keyFun,d=l.repeat,c=l.unwrap,w=e(63893),m=e(73972),f=e(18783),x=f.CAP_SHIFT,y=f.LINE_SPACING;function v(W,q,re){var ee,K=c(q),Y=K.trace,$=Y.domain,ne=Y.orientation==="h",ae=Y.node.pad,se=Y.node.thickness,ce=W.width*($.x[1]-$.x[0]),me=W.height*($.y[1]-$.y[0]),ye=K._nodes,Te=K._links,Ce=K.circular;(ee=Ce?g.sankeyCircular().circularLinkGap(0):_.sankey()).iterations(h.sankeyIterations).size(ne?[ce,me]:[me,ce]).nodeWidth(se).nodePadding(ae).nodeId(function(we){return we.pointNumber}).nodes(ye).links(Te);var pe,fe,Oe,Se=ee();for(var Me in ee.nodePadding()<ae&&n.warn("node.pad was reduced to ",ee.nodePadding()," to fit within the figure."),K._groupLookup){var ue,le=parseInt(K._groupLookup[Me]);for(pe=0;pe<Se.nodes.length;pe++)if(Se.nodes[pe].pointNumber===le){ue=Se.nodes[pe];break}if(ue){var ie={pointNumber:parseInt(Me),x0:ue.x0,x1:ue.x1,y0:ue.y0,y1:ue.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Se.nodes.unshift(ie),ue.childrenNodes.unshift(ie)}}if(function(){for(pe=0;pe<Se.nodes.length;pe++){var we,Ne,He=Se.nodes[pe],de={};for(fe=0;fe<He.targetLinks.length;fe++)we=(Ne=He.targetLinks[fe]).source.pointNumber+":"+Ne.target.pointNumber,de.hasOwnProperty(we)||(de[we]=[]),de[we].push(Ne);var Le=Object.keys(de);for(fe=0;fe<Le.length;fe++){var Ee=de[we=Le[fe]],Re=0,je={};for(Oe=0;Oe<Ee.length;Oe++)je[(Ne=Ee[Oe]).label]||(je[Ne.label]=0),je[Ne.label]+=Ne.value,Re+=Ne.value;for(Oe=0;Oe<Ee.length;Oe++)(Ne=Ee[Oe]).flow={value:Re,labelConcentration:je[Ne.label]/Re,concentration:Ne.value/Re,links:Ee},Ne.concentrationscale&&(Ne.color=o(Ne.concentrationscale(Ne.flow.labelConcentration)))}var Fe=0;for(fe=0;fe<He.sourceLinks.length;fe++)Fe+=He.sourceLinks[fe].value;for(fe=0;fe<He.sourceLinks.length;fe++)(Ne=He.sourceLinks[fe]).concentrationOut=Ne.value/Fe;var Xe=0;for(fe=0;fe<He.targetLinks.length;fe++)Xe+=He.targetLinks[fe].value;for(fe=0;fe<He.targetLinks.length;fe++)(Ne=He.targetLinks[fe]).concenrationIn=Ne.value/Xe}}(),Y.node.x.length&&Y.node.y.length){for(pe=0;pe<Math.min(Y.node.x.length,Y.node.y.length,Se.nodes.length);pe++)if(Y.node.x[pe]&&Y.node.y[pe]){var ge=[Y.node.x[pe]*ce,Y.node.y[pe]*me];Se.nodes[pe].x0=ge[0]-se/2,Se.nodes[pe].x1=ge[0]+se/2;var Ae=Se.nodes[pe].y1-Se.nodes[pe].y0;Se.nodes[pe].y0=ge[1]-Ae/2,Se.nodes[pe].y1=ge[1]+Ae/2}Y.arrangement==="snap"&&function(we){var Ne,He,de=we.map(function(Fe,Xe){return{x0:Fe.x0,index:Xe}}).sort(function(Fe,Xe){return Fe.x0-Xe.x0}),Le=[],Ee=-1,Re=-1/0;for(pe=0;pe<de.length;pe++){var je=we[de[pe].index];je.x0>Re+se&&(Ee+=1,Ne=je.x0),Re=je.x0,Le[Ee]||(Le[Ee]=[]),Le[Ee].push(je),He=Ne-je.x0,je.x0+=He,je.x1+=He}return Le}(ye=Se.nodes).forEach(function(we){var Ne,He,de,Le=0,Ee=we.length;for(we.sort(function(Re,je){return Re.y0-je.y0}),de=0;de<Ee;++de)(Ne=we[de]).y0>=Le||(He=Le-Ne.y0)>1e-6&&(Ne.y0+=He,Ne.y1+=He),Le=Ne.y1+ae}),ee.update(Se)}return{circular:Ce,key:re,trace:Y,guid:n.randstr(),horizontal:ne,width:ce,height:me,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,linkArrowLength:Y.link.arrowlen,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:$.x[0]*W.width+W.margin.l,translateY:W.height-$.y[1]*W.height+W.margin.t,dragParallel:ne?me:ce,dragPerpendicular:ne?ce:me,arrangement:Y.arrangement,sankey:ee,graph:Se,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function M(W,q,re){var ee=o(q.color),K=q.source.label+"|"+q.target.label+"__"+re;return q.trace=W.trace,q.curveNumber=W.trace.index,{circular:W.circular,key:K,traceId:W.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),linkPath:p,linkLineColor:W.linkLineColor,linkLineWidth:W.linkLineWidth,linkArrowLength:W.linkArrowLength,valueFormat:W.valueFormat,valueSuffix:W.valueSuffix,sankey:W.sankey,parent:W,interactionState:W.interactionState,flow:q.flow}}function p(){return function(W){var q=W.linkArrowLength;if(W.link.circular)return function(fe,Oe){var Se=fe.width/2,Me=fe.circularPathData;return fe.circularLinkType==="top"?"M "+(Me.targetX-Oe)+" "+(Me.targetY+Se)+" L"+(Me.rightInnerExtent-Oe)+" "+(Me.targetY+Se)+"A"+(Me.rightLargeArcRadius+Se)+" "+(Me.rightSmallArcRadius+Se)+" 0 0 1 "+(Me.rightFullExtent-Se-Oe)+" "+(Me.targetY-Me.rightSmallArcRadius)+"L"+(Me.rightFullExtent-Se-Oe)+" "+Me.verticalRightInnerExtent+"A"+(Me.rightLargeArcRadius+Se)+" "+(Me.rightLargeArcRadius+Se)+" 0 0 1 "+(Me.rightInnerExtent-Oe)+" "+(Me.verticalFullExtent-Se)+"L"+Me.leftInnerExtent+" "+(Me.verticalFullExtent-Se)+"A"+(Me.leftLargeArcRadius+Se)+" "+(Me.leftLargeArcRadius+Se)+" 0 0 1 "+(Me.leftFullExtent+Se)+" "+Me.verticalLeftInnerExtent+"L"+(Me.leftFullExtent+Se)+" "+(Me.sourceY-Me.leftSmallArcRadius)+"A"+(Me.leftLargeArcRadius+Se)+" "+(Me.leftSmallArcRadius+Se)+" 0 0 1 "+Me.leftInnerExtent+" "+(Me.sourceY+Se)+"L"+Me.sourceX+" "+(Me.sourceY+Se)+"L"+Me.sourceX+" "+(Me.sourceY-Se)+"L"+Me.leftInnerExtent+" "+(Me.sourceY-Se)+"A"+(Me.leftLargeArcRadius-Se)+" "+(Me.leftSmallArcRadius-Se)+" 0 0 0 "+(Me.leftFullExtent-Se)+" "+(Me.sourceY-Me.leftSmallArcRadius)+"L"+(Me.leftFullExtent-Se)+" "+Me.verticalLeftInnerExtent+"A"+(Me.leftLargeArcRadius-Se)+" "+(Me.leftLargeArcRadius-Se)+" 0 0 0 "+Me.leftInnerExtent+" "+(Me.verticalFullExtent+Se)+"L"+(Me.rightInnerExtent-Oe)+" "+(Me.verticalFullExtent+Se)+"A"+(Me.rightLargeArcRadius-Se)+" "+(Me.rightLargeArcRadius-Se)+" 0 0 0 "+(Me.rightFullExtent+Se-Oe)+" "+Me.verticalRightInnerExtent+"L"+(Me.rightFullExtent+Se-Oe)+" "+(Me.targetY-Me.rightSmallArcRadius)+"A"+(Me.rightLargeArcRadius-Se)+" "+(Me.rightSmallArcRadius-Se)+" 0 0 0 "+(Me.rightInnerExtent-Oe)+" "+(Me.targetY-Se)+"L"+(Me.targetX-Oe)+" "+(Me.targetY-Se)+(Oe>0?"L"+Me.targetX+" "+Me.targetY:"")+"Z":"M "+(Me.targetX-Oe)+" "+(Me.targetY-Se)+" L"+(Me.rightInnerExtent-Oe)+" "+(Me.targetY-Se)+"A"+(Me.rightLargeArcRadius+Se)+" "+(Me.rightSmallArcRadius+Se)+" 0 0 0 "+(Me.rightFullExtent-Se-Oe)+" "+(Me.targetY+Me.rightSmallArcRadius)+"L"+(Me.rightFullExtent-Se-Oe)+" "+Me.verticalRightInnerExtent+"A"+(Me.rightLargeArcRadius+Se)+" "+(Me.rightLargeArcRadius+Se)+" 0 0 0 "+(Me.rightInnerExtent-Oe)+" "+(Me.verticalFullExtent+Se)+"L"+Me.leftInnerExtent+" "+(Me.verticalFullExtent+Se)+"A"+(Me.leftLargeArcRadius+Se)+" "+(Me.leftLargeArcRadius+Se)+" 0 0 0 "+(Me.leftFullExtent+Se)+" "+Me.verticalLeftInnerExtent+"L"+(Me.leftFullExtent+Se)+" "+(Me.sourceY+Me.leftSmallArcRadius)+"A"+(Me.leftLargeArcRadius+Se)+" "+(Me.leftSmallArcRadius+Se)+" 0 0 0 "+Me.leftInnerExtent+" "+(Me.sourceY-Se)+"L"+Me.sourceX+" "+(Me.sourceY-Se)+"L"+Me.sourceX+" "+(Me.sourceY+Se)+"L"+Me.leftInnerExtent+" "+(Me.sourceY+Se)+"A"+(Me.leftLargeArcRadius-Se)+" "+(Me.leftSmallArcRadius-Se)+" 0 0 1 "+(Me.leftFullExtent-Se)+" "+(Me.sourceY+Me.leftSmallArcRadius)+"L"+(Me.leftFullExtent-Se)+" "+Me.verticalLeftInnerExtent+"A"+(Me.leftLargeArcRadius-Se)+" "+(Me.leftLargeArcRadius-Se)+" 0 0 1 "+Me.leftInnerExtent+" "+(Me.verticalFullExtent-Se)+"L"+(Me.rightInnerExtent-Oe)+" "+(Me.verticalFullExtent-Se)+"A"+(Me.rightLargeArcRadius-Se)+" "+(Me.rightLargeArcRadius-Se)+" 0 0 1 "+(Me.rightFullExtent+Se-Oe)+" "+Me.verticalRightInnerExtent+"L"+(Me.rightFullExtent+Se-Oe)+" "+(Me.targetY+Me.rightSmallArcRadius)+"A"+(Me.rightLargeArcRadius-Se)+" "+(Me.rightSmallArcRadius-Se)+" 0 0 1 "+(Me.rightInnerExtent-Oe)+" "+(Me.targetY+Se)+"L"+(Me.targetX-Oe)+" "+(Me.targetY+Se)+(Oe>0?"L"+Me.targetX+" "+Me.targetY:"")+"Z"}(W.link,q);var re=Math.abs((W.link.target.x0-W.link.source.x1)/2);q>re&&(q=re);var ee=W.link.source.x1,K=W.link.target.x0-q,Y=b(ee,K),$=Y(.5),ne=Y(.5),ae=W.link.y0-W.link.width/2,se=W.link.y0+W.link.width/2,ce=W.link.y1-W.link.width/2,me=W.link.y1+W.link.width/2,ye="M"+ee+","+ae,Te="C"+$+","+ae+" "+ne+","+ce+" "+K+","+ce,Ce="C"+ne+","+me+" "+$+","+se+" "+ee+","+se,pe=q>0?"L"+(K+q)+","+(ce+W.link.width/2):"";return ye+Te+(pe+="L"+K+","+me)+Ce+"Z"}}function S(W,q){var re=o(q.color),ee=h.nodePadAcross,K=W.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var Y=q.dx,$=Math.max(.5,q.dy),ne="node_"+q.pointNumber;return q.group&&(ne=n.randstr()),q.trace=W.trace,q.curveNumber=W.trace.index,{index:q.pointNumber,key:ne,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:W.key,trace:W.trace,node:q,nodePad:W.nodePad,nodeLineColor:W.nodeLineColor,nodeLineWidth:W.nodeLineWidth,textFont:W.textFont,size:W.horizontal?W.height:W.width,visibleWidth:Math.ceil(Y),visibleHeight:$,zoneX:-ee,zoneY:-K,zoneWidth:Y+2*ee,zoneHeight:$+2*K,labelY:W.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:W.width,forceLayouts:W.forceLayouts,horizontal:W.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:t.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:W.valueFormat,valueSuffix:W.valueSuffix,sankey:W.sankey,graph:W.graph,arrangement:W.arrangement,uniqueNodeLabelPathId:[W.guid,W.key,ne].join("_"),interactionState:W.interactionState,figure:W}}function A(W){W.attr("transform",function(q){return r(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function k(W){W.call(A)}function C(W,q){W.call(k),q.attr("d",p())}function P(W){W.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function R(W){return W.link.width>1||W.linkLineWidth>0}function O(W){return r(W.translateX,W.translateY)+(W.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function X(W,q,re){W.on(".basic",null).on("mouseover.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.hover(this,ee,q),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(re.unhover(this,ee,q),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,q),ee.interactionState.hovered=!1),ee.interactionState.dragInProgress||ee.partOfGroup||re.select(this,ee,q)})}function D(W,q,re,ee){var K=a.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(n.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(ne){ee._fullLayout._dragCover=ne}),n.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,j(Y.node),Y.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var $=Y.traceId+"|"+Y.key;Y.forceLayouts[$]?Y.forceLayouts[$].alpha(1):function(ne,ae,se,ce){(function(ye){for(var Te=0;Te<ye.length;Te++)ye[Te].y=(ye[Te].y0+ye[Te].y1)/2,ye[Te].x=(ye[Te].x0+ye[Te].x1)/2})(se.graph.nodes);var me=se.graph.nodes.filter(function(ye){return ye.originalX===se.node.originalX}).filter(function(ye){return!ye.partOfGroup});se.forceLayouts[ae]=T.forceSimulation(me).alphaDecay(0).force("collide",T.forceCollide().radius(function(ye){return ye.dy/2+se.nodePad/2}).strength(1).iterations(h.forceIterations)).force("constrain",function(ye,Te,Ce,pe){return function(){for(var fe=0,Oe=0;Oe<Ce.length;Oe++){var Se=Ce[Oe];Se===pe.interactionState.dragInProgress?(Se.x=Se.lastDraggedX,Se.y=Se.lastDraggedY):(Se.vx=(Se.originalX-Se.x)/h.forceTicksPerFrame,Se.y=Math.min(pe.size-Se.dy/2,Math.max(Se.dy/2,Se.y))),fe=Math.max(fe,Math.abs(Se.vx),Math.abs(Se.vy))}!pe.interactionState.dragInProgress&&fe<.1&&pe.forceLayouts[Te].alpha()>0&&pe.forceLayouts[Te].alpha(0)}}(0,ae,me,se)).stop()}(0,$,Y),function(ne,ae,se,ce,me){window.requestAnimationFrame(function ye(){var Te;for(Te=0;Te<h.forceTicksPerFrame;Te++)se.forceLayouts[ce].tick();if(function(pe){for(var fe=0;fe<pe.length;fe++)pe[fe].y0=pe[fe].y-pe[fe].dy/2,pe[fe].y1=pe[fe].y0+pe[fe].dy,pe[fe].x0=pe[fe].x-pe[fe].dx/2,pe[fe].x1=pe[fe].x0+pe[fe].dx}(se.graph.nodes),se.sankey.update(se.graph),C(ne.filter(B(se)),ae),se.forceLayouts[ce].alpha()>0)window.requestAnimationFrame(ye);else{var Ce=se.node.originalX;se.node.x0=Ce-se.visibleWidth/2,se.node.x1=Ce+se.visibleWidth/2,V(se,me)}})}(W,q,Y,$,ee)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var $=a.event.x,ne=a.event.y;Y.arrangement==="snap"?(Y.node.x0=$-Y.visibleWidth/2,Y.node.x1=$+Y.visibleWidth/2,Y.node.y0=ne-Y.visibleHeight/2,Y.node.y1=ne+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=$-Y.visibleWidth/2,Y.node.x1=$+Y.visibleWidth/2),ne=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,ne)),Y.node.y0=ne-Y.visibleHeight/2,Y.node.y1=ne+Y.visibleHeight/2),j(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),C(W.filter(B(Y)),q))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var $=0;$<Y.node.childrenNodes.length;$++)Y.node.childrenNodes[$].x=Y.node.x,Y.node.childrenNodes[$].y=Y.node.y;Y.arrangement!=="snap"&&V(Y,ee)}});W.on(".drag",null).call(K)}function V(W,q){for(var re=[],ee=[],K=0;K<W.graph.nodes.length;K++){var Y=(W.graph.nodes[K].x0+W.graph.nodes[K].x1)/2,$=(W.graph.nodes[K].y0+W.graph.nodes[K].y1)/2;re.push(Y/W.figure.width),ee.push($/W.figure.height)}m.call("_guiRestyle",q,{"node.x":[re],"node.y":[ee]},W.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function j(W){W.lastDraggedX=W.x0+W.dx/2,W.lastDraggedY=W.y0+W.dy/2}function B(W){return function(q){return q.node.originalX===W.node.originalX}}F.exports=function(W,q,re,ee,K){var Y=W._context.staticPlot,$=!1;n.ensureSingle(W._fullLayout._infolayer,"g","first-render",function(){$=!0});var ne=W._fullLayout._dragCover,ae=re.filter(function(fe){return c(fe).trace.visible}).map(v.bind(null,ee)),se=q.selectAll("."+h.cn.sankey).data(ae,u);se.exit().remove(),se.enter().append("g").classed(h.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",O),se.each(function(fe,Oe){W._fullData[Oe]._sankey=fe;var Se="bgsankey-"+fe.trace.uid+"-"+Oe;n.ensureSingle(W._fullLayout._draggers,"rect",Se),W._fullData[Oe]._bgRect=a.select("."+Se),W._fullData[Oe]._bgRect.style("pointer-events",Y?"none":"all").attr("width",fe.width).attr("height",fe.height).attr("x",fe.translateX).attr("y",fe.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(h.ease).duration(h.duration).attr("transform",O);var ce=se.selectAll("."+h.cn.sankeyLinks).data(d,u);ce.enter().append("g").classed(h.cn.sankeyLinks,!0).style("fill","none");var me=ce.selectAll("."+h.cn.sankeyLink).data(function(fe){return fe.graph.links.filter(function(Oe){return Oe.value}).map(M.bind(null,fe))},u);me.enter().append("path").classed(h.cn.sankeyLink,!0).call(X,se,K.linkEvents),me.style("stroke",function(fe){return R(fe)?t.tinyRGB(o(fe.linkLineColor)):fe.tinyColorHue}).style("stroke-opacity",function(fe){return R(fe)?t.opacity(fe.linkLineColor):fe.tinyColorAlpha}).style("fill",function(fe){return fe.tinyColorHue}).style("fill-opacity",function(fe){return fe.tinyColorAlpha}).style("stroke-width",function(fe){return R(fe)?fe.linkLineWidth:1}).attr("d",p()),me.style("opacity",function(){return W._context.staticPlot||$||ne?1:0}).transition().ease(h.ease).duration(h.duration).style("opacity",1),me.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var ye=se.selectAll("."+h.cn.sankeyNodeSet).data(d,u);ye.enter().append("g").classed(h.cn.sankeyNodeSet,!0),ye.style("cursor",function(fe){switch(fe.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Te=ye.selectAll("."+h.cn.sankeyNode).data(function(fe){var Oe=fe.graph.nodes;return function(Se){var Me,ue=[];for(Me=0;Me<Se.length;Me++)Se[Me].originalX=(Se[Me].x0+Se[Me].x1)/2,Se[Me].originalY=(Se[Me].y0+Se[Me].y1)/2,ue.indexOf(Se[Me].originalX)===-1&&ue.push(Se[Me].originalX);for(ue.sort(function(le,ie){return le-ie}),Me=0;Me<Se.length;Me++)Se[Me].originalLayerIndex=ue.indexOf(Se[Me].originalX),Se[Me].originalLayer=Se[Me].originalLayerIndex/(ue.length-1)}(Oe),Oe.map(S.bind(null,fe))},u);Te.enter().append("g").classed(h.cn.sankeyNode,!0).call(A).style("opacity",function(fe){return!W._context.staticPlot&&!$||fe.partOfGroup?0:1}),Te.call(X,se,K.nodeEvents).call(D,me,K,W),Te.transition().ease(h.ease).duration(h.duration).call(A).style("opacity",function(fe){return fe.partOfGroup?0:1}),Te.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var Ce=Te.selectAll("."+h.cn.nodeRect).data(d);Ce.enter().append("rect").classed(h.cn.nodeRect,!0).call(P),Ce.style("stroke-width",function(fe){return fe.nodeLineWidth}).style("stroke",function(fe){return t.tinyRGB(o(fe.nodeLineColor))}).style("stroke-opacity",function(fe){return t.opacity(fe.nodeLineColor)}).style("fill",function(fe){return fe.tinyColorHue}).style("fill-opacity",function(fe){return fe.tinyColorAlpha}),Ce.transition().ease(h.ease).duration(h.duration).call(P);var pe=Te.selectAll("."+h.cn.nodeLabel).data(d);pe.enter().append("text").classed(h.cn.nodeLabel,!0).style("cursor","default"),pe.attr("data-notex",1).text(function(fe){return fe.node.label}).each(function(fe){var Oe=a.select(this);i.font(Oe,fe.textFont),w.convertToTspans(Oe,W)}).style("text-shadow",w.makeTextShadow(W._fullLayout.paper_bgcolor)).attr("text-anchor",function(fe){return fe.horizontal&&fe.left?"end":"start"}).attr("transform",function(fe){var Oe=a.select(this),Se=w.lineCount(Oe),Me=fe.textFont.size*((Se-1)*y-x),ue=fe.nodeLineWidth/2+3,le=((fe.horizontal?fe.visibleHeight:fe.visibleWidth)-Me)/2;fe.horizontal&&(fe.left?ue=-ue:ue+=fe.visibleWidth);var ie=fe.horizontal?"":"scale(-1,1)"+s(90);return r(fe.horizontal?ue:le,fe.horizontal?le:ue)+ie}),pe.transition().ease(h.ease).duration(h.duration)}},84564:function(F){F.exports=function(L,e){for(var T=[],b=L.cd[0].trace,a=b._sankey.graph.nodes,_=0;_<a.length;_++){var g=a[_];if(!g.partOfGroup){var h=[(g.x0+g.x1)/2,(g.y0+g.y1)/2];b.orientation==="v"&&h.reverse(),e&&e.contains(h,!1,_,L)&&T.push({pointNumber:g.pointNumber})}}return T}},75225:function(F,L,e){var T=e(71828);F.exports=function(b,a){for(var _=0;_<b.length;_++)b[_].i=_;T.mergeArray(a.text,b,"tx"),T.mergeArray(a.texttemplate,b,"txt"),T.mergeArray(a.hovertext,b,"htx"),T.mergeArray(a.customdata,b,"data"),T.mergeArray(a.textposition,b,"tp"),a.textfont&&(T.mergeArrayCastPositive(a.textfont.size,b,"ts"),T.mergeArray(a.textfont.color,b,"tc"),T.mergeArray(a.textfont.family,b,"tf"));var g=a.marker;if(g){T.mergeArrayCastPositive(g.size,b,"ms"),T.mergeArrayCastPositive(g.opacity,b,"mo"),T.mergeArray(g.symbol,b,"mx"),T.mergeArray(g.angle,b,"ma"),T.mergeArray(g.standoff,b,"mf"),T.mergeArray(g.color,b,"mc");var h=g.line;g.line&&(T.mergeArray(h.color,b,"mlc"),T.mergeArrayCastPositive(h.width,b,"mlw"));var o=g.gradient;o&&o.type!=="none"&&(T.mergeArray(o.type,b,"mgt"),T.mergeArray(o.color,b,"mgc"))}}},82196:function(F,L,e){var T=e(12663).axisHoverFormat,b=e(5386).si,a=e(5386).fF,_=e(50693),g=e(41940),h=e(79952).P,o=e(79952).u,t=e(91424),i=e(47581),n=e(1426).extendFlat;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:T("x"),yhoverformat:T("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:b({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},h,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:o,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(F,L,e){var T=e(92770),b=e(71828),a=e(89298),_=e(42973),g=e(50606).BADNUM,h=e(34098),o=e(36922),t=e(75225),i=e(66279);function n(d,c,w,m,f,x,y){var v=c._length,M=d._fullLayout,p=w._id,S=m._id,A=M._firstScatter[l(c)]===c.uid,k=(u(c,M,w,m)||{}).orientation,C=c.fill;w._minDtick=0,m._minDtick=0;var P={padded:!0},R={padded:!0};y&&(P.ppad=R.ppad=y);var O=v<2||f[0]!==f[v-1]||x[0]!==x[v-1];O&&(C==="tozerox"||C==="tonextx"&&(A||k==="h"))?P.tozero=!0:(c.error_y||{}).visible||C!=="tonexty"&&C!=="tozeroy"&&(h.hasMarkers(c)||h.hasText(c))||(P.padded=!1,P.ppad=0),O&&(C==="tozeroy"||C==="tonexty"&&(A||k==="v"))?R.tozero=!0:C!=="tonextx"&&C!=="tozerox"||(R.padded=!1),p&&(c._extremes[p]=a.findExtremes(w,f,P)),S&&(c._extremes[S]=a.findExtremes(m,x,R))}function r(d,c){if(h.hasMarkers(d)){var w,m=d.marker,f=1.6*(d.marker.sizeref||1);if(w=d.marker.sizemode==="area"?function(p){return Math.max(Math.sqrt((p||0)/f),3)}:function(p){return Math.max((p||0)/f,3)},b.isArrayOrTypedArray(m.size)){var x={type:"linear"};a.setConvert(x);for(var y=x.makeCalcdata(d.marker,"size"),v=new Array(c),M=0;M<c;M++)v[M]=w(y[M]);return v}return w(m.size)}}function s(d,c){var w=l(c),m=d._firstScatter;m[w]||(m[w]=c.uid)}function l(d){var c=d.stackgroup;return d.xaxis+d.yaxis+d.type+(c?"-"+c:"")}function u(d,c,w,m){var f=d.stackgroup;if(f){var x=c._scatterStackOpts[w._id+m._id][f],y=x.orientation==="v"?m:w;return y.type==="linear"||y.type==="log"?x:void 0}}F.exports={calc:function(d,c){var w,m,f,x,y,v,M=d._fullLayout,p=c._xA=a.getFromId(d,c.xaxis||"x","x"),S=c._yA=a.getFromId(d,c.yaxis||"y","y"),A=p.makeCalcdata(c,"x"),k=S.makeCalcdata(c,"y"),C=_(c,p,"x",A),P=_(c,S,"y",k),R=C.vals,O=P.vals,X=c._length,D=new Array(X),V=c.ids,j=u(c,M,p,S),B=!1;s(M,c);var W,q="x",re="y";j?(b.pushUnique(j.traceIndices,c._expandedIndex),(w=j.orientation==="v")?(re="s",W="x"):(q="s",W="y"),y=j.stackgaps==="interpolate"):n(d,c,p,S,R,O,r(c,X));var ee=!!c.xperiodalignment,K=!!c.yperiodalignment;for(m=0;m<X;m++){var Y=D[m]={},$=T(R[m]),ne=T(O[m]);$&&ne?(Y[q]=R[m],Y[re]=O[m],ee&&(Y.orig_x=A[m],Y.xEnd=C.ends[m],Y.xStart=C.starts[m]),K&&(Y.orig_y=k[m],Y.yEnd=P.ends[m],Y.yStart=P.starts[m])):j&&(w?$:ne)?(Y[W]=w?R[m]:O[m],Y.gap=!0,y?(Y.s=g,B=!0):Y.s=0):Y[q]=Y[re]=g,V&&(Y.id=String(V[m]))}if(t(D,c),o(d,c),i(D,c),j){for(m=0;m<D.length;)D[m][W]===g?D.splice(m,1):m++;if(b.sort(D,function(me,ye){return me[W]-ye[W]||me.i-ye.i}),B){for(m=0;m<D.length-1&&D[m].gap;)m++;for((v=D[m].s)||(v=D[m].s=0),f=0;f<m;f++)D[f].s=v;for(x=D.length-1;x>m&&D[x].gap;)x--;for(v=D[x].s,f=D.length-1;f>x;f--)D[f].s=v;for(;m<x;)if(D[++m].gap){for(f=m+1;D[f].gap;)f++;for(var ae=D[m-1][W],se=D[m-1].s,ce=(D[f].s-se)/(D[f][W]-ae);m<f;)D[m].s=se+(D[m][W]-ae)*ce,m++}}}return D},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:s,getStackOpts:u}},66279:function(F,L,e){var T=e(71828);F.exports=function(b,a){T.isArrayOrTypedArray(a.selectedpoints)&&T.tagSelected(b,a)}},36922:function(F,L,e){var T=e(52075).hasColorscale,b=e(78803),a=e(34098);F.exports=function(_,g){a.hasLines(g)&&T(g,"line")&&b(_,g,{vals:g.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(g)&&(T(g,"marker")&&b(_,g,{vals:g.marker.color,containerStr:"marker",cLetter:"c"}),T(g,"marker.line")&&b(_,g,{vals:g.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(F){F.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(F,L,e){var T=e(47761),b=e(11661).setGroupPositions;function a(_,g,h,o,t,i,n){t[o]=!0;var r={i:null,gap:!0,s:0};if(r[n]=h,_.splice(g,0,r),g&&h===_[g-1][n]){var s=_[g-1];r.s=s.s,r.i=s.i,r.gap=s.gap}else i&&(r.s=function(l,u,d,c){var w=l[u-1],m=l[u+1];return m?w?w.s+(m.s-w.s)*(d-w[c])/(m[c]-w[c]):m.s:w.s}(_,g,h,n));g||(_[0].t=_[1].t,_[0].trace=_[1].trace,delete _[1].t,delete _[1].trace)}F.exports=function(_,g){_._fullLayout.scattermode==="group"&&function(W,q){for(var re=q.xaxis,ee=q.yaxis,K=W._fullLayout,Y=W._fullData,$=W.calcdata,ne=[],ae=[],se=0;se<Y.length;se++){var ce=Y[se];ce.visible===!0&&ce.type==="scatter"&&ce.xaxis===re._id&&ce.yaxis===ee._id&&(ce.orientation==="h"?ne.push($[se]):ce.orientation==="v"&&ae.push($[se]))}var me={mode:K.scattermode,gap:K.scattergap};b(W,re,ee,ae,me),b(W,ee,re,ne,me)}(_,g);var h=g.xaxis,o=g.yaxis,t=h._id+o._id,i=_._fullLayout._scatterStackOpts[t];if(i){var n,r,s,l,u,d,c,w,m,f,x,y,v,M,p,S=_.calcdata;for(var A in i){var k=(f=i[A]).traceIndices;if(k.length){for(x=f.stackgaps==="interpolate",y=f.groupnorm,f.orientation==="v"?(v="x",M="y"):(v="y",M="x"),p=new Array(k.length),n=0;n<p.length;n++)p[n]=!1;d=S[k[0]];var C=new Array(d.length);for(n=0;n<d.length;n++)C[n]=d[n][v];for(n=1;n<k.length;n++){for(u=S[k[n]],r=s=0;r<u.length;r++){for(c=u[r][v];c>C[s]&&s<C.length;s++)a(u,r,C[s],n,p,x,v),r++;if(c!==C[s]){for(l=0;l<n;l++)a(S[k[l]],s,c,l,p,x,v);C.splice(s,0,c)}s++}for(;s<C.length;s++)a(u,r,C[s],n,p,x,v),r++}var P=C.length;for(r=0;r<d.length;r++){for(w=d[r][M]=d[r].s,n=1;n<k.length;n++)(u=S[k[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=P,w+=u[r].s,u[r][M]=w;if(y)for(m=(y==="fraction"?w:w/100)||1,n=0;n<k.length;n++){var R=S[k[n]][r];R[M]/=m,R.sNorm=R.s/m}}for(n=0;n<k.length;n++){var O=(u=S[k[n]])[0].trace,X=T.calcMarkerSize(O,O._rawLength),D=Array.isArray(X);if(X&&p[n]||D){var V=X;for(X=new Array(P),r=0;r<P;r++)X[r]=u[r].gap?0:D?V[u[r].i]:V}var j=new Array(P),B=new Array(P);for(r=0;r<P;r++)j[r]=u[r].x,B[r]=u[r].y;T.calcAxisExpansion(_,O,h,o,j,B,X),u[0].t.orientation=f.orientation}}}}}},34936:function(F,L,e){var T=e(71828),b=e(26125),a=e(82196);F.exports=function(_,g){var h,o,t;function i(u){return T.coerce(o._input,o,a,u)}if(g.scattermode==="group")for(t=0;t<_.length;t++)(o=_[t]).type==="scatter"&&(h=o._input,b(h,o,g,i));for(t=0;t<_.length;t++){var n=_[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var s=t-1;s>=0;s--){var l=_[s];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},17438:function(F,L,e){var T=e(71828),b=e(73972),a=e(82196),_=e(47581),g=e(34098),h=e(67513),o=e(73927),t=e(565),i=e(49508),n=e(11058),r=e(94039),s=e(82410),l=e(28908),u=e(71828).coercePattern;F.exports=function(d,c,w,m){function f(k,C){return T.coerce(d,c,a,k,C)}var x=h(d,c,m,f);if(x||(c.visible=!1),c.visible){o(d,c,m,f),f("xhoverformat"),f("yhoverformat");var y=t(d,c,m,f);m.scattermode==="group"&&c.orientation===void 0&&f("orientation","v");var v=!y&&x<_.PTS_LINESONLY?"lines+markers":"lines";f("text"),f("hovertext"),f("mode",v),g.hasLines(c)&&(n(d,c,w,m,f,{backoff:!0}),r(d,c,f),f("connectgaps"),f("line.simplify")),g.hasMarkers(c)&&i(d,c,w,m,f,{gradient:!0}),g.hasText(c)&&(f("texttemplate"),s(d,c,m,f));var M=[];(g.hasMarkers(c)||g.hasText(c))&&(f("cliponaxis"),f("marker.maxdisplayed"),M.push("points")),f("fill",y?y.fillDflt:"none"),c.fill!=="none"&&(l(d,c,w,f),g.hasLines(c)||r(d,c,f),u(f,"fillpattern",c.fillcolor,!1));var p=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||M.push("fills"),f("hoveron",M.join("+")||"points"),c.hoveron!=="fills"&&f("hovertemplate");var A=b.getComponentMethod("errorbars","supplyDefaults");A(d,c,p||S||w,{axis:"y"}),A(d,c,p||S||w,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(c,f)}}},28908:function(F,L,e){var T=e(7901),b=e(71828).isArrayOrTypedArray;F.exports=function(a,_,g,h){var o=!1;if(_.marker){var t=_.marker.color,i=(_.marker.line||{}).color;t&&!b(t)?o=t:i&&!b(i)&&(o=i)}h("fillcolor",T.addOpacity((_.line||{}).color||o||g,.5))}},8225:function(F,L,e){var T=e(89298);F.exports=function(b,a,_){var g={},h={_fullLayout:_},o=T.getFromTrace(h,a,"x"),t=T.getFromTrace(h,a,"y"),i=b.orig_x;i===void 0&&(i=b.x);var n=b.orig_y;return n===void 0&&(n=b.y),g.xLabel=T.tickText(o,o.c2l(i),!0).text,g.yLabel=T.tickText(t,t.c2l(n),!0).text,g}},34603:function(F,L,e){var T=e(7901),b=e(34098);F.exports=function(a,_){var g,h;if(a.mode==="lines")return(g=a.line.color)&&T.opacity(g)?g:a.fillcolor;if(a.mode==="none")return a.fill?a.fillcolor:"";var o=_.mcc||(a.marker||{}).color,t=_.mlcc||((a.marker||{}).line||{}).color;return(h=o&&T.opacity(o)?o:t&&T.opacity(t)&&(_.mlw||((a.marker||{}).line||{}).width)?t:"")?T.opacity(h)<.3?T.addOpacity(h,.3):h:(g=(a.line||{}).color)&&T.opacity(g)&&b.hasLines(a)&&a.line.width?g:a.fillcolor}},26125:function(F,L,e){var T=e(99082).getAxisGroup;F.exports=function(b,a,_,g){var h=a.orientation,o=a[{v:"x",h:"y"}[h]+"axis"],t=T(_,o)+h,i=_._alignmentOpts||{},n=g("alignmentgroup"),r=i[t];r||(r=i[t]={});var s=r[n];s?s.traces.push(a):s=r[n]={traces:[a],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var l=g("offsetgroup"),u=s.offsetGroups,d=u[l];l&&(d||(d=u[l]={offsetIndex:Object.keys(u).length}),a._offsetIndex=d.offsetIndex)}},33720:function(F,L,e){var T=e(71828),b=e(30211),a=e(73972),_=e(34603),g=e(7901),h=T.fillText;F.exports=function(o,t,i,n){var r=o.cd,s=r[0].trace,l=o.xa,u=o.ya,d=l.c2p(t),c=u.c2p(i),w=[d,c],m=s.hoveron||"",f=s.mode.indexOf("markers")!==-1?3:.5,x=!!s.xperiodalignment,y=!!s.yperiodalignment;if(m.indexOf("points")!==-1){var v=function(Te){var Ce=Math.max(f,Te.mrc||0),pe=l.c2p(Te.x)-d,fe=u.c2p(Te.y)-c;return Math.max(Math.sqrt(pe*pe+fe*fe)-Ce,1-f/Ce)},M=b.getDistanceFunction(n,function(Te){if(x){var Ce=l.c2p(Te.xStart),pe=l.c2p(Te.xEnd);return d>=Math.min(Ce,pe)&&d<=Math.max(Ce,pe)?0:1/0}var fe=Math.max(3,Te.mrc||0),Oe=1-1/fe,Se=Math.abs(l.c2p(Te.x)-d);return Se<fe?Oe*Se/fe:Se-fe+Oe},function(Te){if(y){var Ce=u.c2p(Te.yStart),pe=u.c2p(Te.yEnd);return c>=Math.min(Ce,pe)&&c<=Math.max(Ce,pe)?0:1/0}var fe=Math.max(3,Te.mrc||0),Oe=1-1/fe,Se=Math.abs(u.c2p(Te.y)-c);return Se<fe?Oe*Se/fe:Se-fe+Oe},v);if(b.getClosest(r,M,o),o.index!==!1){var p=r[o.index],S=l.c2p(p.x,!0),A=u.c2p(p.y,!0),k=p.mrc||1;o.index=p.i;var C=r[0].t.orientation,P=C&&(p.sNorm||p.s),R=C==="h"?P:p.orig_x!==void 0?p.orig_x:p.x,O=C==="v"?P:p.orig_y!==void 0?p.orig_y:p.y;return T.extendFlat(o,{color:_(s,p),x0:S-k,x1:S+k,xLabelVal:R,y0:A-k,y1:A+k,yLabelVal:O,spikeDistance:v(p),hovertemplate:s.hovertemplate}),h(p,s,o),a.getComponentMethod("errorbars","hoverInfo")(p,s,o),[o]}}if(m.indexOf("fills")!==-1&&s._polygons){var X,D,V,j,B,W,q,re,ee,K=s._polygons,Y=[],$=!1,ne=1/0,ae=-1/0,se=1/0,ce=-1/0;for(X=0;X<K.length;X++)(V=K[X]).contains(w)&&($=!$,Y.push(V),se=Math.min(se,V.ymin),ce=Math.max(ce,V.ymax));if($){var me=((se=Math.max(se,0))+(ce=Math.min(ce,u._length)))/2;for(X=0;X<Y.length;X++)for(j=Y[X].pts,D=1;D<j.length;D++)(re=j[D-1][1])>me!=(ee=j[D][1])>=me&&(W=j[D-1][0],q=j[D][0],ee-re&&(B=W+(q-W)*(me-re)/(ee-re),ne=Math.min(ne,B),ae=Math.max(ae,B)));ne=Math.max(ne,0),ae=Math.min(ae,l._length);var ye=g.defaultLine;return g.opacity(s.fillcolor)?ye=s.fillcolor:g.opacity((s.line||{}).color)&&(ye=s.line.color),T.extendFlat(o,{distance:o.maxHoverDistance,x0:ne,x1:ae,y0:me,y1:me,color:ye,hovertemplate:!1}),delete o.index,s.text&&!Array.isArray(s.text)?o.text=String(s.text):o.text=s.name,[o]}}}},67368:function(F,L,e){var T=e(34098);F.exports={hasLines:T.hasLines,hasMarkers:T.hasMarkers,hasText:T.hasText,isBubble:T.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(F){F.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(F,L,e){var T=e(71828),b=e(21479);F.exports=function(a,_){var g,h=_.barmode==="group";_.scattermode==="group"&&(g=h?_.bargap:.2,T.coerce(a,_,b,"scattergap",g))}},11058:function(F,L,e){var T=e(71828).isArrayOrTypedArray,b=e(52075).hasColorscale,a=e(1586);F.exports=function(_,g,h,o,t,i){i||(i={});var n=(_.marker||{}).color;t("line.color",h),b(_,"line")?a(_,g,o,t,{prefix:"line.",cLetter:"c"}):t("line.color",!T(n)&&n||h),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},34621:function(F,L,e){var T=e(91424),b=e(50606),a=b.BADNUM,_=b.LOG_CLIP,g=_+.5,h=_-.5,o=e(71828),t=o.segmentsIntersect,i=o.constrain,n=e(47581);F.exports=function(r,s){var l,u,d,c,w,m,f,x,y,v,M,p,S,A,k,C,P,R,O=s.trace||{},X=s.xaxis,D=s.yaxis,V=X.type==="log",j=D.type==="log",B=X._length,W=D._length,q=s.backoff,re=O.marker,ee=s.connectGaps,K=s.baseTolerance,Y=s.shape,$=Y==="linear",ne=O.fill&&O.fill!=="none",ae=[],se=n.minTolerance,ce=r.length,me=new Array(ce),ye=0;function Te(Pt){var et=r[Pt];if(!et)return!1;var nt=s.linearized?X.l2p(et.x):X.c2p(et.x),Ye=s.linearized?D.l2p(et.y):D.c2p(et.y);if(nt===a){if(V&&(nt=X.c2p(et.x,!0)),nt===a)return!1;j&&Ye===a&&(nt*=Math.abs(X._m*W*(X._m>0?g:h)/(D._m*B*(D._m>0?g:h)))),nt*=1e3}if(Ye===a){if(j&&(Ye=D.c2p(et.y,!0)),Ye===a)return!1;Ye*=1e3}return[nt,Ye]}function Ce(Pt,et,nt,Ye){var tt=nt-Pt,ut=Ye-et,Ke=.5-Pt,De=.5-et,Be=tt*tt+ut*ut,Qe=tt*Ke+ut*De;if(Qe>0&&Qe<Be){var rt=Ke*ut-De*tt;if(rt*rt<Be)return!0}}function pe(Pt,et){var nt=Pt[0]/B,Ye=Pt[1]/W,tt=Math.max(0,-nt,nt-1,-Ye,Ye-1);return tt&&P!==void 0&&Ce(nt,Ye,P,R)&&(tt=0),tt&&et&&Ce(nt,Ye,et[0]/B,et[1]/W)&&(tt=0),(1+n.toleranceGrowth*tt)*K}function fe(Pt,et){var nt=Pt[0]-et[0],Ye=Pt[1]-et[1];return Math.sqrt(nt*nt+Ye*Ye)}var Oe,Se,Me,ue,le,ie,ge,Ae=n.maxScreensAway,we=-B*Ae,Ne=B*(1+Ae),He=-W*Ae,de=W*(1+Ae),Le=[[we,He,Ne,He],[Ne,He,Ne,de],[Ne,de,we,de],[we,de,we,He]];function Ee(Pt){if(Pt[0]<we||Pt[0]>Ne||Pt[1]<He||Pt[1]>de)return[i(Pt[0],we,Ne),i(Pt[1],He,de)]}function Re(Pt,et){return Pt[0]===et[0]&&(Pt[0]===we||Pt[0]===Ne)||Pt[1]===et[1]&&(Pt[1]===He||Pt[1]===de)||void 0}function je(Pt,et,nt){return function(Ye,tt){var ut=Ee(Ye),Ke=Ee(tt),De=[];if(ut&&Ke&&Re(ut,Ke))return De;ut&&De.push(ut),Ke&&De.push(Ke);var Be=2*o.constrain((Ye[Pt]+tt[Pt])/2,et,nt)-((ut||Ye)[Pt]+(Ke||tt)[Pt]);return Be&&((ut&&Ke?Be>0==ut[Pt]>Ke[Pt]?ut:Ke:ut||Ke)[Pt]+=Be),De}}function Fe(Pt){var et=Pt[0],nt=Pt[1],Ye=et===me[ye-1][0],tt=nt===me[ye-1][1];if(!Ye||!tt)if(ye>1){var ut=et===me[ye-2][0],Ke=nt===me[ye-2][1];Ye&&(et===we||et===Ne)&&ut?Ke?ye--:me[ye-1]=Pt:tt&&(nt===He||nt===de)&&Ke?ut?ye--:me[ye-1]=Pt:me[ye++]=Pt}else me[ye++]=Pt}function Xe(Pt){me[ye-1][0]!==Pt[0]&&me[ye-1][1]!==Pt[1]&&Fe([Me,ue]),Fe(Pt),le=null,Me=ue=0}Y==="linear"||Y==="spline"?ge=function(Pt,et){for(var nt=[],Ye=0,tt=0;tt<4;tt++){var ut=Le[tt],Ke=t(Pt[0],Pt[1],et[0],et[1],ut[0],ut[1],ut[2],ut[3]);Ke&&(!Ye||Math.abs(Ke.x-nt[0][0])>1||Math.abs(Ke.y-nt[0][1])>1)&&(Ke=[Ke.x,Ke.y],Ye&&fe(Ke,Pt)<fe(nt[0],Pt)?nt.unshift(Ke):nt.push(Ke),Ye++)}return nt}:Y==="hv"||Y==="vh"?ge=function(Pt,et){var nt=[],Ye=Ee(Pt),tt=Ee(et);return Ye&&tt&&Re(Ye,tt)||(Ye&&nt.push(Ye),tt&&nt.push(tt)),nt}:Y==="hvh"?ge=je(0,we,Ne):Y==="vhv"&&(ge=je(1,He,de));var Ze=o.isArrayOrTypedArray(re);function at(Pt){if(Pt&&q&&(Pt.i=l,Pt.d=r,Pt.trace=O,Pt.marker=Ze?re[Pt.i]:re,Pt.backoff=q),P=Pt[0]/B,R=Pt[1]/W,Oe=Pt[0]<we?we:Pt[0]>Ne?Ne:0,Se=Pt[1]<He?He:Pt[1]>de?de:0,Oe||Se){if(ye)if(le){var et=ge(le,Pt);et.length>1&&(Xe(et[0]),me[ye++]=et[1])}else ie=ge(me[ye-1],Pt)[0],me[ye++]=ie;else me[ye++]=[Oe||Pt[0],Se||Pt[1]];var nt=me[ye-1];Oe&&Se&&(nt[0]!==Oe||nt[1]!==Se)?(le&&(Me!==Oe&&ue!==Se?Fe(Me&&ue?(Ye=le,ut=(tt=Pt)[0]-Ye[0],Ke=(tt[1]-Ye[1])/ut,(Ye[1]*tt[0]-tt[1]*Ye[0])/ut>0?[Ke>0?we:Ne,de]:[Ke>0?Ne:we,He]):[Me||Oe,ue||Se]):Me&&ue&&Fe([Me,ue])),Fe([Oe,Se])):Me-Oe&&ue-Se&&Fe([Oe||Me,Se||ue]),le=Pt,Me=Oe,ue=Se}else le&&Xe(ge(le,Pt)[0]),me[ye++]=Pt;var Ye,tt,ut,Ke}for(l=0;l<ce;l++)if(u=Te(l)){for(ye=0,le=null,at(u),l++;l<ce;l++){if(!(c=Te(l))){if(ee)continue;break}if($&&s.simplify){var lt=Te(l+1);if(v=fe(c,u),ne&&(ye===0||ye===ce-1)||!(v<pe(c,lt)*se)){for(x=[(c[0]-u[0])/v,(c[1]-u[1])/v],w=u,M=v,p=A=k=0,f=!1,d=c,l++;l<r.length;l++){if(m=lt,lt=Te(l+1),!m){if(ee)continue;break}if(C=(y=[m[0]-u[0],m[1]-u[1]])[0]*x[1]-y[1]*x[0],A=Math.min(A,C),(k=Math.max(k,C))-A>pe(m,lt))break;d=m,(S=y[0]*x[0]+y[1]*x[1])>M?(M=S,c=m,f=!1):S<p&&(p=S,w=m,f=!0)}if(f?(at(c),d!==w&&at(w)):(w!==u&&at(w),d!==c&&at(c)),at(d),l>=r.length||!m)break;at(m),u=m}}else at(c)}le&&Fe([Me||le[0],ue||le[1]]),ae.push(me.slice(0,ye))}var ot=Y.slice(Y.length-1);if(q&&ot!=="h"&&ot!=="v"){for(var bt=!1,wt=-1,ht=[],ct=0;ct<ae.length;ct++)for(var Tt=0;Tt<ae[ct].length-1;Tt++){var Lt=ae[ct][Tt],kt=ae[ct][Tt+1],Ot=T.applyBackoff(kt,Lt);Ot[0]===kt[0]&&Ot[1]===kt[1]||(bt=!0),ht[wt+1]||(ht[++wt]=[Lt,[Ot[0],Ot[1]]])}return bt?ht:ae}return ae}},94039:function(F){F.exports=function(L,e,T){T("line.shape")==="spline"&&T("line.smoothing")}},68687:function(F){var L={tonextx:1,tonexty:1,tonext:1};F.exports=function(e,T,b){var a,_,g,h,o,t={},i=!1,n=-1,r=0,s=-1;for(_=0;_<b.length;_++)(g=(a=b[_][0].trace).stackgroup||"")?g in t?o=t[g]:(o=t[g]=r,r++):a.fill in L&&s>=0?o=s:(o=s=r,r++),o<n&&(i=!0),a._groupIndex=n=o;var l=b.slice();i&&l.sort(function(d,c){var w=d[0].trace,m=c[0].trace;return w._groupIndex-m._groupIndex||w.index-m.index});var u={};for(_=0;_<l.length;_++)g=(a=l[_][0].trace).stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in L&&(h=u[g],a._prevtrace=h||null,h&&(h._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),u[g]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return l}},39984:function(F,L,e){var T=e(92770);F.exports=function(b,a){a||(a=2);var _=b.marker,g=_.sizeref||1,h=_.sizemin||0,o=_.sizemode==="area"?function(t){return Math.sqrt(t/g)}:function(t){return t/g};return function(t){var i=o(t/a);return T(i)&&i>0?Math.max(i,h):0}}},4898:function(F){F.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(F,L,e){var T=e(7901),b=e(52075).hasColorscale,a=e(1586),_=e(34098);F.exports=function(g,h,o,t,i,n){var r=_.isBubble(g),s=(g.line||{}).color;n=n||{},s&&(o=s),i("marker.symbol"),i("marker.opacity",r?.7:1),i("marker.size"),n.noAngle||(i("marker.angle"),n.noAngleRef||i("marker.angleref"),n.noStandOff||i("marker.standoff")),i("marker.color",o),b(g,"marker")&&a(g,h,t,i,{prefix:"marker.",cLetter:"c"}),n.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),n.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&h.marker.color!==s?s:r?T.background:T.defaultLine),b(g,"marker.line")&&a(g,h,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",r?1:0)),r&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),n.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},73927:function(F,L,e){var T=e(71828).dateTick0,b=e(50606).ONEWEEK;function a(_,g){return T(g,_%b==0?1:0)}F.exports=function(_,g,h,o,t){if(t||(t={x:!0,y:!0}),t.x){var i=o("xperiod");i&&(o("xperiod0",a(i,g.xcalendar)),o("xperiodalignment"))}if(t.y){var n=o("yperiod");n&&(o("yperiod0",a(n,g.ycalendar)),o("yperiodalignment"))}}},32663:function(F,L,e){var T=e(39898),b=e(73972),a=e(71828),_=a.ensureSingle,g=a.identity,h=e(91424),o=e(34098),t=e(34621),i=e(68687),n=e(61082).tester;function r(s,l,u,d,c,w,m){var f,x=s._context.staticPlot;(function(ge,Ae,we,Ne,He){var de=we.xaxis,Le=we.yaxis,Ee=T.extent(a.simpleMap(de.range,de.r2c)),Re=T.extent(a.simpleMap(Le.range,Le.r2c)),je=Ne[0].trace;if(o.hasMarkers(je)){var Fe=je.marker.maxdisplayed;if(Fe!==0){var Xe=Ne.filter(function(ot){return ot.x>=Ee[0]&&ot.x<=Ee[1]&&ot.y>=Re[0]&&ot.y<=Re[1]}),Ze=Math.ceil(Xe.length/Fe),at=0;He.forEach(function(ot,bt){var wt=ot[0].trace;o.hasMarkers(wt)&&wt.marker.maxdisplayed>0&&bt<Ae&&at++});var lt=Math.round(at*Ze/3+Math.floor(at/3)*Ze/7.1);Ne.forEach(function(ot){delete ot.vis}),Xe.forEach(function(ot,bt){Math.round((bt+lt)%Ze)===0&&(ot.vis=!0)})}}})(0,l,u,d,c);var y=!!m&&m.duration>0;function v(ge){return y?ge.transition():ge}var M=u.xaxis,p=u.yaxis,S=d[0].trace,A=S.line,k=T.select(w),C=_(k,"g","errorbars"),P=_(k,"g","lines"),R=_(k,"g","points"),O=_(k,"g","text");if(b.getComponentMethod("errorbars","plot")(s,C,u,m),S.visible===!0){var X,D;v(k).style("opacity",S.opacity);var V=S.fill.charAt(S.fill.length-1);V!=="x"&&V!=="y"&&(V=""),d[0][u.isRangePlot?"nodeRangePlot3":"node3"]=k;var j,B,W="",q=[],re=S._prevtrace;re&&(W=re._prevRevpath||"",D=re._nextFill,q=re._polygons);var ee,K,Y,$,ne,ae,se,ce="",me="",ye=[],Te=a.noop;if(X=S._ownFill,o.hasLines(S)||S.fill!=="none"){for(D&&D.datum(d),["hv","vh","hvh","vhv"].indexOf(A.shape)!==-1?(ee=h.steps(A.shape),K=h.steps(A.shape.split("").reverse().join(""))):ee=K=A.shape==="spline"?function(ge){var Ae=ge[ge.length-1];return ge.length>1&&ge[0][0]===Ae[0]&&ge[0][1]===Ae[1]?h.smoothclosed(ge.slice(1),A.smoothing):h.smoothopen(ge,A.smoothing)}:function(ge){return"M"+ge.join("L")},Y=function(ge){return K(ge.reverse())},ye=t(d,{xaxis:M,yaxis:p,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(A.width||1,3)/4,shape:A.shape,backoff:A.backoff,simplify:A.simplify,fill:S.fill}),se=S._polygons=new Array(ye.length),f=0;f<ye.length;f++)S._polygons[f]=n(ye[f]);ye.length&&($=ye[0][0],ae=(ne=ye[ye.length-1])[ne.length-1]),Te=function(ge){return function(Ae){if(j=ee(Ae),B=Y(Ae),ce?V?(ce+="L"+j.substr(1),me=B+"L"+me.substr(1)):(ce+="Z"+j,me=B+"Z"+me):(ce=j,me=B),o.hasLines(S)){var we=T.select(this);if(we.datum(d),ge)v(we.style("opacity",0).attr("d",j).call(h.lineGroupStyle)).style("opacity",1);else{var Ne=v(we);Ne.attr("d",j),h.singleLineStyle(d,Ne)}}}}}var Ce=P.selectAll(".js-line").data(ye);v(Ce.exit()).style("opacity",0).remove(),Ce.each(Te(!1)),Ce.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(h.lineGroupStyle).each(Te(!0)),h.setClipUrl(Ce,u.layerClipId,s),ye.length?(X?(X.datum(d),$&&ae&&(V?(V==="y"?$[1]=ae[1]=p.c2p(0,!0):V==="x"&&($[0]=ae[0]=M.c2p(0,!0)),v(X).attr("d","M"+ae+"L"+$+"L"+ce.substr(1)).call(h.singleFillStyle,s)):v(X).attr("d",ce+"Z").call(h.singleFillStyle,s))):D&&(S.fill.substr(0,6)==="tonext"&&ce&&W?(S.fill==="tonext"?v(D).attr("d",ce+"Z"+W+"Z").call(h.singleFillStyle,s):v(D).attr("d",ce+"L"+W.substr(1)+"Z").call(h.singleFillStyle,s),S._polygons=S._polygons.concat(q)):(fe(D),S._polygons=null)),S._prevRevpath=me,S._prevPolygons=se):(X?fe(X):D&&fe(D),S._polygons=S._prevRevpath=S._prevPolygons=null),R.datum(d),O.datum(d),function(ge,Ae,we){var Ne,He=we[0].trace,de=o.hasMarkers(He),Le=o.hasText(He),Ee=le(He),Re=ie,je=ie;if(de||Le){var Fe=g,Xe=He.stackgroup,Ze=Xe&&s._fullLayout._scatterStackOpts[M._id+p._id][Xe].stackgaps==="infer zero";He.marker.maxdisplayed||He._needsCull?Fe=Ze?Se:Oe:Xe&&!Ze&&(Fe=Me),de&&(Re=Fe),Le&&(je=Fe)}var at,lt=(Ne=ge.selectAll("path.point").data(Re,Ee)).enter().append("path").classed("point",!0);y&&lt.call(h.pointStyle,He,s).call(h.translatePoints,M,p).style("opacity",0).transition().style("opacity",1),Ne.order(),de&&(at=h.makePointStyleFns(He)),Ne.each(function(ot){var bt=T.select(this),wt=v(bt);h.translatePoint(ot,wt,M,p)?(h.singlePointStyle(ot,wt,He,at,s),u.layerClipId&&h.hideOutsideRangePoint(ot,wt,M,p,He.xcalendar,He.ycalendar),He.customdata&&bt.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):wt.remove()}),y?Ne.exit().transition().style("opacity",0).remove():Ne.exit().remove(),(Ne=Ae.selectAll("g").data(je,Ee)).enter().append("g").classed("textpoint",!0).append("text"),Ne.order(),Ne.each(function(ot){var bt=T.select(this),wt=v(bt.select("text"));h.translatePoint(ot,wt,M,p)?u.layerClipId&&h.hideOutsideRangePoint(ot,bt,M,p,He.xcalendar,He.ycalendar):bt.remove()}),Ne.selectAll("text").call(h.textPointStyle,He,s).each(function(ot){var bt=M.c2p(ot.x),wt=p.c2p(ot.y);T.select(this).selectAll("tspan.line").each(function(){v(T.select(this)).attr({x:bt,y:wt})})}),Ne.exit().remove()}(R,O,d);var pe=S.cliponaxis===!1?null:u.layerClipId;h.setClipUrl(R,pe,s),h.setClipUrl(O,pe,s)}function fe(ge){v(ge).attr("d","M0,0Z")}function Oe(ge){return ge.filter(function(Ae){return!Ae.gap&&Ae.vis})}function Se(ge){return ge.filter(function(Ae){return Ae.vis})}function Me(ge){return ge.filter(function(Ae){return!Ae.gap})}function ue(ge){return ge.id}function le(ge){if(ge.ids)return ue}function ie(){return!1}}F.exports=function(s,l,u,d,c,w){var m,f,x=!c,y=!!c&&c.duration>0,v=i(s,l,u);(m=d.selectAll("g.trace").data(v,function(M){return M[0].trace.uid})).enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),m.order(),function(M,p,S){p.each(function(A){var k=_(T.select(this),"g","fills");h.setClipUrl(k,S.layerClipId,M);var C=A[0].trace,P=[];C._ownfill&&P.push("_ownFill"),C._nexttrace&&P.push("_nextFill");var R=k.selectAll("g").data(P,g);R.enter().append("g"),R.exit().each(function(O){C[O]=null}).remove(),R.order().each(function(O){C[O]=_(T.select(this),"path","js-fill")})})}(s,m,l),y?(w&&(f=w()),T.transition().duration(c.duration).ease(c.easing).each("end",function(){f&&f()}).each("interrupt",function(){f&&f()}).each(function(){d.selectAll("g.trace").each(function(M,p){r(s,p,l,M,v,this,c)})})):m.each(function(M,p){r(s,p,l,M,v,this,c)}),x&&m.exit().remove(),d.selectAll("path:not([d])").remove()}},98002:function(F,L,e){var T=e(34098);F.exports=function(b,a){var _,g,h,o,t=b.cd,i=b.xaxis,n=b.yaxis,r=[],s=t[0].trace;if(!T.hasMarkers(s)&&!T.hasText(s))return[];if(a===!1)for(_=0;_<t.length;_++)t[_].selected=0;else for(_=0;_<t.length;_++)g=t[_],h=i.c2p(g.x),o=n.c2p(g.y),g.i!==null&&a.contains([h,o],!1,_,b)?(r.push({pointNumber:g.i,x:i.c2d(g.x),y:n.c2d(g.y)}),g.selected=1):g.selected=0;return r}},565:function(F){var L=["orientation","groupnorm","stackgaps"];F.exports=function(e,T,b,a){var _=b._scatterStackOpts,g=a("stackgroup");if(g){var h=T.xaxis+T.yaxis,o=_[h];o||(o=_[h]={});var t=o[g],i=!1;t?t.traces.push(T):(t=o[g]={traceIndices:[],traces:[T]},i=!0);for(var n={orientation:T.x&&!T.y?"h":"v"},r=0;r<L.length;r++){var s=L[r],l=s+"Found";if(!t[l]){var u=e[s]!==void 0,d=s==="orientation";if((u||i)&&(t[s]=a(s,n[s]),d&&(t.fillDflt=t[s]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!i&&(delete t.traces[0][s],d))))for(var c=0;c<t.traces.length-1;c++){var w=t.traces[c];w._input.fill!==w.fill&&(w.fill=t.fillDflt)}}}return t}}},16296:function(F,L,e){var T=e(39898),b=e(91424),a=e(73972);function _(h,o,t){b.pointStyle(h.selectAll("path.point"),o,t)}function g(h,o,t){b.textPointStyle(h.selectAll("text"),o,t)}F.exports={style:function(h){var o=T.select(h).selectAll("g.trace.scatter");o.style("opacity",function(t){return t[0].trace.opacity}),o.selectAll("g.points").each(function(t){_(T.select(this),t.trace||t[0].trace,h)}),o.selectAll("g.text").each(function(t){g(T.select(this),t.trace||t[0].trace,h)}),o.selectAll("g.trace path.js-line").call(b.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(b.fillGroupStyle,h),a.getComponentMethod("errorbars","style")(o)},stylePoints:_,styleText:g,styleOnSelect:function(h,o,t){var i=o[0].trace;i.selectedpoints?(b.selectedPointStyle(t.selectAll("path.point"),i),b.selectedTextStyle(t.selectAll("text"),i)):(_(t,i,h),g(t,i,h))}}},34098:function(F,L,e){var T=e(71828);F.exports={hasLines:function(b){return b.visible&&b.mode&&b.mode.indexOf("lines")!==-1},hasMarkers:function(b){return b.visible&&(b.mode&&b.mode.indexOf("markers")!==-1||b.type==="splom")},hasText:function(b){return b.visible&&b.mode&&b.mode.indexOf("text")!==-1},isBubble:function(b){return T.isPlainObject(b.marker)&&T.isArrayOrTypedArray(b.marker.size)}}},82410:function(F,L,e){var T=e(71828);F.exports=function(b,a,_,g,h){h=h||{},g("textposition"),T.coerceFont(g,"textfont",h.font||_.font),h.noSelect||(g("selected.textfont.color"),g("unselected.textfont.color"))}},67513:function(F,L,e){var T=e(71828),b=e(73972);F.exports=function(a,_,g,h){var o,t=h("x"),i=h("y");if(b.getComponentMethod("calendars","handleTraceDefaults")(a,_,["x","y"],g),t){var n=T.minRowLength(t);i?o=Math.min(n,T.minRowLength(i)):(o=n,h("y0"),h("dy"))}else{if(!i)return 0;o=T.minRowLength(i),h("x0"),h("dx")}return _._length=o,o}},44542:function(F,L,e){var T=e(82196),b=e(50693),a=e(12663).axisHoverFormat,_=e(5386).fF,g=e(5386).si,h=e(9012),o=e(29659),t=e(87381),i=e(1426).extendFlat,n=e(30962).overrideAll,r=e(78607),s=T.line,l=T.marker,u=l.line,d=i({width:s.width,dash:{valType:"enumerated",values:r(o),dflt:"solid"}},b("line")),c=F.exports=n({x:T.x,y:T.y,z:{valType:"data_array"},text:i({},T.text,{}),texttemplate:g({},{}),hovertext:i({},T.hovertext,{}),hovertemplate:_(),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),mode:i({},T.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:T.connectgaps,line:d,marker:i({symbol:{valType:"enumerated",values:r(t),dflt:"circle",arrayOk:!0},size:i({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:i({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:i({width:i({},u.width,{arrayOk:!1})},b("marker.line"))},b("marker")),textposition:i({},T.textposition,{dflt:"top center"}),textfont:{color:T.textfont.color,size:T.textfont.size,family:i({},T.textfont.family,{arrayOk:!1})},opacity:h.opacity,hoverinfo:i({},h.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},36563:function(F,L,e){var T=e(75225),b=e(36922);F.exports=function(a,_){var g=[{x:!1,y:!1,trace:_,t:{}}];return T(g,_),b(a,_),g}},67336:function(F,L,e){var T=e(73972);function b(a,_,g,h){if(!_||!_.visible)return null;for(var o=T.getComponentMethod("errorbars","makeComputeError")(_),t=new Array(a.length),i=0;i<a.length;i++){var n=o(+a[i],i);if(h.type==="log"){var r=h.c2l(a[i]),s=a[i]-n[0],l=a[i]+n[1];if(t[i]=[(h.c2l(s,!0)-r)*g,(h.c2l(l,!0)-r)*g],s>0){var u=h.c2l(s);h._lowerLogErrorBound||(h._lowerLogErrorBound=u),h._lowerErrorBound=Math.min(h._lowerLogErrorBound,u)}}else t[i]=[-n[0]*g,n[1]*g]}return t}F.exports=function(a,_,g){var h=[b(a.x,a.error_x,_[0],g.xaxis),b(a.y,a.error_y,_[1],g.yaxis),b(a.z,a.error_z,_[2],g.zaxis)],o=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(h);if(o===0)return null;for(var t=new Array(o),i=0;i<o;i++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(h[r])for(var s=0;s<2;s++)n[s][r]=h[r][i][s];t[i]=n}return t}},58925:function(F,L,e){var T=e(9330).gl_line3d,b=e(9330).gl_scatter3d,a=e(9330).gl_error3d,_=e(9330).gl_mesh3d,g=e(9330).delaunay_triangulate,h=e(71828),o=e(78614),t=e(81697).formatColor,i=e(39984),n=e(29659),r=e(87381),s=e(89298),l=e(23469).appendArrayPointValue,u=e(67336);function d(p,S){this.scene=p,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=d.prototype;function w(p){return p==null?0:p.indexOf("left")>-1?-1:p.indexOf("right")>-1?1:0}function m(p){return p==null?0:p.indexOf("top")>-1?-1:p.indexOf("bottom")>-1?1:0}function f(p,S){return S(4*p)}function x(p){return r[p]}function y(p,S,A,k,C){var P=null;if(h.isArrayOrTypedArray(p)){P=[];for(var R=0;R<S;R++)p[R]===void 0?P[R]=k:P[R]=A(p[R],C)}else P=A(p,h.identity);return P}function v(p){if(h.isArrayOrTypedArray(p)){var S=p[0];return h.isArrayOrTypedArray(S)&&(p=S),"rgb("+p.slice(0,3).map(function(A){return Math.round(255*A)})+")"}return null}function M(p){return h.isArrayOrTypedArray(p)?p.length===4&&typeof p[0]=="number"?v(p):p.map(v):null}c.handlePick=function(p){if(p.object&&(p.object===this.linePlot||p.object===this.delaunayMesh||p.object===this.textMarkers||p.object===this.scatterPlot)){var S=p.index=p.data.index;return p.object.highlight&&p.object.highlight(null),this.scatterPlot&&(p.object=this.scatterPlot,this.scatterPlot.highlight(p.data)),p.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(p.textLabel=this.textLabels[S]):p.textLabel=this.textLabels),p.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(p){var S,A,k,C,P=this.scene.glplot.gl,R=n.solid;this.data=p;var O=function(V,j){var B,W,q,re,ee,K,Y=[],$=V.fullSceneLayout,ne=V.dataScale,ae=$.xaxis,se=$.yaxis,ce=$.zaxis,me=j.marker,ye=j.line,Te=j.x||[],Ce=j.y||[],pe=j.z||[],fe=Te.length,Oe=j.xcalendar,Se=j.ycalendar,Me=j.zcalendar;for(ee=0;ee<fe;ee++)B=ae.d2l(Te[ee],0,Oe)*ne[0],W=se.d2l(Ce[ee],0,Se)*ne[1],q=ce.d2l(pe[ee],0,Me)*ne[2],Y[ee]=[B,W,q];if(Array.isArray(j.text))K=j.text;else if(j.text!==void 0)for(K=new Array(fe),ee=0;ee<fe;ee++)K[ee]=j.text;function ue(Xe,Ze){var at=$[Xe];return s.tickText(at,at.d2l(Ze),!0).text}var le=j.texttemplate;if(le){var ie=V.fullLayout._d3locale,ge=Array.isArray(le),Ae=ge?Math.min(le.length,fe):fe,we=ge?function(Xe){return le[Xe]}:function(){return le};for(K=new Array(Ae),ee=0;ee<Ae;ee++){var Ne={x:Te[ee],y:Ce[ee],z:pe[ee]},He={xLabel:ue("xaxis",Te[ee]),yLabel:ue("yaxis",Ce[ee]),zLabel:ue("zaxis",pe[ee])},de={};l(de,j,ee);var Le=j._meta||{};K[ee]=h.texttemplateString(we(ee),He,ie,de,Ne,Le)}}if(re={position:Y,mode:j.mode,text:K},"line"in j&&(re.lineColor=t(ye,1,fe),re.lineWidth=ye.width,re.lineDashes=ye.dash),"marker"in j){var Ee=i(j);re.scatterColor=t(me,1,fe),re.scatterSize=y(me.size,fe,f,20,Ee),re.scatterMarker=y(me.symbol,fe,x,""),re.scatterLineWidth=me.line.width,re.scatterLineColor=t(me.line,1,fe),re.scatterAngle=0}"textposition"in j&&(re.textOffset=function(Xe){var Ze=[0,0];if(Array.isArray(Xe))for(var at=0;at<Xe.length;at++)Ze[at]=[0,0],Xe[at]&&(Ze[at][0]=w(Xe[at]),Ze[at][1]=m(Xe[at]));else Ze[0]=w(Xe),Ze[1]=m(Xe);return Ze}(j.textposition),re.textColor=t(j.textfont,1,fe),re.textSize=y(j.textfont.size,fe,h.identity,12),re.textFont=j.textfont.family,re.textAngle=0);var Re=["x","y","z"];for(re.project=[!1,!1,!1],re.projectScale=[1,1,1],re.projectOpacity=[1,1,1],ee=0;ee<3;++ee){var je=j.projection[Re[ee]];(re.project[ee]=je.show)&&(re.projectOpacity[ee]=je.opacity,re.projectScale[ee]=je.scale)}re.errorBounds=u(j,ne,$);var Fe=function(Xe){for(var Ze=[0,0,0],at=[[0,0,0],[0,0,0],[0,0,0]],lt=[1,1,1],ot=0;ot<3;ot++){var bt=Xe[ot];bt&&bt.copy_zstyle!==!1&&Xe[2].visible!==!1&&(bt=Xe[2]),bt&&bt.visible&&(Ze[ot]=bt.width/2,at[ot]=o(bt.color),lt[ot]=bt.thickness)}return{capSize:Ze,color:at,lineWidth:lt}}([j.error_x,j.error_y,j.error_z]);return re.errorColor=Fe.color,re.errorLineWidth=Fe.lineWidth,re.errorCapSize=Fe.capSize,re.delaunayAxis=j.surfaceaxis,re.delaunayColor=o(j.surfacecolor),re}(this.scene,p);"mode"in O&&(this.mode=O.mode),"lineDashes"in O&&O.lineDashes in n&&(R=n[O.lineDashes]),this.color=M(O.scatterColor)||M(O.lineColor),this.dataPoints=O.position,S={gl:this.scene.glplot.gl,position:O.position,color:O.lineColor,lineWidth:O.lineWidth||1,dashes:R[0],dashScale:R[1],opacity:p.opacity,connectGaps:p.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=T(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var X=p.opacity;if(p.marker&&p.marker.opacity!==void 0&&(X*=p.marker.opacity),A={gl:this.scene.glplot.gl,position:O.position,color:O.scatterColor,size:O.scatterSize,glyph:O.scatterMarker,opacity:X,orthographic:!0,lineWidth:O.scatterLineWidth,lineColor:O.scatterLineColor,project:O.project,projectScale:O.projectScale,projectOpacity:O.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(A):(this.scatterPlot=b(A),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),C={gl:this.scene.glplot.gl,position:O.position,glyph:O.text,color:O.textColor,size:O.textSize,angle:O.textAngle,alignment:O.textOffset,font:O.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:p.opacity},this.textLabels=p.hovertext||p.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(C):(this.textMarkers=b(C),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),k={gl:this.scene.glplot.gl,position:O.position,color:O.errorColor,error:O.errorBounds,lineWidth:O.errorLineWidth,capSize:O.errorCapSize,opacity:p.opacity},this.errorBars?O.errorBounds?this.errorBars.update(k):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):O.errorBounds&&(this.errorBars=a(k),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),O.delaunayAxis>=0){var D=function(V,j,B){var W,q=(B+1)%3,re=(B+2)%3,ee=[],K=[];for(W=0;W<V.length;++W){var Y=V[W];!isNaN(Y[q])&&isFinite(Y[q])&&!isNaN(Y[re])&&isFinite(Y[re])&&(ee.push([Y[q],Y[re]]),K.push(W))}var $=g(ee);for(W=0;W<$.length;++W)for(var ne=$[W],ae=0;ae<ne.length;++ae)ne[ae]=K[ne[ae]];return{positions:V,cells:$,meshColor:j}}(O.position,O.delaunayColor,O.delaunayAxis);D.opacity=p.opacity,this.delaunayMesh?this.delaunayMesh.update(D):(D.gl=P,this.delaunayMesh=_(D),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},F.exports=function(p,S){var A=new d(p,S.uid);return A.update(S),A}},21428:function(F,L,e){var T=e(73972),b=e(71828),a=e(34098),_=e(49508),g=e(11058),h=e(82410),o=e(44542);F.exports=function(t,i,n,r){function s(x,y){return b.coerce(t,i,o,x,y)}var l=function(x,y,v,M){var p=0,S=v("x"),A=v("y"),k=v("z");return T.getComponentMethod("calendars","handleTraceDefaults")(x,y,["x","y","z"],M),S&&A&&k&&(p=Math.min(S.length,A.length,k.length),y._length=y._xlength=y._ylength=y._zlength=p),p}(t,i,s,r);if(l){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),a.hasLines(i)&&(s("connectgaps"),g(t,i,n,r,s)),a.hasMarkers(i)&&_(t,i,n,r,s,{noSelect:!0,noAngle:!0}),a.hasText(i)&&(s("texttemplate"),h(t,i,r,s,{noSelect:!0}));var u=(i.line||{}).color,d=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",u||d);for(var c=["x","y","z"],w=0;w<3;++w){var m="projection."+c[w];s(m+".show")&&(s(m+".opacity"),s(m+".scale"))}var f=T.getComponentMethod("errorbars","supplyDefaults");f(t,i,u||d||n,{axis:"z"}),f(t,i,u||d||n,{axis:"y",inherit:"z"}),f(t,i,u||d||n,{axis:"x",inherit:"z"})}else i.visible=!1}},13551:function(F,L,e){F.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(F,L,e){var T=e(82196),b=e(9012),a=e(5386).fF,_=e(5386).si,g=e(50693),h=e(1426).extendFlat,o=T.marker,t=T.line,i=o.line;F.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:h({},T.mode,{dflt:"markers"}),text:h({},T.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:h({},T.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:h({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:T.connectgaps,fill:h({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:h({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,angle:o.angle,angleref:o.angleref,standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:h({width:i.width,editType:"calc"},g("marker.line")),gradient:o.gradient,editType:"calc"},g("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:h({},b.hoverinfo,{flags:["a","b","text","name"]}),hoveron:T.hoveron,hovertemplate:a()}},34618:function(F,L,e){var T=e(92770),b=e(36922),a=e(75225),_=e(66279),g=e(47761).calcMarkerSize,h=e(22882);F.exports=function(o,t){var i=t._carpetTrace=h(o,t);if(i&&i.visible&&i.visible!=="legendonly"){var n;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var r,s,l=t._length,u=new Array(l),d=!1;for(n=0;n<l;n++)if(r=t.a[n],s=t.b[n],T(r)&&T(s)){var c=i.ab2xy(+r,+s,!0),w=i.isVisible(+r,+s);w||(d=!0),u[n]={x:c[0],y:c[1],a:r,b:s,vis:w}}else u[n]={x:!1,y:!1};return t._needsCull=d,u[0].carpet=i,u[0].trace=t,g(t,l),b(o,t),a(u,t),_(u,t),u}}},98965:function(F,L,e){var T=e(71828),b=e(47581),a=e(34098),_=e(49508),g=e(11058),h=e(94039),o=e(82410),t=e(28908),i=e(97001);F.exports=function(n,r,s,l){function u(f,x){return T.coerce(n,r,i,f,x)}u("carpet"),r.xaxis="x",r.yaxis="y";var d=u("a"),c=u("b"),w=Math.min(d.length,c.length);if(w){r._length=w,u("text"),u("texttemplate"),u("hovertext"),u("mode",w<b.PTS_LINESONLY?"lines+markers":"lines"),a.hasLines(r)&&(g(n,r,s,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),a.hasMarkers(r)&&_(n,r,s,l,u,{gradient:!0}),a.hasText(r)&&o(n,r,l,u);var m=[];(a.hasMarkers(r)||a.hasText(r))&&(u("marker.maxdisplayed"),m.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,s,u),a.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||m.push("fills"),u("hoveron",m.join("+")||"points")!=="fills"&&u("hovertemplate"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},16165:function(F){F.exports=function(L,e,T,b,a){var _=b[a];return L.a=_.a,L.b=_.b,L.y=_.y,L}},48953:function(F){F.exports=function(L,e){var T={},b=e._carpet,a=b.ab2ij([L.a,L.b]),_=Math.floor(a[0]),g=a[0]-_,h=Math.floor(a[1]),o=a[1]-h,t=b.evalxy([],_,h,g,o);return T.yLabel=t[1].toFixed(3),T}},22931:function(F,L,e){var T=e(33720),b=e(71828).fillText;F.exports=function(a,_,g,h){var o=T(a,_,g,h);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0){var i=1-t.y0/a.ya._length,n=a.xa._length,r=n*i/2,s=n-r;return t.x0=Math.max(Math.min(t.x0,s),r),t.x1=Math.max(Math.min(t.x1,s),r),o}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,d=u._carpet,c=u._module.formatLabels(l,u);t.yLabel=c.yLabel,delete t.text;var w=[];if(!u.hovertemplate){var m=(l.hi||u.hoverinfo).split("+");m.indexOf("all")!==-1&&(m=["a","b","text"]),m.indexOf("a")!==-1&&f(d.aaxis,l.a),m.indexOf("b")!==-1&&f(d.baxis,l.b),w.push("y: "+t.yLabel),m.indexOf("text")!==-1&&b(l,u,w),t.extraText=w.join("<br>")}return o}function f(x,y){var v;v=x.labelprefix&&x.labelprefix.length>0?x.labelprefix.replace(/ = $/,""):x._hovertitle,w.push(v+": "+y.toFixed(3)+x.labelsuffix)}}},46858:function(F,L,e){F.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(F,L,e){var T=e(32663),b=e(89298),a=e(91424);F.exports=function(_,g,h,o){var t,i,n,r=h[0][0].carpet,s=b.getFromId(_,r.xaxis||"x"),l=b.getFromId(_,r.yaxis||"y"),u={xaxis:s,yaxis:l,plot:g.plot};for(t=0;t<h.length;t++)(i=h[t][0].trace)._xA=s,i._yA=l;for(T(_,u,h,o),t=0;t<h.length;t++)i=h[t][0].trace,n=o.selectAll("g.trace"+i.uid+" .js-line"),a.setClipUrl(n,h[t][0].carpet._clipPathId,_)}},19316:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(82196),_=e(9012),g=e(50693),h=e(79952).P,o=e(1426).extendFlat,t=e(30962).overrideAll,i=a.marker,n=a.line,r=i.line;F.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:o({},a.mode,{dflt:"markers"}),text:o({},a.text,{}),texttemplate:b({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:o({},a.hovertext,{}),textfont:a.textfont,textposition:a.textposition,line:{color:n.color,width:n.width,dash:h},connectgaps:a.connectgaps,marker:o({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:o({},i.angleref,{values:["previous","up","north"]}),standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:o({width:r.width},g("marker.line")),gradient:i.gradient},g("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:a.fillcolor,selected:a.selected,unselected:a.unselected,hoverinfo:o({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:T()},"calc","nested")},84622:function(F,L,e){var T=e(92770),b=e(50606).BADNUM,a=e(36922),_=e(75225),g=e(66279),h=e(71828)._;function o(t){return t&&typeof t=="string"}F.exports=function(t,i){var n,r=Array.isArray(i.locations),s=r?i.locations.length:i._length,l=new Array(s);n=i.geojson?function(f){return o(f)||T(f)}:o;for(var u=0;u<s;u++){var d=l[u]={};if(r){var c=i.locations[u];d.loc=n(c)?c:null}else{var w=i.lon[u],m=i.lat[u];T(w)&&T(m)?d.lonlat=[+w,+m]:d.lonlat=[b,b]}}return _(l,i),a(t,i),g(l,i),s&&(l[0].t={labels:{lat:h(t,"lat:")+" ",lon:h(t,"lon:")+" "}}),l}},10659:function(F,L,e){var T=e(71828),b=e(34098),a=e(49508),_=e(11058),g=e(82410),h=e(28908),o=e(19316);F.exports=function(t,i,n,r){function s(f,x){return T.coerce(t,i,o,f,x)}var l,u=s("locations");if(u&&u.length){var d,c=s("geojson");(typeof c=="string"&&c!==""||T.isPlainObject(c))&&(d="geojson-id"),s("locationmode",d)==="geojson-id"&&s("featureidkey"),l=u.length}else{var w=s("lon")||[],m=s("lat")||[];l=Math.min(w.length,m.length)}l?(i._length=l,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),b.hasLines(i)&&(_(t,i,n,r,s),s("connectgaps")),b.hasMarkers(i)&&a(t,i,n,r,s,{gradient:!0}),b.hasText(i)&&(s("texttemplate"),g(t,i,r,s)),s("fill"),i.fill!=="none"&&h(t,i,n,s),T.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},84084:function(F){F.exports=function(L,e,T,b,a){L.lon=e.lon,L.lat=e.lat,L.location=e.loc?e.loc:null;var _=b[a];return _.fIn&&_.fIn.properties&&(L.properties=_.fIn.properties),L}},82719:function(F,L,e){var T=e(89298);F.exports=function(b,a,_){var g={},h=_[a.geo]._subplot.mockAxis,o=b.lonlat;return g.lonLabel=T.tickText(h,h.c2l(o[0]),!0).text,g.latLabel=T.tickText(h,h.c2l(o[1]),!0).text,g}},14977:function(F,L,e){var T=e(30211),b=e(50606).BADNUM,a=e(34603),_=e(71828).fillText,g=e(19316);F.exports=function(h,o,t){var i=h.cd,n=i[0].trace,r=h.xa,s=h.ya,l=h.subplot,u=l.projection.isLonLatOverEdges,d=l.project;if(T.getClosest(i,function(v){var M=v.lonlat;if(M[0]===b||u(M))return 1/0;var p=d(M),S=d([o,t]),A=Math.abs(p[0]-S[0]),k=Math.abs(p[1]-S[1]),C=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(A*A+k*k)-C,1-3/C)},h),h.index!==!1){var c=i[h.index],w=c.lonlat,m=[r.c2p(w),s.c2p(w)],f=c.mrc||1;h.x0=m[0]-f,h.x1=m[0]+f,h.y0=m[1]-f,h.y1=m[1]+f,h.loc=c.loc,h.lon=w[0],h.lat=w[1];var x={};x[n.geo]={_subplot:l};var y=n._module.formatLabels(c,n,x);return h.lonLabel=y.lonLabel,h.latLabel=y.latLabel,h.color=a(n,c),h.extraText=function(v,M,p,S){if(!v.hovertemplate){var A=M.hi||v.hoverinfo,k=A==="all"?g.hoverinfo.flags:A.split("+"),C=k.indexOf("location")!==-1&&Array.isArray(v.locations),P=k.indexOf("lon")!==-1,R=k.indexOf("lat")!==-1,O=k.indexOf("text")!==-1,X=[];return C?X.push(M.loc):P&&R?X.push("("+D(p.latLabel)+", "+D(p.lonLabel)+")"):P?X.push(S.lon+D(p.lonLabel)):R&&X.push(S.lat+D(p.latLabel)),O&&_(M,v,X),X.join("<br>")}function D(V){return V+""}}(n,c,h,i[0].t.labels),h.hovertemplate=n.hovertemplate,[h]}}},17988:function(F,L,e){F.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(F,L,e){var T=e(39898),b=e(71828),a=e(90973).getTopojsonFeatures,_=e(18214),g=e(41327),h=e(71739).findExtremes,o=e(50606).BADNUM,t=e(47761).calcMarkerSize,i=e(34098),n=e(33095);F.exports={calcGeoJSON:function(r,s){var l,u,d=r[0].trace,c=s[d.geo],w=c._subplot,m=d._length;if(Array.isArray(d.locations)){var f=d.locationmode,x=f==="geojson-id"?g.extractTraceFeature(r):a(d,w.topojson);for(l=0;l<m;l++){u=r[l];var y=f==="geojson-id"?u.fOut:g.locationToFeature(f,u.loc,x);u.lonlat=y?y.properties.ct:[o,o]}}var v,M,p={padded:!0};if(c.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=g.computeBbox(g.getTraceGeojson(d));v=[S[0],S[2]],M=[S[1],S[3]]}else{for(v=new Array(m),M=new Array(m),l=0;l<m;l++)u=r[l],v[l]=u.lonlat[0],M[l]=u.lonlat[1];p.ppad=t(d,m)}d._extremes.lon=h(c.lonaxis._ax,v,p),d._extremes.lat=h(c.lataxis._ax,M,p)},plot:function(r,s,l){var u=s.layers.frontplot.select(".scatterlayer"),d=b.makeTraceGroups(u,l,"trace scattergeo");function c(w,m){w.lonlat[0]===o&&T.select(m).remove()}d.selectAll("*").remove(),d.each(function(w){var m=T.select(this),f=w[0].trace;if(i.hasLines(f)||f.fill!=="none"){var x=_.calcTraceToLineCoords(w),y=f.fill!=="none"?_.makePolygon(x):_.makeLine(x);m.selectAll("path.js-line").data([{geojson:y,trace:f}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(f)&&m.selectAll("path.point").data(b.identity).enter().append("path").classed("point",!0).each(function(v){c(v,this)}),i.hasText(f)&&m.selectAll("g").data(b.identity).enter().append("g").append("text").each(function(v){c(v,this)}),n(r,w)})}}},20548:function(F,L,e){var T=e(34098),b=e(50606).BADNUM;F.exports=function(a,_){var g,h,o,t,i,n=a.cd,r=a.xaxis,s=a.yaxis,l=[],u=n[0].trace;if(!T.hasMarkers(u)&&!T.hasText(u))return[];if(_===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++)(h=(g=n[i]).lonlat)[0]!==b&&(o=r.c2p(h),t=s.c2p(h),_.contains([o,t],null,i,a)?(l.push({pointNumber:i,lon:h[0],lat:h[1]}),g.selected=1):g.selected=0);return l}},33095:function(F,L,e){var T=e(39898),b=e(91424),a=e(7901),_=e(16296),g=_.stylePoints,h=_.styleText;F.exports=function(o,t){t&&function(i,n){var r=n[0].trace,s=n[0].node3;s.style("opacity",n[0].trace.opacity),g(s,r,i),h(s,r,i),s.selectAll("path.js-line").style("fill","none").each(function(l){var u=T.select(this),d=l.trace,c=d.line||{};u.call(a.stroke,c.color).call(b.dashLine,c.dash||"",c.width||0),d.fill!=="none"&&u.call(a.fill,d.fillcolor)})}(o,t)}},42341:function(F,L,e){var T=e(9012),b=e(82196),a=e(12663).axisHoverFormat,_=e(50693),g=e(78607),h=e(1426).extendFlat,o=e(30962).overrideAll,t=e(78232).DASHES,i=b.line,n=b.marker,r=n.line,s=F.exports=o({x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:b.text,hovertext:b.hovertext,textposition:b.textposition,textfont:b.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:g(t),dflt:"solid"}},marker:h({},_("marker"),{symbol:n.symbol,angle:n.angle,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:h({},_("marker.line"),{width:r.width})}),connectgaps:b.connectgaps,fill:h({},b.fill,{dflt:"none"}),fillcolor:b.fillcolor,selected:{marker:b.selected.marker,textfont:b.selected.textfont},unselected:{marker:b.unselected.marker,textfont:b.unselected.textfont},opacity:T.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=b.hovertemplate,s.texttemplate=b.texttemplate},72156:function(F,L,e){var T=e(20794);F.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:T.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function(F,L,e){var T=e(88294),b=e(71828),a=e(41675),_=e(71739).findExtremes,g=e(42973),h=e(47761),o=h.calcMarkerSize,t=h.calcAxisExpansion,i=h.setFirstScatter,n=e(36922),r=e(19635),s=e(38967),l=e(50606).BADNUM,u=e(78232).TOO_MANY_POINTS;function d(c,w,m){var f=c._extremes[w._id],x=_(w,m._bnds,{padded:!0});f.min=f.min.concat(x.min),f.max=f.max.concat(x.max)}F.exports=function(c,w){var m,f=c._fullLayout,x=w._xA=a.getFromId(c,w.xaxis,"x"),y=w._yA=a.getFromId(c,w.yaxis,"y"),v=f._plots[w.xaxis+w.yaxis],M=w._length,p=M>=u,S=2*M,A={},k=x.makeCalcdata(w,"x"),C=y.makeCalcdata(w,"y"),P=g(w,x,"x",k),R=g(w,y,"y",C),O=P.vals,X=R.vals;w._x=O,w._y=X,w.xperiodalignment&&(w._origX=k,w._xStarts=P.starts,w._xEnds=P.ends),w.yperiodalignment&&(w._origY=C,w._yStarts=R.starts,w._yEnds=R.ends);var D=new Array(S),V=new Array(M);for(m=0;m<M;m++)D[2*m]=O[m]===l?NaN:O[m],D[2*m+1]=X[m]===l?NaN:X[m],V[m]=m;if(x.type==="log")for(m=0;m<S;m+=2)D[m]=x.c2l(D[m]);if(y.type==="log")for(m=1;m<S;m+=2)D[m]=y.c2l(D[m]);p&&x.type!=="log"&&y.type!=="log"?A.tree=T(D):A.ids=V,n(c,w);var j,B=function(q,re,ee,K,Y,$){var ne=r.style(q,ee);if(ne.marker&&(ne.marker.positions=K),ne.line&&K.length>1&&b.extendFlat(ne.line,r.linePositions(q,ee,K)),ne.errorX||ne.errorY){var ae=r.errorBarPositions(q,ee,K,Y,$);ne.errorX&&b.extendFlat(ne.errorX,ae.x),ne.errorY&&b.extendFlat(ne.errorY,ae.y)}return ne.text&&(b.extendFlat(ne.text,{positions:K},r.textPosition(q,ee,ne.text,ne.marker)),b.extendFlat(ne.textSel,{positions:K},r.textPosition(q,ee,ne.text,ne.markerSel)),b.extendFlat(ne.textUnsel,{positions:K},r.textPosition(q,ee,ne.text,ne.markerUnsel))),ne}(c,0,w,D,O,X),W=s(c,v);return i(f,w),p?B.marker&&(j=B.marker.sizeAvg||Math.max(B.marker.size,3)):j=o(w,M),t(c,w,x,y,O,X,j),B.errorX&&d(w,x,B.errorX),B.errorY&&d(w,y,B.errorY),B.fill&&!W.fill2d&&(W.fill2d=!0),B.marker&&!W.scatter2d&&(W.scatter2d=!0),B.line&&!W.line2d&&(W.line2d=!0),!B.errorX&&!B.errorY||W.error2d||(W.error2d=!0),B.text&&!W.glText&&(W.glText=!0),B.marker&&(B.marker.snap=M),W.lineOptions.push(B.line),W.errorXOptions.push(B.errorX),W.errorYOptions.push(B.errorY),W.fillOptions.push(B.fill),W.markerOptions.push(B.marker),W.markerSelectedOptions.push(B.markerSel),W.markerUnselectedOptions.push(B.markerUnsel),W.textOptions.push(B.text),W.textSelectedOptions.push(B.textSel),W.textUnselectedOptions.push(B.textUnsel),W.selectBatch.push([]),W.unselectBatch.push([]),A._scene=W,A.index=W.count,A.x=O,A.y=X,A.positions=D,W.count++,[{x:!1,y:!1,t:A,trace:w}]}},78232:function(F){F.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(F,L,e){var T=e(92770),b=e(82019),a=e(25075),_=e(73972),g=e(71828),h=e(91424),o=e(41675),t=e(81697).formatColor,i=e(34098),n=e(39984),r=e(68645),s=e(78232),l=e(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=e(23469).appendArrayPointValue;function c(k,C){var P,R=k._fullLayout,O=C._length,X=C.textfont,D=C.textposition,V=Array.isArray(D)?D:[D],j=X.color,B=X.size,W=X.family,q={},re=k._context.plotGlPixelRatio,ee=C.texttemplate;if(ee){q.text=[];var K=R._d3locale,Y=Array.isArray(ee),$=Y?Math.min(ee.length,O):O,ne=Y?function(Ce){return ee[Ce]}:function(){return ee};for(P=0;P<$;P++){var ae={i:P},se=C._module.formatLabels(ae,C,R),ce={};d(ce,C,P);var me=C._meta||{};q.text.push(g.texttemplateString(ne(P),se,K,ce,ae,me))}}else Array.isArray(C.text)&&C.text.length<O?q.text=C.text.slice():q.text=C.text;if(Array.isArray(q.text))for(P=q.text.length;P<O;P++)q.text[P]="";for(q.opacity=C.opacity,q.font={},q.align=[],q.baseline=[],P=0;P<V.length;P++){var ye=V[P].split(/\s+/);switch(ye[1]){case"left":q.align.push("right");break;case"right":q.align.push("left");break;default:q.align.push(ye[1])}switch(ye[0]){case"top":q.baseline.push("bottom");break;case"bottom":q.baseline.push("top");break;default:q.baseline.push(ye[0])}}if(Array.isArray(j))for(q.color=new Array(O),P=0;P<O;P++)q.color[P]=j[P];else q.color=j;if(g.isArrayOrTypedArray(B)||Array.isArray(W))for(q.font=new Array(O),P=0;P<O;P++){var Te=q.font[P]={};Te.size=(g.isTypedArray(B)?B[P]:Array.isArray(B)?T(B[P])?B[P]:0:B)*re,Te.family=Array.isArray(W)?W[P]:W}else q.font={size:B*re,family:W};return q}function w(k,C){var P,R,O=C._length,X=C.marker,D={},V=g.isArrayOrTypedArray(X.symbol),j=g.isArrayOrTypedArray(X.angle),B=g.isArrayOrTypedArray(X.color),W=g.isArrayOrTypedArray(X.line.color),q=g.isArrayOrTypedArray(X.opacity),re=g.isArrayOrTypedArray(X.size),ee=g.isArrayOrTypedArray(X.line.width);if(V||(R=r.isOpenSymbol(X.symbol)),V||B||W||q||j){D.symbols=new Array(O),D.angles=new Array(O),D.colors=new Array(O),D.borderColors=new Array(O);var K=X.symbol,Y=X.angle,$=t(X,X.opacity,O),ne=t(X.line,X.opacity,O);if(!Array.isArray(ne[0])){var ae=ne;for(ne=Array(O),P=0;P<O;P++)ne[P]=ae}if(!Array.isArray($[0])){var se=$;for($=Array(O),P=0;P<O;P++)$[P]=se}if(!Array.isArray(K)){var ce=K;for(K=Array(O),P=0;P<O;P++)K[P]=ce}if(!Array.isArray(Y)){var me=Y;for(Y=Array(O),P=0;P<O;P++)Y[P]=me}for(D.symbols=K,D.angles=Y,D.colors=$,D.borderColors=ne,P=0;P<O;P++)V&&(R=r.isOpenSymbol(X.symbol[P])),R&&(ne[P]=$[P].slice(),$[P]=$[P].slice(),$[P][3]=0);for(D.opacity=C.opacity,D.markers=new Array(O),P=0;P<O;P++)D.markers[P]=A({mx:D.symbols[P],ma:D.angles[P]},C)}else R?(D.color=a(X.color,"uint8"),D.color[3]=0,D.borderColor=a(X.color,"uint8")):(D.color=a(X.color,"uint8"),D.borderColor=a(X.line.color,"uint8")),D.opacity=C.opacity*X.opacity,D.marker=A({mx:X.symbol,ma:X.angle},C);var ye,Te=n(C,1);if(re||ee){var Ce,pe=D.sizes=new Array(O),fe=D.borderSizes=new Array(O),Oe=0;if(re){for(P=0;P<O;P++)pe[P]=Te(X.size[P]),Oe+=pe[P];Ce=Oe/O}else for(ye=Te(X.size),P=0;P<O;P++)pe[P]=ye;if(ee)for(P=0;P<O;P++)fe[P]=X.line.width[P];else for(ye=X.line.width,P=0;P<O;P++)fe[P]=ye;D.sizeAvg=Ce}else D.size=Te(X&&X.size||10),D.borderSizes=Te(X.line.width);return D}function m(k,C,P){var R=C.marker,O={};return P&&(P.marker&&P.marker.symbol?O=w(0,g.extendFlat({},R,P.marker)):P.marker&&(P.marker.size&&(O.size=P.marker.size),P.marker.color&&(O.colors=P.marker.color),P.marker.opacity!==void 0&&(O.opacity=P.marker.opacity))),O}function f(k,C,P){var R={};if(!P)return R;if(P.textfont){var O={opacity:1,text:C.text,texttemplate:C.texttemplate,textposition:C.textposition,textfont:g.extendFlat({},C.textfont)};P.textfont&&g.extendFlat(O.textfont,P.textfont),R=c(k,O)}return R}function x(k,C,P){var R={capSize:2*C.width*P,lineWidth:C.thickness*P,color:C.color};return C.copy_ystyle&&(R=k.error_y),R}var y=s.SYMBOL_SDF_SIZE,v=s.SYMBOL_SIZE,M=s.SYMBOL_STROKE,p={},S=h.symbolFuncs[0](.05*v);function A(k,C){var P,R,O=k.mx;if(O==="circle")return null;var X=h.symbolNumber(O),D=h.symbolFuncs[X%100],V=!!h.symbolNoDot[X%100],j=!!h.symbolNoFill[X%100],B=r.isDotSymbol(O);if(k.ma&&(O+="_"+k.ma),p[O])return p[O];var W=h.getMarkerAngle(k,C);return P=B&&!V?D(1.1*v,W)+S:D(v,W),R=b(P,{w:y,h:y,viewBox:[-v,-v,v,v],stroke:j?M:-M}),p[O]=R,R||null}F.exports={style:function(k,C){var P,R={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},O=k._context.plotGlPixelRatio;if(C.visible!==!0)return R;if(i.hasText(C)&&(R.text=c(k,C),R.textSel=f(k,C,C.selected),R.textUnsel=f(k,C,C.unselected)),i.hasMarkers(C)&&(R.marker=w(0,C),R.markerSel=m(0,C,C.selected),R.markerUnsel=m(0,C,C.unselected),!C.unselected&&g.isArrayOrTypedArray(C.marker.opacity))){var X=C.marker.opacity;for(R.markerUnsel.opacity=new Array(X.length),P=0;P<X.length;P++)R.markerUnsel.opacity[P]=l*X[P]}if(i.hasLines(C)){R.line={overlay:!0,thickness:C.line.width*O,color:C.line.color,opacity:C.opacity};var D=(s.DASHES[C.line.dash]||[1]).slice();for(P=0;P<D.length;++P)D[P]*=C.line.width*O;R.line.dashes=D}return C.error_x&&C.error_x.visible&&(R.errorX=x(C,C.error_x,O)),C.error_y&&C.error_y.visible&&(R.errorY=x(C,C.error_y,O)),C.fill&&C.fill!=="none"&&(R.fill={closed:!0,fill:C.fillcolor,thickness:0}),R},markerStyle:w,markerSelection:m,linePositions:function(k,C,P){var R,O,X=P.length,D=X/2;if(i.hasLines(C)&&D)if(C.line.shape==="hv"){for(R=[],O=0;O<D-1;O++)isNaN(P[2*O])||isNaN(P[2*O+1])?R.push(NaN,NaN,NaN,NaN):(R.push(P[2*O],P[2*O+1]),isNaN(P[2*O+2])||isNaN(P[2*O+3])?R.push(NaN,NaN):R.push(P[2*O+2],P[2*O+1]));R.push(P[X-2],P[X-1])}else if(C.line.shape==="hvh"){for(R=[],O=0;O<D-1;O++)if(isNaN(P[2*O])||isNaN(P[2*O+1])||isNaN(P[2*O+2])||isNaN(P[2*O+3]))isNaN(P[2*O])||isNaN(P[2*O+1])?R.push(NaN,NaN):R.push(P[2*O],P[2*O+1]),R.push(NaN,NaN);else{var V=(P[2*O]+P[2*O+2])/2;R.push(P[2*O],P[2*O+1],V,P[2*O+1],V,P[2*O+3])}R.push(P[X-2],P[X-1])}else if(C.line.shape==="vhv"){for(R=[],O=0;O<D-1;O++)if(isNaN(P[2*O])||isNaN(P[2*O+1])||isNaN(P[2*O+2])||isNaN(P[2*O+3]))isNaN(P[2*O])||isNaN(P[2*O+1])?R.push(NaN,NaN):R.push(P[2*O],P[2*O+1]),R.push(NaN,NaN);else{var j=(P[2*O+1]+P[2*O+3])/2;R.push(P[2*O],P[2*O+1],P[2*O],j,P[2*O+2],j)}R.push(P[X-2],P[X-1])}else if(C.line.shape==="vh"){for(R=[],O=0;O<D-1;O++)isNaN(P[2*O])||isNaN(P[2*O+1])?R.push(NaN,NaN,NaN,NaN):(R.push(P[2*O],P[2*O+1]),isNaN(P[2*O+2])||isNaN(P[2*O+3])?R.push(NaN,NaN):R.push(P[2*O],P[2*O+3]));R.push(P[X-2],P[X-1])}else R=P;var B=!1;for(O=0;O<R.length;O++)if(isNaN(R[O])){B=!0;break}var W=B||R.length>s.TOO_MANY_POINTS||i.hasMarkers(C)?"rect":"round";if(B&&C.connectgaps){var q=R[0],re=R[1];for(O=0;O<R.length;O+=2)isNaN(R[O])||isNaN(R[O+1])?(R[O]=q,R[O+1]=re):(q=R[O],re=R[O+1])}return{join:W,positions:R}},errorBarPositions:function(k,C,P,R,O){var X=_.getComponentMethod("errorbars","makeComputeError"),D=o.getFromId(k,C.xaxis,"x"),V=o.getFromId(k,C.yaxis,"y"),j=P.length/2,B={};function W(q,re){var ee=re._id.charAt(0),K=C["error_"+ee];if(K&&K.visible&&(re.type==="linear"||re.type==="log")){for(var Y=X(K),$={x:0,y:1}[ee],ne={x:[0,1,2,3],y:[2,3,0,1]}[ee],ae=new Float64Array(4*j),se=1/0,ce=-1/0,me=0,ye=0;me<j;me++,ye+=4){var Te=q[me];if(T(Te)){var Ce=P[2*me+$],pe=Y(Te,me),fe=pe[0],Oe=pe[1];if(T(fe)&&T(Oe)){var Se=Te-fe,Me=Te+Oe;ae[ye+ne[0]]=Ce-re.c2l(Se),ae[ye+ne[1]]=re.c2l(Me)-Ce,ae[ye+ne[2]]=0,ae[ye+ne[3]]=0,se=Math.min(se,Te-fe),ce=Math.max(ce,Te+Oe)}}}B[ee]={positions:P,errors:ae,_bnds:[se,ce]}}}return W(R,D),W(O,V),B},textPosition:function(k,C,P,R){var O,X=C._length,D={};if(i.hasMarkers(C)){var V=P.font,j=P.align,B=P.baseline;for(D.offset=new Array(X),O=0;O<X;O++){var W=R.sizes?R.sizes[O]:R.size,q=Array.isArray(V)?V[O].size:V.size,re=Array.isArray(j)?j.length>1?j[O]:j[0]:j,ee=Array.isArray(B)?B.length>1?B[O]:B[0]:B,K=u[re],Y=u[ee],$=W?W/.8+1:0,ne=-Y*$-.5*Y;D.offset[O]=[K*$/q,ne/q]}}return D}}},47148:function(F,L,e){var T=e(71828),b=e(73972),a=e(68645),_=e(42341),g=e(47581),h=e(34098),o=e(67513),t=e(73927),i=e(49508),n=e(11058),r=e(28908),s=e(82410);F.exports=function(l,u,d,c){function w(S,A){return T.coerce(l,u,_,S,A)}var m=!!l.marker&&a.isOpenSymbol(l.marker.symbol),f=h.isBubble(l),x=o(l,u,c,w);if(x){t(l,u,c,w),w("xhoverformat"),w("yhoverformat");var y=x<g.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("hovertemplate"),w("mode",y),h.hasLines(u)&&(w("connectgaps"),n(l,u,d,c,w),w("line.shape")),h.hasMarkers(u)&&(i(l,u,d,c,w,{noAngleRef:!0,noStandOff:!0}),w("marker.line.width",m||f?1:0)),h.hasText(u)&&(w("texttemplate"),s(l,u,c,w));var v=(u.line||{}).color,M=(u.marker||{}).color;w("fill"),u.fill!=="none"&&r(l,u,d,w);var p=b.getComponentMethod("errorbars","supplyDefaults");p(l,u,v||M||d,{axis:"y"}),p(l,u,v||M||d,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(u,w)}else u.visible=!1}},5345:function(F,L,e){var T=e(71828),b=e(7901),a=e(37822).DESELECTDIM;F.exports={styleTextSelection:function(_){var g,h,o=_[0],t=o.trace,i=o.t,n=i._scene,r=i.index,s=n.selectBatch[r],l=n.unselectBatch[r],u=n.textOptions[r],d=n.textSelectedOptions[r]||{},c=n.textUnselectedOptions[r]||{},w=T.extendFlat({},u);if(s.length||l.length){var m=d.color,f=c.color,x=u.color,y=Array.isArray(x);for(w.color=new Array(t._length),g=0;g<s.length;g++)h=s[g],w.color[h]=m||(y?x[h]:x);for(g=0;g<l.length;g++){h=l[g];var v=y?x[h]:x;w.color[h]=f||(m?v:b.addOpacity(v,a))}}n.glText[r].update(w)}}},68101:function(F,L,e){var T=e(8225);F.exports=function(b,a,_){var g=b.i;return"x"in b||(b.x=a._x[g]),"y"in b||(b.y=a._y[g]),T(b,a,_)}},68645:function(F,L,e){var T=e(78232);L.isOpenSymbol=function(b){return typeof b=="string"?T.OPEN_RE.test(b):b%200>100},L.isDotSymbol=function(b){return typeof b=="string"?T.DOT_RE.test(b):b>200}},20794:function(F,L,e){var T=e(73972),b=e(71828),a=e(34603);function _(g,h,o,t){var i=g.xa,n=g.ya,r=g.distance,s=g.dxy,l=g.index,u={pointNumber:l,x:h[l],y:o[l]};u.tx=Array.isArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var d=t.textfont;d&&(u.ts=b.isArrayOrTypedArray(d.size)?d.size[l]:d.size,u.tc=Array.isArray(d.color)?d.color[l]:d.color,u.tf=Array.isArray(d.family)?d.family[l]:d.family);var c=t.marker;c&&(u.ms=b.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=b.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=b.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=b.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=b.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var w=c&&c.line;w&&(u.mlc=Array.isArray(w.color)?w.color[l]:w.color,u.mlw=b.isArrayOrTypedArray(w.width)?w.width[l]:w.width);var m=c&&c.gradient;m&&m.type!=="none"&&(u.mgt=Array.isArray(m.type)?m.type[l]:m.type,u.mgc=Array.isArray(m.color)?m.color[l]:m.color);var f=i.c2p(u.x,!0),x=n.c2p(u.y,!0),y=u.mrc||1,v=t.hoverlabel;v&&(u.hbg=Array.isArray(v.bgcolor)?v.bgcolor[l]:v.bgcolor,u.hbc=Array.isArray(v.bordercolor)?v.bordercolor[l]:v.bordercolor,u.hts=b.isArrayOrTypedArray(v.font.size)?v.font.size[l]:v.font.size,u.htc=Array.isArray(v.font.color)?v.font.color[l]:v.font.color,u.htf=Array.isArray(v.font.family)?v.font.family[l]:v.font.family,u.hnl=b.isArrayOrTypedArray(v.namelength)?v.namelength[l]:v.namelength);var M=t.hoverinfo;M&&(u.hi=Array.isArray(M)?M[l]:M);var p=t.hovertemplate;p&&(u.ht=Array.isArray(p)?p[l]:p);var S={};S[g.index]=u;var A=t._origX,k=t._origY,C=b.extendFlat({},g,{color:a(t,u),x0:f-y,x1:f+y,xLabelVal:A?A[l]:u.x,y0:x-y,y1:x+y,yLabelVal:k?k[l]:u.y,cd:S,distance:r,spikeDistance:s,hovertemplate:u.ht});return u.htx?C.text=u.htx:u.tx?C.text=u.tx:t.text&&(C.text=t.text),b.fillText(u,t,C),T.getComponentMethod("errorbars","hoverInfo")(u,t,C),C}F.exports={hoverPoints:function(g,h,o,t){var i,n,r,s,l,u,d,c,w,m,f=g.cd,x=f[0].t,y=f[0].trace,v=g.xa,M=g.ya,p=x.x,S=x.y,A=v.c2p(h),k=M.c2p(o),C=g.distance;if(x.tree){var P=v.p2c(A-C),R=v.p2c(A+C),O=M.p2c(k-C),X=M.p2c(k+C);i=t==="x"?x.tree.range(Math.min(P,R),Math.min(M._rl[0],M._rl[1]),Math.max(P,R),Math.max(M._rl[0],M._rl[1])):x.tree.range(Math.min(P,R),Math.min(O,X),Math.max(P,R),Math.max(O,X))}else i=x.ids;var D=C;if(t==="x"){var V=!!y.xperiodalignment,j=!!y.yperiodalignment;for(u=0;u<i.length;u++){if(s=p[n=i[u]],d=Math.abs(v.c2p(s)-A),V){var B=v.c2p(y._xStarts[n]),W=v.c2p(y._xEnds[n]);d=A>=Math.min(B,W)&&A<=Math.max(B,W)?0:1/0}if(d<D){if(D=d,l=S[n],c=M.c2p(l)-k,j){var q=M.c2p(y._yStarts[n]),re=M.c2p(y._yEnds[n]);c=k>=Math.min(q,re)&&k<=Math.max(q,re)?0:1/0}m=Math.sqrt(d*d+c*c),r=i[u]}}}else for(u=i.length-1;u>-1;u--)s=p[n=i[u]],l=S[n],d=v.c2p(s)-A,c=M.c2p(l)-k,(w=Math.sqrt(d*d+c*c))<D&&(D=m=w,r=n);return g.index=r,g.distance=D,g.dxy=m,r===void 0?[g]:[_(g,p,S,y)]},calcHover:_}},68868:function(F,L,e){var T=e(72156);T.plot=e(26787),F.exports=T},26787:function(F,L,e){var T=e(11870),b=e(46075),a=e(3593),_=e(42505),g=e(71828),h=e(64505).selectMode,o=e(79749),t=e(34098),i=e(68687),n=e(5345).styleTextSelection,r={};function s(l,u,d,c){var w=l._size,m=l.width*c,f=l.height*c,x=w.l*c,y=w.b*c,v=w.r*c,M=w.t*c,p=w.w*c,S=w.h*c;return[x+u.domain[0]*p,y+d.domain[0]*S,m-v-(1-u.domain[1])*p,f-M-(1-d.domain[1])*S]}(F.exports=function(l,u,d){if(d.length){var c,w,m=l._fullLayout,f=u._scene,x=u.xaxis,y=u.yaxis;if(f)if(o(l,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var v=f.count,M=m._glcanvas.data()[0].regl;if(i(l,u,d),f.dirty){if(f.error2d===!0&&(f.error2d=a(M)),f.line2d===!0&&(f.line2d=b(M)),f.scatter2d===!0&&(f.scatter2d=T(M)),f.fill2d===!0&&(f.fill2d=b(M)),f.glText===!0)for(f.glText=new Array(v),c=0;c<v;c++)f.glText[c]=new _(M);if(f.glText){if(v>f.glText.length){var p=v-f.glText.length;for(c=0;c<p;c++)f.glText.push(new _(M))}else if(v<f.glText.length){var S=f.glText.length-v;f.glText.splice(v,S).forEach(function(ae){ae.destroy()})}for(c=0;c<v;c++)f.glText[c].update(f.textOptions[c])}if(f.line2d&&(f.line2d.update(f.lineOptions),f.lineOptions=f.lineOptions.map(function(ae){if(ae&&ae.positions){for(var se=ae.positions,ce=0;ce<se.length&&(isNaN(se[ce])||isNaN(se[ce+1]));)ce+=2;for(var me=se.length-2;me>ce&&(isNaN(se[me])||isNaN(se[me+1]));)me-=2;ae.positions=se.slice(ce,me+2)}return ae}),f.line2d.update(f.lineOptions)),f.error2d){var A=(f.errorXOptions||[]).concat(f.errorYOptions||[]);f.error2d.update(A)}f.scatter2d&&f.scatter2d.update(f.markerOptions),f.fillOrder=g.repeat(null,v),f.fill2d&&(f.fillOptions=f.fillOptions.map(function(ae,se){var ce=d[se];if(ae&&ce&&ce[0]&&ce[0].trace){var me,ye,Te=ce[0],Ce=Te.trace,pe=Te.t,fe=f.lineOptions[se],Oe=[];Ce._ownfill&&Oe.push(se),Ce._nexttrace&&Oe.push(se+1),Oe.length&&(f.fillOrder[se]=Oe);var Se,Me,ue=[],le=fe&&fe.positions||pe.positions;if(Ce.fill==="tozeroy"){for(Se=0;Se<le.length&&isNaN(le[Se+1]);)Se+=2;for(Me=le.length-2;Me>Se&&isNaN(le[Me+1]);)Me-=2;le[Se+1]!==0&&(ue=[le[Se],0]),ue=ue.concat(le.slice(Se,Me+2)),le[Me+1]!==0&&(ue=ue.concat([le[Me],0]))}else if(Ce.fill==="tozerox"){for(Se=0;Se<le.length&&isNaN(le[Se]);)Se+=2;for(Me=le.length-2;Me>Se&&isNaN(le[Me]);)Me-=2;le[Se]!==0&&(ue=[0,le[Se+1]]),ue=ue.concat(le.slice(Se,Me+2)),le[Me]!==0&&(ue=ue.concat([0,le[Me+1]]))}else if(Ce.fill==="toself"||Ce.fill==="tonext"){for(ue=[],me=0,ae.splitNull=!0,ye=0;ye<le.length;ye+=2)(isNaN(le[ye])||isNaN(le[ye+1]))&&((ue=ue.concat(le.slice(me,ye))).push(le[me],le[me+1]),ue.push(null,null),me=ye+2);ue=ue.concat(le.slice(me)),me&&ue.push(le[me],le[me+1])}else{var ie=Ce._nexttrace;if(ie){var ge=f.lineOptions[se+1];if(ge){var Ae=ge.positions;if(Ce.fill==="tonexty"){for(ue=le.slice(),se=Math.floor(Ae.length/2);se--;){var we=Ae[2*se],Ne=Ae[2*se+1];isNaN(we)||isNaN(Ne)||ue.push(we,Ne)}ae.fill=ie.fillcolor}}}}if(Ce._prevtrace&&Ce._prevtrace.fill==="tonext"){var He=f.lineOptions[se-1].positions,de=ue.length/2,Le=[me=de];for(ye=0;ye<He.length;ye+=2)(isNaN(He[ye])||isNaN(He[ye+1]))&&(Le.push(ye/2+de+1),me=ye+2);ue=ue.concat(He),ae.hole=Le}return ae.fillmode=Ce.fill,ae.opacity=Ce.opacity,ae.positions=ue,ae}}),f.fill2d.update(f.fillOptions))}var k=m.dragmode,C=h(k),P=m.clickmode.indexOf("select")>-1;for(c=0;c<v;c++){var R=d[c][0],O=R.trace,X=R.t,D=X.index,V=O._length,j=X.x,B=X.y;if(O.selectedpoints||C||P){if(C||(C=!0),O.selectedpoints){var W=f.selectBatch[D]=g.selIndices2selPoints(O),q={};for(w=0;w<W.length;w++)q[W[w]]=1;var re=[];for(w=0;w<V;w++)q[w]||re.push(w);f.unselectBatch[D]=re}var ee=X.xpx=new Array(V),K=X.ypx=new Array(V);for(w=0;w<V;w++)ee[w]=x.c2p(j[w]),K[w]=y.c2p(B[w])}else X.xpx=X.ypx=null}if(C){if(f.select2d||(f.select2d=T(m._glcanvas.data()[1].regl)),f.scatter2d){var Y=new Array(v);for(c=0;c<v;c++)Y[c]=f.selectBatch[c].length||f.unselectBatch[c].length?f.markerUnselectedOptions[c]:{};f.scatter2d.update(Y)}f.select2d&&(f.select2d.update(f.markerOptions),f.select2d.update(f.markerSelectedOptions)),f.glText&&d.forEach(function(ae){var se=((ae||[])[0]||{}).trace||{};t.hasText(se)&&n(ae)})}else f.scatter2d&&f.scatter2d.update(f.markerOptions);var $={viewport:s(m,x,y,l._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(y._rl||y.range)[0],(x._rl||x.range)[1],(y._rl||y.range)[1]]},ne=g.repeat($,f.count);f.fill2d&&f.fill2d.update(ne),f.line2d&&f.line2d.update(ne),f.error2d&&f.error2d.update(ne.concat(ne)),f.scatter2d&&f.scatter2d.update(ne),f.select2d&&f.select2d.update(ne),f.glText&&f.glText.forEach(function(ae){ae.update($)})}else f.init()}}).reglPrecompiled=r},38967:function(F,L,e){var T=e(71828);F.exports=function(b,a){var _=a._scene,g={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},h={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return a._scene||((_=a._scene={}).init=function(){T.extendFlat(_,h,g)},_.init(),_.update=function(o){var t=T.repeat(o,_.count);if(_.fill2d&&_.fill2d.update(t),_.scatter2d&&_.scatter2d.update(t),_.line2d&&_.line2d.update(t),_.error2d&&_.error2d.update(t.concat(t)),_.select2d&&_.select2d.update(t),_.glText)for(var i=0;i<_.count;i++)_.glText[i].update(o)},_.draw=function(){for(var o=_.count,t=_.fill2d,i=_.error2d,n=_.line2d,r=_.scatter2d,s=_.glText,l=_.select2d,u=_.selectBatch,d=_.unselectBatch,c=0;c<o;c++){if(t&&_.fillOrder[c]&&t.draw(_.fillOrder[c]),n&&_.lineOptions[c]&&n.draw(c),i&&(_.errorXOptions[c]&&i.draw(c),_.errorYOptions[c]&&i.draw(c+o)),r&&_.markerOptions[c])if(d[c].length){var w=T.repeat([],_.count);w[c]=d[c],r.draw(w)}else u[c].length||r.draw(c);s[c]&&_.textOptions[c]&&s[c].render()}l&&l.draw(u),_.dirty=!1},_.destroy=function(){_.fill2d&&_.fill2d.destroy&&_.fill2d.destroy(),_.scatter2d&&_.scatter2d.destroy&&_.scatter2d.destroy(),_.error2d&&_.error2d.destroy&&_.error2d.destroy(),_.line2d&&_.line2d.destroy&&_.line2d.destroy(),_.select2d&&_.select2d.destroy&&_.select2d.destroy(),_.glText&&_.glText.forEach(function(o){o.destroy&&o.destroy()}),_.lineOptions=null,_.fillOptions=null,_.markerOptions=null,_.markerSelectedOptions=null,_.markerUnselectedOptions=null,_.errorXOptions=null,_.errorYOptions=null,_.textOptions=null,_.textSelectedOptions=null,_.textUnselectedOptions=null,_.selectBatch=null,_.unselectBatch=null,a._scene=null}),_.dirty||T.extendFlat(_,g),_}},58147:function(F,L,e){var T=e(34098),b=e(5345).styleTextSelection;F.exports=function(a,_){var g=a.cd,h=a.xaxis,o=a.yaxis,t=[],i=g[0].trace,n=g[0].t,r=i._length,s=n.x,l=n.y,u=n._scene,d=n.index;if(!u)return t;var c=T.hasText(i),w=T.hasMarkers(i),m=!w&&!c;if(i.visible!==!0||m)return t;var f=[],x=[];if(_!==!1&&!_.degenerate)for(var y=0;y<r;y++)_.contains([n.xpx[y],n.ypx[y]],!1,y,a)?(f.push(y),t.push({pointNumber:y,x:h.c2d(s[y]),y:o.c2d(l[y])})):x.push(y);if(w){var v=u.scatter2d;if(f.length||x.length){if(!u.selectBatch[d].length&&!u.unselectBatch[d].length){var M=new Array(u.count);M[d]=u.markerUnselectedOptions[d],v.update.apply(v,M)}}else{var p=new Array(u.count);p[d]=u.markerOptions[d],v.update.apply(v,p)}}return u.selectBatch[d]=f,u.unselectBatch[d]=x,c&&b(g),t}},99181:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(19316),_=e(82196),g=e(23585),h=e(9012),o=e(50693),t=e(1426).extendFlat,i=e(30962).overrideAll,n=e(23585),r=a.line,s=a.marker;F.exports=i({lon:a.lon,lat:a.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},s.opacity,{dflt:1})},mode:t({},_.mode,{dflt:"markers"}),text:t({},_.text,{}),texttemplate:b({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},_.hovertext,{}),line:{color:r.color,width:r.width},connectgaps:_.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},o("marker")),fill:a.fill,fillcolor:_.fillcolor,textfont:g.layers.symbol.textfont,textposition:g.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:t({},h.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:T()},"calc","nested")},15790:function(F,L,e){var T=e(92770),b=e(71828),a=e(50606).BADNUM,_=e(18214),g=e(21081),h=e(91424),o=e(39984),t=e(34098),i=e(13056),n=e(23469).appendArrayPointValue,r=e(63893).NEWLINES,s=e(63893).BR_TAG_ALL;function l(m){return{type:m,geojson:_.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(m,f){return b.isArrayOrTypedArray(m)?f?function(x){return T(m[x])?+m[x]:0}:function(x){return m[x]}:m?function(){return m}:d}function d(){return""}function c(m){return m[0]===a}function w(m,f){var x;if(b.isArrayOrTypedArray(m)&&b.isArrayOrTypedArray(f)){x=["step",["get","point_count"],m[0]];for(var y=1;y<m.length;y++)x.push(f[y-1],m[y])}else x=m;return x}F.exports=function(m,f){var x,y=f[0].trace,v=y.visible===!0&&y._length!==0,M=y.fill!=="none",p=t.hasLines(y),S=t.hasMarkers(y),A=t.hasText(y),k=S&&y.marker.symbol==="circle",C=S&&y.marker.symbol!=="circle",P=y.cluster&&y.cluster.enabled,R=l("fill"),O=l("line"),X=l("circle"),D=l("symbol"),V={fill:R,line:O,circle:X,symbol:D};if(!v)return V;if((M||p)&&(x=_.calcTraceToLineCoords(f)),M&&(R.geojson=_.makePolygon(x),R.layout.visibility="visible",b.extendFlat(R.paint,{"fill-color":y.fillcolor})),p&&(O.geojson=_.makeLine(x),O.layout.visibility="visible",b.extendFlat(O.paint,{"line-width":y.line.width,"line-color":y.line.color,"line-opacity":y.opacity})),k){var j=function(q){var re,ee,K,Y,$=q[0].trace,ne=$.marker,ae=$.selectedpoints,se=b.isArrayOrTypedArray(ne.color),ce=b.isArrayOrTypedArray(ne.size),me=b.isArrayOrTypedArray(ne.opacity);function ye(ue){return $.opacity*ue}se&&(ee=g.hasColorscale($,"marker")?g.makeColorScaleFuncFromTrace(ne):b.identity),ce&&(K=o($)),me&&(Y=function(ue){return ye(T(ue)?+b.constrain(ue,0,1):0)});var Te,Ce,pe=[];for(re=0;re<q.length;re++){var fe=q[re],Oe=fe.lonlat;if(!c(Oe)){var Se={};ee&&(Se.mcc=fe.mcc=ee(fe.mc)),K&&(Se.mrc=fe.mrc=K(fe.ms)),Y&&(Se.mo=Y(fe.mo)),ae&&(Se.selected=fe.selected||0),pe.push({type:"Feature",id:re+1,geometry:{type:"Point",coordinates:Oe},properties:Se})}}if(ae)for(Te=h.makeSelectedPointStyleFns($),re=0;re<pe.length;re++){var Me=pe[re].properties;Te.selectedOpacityFn&&(Me.mo=ye(Te.selectedOpacityFn(Me))),Te.selectedColorFn&&(Me.mcc=Te.selectedColorFn(Me)),Te.selectedSizeFn&&(Me.mrc=Te.selectedSizeFn(Me))}return{geojson:{type:"FeatureCollection",features:pe},mcc:se||Te&&Te.selectedColorFn?{type:"identity",property:"mcc"}:ne.color,mrc:ce||Te&&Te.selectedSizeFn?{type:"identity",property:"mrc"}:(Ce=ne.size,Ce/2),mo:me||Te&&Te.selectedOpacityFn?{type:"identity",property:"mo"}:ye(ne.opacity)}}(f);X.geojson=j.geojson,X.layout.visibility="visible",P&&(X.filter=["!",["has","point_count"]],V.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":w(y.cluster.color,y.cluster.step),"circle-radius":w(y.cluster.size,y.cluster.step),"circle-opacity":w(y.cluster.opacity,y.cluster.step)}},V.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),b.extendFlat(X.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if(k&&P&&(X.filter=["!",["has","point_count"]]),(C||A)&&(D.geojson=function(q,re){for(var ee=re._fullLayout,K=q[0].trace,Y=K.marker||{},$=Y.symbol,ne=Y.angle,ae=$!=="circle"?u($):d,se=ne!=="auto"?u(ne,!0):d,ce=t.hasText(K)?u(K.text):d,me=[],ye=0;ye<q.length;ye++){var Te=q[ye];if(!c(Te.lonlat)){var Ce,pe=K.texttemplate;if(pe){var fe=Array.isArray(pe)?pe[ye]||"":pe,Oe=K._module.formatLabels(Te,K,ee),Se={};n(Se,K,Te.i);var Me=K._meta||{};Ce=b.texttemplateString(fe,Oe,ee._d3locale,Se,Te,Me)}else Ce=ce(ye);Ce&&(Ce=Ce.replace(r,"").replace(s,`
`)),me.push({type:"Feature",geometry:{type:"Point",coordinates:Te.lonlat},properties:{symbol:ae(ye),angle:se(ye),text:Ce}})}}return{type:"FeatureCollection",features:me}}(f,m),b.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),C&&(b.extendFlat(D.layout,{"icon-size":y.marker.size/10}),"angle"in y.marker&&y.marker.angle!=="auto"&&b.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=y.marker.allowoverlap,b.extendFlat(D.paint,{"icon-opacity":y.opacity*y.marker.opacity,"icon-color":y.marker.color})),A)){var B=(y.marker||{}).size,W=i(y.textposition,B);b.extendFlat(D.layout,{"text-size":y.textfont.size,"text-anchor":W.anchor,"text-offset":W.offset,"text-font":y.textfont.family.split(", ")}),b.extendFlat(D.paint,{"text-color":y.textfont.color,"text-opacity":y.opacity})}return V}},76645:function(F,L,e){var T=e(71828),b=e(34098),a=e(49508),_=e(11058),g=e(82410),h=e(28908),o=e(99181),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];F.exports=function(i,n,r,s){function l(v,M){return T.coerce(i,n,o,v,M)}function u(v,M){return T.coerce2(i,n,o,v,M)}var d=function(v,M,p){var S=p("lon")||[],A=p("lat")||[],k=Math.min(S.length,A.length);return M._length=k,k}(0,n,l);if(d){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),b.hasLines(n)&&(_(i,n,r,s,l,{noDash:!0}),l("connectgaps")),b.hasMarkers(n)){a(i,n,r,s,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var c=n.marker;c.symbol!=="circle"&&(T.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),T.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}var w=u("cluster.maxzoom"),m=u("cluster.step"),f=u("cluster.color",n.marker&&n.marker.color||r),x=u("cluster.size"),y=u("cluster.opacity");l("cluster.enabled",w!==!1||m!==!1||f!==!1||x!==!1||y!==!1),b.hasText(n)&&g(i,n,s,l,{noSelect:!0,font:{family:t.indexOf(s.font.family)!==-1?s.font.family:"Open Sans Regular",size:s.font.size,color:s.font.color}}),l("fill"),n.fill!=="none"&&h(i,n,r,l),T.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},53353:function(F){F.exports=function(L,e){return L.lon=e.lon,L.lat=e.lat,L}},15636:function(F,L,e){var T=e(89298);F.exports=function(b,a,_){var g={},h=_[a.subplot]._subplot.mockAxis,o=b.lonlat;return g.lonLabel=T.tickText(h,h.c2l(o[0]),!0).text,g.latLabel=T.tickText(h,h.c2l(o[1]),!0).text,g}},28178:function(F,L,e){var T=e(30211),b=e(71828),a=e(34603),_=b.fillText,g=e(50606).BADNUM,h=e(77734).traceLayerPrefix;function o(t,i,n){if(!t.hovertemplate){var r=(i.hi||t.hoverinfo).split("+"),s=r.indexOf("all")!==-1,l=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,d=i.lonlat,c=[];return s||l&&u?c.push("("+w(d[1])+", "+w(d[0])+")"):l?c.push(n.lon+w(d[0])):u&&c.push(n.lat+w(d[1])),(s||r.indexOf("text")!==-1)&&_(i,t,c),c.join("<br>")}function w(m){return m+""}}F.exports={hoverPoints:function(t,i,n){var r=t.cd,s=r[0].trace,l=t.xa,u=t.ya,d=t.subplot,c=[],w=h+s.uid+"-circle",m=s.cluster&&s.cluster.enabled;if(m){var f=d.map.queryRenderedFeatures(null,{layers:[w]});c=f.map(function(R){return R.id})}var x=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),y=i-x;if(T.getClosest(r,function(R){var O=R.lonlat;if(O[0]===g||m&&c.indexOf(R.i+1)===-1)return 1/0;var X=b.modHalf(O[0],360),D=O[1],V=d.project([X,D]),j=V.x-l.c2p([y,D]),B=V.y-u.c2p([X,n]),W=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(j*j+B*B)-W,1-3/W)},t),t.index!==!1){var v=r[t.index],M=v.lonlat,p=[b.modHalf(M[0],360)+x,M[1]],S=l.c2p(p),A=u.c2p(p),k=v.mrc||1;t.x0=S-k,t.x1=S+k,t.y0=A-k,t.y1=A+k;var C={};C[s.subplot]={_subplot:d};var P=s._module.formatLabels(v,s,C);return t.lonLabel=P.lonLabel,t.latLabel=P.latLabel,t.color=a(s,v),t.extraText=o(s,v,r[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:o}},20467:function(F,L,e){F.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(T,b){b&&b[0].trace._glTrace.update(b)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(F,L,e){var T=e(71828),b=e(15790),a=e(77734).traceLayerPrefix,_={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function g(o,t,i,n){this.type="scattermapbox",this.subplot=o,this.uid=t,this.clusterEnabled=i,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:a+t+"-fill",line:a+t+"-line",circle:a+t+"-circle",symbol:a+t+"-symbol",cluster:a+t+"-cluster",clusterCount:a+t+"-cluster-count"},this.below=null}var h=g.prototype;h.addSource=function(o,t,i){var n={type:"geojson",data:t.geojson};i&&i.enabled&&T.extendFlat(n,{cluster:!0,clusterMaxZoom:i.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[o]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[o],n)},h.setSourceData=function(o,t){this.subplot.map.getSource(this.sourceIds[o]).setData(t.geojson)},h.addLayer=function(o,t,i){var n={type:t.type,id:this.layerIds[o],source:this.sourceIds[o],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,s=this.layerIds[o],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===s){r=!0;break}r?(this.subplot.setOptions(s,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(s,"setPaintProperty",n.paint)):this.subplot.addLayer(n,i)},h.update=function(o){var t=o[0].trace,i=this.subplot,n=i.map,r=b(i.gd,o),s=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,d=this;function c(y){u?function(v){for(var M=_.cluster,p=M.length-1;p>=0;p--){var S=M[p];n.removeLayer(d.layerIds[S])}v||n.removeSource(d.sourceIds.circle)}(y):function(v){for(var M=_.nonCluster,p=M.length-1;p>=0;p--){var S=M[p];n.removeLayer(d.layerIds[S]),v||n.removeSource(d.sourceIds[S])}}(y)}function w(y){l?function(v){v||d.addSource("circle",r.circle,t.cluster);for(var M=_.cluster,p=0;p<M.length;p++){var S=M[p],A=r[S];d.addLayer(S,A,s)}}(y):function(v){for(var M=_.nonCluster,p=0;p<M.length;p++){var S=M[p],A=r[S];v||d.addSource(S,A),d.addLayer(S,A,s)}}(y)}function m(){for(var y=l?_.cluster:_.nonCluster,v=0;v<y.length;v++){var M=y[v],p=r[M];p&&(i.setOptions(d.layerIds[M],"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&(M!=="cluster"&&d.setSourceData(M,p),i.setOptions(d.layerIds[M],"setPaintProperty",p.paint)))}}var f=this.isHidden,x=t.visible!==!0;x?f||c():f?x||w():u!==l?(c(),w()):(this.below!==s&&(c(!0),w(!0)),m()),this.clusterEnabled=l,this.isHidden=x,this.below=s,o[0].trace._glTrace=this},h.dispose=function(){for(var o=this.subplot.map,t=this.clusterEnabled?_.cluster:_.nonCluster,i=t.length-1;i>=0;i--){var n=t[i];o.removeLayer(this.layerIds[n]),o.removeSource(this.sourceIds[n])}},F.exports=function(o,t){var i,n,r,s=t[0].trace,l=s.cluster&&s.cluster.enabled,u=s.visible!==!0,d=new g(o,s.uid,l,u),c=b(o.gd,t),w=d.below=o.belowLookup["trace-"+s.uid];if(l)for(d.addSource("circle",c.circle,s.cluster),i=0;i<_.cluster.length;i++)r=c[n=_.cluster[i]],d.addLayer(n,r,w);else for(i=0;i<_.nonCluster.length;i++)r=c[n=_.nonCluster[i]],d.addSource(n,r,s.cluster),d.addLayer(n,r,w);return t[0].trace._glTrace=d,d}},86387:function(F,L,e){var T=e(71828),b=e(34098),a=e(50606).BADNUM;F.exports=function(_,g){var h,o=_.cd,t=_.xaxis,i=_.yaxis,n=[],r=o[0].trace;if(!b.hasMarkers(r))return[];if(g===!1)for(h=0;h<o.length;h++)o[h].selected=0;else for(h=0;h<o.length;h++){var s=o[h],l=s.lonlat;if(l[0]!==a){var u=[T.modHalf(l[0],360),l[1]],d=[t.c2p(u),i.c2p(u)];g.contains(d,null,h,_)?(n.push({pointNumber:h,lon:l[0],lat:l[1]}),s.selected=1):s.selected=0}}return n}},81245:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(1426).extendFlat,_=e(82196),g=e(9012),h=_.line;F.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:h.color,width:h.width,dash:h.dash,backoff:h.backoff,shape:a({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:a({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:a({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:a({},g.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},26442:function(F,L,e){var T=e(92770),b=e(50606).BADNUM,a=e(89298),_=e(36922),g=e(75225),h=e(66279),o=e(47761).calcMarkerSize;F.exports=function(t,i){for(var n=t._fullLayout,r=i.subplot,s=n[r].radialaxis,l=n[r].angularaxis,u=s.makeCalcdata(i,"r"),d=l.makeCalcdata(i,"theta"),c=i._length,w=new Array(c),m=0;m<c;m++){var f=u[m],x=d[m],y=w[m]={};T(f)&&T(x)?(y.r=f,y.theta=x):y.r=b}var v=o(i,c);return i._extremes.x=a.findExtremes(s,u,{ppad:v}),_(t,i),g(w,i),h(w,i),w}},22184:function(F,L,e){var T=e(71828),b=e(34098),a=e(49508),_=e(11058),g=e(94039),h=e(82410),o=e(28908),t=e(47581).PTS_LINESONLY,i=e(81245);function n(r,s,l,u){var d,c=u("r"),w=u("theta");if(c)w?d=Math.min(c.length,w.length):(d=c.length,u("theta0"),u("dtheta"));else{if(!w)return 0;d=s.theta.length,u("r0"),u("dr")}return s._length=d,d}F.exports={handleRThetaDefaults:n,supplyDefaults:function(r,s,l,u){function d(m,f){return T.coerce(r,s,i,m,f)}var c=n(0,s,0,d);if(c){d("thetaunit"),d("mode",c<t?"lines+markers":"lines"),d("text"),d("hovertext"),s.hoveron!=="fills"&&d("hovertemplate"),b.hasLines(s)&&(_(r,s,l,u,d,{backoff:!0}),g(r,s,d),d("connectgaps")),b.hasMarkers(s)&&a(r,s,l,u,d,{gradient:!0}),b.hasText(s)&&(d("texttemplate"),h(r,s,u,d));var w=[];(b.hasMarkers(s)||b.hasText(s))&&(d("cliponaxis"),d("marker.maxdisplayed"),w.push("points")),d("fill"),s.fill!=="none"&&(o(r,s,l,d),b.hasLines(s)||g(r,s,d)),s.fill!=="tonext"&&s.fill!=="toself"||w.push("fills"),d("hoveron",w.join("+")||"points"),T.coerceSelectionMarkerOpacity(s,d)}else s.visible=!1}}},98608:function(F,L,e){var T=e(71828),b=e(89298);F.exports=function(a,_,g){var h,o,t={},i=g[_.subplot]._subplot;i?(h=i.radialAxis,o=i.angularAxis):(h=(i=g[_.subplot]).radialaxis,o=i.angularaxis);var n=h.c2l(a.r);t.rLabel=b.tickText(h,n,!0).text;var r=o.thetaunit==="degrees"?T.rad2deg(a.theta):a.theta;return t.thetaLabel=b.tickText(o,r,!0).text,t}},59150:function(F,L,e){var T=e(33720);function b(a,_,g,h){var o=g.radialAxis,t=g.angularAxis;o._hovertitle="r",t._hovertitle="";var i={};i[_.subplot]={_subplot:g};var n=_._module.formatLabels(a,_,i);h.rLabel=n.rLabel,h.thetaLabel=n.thetaLabel;var r=a.hi||_.hoverinfo,s=[];function l(d,c){s.push(d._hovertitle+": "+c)}if(!_.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(o,h.rLabel),u.indexOf("theta")!==-1&&l(t,h.thetaLabel),u.indexOf("text")!==-1&&h.text&&(s.push(h.text),delete h.text),h.extraText=s.join("<br>")}}F.exports={hoverPoints:function(a,_,g,h){var o=T(a,_,g,h);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=a.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,b(n,r,i,t),t.hovertemplate=r.hovertemplate,o}},makeHoverPointText:b}},91271:function(F,L,e){F.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function(F,L,e){var T=e(32663),b=e(50606).BADNUM;F.exports=function(a,_,g){for(var h=_.layers.frontplot.select("g.scatterlayer"),o=_.xaxis,t=_.yaxis,i={xaxis:o,yaxis:t,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},n=_.radialAxis,r=_.angularAxis,s=0;s<g.length;s++)for(var l=g[s],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=o,l[0].trace._yA=t);var d=l[u],c=d.r;if(c===b)d.x=d.y=b;else{var w=n.c2g(c),m=r.c2g(d.theta);d.x=w*Math.cos(m),d.y=w*Math.sin(m)}}T(a,i,g,h)}},53286:function(F,L,e){var T=e(81245),b=e(42341),a=e(5386).si;F.exports={mode:T.mode,r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,text:T.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,hovertemplate:T.hovertemplate,line:b.line,connectgaps:b.connectgaps,marker:b.marker,fill:b.fill,fillcolor:b.fillcolor,textposition:b.textposition,textfont:b.textfont,hoverinfo:T.hoverinfo,selected:T.selected,unselected:T.unselected}},65746:function(F,L,e){F.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function(F,L,e){var T=e(36922),b=e(47761).calcMarkerSize,a=e(19635),_=e(89298),g=e(78232).TOO_MANY_POINTS;F.exports=function(h,o){var t=h._fullLayout,i=o.subplot,n=t[i].radialaxis,r=t[i].angularaxis,s=o._r=n.makeCalcdata(o,"r"),l=o._theta=r.makeCalcdata(o,"theta"),u=o._length,d={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),d.r=s,d.theta=l,T(h,o);var c,w=d.opts=a.style(h,o);return u<g?c=b(o,u):w.marker&&(c=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),o._extremes.x=_.findExtremes(n,s,{ppad:c}),[{x:!1,y:!1,t:d,trace:o}]}},75485:function(F,L,e){var T=e(71828),b=e(34098),a=e(22184).handleRThetaDefaults,_=e(49508),g=e(11058),h=e(82410),o=e(28908),t=e(47581).PTS_LINESONLY,i=e(53286);F.exports=function(n,r,s,l){function u(c,w){return T.coerce(n,r,i,c,w)}var d=a(n,r,l,u);d?(u("thetaunit"),u("mode",d<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),b.hasLines(r)&&(g(n,r,s,l,u),u("connectgaps")),b.hasMarkers(r)&&_(n,r,s,l,u,{noAngleRef:!0,noStandOff:!0}),b.hasText(r)&&(u("texttemplate"),h(n,r,l,u)),u("fill"),r.fill!=="none"&&o(n,r,s,u),T.coerceSelectionMarkerOpacity(r,u)):r.visible=!1}},46255:function(F,L,e){var T=e(98608);F.exports=function(b,a,_){var g=b.i;return"r"in b||(b.r=a._r[g]),"theta"in b||(b.theta=a._theta[g]),T(b,a,_)}},29347:function(F,L,e){var T=e(20794),b=e(59150).makeHoverPointText;F.exports={hoverPoints:function(a,_,g,h){var o=a.cd[0].t,t=o.r,i=o.theta,n=T.hoverPoints(a,_,g,h);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var s=a.subplot,l=r.cd[r.index],u=r.trace;if(l.r=t[r.index],l.theta=i[r.index],s.isPtInside(l))return r.xLabelVal=void 0,r.yLabelVal=void 0,b(l,u,s,r),n}}}},21461:function(F,L,e){var T=e(65746);T.plot=e(49741),F.exports=T},49741:function(F,L,e){var T=e(88294),b=e(92770),a=e(26787),_=e(38967),g=e(19635),h=e(71828),o=e(78232).TOO_MANY_POINTS;F.exports=function(t,i,n){if(n.length){var r=i.radialAxis,s=i.angularAxis,l=_(t,i);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var d,c=u[0],w=c.trace,m=c.t,f=w._length,x=m.r,y=m.theta,v=m.opts,M=x.slice(),p=y.slice();for(d=0;d<x.length;d++)i.isPtInside({r:x[d],theta:y[d]})||(M[d]=NaN,p[d]=NaN);var S=new Array(2*f),A=Array(f),k=Array(f);for(d=0;d<f;d++){var C,P,R=M[d];if(b(R)){var O=r.c2g(R),X=s.c2g(p[d],w.thetaunit);C=O*Math.cos(X),P=O*Math.sin(X)}else C=P=NaN;A[d]=S[2*d]=C,k[d]=S[2*d+1]=P}m.tree=T(S),v.marker&&f>=o&&(v.marker.cluster=m.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=S),v.line&&S.length>1&&h.extendFlat(v.line,g.linePositions(t,w,S)),v.text&&(h.extendFlat(v.text,{positions:S},g.textPosition(t,w,v.text,v.marker)),h.extendFlat(v.textSel,{positions:S},g.textPosition(t,w,v.text,v.markerSel)),h.extendFlat(v.textUnsel,{positions:S},g.textPosition(t,w,v.text,v.markerUnsel))),v.fill&&!l.fill2d&&(l.fill2d=!0),v.marker&&!l.scatter2d&&(l.scatter2d=!0),v.line&&!l.line2d&&(l.line2d=!0),v.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(v.line),l.fillOptions.push(v.fill),l.markerOptions.push(v.marker),l.markerSelectedOptions.push(v.markerSel),l.markerUnselectedOptions.push(v.markerUnsel),l.textOptions.push(v.text),l.textSelectedOptions.push(v.textSel),l.textUnselectedOptions.push(v.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),m.x=A,m.y=k,m.rawx=A,m.rawy=k,m.r=x,m.theta=y,m.positions=S,m._scene=l,m.index=l.count,l.count++}}),a(t,i,n)}},F.exports.reglPrecompiled={}},48300:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(1426).extendFlat,_=e(82196),g=e(9012),h=_.line;F.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:b({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:h.color,width:h.width,dash:h.dash,backoff:h.backoff,shape:a({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:a({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:a({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:a({},g.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:T(),selected:_.selected,unselected:_.unselected}},30621:function(F,L,e){var T=e(92770),b=e(50606).BADNUM,a=e(36922),_=e(75225),g=e(66279),h=e(47761).calcMarkerSize;F.exports=function(o,t){for(var i=o._fullLayout,n=t.subplot,r=i[n].realaxis,s=i[n].imaginaryaxis,l=r.makeCalcdata(t,"real"),u=s.makeCalcdata(t,"imag"),d=t._length,c=new Array(d),w=0;w<d;w++){var m=l[w],f=u[w],x=c[w]={};T(m)&&T(f)?(x.real=m,x.imag=f):x.real=b}return h(t,d),a(o,t),_(c,t),g(c,t),c}},65269:function(F,L,e){var T=e(71828),b=e(34098),a=e(49508),_=e(11058),g=e(94039),h=e(82410),o=e(28908),t=e(47581).PTS_LINESONLY,i=e(48300);F.exports=function(n,r,s,l){function u(w,m){return T.coerce(n,r,i,w,m)}var d=function(w,m,f,x){var y,v=x("real"),M=x("imag");return v&&M&&(y=Math.min(v.length,M.length)),m._length=y,y}(0,r,0,u);if(d){u("mode",d<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),b.hasLines(r)&&(_(n,r,s,l,u,{backoff:!0}),g(n,r,u),u("connectgaps")),b.hasMarkers(r)&&a(n,r,s,l,u,{gradient:!0}),b.hasText(r)&&(u("texttemplate"),h(n,r,l,u));var c=[];(b.hasMarkers(r)||b.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),r.fill!=="none"&&(o(n,r,s,u),b.hasLines(r)||g(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},62047:function(F,L,e){var T=e(89298);F.exports=function(b,a,_){var g={},h=_[a.subplot]._subplot;return g.realLabel=T.tickText(h.radialAxis,b.real,!0).text,g.imagLabel=T.tickText(h.angularAxis,b.imag,!0).text,g}},11350:function(F,L,e){var T=e(33720);function b(a,_,g,h){var o=g.radialAxis,t=g.angularAxis;o._hovertitle="real",t._hovertitle="imag";var i={};i[_.subplot]={_subplot:g};var n=_._module.formatLabels(a,_,i);h.realLabel=n.realLabel,h.imagLabel=n.imagLabel;var r=a.hi||_.hoverinfo,s=[];function l(d,c){s.push(d._hovertitle+": "+c)}if(!_.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(o,h.realLabel),u.indexOf("imag")!==-1&&l(t,h.imagLabel),u.indexOf("text")!==-1&&h.text&&(s.push(h.text),delete h.text),h.extraText=s.join("<br>")}}F.exports={hoverPoints:function(a,_,g,h){var o=T(a,_,g,h);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=a.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,b(n,r,i,t),t.hovertemplate=r.hovertemplate,o}},makeHoverPointText:b}},85956:function(F,L,e){F.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function(F,L,e){var T=e(32663),b=e(50606).BADNUM,a=e(23893).smith;F.exports=function(_,g,h){for(var o=g.layers.frontplot.select("g.scatterlayer"),t=g.xaxis,i=g.yaxis,n={xaxis:t,yaxis:i,plot:g.framework,layerClipId:g._hasClipOnAxisFalse?g.clipIds.forTraces:null},r=0;r<h.length;r++)for(var s=h[r],l=0;l<s.length;l++){l===0&&(s[0].trace._xA=t,s[0].trace._yA=i);var u=s[l],d=u.real;if(d===b)u.x=u.y=b;else{var c=a([d,u.imag]);u.x=c[0],u.y=c[1]}}T(_,n,h,o)}},50413:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(82196),_=e(9012),g=e(50693),h=e(79952).P,o=e(1426).extendFlat,t=a.marker,i=a.line,n=t.line;F.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:o({},a.mode,{dflt:"markers"}),text:o({},a.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:o({},a.hovertext,{}),line:{color:i.color,width:i.width,dash:h,backoff:i.backoff,shape:o({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:a.connectgaps,cliponaxis:a.cliponaxis,fill:o({},a.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a.fillcolor,marker:o({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:o({width:n.width,editType:"calc"},g("marker.line")),gradient:t.gradient,editType:"calc"},g("marker")),textfont:a.textfont,textposition:a.textposition,selected:a.selected,unselected:a.unselected,hoverinfo:o({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:a.hoveron,hovertemplate:T()}},54337:function(F,L,e){var T=e(92770),b=e(36922),a=e(75225),_=e(66279),g=e(47761).calcMarkerSize,h=["a","b","c"],o={a:["b","c"],b:["a","c"],c:["a","b"]};F.exports=function(t,i){var n,r,s,l,u,d,c=t._fullLayout[i.subplot].sum,w=i.sum||c,m={a:i.a,b:i.b,c:i.c};for(n=0;n<h.length;n++)if(!m[s=h[n]]){for(u=m[o[s][0]],d=m[o[s][1]],l=new Array(u.length),r=0;r<u.length;r++)l[r]=w-u[r]-d[r];m[s]=l}var f,x,y,v,M,p,S=i._length,A=new Array(S);for(n=0;n<S;n++)f=m.a[n],x=m.b[n],y=m.c[n],T(f)&&T(x)&&T(y)?((v=c/((f=+f)+(x=+x)+(y=+y)))!=1&&(f*=v,x*=v,y*=v),p=f,M=y-x,A[n]={x:M,y:p,a:f,b:x,c:y}):A[n]={x:!1,y:!1};return g(i,S),b(t,i),a(A,i),_(A,i),A}},46008:function(F,L,e){var T=e(71828),b=e(47581),a=e(34098),_=e(49508),g=e(11058),h=e(94039),o=e(82410),t=e(28908),i=e(50413);F.exports=function(n,r,s,l){function u(x,y){return T.coerce(n,r,i,x,y)}var d,c=u("a"),w=u("b"),m=u("c");if(c?(d=c.length,w?(d=Math.min(d,w.length),m&&(d=Math.min(d,m.length))):d=m?Math.min(d,m.length):0):w&&m&&(d=Math.min(w.length,m.length)),d){r._length=d,u("sum"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),u("mode",d<b.PTS_LINESONLY?"lines+markers":"lines"),a.hasLines(r)&&(g(n,r,s,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),a.hasMarkers(r)&&_(n,r,s,l,u,{gradient:!0}),a.hasText(r)&&(u("texttemplate"),o(n,r,l,u));var f=[];(a.hasMarkers(r)||a.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),f.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,s,u),a.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||f.push("fills"),u("hoveron",f.join("+")||"points"),T.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},4524:function(F){F.exports=function(L,e,T,b,a){if(e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),b[a]){var _=b[a];L.a=_.a,L.b=_.b,L.c=_.c}else L.a=e.a,L.b=e.b,L.c=e.c;return L}},93645:function(F,L,e){var T=e(89298);F.exports=function(b,a,_){var g={},h=_[a.subplot]._subplot;return g.aLabel=T.tickText(h.aaxis,b.a,!0).text,g.bLabel=T.tickText(h.baxis,b.b,!0).text,g.cLabel=T.tickText(h.caxis,b.c,!0).text,g}},47250:function(F,L,e){var T=e(33720);F.exports=function(b,a,_,g){var h=T(b,a,_,g);if(h&&h[0].index!==!1){var o=h[0];if(o.index===void 0){var t=1-o.y0/b.ya._length,i=b.xa._length,n=i*t/2,r=i-n;return o.x0=Math.max(Math.min(o.x0,r),n),o.x1=Math.max(Math.min(o.x1,r),n),h}var s=o.cd[o.index],l=o.trace,u=o.subplot;o.a=s.a,o.b=s.b,o.c=s.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var d={};d[l.subplot]={_subplot:u};var c=l._module.formatLabels(s,l,d);o.aLabel=c.aLabel,o.bLabel=c.bLabel,o.cLabel=c.cLabel;var w=s.hi||l.hoverinfo,m=[];if(!l.hovertemplate){var f=w.split("+");f.indexOf("all")!==-1&&(f=["a","b","c"]),f.indexOf("a")!==-1&&x(u.aaxis,o.aLabel),f.indexOf("b")!==-1&&x(u.baxis,o.bLabel),f.indexOf("c")!==-1&&x(u.caxis,o.cLabel)}return o.extraText=m.join("<br>"),o.hovertemplate=l.hovertemplate,h}function x(y,v){m.push(y._hovertitle+": "+v)}}},52979:function(F,L,e){F.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(F,L,e){var T=e(32663);F.exports=function(b,a,_){var g=a.plotContainer;g.select(".scatterlayer").selectAll("*").remove();for(var h=a.xaxis,o=a.yaxis,t={xaxis:h,yaxis:o,plot:g,layerClipId:a._hasClipOnAxisFalse?a.clipIdRelative:null},i=a.layers.frontplot.select("g.scatterlayer"),n=0;n<_.length;n++){var r=_[n];r.length&&(r[0].trace._xA=h,r[0].trace._yA=o)}T(b,t,_,i)}},46880:function(F,L,e){var T=e(82196),b=e(50693),a=e(12663).axisHoverFormat,_=e(5386).fF,g=e(42341),h=e(85555).idRegex,o=e(44467).templatedArray,t=e(1426).extendFlat,i=T.marker,n=i.line,r=t(b("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),s=t(b("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:r,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:h[u],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",F.exports={dimensions:o("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},g.text,{}),hovertext:t({},g.hovertext,{}),hovertemplate:_(),xhoverformat:a("x"),yhoverformat:a("y"),marker:s,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:g.selected.marker,editType:"calc"},unselected:{marker:g.unselected.marker,editType:"calc"},opacity:g.opacity}},65017:function(F,L,e){var T=e(73972),b=e(83312);F.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},T.register(b)},16947:function(F,L,e){var T=e(46075),b=e(73972),a=e(79749),_=e(27659).a0,g=e(93612),h=e(41675).getFromId,o=e(89298).shouldShowZeroLine,t="splom",i={};function n(s,l,u){for(var d=u.matrixOptions.data.length,c=l._visibleDims,w=u.viewOpts.ranges=new Array(d),m=0;m<c.length;m++){var f=c[m],x=w[m]=new Array(4),y=h(s,l._diag[f][0]);y&&(x[0]=y.r2l(y.range[0]),x[2]=y.r2l(y.range[1]));var v=h(s,l._diag[f][1]);v&&(x[1]=v.r2l(v.range[0]),x[3]=v.r2l(v.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:w},{ranges:w}):u.matrix.update({ranges:w})}function r(s){var l=s._fullLayout,u=l._glcanvas.data()[0].regl,d=l._splomGrid;d||(d=l._splomGrid=T(u)),d.update(function(c){var w,m=c._context.plotGlPixelRatio,f=c._fullLayout,x=f._size,y=[0,0,f.width*m,f.height*m],v={};function M(q,re,ee,K,Y,$){ee*=m,K*=m,Y*=m,$*=m;var ne=re[q+"color"],ae=re[q+"width"],se=String(ne+ae);se in v?v[se].data.push(NaN,NaN,ee,K,Y,$):v[se]={data:[ee,K,Y,$],join:"rect",thickness:ae*m,color:ne,viewport:y,range:y,overlay:!1}}for(w in f._splomSubplots){var p,S,A=f._plots[w],k=A.xaxis,C=A.yaxis,P=k._gridVals,R=C._gridVals,O=k._offset,X=k._length,D=C._length,V=x.b+C.domain[0]*x.h,j=-C._m,B=-j*C.r2l(C.range[0],C.calendar);if(k.showgrid)for(w=0;w<P.length;w++)p=O+k.l2p(P[w].x),M("grid",k,p,V,p,V+D);if(C.showgrid)for(w=0;w<R.length;w++)M("grid",C,O,S=V+B+j*R[w].x,O+X,S);o(c,k,C)&&(p=O+k.l2p(0),M("zeroline",k,p,V,p,V+D)),o(c,C,k)&&M("zeroline",C,O,S=V+B+0,O+X,S)}var W=[];for(w in v)W.push(v[w]);return W}(s))}F.exports={name:t,attr:g.attr,attrRegex:g.attrRegex,layoutAttributes:g.layoutAttributes,supplyLayoutDefaults:g.supplyLayoutDefaults,drawFramework:g.drawFramework,plot:function(s){var l=s._fullLayout,u=b.getModule(t),d=_(s.calcdata,u)[0];a(s,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&r(s),u.plot(s,{},d))},drag:function(s){var l=s.calcdata,u=s._fullLayout;u._hasOnlyLargeSploms&&r(s);for(var d=0;d<l.length;d++){var c=l[d][0].trace,w=u._splomScenes[c.uid];c.type==="splom"&&w&&w.matrix&&n(s,c,w)}},updateGrid:r,clean:function(s,l,u,d){var c,w={};if(d._splomScenes){for(c=0;c<s.length;c++){var m=s[c];m.type==="splom"&&(w[m.uid]=1)}for(c=0;c<u.length;c++){var f=u[c];if(!w[f.uid]){var x=d._splomScenes[f.uid];x&&x.destroy&&x.destroy(),d._splomScenes[f.uid]=null,delete d._splomScenes[f.uid]}}}Object.keys(d._splomScenes||{}).length===0&&delete d._splomScenes,d._splomGrid&&!l._hasOnlyLargeSploms&&d._hasOnlyLargeSploms&&(d._splomGrid.destroy(),d._splomGrid=null,delete d._splomGrid),g.clean(s,l,u,d)},updateFx:g.updateFx,toSVG:g.toSVG,reglPrecompiled:i}},87625:function(F,L,e){var T=e(71828),b=e(41675),a=e(47761).calcMarkerSize,_=e(47761).calcAxisExpansion,g=e(36922),h=e(19635).markerSelection,o=e(19635).markerStyle,t=e(10164),i=e(50606).BADNUM,n=e(78232).TOO_MANY_POINTS;F.exports=function(r,s){var l,u,d,c,w,m,f=s.dimensions,x=s._length,y={},v=y.cdata=[],M=y.data=[],p=s._visibleDims=[];function S(k,C){for(var P=k.makeCalcdata({v:C.values,vcalendar:s.calendar},"v"),R=0;R<P.length;R++)P[R]=P[R]===i?NaN:P[R];v.push(P),M.push(k.type==="log"?T.simpleMap(P,k.c2l):P)}for(l=0;l<f.length;l++)if((d=f[l]).visible){if(c=b.getFromId(r,s._diag[l][0]),w=b.getFromId(r,s._diag[l][1]),c&&w&&c.type!==w.type){T.log("Skipping splom dimension "+l+" with conflicting axis types");continue}c?(S(c,d),w&&w.type==="category"&&(w._categories=c._categories.slice())):S(w,d),p.push(l)}for(g(r,s),T.extendFlat(y,o(r,s)),m=v.length*x>n?y.sizeAvg||Math.max(y.size,3):a(s,x),u=0;u<p.length;u++)d=f[l=p[u]],c=b.getFromId(r,s._diag[l][0])||{},w=b.getFromId(r,s._diag[l][1])||{},_(r,s,c,w,v[u],v[u],m);var A=t(r,s);return A.matrix||(A.matrix=!0),A.matrixOptions=y,A.selectedOptions=h(r,s,s.selected),A.unselectedOptions=h(r,s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},25784:function(F,L,e){var T=e(71828),b=e(85501),a=e(46880),_=e(34098),g=e(49508),h=e(94397),o=e(68645).isOpenSymbol;function t(i,n){function r(l,u){return T.coerce(i,n,a.dimensions,l,u)}r("label");var s=r("values");s&&s.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}F.exports=function(i,n,r,s){function l(x,y){return T.coerce(i,n,a,x,y)}var u=b(i,n,{name:"dimensions",handleItemDefaults:t}),d=l("diagonal.visible"),c=l("showupperhalf"),w=l("showlowerhalf");if(h(n,u,"values")&&(d||c||w)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),g(i,n,r,s,l,{noAngleRef:!0,noStandOff:!0});var m=o(n.marker.symbol),f=_.isBubble(n);l("marker.line.width",m||f?1:0),function(x,y,v,M){var p,S,A=y.dimensions,k=A.length,C=y.showupperhalf,P=y.showlowerhalf,R=y.diagonal.visible,O=new Array(k),X=new Array(k);for(p=0;p<k;p++){var D=p?p+1:"";O[p]="x"+D,X[p]="y"+D}var V=M("xaxes",O),j=M("yaxes",X),B=y._diag=new Array(k);y._xaxes={},y._yaxes={};var W=[],q=[];function re(me,ye,Te,Ce){if(me){var pe=me.charAt(0),fe=v._splomAxes[pe];if(y["_"+pe+"axes"][me]=1,Ce.push(me),!(me in fe)){var Oe=fe[me]={};Te&&(Oe.label=Te.label||"",Te.visible&&Te.axis&&(Te.axis.type&&(Oe.type=Te.axis.type),Te.axis.matches&&(Oe.matches=ye)))}}}var ee=!R&&!P,K=!R&&!C;for(y._axesDim={},p=0;p<k;p++){var Y=A[p],$=p===0,ne=p===k-1,ae=$&&ee||ne&&K?void 0:V[p],se=$&&K||ne&&ee?void 0:j[p];re(ae,se,Y,W),re(se,ae,Y,q),B[p]=[ae,se],y._axesDim[ae]=p,y._axesDim[se]=p}for(p=0;p<W.length;p++)for(S=0;S<q.length;S++){var ce=W[p]+q[S];p>S&&C||p<S&&P?v._splomSubplots[ce]=1:p!==S||!R&&P&&C||(v._splomSubplots[ce]=1)}(!P||!R&&C&&P)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}(0,n,s,l),T.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},28801:function(F,L,e){var T=e(71828),b=e(36922),a=e(19635).markerStyle;F.exports=function(_,g){var h=g.trace,o=_._fullLayout._splomScenes[h.uid];if(o){b(_,h),T.extendFlat(o.matrixOptions,a(_,h));var t=T.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(t,null)}}},35948:function(F,L){L.getDimIndex=function(e,T){for(var b=T._id,a={x:0,y:1}[b.charAt(0)],_=e._visibleDims,g=0;g<_.length;g++){var h=_[g];if(e._diag[h][a]===b)return g}return!1}},8567:function(F,L,e){var T=e(35948),b=e(20794).calcHover;F.exports={hoverPoints:function(a,_,g){var h=a.cd[0].trace,o=a.scene.matrixOptions.cdata,t=a.xa,i=a.ya,n=t.c2p(_),r=i.c2p(g),s=a.distance,l=T.getDimIndex(h,t),u=T.getDimIndex(h,i);if(l===!1||u===!1)return[a];for(var d,c,w=o[l],m=o[u],f=s,x=0;x<w.length;x++){var y=w[x],v=m[x],M=t.c2p(y)-n,p=i.c2p(v)-r,S=Math.sqrt(M*M+p*p);S<f&&(f=c=S,d=x)}return a.index=d,a.distance=f,a.dxy=c,d===void 0?[a]:[b(a,w,m,h)]}}},6419:function(F,L,e){var T=e(65017);T.basePlotModule=e(16947),F.exports=T},79410:function(F,L,e){var T=e(60487),b=e(71828),a=e(41675),_=e(64505).selectMode;function g(h,o){var t,i,n,r,s,l=h._fullLayout,u=l._size,d=o.trace,c=o.t,w=l._splomScenes[d.uid],m=w.matrixOptions,f=m.cdata,x=l._glcanvas.data()[0].regl,y=l.dragmode;if(f.length!==0){m.lower=d.showupperhalf,m.upper=d.showlowerhalf,m.diagonal=d.diagonal.visible;var v=d._visibleDims,M=f.length,p=w.viewOpts={};for(p.ranges=new Array(M),p.domains=new Array(M),s=0;s<v.length;s++){n=v[s];var S=p.ranges[s]=new Array(4),A=p.domains[s]=new Array(4);(t=a.getFromId(h,d._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],A[0]=t.domain[0],A[2]=t.domain[1]),(i=a.getFromId(h,d._diag[n][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],A[1]=i.domain[0],A[3]=i.domain[1])}var k=h._context.plotGlPixelRatio,C=u.l*k,P=u.b*k,R=u.w*k,O=u.h*k;p.viewport=[C,P,R+C,O+P],w.matrix===!0&&(w.matrix=T(x));var X=l.clickmode.indexOf("select")>-1,D=!0;if(_(y)||d.selectedpoints||X){var V=d._length;if(d.selectedpoints){w.selectBatch=d.selectedpoints;var j=d.selectedpoints,B={};for(n=0;n<j.length;n++)B[j[n]]=!0;var W=[];for(n=0;n<V;n++)B[n]||W.push(n);w.unselectBatch=W}var q=c.xpx=new Array(M),re=c.ypx=new Array(M);for(s=0;s<v.length;s++){if(n=v[s],t=a.getFromId(h,d._diag[n][0]))for(q[s]=new Array(V),r=0;r<V;r++)q[s][r]=t.c2p(f[s][r]);if(i=a.getFromId(h,d._diag[n][1]))for(re[s]=new Array(V),r=0;r<V;r++)re[s][r]=i.c2p(f[s][r])}if(w.selectBatch.length||w.unselectBatch.length){var ee=b.extendFlat({},m,w.unselectedOptions,p),K=b.extendFlat({},m,w.selectedOptions,p);w.matrix.update(ee,K),D=!1}}else c.xpx=c.ypx=null;if(D){var Y=b.extendFlat({},m,p);w.matrix.update(Y,null)}}}F.exports=function(h,o,t){if(t.length)for(var i=0;i<t.length;i++)g(h,t[i][0])}},10164:function(F,L,e){var T=e(71828);F.exports=function(b,a){var _=b._fullLayout,g=a.uid,h=_._splomScenes;h||(h=_._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},t=h[a.uid];return t||((t=h[g]=T.extendFlat({},o,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||T.extendFlat(t,o),t}},8689:function(F,L,e){var T=e(71828),b=T.pushUnique,a=e(34098),_=e(35948);F.exports=function(g,h){var o=g.cd,t=o[0].trace,i=o[0].t,n=g.scene,r=n.matrixOptions.cdata,s=g.xaxis,l=g.yaxis,u=[];if(!n)return u;var d=!a.hasMarkers(t)&&!a.hasText(t);if(t.visible!==!0||d)return u;var c=_.getDimIndex(t,s),w=_.getDimIndex(t,l);if(c===!1||w===!1)return u;var m=i.xpx[c],f=i.ypx[w],x=r[c],y=r[w],v=(g.scene.selectBatch||[]).slice(),M=[];if(h!==!1&&!h.degenerate)for(var p=0;p<x.length;p++)h.contains([m[p],f[p]],null,p,g)?(u.push({pointNumber:p,x:x[p],y:y[p]}),b(v,p)):v.indexOf(p)!==-1?b(v,p):M.push(p);var S=n.matrixOptions;return v.length||M.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,T.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=v,n.unselectBatch=M,u}},21850:function(F,L,e){var T=e(50693),b=e(12663).axisHoverFormat,a=e(5386).fF,_=e(2418),g=e(9012),h=e(1426).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:b("u",1),vhoverformat:b("v",1),whoverformat:b("w",1),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),showlegend:h({},g.showlegend,{dflt:!1})};h(o,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=_[t]}),o.hoverinfo=h({},g.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,F.exports=o},88489:function(F,L,e){var T=e(71828),b=e(78803);function a(h){var o,t,i,n,r,s,l,u,d,c,w,m,f=h._x,x=h._y,y=h._z,v=h._len,M=-1/0,p=1/0,S=-1/0,A=1/0,k=-1/0,C=1/0,P="";for(v&&(l=f[0],d=x[0],w=y[0]),v>1&&(u=f[v-1],c=x[v-1],m=y[v-1]),o=0;o<v;o++)M=Math.max(M,f[o]),p=Math.min(p,f[o]),S=Math.max(S,x[o]),A=Math.min(A,x[o]),k=Math.max(k,y[o]),C=Math.min(C,y[o]),n||f[o]===l||(n=!0,P+="x"),r||x[o]===d||(r=!0,P+="y"),s||y[o]===w||(s=!0,P+="z");n||(P+="x"),r||(P+="y"),s||(P+="z");var R=_(h._x),O=_(h._y),X=_(h._z);P=(P=(P=P.replace("x",(l>u?"-":"+")+"x")).replace("y",(d>c?"-":"+")+"y")).replace("z",(w>m?"-":"+")+"z");var D=function(){v=0,R=[],O=[],X=[]};(!v||v<R.length*O.length*X.length)&&D();var V=function(pe){return pe==="x"?f:pe==="y"?x:y},j=function(pe){return pe==="x"?R:pe==="y"?O:X},B=function(pe){return pe[v-1]<pe[0]?-1:1},W=V(P[1]),q=V(P[3]),re=V(P[5]),ee=j(P[1]).length,K=j(P[3]).length,Y=j(P[5]).length,$=!1,ne=function(pe,fe,Oe){return ee*(K*pe+fe)+Oe},ae=B(V(P[1])),se=B(V(P[3])),ce=B(V(P[5]));for(o=0;o<Y-1;o++){for(t=0;t<K-1;t++){for(i=0;i<ee-1;i++){var me=ne(o,t,i),ye=ne(o,t,i+1),Te=ne(o,t+1,i),Ce=ne(o+1,t,i);if(W[me]*ae<W[ye]*ae&&q[me]*se<q[Te]*se&&re[me]*ce<re[Ce]*ce||($=!0),$)break}if($)break}if($)break}return $&&(T.warn("Encountered arbitrary coordinates! Unable to input data grid."),D()),{xMin:p,yMin:A,zMin:C,xMax:M,yMax:S,zMax:k,Xs:R,Ys:O,Zs:X,len:v,fill:P}}function _(h){return T.distinctVals(h).vals}function g(h,o){if(o===void 0&&(o=h.length),T.isTypedArray(h))return h.subarray(0,o);for(var t=[],i=0;i<o;i++)t[i]=+h[i];return t}F.exports={calc:function(h,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=g(o.u,o._len),o._v=g(o.v,o._len),o._w=g(o.w,o._len),o._x=g(o.x,o._len),o._y=g(o.y,o._len),o._z=g(o.z,o._len);var t=a(o);o._gridFill=t.fill,o._Xs=t.Xs,o._Ys=t.Ys,o._Zs=t.Zs,o._len=t.len;var i,n,r,s=0;o.starts&&(i=g(o.starts.x||[]),n=g(o.starts.y||[]),r=g(o.starts.z||[]),s=Math.min(i.length,n.length,r.length)),o._startsX=i||[],o._startsY=n||[],o._startsZ=r||[];var l,u=0,d=1/0;for(l=0;l<o._len;l++){var c=o._u[l],w=o._v[l],m=o._w[l],f=Math.sqrt(c*c+w*w+m*m);u=Math.max(u,f),d=Math.min(d,f)}for(b(h,o,{vals:[d,u],containerStr:"",cLetter:"c"}),l=0;l<s;l++){var x=i[l];t.xMax=Math.max(t.xMax,x),t.xMin=Math.min(t.xMin,x);var y=n[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var v=r[l];t.zMax=Math.max(t.zMax,v),t.zMin=Math.min(t.zMin,v)}o._slen=s,o._normMax=u,o._xbnds=[t.xMin,t.xMax],o._ybnds=[t.yMin,t.yMax],o._zbnds=[t.zMin,t.zMax]},filter:g,processGrid:a}},90154:function(F,L,e){var T=e(9330).gl_streamtube3d,b=T.createTubeMesh,a=e(71828),_=e(81697).parseColorScale,g=e(21081).extractOpts,h=e(90060),o={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function n(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function r(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function s(l,u){var d=l.fullSceneLayout,c=l.dataScale,w=u._len,m={};function f(ee,K){var Y=d[K],$=c[o[K]];return a.simpleMap(ee,function(ne){return Y.d2l(ne)*$})}if(m.vectors=h(f(u._u,"xaxis"),f(u._v,"yaxis"),f(u._w,"zaxis"),w),!w)return{positions:[],cells:[]};var x=f(u._Xs,"xaxis"),y=f(u._Ys,"yaxis"),v=f(u._Zs,"zaxis");if(m.meshgrid=[x,y,v],m.gridFill=u._gridFill,u._slen)m.startingPositions=h(f(u._startsX,"xaxis"),f(u._startsY,"yaxis"),f(u._startsZ,"zaxis"));else{for(var M=y[0],p=n(x),S=n(v),A=new Array(p.length*S.length),k=0,C=0;C<p.length;C++)for(var P=0;P<S.length;P++)A[k++]=[p[C],M,S[P]];m.startingPositions=A}m.colormap=_(u),m.tubeSize=u.sizeref,m.maxLength=u.maxdisplayed;var R=f(u._xbnds,"xaxis"),O=f(u._ybnds,"yaxis"),X=f(u._zbnds,"zaxis"),D=r(x),V=r(y),j=r(v),B=[[R[0]-D[0],O[0]-V[0],X[0]-j[0]],[R[1]+D[1],O[1]+V[1],X[1]+j[1]]],W=T(m,B),q=g(u);W.vertexIntensityBounds=[q.min/u._normMax,q.max/u._normMax];var re=u.lightposition;return W.lightPosition=[re.x,re.y,re.z],W.ambient=u.lighting.ambient,W.diffuse=u.lighting.diffuse,W.specular=u.lighting.specular,W.roughness=u.lighting.roughness,W.fresnel=u.lighting.fresnel,W.opacity=u.opacity,u._pad=W.tubeScale*u.sizeref*2,W}i.handlePick=function(l){var u=this.scene.fullSceneLayout,d=this.scene.dataScale;function c(f,x){var y=u[x],v=d[o[x]];return y.l2c(f)/v}if(l.object===this.mesh){var w=l.data.position,m=l.data.velocity;return l.traceCoordinate=[c(w[0],"xaxis"),c(w[1],"yaxis"),c(w[2],"zaxis"),c(m[0],"xaxis"),c(m[1],"yaxis"),c(m[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var u=s(this.scene,l);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(l,u){var d=l.glplot.gl,c=s(l,u),w=b(d,c),m=new t(l,u.uid);return m.mesh=w,m.data=u,w._trace=m,l.glplot.add(w),m}},22459:function(F,L,e){var T=e(71828),b=e(1586),a=e(21850);F.exports=function(_,g,h,o){function t(d,c){return T.coerce(_,g,a,d,c)}var i=t("u"),n=t("v"),r=t("w"),s=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&r&&r.length&&s&&s.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),b(_,g,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),g._length=null):g.visible=!1}},61510:function(F,L,e){F.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(T,b){return T.tubex=T.x,T.tubey=T.y,T.tubez=T.z,T.tubeu=b.traceCoordinate[3],T.tubev=b.traceCoordinate[4],T.tubew=b.traceCoordinate[5],T.norm=b.traceCoordinate[6],T.divergence=b.traceCoordinate[7],delete T.x,delete T.y,delete T.z,T},meta:{}}},57564:function(F,L,e){var T=e(9012),b=e(5386).fF,a=e(5386).si,_=e(50693),g=e(27670).Y,h=e(34e3),o=e(7055),t=e(1426).extendFlat,i=e(79952).u;F.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},h.marker.line.color,{dflt:null}),width:t({},h.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:h.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:a({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:t({},T.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:b({},{keys:o.eventDataKeys}),textfont:h.textfont,insidetextorientation:h.insidetextorientation,insidetextfont:h.insidetextfont,outsidetextfont:t({},h.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:h.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:g({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(F,L,e){var T=e(74875);L.name="sunburst",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},52147:function(F,L,e){var T=e(674),b=e(92770),a=e(71828),_=e(21081).makeColorScaleFuncFromTrace,g=e(32354).makePullColorFn,h=e(32354).generateExtendedColors,o=e(21081).calc,t=e(50606).ALMOST_EQUAL,i={},n={},r={};function s(l,u,d){var c=0,w=l.children;if(w){for(var m=w.length,f=0;f<m;f++)c+=s(w[f],u,d);d.branches&&c++}else d.leaves&&c++;return l.value=l.data.data.value=c,u._values||(u._values=[]),u._values[l.data.data.i]=c,c}L.calc=function(l,u){var d,c,w,m,f,x,y=l._fullLayout,v=u.ids,M=a.isArrayOrTypedArray(v),p=u.labels,S=u.parents,A=u.values,k=a.isArrayOrTypedArray(A),C=[],P={},R={},O=function(ce){return ce||typeof ce=="number"},X=function(ce){return!k||b(A[ce])&&A[ce]>=0};M?(d=Math.min(v.length,S.length),c=function(ce){return O(v[ce])&&X(ce)},w=function(ce){return String(v[ce])}):(d=Math.min(p.length,S.length),c=function(ce){return O(p[ce])&&X(ce)},w=function(ce){return String(p[ce])}),k&&(d=Math.min(d,A.length));for(var D=0;D<d;D++)if(c(D)){var V=w(D),j=O(S[D])?String(S[D]):"",B={i:D,id:V,pid:j,label:O(p[D])?String(p[D]):""};k&&(B.v=+A[D]),C.push(B),f=V,P[m=j]?P[m].push(f):P[m]=[f],R[f]=1}if(P[""]){if(P[""].length>1){for(var W=a.randstr(),q=0;q<C.length;q++)C[q].pid===""&&(C[q].pid=W);C.unshift({hasMultipleRoots:!0,id:W,pid:"",label:""})}}else{var re,ee=[];for(re in P)R[re]||ee.push(re);if(ee.length!==1)return a.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",ee.join(", ")].join(" "));re=ee[0],C.unshift({hasImpliedRoot:!0,id:re,pid:"",label:re})}try{x=T.stratify().id(function(ce){return ce.id}).parentId(function(ce){return ce.pid})(C)}catch(ce){return a.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ce.message].join(" "))}var K=T.hierarchy(x),Y=!1;if(k)switch(u.branchvalues){case"remainder":K.sum(function(ce){return ce.data.v});break;case"total":K.each(function(ce){var me=ce.data.data,ye=me.v;if(ce.children){var Te=ce.children.reduce(function(Ce,pe){return Ce+pe.data.data.v},0);if((me.hasImpliedRoot||me.hasMultipleRoots)&&(ye=Te),ye<Te*t)return Y=!0,a.warn(["Total value for node",ce.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,ye,`
children sum =`,Te].join(" "))}ce.value=ye})}else s(K,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Y){var $,ne;u.sort&&K.sort(function(ce,me){return me.value-ce.value});var ae=u.marker.colors||[],se=!!ae.length;return u._hasColorscale?(se||(ae=k?u.values:u._values),o(l,u,{vals:ae,containerStr:"marker",cLetter:"c"}),ne=_(u.marker)):$=g(y["_"+u.type+"colormap"]),K.each(function(ce){var me=ce.data.data;me.color=u._hasColorscale?ne(ae[me.i]):$(ae[me.i],me.id)}),C[0].hierarchy=K,C}},L._runCrossTraceCalc=function(l,u){var d=u._fullLayout,c=u.calcdata,w=d[l+"colorway"],m=d["_"+l+"colormap"];d["extend"+l+"colors"]&&(w=h(w,l==="icicle"?r:l==="treemap"?n:i));var f,x=0;function y(p){var S=p.data.data,A=S.id;S.color===!1&&(m[A]?S.color=m[A]:p.parent?p.parent.parent?S.color=p.parent.data.data.color:(m[A]=S.color=w[x%w.length],x++):S.color=f)}for(var v=0;v<c.length;v++){var M=c[v][0];M.trace.type===l&&M.hierarchy&&(f=M.trace.root.color,M.hierarchy.each(y))}},L.crossTraceCalc=function(l){return L._runCrossTraceCalc("sunburst",l)}},7055:function(F){F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(F,L,e){var T=e(71828),b=e(57564),a=e(27670).c,_=e(90769).handleText,g=e(37434).handleMarkerDefaults,h=e(21081),o=h.hasColorscale,t=h.handleDefaults;F.exports=function(i,n,r,s){function l(f,x){return T.coerce(i,n,b,f,x)}var u=l("labels"),d=l("parents");if(u&&u.length&&d&&d.length){var c=l("values");c&&c.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),g(i,n,s,l);var w=n._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;w&&t(i,n,s,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",w?1:.7);var m=l("text");l("texttemplate"),n.texttemplate||l("textinfo",Array.isArray(m)?"text+label":"label"),l("hovertext"),l("hovertemplate"),_(i,n,s,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),a(n,s,l),n._length=null}else n.visible=!1}},43467:function(F,L,e){var T=e(91424),b=e(7901);F.exports=function(a,_,g,h,o){var t=_.data.data,i=t.i,n=o||t.color;if(i>=0){_.i=t.i;var r=g.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,_.color=n),T.pointStyle(a,g,h,_)}else b.fill(a,n)}},83523:function(F,L,e){var T=e(39898),b=e(73972),a=e(23469).appendArrayPointValue,_=e(30211),g=e(71828),h=e(11086),o=e(2791),t=e(53581).formatPieValue;function i(n,r,s){for(var l=n.data.data,u={curveNumber:r.index,pointNumber:l.i,data:r._input,fullData:r},d=0;d<s.length;d++){var c=s[d];c in n&&(u[c]=n[c])}return"parentString"in n&&!o.isHierarchyRoot(n)&&(u.parent=n.parentString),a(u,r,l.i),u}F.exports=function(n,r,s,l,u){var d=l[0],c=d.trace,w=d.hierarchy,m=c.type==="sunburst",f=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),n.on("mouseover",function(x){var y=s._fullLayout;if(!s._dragging&&y.hovermode!==!1){var v,M=s._fullData[c.index],p=x.data.data,S=p.i,A=o.isHierarchyRoot(x),k=o.getParent(w,x),C=o.getValue(x),P=function(ae){return g.castOption(M,S,ae)},R=P("hovertemplate"),O=_.castHoverinfo(M,y,S),X=y.separators;if(R||O&&O!=="none"&&O!=="skip"){var D,V;m&&(D=d.cx+x.pxmid[0]*(1-x.rInscribed),V=d.cy+x.pxmid[1]*(1-x.rInscribed)),f&&(D=x._hoverX,V=x._hoverY);var j,B={},W=[],q=[],re=function(ae){return W.indexOf(ae)!==-1};O&&(W=O==="all"?M._module.attributes.hoverinfo.flags:O.split("+")),B.label=p.label,re("label")&&B.label&&q.push(B.label),p.hasOwnProperty("v")&&(B.value=p.v,B.valueLabel=t(B.value,X),re("value")&&q.push(B.valueLabel)),B.currentPath=x.currentPath=o.getPath(x.data),re("current path")&&!A&&q.push(B.currentPath);var ee=[],K=function(){ee.indexOf(j)===-1&&(q.push(j),ee.push(j))};B.percentParent=x.percentParent=C/o.getValue(k),B.parent=x.parentString=o.getPtLabel(k),re("percent parent")&&(j=o.formatPercent(B.percentParent,X)+" of "+B.parent,K()),B.percentEntry=x.percentEntry=C/o.getValue(r),B.entry=x.entry=o.getPtLabel(r),!re("percent entry")||A||x.onPathbar||(j=o.formatPercent(B.percentEntry,X)+" of "+B.entry,K()),B.percentRoot=x.percentRoot=C/o.getValue(w),B.root=x.root=o.getPtLabel(w),re("percent root")&&!A&&(j=o.formatPercent(B.percentRoot,X)+" of "+B.root,K()),B.text=P("hovertext")||P("text"),re("text")&&(j=B.text,g.isValidTextValue(j)&&q.push(j)),v=[i(x,M,u.eventDataKeys)];var Y={trace:M,y:V,_x0:x._x0,_x1:x._x1,_y0:x._y0,_y1:x._y1,text:q.join("<br>"),name:R||re("name")?M.name:void 0,color:P("hoverlabel.bgcolor")||p.color,borderColor:P("hoverlabel.bordercolor"),fontFamily:P("hoverlabel.font.family"),fontSize:P("hoverlabel.font.size"),fontColor:P("hoverlabel.font.color"),nameLength:P("hoverlabel.namelength"),textAlign:P("hoverlabel.align"),hovertemplate:R,hovertemplateLabels:B,eventData:v};m&&(Y.x0=D-x.rInscribed*x.rpx1,Y.x1=D+x.rInscribed*x.rpx1,Y.idealAlign=x.pxmid[0]<0?"left":"right"),f&&(Y.x=D,Y.idealAlign=D<0?"left":"right");var $=[];_.loneHover(Y,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:s,inOut_bbox:$}),v[0].bbox=$[0],c._hasHoverLabel=!0}if(f){var ne=n.select("path.surface");u.styleOne(ne,x,M,s,{hovered:!0})}c._hasHoverEvent=!0,s.emit("plotly_hover",{points:v||[i(x,M,u.eventDataKeys)],event:T.event})}}),n.on("mouseout",function(x){var y=s._fullLayout,v=s._fullData[c.index],M=T.select(this).datum();if(c._hasHoverEvent&&(x.originalEvent=T.event,s.emit("plotly_unhover",{points:[i(M,v,u.eventDataKeys)],event:T.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(_.loneUnhover(y._hoverlayer.node()),c._hasHoverLabel=!1),f){var p=n.select("path.surface");u.styleOne(p,M,v,s,{hovered:!1})}}),n.on("click",function(x){var y=s._fullLayout,v=s._fullData[c.index],M=m&&(o.isHierarchyRoot(x)||o.isLeaf(x)),p=o.getPtId(x),S=o.isEntry(x)?o.findEntryWithChild(w,p):o.findEntryWithLevel(w,p),A=o.getPtId(S),k={points:[i(x,v,u.eventDataKeys)],event:T.event};M||(k.nextLevel=A);var C=h.triggerHandler(s,"plotly_"+c.type+"click",k);if(C!==!1&&y.hovermode&&(s._hoverdata=[i(x,v,u.eventDataKeys)],_.click(s,T.event)),!M&&C!==!1&&!s._dragging&&!s._transitioning){b.call("_storeDirectGUIEdit",v,y._tracePreGUI[v.uid],{level:v.level});var P={data:[{level:A}],traces:[c.index]},R={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};_.loneUnhover(y._hoverlayer.node()),b.call("animate",s,P,R)}})}},2791:function(F,L,e){var T=e(71828),b=e(7901),a=e(6964),_=e(53581);function g(h){return h.data.data.pid}L.findEntryWithLevel=function(h,o){var t;return o&&h.eachAfter(function(i){if(L.getPtId(i)===o)return t=i.copy()}),t||h},L.findEntryWithChild=function(h,o){var t;return h.eachAfter(function(i){for(var n=i.children||[],r=0;r<n.length;r++){var s=n[r];if(L.getPtId(s)===o)return t=i.copy()}}),t||h},L.isEntry=function(h){return!h.parent},L.isLeaf=function(h){return!h.children},L.getPtId=function(h){return h.data.data.id},L.getPtLabel=function(h){return h.data.data.label},L.getValue=function(h){return h.value},L.isHierarchyRoot=function(h){return g(h)===""},L.setSliceCursor=function(h,o,t){var i=t.isTransitioning;if(!i){var n=h.datum();i=t.hideOnRoot&&L.isHierarchyRoot(n)||t.hideOnLeaves&&L.isLeaf(n)}a(h,i?null:"pointer")},L.getInsideTextFontKey=function(h,o,t,i,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",s=t.data.data.i;return T.castOption(o,s,r+"."+h)||T.castOption(o,s,"textfont."+h)||i.size},L.getOutsideTextFontKey=function(h,o,t,i){var n=t.data.data.i;return T.castOption(o,n,"outsidetextfont."+h)||T.castOption(o,n,"textfont."+h)||i.size},L.isOutsideText=function(h,o){return!h._hasColorscale&&L.isHierarchyRoot(o)},L.determineTextFont=function(h,o,t,i){return L.isOutsideText(h,o)?function(n,r,s){return{color:L.getOutsideTextFontKey("color",n,r,s),family:L.getOutsideTextFontKey("family",n,r,s),size:L.getOutsideTextFontKey("size",n,r,s)}}(h,o,t):function(n,r,s,l){var u=(l||{}).onPathbar,d=r.data.data,c=d.i,w=T.castOption(n,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!w&&n._input.textfont&&(w=T.castOption(n._input,c,"textfont.color")),{color:w||b.contrast(d.color),family:L.getInsideTextFontKey("family",n,r,s,l),size:L.getInsideTextFontKey("size",n,r,s,l)}}(h,o,t,i)},L.hasTransition=function(h){return!!(h&&h.duration>0)},L.getMaxDepth=function(h){return h.maxdepth>=0?h.maxdepth:1/0},L.isHeader=function(h,o){return!(L.isLeaf(h)||h.depth===o._maxDepth-1)},L.getParent=function(h,o){return L.findEntryWithLevel(h,g(o))},L.listPath=function(h,o){var t=h.parent;if(!t)return[];var i=o?[t.data[o]]:[t];return L.listPath(t,o).concat(i)},L.getPath=function(h){return L.listPath(h,"label").join("/")+"/"},L.formatValue=_.formatPieValue,L.formatPercent=function(h,o){var t=T.formatPercent(h,0);return t==="0%"&&(t=_.formatPiePercent(h,o)),t}},87619:function(F,L,e){F.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function(F){F.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(F,L,e){var T=e(71828),b=e(2654);F.exports=function(a,_){function g(h,o){return T.coerce(a,_,b,h,o)}g("sunburstcolorway",_.colorway),g("extendsunburstcolors")}},24714:function(F,L,e){var T=e(39898),b=e(674),a=e(81684).sX,_=e(91424),g=e(71828),h=e(63893),o=e(72597),t=o.recordMinTextSize,i=o.clearMinTextSize,n=e(14575),r=e(53581).getRotationAngle,s=n.computeTransform,l=n.transformInsideText,u=e(29969).styleOne,d=e(16688).resizeText,c=e(83523),w=e(7055),m=e(2791);function f(y,v,M,p){var S=y._context.staticPlot,A=y._fullLayout,k=!A.uniformtext.mode&&m.hasTransition(p),C=T.select(M).selectAll("g.slice"),P=v[0],R=P.trace,O=P.hierarchy,X=m.findEntryWithLevel(O,R.level),D=m.getMaxDepth(R),V=A._size,j=R.domain,B=V.w*(j.x[1]-j.x[0]),W=V.h*(j.y[1]-j.y[0]),q=.5*Math.min(B,W),re=P.cx=V.l+V.w*(j.x[1]+j.x[0])/2,ee=P.cy=V.t+V.h*(1-j.y[0])-W/2;if(!X)return C.remove();var K=null,Y={};k&&C.each(function(le){Y[m.getPtId(le)]={rpx0:le.rpx0,rpx1:le.rpx1,x0:le.x0,x1:le.x1,transform:le.transform},!K&&m.isEntry(le)&&(K=le)});var $=function(le){return b.partition().size([2*Math.PI,le.height+1])(le)}(X).descendants(),ne=X.height+1,ae=0,se=D;P.hasMultipleRoots&&m.isHierarchyRoot(X)&&($=$.slice(1),ne-=1,ae=1,se+=1),$=$.filter(function(le){return le.y1<=se});var ce=r(R.rotation);ce&&$.forEach(function(le){le.x0+=ce,le.x1+=ce});var me=Math.min(ne,D),ye=function(le){return(le-ae)/me*q},Te=function(le,ie){return[le*Math.cos(ie),-le*Math.sin(ie)]},Ce=function(le){return g.pathAnnulus(le.rpx0,le.rpx1,le.x0,le.x1,re,ee)},pe=function(le){return re+x(le)[0]*(le.transform.rCenter||0)+(le.transform.x||0)},fe=function(le){return ee+x(le)[1]*(le.transform.rCenter||0)+(le.transform.y||0)};(C=C.data($,m.getPtId)).enter().append("g").classed("slice",!0),k?C.exit().transition().each(function(){var le=T.select(this);le.select("path.surface").transition().attrTween("d",function(ie){var ge=function(Ae){var we,Ne=m.getPtId(Ae),He=Y[Ne],de=Y[m.getPtId(X)];if(de){var Le=(Ae.x1>de.x1?2*Math.PI:0)+ce;we=Ae.rpx1<de.rpx1?{x0:Ae.x0,x1:Ae.x1,rpx0:0,rpx1:0}:{x0:Le,x1:Le,rpx0:Ae.rpx0,rpx1:Ae.rpx1}}else{var Ee,Re=m.getPtId(Ae.parent);C.each(function(at){if(m.getPtId(at)===Re)return Ee=at});var je,Fe=Ee.children;Fe.forEach(function(at,lt){if(m.getPtId(at)===Ne)return je=lt});var Xe=Fe.length,Ze=a(Ee.x0,Ee.x1);we={rpx0:q,rpx1:q,x0:Ze(je/Xe),x1:Ze((je+1)/Xe)}}return a(He,we)}(ie);return function(Ae){return Ce(ge(Ae))}}),le.select("g.slicetext").attr("opacity",0)}).remove():C.exit().remove(),C.order();var Oe=null;if(k&&K){var Se=m.getPtId(K);C.each(function(le){Oe===null&&m.getPtId(le)===Se&&(Oe=le.x1)})}var Me=C;function ue(le){var ie=le.parent,ge=Y[m.getPtId(ie)],Ae={};if(ge){var we=ie.children,Ne=we.indexOf(le),He=we.length,de=a(ge.x0,ge.x1);Ae.x0=de(Ne/He),Ae.x1=de(Ne/He)}else Ae.x0=Ae.x1=0;return Ae}k&&(Me=Me.transition().each("end",function(){var le=T.select(this);m.setSliceCursor(le,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Me.each(function(le){var ie=T.select(this),ge=g.ensureSingle(ie,"path","surface",function(Le){Le.style("pointer-events",S?"none":"all")});le.rpx0=ye(le.y0),le.rpx1=ye(le.y1),le.xmid=(le.x0+le.x1)/2,le.pxmid=Te(le.rpx1,le.xmid),le.midangle=-(le.xmid-Math.PI/2),le.startangle=-(le.x0-Math.PI/2),le.stopangle=-(le.x1-Math.PI/2),le.halfangle=.5*Math.min(g.angleDelta(le.x0,le.x1)||Math.PI,Math.PI),le.ring=1-le.rpx0/le.rpx1,le.rInscribed=function(Le){return Le.rpx0===0&&g.isFullCircle([Le.x0,Le.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Le.halfangle)),Le.ring/2))}(le),k?ge.transition().attrTween("d",function(Le){var Ee=function(Re){var je,Fe=Y[m.getPtId(Re)],Xe={x0:Re.x0,x1:Re.x1,rpx0:Re.rpx0,rpx1:Re.rpx1};if(Fe)je=Fe;else if(K)if(Re.parent)if(Oe){var Ze=(Re.x1>Oe?2*Math.PI:0)+ce;je={x0:Ze,x1:Ze}}else je={rpx0:q,rpx1:q},g.extendFlat(je,ue(Re));else je={rpx0:0,rpx1:0};else je={x0:ce,x1:ce};return a(je,Xe)}(Le);return function(Re){return Ce(Ee(Re))}}):ge.attr("d",Ce),ie.call(c,X,y,v,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(m.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),ge.call(u,le,R,y);var Ae=g.ensureSingle(ie,"g","slicetext"),we=g.ensureSingle(Ae,"text","",function(Le){Le.attr("data-notex",1)}),Ne=g.ensureUniformFontSize(y,m.determineTextFont(R,le,A.font));we.text(L.formatSliceLabel(le,X,R,v,A)).classed("slicetext",!0).attr("text-anchor","middle").call(_.font,Ne).call(h.convertToTspans,y);var He=_.bBox(we.node());le.transform=l(He,le,P),le.transform.targetX=pe(le),le.transform.targetY=fe(le);var de=function(Le,Ee){var Re=Le.transform;return s(Re,Ee),Re.fontSize=Ne.size,t(R.type,Re,A),g.getTextTransform(Re)};k?we.transition().attrTween("transform",function(Le){var Ee=function(Re){var je,Fe=Y[m.getPtId(Re)],Xe=Re.transform;if(Fe)je=Fe;else if(je={rpx1:Re.rpx1,transform:{textPosAngle:Xe.textPosAngle,scale:0,rotate:Xe.rotate,rCenter:Xe.rCenter,x:Xe.x,y:Xe.y}},K)if(Re.parent)if(Oe){var Ze=Re.x1>Oe?2*Math.PI:0;je.x0=je.x1=Ze}else g.extendFlat(je,ue(Re));else je.x0=je.x1=ce;else je.x0=je.x1=ce;var at=a(je.transform.textPosAngle,Re.transform.textPosAngle),lt=a(je.rpx1,Re.rpx1),ot=a(je.x0,Re.x0),bt=a(je.x1,Re.x1),wt=a(je.transform.scale,Xe.scale),ht=a(je.transform.rotate,Xe.rotate),ct=Xe.rCenter===0?3:je.transform.rCenter===0?1/3:1,Tt=a(je.transform.rCenter,Xe.rCenter);return function(Lt){var kt=lt(Lt),Ot=ot(Lt),Pt=bt(Lt),et=function(Ye){return Tt(Math.pow(Ye,ct))}(Lt),nt={pxmid:Te(kt,(Ot+Pt)/2),rpx1:kt,transform:{textPosAngle:at(Lt),rCenter:et,x:Xe.x,y:Xe.y}};return t(R.type,Xe,A),{transform:{targetX:pe(nt),targetY:fe(nt),scale:wt(Lt),rotate:ht(Lt),rCenter:et}}}}(Le);return function(Re){return de(Ee(Re),He)}}):we.attr("transform",de(le,He))})}function x(y){return v=y.rpx1,M=y.transform.textPosAngle,[v*Math.sin(M),-v*Math.cos(M)];var v,M}L.plot=function(y,v,M,p){var S,A,k=y._fullLayout,C=k._sunburstlayer,P=!M,R=!k.uniformtext.mode&&m.hasTransition(M);i("sunburst",k),(S=C.selectAll("g.trace.sunburst").data(v,function(O){return O[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),R?(p&&(A=p()),T.transition().duration(M.duration).ease(M.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){C.selectAll("g.trace").each(function(O){f(y,O,this,M)})})):(S.each(function(O){f(y,O,this,M)}),k.uniformtext.mode&&d(y,k._sunburstlayer.selectAll(".trace"),"sunburst")),P&&S.exit().remove()},L.formatSliceLabel=function(y,v,M,p,S){var A=M.texttemplate,k=M.textinfo;if(!(A||k&&k!=="none"))return"";var C=S.separators,P=p[0],R=y.data.data,O=P.hierarchy,X=m.isHierarchyRoot(y),D=m.getParent(O,y),V=m.getValue(y);if(!A){var j,B=k.split("+"),W=function(se){return B.indexOf(se)!==-1},q=[];if(W("label")&&R.label&&q.push(R.label),R.hasOwnProperty("v")&&W("value")&&q.push(m.formatValue(R.v,C)),!X){W("current path")&&q.push(m.getPath(y.data));var re=0;W("percent parent")&&re++,W("percent entry")&&re++,W("percent root")&&re++;var ee=re>1;if(re){var K,Y=function(se){j=m.formatPercent(K,C),ee&&(j+=" of "+se),q.push(j)};W("percent parent")&&!X&&(K=V/m.getValue(D),Y("parent")),W("percent entry")&&(K=V/m.getValue(v),Y("entry")),W("percent root")&&(K=V/m.getValue(O),Y("root"))}}return W("text")&&(j=g.castOption(M,R.i,"text"),g.isValidTextValue(j)&&q.push(j)),q.join("<br>")}var $=g.castOption(M,R.i,"texttemplate");if(!$)return"";var ne={};R.label&&(ne.label=R.label),R.hasOwnProperty("v")&&(ne.value=R.v,ne.valueLabel=m.formatValue(R.v,C)),ne.currentPath=m.getPath(y.data),X||(ne.percentParent=V/m.getValue(D),ne.percentParentLabel=m.formatPercent(ne.percentParent,C),ne.parent=m.getPtLabel(D)),ne.percentEntry=V/m.getValue(v),ne.percentEntryLabel=m.formatPercent(ne.percentEntry,C),ne.entry=m.getPtLabel(v),ne.percentRoot=V/m.getValue(O),ne.percentRootLabel=m.formatPercent(ne.percentRoot,C),ne.root=m.getPtLabel(O),R.hasOwnProperty("color")&&(ne.color=R.color);var ae=g.castOption(M,R.i,"text");return(g.isValidTextValue(ae)||ae==="")&&(ne.text=ae),ne.customdata=g.castOption(M,R.i,"customdata"),g.texttemplateString($,ne,S._d3locale,ne,M._meta||{})}},29969:function(F,L,e){var T=e(39898),b=e(7901),a=e(71828),_=e(72597).resizeText,g=e(43467);function h(o,t,i,n){var r=t.data.data,s=!t.children,l=r.i,u=a.castOption(i,l,"marker.line.color")||b.defaultLine,d=a.castOption(i,l,"marker.line.width")||0;o.call(g,t,i,n).style("stroke-width",d).call(b.stroke,u).style("opacity",s?i.leaf.opacity:null)}F.exports={style:function(o){var t=o._fullLayout._sunburstlayer.selectAll(".trace");_(o,t,"sunburst"),t.each(function(i){var n=T.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(s){T.select(this).call(h,s,r,o)})})},styleOne:h}},54532:function(F,L,e){var T=e(7901),b=e(50693),a=e(12663).axisHoverFormat,_=e(5386).fF,g=e(9012),h=e(1426).extendFlat,o=e(30962).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:T.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:T.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=F.exports=o(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},b("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:h({},b.zauto,{}),zmin:h({},b.zmin,{}),zmax:h({},b.zmax,{})},hoverinfo:h({},g.hoverinfo),showlegend:h({},g.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},18396:function(F,L,e){var T=e(78803);F.exports=function(b,a){a.surfacecolor?T(b,a,{vals:a.surfacecolor,containerStr:"",cLetter:"c"}):T(b,a,{vals:a.z,containerStr:"",cLetter:"c"})}},43768:function(F,L,e){var T=e(9330).gl_surface3d,b=e(9330).ndarray,a=e(9330).ndarray_linear_interpolate.d2,_=e(824),g=e(43907),h=e(71828).isArrayOrTypedArray,o=e(81697).parseColorScale,t=e(78614),i=e(21081).extractOpts;function n(M,p,S){this.scene=M,this.uid=S,this.surface=p,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(M,p,S,A){var k=h(this.data.x)?h(this.data.x[0])?this.data.x[p][M]:this.data.x[M]:M;return S===void 0?k:A.d2l(k,0,S)},r.getYat=function(M,p,S,A){var k=h(this.data.y)?h(this.data.y[0])?this.data.y[p][M]:this.data.y[p]:p;return S===void 0?k:A.d2l(k,0,S)},r.getZat=function(M,p,S,A){var k=this.data.z[p][M];return k===null&&this.data.connectgaps&&this.data._interpolatedZ&&(k=this.data._interpolatedZ[p][M]),S===void 0?k:A.d2l(k,0,S)},r.handlePick=function(M){if(M.object===this.surface){var p=(M.data.index[0]-1)/this.dataScaleX-1,S=(M.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round(p),this.data.z[0].length-1),0),k=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);M.index=[A,k],M.traceCoordinate=[this.getXat(A,k),this.getYat(A,k),this.getZat(A,k)],M.dataCoordinate=[this.getXat(A,k,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,k,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,k,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var C=0;C<3;C++)M.dataCoordinate[C]!=null&&(M.dataCoordinate[C]*=this.scene.dataScale[C]);var P=this.data.hovertext||this.data.text;return Array.isArray(P)&&P[k]&&P[k][A]!==void 0?M.textLabel=P[k][A]:M.textLabel=P||"",M.data.dataCoordinate=M.dataCoordinate.slice(),this.surface.highlight(M.data),this.scene.glplot.spikes.position=M.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(M,p){if(M<p)return 0;for(var S=0;Math.floor(M%p)===0;)M/=p,S++;return S}function u(M){for(var p=[],S=0;S<s.length;S++){var A=s[S];p.push(l(M,A))}return p}function d(M){for(var p=u(M),S=M,A=0;A<s.length;A++)if(p[A]>0){S=s[A];break}return S}function c(M,p){if(!(M<1||p<1)){for(var S=u(M),A=u(p),k=1,C=0;C<s.length;C++)k*=Math.pow(s[C],Math.max(S[C],A[C]));return k}}r.calcXnums=function(M){var p,S=[];for(p=1;p<M;p++){var A=this.getXat(p-1,0),k=this.getXat(p,0);S[p-1]=k!==A&&A!=null&&k!=null?Math.abs(k-A):0}var C=0;for(p=1;p<M;p++)C+=S[p-1];for(p=1;p<M;p++)S[p-1]===0?S[p-1]=1:S[p-1]=Math.round(C/S[p-1]);return S},r.calcYnums=function(M){var p,S=[];for(p=1;p<M;p++){var A=this.getYat(0,p-1),k=this.getYat(0,p);S[p-1]=k!==A&&A!=null&&k!=null?Math.abs(k-A):0}var C=0;for(p=1;p<M;p++)C+=S[p-1];for(p=1;p<M;p++)S[p-1]===0?S[p-1]=1:S[p-1]=Math.round(C/S[p-1]);return S};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],m=w[9],f=w[13];function x(M,p,S){var A=S[8]+S[2]*p[0]+S[5]*p[1];return M[0]=(S[6]+S[0]*p[0]+S[3]*p[1])/A,M[1]=(S[7]+S[1]*p[0]+S[4]*p[1])/A,M}function y(M,p,S){return function(A,k,C,P){for(var R=[0,0],O=A.shape[0],X=A.shape[1],D=0;D<O;D++)for(var V=0;V<X;V++)C(R,[D,V],P),A.set(D,V,a(k,R[0],R[1]))}(M,p,x,S),M}function v(M,p){for(var S=!1,A=0;A<M.length;A++)if(p===M[A]){S=!0;break}S===!1&&M.push(p)}r.estimateScale=function(M,p){for(var S=1+function(k){if(k.length!==0){for(var C=1,P=0;P<k.length;P++)C=c(C,k[P]);return C}}(p===0?this.calcXnums(M):this.calcYnums(M));S<m;)S*=2;for(;S>f;)S--,S/=d(S),++S<m&&(S=f);var A=Math.round(S/M);return A>1?A:1},r.refineCoords=function(M){for(var p=this.dataScaleX,S=this.dataScaleY,A=M[0].shape[0],k=M[0].shape[1],C=0|Math.floor(M[0].shape[0]*p+1),P=0|Math.floor(M[0].shape[1]*S+1),R=1+A+1,O=1+k+1,X=b(new Float32Array(R*O),[R,O]),D=[1/p,0,0,0,1/S,0,0,0,1],V=0;V<M.length;++V){this.surface.padField(X,M[V]);var j=b(new Float32Array(C*P),[C,P]);y(j,X,D),M[V]=j}},r.setContourLevels=function(){var M,p,S,A=[[],[],[]],k=[!1,!1,!1],C=!1;for(M=0;M<3;++M)if(this.showContour[M]&&(C=!0,this.contourSize[M]>0&&this.contourStart[M]!==null&&this.contourEnd[M]!==null&&this.contourEnd[M]>this.contourStart[M]))for(k[M]=!0,p=this.contourStart[M];p<this.contourEnd[M];p+=this.contourSize[M])S=p*this.scene.dataScale[M],v(A[M],S);if(C){var P=[[],[],[]];for(M=0;M<3;++M)this.showContour[M]&&(P[M]=k[M]?A[M]:this.scene.contourLevels[M]);this.surface.update({levels:P})}},r.update=function(M){var p,S,A,k,C=this.scene,P=C.fullSceneLayout,R=this.surface,O=o(M),X=C.dataScale,D=M.z[0].length,V=M._ylength,j=C.contourLevels;this.data=M;var B=[];for(p=0;p<3;p++)for(B[p]=[],S=0;S<D;S++)B[p][S]=[];for(S=0;S<D;S++)for(A=0;A<V;A++)B[0][S][A]=this.getXat(S,A,M.xcalendar,P.xaxis),B[1][S][A]=this.getYat(S,A,M.ycalendar,P.yaxis),B[2][S][A]=this.getZat(S,A,M.zcalendar,P.zaxis);if(M.connectgaps)for(M._emptypoints=g(B[2]),_(B[2],M._emptypoints),M._interpolatedZ=[],S=0;S<D;S++)for(M._interpolatedZ[S]=[],A=0;A<V;A++)M._interpolatedZ[S][A]=B[2][S][A];for(p=0;p<3;p++)for(S=0;S<D;S++)for(A=0;A<V;A++)(k=B[p][S][A])==null?B[p][S][A]=NaN:k=B[p][S][A]*=X[p];for(p=0;p<3;p++)for(S=0;S<D;S++)for(A=0;A<V;A++)(k=B[p][S][A])!=null&&(this.minValues[p]>k&&(this.minValues[p]=k),this.maxValues[p]<k&&(this.maxValues[p]=k));for(p=0;p<3;p++)this.objectOffset[p]=.5*(this.minValues[p]+this.maxValues[p]);for(p=0;p<3;p++)for(S=0;S<D;S++)for(A=0;A<V;A++)(k=B[p][S][A])!=null&&(B[p][S][A]-=this.objectOffset[p]);var W=[b(new Float32Array(D*V),[D,V]),b(new Float32Array(D*V),[D,V]),b(new Float32Array(D*V),[D,V])];for(p=0;p<3;p++)for(S=0;S<D;S++)for(A=0;A<V;A++)W[p].set(S,A,B[p][S][A]);B=[];var q={colormap:O,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!M.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:M.opacityscale,opacity:M.opacity},re=i(M);if(q.intensityBounds=[re.min,re.max],M.surfacecolor){var ee=b(new Float32Array(D*V),[D,V]);for(S=0;S<D;S++)for(A=0;A<V;A++)ee.set(S,A,M.surfacecolor[A][S]);W.push(ee)}else q.intensityBounds[0]*=X[2],q.intensityBounds[1]*=X[2];(f<W[0].shape[0]||f<W[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(W[0].shape[0],0),this.dataScaleY=this.estimateScale(W[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(W)),M.surfacecolor&&(q.intensity=W.pop());var K=[!0,!0,!0],Y=["x","y","z"];for(p=0;p<3;++p){var $=M.contours[Y[p]];K[p]=$.highlight,q.showContour[p]=$.show||$.highlight,q.showContour[p]&&(q.contourProject[p]=[$.project.x,$.project.y,$.project.z],$.show?(this.showContour[p]=!0,q.levels[p]=j[p],R.highlightColor[p]=q.contourColor[p]=t($.color),$.usecolormap?R.highlightTint[p]=q.contourTint[p]=0:R.highlightTint[p]=q.contourTint[p]=1,q.contourWidth[p]=$.width,this.contourStart[p]=$.start,this.contourEnd[p]=$.end,this.contourSize[p]=$.size):(this.showContour[p]=!1,this.contourStart[p]=null,this.contourEnd[p]=null,this.contourSize[p]=0),$.highlight&&(q.dynamicColor[p]=t($.highlightcolor),q.dynamicWidth[p]=$.highlightwidth))}(function(ne){var ae=ne[0].rgb,se=ne[ne.length-1].rgb;return ae[0]===se[0]&&ae[1]===se[1]&&ae[2]===se[2]&&ae[3]===se[3]})(O)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=W,R.update(q),R.visible=M.visible,R.enableDynamic=K,R.enableHighlight=K,R.snapToData=!0,"lighting"in M&&(R.ambientLight=M.lighting.ambient,R.diffuseLight=M.lighting.diffuse,R.specularLight=M.lighting.specular,R.roughness=M.lighting.roughness,R.fresnel=M.lighting.fresnel),"lightposition"in M&&(R.lightPosition=[M.lightposition.x,M.lightposition.y,M.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},F.exports=function(M,p){var S=M.glplot.gl,A=T({gl:S}),k=new n(M,A,p.uid);return A._trace=k,k.update(p),M.glplot.add(A),k}},91831:function(F,L,e){var T=e(73972),b=e(71828),a=e(1586),_=e(54532);function g(o,t,i,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(s,l){for(var u=[],d=0;d<32;d++){var c=d/31,w=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,w))])}return u}():function(s){var l=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var u=0;u<s.length;u++){var d=s[u];if(d.length!==2||+d[0]<l)return!1;l=+d[0]}return!0}(r)||(t.opacityscale=void 0)}function h(o,t,i){t in o&&!(i in o)&&(o[i]=o[t])}F.exports={supplyDefaults:function(o,t,i,n){var r,s;function l(v,M){return b.coerce(o,t,_,v,M)}var u=l("x"),d=l("y"),c=l("z");if(!c||!c.length||u&&u.length<1||d&&d.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&b.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,T.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(v){l(v)});var w=l("surfacecolor"),m=["x","y","z"];for(r=0;r<3;++r){var f="contours."+m[r],x=l(f+".show"),y=l(f+".highlight");if(x||y)for(s=0;s<3;++s)l(f+".project."+m[s]);x&&(l(f+".color"),l(f+".width"),l(f+".usecolormap")),y&&(l(f+".highlightcolor"),l(f+".highlightwidth")),l(f+".start"),l(f+".end"),l(f+".size")}w||(h(o,"zmin","cmin"),h(o,"zmax","cmax"),h(o,"zauto","cauto")),a(o,t,n,l,{prefix:"",cLetter:"c"}),g(0,t,0,l),t._length=null}},opacityscaleDefaults:g}},93601:function(F,L,e){F.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(F,L,e){var T=e(50215),b=e(1426).extendFlat,a=e(30962).overrideAll,_=e(41940),g=e(27670).Y,h=e(12663).descriptionOnlyNumbers;(F.exports=a({domain:g({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:b({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:b({},_({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:b({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:b({},_({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(F,L,e){var T=e(27659).a0,b=e(36736),a="table";L.name=a,L.plot=function(_){var g=T(_.calcdata,a)[0];g.length&&b(_,g)},L.clean=function(_,g,h,o){var t=o._has&&o._has(a),i=g._has&&g._has(a);t&&!i&&o._paperdiv.selectAll(".table").remove()}},76333:function(F,L,e){var T=e(28984).wrap;F.exports=function(){return T({})}},49850:function(F){F.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(F,L,e){var T=e(49850),b=e(1426).extendFlat,a=e(92770);function _(r){if(Array.isArray(r)){for(var s=0,l=0;l<r.length;l++)s=Math.max(s,_(r[l]));return s}return r}function g(r,s){return r+s}function h(r){var s,l=r.slice(),u=1/0,d=0;for(s=0;s<l.length;s++)Array.isArray(l[s])||(l[s]=[l[s]]),u=Math.min(u,l[s].length),d=Math.max(d,l[s].length);if(u!==d)for(s=0;s<l.length;s++){var c=d-l[s].length;c&&(l[s]=l[s].concat(o(c)))}return l}function o(r){for(var s=new Array(r),l=0;l<r;l++)s[l]="";return s}function t(r){return r.calcdata.columns.reduce(function(s,l){return l.xIndex<r.xIndex?s+l.columnWidth:s},0)}function i(r,s){return Object.keys(r).map(function(l){return b({},r[l],{auxiliaryBlocks:s})})}function n(r,s){for(var l,u={},d=0,c=0,w={firstRowIndex:null,lastRowIndex:null,rows:[]},m=0,f=0,x=0;x<r.length;x++)l=r[x],w.rows.push({rowIndex:x,rowHeight:l}),((c+=l)>=s||x===r.length-1)&&(u[d]=w,w.key=f++,w.firstRowIndex=m,w.lastRowIndex=x,w={firstRowIndex:null,lastRowIndex:null,rows:[]},d+=c,m=x+1,c=0);return u}F.exports=function(r,s){var l=h(s.cells.values),u=function(X){return X.slice(s.header.values.length,X.length)},d=h(s.header.values);d.length&&!d[0].length&&(d[0]=[""],d=h(d));var c=d.concat(u(l).map(function(){return o((d[0]||[""]).length)})),w=s.domain,m=Math.floor(r._fullLayout._size.w*(w.x[1]-w.x[0])),f=Math.floor(r._fullLayout._size.h*(w.y[1]-w.y[0])),x=s.header.values.length?c[0].map(function(){return s.header.height}):[T.emptyHeaderHeight],y=l.length?l[0].map(function(){return s.cells.height}):[],v=x.reduce(g,0),M=n(y,f-v+T.uplift),p=i(n(x,v),[]),S=i(M,p),A={},k=s._fullInput.columnorder.concat(u(l.map(function(X,D){return D}))),C=c.map(function(X,D){var V=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(D,s.columnwidth.length-1)]:s.columnwidth;return a(V)?Number(V):1}),P=C.reduce(g,0);C=C.map(function(X){return X/P*m});var R=Math.max(_(s.header.line.width),_(s.cells.line.width)),O={key:s.uid+r._context.staticPlot,translateX:w.x[0]*r._fullLayout._size.w,translateY:r._fullLayout._size.h*(1-w.y[1]),size:r._fullLayout._size,width:m,maxLineWidth:R,height:f,columnOrder:k,groupHeight:f,rowBlocks:S,headerRowBlocks:p,scrollY:0,cells:b({},s.cells,{values:l}),headerCells:b({},s.header,{values:c}),gdColumns:c.map(function(X){return X[0]}),gdColumnsOriginalOrder:c.map(function(X){return X[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(X,D){var V=A[X];return A[X]=(V||0)+1,{key:X+"__"+A[X],label:X,specIndex:D,xIndex:k[D],xScale:t,x:void 0,calcdata:void 0,columnWidth:C[D]}})};return O.columns.forEach(function(X){X.calcdata=O,X.x=t(X)}),O}},56269:function(F,L,e){var T=e(1426).extendFlat;L.splitToPanels=function(b){var a=[0,0],_=T({},b,{key:"header",type:"header",page:0,prevPages:a,currentRepaint:[null,null],dragHandle:!0,values:b.calcdata.headerCells.values[b.specIndex],rowBlocks:b.calcdata.headerRowBlocks,calcdata:T({},b.calcdata,{cells:b.calcdata.headerCells})});return[T({},b,{key:"cells1",type:"cells",page:0,prevPages:a,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),T({},b,{key:"cells2",type:"cells",page:1,prevPages:a,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),_]},L.splitToCells=function(b){var a=function(_){var g=_.rowBlocks[_.page],h=g?g.rows[0].rowIndex:0;return[h,g?h+g.rows.length:0]}(b);return(b.values||[]).slice(a[0],a[1]).map(function(_,g){return{keyWithinBlock:g+(typeof _=="string"&&_.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:a[0]+g,column:b,calcdata:b.calcdata,page:b.page,rowBlocks:b.rowBlocks,value:_}})}},39754:function(F,L,e){var T=e(71828),b=e(44464),a=e(27670).c;F.exports=function(_,g,h,o){function t(i,n){return T.coerce(_,g,b,i,n)}a(g,o,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),T.coerceFont(t,"header.font",T.extendFlat({},o.font)),function(i,n){for(var r=i.columnorder||[],s=i.header.values.length,l=r.slice(0,s),u=l.slice().sort(function(w,m){return w-m}),d=l.map(function(w){return u.indexOf(w)}),c=d.length;c<s;c++)d.push(c);n("columnorder",d)}(g,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),T.coerceFont(t,"cells.font",T.extendFlat({},o.font)),g._length=null}},96595:function(F,L,e){F.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function(F,L,e){var T=e(49850),b=e(39898),a=e(71828).numberFormat,_=e(28984),g=e(91424),h=e(63893),o=e(71828).raiseToTop,t=e(71828).strTranslate,i=e(71828).cancelTransition,n=e(51018),r=e(56269),s=e(7901);function l(W){return Math.ceil(W.calcdata.maxLineWidth/2)}function u(W,q){return"clip"+W._fullLayout._uid+"_scrollAreaBottomClip_"+q.key}function d(W,q){return"clip"+W._fullLayout._uid+"_columnBoundaryClippath_"+q.calcdata.key+"_"+q.specIndex}function c(W){return[].concat.apply([],W.map(function(q){return q})).map(function(q){return q.__data__})}function w(W,q,re){var ee=W.selectAll("."+T.cn.scrollbarKit).data(_.repeat,_.keyFun);ee.enter().append("g").classed(T.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ee.each(function(ae){var se=ae.scrollbarState;se.totalHeight=function(ce){var me=ce.rowBlocks;return D(me,me.length-1)+(me.length?V(me[me.length-1],1/0):1)}(ae),se.scrollableAreaHeight=ae.groupHeight-S(ae),se.currentlyVisibleHeight=Math.min(se.totalHeight,se.scrollableAreaHeight),se.ratio=se.currentlyVisibleHeight/se.totalHeight,se.barLength=Math.max(se.ratio*se.currentlyVisibleHeight,T.goldenRatio*T.scrollbarWidth),se.barWiggleRoom=se.currentlyVisibleHeight-se.barLength,se.wiggleRoom=Math.max(0,se.totalHeight-se.scrollableAreaHeight),se.topY=se.barWiggleRoom===0?0:ae.scrollY/se.wiggleRoom*se.barWiggleRoom,se.bottomY=se.topY+se.barLength,se.dragMultiplier=se.wiggleRoom/se.barWiggleRoom}).attr("transform",function(ae){var se=ae.width+T.scrollbarWidth/2+T.scrollbarOffset;return t(se,S(ae))});var K=ee.selectAll("."+T.cn.scrollbar).data(_.repeat,_.keyFun);K.enter().append("g").classed(T.cn.scrollbar,!0);var Y=K.selectAll("."+T.cn.scrollbarSlider).data(_.repeat,_.keyFun);Y.enter().append("g").classed(T.cn.scrollbarSlider,!0),Y.attr("transform",function(ae){return t(0,ae.scrollbarState.topY||0)});var $=Y.selectAll("."+T.cn.scrollbarGlyph).data(_.repeat,_.keyFun);$.enter().append("line").classed(T.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",T.scrollbarWidth).attr("stroke-linecap","round").attr("y1",T.scrollbarWidth/2),$.attr("y2",function(ae){return ae.scrollbarState.barLength-T.scrollbarWidth/2}).attr("stroke-opacity",function(ae){return ae.columnDragInProgress||!ae.scrollbarState.barWiggleRoom||re?0:.4}),$.transition().delay(0).duration(0),$.transition().delay(T.scrollbarHideDelay).duration(T.scrollbarHideDuration).attr("stroke-opacity",0);var ne=K.selectAll("."+T.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);ne.enter().append("line").classed(T.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",T.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ae){var se=b.event.y,ce=this.getBoundingClientRect(),me=ae.scrollbarState,ye=se-ce.top,Te=b.scale.linear().domain([0,me.scrollableAreaHeight]).range([0,me.totalHeight]).clamp(!0);me.topY<=ye&&ye<=me.bottomY||k(q,W,null,Te(ye-me.barLength/2))(ae)}).call(b.behavior.drag().origin(function(ae){return b.event.stopPropagation(),ae.scrollbarState.scrollbarScrollInProgress=!0,ae}).on("drag",k(q,W)).on("dragend",function(){})),ne.attr("y2",function(ae){return ae.scrollbarState.scrollableAreaHeight}),q._context.staticPlot&&($.remove(),ne.remove())}function m(W,q,re,ee){var K=function(se){var ce=se.selectAll("."+T.cn.columnCells).data(_.repeat,_.keyFun);return ce.enter().append("g").classed(T.cn.columnCells,!0),ce.exit().remove(),ce}(re),Y=function(se){var ce=se.selectAll("."+T.cn.columnCell).data(r.splitToCells,function(me){return me.keyWithinBlock});return ce.enter().append("g").classed(T.cn.columnCell,!0),ce.exit().remove(),ce}(K);(function(se){se.each(function(ce,me){var ye=ce.calcdata.cells.font,Te=ce.column.specIndex,Ce={size:y(ye.size,Te,me),color:y(ye.color,Te,me),family:y(ye.family,Te,me)};ce.rowNumber=ce.key,ce.align=y(ce.calcdata.cells.align,Te,me),ce.cellBorderWidth=y(ce.calcdata.cells.line.width,Te,me),ce.font=Ce})})(Y);var $=function(se){var ce=se.selectAll("."+T.cn.cellRect).data(_.repeat,function(me){return me.keyWithinBlock});return ce.enter().append("rect").classed(T.cn.cellRect,!0),ce}(Y);(function(se){se.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var me=b.select(this);s.stroke(me,y(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),s.fill(me,y(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})($);var ne=function(se){var ce=se.selectAll("."+T.cn.cellTextHolder).data(_.repeat,function(me){return me.keyWithinBlock});return ce.enter().append("g").classed(T.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(Y),ae=function(se){var ce=se.selectAll("."+T.cn.cellText).data(_.repeat,function(me){return me.keyWithinBlock});return ce.enter().append("text").classed(T.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){b.event.stopPropagation()}),ce}(ne);(function(se){se.each(function(ce){g.font(b.select(this),ce.font)})})(ae),f(ae,q,ee,W),X(Y)}function f(W,q,re,ee){W.text(function(K){var Y=K.column.specIndex,$=K.rowNumber,ne=K.value,ae=typeof ne=="string",se=ae&&ne.match(/<br>/i),ce=!ae||se;K.mayHaveMarkup=ae&&ne.match(/[<&>]/);var me,ye=typeof(me=ne)=="string"&&me.match(T.latexCheck);K.latex=ye;var Te,Ce,pe=ye?"":y(K.calcdata.cells.prefix,Y,$)||"",fe=ye?"":y(K.calcdata.cells.suffix,Y,$)||"",Oe=ye?null:y(K.calcdata.cells.format,Y,$)||null,Se=pe+(Oe?a(Oe)(K.value):K.value)+fe;if(K.wrappingNeeded=!K.wrapped&&!ce&&!ye&&(Te=x(Se)),K.cellHeightMayIncrease=se||ye||K.mayHaveMarkup||(Te===void 0?x(Se):Te),K.needsConvertToTspans=K.mayHaveMarkup||K.wrappingNeeded||K.latex,K.wrappingNeeded){var Me=(T.wrapSplitCharacter===" "?Se.replace(/<a href=/gi,"<a_href="):Se).split(T.wrapSplitCharacter),ue=T.wrapSplitCharacter===" "?Me.map(function(le){return le.replace(/<a_href=/gi,"<a href=")}):Me;K.fragments=ue.map(function(le){return{text:le,width:null}}),K.fragments.push({fragment:T.wrapSpacer,width:null}),Ce=ue.join(T.lineBreaker)+T.lineBreaker+T.wrapSpacer}else delete K.fragments,Ce=Se;return Ce}).attr("dy",function(K){return K.needsConvertToTspans?0:"0.75em"}).each(function(K){var Y=this,$=b.select(Y),ne=K.wrappingNeeded?P:R;K.needsConvertToTspans?h.convertToTspans($,ee,ne(re,Y,q,ee,K)):b.select(Y.parentNode).attr("transform",function(ae){return t(O(ae),T.cellPad)}).attr("text-anchor",function(ae){return{left:"start",center:"middle",right:"end"}[ae.align]})})}function x(W){return W.indexOf(T.wrapSplitCharacter)!==-1}function y(W,q,re){if(Array.isArray(W)){var ee=W[Math.min(q,W.length-1)];return Array.isArray(ee)?ee[Math.min(re,ee.length-1)]:ee}return W}function v(W,q,re){W.transition().ease(T.releaseTransitionEase).duration(T.releaseTransitionDuration).attr("transform",t(q.x,re))}function M(W){return W.type==="cells"}function p(W){return W.type==="header"}function S(W){return(W.rowBlocks.length?W.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(q,re){return q+V(re,1/0)},0)}function A(W,q,re){var ee=c(q)[0];if(ee!==void 0){var K=ee.rowBlocks,Y=ee.calcdata,$=D(K,K.length),ne=ee.calcdata.groupHeight-S(ee),ae=Y.scrollY=Math.max(0,Math.min($-ne,Y.scrollY)),se=function(ce,me,ye){for(var Te=[],Ce=0,pe=0;pe<ce.length;pe++){for(var fe=ce[pe],Oe=fe.rows,Se=0,Me=0;Me<Oe.length;Me++)Se+=Oe[Me].rowHeight;fe.allRowsHeight=Se,me<Ce+Se&&me+ye>Ce&&Te.push(pe),Ce+=Se}return Te}(K,ae,ne);se.length===1&&(se[0]===K.length-1?se.unshift(se[0]-1):se.push(se[0]+1)),se[0]%2&&se.reverse(),q.each(function(ce,me){ce.page=se[me],ce.scrollY=ae}),q.attr("transform",function(ce){var me=D(ce.rowBlocks,ce.page)-ce.scrollY;return t(0,me)}),W&&(C(W,re,q,se,ee.prevPages,ee,0),C(W,re,q,se,ee.prevPages,ee,1),w(re,W))}}function k(W,q,re,ee){return function(K){var Y=K.calcdata?K.calcdata:K,$=q.filter(function(ce){return Y.key===ce.key}),ne=re||Y.scrollbarState.dragMultiplier,ae=Y.scrollY;Y.scrollY=ee===void 0?Y.scrollY+ne*b.event.dy:ee;var se=$.selectAll("."+T.cn.yColumn).selectAll("."+T.cn.columnBlock).filter(M);return A(W,se,$),Y.scrollY===ae}}function C(W,q,re,ee,K,Y,$){ee[$]!==K[$]&&(clearTimeout(Y.currentRepaint[$]),Y.currentRepaint[$]=setTimeout(function(){var ne=re.filter(function(ae,se){return se===$&&ee[se]!==K[se]});m(W,q,ne,re),K[$]=ee[$]}))}function P(W,q,re,ee){return function(){var K=b.select(q.parentNode);K.each(function(Y){var $=Y.fragments;K.selectAll("tspan.line").each(function(Ce,pe){$[pe].width=this.getComputedTextLength()});var ne,ae,se=$[$.length-1].width,ce=$.slice(0,-1),me=[],ye=0,Te=Y.column.columnWidth-2*T.cellPad;for(Y.value="";ce.length;)ye+(ae=(ne=ce.shift()).width+se)>Te&&(Y.value+=me.join(T.wrapSpacer)+T.lineBreaker,me=[],ye=0),me.push(ne.text),ye+=ae;ye&&(Y.value+=me.join(T.wrapSpacer)),Y.wrapped=!0}),K.selectAll("tspan.line").remove(),f(K.select("."+T.cn.cellText),re,W,ee),b.select(q.parentNode.parentNode).call(X)}}function R(W,q,re,ee,K){return function(){if(!K.settledY){var Y=b.select(q.parentNode),$=B(K),ne=K.key-$.firstRowIndex,ae=$.rows[ne].rowHeight,se=K.cellHeightMayIncrease?q.parentNode.getBoundingClientRect().height+2*T.cellPad:ae,ce=Math.max(se,ae);ce-$.rows[ne].rowHeight&&($.rows[ne].rowHeight=ce,W.selectAll("."+T.cn.columnCell).call(X),A(null,W.filter(M),0),w(re,ee,!0)),Y.attr("transform",function(){var me=this,ye=me.parentNode.getBoundingClientRect(),Te=b.select(me.parentNode).select("."+T.cn.cellRect).node().getBoundingClientRect(),Ce=me.transform.baseVal.consolidate(),pe=Te.top-ye.top+(Ce?Ce.matrix.f:T.cellPad);return t(O(K,b.select(me.parentNode).select("."+T.cn.cellTextHolder).node().getBoundingClientRect().width),pe)}),K.settledY=!0}}}function O(W,q){switch(W.align){case"left":default:return T.cellPad;case"right":return W.column.columnWidth-(q||0)-T.cellPad;case"center":return(W.column.columnWidth-(q||0))/2}}function X(W){W.attr("transform",function(q){var re=q.rowBlocks[0].auxiliaryBlocks.reduce(function(K,Y){return K+V(Y,1/0)},0),ee=V(B(q),q.key);return t(0,ee+re)}).selectAll("."+T.cn.cellRect).attr("height",function(q){return(re=B(q),ee=q.key,re.rows[ee-re.firstRowIndex]).rowHeight;var re,ee})}function D(W,q){for(var re=0,ee=q-1;ee>=0;ee--)re+=j(W[ee]);return re}function V(W,q){for(var re=0,ee=0;ee<W.rows.length&&W.rows[ee].rowIndex<q;ee++)re+=W.rows[ee].rowHeight;return re}function j(W){var q=W.allRowsHeight;if(q!==void 0)return q;for(var re=0,ee=0;ee<W.rows.length;ee++)re+=W.rows[ee].rowHeight;return W.allRowsHeight=re,re}function B(W){return W.rowBlocks[W.page]}F.exports=function(W,q){var re=!W._context.staticPlot,ee=W._fullLayout._paper.selectAll("."+T.cn.table).data(q.map(function(fe){var Oe=_.unwrap(fe).trace;return n(W,Oe)}),_.keyFun);ee.exit().remove(),ee.enter().append("g").classed(T.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ee.attr("width",function(fe){return fe.width+fe.size.l+fe.size.r}).attr("height",function(fe){return fe.height+fe.size.t+fe.size.b}).attr("transform",function(fe){return t(fe.translateX,fe.translateY)});var K=ee.selectAll("."+T.cn.tableControlView).data(_.repeat,_.keyFun),Y=K.enter().append("g").classed(T.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var $="onwheel"in document?"wheel":"mousewheel";Y.on("mousemove",function(fe){K.filter(function(Oe){return fe===Oe}).call(w,W)}).on($,function(fe){if(!fe.scrollbarState.wheeling){fe.scrollbarState.wheeling=!0;var Oe=fe.scrollY+b.event.deltaY;k(W,K,null,Oe)(fe)||(b.event.stopPropagation(),b.event.preventDefault()),fe.scrollbarState.wheeling=!1}}).call(w,W,!0)}K.attr("transform",function(fe){return t(fe.size.l,fe.size.t)});var ne=K.selectAll("."+T.cn.scrollBackground).data(_.repeat,_.keyFun);ne.enter().append("rect").classed(T.cn.scrollBackground,!0).attr("fill","none"),ne.attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}),K.each(function(fe){g.setClipUrl(b.select(this),u(W,fe),W)});var ae=K.selectAll("."+T.cn.yColumn).data(function(fe){return fe.columns},_.keyFun);ae.enter().append("g").classed(T.cn.yColumn,!0),ae.exit().remove(),ae.attr("transform",function(fe){return t(fe.x,0)}),re&&ae.call(b.behavior.drag().origin(function(fe){return v(b.select(this),fe,-T.uplift),o(this),fe.calcdata.columnDragInProgress=!0,w(K.filter(function(Oe){return fe.calcdata.key===Oe.key}),W),fe}).on("drag",function(fe){var Oe=b.select(this),Se=function(Me){return(fe===Me?b.event.x:Me.x)+Me.columnWidth/2};fe.x=Math.max(-T.overdrag,Math.min(fe.calcdata.width+T.overdrag-fe.columnWidth,b.event.x)),c(ae).filter(function(Me){return Me.calcdata.key===fe.calcdata.key}).sort(function(Me,ue){return Se(Me)-Se(ue)}).forEach(function(Me,ue){Me.xIndex=ue,Me.x=fe===Me?Me.x:Me.xScale(Me)}),ae.filter(function(Me){return fe!==Me}).transition().ease(T.transitionEase).duration(T.transitionDuration).attr("transform",function(Me){return t(Me.x,0)}),Oe.call(i).attr("transform",t(fe.x,-T.uplift))}).on("dragend",function(fe){var Oe=b.select(this),Se=fe.calcdata;fe.x=fe.xScale(fe),fe.calcdata.columnDragInProgress=!1,v(Oe,fe,0),function(Me,ue,le){var ie=ue.gdColumnsOriginalOrder;ue.gdColumns.sort(function(ge,Ae){return le[ie.indexOf(ge)]-le[ie.indexOf(Ae)]}),ue.columnorder=le,Me.emit("plotly_restyle")}(W,Se,Se.columns.map(function(Me){return Me.xIndex}))})),ae.each(function(fe){g.setClipUrl(b.select(this),d(W,fe),W)});var se=ae.selectAll("."+T.cn.columnBlock).data(r.splitToPanels,_.keyFun);se.enter().append("g").classed(T.cn.columnBlock,!0).attr("id",function(fe){return fe.key}),se.style("cursor",function(fe){return fe.dragHandle?"ew-resize":fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=se.filter(p),me=se.filter(M);re&&me.call(b.behavior.drag().origin(function(fe){return b.event.stopPropagation(),fe}).on("drag",k(W,K,-1)).on("dragend",function(){})),m(W,K,ce,se),m(W,K,me,se);var ye=K.selectAll("."+T.cn.scrollAreaClip).data(_.repeat,_.keyFun);ye.enter().append("clipPath").classed(T.cn.scrollAreaClip,!0).attr("id",function(fe){return u(W,fe)});var Te=ye.selectAll("."+T.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);Te.enter().append("rect").classed(T.cn.scrollAreaClipRect,!0).attr("x",-T.overdrag).attr("y",-T.uplift).attr("fill","none"),Te.attr("width",function(fe){return fe.width+2*T.overdrag}).attr("height",function(fe){return fe.height+T.uplift}),ae.selectAll("."+T.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(T.cn.columnBoundary,!0);var Ce=ae.selectAll("."+T.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);Ce.enter().append("clipPath").classed(T.cn.columnBoundaryClippath,!0),Ce.attr("id",function(fe){return d(W,fe)});var pe=Ce.selectAll("."+T.cn.columnBoundaryRect).data(_.repeat,_.keyFun);pe.enter().append("rect").classed(T.cn.columnBoundaryRect,!0).attr("fill","none"),pe.attr("width",function(fe){return fe.columnWidth+2*l(fe)}).attr("height",function(fe){return fe.calcdata.height+2*l(fe)+T.uplift}).attr("x",function(fe){return-l(fe)}).attr("y",function(fe){return-l(fe)}),A(null,me,K)}},45802:function(F,L,e){var T=e(5386).fF,b=e(5386).si,a=e(50693),_=e(27670).Y,g=e(34e3),h=e(57564),o=e(43473),t=e(1426).extendFlat,i=e(79952).u;F.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:h.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:h.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},a("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},g.textfont,{}),editType:"calc"},text:g.text,textinfo:h.textinfo,texttemplate:b({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:g.hovertext,hoverinfo:h.hoverinfo,hovertemplate:T({},{keys:o.eventDataKeys}),textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:t({},g.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:g.sort,root:h.root,domain:_({name:"treemap",trace:!0,editType:"calc"})}},78018:function(F,L,e){var T=e(74875);L.name="treemap",L.plot=function(b,a,_,g){T.plotBasePlot(L.name,b,a,_,g)},L.clean=function(b,a,_,g){T.cleanBasePlot(L.name,b,a,_,g)}},65039:function(F,L,e){var T=e(52147);L.y=function(b,a){return T.calc(b,a)},L.T=function(b){return T._runCrossTraceCalc("treemap",b)}},43473:function(F){F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(F,L,e){var T=e(71828),b=e(45802),a=e(7901),_=e(27670).c,g=e(90769).handleText,h=e(97313).TEXTPAD,o=e(37434).handleMarkerDefaults,t=e(21081),i=t.hasColorscale,n=t.handleDefaults;F.exports=function(r,s,l,u){function d(M,p){return T.coerce(r,s,b,M,p)}var c=d("labels"),w=d("parents");if(c&&c.length&&w&&w.length){var m=d("values");m&&m.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.packing")==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var f=d("text");d("texttemplate"),s.texttemplate||d("textinfo",Array.isArray(f)?"text+label":"label"),d("hovertext"),d("hovertemplate");var x=d("pathbar.visible");g(r,s,u,d,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var y=s.textposition.indexOf("bottom")!==-1;o(r,s,u,d),(s._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,s,u,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(s.marker.colors||[]).length);var v=2*s.textfont.size;d("marker.pad.t",y?v/4:v),d("marker.pad.l",v/4),d("marker.pad.r",v/4),d("marker.pad.b",y?v:v/4),d("marker.cornerradius"),s._hovered={marker:{line:{width:2,color:a.contrast(u.paper_bgcolor)}}},x&&(d("pathbar.thickness",s.pathbar.textfont.size+2*h),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),_(s,u,d),s._length=null}else s.visible=!1}},80694:function(F,L,e){var T=e(39898),b=e(2791),a=e(72597).clearMinTextSize,_=e(16688).resizeText,g=e(46650);F.exports=function(h,o,t,i,n){var r,s,l=n.type,u=n.drawDescendants,d=h._fullLayout,c=d["_"+l+"layer"],w=!t;a(l,d),(r=c.selectAll("g.trace."+l).data(o,function(m){return m[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),r.order(),!d.uniformtext.mode&&b.hasTransition(t)?(i&&(s=i()),T.transition().duration(t.duration).ease(t.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){c.selectAll("g.trace").each(function(m){g(h,m,this,t,u)})})):(r.each(function(m){g(h,m,this,t,u)}),d.uniformtext.mode&&_(h,c.selectAll(".trace"),l)),w&&r.exit().remove()}},66209:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(63893),g=e(37210),h=e(96362).styleOne,o=e(43473),t=e(2791),i=e(83523),n=!0;F.exports=function(r,s,l,u,d){var c=d.barDifY,w=d.width,m=d.height,f=d.viewX,x=d.viewY,y=d.pathSlice,v=d.toMoveInsideSlice,M=d.strTransform,p=d.hasTransition,S=d.handleSlicesExit,A=d.makeUpdateSliceInterpolator,k=d.makeUpdateTextInterpolator,C={},P=r._context.staticPlot,R=r._fullLayout,O=s[0],X=O.trace,D=O.hierarchy,V=w/X._entryDepth,j=t.listPath(l.data,"id"),B=g(D.copy(),[w,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(q){var re=j.indexOf(q.data.id);return re!==-1&&(q.x0=V*re,q.x1=V*(re+1),q.y0=c,q.y1=c+m,q.onPathbar=!0,!0)})).reverse(),(u=u.data(B,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,C,[w,m],y),u.order();var W=u;p&&(W=W.transition().each("end",function(){var q=T.select(this);t.setSliceCursor(q,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(q){q._x0=f(q.x0),q._x1=f(q.x1),q._y0=x(q.y0),q._y1=x(q.y1),q._hoverX=f(q.x1-Math.min(w,m)/2),q._hoverY=x(q.y1-m/2);var re=T.select(this),ee=b.ensureSingle(re,"path","surface",function(ne){ne.style("pointer-events",P?"none":"all")});p?ee.transition().attrTween("d",function(ne){var ae=A(ne,n,C,[w,m]);return function(se){return y(ae(se))}}):ee.attr("d",y),re.call(i,l,r,s,{styleOne:h,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),ee.call(h,q,X,r,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var K=b.ensureSingle(re,"g","slicetext"),Y=b.ensureSingle(K,"text","",function(ne){ne.attr("data-notex",1)}),$=b.ensureUniformFontSize(r,t.determineTextFont(X,q,R.font,{onPathbar:!0}));Y.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(a.font,$).call(_.convertToTspans,r),q.textBB=a.bBox(Y.node()),q.transform=v(q,{fontSize:$.size,onPathbar:!0}),q.transform.fontSize=$.size,p?Y.transition().attrTween("transform",function(ne){var ae=k(ne,n,C,[w,m]);return function(se){return M(ae(se))}}):Y.attr("transform",M(q))})}},52583:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(63893),g=e(37210),h=e(96362).styleOne,o=e(43473),t=e(2791),i=e(83523),n=e(24714).formatSliceLabel,r=!1;F.exports=function(s,l,u,d,c){var w=c.width,m=c.height,f=c.viewX,x=c.viewY,y=c.pathSlice,v=c.toMoveInsideSlice,M=c.strTransform,p=c.hasTransition,S=c.handleSlicesExit,A=c.makeUpdateSliceInterpolator,k=c.makeUpdateTextInterpolator,C=c.prevEntry,P=s._context.staticPlot,R=s._fullLayout,O=l[0].trace,X=O.textposition.indexOf("left")!==-1,D=O.textposition.indexOf("right")!==-1,V=O.textposition.indexOf("bottom")!==-1,j=!V&&!O.marker.pad.t||V&&!O.marker.pad.b,B=g(u,[w,m],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),W=1/0,q=-1/0;B.forEach(function($){var ne=$.depth;ne>=O._maxDepth?($.x0=$.x1=($.x0+$.x1)/2,$.y0=$.y1=($.y0+$.y1)/2):(W=Math.min(W,ne),q=Math.max(q,ne))}),d=d.data(B,t.getPtId),O._maxVisibleLayers=isFinite(q)?q-W+1:0,d.enter().append("g").classed("slice",!0),S(d,r,{},[w,m],y),d.order();var re=null;if(p&&C){var ee=t.getPtId(C);d.each(function($){re===null&&t.getPtId($)===ee&&(re={x0:$.x0,x1:$.x1,y0:$.y0,y1:$.y1})})}var K=function(){return re||{x0:0,x1:w,y0:0,y1:m}},Y=d;return p&&(Y=Y.transition().each("end",function(){var $=T.select(this);t.setSliceCursor($,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function($){var ne=t.isHeader($,O);$._x0=f($.x0),$._x1=f($.x1),$._y0=x($.y0),$._y1=x($.y1),$._hoverX=f($.x1-O.marker.pad.r),$._hoverY=x(V?$.y1-O.marker.pad.b/2:$.y0+O.marker.pad.t/2);var ae=T.select(this),se=b.ensureSingle(ae,"path","surface",function(Te){Te.style("pointer-events",P?"none":"all")});p?se.transition().attrTween("d",function(Te){var Ce=A(Te,r,K(),[w,m]);return function(pe){return y(Ce(pe))}}):se.attr("d",y),ae.call(i,u,s,l,{styleOne:h,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,s,{isTransitioning:s._transitioning}),se.call(h,$,O,s,{hovered:!1}),$.x0===$.x1||$.y0===$.y1?$._text="":$._text=ne?j?"":t.getPtLabel($)||"":n($,u,O,l,R)||"";var ce=b.ensureSingle(ae,"g","slicetext"),me=b.ensureSingle(ce,"text","",function(Te){Te.attr("data-notex",1)}),ye=b.ensureUniformFontSize(s,t.determineTextFont(O,$,R.font));me.text($._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":X||ne?"start":"middle").call(a.font,ye).call(_.convertToTspans,s),$.textBB=a.bBox(me.node()),$.transform=v($,{fontSize:ye.size,isHeader:ne}),$.transform.fontSize=ye.size,p?me.transition().attrTween("transform",function(Te){var Ce=k(Te,r,K(),[w,m]);return function(pe){return M(Ce(pe))}}):me.attr("transform",M($))}),re}},14102:function(F){F.exports=function L(e,T,b){var a;b.swapXY&&(a=e.x0,e.x0=e.y0,e.y0=a,a=e.x1,e.x1=e.y1,e.y1=a),b.flipX&&(a=e.x0,e.x0=T[0]-e.x1,e.x1=T[0]-a),b.flipY&&(a=e.y0,e.y0=T[1]-e.y1,e.y1=T[1]-a);var _=e.children;if(_)for(var g=0;g<_.length;g++)L(_[g],T,b)}},70954:function(F,L,e){F.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function(F){F.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(F,L,e){var T=e(71828),b=e(55479);F.exports=function(a,_){function g(h,o){return T.coerce(a,_,b,h,o)}g("treemapcolorway",_.colorway),g("extendtreemapcolors")}},37210:function(F,L,e){var T=e(674),b=e(14102);F.exports=function(a,_,g){var h,o=g.flipX,t=g.flipY,i=g.packing==="dice-slice",n=g.pad[t?"bottom":"top"],r=g.pad[o?"right":"left"],s=g.pad[o?"left":"right"],l=g.pad[t?"top":"bottom"];i&&(h=r,r=n,n=h,h=s,s=l,l=h);var u=T.treemap().tile(function(d,c){switch(d){case"squarify":return T.treemapSquarify.ratio(c);case"binary":return T.treemapBinary;case"dice":return T.treemapDice;case"slice":return T.treemapSlice;default:return T.treemapSliceDice}}(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(r).paddingRight(s).paddingTop(n).paddingBottom(l).size(i?[_[1],_[0]]:_)(a);return(i||o||t)&&b(u,_,{swapXY:i,flipX:o,flipY:t}),u}},5893:function(F,L,e){var T=e(80694),b=e(52583);F.exports=function(a,_,g,h){return T(a,_,g,h,{type:"treemap",drawDescendants:b})}},46650:function(F,L,e){var T=e(39898),b=e(81684).sX,a=e(2791),_=e(71828),g=e(97313).TEXTPAD,h=e(17295).toMoveInsideBar,o=e(72597).recordMinTextSize,t=e(43473),i=e(66209);function n(r){return a.isHierarchyRoot(r)?"":a.getPtId(r)}F.exports=function(r,s,l,u,d){var c=r._fullLayout,w=s[0],m=w.trace,f=m.type==="icicle",x=w.hierarchy,y=a.findEntryWithLevel(x,m.level),v=T.select(l),M=v.selectAll("g.pathbar"),p=v.selectAll("g.slice");if(!y)return M.remove(),void p.remove();var S=a.isHierarchyRoot(y),A=!c.uniformtext.mode&&a.hasTransition(u),k=a.getMaxDepth(m),C=c._size,P=m.domain,R=C.w*(P.x[1]-P.x[0]),O=C.h*(P.y[1]-P.y[0]),X=R,D=m.pathbar.thickness,V=m.marker.line.width+t.gapWithPathbar,j=m.pathbar.visible?m.pathbar.side.indexOf("bottom")>-1?O+V:-(D+V):0,B={x0:X,x1:X,y0:j,y1:j+D},W=function(Ee,Re,je){var Fe=m.tiling.pad,Xe=function(ot){return ot-Fe<=Re.x0},Ze=function(ot){return ot+Fe>=Re.x1},at=function(ot){return ot-Fe<=Re.y0},lt=function(ot){return ot+Fe>=Re.y1};return Ee.x0===Re.x0&&Ee.x1===Re.x1&&Ee.y0===Re.y0&&Ee.y1===Re.y1?{x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1}:{x0:Xe(Ee.x0-Fe)?0:Ze(Ee.x0-Fe)?je[0]:Ee.x0,x1:Xe(Ee.x1+Fe)?0:Ze(Ee.x1+Fe)?je[0]:Ee.x1,y0:at(Ee.y0-Fe)?0:lt(Ee.y0-Fe)?je[1]:Ee.y0,y1:at(Ee.y1+Fe)?0:lt(Ee.y1+Fe)?je[1]:Ee.y1}},q=null,re={},ee={},K=null,Y=function(Ee,Re){return Re?re[n(Ee)]:ee[n(Ee)]};w.hasMultipleRoots&&S&&k++,m._maxDepth=k,m._backgroundColor=c.paper_bgcolor,m._entryDepth=y.data.depth,m._atRootLevel=S;var $=-R/2+C.l+C.w*(P.x[1]+P.x[0])/2,ne=-O/2+C.t+C.h*(1-(P.y[1]+P.y[0])/2),ae=function(Ee){return $+Ee},se=function(Ee){return ne+Ee},ce=se(0),me=ae(0),ye=function(Ee){return me+Ee},Te=function(Ee){return ce+Ee};function Ce(Ee,Re){return Ee+","+Re}var pe=ye(0),fe=function(Ee){Ee.x=Math.max(pe,Ee.x)},Oe=m.pathbar.edgeshape,Se=m[f?"tiling":"marker"].pad,Me=function(Ee){return m.textposition.indexOf(Ee)!==-1},ue=Me("top"),le=Me("left"),ie=Me("right"),ge=Me("bottom"),Ae=function(Ee,Re){var je=Ee.x0,Fe=Ee.x1,Xe=Ee.y0,Ze=Ee.y1,at=Ee.textBB,lt=ue||Re.isHeader&&!ge?"start":ge?"end":"middle",ot=Me("right"),bt=Me("left")||Re.onPathbar?-1:ot?1:0;if(Re.isHeader){if((je+=(f?Se:Se.l)-g)>=(Fe-=(f?Se:Se.r)-g)){var wt=(je+Fe)/2;je=wt,Fe=wt}var ht;ge?Xe<(ht=Ze-(f?Se:Se.b))&&ht<Ze&&(Xe=ht):Xe<(ht=Xe+(f?Se:Se.t))&&ht<Ze&&(Ze=ht)}var ct=h(je,Fe,Xe,Ze,at,{isHorizontal:!1,constrained:!0,angle:0,anchor:lt,leftToRight:bt});return ct.fontSize=Re.fontSize,ct.targetX=ae(ct.targetX),ct.targetY=se(ct.targetY),isNaN(ct.targetX)||isNaN(ct.targetY)?{}:(je!==Fe&&Xe!==Ze&&o(m.type,ct,c),{scale:ct.scale,rotate:ct.rotate,textX:ct.textX,textY:ct.textY,anchorX:ct.anchorX,anchorY:ct.anchorY,targetX:ct.targetX,targetY:ct.targetY})},we=function(Ee,Re){for(var je,Fe=0,Xe=Ee;!je&&Fe<k;)Fe++,(Xe=Xe.parent)?je=Y(Xe,Re):Fe=k;return je||{}},Ne=function(Ee,Re,je,Fe,Xe){var Ze,at=Y(Ee,Re);if(at)Ze=at;else if(Re)Ze=B;else if(q)if(Ee.parent){var lt=K||je;lt&&!Re?Ze=W(Ee,lt,Fe):(Ze={},_.extendFlat(Ze,we(Ee,Re)))}else Ze=_.extendFlat({},Ee),f&&(Xe.orientation==="h"?Xe.flipX?Ze.x0=Ee.x1:Ze.x1=0:Xe.flipY?Ze.y0=Ee.y1:Ze.y1=0);else Ze={};return b(Ze,{x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1})},He=function(Ee,Re,je,Fe){var Xe=Y(Ee,Re),Ze={},at=function(ot,bt,wt,ht){if(bt)return re[n(x)]||B;var ct=ee[m.level]||wt;return function(Tt){return Tt.data.depth-y.data.depth<k}(ot)?W(ot,ct,ht):{}}(Ee,Re,je,Fe);_.extendFlat(Ze,{transform:Ae({x0:at.x0,x1:at.x1,y0:at.y0,y1:at.y1,textBB:Ee.textBB,_text:Ee._text},{isHeader:a.isHeader(Ee,m)})}),Xe?Ze=Xe:Ee.parent&&_.extendFlat(Ze,we(Ee,Re));var lt=Ee.transform;return Ee.x0!==Ee.x1&&Ee.y0!==Ee.y1&&o(m.type,lt,c),b(Ze,{transform:{scale:lt.scale,rotate:lt.rotate,textX:lt.textX,textY:lt.textY,anchorX:lt.anchorX,anchorY:lt.anchorY,targetX:lt.targetX,targetY:lt.targetY}})},de=function(Ee,Re,je,Fe,Xe){var Ze=Fe[0],at=Fe[1];A?Ee.exit().transition().each(function(){var lt=T.select(this);lt.select("path.surface").transition().attrTween("d",function(ot){var bt=function(wt,ht,ct,Tt){var Lt,kt=Y(wt,ht);if(ht)Lt=B;else{var Ot=Y(y,ht);Lt=Ot?W(wt,Ot,Tt):{}}return b(kt,Lt)}(ot,Re,0,[Ze,at]);return function(wt){return Xe(bt(wt))}}),lt.select("g.slicetext").attr("opacity",0)}).remove():Ee.exit().remove()},Le=function(Ee){var Re=Ee.transform;return Ee.x0!==Ee.x1&&Ee.y0!==Ee.y1&&o(m.type,Re,c),_.getTextTransform({textX:Re.textX,textY:Re.textY,anchorX:Re.anchorX,anchorY:Re.anchorY,targetX:Re.targetX,targetY:Re.targetY,scale:Re.scale,rotate:Re.rotate})};A&&(M.each(function(Ee){re[n(Ee)]={x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1},Ee.transform&&(re[n(Ee)].transform={textX:Ee.transform.textX,textY:Ee.transform.textY,anchorX:Ee.transform.anchorX,anchorY:Ee.transform.anchorY,targetX:Ee.transform.targetX,targetY:Ee.transform.targetY,scale:Ee.transform.scale,rotate:Ee.transform.rotate})}),p.each(function(Ee){ee[n(Ee)]={x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1},Ee.transform&&(ee[n(Ee)].transform={textX:Ee.transform.textX,textY:Ee.transform.textY,anchorX:Ee.transform.anchorX,anchorY:Ee.transform.anchorY,targetX:Ee.transform.targetX,targetY:Ee.transform.targetY,scale:Ee.transform.scale,rotate:Ee.transform.rotate}),!q&&a.isEntry(Ee)&&(q=Ee)})),K=d(r,s,y,p,{width:R,height:O,viewX:ae,viewY:se,pathSlice:function(Ee){var Re=ae(Ee.x0),je=ae(Ee.x1),Fe=se(Ee.y0),Xe=se(Ee.y1),Ze=je-Re,at=Xe-Fe;if(!Ze||!at)return"";var lt=m.marker.cornerradius||0,ot=Math.min(lt,Ze/2,at/2);ot&&Ee.data&&Ee.data.data&&Ee.data.data.label&&(ue&&(ot=Math.min(ot,Se.t)),le&&(ot=Math.min(ot,Se.l)),ie&&(ot=Math.min(ot,Se.r)),ge&&(ot=Math.min(ot,Se.b)));var bt=function(wt,ht){return ot?"a"+Ce(ot,ot)+" 0 0 1 "+Ce(wt,ht):""};return"M"+Ce(Re,Fe+ot)+bt(ot,-ot)+"L"+Ce(je-ot,Fe)+bt(ot,ot)+"L"+Ce(je,Xe-ot)+bt(-ot,ot)+"L"+Ce(Re+ot,Xe)+bt(-ot,-ot)+"Z"},toMoveInsideSlice:Ae,prevEntry:q,makeUpdateSliceInterpolator:Ne,makeUpdateTextInterpolator:He,handleSlicesExit:de,hasTransition:A,strTransform:Le}),m.pathbar.visible?i(r,s,y,M,{barDifY:j,width:X,height:D,viewX:ye,viewY:Te,pathSlice:function(Ee){var Re=ye(Math.max(Math.min(Ee.x0,Ee.x0),0)),je=ye(Math.min(Math.max(Ee.x1,Ee.x1),X)),Fe=Te(Ee.y0),Xe=Te(Ee.y1),Ze=D/2,at={},lt={};at.x=Re,lt.x=je,at.y=lt.y=(Fe+Xe)/2;var ot={x:Re,y:Fe},bt={x:je,y:Fe},wt={x:je,y:Xe},ht={x:Re,y:Xe};return Oe===">"?(ot.x-=Ze,bt.x-=Ze,wt.x-=Ze,ht.x-=Ze):Oe==="/"?(wt.x-=Ze,ht.x-=Ze,at.x-=Ze/2,lt.x-=Ze/2):Oe==="\\"?(ot.x-=Ze,bt.x-=Ze,at.x-=Ze/2,lt.x-=Ze/2):Oe==="<"&&(at.x-=Ze,lt.x-=Ze),fe(ot),fe(ht),fe(at),fe(bt),fe(wt),fe(lt),"M"+Ce(ot.x,ot.y)+"L"+Ce(bt.x,bt.y)+"L"+Ce(lt.x,lt.y)+"L"+Ce(wt.x,wt.y)+"L"+Ce(ht.x,ht.y)+"L"+Ce(at.x,at.y)+"Z"},toMoveInsideSlice:Ae,makeUpdateSliceInterpolator:Ne,makeUpdateTextInterpolator:He,handleSlicesExit:de,hasTransition:A,strTransform:Le}):M.remove()}},96362:function(F,L,e){var T=e(39898),b=e(7901),a=e(71828),_=e(2791),g=e(72597).resizeText,h=e(43467);function o(t,i,n,r,s){var l,u,d=(s||{}).hovered,c=i.data.data,w=c.i,m=c.color,f=_.isHierarchyRoot(i),x=1;if(d)l=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(f&&m===n.root.color)x=100,l="rgba(0,0,0,0)",u=0;else if(l=a.castOption(n,w,"marker.line.color")||b.defaultLine,u=a.castOption(n,w,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var y=n.marker.depthfade;if(y){var v,M=b.combine(b.addOpacity(n._backgroundColor,.75),m);if(y===!0){var p=_.getMaxDepth(n);v=isFinite(p)?_.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else v=i.data.depth-n._entryDepth,n._atRootLevel||v++;if(v>0)for(var S=0;S<v;S++){var A=.5*S/v;m=b.combine(b.addOpacity(M,A),m)}}}t.call(h,i,n,r,m).style("stroke-width",u).call(b.stroke,l).style("opacity",x)}F.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");g(t,i,"treemap"),i.each(function(n){var r=T.select(this),s=n[0].trace;r.style("opacity",s.opacity),r.selectAll("path.surface").each(function(l){T.select(this).call(o,l,s,t,{hovered:!1})})})},styleOne:o}},68875:function(F,L,e){var T=e(53522),b=e(1426).extendFlat,a=e(12663).axisHoverFormat;F.exports={y:T.y,x:T.x,x0:T.x0,y0:T.y0,xhoverformat:a("x"),yhoverformat:a("y"),name:b({},T.name,{}),orientation:b({},T.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,points:b({},T.boxpoints,{}),jitter:b({},T.jitter,{}),pointpos:b({},T.pointpos,{}),width:b({},T.width,{}),marker:T.marker,text:T.text,hovertext:T.hovertext,hovertemplate:T.hovertemplate,quartilemethod:T.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(F,L,e){var T=e(71828),b=e(89298),a=e(48518),_=e(60168),g=e(50606).BADNUM;function h(t,i,n){var r=i.max-i.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var s=n.length,l=T.stdev(n,s-1,i.mean);return Math.max(function(u,d,c){return 1.059*Math.min(d,c/1.349)*Math.pow(u,-.2)}(s,l,i.q3-i.q1),r/100)}function o(t,i,n,r){var s,l=t.spanmode,u=t.span||[],d=[i.min,i.max],c=[i.min-2*r,i.max+2*r];function w(f){var x=u[f],y=n.type==="multicategory"?n.r2c(x):n.d2c(x,0,t[i.valLetter+"calendar"]);return y===g?c[f]:y}var m={type:"linear",range:s=l==="soft"?c:l==="hard"?d:[w(0),w(1)]};return b.setConvert(m),m.cleanRange(),s}F.exports=function(t,i){var n=a(t,i);if(n[0].t.empty)return n;for(var r=t._fullLayout,s=b.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,d=0,c=0,w=0;w<n.length;w++){var m=n[w],f=m.pts.map(_.extractVal),x=m.bandwidth=h(i,m,f),y=m.span=o(i,m,s,x);if(m.min===m.max&&x===0)y=m.span=[m.min,m.max],m.density=[{v:1,t:y[0]}],m.bandwidth=x,d=Math.max(d,1);else{var v=y[1]-y[0],M=Math.ceil(v/(x/3)),p=v/M;if(!isFinite(p)||!isFinite(M))return T.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=_.makeKDE(m,i,f);m.density=new Array(M);for(var A=0,k=y[0];k<y[1]+p/2;A++,k+=p){var C=S(k);m.density[A]={v:C,t:k},d=Math.max(d,C)}}c=Math.max(c,f.length),l=Math.min(l,y[0]),u=Math.max(u,y[1])}var P=b.findExtremes(s,[l,u],{padded:!0});if(i._extremes[s._id]=P,i.width)n[0].t.maxKDE=d;else{var R=r._violinScaleGroupStats,O=i.scalegroup,X=R[O];X?(X.maxKDE=Math.max(X.maxKDE,d),X.maxCount=Math.max(X.maxCount,c)):R[O]={maxKDE:d,maxCount:c}}return n[0].t.labels.kde=T._(t,"kde:"),n}},86403:function(F,L,e){var T=e(37188).setPositionOffset,b=["v","h"];F.exports=function(a,_){for(var g=a.calcdata,h=_.xaxis,o=_.yaxis,t=0;t<b.length;t++){for(var i=b[t],n=i==="h"?o:h,r=[],s=0;s<g.length;s++){var l=g[s],u=l[0].t,d=l[0].trace;d.visible!==!0||d.type!=="violin"||u.empty||d.orientation!==i||d.xaxis!==h._id||d.yaxis!==o._id||r.push(s)}T("violin",a,r,n)}}},15899:function(F,L,e){var T=e(71828),b=e(7901),a=e(36411),_=e(68875);F.exports=function(g,h,o,t){function i(v,M){return T.coerce(g,h,_,v,M)}function n(v,M){return T.coerce2(g,h,_,v,M)}if(a.handleSampleDefaults(g,h,i,t),h.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",h.name),i("scalemode"));var r,s=i("span");Array.isArray(s)&&(r="manual"),i("spanmode",r);var l=i("line.color",(g.marker||{}).color||o),u=i("line.width"),d=i("fillcolor",b.addOpacity(h.line.color,.5));a.handlePointsDefaults(g,h,i,{prefix:""});var c=n("box.width"),w=n("box.fillcolor",d),m=n("box.line.color",l),f=n("box.line.width",u);i("box.visible",!!(c||w||m||f))||(h.box={visible:!1});var x=n("meanline.color",l),y=n("meanline.width",u);i("meanline.visible",!!(x||y))||(h.meanline={visible:!1}),i("quartilemethod")}}},60168:function(F,L,e){var T=e(71828),b=function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*a*a)};L.makeKDE=function(a,_,g){var h=g.length,o=b,t=a.bandwidth,i=1/(h*t);return function(n){for(var r=0,s=0;s<h;s++)r+=o((n-g[s])/t);return i*r}},L.getPositionOnKdePath=function(a,_,g){var h,o;_.orientation==="h"?(h="y",o="x"):(h="x",o="y");var t=T.findPointOnPath(a.path,g,o,{pathLength:a.pathLength}),i=a.posCenterPx,n=t[h];return[n,_.side==="both"?2*i-n:i]},L.getKdeValue=function(a,_,g){var h=a.pts.map(L.extractVal);return L.makeKDE(a,_,h)(g)/a.posDensityScale},L.extractVal=function(a){return a.v}},57634:function(F,L,e){var T=e(7901),b=e(71828),a=e(89298),_=e(41868),g=e(60168);F.exports=function(h,o,t,i,n){n||(n={});var r,s,l=n.hoverLayer,u=h.cd,d=u[0].trace,c=d.hoveron,w=c.indexOf("violins")!==-1,m=c.indexOf("kde")!==-1,f=[];if(w||m){var x=_.hoverOnBoxes(h,o,t,i);if(m&&x.length>0){var y,v,M,p,S,A=h.xa,k=h.ya;d.orientation==="h"?(S=o,y="y",M=k,v="x",p=A):(S=t,y="x",M=A,v="y",p=k);var C=u[h.index];if(S>=C.span[0]&&S<=C.span[1]){var P=b.extendFlat({},h),R=p.c2p(S,!0),O=g.getKdeValue(C,d,S),X=g.getPositionOnKdePath(C,d,R),D=M._offset,V=M._length;P[y+"0"]=X[0],P[y+"1"]=X[1],P[v+"0"]=P[v+"1"]=R,P[v+"Label"]=v+": "+a.hoverLabelText(p,S,d[v+"hoverformat"])+", "+u[0].t.labels.kde+" "+O.toFixed(3);for(var j=0,B=0;B<x.length;B++)if(x[B].attr==="med"){j=B;break}P.spikeDistance=x[j].spikeDistance;var W=y+"Spike";P[W]=x[j][W],x[j].spikeDistance=void 0,x[j][W]=void 0,P.hovertemplate=!1,f.push(P),(s={})[y+"1"]=b.constrain(D+X[0],D,D+V),s[y+"2"]=b.constrain(D+X[1],D,D+V),s[v+"1"]=s[v+"2"]=p._offset+R}}w&&(f=f.concat(x))}c.indexOf("points")!==-1&&(r=_.hoverOnPoints(h,o,t));var q=l.selectAll(".violinline-"+d.uid).data(s?[0]:[]);return q.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(s).call(T.stroke,h.color),i==="closest"?r?[r]:f:(r&&f.push(r),f)}},47462:function(F,L,e){F.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(F,L,e){var T=e(40094),b=e(71828).extendFlat;F.exports={violinmode:b({},T.boxmode,{}),violingap:b({},T.boxgap,{}),violingroupgap:b({},T.boxgroupgap,{})}},33598:function(F,L,e){var T=e(71828),b=e(9228),a=e(4199);F.exports=function(_,g,h){a._supply(_,g,h,function(o,t){return T.coerce(_,g,b,o,t)},"violin")}},28443:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(86047),g=e(34621),h=e(60168);F.exports=function(o,t,i,n){var r=o._context.staticPlot,s=o._fullLayout,l=t.xaxis,u=t.yaxis;function d(c,w){var m=g(c,{xaxis:l,yaxis:u,trace:w,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return a.smoothopen(m[0],1)}b.makeTraceGroups(n,i,"trace violins").each(function(c){var w=T.select(this),m=c[0],f=m.t,x=m.trace;if(x.visible!==!0||f.empty)w.remove();else{var y=f.bPos,v=f.bdPos,M=t[f.valLetter+"axis"],p=t[f.posLetter+"axis"],S=x.side==="both",A=S||x.side==="positive",k=S||x.side==="negative",C=w.selectAll("path.violin").data(b.identity);C.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(B){var W,q,re,ee,K,Y,$,ne,ae=T.select(this),se=B.density,ce=se.length,me=p.c2l(B.pos+y,!0),ye=p.l2p(me);if(x.width)W=f.maxKDE/v;else{var Te=s._violinScaleGroupStats[x.scalegroup];W=x.scalemode==="count"?Te.maxKDE/v*(Te.maxCount/B.pts.length):Te.maxKDE/v}if(A){for($=new Array(ce),K=0;K<ce;K++)(ne=$[K]={})[f.posLetter]=me+se[K].v/W,ne[f.valLetter]=M.c2l(se[K].t,!0);q=d($,x)}if(k){for($=new Array(ce),Y=0,K=ce-1;Y<ce;Y++,K--)(ne=$[Y]={})[f.posLetter]=me-se[K].v/W,ne[f.valLetter]=M.c2l(se[K].t,!0);re=d($,x)}if(S)ee=q+"L"+re.substr(1)+"Z";else{var Ce=[ye,M.c2p(se[0].t)],pe=[ye,M.c2p(se[ce-1].t)];x.orientation==="h"&&(Ce.reverse(),pe.reverse()),ee=A?"M"+Ce+"L"+q.substr(1)+"L"+pe:"M"+pe+"L"+re.substr(1)+"L"+Ce}ae.attr("d",ee),B.posCenterPx=ye,B.posDensityScale=W*v,B.path=ae.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var P,R,O,X=x.box,D=X.width,V=(X.line||{}).width;S?(P=v*D,R=0):A?(P=[0,v*D/2],R=V*{x:1,y:-1}[f.posLetter]):(P=[v*D/2,0],R=V*{x:-1,y:1}[f.posLetter]),_.plotBoxAndWhiskers(w,{pos:p,val:M},x,{bPos:y,bdPos:P,bPosPxOffset:R}),_.plotBoxMean(w,{pos:p,val:M},x,{bPos:y,bdPos:P,bPosPxOffset:R}),!x.box.visible&&x.meanline.visible&&(O=b.identity);var j=w.selectAll("path.meanline").data(O||[]);j.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),j.exit().remove(),j.each(function(B){var W=M.c2p(B.mean,!0),q=h.getPositionOnKdePath(B,x,W);T.select(this).attr("d",x.orientation==="h"?"M"+W+","+q[0]+"V"+q[1]:"M"+q[0]+","+W+"H"+q[1])}),_.plotPoints(w,{x:l,y:u},x,f)}})}},31847:function(F,L,e){var T=e(39898),b=e(7901),a=e(16296).stylePoints;F.exports=function(_){var g=T.select(_).selectAll("g.trace.violins");g.style("opacity",function(h){return h[0].trace.opacity}),g.each(function(h){var o=h[0].trace,t=T.select(this),i=o.box||{},n=i.line||{},r=o.meanline||{},s=r.width;t.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(b.stroke,o.line.color).call(b.fill,o.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(b.stroke,n.color).call(b.fill,i.fillcolor);var l={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};t.selectAll("path.mean").style(l).call(b.stroke,r.color),t.selectAll("path.meanline").style(l).call(b.stroke,r.color),a(t,o,_)})}},16336:function(F,L,e){var T=e(50693),b=e(16249),a=e(54532),_=e(9012),g=e(1426).extendFlat,h=e(30962).overrideAll,o=F.exports=h(g({x:b.x,y:b.y,z:b.z,value:b.value,isomin:b.isomin,isomax:b.isomax,surface:b.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:b.slices,caps:b.caps,text:b.text,hovertext:b.hovertext,xhoverformat:b.xhoverformat,yhoverformat:b.yhoverformat,zhoverformat:b.zhoverformat,valuehoverformat:b.valuehoverformat,hovertemplate:b.hovertemplate},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:b.colorbar,opacity:b.opacity,opacityscale:a.opacityscale,lightposition:b.lightposition,lighting:b.lighting,flatshading:b.flatshading,contour:b.contour,hoverinfo:g({},_.hoverinfo),showlegend:g({},_.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},64809:function(F,L,e){var T=e(9330).gl_mesh3d,b=e(81697).parseColorScale,a=e(78614),_=e(21081).extractOpts,g=e(90060),h=e(22674).findNearestOnAxis,o=e(22674).generateIsoMeshes;function t(n,r,s){this.scene=n,this.uid=s,this.mesh=r,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(n){if(n.object===this.mesh){var r=n.data.index,s=this.data._meshX[r],l=this.data._meshY[r],u=this.data._meshZ[r],d=this.data._Ys.length,c=this.data._Zs.length,w=h(s,this.data._Xs).id,m=h(l,this.data._Ys).id,f=h(u,this.data._Zs).id,x=n.index=f+c*m+c*d*w;n.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var y=this.data.hovertext||this.data.text;return Array.isArray(y)&&y[x]!==void 0?n.textLabel=y[x]:y&&(n.textLabel=y),!0}},i.update=function(n){var r=this.scene,s=r.fullSceneLayout;function l(c,w,m,f){return w.map(function(x){return c.d2l(x,0,f)*m})}this.data=o(n);var u={positions:g(l(s.xaxis,n._meshX,r.dataScale[0],n.xcalendar),l(s.yaxis,n._meshY,r.dataScale[1],n.ycalendar),l(s.zaxis,n._meshZ,r.dataScale[2],n.zcalendar)),cells:g(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:a(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},d=_(n);u.vertexIntensity=n._meshIntensity,u.vertexIntensityBounds=[d.min,d.max],u.colormap=b(n),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(n,r){var s=n.glplot.gl,l=T({gl:s}),u=new t(n,l,r.uid);return l._trace=u,u.update(r),n.glplot.add(l),u}},47651:function(F,L,e){var T=e(71828),b=e(16336),a=e(82738).supplyIsoDefaults,_=e(91831).opacityscaleDefaults;F.exports=function(g,h,o,t){function i(n,r){return T.coerce(g,h,b,n,r)}a(g,h,o,t,i),_(g,h,t,i)}},17659:function(F,L,e){F.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(F,L,e){var T=e(1486),b=e(82196).line,a=e(9012),_=e(12663).axisHoverFormat,g=e(5386).fF,h=e(5386).si,o=e(48334),t=e(1426).extendFlat,i=e(7901);function n(r){return{marker:{color:t({},T.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},T.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},T.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}F.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:T.hovertext,hovertemplate:g({},{keys:o.eventDataKeys}),hoverinfo:t({},a.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:o.eventDataKeys.concat(["label"])}),text:T.text,textposition:T.textposition,insidetextanchor:T.insidetextanchor,textangle:T.textangle,textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:T.orientation,offset:T.offset,width:T.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},b.color,{dflt:i.defaultLine}),width:t({},b.width,{editType:"plot"}),dash:b.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup}},52752:function(F,L,e){var T=e(89298),b=e(42973),a=e(71828).mergeArray,_=e(66279),g=e(50606).BADNUM;function h(t){return t==="a"||t==="absolute"}function o(t){return t==="t"||t==="total"}F.exports=function(t,i){var n,r,s,l,u,d,c=T.getFromId(t,i.xaxis||"x"),w=T.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=c.makeCalcdata(i,"x"),s=w.makeCalcdata(i,"y"),l=b(i,w,"y",s),u=!!i.yperiodalignment,d="y"):(n=w.makeCalcdata(i,"y"),s=c.makeCalcdata(i,"x"),l=b(i,c,"x",s),u=!!i.xperiodalignment,d="x"),r=l.vals;for(var m,f=Math.min(r.length,n.length),x=new Array(f),y=0,v=!1,M=0;M<f;M++){var p=n[M]||0,S=!1;(n[M]!==g||o(i.measure[M])||h(i.measure[M]))&&M+1<f&&(n[M+1]!==g||o(i.measure[M+1])||h(i.measure[M+1]))&&(S=!0);var A=x[M]={i:M,p:r[M],s:p,rawS:p,cNext:S};h(i.measure[M])?(y=A.s,A.isSum=!0,A.dir="totals",A.s=y):o(i.measure[M])?(A.isSum=!0,A.dir="totals",A.s=y):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",m=A.s,A.s=y+m,y+=m),A.dir==="totals"&&(v=!0),u&&(x[M].orig_p=s[M],x[M][d+"End"]=l.ends[M],x[M][d+"Start"]=l.starts[M]),i.ids&&(A.id=String(i.ids[M])),A.v=(i.base||0)+y}return x.length&&(x[0].hasTotals=v),a(i.text,x,"tx"),a(i.hovertext,x,"htx"),_(x,i),x}},48334:function(F){F.exports={eventDataKeys:["initial","delta","final"]}},70766:function(F,L,e){var T=e(11661).setGroupPositions;F.exports=function(b,a){var _,g,h=b._fullLayout,o=b._fullData,t=b.calcdata,i=a.xaxis,n=a.yaxis,r=[],s=[],l=[];for(g=0;g<o.length;g++){var u=o[g];u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="waterfall"&&(_=t[g],u.orientation==="h"?l.push(_):s.push(_),r.push(_))}var d={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};for(T(b,i,n,s,d),T(b,n,i,l,d),g=0;g<r.length;g++){_=r[g];for(var c=0;c<_.length;c++){var w=_[c];w.isSum===!1&&(w.s0+=c===0?0:_[c-1].s),c+1<_.length&&(_[c].nextP0=_[c+1].p0,_[c].nextS0=_[c+1].s0)}}}},83266:function(F,L,e){var T=e(71828),b=e(26125),a=e(90769).handleText,_=e(67513),g=e(73927),h=e(43037),o=e(7901),t=e(22372),i=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(s,l,u){s(l+".marker.color",u),s(l+".marker.line.color",o.defaultLine),s(l+".marker.line.width")}F.exports={supplyDefaults:function(s,l,u,d){function c(m,f){return T.coerce(s,l,h,m,f)}if(_(s,l,d,c)){g(s,l,d,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",l.x&&!l.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var w=c("textposition");a(s,l,d,c,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(c("texttemplate"),l.texttemplate||c("textinfo")),r(c,"increasing",i),r(c,"decreasing",n),r(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(s,l){var u,d;function c(m){return T.coerce(d._input,d,h,m)}if(l.waterfallmode==="group")for(var w=0;w<s.length;w++)u=(d=s[w])._input,b(u,d,l,c)}}},58593:function(F){F.exports=function(L,e){return L.x="xVal"in e?e.xVal:e.x,L.y="yVal"in e?e.yVal:e.y,"initial"in e&&(L.initial=e.initial),"delta"in e&&(L.delta=e.delta),"final"in e&&(L.final=e.final),e.xa&&(L.xaxis=e.xa),e.ya&&(L.yaxis=e.ya),L}},61326:function(F,L,e){var T=e(89298).hoverLabelText,b=e(7901).opacity,a=e(95423).hoverOnBars,_=e(22372),g=_.INCREASING.SYMBOL,h=_.DECREASING.SYMBOL;F.exports=function(o,t,i,n,r){var s=a(o,t,i,n,r);if(s){var l=s.cd,u=l[0].trace,d=u.orientation==="h",c=d?"x":"y",w=d?o.xa:o.ya,m=l[s.index],f=m.isSum?m.b+m.s:m.rawS;s.initial=m.b+m.s-f,s.delta=f,s.final=s.initial+s.delta;var x=A(Math.abs(s.delta));s.deltaLabel=f<0?"("+x+")":x,s.finalLabel=A(s.final),s.initialLabel=A(s.initial);var y=m.hi||u.hoverinfo,v=[];if(y&&y!=="none"&&y!=="skip"){var M=y==="all",p=y.split("+"),S=function(k){return M||p.indexOf(k)!==-1};m.isSum||(!S("final")||S(d?"x":"y")||v.push(s.finalLabel),S("delta")&&(f<0?v.push(s.deltaLabel+" "+h):v.push(s.deltaLabel+" "+g)),S("initial")&&v.push("Initial: "+s.initialLabel))}return v.length&&(s.extraText=v.join("<br>")),s.color=function(k,C){var P=k[C.dir].marker,R=P.color,O=P.line.color,X=P.line.width;return b(R)?R:b(O)&&X?O:void 0}(u,m),[s]}function A(k){return T(w,k,u[c+"hoverformat"])}}},19990:function(F,L,e){F.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(F){F.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(F,L,e){var T=e(71828),b=e(13494);F.exports=function(a,_,g){var h=!1;function o(n,r){return T.coerce(a,_,b,n,r)}for(var t=0;t<g.length;t++){var i=g[t];if(i.visible&&i.type==="waterfall"){h=!0;break}}h&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},30436:function(F,L,e){var T=e(39898),b=e(71828),a=e(91424),_=e(50606).BADNUM,g=e(17295),h=e(72597).clearMinTextSize;F.exports=function(o,t,i,n){var r=o._fullLayout;h("waterfall",r),g.plot(o,t,i,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(s,l,u,d){var c=l.xaxis,w=l.yaxis;b.makeTraceGroups(d,u,"trace bars").each(function(m){var f=T.select(this),x=m[0].trace,y=b.ensureSingle(f,"g","lines");if(x.connector&&x.connector.visible){var v=x.orientation==="h",M=x.connector.mode,p=y.selectAll("g.line").data(b.identity);p.enter().append("g").classed("line",!0),p.exit().remove();var S=p.size();p.each(function(A,k){if(k===S-1||A.cNext){var C=function(X,D,V,j){var B=[],W=[],q=j?D:V,re=j?V:D;return B[0]=q.c2p(X.s0,!0),W[0]=re.c2p(X.p0,!0),B[1]=q.c2p(X.s1,!0),W[1]=re.c2p(X.p1,!0),B[2]=q.c2p(X.nextS0,!0),W[2]=re.c2p(X.nextP0,!0),j?[B,W]:[W,B]}(A,c,w,v),P=C[0],R=C[1],O="";P[0]!==_&&R[0]!==_&&P[1]!==_&&R[1]!==_&&(M==="spanning"&&!A.isSum&&k>0&&(O+=v?"M"+P[0]+","+R[1]+"V"+R[0]:"M"+P[1]+","+R[0]+"H"+P[0]),M!=="between"&&(A.isSum||k<S-1)&&(O+=v?"M"+P[1]+","+R[0]+"V"+R[1]:"M"+P[0]+","+R[1]+"H"+P[1]),P[2]!==_&&R[2]!==_&&(O+=v?"M"+P[1]+","+R[1]+"V"+R[2]:"M"+P[1]+","+R[1]+"H"+P[2])),O===""&&(O="M0,0Z"),b.ensureSingle(T.select(this),"path").attr("d",O).call(a.setClipUrl,l.layerClipId,s)}})}else y.remove()})}(o,t,i,n)}},55750:function(F,L,e){var T=e(39898),b=e(91424),a=e(7901),_=e(37822).DESELECTDIM,g=e(16688),h=e(72597).resizeText,o=g.styleTextPoints;F.exports={style:function(t,i,n){var r=n||T.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");h(t,r,"waterfall"),r.style("opacity",function(s){return s[0].trace.opacity}),r.each(function(s){var l=T.select(this),u=s[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=u[d.dir].marker;T.select(this).call(a.fill,c.color).call(a.stroke,c.line.color).call(b.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!d.selected?_:1)}}),o(l,u,t),l.selectAll(".lines").each(function(){var d=u.connector.line;b.lineGroupStyle(T.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},82887:function(F,L,e){var T=e(89298),b=e(71828),a=e(86281),_=e(79344).p,g=e(50606).BADNUM;L.moduleType="transform",L.name="aggregate";var h=L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=h.aggregations;function t(s,l,u,d){if(d.enabled){for(var c=d.target,w=b.nestedProperty(l,c),m=w.get(),f=function(v,M){var p=v.func,S=M.d2c,A=M.c2d;switch(p){case"count":return i;case"first":return n;case"last":return r;case"sum":return function(k,C){for(var P=0,R=0;R<C.length;R++){var O=S(k[C[R]]);O!==g&&(P+=O)}return A(P)};case"avg":return function(k,C){for(var P=0,R=0,O=0;O<C.length;O++){var X=S(k[C[O]]);X!==g&&(P+=X,R++)}return R?A(P/R):g};case"min":return function(k,C){for(var P=1/0,R=0;R<C.length;R++){var O=S(k[C[R]]);O!==g&&(P=Math.min(P,O))}return P===1/0?g:A(P)};case"max":return function(k,C){for(var P=-1/0,R=0;R<C.length;R++){var O=S(k[C[R]]);O!==g&&(P=Math.max(P,O))}return P===-1/0?g:A(P)};case"range":return function(k,C){for(var P=1/0,R=-1/0,O=0;O<C.length;O++){var X=S(k[C[O]]);X!==g&&(P=Math.min(P,X),R=Math.max(R,X))}return R===-1/0||P===1/0?g:A(R-P)};case"change":return function(k,C){var P=S(k[C[0]]),R=S(k[C[C.length-1]]);return P===g||R===g?g:A(R-P)};case"median":return function(k,C){for(var P=[],R=0;R<C.length;R++){var O=S(k[C[R]]);O!==g&&P.push(O)}if(!P.length)return g;P.sort(b.sorterAsc);var X=(P.length-1)/2;return A((P[Math.floor(X)]+P[Math.ceil(X)])/2)};case"mode":return function(k,C){for(var P={},R=0,O=g,X=0;X<C.length;X++){var D=S(k[C[X]]);if(D!==g){var V=P[D]=(P[D]||0)+1;V>R&&(R=V,O=D)}}return R?A(O):g};case"rms":return function(k,C){for(var P=0,R=0,O=0;O<C.length;O++){var X=S(k[C[O]]);X!==g&&(P+=X*X,R++)}return R?A(Math.sqrt(P/R)):g};case"stddev":return function(k,C){var P,R=0,O=0,X=1,D=g;for(P=0;P<C.length&&D===g;P++)D=S(k[C[P]]);if(D===g)return g;for(;P<C.length;P++){var V=S(k[C[P]]);if(V!==g){var j=V-D;R+=j,O+=j*j,X++}}var B=v.funcmode==="sample"?X-1:X;return B?Math.sqrt((O-R*R/X)/B):0}}}(d,T.getDataConversions(s,l,c,m)),x=new Array(u.length),y=0;y<u.length;y++)x[y]=f(m,u[y]);w.set(x),d.func==="count"&&b.pushUnique(l._arrayAttrs,c)}}function i(s,l){return l.length}function n(s,l){return s[l[0]]}function r(s,l){return s[l[l.length-1]]}L.supplyDefaults=function(s,l){var u,d={};function c(A,k){return b.coerce(s,d,h,A,k)}if(!c("enabled"))return d;var w=a.findArrayAttributes(l),m={};for(u=0;u<w.length;u++)m[w[u]]=1;var f=c("groups");if(!Array.isArray(f)){if(!m[f])return d.enabled=!1,d;m[f]=0}var x,y=s.aggregations||[],v=d.aggregations=new Array(y.length);function M(A,k){return b.coerce(y[u],x,o,A,k)}for(u=0;u<y.length;u++){x={_index:u};var p=M("target"),S=M("func");M("enabled")&&p&&(m[p]||S==="count"&&m[p]===void 0)?(S==="stddev"&&M("funcmode"),m[p]=0,v[u]=x):v[u]={enabled:!1,_index:u}}for(u=0;u<w.length;u++)m[w[u]]&&v.push({target:w[u],func:o.func.dflt,enabled:!0,_index:-1});return d},L.calcTransform=function(s,l,u){if(u.enabled){var d=u.groups,c=b.getTargetArray(l,{target:d});if(c){var w,m,f,x,y={},v={},M=[],p=_(l.transforms,u),S=c.length;for(l._length&&(S=Math.min(S,l._length)),w=0;w<S;w++)(f=y[m=c[w]])===void 0?(y[m]=M.length,x=[w],M.push(x),v[y[m]]=p(w)):(M[f].push(w),v[y[m]]=(v[y[m]]||[]).concat(p(w)));u._indexToPoints=v;var A=u.aggregations;for(w=0;w<A.length;w++)t(s,l,M,A[w]);typeof d=="string"&&t(s,l,M,{target:d,func:"first",enabled:!0}),l._length=M.length}}}},14382:function(F,L,e){var T=e(71828),b=e(73972),a=e(89298),_=e(79344).p,g=e(74808),h=g.COMPARISON_OPS,o=g.INTERVAL_OPS,t=g.SET_OPS;L.moduleType="transform",L.name="filter",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(o).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},L.supplyDefaults=function(i){var n={};function r(u,d){return T.coerce(i,n,L.attributes,u,d)}if(r("enabled")){var s=r("target");if(T.isArrayOrTypedArray(s)&&s.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var l=b.getComponentMethod("calendars","handleDefaults");l(i,n,"valuecalendar",null),l(i,n,"targetcalendar",null)}return n},L.calcTransform=function(i,n,r){if(r.enabled){var s=T.getTargetArray(n,r);if(s){var l=r.target,u=s.length;n._length&&(u=Math.min(u,n._length));var d=r.targetcalendar,c=n._arrayAttrs,w=r.preservegaps;if(typeof l=="string"){var m=T.nestedProperty(n,l+"calendar").get();m&&(d=m)}var f,x,y=function(C,P,R){var O=C.operation,X=C.value,D=Array.isArray(X);function V(q){return q.indexOf(O)!==-1}var j,B=function(q){return P(q,0,C.valuecalendar)},W=function(q){return P(q,0,R)};switch(V(h)?j=B(D?X[0]:X):V(o)?j=D?[B(X[0]),B(X[1])]:[B(X),B(X)]:V(t)&&(j=D?X.map(B):[B(X)]),O){case"=":return function(q){return W(q)===j};case"!=":return function(q){return W(q)!==j};case"<":return function(q){return W(q)<j};case"<=":return function(q){return W(q)<=j};case">":return function(q){return W(q)>j};case">=":return function(q){return W(q)>=j};case"[]":return function(q){var re=W(q);return re>=j[0]&&re<=j[1]};case"()":return function(q){var re=W(q);return re>j[0]&&re<j[1]};case"[)":return function(q){var re=W(q);return re>=j[0]&&re<j[1]};case"(]":return function(q){var re=W(q);return re>j[0]&&re<=j[1]};case"][":return function(q){var re=W(q);return re<=j[0]||re>=j[1]};case")(":return function(q){var re=W(q);return re<j[0]||re>j[1]};case"](":return function(q){var re=W(q);return re<=j[0]||re>j[1]};case")[":return function(q){var re=W(q);return re<j[0]||re>=j[1]};case"{}":return function(q){return j.indexOf(W(q))!==-1};case"}{":return function(q){return j.indexOf(W(q))===-1}}}(r,a.getDataToCoordFunc(i,n,l,s),d),v={},M={},p=0;w?(f=function(C){v[C.astr]=T.extendDeep([],C.get()),C.set(new Array(u))},x=function(C,P){var R=v[C.astr][P];C.get()[P]=R}):(f=function(C){v[C.astr]=T.extendDeep([],C.get()),C.set([])},x=function(C,P){var R=v[C.astr][P];C.get().push(R)}),k(f);for(var S=_(n.transforms,r),A=0;A<u;A++)y(s[A])?(k(x,A),M[p++]=S(A)):w&&p++;r._indexToPoints=M,n._length=p}}function k(C,P){for(var R=0;R<c.length;R++)C(T.nestedProperty(n,c[R]),P)}}},43102:function(F,L,e){var T=e(71828),b=e(86281),a=e(74875),_=e(79344).p;function g(h,o){var t,i,n,r,s,l,u,d,c,w,m=o.transform,f=o.transformIndex,x=h.transforms[f].groups,y=_(h.transforms,m);if(!T.isArrayOrTypedArray(x)||x.length===0)return[h];var v=T.filterUnique(x),M=new Array(v.length),p=x.length,S=b.findArrayAttributes(h),A=m.styles||[],k={};for(t=0;t<A.length;t++)k[A[t].target]=A[t].value;m.styles&&(w=T.keyedContainer(m,"styles","target","value.name"));var C={},P={};for(t=0;t<v.length;t++){C[l=v[t]]=t,P[l]=0,(u=M[t]=T.extendDeepNoArrays({},h))._group=l,u.transforms[f]._indexToPoints={};var R=null;for(w&&(R=w.get(l)),u.name=R||R===""?R:T.templateString(m.nameformat,{trace:h.name,group:l}),d=u.transforms,u.transforms=[],i=0;i<d.length;i++)u.transforms[i]=T.extendDeepNoArrays({},d[i]);for(i=0;i<S.length;i++)T.nestedProperty(u,S[i]).set([])}for(n=0;n<S.length;n++){for(r=S[n],i=0,c=[];i<v.length;i++)c[i]=T.nestedProperty(M[i],r).get();for(s=T.nestedProperty(h,r).get(),i=0;i<p;i++)c[C[x[i]]].push(s[i])}for(i=0;i<p;i++)(u=M[C[x[i]]]).transforms[f]._indexToPoints[P[x[i]]]=y(i),P[x[i]]++;for(t=0;t<v.length;t++)l=v[t],u=M[t],a.clearExpandedTraceDefaultColors(u),u=T.extendDeepNoArrays(u,k[l]||{});return M}L.moduleType="transform",L.name="groupby",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},L.supplyDefaults=function(h,o,t){var i,n={};function r(c,w){return T.coerce(h,n,L.attributes,c,w)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=h.styles,l=n.styles=[];if(s)for(i=0;i<s.length;i++){var u=l[i]={};T.coerce(s[i],l[i],L.attributes.styles,"target");var d=T.coerce(s[i],l[i],L.attributes.styles,"value");T.isPlainObject(d)?u.value=T.extendDeep({},d):d&&delete u.value}return n},L.transform=function(h,o){var t,i,n,r=[];for(i=0;i<h.length;i++)for(t=g(h[i],o),n=0;n<t.length;n++)r.push(t[n]);return r}},79344:function(F,L){L.p=function(e,T){for(var b,a,_=0;_<e.length&&(b=e[_])!==T;_++)b._indexToPoints&&b.enabled!==!1&&(a=b._indexToPoints);var g=a?function(h){return a[h]}:function(h){return[h]};return g}},32275:function(F,L,e){var T=e(71828),b=e(89298),a=e(79344).p,_=e(50606).BADNUM;L.moduleType="transform",L.name="sort",L.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},L.supplyDefaults=function(g){var h={};function o(t,i){return T.coerce(g,h,L.attributes,t,i)}return o("enabled")&&(o("target"),o("order")),h},L.calcTransform=function(g,h,o){if(o.enabled){var t=T.getTargetArray(h,o);if(t){var i=o.target,n=t.length;h._length&&(n=Math.min(n,h._length));var r,s,l=h._arrayAttrs,u=function(x,y,v,M){var p,S=new Array(M),A=new Array(M);for(p=0;p<M;p++)S[p]={v:y[p],i:p};for(S.sort(function(k,C){switch(k.order){case"ascending":return function(P,R){var O=C(P.v),X=C(R.v);return O===_?1:X===_?-1:O-X};case"descending":return function(P,R){var O=C(P.v),X=C(R.v);return O===_?1:X===_?-1:X-O}}}(x,v)),p=0;p<M;p++)A[p]=S[p].i;return A}(o,t,b.getDataToCoordFunc(g,h,i,t),n),d=a(h.transforms,o),c={};for(r=0;r<l.length;r++){var w=T.nestedProperty(h,l[r]),m=w.get(),f=new Array(n);for(s=0;s<n;s++)f[s]=m[u[s]];w.set(f)}for(s=0;s<n;s++)c[s]=d(u[s]);o._indexToPoints=c,h._length=n}}}},11506:function(F,L){L.version="2.25.1"},9330:function(F,L,e){var T,b=e(90386);T=function(){return function(){var a={7386:function(h,o,t){h.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(h,o,t){function i(de,Le){for(var Ee=0;Ee<Le.length;Ee++){var Re=Le[Ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(de,Re.key,Re)}}function n(de,Le){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Re){return Ee.__proto__=Re,Ee},n(de,Le)}function r(de){if(de===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de}function s(de){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Le){return Le.__proto__||Object.getPrototypeOf(Le)},s(de)}function l(de){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Le){return typeof Le}:function(Le){return Le&&typeof Symbol=="function"&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le},l(de)}var u=t(3910),d=t(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.lW=f,o.h2=50;var w=2147483647;function m(de){if(de>w)throw new RangeError('The value "'+de+'" is invalid for option "size"');var Le=new Uint8Array(de);return Object.setPrototypeOf(Le,f.prototype),Le}function f(de,Le,Ee){if(typeof de=="number"){if(typeof Le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(de)}return x(de,Le,Ee)}function x(de,Le,Ee){if(typeof de=="string")return function(Fe,Xe){if(typeof Xe=="string"&&Xe!==""||(Xe="utf8"),!f.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);var Ze=0|A(Fe,Xe),at=m(Ze),lt=at.write(Fe,Xe);return lt!==Ze&&(at=at.slice(0,lt)),at}(de,Le);if(ArrayBuffer.isView(de))return function(Fe){if(ge(Fe,Uint8Array)){var Xe=new Uint8Array(Fe);return p(Xe.buffer,Xe.byteOffset,Xe.byteLength)}return M(Fe)}(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(de));if(ge(de,ArrayBuffer)||de&&ge(de.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(de,SharedArrayBuffer)||de&&ge(de.buffer,SharedArrayBuffer)))return p(de,Le,Ee);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Re=de.valueOf&&de.valueOf();if(Re!=null&&Re!==de)return f.from(Re,Le,Ee);var je=function(Fe){if(f.isBuffer(Fe)){var Xe=0|S(Fe.length),Ze=m(Xe);return Ze.length===0||Fe.copy(Ze,0,0,Xe),Ze}return Fe.length!==void 0?typeof Fe.length!="number"||Ae(Fe.length)?m(0):M(Fe):Fe.type==="Buffer"&&Array.isArray(Fe.data)?M(Fe.data):void 0}(de);if(je)return je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return f.from(de[Symbol.toPrimitive]("string"),Le,Ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(de))}function y(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function v(de){return y(de),m(de<0?0:0|S(de))}function M(de){for(var Le=de.length<0?0:0|S(de.length),Ee=m(Le),Re=0;Re<Le;Re+=1)Ee[Re]=255&de[Re];return Ee}function p(de,Le,Ee){if(Le<0||de.byteLength<Le)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<Le+(Ee||0))throw new RangeError('"length" is outside of buffer bounds');var Re;return Re=Le===void 0&&Ee===void 0?new Uint8Array(de):Ee===void 0?new Uint8Array(de,Le):new Uint8Array(de,Le,Ee),Object.setPrototypeOf(Re,f.prototype),Re}function S(de){if(de>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|de}function A(de,Le){if(f.isBuffer(de))return de.length;if(ArrayBuffer.isView(de)||ge(de,ArrayBuffer))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(de));var Ee=de.length,Re=arguments.length>2&&arguments[2]===!0;if(!Re&&Ee===0)return 0;for(var je=!1;;)switch(Le){case"ascii":case"latin1":case"binary":return Ee;case"utf8":case"utf-8":return ue(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ee;case"hex":return Ee>>>1;case"base64":return le(de).length;default:if(je)return Re?-1:ue(de).length;Le=(""+Le).toLowerCase(),je=!0}}function k(de,Le,Ee){var Re=!1;if((Le===void 0||Le<0)&&(Le=0),Le>this.length||((Ee===void 0||Ee>this.length)&&(Ee=this.length),Ee<=0)||(Ee>>>=0)<=(Le>>>=0))return"";for(de||(de="utf8");;)switch(de){case"hex":return K(this,Le,Ee);case"utf8":case"utf-8":return W(this,Le,Ee);case"ascii":return re(this,Le,Ee);case"latin1":case"binary":return ee(this,Le,Ee);case"base64":return B(this,Le,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,Le,Ee);default:if(Re)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),Re=!0}}function C(de,Le,Ee){var Re=de[Le];de[Le]=de[Ee],de[Ee]=Re}function P(de,Le,Ee,Re,je){if(de.length===0)return-1;if(typeof Ee=="string"?(Re=Ee,Ee=0):Ee>2147483647?Ee=2147483647:Ee<-2147483648&&(Ee=-2147483648),Ae(Ee=+Ee)&&(Ee=je?0:de.length-1),Ee<0&&(Ee=de.length+Ee),Ee>=de.length){if(je)return-1;Ee=de.length-1}else if(Ee<0){if(!je)return-1;Ee=0}if(typeof Le=="string"&&(Le=f.from(Le,Re)),f.isBuffer(Le))return Le.length===0?-1:R(de,Le,Ee,Re,je);if(typeof Le=="number")return Le&=255,typeof Uint8Array.prototype.indexOf=="function"?je?Uint8Array.prototype.indexOf.call(de,Le,Ee):Uint8Array.prototype.lastIndexOf.call(de,Le,Ee):R(de,[Le],Ee,Re,je);throw new TypeError("val must be string, number or Buffer")}function R(de,Le,Ee,Re,je){var Fe,Xe=1,Ze=de.length,at=Le.length;if(Re!==void 0&&((Re=String(Re).toLowerCase())==="ucs2"||Re==="ucs-2"||Re==="utf16le"||Re==="utf-16le")){if(de.length<2||Le.length<2)return-1;Xe=2,Ze/=2,at/=2,Ee/=2}function lt(ht,ct){return Xe===1?ht[ct]:ht.readUInt16BE(ct*Xe)}if(je){var ot=-1;for(Fe=Ee;Fe<Ze;Fe++)if(lt(de,Fe)===lt(Le,ot===-1?0:Fe-ot)){if(ot===-1&&(ot=Fe),Fe-ot+1===at)return ot*Xe}else ot!==-1&&(Fe-=Fe-ot),ot=-1}else for(Ee+at>Ze&&(Ee=Ze-at),Fe=Ee;Fe>=0;Fe--){for(var bt=!0,wt=0;wt<at;wt++)if(lt(de,Fe+wt)!==lt(Le,wt)){bt=!1;break}if(bt)return Fe}return-1}function O(de,Le,Ee,Re){Ee=Number(Ee)||0;var je=de.length-Ee;Re?(Re=Number(Re))>je&&(Re=je):Re=je;var Fe,Xe=Le.length;for(Re>Xe/2&&(Re=Xe/2),Fe=0;Fe<Re;++Fe){var Ze=parseInt(Le.substr(2*Fe,2),16);if(Ae(Ze))return Fe;de[Ee+Fe]=Ze}return Fe}function X(de,Le,Ee,Re){return ie(ue(Le,de.length-Ee),de,Ee,Re)}function D(de,Le,Ee,Re){return ie(function(je){for(var Fe=[],Xe=0;Xe<je.length;++Xe)Fe.push(255&je.charCodeAt(Xe));return Fe}(Le),de,Ee,Re)}function V(de,Le,Ee,Re){return ie(le(Le),de,Ee,Re)}function j(de,Le,Ee,Re){return ie(function(je,Fe){for(var Xe,Ze,at,lt=[],ot=0;ot<je.length&&!((Fe-=2)<0);++ot)Ze=(Xe=je.charCodeAt(ot))>>8,at=Xe%256,lt.push(at),lt.push(Ze);return lt}(Le,de.length-Ee),de,Ee,Re)}function B(de,Le,Ee){return Le===0&&Ee===de.length?u.fromByteArray(de):u.fromByteArray(de.slice(Le,Ee))}function W(de,Le,Ee){Ee=Math.min(de.length,Ee);for(var Re=[],je=Le;je<Ee;){var Fe=de[je],Xe=null,Ze=Fe>239?4:Fe>223?3:Fe>191?2:1;if(je+Ze<=Ee){var at=void 0,lt=void 0,ot=void 0,bt=void 0;switch(Ze){case 1:Fe<128&&(Xe=Fe);break;case 2:(192&(at=de[je+1]))==128&&(bt=(31&Fe)<<6|63&at)>127&&(Xe=bt);break;case 3:at=de[je+1],lt=de[je+2],(192&at)==128&&(192&lt)==128&&(bt=(15&Fe)<<12|(63&at)<<6|63&lt)>2047&&(bt<55296||bt>57343)&&(Xe=bt);break;case 4:at=de[je+1],lt=de[je+2],ot=de[je+3],(192&at)==128&&(192&lt)==128&&(192&ot)==128&&(bt=(15&Fe)<<18|(63&at)<<12|(63&lt)<<6|63&ot)>65535&&bt<1114112&&(Xe=bt)}}Xe===null?(Xe=65533,Ze=1):Xe>65535&&(Xe-=65536,Re.push(Xe>>>10&1023|55296),Xe=56320|1023&Xe),Re.push(Xe),je+=Ze}return function(wt){var ht=wt.length;if(ht<=q)return String.fromCharCode.apply(String,wt);for(var ct="",Tt=0;Tt<ht;)ct+=String.fromCharCode.apply(String,wt.slice(Tt,Tt+=q));return ct}(Re)}f.TYPED_ARRAY_SUPPORT=function(){try{var de=new Uint8Array(1),Le={foo:function(){return 42}};return Object.setPrototypeOf(Le,Uint8Array.prototype),Object.setPrototypeOf(de,Le),de.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(de,Le,Ee){return x(de,Le,Ee)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(de,Le,Ee){return function(Re,je,Fe){return y(Re),Re<=0?m(Re):je!==void 0?typeof Fe=="string"?m(Re).fill(je,Fe):m(Re).fill(je):m(Re)}(de,Le,Ee)},f.allocUnsafe=function(de){return v(de)},f.allocUnsafeSlow=function(de){return v(de)},f.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==f.prototype},f.compare=function(de,Le){if(ge(de,Uint8Array)&&(de=f.from(de,de.offset,de.byteLength)),ge(Le,Uint8Array)&&(Le=f.from(Le,Le.offset,Le.byteLength)),!f.isBuffer(de)||!f.isBuffer(Le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===Le)return 0;for(var Ee=de.length,Re=Le.length,je=0,Fe=Math.min(Ee,Re);je<Fe;++je)if(de[je]!==Le[je]){Ee=de[je],Re=Le[je];break}return Ee<Re?-1:Re<Ee?1:0},f.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(de,Le){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return f.alloc(0);var Ee;if(Le===void 0)for(Le=0,Ee=0;Ee<de.length;++Ee)Le+=de[Ee].length;var Re=f.allocUnsafe(Le),je=0;for(Ee=0;Ee<de.length;++Ee){var Fe=de[Ee];if(ge(Fe,Uint8Array))je+Fe.length>Re.length?(f.isBuffer(Fe)||(Fe=f.from(Fe)),Fe.copy(Re,je)):Uint8Array.prototype.set.call(Re,Fe,je);else{if(!f.isBuffer(Fe))throw new TypeError('"list" argument must be an Array of Buffers');Fe.copy(Re,je)}je+=Fe.length}return Re},f.byteLength=A,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var de=this.length;if(de%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Le=0;Le<de;Le+=2)C(this,Le,Le+1);return this},f.prototype.swap32=function(){var de=this.length;if(de%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Le=0;Le<de;Le+=4)C(this,Le,Le+3),C(this,Le+1,Le+2);return this},f.prototype.swap64=function(){var de=this.length;if(de%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Le=0;Le<de;Le+=8)C(this,Le,Le+7),C(this,Le+1,Le+6),C(this,Le+2,Le+5),C(this,Le+3,Le+4);return this},f.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?W(this,0,de):k.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(de){if(!f.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de||f.compare(this,de)===0},f.prototype.inspect=function(){var de="",Le=o.h2;return de=this.toString("hex",0,Le).replace(/(.{2})/g,"$1 ").trim(),this.length>Le&&(de+=" ... "),"<Buffer "+de+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(de,Le,Ee,Re,je){if(ge(de,Uint8Array)&&(de=f.from(de,de.offset,de.byteLength)),!f.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(de));if(Le===void 0&&(Le=0),Ee===void 0&&(Ee=de?de.length:0),Re===void 0&&(Re=0),je===void 0&&(je=this.length),Le<0||Ee>de.length||Re<0||je>this.length)throw new RangeError("out of range index");if(Re>=je&&Le>=Ee)return 0;if(Re>=je)return-1;if(Le>=Ee)return 1;if(this===de)return 0;for(var Fe=(je>>>=0)-(Re>>>=0),Xe=(Ee>>>=0)-(Le>>>=0),Ze=Math.min(Fe,Xe),at=this.slice(Re,je),lt=de.slice(Le,Ee),ot=0;ot<Ze;++ot)if(at[ot]!==lt[ot]){Fe=at[ot],Xe=lt[ot];break}return Fe<Xe?-1:Xe<Fe?1:0},f.prototype.includes=function(de,Le,Ee){return this.indexOf(de,Le,Ee)!==-1},f.prototype.indexOf=function(de,Le,Ee){return P(this,de,Le,Ee,!0)},f.prototype.lastIndexOf=function(de,Le,Ee){return P(this,de,Le,Ee,!1)},f.prototype.write=function(de,Le,Ee,Re){if(Le===void 0)Re="utf8",Ee=this.length,Le=0;else if(Ee===void 0&&typeof Le=="string")Re=Le,Ee=this.length,Le=0;else{if(!isFinite(Le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Le>>>=0,isFinite(Ee)?(Ee>>>=0,Re===void 0&&(Re="utf8")):(Re=Ee,Ee=void 0)}var je=this.length-Le;if((Ee===void 0||Ee>je)&&(Ee=je),de.length>0&&(Ee<0||Le<0)||Le>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");for(var Fe=!1;;)switch(Re){case"hex":return O(this,de,Le,Ee);case"utf8":case"utf-8":return X(this,de,Le,Ee);case"ascii":case"latin1":case"binary":return D(this,de,Le,Ee);case"base64":return V(this,de,Le,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,de,Le,Ee);default:if(Fe)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Fe=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function re(de,Le,Ee){var Re="";Ee=Math.min(de.length,Ee);for(var je=Le;je<Ee;++je)Re+=String.fromCharCode(127&de[je]);return Re}function ee(de,Le,Ee){var Re="";Ee=Math.min(de.length,Ee);for(var je=Le;je<Ee;++je)Re+=String.fromCharCode(de[je]);return Re}function K(de,Le,Ee){var Re=de.length;(!Le||Le<0)&&(Le=0),(!Ee||Ee<0||Ee>Re)&&(Ee=Re);for(var je="",Fe=Le;Fe<Ee;++Fe)je+=we[de[Fe]];return je}function Y(de,Le,Ee){for(var Re=de.slice(Le,Ee),je="",Fe=0;Fe<Re.length-1;Fe+=2)je+=String.fromCharCode(Re[Fe]+256*Re[Fe+1]);return je}function $(de,Le,Ee){if(de%1!=0||de<0)throw new RangeError("offset is not uint");if(de+Le>Ee)throw new RangeError("Trying to access beyond buffer length")}function ne(de,Le,Ee,Re,je,Fe){if(!f.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(Le>je||Le<Fe)throw new RangeError('"value" argument is out of bounds');if(Ee+Re>de.length)throw new RangeError("Index out of range")}function ae(de,Le,Ee,Re,je){fe(Le,Re,je,de,Ee,7);var Fe=Number(Le&BigInt(4294967295));de[Ee++]=Fe,Fe>>=8,de[Ee++]=Fe,Fe>>=8,de[Ee++]=Fe,Fe>>=8,de[Ee++]=Fe;var Xe=Number(Le>>BigInt(32)&BigInt(4294967295));return de[Ee++]=Xe,Xe>>=8,de[Ee++]=Xe,Xe>>=8,de[Ee++]=Xe,Xe>>=8,de[Ee++]=Xe,Ee}function se(de,Le,Ee,Re,je){fe(Le,Re,je,de,Ee,7);var Fe=Number(Le&BigInt(4294967295));de[Ee+7]=Fe,Fe>>=8,de[Ee+6]=Fe,Fe>>=8,de[Ee+5]=Fe,Fe>>=8,de[Ee+4]=Fe;var Xe=Number(Le>>BigInt(32)&BigInt(4294967295));return de[Ee+3]=Xe,Xe>>=8,de[Ee+2]=Xe,Xe>>=8,de[Ee+1]=Xe,Xe>>=8,de[Ee]=Xe,Ee+8}function ce(de,Le,Ee,Re,je,Fe){if(Ee+Re>de.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("Index out of range")}function me(de,Le,Ee,Re,je){return Le=+Le,Ee>>>=0,je||ce(de,0,Ee,4),d.write(de,Le,Ee,Re,23,4),Ee+4}function ye(de,Le,Ee,Re,je){return Le=+Le,Ee>>>=0,je||ce(de,0,Ee,8),d.write(de,Le,Ee,Re,52,8),Ee+8}f.prototype.slice=function(de,Le){var Ee=this.length;(de=~~de)<0?(de+=Ee)<0&&(de=0):de>Ee&&(de=Ee),(Le=Le===void 0?Ee:~~Le)<0?(Le+=Ee)<0&&(Le=0):Le>Ee&&(Le=Ee),Le<de&&(Le=de);var Re=this.subarray(de,Le);return Object.setPrototypeOf(Re,f.prototype),Re},f.prototype.readUintLE=f.prototype.readUIntLE=function(de,Le,Ee){de>>>=0,Le>>>=0,Ee||$(de,Le,this.length);for(var Re=this[de],je=1,Fe=0;++Fe<Le&&(je*=256);)Re+=this[de+Fe]*je;return Re},f.prototype.readUintBE=f.prototype.readUIntBE=function(de,Le,Ee){de>>>=0,Le>>>=0,Ee||$(de,Le,this.length);for(var Re=this[de+--Le],je=1;Le>0&&(je*=256);)Re+=this[de+--Le]*je;return Re},f.prototype.readUint8=f.prototype.readUInt8=function(de,Le){return de>>>=0,Le||$(de,1,this.length),this[de]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(de,Le){return de>>>=0,Le||$(de,2,this.length),this[de]|this[de+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(de,Le){return de>>>=0,Le||$(de,2,this.length),this[de]<<8|this[de+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+16777216*this[de+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),16777216*this[de]+(this[de+1]<<16|this[de+2]<<8|this[de+3])},f.prototype.readBigUInt64LE=Ne(function(de){Oe(de>>>=0,"offset");var Le=this[de],Ee=this[de+7];Le!==void 0&&Ee!==void 0||Se(de,this.length-8);var Re=Le+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24),je=this[++de]+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+Ee*Math.pow(2,24);return BigInt(Re)+(BigInt(je)<<BigInt(32))}),f.prototype.readBigUInt64BE=Ne(function(de){Oe(de>>>=0,"offset");var Le=this[de],Ee=this[de+7];Le!==void 0&&Ee!==void 0||Se(de,this.length-8);var Re=Le*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de],je=this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Ee;return(BigInt(Re)<<BigInt(32))+BigInt(je)}),f.prototype.readIntLE=function(de,Le,Ee){de>>>=0,Le>>>=0,Ee||$(de,Le,this.length);for(var Re=this[de],je=1,Fe=0;++Fe<Le&&(je*=256);)Re+=this[de+Fe]*je;return Re>=(je*=128)&&(Re-=Math.pow(2,8*Le)),Re},f.prototype.readIntBE=function(de,Le,Ee){de>>>=0,Le>>>=0,Ee||$(de,Le,this.length);for(var Re=Le,je=1,Fe=this[de+--Re];Re>0&&(je*=256);)Fe+=this[de+--Re]*je;return Fe>=(je*=128)&&(Fe-=Math.pow(2,8*Le)),Fe},f.prototype.readInt8=function(de,Le){return de>>>=0,Le||$(de,1,this.length),128&this[de]?-1*(255-this[de]+1):this[de]},f.prototype.readInt16LE=function(de,Le){de>>>=0,Le||$(de,2,this.length);var Ee=this[de]|this[de+1]<<8;return 32768&Ee?4294901760|Ee:Ee},f.prototype.readInt16BE=function(de,Le){de>>>=0,Le||$(de,2,this.length);var Ee=this[de+1]|this[de]<<8;return 32768&Ee?4294901760|Ee:Ee},f.prototype.readInt32LE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},f.prototype.readInt32BE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},f.prototype.readBigInt64LE=Ne(function(de){Oe(de>>>=0,"offset");var Le=this[de],Ee=this[de+7];Le!==void 0&&Ee!==void 0||Se(de,this.length-8);var Re=this[de+4]+this[de+5]*Math.pow(2,8)+this[de+6]*Math.pow(2,16)+(Ee<<24);return(BigInt(Re)<<BigInt(32))+BigInt(Le+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24))}),f.prototype.readBigInt64BE=Ne(function(de){Oe(de>>>=0,"offset");var Le=this[de],Ee=this[de+7];Le!==void 0&&Ee!==void 0||Se(de,this.length-8);var Re=(Le<<24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de];return(BigInt(Re)<<BigInt(32))+BigInt(this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Ee)}),f.prototype.readFloatLE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),d.read(this,de,!0,23,4)},f.prototype.readFloatBE=function(de,Le){return de>>>=0,Le||$(de,4,this.length),d.read(this,de,!1,23,4)},f.prototype.readDoubleLE=function(de,Le){return de>>>=0,Le||$(de,8,this.length),d.read(this,de,!0,52,8)},f.prototype.readDoubleBE=function(de,Le){return de>>>=0,Le||$(de,8,this.length),d.read(this,de,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(de,Le,Ee,Re){de=+de,Le>>>=0,Ee>>>=0,Re||ne(this,de,Le,Ee,Math.pow(2,8*Ee)-1,0);var je=1,Fe=0;for(this[Le]=255&de;++Fe<Ee&&(je*=256);)this[Le+Fe]=de/je&255;return Le+Ee},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(de,Le,Ee,Re){de=+de,Le>>>=0,Ee>>>=0,Re||ne(this,de,Le,Ee,Math.pow(2,8*Ee)-1,0);var je=Ee-1,Fe=1;for(this[Le+je]=255&de;--je>=0&&(Fe*=256);)this[Le+je]=de/Fe&255;return Le+Ee},f.prototype.writeUint8=f.prototype.writeUInt8=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,1,255,0),this[Le]=255&de,Le+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,2,65535,0),this[Le]=255&de,this[Le+1]=de>>>8,Le+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,2,65535,0),this[Le]=de>>>8,this[Le+1]=255&de,Le+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,4,4294967295,0),this[Le+3]=de>>>24,this[Le+2]=de>>>16,this[Le+1]=de>>>8,this[Le]=255&de,Le+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,4,4294967295,0),this[Le]=de>>>24,this[Le+1]=de>>>16,this[Le+2]=de>>>8,this[Le+3]=255&de,Le+4},f.prototype.writeBigUInt64LE=Ne(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Ne(function(de){return se(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(de,Le,Ee,Re){if(de=+de,Le>>>=0,!Re){var je=Math.pow(2,8*Ee-1);ne(this,de,Le,Ee,je-1,-je)}var Fe=0,Xe=1,Ze=0;for(this[Le]=255&de;++Fe<Ee&&(Xe*=256);)de<0&&Ze===0&&this[Le+Fe-1]!==0&&(Ze=1),this[Le+Fe]=(de/Xe>>0)-Ze&255;return Le+Ee},f.prototype.writeIntBE=function(de,Le,Ee,Re){if(de=+de,Le>>>=0,!Re){var je=Math.pow(2,8*Ee-1);ne(this,de,Le,Ee,je-1,-je)}var Fe=Ee-1,Xe=1,Ze=0;for(this[Le+Fe]=255&de;--Fe>=0&&(Xe*=256);)de<0&&Ze===0&&this[Le+Fe+1]!==0&&(Ze=1),this[Le+Fe]=(de/Xe>>0)-Ze&255;return Le+Ee},f.prototype.writeInt8=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,1,127,-128),de<0&&(de=255+de+1),this[Le]=255&de,Le+1},f.prototype.writeInt16LE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,2,32767,-32768),this[Le]=255&de,this[Le+1]=de>>>8,Le+2},f.prototype.writeInt16BE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,2,32767,-32768),this[Le]=de>>>8,this[Le+1]=255&de,Le+2},f.prototype.writeInt32LE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,4,2147483647,-2147483648),this[Le]=255&de,this[Le+1]=de>>>8,this[Le+2]=de>>>16,this[Le+3]=de>>>24,Le+4},f.prototype.writeInt32BE=function(de,Le,Ee){return de=+de,Le>>>=0,Ee||ne(this,de,Le,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[Le]=de>>>24,this[Le+1]=de>>>16,this[Le+2]=de>>>8,this[Le+3]=255&de,Le+4},f.prototype.writeBigInt64LE=Ne(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Ne(function(de){return se(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(de,Le,Ee){return me(this,de,Le,!0,Ee)},f.prototype.writeFloatBE=function(de,Le,Ee){return me(this,de,Le,!1,Ee)},f.prototype.writeDoubleLE=function(de,Le,Ee){return ye(this,de,Le,!0,Ee)},f.prototype.writeDoubleBE=function(de,Le,Ee){return ye(this,de,Le,!1,Ee)},f.prototype.copy=function(de,Le,Ee,Re){if(!f.isBuffer(de))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),Re||Re===0||(Re=this.length),Le>=de.length&&(Le=de.length),Le||(Le=0),Re>0&&Re<Ee&&(Re=Ee),Re===Ee||de.length===0||this.length===0)return 0;if(Le<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),de.length-Le<Re-Ee&&(Re=de.length-Le+Ee);var je=Re-Ee;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Le,Ee,Re):Uint8Array.prototype.set.call(de,this.subarray(Ee,Re),Le),je},f.prototype.fill=function(de,Le,Ee,Re){if(typeof de=="string"){if(typeof Le=="string"?(Re=Le,Le=0,Ee=this.length):typeof Ee=="string"&&(Re=Ee,Ee=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!f.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(de.length===1){var je=de.charCodeAt(0);(Re==="utf8"&&je<128||Re==="latin1")&&(de=je)}}else typeof de=="number"?de&=255:typeof de=="boolean"&&(de=Number(de));if(Le<0||this.length<Le||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=Le)return this;var Fe;if(Le>>>=0,Ee=Ee===void 0?this.length:Ee>>>0,de||(de=0),typeof de=="number")for(Fe=Le;Fe<Ee;++Fe)this[Fe]=de;else{var Xe=f.isBuffer(de)?de:f.from(de,Re),Ze=Xe.length;if(Ze===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Fe=0;Fe<Ee-Le;++Fe)this[Fe+Le]=Xe[Fe%Ze]}return this};var Te={};function Ce(de,Le,Ee){Te[de]=function(Re){(function(ot,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");ot.prototype=Object.create(bt&&bt.prototype,{constructor:{value:ot,writable:!0,configurable:!0}}),Object.defineProperty(ot,"prototype",{writable:!1}),bt&&n(ot,bt)})(lt,Re);var je,Fe,Xe,Ze,at=(Xe=lt,Ze=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ot,bt=s(Xe);if(Ze){var wt=s(this).constructor;ot=Reflect.construct(bt,arguments,wt)}else ot=bt.apply(this,arguments);return function(ht,ct){if(ct&&(l(ct)==="object"||typeof ct=="function"))return ct;if(ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(ht)}(this,ot)});function lt(){var ot;return function(bt,wt){if(!(bt instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,lt),ot=at.call(this),Object.defineProperty(r(ot),"message",{value:Le.apply(r(ot),arguments),writable:!0,configurable:!0}),ot.name="".concat(ot.name," [").concat(de,"]"),ot.stack,delete ot.name,ot}return je=lt,(Fe=[{key:"code",get:function(){return de},set:function(ot){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ot,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(de,"]: ").concat(this.message)}}])&&i(je.prototype,Fe),Object.defineProperty(je,"prototype",{writable:!1}),lt}(Ee)}function pe(de){for(var Le="",Ee=de.length,Re=de[0]==="-"?1:0;Ee>=Re+4;Ee-=3)Le="_".concat(de.slice(Ee-3,Ee)).concat(Le);return"".concat(de.slice(0,Ee)).concat(Le)}function fe(de,Le,Ee,Re,je,Fe){if(de>Ee||de<Le){var Xe,Ze=typeof Le=="bigint"?"n":"";throw Xe=Fe>3?Le===0||Le===BigInt(0)?">= 0".concat(Ze," and < 2").concat(Ze," ** ").concat(8*(Fe+1)).concat(Ze):">= -(2".concat(Ze," ** ").concat(8*(Fe+1)-1).concat(Ze,") and < 2 ** ")+"".concat(8*(Fe+1)-1).concat(Ze):">= ".concat(Le).concat(Ze," and <= ").concat(Ee).concat(Ze),new Te.ERR_OUT_OF_RANGE("value",Xe,de)}(function(at,lt,ot){Oe(lt,"offset"),at[lt]!==void 0&&at[lt+ot]!==void 0||Se(lt,at.length-(ot+1))})(Re,je,Fe)}function Oe(de,Le){if(typeof de!="number")throw new Te.ERR_INVALID_ARG_TYPE(Le,"number",de)}function Se(de,Le,Ee){throw Math.floor(de)!==de?(Oe(de,Ee),new Te.ERR_OUT_OF_RANGE(Ee||"offset","an integer",de)):Le<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE(Ee||"offset",">= ".concat(Ee?1:0," and <= ").concat(Le),de)}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(de){return de?"".concat(de," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(de,Le){return'The "'.concat(de,'" argument must be of type number. Received type ').concat(l(Le))},TypeError),Ce("ERR_OUT_OF_RANGE",function(de,Le,Ee){var Re='The value of "'.concat(de,'" is out of range.'),je=Ee;return Number.isInteger(Ee)&&Math.abs(Ee)>Math.pow(2,32)?je=pe(String(Ee)):typeof Ee=="bigint"&&(je=String(Ee),(Ee>Math.pow(BigInt(2),BigInt(32))||Ee<-Math.pow(BigInt(2),BigInt(32)))&&(je=pe(je)),je+="n"),Re+" It must be ".concat(Le,". Received ").concat(je)},RangeError);var Me=/[^+/0-9A-Za-z-_]/g;function ue(de,Le){var Ee;Le=Le||1/0;for(var Re=de.length,je=null,Fe=[],Xe=0;Xe<Re;++Xe){if((Ee=de.charCodeAt(Xe))>55295&&Ee<57344){if(!je){if(Ee>56319){(Le-=3)>-1&&Fe.push(239,191,189);continue}if(Xe+1===Re){(Le-=3)>-1&&Fe.push(239,191,189);continue}je=Ee;continue}if(Ee<56320){(Le-=3)>-1&&Fe.push(239,191,189),je=Ee;continue}Ee=65536+(je-55296<<10|Ee-56320)}else je&&(Le-=3)>-1&&Fe.push(239,191,189);if(je=null,Ee<128){if((Le-=1)<0)break;Fe.push(Ee)}else if(Ee<2048){if((Le-=2)<0)break;Fe.push(Ee>>6|192,63&Ee|128)}else if(Ee<65536){if((Le-=3)<0)break;Fe.push(Ee>>12|224,Ee>>6&63|128,63&Ee|128)}else{if(!(Ee<1114112))throw new Error("Invalid code point");if((Le-=4)<0)break;Fe.push(Ee>>18|240,Ee>>12&63|128,Ee>>6&63|128,63&Ee|128)}}return Fe}function le(de){return u.toByteArray(function(Le){if((Le=(Le=Le.split("=")[0]).trim().replace(Me,"")).length<2)return"";for(;Le.length%4!=0;)Le+="=";return Le}(de))}function ie(de,Le,Ee,Re){var je;for(je=0;je<Re&&!(je+Ee>=Le.length||je>=de.length);++je)Le[je+Ee]=de[je];return je}function ge(de,Le){return de instanceof Le||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===Le.name}function Ae(de){return de!=de}var we=function(){for(var de="0123456789abcdef",Le=new Array(256),Ee=0;Ee<16;++Ee)for(var Re=16*Ee,je=0;je<16;++je)Le[Re+je]=de[Ee]+de[je];return Le}();function Ne(de){return typeof BigInt>"u"?He:de}function He(){throw new Error("BigInt not supported")}},2321:function(h){h.exports=n,h.exports.isMobile=n,h.exports.default=n;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function n(r){r||(r={});var s=r.ua;if(s||typeof navigator>"u"||(s=navigator.userAgent),s&&s.headers&&typeof s.headers["user-agent"]=="string"&&(s=s.headers["user-agent"]),typeof s!="string")return!1;var l=o.test(s)&&!t.test(s)||!!r.tablet&&i.test(s);return!l&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&s.indexOf("Macintosh")!==-1&&s.indexOf("Safari")!==-1&&(l=!0),l}},3910:function(h,o){o.byteLength=function(d){var c=l(d),w=c[0],m=c[1];return 3*(w+m)/4-m},o.toByteArray=function(d){var c,w,m=l(d),f=m[0],x=m[1],y=new n(function(p,S,A){return 3*(S+A)/4-A}(0,f,x)),v=0,M=x>0?f-4:f;for(w=0;w<M;w+=4)c=i[d.charCodeAt(w)]<<18|i[d.charCodeAt(w+1)]<<12|i[d.charCodeAt(w+2)]<<6|i[d.charCodeAt(w+3)],y[v++]=c>>16&255,y[v++]=c>>8&255,y[v++]=255&c;return x===2&&(c=i[d.charCodeAt(w)]<<2|i[d.charCodeAt(w+1)]>>4,y[v++]=255&c),x===1&&(c=i[d.charCodeAt(w)]<<10|i[d.charCodeAt(w+1)]<<4|i[d.charCodeAt(w+2)]>>2,y[v++]=c>>8&255,y[v++]=255&c),y},o.fromByteArray=function(d){for(var c,w=d.length,m=w%3,f=[],x=16383,y=0,v=w-m;y<v;y+=x)f.push(u(d,y,y+x>v?v:y+x));return m===1?(c=d[w-1],f.push(t[c>>2]+t[c<<4&63]+"==")):m===2&&(c=(d[w-2]<<8)+d[w-1],f.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),f.join("")};for(var t=[],i=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)t[s]=r[s],i[r.charCodeAt(s)]=s;function l(d){var c=d.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=d.indexOf("=");return w===-1&&(w=c),[w,w===c?0:4-w%4]}function u(d,c,w){for(var m,f,x=[],y=c;y<w;y+=3)m=(d[y]<<16&16711680)+(d[y+1]<<8&65280)+(255&d[y+2]),x.push(t[(f=m)>>18&63]+t[f>>12&63]+t[f>>6&63]+t[63&f]);return x.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(h,o){o.read=function(t,i,n,r,s){var l,u,d=8*s-r-1,c=(1<<d)-1,w=c>>1,m=-7,f=n?s-1:0,x=n?-1:1,y=t[i+f];for(f+=x,l=y&(1<<-m)-1,y>>=-m,m+=d;m>0;l=256*l+t[i+f],f+=x,m-=8);for(u=l&(1<<-m)-1,l>>=-m,m+=r;m>0;u=256*u+t[i+f],f+=x,m-=8);if(l===0)l=1-w;else{if(l===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,r),l-=w}return(y?-1:1)*u*Math.pow(2,l-r)},o.write=function(t,i,n,r,s,l){var u,d,c,w=8*l-s-1,m=(1<<w)-1,f=m>>1,x=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:l-1,v=r?1:-1,M=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,u=m):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+f>=1?x/c:x*Math.pow(2,1-f))*c>=2&&(u++,c/=2),u+f>=m?(d=0,u=m):u+f>=1?(d=(i*c-1)*Math.pow(2,s),u+=f):(d=i*Math.pow(2,f-1)*Math.pow(2,s),u=0));s>=8;t[n+y]=255&d,y+=v,d/=256,s-=8);for(u=u<<s|d,w+=s;w>0;t[n+y]=255&u,y+=v,u/=256,w-=8);t[n+y-v]|=128*M}},1152:function(h,o,t){h.exports=function(u){var d=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],w=u.up||[0,1,0],m=u.distanceLimits||[0,1/0],f=u.mode||"turntable",x=i(),y=n(),v=r();return x.setDistanceLimits(m[0],m[1]),x.lookAt(0,d,c,w),y.setDistanceLimits(m[0],m[1]),y.lookAt(0,d,c,w),v.setDistanceLimits(m[0],m[1]),v.lookAt(0,d,c,w),new s({turntable:x,orbit:y,matrix:v},f)};var i=t(3440),n=t(7774),r=t(9298);function s(u,d){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=d,this._active=u[d],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=s.prototype;l.flush=function(u){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].flush(u)},l.idle=function(u){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].idle(u)},l.lookAt=function(u,d,c,w){for(var m=this._controllerList,f=0;f<m.length;++f)m[f].lookAt(u,d,c,w)},l.rotate=function(u,d,c,w){for(var m=this._controllerList,f=0;f<m.length;++f)m[f].rotate(u,d,c,w)},l.pan=function(u,d,c,w){for(var m=this._controllerList,f=0;f<m.length;++f)m[f].pan(u,d,c,w)},l.translate=function(u,d,c,w){for(var m=this._controllerList,f=0;f<m.length;++f)m[f].translate(u,d,c,w)},l.setMatrix=function(u,d){for(var c=this._controllerList,w=0;w<c.length;++w)c[w].setMatrix(u,d)},l.setDistanceLimits=function(u,d){for(var c=this._controllerList,w=0;w<c.length;++w)c[w].setDistanceLimits(u,d)},l.setDistance=function(u,d){for(var c=this._controllerList,w=0;w<c.length;++w)c[w].setDistance(u,d)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var d=this._controllerNames.indexOf(u);if(!(d<0)){var c=this._active,w=this._controllerList[d],m=Math.max(c.lastT(),w.lastT());c.recalcMatrix(m),w.setMatrix(m,c.computedMatrix),this._active=w,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},8126:function(h,o,t){var i=typeof WeakMap>"u"?t(5346):WeakMap,n=t(5827),r=t(2944),s=new i;h.exports=function(l){var u=s.get(l),d=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!d||!l.isBuffer(d)){var c=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=r(l,[{buffer:c,type:l.FLOAT,size:2}]))._triangleBuffer=c,s.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},8008:function(h,o,t){var i=t(4930);h.exports=function(n,r,s){r=typeof r=="number"?r:1,s=s||": ";var l=n.split(/\r?\n/),u=String(l.length+r-1).length;return l.map(function(d,c){var w=c+r,m=String(w).length;return i(w,u-m)+s+d}).join(`
`)}},2153:function(h,o,t){h.exports=function(r){var s=r.length;if(s===0)return[];if(s===1)return[0];for(var l=r[0].length,u=[r[0]],d=[0],c=1;c<s;++c)if(u.push(r[c]),n(u,l)){if(d.push(c),d.length===l+1)return d}else u.pop();return d};var i=t(417);function n(r,s){for(var l=new Array(s+1),u=0;u<r.length;++u)l[u]=r[u];for(u=0;u<=r.length;++u){for(var d=r.length;d<=s;++d){for(var c=new Array(s),w=0;w<s;++w)c[w]=Math.pow(d+1-u,w);l[d]=c}if(i.apply(void 0,l))return!0}return!1}},4653:function(h,o,t){h.exports=function(r,s){return i(s).filter(function(l){for(var u=new Array(l.length),d=0;d<l.length;++d)u[d]=s[l[d]];return n(u)*r<1})};var i=t(4419),n=t(1778)},2350:function(h,o,t){h.exports=function(r,s){return n(i(r,s))};var i=t(4653),n=t(8691)},7896:function(h){h.exports=function(o){return atob(o)}},957:function(h,o,t){h.exports=function(r,s){for(var l=s.length,u=new Array(l+1),d=0;d<l;++d){for(var c=new Array(l+1),w=0;w<=l;++w)c[w]=r[w][d];u[d]=c}for(u[l]=new Array(l+1),d=0;d<=l;++d)u[l][d]=1;var m=new Array(l+1);for(d=0;d<l;++d)m[d]=s[d];m[l]=1;var f=i(u,m),x=n(f[l+1]);x===0&&(x=1);var y=new Array(l+1);for(d=0;d<=l;++d)y[d]=n(f[d])/x;return y};var i=t(6606);function n(r){for(var s=0,l=0;l<r.length;++l)s+=r[l];return s}},1539:function(h,o,t){var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},8846:function(h){h.exports=function(o,t){return o[0].mul(t[1]).cmp(t[0].mul(o[1]))}},9189:function(h,o,t){var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]),n[1].mul(r[0]))}},5125:function(h,o,t){var i=t(234),n=t(3218),r=t(5514),s=t(2813),l=t(8524),u=t(9189);h.exports=function d(c,w){if(i(c))return w?u(c,d(w)):[c[0].clone(),c[1].clone()];var m,f,x=0;if(n(c))m=c.clone();else if(typeof c=="string")m=s(c);else{if(c===0)return[r(0),r(1)];if(c===Math.floor(c))m=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),x-=256;m=r(c)}}if(i(w))m.mul(w[1]),f=w[0].clone();else if(n(w))f=w.clone();else if(typeof w=="string")f=s(w);else if(w)if(w===Math.floor(w))f=r(w);else{for(;w!==Math.floor(w);)w*=Math.pow(2,256),x+=256;f=r(w)}else f=r(1);return x>0?m=m.ushln(x):x<0&&(f=f.ushln(-x)),l(m,f)}},234:function(h,o,t){var i=t(3218);h.exports=function(n){return Array.isArray(n)&&n.length===2&&i(n[0])&&i(n[1])}},4275:function(h,o,t){var i=t(1928);h.exports=function(n){return n.cmp(new i(0))}},9958:function(h,o,t){var i=t(4275);h.exports=function(n){var r=n.length,s=n.words,l=0;if(r===1)l=s[0];else if(r===2)l=s[0]+67108864*s[1];else for(var u=0;u<r;u++)l+=s[u]*Math.pow(67108864,u);return i(n)*l}},1112:function(h,o,t){var i=t(8362),n=t(2288).countTrailingZeros;h.exports=function(r){var s=n(i.lo(r));if(s<32)return s;var l=n(i.hi(r));return l>20?52:l+32}},3218:function(h,o,t){t(1928),h.exports=function(i){return i&&typeof i=="object"&&!!i.words}},5514:function(h,o,t){var i=t(1928),n=t(8362);h.exports=function(r){var s=n.exponent(r);return s<52?new i(r):new i(r*Math.pow(2,52-s)).ushln(s-52)}},8524:function(h,o,t){var i=t(5514),n=t(4275);h.exports=function(r,s){var l=n(r),u=n(s);if(l===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(r=r.neg(),s=s.neg());var d=r.gcd(s);return d.cmpn(1)?[r.div(d),s.div(d)]:[r,s]}},2813:function(h,o,t){var i=t(1928);h.exports=function(n){return new i(n)}},3962:function(h,o,t){var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[0]),n[1].mul(r[1]))}},4951:function(h,o,t){var i=t(4275);h.exports=function(n){return i(n[0])*i(n[1])}},4354:function(h,o,t){var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},7999:function(h,o,t){var i=t(9958),n=t(1112);h.exports=function(r){var s=r[0],l=r[1];if(s.cmpn(0)===0)return 0;var u=s.abs().divmod(l.abs()),d=u.div,c=i(d),w=u.mod,m=s.negative!==l.negative?-1:1;if(w.cmpn(0)===0)return m*c;if(c){var f=n(c)+4;return m*(c+(y=i(w.ushln(f).divRound(l)))*Math.pow(2,-f))}var x=l.bitLength()-w.bitLength()+53,y=i(w.ushln(x).divRound(l));return x<1023?m*y*Math.pow(2,-x):m*(y*=Math.pow(2,-1023))*Math.pow(2,1023-x)}},5070:function(h){function o(l,u,d,c,w){for(var m=w+1;c<=w;){var f=c+w>>>1,x=l[f];(d!==void 0?d(x,u):x-u)>=0?(m=f,w=f-1):c=f+1}return m}function t(l,u,d,c,w){for(var m=w+1;c<=w;){var f=c+w>>>1,x=l[f];(d!==void 0?d(x,u):x-u)>0?(m=f,w=f-1):c=f+1}return m}function i(l,u,d,c,w){for(var m=c-1;c<=w;){var f=c+w>>>1,x=l[f];(d!==void 0?d(x,u):x-u)<0?(m=f,c=f+1):w=f-1}return m}function n(l,u,d,c,w){for(var m=c-1;c<=w;){var f=c+w>>>1,x=l[f];(d!==void 0?d(x,u):x-u)<=0?(m=f,c=f+1):w=f-1}return m}function r(l,u,d,c,w){for(;c<=w;){var m=c+w>>>1,f=l[m],x=d!==void 0?d(f,u):f-u;if(x===0)return m;x<=0?c=m+1:w=m-1}return-1}function s(l,u,d,c,w,m){return typeof d=="function"?m(l,u,d,c===void 0?0:0|c,w===void 0?l.length-1:0|w):m(l,u,void 0,d===void 0?0:0|d,c===void 0?l.length-1:0|c)}h.exports={ge:function(l,u,d,c,w){return s(l,u,d,c,w,o)},gt:function(l,u,d,c,w){return s(l,u,d,c,w,t)},lt:function(l,u,d,c,w){return s(l,u,d,c,w,i)},le:function(l,u,d,c,w){return s(l,u,d,c,w,n)},eq:function(l,u,d,c,w){return s(l,u,d,c,w,r)}}},2288:function(h,o){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var r=n>>31;return(n^r)-r},o.min=function(n,r){return r^(n^r)&-(n<r)},o.max=function(n,r){return n^(n^r)&-(n<r)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var r,s;return r=(n>65535)<<4,r|=s=((n>>>=r)>255)<<3,r|=s=((n>>>=s)>15)<<2,(r|=s=((n>>>=s)>3)<<1)|(n>>>=s)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var s=r,l=r,u=7;for(s>>>=1;s;s>>>=1)l<<=1,l|=1&s,--u;n[r]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},o.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,r,s){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},1928:function(h,o,t){(function(i,n){function r(D,V){if(!D)throw new Error(V||"Assertion failed")}function s(D,V){D.super_=V;var j=function(){};j.prototype=V.prototype,D.prototype=new j,D.prototype.constructor=D}function l(D,V,j){if(l.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&(V!=="le"&&V!=="be"||(j=V,V=10),this._init(D||0,V||10,j||"be"))}var u;typeof i=="object"?i.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function d(D,V){var j=D.charCodeAt(V);return j>=65&&j<=70?j-55:j>=97&&j<=102?j-87:j-48&15}function c(D,V,j){var B=d(D,j);return j-1>=V&&(B|=d(D,j-1)<<4),B}function w(D,V,j,B){for(var W=0,q=Math.min(D.length,j),re=V;re<q;re++){var ee=D.charCodeAt(re)-48;W*=B,W+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return W}l.isBN=function(D){return D instanceof l||D!==null&&typeof D=="object"&&D.constructor.wordSize===l.wordSize&&Array.isArray(D.words)},l.max=function(D,V){return D.cmp(V)>0?D:V},l.min=function(D,V){return D.cmp(V)<0?D:V},l.prototype._init=function(D,V,j){if(typeof D=="number")return this._initNumber(D,V,j);if(typeof D=="object")return this._initArray(D,V,j);V==="hex"&&(V=16),r(V===(0|V)&&V>=2&&V<=36);var B=0;(D=D.toString().replace(/\s+/g,""))[0]==="-"&&(B++,this.negative=1),B<D.length&&(V===16?this._parseHex(D,B,j):(this._parseBase(D,V,B),j==="le"&&this._initArray(this.toArray(),V,j)))},l.prototype._initNumber=function(D,V,j){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(r(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),j==="le"&&this._initArray(this.toArray(),V,j)},l.prototype._initArray=function(D,V,j){if(r(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var W,q,re=0;if(j==="be")for(B=D.length-1,W=0;B>=0;B-=3)q=D[B]|D[B-1]<<8|D[B-2]<<16,this.words[W]|=q<<re&67108863,this.words[W+1]=q>>>26-re&67108863,(re+=24)>=26&&(re-=26,W++);else if(j==="le")for(B=0,W=0;B<D.length;B+=3)q=D[B]|D[B+1]<<8|D[B+2]<<16,this.words[W]|=q<<re&67108863,this.words[W+1]=q>>>26-re&67108863,(re+=24)>=26&&(re-=26,W++);return this.strip()},l.prototype._parseHex=function(D,V,j){this.length=Math.ceil((D.length-V)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var W,q=0,re=0;if(j==="be")for(B=D.length-1;B>=V;B-=2)W=c(D,V,B)<<q,this.words[re]|=67108863&W,q>=18?(q-=18,re+=1,this.words[re]|=W>>>26):q+=8;else for(B=(D.length-V)%2==0?V+1:V;B<D.length;B+=2)W=c(D,V,B)<<q,this.words[re]|=67108863&W,q>=18?(q-=18,re+=1,this.words[re]|=W>>>26):q+=8;this.strip()},l.prototype._parseBase=function(D,V,j){this.words=[0],this.length=1;for(var B=0,W=1;W<=67108863;W*=V)B++;B--,W=W/V|0;for(var q=D.length-j,re=q%B,ee=Math.min(q,q-re)+j,K=0,Y=j;Y<ee;Y+=B)K=w(D,Y,Y+B,V),this.imuln(W),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(re!==0){var $=1;for(K=w(D,Y,D.length,V),Y=0;Y<re;Y++)$*=V;this.imuln($),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this.strip()},l.prototype.copy=function(D){D.words=new Array(this.length);for(var V=0;V<this.length;V++)D.words[V]=this.words[V];D.length=this.length,D.negative=this.negative,D.red=this.red},l.prototype.clone=function(){var D=new l(null);return this.copy(D),D},l.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(D,V,j){j.negative=V.negative^D.negative;var B=D.length+V.length|0;j.length=B,B=B-1|0;var W=0|D.words[0],q=0|V.words[0],re=W*q,ee=67108863&re,K=re/67108864|0;j.words[0]=ee;for(var Y=1;Y<B;Y++){for(var $=K>>>26,ne=67108863&K,ae=Math.min(Y,V.length-1),se=Math.max(0,Y-D.length+1);se<=ae;se++){var ce=Y-se|0;$+=(re=(W=0|D.words[ce])*(q=0|V.words[se])+ne)/67108864|0,ne=67108863&re}j.words[Y]=0|ne,K=0|$}return K!==0?j.words[Y]=0|K:j.length--,j.strip()}l.prototype.toString=function(D,V){var j;if(V=0|V||1,(D=D||10)===16||D==="hex"){j="";for(var B=0,W=0,q=0;q<this.length;q++){var re=this.words[q],ee=(16777215&(re<<B|W)).toString(16);j=(W=re>>>24-B&16777215)!=0||q!==this.length-1?m[6-ee.length]+ee+j:ee+j,(B+=2)>=26&&(B-=26,q--)}for(W!==0&&(j=W.toString(16)+j);j.length%V!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}if(D===(0|D)&&D>=2&&D<=36){var K=f[D],Y=x[D];j="";var $=this.clone();for($.negative=0;!$.isZero();){var ne=$.modn(Y).toString(D);j=($=$.idivn(Y)).isZero()?ne+j:m[K-ne.length]+ne+j}for(this.isZero()&&(j="0"+j);j.length%V!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=67108864*this.words[1]:this.length===3&&this.words[2]===1?D+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(D,V){return r(u!==void 0),this.toArrayLike(u,D,V)},l.prototype.toArray=function(D,V){return this.toArrayLike(Array,D,V)},l.prototype.toArrayLike=function(D,V,j){var B=this.byteLength(),W=j||Math.max(1,B);r(B<=W,"byte array longer than desired length"),r(W>0,"Requested array length <= 0"),this.strip();var q,re,ee=V==="le",K=new D(W),Y=this.clone();if(ee){for(re=0;!Y.isZero();re++)q=Y.andln(255),Y.iushrn(8),K[re]=q;for(;re<W;re++)K[re]=0}else{for(re=0;re<W-B;re++)K[re]=0;for(re=0;!Y.isZero();re++)q=Y.andln(255),Y.iushrn(8),K[W-re-1]=q}return K},Math.clz32?l.prototype._countBits=function(D){return 32-Math.clz32(D)}:l.prototype._countBits=function(D){var V=D,j=0;return V>=4096&&(j+=13,V>>>=13),V>=64&&(j+=7,V>>>=7),V>=8&&(j+=4,V>>>=4),V>=2&&(j+=2,V>>>=2),j+V},l.prototype._zeroBits=function(D){if(D===0)return 26;var V=D,j=0;return!(8191&V)&&(j+=13,V>>>=13),!(127&V)&&(j+=7,V>>>=7),!(15&V)&&(j+=4,V>>>=4),!(3&V)&&(j+=2,V>>>=2),!(1&V)&&j++,j},l.prototype.bitLength=function(){var D=this.words[this.length-1],V=this._countBits(D);return 26*(this.length-1)+V},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,V=0;V<this.length;V++){var j=this._zeroBits(this.words[V]);if(D+=j,j!==26)break}return D},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},l.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var V=0;V<D.length;V++)this.words[V]=this.words[V]|D.words[V];return this.strip()},l.prototype.ior=function(D){return r((this.negative|D.negative)==0),this.iuor(D)},l.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},l.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},l.prototype.iuand=function(D){var V;V=this.length>D.length?D:this;for(var j=0;j<V.length;j++)this.words[j]=this.words[j]&D.words[j];return this.length=V.length,this.strip()},l.prototype.iand=function(D){return r((this.negative|D.negative)==0),this.iuand(D)},l.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},l.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},l.prototype.iuxor=function(D){var V,j;this.length>D.length?(V=this,j=D):(V=D,j=this);for(var B=0;B<j.length;B++)this.words[B]=V.words[B]^j.words[B];if(this!==V)for(;B<V.length;B++)this.words[B]=V.words[B];return this.length=V.length,this.strip()},l.prototype.ixor=function(D){return r((this.negative|D.negative)==0),this.iuxor(D)},l.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},l.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},l.prototype.inotn=function(D){r(typeof D=="number"&&D>=0);var V=0|Math.ceil(D/26),j=D%26;this._expand(V),j>0&&V--;for(var B=0;B<V;B++)this.words[B]=67108863&~this.words[B];return j>0&&(this.words[B]=~this.words[B]&67108863>>26-j),this.strip()},l.prototype.notn=function(D){return this.clone().inotn(D)},l.prototype.setn=function(D,V){r(typeof D=="number"&&D>=0);var j=D/26|0,B=D%26;return this._expand(j+1),this.words[j]=V?this.words[j]|1<<B:this.words[j]&~(1<<B),this.strip()},l.prototype.iadd=function(D){var V,j,B;if(this.negative!==0&&D.negative===0)return this.negative=0,V=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,V=this.isub(D),D.negative=1,V._normSign();this.length>D.length?(j=this,B=D):(j=D,B=this);for(var W=0,q=0;q<B.length;q++)V=(0|j.words[q])+(0|B.words[q])+W,this.words[q]=67108863&V,W=V>>>26;for(;W!==0&&q<j.length;q++)V=(0|j.words[q])+W,this.words[q]=67108863&V,W=V>>>26;if(this.length=j.length,W!==0)this.words[this.length]=W,this.length++;else if(j!==this)for(;q<j.length;q++)this.words[q]=j.words[q];return this},l.prototype.add=function(D){var V;return D.negative!==0&&this.negative===0?(D.negative=0,V=this.sub(D),D.negative^=1,V):D.negative===0&&this.negative!==0?(this.negative=0,V=D.sub(this),this.negative=1,V):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},l.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var V=this.iadd(D);return D.negative=1,V._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var j,B,W=this.cmp(D);if(W===0)return this.negative=0,this.length=1,this.words[0]=0,this;W>0?(j=this,B=D):(j=D,B=this);for(var q=0,re=0;re<B.length;re++)q=(V=(0|j.words[re])-(0|B.words[re])+q)>>26,this.words[re]=67108863&V;for(;q!==0&&re<j.length;re++)q=(V=(0|j.words[re])+q)>>26,this.words[re]=67108863&V;if(q===0&&re<j.length&&j!==this)for(;re<j.length;re++)this.words[re]=j.words[re];return this.length=Math.max(this.length,re),j!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(D){return this.clone().isub(D)};var v=function(D,V,j){var B,W,q,re=D.words,ee=V.words,K=j.words,Y=0,$=0|re[0],ne=8191&$,ae=$>>>13,se=0|re[1],ce=8191&se,me=se>>>13,ye=0|re[2],Te=8191&ye,Ce=ye>>>13,pe=0|re[3],fe=8191&pe,Oe=pe>>>13,Se=0|re[4],Me=8191&Se,ue=Se>>>13,le=0|re[5],ie=8191&le,ge=le>>>13,Ae=0|re[6],we=8191&Ae,Ne=Ae>>>13,He=0|re[7],de=8191&He,Le=He>>>13,Ee=0|re[8],Re=8191&Ee,je=Ee>>>13,Fe=0|re[9],Xe=8191&Fe,Ze=Fe>>>13,at=0|ee[0],lt=8191&at,ot=at>>>13,bt=0|ee[1],wt=8191&bt,ht=bt>>>13,ct=0|ee[2],Tt=8191&ct,Lt=ct>>>13,kt=0|ee[3],Ot=8191&kt,Pt=kt>>>13,et=0|ee[4],nt=8191&et,Ye=et>>>13,tt=0|ee[5],ut=8191&tt,Ke=tt>>>13,De=0|ee[6],Be=8191&De,Qe=De>>>13,rt=0|ee[7],vt=8191&rt,mt=rt>>>13,xt=0|ee[8],dt=8191&xt,Et=xt>>>13,pt=0|ee[9],gt=8191&pt,Mt=pt>>>13;j.negative=D.negative^V.negative,j.length=19;var Nt=(Y+(B=Math.imul(ne,lt))|0)+((8191&(W=(W=Math.imul(ne,ot))+Math.imul(ae,lt)|0))<<13)|0;Y=((q=Math.imul(ae,ot))+(W>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,B=Math.imul(ce,lt),W=(W=Math.imul(ce,ot))+Math.imul(me,lt)|0,q=Math.imul(me,ot);var Bt=(Y+(B=B+Math.imul(ne,wt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,ht)|0)+Math.imul(ae,wt)|0))<<13)|0;Y=((q=q+Math.imul(ae,ht)|0)+(W>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,B=Math.imul(Te,lt),W=(W=Math.imul(Te,ot))+Math.imul(Ce,lt)|0,q=Math.imul(Ce,ot),B=B+Math.imul(ce,wt)|0,W=(W=W+Math.imul(ce,ht)|0)+Math.imul(me,wt)|0,q=q+Math.imul(me,ht)|0;var Ut=(Y+(B=B+Math.imul(ne,Tt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Lt)|0)+Math.imul(ae,Tt)|0))<<13)|0;Y=((q=q+Math.imul(ae,Lt)|0)+(W>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,B=Math.imul(fe,lt),W=(W=Math.imul(fe,ot))+Math.imul(Oe,lt)|0,q=Math.imul(Oe,ot),B=B+Math.imul(Te,wt)|0,W=(W=W+Math.imul(Te,ht)|0)+Math.imul(Ce,wt)|0,q=q+Math.imul(Ce,ht)|0,B=B+Math.imul(ce,Tt)|0,W=(W=W+Math.imul(ce,Lt)|0)+Math.imul(me,Tt)|0,q=q+Math.imul(me,Lt)|0;var Jt=(Y+(B=B+Math.imul(ne,Ot)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Pt)|0)+Math.imul(ae,Ot)|0))<<13)|0;Y=((q=q+Math.imul(ae,Pt)|0)+(W>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,B=Math.imul(Me,lt),W=(W=Math.imul(Me,ot))+Math.imul(ue,lt)|0,q=Math.imul(ue,ot),B=B+Math.imul(fe,wt)|0,W=(W=W+Math.imul(fe,ht)|0)+Math.imul(Oe,wt)|0,q=q+Math.imul(Oe,ht)|0,B=B+Math.imul(Te,Tt)|0,W=(W=W+Math.imul(Te,Lt)|0)+Math.imul(Ce,Tt)|0,q=q+Math.imul(Ce,Lt)|0,B=B+Math.imul(ce,Ot)|0,W=(W=W+Math.imul(ce,Pt)|0)+Math.imul(me,Ot)|0,q=q+Math.imul(me,Pt)|0;var Vt=(Y+(B=B+Math.imul(ne,nt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Ye)|0)+Math.imul(ae,nt)|0))<<13)|0;Y=((q=q+Math.imul(ae,Ye)|0)+(W>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,B=Math.imul(ie,lt),W=(W=Math.imul(ie,ot))+Math.imul(ge,lt)|0,q=Math.imul(ge,ot),B=B+Math.imul(Me,wt)|0,W=(W=W+Math.imul(Me,ht)|0)+Math.imul(ue,wt)|0,q=q+Math.imul(ue,ht)|0,B=B+Math.imul(fe,Tt)|0,W=(W=W+Math.imul(fe,Lt)|0)+Math.imul(Oe,Tt)|0,q=q+Math.imul(Oe,Lt)|0,B=B+Math.imul(Te,Ot)|0,W=(W=W+Math.imul(Te,Pt)|0)+Math.imul(Ce,Ot)|0,q=q+Math.imul(Ce,Pt)|0,B=B+Math.imul(ce,nt)|0,W=(W=W+Math.imul(ce,Ye)|0)+Math.imul(me,nt)|0,q=q+Math.imul(me,Ye)|0;var Qt=(Y+(B=B+Math.imul(ne,ut)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Ke)|0)+Math.imul(ae,ut)|0))<<13)|0;Y=((q=q+Math.imul(ae,Ke)|0)+(W>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,B=Math.imul(we,lt),W=(W=Math.imul(we,ot))+Math.imul(Ne,lt)|0,q=Math.imul(Ne,ot),B=B+Math.imul(ie,wt)|0,W=(W=W+Math.imul(ie,ht)|0)+Math.imul(ge,wt)|0,q=q+Math.imul(ge,ht)|0,B=B+Math.imul(Me,Tt)|0,W=(W=W+Math.imul(Me,Lt)|0)+Math.imul(ue,Tt)|0,q=q+Math.imul(ue,Lt)|0,B=B+Math.imul(fe,Ot)|0,W=(W=W+Math.imul(fe,Pt)|0)+Math.imul(Oe,Ot)|0,q=q+Math.imul(Oe,Pt)|0,B=B+Math.imul(Te,nt)|0,W=(W=W+Math.imul(Te,Ye)|0)+Math.imul(Ce,nt)|0,q=q+Math.imul(Ce,Ye)|0,B=B+Math.imul(ce,ut)|0,W=(W=W+Math.imul(ce,Ke)|0)+Math.imul(me,ut)|0,q=q+Math.imul(me,Ke)|0;var qt=(Y+(B=B+Math.imul(ne,Be)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Qe)|0)+Math.imul(ae,Be)|0))<<13)|0;Y=((q=q+Math.imul(ae,Qe)|0)+(W>>>13)|0)+(qt>>>26)|0,qt&=67108863,B=Math.imul(de,lt),W=(W=Math.imul(de,ot))+Math.imul(Le,lt)|0,q=Math.imul(Le,ot),B=B+Math.imul(we,wt)|0,W=(W=W+Math.imul(we,ht)|0)+Math.imul(Ne,wt)|0,q=q+Math.imul(Ne,ht)|0,B=B+Math.imul(ie,Tt)|0,W=(W=W+Math.imul(ie,Lt)|0)+Math.imul(ge,Tt)|0,q=q+Math.imul(ge,Lt)|0,B=B+Math.imul(Me,Ot)|0,W=(W=W+Math.imul(Me,Pt)|0)+Math.imul(ue,Ot)|0,q=q+Math.imul(ue,Pt)|0,B=B+Math.imul(fe,nt)|0,W=(W=W+Math.imul(fe,Ye)|0)+Math.imul(Oe,nt)|0,q=q+Math.imul(Oe,Ye)|0,B=B+Math.imul(Te,ut)|0,W=(W=W+Math.imul(Te,Ke)|0)+Math.imul(Ce,ut)|0,q=q+Math.imul(Ce,Ke)|0,B=B+Math.imul(ce,Be)|0,W=(W=W+Math.imul(ce,Qe)|0)+Math.imul(me,Be)|0,q=q+Math.imul(me,Qe)|0;var gn=(Y+(B=B+Math.imul(ne,vt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,mt)|0)+Math.imul(ae,vt)|0))<<13)|0;Y=((q=q+Math.imul(ae,mt)|0)+(W>>>13)|0)+(gn>>>26)|0,gn&=67108863,B=Math.imul(Re,lt),W=(W=Math.imul(Re,ot))+Math.imul(je,lt)|0,q=Math.imul(je,ot),B=B+Math.imul(de,wt)|0,W=(W=W+Math.imul(de,ht)|0)+Math.imul(Le,wt)|0,q=q+Math.imul(Le,ht)|0,B=B+Math.imul(we,Tt)|0,W=(W=W+Math.imul(we,Lt)|0)+Math.imul(Ne,Tt)|0,q=q+Math.imul(Ne,Lt)|0,B=B+Math.imul(ie,Ot)|0,W=(W=W+Math.imul(ie,Pt)|0)+Math.imul(ge,Ot)|0,q=q+Math.imul(ge,Pt)|0,B=B+Math.imul(Me,nt)|0,W=(W=W+Math.imul(Me,Ye)|0)+Math.imul(ue,nt)|0,q=q+Math.imul(ue,Ye)|0,B=B+Math.imul(fe,ut)|0,W=(W=W+Math.imul(fe,Ke)|0)+Math.imul(Oe,ut)|0,q=q+Math.imul(Oe,Ke)|0,B=B+Math.imul(Te,Be)|0,W=(W=W+Math.imul(Te,Qe)|0)+Math.imul(Ce,Be)|0,q=q+Math.imul(Ce,Qe)|0,B=B+Math.imul(ce,vt)|0,W=(W=W+Math.imul(ce,mt)|0)+Math.imul(me,vt)|0,q=q+Math.imul(me,mt)|0;var wn=(Y+(B=B+Math.imul(ne,dt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Et)|0)+Math.imul(ae,dt)|0))<<13)|0;Y=((q=q+Math.imul(ae,Et)|0)+(W>>>13)|0)+(wn>>>26)|0,wn&=67108863,B=Math.imul(Xe,lt),W=(W=Math.imul(Xe,ot))+Math.imul(Ze,lt)|0,q=Math.imul(Ze,ot),B=B+Math.imul(Re,wt)|0,W=(W=W+Math.imul(Re,ht)|0)+Math.imul(je,wt)|0,q=q+Math.imul(je,ht)|0,B=B+Math.imul(de,Tt)|0,W=(W=W+Math.imul(de,Lt)|0)+Math.imul(Le,Tt)|0,q=q+Math.imul(Le,Lt)|0,B=B+Math.imul(we,Ot)|0,W=(W=W+Math.imul(we,Pt)|0)+Math.imul(Ne,Ot)|0,q=q+Math.imul(Ne,Pt)|0,B=B+Math.imul(ie,nt)|0,W=(W=W+Math.imul(ie,Ye)|0)+Math.imul(ge,nt)|0,q=q+Math.imul(ge,Ye)|0,B=B+Math.imul(Me,ut)|0,W=(W=W+Math.imul(Me,Ke)|0)+Math.imul(ue,ut)|0,q=q+Math.imul(ue,Ke)|0,B=B+Math.imul(fe,Be)|0,W=(W=W+Math.imul(fe,Qe)|0)+Math.imul(Oe,Be)|0,q=q+Math.imul(Oe,Qe)|0,B=B+Math.imul(Te,vt)|0,W=(W=W+Math.imul(Te,mt)|0)+Math.imul(Ce,vt)|0,q=q+Math.imul(Ce,mt)|0,B=B+Math.imul(ce,dt)|0,W=(W=W+Math.imul(ce,Et)|0)+Math.imul(me,dt)|0,q=q+Math.imul(me,Et)|0;var hn=(Y+(B=B+Math.imul(ne,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ne,Mt)|0)+Math.imul(ae,gt)|0))<<13)|0;Y=((q=q+Math.imul(ae,Mt)|0)+(W>>>13)|0)+(hn>>>26)|0,hn&=67108863,B=Math.imul(Xe,wt),W=(W=Math.imul(Xe,ht))+Math.imul(Ze,wt)|0,q=Math.imul(Ze,ht),B=B+Math.imul(Re,Tt)|0,W=(W=W+Math.imul(Re,Lt)|0)+Math.imul(je,Tt)|0,q=q+Math.imul(je,Lt)|0,B=B+Math.imul(de,Ot)|0,W=(W=W+Math.imul(de,Pt)|0)+Math.imul(Le,Ot)|0,q=q+Math.imul(Le,Pt)|0,B=B+Math.imul(we,nt)|0,W=(W=W+Math.imul(we,Ye)|0)+Math.imul(Ne,nt)|0,q=q+Math.imul(Ne,Ye)|0,B=B+Math.imul(ie,ut)|0,W=(W=W+Math.imul(ie,Ke)|0)+Math.imul(ge,ut)|0,q=q+Math.imul(ge,Ke)|0,B=B+Math.imul(Me,Be)|0,W=(W=W+Math.imul(Me,Qe)|0)+Math.imul(ue,Be)|0,q=q+Math.imul(ue,Qe)|0,B=B+Math.imul(fe,vt)|0,W=(W=W+Math.imul(fe,mt)|0)+Math.imul(Oe,vt)|0,q=q+Math.imul(Oe,mt)|0,B=B+Math.imul(Te,dt)|0,W=(W=W+Math.imul(Te,Et)|0)+Math.imul(Ce,dt)|0,q=q+Math.imul(Ce,Et)|0;var Xt=(Y+(B=B+Math.imul(ce,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ce,Mt)|0)+Math.imul(me,gt)|0))<<13)|0;Y=((q=q+Math.imul(me,Mt)|0)+(W>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,B=Math.imul(Xe,Tt),W=(W=Math.imul(Xe,Lt))+Math.imul(Ze,Tt)|0,q=Math.imul(Ze,Lt),B=B+Math.imul(Re,Ot)|0,W=(W=W+Math.imul(Re,Pt)|0)+Math.imul(je,Ot)|0,q=q+Math.imul(je,Pt)|0,B=B+Math.imul(de,nt)|0,W=(W=W+Math.imul(de,Ye)|0)+Math.imul(Le,nt)|0,q=q+Math.imul(Le,Ye)|0,B=B+Math.imul(we,ut)|0,W=(W=W+Math.imul(we,Ke)|0)+Math.imul(Ne,ut)|0,q=q+Math.imul(Ne,Ke)|0,B=B+Math.imul(ie,Be)|0,W=(W=W+Math.imul(ie,Qe)|0)+Math.imul(ge,Be)|0,q=q+Math.imul(ge,Qe)|0,B=B+Math.imul(Me,vt)|0,W=(W=W+Math.imul(Me,mt)|0)+Math.imul(ue,vt)|0,q=q+Math.imul(ue,mt)|0,B=B+Math.imul(fe,dt)|0,W=(W=W+Math.imul(fe,Et)|0)+Math.imul(Oe,dt)|0,q=q+Math.imul(Oe,Et)|0;var an=(Y+(B=B+Math.imul(Te,gt)|0)|0)+((8191&(W=(W=W+Math.imul(Te,Mt)|0)+Math.imul(Ce,gt)|0))<<13)|0;Y=((q=q+Math.imul(Ce,Mt)|0)+(W>>>13)|0)+(an>>>26)|0,an&=67108863,B=Math.imul(Xe,Ot),W=(W=Math.imul(Xe,Pt))+Math.imul(Ze,Ot)|0,q=Math.imul(Ze,Pt),B=B+Math.imul(Re,nt)|0,W=(W=W+Math.imul(Re,Ye)|0)+Math.imul(je,nt)|0,q=q+Math.imul(je,Ye)|0,B=B+Math.imul(de,ut)|0,W=(W=W+Math.imul(de,Ke)|0)+Math.imul(Le,ut)|0,q=q+Math.imul(Le,Ke)|0,B=B+Math.imul(we,Be)|0,W=(W=W+Math.imul(we,Qe)|0)+Math.imul(Ne,Be)|0,q=q+Math.imul(Ne,Qe)|0,B=B+Math.imul(ie,vt)|0,W=(W=W+Math.imul(ie,mt)|0)+Math.imul(ge,vt)|0,q=q+Math.imul(ge,mt)|0,B=B+Math.imul(Me,dt)|0,W=(W=W+Math.imul(Me,Et)|0)+Math.imul(ue,dt)|0,q=q+Math.imul(ue,Et)|0;var tn=(Y+(B=B+Math.imul(fe,gt)|0)|0)+((8191&(W=(W=W+Math.imul(fe,Mt)|0)+Math.imul(Oe,gt)|0))<<13)|0;Y=((q=q+Math.imul(Oe,Mt)|0)+(W>>>13)|0)+(tn>>>26)|0,tn&=67108863,B=Math.imul(Xe,nt),W=(W=Math.imul(Xe,Ye))+Math.imul(Ze,nt)|0,q=Math.imul(Ze,Ye),B=B+Math.imul(Re,ut)|0,W=(W=W+Math.imul(Re,Ke)|0)+Math.imul(je,ut)|0,q=q+Math.imul(je,Ke)|0,B=B+Math.imul(de,Be)|0,W=(W=W+Math.imul(de,Qe)|0)+Math.imul(Le,Be)|0,q=q+Math.imul(Le,Qe)|0,B=B+Math.imul(we,vt)|0,W=(W=W+Math.imul(we,mt)|0)+Math.imul(Ne,vt)|0,q=q+Math.imul(Ne,mt)|0,B=B+Math.imul(ie,dt)|0,W=(W=W+Math.imul(ie,Et)|0)+Math.imul(ge,dt)|0,q=q+Math.imul(ge,Et)|0;var cn=(Y+(B=B+Math.imul(Me,gt)|0)|0)+((8191&(W=(W=W+Math.imul(Me,Mt)|0)+Math.imul(ue,gt)|0))<<13)|0;Y=((q=q+Math.imul(ue,Mt)|0)+(W>>>13)|0)+(cn>>>26)|0,cn&=67108863,B=Math.imul(Xe,ut),W=(W=Math.imul(Xe,Ke))+Math.imul(Ze,ut)|0,q=Math.imul(Ze,Ke),B=B+Math.imul(Re,Be)|0,W=(W=W+Math.imul(Re,Qe)|0)+Math.imul(je,Be)|0,q=q+Math.imul(je,Qe)|0,B=B+Math.imul(de,vt)|0,W=(W=W+Math.imul(de,mt)|0)+Math.imul(Le,vt)|0,q=q+Math.imul(Le,mt)|0,B=B+Math.imul(we,dt)|0,W=(W=W+Math.imul(we,Et)|0)+Math.imul(Ne,dt)|0,q=q+Math.imul(Ne,Et)|0;var vn=(Y+(B=B+Math.imul(ie,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ie,Mt)|0)+Math.imul(ge,gt)|0))<<13)|0;Y=((q=q+Math.imul(ge,Mt)|0)+(W>>>13)|0)+(vn>>>26)|0,vn&=67108863,B=Math.imul(Xe,Be),W=(W=Math.imul(Xe,Qe))+Math.imul(Ze,Be)|0,q=Math.imul(Ze,Qe),B=B+Math.imul(Re,vt)|0,W=(W=W+Math.imul(Re,mt)|0)+Math.imul(je,vt)|0,q=q+Math.imul(je,mt)|0,B=B+Math.imul(de,dt)|0,W=(W=W+Math.imul(de,Et)|0)+Math.imul(Le,dt)|0,q=q+Math.imul(Le,Et)|0;var yn=(Y+(B=B+Math.imul(we,gt)|0)|0)+((8191&(W=(W=W+Math.imul(we,Mt)|0)+Math.imul(Ne,gt)|0))<<13)|0;Y=((q=q+Math.imul(Ne,Mt)|0)+(W>>>13)|0)+(yn>>>26)|0,yn&=67108863,B=Math.imul(Xe,vt),W=(W=Math.imul(Xe,mt))+Math.imul(Ze,vt)|0,q=Math.imul(Ze,mt),B=B+Math.imul(Re,dt)|0,W=(W=W+Math.imul(Re,Et)|0)+Math.imul(je,dt)|0,q=q+Math.imul(je,Et)|0;var Pn=(Y+(B=B+Math.imul(de,gt)|0)|0)+((8191&(W=(W=W+Math.imul(de,Mt)|0)+Math.imul(Le,gt)|0))<<13)|0;Y=((q=q+Math.imul(Le,Mt)|0)+(W>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,B=Math.imul(Xe,dt),W=(W=Math.imul(Xe,Et))+Math.imul(Ze,dt)|0,q=Math.imul(Ze,Et);var In=(Y+(B=B+Math.imul(Re,gt)|0)|0)+((8191&(W=(W=W+Math.imul(Re,Mt)|0)+Math.imul(je,gt)|0))<<13)|0;Y=((q=q+Math.imul(je,Mt)|0)+(W>>>13)|0)+(In>>>26)|0,In&=67108863;var kn=(Y+(B=Math.imul(Xe,gt))|0)+((8191&(W=(W=Math.imul(Xe,Mt))+Math.imul(Ze,gt)|0))<<13)|0;return Y=((q=Math.imul(Ze,Mt))+(W>>>13)|0)+(kn>>>26)|0,kn&=67108863,K[0]=Nt,K[1]=Bt,K[2]=Ut,K[3]=Jt,K[4]=Vt,K[5]=Qt,K[6]=qt,K[7]=gn,K[8]=wn,K[9]=hn,K[10]=Xt,K[11]=an,K[12]=tn,K[13]=cn,K[14]=vn,K[15]=yn,K[16]=Pn,K[17]=In,K[18]=kn,Y!==0&&(K[19]=Y,j.length++),j};function M(D,V,j){return new p().mulp(D,V,j)}function p(D,V){this.x=D,this.y=V}Math.imul||(v=y),l.prototype.mulTo=function(D,V){var j,B=this.length+D.length;return j=this.length===10&&D.length===10?v(this,D,V):B<63?y(this,D,V):B<1024?function(W,q,re){re.negative=q.negative^W.negative,re.length=W.length+q.length;for(var ee=0,K=0,Y=0;Y<re.length-1;Y++){var $=K;K=0;for(var ne=67108863&ee,ae=Math.min(Y,q.length-1),se=Math.max(0,Y-W.length+1);se<=ae;se++){var ce=Y-se,me=(0|W.words[ce])*(0|q.words[se]),ye=67108863&me;ne=67108863&(ye=ye+ne|0),K+=($=($=$+(me/67108864|0)|0)+(ye>>>26)|0)>>>26,$&=67108863}re.words[Y]=ne,ee=$,$=K}return ee!==0?re.words[Y]=ee:re.length--,re.strip()}(this,D,V):M(this,D,V),j},p.prototype.makeRBT=function(D){for(var V=new Array(D),j=l.prototype._countBits(D)-1,B=0;B<D;B++)V[B]=this.revBin(B,j,D);return V},p.prototype.revBin=function(D,V,j){if(D===0||D===j-1)return D;for(var B=0,W=0;W<V;W++)B|=(1&D)<<V-W-1,D>>=1;return B},p.prototype.permute=function(D,V,j,B,W,q){for(var re=0;re<q;re++)B[re]=V[D[re]],W[re]=j[D[re]]},p.prototype.transform=function(D,V,j,B,W,q){this.permute(q,D,V,j,B,W);for(var re=1;re<W;re<<=1)for(var ee=re<<1,K=Math.cos(2*Math.PI/ee),Y=Math.sin(2*Math.PI/ee),$=0;$<W;$+=ee)for(var ne=K,ae=Y,se=0;se<re;se++){var ce=j[$+se],me=B[$+se],ye=j[$+se+re],Te=B[$+se+re],Ce=ne*ye-ae*Te;Te=ne*Te+ae*ye,ye=Ce,j[$+se]=ce+ye,B[$+se]=me+Te,j[$+se+re]=ce-ye,B[$+se+re]=me-Te,se!==ee&&(Ce=K*ne-Y*ae,ae=K*ae+Y*ne,ne=Ce)}},p.prototype.guessLen13b=function(D,V){var j=1|Math.max(V,D),B=1&j,W=0;for(j=j/2|0;j;j>>>=1)W++;return 1<<W+1+B},p.prototype.conjugate=function(D,V,j){if(!(j<=1))for(var B=0;B<j/2;B++){var W=D[B];D[B]=D[j-B-1],D[j-B-1]=W,W=V[B],V[B]=-V[j-B-1],V[j-B-1]=-W}},p.prototype.normalize13b=function(D,V){for(var j=0,B=0;B<V/2;B++){var W=8192*Math.round(D[2*B+1]/V)+Math.round(D[2*B]/V)+j;D[B]=67108863&W,j=W<67108864?0:W/67108864|0}return D},p.prototype.convert13b=function(D,V,j,B){for(var W=0,q=0;q<V;q++)W+=0|D[q],j[2*q]=8191&W,W>>>=13,j[2*q+1]=8191&W,W>>>=13;for(q=2*V;q<B;++q)j[q]=0;r(W===0),r((-8192&W)==0)},p.prototype.stub=function(D){for(var V=new Array(D),j=0;j<D;j++)V[j]=0;return V},p.prototype.mulp=function(D,V,j){var B=2*this.guessLen13b(D.length,V.length),W=this.makeRBT(B),q=this.stub(B),re=new Array(B),ee=new Array(B),K=new Array(B),Y=new Array(B),$=new Array(B),ne=new Array(B),ae=j.words;ae.length=B,this.convert13b(D.words,D.length,re,B),this.convert13b(V.words,V.length,Y,B),this.transform(re,q,ee,K,B,W),this.transform(Y,q,$,ne,B,W);for(var se=0;se<B;se++){var ce=ee[se]*$[se]-K[se]*ne[se];K[se]=ee[se]*ne[se]+K[se]*$[se],ee[se]=ce}return this.conjugate(ee,K,B),this.transform(ee,K,ae,q,B,W),this.conjugate(ae,q,B),this.normalize13b(ae,B),j.negative=D.negative^V.negative,j.length=D.length+V.length,j.strip()},l.prototype.mul=function(D){var V=new l(null);return V.words=new Array(this.length+D.length),this.mulTo(D,V)},l.prototype.mulf=function(D){var V=new l(null);return V.words=new Array(this.length+D.length),M(this,D,V)},l.prototype.imul=function(D){return this.clone().mulTo(D,this)},l.prototype.imuln=function(D){r(typeof D=="number"),r(D<67108864);for(var V=0,j=0;j<this.length;j++){var B=(0|this.words[j])*D,W=(67108863&B)+(67108863&V);V>>=26,V+=B/67108864|0,V+=W>>>26,this.words[j]=67108863&W}return V!==0&&(this.words[j]=V,this.length++),this},l.prototype.muln=function(D){return this.clone().imuln(D)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(D){var V=function(q){for(var re=new Array(q.bitLength()),ee=0;ee<re.length;ee++){var K=ee/26|0,Y=ee%26;re[ee]=(q.words[K]&1<<Y)>>>Y}return re}(D);if(V.length===0)return new l(1);for(var j=this,B=0;B<V.length&&V[B]===0;B++,j=j.sqr());if(++B<V.length)for(var W=j.sqr();B<V.length;B++,W=W.sqr())V[B]!==0&&(j=j.mul(W));return j},l.prototype.iushln=function(D){r(typeof D=="number"&&D>=0);var V,j=D%26,B=(D-j)/26,W=67108863>>>26-j<<26-j;if(j!==0){var q=0;for(V=0;V<this.length;V++){var re=this.words[V]&W,ee=(0|this.words[V])-re<<j;this.words[V]=ee|q,q=re>>>26-j}q&&(this.words[V]=q,this.length++)}if(B!==0){for(V=this.length-1;V>=0;V--)this.words[V+B]=this.words[V];for(V=0;V<B;V++)this.words[V]=0;this.length+=B}return this.strip()},l.prototype.ishln=function(D){return r(this.negative===0),this.iushln(D)},l.prototype.iushrn=function(D,V,j){var B;r(typeof D=="number"&&D>=0),B=V?(V-V%26)/26:0;var W=D%26,q=Math.min((D-W)/26,this.length),re=67108863^67108863>>>W<<W,ee=j;if(B-=q,B=Math.max(0,B),ee){for(var K=0;K<q;K++)ee.words[K]=this.words[K];ee.length=q}if(q!==0)if(this.length>q)for(this.length-=q,K=0;K<this.length;K++)this.words[K]=this.words[K+q];else this.words[0]=0,this.length=1;var Y=0;for(K=this.length-1;K>=0&&(Y!==0||K>=B);K--){var $=0|this.words[K];this.words[K]=Y<<26-W|$>>>W,Y=$&re}return ee&&Y!==0&&(ee.words[ee.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(D,V,j){return r(this.negative===0),this.iushrn(D,V,j)},l.prototype.shln=function(D){return this.clone().ishln(D)},l.prototype.ushln=function(D){return this.clone().iushln(D)},l.prototype.shrn=function(D){return this.clone().ishrn(D)},l.prototype.ushrn=function(D){return this.clone().iushrn(D)},l.prototype.testn=function(D){r(typeof D=="number"&&D>=0);var V=D%26,j=(D-V)/26,B=1<<V;return!(this.length<=j||!(this.words[j]&B))},l.prototype.imaskn=function(D){r(typeof D=="number"&&D>=0);var V=D%26,j=(D-V)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(V!==0&&j++,this.length=Math.min(j,this.length),V!==0){var B=67108863^67108863>>>V<<V;this.words[this.length-1]&=B}return this.strip()},l.prototype.maskn=function(D){return this.clone().imaskn(D)},l.prototype.iaddn=function(D){return r(typeof D=="number"),r(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},l.prototype._iaddn=function(D){this.words[0]+=D;for(var V=0;V<this.length&&this.words[V]>=67108864;V++)this.words[V]-=67108864,V===this.length-1?this.words[V+1]=1:this.words[V+1]++;return this.length=Math.max(this.length,V+1),this},l.prototype.isubn=function(D){if(r(typeof D=="number"),r(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var V=0;V<this.length&&this.words[V]<0;V++)this.words[V]+=67108864,this.words[V+1]-=1;return this.strip()},l.prototype.addn=function(D){return this.clone().iaddn(D)},l.prototype.subn=function(D){return this.clone().isubn(D)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(D,V,j){var B,W,q=D.length+j;this._expand(q);var re=0;for(B=0;B<D.length;B++){W=(0|this.words[B+j])+re;var ee=(0|D.words[B])*V;re=((W-=67108863&ee)>>26)-(ee/67108864|0),this.words[B+j]=67108863&W}for(;B<this.length-j;B++)re=(W=(0|this.words[B+j])+re)>>26,this.words[B+j]=67108863&W;if(re===0)return this.strip();for(r(re===-1),re=0,B=0;B<this.length;B++)re=(W=-(0|this.words[B])+re)>>26,this.words[B]=67108863&W;return this.negative=1,this.strip()},l.prototype._wordDiv=function(D,V){var j=(this.length,D.length),B=this.clone(),W=D,q=0|W.words[W.length-1];(j=26-this._countBits(q))!=0&&(W=W.ushln(j),B.iushln(j),q=0|W.words[W.length-1]);var re,ee=B.length-W.length;if(V!=="mod"){(re=new l(null)).length=ee+1,re.words=new Array(re.length);for(var K=0;K<re.length;K++)re.words[K]=0}var Y=B.clone()._ishlnsubmul(W,1,ee);Y.negative===0&&(B=Y,re&&(re.words[ee]=1));for(var $=ee-1;$>=0;$--){var ne=67108864*(0|B.words[W.length+$])+(0|B.words[W.length+$-1]);for(ne=Math.min(ne/q|0,67108863),B._ishlnsubmul(W,ne,$);B.negative!==0;)ne--,B.negative=0,B._ishlnsubmul(W,1,$),B.isZero()||(B.negative^=1);re&&(re.words[$]=ne)}return re&&re.strip(),B.strip(),V!=="div"&&j!==0&&B.iushrn(j),{div:re||null,mod:B}},l.prototype.divmod=function(D,V,j){return r(!D.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&D.negative===0?(q=this.neg().divmod(D,V),V!=="mod"&&(B=q.div.neg()),V!=="div"&&(W=q.mod.neg(),j&&W.negative!==0&&W.iadd(D)),{div:B,mod:W}):this.negative===0&&D.negative!==0?(q=this.divmod(D.neg(),V),V!=="mod"&&(B=q.div.neg()),{div:B,mod:q.mod}):this.negative&D.negative?(q=this.neg().divmod(D.neg(),V),V!=="div"&&(W=q.mod.neg(),j&&W.negative!==0&&W.isub(D)),{div:q.div,mod:W}):D.length>this.length||this.cmp(D)<0?{div:new l(0),mod:this}:D.length===1?V==="div"?{div:this.divn(D.words[0]),mod:null}:V==="mod"?{div:null,mod:new l(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new l(this.modn(D.words[0]))}:this._wordDiv(D,V);var B,W,q},l.prototype.div=function(D){return this.divmod(D,"div",!1).div},l.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},l.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},l.prototype.divRound=function(D){var V=this.divmod(D);if(V.mod.isZero())return V.div;var j=V.div.negative!==0?V.mod.isub(D):V.mod,B=D.ushrn(1),W=D.andln(1),q=j.cmp(B);return q<0||W===1&&q===0?V.div:V.div.negative!==0?V.div.isubn(1):V.div.iaddn(1)},l.prototype.modn=function(D){r(D<=67108863);for(var V=67108864%D,j=0,B=this.length-1;B>=0;B--)j=(V*j+(0|this.words[B]))%D;return j},l.prototype.idivn=function(D){r(D<=67108863);for(var V=0,j=this.length-1;j>=0;j--){var B=(0|this.words[j])+67108864*V;this.words[j]=B/D|0,V=B%D}return this.strip()},l.prototype.divn=function(D){return this.clone().idivn(D)},l.prototype.egcd=function(D){r(D.negative===0),r(!D.isZero());var V=this,j=D.clone();V=V.negative!==0?V.umod(D):V.clone();for(var B=new l(1),W=new l(0),q=new l(0),re=new l(1),ee=0;V.isEven()&&j.isEven();)V.iushrn(1),j.iushrn(1),++ee;for(var K=j.clone(),Y=V.clone();!V.isZero();){for(var $=0,ne=1;!(V.words[0]&ne)&&$<26;++$,ne<<=1);if($>0)for(V.iushrn($);$-- >0;)(B.isOdd()||W.isOdd())&&(B.iadd(K),W.isub(Y)),B.iushrn(1),W.iushrn(1);for(var ae=0,se=1;!(j.words[0]&se)&&ae<26;++ae,se<<=1);if(ae>0)for(j.iushrn(ae);ae-- >0;)(q.isOdd()||re.isOdd())&&(q.iadd(K),re.isub(Y)),q.iushrn(1),re.iushrn(1);V.cmp(j)>=0?(V.isub(j),B.isub(q),W.isub(re)):(j.isub(V),q.isub(B),re.isub(W))}return{a:q,b:re,gcd:j.iushln(ee)}},l.prototype._invmp=function(D){r(D.negative===0),r(!D.isZero());var V=this,j=D.clone();V=V.negative!==0?V.umod(D):V.clone();for(var B,W=new l(1),q=new l(0),re=j.clone();V.cmpn(1)>0&&j.cmpn(1)>0;){for(var ee=0,K=1;!(V.words[0]&K)&&ee<26;++ee,K<<=1);if(ee>0)for(V.iushrn(ee);ee-- >0;)W.isOdd()&&W.iadd(re),W.iushrn(1);for(var Y=0,$=1;!(j.words[0]&$)&&Y<26;++Y,$<<=1);if(Y>0)for(j.iushrn(Y);Y-- >0;)q.isOdd()&&q.iadd(re),q.iushrn(1);V.cmp(j)>=0?(V.isub(j),W.isub(q)):(j.isub(V),q.isub(W))}return(B=V.cmpn(1)===0?W:q).cmpn(0)<0&&B.iadd(D),B},l.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var V=this.clone(),j=D.clone();V.negative=0,j.negative=0;for(var B=0;V.isEven()&&j.isEven();B++)V.iushrn(1),j.iushrn(1);for(;;){for(;V.isEven();)V.iushrn(1);for(;j.isEven();)j.iushrn(1);var W=V.cmp(j);if(W<0){var q=V;V=j,j=q}else if(W===0||j.cmpn(1)===0)break;V.isub(j)}return j.iushln(B)},l.prototype.invm=function(D){return this.egcd(D).a.umod(D)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(D){return this.words[0]&D},l.prototype.bincn=function(D){r(typeof D=="number");var V=D%26,j=(D-V)/26,B=1<<V;if(this.length<=j)return this._expand(j+1),this.words[j]|=B,this;for(var W=B,q=j;W!==0&&q<this.length;q++){var re=0|this.words[q];W=(re+=W)>>>26,re&=67108863,this.words[q]=re}return W!==0&&(this.words[q]=W,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(D){var V,j=D<0;if(this.negative!==0&&!j)return-1;if(this.negative===0&&j)return 1;if(this.strip(),this.length>1)V=1;else{j&&(D=-D),r(D<=67108863,"Number is too big");var B=0|this.words[0];V=B===D?0:B<D?-1:1}return this.negative!==0?0|-V:V},l.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var V=this.ucmp(D);return this.negative!==0?0|-V:V},l.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var V=0,j=this.length-1;j>=0;j--){var B=0|this.words[j],W=0|D.words[j];if(B!==W){B<W?V=-1:B>W&&(V=1);break}}return V},l.prototype.gtn=function(D){return this.cmpn(D)===1},l.prototype.gt=function(D){return this.cmp(D)===1},l.prototype.gten=function(D){return this.cmpn(D)>=0},l.prototype.gte=function(D){return this.cmp(D)>=0},l.prototype.ltn=function(D){return this.cmpn(D)===-1},l.prototype.lt=function(D){return this.cmp(D)===-1},l.prototype.lten=function(D){return this.cmpn(D)<=0},l.prototype.lte=function(D){return this.cmp(D)<=0},l.prototype.eqn=function(D){return this.cmpn(D)===0},l.prototype.eq=function(D){return this.cmp(D)===0},l.red=function(D){return new O(D)},l.prototype.toRed=function(D){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(D){return this.red=D,this},l.prototype.forceRed=function(D){return r(!this.red,"Already a number in reduction context"),this._forceRed(D)},l.prototype.redAdd=function(D){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},l.prototype.redIAdd=function(D){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},l.prototype.redSub=function(D){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},l.prototype.redISub=function(D){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},l.prototype.redShl=function(D){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},l.prototype.redMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},l.prototype.redIMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(D){return r(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var S={k256:null,p224:null,p192:null,p25519:null};function A(D,V){this.name=D,this.p=new l(V,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(D){if(typeof D=="string"){var V=l._prime(D);this.m=V.p,this.prime=V}else r(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function X(D){O.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var D=new l(null);return D.words=new Array(Math.ceil(this.n/13)),D},A.prototype.ireduce=function(D){var V,j=D;do this.split(j,this.tmp),V=(j=(j=this.imulK(j)).iadd(this.tmp)).bitLength();while(V>this.n);var B=V<this.n?-1:j.ucmp(this.p);return B===0?(j.words[0]=0,j.length=1):B>0?j.isub(this.p):j.strip!==void 0?j.strip():j._strip(),j},A.prototype.split=function(D,V){D.iushrn(this.n,0,V)},A.prototype.imulK=function(D){return D.imul(this.k)},s(k,A),k.prototype.split=function(D,V){for(var j=4194303,B=Math.min(D.length,9),W=0;W<B;W++)V.words[W]=D.words[W];if(V.length=B,D.length<=9)return D.words[0]=0,void(D.length=1);var q=D.words[9];for(V.words[V.length++]=q&j,W=10;W<D.length;W++){var re=0|D.words[W];D.words[W-10]=(re&j)<<4|q>>>22,q=re}q>>>=22,D.words[W-10]=q,q===0&&D.length>10?D.length-=10:D.length-=9},k.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var V=0,j=0;j<D.length;j++){var B=0|D.words[j];V+=977*B,D.words[j]=67108863&V,V=64*B+(V/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D},s(C,A),s(P,A),s(R,A),R.prototype.imulK=function(D){for(var V=0,j=0;j<D.length;j++){var B=19*(0|D.words[j])+V,W=67108863&B;B>>>=26,D.words[j]=W,V=B}return V!==0&&(D.words[D.length++]=V),D},l._prime=function(D){if(S[D])return S[D];var V;if(D==="k256")V=new k;else if(D==="p224")V=new C;else if(D==="p192")V=new P;else{if(D!=="p25519")throw new Error("Unknown prime "+D);V=new R}return S[D]=V,V},O.prototype._verify1=function(D){r(D.negative===0,"red works only with positives"),r(D.red,"red works only with red numbers")},O.prototype._verify2=function(D,V){r((D.negative|V.negative)==0,"red works only with positives"),r(D.red&&D.red===V.red,"red works only with red numbers")},O.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},O.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},O.prototype.add=function(D,V){this._verify2(D,V);var j=D.add(V);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},O.prototype.iadd=function(D,V){this._verify2(D,V);var j=D.iadd(V);return j.cmp(this.m)>=0&&j.isub(this.m),j},O.prototype.sub=function(D,V){this._verify2(D,V);var j=D.sub(V);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},O.prototype.isub=function(D,V){this._verify2(D,V);var j=D.isub(V);return j.cmpn(0)<0&&j.iadd(this.m),j},O.prototype.shl=function(D,V){return this._verify1(D),this.imod(D.ushln(V))},O.prototype.imul=function(D,V){return this._verify2(D,V),this.imod(D.imul(V))},O.prototype.mul=function(D,V){return this._verify2(D,V),this.imod(D.mul(V))},O.prototype.isqr=function(D){return this.imul(D,D.clone())},O.prototype.sqr=function(D){return this.mul(D,D)},O.prototype.sqrt=function(D){if(D.isZero())return D.clone();var V=this.m.andln(3);if(r(V%2==1),V===3){var j=this.m.add(new l(1)).iushrn(2);return this.pow(D,j)}for(var B=this.m.subn(1),W=0;!B.isZero()&&B.andln(1)===0;)W++,B.iushrn(1);r(!B.isZero());var q=new l(1).toRed(this),re=q.redNeg(),ee=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new l(2*K*K).toRed(this);this.pow(K,ee).cmp(re)!==0;)K.redIAdd(re);for(var Y=this.pow(K,B),$=this.pow(D,B.addn(1).iushrn(1)),ne=this.pow(D,B),ae=W;ne.cmp(q)!==0;){for(var se=ne,ce=0;se.cmp(q)!==0;ce++)se=se.redSqr();r(ce<ae);var me=this.pow(Y,new l(1).iushln(ae-ce-1));$=$.redMul(me),Y=me.redSqr(),ne=ne.redMul(Y),ae=ce}return $},O.prototype.invm=function(D){var V=D._invmp(this.m);return V.negative!==0?(V.negative=0,this.imod(V).redNeg()):this.imod(V)},O.prototype.pow=function(D,V){if(V.isZero())return new l(1).toRed(this);if(V.cmpn(1)===0)return D.clone();var j=new Array(16);j[0]=new l(1).toRed(this),j[1]=D;for(var B=2;B<j.length;B++)j[B]=this.mul(j[B-1],D);var W=j[0],q=0,re=0,ee=V.bitLength()%26;for(ee===0&&(ee=26),B=V.length-1;B>=0;B--){for(var K=V.words[B],Y=ee-1;Y>=0;Y--){var $=K>>Y&1;W!==j[0]&&(W=this.sqr(W)),$!==0||q!==0?(q<<=1,q|=$,(++re==4||B===0&&Y===0)&&(W=this.mul(W,j[q]),re=0,q=0)):re=0}ee=26}return W},O.prototype.convertTo=function(D){var V=D.umod(this.m);return V===D?V.clone():V},O.prototype.convertFrom=function(D){var V=D.clone();return V.red=null,V},l.mont=function(D){return new X(D)},s(X,O),X.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},X.prototype.convertFrom=function(D){var V=this.imod(D.mul(this.rinv));return V.red=null,V},X.prototype.imul=function(D,V){if(D.isZero()||V.isZero())return D.words[0]=0,D.length=1,D;var j=D.imul(V),B=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),W=j.isub(B).iushrn(this.shift),q=W;return W.cmp(this.m)>=0?q=W.isub(this.m):W.cmpn(0)<0&&(q=W.iadd(this.m)),q._forceRed(this)},X.prototype.mul=function(D,V){if(D.isZero()||V.isZero())return new l(0)._forceRed(this);var j=D.mul(V),B=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),W=j.isub(B).iushrn(this.shift),q=W;return W.cmp(this.m)>=0?q=W.isub(this.m):W.cmpn(0)<0&&(q=W.iadd(this.m)),q._forceRed(this)},X.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}})(h=t.nmd(h),this)},2692:function(h){h.exports=function(o){var t,i,n,r=o.length,s=0;for(t=0;t<r;++t)s+=o[t].length;var l=new Array(s),u=0;for(t=0;t<r;++t){var d=o[t],c=d.length;for(i=0;i<c;++i){var w=l[u++]=new Array(c-1),m=0;for(n=0;n<c;++n)n!==i&&(w[m++]=d[n]);if(1&i){var f=w[1];w[1]=w[0],w[0]=f}}}return l}},2569:function(h,o,t){h.exports=function(w,m,f){switch(arguments.length){case 1:return i=[],d(x=w,x,c,!0),i;case 2:return typeof m=="function"?d(w,w,m,!0):function(y,v){return i=[],d(y,v,c,!1),i}(w,m);case 3:return d(w,m,f,!1);default:throw new Error("box-intersect: Invalid arguments")}var x};var i,n=t(5306),r=t(1390),s=t(2337);function l(w,m){for(var f=0;f<w;++f)if(!(m[f]<=m[f+w]))return!0;return!1}function u(w,m,f,x){for(var y=0,v=0,M=0,p=w.length;M<p;++M){var S=w[M];if(!l(m,S)){for(var A=0;A<2*m;++A)f[y++]=S[A];x[v++]=M}}return v}function d(w,m,f,x){var y=w.length,v=m.length;if(!(y<=0||v<=0)){var M=w[0].length>>>1;if(!(M<=0)){var p,S=n.mallocDouble(2*M*y),A=n.mallocInt32(y);if((y=u(w,M,S,A))>0){if(M===1&&x)r.init(y),p=r.sweepComplete(M,f,0,y,S,A,0,y,S,A);else{var k=n.mallocDouble(2*M*v),C=n.mallocInt32(v);(v=u(m,M,k,C))>0&&(r.init(y+v),p=M===1?r.sweepBipartite(M,f,0,y,S,A,0,v,k,C):s(M,f,x,y,S,A,v,k,C),n.free(k),n.free(C))}n.free(S),n.free(A)}return p}}}function c(w,m){i.push([w,m])}},7333:function(h,o){function t(i){return i?function(n,r,s,l,u,d,c,w,m,f,x){return u-l>m-w?function(y,v,M,p,S,A,k,C,P,R,O){for(var X=2*y,D=p,V=X*p;D<S;++D,V+=X){var j=A[v+V],B=A[v+V+y],W=k[D];e:for(var q=C,re=X*C;q<P;++q,re+=X){var ee=R[v+re],K=R[v+re+y],Y=O[q];if(!(K<j||B<ee)){for(var $=v+1;$<y;++$){var ne=A[$+V],ae=A[$+y+V],se=R[$+re],ce=R[$+y+re];if(ae<se||ce<ne)continue e}var me=M(W,Y);if(me!==void 0)return me}}}}(n,r,s,l,u,d,c,w,m,f,x):function(y,v,M,p,S,A,k,C,P,R,O){for(var X=2*y,D=C,V=X*C;D<P;++D,V+=X){var j=R[v+V],B=R[v+V+y],W=O[D];e:for(var q=p,re=X*p;q<S;++q,re+=X){var ee=A[v+re],K=A[v+re+y],Y=k[q];if(!(B<ee||K<j)){for(var $=v+1;$<y;++$){var ne=A[$+re],ae=A[$+y+re],se=R[$+V],ce=R[$+y+V];if(ae<se||ce<ne)continue e}var me=M(Y,W);if(me!==void 0)return me}}}}(n,r,s,l,u,d,c,w,m,f,x)}:function(n,r,s,l,u,d,c,w,m,f,x,y){return d-u>f-m?l?function(v,M,p,S,A,k,C,P,R,O,X){for(var D=2*v,V=S,j=D*S;V<A;++V,j+=D){var B=k[M+j],W=k[M+j+v],q=C[V];e:for(var re=P,ee=D*P;re<R;++re,ee+=D){var K=O[M+ee],Y=X[re];if(!(K<=B||W<K)){for(var $=M+1;$<v;++$){var ne=k[$+j],ae=k[$+v+j],se=O[$+ee],ce=O[$+v+ee];if(ae<se||ce<ne)continue e}var me=p(Y,q);if(me!==void 0)return me}}}}(n,r,s,u,d,c,w,m,f,x,y):function(v,M,p,S,A,k,C,P,R,O,X){for(var D=2*v,V=S,j=D*S;V<A;++V,j+=D){var B=k[M+j],W=k[M+j+v],q=C[V];e:for(var re=P,ee=D*P;re<R;++re,ee+=D){var K=O[M+ee],Y=X[re];if(!(K<B||W<K)){for(var $=M+1;$<v;++$){var ne=k[$+j],ae=k[$+v+j],se=O[$+ee],ce=O[$+v+ee];if(ae<se||ce<ne)continue e}var me=p(q,Y);if(me!==void 0)return me}}}}(n,r,s,u,d,c,w,m,f,x,y):l?function(v,M,p,S,A,k,C,P,R,O,X){for(var D=2*v,V=P,j=D*P;V<R;++V,j+=D){var B=O[M+j],W=X[V];e:for(var q=S,re=D*S;q<A;++q,re+=D){var ee=k[M+re],K=k[M+re+v],Y=C[q];if(!(B<=ee||K<B)){for(var $=M+1;$<v;++$){var ne=k[$+re],ae=k[$+v+re],se=O[$+j],ce=O[$+v+j];if(ae<se||ce<ne)continue e}var me=p(W,Y);if(me!==void 0)return me}}}}(n,r,s,u,d,c,w,m,f,x,y):function(v,M,p,S,A,k,C,P,R,O,X){for(var D=2*v,V=P,j=D*P;V<R;++V,j+=D){var B=O[M+j],W=X[V];e:for(var q=S,re=D*S;q<A;++q,re+=D){var ee=k[M+re],K=k[M+re+v],Y=C[q];if(!(B<ee||K<B)){for(var $=M+1;$<v;++$){var ne=k[$+re],ae=k[$+v+re],se=O[$+j],ce=O[$+v+j];if(ae<se||ce<ne)continue e}var me=p(Y,W);if(me!==void 0)return me}}}}(n,r,s,u,d,c,w,m,f,x,y)}}o.partial=t(!1),o.full=t(!0)},2337:function(h,o,t){h.exports=function(D,V,j,B,W,q,re,ee,K){(function(je,Fe){var Xe=8*n.log2(Fe+1)*(je+1)|0,Ze=n.nextPow2(A*Xe);C.length<Ze&&(i.free(C),C=i.mallocInt32(Ze));var at=n.nextPow2(k*Xe);P.length<at&&(i.free(P),P=i.mallocDouble(at))})(D,B+re);var Y,$=0,ne=2*D;for(R($++,0,0,B,0,re,j?16:0,-1/0,1/0),j||R($++,0,0,re,0,B,1,-1/0,1/0);$>0;){var ae=($-=1)*A,se=C[ae],ce=C[ae+1],me=C[ae+2],ye=C[ae+3],Te=C[ae+4],Ce=C[ae+5],pe=$*k,fe=P[pe],Oe=P[pe+1],Se=1&Ce,Me=!!(16&Ce),ue=W,le=q,ie=ee,ge=K;if(Se&&(ue=ee,le=K,ie=W,ge=q),!(2&Ce&&ce>=(me=v(D,se,ce,me,ue,le,Oe))||4&Ce&&(ce=M(D,se,ce,me,ue,le,fe))>=me)){var Ae=me-ce,we=Te-ye;if(Me){if(D*Ae*(Ae+we)<f){if((Y=u.scanComplete(D,se,V,ce,me,ue,le,ye,Te,ie,ge))!==void 0)return Y;continue}}else{if(D*Math.min(Ae,we)<w){if((Y=s(D,se,V,Se,ce,me,ue,le,ye,Te,ie,ge))!==void 0)return Y;continue}if(D*Ae*we<m){if((Y=u.scanBipartite(D,se,V,Se,ce,me,ue,le,ye,Te,ie,ge))!==void 0)return Y;continue}}var Ne=x(D,se,ce,me,ue,le,fe,Oe);if(ce<Ne)if(D*(Ne-ce)<w){if((Y=l(D,se+1,V,ce,Ne,ue,le,ye,Te,ie,ge))!==void 0)return Y}else if(se===D-2){if((Y=Se?u.sweepBipartite(D,V,ye,Te,ie,ge,ce,Ne,ue,le):u.sweepBipartite(D,V,ce,Ne,ue,le,ye,Te,ie,ge))!==void 0)return Y}else R($++,se+1,ce,Ne,ye,Te,Se,-1/0,1/0),R($++,se+1,ye,Te,ce,Ne,1^Se,-1/0,1/0);if(Ne<me){var He=d(D,se,ye,Te,ie,ge),de=ie[ne*He+se],Le=y(D,se,He,Te,ie,ge,de);if(Le<Te&&R($++,se,Ne,me,Le,Te,(4|Se)+(Me?16:0),de,Oe),ye<He&&R($++,se,Ne,me,ye,He,(2|Se)+(Me?16:0),fe,de),He+1===Le){if((Y=Me?X(D,se,V,Ne,me,ue,le,He,ie,ge[He]):O(D,se,V,Se,Ne,me,ue,le,He,ie,ge[He]))!==void 0)return Y}else if(He<Le){var Ee;if(Me){if(Ne<(Ee=p(D,se,Ne,me,ue,le,de))){var Re=y(D,se,Ne,Ee,ue,le,de);if(se===D-2){if(Ne<Re&&(Y=u.sweepComplete(D,V,Ne,Re,ue,le,He,Le,ie,ge))!==void 0||Re<Ee&&(Y=u.sweepBipartite(D,V,Re,Ee,ue,le,He,Le,ie,ge))!==void 0)return Y}else Ne<Re&&R($++,se+1,Ne,Re,He,Le,16,-1/0,1/0),Re<Ee&&(R($++,se+1,Re,Ee,He,Le,0,-1/0,1/0),R($++,se+1,He,Le,Re,Ee,1,-1/0,1/0))}}else Ne<(Ee=Se?S(D,se,Ne,me,ue,le,de):p(D,se,Ne,me,ue,le,de))&&(se===D-2?Y=Se?u.sweepBipartite(D,V,He,Le,ie,ge,Ne,Ee,ue,le):u.sweepBipartite(D,V,Ne,Ee,ue,le,He,Le,ie,ge):(R($++,se+1,Ne,Ee,He,Le,Se,-1/0,1/0),R($++,se+1,He,Le,Ne,Ee,1^Se,-1/0,1/0)))}}}}};var i=t(5306),n=t(2288),r=t(7333),s=r.partial,l=r.full,u=t(1390),d=t(2464),c=t(122),w=128,m=1<<22,f=1<<22,x=c("!(lo>=p0)&&!(p1>=hi)"),y=c("lo===p0"),v=c("lo<p0"),M=c("hi<=p0"),p=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),A=6,k=2,C=i.mallocInt32(1024),P=i.mallocDouble(1024);function R(D,V,j,B,W,q,re,ee,K){var Y=A*D;C[Y]=V,C[Y+1]=j,C[Y+2]=B,C[Y+3]=W,C[Y+4]=q,C[Y+5]=re;var $=k*D;P[$]=ee,P[$+1]=K}function O(D,V,j,B,W,q,re,ee,K,Y,$){var ne=2*D,ae=K*ne,se=Y[ae+V];e:for(var ce=W,me=W*ne;ce<q;++ce,me+=ne){var ye=re[me+V],Te=re[me+V+D];if(!(se<ye||Te<se||B&&se===ye)){for(var Ce,pe=ee[ce],fe=V+1;fe<D;++fe){ye=re[me+fe],Te=re[me+fe+D];var Oe=Y[ae+fe],Se=Y[ae+fe+D];if(Te<Oe||Se<ye)continue e}if((Ce=B?j($,pe):j(pe,$))!==void 0)return Ce}}}function X(D,V,j,B,W,q,re,ee,K,Y){var $=2*D,ne=ee*$,ae=K[ne+V];e:for(var se=B,ce=B*$;se<W;++se,ce+=$){var me=re[se];if(me!==Y){var ye=q[ce+V],Te=q[ce+V+D];if(!(ae<ye||Te<ae)){for(var Ce=V+1;Ce<D;++Ce){ye=q[ce+Ce],Te=q[ce+Ce+D];var pe=K[ne+Ce],fe=K[ne+Ce+D];if(Te<pe||fe<ye)continue e}var Oe=j(me,Y);if(Oe!==void 0)return Oe}}}}},2464:function(h,o,t){h.exports=function(s,l,u,d,c,w){if(d<=u+1)return u;for(var m=u,f=d,x=d+u>>>1,y=2*s,v=x,M=c[y*x+l];m<f;){if(f-m<n){r(s,l,m,f,c,w),M=c[y*x+l];break}var p=f-m,S=Math.random()*p+m|0,A=c[y*S+l],k=Math.random()*p+m|0,C=c[y*k+l],P=Math.random()*p+m|0,R=c[y*P+l];A<=C?R>=C?(v=k,M=C):A>=R?(v=S,M=A):(v=P,M=R):C>=R?(v=k,M=C):R>=A?(v=S,M=A):(v=P,M=R);for(var O=y*(f-1),X=y*v,D=0;D<y;++D,++O,++X){var V=c[O];c[O]=c[X],c[X]=V}var j=w[f-1];for(w[f-1]=w[v],w[v]=j,O=y*(f-1),X=y*(v=i(s,l,m,f-1,c,w,M)),D=0;D<y;++D,++O,++X)V=c[O],c[O]=c[X],c[X]=V;if(j=w[f-1],w[f-1]=w[v],w[v]=j,x<v){for(f=v-1;m<f&&c[y*(f-1)+l]===M;)f-=1;f+=1}else{if(!(v<x))break;for(m=v+1;m<f&&c[y*m+l]===M;)m+=1}}return i(s,l,u,x,c,w,c[y*x+l])};var i=t(122)("lo<p0"),n=8;function r(s,l,u,d,c,w){for(var m=2*s,f=m*(u+1)+l,x=u+1;x<d;++x,f+=m)for(var y=c[f],v=x,M=m*(x-1);v>u&&c[M+l]>y;--v,M-=m){for(var p=M,S=M+m,A=0;A<m;++A,++p,++S){var k=c[p];c[p]=c[S],c[S]=k}var C=w[v];w[v]=w[v-1],w[v-1]=C}}},122:function(h){h.exports=function(t){return o[t]};var o={"lo===p0":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=i,x=n;r>x;++x,c+=d)if(s[c+f]===u)if(m===x)m+=1,w+=d;else{for(var y=0;d>y;++y){var v=s[c+y];s[c+y]=s[w],s[w++]=v}var M=l[x];l[x]=l[m],l[m++]=M}return m},"lo<p0":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=i,x=n;r>x;++x,c+=d)if(s[c+f]<u)if(m===x)m+=1,w+=d;else{for(var y=0;d>y;++y){var v=s[c+y];s[c+y]=s[w],s[w++]=v}var M=l[x];l[x]=l[m],l[m++]=M}return m},"lo<=p0":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=t+i,x=n;r>x;++x,c+=d)if(s[c+f]<=u)if(m===x)m+=1,w+=d;else{for(var y=0;d>y;++y){var v=s[c+y];s[c+y]=s[w],s[w++]=v}var M=l[x];l[x]=l[m],l[m++]=M}return m},"hi<=p0":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=t+i,x=n;r>x;++x,c+=d)if(s[c+f]<=u)if(m===x)m+=1,w+=d;else{for(var y=0;d>y;++y){var v=s[c+y];s[c+y]=s[w],s[w++]=v}var M=l[x];l[x]=l[m],l[m++]=M}return m},"lo<p0&&p0<=hi":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=i,x=t+i,y=n;r>y;++y,c+=d){var v=s[c+f],M=s[c+x];if(v<u&&u<=M)if(m===y)m+=1,w+=d;else{for(var p=0;d>p;++p){var S=s[c+p];s[c+p]=s[w],s[w++]=S}var A=l[y];l[y]=l[m],l[m++]=A}}return m},"lo<=p0&&p0<=hi":function(t,i,n,r,s,l,u){for(var d=2*t,c=d*n,w=c,m=n,f=i,x=t+i,y=n;r>y;++y,c+=d){var v=s[c+f],M=s[c+x];if(v<=u&&u<=M)if(m===y)m+=1,w+=d;else{for(var p=0;d>p;++p){var S=s[c+p];s[c+p]=s[w],s[w++]=S}var A=l[y];l[y]=l[m],l[m++]=A}}return m},"!(lo>=p0)&&!(p1>=hi)":function(t,i,n,r,s,l,u,d){for(var c=2*t,w=c*n,m=w,f=n,x=i,y=t+i,v=n;r>v;++v,w+=c){var M=s[w+x],p=s[w+y];if(!(M>=u||d>=p))if(f===v)f+=1,m+=c;else{for(var S=0;c>S;++S){var A=s[w+S];s[w+S]=s[m],s[m++]=A}var k=l[v];l[v]=l[f],l[f++]=k}}return f}}},309:function(h){h.exports=function(c,w){w<=4*o?t(0,w-1,c):d(0,w-1,c)};var o=32;function t(c,w,m){for(var f=2*(c+1),x=c+1;x<=w;++x){for(var y=m[f++],v=m[f++],M=x,p=f-2;M-- >c;){var S=m[p-2],A=m[p-1];if(S<y||S===y&&A<v)break;m[p]=S,m[p+1]=A,p-=2}m[p]=y,m[p+1]=v}}function i(c,w,m){w*=2;var f=m[c*=2],x=m[c+1];m[c]=m[w],m[c+1]=m[w+1],m[w]=f,m[w+1]=x}function n(c,w,m){w*=2,m[c*=2]=m[w],m[c+1]=m[w+1]}function r(c,w,m,f){w*=2,m*=2;var x=f[c*=2],y=f[c+1];f[c]=f[w],f[c+1]=f[w+1],f[w]=f[m],f[w+1]=f[m+1],f[m]=x,f[m+1]=y}function s(c,w,m,f,x){w*=2,x[c*=2]=x[w],x[w]=m,x[c+1]=x[w+1],x[w+1]=f}function l(c,w,m){w*=2;var f=m[c*=2],x=m[w];return!(f<x)&&(f!==x||m[c+1]>m[w+1])}function u(c,w,m,f){var x=f[c*=2];return x<w||x===w&&f[c+1]<m}function d(c,w,m){var f=(w-c+1)/6|0,x=c+f,y=w-f,v=c+w>>1,M=v-f,p=v+f,S=x,A=M,k=v,C=p,P=y,R=c+1,O=w-1,X=0;l(S,A,m)&&(X=S,S=A,A=X),l(C,P,m)&&(X=C,C=P,P=X),l(S,k,m)&&(X=S,S=k,k=X),l(A,k,m)&&(X=A,A=k,k=X),l(S,C,m)&&(X=S,S=C,C=X),l(k,C,m)&&(X=k,k=C,C=X),l(A,P,m)&&(X=A,A=P,P=X),l(A,k,m)&&(X=A,A=k,k=X),l(C,P,m)&&(X=C,C=P,P=X);for(var D=m[2*A],V=m[2*A+1],j=m[2*C],B=m[2*C+1],W=2*S,q=2*k,re=2*P,ee=2*x,K=2*v,Y=2*y,$=0;$<2;++$){var ne=m[W+$],ae=m[q+$],se=m[re+$];m[ee+$]=ne,m[K+$]=ae,m[Y+$]=se}n(M,c,m),n(p,w,m);for(var ce=R;ce<=O;++ce)if(u(ce,D,V,m))ce!==R&&i(ce,R,m),++R;else if(!u(ce,j,B,m))for(;;){if(u(O,j,B,m)){u(O,D,V,m)?(r(ce,R,O,m),++R,--O):(i(ce,O,m),--O);break}if(--O<ce)break}s(c,R-1,D,V,m),s(w,O+1,j,B,m),R-2-c<=o?t(c,R-2,m):d(c,R-2,m),w-(O+2)<=o?t(O+2,w,m):d(O+2,w,m),O-R<=o?t(R,O,m):d(R,O,m)}},1390:function(h,o,t){h.exports={init:function(M){var p=n.nextPow2(M);u.length<p&&(i.free(u),u=i.mallocInt32(p)),d.length<p&&(i.free(d),d=i.mallocInt32(p)),c.length<p&&(i.free(c),c=i.mallocInt32(p)),w.length<p&&(i.free(w),w=i.mallocInt32(p)),m.length<p&&(i.free(m),m=i.mallocInt32(p)),f.length<p&&(i.free(f),f=i.mallocInt32(p));var S=8*p;x.length<S&&(i.free(x),x=i.mallocDouble(S))},sweepBipartite:function(M,p,S,A,k,C,P,R,O,X){for(var D=0,V=2*M,j=M-1,B=V-1,W=S;W<A;++W){var q=C[W],re=V*W;x[D++]=k[re+j],x[D++]=-(q+1),x[D++]=k[re+B],x[D++]=q}for(W=P;W<R;++W){q=X[W]+s;var ee=V*W;x[D++]=O[ee+j],x[D++]=-q,x[D++]=O[ee+B],x[D++]=q}var K=D>>>1;r(x,K);var Y=0,$=0;for(W=0;W<K;++W){var ne=0|x[2*W+1];if(ne>=s)y(c,w,$--,ne=ne-s|0);else if(ne>=0)y(u,d,Y--,ne);else if(ne<=-s){ne=-ne-s|0;for(var ae=0;ae<Y;++ae)if((se=p(u[ae],ne))!==void 0)return se;v(c,w,$++,ne)}else{for(ne=-ne-1|0,ae=0;ae<$;++ae){var se;if((se=p(ne,c[ae]))!==void 0)return se}v(u,d,Y++,ne)}}},sweepComplete:function(M,p,S,A,k,C,P,R,O,X){for(var D=0,V=2*M,j=M-1,B=V-1,W=S;W<A;++W){var q=C[W]+1<<1,re=V*W;x[D++]=k[re+j],x[D++]=-q,x[D++]=k[re+B],x[D++]=q}for(W=P;W<R;++W){q=X[W]+1<<1;var ee=V*W;x[D++]=O[ee+j],x[D++]=1|-q,x[D++]=O[ee+B],x[D++]=1|q}var K=D>>>1;r(x,K);var Y=0,$=0,ne=0;for(W=0;W<K;++W){var ae=0|x[2*W+1],se=1&ae;if(W<K-1&&ae>>1==x[2*W+3]>>1&&(se=2,W+=1),ae<0){for(var ce=-(ae>>1)-1,me=0;me<ne;++me)if((ye=p(m[me],ce))!==void 0)return ye;if(se!==0){for(me=0;me<Y;++me)if((ye=p(u[me],ce))!==void 0)return ye}if(se!==1)for(me=0;me<$;++me){var ye;if((ye=p(c[me],ce))!==void 0)return ye}se===0?v(u,d,Y++,ce):se===1?v(c,w,$++,ce):se===2&&v(m,f,ne++,ce)}else ce=(ae>>1)-1,se===0?y(u,d,Y--,ce):se===1?y(c,w,$--,ce):se===2&&y(m,f,ne--,ce)}},scanBipartite:function(M,p,S,A,k,C,P,R,O,X,D,V){var j=0,B=2*M,W=p,q=p+M,re=1,ee=1;A?ee=s:re=s;for(var K=k;K<C;++K){var Y=K+re,$=B*K;x[j++]=P[$+W],x[j++]=-Y,x[j++]=P[$+q],x[j++]=Y}for(K=O;K<X;++K){Y=K+ee;var ne=B*K;x[j++]=D[ne+W],x[j++]=-Y}var ae=j>>>1;r(x,ae);var se=0;for(K=0;K<ae;++K){var ce=0|x[2*K+1];if(ce<0){var me=!1;if((Y=-ce)>=s?(me=!A,Y-=s):(me=!!A,Y-=1),me)v(u,d,se++,Y);else{var ye=V[Y],Te=B*Y,Ce=D[Te+p+1],pe=D[Te+p+1+M];e:for(var fe=0;fe<se;++fe){var Oe=u[fe],Se=B*Oe;if(!(pe<P[Se+p+1]||P[Se+p+1+M]<Ce)){for(var Me=p+2;Me<M;++Me)if(D[Te+Me+M]<P[Se+Me]||P[Se+Me+M]<D[Te+Me])continue e;var ue,le=R[Oe];if((ue=A?S(ye,le):S(le,ye))!==void 0)return ue}}}}else y(u,d,se--,ce-re)}},scanComplete:function(M,p,S,A,k,C,P,R,O,X,D){for(var V=0,j=2*M,B=p,W=p+M,q=A;q<k;++q){var re=q+s,ee=j*q;x[V++]=C[ee+B],x[V++]=-re,x[V++]=C[ee+W],x[V++]=re}for(q=R;q<O;++q){re=q+1;var K=j*q;x[V++]=X[K+B],x[V++]=-re}var Y=V>>>1;r(x,Y);var $=0;for(q=0;q<Y;++q){var ne=0|x[2*q+1];if(ne<0)if((re=-ne)>=s)u[$++]=re-s;else{var ae=D[re-=1],se=j*re,ce=X[se+p+1],me=X[se+p+1+M];e:for(var ye=0;ye<$;++ye){var Te=u[ye],Ce=P[Te];if(Ce===ae)break;var pe=j*Te;if(!(me<C[pe+p+1]||C[pe+p+1+M]<ce)){for(var fe=p+2;fe<M;++fe)if(X[se+fe+M]<C[pe+fe]||C[pe+fe+M]<X[se+fe])continue e;var Oe=S(Ce,ae);if(Oe!==void 0)return Oe}}}else{for(re=ne-s,ye=$-1;ye>=0;--ye)if(u[ye]===re){for(fe=ye+1;fe<$;++fe)u[fe-1]=u[fe];break}--$}}}};var i=t(5306),n=t(2288),r=t(309),s=1<<28,l=1024,u=i.mallocInt32(l),d=i.mallocInt32(l),c=i.mallocInt32(l),w=i.mallocInt32(l),m=i.mallocInt32(l),f=i.mallocInt32(l),x=i.mallocDouble(8192);function y(M,p,S,A){var k=p[A],C=M[S-1];M[k]=C,p[C]=k}function v(M,p,S,A){M[S]=A,p[A]=S}},7761:function(h,o,t){var i=t(9971),n=t(743),r=t(2161),s=t(7098);function l(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,w){return c[0]-w[0]||c[1]-w[1]}function d(c,w,m){return w in c?c[w]:m}h.exports=function(c,w,m){Array.isArray(w)?(m=m||{},w=w||[]):(m=w||{},w=[]);var f=!!d(m,"delaunay",!0),x=!!d(m,"interior",!0),y=!!d(m,"exterior",!0),v=!!d(m,"infinity",!1);if(!x&&!y||c.length===0)return[];var M=i(c,w);if(f||x!==y||v){for(var p=n(c.length,function(k){return k.map(l).sort(u)}(w)),S=0;S<M.length;++S){var A=M[S];p.addTriangle(A[0],A[1],A[2])}return f&&r(c,p),y?x?v?s(p,0,v):p.cells():s(p,1,v):s(p,-1)}return M}},2161:function(h,o,t){var i=t(2227)[4];function n(r,s,l,u,d,c){var w=s.opposite(u,d);if(!(w<0)){if(d<u){var m=u;u=d,d=m,m=c,c=w,w=m}s.isConstraint(u,d)||i(r[u],r[d],r[c],r[w])<0&&l.push(u,d)}}t(5070),h.exports=function(r,s){for(var l=[],u=r.length,d=s.stars,c=0;c<u;++c)for(var w=d[c],m=1;m<w.length;m+=2)if(!((v=w[m])<c||s.isConstraint(c,v))){for(var f=w[m-1],x=-1,y=1;y<w.length;y+=2)if(w[y-1]===v){x=w[y];break}x<0||i(r[c],r[v],r[f],r[x])<0&&l.push(c,v)}for(;l.length>0;){for(var v=l.pop(),M=(f=-1,x=-1,w=d[c=l.pop()],1);M<w.length;M+=2){var p=w[M-1],S=w[M];p===v?x=S:S===v&&(f=p)}f<0||x<0||i(r[c],r[v],r[f],r[x])>=0||(s.flip(c,v),n(r,s,l,f,c,x),n(r,s,l,c,x,f),n(r,s,l,x,v,f),n(r,s,l,v,f,x))}}},7098:function(h,o,t){var i,n=t(5070);function r(l,u,d,c,w,m,f){this.cells=l,this.neighbor=u,this.flags=c,this.constraint=d,this.active=w,this.next=m,this.boundary=f}function s(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}h.exports=function(l,u,d){var c=function(P,R){for(var O=P.cells(),X=O.length,D=0;D<X;++D){var V=(ne=O[D])[0],j=ne[1],B=ne[2];j<B?j<V&&(ne[0]=j,ne[1]=B,ne[2]=V):B<V&&(ne[0]=B,ne[1]=V,ne[2]=j)}O.sort(s);var W=new Array(X);for(D=0;D<W.length;++D)W[D]=0;var q=[],re=[],ee=new Array(3*X),K=new Array(3*X),Y=null;R&&(Y=[]);var $=new r(O,ee,K,W,q,re,Y);for(D=0;D<X;++D)for(var ne=O[D],ae=0;ae<3;++ae){V=ne[ae],j=ne[(ae+1)%3];var se=ee[3*D+ae]=$.locate(j,V,P.opposite(j,V)),ce=K[3*D+ae]=P.isConstraint(V,j);se<0&&(ce?re.push(D):(q.push(D),W[D]=1),R&&Y.push([j,V,-1]))}return $}(l,d);if(u===0)return d?c.cells.concat(c.boundary):c.cells;for(var w=1,m=c.active,f=c.next,x=c.flags,y=c.cells,v=c.constraint,M=c.neighbor;m.length>0||f.length>0;){for(;m.length>0;){var p=m.pop();if(x[p]!==-w){x[p]=w,y[p];for(var S=0;S<3;++S){var A=M[3*p+S];A>=0&&x[A]===0&&(v[3*p+S]?f.push(A):(m.push(A),x[A]=w))}}}var k=f;f=m,m=k,f.length=0,w=-w}var C=function(P,R,O){for(var X=0,D=0;D<P.length;++D)R[D]===O&&(P[X++]=P[D]);return P.length=X,P}(y,x,u);return d?C.concat(c.boundary):C},r.prototype.locate=(i=[0,0,0],function(l,u,d){var c=l,w=u,m=d;return u<d?u<l&&(c=u,w=d,m=l):d<l&&(c=d,w=l,m=u),c<0?-1:(i[0]=c,i[1]=w,i[2]=m,n.eq(this.cells,i,s))})},9971:function(h,o,t){var i=t(5070),n=t(417)[3];function r(f,x,y,v,M){this.a=f,this.b=x,this.idx=y,this.lowerIds=v,this.upperIds=M}function s(f,x,y,v){this.a=f,this.b=x,this.type=y,this.idx=v}function l(f,x){var y=f.a[0]-x.a[0]||f.a[1]-x.a[1]||f.type-x.type;return y||(f.type!==0&&(y=n(f.a,f.b,x.b))?y:f.idx-x.idx)}function u(f,x){return n(f.a,f.b,x)}function d(f,x,y,v,M){for(var p=i.lt(x,v,u),S=i.gt(x,v,u),A=p;A<S;++A){for(var k=x[A],C=k.lowerIds,P=C.length;P>1&&n(y[C[P-2]],y[C[P-1]],v)>0;)f.push([C[P-1],C[P-2],M]),P-=1;C.length=P,C.push(M);var R=k.upperIds;for(P=R.length;P>1&&n(y[R[P-2]],y[R[P-1]],v)<0;)f.push([R[P-2],R[P-1],M]),P-=1;R.length=P,R.push(M)}}function c(f,x){var y;return(y=f.a[0]<x.a[0]?n(f.a,f.b,x.a):n(x.b,x.a,f.a))?y:(y=x.b[0]<f.b[0]?n(f.a,f.b,x.b):n(x.b,x.a,f.b))||f.idx-x.idx}function w(f,x,y){var v=i.le(f,y,c),M=f[v],p=M.upperIds,S=p[p.length-1];M.upperIds=[S],f.splice(v+1,0,new r(y.a,y.b,y.idx,[S],p))}function m(f,x,y){var v=y.a;y.a=y.b,y.b=v;var M=i.eq(f,y,c),p=f[M];f[M-1].upperIds=p.upperIds,f.splice(M,1)}h.exports=function(f,x){for(var y=f.length,v=x.length,M=[],p=0;p<y;++p)M.push(new s(f[p],null,0,p));for(p=0;p<v;++p){var S=x[p],A=f[S[0]],k=f[S[1]];A[0]<k[0]?M.push(new s(A,k,2,p),new s(k,A,1,p)):A[0]>k[0]&&M.push(new s(k,A,2,p),new s(A,k,1,p))}M.sort(l);for(var C=M[0].a[0]-(1+Math.abs(M[0].a[0]))*Math.pow(2,-52),P=[new r([C,1],[C,0],-1,[],[])],R=[],O=(p=0,M.length);p<O;++p){var X=M[p],D=X.type;D===0?d(R,P,f,X.a,X.idx):D===2?w(P,0,X):m(P,0,X)}return R}},743:function(h,o,t){var i=t(5070);function n(l,u){this.stars=l,this.edges=u}h.exports=function(l,u){for(var d=new Array(l),c=0;c<l;++c)d[c]=[];return new n(d,u)};var r=n.prototype;function s(l,u,d){for(var c=1,w=l.length;c<w;c+=2)if(l[c-1]===u&&l[c]===d)return l[c-1]=l[w-2],l[c]=l[w-1],void(l.length=w-2)}r.isConstraint=function(){var l=[0,0];function u(d,c){return d[0]-c[0]||d[1]-c[1]}return function(d,c){return l[0]=Math.min(d,c),l[1]=Math.max(d,c),i.eq(this.edges,l,u)>=0}}(),r.removeTriangle=function(l,u,d){var c=this.stars;s(c[l],u,d),s(c[u],d,l),s(c[d],l,u)},r.addTriangle=function(l,u,d){var c=this.stars;c[l].push(u,d),c[u].push(d,l),c[d].push(l,u)},r.opposite=function(l,u){for(var d=this.stars[u],c=1,w=d.length;c<w;c+=2)if(d[c]===l)return d[c-1];return-1},r.flip=function(l,u){var d=this.opposite(l,u),c=this.opposite(u,l);this.removeTriangle(l,u,d),this.removeTriangle(u,l,c),this.addTriangle(l,c,d),this.addTriangle(u,d,c)},r.edges=function(){for(var l=this.stars,u=[],d=0,c=l.length;d<c;++d)for(var w=l[d],m=0,f=w.length;m<f;m+=2)u.push([w[m],w[m+1]]);return u},r.cells=function(){for(var l=this.stars,u=[],d=0,c=l.length;d<c;++d)for(var w=l[d],m=0,f=w.length;m<f;m+=2){var x=w[m],y=w[m+1];d<Math.min(x,y)&&u.push([d,x,y])}return u}},9887:function(h){h.exports=function(o){for(var t=1,i=1;i<o.length;++i)for(var n=0;n<i;++n)if(o[i]<o[n])t=-t;else if(o[n]===o[i])return 0;return t}},9243:function(h,o,t){var i=t(3094),n=t(6606);function r(u,d){for(var c=0,w=u.length,m=0;m<w;++m)c+=u[m]*d[m];return c}function s(u){var d=u.length;if(d===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),w=i([u.length+1],1);c[d][d]=0;for(var m=0;m<d;++m){for(var f=0;f<=m;++f)c[f][m]=c[m][f]=2*r(u[m],u[f]);w[m]=r(u[m],u[m])}var x=n(c,w),y=0,v=x[d+1];for(m=0;m<v.length;++m)y+=v[m];var M=new Array(d);for(m=0;m<d;++m){v=x[m];var p=0;for(f=0;f<v.length;++f)p+=v[f];M[m]=p/y}return M}function l(u){if(u.length===0)return[];for(var d=u[0].length,c=i([d]),w=s(u),m=0;m<u.length;++m)for(var f=0;f<d;++f)c[f]+=u[m][f]*w[m];return c}l.barycenetric=s,h.exports=l},1778:function(h,o,t){h.exports=function(n){for(var r=i(n),s=0,l=0;l<n.length;++l)for(var u=n[l],d=0;d<r.length;++d)s+=Math.pow(u[d]-r[d],2);return Math.sqrt(s/n.length)};var i=t(9243)},197:function(h,o,t){h.exports=function(S,A,k){var C;if(k){C=A;for(var P=new Array(A.length),R=0;R<A.length;++R){var O=A[R];P[R]=[O[0],O[1],k[R]]}A=P}for(var X=function(D,V,j){var B=x(D,[],f(D));return M(V,B,j),!!B}(S,A,!!k);p(S,A,!!k);)X=!0;if(k&&X)for(C.length=0,k.length=0,R=0;R<A.length;++R)O=A[R],C.push([O[0],O[1]]),k.push(O[2]);return X};var i=t(1731),n=t(2569),r=t(4434),s=t(5125),l=t(8846),u=t(7999),d=t(2826),c=t(8551),w=t(5528);function m(S){var A=u(S);return[c(A,-1/0),c(A,1/0)]}function f(S){for(var A=new Array(S.length),k=0;k<S.length;++k){var C=S[k];A[k]=[c(C[0],-1/0),c(C[1],-1/0),c(C[0],1/0),c(C[1],1/0)]}return A}function x(S,A,k){for(var C=A.length,P=new i(C),R=[],O=0;O<A.length;++O){var X=A[O],D=m(X[0]),V=m(X[1]);R.push([c(D[0],-1/0),c(V[0],-1/0),c(D[1],1/0),c(V[1],1/0)])}n(R,function(re,ee){P.link(re,ee)});var j=!0,B=new Array(C);for(O=0;O<C;++O)(q=P.find(O))!==O&&(j=!1,S[q]=[Math.min(S[O][0],S[q][0]),Math.min(S[O][1],S[q][1])]);if(j)return null;var W=0;for(O=0;O<C;++O){var q;(q=P.find(O))===O?(B[O]=W,S[W++]=S[O]):B[O]=-1}for(S.length=W,O=0;O<C;++O)B[O]<0&&(B[O]=B[P.find(O)]);return B}function y(S,A){return S[0]-A[0]||S[1]-A[1]}function v(S,A){return S[0]-A[0]||S[1]-A[1]||(S[2]<A[2]?-1:S[2]>A[2]?1:0)}function M(S,A,k){if(S.length!==0){if(A)for(var C=0;C<S.length;++C){var P=A[(O=S[C])[0]],R=A[O[1]];O[0]=Math.min(P,R),O[1]=Math.max(P,R)}else for(C=0;C<S.length;++C){var O;P=(O=S[C])[0],R=O[1],O[0]=Math.min(P,R),O[1]=Math.max(P,R)}k?S.sort(v):S.sort(y);var X=1;for(C=1;C<S.length;++C){var D=S[C-1],V=S[C];(V[0]!==D[0]||V[1]!==D[1]||k&&V[2]!==D[2])&&(S[X++]=V)}S.length=X}}function p(S,A,k){var C=function(D,V){for(var j=new Array(V.length),B=0;B<V.length;++B){var W=V[B],q=D[W[0]],re=D[W[1]];j[B]=[c(Math.min(q[0],re[0]),-1/0),c(Math.min(q[1],re[1]),-1/0),c(Math.max(q[0],re[0]),1/0),c(Math.max(q[1],re[1]),1/0)]}return j}(S,A),P=function(D,V,j){var B=[];return n(j,function(W,q){var re=V[W],ee=V[q];if(re[0]!==ee[0]&&re[0]!==ee[1]&&re[1]!==ee[0]&&re[1]!==ee[1]){var K=D[re[0]],Y=D[re[1]],$=D[ee[0]],ne=D[ee[1]];r(K,Y,$,ne)&&B.push([W,q])}}),B}(S,A,C),R=function(D,V,j,B){var W=[];return n(j,B,function(q,re){var ee=V[q];if(ee[0]!==re&&ee[1]!==re){var K=D[re],Y=D[ee[0]],$=D[ee[1]];r(Y,$,K,K)&&W.push([q,re])}}),W}(S,A,C,f(S)),O=function(D,V,j,B,W){var q,re,ee=D.map(function(ue){return[s(ue[0]),s(ue[1])]});for(q=0;q<j.length;++q){var K=j[q];re=K[0];var Y=K[1],$=V[re],ne=V[Y],ae=w(d(D[$[0]]),d(D[$[1]]),d(D[ne[0]]),d(D[ne[1]]));if(ae){var se=D.length;D.push([u(ae[0]),u(ae[1])]),ee.push(ae),B.push([re,se],[Y,se])}}for(B.sort(function(ue,le){if(ue[0]!==le[0])return ue[0]-le[0];var ie=ee[ue[1]],ge=ee[le[1]];return l(ie[0],ge[0])||l(ie[1],ge[1])}),q=B.length-1;q>=0;--q){var ce=V[re=(Se=B[q])[0]],me=ce[0],ye=ce[1],Te=D[me],Ce=D[ye];if((Te[0]-Ce[0]||Te[1]-Ce[1])<0){var pe=me;me=ye,ye=pe}ce[0]=me;var fe,Oe=ce[1]=Se[1];for(W&&(fe=ce[2]);q>0&&B[q-1][0]===re;){var Se,Me=(Se=B[--q])[1];W?V.push([Oe,Me,fe]):V.push([Oe,Me]),Oe=Me}W?V.push([Oe,ye,fe]):V.push([Oe,ye])}return ee}(S,A,P,R,k),X=x(S,O);return M(A,X,k),!!X||P.length>0||R.length>0}},5528:function(h,o,t){h.exports=function(w,m,f,x){var y=l(m,w),v=l(x,f),M=c(y,v);if(s(M)===0)return null;var p=c(v,l(w,f)),S=n(p,M),A=d(y,S);return u(w,A)};var i=t(3962),n=t(9189),r=t(4354),s=t(4951),l=t(6695),u=t(7584),d=t(4469);function c(w,m){return r(i(w[0],m[1]),i(w[1],m[0]))}},5692:function(h){h.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(h,o,t){var i=t(5692),n=t(3578);function r(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function s(u){for(var d,c="#",w=0;w<3;++w)c+=("00"+(d=(d=u[w]).toString(16))).substr(d.length);return c}function l(u){return"rgba("+u.join(",")+")"}h.exports=function(u){var d,c,w,m,f,x,y,v,M,p;if(u||(u={}),v=(u.nshades||72)-1,y=u.format||"hex",(x=u.colormap)||(x="jet"),typeof x=="string"){if(x=x.toLowerCase(),!i[x])throw Error(x+" not a supported colorscale");f=i[x]}else{if(!Array.isArray(x))throw Error("unsupported colormap option",x);f=x.slice()}if(f.length>v+1)throw new Error(x+" map requires nshades to be at least size "+f.length);M=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],d=f.map(function(P){return Math.round(P.index*v)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var S=f.map(function(P,R){var O=f[R].index,X=f[R].rgb.slice();return X.length===4&&X[3]>=0&&X[3]<=1||(X[3]=M[0]+(M[1]-M[0])*O),X}),A=[];for(p=0;p<d.length-1;++p){m=d[p+1]-d[p],c=S[p],w=S[p+1];for(var k=0;k<m;k++){var C=k/m;A.push([Math.round(n(c[0],w[0],C)),Math.round(n(c[1],w[1],C)),Math.round(n(c[2],w[2],C)),n(c[3],w[3],C)])}}return A.push(f[f.length-1].rgb.concat(M[1])),y==="hex"?A=A.map(s):y==="rgbaString"?A=A.map(l):y==="float"&&(A=A.map(r)),A}},9398:function(h,o,t){h.exports=function(d,c,w,m){var f=i(c,w,m);if(f===0){var x=n(i(d,c,w)),y=n(i(d,c,m));if(x===y){if(x===0){var v=u(d,c,w);return v===u(d,c,m)?0:v?1:-1}return 0}return y===0?x>0||u(d,c,m)?-1:1:x===0?y>0||u(d,c,w)?1:-1:n(y-x)}var M=i(d,c,w);return M>0?f>0&&i(d,c,m)>0?1:-1:M<0?f>0||i(d,c,m)>0?1:-1:i(d,c,m)>0||u(d,c,w)?1:-1};var i=t(417),n=t(7538),r=t(87),s=t(2019),l=t(9662);function u(d,c,w){var m=r(d[0],-c[0]),f=r(d[1],-c[1]),x=r(w[0],-c[0]),y=r(w[1],-c[1]),v=l(s(m,x),s(f,y));return v[v.length-1]>=0}},7538:function(h){h.exports=function(o){return o<0?-1:o>0?1:0}},9209:function(h){h.exports=function(i,n){var r=i.length,s=i.length-n.length;if(s)return s;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return i[0]+i[1]-n[0]-n[1]||o(i[0],i[1])-o(n[0],n[1]);case 3:var l=i[0]+i[1],u=n[0]+n[1];if(s=l+i[2]-(u+n[2]))return s;var d=o(i[0],i[1]),c=o(n[0],n[1]);return o(d,i[2])-o(c,n[2])||o(d+i[2],l)-o(c+n[2],u);case 4:var w=i[0],m=i[1],f=i[2],x=i[3],y=n[0],v=n[1],M=n[2],p=n[3];return w+m+f+x-(y+v+M+p)||o(w,m,f,x)-o(y,v,M,p,y)||o(w+m,w+f,w+x,m+f,m+x,f+x)-o(y+v,y+M,y+p,v+M,v+p,M+p)||o(w+m+f,w+m+x,w+f+x,m+f+x)-o(y+v+M,y+v+p,y+M+p,v+M+p);default:for(var S=i.slice().sort(t),A=n.slice().sort(t),k=0;k<r;++k)if(s=S[k]-A[k])return s;return 0}};var o=Math.min;function t(i,n){return i-n}},1284:function(h,o,t){var i=t(9209),n=t(9887);h.exports=function(r,s){return i(r,s)||n(r)-n(s)}},5537:function(h,o,t){var i=t(8950),n=t(8722),r=t(3332);h.exports=function(s){var l=s.length;if(l===0)return[];if(l===1)return[[0]];var u=s[0].length;return u===0?[]:u===1?i(s):u===2?n(s):r(s,u)}},8950:function(h){h.exports=function(o){for(var t=0,i=0,n=1;n<o.length;++n)o[n][0]<o[t][0]&&(t=n),o[n][0]>o[i][0]&&(i=n);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},8722:function(h,o,t){h.exports=function(n){var r=i(n),s=r.length;if(s<=2)return[];for(var l=new Array(s),u=r[s-1],d=0;d<s;++d){var c=r[d];l[d]=[u,c],u=c}return l};var i=t(3266)},3332:function(h,o,t){h.exports=function(r,s){try{return i(r,!0)}catch{var l=n(r);if(l.length<=s)return[];var u=function(c,w){for(var m=c.length,f=new Array(m),x=0;x<w.length;++x)f[x]=c[w[x]];var y=w.length;for(x=0;x<m;++x)w.indexOf(x)<0&&(f[y++]=c[x]);return f}(r,l);return function(c,w){for(var m=c.length,f=w.length,x=0;x<m;++x)for(var y=c[x],v=0;v<y.length;++v){var M=y[v];if(M<f)y[v]=w[M];else{M-=f;for(var p=0;p<f;++p)M>=w[p]&&(M+=1);y[v]=M}}return c}(i(u,!0),l)}};var i=t(2183),n=t(2153)},9680:function(h){h.exports=function(o,t,i,n,r,s){var l=r-1,u=r*r,d=l*l,c=(1+2*r)*d,w=r*d,m=u*(3-2*r),f=u*l;if(o.length){s||(s=new Array(o.length));for(var x=o.length-1;x>=0;--x)s[x]=c*o[x]+w*t[x]+m*i[x]+f*n[x];return s}return c*o+w*t+m*i+f*n},h.exports.derivative=function(o,t,i,n,r,s){var l=6*r*r-6*r,u=3*r*r-4*r+1,d=-6*r*r+6*r,c=3*r*r-2*r;if(o.length){s||(s=new Array(o.length));for(var w=o.length-1;w>=0;--w)s[w]=l*o[w]+u*t[w]+d*i[w]+c*n[w];return s}return l*o+u*t+d*i[w]+c*n}},4419:function(h,o,t){var i=t(2183),n=t(1215);function r(l,u){this.point=l,this.index=u}function s(l,u){for(var d=l.point,c=u.point,w=d.length,m=0;m<w;++m){var f=c[m]-d[m];if(f)return f}return 0}h.exports=function(l,u){var d=l.length;if(d===0)return[];var c=l[0].length;if(c<1)return[];if(c===1)return function(O,X,D){if(O===1)return D?[[-1,0]]:[];var V=X.map(function(re,ee){return[re[0],ee]});V.sort(function(re,ee){return re[0]-ee[0]});for(var j=new Array(O-1),B=1;B<O;++B){var W=V[B-1],q=V[B];j[B-1]=[W[1],q[1]]}return D&&j.push([-1,j[0][1]],[j[O-1][1],-1]),j}(d,l,u);for(var w=new Array(d),m=1,f=0;f<d;++f){for(var x=l[f],y=new Array(c+1),v=0,M=0;M<c;++M){var p=x[M];y[M]=p,v+=p*p}y[c]=v,w[f]=new r(y,f),m=Math.max(v,m)}n(w,s),d=w.length;var S=new Array(d+c+1),A=new Array(d+c+1),k=(c+1)*(c+1)*m,C=new Array(c+1);for(f=0;f<=c;++f)C[f]=0;for(C[c]=k,S[0]=C.slice(),A[0]=-1,f=0;f<=c;++f)(y=C.slice())[f]=1,S[f+1]=y,A[f+1]=-1;for(f=0;f<d;++f){var P=w[f];S[f+c+1]=P.point,A[f+c+1]=P.index}var R=i(S,!1);if(R=u?R.filter(function(O){for(var X=0,D=0;D<=c;++D){var V=A[O[D]];if(V<0&&++X>=2)return!1;O[D]=V}return!0}):R.filter(function(O){for(var X=0;X<=c;++X){var D=A[O[X]];if(D<0)return!1;O[X]=D}return!0}),1&c)for(f=0;f<R.length;++f)y=(P=R[f])[0],P[0]=P[1],P[1]=y;return R}},8362:function(h){var o=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,o=!0,i[1]===1072693248?(h.exports=function(r){return t[0]=r,[i[0],i[1]]},h.exports.pack=function(r,s){return i[0]=r,i[1]=s,t[0]},h.exports.lo=function(r){return t[0]=r,i[0]},h.exports.hi=function(r){return t[0]=r,i[1]}):i[0]===1072693248?(h.exports=function(r){return t[0]=r,[i[1],i[0]]},h.exports.pack=function(r,s){return i[1]=r,i[0]=s,t[0]},h.exports.lo=function(r){return t[0]=r,i[1]},h.exports.hi=function(r){return t[0]=r,i[0]}):o=!1}if(!o){var n=new Buffer(8);h.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},h.exports.pack=function(r,s){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(s,4,!0),n.readDoubleLE(0,!0)},h.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},h.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}h.exports.sign=function(r){return h.exports.hi(r)>>>31},h.exports.exponent=function(r){return(h.exports.hi(r)<<1>>>21)-1023},h.exports.fraction=function(r){var s=h.exports.lo(r),l=h.exports.hi(r),u=1048575&l;return 2146435072&l&&(u+=1048576),[s,u]},h.exports.denormalized=function(r){return!(2146435072&h.exports.hi(r))}},3094:function(h){function o(t,i,n){var r=0|t[n];if(r<=0)return[];var s,l=new Array(r);if(n===t.length-1)for(s=0;s<r;++s)l[s]=i;else for(s=0;s<r;++s)l[s]=o(t,i,n+1);return l}h.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(n,r){var s,l;for(s=new Array(n),l=0;l<n;++l)s[l]=r;return s}(0|t,i);break;case"object":if(typeof t.length=="number")return o(t,i,0)}return[]}},8348:function(h,o,t){h.exports=function(n,r){var s=n.length;if(typeof r!="number"){r=0;for(var l=0;l<s;++l){var u=n[l];r=Math.max(r,u[0],u[1])}r=1+(0|r)}r|=0;var d=new Array(r);for(l=0;l<r;++l)d[l]=[];for(l=0;l<s;++l)d[(u=n[l])[0]].push(u[1]),d[u[1]].push(u[0]);for(var c=0;c<r;++c)i(d[c],function(w,m){return w-m});return d};var i=t(1215)},5795:function(h){h.exports=function(o,t,i){var n=t||0,r=i||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[n*o[12]+o[8],n*o[13]+o[9],n*o[14]+o[10],n*o[15]+o[11]],[r*o[12]-o[8],r*o[13]-o[9],r*o[14]-o[10],r*o[15]-o[11]]]}},8444:function(h,o,t){h.exports=function(d,c,w){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return typeof d=="number"?new s(m=u(d),m,0):new s(d,u(d.length),0);case 2:var m;if(typeof c=="number")return new s(d,m=u(d.length),+c);w=0;case 3:if(d.length!==c.length)throw new Error("state and velocity lengths must match");return new s(d,c,w)}};var i=t(9680),n=t(5070);function r(d,c,w){return Math.min(c,Math.max(d,w))}function s(d,c,w){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var m=0;m<this.dimension;++m)this.bounds[0][m]=-1/0,this.bounds[1][m]=1/0;this._state=d.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[w],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var l=s.prototype;function u(d){for(var c=new Array(d),w=0;w<d;++w)c[w]=0;return c}l.flush=function(d){var c=n.gt(this._time,d)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},l.curve=function(d){var c=this._time,w=c.length,m=n.le(c,d),f=this._scratch[0],x=this._state,y=this._velocity,v=this.dimension,M=this.bounds;if(m<0)for(var p=v-1,S=0;S<v;++S,--p)f[S]=x[p];else if(m>=w-1){p=x.length-1;var A=d-c[w-1];for(S=0;S<v;++S,--p)f[S]=x[p]+A*y[p]}else{p=v*(m+1)-1;var k=c[m],C=c[m+1]-k||1,P=this._scratch[1],R=this._scratch[2],O=this._scratch[3],X=this._scratch[4],D=!0;for(S=0;S<v;++S,--p)P[S]=x[p],O[S]=y[p]*C,R[S]=x[p+v],X[S]=y[p+v]*C,D=D&&P[S]===R[S]&&O[S]===X[S]&&O[S]===0;if(D)for(S=0;S<v;++S)f[S]=P[S];else i(P,O,R,X,(d-k)/C,f)}var V=M[0],j=M[1];for(S=0;S<v;++S)f[S]=r(V[S],j[S],f[S]);return f},l.dcurve=function(d){var c=this._time,w=c.length,m=n.le(c,d),f=this._scratch[0],x=this._state,y=this._velocity,v=this.dimension;if(m>=w-1)for(var M=x.length-1,p=(c[w-1],0);p<v;++p,--M)f[p]=y[M];else{M=v*(m+1)-1;var S=c[m],A=c[m+1]-S||1,k=this._scratch[1],C=this._scratch[2],P=this._scratch[3],R=this._scratch[4],O=!0;for(p=0;p<v;++p,--M)k[p]=x[M],P[p]=y[M]*A,C[p]=x[M+v],R[p]=y[M+v]*A,O=O&&k[p]===C[p]&&P[p]===R[p]&&P[p]===0;if(O)for(p=0;p<v;++p)f[p]=0;else for(i.derivative(k,P,C,R,(d-S)/A,f),p=0;p<v;++p)f[p]/=A}return f},l.lastT=function(){var d=this._time;return d[d.length-1]},l.stable=function(){for(var d=this._velocity,c=d.length,w=this.dimension-1;w>=0;--w)if(d[--c])return!1;return!0},l.jump=function(d){var c=this.lastT(),w=this.dimension;if(!(d<c||arguments.length!==w+1)){var m=this._state,f=this._velocity,x=m.length-this.dimension,y=this.bounds,v=y[0],M=y[1];this._time.push(c,d);for(var p=0;p<2;++p)for(var S=0;S<w;++S)m.push(m[x++]),f.push(0);for(this._time.push(d),S=w;S>0;--S)m.push(r(v[S-1],M[S-1],arguments[S])),f.push(0)}},l.push=function(d){var c=this.lastT(),w=this.dimension;if(!(d<c||arguments.length!==w+1)){var m=this._state,f=this._velocity,x=m.length-this.dimension,y=d-c,v=this.bounds,M=v[0],p=v[1],S=y>1e-6?1/y:0;this._time.push(d);for(var A=w;A>0;--A){var k=r(M[A-1],p[A-1],arguments[A]);m.push(k),f.push((k-m[x++])*S)}}},l.set=function(d){var c=this.dimension;if(!(d<this.lastT()||arguments.length!==c+1)){var w=this._state,m=this._velocity,f=this.bounds,x=f[0],y=f[1];this._time.push(d);for(var v=c;v>0;--v)w.push(r(x[v-1],y[v-1],arguments[v])),m.push(0)}},l.move=function(d){var c=this.lastT(),w=this.dimension;if(!(d<=c||arguments.length!==w+1)){var m=this._state,f=this._velocity,x=m.length-this.dimension,y=this.bounds,v=y[0],M=y[1],p=d-c,S=p>1e-6?1/p:0;this._time.push(d);for(var A=w;A>0;--A){var k=arguments[A];m.push(r(v[A-1],M[A-1],m[x++]+k)),f.push(k*S)}}},l.idle=function(d){var c=this.lastT();if(!(d<c)){var w=this.dimension,m=this._state,f=this._velocity,x=m.length-w,y=this.bounds,v=y[0],M=y[1],p=d-c;this._time.push(d);for(var S=w-1;S>=0;--S)m.push(r(v[S],M[S],m[x]+p*f[x])),f.push(0),x+=1}}},7080:function(h){function o(x,y,v,M,p,S){this._color=x,this.key=y,this.value=v,this.left=M,this.right=p,this._count=S}function t(x){return new o(x._color,x.key,x.value,x.left,x.right,x._count)}function i(x,y){return new o(x,y.key,y.value,y.left,y.right,y._count)}function n(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function r(x,y){this._compare=x,this.root=y}h.exports=function(x){return new r(x||f,null)};var s=r.prototype;function l(x,y){var v;return y.left&&(v=l(x,y.left))?v:(v=x(y.key,y.value))||(y.right?l(x,y.right):void 0)}function u(x,y,v,M){if(y(x,M.key)<=0){var p;if(M.left&&(p=u(x,y,v,M.left))||(p=v(M.key,M.value)))return p}if(M.right)return u(x,y,v,M.right)}function d(x,y,v,M,p){var S,A=v(x,p.key),k=v(y,p.key);if(A<=0&&(p.left&&(S=d(x,y,v,M,p.left))||k>0&&(S=M(p.key,p.value))))return S;if(k>0&&p.right)return d(x,y,v,M,p.right)}function c(x,y){this.tree=x,this._stack=y}Object.defineProperty(s,"keys",{get:function(){var x=[];return this.forEach(function(y,v){x.push(y)}),x}}),Object.defineProperty(s,"values",{get:function(){var x=[];return this.forEach(function(y,v){x.push(v)}),x}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(x,y){for(var v=this._compare,M=this.root,p=[],S=[];M;){var A=v(x,M.key);p.push(M),S.push(A),M=A<=0?M.left:M.right}p.push(new o(0,x,y,null,null,1));for(var k=p.length-2;k>=0;--k)M=p[k],S[k]<=0?p[k]=new o(M._color,M.key,M.value,p[k+1],M.right,M._count+1):p[k]=new o(M._color,M.key,M.value,M.left,p[k+1],M._count+1);for(k=p.length-1;k>1;--k){var C=p[k-1];if(M=p[k],C._color===1||M._color===1)break;var P=p[k-2];if(P.left===C)if(C.left===M){if(!(R=P.right)||R._color!==0){P._color=0,P.left=C.right,C._color=1,C.right=P,p[k-2]=C,p[k-1]=M,n(P),n(C),k>=3&&((O=p[k-3]).left===P?O.left=C:O.right=C);break}C._color=1,P.right=i(1,R),P._color=0,k-=1}else{if(!(R=P.right)||R._color!==0){C.right=M.left,P._color=0,P.left=M.right,M._color=1,M.left=C,M.right=P,p[k-2]=M,p[k-1]=C,n(P),n(C),n(M),k>=3&&((O=p[k-3]).left===P?O.left=M:O.right=M);break}C._color=1,P.right=i(1,R),P._color=0,k-=1}else if(C.right===M){if(!(R=P.left)||R._color!==0){P._color=0,P.right=C.left,C._color=1,C.left=P,p[k-2]=C,p[k-1]=M,n(P),n(C),k>=3&&((O=p[k-3]).right===P?O.right=C:O.left=C);break}C._color=1,P.left=i(1,R),P._color=0,k-=1}else{var R;if(!(R=P.left)||R._color!==0){var O;C.left=M.right,P._color=0,P.right=M.left,M._color=1,M.right=C,M.left=P,p[k-2]=M,p[k-1]=C,n(P),n(C),n(M),k>=3&&((O=p[k-3]).right===P?O.right=M:O.left=M);break}C._color=1,P.left=i(1,R),P._color=0,k-=1}}return p[0]._color=1,new r(v,p[0])},s.forEach=function(x,y,v){if(this.root)switch(arguments.length){case 1:return l(x,this.root);case 2:return u(y,this._compare,x,this.root);case 3:return this._compare(y,v)>=0?void 0:d(y,v,this._compare,x,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var x=[],y=this.root;y;)x.push(y),y=y.left;return new c(this,x)}}),Object.defineProperty(s,"end",{get:function(){for(var x=[],y=this.root;y;)x.push(y),y=y.right;return new c(this,x)}}),s.at=function(x){if(x<0)return new c(this,[]);for(var y=this.root,v=[];;){if(v.push(y),y.left){if(x<y.left._count){y=y.left;continue}x-=y.left._count}if(!x)return new c(this,v);if(x-=1,!y.right||x>=y.right._count)break;y=y.right}return new c(this,[])},s.ge=function(x){for(var y=this._compare,v=this.root,M=[],p=0;v;){var S=y(x,v.key);M.push(v),S<=0&&(p=M.length),v=S<=0?v.left:v.right}return M.length=p,new c(this,M)},s.gt=function(x){for(var y=this._compare,v=this.root,M=[],p=0;v;){var S=y(x,v.key);M.push(v),S<0&&(p=M.length),v=S<0?v.left:v.right}return M.length=p,new c(this,M)},s.lt=function(x){for(var y=this._compare,v=this.root,M=[],p=0;v;){var S=y(x,v.key);M.push(v),S>0&&(p=M.length),v=S<=0?v.left:v.right}return M.length=p,new c(this,M)},s.le=function(x){for(var y=this._compare,v=this.root,M=[],p=0;v;){var S=y(x,v.key);M.push(v),S>=0&&(p=M.length),v=S<0?v.left:v.right}return M.length=p,new c(this,M)},s.find=function(x){for(var y=this._compare,v=this.root,M=[];v;){var p=y(x,v.key);if(M.push(v),p===0)return new c(this,M);v=p<=0?v.left:v.right}return new c(this,[])},s.remove=function(x){var y=this.find(x);return y?y.remove():this},s.get=function(x){for(var y=this._compare,v=this.root;v;){var M=y(x,v.key);if(M===0)return v.value;v=M<=0?v.left:v.right}};var w=c.prototype;function m(x,y){x.key=y.key,x.value=y.value,x.left=y.left,x.right=y.right,x._color=y._color,x._count=y._count}function f(x,y){return x<y?-1:x>y?1:0}Object.defineProperty(w,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(w,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),w.clone=function(){return new c(this.tree,this._stack.slice())},w.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var y=new Array(x.length),v=x[x.length-1];y[y.length-1]=new o(v._color,v.key,v.value,v.left,v.right,v._count);for(var M=x.length-2;M>=0;--M)(v=x[M]).left===x[M+1]?y[M]=new o(v._color,v.key,v.value,y[M+1],v.right,v._count):y[M]=new o(v._color,v.key,v.value,v.left,y[M+1],v._count);if((v=y[y.length-1]).left&&v.right){var p=y.length;for(v=v.left;v.right;)y.push(v),v=v.right;var S=y[p-1];for(y.push(new o(v._color,S.key,S.value,v.left,v.right,v._count)),y[p-1].key=v.key,y[p-1].value=v.value,M=y.length-2;M>=p;--M)v=y[M],y[M]=new o(v._color,v.key,v.value,v.left,y[M+1],v._count);y[p-1].left=y[p]}if((v=y[y.length-1])._color===0){var A=y[y.length-2];for(A.left===v?A.left=null:A.right===v&&(A.right=null),y.pop(),M=0;M<y.length;++M)y[M]._count--;return new r(this.tree._compare,y[0])}if(v.left||v.right){for(v.left?m(v,v.left):v.right&&m(v,v.right),v._color=1,M=0;M<y.length-1;++M)y[M]._count--;return new r(this.tree._compare,y[0])}if(y.length===1)return new r(this.tree._compare,null);for(M=0;M<y.length;++M)y[M]._count--;var k=y[y.length-2];return function(C){for(var P,R,O,X,D=C.length-1;D>=0;--D){if(P=C[D],D===0)return void(P._color=1);if((R=C[D-1]).left===P){if((O=R.right).right&&O.right._color===0)return X=(O=R.right=t(O)).right=t(O.right),R.right=O.left,O.left=R,O.right=X,O._color=R._color,P._color=1,R._color=1,X._color=1,n(R),n(O),D>1&&((V=C[D-2]).left===R?V.left=O:V.right=O),void(C[D-1]=O);if(O.left&&O.left._color===0)return X=(O=R.right=t(O)).left=t(O.left),R.right=X.left,O.left=X.right,X.left=R,X.right=O,X._color=R._color,R._color=1,O._color=1,P._color=1,n(R),n(O),n(X),D>1&&((V=C[D-2]).left===R?V.left=X:V.right=X),void(C[D-1]=X);if(O._color===1){if(R._color===0)return R._color=1,void(R.right=i(0,O));R.right=i(0,O);continue}O=t(O),R.right=O.left,O.left=R,O._color=R._color,R._color=0,n(R),n(O),D>1&&((V=C[D-2]).left===R?V.left=O:V.right=O),C[D-1]=O,C[D]=R,D+1<C.length?C[D+1]=P:C.push(P),D+=2}else{if((O=R.left).left&&O.left._color===0)return X=(O=R.left=t(O)).left=t(O.left),R.left=O.right,O.right=R,O.left=X,O._color=R._color,P._color=1,R._color=1,X._color=1,n(R),n(O),D>1&&((V=C[D-2]).right===R?V.right=O:V.left=O),void(C[D-1]=O);if(O.right&&O.right._color===0)return X=(O=R.left=t(O)).right=t(O.right),R.left=X.right,O.right=X.left,X.right=R,X.left=O,X._color=R._color,R._color=1,O._color=1,P._color=1,n(R),n(O),n(X),D>1&&((V=C[D-2]).right===R?V.right=X:V.left=X),void(C[D-1]=X);if(O._color===1){if(R._color===0)return R._color=1,void(R.left=i(0,O));R.left=i(0,O);continue}var V;O=t(O),R.left=O.right,O.right=R,O._color=R._color,R._color=0,n(R),n(O),D>1&&((V=C[D-2]).right===R?V.right=O:V.left=O),C[D-1]=O,C[D]=R,D+1<C.length?C[D+1]=P:C.push(P),D+=2}}}(y),k.left===v?k.left=null:k.right=null,new r(this.tree._compare,y[0])},Object.defineProperty(w,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(w,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(w,"index",{get:function(){var x=0,y=this._stack;if(y.length===0){var v=this.tree.root;return v?v._count:0}y[y.length-1].left&&(x=y[y.length-1].left._count);for(var M=y.length-2;M>=0;--M)y[M+1]===y[M].right&&(++x,y[M].left&&(x+=y[M].left._count));return x},enumerable:!0}),w.next=function(){var x=this._stack;if(x.length!==0){var y=x[x.length-1];if(y.right)for(y=y.right;y;)x.push(y),y=y.left;else for(x.pop();x.length>0&&x[x.length-1].right===y;)y=x[x.length-1],x.pop()}},Object.defineProperty(w,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var y=x.length-1;y>0;--y)if(x[y-1].left===x[y])return!0;return!1}}),w.update=function(x){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var v=new Array(y.length),M=y[y.length-1];v[v.length-1]=new o(M._color,M.key,x,M.left,M.right,M._count);for(var p=y.length-2;p>=0;--p)(M=y[p]).left===y[p+1]?v[p]=new o(M._color,M.key,M.value,v[p+1],M.right,M._count):v[p]=new o(M._color,M.key,M.value,M.left,v[p+1],M._count);return new r(this.tree._compare,v[0])},w.prev=function(){var x=this._stack;if(x.length!==0){var y=x[x.length-1];if(y.left)for(y=y.left;y;)x.push(y),y=y.right;else for(x.pop();x.length>0&&x[x.length-1].left===y;)y=x[x.length-1],x.pop()}},Object.defineProperty(w,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var y=x.length-1;y>0;--y)if(x[y-1].right===x[y])return!0;return!1}})},7453:function(h,o,t){h.exports=function(A,k){var C=new c(A);return C.update(k),C};var i=t(9557),n=t(1681),r=t(1011),s=t(2864),l=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function d(A,k){return A[0]=k[0],A[1]=k[1],A[2]=k[2],A}function c(A){this.gl=A,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(A)}var w=c.prototype;function m(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}w.update=function(A){function k(re,ee,K){if(K in A){var Y,$=A[K],ne=this[K];(re?Array.isArray($)&&Array.isArray($[0]):Array.isArray($))?this[K]=Y=[ee($[0]),ee($[1]),ee($[2])]:this[K]=Y=[ee($),ee($),ee($)];for(var ae=0;ae<3;++ae)if(Y[ae]!==ne[ae])return!0}return!1}A=A||{};var C,P=k.bind(this,!1,Number),R=k.bind(this,!1,Boolean),O=k.bind(this,!1,String),X=k.bind(this,!0,function(re){if(Array.isArray(re)){if(re.length===3)return[+re[0],+re[1],+re[2],1];if(re.length===4)return[+re[0],+re[1],+re[2],+re[3]]}return[0,0,0,1]}),D=!1,V=!1;if("bounds"in A)for(var j=A.bounds,B=0;B<2;++B)for(var W=0;W<3;++W)j[B][W]!==this.bounds[B][W]&&(V=!0),this.bounds[B][W]=j[B][W];if("ticks"in A)for(C=A.ticks,D=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else P("tickSpacing")&&(this.autoTicks=!0,V=!0);if(this._firstInit&&("ticks"in A||"tickSpacing"in A||(this.autoTicks=!0),V=!0,D=!0,this._firstInit=!1),V&&this.autoTicks&&(C=l.create(this.bounds,this.tickSpacing),D=!0),D){for(B=0;B<3;++B)C[B].sort(function(re,ee){return re.x-ee.x});l.equal(C,this.ticks)?D=!1:this.ticks=C}R("tickEnable"),O("tickFont")&&(D=!0),P("tickSize"),P("tickAngle"),P("tickPad"),X("tickColor");var q=O("labels");O("labelFont")&&(q=!0),R("labelEnable"),P("labelSize"),P("labelPad"),X("labelColor"),R("lineEnable"),R("lineMirror"),P("lineWidth"),X("lineColor"),R("lineTickEnable"),R("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),X("lineTickColor"),R("gridEnable"),P("gridWidth"),X("gridColor"),R("zeroEnable"),X("zeroLineColor"),P("zeroLineWidth"),R("backgroundEnable"),X("backgroundColor"),this._text?this._text&&(q||D)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&D&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var f=[new m,new m,new m];function x(A,k,C,P,R){for(var O=A.primalOffset,X=A.primalMinor,D=A.mirrorOffset,V=A.mirrorMinor,j=P[k],B=0;B<3;++B)if(k!==B){var W=O,q=D,re=X,ee=V;j&1<<B&&(W=D,q=O,re=V,ee=X),W[B]=C[0][B],q[B]=C[1][B],R[B]>0?(re[B]=-1,ee[B]=0):(re[B]=0,ee[B]=1)}}var y=[0,0,0],v={model:u,view:u,projection:u,_ortho:!1};w.isOpaque=function(){return!0},w.isTransparent=function(){return!1},w.drawTransparent=function(A){};var M=[0,0,0],p=[0,0,0],S=[0,0,0];w.draw=function(A){A=A||v;for(var k=this.gl,C=A.model||u,P=A.view||u,R=A.projection||u,O=this.bounds,X=A._ortho||!1,D=s(C,P,R,O,X),V=D.cubeEdges,j=D.axis,B=P[12],W=P[13],q=P[14],re=P[15],ee=(X?2:1)*this.pixelRatio*(R[3]*B+R[7]*W+R[11]*q+R[15]*re)/k.drawingBufferHeight,K=0;K<3;++K)this.lastCubeProps.cubeEdges[K]=V[K],this.lastCubeProps.axis[K]=j[K];var Y=f;for(K=0;K<3;++K)x(f[K],K,this.bounds,V,j);k=this.gl;var $,ne,ae,se=y;for(K=0;K<3;++K)this.backgroundEnable[K]?se[K]=j[K]:se[K]=0;for(this._background.draw(C,P,R,O,se,this.backgroundColor),this._lines.bind(C,P,R,this),K=0;K<3;++K){var ce=[0,0,0];j[K]>0?ce[K]=O[1][K]:ce[K]=O[0][K];for(var me=0;me<2;++me){var ye=(K+1+me)%3,Te=(K+1+(1^me))%3;this.gridEnable[ye]&&this._lines.drawGrid(ye,Te,this.bounds,ce,this.gridColor[ye],this.gridWidth[ye]*this.pixelRatio)}for(me=0;me<2;++me)ye=(K+1+me)%3,Te=(K+1+(1^me))%3,this.zeroEnable[Te]&&Math.min(O[0][Te],O[1][Te])<=0&&Math.max(O[0][Te],O[1][Te])>=0&&this._lines.drawZero(ye,Te,this.bounds,ce,this.zeroLineColor[Te],this.zeroLineWidth[Te]*this.pixelRatio)}for(K=0;K<3;++K){this.lineEnable[K]&&this._lines.drawAxisLine(K,this.bounds,Y[K].primalOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio),this.lineMirror[K]&&this._lines.drawAxisLine(K,this.bounds,Y[K].mirrorOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio);var Ce=d(M,Y[K].primalMinor),pe=d(p,Y[K].mirrorMinor),fe=this.lineTickLength;for(me=0;me<3;++me){var Oe=ee/C[5*me];Ce[me]*=fe[me]*Oe,pe[me]*=fe[me]*Oe}this.lineTickEnable[K]&&this._lines.drawAxisTicks(K,Y[K].primalOffset,Ce,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio),this.lineTickMirror[K]&&this._lines.drawAxisTicks(K,Y[K].mirrorOffset,pe,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio)}function Se(Ae){(ae=[0,0,0])[Ae]=1}function Me(Ae,we,Ne){var He=(Ae+1)%3,de=(Ae+2)%3,Le=we[He],Ee=we[de],Re=Ne[He],je=Ne[de];Le>0&&je>0||Le>0&&je<0||Le<0&&je>0||Le<0&&je<0?Se(He):(Ee>0&&Re>0||Ee>0&&Re<0||Ee<0&&Re>0||Ee<0&&Re<0)&&Se(de)}for(this._lines.unbind(),this._text.bind(C,P,R,this.pixelRatio),K=0;K<3;++K){var ue=Y[K].primalMinor,le=Y[K].mirrorMinor,ie=d(S,Y[K].primalOffset);for(me=0;me<3;++me)this.lineTickEnable[K]&&(ie[me]+=ee*ue[me]*Math.max(this.lineTickLength[me],0)/C[5*me]);var ge=[0,0,0];if(ge[K]=1,this.tickEnable[K]){for(this.tickAngle[K]===-3600?(this.tickAngle[K]=0,this.tickAlign[K]="auto"):this.tickAlign[K]=-1,ne=1,($=[this.tickAlign[K],.5,ne])[0]==="auto"?$[0]=0:$[0]=parseInt(""+$[0]),ae=[0,0,0],Me(K,ue,le),me=0;me<3;++me)ie[me]+=ee*ue[me]*this.tickPad[me]/C[5*me];this._text.drawTicks(K,this.tickSize[K],this.tickAngle[K],ie,this.tickColor[K],ge,ae,$)}if(this.labelEnable[K]){for(ne=0,ae=[0,0,0],this.labels[K].length>4&&(Se(K),ne=1),($=[this.labelAlign[K],.5,ne])[0]==="auto"?$[0]=0:$[0]=parseInt(""+$[0]),me=0;me<3;++me)ie[me]+=ee*ue[me]*this.labelPad[me]/C[5*me];ie[K]+=.5*(O[0][K]+O[1][K]),this._text.drawLabel(K,this.labelSize[K],this.labelAngle[K],ie,this.labelColor[K],[0,0,0],ae,$)}}this._text.unbind()},w.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(h,o,t){h.exports=function(u){for(var d=[],c=[],w=0,m=0;m<3;++m)for(var f=(m+1)%3,x=(m+2)%3,y=[0,0,0],v=[0,0,0],M=-1;M<=1;M+=2){c.push(w,w+2,w+1,w+1,w+2,w+3),y[m]=M,v[m]=M;for(var p=-1;p<=1;p+=2){y[f]=p;for(var S=-1;S<=1;S+=2)y[x]=S,d.push(y[0],y[1],y[2],v[0],v[1],v[2]),w+=1}var A=f;f=x,x=A}var k=i(u,new Float32Array(d)),C=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),P=n(u,[{buffer:k,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:u.FLOAT,size:3,offset:12,stride:24}],C),R=r(u);return R.attributes.position.location=0,R.attributes.normal.location=1,new s(u,k,P,R)};var i=t(5827),n=t(2944),r=t(1943).bg;function s(u,d,c,w){this.gl=u,this.buffer=d,this.vao=c,this.shader=w}var l=s.prototype;l.draw=function(u,d,c,w,m,f){for(var x=!1,y=0;y<3;++y)x=x||m[y];if(x){var v=this.gl;v.enable(v.POLYGON_OFFSET_FILL),v.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:d,projection:c,bounds:w,enable:m,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),v.disable(v.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(h,o,t){h.exports=function(p,S,A,k,C){n(l,S,p),n(l,A,l);for(var P=0,R=0;R<2;++R){c[2]=k[R][2];for(var O=0;O<2;++O){c[1]=k[O][1];for(var X=0;X<2;++X)c[0]=k[X][0],m(u[P],c,l),P+=1}}var D=-1;for(R=0;R<8;++R){for(var V=u[R][3],j=0;j<3;++j)d[R][j]=u[R][j]/V;C&&(d[R][2]*=-1),V<0&&(D<0||d[R][2]<d[D][2])&&(D=R)}if(D<0){D=0;for(var B=0;B<3;++B){for(var W=(B+2)%3,q=(B+1)%3,re=-1,ee=-1,K=0;K<2;++K){var Y=(ne=K<<B)+(K<<W)+(1-K<<q),$=ne+(1-K<<W)+(K<<q);s(d[ne],d[Y],d[$],w)<0||(K?re=1:ee=1)}if(re<0||ee<0)ee>re&&(D|=1<<B);else{for(K=0;K<2;++K){Y=(ne=K<<B)+(K<<W)+(1-K<<q),$=ne+(1-K<<W)+(K<<q);var ne,ae=x([u[ne],u[Y],u[$],u[ne+(1<<W)+(1<<q)]]);K?re=ae:ee=ae}ee>re&&(D|=1<<B)}}}var se=7^D,ce=-1;for(R=0;R<8;++R)R!==D&&R!==se&&(ce<0||d[ce][1]>d[R][1])&&(ce=R);var me=-1;for(R=0;R<3;++R)(Te=ce^1<<R)!==D&&Te!==se&&(me<0&&(me=Te),(q=d[Te])[0]<d[me][0]&&(me=Te));var ye=-1;for(R=0;R<3;++R){var Te;(Te=ce^1<<R)!==D&&Te!==se&&Te!==me&&(ye<0&&(ye=Te),(q=d[Te])[0]>d[ye][0]&&(ye=Te))}var Ce=y;Ce[0]=Ce[1]=Ce[2]=0,Ce[i.log2(me^ce)]=ce&me,Ce[i.log2(ce^ye)]=ce&ye;var pe=7^ye;pe===D||pe===se?(pe=7^me,Ce[i.log2(ye^pe)]=pe&ye):Ce[i.log2(me^pe)]=pe&me;var fe=v,Oe=D;for(B=0;B<3;++B)fe[B]=Oe&1<<B?-1:1;return M};var i=t(2288),n=t(104),r=t(4670),s=t(417),l=new Array(16),u=new Array(8),d=new Array(8),c=new Array(3),w=[0,0,0];function m(p,S,A){for(var k=0;k<4;++k){p[k]=A[12+k];for(var C=0;C<3;++C)p[k]+=S[C]*A[4*C+k]}}(function(){for(var p=0;p<8;++p)u[p]=[1,1,1,1],d[p]=[1,1,1]})();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function x(p){for(var S=0;S<f.length;++S)if((p=r.positive(p,f[S])).length<3)return 0;var A=p[0],k=A[0]/A[3],C=A[1]/A[3],P=0;for(S=1;S+1<p.length;++S){var R=p[S],O=p[S+1],X=R[0]/R[3]-k,D=R[1]/R[3]-C,V=O[0]/O[3]-k,j=O[1]/O[3]-C;P+=Math.abs(X*j-D*V)}return P}var y=[1,1,1],v=[0,0,0],M={cubeEdges:y,axis:v}},1681:function(h,o,t){h.exports=function(y,v,M){var p=[],S=[0,0,0],A=[0,0,0],k=[0,0,0],C=[0,0,0];p.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var R=p.length/3|0,O=0;O<M[P].length;++O){var X=+M[P][O].x;p.push(X,0,1,X,1,1,X,0,-1,X,0,-1,X,1,1,X,1,-1)}var D=p.length/3|0;S[P]=R,A[P]=D-R,R=p.length/3|0;for(var V=0;V<M[P].length;++V)X=+M[P][V].x,p.push(X,0,1,X,1,1,X,0,-1,X,0,-1,X,1,1,X,1,-1);D=p.length/3|0,k[P]=R,C[P]=D-R}var j=i(y,new Float32Array(p)),B=n(y,[{buffer:j,type:y.FLOAT,size:3,stride:0,offset:0}]),W=r(y);return W.attributes.position.location=0,new f(y,j,B,W,A,S,C,k)};var i=t(5827),n=t(2944),r=t(1943).j,s=[0,0,0],l=[0,0,0],u=[0,0,0],d=[0,0,0],c=[1,1];function w(y){return y[0]=y[1]=y[2]=0,y}function m(y,v){return y[0]=v[0],y[1]=v[1],y[2]=v[2],y}function f(y,v,M,p,S,A,k,C){this.gl=y,this.vertBuffer=v,this.vao=M,this.shader=p,this.tickCount=S,this.tickOffset=A,this.gridCount=k,this.gridOffset=C}var x=f.prototype;x.bind=function(y,v,M){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=v,this.shader.uniforms.projection=M,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},x.unbind=function(){this.vao.unbind()},x.drawAxisLine=function(y,v,M,p,S){var A=w(l);this.shader.uniforms.majorAxis=l,A[y]=v[1][y]-v[0][y],this.shader.uniforms.minorAxis=A;var k,C=m(d,M);C[y]+=v[0][y],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=p,(k=w(u))[(y+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=w(u))[(y+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},x.drawAxisTicks=function(y,v,M,p,S){if(this.tickCount[y]){var A=w(s);A[y]=1,this.shader.uniforms.majorAxis=A,this.shader.uniforms.offset=v,this.shader.uniforms.minorAxis=M,this.shader.uniforms.color=p,this.shader.uniforms.lineWidth=S;var k=w(u);k[y]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},x.drawGrid=function(y,v,M,p,S,A){if(this.gridCount[y]){var k=w(l);k[v]=M[1][v]-M[0][v],this.shader.uniforms.minorAxis=k;var C=m(d,p);C[v]+=M[0][v],this.shader.uniforms.offset=C;var P=w(s);P[y]=1,this.shader.uniforms.majorAxis=P;var R=w(u);R[y]=1,this.shader.uniforms.screenAxis=R,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},x.drawZero=function(y,v,M,p,S,A){var k=w(l);this.shader.uniforms.majorAxis=k,k[y]=M[1][y]-M[0][y],this.shader.uniforms.minorAxis=k;var C=m(d,p);C[y]+=M[0][y],this.shader.uniforms.offset=C;var P=w(u);P[v]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},x.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(h,o,t){var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.j=function(w){return n(w,r,s,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.f=function(w){return n(w,l,u,null,[{name:"position",type:"vec3"}])};var d=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);o.bg=function(w){return n(w,d,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(h,o,t){h.exports=function(m,f,x,y,v,M){var p=i(m),S=n(m,[{buffer:p,size:3}]),A=s(m);A.attributes.position.location=0;var k=new d(m,A,p,S);return k.update(f,x,y,v,M),k};var i=t(5827),n=t(2944),r=t(875),s=t(1943).f,l=window||b.global||{},u=l.__TEXT_CACHE||{};function d(m,f,x,y){this.gl=m,this.shader=f,this.buffer=x,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var c=d.prototype,w=[0,0];c.bind=function(m,f,x,y){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=m,v.view=f,v.projection=x,v.pixelScale=y,w[0]=this.gl.drawingBufferWidth,w[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=w},c.unbind=function(){this.vao.unbind()},c.update=function(m,f,x,y,v){var M=[];function p(X,D,V,j,B,W){var q=u[V];q||(q=u[V]={});var re=q[D];re||(re=q[D]=function(me,ye){try{return r(me,ye)}catch(Te){return console.warn('error vectorizing text:"'+me+'" error:',Te),{cells:[],positions:[]}}}(D,{triangles:!0,font:V,textAlign:"center",textBaseline:"middle",lineSpacing:B,styletags:W}));for(var ee=(j||12)/12,K=re.positions,Y=re.cells,$=0,ne=Y.length;$<ne;++$)for(var ae=Y[$],se=2;se>=0;--se){var ce=K[ae[se]];M.push(ee*ce[0],-ee*ce[1],X)}}for(var S=[0,0,0],A=[0,0,0],k=[0,0,0],C=[0,0,0],P={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},R=0;R<3;++R){k[R]=M.length/3|0,p(.5*(m[0][R]+m[1][R]),f[R],x[R],12,1.25,P),C[R]=(M.length/3|0)-k[R],S[R]=M.length/3|0;for(var O=0;O<y[R].length;++O)y[R][O].text&&p(y[R][O].x,y[R][O].text,y[R][O].font||v,y[R][O].fontSize||12,1.25,P);A[R]=(M.length/3|0)-S[R]}this.buffer.update(M),this.tickOffset=S,this.tickCount=A,this.labelOffset=k,this.labelCount=C},c.drawTicks=function(m,f,x,y,v,M,p,S){this.tickCount[m]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=v,this.shader.uniforms.angle=x,this.shader.uniforms.scale=f,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=p,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m]))},c.drawLabel=function(m,f,x,y,v,M,p,S){this.labelCount[m]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=v,this.shader.uniforms.angle=x,this.shader.uniforms.scale=f,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=p,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[m],this.labelOffset[m]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(h,o){function t(i,n){var r=i+"",s=r.indexOf("."),l=0;s>=0&&(l=r.length-s-1);var u=Math.pow(10,l),d=Math.round(i*n*u),c=d+"";if(c.indexOf("e")>=0)return c;var w=d/u,m=d%u;d<0?(w=0|-Math.ceil(w),m=0|-m):(w=0|Math.floor(w),m|=0);var f=""+w;if(d<0&&(f="-"+f),l){for(var x=""+m;x.length<l;)x="0"+x;return f+"."+x}return f}o.create=function(i,n){for(var r=[],s=0;s<3;++s){for(var l=[],u=(i[0][s],i[1][s],0);u*n[s]<=i[1][s];++u)l.push({x:u*n[s],text:t(n[s],u)});for(u=-1;u*n[s]>=i[0][s];--u)l.push({x:u*n[s],text:t(n[s],u)});r.push(l)}return r},o.equal=function(i,n){for(var r=0;r<3;++r){if(i[r].length!==n[r].length)return!1;for(var s=0;s<i[r].length;++s){var l=i[r][s],u=n[r][s];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},2771:function(h,o,t){h.exports=function(M,p,S,A,k){var C=p.model||d,P=p.view||d,R=p.projection||d,O=p._ortho||!1,X=M.bounds,D=(k=k||r(C,P,R,X,O)).axis;s(c,P,C),s(c,R,c);for(var V=y,j=0;j<3;++j)V[j].lo=1/0,V[j].hi=-1/0,V[j].pixelsPerDataUnit=1/0;var B=i(l(c,c));l(c,c);for(var W=0;W<3;++W){var q=(W+1)%3,re=(W+2)%3,ee=v;e:for(j=0;j<2;++j){var K=[];if(D[W]<0!=!!j){ee[W]=X[j][W];for(var Y=0;Y<2;++Y){ee[q]=X[Y^j][q];for(var $=0;$<2;++$)ee[re]=X[$^Y^j][re],K.push(ee.slice())}var ne=O?5:4;for(Y=ne;Y===ne;++Y){if(K.length===0)continue e;K=n.positive(K,B[Y])}for(Y=0;Y<K.length;++Y){re=K[Y];var ae=x(v,c,re,S,A);for($=0;$<3;++$)V[$].lo=Math.min(V[$].lo,re[$]),V[$].hi=Math.max(V[$].hi,re[$]),$!==W&&(V[$].pixelsPerDataUnit=Math.min(V[$].pixelsPerDataUnit,Math.abs(ae[$])))}}}}return V};var i=t(5795),n=t(4670),r=t(2864),s=t(104),l=t(2142),u=t(6342),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function w(M,p,S){this.lo=M,this.hi=p,this.pixelsPerDataUnit=S}var m=[0,0,0,1],f=[0,0,0,1];function x(M,p,S,A,k){for(var C=0;C<3;++C){for(var P=m,R=f,O=0;O<3;++O)R[O]=P[O]=S[O];R[3]=P[3]=1,R[C]+=1,u(R,R,p),R[3]<0&&(M[C]=1/0),P[C]-=1,u(P,P,p),P[3]<0&&(M[C]=1/0);var X=(P[0]/P[3]-R[0]/R[3])*A,D=(P[1]/P[3]-R[1]/R[3])*k;M[C]=.25*Math.sqrt(X*X+D*D)}return M}var y=[new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0)],v=[0,0,0]},5827:function(h,o,t){var i=t(5306),n=t(7498),r=t(5050),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(w,m,f,x,y){this.gl=w,this.type=m,this.handle=f,this.length=x,this.usage=y}var u=l.prototype;function d(w,m,f,x,y,v){var M=y.length*y.BYTES_PER_ELEMENT;if(v<0)return w.bufferData(m,y,x),M;if(M+v>f)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return w.bufferSubData(m,v,y),f}function c(w,m){for(var f=i.malloc(w.length,m),x=w.length,y=0;y<x;++y)f[y]=w[y];return f}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(w,m){if(typeof m!="number"&&(m=-1),this.bind(),typeof w=="object"&&w.shape!==void 0){var f=w.dtype;if(s.indexOf(f)<0&&(f="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&f!=="uint16"?"uint32":"uint16"),f===w.dtype&&function(M,p){for(var S=1,A=p.length-1;A>=0;--A){if(p[A]!==S)return!1;S*=M[A]}return!0}(w.shape,w.stride))w.offset===0&&w.data.length===w.shape[0]?this.length=d(this.gl,this.type,this.length,this.usage,w.data,m):this.length=d(this.gl,this.type,this.length,this.usage,w.data.subarray(w.offset,w.shape[0]),m);else{var x=i.malloc(w.size,f),y=r(x,w.shape);n.assign(y,w),this.length=d(this.gl,this.type,this.length,this.usage,m<0?x:x.subarray(0,w.size),m),i.free(x)}}else if(Array.isArray(w)){var v;v=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(w,"uint16"):c(w,"float32"),this.length=d(this.gl,this.type,this.length,this.usage,m<0?v:v.subarray(0,w.length),m),i.free(v)}else if(typeof w=="object"&&typeof w.length=="number")this.length=d(this.gl,this.type,this.length,this.usage,w,m);else{if(typeof w!="number"&&w!==void 0)throw new Error("gl-buffer: Invalid data type");if(m>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(w|=0)<=0&&(w=1),this.gl.bufferData(this.type,0|w,this.usage),this.length=w}},h.exports=function(w,m,f,x){if(f=f||w.ARRAY_BUFFER,x=x||w.DYNAMIC_DRAW,f!==w.ARRAY_BUFFER&&f!==w.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(x!==w.DYNAMIC_DRAW&&x!==w.STATIC_DRAW&&x!==w.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=w.createBuffer(),v=new l(w,f,y,0,x);return v.update(m),v}},1140:function(h,o,t){var i=t(2858);h.exports=function(r,s){var l=r.positions,u=r.vectors,d={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),d;for(var c=0,w=1/0,m=-1/0,f=1/0,x=-1/0,y=1/0,v=-1/0,M=null,p=null,S=[],A=1/0,k=!1,C=0;C<l.length;C++){var P=l[C];w=Math.min(P[0],w),m=Math.max(P[0],m),f=Math.min(P[1],f),x=Math.max(P[1],x),y=Math.min(P[2],y),v=Math.max(P[2],v);var R=u[C];if(i.length(R)>c&&(c=i.length(R)),C){var O=2*i.distance(M,P)/(i.length(p)+i.length(R));O?(A=Math.min(A,O),k=!1):k=!0}k||(M=P,p=R),S.push(R)}var X=[w,f,y],D=[m,x,v];s&&(s[0]=X,s[1]=D),c===0&&(c=1);var V=1/c;isFinite(A)||(A=1),d.vectorScale=A;var j=r.coneSize||.5;r.absoluteConeSize&&(j=r.absoluteConeSize*V),d.coneScale=j,C=0;for(var B=0;C<l.length;C++)for(var W=(P=l[C])[0],q=P[1],re=P[2],ee=S[C],K=i.length(ee)*V,Y=0;Y<8;Y++){d.positions.push([W,q,re,B++]),d.positions.push([W,q,re,B++]),d.positions.push([W,q,re,B++]),d.positions.push([W,q,re,B++]),d.positions.push([W,q,re,B++]),d.positions.push([W,q,re,B++]),d.vectors.push(ee),d.vectors.push(ee),d.vectors.push(ee),d.vectors.push(ee),d.vectors.push(ee),d.vectors.push(ee),d.vertexIntensity.push(K,K,K),d.vertexIntensity.push(K,K,K);var $=d.positions.length;d.cells.push([$-6,$-5,$-4],[$-3,$-2,$-1])}return d};var n=t(7234);h.exports.createMesh=t(5028),h.exports.createConeMesh=function(r,s){return h.exports.createMesh(r,s,{shaders:n,traceType:"cone"})}},5028:function(h,o,t){var i=t(5158),n=t(5827),r=t(2944),s=t(8931),l=t(104),u=t(7437),d=t(5050),c=t(9156),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(x,y,v,M,p,S,A,k,C,P,R){this.gl=x,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=v,this.pickShader=M,this.trianglePositions=p,this.triangleVectors=S,this.triangleColors=k,this.triangleUVs=C,this.triangleIds=A,this.triangleVAO=P,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=R,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var f=m.prototype;f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(x){this.pickId=x},f.update=function(x){x=x||{};var y=this.gl;this.dirty=!0,"lightPosition"in x&&(this.lightPosition=x.lightPosition),"opacity"in x&&(this.opacity=x.opacity),"ambient"in x&&(this.ambientLight=x.ambient),"diffuse"in x&&(this.diffuseLight=x.diffuse),"specular"in x&&(this.specularLight=x.specular),"roughness"in x&&(this.roughness=x.roughness),"fresnel"in x&&(this.fresnel=x.fresnel),x.tubeScale!==void 0&&(this.tubeScale=x.tubeScale),x.vectorScale!==void 0&&(this.vectorScale=x.vectorScale),x.coneScale!==void 0&&(this.coneScale=x.coneScale),x.coneOffset!==void 0&&(this.coneOffset=x.coneOffset),x.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(ae){for(var se=c({colormap:ae,nshades:256,format:"rgba"}),ce=new Uint8Array(1024),me=0;me<256;++me){for(var ye=se[me],Te=0;Te<3;++Te)ce[4*me+Te]=ye[Te];ce[4*me+3]=255*ye[3]}return d(ce,[256,256,4],[4,0,1])}(x.colormap)),this.texture.generateMipmap());var v=x.cells,M=x.positions,p=x.vectors;if(M&&v&&p){var S=[],A=[],k=[],C=[],P=[];this.cells=v,this.positions=M,this.vectors=p;var R=x.meshColor||[1,1,1,1],O=x.vertexIntensity,X=1/0,D=-1/0;if(O)if(x.vertexIntensityBounds)X=+x.vertexIntensityBounds[0],D=+x.vertexIntensityBounds[1];else for(var V=0;V<O.length;++V){var j=O[V];X=Math.min(X,j),D=Math.max(D,j)}else for(V=0;V<M.length;++V)j=M[V][2],X=Math.min(X,j),D=Math.max(D,j);for(this.intensity=O||function(ae){for(var se=ae.length,ce=new Array(se),me=0;me<se;++me)ce[me]=ae[me][2];return ce}(M),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=0;V<M.length;++V)for(var B=M[V],W=0;W<3;++W)!isNaN(B[W])&&isFinite(B[W])&&(this.bounds[0][W]=Math.min(this.bounds[0][W],B[W]),this.bounds[1][W]=Math.max(this.bounds[1][W],B[W]));var q=0;e:for(V=0;V<v.length;++V){var re=v[V];if(re.length===3){for(W=0;W<3;++W){B=M[K=re[W]];for(var ee=0;ee<3;++ee)if(isNaN(B[ee])||!isFinite(B[ee]))continue e}for(W=0;W<3;++W){var K;B=M[K=re[2-W]],S.push(B[0],B[1],B[2],B[3]);var Y=p[K];A.push(Y[0],Y[1],Y[2],Y[3]||0);var $,ne=R;ne.length===3?k.push(ne[0],ne[1],ne[2],1):k.push(ne[0],ne[1],ne[2],ne[3]),$=O?[(O[K]-X)/(D-X),0]:[(B[2]-X)/(D-X),0],C.push($[0],$[1]),P.push(V)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(A),this.triangleColors.update(k),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(P))}},f.drawTransparent=f.draw=function(x){x=x||{};for(var y=this.gl,v=x.model||w,M=x.view||w,p=x.projection||w,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)S[0][A]=Math.max(S[0][A],this.clipBounds[0][A]),S[1][A]=Math.min(S[1][A],this.clipBounds[1][A]);var k={model:v,view:M,projection:p,inverseModel:w.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=u(k.inverseModel,k.model),y.disable(y.CULL_FACE),this.texture.bind(0);var C=new Array(16);for(l(C,k.view,k.model),l(C,k.projection,C),u(C,C),A=0;A<3;++A)k.eyePosition[A]=C[12+A]/C[15];var P=C[15];for(A=0;A<3;++A)P+=this.lightPosition[A]*C[4*A+3];for(A=0;A<3;++A){for(var R=C[12+A],O=0;O<3;++O)R+=C[4*O+A]*this.lightPosition[O];k.lightPosition[A]=R/P}if(this.triangleCount>0){var X=this.triShader;X.bind(),X.uniforms=k,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},f.drawPick=function(x){x=x||{};for(var y=this.gl,v=x.model||w,M=x.view||w,p=x.projection||w,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)S[0][A]=Math.max(S[0][A],this.clipBounds[0][A]),S[1][A]=Math.min(S[1][A],this.clipBounds[1][A]);this._model=[].slice.call(v),this._view=[].slice.call(M),this._projection=[].slice.call(p),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var k={model:v,view:M,projection:p,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},f.pick=function(x){if(!x||x.id!==this.pickId)return null;var y=x.value[0]+256*x.value[1]+65536*x.value[2],v=this.cells[y],M=this.positions[v[1]].slice(0,3),p={position:M,dataCoordinate:M,index:Math.floor(v[1]/48)};return this.traceType==="cone"?p.index=Math.floor(v[1]/48):this.traceType==="streamtube"&&(p.intensity=this.intensity[v[1]],p.velocity=this.vectors[v[1]].slice(0,3),p.divergence=this.vectors[v[1]][3],p.index=y),p},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},h.exports=function(x,y,v){var M=v.shaders;arguments.length===1&&(x=(y=x).gl);var p=function(D,V){var j=i(D,V.meshShader.vertex,V.meshShader.fragment,null,V.meshShader.attributes);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.vector.location=4,j}(x,M),S=function(D,V){var j=i(D,V.pickShader.vertex,V.pickShader.fragment,null,V.pickShader.attributes);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.vector.location=4,j}(x,M),A=s(x,d(new Uint8Array([255,255,255,255]),[1,1,4]));A.generateMipmap(),A.minFilter=x.LINEAR_MIPMAP_LINEAR,A.magFilter=x.LINEAR;var k=n(x),C=n(x),P=n(x),R=n(x),O=n(x),X=new m(x,A,p,S,k,C,O,P,R,r(x,[{buffer:k,type:x.FLOAT,size:4},{buffer:O,type:x.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:x.FLOAT,size:4},{buffer:R,type:x.FLOAT,size:2},{buffer:C,type:x.FLOAT,size:4}]),v.traceType||"cone");return X.update(y),X}},7234:function(h,o,t){var i=t(6832),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(h){h.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(h,o,t){var i=t(1950);h.exports=function(n){return i[n]}},3110:function(h,o,t){h.exports=function(m){var f=m.gl,x=i(f),y=n(f,[{buffer:x,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:x,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:x,type:f.FLOAT,size:3,offset:28,stride:40}]),v=r(f);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.offset.location=2;var M=new l(f,x,y,v);return M.update(m),M};var i=t(5827),n=t(2944),r=t(7667),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(m,f,x,y){this.gl=m,this.shader=y,this.buffer=f,this.vao=x,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function d(m,f){for(var x=0;x<3;++x)m[0][x]=Math.min(m[0][x],f[x]),m[1][x]=Math.max(m[1][x],f[x])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(m){var f=this.gl,x=this.shader.uniforms;this.shader.bind();var y=x.view=m.view||s,v=x.projection=m.projection||s;x.model=m.model||s,x.clipBounds=this.clipBounds,x.opacity=this.opacity;var M=y[12],p=y[13],S=y[14],A=y[15],k=(m._ortho?2:1)*this.pixelRatio*(v[3]*M+v[7]*p+v[11]*S+v[15]*A)/f.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)f.lineWidth(this.lineWidth[C]*this.pixelRatio),x.capSize=this.capSize[C]*k,this.lineCount[C]&&f.drawArrays(f.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};var c=function(){for(var m=new Array(3),f=0;f<3;++f){for(var x=[],y=1;y<=2;++y)for(var v=-1;v<=1;v+=2){var M=[0,0,0];M[(y+f)%3]=v,x.push(M)}m[f]=x}return m}();function w(m,f,x,y){for(var v=c[y],M=0;M<v.length;++M){var p=v[M];m.push(f[0],f[1],f[2],x[0],x[1],x[2],x[3],p[0],p[1],p[2])}return v.length}u.update=function(m){"lineWidth"in(m=m||{})&&(this.lineWidth=m.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in m&&(this.capSize=m.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in m&&(this.opacity=+m.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=m.color||[[0,0,0],[0,0,0],[0,0,0]],x=m.position,y=m.error;if(Array.isArray(f[0])||(f=[f,f,f]),x&&y){var v=[],M=x.length,p=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=p;e:for(var A=0;A<M;++A){for(var k=x[A],C=0;C<3;++C)if(isNaN(k[C])||!isFinite(k[C]))continue e;var P,R=y[A],O=f[S];Array.isArray(O[0])&&(O=f[A]),O.length===3?O=[O[0],O[1],O[2],1]:O.length===4&&(O=[O[0],O[1],O[2],O[3]],!this.hasAlpha&&O[3]<1&&(this.hasAlpha=!0)),isNaN(R[0][S])||isNaN(R[1][S])||(R[0][S]<0&&((P=k.slice())[S]+=R[0][S],v.push(k[0],k[1],k[2],O[0],O[1],O[2],O[3],0,0,0,P[0],P[1],P[2],O[0],O[1],O[2],O[3],0,0,0),d(this.bounds,P),p+=2+w(v,P,O,S)),R[1][S]>0&&((P=k.slice())[S]+=R[1][S],v.push(k[0],k[1],k[2],O[0],O[1],O[2],O[3],0,0,0,P[0],P[1],P[2],O[0],O[1],O[2],O[3],0,0,0),d(this.bounds,P),p+=2+w(v,P,O,S)))}this.lineCount[S]=p-this.lineOffset[S]}this.buffer.update(v)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(h,o,t){var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);h.exports=function(l){return n(l,r,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(h,o,t){var i=t(8931);h.exports=function(M,p,S,A){n||(n=M.FRAMEBUFFER_UNSUPPORTED,r=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,s=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=M.getExtension("WEBGL_draw_buffers");if(!u&&k&&function(V,j){var B=V.getParameter(j.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(B+1);for(var W=0;W<=B;++W){for(var q=new Array(B),re=0;re<W;++re)q[re]=V.COLOR_ATTACHMENT0+re;for(re=W;re<B;++re)q[re]=V.NONE;u[W]=q}}(M,k),Array.isArray(p)&&(A=S,S=0|p[1],p=0|p[0]),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var C=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(p<0||p>C||S<0||S>C)throw new Error("gl-fbo: Parameters are too large for FBO");var P=1;if("color"in(A=A||{})){if((P=Math.max(0|A.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(P>M.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}}var R=M.UNSIGNED_BYTE,O=M.getExtension("OES_texture_float");if(A.float&&P>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");R=M.FLOAT}else A.preferFloat&&P>0&&O&&(R=M.FLOAT);var X=!0;"depth"in A&&(X=!!A.depth);var D=!1;return"stencil"in A&&(D=!!A.stencil),new x(M,p,S,R,P,X,D,k)};var n,r,s,l,u=null;function d(M){return[M.getParameter(M.FRAMEBUFFER_BINDING),M.getParameter(M.RENDERBUFFER_BINDING),M.getParameter(M.TEXTURE_BINDING_2D)]}function c(M,p){M.bindFramebuffer(M.FRAMEBUFFER,p[0]),M.bindRenderbuffer(M.RENDERBUFFER,p[1]),M.bindTexture(M.TEXTURE_2D,p[2])}function w(M){switch(M){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function m(M,p,S,A,k,C){if(!A)return null;var P=i(M,p,S,k,A);return P.magFilter=M.NEAREST,P.minFilter=M.NEAREST,P.mipSamples=1,P.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,C,M.TEXTURE_2D,P.handle,0),P}function f(M,p,S,A,k){var C=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,C),M.renderbufferStorage(M.RENDERBUFFER,A,p,S),M.framebufferRenderbuffer(M.FRAMEBUFFER,k,M.RENDERBUFFER,C),C}function x(M,p,S,A,k,C,P,R){this.gl=M,this._shape=[0|p,0|S],this._destroyed=!1,this._ext=R,this.color=new Array(k);for(var O=0;O<k;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=A,this._useDepth=C,this._useStencil=P;var X=this,D=[0|p,0|S];Object.defineProperties(D,{0:{get:function(){return X._shape[0]},set:function(V){return X.width=V}},1:{get:function(){return X._shape[1]},set:function(V){return X.height=V}}}),this._shapeVector=D,function(V){var j=d(V.gl),B=V.gl,W=V.handle=B.createFramebuffer(),q=V._shape[0],re=V._shape[1],ee=V.color.length,K=V._ext,Y=V._useStencil,$=V._useDepth,ne=V._colorType;B.bindFramebuffer(B.FRAMEBUFFER,W);for(var ae=0;ae<ee;++ae)V.color[ae]=m(B,q,re,ne,B.RGBA,B.COLOR_ATTACHMENT0+ae);ee===0?(V._color_rb=f(B,q,re,B.RGBA4,B.COLOR_ATTACHMENT0),K&&K.drawBuffersWEBGL(u[0])):ee>1&&K.drawBuffersWEBGL(u[ee]);var se=B.getExtension("WEBGL_depth_texture");se?Y?V.depth=m(B,q,re,se.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):$&&(V.depth=m(B,q,re,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):$&&Y?V._depth_rb=f(B,q,re,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):$?V._depth_rb=f(B,q,re,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):Y&&(V._depth_rb=f(B,q,re,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var ce=B.checkFramebufferStatus(B.FRAMEBUFFER);if(ce!==B.FRAMEBUFFER_COMPLETE){for(V._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(V.handle),V.handle=null,V.depth&&(V.depth.dispose(),V.depth=null),V._depth_rb&&(B.deleteRenderbuffer(V._depth_rb),V._depth_rb=null),ae=0;ae<V.color.length;++ae)V.color[ae].dispose(),V.color[ae]=null;V._color_rb&&(B.deleteRenderbuffer(V._color_rb),V._color_rb=null),c(B,j),w(ce)}c(B,j)}(this)}var y=x.prototype;function v(M,p,S){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(M._shape[0]!==p||M._shape[1]!==S){var A=M.gl,k=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(p<0||p>k||S<0||S>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=p,M._shape[1]=S;for(var C=d(A),P=0;P<M.color.length;++P)M.color[P].shape=M._shape;M._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,M._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,M._shape[0],M._shape[1])),A.bindFramebuffer(A.FRAMEBUFFER,M.handle);var R=A.checkFramebufferStatus(A.FRAMEBUFFER);R!==A.FRAMEBUFFER_COMPLETE&&(M.dispose(),c(A,C),w(R)),c(A,C)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[0|M,0|M]),M.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=0|M[0],S=0|M[1];return v(this,p,S),[p,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return v(this,M|=0,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return M|=0,v(this,this._shape[0],M),M},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(h,o,t){var i=t(8974).sprintf,n=t(6603),r=t(9365),s=t(8008);h.exports=function(l,u,d){var c=r(u)||"of unknown name (see npm glsl-shader-name)",w="unknown type";d!==void 0&&(w=d===n.FRAGMENT_SHADER?"fragment":"vertex");for(var m=i(`Error compiling %s shader %s:
`,w,c),f=i("%s%s",m,l),x=l.split(`
`),y={},v=0;v<x.length;v++){var M=x[v];if(M!==""&&M!=="\0"){var p=parseInt(M.split(":")[2]);if(isNaN(p))throw new Error(i("Could not parse error: %s",M));y[p]=M}}var S=s(u).split(`
`);for(v=0;v<S.length;v++)if((y[v+3]||y[v+2]||y[v+1])&&(m+=S[v]+`
`,y[v+1])){var A=y[v+1];A=A.substr(A.split(":",3).join(":").length+1).trim(),m+=i(`^^^ %s

`,A)}return{long:m.trim(),short:f.trim()}}},6386:function(h,o,t){h.exports=function(f,x){var y=f.gl,v=new d(f,s(y,u.vertex,u.fragment),s(y,u.pickVertex,u.pickFragment),l(y),l(y),l(y),l(y));return v.update(x),f.addObject(v),v};var i=t(5070),n=t(9560),r=t(5306),s=t(5158),l=t(5827),u=t(1292);function d(f,x,y,v,M,p,S){this.plot=f,this.shader=x,this.pickShader=y,this.positionBuffer=v,this.weightBuffer=M,this.colorBuffer=p,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,w=d.prototype,m=[0,0,1,0,0,1,1,0,1,1,0,1];w.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var f=this.plot,x=this.shader,y=this.bounds,v=this.numVertices;if(!(v<=0)){var M=f.gl,p=f.dataBox,S=y[2]-y[0],A=y[3]-y[1],k=p[2]-p[0],C=p[3]-p[1];c[0]=2*S/k,c[4]=2*A/C,c[6]=2*(y[0]-p[0])/k-1,c[7]=2*(y[1]-p[1])/C-1,x.bind();var P=x.uniforms;P.viewTransform=c,P.shape=this.shape;var R=x.attributes;this.positionBuffer.bind(),R.position.pointer(),this.weightBuffer.bind(),R.weight.pointer(M.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),R.color.pointer(M.UNSIGNED_BYTE,!0),M.drawArrays(M.TRIANGLES,0,v)}}),w.drawPick=function(){var f=[1,0,0,0,1,0,0,0,1],x=[0,0,0,0];return function(y){var v=this.plot,M=this.pickShader,p=this.bounds,S=this.numVertices;if(!(S<=0)){var A=v.gl,k=v.dataBox,C=p[2]-p[0],P=p[3]-p[1],R=k[2]-k[0],O=k[3]-k[1];f[0]=2*C/R,f[4]=2*P/O,f[6]=2*(p[0]-k[0])/R-1,f[7]=2*(p[1]-k[1])/O-1;for(var X=0;X<4;++X)x[X]=y>>8*X&255;this.pickOffset=y,M.bind();var D=M.uniforms;D.viewTransform=f,D.pickOffset=x,D.shape=this.shape;var V=M.attributes;return this.positionBuffer.bind(),V.position.pointer(),this.weightBuffer.bind(),V.weight.pointer(A.UNSIGNED_BYTE,!1),this.idBuffer.bind(),V.pickId.pointer(A.UNSIGNED_BYTE,!1),A.drawArrays(A.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),w.pick=function(f,x,y){var v=this.pickOffset,M=this.shape[0]*this.shape[1];if(y<v||y>=v+M)return null;var p=y-v,S=this.xData,A=this.yData;return{object:this,pointId:p,dataCoord:[S[p%this.shape[0]],A[p/this.shape[0]|0]]}},w.update=function(f){var x=(f=f||{}).shape||[0,0],y=f.x||n(x[0]),v=f.y||n(x[1]),M=f.z||new Float32Array(x[0]*x[1]),p=f.zsmooth!==!1;this.xData=y,this.yData=v;var S,A,k,C,P=f.colorLevels||[0],R=f.colorValues||[0,0,0,1],O=P.length,X=this.bounds;p?(S=X[0]=y[0],A=X[1]=v[0],k=X[2]=y[y.length-1],C=X[3]=v[v.length-1]):(S=X[0]=y[0]+(y[1]-y[0])/2,A=X[1]=v[0]+(v[1]-v[0])/2,k=X[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,C=X[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var D=1/(k-S),V=1/(C-A),j=x[0],B=x[1];this.shape=[j,B];var W=(p?(j-1)*(B-1):j*B)*(m.length>>>1);this.numVertices=W;for(var q=r.mallocUint8(4*W),re=r.mallocFloat32(2*W),ee=r.mallocUint8(2*W),K=r.mallocUint32(W),Y=0,$=p?j-1:j,ne=p?B-1:B,ae=0;ae<ne;++ae){var se,ce;p?(se=V*(v[ae]-A),ce=V*(v[ae+1]-A)):(se=ae<B-1?V*(v[ae]-(v[ae+1]-v[ae])/2-A):V*(v[ae]-(v[ae]-v[ae-1])/2-A),ce=ae<B-1?V*(v[ae]+(v[ae+1]-v[ae])/2-A):V*(v[ae]+(v[ae]-v[ae-1])/2-A));for(var me=0;me<$;++me){var ye,Te;p?(ye=D*(y[me]-S),Te=D*(y[me+1]-S)):(ye=me<j-1?D*(y[me]-(y[me+1]-y[me])/2-S):D*(y[me]-(y[me]-y[me-1])/2-S),Te=me<j-1?D*(y[me]+(y[me+1]-y[me])/2-S):D*(y[me]+(y[me]-y[me-1])/2-S));for(var Ce=0;Ce<m.length;Ce+=2){var pe,fe,Oe,Se,Me=m[Ce],ue=m[Ce+1],le=M[p?(ae+ue)*j+(me+Me):ae*j+me],ie=i.le(P,le);if(ie<0)pe=R[0],fe=R[1],Oe=R[2],Se=R[3];else if(ie===O-1)pe=R[4*O-4],fe=R[4*O-3],Oe=R[4*O-2],Se=R[4*O-1];else{var ge=(le-P[ie])/(P[ie+1]-P[ie]),Ae=1-ge,we=4*ie,Ne=4*(ie+1);pe=Ae*R[we]+ge*R[Ne],fe=Ae*R[we+1]+ge*R[Ne+1],Oe=Ae*R[we+2]+ge*R[Ne+2],Se=Ae*R[we+3]+ge*R[Ne+3]}q[4*Y]=255*pe,q[4*Y+1]=255*fe,q[4*Y+2]=255*Oe,q[4*Y+3]=255*Se,re[2*Y]=.5*ye+.5*Te,re[2*Y+1]=.5*se+.5*ce,ee[2*Y]=Me,ee[2*Y+1]=ue,K[Y]=ae*j+me,Y+=1}}}this.positionBuffer.update(re),this.weightBuffer.update(ee),this.colorBuffer.update(q),this.idBuffer.update(K),r.free(re),r.free(q),r.free(ee),r.free(K)},w.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(h,o,t){var i=t(6832);h.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(h,o,t){var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(d){return n(d,r,s,null,u)},o.createPickShader=function(d){return n(d,r,l,null,u)}},6086:function(h,o,t){h.exports=function(S){var A=S.gl||S.scene&&S.scene.gl,k=w(A);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var C=m(A);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var P=i(A),R=n(A,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),O=d(new Array(1024),[256,1,4]),X=0;X<1024;++X)O.data[X]=255;var D=r(A,O);D.wrap=A.REPEAT;var V=new M(A,k,C,P,R,D);return V.update(S),V};var i=t(5827),n=t(2944),r=t(8931),s=new Uint8Array(4),l=new Float32Array(s.buffer),u=t(5070),d=t(5050),c=t(248),w=c.createShader,m=c.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(S,A){for(var k=0,C=0;C<3;++C){var P=S[C]-A[C];k+=P*P}return Math.sqrt(k)}function y(S){for(var A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)A[0][k]=Math.max(S[0][k],A[0][k]),A[1][k]=Math.min(S[1][k],A[1][k]);return A}function v(S,A,k,C){this.arcLength=S,this.position=A,this.index=k,this.dataCoordinate=C}function M(S,A,k,C,P,R){this.gl=S,this.shader=A,this.pickShader=k,this.buffer=C,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=R,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var p=M.prototype;p.isTransparent=function(){return this.hasAlpha},p.isOpaque=function(){return!this.hasAlpha},p.pickSlots=1,p.setPickBase=function(S){this.pickId=S},p.drawTransparent=p.draw=function(S){if(this.vertexCount){var A=this.gl,k=this.shader,C=this.vao;k.bind(),k.uniforms={model:S.model||f,view:S.view||f,projection:S.projection||f,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(A.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},p.drawPick=function(S){if(this.vertexCount){var A=this.gl,k=this.pickShader,C=this.vao;k.bind(),k.uniforms={model:S.model||f,view:S.view||f,projection:S.projection||f,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(A.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},p.update=function(S){var A,k;this.dirty=!0;var C=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],R=[],O=[],X=0,D=0,V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=S.position||S.positions;if(j){var B=S.color||S.colors||[0,0,0,1],W=S.lineWidth||1,q=!1;e:for(A=1;A<j.length;++A){var re,ee,K,Y=j[A-1],$=j[A];for(R.push(X),O.push(Y.slice()),k=0;k<3;++k){if(isNaN(Y[k])||isNaN($[k])||!isFinite(Y[k])||!isFinite($[k])){if(!C&&P.length>0){for(var ne=0;ne<24;++ne)P.push(P[P.length-12]);D+=2,q=!0}continue e}V[0][k]=Math.min(V[0][k],Y[k],$[k]),V[1][k]=Math.max(V[1][k],Y[k],$[k])}Array.isArray(B[0])?(re=B.length>A-1?B[A-1]:B.length>0?B[B.length-1]:[0,0,0,1],ee=B.length>A?B[A]:B.length>0?B[B.length-1]:[0,0,0,1]):re=ee=B,re.length===3&&(re=[re[0],re[1],re[2],1]),ee.length===3&&(ee=[ee[0],ee[1],ee[2],1]),!this.hasAlpha&&re[3]<1&&(this.hasAlpha=!0),K=Array.isArray(W)?W.length>A-1?W[A-1]:W.length>0?W[W.length-1]:[0,0,0,1]:W;var ae=X;if(X+=x(Y,$),q){for(k=0;k<2;++k)P.push(Y[0],Y[1],Y[2],$[0],$[1],$[2],ae,K,re[0],re[1],re[2],re[3]);D+=2,q=!1}P.push(Y[0],Y[1],Y[2],$[0],$[1],$[2],ae,K,re[0],re[1],re[2],re[3],Y[0],Y[1],Y[2],$[0],$[1],$[2],ae,-K,re[0],re[1],re[2],re[3],$[0],$[1],$[2],Y[0],Y[1],Y[2],X,-K,ee[0],ee[1],ee[2],ee[3],$[0],$[1],$[2],Y[0],Y[1],Y[2],X,K,ee[0],ee[1],ee[2],ee[3]),D+=4}}if(this.buffer.update(P),R.push(X),O.push(j[j.length-1].slice()),this.bounds=V,this.vertexCount=D,this.points=O,this.arcLength=R,"dashes"in S){var se=S.dashes.slice();for(se.unshift(0),A=1;A<se.length;++A)se[A]=se[A-1]+se[A];var ce=d(new Array(1024),[256,1,4]);for(A=0;A<256;++A){for(k=0;k<4;++k)ce.set(A,0,k,0);1&u.le(se,se[se.length-1]*A/255)?ce.set(A,0,0,0):ce.set(A,0,0,255)}this.texture.setPixels(ce)}},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},p.pick=function(S){if(!S||S.id!==this.pickId)return null;var A=function(j,B,W,q){return s[0]=0,s[1]=W,s[2]=B,s[3]=j,l[0]}(S.value[0],S.value[1],S.value[2]),k=u.le(this.arcLength,A);if(k<0)return null;if(k===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var C=this.points[k],P=this.points[Math.min(k+1,this.points.length-1)],R=(A-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),O=1-R,X=[0,0,0],D=0;D<3;++D)X[D]=O*C[D]+R*P[D];var V=Math.min(R<.5?k:k+1,this.points.length-1);return new v(A,X,V,this.points[V])}},7332:function(h){h.exports=function(o){var t=new Float32Array(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}},9823:function(h){h.exports=function(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7787:function(h){h.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3],s=o[4],l=o[5],u=o[6],d=o[7],c=o[8],w=o[9],m=o[10],f=o[11],x=o[12],y=o[13],v=o[14],M=o[15];return(t*l-i*s)*(m*M-f*v)-(t*u-n*s)*(w*M-f*y)+(t*d-r*s)*(w*v-m*y)+(i*u-n*l)*(c*M-f*x)-(i*d-r*l)*(c*v-m*x)+(n*d-r*u)*(c*y-w*x)}},5950:function(h){h.exports=function(o,t){var i=t[0],n=t[1],r=t[2],s=t[3],l=i+i,u=n+n,d=r+r,c=i*l,w=n*l,m=n*u,f=r*l,x=r*u,y=r*d,v=s*l,M=s*u,p=s*d;return o[0]=1-m-y,o[1]=w+p,o[2]=f-M,o[3]=0,o[4]=w-p,o[5]=1-c-y,o[6]=x+v,o[7]=0,o[8]=f+M,o[9]=x-v,o[10]=1-c-m,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7280:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=t[3],u=n+n,d=r+r,c=s+s,w=n*u,m=n*d,f=n*c,x=r*d,y=r*c,v=s*c,M=l*u,p=l*d,S=l*c;return o[0]=1-(x+v),o[1]=m+S,o[2]=f-p,o[3]=0,o[4]=m-S,o[5]=1-(w+v),o[6]=y+M,o[7]=0,o[8]=f+p,o[9]=y-M,o[10]=1-(w+x),o[11]=0,o[12]=i[0],o[13]=i[1],o[14]=i[2],o[15]=1,o}},9947:function(h){h.exports=function(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7437:function(h){h.exports=function(o,t){var i=t[0],n=t[1],r=t[2],s=t[3],l=t[4],u=t[5],d=t[6],c=t[7],w=t[8],m=t[9],f=t[10],x=t[11],y=t[12],v=t[13],M=t[14],p=t[15],S=i*u-n*l,A=i*d-r*l,k=i*c-s*l,C=n*d-r*u,P=n*c-s*u,R=r*c-s*d,O=w*v-m*y,X=w*M-f*y,D=w*p-x*y,V=m*M-f*v,j=m*p-x*v,B=f*p-x*M,W=S*B-A*j+k*V+C*D-P*X+R*O;return W?(W=1/W,o[0]=(u*B-d*j+c*V)*W,o[1]=(r*j-n*B-s*V)*W,o[2]=(v*R-M*P+p*C)*W,o[3]=(f*P-m*R-x*C)*W,o[4]=(d*D-l*B-c*X)*W,o[5]=(i*B-r*D+s*X)*W,o[6]=(M*k-y*R-p*A)*W,o[7]=(w*R-f*k+x*A)*W,o[8]=(l*j-u*D+c*O)*W,o[9]=(n*D-i*j-s*O)*W,o[10]=(y*P-v*k+p*S)*W,o[11]=(m*k-w*P-x*S)*W,o[12]=(u*X-l*V-d*O)*W,o[13]=(i*V-n*X+r*O)*W,o[14]=(v*A-y*C-M*S)*W,o[15]=(w*C-m*A+f*S)*W,o):null}},3012:function(h,o,t){var i=t(9947);h.exports=function(n,r,s,l){var u,d,c,w,m,f,x,y,v,M,p=r[0],S=r[1],A=r[2],k=l[0],C=l[1],P=l[2],R=s[0],O=s[1],X=s[2];return Math.abs(p-R)<1e-6&&Math.abs(S-O)<1e-6&&Math.abs(A-X)<1e-6?i(n):(x=p-R,y=S-O,v=A-X,u=C*(v*=M=1/Math.sqrt(x*x+y*y+v*v))-P*(y*=M),d=P*(x*=M)-k*v,c=k*y-C*x,(M=Math.sqrt(u*u+d*d+c*c))?(u*=M=1/M,d*=M,c*=M):(u=0,d=0,c=0),w=y*c-v*d,m=v*u-x*c,f=x*d-y*u,(M=Math.sqrt(w*w+m*m+f*f))?(w*=M=1/M,m*=M,f*=M):(w=0,m=0,f=0),n[0]=u,n[1]=w,n[2]=x,n[3]=0,n[4]=d,n[5]=m,n[6]=y,n[7]=0,n[8]=c,n[9]=f,n[10]=v,n[11]=0,n[12]=-(u*p+d*S+c*A),n[13]=-(w*p+m*S+f*A),n[14]=-(x*p+y*S+v*A),n[15]=1,n)}},104:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=t[3],u=t[4],d=t[5],c=t[6],w=t[7],m=t[8],f=t[9],x=t[10],y=t[11],v=t[12],M=t[13],p=t[14],S=t[15],A=i[0],k=i[1],C=i[2],P=i[3];return o[0]=A*n+k*u+C*m+P*v,o[1]=A*r+k*d+C*f+P*M,o[2]=A*s+k*c+C*x+P*p,o[3]=A*l+k*w+C*y+P*S,A=i[4],k=i[5],C=i[6],P=i[7],o[4]=A*n+k*u+C*m+P*v,o[5]=A*r+k*d+C*f+P*M,o[6]=A*s+k*c+C*x+P*p,o[7]=A*l+k*w+C*y+P*S,A=i[8],k=i[9],C=i[10],P=i[11],o[8]=A*n+k*u+C*m+P*v,o[9]=A*r+k*d+C*f+P*M,o[10]=A*s+k*c+C*x+P*p,o[11]=A*l+k*w+C*y+P*S,A=i[12],k=i[13],C=i[14],P=i[15],o[12]=A*n+k*u+C*m+P*v,o[13]=A*r+k*d+C*f+P*M,o[14]=A*s+k*c+C*x+P*p,o[15]=A*l+k*w+C*y+P*S,o}},5268:function(h){h.exports=function(o,t,i,n,r,s,l){var u=1/(t-i),d=1/(n-r),c=1/(s-l);return o[0]=-2*u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*d,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(t+i)*u,o[13]=(r+n)*d,o[14]=(l+s)*c,o[15]=1,o}},1120:function(h){h.exports=function(o,t,i,n,r){var s=1/Math.tan(t/2),l=1/(n-r);return o[0]=s/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*l,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*r*n*l,o[15]=0,o}},4422:function(h){h.exports=function(o,t,i,n){var r,s,l,u,d,c,w,m,f,x,y,v,M,p,S,A,k,C,P,R,O,X,D,V,j=n[0],B=n[1],W=n[2],q=Math.sqrt(j*j+B*B+W*W);return Math.abs(q)<1e-6?null:(j*=q=1/q,B*=q,W*=q,r=Math.sin(i),l=1-(s=Math.cos(i)),u=t[0],d=t[1],c=t[2],w=t[3],m=t[4],f=t[5],x=t[6],y=t[7],v=t[8],M=t[9],p=t[10],S=t[11],A=j*j*l+s,k=B*j*l+W*r,C=W*j*l-B*r,P=j*B*l-W*r,R=B*B*l+s,O=W*B*l+j*r,X=j*W*l+B*r,D=B*W*l-j*r,V=W*W*l+s,o[0]=u*A+m*k+v*C,o[1]=d*A+f*k+M*C,o[2]=c*A+x*k+p*C,o[3]=w*A+y*k+S*C,o[4]=u*P+m*R+v*O,o[5]=d*P+f*R+M*O,o[6]=c*P+x*R+p*O,o[7]=w*P+y*R+S*O,o[8]=u*X+m*D+v*V,o[9]=d*X+f*D+M*V,o[10]=c*X+x*D+p*V,o[11]=w*X+y*D+S*V,t!==o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o)}},6109:function(h){h.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[4],l=t[5],u=t[6],d=t[7],c=t[8],w=t[9],m=t[10],f=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=s*r+c*n,o[5]=l*r+w*n,o[6]=u*r+m*n,o[7]=d*r+f*n,o[8]=c*r-s*n,o[9]=w*r-l*n,o[10]=m*r-u*n,o[11]=f*r-d*n,o}},7115:function(h){h.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[0],l=t[1],u=t[2],d=t[3],c=t[8],w=t[9],m=t[10],f=t[11];return t!==o&&(o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=s*r-c*n,o[1]=l*r-w*n,o[2]=u*r-m*n,o[3]=d*r-f*n,o[8]=s*n+c*r,o[9]=l*n+w*r,o[10]=u*n+m*r,o[11]=d*n+f*r,o}},5240:function(h){h.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),s=t[0],l=t[1],u=t[2],d=t[3],c=t[4],w=t[5],m=t[6],f=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=s*r+c*n,o[1]=l*r+w*n,o[2]=u*r+m*n,o[3]=d*r+f*n,o[4]=c*r-s*n,o[5]=w*r-l*n,o[6]=m*r-u*n,o[7]=f*r-d*n,o}},3668:function(h){h.exports=function(o,t,i){var n=i[0],r=i[1],s=i[2];return o[0]=t[0]*n,o[1]=t[1]*n,o[2]=t[2]*n,o[3]=t[3]*n,o[4]=t[4]*r,o[5]=t[5]*r,o[6]=t[6]*r,o[7]=t[7]*r,o[8]=t[8]*s,o[9]=t[9]*s,o[10]=t[10]*s,o[11]=t[11]*s,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}},998:function(h){h.exports=function(o,t,i){var n,r,s,l,u,d,c,w,m,f,x,y,v=i[0],M=i[1],p=i[2];return t===o?(o[12]=t[0]*v+t[4]*M+t[8]*p+t[12],o[13]=t[1]*v+t[5]*M+t[9]*p+t[13],o[14]=t[2]*v+t[6]*M+t[10]*p+t[14],o[15]=t[3]*v+t[7]*M+t[11]*p+t[15]):(n=t[0],r=t[1],s=t[2],l=t[3],u=t[4],d=t[5],c=t[6],w=t[7],m=t[8],f=t[9],x=t[10],y=t[11],o[0]=n,o[1]=r,o[2]=s,o[3]=l,o[4]=u,o[5]=d,o[6]=c,o[7]=w,o[8]=m,o[9]=f,o[10]=x,o[11]=y,o[12]=n*v+u*M+m*p+t[12],o[13]=r*v+d*M+f*p+t[13],o[14]=s*v+c*M+x*p+t[14],o[15]=l*v+w*M+y*p+t[15]),o}},2142:function(h){h.exports=function(o,t){if(o===t){var i=t[1],n=t[2],r=t[3],s=t[6],l=t[7],u=t[11];o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=i,o[6]=t[9],o[7]=t[13],o[8]=n,o[9]=s,o[11]=t[14],o[12]=r,o[13]=l,o[14]=u}else o[0]=t[0],o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=t[1],o[5]=t[5],o[6]=t[9],o[7]=t[13],o[8]=t[2],o[9]=t[6],o[10]=t[10],o[11]=t[14],o[12]=t[3],o[13]=t[7],o[14]=t[11],o[15]=t[15];return o}},4340:function(h,o,t){var i=t(957),n=t(7309);function r(u,d){for(var c=[0,0,0,0],w=0;w<4;++w)for(var m=0;m<4;++m)c[m]+=u[4*w+m]*d[w];return c}function s(u,d,c,w,m){for(var f=r(w,r(c,r(d,[u[0],u[1],u[2],1]))),x=0;x<3;++x)f[x]/=f[3];return[.5*m[0]*(1+f[0]),.5*m[1]*(1-f[1])]}function l(u,d){for(var c=[0,0,0],w=0;w<u.length;++w)for(var m=u[w],f=d[w],x=0;x<3;++x)c[x]+=f*m[x];return c}h.exports=function(u,d,c,w,m,f){if(u.length===1)return[0,u[0].slice()];for(var x=new Array(u.length),y=0;y<u.length;++y)x[y]=s(u[y],c,w,m,f);var v=0,M=1/0;for(y=0;y<x.length;++y){for(var p=0,S=0;S<2;++S)p+=Math.pow(x[y][S]-d[S],2);p<M&&(M=p,v=y)}var A=function(C,P){if(C.length===2){for(var R=0,O=0,X=0;X<2;++X)R+=Math.pow(P[X]-C[0][X],2),O+=Math.pow(P[X]-C[1][X],2);return(R=Math.sqrt(R))+(O=Math.sqrt(O))<1e-6?[1,0]:[O/(R+O),R/(O+R)]}if(C.length===3){var D=[0,0];return n(C[0],C[1],C[2],P,D),i(C,D)}return[]}(x,d),k=0;for(y=0;y<3;++y){if(A[y]<-.001||A[y]>1.0001)return null;k+=A[y]}return Math.abs(k-1)>.001?null:[v,l(u,A),A]}},2056:function(h,o,t){var i=t(6832),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),d=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),w=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),m=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),f=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),x=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:u,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:c,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:m,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:f,fragment:x,attributes:[{name:"position",type:"vec3"}]}},8116:function(h,o,t){var i=t(5158),n=t(5827),r=t(2944),s=t(8931),l=t(115),u=t(104),d=t(7437),c=t(5050),w=t(9156),m=t(7212),f=t(5306),x=t(2056),y=t(4340),v=x.meshShader,M=x.wireShader,p=x.pointShader,S=x.pickShader,A=x.pointPickShader,k=x.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(B,W,q,re,ee,K,Y,$,ne,ae,se,ce,me,ye,Te,Ce,pe,fe,Oe,Se,Me,ue,le,ie,ge,Ae,we){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=W,this.dirty=!0,this.triShader=q,this.lineShader=re,this.pointShader=ee,this.pickShader=K,this.pointPickShader=Y,this.contourShader=$,this.trianglePositions=ne,this.triangleColors=se,this.triangleNormals=me,this.triangleUVs=ce,this.triangleIds=ae,this.triangleVAO=ye,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Te,this.edgeColors=pe,this.edgeUVs=fe,this.edgeIds=Ce,this.edgeVAO=Oe,this.edgeCount=0,this.pointPositions=Se,this.pointColors=ue,this.pointUVs=le,this.pointSizes=ie,this.pointIds=Me,this.pointVAO=ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=we,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var R=P.prototype;function O(B,W){if(!W||!W.length)return 1;for(var q=0;q<W.length;++q){if(W.length<2)return 1;if(W[q][0]===B)return W[q][1];if(W[q][0]>B&&q>0){var re=(W[q][0]-B)/(W[q][0]-W[q-1][0]);return W[q][1]*(1-re)+re*W[q-1][1]}}return 1}function X(B){var W=i(B,p.vertex,p.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.pointSize.location=4,W}function D(B){var W=i(B,S.vertex,S.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W}function V(B){var W=i(B,A.vertex,A.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.pointSize.location=4,W}function j(B){var W=i(B,k.vertex,k.fragment);return W.attributes.position.location=0,W}R.isOpaque=function(){return!this.hasAlpha},R.isTransparent=function(){return this.hasAlpha},R.pickSlots=1,R.setPickBase=function(B){this.pickId=B},R.highlight=function(B){if(B&&this.contourEnable){for(var W=m(this.cells,this.intensity,B.intensity),q=W.cells,re=W.vertexIds,ee=W.vertexWeights,K=q.length,Y=f.mallocFloat32(6*K),$=0,ne=0;ne<K;++ne)for(var ae=q[ne],se=0;se<2;++se){var ce=ae[0];ae.length===2&&(ce=ae[se]);for(var me=re[ce][0],ye=re[ce][1],Te=ee[ce],Ce=1-Te,pe=this.positions[me],fe=this.positions[ye],Oe=0;Oe<3;++Oe)Y[$++]=Te*pe[Oe]+Ce*fe[Oe]}this.contourCount=$/3|0,this.contourPositions.update(Y.subarray(0,$)),f.free(Y)}else this.contourCount=0},R.update=function(B){B=B||{};var W=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=s(W,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=W.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=W.LINEAR,this.texture.setPixels(function(kt,Ot){for(var Pt=w({colormap:kt,nshades:256,format:"rgba"}),et=new Uint8Array(1024),nt=0;nt<256;++nt){for(var Ye=Pt[nt],tt=0;tt<3;++tt)et[4*nt+tt]=Ye[tt];et[4*nt+3]=Ot?255*O(nt/255,Ot):255*Ye[3]}return c(et,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var q=B.cells,re=B.positions;if(re&&q){var ee=[],K=[],Y=[],$=[],ne=[],ae=[],se=[],ce=[],me=[],ye=[],Te=[],Ce=[],pe=[],fe=[];this.cells=q,this.positions=re;var Oe=B.vertexNormals,Se=B.cellNormals,Me=B.vertexNormalsEpsilon===void 0?1e-6:B.vertexNormalsEpsilon,ue=B.faceNormalsEpsilon===void 0?1e-6:B.faceNormalsEpsilon;B.useFacetNormals&&!Se&&(Se=l.faceNormals(q,re,ue)),Se||Oe||(Oe=l.vertexNormals(q,re,Me));var le=B.vertexColors,ie=B.cellColors,ge=B.meshColor||[1,1,1,1],Ae=B.vertexUVs,we=B.vertexIntensity,Ne=B.cellUVs,He=B.cellIntensity,de=1/0,Le=-1/0;if(!Ae&&!Ne)if(we)if(B.vertexIntensityBounds)de=+B.vertexIntensityBounds[0],Le=+B.vertexIntensityBounds[1];else for(var Ee=0;Ee<we.length;++Ee){var Re=we[Ee];de=Math.min(de,Re),Le=Math.max(Le,Re)}else if(He)if(B.cellIntensityBounds)de=+B.cellIntensityBounds[0],Le=+B.cellIntensityBounds[1];else for(Ee=0;Ee<He.length;++Ee)Re=He[Ee],de=Math.min(de,Re),Le=Math.max(Le,Re);else for(Ee=0;Ee<re.length;++Ee)Re=re[Ee][2],de=Math.min(de,Re),Le=Math.max(Le,Re);this.intensity=we||He||function(kt){for(var Ot=kt.length,Pt=new Array(Ot),et=0;et<Ot;++et)Pt[et]=kt[et][2];return Pt}(re),this.pickVertex=!(He||ie);var je=B.pointSizes,Fe=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ee=0;Ee<re.length;++Ee)for(var Xe=re[Ee],Ze=0;Ze<3;++Ze)!isNaN(Xe[Ze])&&isFinite(Xe[Ze])&&(this.bounds[0][Ze]=Math.min(this.bounds[0][Ze],Xe[Ze]),this.bounds[1][Ze]=Math.max(this.bounds[1][Ze],Xe[Ze]));var at=0,lt=0,ot=0;e:for(Ee=0;Ee<q.length;++Ee){var bt=q[Ee];switch(bt.length){case 1:for(Xe=re[ht=bt[0]],Ze=0;Ze<3;++Ze)if(isNaN(Xe[Ze])||!isFinite(Xe[Ze]))continue e;ye.push(Xe[0],Xe[1],Xe[2]),ct=le?le[ht]:ie?ie[Ee]:ge,this.opacityscale&&we?K.push(ct[0],ct[1],ct[2],this.opacity*O((we[ht]-de)/(Le-de),this.opacityscale)):ct.length===3?Te.push(ct[0],ct[1],ct[2],this.opacity):(Te.push(ct[0],ct[1],ct[2],ct[3]*this.opacity),ct[3]<1&&(this.hasAlpha=!0)),Tt=Ae?Ae[ht]:we?[(we[ht]-de)/(Le-de),0]:Ne?Ne[Ee]:He?[(He[Ee]-de)/(Le-de),0]:[(Xe[2]-de)/(Le-de),0],Ce.push(Tt[0],Tt[1]),je?pe.push(je[ht]):pe.push(Fe),fe.push(Ee),ot+=1;break;case 2:for(Ze=0;Ze<2;++Ze){Xe=re[ht=bt[Ze]];for(var wt=0;wt<3;++wt)if(isNaN(Xe[wt])||!isFinite(Xe[wt]))continue e}for(Ze=0;Ze<2;++Ze)Xe=re[ht=bt[Ze]],ae.push(Xe[0],Xe[1],Xe[2]),ct=le?le[ht]:ie?ie[Ee]:ge,this.opacityscale&&we?K.push(ct[0],ct[1],ct[2],this.opacity*O((we[ht]-de)/(Le-de),this.opacityscale)):ct.length===3?se.push(ct[0],ct[1],ct[2],this.opacity):(se.push(ct[0],ct[1],ct[2],ct[3]*this.opacity),ct[3]<1&&(this.hasAlpha=!0)),Tt=Ae?Ae[ht]:we?[(we[ht]-de)/(Le-de),0]:Ne?Ne[Ee]:He?[(He[Ee]-de)/(Le-de),0]:[(Xe[2]-de)/(Le-de),0],ce.push(Tt[0],Tt[1]),me.push(Ee);lt+=1;break;case 3:for(Ze=0;Ze<3;++Ze)for(Xe=re[ht=bt[Ze]],wt=0;wt<3;++wt)if(isNaN(Xe[wt])||!isFinite(Xe[wt]))continue e;for(Ze=0;Ze<3;++Ze){var ht,ct,Tt,Lt;Xe=re[ht=bt[2-Ze]],ee.push(Xe[0],Xe[1],Xe[2]),(ct=le?le[ht]:ie?ie[Ee]:ge)?this.opacityscale&&we?K.push(ct[0],ct[1],ct[2],this.opacity*O((we[ht]-de)/(Le-de),this.opacityscale)):ct.length===3?K.push(ct[0],ct[1],ct[2],this.opacity):(K.push(ct[0],ct[1],ct[2],ct[3]*this.opacity),ct[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1),Tt=Ae?Ae[ht]:we?[(we[ht]-de)/(Le-de),0]:Ne?Ne[Ee]:He?[(He[Ee]-de)/(Le-de),0]:[(Xe[2]-de)/(Le-de),0],$.push(Tt[0],Tt[1]),Lt=Oe?Oe[ht]:Se[Ee],Y.push(Lt[0],Lt[1],Lt[2]),ne.push(Ee)}at+=1}}this.pointCount=ot,this.edgeCount=lt,this.triangleCount=at,this.pointPositions.update(ye),this.pointColors.update(Te),this.pointUVs.update(Ce),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update(ae),this.edgeColors.update(se),this.edgeUVs.update(ce),this.edgeIds.update(new Uint32Array(me)),this.trianglePositions.update(ee),this.triangleColors.update(K),this.triangleUVs.update($),this.triangleNormals.update(Y),this.triangleIds.update(new Uint32Array(ne))}},R.drawTransparent=R.draw=function(B){B=B||{};for(var W=this.gl,q=B.model||C,re=B.view||C,ee=B.projection||C,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)K[0][Y]=Math.max(K[0][Y],this.clipBounds[0][Y]),K[1][Y]=Math.min(K[1][Y],this.clipBounds[1][Y]);var $={model:q,view:re,projection:ee,inverseModel:C.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};$.inverseModel=d($.inverseModel,$.model),W.disable(W.CULL_FACE),this.texture.bind(0);var ne=new Array(16);for(u(ne,$.view,$.model),u(ne,$.projection,ne),d(ne,ne),Y=0;Y<3;++Y)$.eyePosition[Y]=ne[12+Y]/ne[15];var ae,se=ne[15];for(Y=0;Y<3;++Y)se+=this.lightPosition[Y]*ne[4*Y+3];for(Y=0;Y<3;++Y){for(var ce=ne[12+Y],me=0;me<3;++me)ce+=ne[4*me+Y]*this.lightPosition[me];$.lightPosition[Y]=ce/se}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=$,this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=$,this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=$,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=$,this.contourVAO.bind(),W.drawArrays(W.LINES,0,this.contourCount),this.contourVAO.unbind())},R.drawPick=function(B){B=B||{};for(var W=this.gl,q=B.model||C,re=B.view||C,ee=B.projection||C,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)K[0][Y]=Math.max(K[0][Y],this.clipBounds[0][Y]),K[1][Y]=Math.min(K[1][Y],this.clipBounds[1][Y]);this._model=[].slice.call(q),this._view=[].slice.call(re),this._projection=[].slice.call(ee),this._resolution=[W.drawingBufferWidth,W.drawingBufferHeight];var $,ne={model:q,view:re,projection:ee,clipBounds:K,pickId:this.pickId/255};($=this.pickShader).bind(),$.uniforms=ne,this.triangleCount>0&&(this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&(($=this.pointPickShader).bind(),$.uniforms=ne,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind())},R.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var W=B.value[0]+256*B.value[1]+65536*B.value[2],q=this.cells[W],re=this.positions,ee=new Array(q.length),K=0;K<q.length;++K)ee[K]=re[q[K]];var Y=B.coord[0],$=B.coord[1];if(!this.pickVertex){var ne=this.positions[q[0]],ae=this.positions[q[1]],se=this.positions[q[2]],ce=[(ne[0]+ae[0]+se[0])/3,(ne[1]+ae[1]+se[1])/3,(ne[2]+ae[2]+se[2])/3];return{_cellCenter:!0,position:[Y,$],index:W,cell:q,cellId:W,intensity:this.intensity[W],dataCoordinate:ce}}var me=y(ee,[Y*this.pixelRatio,this._resolution[1]-$*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!me)return null;var ye=me[2],Te=0;for(K=0;K<q.length;++K)Te+=ye[K]*this.intensity[q[K]];return{position:me[1],index:q[me[0]],cell:q,cellId:W,intensity:Te,dataCoordinate:this.positions[q[me[0]]]}},R.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},h.exports=function(B,W){if(arguments.length===1&&(B=(W=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(He){var de=i(He,v.vertex,v.fragment);return de.attributes.position.location=0,de.attributes.color.location=2,de.attributes.uv.location=3,de.attributes.normal.location=4,de}(B),re=function(He){var de=i(He,M.vertex,M.fragment);return de.attributes.position.location=0,de.attributes.color.location=2,de.attributes.uv.location=3,de}(B),ee=X(B),K=D(B),Y=V(B),$=j(B),ne=s(B,c(new Uint8Array([255,255,255,255]),[1,1,4]));ne.generateMipmap(),ne.minFilter=B.LINEAR_MIPMAP_LINEAR,ne.magFilter=B.LINEAR;var ae=n(B),se=n(B),ce=n(B),me=n(B),ye=n(B),Te=r(B,[{buffer:ae,type:B.FLOAT,size:3},{buffer:ye,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:B.FLOAT,size:4},{buffer:ce,type:B.FLOAT,size:2},{buffer:me,type:B.FLOAT,size:3}]),Ce=n(B),pe=n(B),fe=n(B),Oe=n(B),Se=r(B,[{buffer:Ce,type:B.FLOAT,size:3},{buffer:Oe,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:B.FLOAT,size:4},{buffer:fe,type:B.FLOAT,size:2}]),Me=n(B),ue=n(B),le=n(B),ie=n(B),ge=n(B),Ae=r(B,[{buffer:Me,type:B.FLOAT,size:3},{buffer:ge,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:B.FLOAT,size:4},{buffer:le,type:B.FLOAT,size:2},{buffer:ie,type:B.FLOAT,size:1}]),we=n(B),Ne=new P(B,ne,q,re,ee,K,Y,$,ae,ye,se,ce,me,Te,Ce,Oe,pe,fe,Se,Me,ge,ue,le,ie,Ae,we,r(B,[{buffer:we,type:B.FLOAT,size:3}]));return Ne.update(W),Ne}},4554:function(h,o,t){h.exports=function(c){var w=c.gl;return new s(c,i(w,[0,0,0,1,1,0,1,1]),n(w,r.boxVert,r.lineFrag))};var i=t(5827),n=t(5158),r=t(2709);function s(c,w,m){this.plot=c,this.vbo=w,this.shader=m}var l,u,d=s.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawBox=(l=[0,0],u=[0,0],function(c,w,m,f,x){var y=this.plot,v=this.shader,M=y.gl;l[0]=c,l[1]=w,u[0]=m,u[1]=f,v.uniforms.lo=l,v.uniforms.hi=u,v.uniforms.color=x,M.drawArrays(M.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(h,o,t){h.exports=function(y){var v=y.gl;return new l(y,i(v),n(v,s.gridVert,s.gridFrag),n(v,s.tickVert,s.gridFrag))};var i=t(5827),n=t(5158),r=t(5070),s=t(2709);function l(y,v,M,p){this.plot=y,this.vbo=v,this.shader=M,this.tickShader=p,this.ticks=[[],[]]}function u(y,v){return y-v}var d,c,w,m,f,x=l.prototype;x.draw=(d=[0,0],c=[0,0],w=[0,0],function(){for(var y=this.plot,v=this.vbo,M=this.shader,p=this.ticks,S=y.gl,A=y._tickBounds,k=y.dataBox,C=y.viewBox,P=y.gridLineWidth,R=y.gridLineColor,O=y.gridLineEnable,X=y.pixelRatio,D=0;D<2;++D){var V=A[D],j=A[D+2]-V,B=.5*(k[D+2]+k[D]),W=k[D+2]-k[D];c[D]=2*j/W,d[D]=2*(V-B)/W}M.bind(),v.bind(),M.attributes.dataCoord.pointer(),M.uniforms.dataShift=d,M.uniforms.dataScale=c;var q=0;for(D=0;D<2;++D){w[0]=w[1]=0,w[D]=1,M.uniforms.dataAxis=w,M.uniforms.lineWidth=P[D]/(C[D+2]-C[D])*X,M.uniforms.color=R[D];var re=6*p[D].length;O[D]&&re&&S.drawArrays(S.TRIANGLES,q,re),q+=re}}),x.drawTickMarks=function(){var y=[0,0],v=[0,0],M=[1,0],p=[0,1],S=[0,0],A=[0,0];return function(){for(var k=this.plot,C=this.vbo,P=this.tickShader,R=this.ticks,O=k.gl,X=k._tickBounds,D=k.dataBox,V=k.viewBox,j=k.pixelRatio,B=k.screenBox,W=B[2]-B[0],q=B[3]-B[1],re=V[2]-V[0],ee=V[3]-V[1],K=0;K<2;++K){var Y=X[K],$=X[K+2]-Y,ne=.5*(D[K+2]+D[K]),ae=D[K+2]-D[K];v[K]=2*$/ae,y[K]=2*(Y-ne)/ae}v[0]*=re/W,y[0]*=re/W,v[1]*=ee/q,y[1]*=ee/q,P.bind(),C.bind(),P.attributes.dataCoord.pointer();var se=P.uniforms;se.dataShift=y,se.dataScale=v;var ce=k.tickMarkLength,me=k.tickMarkWidth,ye=k.tickMarkColor,Te=6*R[0].length,Ce=Math.min(r.ge(R[0],(D[0]-X[0])/(X[2]-X[0]),u),R[0].length),pe=Math.min(r.gt(R[0],(D[2]-X[0])/(X[2]-X[0]),u),R[0].length),fe=0+6*Ce,Oe=6*Math.max(0,pe-Ce),Se=Math.min(r.ge(R[1],(D[1]-X[1])/(X[3]-X[1]),u),R[1].length),Me=Math.min(r.gt(R[1],(D[3]-X[1])/(X[3]-X[1]),u),R[1].length),ue=Te+6*Se,le=6*Math.max(0,Me-Se);S[0]=2*(V[0]-ce[1])/W-1,S[1]=(V[3]+V[1])/q-1,A[0]=ce[1]*j/W,A[1]=me[1]*j/q,le&&(se.color=ye[1],se.tickScale=A,se.dataAxis=p,se.screenOffset=S,O.drawArrays(O.TRIANGLES,ue,le)),S[0]=(V[2]+V[0])/W-1,S[1]=2*(V[1]-ce[0])/q-1,A[0]=me[0]*j/W,A[1]=ce[0]*j/q,Oe&&(se.color=ye[0],se.tickScale=A,se.dataAxis=M,se.screenOffset=S,O.drawArrays(O.TRIANGLES,fe,Oe)),S[0]=2*(V[2]+ce[3])/W-1,S[1]=(V[3]+V[1])/q-1,A[0]=ce[3]*j/W,A[1]=me[3]*j/q,le&&(se.color=ye[3],se.tickScale=A,se.dataAxis=p,se.screenOffset=S,O.drawArrays(O.TRIANGLES,ue,le)),S[0]=(V[2]+V[0])/W-1,S[1]=2*(V[3]+ce[2])/q-1,A[0]=me[2]*j/W,A[1]=ce[2]*j/q,Oe&&(se.color=ye[2],se.tickScale=A,se.dataAxis=M,se.screenOffset=S,O.drawArrays(O.TRIANGLES,fe,Oe))}}(),x.update=(m=[1,1,-1,-1,1,-1],f=[1,-1,1,1,-1,-1],function(y){for(var v=y.ticks,M=y.bounds,p=new Float32Array(18*(v[0].length+v[1].length)),S=(this.plot.zeroLineEnable,0),A=[[],[]],k=0;k<2;++k)for(var C=A[k],P=v[k],R=M[k],O=M[k+2],X=0;X<P.length;++X){var D=(P[X].x-R)/(O-R);C.push(D);for(var V=0;V<6;++V)p[S++]=D,p[S++]=m[V],p[S++]=f[V]}this.ticks=A,this.vbo.update(p)}),x.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(h,o,t){h.exports=function(c){var w=c.gl;return new s(c,i(w,[-1,-1,-1,1,1,-1,1,1]),n(w,r.lineVert,r.lineFrag))};var i=t(5827),n=t(5158),r=t(2709);function s(c,w,m){this.plot=c,this.vbo=w,this.shader=m}var l,u,d=s.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawLine=(l=[0,0],u=[0,0],function(c,w,m,f,x,y){var v=this.plot,M=this.shader,p=v.gl;l[0]=c,l[1]=w,u[0]=m,u[1]=f,M.uniforms.start=l,M.uniforms.end=u,M.uniforms.width=x*v.pixelRatio,M.uniforms.color=y,p.drawArrays(p.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(h,o,t){var i=t(6832),n=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);h.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(h,o,t){h.exports=function(v){var M=v.gl;return new u(v,i(M),n(M,l.textVert,l.textFrag))};var i=t(5827),n=t(5158),r=t(6946),s=t(5070),l=t(2709);function u(v,M,p){this.plot=v,this.vbo=M,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var d,c,w,m,f,x,y=u.prototype;y.drawTicks=(d=[0,0],c=[0,0],w=[0,0],function(v){var M=this.plot,p=this.shader,S=this.tickX[v],A=this.tickOffset[v],k=M.gl,C=M.viewBox,P=M.dataBox,R=M.screenBox,O=M.pixelRatio,X=M.tickEnable,D=M.tickPad,V=M.tickColor,j=M.tickAngle,B=M.labelEnable,W=M.labelPad,q=M.labelColor,re=M.labelAngle,ee=this.labelOffset[v],K=this.labelCount[v],Y=s.lt(S,P[v]),$=s.le(S,P[v+2]);d[0]=d[1]=0,d[v]=1,c[v]=(C[2+v]+C[v])/(R[2+v]-R[v])-1;var ne=2/R[2+(1^v)]-R[1^v];c[1^v]=ne*C[1^v]-1,X[v]&&(c[1^v]-=ne*O*D[v],Y<$&&A[$]>A[Y]&&(p.uniforms.dataAxis=d,p.uniforms.screenOffset=c,p.uniforms.color=V[v],p.uniforms.angle=j[v],k.drawArrays(k.TRIANGLES,A[Y],A[$]-A[Y]))),B[v]&&K&&(c[1^v]-=ne*O*W[v],p.uniforms.dataAxis=w,p.uniforms.screenOffset=c,p.uniforms.color=q[v],p.uniforms.angle=re[v],k.drawArrays(k.TRIANGLES,ee,K)),c[1^v]=ne*C[2+(1^v)]-1,X[v+2]&&(c[1^v]+=ne*O*D[v+2],Y<$&&A[$]>A[Y]&&(p.uniforms.dataAxis=d,p.uniforms.screenOffset=c,p.uniforms.color=V[v+2],p.uniforms.angle=j[v+2],k.drawArrays(k.TRIANGLES,A[Y],A[$]-A[Y]))),B[v+2]&&K&&(c[1^v]+=ne*O*W[v+2],p.uniforms.dataAxis=w,p.uniforms.screenOffset=c,p.uniforms.color=q[v+2],p.uniforms.angle=re[v+2],k.drawArrays(k.TRIANGLES,ee,K))}),y.drawTitle=function(){var v=[0,0],M=[0,0];return function(){var p=this.plot,S=this.shader,A=p.gl,k=p.screenBox,C=p.titleCenter,P=p.titleAngle,R=p.titleColor,O=p.pixelRatio;if(this.titleCount){for(var X=0;X<2;++X)M[X]=2*(C[X]*O-k[X])/(k[2+X]-k[X])-1;S.bind(),S.uniforms.dataAxis=v,S.uniforms.screenOffset=M,S.uniforms.angle=P,S.uniforms.color=R,A.drawArrays(A.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(m=[0,0],f=[0,0],x=[0,0],function(){var v=this.plot,M=this.shader,p=v._tickBounds,S=v.dataBox,A=v.screenBox,k=v.viewBox;M.bind();for(var C=0;C<2;++C){var P=p[C],R=p[C+2]-P,O=.5*(S[C+2]+S[C]),X=S[C+2]-S[C],D=k[C],V=k[C+2]-D,j=A[C],B=A[C+2]-j;f[C]=2*R/X*V/B,m[C]=2*(P-O)/X*V/B}x[1]=2*v.pixelRatio/(A[3]-A[1]),x[0]=x[1]*(A[3]-A[1])/(A[2]-A[0]),M.uniforms.dataScale=f,M.uniforms.dataShift=m,M.uniforms.textScale=x,this.vbo.bind(),M.attributes.textCoordinate.pointer()}),y.update=function(v){var M,p,S,A,k,C=[],P=v.ticks,R=v.bounds;for(k=0;k<2;++k){var O=[Math.floor(C.length/3)],X=[-1/0],D=P[k];for(M=0;M<D.length;++M){var V=D[M],j=V.x,B=V.text,W=V.font||"sans-serif";A=V.fontSize||12;for(var q=1/(R[k+2]-R[k]),re=R[k],ee=B.split(`
`),K=0;K<ee.length;K++)for(S=r(W,ee[K]).data,p=0;p<S.length;p+=2)C.push(S[p]*A,-S[p+1]*A-K*A*1.2,(j-re)*q);O.push(Math.floor(C.length/3)),X.push(j)}this.tickOffset[k]=O,this.tickX[k]=X}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(C.length/3),S=r(v.labelFont[k],v.labels[k],{textAlign:"center"}).data,A=v.labelSize[k],M=0;M<S.length;M+=2)C.push(S[M]*A,-S[M+1]*A,0);this.labelCount[k]=Math.floor(C.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(C.length/3),S=r(v.titleFont,v.title).data,A=v.titleSize,M=0;M<S.length;M+=2)C.push(S[M]*A,-S[M+1]*A,0);this.titleCount=Math.floor(C.length/3)-this.titleOffset,this.vbo.update(C)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(h,o,t){h.exports=function(m){var f=m.gl,x=new u(f,i(f,[f.drawingBufferWidth,f.drawingBufferHeight]));return x.grid=n(x),x.text=r(x),x.line=s(x),x.box=l(x),x.update(m),x};var i=t(2611),n=t(3016),r=t(5613),s=t(1154),l=t(4554);function u(m,f){this.gl=m,this.pickBuffer=f,this.screenBox=[0,0,m.drawingBufferWidth,m.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var d=u.prototype;function c(m){for(var f=m.slice(),x=0;x<f.length;++x)f[x]=f[x].slice();return f}function w(m,f){return m.x-f.x}d.setDirty=function(){this.dirty=this.pickDirty=!0},d.setOverlayDirty=function(){this.dirty=!0},d.nextDepthValue=function(){return this._depthCounter++/65536},d.draw=function(){var m=this.gl,f=this.screenBox,x=this.viewBox,y=this.dataBox,v=this.pixelRatio,M=this.grid,p=this.line,S=this.text,A=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,m.bindFramebuffer(m.FRAMEBUFFER,null),m.enable(m.SCISSOR_TEST),m.disable(m.DEPTH_TEST),m.depthFunc(m.LESS),m.depthMask(!1),m.enable(m.BLEND),m.blendEquation(m.FUNC_ADD,m.FUNC_ADD),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA),this.borderColor){m.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var k=this.borderColor;m.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT)}m.scissor(x[0],x[1],x[2]-x[0],x[3]-x[1]),m.viewport(x[0],x[1],x[2]-x[0],x[3]-x[1]);var C=this.backgroundColor;m.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),m.clear(m.COLOR_BUFFER_BIT),M.draw();var P=this.zeroLineEnable,R=this.zeroLineColor,O=this.zeroLineWidth;if(P[0]||P[1]){p.bind();for(var X=0;X<2;++X)if(P[X]&&y[X]<=0&&y[X+2]>=0){var D=f[X]-y[X]*(f[X+2]-f[X])/(y[X+2]-y[X]);X===0?p.drawLine(D,f[1],D,f[3],O[X],R[X]):p.drawLine(f[0],D,f[2],D,O[X],R[X])}}for(X=0;X<A.length;++X)A[X].draw();m.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),m.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),p.bind();var V=this.borderLineEnable,j=this.borderLineWidth,B=this.borderLineColor;for(V[1]&&p.drawLine(x[0],x[1]-.5*j[1]*v,x[0],x[3]+.5*j[3]*v,j[1],B[1]),V[0]&&p.drawLine(x[0]-.5*j[0]*v,x[1],x[2]+.5*j[2]*v,x[1],j[0],B[0]),V[3]&&p.drawLine(x[2],x[1]-.5*j[1]*v,x[2],x[3]+.5*j[3]*v,j[3],B[3]),V[2]&&p.drawLine(x[0]-.5*j[0]*v,x[3],x[2]+.5*j[2]*v,x[3],j[2],B[2]),S.bind(),X=0;X<2;++X)S.drawTicks(X);this.titleEnable&&S.drawTitle();var W=this.overlays;for(X=0;X<W.length;++X)W[X].draw();m.disable(m.SCISSOR_TEST),m.disable(m.BLEND),m.depthMask(!0)}},d.drawPick=function(){if(!this.static){var m=this.pickBuffer;this.gl,this._pickTimeout=null,m.begin();for(var f=1,x=this.objects,y=0;y<x.length;++y)f=x[y].drawPick(f);m.end()}},d.pick=function(m,f){if(!this.static){var x=this.pixelRatio,y=this.pickPixelRatio,v=this.viewBox,M=0|Math.round((m-v[0]/x)*y),p=0|Math.round((f-v[1]/x)*y),S=this.pickBuffer.query(M,p,this.pickRadius);if(!S)return null;for(var A=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),k=this.objects,C=0;C<k.length;++C){var P=k[C].pick(M,p,A);if(P)return P}return null}},d.setScreenBox=function(m){var f=this.screenBox,x=this.pixelRatio;f[0]=0|Math.round(m[0]*x),f[1]=0|Math.round(m[1]*x),f[2]=0|Math.round(m[2]*x),f[3]=0|Math.round(m[3]*x),this.setDirty()},d.setDataBox=function(m){var f=this.dataBox;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3])&&(f[0]=m[0],f[1]=m[1],f[2]=m[2],f[3]=m[3],this.setDirty())},d.setViewBox=function(m){var f=this.pixelRatio,x=this.viewBox;x[0]=0|Math.round(m[0]*f),x[1]=0|Math.round(m[1]*f),x[2]=0|Math.round(m[2]*f),x[3]=0|Math.round(m[3]*f);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((m[2]-m[0])*y),0|Math.round((m[3]-m[1])*y)],this.setDirty()},d.update=function(m){m=m||{};var f=this.gl;this.pixelRatio=m.pixelRatio||1;var x=this.pixelRatio;this.pickPixelRatio=Math.max(x,1),this.setScreenBox(m.screenBox||[0,0,f.drawingBufferWidth/x,f.drawingBufferHeight/x]),this.screenBox,this.setViewBox(m.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/x,.125*(this.screenBox[3]-this.screenBox[1])/x,.875*(this.screenBox[2]-this.screenBox[0])/x,.875*(this.screenBox[3]-this.screenBox[1])/x]);var y=this.viewBox,v=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(m.dataBox||[-10,-10/v,10,10/v]),this.borderColor=m.borderColor!==!1&&(m.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(m.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(m.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(m.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(m.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(m.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(m.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(m.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(m.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(m.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(m.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(m.titleCenter||[.5*(y[0]+y[2])/x,(y[3]+120)/x]).slice(),this.titleEnable=!("titleEnable"in m)||!!m.titleEnable,this.titleAngle=m.titleAngle||0,this.titleColor=(m.titleColor||[0,0,0,1]).slice(),this.labelPad=(m.labelPad||[15,15,15,15]).slice(),this.labelAngle=(m.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(m.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(m.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(m.tickPad||[15,15,15,15]).slice(),this.tickAngle=(m.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(m.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(m.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(m.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(m.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(m.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var M=m.ticks||[[],[]],p=this._tickBounds;p[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var S=0;S<2;++S){var A=M[S].slice(0);A.length!==0&&(A.sort(w),p[S]=Math.min(p[S],A[0].x),p[S+2]=Math.max(p[S+2],A[A.length-1].x))}this.grid.update({bounds:p,ticks:M}),this.text.update({bounds:p,ticks:M,labels:m.labels||["x","y"],labelSize:m.labelSize||[12,12],labelFont:m.labelFont||["sans-serif","sans-serif"],title:m.title||"",titleSize:m.titleSize||18,titleFont:m.titleFont||"sans-serif"}),this.static=!!m.static,this.setDirty()},d.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var m=this.objects.length-1;m>=0;--m)this.objects[m].dispose();for(this.objects.length=0,m=this.overlays.length-1;m>=0;--m)this.overlays[m].dispose();this.overlays.length=0,this.gl=null},d.addObject=function(m){this.objects.indexOf(m)<0&&(this.objects.push(m),this.setDirty())},d.removeObject=function(m){for(var f=this.objects,x=0;x<f.length;++x)if(f[x]===m){f.splice(x,1),this.setDirty();break}},d.addOverlay=function(m){this.overlays.indexOf(m)<0&&(this.overlays.push(m),this.setOverlayDirty())},d.removeOverlay=function(m){for(var f=this.overlays,x=0;x<f.length;++x)if(f[x]===m){f.splice(x,1),this.setOverlayDirty();break}}},4296:function(h,o,t){h.exports=function(d,c){d=d||document.body;var w=[.01,1/0];"distanceLimits"in(c=c||{})&&(w[0]=c.distanceLimits[0],w[1]=c.distanceLimits[1]),"zoomMin"in c&&(w[0]=c.zoomMin),"zoomMax"in c&&(w[1]=c.zoomMax);var m=n({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:w}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,y=d.clientWidth,v=d.clientHeight,M={keyBindingMode:"rotate",enableWheel:!0,view:m,element:d,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:m.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var p=i(),S=this.delay,A=p-2*S;m.idle(p-S),m.recalcMatrix(A),m.flush(p-(100+2*S));for(var k=!0,C=m.computedMatrix,P=0;P<16;++P)k=k&&f[P]===C[P],f[P]=C[P];var R=d.clientWidth===y&&d.clientHeight===v;return y=d.clientWidth,v=d.clientHeight,k?!R:(x=Math.exp(m.computedRadius[0]),!0)},lookAt:function(p,S,A){m.lookAt(m.lastT(),p,S,A)},rotate:function(p,S,A){m.rotate(m.lastT(),p,S,A)},pan:function(p,S,A){m.pan(m.lastT(),p,S,A)},translate:function(p,S,A){m.translate(m.lastT(),p,S,A)}};return Object.defineProperties(M,{matrix:{get:function(){return m.computedMatrix},set:function(p){return m.setMatrix(m.lastT(),p),m.computedMatrix},enumerable:!0},mode:{get:function(){return m.getMode()},set:function(p){var S=m.computedUp.slice(),A=m.computedEye.slice(),k=m.computedCenter.slice();if(m.setMode(p),p==="turntable"){var C=i();m._active.lookAt(C,A,k,S),m._active.lookAt(C+500,A,k,[0,0,1]),m._active.flush(C)}return m.getMode()},enumerable:!0},center:{get:function(){return m.computedCenter},set:function(p){return m.lookAt(m.lastT(),null,p),m.computedCenter},enumerable:!0},eye:{get:function(){return m.computedEye},set:function(p){return m.lookAt(m.lastT(),p),m.computedEye},enumerable:!0},up:{get:function(){return m.computedUp},set:function(p){return m.lookAt(m.lastT(),null,null,p),m.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(p){return m.setDistance(m.lastT(),p),p},enumerable:!0},distanceLimits:{get:function(){return m.getDistanceLimits(w)},set:function(p){return m.setDistanceLimits(p),p},enumerable:!0}}),d.addEventListener("contextmenu",function(p){return p.preventDefault(),!1}),M._lastX=-1,M._lastY=-1,M._lastMods={shift:!1,control:!1,alt:!1,meta:!1},M.enableMouseListeners=function(){function p(S,A,k,C){var P=M.keyBindingMode;if(P!==!1){var R=P==="rotate",O=P==="pan",X=P==="zoom",D=!!C.control,V=!!C.alt,j=!!C.shift,B=!!(1&S),W=!!(2&S),q=!!(4&S),re=1/d.clientHeight,ee=re*(A-M._lastX),K=re*(k-M._lastY),Y=M.flipX?1:-1,$=M.flipY?1:-1,ne=Math.PI*M.rotateSpeed,ae=i();if(M._lastX!==-1&&M._lastY!==-1&&((R&&B&&!D&&!V&&!j||B&&!D&&!V&&j)&&m.rotate(ae,Y*ne*ee,-$*ne*K,0),(O&&B&&!D&&!V&&!j||W||B&&D&&!V&&!j)&&m.pan(ae,-M.translateSpeed*ee*x,M.translateSpeed*K*x,0),X&&B&&!D&&!V&&!j||q||B&&!D&&V&&!j)){var se=-M.zoomSpeed*K/window.innerHeight*(ae-m.lastT())*100;m.pan(ae,0,0,x*(Math.exp(se)-1))}return M._lastX=A,M._lastY=k,M._lastMods=C,!0}}M.mouseListener=r(d,p),d.addEventListener("touchstart",function(S){var A=l(S.changedTouches[0],d);p(0,A[0],A[1],M._lastMods),p(1,A[0],A[1],M._lastMods)},!!u&&{passive:!0}),d.addEventListener("touchmove",function(S){var A=l(S.changedTouches[0],d);p(1,A[0],A[1],M._lastMods),S.preventDefault()},!!u&&{passive:!1}),d.addEventListener("touchend",function(S){p(0,M._lastX,M._lastY,M._lastMods)},!!u&&{passive:!0}),M.wheelListener=s(d,function(S,A){if(M.keyBindingMode!==!1&&M.enableWheel){var k=M.flipX?1:-1,C=M.flipY?1:-1,P=i();if(Math.abs(S)>Math.abs(A))m.rotate(P,0,0,-S*k*Math.PI*M.rotateSpeed/window.innerWidth);else if(!M._ortho){var R=-M.zoomSpeed*C*A/window.innerHeight*(P-m.lastT())/20;m.pan(P,0,0,x*(Math.exp(R)-1))}}},!0)},M.enableMouseListeners(),M};var i=t(8161),n=t(1152),r=t(6145),s=t(6475),l=t(2565),u=t(5233)},8245:function(h,o,t){var i=t(6832),n=t(5158),r=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),s=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);h.exports=function(l){return n(l,r,s,null,[{name:"position",type:"vec2"}])}},1059:function(h,o,t){var i=t(4296),n=t(7453),r=t(2771),s=t(6496),l=t(2611),u=t(4234),d=t(8126),c=t(6145),w=t(1120),m=t(5268),f=t(8245),x=t(2321)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(p){var S=Math.round(Math.log(Math.abs(p))/Math.log(10));if(S<0){var A=Math.round(Math.pow(10,-S));return Math.ceil(p*A)/A}return S>0?(A=Math.round(Math.pow(10,S)),Math.ceil(p/A)*A):Math.ceil(p)}function M(p){return typeof p!="boolean"||p}h.exports={createScene:function(p){(p=p||{}).camera=p.camera||{};var S=p.canvas;S||(S=document.createElement("canvas"),p.container?p.container.appendChild(S):document.body.appendChild(S));var A=p.gl;if(A||(p.glOptions&&(x=!!p.glOptions.preserveDrawingBuffer),A=function(Oe,Se){var Me=null;try{(Me=Oe.getContext("webgl",Se))||(Me=Oe.getContext("experimental-webgl",Se))}catch{return null}return Me}(S,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:x})),!A)throw new Error("webgl not supported");var k=p.bounds||[[-10,-10,-10],[10,10,10]],C=new y,P=u(A,A.drawingBufferWidth,A.drawingBufferHeight,{preferFloat:!x}),R=f(A),O=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,X={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:O},D=p.axes||{},V=n(A,D);V.enable=!D.disable;var j=p.spikes||{},B=s(A,j),W=[],q=[],re=[],ee=[],K=!0,Y=!0,$={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},ne=(Y=!0,[A.drawingBufferWidth,A.drawingBufferHeight]),ae=p.cameraObject||i(S,X),se={gl:A,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:S,selection:C,camera:ae,axes:V,axesPixels:null,spikes:B,bounds:k,objects:W,shape:ne,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:M(p.autoResize),autoBounds:M(p.autoBounds),autoScale:!!p.autoScale,autoCenter:M(p.autoCenter),clipToBounds:M(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:$,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Oe){this.aspect[0]=Oe.x,this.aspect[1]=Oe.y,this.aspect[2]=Oe.z,Y=!0},setBounds:function(Oe,Se){this.bounds[0][Oe]=Se.min,this.bounds[1][Oe]=Se.max},setClearColor:function(Oe){this.clearColor=Oe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ce=[A.drawingBufferWidth/se.pixelRatio|0,A.drawingBufferHeight/se.pixelRatio|0];function me(){if(!se._stopped&&se.autoResize){var Oe=S.parentNode,Se=1,Me=1;Oe&&Oe!==document.body?(Se=Oe.clientWidth,Me=Oe.clientHeight):(Se=window.innerWidth,Me=window.innerHeight);var ue=0|Math.ceil(Se*se.pixelRatio),le=0|Math.ceil(Me*se.pixelRatio);if(ue!==S.width||le!==S.height){S.width=ue,S.height=le;var ie=S.style;ie.position=ie.position||"absolute",ie.left="0px",ie.top="0px",ie.width=Se+"px",ie.height=Me+"px",K=!0}}}function ye(){for(var Oe=W.length,Se=ee.length,Me=0;Me<Se;++Me)re[Me]=0;e:for(Me=0;Me<Oe;++Me){var ue=W[Me],le=ue.pickSlots;if(le){for(var ie=0;ie<Se;++ie)if(re[ie]+le<255){q[Me]=ie,ue.setPickBase(re[ie]+1),re[ie]+=le;continue e}var ge=l(A,ne);q[Me]=Se,ee.push(ge),re.push(le),ue.setPickBase(1),Se+=1}else q[Me]=-1}for(;Se>0&&re[Se-1]===0;)re.pop(),ee.pop().dispose()}function Te(){if(se.contextLost)return!0;A.isContextLost()&&(se.contextLost=!0,se.mouseListener.enabled=!1,se.selection.object=null,se.oncontextloss&&se.oncontextloss())}se.autoResize&&me(),window.addEventListener("resize",me),se.update=function(Oe){se._stopped||(K=!0,Y=!0)},se.add=function(Oe){se._stopped||(Oe.axes=V,W.push(Oe),q.push(-1),K=!0,Y=!0,ye())},se.remove=function(Oe){if(!se._stopped){var Se=W.indexOf(Oe);Se<0||(W.splice(Se,1),q.pop(),K=!0,Y=!0,ye())}},se.dispose=function(){if(!se._stopped&&(se._stopped=!0,window.removeEventListener("resize",me),S.removeEventListener("webglcontextlost",Te),se.mouseListener.enabled=!1,!se.contextLost)){V.dispose(),B.dispose();for(var Oe=0;Oe<W.length;++Oe)W[Oe].dispose();for(P.dispose(),Oe=0;Oe<ee.length;++Oe)ee[Oe].dispose();R.dispose(),A=null,V=null,B=null,W=[]}},se._mouseRotating=!1,se._prevButtons=0,se.enableMouseListeners=function(){se.mouseListener=c(S,function(Oe,Se,Me){if(!se._stopped){var ue=ee.length,le=W.length,ie=C.object;C.distance=1/0,C.mouse[0]=Se,C.mouse[1]=Me,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var ge=!1;if(Oe&&se._prevButtons)se._mouseRotating=!0;else{se._mouseRotating&&(Y=!0),se._mouseRotating=!1;for(var Ae=0;Ae<ue;++Ae){var we=ee[Ae].query(Se,ce[1]-Me-1,se.pickRadius);if(we){if(we.distance>C.distance)continue;for(var Ne=0;Ne<le;++Ne){var He=W[Ne];if(q[Ne]===Ae){var de=He.pick(we);de&&(C.buttons=Oe,C.screen=we.coord,C.distance=we.distance,C.object=He,C.index=de.distance,C.dataPosition=de.position,C.dataCoordinate=de.dataCoordinate,C.data=de,ge=!0)}}}}}ie&&ie!==C.object&&(ie.highlight&&ie.highlight(null),K=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),K=!0),(ge=ge||C.object!==ie)&&se.onselect&&se.onselect(C),1&Oe&&!(1&se._prevButtons)&&se.onclick&&se.onclick(C),se._prevButtons=Oe}})},S.addEventListener("webglcontextlost",Te);var Ce=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[Ce[0].slice(),Ce[1].slice()];function fe(){if(!Te()){me();var Oe=se.camera.tick();$.view=se.camera.matrix,K=K||Oe,Y=Y||Oe,V.pixelRatio=se.pixelRatio,B.pixelRatio=se.pixelRatio;var Se=W.length,Me=Ce[0],ue=Ce[1];Me[0]=Me[1]=Me[2]=1/0,ue[0]=ue[1]=ue[2]=-1/0;for(var le=0;le<Se;++le){(Fe=W[le]).pixelRatio=se.pixelRatio,Fe.axes=se.axes,K=K||!!Fe.dirty,Y=Y||!!Fe.dirty;var ie=Fe.bounds;if(ie)for(var ge=ie[0],Ae=ie[1],we=0;we<3;++we)Me[we]=Math.min(Me[we],ge[we]),ue[we]=Math.max(ue[we],Ae[we])}var Ne=se.bounds;if(se.autoBounds)for(we=0;we<3;++we){if(ue[we]<Me[we])Me[we]=-1,ue[we]=1;else{Me[we]===ue[we]&&(Me[we]-=1,ue[we]+=1);var He=.05*(ue[we]-Me[we]);Me[we]=Me[we]-He,ue[we]=ue[we]+He}Ne[0][we]=Me[we],Ne[1][we]=ue[we]}var de=!1;for(we=0;we<3;++we)de=de||pe[0][we]!==Ne[0][we]||pe[1][we]!==Ne[1][we],pe[0][we]=Ne[0][we],pe[1][we]=Ne[1][we];if(Y=Y||de,K=K||de){if(de){var Le=[0,0,0];for(le=0;le<3;++le)Le[le]=v((Ne[1][le]-Ne[0][le])/10);V.autoTicks?V.update({bounds:Ne,tickSpacing:Le}):V.update({bounds:Ne})}var Ee=A.drawingBufferWidth,Re=A.drawingBufferHeight;for(ne[0]=Ee,ne[1]=Re,ce[0]=0|Math.max(Ee/se.pixelRatio,1),ce[1]=0|Math.max(Re/se.pixelRatio,1),function(Xe,Ze){var at=Xe.bounds,lt=Xe.cameraParams,ot=lt.projection,bt=lt.model,wt=Xe.gl.drawingBufferWidth,ht=Xe.gl.drawingBufferHeight,ct=Xe.zNear,Tt=Xe.zFar,Lt=Xe.fovy,kt=wt/ht;Ze?(m(ot,-kt,kt,-1,1,ct,Tt),lt._ortho=!0):(w(ot,Lt,kt,ct,Tt),lt._ortho=!1);for(var Ot=0;Ot<16;++Ot)bt[Ot]=0;bt[15]=1;var Pt=0;for(Ot=0;Ot<3;++Ot)Pt=Math.max(Pt,at[1][Ot]-at[0][Ot]);for(Ot=0;Ot<3;++Ot)Xe.autoScale?bt[5*Ot]=Xe.aspect[Ot]/(at[1][Ot]-at[0][Ot]):bt[5*Ot]=1/Pt,Xe.autoCenter&&(bt[12+Ot]=.5*-bt[5*Ot]*(at[0][Ot]+at[1][Ot]))}(se,O),le=0;le<Se;++le)(Fe=W[le]).axesBounds=Ne,se.clipToBounds&&(Fe.clipBounds=Ne);C.object&&(se.snapToData?B.position=C.dataCoordinate:B.position=C.dataPosition,B.bounds=Ne),Y&&(Y=!1,function(){if(!Te()){A.colorMask(!0,!0,!0,!0),A.depthMask(!0),A.disable(A.BLEND),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL);for(var Xe=W.length,Ze=ee.length,at=0;at<Ze;++at){var lt=ee[at];lt.shape=ce,lt.begin();for(var ot=0;ot<Xe;++ot)if(q[ot]===at){var bt=W[ot];bt.drawPick&&(bt.pixelRatio=1,bt.drawPick($))}lt.end()}}}()),se.axesPixels=r(se.axes,$,Ee,Re),se.onrender&&se.onrender(),A.bindFramebuffer(A.FRAMEBUFFER,null),A.viewport(0,0,Ee,Re),se.clearRGBA(),A.depthMask(!0),A.colorMask(!0,!0,!0,!0),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL),A.disable(A.BLEND),A.disable(A.CULL_FACE);var je=!1;for(V.enable&&(je=je||V.isTransparent(),V.draw($)),B.axes=V,C.object&&B.draw($),A.disable(A.CULL_FACE),le=0;le<Se;++le)(Fe=W[le]).axes=V,Fe.pixelRatio=se.pixelRatio,Fe.isOpaque&&Fe.isOpaque()&&Fe.draw($),Fe.isTransparent&&Fe.isTransparent()&&(je=!0);if(je){for(P.shape=ne,P.bind(),A.clear(A.DEPTH_BUFFER_BIT),A.colorMask(!1,!1,!1,!1),A.depthMask(!0),A.depthFunc(A.LESS),V.enable&&V.isTransparent()&&V.drawTransparent($),le=0;le<Se;++le)(Fe=W[le]).isOpaque&&Fe.isOpaque()&&Fe.draw($);for(A.enable(A.BLEND),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.colorMask(!0,!0,!0,!0),A.depthMask(!1),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),V.isTransparent()&&V.drawTransparent($),le=0;le<Se;++le){var Fe;(Fe=W[le]).isTransparent&&Fe.isTransparent()&&Fe.drawTransparent($)}A.bindFramebuffer(A.FRAMEBUFFER,null),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.disable(A.DEPTH_TEST),R.bind(),P.color[0].bind(0),R.uniforms.accumBuffer=0,d(A),A.disable(A.BLEND)}for(K=!1,le=0;le<Se;++le)W[le].dirty=!1}}}return se.enableMouseListeners(),function Oe(){se._stopped||se.contextLost||(fe(),requestAnimationFrame(Oe))}(),se.redraw=function(){se._stopped||(K=!0,fe())},se},createCamera:i}},8023:function(h,o,t){var i=t(6832);o.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),o.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),o.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),o.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(h,o,t){var i=t(5158),n=t(5827),r=t(5306),s=t(8023);function l(w,m,f,x,y){this.plot=w,this.offsetBuffer=m,this.pickBuffer=f,this.shader=x,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}h.exports=function(w,m){var f=w.gl,x=new l(w,n(f),n(f),i(f,s.pointVertex,s.pointFragment),i(f,s.pickVertex,s.pickFragment));return x.update(m),w.addObject(x),x};var u,d,c=l.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(w){var m;function f(A,k){return A in w?w[A]:k}w=w||{},this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var x=w.positions.length>>>1,y=w.positions instanceof Float32Array,v=w.idToIndex instanceof Int32Array&&w.idToIndex.length>=x,M=w.positions,p=y?M:r.mallocFloat32(M.length),S=v?w.idToIndex:r.mallocInt32(x);if(y||p.set(M),!v)for(p.set(M),m=0;m<x;m++)S[m]=m;this.points=M,this.offsetBuffer.update(p),this.pickBuffer.update(S),y||r.free(p),v||r.free(S),this.pointCount=x,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(w){var m=w!==void 0,f=m?this.pickShader:this.shader,x=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return w;var v=y[2]-y[0],M=y[3]-y[1],p=function(C,P){var R,O=0,X=C.length>>>1;for(R=0;R<X;R++){var D=C[2*R],V=C[2*R+1];D>=P[0]&&D<=P[2]&&V>=P[1]&&V<=P[3]&&O++}return O}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(p,.33333)));u[0]=2/v,u[4]=2/M,u[6]=-2*y[0]/v-1,u[7]=-2*y[1]/M-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=u,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=S<5,f.uniforms.pointSize=S,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),m&&(d[0]=255&w,d[1]=w>>8&255,d[2]=w>>16&255,d[3]=w>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(x.UNSIGNED_BYTE),f.uniforms.pickOffset=d,this.pickOffset=w);var A=x.getParameter(x.BLEND),k=x.getParameter(x.DITHER);return A&&!this.blend&&x.disable(x.BLEND),k&&x.disable(x.DITHER),x.drawArrays(x.POINTS,0,this.pointCount),A&&!this.blend&&x.enable(x.BLEND),k&&x.enable(x.DITHER),w+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(w,m,f){var x=this.pickOffset,y=this.pointCount;if(f<x||f>=x+y)return null;var v=f-x,M=this.points;return{object:this,pointId:v,dataCoord:[M[2*v],M[2*v+1]]}}},6093:function(h){h.exports=function(o,t,i,n){var r,s,l,u,d,c=t[0],w=t[1],m=t[2],f=t[3],x=i[0],y=i[1],v=i[2],M=i[3];return(s=c*x+w*y+m*v+f*M)<0&&(s=-s,x=-x,y=-y,v=-v,M=-M),1-s>1e-6?(r=Math.acos(s),l=Math.sin(r),u=Math.sin((1-n)*r)/l,d=Math.sin(n*r)/l):(u=1-n,d=n),o[0]=u*c+d*x,o[1]=u*w+d*y,o[2]=u*m+d*v,o[3]=u*f+d*M,o}},8240:function(h){h.exports=function(o){return o||o===0?o.toString():""}},4123:function(h,o,t){var i=t(875);h.exports=function(r,s,l){var u=n[s];if(u||(u=n[s]={}),r in u)return u[r];var d={textAlign:"center",textBaseline:"middle",lineHeight:1,font:s,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=i(r,d);d.triangles=!1;var w,m,f=i(r,d);if(l&&l!==1){for(w=0;w<c.positions.length;++w)for(m=0;m<c.positions[w].length;++m)c.positions[w][m]/=l;for(w=0;w<f.positions.length;++w)for(m=0;m<f.positions[w].length;++m)f.positions[w][m]/=l}var x=[[1/0,1/0],[-1/0,-1/0]],y=f.positions.length;for(w=0;w<y;++w){var v=f.positions[w];for(m=0;m<2;++m)x[0][m]=Math.min(x[0][m],v[m]),x[1][m]=Math.max(x[1][m],v[m])}return u[r]=[c,f,x]};var n={}},9282:function(h,o,t){var i=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),s=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),d=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],w={vertex:r,fragment:u,attributes:c},m={vertex:s,fragment:u,attributes:c},f={vertex:l,fragment:u,attributes:c},x={vertex:r,fragment:d,attributes:c},y={vertex:s,fragment:d,attributes:c},v={vertex:l,fragment:d,attributes:c};function M(p,S){var A=i(p,S),k=A.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,A}o.createPerspective=function(p){return M(p,w)},o.createOrtho=function(p){return M(p,m)},o.createProject=function(p){return M(p,f)},o.createPickPerspective=function(p){return M(p,x)},o.createPickOrtho=function(p){return M(p,y)},o.createPickProject=function(p){return M(p,v)}},2182:function(h,o,t){var i=t(3596),n=t(5827),r=t(2944),s=t(5306),l=t(104),u=t(9282),d=t(4123),c=t(8240),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(q,re){var ee=q[0],K=q[1],Y=q[2],$=q[3];return q[0]=re[0]*ee+re[4]*K+re[8]*Y+re[12]*$,q[1]=re[1]*ee+re[5]*K+re[9]*Y+re[13]*$,q[2]=re[2]*ee+re[6]*K+re[10]*Y+re[14]*$,q[3]=re[3]*ee+re[7]*K+re[11]*Y+re[15]*$,q}function f(q,re,ee,K){return m(K,K),m(K,K),m(K,K)}function x(q,re){this.index=q,this.dataCoordinate=this.position=re}function y(q){return q===!0||q>1?1:q}function v(q,re,ee,K,Y,$,ne,ae,se,ce,me,ye){this.gl=q,this.pixelRatio=1,this.shader=re,this.orthoShader=ee,this.projectShader=K,this.pointBuffer=Y,this.colorBuffer=$,this.glyphBuffer=ne,this.idBuffer=ae,this.vao=se,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ce,this.pickOrthoShader=me,this.pickProjectShader=ye,this.points=[],this._selectResult=new x(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}h.exports=function(q){var re=q.gl,ee=u.createPerspective(re),K=u.createOrtho(re),Y=u.createProject(re),$=u.createPickPerspective(re),ne=u.createPickOrtho(re),ae=u.createPickProject(re),se=n(re),ce=n(re),me=n(re),ye=n(re),Te=new v(re,ee,K,Y,se,ce,me,ye,r(re,[{buffer:se,size:3,type:re.FLOAT},{buffer:ce,size:4,type:re.FLOAT},{buffer:me,size:2,type:re.FLOAT},{buffer:ye,size:4,type:re.UNSIGNED_BYTE,normalized:!0}]),$,ne,ae);return Te.update(q),Te};var M=v.prototype;M.pickSlots=1,M.setPickBase=function(q){this.pickId=q},M.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},M.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var p=[0,0],S=[0,0,0],A=[0,0,0],k=[0,0,0,1],C=[0,0,0,1],P=w.slice(),R=[0,0,0],O=[[0,0,0],[0,0,0]];function X(q){return q[0]=q[1]=q[2]=0,q}function D(q,re){return q[0]=re[0],q[1]=re[1],q[2]=re[2],q[3]=1,q}function V(q,re,ee,K){return q[0]=re[0],q[1]=re[1],q[2]=re[2],q[ee]=K,q}var j=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function B(q,re,ee,K,Y,$,ne){var ae=ee.gl;if(($===ee.projectHasAlpha||ne)&&function(ce,me,ye,Te){var Ce,pe=me.axesProject,fe=me.gl,Oe=ce.uniforms,Se=ye.model||w,Me=ye.view||w,ue=ye.projection||w,le=me.axesBounds,ie=function(at){for(var lt=O,ot=0;ot<2;++ot)for(var bt=0;bt<3;++bt)lt[ot][bt]=Math.max(Math.min(at[ot][bt],1e8),-1e8);return lt}(me.clipBounds);Ce=me.axes&&me.axes.lastCubeProps?me.axes.lastCubeProps.axis:[1,1,1],p[0]=2/fe.drawingBufferWidth,p[1]=2/fe.drawingBufferHeight,ce.bind(),Oe.view=Me,Oe.projection=ue,Oe.screenSize=p,Oe.highlightId=me.highlightId,Oe.highlightScale=me.highlightScale,Oe.clipBounds=ie,Oe.pickGroup=me.pickId/255,Oe.pixelRatio=Te;for(var ge=0;ge<3;++ge)if(pe[ge]){Oe.scale=me.projectScale[ge],Oe.opacity=me.projectOpacity[ge];for(var Ae=P,we=0;we<16;++we)Ae[we]=0;for(we=0;we<4;++we)Ae[5*we]=1;Ae[5*ge]=0,Ce[ge]<0?Ae[12+ge]=le[0][ge]:Ae[12+ge]=le[1][ge],l(Ae,Se,Ae),Oe.model=Ae;var Ne=(ge+1)%3,He=(ge+2)%3,de=X(S),Le=X(A);de[Ne]=1,Le[He]=1;var Ee=f(0,0,0,D(k,de)),Re=f(0,0,0,D(C,Le));if(Math.abs(Ee[1])>Math.abs(Re[1])){var je=Ee;Ee=Re,Re=je,je=de,de=Le,Le=je;var Fe=Ne;Ne=He,He=Fe}Ee[0]<0&&(de[Ne]=-1),Re[1]>0&&(Le[He]=-1);var Xe=0,Ze=0;for(we=0;we<4;++we)Xe+=Math.pow(Se[4*Ne+we],2),Ze+=Math.pow(Se[4*He+we],2);de[Ne]/=Math.sqrt(Xe),Le[He]/=Math.sqrt(Ze),Oe.axes[0]=de,Oe.axes[1]=Le,Oe.fragClipBounds[0]=V(R,ie[0],ge,-1e8),Oe.fragClipBounds[1]=V(R,ie[1],ge,1e8),me.vao.bind(),me.vao.draw(fe.TRIANGLES,me.vertexCount),me.lineWidth>0&&(fe.lineWidth(me.lineWidth*Te),me.vao.draw(fe.LINES,me.lineVertexCount,me.vertexCount)),me.vao.unbind()}}(re,ee,K,Y),$===ee.hasAlpha||ne){q.bind();var se=q.uniforms;se.model=K.model||w,se.view=K.view||w,se.projection=K.projection||w,p[0]=2/ae.drawingBufferWidth,p[1]=2/ae.drawingBufferHeight,se.screenSize=p,se.highlightId=ee.highlightId,se.highlightScale=ee.highlightScale,se.fragClipBounds=j,se.clipBounds=ee.axes.bounds,se.opacity=ee.opacity,se.pickGroup=ee.pickId/255,se.pixelRatio=Y,ee.vao.bind(),ee.vao.draw(ae.TRIANGLES,ee.vertexCount),ee.lineWidth>0&&(ae.lineWidth(ee.lineWidth*Y),ee.vao.draw(ae.LINES,ee.lineVertexCount,ee.vertexCount)),ee.vao.unbind()}}function W(q,re,ee,K){var Y;Y=Array.isArray(q)?re<q.length?q[re]:void 0:q,Y=c(Y);var $=!0;i(Y)&&(Y="",$=!1);var ne=d(Y,ee,K);return{mesh:ne[0],lines:ne[1],bounds:ne[2],visible:$}}M.draw=function(q){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!1,!1)},M.drawTransparent=function(q){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!0,!1)},M.drawPick=function(q){B(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,q,1,!0,!0)},M.pick=function(q){if(!q||q.id!==this.pickId)return null;var re=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(re>=this.pointCount||re<0)return null;var ee=this.points[re],K=this._selectResult;K.index=re;for(var Y=0;Y<3;++Y)K.position[Y]=K.dataCoordinate[Y]=ee[Y];return K},M.highlight=function(q){if(q){var re=q.index,ee=255&re,K=re>>8&255,Y=re>>16&255;this.highlightId=[ee/255,K/255,Y/255,0]}else this.highlightId=[1,1,1,1]},M.update=function(q){if("perspective"in(q=q||{})&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var re=!!q.project;this.axesProject=[re,re,re]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var ee=+q.projectScale;this.projectScale=[ee,ee,ee]}if(this.projectHasAlpha=!1,"projectOpacity"in q){Array.isArray(q.projectOpacity)?this.projectOpacity=q.projectOpacity.slice():(ee=+q.projectOpacity,this.projectOpacity=[ee,ee,ee]);for(var K=0;K<3;++K)this.projectOpacity[K]=y(this.projectOpacity[K]),this.projectOpacity[K]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=y(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,$,ne=q.position,ae=q.font||"normal",se=q.alignment||[0,0];if(se.length===2)Y=se[0],$=se[1];else for(Y=[],$=[],K=0;K<se.length;++K)Y[K]=se[K][0],$[K]=se[K][1];var ce=[1/0,1/0,1/0],me=[-1/0,-1/0,-1/0],ye=q.glyph,Te=q.color,Ce=q.size,pe=q.angle,fe=q.lineColor,Oe=-1,Se=0,Me=0,ue=0;if(ne.length){ue=ne.length;e:for(K=0;K<ue;++K){for(var le=ne[K],ie=0;ie<3;++ie)if(isNaN(le[ie])||!isFinite(le[ie]))continue e;var ge=(lt=W(ye,K,ae,this.pixelRatio)).mesh,Ae=lt.lines,we=lt.bounds;Se+=3*ge.cells.length,Me+=2*Ae.edges.length}}var Ne=Se+Me,He=s.mallocFloat(3*Ne),de=s.mallocFloat(4*Ne),Le=s.mallocFloat(2*Ne),Ee=s.mallocUint32(Ne);if(Ne>0){var Re=0,je=Se,Fe=[0,0,0,1],Xe=[0,0,0,1],Ze=Array.isArray(Te)&&Array.isArray(Te[0]),at=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(K=0;K<ue;++K){for(Oe+=1,le=ne[K],ie=0;ie<3;++ie){if(isNaN(le[ie])||!isFinite(le[ie]))continue e;me[ie]=Math.max(me[ie],le[ie]),ce[ie]=Math.min(ce[ie],le[ie])}ge=(lt=W(ye,K,ae,this.pixelRatio)).mesh,Ae=lt.lines,we=lt.bounds;var lt,ot=lt.visible;if(ot)if(Array.isArray(Te)){if((bt=Ze?K<Te.length?Te[K]:[0,0,0,0]:Te).length===3){for(ie=0;ie<3;++ie)Fe[ie]=bt[ie];Fe[3]=1}else if(bt.length===4){for(ie=0;ie<4;++ie)Fe[ie]=bt[ie];!this.hasAlpha&&bt[3]<1&&(this.hasAlpha=!0)}}else Fe[0]=Fe[1]=Fe[2]=0,Fe[3]=1;else Fe=[1,1,1,0];if(ot)if(Array.isArray(fe)){var bt;if((bt=at?K<fe.length?fe[K]:[0,0,0,0]:fe).length===3){for(ie=0;ie<3;++ie)Xe[ie]=bt[ie];Xe[ie]=1}else if(bt.length===4){for(ie=0;ie<4;++ie)Xe[ie]=bt[ie];!this.hasAlpha&&bt[3]<1&&(this.hasAlpha=!0)}}else Xe[0]=Xe[1]=Xe[2]=0,Xe[3]=1;else Xe=[1,1,1,0];var wt=.5;ot?Array.isArray(Ce)?wt=K<Ce.length?+Ce[K]:12:Ce?wt=+Ce:this.useOrtho&&(wt=12):wt=0;var ht=0;Array.isArray(pe)?ht=K<pe.length?+pe[K]:0:pe&&(ht=+pe);var ct=Math.cos(ht),Tt=Math.sin(ht);for(le=ne[K],ie=0;ie<3;++ie)me[ie]=Math.max(me[ie],le[ie]),ce[ie]=Math.min(ce[ie],le[ie]);var Lt=Y,kt=$;Lt=0,Array.isArray(Y)?Lt=K<Y.length?Y[K]:0:Y&&(Lt=Y),kt=0,Array.isArray($)?kt=K<$.length?$[K]:0:$&&(kt=$);var Ot=[Lt*=Lt>0?1-we[0][0]:Lt<0?1+we[1][0]:1,kt*=kt>0?1-we[0][1]:kt<0?1+we[1][1]:1],Pt=ge.cells||[],et=ge.positions||[];for(ie=0;ie<Pt.length;++ie)for(var nt=Pt[ie],Ye=0;Ye<3;++Ye){for(var tt=0;tt<3;++tt)He[3*Re+tt]=le[tt];for(tt=0;tt<4;++tt)de[4*Re+tt]=Fe[tt];Ee[Re]=Oe;var ut=et[nt[Ye]];Le[2*Re]=wt*(ct*ut[0]-Tt*ut[1]+Ot[0]),Le[2*Re+1]=wt*(Tt*ut[0]+ct*ut[1]+Ot[1]),Re+=1}for(Pt=Ae.edges,et=Ae.positions,ie=0;ie<Pt.length;++ie)for(nt=Pt[ie],Ye=0;Ye<2;++Ye){for(tt=0;tt<3;++tt)He[3*je+tt]=le[tt];for(tt=0;tt<4;++tt)de[4*je+tt]=Xe[tt];Ee[je]=Oe,ut=et[nt[Ye]],Le[2*je]=wt*(ct*ut[0]-Tt*ut[1]+Ot[0]),Le[2*je+1]=wt*(Tt*ut[0]+ct*ut[1]+Ot[1]),je+=1}}}this.bounds=[ce,me],this.points=ne,this.pointCount=ne.length,this.vertexCount=Se,this.lineVertexCount=Me,this.pointBuffer.update(He),this.colorBuffer.update(de),this.glyphBuffer.update(Le),this.idBuffer.update(Ee),s.free(He),s.free(de),s.free(Le),s.free(Ee)},M.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(h,o,t){var i=t(6832);o.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),o.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(h,o,t){var i=t(5158),n=t(5827),r=t(1884);function s(u,d,c){this.plot=u,this.boxBuffer=d,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}h.exports=function(u,d){var c=u.gl,w=new s(u,n(c,[0,0,0,1,1,0,1,1]),i(c,r.boxVertex,r.boxFragment));return w.update(d),u.addOverlay(w),w};var l=s.prototype;l.draw=function(){if(this.enabled){var u=this.plot,d=this.selectBox,c=this.borderWidth,w=(this.innerFill,this.innerColor),m=(this.outerFill,this.outerColor),f=this.borderColor,x=u.box,y=u.screenBox,v=u.dataBox,M=u.viewBox,p=u.pixelRatio,S=(d[0]-v[0])*(M[2]-M[0])/(v[2]-v[0])+M[0],A=(d[1]-v[1])*(M[3]-M[1])/(v[3]-v[1])+M[1],k=(d[2]-v[0])*(M[2]-M[0])/(v[2]-v[0])+M[0],C=(d[3]-v[1])*(M[3]-M[1])/(v[3]-v[1])+M[1];if(S=Math.max(S,M[0]),A=Math.max(A,M[1]),k=Math.min(k,M[2]),C=Math.min(C,M[3]),!(k<S||C<A)){x.bind();var P=y[2]-y[0],R=y[3]-y[1];if(this.outerFill&&(x.drawBox(0,0,P,A,m),x.drawBox(0,A,S,C,m),x.drawBox(0,C,P,R,m),x.drawBox(k,A,P,C,m)),this.innerFill&&x.drawBox(S,A,k,C,w),c>0){var O=c*p;x.drawBox(S-O,A-O,k+O,A+O,f),x.drawBox(S-O,C-O,k+O,C+O,f),x.drawBox(S-O,A-O,S+O,C+O,f),x.drawBox(k-O,A-O,k+O,C+O,f)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(h,o,t){h.exports=function(c,w){var m=w[0],f=w[1];return new u(c,i(c,m,f,{}),n.mallocUint8(m*f*4))};var i=t(4234),n=t(5306),r=t(5050),s=t(2288).nextPow2;function l(c,w,m,f,x){this.coord=[c,w],this.id=m,this.value=f,this.distance=x}function u(c,w,m){this.gl=c,this.fbo=w,this.buffer=m,this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(w.bind(),c.readPixels(0,0,w.shape[0],w.shape[1],c.RGBA,c.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}var d=u.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var w=this.fbo.shape[0],m=this.fbo.shape[1];if(m*w*4>this.buffer.length){n.free(this.buffer);for(var f=this.buffer=n.mallocUint8(s(m*w*4)),x=0;x<m*w*4;++x)f[x]=255}return c}}}),d.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},d.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(c,w,m){if(!this.gl)return null;var f=this.fbo.shape.slice();c|=0,w|=0,typeof m!="number"&&(m=1);var x=0|Math.min(Math.max(c-m,0),f[0]),y=0|Math.min(Math.max(c+m,0),f[0]),v=0|Math.min(Math.max(w-m,0),f[1]),M=0|Math.min(Math.max(w+m,0),f[1]);if(y<=x||M<=v)return null;var p=[y-x,M-v],S=r(this.buffer,[p[0],p[1],4],[4,4*f[0],1],4*(x+f[0]*v)),A=function(P,R,O){for(var X=1e8,D=-1,V=-1,j=P.shape[0],B=P.shape[1],W=0;W<j;W++)for(var q=0;q<B;q++){var re=P.get(W,q,0),ee=P.get(W,q,1),K=P.get(W,q,2),Y=P.get(W,q,3);if(re<255||ee<255||K<255||Y<255){var $=R-W,ne=O-q,ae=$*$+ne*ne;ae<X&&(X=ae,D=W,V=q)}}return[D,V,X]}(S.hi(p[0],p[1],1),m,m),k=A[0],C=A[1];return k<0||Math.pow(this.radius,2)<A[2]?null:new l(k+x|0,C+v|0,S.get(k,C,0),[S.get(k,C,1),S.get(k,C,2),S.get(k,C,3)],Math.sqrt(A[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(h,o,t){var i=t(9016),n=t(4280),r=t(3984),s=t(1628),l=t(2631),u=t(9068);function d(m){this.gl=m,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=d.prototype;function w(m,f){return m.name<f.name?-1:1}c.bind=function(){var m;this.program||this._relink();var f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),x=this.gl.lastAttribCount;if(f>x)for(m=x;m<f;m++)this.gl.enableVertexAttribArray(m);else if(x>f)for(m=f;m<x;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},c.dispose=function(){for(var m=this.gl.lastAttribCount,f=0;f<m;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(m,f,x,y){if(!f||arguments.length===1){var v=m;m=v.vertex,f=v.fragment,x=v.uniforms,y=v.attributes}var M=this,p=M.gl,S=M._vref;M._vref=s.shader(p,p.VERTEX_SHADER,m),S&&S.dispose(),M.vertShader=M._vref.shader;var A=this._fref;if(M._fref=s.shader(p,p.FRAGMENT_SHADER,f),A&&A.dispose(),M.fragShader=M._fref.shader,!x||!y){var k=p.createProgram();if(p.attachShader(k,M.fragShader),p.attachShader(k,M.vertShader),p.linkProgram(k),!p.getProgramParameter(k,p.LINK_STATUS)){var C=p.getProgramInfoLog(k);throw new u(C,"Error linking program:"+C)}x=x||l.uniforms(p,k),y=y||l.attributes(p,k),p.deleteProgram(k)}(y=y.slice()).sort(w);var P,R=[],O=[],X=[];for(P=0;P<y.length;++P){var D=y[P];if(D.type.indexOf("mat")>=0){for(var V=0|D.type.charAt(D.type.length-1),j=new Array(V),B=0;B<V;++B)j[B]=X.length,O.push(D.name+"["+B+"]"),typeof D.location=="number"?X.push(D.location+B):Array.isArray(D.location)&&D.location.length===V&&typeof D.location[B]=="number"?X.push(0|D.location[B]):X.push(-1);R.push({name:D.name,type:D.type,locations:j})}else R.push({name:D.name,type:D.type,locations:[X.length]}),O.push(D.name),typeof D.location=="number"?X.push(0|D.location):X.push(-1)}var W=0;for(P=0;P<X.length;++P)if(X[P]<0){for(;X.indexOf(W)>=0;)W+=1;X[P]=W}var q=new Array(x.length);function re(){M.program=s.program(p,M._vref,M._fref,O,X);for(var ee=0;ee<x.length;++ee)q[ee]=p.getUniformLocation(M.program,x[ee].name)}re(),M._relink=re,M.types={uniforms:r(x),attributes:r(y)},M.attributes=n(p,M,R,X),Object.defineProperty(M,"uniforms",i(p,M,x,q))},h.exports=function(m,f,x,y,v){var M=new d(m);return M.update(f,x,y,v),M}},9068:function(h){function o(t,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(n?`
`+n:""),this.stack=new Error().stack}o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,h.exports=o},4280:function(h,o,t){h.exports=function(d,c,w,m){for(var f={},x=0,y=w.length;x<y;++x){var v=w[x],M=v.name,p=v.type,S=v.locations;switch(p){case"bool":case"int":case"float":l(d,c,S[0],m,1,f,M);break;default:if(p.indexOf("vec")>=0){if((A=p.charCodeAt(p.length-1)-48)<2||A>4)throw new i("","Invalid data type for attribute "+M+": "+p);l(d,c,S[0],m,A,f,M)}else{if(!(p.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+M+": "+p);var A;if((A=p.charCodeAt(p.length-1)-48)<2||A>4)throw new i("","Invalid data type for attribute "+M+": "+p);u(d,c,S,m,A,f,M)}}}return f};var i=t(9068);function n(d,c,w,m,f,x){this._gl=d,this._wrapper=c,this._index=w,this._locations=m,this._dimension=f,this._constFunc=x}var r=n.prototype;r.pointer=function(d,c,w,m){var f=this,x=f._gl,y=f._locations[f._index];x.vertexAttribPointer(y,f._dimension,d||x.FLOAT,!!c,w||0,m||0),x.enableVertexAttribArray(y)},r.set=function(d,c,w,m){return this._constFunc(this._locations[this._index],d,c,w,m)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=0|d,this._wrapper.program=null),0|d}});var s=[function(d,c,w){return w.length===void 0?d.vertexAttrib1f(c,w):d.vertexAttrib1fv(c,w)},function(d,c,w,m){return w.length===void 0?d.vertexAttrib2f(c,w,m):d.vertexAttrib2fv(c,w)},function(d,c,w,m,f){return w.length===void 0?d.vertexAttrib3f(c,w,m,f):d.vertexAttrib3fv(c,w)},function(d,c,w,m,f,x){return w.length===void 0?d.vertexAttrib4f(c,w,m,f,x):d.vertexAttrib4fv(c,w)}];function l(d,c,w,m,f,x,y){var v=s[f],M=new n(d,c,w,m,f,v);Object.defineProperty(x,y,{set:function(p){return d.disableVertexAttribArray(m[w]),v(d,m[w],p),p},get:function(){return M},enumerable:!0})}function u(d,c,w,m,f,x,y){for(var v=new Array(f),M=new Array(f),p=0;p<f;++p)l(d,c,w[p],m,f,v,p),M[p]=v[p];Object.defineProperty(v,"location",{set:function(k){if(Array.isArray(k))for(var C=0;C<f;++C)M[C].location=k[C];else for(C=0;C<f;++C)M[C].location=k+C;return k},get:function(){for(var k=new Array(f),C=0;C<f;++C)k[C]=m[w[C]];return k},enumerable:!0}),v.pointer=function(k,C,P,R){k=k||d.FLOAT,C=!!C,P=P||f*f,R=R||0;for(var O=0;O<f;++O){var X=m[w[O]];d.vertexAttribPointer(X,f,k,C,P,R+O*f),d.enableVertexAttribArray(X)}};var S=new Array(f),A=d["vertexAttrib"+f+"fv"];Object.defineProperty(x,y,{set:function(k){for(var C=0;C<f;++C){var P=m[w[C]];if(d.disableVertexAttribArray(P),Array.isArray(k[0]))A.call(d,P,k[C]);else{for(var R=0;R<f;++R)S[R]=k[f*C+R];A.call(d,P,S)}}return k},get:function(){return v},enumerable:!0})}},9016:function(h,o,t){var i=t(3984),n=t(9068);function r(l){return function(){return l}}function s(l,u){for(var d=new Array(l),c=0;c<l;++c)d[c]=u;return d}h.exports=function(l,u,d,c){function w(v){return function(M){for(var p=m("",v),S=0;S<p.length;++S){var A=p[S],k=A[0],C=A[1];if(c[C]){var P=M;if(typeof k=="string"&&(k.indexOf(".")===0||k.indexOf("[")===0)){var R=k;if(k.indexOf(".")===0&&(R=k.slice(1)),R.indexOf("]")===R.length-1){var O=R.indexOf("["),X=R.slice(0,O),D=R.slice(O+1,R.length-1);P=X?M[X][D]:M[D]}else P=M[R]}var V,j=d[C].type;switch(j){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(c[C],P);break;case"float":l.uniform1f(c[C],P);break;default:var B=j.indexOf("vec");if(!(0<=B&&B<=1&&j.length===4+B)){if(j.indexOf("mat")===0&&j.length===4){if((V=j.charCodeAt(j.length-1)-48)<2||V>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+j);l["uniformMatrix"+V+"fv"](c[C],!1,P);break}throw new n("","Unknown uniform data type for "+name+": "+j)}if((V=j.charCodeAt(j.length-1)-48)<2||V>4)throw new n("","Invalid data type");switch(j.charAt(0)){case"b":case"i":l["uniform"+V+"iv"](c[C],P);break;case"v":l["uniform"+V+"fv"](c[C],P);break;default:throw new n("","Unrecognized data type for vector "+name+": "+j)}}}}}}function m(v,M){if(typeof M!="object")return[[v,M]];var p=[];for(var S in M){var A=M[S],k=v;parseInt(S)+""===S?k+="["+S+"]":k+="."+S,typeof A=="object"?p.push.apply(p,m(k,A)):p.push([k,A])}return p}function f(v,M,p){if(typeof p=="object"){var S=x(p);Object.defineProperty(v,M,{get:r(S),set:w(p),enumerable:!0,configurable:!1})}else c[p]?Object.defineProperty(v,M,{get:(A=p,function(k,C,P){return k.getUniform(C.program,P[A])}),set:w(p),enumerable:!0,configurable:!1}):v[M]=function(k){switch(k){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var C=k.indexOf("vec");if(0<=C&&C<=1&&k.length===4+C){if((P=k.charCodeAt(k.length-1)-48)<2||P>4)throw new n("","Invalid data type");return k.charAt(0)==="b"?s(P,!1):s(P,0)}if(k.indexOf("mat")===0&&k.length===4){var P;if((P=k.charCodeAt(k.length-1)-48)<2||P>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+k);return s(P*P,0)}throw new n("","Unknown uniform data type for "+name+": "+k)}}(d[p].type);var A}function x(v){var M;if(Array.isArray(v)){M=new Array(v.length);for(var p=0;p<v.length;++p)f(M,p,v[p])}else for(var S in M={},v)f(M,S,v[S]);return M}var y=i(d,!0);return{get:r(x(y)),set:w(y),enumerable:!0,configurable:!0}}},3984:function(h){h.exports=function(o,t){for(var i={},n=0;n<o.length;++n)for(var r=o[n].name.split("."),s=i,l=0;l<r.length;++l){var u=r[l].split("[");if(u.length>1){u[0]in s||(s[u[0]]=[]),s=s[u[0]];for(var d=1;d<u.length;++d){var c=parseInt(u[d]);d<u.length-1||l<r.length-1?(c in s||(d<u.length-1?s[c]=[]:s[c]={}),s=s[c]):s[c]=t?n:o[n].type}}else l<r.length-1?(u[0]in s||(s[u[0]]={}),s=s[u[0]]):s[u[0]]=t?n:o[n].type}return i}},2631:function(h,o){o.uniforms=function(r,s){for(var l=r.getProgramParameter(s,r.ACTIVE_UNIFORMS),u=[],d=0;d<l;++d){var c=r.getActiveUniform(s,d);if(c){var w=n(r,c.type);if(c.size>1)for(var m=0;m<c.size;++m)u.push({name:c.name.replace("[0]","["+m+"]"),type:w});else u.push({name:c.name,type:w})}}return u},o.attributes=function(r,s){for(var l=r.getProgramParameter(s,r.ACTIVE_ATTRIBUTES),u=[],d=0;d<l;++d){var c=r.getActiveAttrib(s,d);c&&u.push({name:c.name,type:n(r,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(r,s){if(!i){var l=Object.keys(t);i={};for(var u=0;u<l.length;++u){var d=l[u];i[r[d]]=t[d]}}return i[s]}},1628:function(h,o,t){o.shader=function(w,m,f){return c(w).getShaderReference(m,f)},o.program=function(w,m,f,x,y){return c(w).getProgram(m,f,x,y)};var i=t(9068),n=t(3530),r=new(typeof WeakMap>"u"?t(4037):WeakMap),s=0;function l(w,m,f,x,y,v,M){this.id=w,this.src=m,this.type=f,this.shader=x,this.count=v,this.programs=[],this.cache=M}function u(w){this.gl=w,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var w=this.cache,m=w.gl,f=this.programs,x=0,y=f.length;x<y;++x){var v=w.programs[f[x]];v&&(delete w.programs[x],m.deleteProgram(v))}m.deleteShader(this.shader),delete w.shaders[this.type===m.FRAGMENT_SHADER|0][this.src]}};var d=u.prototype;function c(w){var m=r.get(w);return m||(m=new u(w),r.set(w,m)),m}d.getShaderReference=function(w,m){var f=this.gl,x=this.shaders[w===f.FRAGMENT_SHADER|0],y=x[m];if(y&&f.isShader(y.shader))y.count+=1;else{var v=function(M,p,S){var A=M.createShader(p);if(M.shaderSource(A,S),M.compileShader(A),!M.getShaderParameter(A,M.COMPILE_STATUS)){var k=M.getShaderInfoLog(A);try{var C=n(k,S,p)}catch(P){throw console.warn("Failed to format compiler error: "+P),new i(k,`Error compiling shader:
`+k)}throw new i(k,C.short,C.long)}return A}(f,w,m);y=x[m]=new l(s++,m,w,v,[],1,this)}return y},d.getProgram=function(w,m,f,x){var y=[w.id,m.id,f.join(":"),x.join(":")].join("@"),v=this.programs[y];return v&&this.gl.isProgram(v)||(this.programs[y]=v=function(M,p,S,A,k){var C=M.createProgram();M.attachShader(C,p),M.attachShader(C,S);for(var P=0;P<A.length;++P)M.bindAttribLocation(C,k[P],A[P]);if(M.linkProgram(C),!M.getProgramParameter(C,M.LINK_STATUS)){var R=M.getProgramInfoLog(C);throw new i(R,"Error linking program: "+R)}return C}(this.gl,w.shader,m.shader,f,x),w.programs.push(y),m.programs.push(y)),v}},3050:function(h){function o(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}h.exports=function(i,n){var r=new o(i);return r.update(n),i.addOverlay(r),r};var t=o.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,n=this.width,r=this.color,s=this.center,l=this.plot,u=l.line,d=l.dataBox,c=l.viewBox;if(u.bind(),d[0]<=s[0]&&s[0]<=d[2]&&d[1]<=s[1]&&s[1]<=d[3]){var w=c[0]+(s[0]-d[0])/(d[2]-d[0])*(c[2]-c[0]),m=c[1]+(s[1]-d[1])/(d[3]-d[1])*(c[3]-c[1]);i[0]&&u.drawLine(w,m,c[0],m,n[0],r[0]),i[1]&&u.drawLine(w,m,w,c[1],n[1],r[1]),i[2]&&u.drawLine(w,m,c[2],m,n[2],r[2]),i[3]&&u.drawLine(w,m,w,c[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(h,o,t){var i=t(6832),n=t(5158),r=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),s=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);h.exports=function(l){return n(l,r,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(h,o,t){var i=t(5827),n=t(2944),r=t(3540);h.exports=function(m,f){var x=[];function y(A,k,C,P,R,O){var X=[A,k,C,0,0,0,1];X[P+3]=1,X[P]=R,x.push.apply(x,X),X[6]=-1,x.push.apply(x,X),X[P]=O,x.push.apply(x,X),x.push.apply(x,X),X[6]=1,x.push.apply(x,X),X[P]=R,x.push.apply(x,X)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var v=i(m,x),M=n(m,[{type:m.FLOAT,buffer:v,size:3,offset:0,stride:28},{type:m.FLOAT,buffer:v,size:3,offset:12,stride:28},{type:m.FLOAT,buffer:v,size:1,offset:24,stride:28}]),p=r(m);p.attributes.position.location=0,p.attributes.color.location=1,p.attributes.weight.location=2;var S=new l(m,v,M,p);return S.update(f),S};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(m,f,x,y){this.gl=m,this.buffer=f,this.vao=x,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,d=[0,0,0],c=[0,0,0],w=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(m){},u.draw=function(m){var f=this.gl,x=this.vao,y=this.shader;x.bind(),y.bind();var v,M=m.model||s,p=m.view||s,S=m.projection||s;this.axes&&(v=this.axes.lastCubeProps.axis);for(var A=d,k=c,C=0;C<3;++C)v&&v[C]<0?(A[C]=this.bounds[0][C],k[C]=this.bounds[1][C]):(A[C]=this.bounds[1][C],k[C]=this.bounds[0][C]);for(w[0]=f.drawingBufferWidth,w[1]=f.drawingBufferHeight,y.uniforms.model=M,y.uniforms.view=p,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,A,k],y.uniforms.colors=this.colors,y.uniforms.screenShape=w,C=0;C<3;++C)y.uniforms.lineWidth=this.lineWidth[C]*this.pixelRatio,this.enabled[C]&&(x.draw(f.TRIANGLES,6,6*C),this.drawSides[C]&&x.draw(f.TRIANGLES,12,18+12*C));x.unbind()},u.update=function(m){m&&("bounds"in m&&(this.bounds=m.bounds),"position"in m&&(this.position=m.position),"lineWidth"in m&&(this.lineWidth=m.lineWidth),"colors"in m&&(this.colors=m.colors),"enabled"in m&&(this.enabled=m.enabled),"drawSides"in m&&(this.drawSides=m.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(h,o,t){var i=t(6832),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(h,o,t){var i=t(2858),n=t(4020),r=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(w,m){var f,x=w.length;for(f=0;f<x;f++){var y=w[f];if(y===m)return f;if(y>m)return f-1}return f},l=function(w,m,f){return w<m?m:w>f?f:w},u=function(w){var m=1/0;w.sort(function(v,M){return v-M});for(var f=w.length,x=1;x<f;x++){var y=Math.abs(w[x]-w[x-1]);y<m&&(m=y)}return m};h.exports=function(w,m){var f=w.startingPositions,x=w.maxLength||1e3,y=w.tubeSize||1,v=w.absoluteTubeSize,M=w.gridFill||"+x+y+z",p={};M.indexOf("-x")!==-1&&(p.reversedX=!0),M.indexOf("-y")!==-1&&(p.reversedY=!0),M.indexOf("-z")!==-1&&(p.reversedZ=!0),p.filled=r.indexOf(M.replace(/-/g,"").replace(/\+/g,""));var S=w.getVelocity||function(fe){return function(Oe,Se,Me){var ue=Se.vectors,le=Se.meshgrid,ie=Oe[0],ge=Oe[1],Ae=Oe[2],we=le[0].length,Ne=le[1].length,He=le[2].length,de=s(le[0],ie),Le=s(le[1],ge),Ee=s(le[2],Ae),Re=de+1,je=Le+1,Fe=Ee+1;if(de=l(de,0,we-1),Re=l(Re,0,we-1),Le=l(Le,0,Ne-1),je=l(je,0,Ne-1),Ee=l(Ee,0,He-1),Fe=l(Fe,0,He-1),de<0||Le<0||Ee<0||Re>we-1||je>Ne-1||Fe>He-1)return i.create();var Xe,Ze,at,lt,ot,bt,wt=le[0][de],ht=le[0][Re],ct=le[1][Le],Tt=le[1][je],Lt=le[2][Ee],kt=(ie-wt)/(ht-wt),Ot=(ge-ct)/(Tt-ct),Pt=(Ae-Lt)/(le[2][Fe]-Lt);switch(isFinite(kt)||(kt=.5),isFinite(Ot)||(Ot=.5),isFinite(Pt)||(Pt=.5),Me.reversedX&&(de=we-1-de,Re=we-1-Re),Me.reversedY&&(Le=Ne-1-Le,je=Ne-1-je),Me.reversedZ&&(Ee=He-1-Ee,Fe=He-1-Fe),Me.filled){case 5:ot=Ee,bt=Fe,at=Le*He,lt=je*He,Xe=de*He*Ne,Ze=Re*He*Ne;break;case 4:ot=Ee,bt=Fe,Xe=de*He,Ze=Re*He,at=Le*He*we,lt=je*He*we;break;case 3:at=Le,lt=je,ot=Ee*Ne,bt=Fe*Ne,Xe=de*Ne*He,Ze=Re*Ne*He;break;case 2:at=Le,lt=je,Xe=de*Ne,Ze=Re*Ne,ot=Ee*Ne*we,bt=Fe*Ne*we;break;case 1:Xe=de,Ze=Re,ot=Ee*we,bt=Fe*we,at=Le*we*He,lt=je*we*He;break;default:Xe=de,Ze=Re,at=Le*we,lt=je*we,ot=Ee*we*Ne,bt=Fe*we*Ne}var et=ue[Xe+at+ot],nt=ue[Xe+at+bt],Ye=ue[Xe+lt+ot],tt=ue[Xe+lt+bt],ut=ue[Ze+at+ot],Ke=ue[Ze+at+bt],De=ue[Ze+lt+ot],Be=ue[Ze+lt+bt],Qe=i.create(),rt=i.create(),vt=i.create(),mt=i.create();i.lerp(Qe,et,ut,kt),i.lerp(rt,nt,Ke,kt),i.lerp(vt,Ye,De,kt),i.lerp(mt,tt,Be,kt);var xt=i.create(),dt=i.create();i.lerp(xt,Qe,vt,Ot),i.lerp(dt,rt,mt,Ot);var Et=i.create();return i.lerp(Et,xt,dt,Pt),Et}(fe,w,p)},A=w.getDivergence||function(fe,Oe){var Se=i.create(),Me=1e-4;i.add(Se,fe,[Me,0,0]);var ue=S(Se);i.subtract(ue,ue,Oe),i.scale(ue,ue,1/Me),i.add(Se,fe,[0,Me,0]);var le=S(Se);i.subtract(le,le,Oe),i.scale(le,le,1/Me),i.add(Se,fe,[0,0,Me]);var ie=S(Se);return i.subtract(ie,ie,Oe),i.scale(ie,ie,1/Me),i.add(Se,ue,le),i.add(Se,Se,ie),Se},k=[],C=m[0][0],P=m[0][1],R=m[0][2],O=m[1][0],X=m[1][1],D=m[1][2],V=function(fe){var Oe=fe[0],Se=fe[1],Me=fe[2];return!(Oe<C||Oe>O||Se<P||Se>X||Me<R||Me>D)},j=10*i.distance(m[0],m[1])/x,B=j*j,W=1,q=0,re=f.length;re>1&&(W=function(fe){for(var Oe=[],Se=[],Me=[],ue={},le={},ie={},ge=fe.length,Ae=0;Ae<ge;Ae++){var we=fe[Ae],Ne=we[0],He=we[1],de=we[2];ue[Ne]||(Oe.push(Ne),ue[Ne]=!0),le[He]||(Se.push(He),le[He]=!0),ie[de]||(Me.push(de),ie[de]=!0)}var Le=u(Oe),Ee=u(Se),Re=u(Me),je=Math.min(Le,Ee,Re);return isFinite(je)?je:1}(f));for(var ee=0;ee<re;ee++){var K=i.create();i.copy(K,f[ee]);var Y=[K],$=[],ne=S(K),ae=K;$.push(ne);var se=[],ce=A(K,ne),me=i.length(ce);isFinite(me)&&me>q&&(q=me),se.push(me),k.push({points:Y,velocities:$,divergences:se});for(var ye=0;ye<100*x&&Y.length<x&&V(K);){ye++;var Te=i.clone(ne),Ce=i.squaredLength(Te);if(Ce===0)break;Ce>B&&i.scale(Te,Te,j/Math.sqrt(Ce)),i.add(Te,Te,K),ne=S(Te),i.squaredDistance(ae,Te)-B>-1e-4*B&&(Y.push(Te),ae=Te,$.push(ne),ce=A(Te,ne),me=i.length(ce),isFinite(me)&&me>q&&(q=me),se.push(me)),K=Te}}var pe=function(fe,Oe,Se,Me){for(var ue=0,le=0;le<fe.length;le++)for(var ie=fe[le].velocities,ge=0;ge<ie.length;ge++)ue=Math.max(ue,i.length(ie[ge]));var Ae=fe.map(function(Xe){return function(Ze,at,lt,ot){for(var bt=Ze.points,wt=Ze.velocities,ht=Ze.divergences,ct=[],Tt=[],Lt=[],kt=[],Ot=[],Pt=[],et=0,nt=0,Ye=n.create(),tt=n.create(),ut=0;ut<bt.length;ut++){var Ke=bt[ut],De=wt[ut],Be=ht[ut];at===0&&(Be=.05*lt),nt=i.length(De)/ot,Ye=n.create(),i.copy(Ye,De),Ye[3]=Be;for(var Qe=0;Qe<8;Qe++)Ot[Qe]=[Ke[0],Ke[1],Ke[2],Qe];if(kt.length>0)for(Qe=0;Qe<8;Qe++){var rt=(Qe+1)%8;ct.push(kt[Qe],Ot[Qe],Ot[rt],Ot[rt],kt[rt],kt[Qe]),Lt.push(tt,Ye,Ye,Ye,tt,tt),Pt.push(et,nt,nt,nt,et,et);var vt=ct.length;Tt.push([vt-6,vt-5,vt-4],[vt-3,vt-2,vt-1])}var mt=kt;kt=Ot,Ot=mt;var xt=tt;tt=Ye,Ye=xt;var dt=et;et=nt,nt=dt}return{positions:ct,cells:Tt,vectors:Lt,vertexIntensity:Pt}}(Xe,Se,Me,ue)}),we=[],Ne=[],He=[],de=[];for(le=0;le<Ae.length;le++){var Le=Ae[le],Ee=we.length;for(we=we.concat(Le.positions),He=He.concat(Le.vectors),de=de.concat(Le.vertexIntensity),ge=0;ge<Le.cells.length;ge++){var Re=Le.cells[ge],je=[];Ne.push(je);for(var Fe=0;Fe<Re.length;Fe++)je.push(Re[Fe]+Ee)}}return{positions:we,cells:Ne,vectors:He,vertexIntensity:de,colormap:Oe}}(k,w.colormap,q,W);return v?pe.tubeScale=v:(q===0&&(q=1),pe.tubeScale=.5*y*W/q),pe};var d=t(9578),c=t(1140).createMesh;h.exports.createTubeMesh=function(w,m){return c(w,m,{shaders:d,traceType:"streamtube"})}},9054:function(h,o,t){var i=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),s=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);o.createShader=function(d){var c=i(d,r,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createPickShader=function(d){var c=i(d,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createContourShader=function(d){var c=i(d,l,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},o.createPickContourShader=function(d){var c=i(d,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(h,o,t){h.exports=function(ce){var me=ce.gl,ye=p(me),Te=A(me),Ce=S(me),pe=k(me),fe=n(me),Oe=r(me,[{buffer:fe,size:4,stride:C,offset:0},{buffer:fe,size:3,stride:C,offset:16},{buffer:fe,size:3,stride:C,offset:28}]),Se=n(me),Me=r(me,[{buffer:Se,size:4,stride:20,offset:0},{buffer:Se,size:1,stride:20,offset:16}]),ue=n(me),le=r(me,[{buffer:ue,size:2,type:me.FLOAT}]),ie=s(me,1,D,me.RGBA,me.UNSIGNED_BYTE);ie.minFilter=me.LINEAR,ie.magFilter=me.LINEAR;var ge=new V(me,[0,0],[[0,0,0],[0,0,0]],ye,Te,fe,Oe,ie,Ce,pe,Se,Me,ue,le,[0,0,0]),Ae={levels:[[],[],[]]};for(var we in ce)Ae[we]=ce[we];return Ae.colormap=Ae.colormap||"jet",ge.update(Ae),ge};var i=t(2288),n=t(5827),r=t(2944),s=t(8931),l=t(5306),u=t(9156),d=t(7498),c=t(7382),w=t(5050),m=t(4162),f=t(104),x=t(7437),y=t(5070),v=t(9144),M=t(9054),p=M.createShader,S=M.createContourShader,A=M.createPickShader,k=M.createPickContourShader,C=40,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],R=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function X(ce,me,ye,Te,Ce){this.position=ce,this.index=me,this.uv=ye,this.level=Te,this.dataCoordinate=Ce}(function(){for(var ce=0;ce<3;++ce){var me=O[ce],ye=(ce+2)%3;me[(ce+1)%3+0]=1,me[ye+3]=1,me[ce+6]=1}})();var D=256;function V(ce,me,ye,Te,Ce,pe,fe,Oe,Se,Me,ue,le,ie,ge,Ae){this.gl=ce,this.shape=me,this.bounds=ye,this.objectOffset=Ae,this.intensityBounds=[],this._shader=Te,this._pickShader=Ce,this._coordinateBuffer=pe,this._vao=fe,this._colorMap=Oe,this._contourShader=Se,this._contourPickShader=Me,this._contourBuffer=ue,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new X([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ie,this._dynamicVAO=ge,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[w(l.mallocFloat(1024),[0,0]),w(l.mallocFloat(1024),[0,0]),w(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var j=V.prototype;j.genColormap=function(ce,me){var ye=!1,Te=c([u({colormap:ce,nshades:D,format:"rgba"}).map(function(Ce,pe){var fe=me?function(Oe,Se){if(!Se||!Se.length)return 1;for(var Me=0;Me<Se.length;++Me){if(Se.length<2)return 1;if(Se[Me][0]===Oe)return Se[Me][1];if(Se[Me][0]>Oe&&Me>0){var ue=(Se[Me][0]-Oe)/(Se[Me][0]-Se[Me-1][0]);return Se[Me][1]*(1-ue)+ue*Se[Me-1][1]}}return 1}(pe/255,me):Ce[3];return fe<1&&(ye=!0),[Ce[0],Ce[1],Ce[2],255*fe]})]);return d.divseq(Te,255),this.hasAlphaScale=ye,Te},j.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},j.isOpaque=function(){return!this.isTransparent()},j.pickSlots=1,j.setPickBase=function(ce){this.pickId=ce};var B=[0,0,0],W={showSurface:!1,showContour:!1,projections:[P.slice(),P.slice(),P.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(ce,me){var ye,Te,Ce,pe=me.axes&&me.axes.lastCubeProps.axis||B,fe=me.showSurface,Oe=me.showContour;for(ye=0;ye<3;++ye)for(fe=fe||me.surfaceProject[ye],Te=0;Te<3;++Te)Oe=Oe||me.contourProject[ye][Te];for(ye=0;ye<3;++ye){var Se=W.projections[ye];for(Te=0;Te<16;++Te)Se[Te]=0;for(Te=0;Te<4;++Te)Se[5*Te]=1;Se[5*ye]=0,Se[12+ye]=me.axesBounds[+(pe[ye]>0)][ye],f(Se,ce.model,Se);var Me=W.clipBounds[ye];for(Ce=0;Ce<2;++Ce)for(Te=0;Te<3;++Te)Me[Ce][Te]=ce.clipBounds[Ce][Te];Me[0][ye]=-1e8,Me[1][ye]=1e8}return W.showSurface=fe,W.showContour=Oe,W}var re={model:P,view:P,projection:P,inverseModel:P.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=P.slice(),K=[1,0,0,0,1,0,0,0,1];function Y(ce,me){ce=ce||{};var ye=this.gl;ye.disable(ye.CULL_FACE),this._colorMap.bind(0);var Te=re;Te.model=ce.model||P,Te.view=ce.view||P,Te.projection=ce.projection||P,Te.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Te.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Te.objectOffset=this.objectOffset,Te.contourColor=this.contourColor[0],Te.inverseModel=x(Te.inverseModel,Te.model);for(var Ce=0;Ce<2;++Ce)for(var pe=Te.clipBounds[Ce],fe=0;fe<3;++fe)pe[fe]=Math.min(Math.max(this.clipBounds[Ce][fe],-1e8),1e8);Te.kambient=this.ambientLight,Te.kdiffuse=this.diffuseLight,Te.kspecular=this.specularLight,Te.roughness=this.roughness,Te.fresnel=this.fresnel,Te.opacity=this.opacity,Te.height=0,Te.permutation=K,Te.vertexColor=this.vertexColor;var Oe=ee;for(f(Oe,Te.view,Te.model),f(Oe,Te.projection,Oe),x(Oe,Oe),Ce=0;Ce<3;++Ce)Te.eyePosition[Ce]=Oe[12+Ce]/Oe[15];var Se=Oe[15];for(Ce=0;Ce<3;++Ce)Se+=this.lightPosition[Ce]*Oe[4*Ce+3];for(Ce=0;Ce<3;++Ce){var Me=Oe[12+Ce];for(fe=0;fe<3;++fe)Me+=Oe[4*fe+Ce]*this.lightPosition[fe];Te.lightPosition[Ce]=Me/Se}var ue=q(Te,this);if(ue.showSurface){for(this._shader.bind(),this._shader.uniforms=Te,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ye.TRIANGLES,this._vertexCount),Ce=0;Ce<3;++Ce)this.surfaceProject[Ce]&&this.vertexCount&&(this._shader.uniforms.model=ue.projections[Ce],this._shader.uniforms.clipBounds=ue.clipBounds[Ce],this._vao.draw(ye.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ue.showContour){var le=this._contourShader;Te.kambient=1,Te.kdiffuse=0,Te.kspecular=0,Te.opacity=1,le.bind(),le.uniforms=Te;var ie=this._contourVAO;for(ie.bind(),Ce=0;Ce<3;++Ce)for(le.uniforms.permutation=O[Ce],ye.lineWidth(this.contourWidth[Ce]*this.pixelRatio),fe=0;fe<this.contourLevels[Ce].length;++fe)fe===this.highlightLevel[Ce]?(le.uniforms.contourColor=this.highlightColor[Ce],le.uniforms.contourTint=this.highlightTint[Ce]):fe!==0&&fe-1!==this.highlightLevel[Ce]||(le.uniforms.contourColor=this.contourColor[Ce],le.uniforms.contourTint=this.contourTint[Ce]),this._contourCounts[Ce][fe]&&(le.uniforms.height=this.contourLevels[Ce][fe],ie.draw(ye.LINES,this._contourCounts[Ce][fe],this._contourOffsets[Ce][fe]));for(Ce=0;Ce<3;++Ce)for(le.uniforms.model=ue.projections[Ce],le.uniforms.clipBounds=ue.clipBounds[Ce],fe=0;fe<3;++fe)if(this.contourProject[Ce][fe]){le.uniforms.permutation=O[fe],ye.lineWidth(this.contourWidth[fe]*this.pixelRatio);for(var ge=0;ge<this.contourLevels[fe].length;++ge)ge===this.highlightLevel[fe]?(le.uniforms.contourColor=this.highlightColor[fe],le.uniforms.contourTint=this.highlightTint[fe]):ge!==0&&ge-1!==this.highlightLevel[fe]||(le.uniforms.contourColor=this.contourColor[fe],le.uniforms.contourTint=this.contourTint[fe]),this._contourCounts[fe][ge]&&(le.uniforms.height=this.contourLevels[fe][ge],ie.draw(ye.LINES,this._contourCounts[fe][ge],this._contourOffsets[fe][ge]))}for(ie.unbind(),(ie=this._dynamicVAO).bind(),Ce=0;Ce<3;++Ce)if(this._dynamicCounts[Ce]!==0)for(le.uniforms.model=Te.model,le.uniforms.clipBounds=Te.clipBounds,le.uniforms.permutation=O[Ce],ye.lineWidth(this.dynamicWidth[Ce]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[Ce],le.uniforms.contourTint=this.dynamicTint[Ce],le.uniforms.height=this.dynamicLevel[Ce],ie.draw(ye.LINES,this._dynamicCounts[Ce],this._dynamicOffsets[Ce]),fe=0;fe<3;++fe)this.contourProject[fe][Ce]&&(le.uniforms.model=ue.projections[fe],le.uniforms.clipBounds=ue.clipBounds[fe],ie.draw(ye.LINES,this._dynamicCounts[Ce],this._dynamicOffsets[Ce]));ie.unbind()}}j.draw=function(ce){return Y.call(this,ce,!1)},j.drawTransparent=function(ce){return Y.call(this,ce,!0)};var $={model:P,view:P,projection:P,inverseModel:P,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ne(ce,me){return Array.isArray(ce)?[me(ce[0]),me(ce[1]),me(ce[2])]:[me(ce),me(ce),me(ce)]}function ae(ce){return Array.isArray(ce)?ce.length===3?[ce[0],ce[1],ce[2],1]:[ce[0],ce[1],ce[2],ce[3]]:[0,0,0,1]}function se(ce){if(Array.isArray(ce)){if(Array.isArray(ce))return[ae(ce[0]),ae(ce[1]),ae(ce[2])];var me=ae(ce);return[me.slice(),me.slice(),me.slice()]}}j.drawPick=function(ce){ce=ce||{};var me=this.gl;me.disable(me.CULL_FACE);var ye=$;ye.model=ce.model||P,ye.view=ce.view||P,ye.projection=ce.projection||P,ye.shape=this._field[2].shape,ye.pickId=this.pickId/255,ye.lowerBound=this.bounds[0],ye.upperBound=this.bounds[1],ye.objectOffset=this.objectOffset,ye.permutation=K;for(var Te=0;Te<2;++Te)for(var Ce=ye.clipBounds[Te],pe=0;pe<3;++pe)Ce[pe]=Math.min(Math.max(this.clipBounds[Te][pe],-1e8),1e8);var fe=q(ye,this);if(fe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ye,this._vao.bind(),this._vao.draw(me.TRIANGLES,this._vertexCount),Te=0;Te<3;++Te)this.surfaceProject[Te]&&(this._pickShader.uniforms.model=fe.projections[Te],this._pickShader.uniforms.clipBounds=fe.clipBounds[Te],this._vao.draw(me.TRIANGLES,this._vertexCount));this._vao.unbind()}if(fe.showContour){var Oe=this._contourPickShader;Oe.bind(),Oe.uniforms=ye;var Se=this._contourVAO;for(Se.bind(),pe=0;pe<3;++pe)for(me.lineWidth(this.contourWidth[pe]*this.pixelRatio),Oe.uniforms.permutation=O[pe],Te=0;Te<this.contourLevels[pe].length;++Te)this._contourCounts[pe][Te]&&(Oe.uniforms.height=this.contourLevels[pe][Te],Se.draw(me.LINES,this._contourCounts[pe][Te],this._contourOffsets[pe][Te]));for(Te=0;Te<3;++Te)for(Oe.uniforms.model=fe.projections[Te],Oe.uniforms.clipBounds=fe.clipBounds[Te],pe=0;pe<3;++pe)if(this.contourProject[Te][pe]){Oe.uniforms.permutation=O[pe],me.lineWidth(this.contourWidth[pe]*this.pixelRatio);for(var Me=0;Me<this.contourLevels[pe].length;++Me)this._contourCounts[pe][Me]&&(Oe.uniforms.height=this.contourLevels[pe][Me],Se.draw(me.LINES,this._contourCounts[pe][Me],this._contourOffsets[pe][Me]))}Se.unbind()}},j.pick=function(ce){if(!ce||ce.id!==this.pickId)return null;var me=this._field[2].shape,ye=this._pickResult,Te=me[0]*(ce.value[0]+(ce.value[2]>>4)/16)/255,Ce=Math.floor(Te),pe=Te-Ce,fe=me[1]*(ce.value[1]+(15&ce.value[2])/16)/255,Oe=Math.floor(fe),Se=fe-Oe;Ce+=1,Oe+=1;var Me=ye.position;Me[0]=Me[1]=Me[2]=0;for(var ue=0;ue<2;++ue)for(var le=ue?pe:1-pe,ie=0;ie<2;++ie)for(var ge=Ce+ue,Ae=Oe+ie,we=le*(ie?Se:1-Se),Ne=0;Ne<3;++Ne)Me[Ne]+=this._field[Ne].get(ge,Ae)*we;for(var He=this._pickResult.level,de=0;de<3;++de)if(He[de]=y.le(this.contourLevels[de],Me[de]),He[de]<0)this.contourLevels[de].length>0&&(He[de]=0);else if(He[de]<this.contourLevels[de].length-1){var Le=this.contourLevels[de][He[de]],Ee=this.contourLevels[de][He[de]+1];Math.abs(Le-Me[de])>Math.abs(Ee-Me[de])&&(He[de]+=1)}for(ye.index[0]=pe<.5?Ce:Ce+1,ye.index[1]=Se<.5?Oe:Oe+1,ye.uv[0]=Te/me[0],ye.uv[1]=fe/me[1],Ne=0;Ne<3;++Ne)ye.dataCoordinate[Ne]=this._field[Ne].get(ye.index[0],ye.index[1]);return ye},j.padField=function(ce,me){var ye=me.shape.slice(),Te=ce.shape.slice();d.assign(ce.lo(1,1).hi(ye[0],ye[1]),me),d.assign(ce.lo(1).hi(ye[0],1),me.hi(ye[0],1)),d.assign(ce.lo(1,Te[1]-1).hi(ye[0],1),me.lo(0,ye[1]-1).hi(ye[0],1)),d.assign(ce.lo(0,1).hi(1,ye[1]),me.hi(1)),d.assign(ce.lo(Te[0]-1,1).hi(1,ye[1]),me.lo(ye[0]-1)),ce.set(0,0,me.get(0,0)),ce.set(0,Te[1]-1,me.get(0,ye[1]-1)),ce.set(Te[0]-1,0,me.get(ye[0]-1,0)),ce.set(Te[0]-1,Te[1]-1,me.get(ye[0]-1,ye[1]-1))},j.update=function(ce){ce=ce||{},this.objectOffset=ce.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ce&&(this.contourWidth=ne(ce.contourWidth,Number)),"showContour"in ce&&(this.showContour=ne(ce.showContour,Boolean)),"showSurface"in ce&&(this.showSurface=!!ce.showSurface),"contourTint"in ce&&(this.contourTint=ne(ce.contourTint,Boolean)),"contourColor"in ce&&(this.contourColor=se(ce.contourColor)),"contourProject"in ce&&(this.contourProject=ne(ce.contourProject,function(an){return ne(an,Boolean)})),"surfaceProject"in ce&&(this.surfaceProject=ce.surfaceProject),"dynamicColor"in ce&&(this.dynamicColor=se(ce.dynamicColor)),"dynamicTint"in ce&&(this.dynamicTint=ne(ce.dynamicTint,Number)),"dynamicWidth"in ce&&(this.dynamicWidth=ne(ce.dynamicWidth,Number)),"opacity"in ce&&(this.opacity=ce.opacity),"opacityscale"in ce&&(this.opacityscale=ce.opacityscale),"colorBounds"in ce&&(this.colorBounds=ce.colorBounds),"vertexColor"in ce&&(this.vertexColor=ce.vertexColor?1:0),"colormap"in ce&&this._colorMap.setPixels(this.genColormap(ce.colormap,this.opacityscale));var me=ce.field||ce.coords&&ce.coords[2]||null,ye=!1;if(me||(me=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ce||"coords"in ce){var Te=(me.shape[0]+2)*(me.shape[1]+2);Te>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(Te))),this._field[2]=w(this._field[2].data,[me.shape[0]+2,me.shape[1]+2]),this.padField(this._field[2],me),this.shape=me.shape.slice();for(var Ce=this.shape,pe=0;pe<2;++pe)this._field[2].size>this._field[pe].data.length&&(l.freeFloat(this._field[pe].data),this._field[pe].data=l.mallocFloat(this._field[2].size)),this._field[pe]=w(this._field[pe].data,[Ce[0]+2,Ce[1]+2]);if(ce.coords){var fe=ce.coords;if(!Array.isArray(fe)||fe.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(pe=0;pe<2;++pe){var Oe=fe[pe];for(ie=0;ie<2;++ie)if(Oe.shape[ie]!==Ce[ie])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[pe],Oe)}}else if(ce.ticks){var Se=ce.ticks;if(!Array.isArray(Se)||Se.length!==2)throw new Error("gl-surface: invalid ticks");for(pe=0;pe<2;++pe){var Me=Se[pe];if((Array.isArray(Me)||Me.length)&&(Me=w(Me)),Me.shape[0]!==Ce[pe])throw new Error("gl-surface: invalid tick length");var ue=w(Me.data,Ce);ue.stride[pe]=Me.stride[0],ue.stride[1^pe]=0,this.padField(this._field[pe],ue)}}else{for(pe=0;pe<2;++pe){var le=[0,0];le[pe]=1,this._field[pe]=w(this._field[pe].data,[Ce[0]+2,Ce[1]+2],le,0)}this._field[0].set(0,0,0);for(var ie=0;ie<Ce[0];++ie)this._field[0].set(ie+1,0,ie);for(this._field[0].set(Ce[0]+1,0,Ce[0]-1),this._field[1].set(0,0,0),ie=0;ie<Ce[1];++ie)this._field[1].set(0,ie+1,ie);this._field[1].set(0,Ce[1]+1,Ce[1]-1)}var ge=this._field,Ae=w(l.mallocFloat(3*ge[2].size*2),[3,Ce[0]+2,Ce[1]+2,2]);for(pe=0;pe<3;++pe)v(Ae.pick(pe),ge[pe],"mirror");var we=w(l.mallocFloat(3*ge[2].size),[Ce[0]+2,Ce[1]+2,3]);for(pe=0;pe<Ce[0]+2;++pe)for(ie=0;ie<Ce[1]+2;++ie){var Ne=Ae.get(0,pe,ie,0),He=Ae.get(0,pe,ie,1),de=Ae.get(1,pe,ie,0),Le=Ae.get(1,pe,ie,1),Ee=Ae.get(2,pe,ie,0),Re=Ae.get(2,pe,ie,1),je=de*Re-Le*Ee,Fe=Ee*He-Re*Ne,Xe=Ne*Le-He*de,Ze=Math.sqrt(je*je+Fe*Fe+Xe*Xe);Ze<1e-8?(Ze=Math.max(Math.abs(je),Math.abs(Fe),Math.abs(Xe)))<1e-8?(Xe=1,Fe=je=0,Ze=1):Ze=1/Ze:Ze=1/Math.sqrt(Ze),we.set(pe,ie,0,je*Ze),we.set(pe,ie,1,Fe*Ze),we.set(pe,ie,2,Xe*Ze)}l.free(Ae.data);var at=[1/0,1/0,1/0],lt=[-1/0,-1/0,-1/0],ot=1/0,bt=-1/0,wt=(Ce[0]-1)*(Ce[1]-1)*6,ht=l.mallocFloat(i.nextPow2(10*wt)),ct=0,Tt=0;for(pe=0;pe<Ce[0]-1;++pe)e:for(ie=0;ie<Ce[1]-1;++ie){for(var Lt=0;Lt<2;++Lt)for(var kt=0;kt<2;++kt)for(var Ot=0;Ot<3;++Ot){var Pt=this._field[Ot].get(1+pe+Lt,1+ie+kt);if(isNaN(Pt)||!isFinite(Pt))continue e}for(Ot=0;Ot<6;++Ot){var et=pe+R[Ot][0],nt=ie+R[Ot][1],Ye=this._field[0].get(et+1,nt+1),tt=this._field[1].get(et+1,nt+1);Pt=this._field[2].get(et+1,nt+1),je=we.get(et+1,nt+1,0),Fe=we.get(et+1,nt+1,1),Xe=we.get(et+1,nt+1,2),ce.intensity&&(ut=ce.intensity.get(et,nt));var ut=ce.intensity?ce.intensity.get(et,nt):Pt+this.objectOffset[2];ht[ct++]=et,ht[ct++]=nt,ht[ct++]=Ye,ht[ct++]=tt,ht[ct++]=Pt,ht[ct++]=0,ht[ct++]=ut,ht[ct++]=je,ht[ct++]=Fe,ht[ct++]=Xe,at[0]=Math.min(at[0],Ye+this.objectOffset[0]),at[1]=Math.min(at[1],tt+this.objectOffset[1]),at[2]=Math.min(at[2],Pt+this.objectOffset[2]),ot=Math.min(ot,ut),lt[0]=Math.max(lt[0],Ye+this.objectOffset[0]),lt[1]=Math.max(lt[1],tt+this.objectOffset[1]),lt[2]=Math.max(lt[2],Pt+this.objectOffset[2]),bt=Math.max(bt,ut),Tt+=1}}for(ce.intensityBounds&&(ot=+ce.intensityBounds[0],bt=+ce.intensityBounds[1]),pe=6;pe<ct;pe+=10)ht[pe]=(ht[pe]-ot)/(bt-ot);this._vertexCount=Tt,this._coordinateBuffer.update(ht.subarray(0,ct)),l.freeFloat(ht),l.free(we.data),this.bounds=[at,lt],this.intensity=ce.intensity||this._field[2],this.intensityBounds[0]===ot&&this.intensityBounds[1]===bt||(ye=!0),this.intensityBounds=[ot,bt]}if("levels"in ce){var Ke=ce.levels;for(Ke=Array.isArray(Ke[0])?Ke.slice():[[],[],Ke],pe=0;pe<3;++pe)Ke[pe]=Ke[pe].slice(),Ke[pe].sort(function(an,tn){return an-tn});for(pe=0;pe<3;++pe)for(ie=0;ie<Ke[pe].length;++ie)Ke[pe][ie]-=this.objectOffset[pe];e:for(pe=0;pe<3;++pe){if(Ke[pe].length!==this.contourLevels[pe].length){ye=!0;break}for(ie=0;ie<Ke[pe].length;++ie)if(Ke[pe][ie]!==this.contourLevels[pe][ie]){ye=!0;break e}}this.contourLevels=Ke}if(ye){ge=this._field,Ce=this.shape;for(var De=[],Be=0;Be<3;++Be){var Qe=this.contourLevels[Be],rt=[],vt=[],mt=[0,0,0];for(pe=0;pe<Qe.length;++pe){var xt=m(this._field[Be],Qe[pe]);rt.push(De.length/5|0),Tt=0;e:for(ie=0;ie<xt.cells.length;++ie){var dt=xt.cells[ie];for(Ot=0;Ot<2;++Ot){var Et=xt.positions[dt[Ot]],pt=Et[0],gt=0|Math.floor(pt),Mt=pt-gt,Nt=Et[1],Bt=0|Math.floor(Nt),Ut=Nt-Bt,Jt=!1;t:for(var Vt=0;Vt<3;++Vt){mt[Vt]=0;var Qt=(Be+Vt+1)%3;for(Lt=0;Lt<2;++Lt){var qt=Lt?Mt:1-Mt;for(et=0|Math.min(Math.max(gt+Lt,0),Ce[0]),kt=0;kt<2;++kt){var gn=kt?Ut:1-Ut;if(nt=0|Math.min(Math.max(Bt+kt,0),Ce[1]),Pt=Vt<2?this._field[Qt].get(et,nt):(this.intensity.get(et,nt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Pt)||isNaN(Pt)){Jt=!0;break t}var wn=qt*gn;mt[Vt]+=wn*Pt}}}if(Jt){if(Ot>0){for(var hn=0;hn<5;++hn)De.pop();Tt-=1}continue e}De.push(mt[0],mt[1],Et[0],Et[1],mt[2]),Tt+=1}}vt.push(Tt)}this._contourOffsets[Be]=rt,this._contourCounts[Be]=vt}var Xt=l.mallocFloat(De.length);for(pe=0;pe<De.length;++pe)Xt[pe]=De[pe];this._contourBuffer.update(Xt),l.freeFloat(Xt)}},j.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ce=0;ce<3;++ce)l.freeFloat(this._field[ce].data)},j.highlight=function(ce){var me,ye;if(!ce)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(me=0;me<3;++me)this.enableHighlight[me]?this.highlightLevel[me]=ce.level[me]:this.highlightLevel[me]=-1;for(ye=this.snapToData?ce.dataCoordinate:ce.position,me=0;me<3;++me)ye[me]-=this.objectOffset[me];if(this.enableDynamic[0]&&ye[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ye[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ye[2]!==this.dynamicLevel[2]){for(var Te=0,Ce=this.shape,pe=l.mallocFloat(12*Ce[0]*Ce[1]),fe=0;fe<3;++fe)if(this.enableDynamic[fe]){this.dynamicLevel[fe]=ye[fe];var Oe=(fe+1)%3,Se=(fe+2)%3,Me=this._field[fe],ue=this._field[Oe],le=this._field[Se],ie=m(Me,ye[fe]),ge=ie.cells,Ae=ie.positions;for(this._dynamicOffsets[fe]=Te,me=0;me<ge.length;++me)for(var we=ge[me],Ne=0;Ne<2;++Ne){var He=Ae[we[Ne]],de=+He[0],Le=0|de,Ee=0|Math.min(Le+1,Ce[0]),Re=de-Le,je=1-Re,Fe=+He[1],Xe=0|Fe,Ze=0|Math.min(Xe+1,Ce[1]),at=Fe-Xe,lt=1-at,ot=je*lt,bt=je*at,wt=Re*lt,ht=Re*at,ct=ot*ue.get(Le,Xe)+bt*ue.get(Le,Ze)+wt*ue.get(Ee,Xe)+ht*ue.get(Ee,Ze),Tt=ot*le.get(Le,Xe)+bt*le.get(Le,Ze)+wt*le.get(Ee,Xe)+ht*le.get(Ee,Ze);if(isNaN(ct)||isNaN(Tt)){Ne&&(Te-=1);break}pe[2*Te+0]=ct,pe[2*Te+1]=Tt,Te+=1}this._dynamicCounts[fe]=Te-this._dynamicOffsets[fe]}else this.dynamicLevel[fe]=NaN,this._dynamicCounts[fe]=0;this._dynamicBuffer.update(pe.subarray(0,2*Te)),l.freeFloat(pe)}}},8931:function(h,o,t){var i=t(5050),n=t(7498),r=t(5306);h.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||function(A){s=[A.LINEAR,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_NEAREST],l=[A.NEAREST,A.LINEAR,A.NEAREST_MIPMAP_NEAREST,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_LINEAR],u=[A.REPEAT,A.CLAMP_TO_EDGE,A.MIRRORED_REPEAT]}(M),typeof arguments[1]=="number")return v(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var p=arguments[1],S=d(p)?p:p.raw;if(S)return function(A,k,C,P,R,O){var X=y(A);return A.texImage2D(A.TEXTURE_2D,0,R,R,O,k),new m(A,X,C,P,R,O)}(M,S,0|p.width,0|p.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(p.shape&&p.data&&p.stride)return function(A,k){var C=k.dtype,P=k.shape.slice(),R=A.getParameter(A.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>R||P[1]<0||P[1]>R)throw new Error("gl-texture2d: Invalid texture size");var O=x(P,k.stride.slice()),X=0;C==="float32"?X=A.FLOAT:C==="float64"?(X=A.FLOAT,O=!1,C="float32"):C==="uint8"?X=A.UNSIGNED_BYTE:(X=A.UNSIGNED_BYTE,O=!1,C="uint8");var D,V,j=0;if(P.length===2)j=A.LUMINANCE,P=[P[0],P[1],1],k=i(k.data,P,[k.stride[0],k.stride[1],1],k.offset);else{if(P.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(P[2]===1)j=A.ALPHA;else if(P[2]===2)j=A.LUMINANCE_ALPHA;else if(P[2]===3)j=A.RGB;else{if(P[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");j=A.RGBA}}X!==A.FLOAT||A.getExtension("OES_texture_float")||(X=A.UNSIGNED_BYTE,O=!1);var B=k.size;if(O)D=k.offset===0&&k.data.length===B?k.data:k.data.subarray(k.offset,k.offset+B);else{var W=[P[2],P[2]*P[0],1];V=r.malloc(B,C);var q=i(V,P,W,0);C!=="float32"&&C!=="float64"||X!==A.UNSIGNED_BYTE?n.assign(q,k):c(q,k),D=V.subarray(0,B)}var re=y(A);return A.texImage2D(A.TEXTURE_2D,0,j,P[0],P[1],0,j,X,D),O||r.free(V),new m(A,re,P[0],P[1],j,X)}(M,p)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,l=null,u=null;function d(M){return typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&M instanceof HTMLVideoElement||typeof ImageData<"u"&&M instanceof ImageData}var c=function(M,p){n.muls(M,p,255)};function w(M,p,S){var A=M.gl,k=A.getParameter(A.MAX_TEXTURE_SIZE);if(p<0||p>k||S<0||S>k)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[p,S],M.bind(),A.texImage2D(A.TEXTURE_2D,0,M.format,p,S,0,M.format,M.type,null),M._mipLevels=[0],M}function m(M,p,S,A,k,C){this.gl=M,this.handle=p,this.format=k,this.type=C,this._shape=[S,A],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,R=[this._wrapS,this._wrapT];Object.defineProperties(R,[{get:function(){return P._wrapS},set:function(X){return P.wrapS=X}},{get:function(){return P._wrapT},set:function(X){return P.wrapT=X}}]),this._wrapVector=R;var O=[this._shape[0],this._shape[1]];Object.defineProperties(O,[{get:function(){return P._shape[0]},set:function(X){return P.width=X}},{get:function(){return P._shape[1]},set:function(X){return P.height=X}}]),this._shapeVector=O}var f=m.prototype;function x(M,p){return M.length===3?p[2]===1&&p[1]===M[0]*M[2]&&p[0]===M[2]:p[0]===1&&p[1]===M[0]}function y(M){var p=M.createTexture();return M.bindTexture(M.TEXTURE_2D,p),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),p}function v(M,p,S,A,k){var C=M.getParameter(M.MAX_TEXTURE_SIZE);if(p<0||p>C||S<0||S>C)throw new Error("gl-texture2d: Invalid texture shape");if(k===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=y(M);return M.texImage2D(M.TEXTURE_2D,0,A,p,S,0,A,k,null),new m(M,P,p,S,A,k)}Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var p=this.gl;if(this.type===p.FLOAT&&s.indexOf(M)>=0&&(p.getExtension("OES_texture_float_linear")||(M=p.NEAREST)),l.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var p=this.gl;if(this.type===p.FLOAT&&s.indexOf(M)>=0&&(p.getExtension("OES_texture_float_linear")||(M=p.NEAREST)),l.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var p=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),p!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),M.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var p=0;p<2;++p)if(u.indexOf(M[p])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(M.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return w(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return w(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return M|=0,w(this,this._shape[0],M),M}}}),f.bind=function(M){var p=this.gl;return M!==void 0&&p.activeTexture(p.TEXTURE0+(0|M)),p.bindTexture(p.TEXTURE_2D,this.handle),M!==void 0?0|M:p.getParameter(p.ACTIVE_TEXTURE)-p.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),p=0;M>0;++p,M>>>=1)this._mipLevels.indexOf(p)<0&&this._mipLevels.push(p)},f.setPixels=function(M,p,S,A){var k=this.gl;this.bind(),Array.isArray(p)?(A=S,S=0|p[1],p=0|p[0]):(p=p||0,S=S||0),A=A||0;var C=d(M)?M:M.raw;if(C)this._mipLevels.indexOf(A)<0?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,C),this._mipLevels.push(A)):k.texSubImage2D(k.TEXTURE_2D,A,p,S,this.format,this.type,C);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||p+M.shape[1]>this._shape[1]>>>A||S+M.shape[0]>this._shape[0]>>>A||p<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(P,R,O,X,D,V,j,B){var W=B.dtype,q=B.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var re=0,ee=0,K=x(q,B.stride.slice());if(W==="float32"?re=P.FLOAT:W==="float64"?(re=P.FLOAT,K=!1,W="float32"):W==="uint8"?re=P.UNSIGNED_BYTE:(re=P.UNSIGNED_BYTE,K=!1,W="uint8"),q.length===2)ee=P.LUMINANCE,q=[q[0],q[1],1],B=i(B.data,q,[B.stride[0],B.stride[1],1],B.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)ee=P.ALPHA;else if(q[2]===2)ee=P.LUMINANCE_ALPHA;else if(q[2]===3)ee=P.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=P.RGBA}q[2]}if(ee!==P.LUMINANCE&&ee!==P.ALPHA||D!==P.LUMINANCE&&D!==P.ALPHA||(ee=D),ee!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=B.size,$=j.indexOf(X)<0;if($&&j.push(X),re===V&&K)B.offset===0&&B.data.length===Y?$?P.texImage2D(P.TEXTURE_2D,X,D,q[0],q[1],0,D,V,B.data):P.texSubImage2D(P.TEXTURE_2D,X,R,O,q[0],q[1],D,V,B.data):$?P.texImage2D(P.TEXTURE_2D,X,D,q[0],q[1],0,D,V,B.data.subarray(B.offset,B.offset+Y)):P.texSubImage2D(P.TEXTURE_2D,X,R,O,q[0],q[1],D,V,B.data.subarray(B.offset,B.offset+Y));else{var ne;ne=V===P.FLOAT?r.mallocFloat32(Y):r.mallocUint8(Y);var ae=i(ne,q,[q[2],q[2]*q[0],1]);re===P.FLOAT&&V===P.UNSIGNED_BYTE?c(ae,B):n.assign(ae,B),$?P.texImage2D(P.TEXTURE_2D,X,D,q[0],q[1],0,D,V,ne.subarray(0,Y)):P.texSubImage2D(P.TEXTURE_2D,X,R,O,q[0],q[1],D,V,ne.subarray(0,Y)),V===P.FLOAT?r.freeFloat32(ne):r.freeUint8(ne)}})(k,p,S,A,this.format,this.type,this._mipLevels,M)}}},3056:function(h){h.exports=function(o,t,i){t?t.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var n=0|o.getParameter(o.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var s=i[r];if(s.buffer){var l=s.buffer,u=s.size||4,d=s.type||o.FLOAT,c=!!s.normalized,w=s.stride||0,m=s.offset||0;l.bind(),o.enableVertexAttribArray(r),o.vertexAttribPointer(r,u,d,c,w,m)}else{if(typeof s=="number")o.vertexAttrib1f(r,s);else if(s.length===1)o.vertexAttrib1f(r,s[0]);else if(s.length===2)o.vertexAttrib2f(r,s[0],s[1]);else if(s.length===3)o.vertexAttrib3f(r,s[0],s[1],s[2]);else{if(s.length!==4)throw new Error("gl-vao: Invalid vertex attribute");o.vertexAttrib4f(r,s[0],s[1],s[2],s[3])}o.disableVertexAttribArray(r)}}for(;r<n;++r)o.disableVertexAttribArray(r)}else for(o.bindBuffer(o.ARRAY_BUFFER,null),r=0;r<n;++r)o.disableVertexAttribArray(r)}},7220:function(h,o,t){var i=t(3056);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,s,l){this._elements=s,this._attributes=r,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,s,l){l=l||0;var u=this.gl;this._elements?u.drawElements(r,s,this._elementsType,l):u.drawArrays(r,l,s)},h.exports=function(r){return new n(r)}},3778:function(h,o,t){var i=t(3056);function n(s,l,u,d,c,w){this.location=s,this.dimension=l,this.a=u,this.b=d,this.c=c,this.d=w}function r(s,l,u){this.gl=s,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=s.UNSIGNED_SHORT}n.prototype.bind=function(s){switch(this.dimension){case 1:s.vertexAttrib1f(this.location,this.a);break;case 2:s.vertexAttrib2f(this.location,this.a,this.b);break;case 3:s.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:s.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var s=0;s<this._attribs.length;++s)this._attribs[s].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(s,l,u){if(this.bind(),i(this.gl,l,s),this.unbind(),this._attribs.length=0,s)for(var d=0;d<s.length;++d){var c=s[d];typeof c=="number"?this._attribs.push(new n(d,1,c)):Array.isArray(c)&&this._attribs.push(new n(d,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(s,l,u){u=u||0;var d=this.gl;this._useElements?d.drawElements(s,l,this._elementsType,u):d.drawArrays(s,u,l)},h.exports=function(s,l){return new r(s,l,l.createVertexArrayOES())}},2944:function(h,o,t){var i=t(3778),n=t(7220);function r(s){this.bindVertexArrayOES=s.bindVertexArray.bind(s),this.createVertexArrayOES=s.createVertexArray.bind(s),this.deleteVertexArrayOES=s.deleteVertexArray.bind(s)}h.exports=function(s,l,u,d){var c,w=s.createVertexArray?new r(s):s.getExtension("OES_vertex_array_object");return(c=w?i(s,w):n(s)).update(l,u,d),c}},2598:function(h){h.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o}},5879:function(h,o,t){h.exports=function(s,l){var u=i(s[0],s[1],s[2]),d=i(l[0],l[1],l[2]);n(u,u),n(d,d);var c=r(u,d);return c>1?0:Math.acos(c)};var i=t(5415),n=t(899),r=t(9305)},8827:function(h){h.exports=function(o,t){return o[0]=Math.ceil(t[0]),o[1]=Math.ceil(t[1]),o[2]=Math.ceil(t[2]),o}},7622:function(h){h.exports=function(o){var t=new Float32Array(3);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t}},8782:function(h){h.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o}},8501:function(h){h.exports=function(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},903:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=i[0],u=i[1],d=i[2];return o[0]=r*d-s*u,o[1]=s*l-n*d,o[2]=n*u-r*l,o}},5981:function(h,o,t){h.exports=t(8288)},8288:function(h){h.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2];return Math.sqrt(i*i+n*n+r*r)}},8629:function(h,o,t){h.exports=t(7979)},7979:function(h){h.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o}},9305:function(h){h.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]}},154:function(h){h.exports=1e-6},4932:function(h,o,t){h.exports=function(n,r){var s=n[0],l=n[1],u=n[2],d=r[0],c=r[1],w=r[2];return Math.abs(s-d)<=i*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(l-c)<=i*Math.max(1,Math.abs(l),Math.abs(c))&&Math.abs(u-w)<=i*Math.max(1,Math.abs(u),Math.abs(w))};var i=t(154)},5777:function(h){h.exports=function(o,t){return o[0]===t[0]&&o[1]===t[1]&&o[2]===t[2]}},3306:function(h){h.exports=function(o,t){return o[0]=Math.floor(t[0]),o[1]=Math.floor(t[1]),o[2]=Math.floor(t[2]),o}},7447:function(h,o,t){h.exports=function(n,r,s,l,u,d){var c,w;for(r||(r=3),s||(s=0),w=l?Math.min(l*r+s,n.length):n.length,c=s;c<w;c+=r)i[0]=n[c],i[1]=n[c+1],i[2]=n[c+2],u(i,i,d),n[c]=i[0],n[c+1]=i[1],n[c+2]=i[2];return n};var i=t(8501)()},5415:function(h){h.exports=function(o,t,i){var n=new Float32Array(3);return n[0]=o,n[1]=t,n[2]=i,n}},2858:function(h,o,t){h.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(h){h.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o}},1468:function(h,o,t){h.exports=t(4693)},4693:function(h){h.exports=function(o){var t=o[0],i=o[1],n=o[2];return Math.sqrt(t*t+i*i+n*n)}},1868:function(h){h.exports=function(o,t,i,n){var r=t[0],s=t[1],l=t[2];return o[0]=r+n*(i[0]-r),o[1]=s+n*(i[1]-s),o[2]=l+n*(i[2]-l),o}},1716:function(h){h.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o}},3605:function(h){h.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o}},5733:function(h,o,t){h.exports=t(105)},105:function(h){h.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o}},435:function(h){h.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o}},899:function(h){h.exports=function(o,t){var i=t[0],n=t[1],r=t[2],s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s),o[0]=t[0]*s,o[1]=t[1]*s,o[2]=t[2]*s),o}},6660:function(h){h.exports=function(o,t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return o[0]=Math.cos(i)*r,o[1]=Math.sin(i)*r,o[2]=n*t,o}},392:function(h){h.exports=function(o,t,i,n){var r=i[1],s=i[2],l=t[1]-r,u=t[2]-s,d=Math.sin(n),c=Math.cos(n);return o[0]=t[0],o[1]=r+l*c-u*d,o[2]=s+l*d+u*c,o}},3222:function(h){h.exports=function(o,t,i,n){var r=i[0],s=i[2],l=t[0]-r,u=t[2]-s,d=Math.sin(n),c=Math.cos(n);return o[0]=r+u*d+l*c,o[1]=t[1],o[2]=s+u*c-l*d,o}},3388:function(h){h.exports=function(o,t,i,n){var r=i[0],s=i[1],l=t[0]-r,u=t[1]-s,d=Math.sin(n),c=Math.cos(n);return o[0]=r+l*c-u*d,o[1]=s+l*d+u*c,o[2]=t[2],o}},1624:function(h){h.exports=function(o,t){return o[0]=Math.round(t[0]),o[1]=Math.round(t[1]),o[2]=Math.round(t[2]),o}},5685:function(h){h.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o}},6722:function(h){h.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o}},831:function(h){h.exports=function(o,t,i,n){return o[0]=t,o[1]=i,o[2]=n,o}},5294:function(h,o,t){h.exports=t(6403)},3303:function(h,o,t){h.exports=t(4337)},6403:function(h){h.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2];return i*i+n*n+r*r}},4337:function(h){h.exports=function(o){var t=o[0],i=o[1],n=o[2];return t*t+i*i+n*n}},8921:function(h,o,t){h.exports=t(911)},911:function(h){h.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o}},9908:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2];return o[0]=n*i[0]+r*i[3]+s*i[6],o[1]=n*i[1]+r*i[4]+s*i[7],o[2]=n*i[2]+r*i[5]+s*i[8],o}},3255:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=i[3]*n+i[7]*r+i[11]*s+i[15];return l=l||1,o[0]=(i[0]*n+i[4]*r+i[8]*s+i[12])/l,o[1]=(i[1]*n+i[5]*r+i[9]*s+i[13])/l,o[2]=(i[2]*n+i[6]*r+i[10]*s+i[14])/l,o}},6568:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=i[0],u=i[1],d=i[2],c=i[3],w=c*n+u*s-d*r,m=c*r+d*n-l*s,f=c*s+l*r-u*n,x=-l*n-u*r-d*s;return o[0]=w*c+x*-l+m*-d-f*-u,o[1]=m*c+x*-u+f*-l-w*-d,o[2]=f*c+x*-d+w*-u-m*-l,o}},3433:function(h){h.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o[3]=t[3]+i[3],o}},1413:function(h){h.exports=function(o){var t=new Float32Array(4);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t}},3470:function(h){h.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o}},5313:function(h){h.exports=function(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},5446:function(h){h.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2],s=t[3]-o[3];return Math.sqrt(i*i+n*n+r*r+s*s)}},205:function(h){h.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o[3]=t[3]/i[3],o}},4242:function(h){h.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]}},5680:function(h){h.exports=function(o,t,i,n){var r=new Float32Array(4);return r[0]=o,r[1]=t,r[2]=i,r[3]=n,r}},4020:function(h,o,t){h.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(h){h.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o[3]=1/t[3],o}},8177:function(h){h.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3];return Math.sqrt(t*t+i*i+n*n+r*r)}},8746:function(h){h.exports=function(o,t,i,n){var r=t[0],s=t[1],l=t[2],u=t[3];return o[0]=r+n*(i[0]-r),o[1]=s+n*(i[1]-s),o[2]=l+n*(i[2]-l),o[3]=u+n*(i[3]-u),o}},3030:function(h){h.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o[3]=Math.max(t[3],i[3]),o}},2170:function(h){h.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o[3]=Math.min(t[3],i[3]),o}},746:function(h){h.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o[3]=t[3]*i[3],o}},6459:function(h){h.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o[3]=-t[3],o}},381:function(h){h.exports=function(o,t){var i=t[0],n=t[1],r=t[2],s=t[3],l=i*i+n*n+r*r+s*s;return l>0&&(l=1/Math.sqrt(l),o[0]=i*l,o[1]=n*l,o[2]=r*l,o[3]=s*l),o}},3770:function(h,o,t){var i=t(381),n=t(5510);h.exports=function(r,s){return s=s||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),i(r,r),n(r,r,s),r}},5510:function(h){h.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o[3]=t[3]*i,o}},4224:function(h){h.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o[3]=t[3]+i[3]*n,o}},6453:function(h){h.exports=function(o,t,i,n,r){return o[0]=t,o[1]=i,o[2]=n,o[3]=r,o}},1542:function(h){h.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2],s=t[3]-o[3];return i*i+n*n+r*r+s*s}},9037:function(h){h.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3];return t*t+i*i+n*n+r*r}},2705:function(h){h.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o[3]=t[3]-i[3],o}},6342:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=t[3];return o[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*l,o[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*l,o[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*l,o[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*l,o}},5022:function(h){h.exports=function(o,t,i){var n=t[0],r=t[1],s=t[2],l=i[0],u=i[1],d=i[2],c=i[3],w=c*n+u*s-d*r,m=c*r+d*n-l*s,f=c*s+l*r-u*n,x=-l*n-u*r-d*s;return o[0]=w*c+x*-l+m*-d-f*-u,o[1]=m*c+x*-u+f*-l-w*-d,o[2]=f*c+x*-d+w*-u-m*-l,o[3]=t[3],o}},9365:function(h,o,t){var i=t(8096),n=t(7896);h.exports=function(r){for(var s=Array.isArray(r)?r:i(r),l=0;l<s.length;l++){var u=s[l];if(u.type==="preprocessor"){var d=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var c=d[1],w=d[2];return(c?n(w):w).trim()}}}}},3193:function(h,o,t){h.exports=function(P){var R,O,X,D=0,V=0,j=u,B=[],W=[],q=1,re=0,ee=0,K=!1,Y=!1,$="",ne=r,ae=i;(P=P||{}).version==="300 es"&&(ne=l,ae=s);var se={},ce={};for(D=0;D<ne.length;D++)se[ne[D]]=!0;for(D=0;D<ae.length;D++)ce[ae[D]]=!0;return function(ie){return W=[],ie!==null?function(ge){var Ae;for(D=0,ge.toString&&(ge=ge.toString()),$+=ge.replace(/\r\n/g,`
`),X=$.length;R=$[D],D<X;){switch(Ae=D,j){case c:D=pe();break;case w:case m:D=Ce();break;case f:D=fe();break;case x:D=Me();break;case k:D=Se();break;case y:D=ue();break;case d:D=le();break;case S:D=Te();break;case u:D=ye()}Ae!==D&&($[Ae]===`
`?(re=0,++q):++re)}return V+=D,$=$.slice(D),W}(ie):(B.length&&me(B.join("")),j=A,me("(eof)"),W)};function me(ie){ie.length&&W.push({type:C[j],data:ie,position:ee,line:q,column:re})}function ye(){return B=B.length?[]:B,O==="/"&&R==="*"?(ee=V+D-1,j=c,O=R,D+1):O==="/"&&R==="/"?(ee=V+D-1,j=w,O=R,D+1):R==="#"?(j=m,ee=V+D,D):/\s/.test(R)?(j=S,ee=V+D,D):(K=/\d/.test(R),Y=/[^\w_]/.test(R),ee=V+D,j=K?x:Y?f:d,D)}function Te(){return/[^\s]/g.test(R)?(me(B.join("")),j=u,D):(B.push(R),O=R,D+1)}function Ce(){return R!=="\r"&&R!==`
`||O==="\\"?(B.push(R),O=R,D+1):(me(B.join("")),j=u,D)}function pe(){return R==="/"&&O==="*"?(B.push(R),me(B.join("")),j=u,D+1):(B.push(R),O=R,D+1)}function fe(){if(O==="."&&/\d/.test(R))return j=y,D;if(O==="/"&&R==="*")return j=c,D;if(O==="/"&&R==="/")return j=w,D;if(R==="."&&B.length){for(;Oe(B););return j=y,D}if(R===";"||R===")"||R==="("){if(B.length)for(;Oe(B););return me(R),j=u,D+1}var ie=B.length===2&&R!=="=";if(/[\w_\d\s]/.test(R)||ie){for(;Oe(B););return j=u,D}return B.push(R),O=R,D+1}function Oe(ie){for(var ge,Ae,we=0;;){if(ge=n.indexOf(ie.slice(0,ie.length+we).join("")),Ae=n[ge],ge===-1){if(we--+ie.length>0)continue;Ae=ie.slice(0,1).join("")}return me(Ae),ee+=Ae.length,(B=B.slice(Ae.length)).length}}function Se(){return/[^a-fA-F0-9]/.test(R)?(me(B.join("")),j=u,D):(B.push(R),O=R,D+1)}function Me(){return R==="."||/[eE]/.test(R)?(B.push(R),j=y,O=R,D+1):R==="x"&&B.length===1&&B[0]==="0"?(j=k,B.push(R),O=R,D+1):/[^\d]/.test(R)?(me(B.join("")),j=u,D):(B.push(R),O=R,D+1)}function ue(){return R==="f"&&(B.push(R),O=R,D+=1),/[eE]/.test(R)?(B.push(R),O=R,D+1):(R!=="-"&&R!=="+"||!/[eE]/.test(O))&&/[^\d]/.test(R)?(me(B.join("")),j=u,D):(B.push(R),O=R,D+1)}function le(){if(/[^\d\w_]/.test(R)){var ie=B.join("");return j=ce[ie]?p:se[ie]?M:v,me(B.join("")),j=u,D}return B.push(R),O=R,D+1}};var i=t(399),n=t(9746),r=t(9525),s=t(9458),l=t(3585),u=999,d=9999,c=0,w=1,m=2,f=3,x=4,y=5,v=6,M=7,p=8,S=9,A=10,k=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(h,o,t){var i=t(9525);i=i.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),h.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(h){h.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(h,o,t){var i=t(399);h.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(h){h.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(h){h.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(h,o,t){var i=t(3193);h.exports=function(n,r){var s=i(r),l=[];return(l=l.concat(s(n))).concat(s(null))}},6832:function(h){h.exports=function(o){typeof o=="string"&&(o=[o]);for(var t=[].slice.call(arguments,1),i=[],n=0;n<o.length-1;n++)i.push(o[n],t[n]||"");return i.push(o[n]),i.join("")}},5233:function(h,o,t){var i=t(4846);h.exports=i&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},2183:function(h,o,t){h.exports=function(w,m){var f=w.length;if(f===0)throw new Error("Must have at least d+1 points");var x=w[0].length;if(f<=x)throw new Error("Must input at least d+1 points");var y=w.slice(0,x+1),v=i.apply(void 0,y);if(v===0)throw new Error("Input not in general position");for(var M=new Array(x+1),p=0;p<=x;++p)M[p]=p;v<0&&(M[0]=1,M[1]=0);var S=new r(M,new Array(x+1),!1),A=S.adjacent,k=new Array(x+2);for(p=0;p<=x;++p){for(var C=M.slice(),P=0;P<=x;++P)P===p&&(C[P]=-1);var R=C[0];C[0]=C[1],C[1]=R;var O=new r(C,new Array(x+1),!0);A[p]=O,k[p]=O}for(k[x+1]=S,p=0;p<=x;++p){C=A[p].vertices;var X=A[p].adjacent;for(P=0;P<=x;++P){var D=C[P];if(D<0)X[P]=S;else for(var V=0;V<=x;++V)A[V].vertices.indexOf(D)<0&&(X[P]=A[V])}}var j=new d(x,y,k),B=!!m;for(p=x+1;p<f;++p)j.insert(w[p],B);return j.boundary()};var i=t(417),n=t(8211).H;function r(w,m,f){this.vertices=w,this.adjacent=m,this.boundary=f,this.lastVisited=-1}function s(w,m,f){this.vertices=w,this.cell=m,this.index=f}function l(w,m){return n(w.vertices,m.vertices)}r.prototype.flip=function(){var w=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=w;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};var u=[];function d(w,m,f){this.dimension=w,this.vertices=m,this.simplices=f,this.interior=f.filter(function(M){return!M.boundary}),this.tuple=new Array(w+1);for(var x=0;x<=w;++x)this.tuple[x]=this.vertices[x];var y,v=u[w];v||(v=u[w]=((y=i[w+1])||(y=i),function(M){return function(){var p=this.tuple;return M.apply(this,p)}}(y))),this.orient=v}var c=d.prototype;c.handleBoundaryDegeneracy=function(w,m){var f=this.dimension,x=this.vertices.length-1,y=this.tuple,v=this.vertices,M=[w];for(w.lastVisited=-x;M.length>0;)for(var p=(w=M.pop()).adjacent,S=0;S<=f;++S){var A=p[S];if(A.boundary&&!(A.lastVisited<=-x)){for(var k=A.vertices,C=0;C<=f;++C){var P=k[C];y[C]=P<0?m:v[P]}var R=this.orient();if(R>0)return A;A.lastVisited=-x,R===0&&M.push(A)}}return null},c.walk=function(w,m){var f=this.vertices.length-1,x=this.dimension,y=this.vertices,v=this.tuple,M=m?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[M];e:for(;!p.boundary;){for(var S=p.vertices,A=p.adjacent,k=0;k<=x;++k)v[k]=y[S[k]];for(p.lastVisited=f,k=0;k<=x;++k){var C=A[k];if(!(C.lastVisited>=f)){var P=v[k];v[k]=w;var R=this.orient();if(v[k]=P,R<0){p=C;continue e}C.boundary?C.lastVisited=-f:C.lastVisited=f}}return}return p},c.addPeaks=function(w,m){var f=this.vertices.length-1,x=this.dimension,y=this.vertices,v=this.tuple,M=this.interior,p=this.simplices,S=[m];m.lastVisited=f,m.vertices[m.vertices.indexOf(-1)]=f,m.boundary=!1,M.push(m);for(var A=[];S.length>0;){var k=(m=S.pop()).vertices,C=m.adjacent,P=k.indexOf(f);if(!(P<0)){for(var R=0;R<=x;++R)if(R!==P){var O=C[R];if(O.boundary&&!(O.lastVisited>=f)){var X=O.vertices;if(O.lastVisited!==-f){for(var D=0,V=0;V<=x;++V)X[V]<0?(D=V,v[V]=w):v[V]=y[X[V]];if(this.orient()>0){X[D]=f,O.boundary=!1,M.push(O),S.push(O),O.lastVisited=f;continue}O.lastVisited=-f}var j=O.adjacent,B=k.slice(),W=C.slice(),q=new r(B,W,!0);p.push(q);var re=j.indexOf(m);if(!(re<0))for(j[re]=q,W[P]=O,B[R]=-1,W[R]=m,C[R]=q,q.flip(),V=0;V<=x;++V){var ee=B[V];if(!(ee<0||ee===f)){for(var K=new Array(x-1),Y=0,$=0;$<=x;++$){var ne=B[$];ne<0||$===V||(K[Y++]=ne)}A.push(new s(K,q,V))}}}}}}for(A.sort(l),R=0;R+1<A.length;R+=2){var ae=A[R],se=A[R+1],ce=ae.index,me=se.index;ce<0||me<0||(ae.cell.adjacent[ae.index]=se.cell,se.cell.adjacent[se.index]=ae.cell)}},c.insert=function(w,m){var f=this.vertices;f.push(w);var x=this.walk(w,m);if(x){for(var y=this.dimension,v=this.tuple,M=0;M<=y;++M){var p=x.vertices[M];v[M]=p<0?w:f[p]}var S=this.orient(v);S<0||(S!==0||(x=this.handleBoundaryDegeneracy(x,w)))&&this.addPeaks(w,x)}},c.boundary=function(){for(var w=this.dimension,m=[],f=this.simplices,x=f.length,y=0;y<x;++y){var v=f[y];if(v.boundary){for(var M=new Array(w),p=v.vertices,S=0,A=0,k=0;k<=w;++k)p[k]>=0?M[S++]=p[k]:A=1&k;if(A===(1&w)){var C=M[0];M[0]=M[1],M[1]=C}m.push(M)}}return m}},9014:function(h,o,t){var i=t(5070);function n(S,A,k,C,P){this.mid=S,this.left=A,this.right=k,this.leftPoints=C,this.rightPoints=P,this.count=(A?A.count:0)+(k?k.count:0)+C.length}h.exports=function(S){return S&&S.length!==0?new M(v(S)):new M(null)};var r=n.prototype;function s(S,A){S.mid=A.mid,S.left=A.left,S.right=A.right,S.leftPoints=A.leftPoints,S.rightPoints=A.rightPoints,S.count=A.count}function l(S,A){var k=v(A);S.mid=k.mid,S.left=k.left,S.right=k.right,S.leftPoints=k.leftPoints,S.rightPoints=k.rightPoints,S.count=k.count}function u(S,A){var k=S.intervals([]);k.push(A),l(S,k)}function d(S,A){var k=S.intervals([]),C=k.indexOf(A);return C<0?0:(k.splice(C,1),l(S,k),1)}function c(S,A,k){for(var C=0;C<S.length&&S[C][0]<=A;++C){var P=k(S[C]);if(P)return P}}function w(S,A,k){for(var C=S.length-1;C>=0&&S[C][1]>=A;--C){var P=k(S[C]);if(P)return P}}function m(S,A){for(var k=0;k<S.length;++k){var C=A(S[k]);if(C)return C}}function f(S,A){return S-A}function x(S,A){return S[0]-A[0]||S[1]-A[1]}function y(S,A){return S[1]-A[1]||S[0]-A[0]}function v(S){if(S.length===0)return null;for(var A=[],k=0;k<S.length;++k)A.push(S[k][0],S[k][1]);A.sort(f);var C=A[A.length>>1],P=[],R=[],O=[];for(k=0;k<S.length;++k){var X=S[k];X[1]<C?P.push(X):C<X[0]?R.push(X):O.push(X)}var D=O,V=O.slice();return D.sort(x),V.sort(y),new n(C,v(P),v(R),D,V)}function M(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var A=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(A+1)?u(this,S):this.left.insert(S):this.left=v([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(A+1)?u(this,S):this.right.insert(S):this.right=v([S]);else{var k=i.ge(this.leftPoints,S,x),C=i.ge(this.rightPoints,S,y);this.leftPoints.splice(k,0,S),this.rightPoints.splice(C,0,S)}},r.remove=function(S){var A=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(A-1)?d(this,S):(R=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(R===1&&(this.count-=1),R):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(A-1)?d(this,S):(R=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(R===1&&(this.count-=1),R):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var k=this,C=this.left;C.right;)k=C,C=C.right;if(k===this)C.right=this.right;else{var P=this.left,R=this.right;k.count-=C.count,k.right=C.left,C.left=P,C.right=R}s(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(P=i.ge(this.leftPoints,S,x);P<this.leftPoints.length&&this.leftPoints[P][0]===S[0];++P)if(this.leftPoints[P]===S){for(this.count-=1,this.leftPoints.splice(P,1),R=i.ge(this.rightPoints,S,y);R<this.rightPoints.length&&this.rightPoints[R][1]===S[1];++R)if(this.rightPoints[R]===S)return this.rightPoints.splice(R,1),1}return 0},r.queryPoint=function(S,A){return S<this.mid?this.left&&(k=this.left.queryPoint(S,A))?k:c(this.leftPoints,S,A):S>this.mid?this.right&&(k=this.right.queryPoint(S,A))?k:w(this.rightPoints,S,A):m(this.leftPoints,A);var k},r.queryInterval=function(S,A,k){var C;return S<this.mid&&this.left&&(C=this.left.queryInterval(S,A,k))||A>this.mid&&this.right&&(C=this.right.queryInterval(S,A,k))?C:A<this.mid?c(this.leftPoints,A,k):S>this.mid?w(this.rightPoints,S,k):m(this.leftPoints,k)};var p=M.prototype;p.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},p.remove=function(S){if(this.root){var A=this.root.remove(S);return A===2&&(this.root=null),A!==0}return!1},p.queryPoint=function(S,A){if(this.root)return this.root.queryPoint(S,A)},p.queryInterval=function(S,A,k){if(S<=A&&this.root)return this.root.queryInterval(S,A,k)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(h){h.exports=function(o){for(var t=new Array(o),i=0;i<o;++i)t[i]=i;return t}},4846:function(h){h.exports=!0},4780:function(h){function o(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}h.exports=function(t){return t!=null&&(o(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&o(i.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(h){h.exports=function(o){for(var t,i=o.length,n=0;n<i;n++)if(((t=o.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(h){h.exports=function(o,t,i){return o*(1-i)+t*i}},7191:function(h,o,t){var i=t(4690),n=t(9823),r=t(7332),s=t(7787),l=t(7437),u=t(2142),d={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},c=n(),w=n(),m=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],x=[0,0,0];function y(v,M,p,S,A){v[0]=M[0]*S+p[0]*A,v[1]=M[1]*S+p[1]*A,v[2]=M[2]*S+p[2]*A}h.exports=function(v,M,p,S,A,k){if(M||(M=[0,0,0]),p||(p=[0,0,0]),S||(S=[0,0,0]),A||(A=[0,0,0,1]),k||(k=[0,0,0,1]),!i(c,v)||(r(w,c),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(s(w)<1e-8)))return!1;var C,P,R,O,X,D,V,j=c[3],B=c[7],W=c[11],q=c[12],re=c[13],ee=c[14],K=c[15];if(j!==0||B!==0||W!==0){if(m[0]=j,m[1]=B,m[2]=W,m[3]=K,!l(w,w))return!1;u(w,w),C=A,R=w,O=(P=m)[0],X=P[1],D=P[2],V=P[3],C[0]=R[0]*O+R[4]*X+R[8]*D+R[12]*V,C[1]=R[1]*O+R[5]*X+R[9]*D+R[13]*V,C[2]=R[2]*O+R[6]*X+R[10]*D+R[14]*V,C[3]=R[3]*O+R[7]*X+R[11]*D+R[15]*V}else A[0]=A[1]=A[2]=0,A[3]=1;if(M[0]=q,M[1]=re,M[2]=ee,function($,ne){$[0][0]=ne[0],$[0][1]=ne[1],$[0][2]=ne[2],$[1][0]=ne[4],$[1][1]=ne[5],$[1][2]=ne[6],$[2][0]=ne[8],$[2][1]=ne[9],$[2][2]=ne[10]}(f,c),p[0]=d.length(f[0]),d.normalize(f[0],f[0]),S[0]=d.dot(f[0],f[1]),y(f[1],f[1],f[0],1,-S[0]),p[1]=d.length(f[1]),d.normalize(f[1],f[1]),S[0]/=p[1],S[1]=d.dot(f[0],f[2]),y(f[2],f[2],f[0],1,-S[1]),S[2]=d.dot(f[1],f[2]),y(f[2],f[2],f[1],1,-S[2]),p[2]=d.length(f[2]),d.normalize(f[2],f[2]),S[1]/=p[2],S[2]/=p[2],d.cross(x,f[1],f[2]),d.dot(f[0],x)<0)for(var Y=0;Y<3;Y++)p[Y]*=-1,f[Y][0]*=-1,f[Y][1]*=-1,f[Y][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(k[0]=-k[0]),f[0][2]>f[2][0]&&(k[1]=-k[1]),f[1][0]>f[0][1]&&(k[2]=-k[2]),!0}},4690:function(h){h.exports=function(o,t){var i=t[15];if(i===0)return!1;for(var n=1/i,r=0;r<16;r++)o[r]=t[r]*n;return!0}},7649:function(h,o,t){var i=t(1868),n=t(1102),r=t(7191),s=t(7787),l=t(1116),u=w(),d=w(),c=w();function w(){return{translate:m(),scale:m(1),skew:m(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function m(f){return[f||0,f||0,f||0]}h.exports=function(f,x,y,v){if(s(x)===0||s(y)===0)return!1;var M=r(x,u.translate,u.scale,u.skew,u.perspective,u.quaternion),p=r(y,d.translate,d.scale,d.skew,d.perspective,d.quaternion);return!(!M||!p||(i(c.translate,u.translate,d.translate,v),i(c.skew,u.skew,d.skew,v),i(c.scale,u.scale,d.scale,v),i(c.perspective,u.perspective,d.perspective,v),l(c.quaternion,u.quaternion,d.quaternion,v),n(f,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(h,o,t){var i={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},n=(i.create(),i.create());h.exports=function(r,s,l,u,d,c){return i.identity(r),i.fromRotationTranslation(r,c,s),r[3]=d[0],r[7]=d[1],r[11]=d[2],r[15]=d[3],i.identity(n),u[2]!==0&&(n[9]=u[2],i.multiply(r,r,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],i.multiply(r,r,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],i.multiply(r,r,n)),i.scale(r,r,l),r}},9298:function(h,o,t){var i=t(5070),n=t(7649),r=t(7437),s=t(6109),l=t(7115),u=t(5240),d=t(3012),c=t(998),w=(t(3668),t(899)),m=[0,0,0];function f(v){this._components=v.slice(),this._time=[0],this.prevMatrix=v.slice(),this.nextMatrix=v.slice(),this.computedMatrix=v.slice(),this.computedInverse=v.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}h.exports=function(v){return new f((v=v||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var x=f.prototype;x.recalcMatrix=function(v){var M=this._time,p=i.le(M,v),S=this.computedMatrix;if(!(p<0)){var A=this._components;if(p===M.length-1)for(var k=16*p,C=0;C<16;++C)S[C]=A[k++];else{var P=M[p+1]-M[p],R=(k=16*p,this.prevMatrix),O=!0;for(C=0;C<16;++C)R[C]=A[k++];var X=this.nextMatrix;for(C=0;C<16;++C)X[C]=A[k++],O=O&&R[C]===X[C];if(P<1e-6||O)for(C=0;C<16;++C)S[C]=R[C];else n(S,R,X,(v-M[p])/P)}var D=this.computedUp;D[0]=S[1],D[1]=S[5],D[2]=S[9],w(D,D);var V=this.computedInverse;r(V,S);var j=this.computedEye,B=V[15];j[0]=V[12]/B,j[1]=V[13]/B,j[2]=V[14]/B;var W=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)W[C]=j[C]-S[2+4*C]*q}},x.idle=function(v){if(!(v<this.lastT())){for(var M=this._components,p=M.length-16,S=0;S<16;++S)M.push(M[p++]);this._time.push(v)}},x.flush=function(v){var M=i.gt(this._time,v)-2;M<0||(this._time.splice(0,M),this._components.splice(0,16*M))},x.lastT=function(){return this._time[this._time.length-1]},x.lookAt=function(v,M,p,S){this.recalcMatrix(v),M=M||this.computedEye,p=p||m,S=S||this.computedUp,this.setMatrix(v,d(this.computedMatrix,M,p,S));for(var A=0,k=0;k<3;++k)A+=Math.pow(p[k]-M[k],2);A=Math.log(Math.sqrt(A)),this.computedRadius[0]=A},x.rotate=function(v,M,p,S){this.recalcMatrix(v);var A=this.computedInverse;M&&l(A,A,M),p&&s(A,A,p),S&&u(A,A,S),this.setMatrix(v,r(this.computedMatrix,A))};var y=[0,0,0];x.pan=function(v,M,p,S){y[0]=-(M||0),y[1]=-(p||0),y[2]=-(S||0),this.recalcMatrix(v);var A=this.computedInverse;c(A,A,y),this.setMatrix(v,r(A,A))},x.translate=function(v,M,p,S){y[0]=M||0,y[1]=p||0,y[2]=S||0,this.recalcMatrix(v);var A=this.computedMatrix;c(A,A,y),this.setMatrix(v,A)},x.setMatrix=function(v,M){if(!(v<this.lastT())){this._time.push(v);for(var p=0;p<16;++p)this._components.push(M[p])}},x.setDistance=function(v,M){this.computedRadius[0]=M},x.setDistanceLimits=function(v,M){var p=this._limits;p[0]=v,p[1]=M},x.getDistanceLimits=function(v){var M=this._limits;return v?(v[0]=M[0],v[1]=M[1],v):M}},3266:function(h,o,t){h.exports=function(n){var r=n.length;if(r<3){for(var s=new Array(r),l=0;l<r;++l)s[l]=l;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:s}var u=new Array(r);for(l=0;l<r;++l)u[l]=l;u.sort(function(M,p){return n[M][0]-n[p][0]||n[M][1]-n[p][1]});var d=[u[0],u[1]],c=[u[0],u[1]];for(l=2;l<r;++l){for(var w=u[l],m=n[w],f=d.length;f>1&&i(n[d[f-2]],n[d[f-1]],m)<=0;)f-=1,d.pop();for(d.push(w),f=c.length;f>1&&i(n[c[f-2]],n[c[f-1]],m)>=0;)f-=1,c.pop();c.push(w)}s=new Array(c.length+d.length-2);for(var x=0,y=(l=0,d.length);l<y;++l)s[x++]=d[l];for(var v=c.length-2;v>0;--v)s[x++]=c[v];return s};var i=t(417)[3]},6145:function(h,o,t){h.exports=function(n,r){r||(r=n,n=window);var s=0,l=0,u=0,d={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function w(k){var C=!1;return"altKey"in k&&(C=C||k.altKey!==d.alt,d.alt=!!k.altKey),"shiftKey"in k&&(C=C||k.shiftKey!==d.shift,d.shift=!!k.shiftKey),"ctrlKey"in k&&(C=C||k.ctrlKey!==d.control,d.control=!!k.ctrlKey),"metaKey"in k&&(C=C||k.metaKey!==d.meta,d.meta=!!k.metaKey),C}function m(k,C){var P=i.x(C),R=i.y(C);"buttons"in C&&(k=0|C.buttons),(k!==s||P!==l||R!==u||w(C))&&(s=0|k,l=P||0,u=R||0,r&&r(s,l,u,d))}function f(k){m(0,k)}function x(){(s||l||u||d.shift||d.alt||d.meta||d.control)&&(l=u=0,s=0,d.shift=d.alt=d.control=d.meta=!1,r&&r(0,0,0,d))}function y(k){w(k)&&r&&r(s,l,u,d)}function v(k){i.buttons(k)===0?m(0,k):m(s,k)}function M(k){m(s|i.buttons(k),k)}function p(k){m(s&~i.buttons(k),k)}function S(){c||(c=!0,n.addEventListener("mousemove",v),n.addEventListener("mousedown",M),n.addEventListener("mouseup",p),n.addEventListener("mouseleave",f),n.addEventListener("mouseenter",f),n.addEventListener("mouseout",f),n.addEventListener("mouseover",f),n.addEventListener("blur",x),n.addEventListener("keyup",y),n.addEventListener("keydown",y),n.addEventListener("keypress",y),n!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var A={element:n};return Object.defineProperties(A,{enabled:{get:function(){return c},set:function(k){k?S():c&&(c=!1,n.removeEventListener("mousemove",v),n.removeEventListener("mousedown",M),n.removeEventListener("mouseup",p),n.removeEventListener("mouseleave",f),n.removeEventListener("mouseenter",f),n.removeEventListener("mouseout",f),n.removeEventListener("mouseover",f),n.removeEventListener("blur",x),n.removeEventListener("keyup",y),n.removeEventListener("keydown",y),n.removeEventListener("keypress",y),n!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),A};var i=t(4110)},2565:function(h){var o={left:0,top:0};h.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,s=t.clientX||0,l=t.clientY||0,u=(r=i)===window||r===document||r===document.body?o:r.getBoundingClientRect();return n[0]=s-u.left,n[1]=l-u.top,n}},4110:function(h,o){function t(i){return i.target||i.srcElement||window}o.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((n=i.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in i){var n;if((n=i.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},o.element=t,o.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var n=t(i).getBoundingClientRect();return i.clientX-n.left}return 0},o.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var n=t(i).getBoundingClientRect();return i.clientY-n.top}return 0}},6475:function(h,o,t){var i=t(14);h.exports=function(n,r,s){typeof n=="function"&&(s=!!r,r=n,n=window);var l=i("ex",n),u=function(d){s&&d.preventDefault();var c=d.deltaX||0,w=d.deltaY||0,m=d.deltaZ||0,f=1;switch(d.deltaMode){case 1:f=l;break;case 2:f=window.innerHeight}if(w*=f,m*=f,(c*=f)||w||m)return r(c,w,m,d)};return n.addEventListener("wheel",u),u}},9284:function(h,o,t){var i=t(5306);h.exports=function(r){function s(m){throw new Error("ndarray-extract-contour: "+m)}typeof r!="object"&&s("Must specify arguments");var l=r.order;Array.isArray(l)||s("Must specify order");var u=r.arrayArguments||1;u<1&&s("Must have at least one array argument"),(r.scalarArguments||0)<0&&s("Scalar arg count must be > 0"),typeof r.vertex!="function"&&s("Must specify vertex creation function"),typeof r.cell!="function"&&s("Must specify cell creation function"),typeof r.phase!="function"&&s("Must specify phase function");for(var d=r.getters||[],c=new Array(u),w=0;w<u;++w)d.indexOf(w)>=0?c[w]=!0:c[w]=!1;return function(m,f,x,y,v,M){var p=[M,v].join(",");return(0,n[p])(m,f,x,i.mallocUint32,i.freeUint32)}(r.vertex,r.cell,r.phase,0,l,c)};var n={"false,0,1":function(r,s,l,u,d){return function(c,w,m,f){var x,y=0|c.shape[0],v=0|c.shape[1],M=c.data,p=0|c.offset,S=0|c.stride[0],A=0|c.stride[1],k=p,C=0|-S,P=0,R=0|-A,O=0,X=-S-A|0,D=0,V=0|S,j=A-S*y|0,B=0,W=0,q=0,re=2*y|0,ee=u(re),K=u(re),Y=0,$=0,ne=-1,ae=-1,se=0,ce=0|-y,me=0|y,ye=0,Te=-y-1|0,Ce=y-1|0,pe=0,fe=0,Oe=0;for(B=0;B<y;++B)ee[Y++]=l(M[k],w,m,f),k+=V;if(k+=j,v>0){if(W=1,ee[Y++]=l(M[k],w,m,f),k+=V,y>0)for(B=1,x=M[k],$=ee[Y]=l(x,w,m,f),se=ee[Y+ne],ye=ee[Y+ce],pe=ee[Y+Te],$===se&&$===ye&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,se,ye,pe,w,m,f),fe=K[Y]=q++),Y+=1,k+=V,B=2;B<y;++B)x=M[k],$=ee[Y]=l(x,w,m,f),se=ee[Y+ne],ye=ee[Y+ce],pe=ee[Y+Te],$===se&&$===ye&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,se,ye,pe,w,m,f),fe=K[Y]=q++,pe!==se&&s(K[Y+ne],fe,D,P,pe,se,w,m,f)),Y+=1,k+=V;for(k+=j,Y=0,Oe=ne,ne=ae,ae=Oe,Oe=ce,ce=me,me=Oe,Oe=Te,Te=Ce,Ce=Oe,W=2;W<v;++W){if(ee[Y++]=l(M[k],w,m,f),k+=V,y>0)for(B=1,x=M[k],$=ee[Y]=l(x,w,m,f),se=ee[Y+ne],ye=ee[Y+ce],pe=ee[Y+Te],$===se&&$===ye&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,se,ye,pe,w,m,f),fe=K[Y]=q++,pe!==ye&&s(K[Y+ce],fe,O,D,ye,pe,w,m,f)),Y+=1,k+=V,B=2;B<y;++B)x=M[k],$=ee[Y]=l(x,w,m,f),se=ee[Y+ne],ye=ee[Y+ce],pe=ee[Y+Te],$===se&&$===ye&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,se,ye,pe,w,m,f),fe=K[Y]=q++,pe!==ye&&s(K[Y+ce],fe,O,D,ye,pe,w,m,f),pe!==se&&s(K[Y+ne],fe,D,P,pe,se,w,m,f)),Y+=1,k+=V;1&W&&(Y=0),Oe=ne,ne=ae,ae=Oe,Oe=ce,ce=me,me=Oe,Oe=Te,Te=Ce,Ce=Oe,k+=j}}d(K),d(ee)}},"false,1,0":function(r,s,l,u,d){return function(c,w,m,f){var x,y=0|c.shape[0],v=0|c.shape[1],M=c.data,p=0|c.offset,S=0|c.stride[0],A=0|c.stride[1],k=p,C=0|-S,P=0,R=0|-A,O=0,X=-S-A|0,D=0,V=0|A,j=S-A*v|0,B=0,W=0,q=0,re=2*v|0,ee=u(re),K=u(re),Y=0,$=0,ne=-1,ae=-1,se=0,ce=0|-v,me=0|v,ye=0,Te=-v-1|0,Ce=v-1|0,pe=0,fe=0,Oe=0;for(W=0;W<v;++W)ee[Y++]=l(M[k],w,m,f),k+=V;if(k+=j,y>0){if(B=1,ee[Y++]=l(M[k],w,m,f),k+=V,v>0)for(W=1,x=M[k],$=ee[Y]=l(x,w,m,f),ye=ee[Y+ce],se=ee[Y+ne],pe=ee[Y+Te],$===ye&&$===se&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,ye,se,pe,w,m,f),fe=K[Y]=q++),Y+=1,k+=V,W=2;W<v;++W)x=M[k],$=ee[Y]=l(x,w,m,f),ye=ee[Y+ce],se=ee[Y+ne],pe=ee[Y+Te],$===ye&&$===se&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,ye,se,pe,w,m,f),fe=K[Y]=q++,pe!==se&&s(K[Y+ne],fe,O,D,se,pe,w,m,f)),Y+=1,k+=V;for(k+=j,Y=0,Oe=ce,ce=me,me=Oe,Oe=ne,ne=ae,ae=Oe,Oe=Te,Te=Ce,Ce=Oe,B=2;B<y;++B){if(ee[Y++]=l(M[k],w,m,f),k+=V,v>0)for(W=1,x=M[k],$=ee[Y]=l(x,w,m,f),ye=ee[Y+ce],se=ee[Y+ne],pe=ee[Y+Te],$===ye&&$===se&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,ye,se,pe,w,m,f),fe=K[Y]=q++,pe!==ye&&s(K[Y+ce],fe,D,P,pe,ye,w,m,f)),Y+=1,k+=V,W=2;W<v;++W)x=M[k],$=ee[Y]=l(x,w,m,f),ye=ee[Y+ce],se=ee[Y+ne],pe=ee[Y+Te],$===ye&&$===se&&$===pe||(P=M[k+C],O=M[k+R],D=M[k+X],r(B,W,x,P,O,D,$,ye,se,pe,w,m,f),fe=K[Y]=q++,pe!==se&&s(K[Y+ne],fe,O,D,se,pe,w,m,f),pe!==ye&&s(K[Y+ce],fe,D,P,pe,ye,w,m,f)),Y+=1,k+=V;1&B&&(Y=0),Oe=ce,ce=me,me=Oe,Oe=ne,ne=ae,ae=Oe,Oe=Te,Te=Ce,Ce=Oe,k+=j}}d(K),d(ee)}}}},9144:function(h,o,t){var i=t(3094),n={zero:function(y,v,M,p){var S=y[0];p|=0;var A=0,k=M[0];for(A=0;A<S;++A)v[p]=0,p+=k},fdTemplate1:function(y,v,M,p,S,A,k){var C=y[0],P=M[0],R=-1*P,O=P;p|=0,k|=0;var X=0,D=P,V=A[0];for(X=0;X<C;++X)S[k]=.5*(v[p+R]-v[p+O]),p+=D,k+=V},fdTemplate2:function(y,v,M,p,S,A,k,C,P,R){var O=y[0],X=y[1],D=M[0],V=M[1],j=A[0],B=A[1],W=P[0],q=P[1],re=-1*D,ee=D,K=-1*V,Y=V;p|=0,k|=0,R|=0;var $=0,ne=0,ae=V,se=D-X*V,ce=B,me=j-X*B,ye=q,Te=W-X*q;for(ne=0;ne<O;++ne){for($=0;$<X;++$)S[k]=.5*(v[p+re]-v[p+ee]),C[R]=.5*(v[p+K]-v[p+Y]),p+=ae,k+=ce,R+=ye;p+=se,k+=me,R+=Te}}},r={cdiff:function(y){var v={};return function(M,p,S){var A=M.dtype,k=M.order,C=p.dtype,P=p.order,R=S.dtype,O=S.order,X=[A,k.join(),C,P.join(),R,O.join()].join(),D=v[X];return D||(v[X]=D=y([A,k,C,P,R,O])),D(M.shape.slice(0),M.data,M.stride,0|M.offset,p.data,p.stride,0|p.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var v={};return function(M){var p=M.dtype,S=M.order,A=[p,S.join()].join(),k=v[A];return k||(v[A]=k=y([p,S])),k(M.shape.slice(0),M.data,M.stride,0|M.offset)}},fdTemplate1:function(y){var v={};return function(M,p){var S=M.dtype,A=M.order,k=p.dtype,C=p.order,P=[S,A.join(),k,C.join()].join(),R=v[P];return R||(v[P]=R=y([S,A,k,C])),R(M.shape.slice(0),M.data,M.stride,0|M.offset,p.data,p.stride,0|p.offset)}},fdTemplate2:function(y){var v={};return function(M,p,S){var A=M.dtype,k=M.order,C=p.dtype,P=p.order,R=S.dtype,O=S.order,X=[A,k.join(),C,P.join(),R,O.join()].join(),D=v[X];return D||(v[X]=D=y([A,k,C,P,R,O])),D(M.shape.slice(0),M.data,M.stride,0|M.offset,p.data,p.stride,0|p.offset,S.data,S.stride,0|S.offset)}}};function s(y){return(0,r[y.funcName])(l.bind(void 0,y))}function l(y){return n[y.funcName]}function u(y){return s({funcName:y.funcName})}var d={},c={},w=u({funcName:"cdiff"}),m=u({funcName:"zero"});function f(y){return y in d?d[y]:d[y]=u({funcName:"fdTemplate"+y})}function x(y,v,M,p){return function(S,A){var k=A.shape.slice();return k[0]>2&&k[1]>2&&p(A.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),S.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),S.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(M(A.pick(0,-1).lo(1).hi(k[1]-2),S.pick(0,-1,1).lo(1).hi(k[1]-2)),v(S.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(M(A.pick(k[0]-1,-1).lo(1).hi(k[1]-2),S.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),v(S.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(M(A.pick(-1,0).lo(1).hi(k[0]-2),S.pick(-1,0,0).lo(1).hi(k[0]-2)),v(S.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(M(A.pick(-1,k[1]-1).lo(1).hi(k[0]-2),S.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),v(S.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(k[0]-1,0,0,0),S.set(k[0]-1,0,1,0),S.set(0,k[1]-1,0,0),S.set(0,k[1]-1,1,0),S.set(k[0]-1,k[1]-1,0,0),S.set(k[0]-1,k[1]-1,1,0),S}}h.exports=function(y,v,M){return Array.isArray(M)||(M=i(v.dimension,typeof M=="string"?M:"clamp")),v.size===0?y:v.dimension===0?(y.set(0),y):function(p){var S=p.join();if(P=c[S])return P;for(var A=p.length,k=[w,m],C=1;C<=A;++C)k.push(f(C));var P=x.apply(void 0,k);return c[S]=P,P}(M)(y,v)}},3581:function(h){function o(r,s){var l=Math.floor(s),u=s-l,d=0<=l&&l<r.shape[0],c=0<=l+1&&l+1<r.shape[0];return(1-u)*(d?+r.get(l):0)+u*(c?+r.get(l+1):0)}function t(r,s,l){var u=Math.floor(s),d=s-u,c=0<=u&&u<r.shape[0],w=0<=u+1&&u+1<r.shape[0],m=Math.floor(l),f=l-m,x=0<=m&&m<r.shape[1],y=0<=m+1&&m+1<r.shape[1],v=c&&x?r.get(u,m):0,M=c&&y?r.get(u,m+1):0;return(1-f)*((1-d)*v+d*(w&&x?r.get(u+1,m):0))+f*((1-d)*M+d*(w&&y?r.get(u+1,m+1):0))}function i(r,s,l,u){var d=Math.floor(s),c=s-d,w=0<=d&&d<r.shape[0],m=0<=d+1&&d+1<r.shape[0],f=Math.floor(l),x=l-f,y=0<=f&&f<r.shape[1],v=0<=f+1&&f+1<r.shape[1],M=Math.floor(u),p=u-M,S=0<=M&&M<r.shape[2],A=0<=M+1&&M+1<r.shape[2],k=w&&y&&S?r.get(d,f,M):0,C=w&&v&&S?r.get(d,f+1,M):0,P=m&&y&&S?r.get(d+1,f,M):0,R=m&&v&&S?r.get(d+1,f+1,M):0,O=w&&y&&A?r.get(d,f,M+1):0,X=w&&v&&A?r.get(d,f+1,M+1):0;return(1-p)*((1-x)*((1-c)*k+c*P)+x*((1-c)*C+c*R))+p*((1-x)*((1-c)*O+c*(m&&y&&A?r.get(d+1,f,M+1):0))+x*((1-c)*X+c*(m&&v&&A?r.get(d+1,f+1,M+1):0)))}function n(r){var s,l,u=0|r.shape.length,d=new Array(u),c=new Array(u),w=new Array(u),m=new Array(u);for(s=0;s<u;++s)l=+arguments[s+1],d[s]=Math.floor(l),c[s]=l-d[s],w[s]=0<=d[s]&&d[s]<r.shape[s],m[s]=0<=d[s]+1&&d[s]+1<r.shape[s];var f,x,y,v=0;e:for(s=0;s<1<<u;++s){for(x=1,y=r.offset,f=0;f<u;++f)if(s&1<<f){if(!m[f])continue e;x*=c[f],y+=r.stride[f]*(d[f]+1)}else{if(!w[f])continue e;x*=1-c[f],y+=r.stride[f]*d[f]}v+=x*r.data[y]}return v}h.exports=function(r,s,l,u){switch(r.shape.length){case 0:return 0;case 1:return o(r,s);case 2:return t(r,s,l);case 3:return i(r,s,l,u);default:return n.apply(void 0,arguments)}},h.exports.d1=o,h.exports.d2=t,h.exports.d3=i},7498:function(h,o){var t={"float64,2,1,0":function(){return function(l,u,d,c,w){var m=l[0],f=l[1],x=l[2],y=d[0],v=d[1],M=d[2];c|=0;var p=0,S=0,A=0,k=M,C=v-x*M,P=y-f*v;for(A=0;A<m;++A){for(S=0;S<f;++S){for(p=0;p<x;++p)u[c]/=w,c+=k;c+=C}c+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,d,c,w,m,f,x){for(var y=l[0],v=l[1],M=l[2],p=d[0],S=d[1],A=d[2],k=m[0],C=m[1],P=m[2],R=c|=0,O=f|=0,X=0|l[0];X>0;){X<64?(y=X,X=0):(y=64,X-=64);for(var D=0|l[1];D>0;){D<64?(v=D,D=0):(v=64,D-=64),c=R+X*p+D*S,f=O+X*k+D*C;var V=0,j=0,B=0,W=A,q=p-M*A,re=S-y*p,ee=P,K=k-M*P,Y=C-y*k;for(B=0;B<v;++B){for(j=0;j<y;++j){for(V=0;V<M;++V)u[c]=w[f]*x,c+=W,f+=ee;c+=q,f+=K}c+=re,f+=Y}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,d,c,w,m,f){var x=l[0],y=l[1],v=d[0],M=d[1],p=m[0],S=m[1];c|=0,f|=0;var A=0,k=0,C=M,P=v-y*M,R=S,O=p-y*S;for(k=0;k<x;++k){for(A=0;A<y;++A)u[c]=w[f],c+=C,f+=R;c+=P,f+=O}}},"float32,1,0,float32,0,1":function(){return function(l,u,d,c,w,m,f){for(var x=l[0],y=l[1],v=d[0],M=d[1],p=m[0],S=m[1],A=c|=0,k=f|=0,C=0|l[1];C>0;){C<64?(y=C,C=0):(y=64,C-=64);for(var P=0|l[0];P>0;){P<64?(x=P,P=0):(x=64,P-=64),c=A+C*M+P*v,f=k+C*S+P*p;var R=0,O=0,X=M,D=v-y*M,V=S,j=p-y*S;for(O=0;O<x;++O){for(R=0;R<y;++R)u[c]=w[f],c+=X,f+=V;c+=D,f+=j}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,d,c,w,m,f){for(var x=l[0],y=l[1],v=l[2],M=d[0],p=d[1],S=d[2],A=m[0],k=m[1],C=m[2],P=c|=0,R=f|=0,O=0|l[2];O>0;){O<64?(v=O,O=0):(v=64,O-=64);for(var X=0|l[0];X>0;){X<64?(x=X,X=0):(x=64,X-=64);for(var D=0|l[1];D>0;){D<64?(y=D,D=0):(y=64,D-=64),c=P+O*S+X*M+D*p,f=R+O*C+X*A+D*k;var V=0,j=0,B=0,W=S,q=M-v*S,re=p-x*M,ee=C,K=A-v*C,Y=k-x*A;for(B=0;B<y;++B){for(j=0;j<x;++j){for(V=0;V<v;++V)u[c]=w[f],c+=W,f+=ee;c+=q,f+=K}c+=re,f+=Y}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,d,c,w,m,f){var x=l[0],y=l[1],v=l[2],M=d[0],p=d[1],S=d[2],A=m[0],k=m[1],C=m[2];c|=0,f|=0;var P=0,R=0,O=0,X=S,D=M-v*S,V=p-x*M,j=C,B=A-v*C,W=k-x*A;for(O=0;O<y;++O){for(R=0;R<x;++R){for(P=0;P<v;++P)u[c]=w[f],c+=X,f+=j;c+=D,f+=B}c+=V,f+=W}}}},i=function(l,u){var d=u.join(",");return(0,t[d])()},n={mul:function(l){var u={};return function(d,c,w){var m=d.dtype,f=d.order,x=c.dtype,y=c.order,v=w.dtype,M=w.order,p=[m,f.join(),x,y.join(),v,M.join()].join(),S=u[p];return S||(u[p]=S=l([m,f,x,y,v,M])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,w.data,w.stride,0|w.offset)}},muls:function(l){var u={};return function(d,c,w){var m=d.dtype,f=d.order,x=c.dtype,y=c.order,v=[m,f.join(),x,y.join()].join(),M=u[v];return M||(u[v]=M=l([m,f,x,y])),M(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,w)}},mulseq:function(l){var u={};return function(d,c){var w=d.dtype,m=d.order,f=[w,m.join()].join(),x=u[f];return x||(u[f]=x=l([w,m])),x(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},div:function(l){var u={};return function(d,c,w){var m=d.dtype,f=d.order,x=c.dtype,y=c.order,v=w.dtype,M=w.order,p=[m,f.join(),x,y.join(),v,M.join()].join(),S=u[p];return S||(u[p]=S=l([m,f,x,y,v,M])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,w.data,w.stride,0|w.offset)}},divs:function(l){var u={};return function(d,c,w){var m=d.dtype,f=d.order,x=c.dtype,y=c.order,v=[m,f.join(),x,y.join()].join(),M=u[v];return M||(u[v]=M=l([m,f,x,y])),M(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,w)}},divseq:function(l){var u={};return function(d,c){var w=d.dtype,m=d.order,f=[w,m.join()].join(),x=u[f];return x||(u[f]=x=l([w,m])),x(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},assign:function(l){var u={};return function(d,c){var w=d.dtype,m=d.order,f=c.dtype,x=c.order,y=[w,m.join(),f,x.join()].join(),v=u[y];return v||(u[y]=v=l([w,m,f,x])),v(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset)}}};function r(l){return u={funcName:l.funcName},(0,n[u.funcName])(i.bind(void 0,u));var u}var s={mul:"*",div:"/"};(function(){for(var l in s)o[l]=r({funcName:l}),o[l+"s"]=r({funcName:l+"s"}),o[l+"seq"]=r({funcName:l+"seq"})})(),o.assign=r({funcName:"assign"})},7382:function(h,o,t){var i=t(5050),n=t(9262);h.exports=function(r,s){for(var l=[],u=r,d=1;Array.isArray(u);)l.push(u.length),d*=u.length,u=u[0];return l.length===0?i():(s||(s=i(new Float64Array(d),l)),n(s,r),s)}},9262:function(h){h.exports=function(o){var t={};return function(i,n){var r=i.dtype,s=i.order,l=[r,s.join()].join(),u=t[l];return u||(t[l]=u=o([r,s])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}((function(){return function(o,t,i,n,r){var s=o[0],l=o[1],u=o[2],d=i[0],c=i[1],w=i[2],m=[0,0,0];n|=0;var f=0,x=0,y=0,v=w,M=c-u*w,p=d-l*c;for(y=0;y<s;++y){for(x=0;x<l;++x){for(f=0;f<u;++f){var S,A=r;for(S=0;S<m.length-1;++S)A=A[m[S]];t[n]=A[m[m.length-1]],n+=v,++m[2]}n+=M,m[2]-=u,++m[1]}n+=p,m[1]-=l,++m[0]}}}).bind(void 0,{funcName:"convert"}))},8139:function(h,o,t){var i=t(5306);function n(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var r={"uint32,1,0":function(u,d){return function(c,w,m,f,x,y,v,M,p,S,A){var k,C,P,R,O,X,D,V,j=c*x+f,B=u(M);for(k=c+1;k<=w;++k){for(C=k,P=j+=x,O=0,X=j,R=0;R<M;++R)B[O++]=m[X],X+=p;e:for(;C-- >c;){O=0,X=P-x;t:for(R=0;R<M;++R){if((D=m[X])<(V=B[O]))break e;if(D>V)break t;X+=S,O+=A}for(O=P,X=P-x,R=0;R<M;++R)m[O]=m[X],O+=p,X+=p;P-=x}for(O=P,X=0,R=0;R<M;++R)m[O]=B[X++],O+=p}d(B)}}},s={"uint32,1,0":function(u,d,c){return function w(m,f,x,y,v,M,p,S,A,k,C){var P,R,O,X,D,V,j,B,W,q,re,ee,K,Y,$,ne,ae,se,ce,me,ye,Te,Ce,pe,fe,Oe=(f-m+1)/6|0,Se=m+Oe,Me=f-Oe,ue=m+f>>1,le=ue-Oe,ie=ue+Oe,ge=Se,Ae=le,we=ue,Ne=ie,He=Me,de=m+1,Le=f-1,Ee=!0,Re=0,je=0,Fe=0,Xe=S,Ze=d(Xe),at=d(Xe);re=v*ge,ee=v*Ae,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=ge,ge=Ae,Ae=R;break e}if(Fe<0)break e;fe+=k}re=v*Ne,ee=v*He,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=Ne,Ne=He,He=R;break e}if(Fe<0)break e;fe+=k}re=v*ge,ee=v*we,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=ge,ge=we,we=R;break e}if(Fe<0)break e;fe+=k}re=v*Ae,ee=v*we,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=Ae,Ae=we,we=R;break e}if(Fe<0)break e;fe+=k}re=v*ge,ee=v*Ne,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=ge,ge=Ne,Ne=R;break e}if(Fe<0)break e;fe+=k}re=v*we,ee=v*Ne,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=we,we=Ne,Ne=R;break e}if(Fe<0)break e;fe+=k}re=v*Ae,ee=v*He,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=Ae,Ae=He,He=R;break e}if(Fe<0)break e;fe+=k}re=v*Ae,ee=v*we,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=Ae,Ae=we,we=R;break e}if(Fe<0)break e;fe+=k}re=v*Ne,ee=v*He,fe=y;e:for(q=0;q<S;++q){if(B=ee+fe,(Fe=x[j=re+fe]-x[B])>0){R=Ne,Ne=He,He=R;break e}if(Fe<0)break e;fe+=k}for(re=v*ge,ee=v*Ae,K=v*we,Y=v*Ne,$=v*He,ne=v*Se,ae=v*ue,se=v*Me,pe=0,fe=y,q=0;q<S;++q)j=re+fe,B=ee+fe,W=K+fe,ce=Y+fe,me=$+fe,ye=ne+fe,Te=ae+fe,Ce=se+fe,Ze[pe]=x[B],at[pe]=x[ce],Ee=Ee&&Ze[pe]===at[pe],O=x[j],X=x[W],D=x[me],x[ye]=O,x[Te]=X,x[Ce]=D,++pe,fe+=A;for(re=v*le,ee=v*m,fe=y,q=0;q<S;++q)B=ee+fe,x[j=re+fe]=x[B],fe+=A;for(re=v*ie,ee=v*f,fe=y,q=0;q<S;++q)B=ee+fe,x[j=re+fe]=x[B],fe+=A;if(Ee)for(V=de;V<=Le;++V){for(j=y+V*v,pe=0,q=0;q<S&&(Fe=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(Fe!==0)if(Fe<0){if(V!==de)for(re=v*V,ee=v*de,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;++de}else for(;;){for(j=y+Le*v,pe=0,q=0;q<S&&(Fe=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(!(Fe>0)){if(Fe<0){for(re=v*V,ee=v*de,K=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,W=K+fe,P=x[j=re+fe],x[j]=x[B],x[B]=x[W],x[W]=P,fe+=A;++de,--Le;break}for(re=v*V,ee=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;--Le;break}Le--}}else for(V=de;V<=Le;++V){for(j=y+V*v,pe=0,q=0;q<S&&(Re=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(Re<0){if(V!==de)for(re=v*V,ee=v*de,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;++de}else{for(j=y+V*v,pe=0,q=0;q<S&&(je=x[j]-at[pe])==0;++q)pe+=C,j+=k;if(je>0)for(;;){for(j=y+Le*v,pe=0,q=0;q<S&&(Fe=x[j]-at[pe])==0;++q)pe+=C,j+=k;if(!(Fe>0)){for(j=y+Le*v,pe=0,q=0;q<S&&(Fe=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(Fe<0){for(re=v*V,ee=v*de,K=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,W=K+fe,P=x[j=re+fe],x[j]=x[B],x[B]=x[W],x[W]=P,fe+=A;++de,--Le}else{for(re=v*V,ee=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;--Le}break}if(--Le<V)break}}}for(re=v*m,ee=v*(de-1),pe=0,fe=y,q=0;q<S;++q)B=ee+fe,x[j=re+fe]=x[B],x[B]=Ze[pe],++pe,fe+=A;for(re=v*f,ee=v*(Le+1),pe=0,fe=y,q=0;q<S;++q)B=ee+fe,x[j=re+fe]=x[B],x[B]=at[pe],++pe,fe+=A;if(de-2-m<=32?u(m,de-2,x,y,v,M,p,S,A,k,C):w(m,de-2,x,y,v,M,p,S,A,k,C),f-(Le+2)<=32?u(Le+2,f,x,y,v,M,p,S,A,k,C):w(Le+2,f,x,y,v,M,p,S,A,k,C),Ee)return c(Ze),void c(at);if(de<Se&&Le>Me){e:for(;;){for(j=y+de*v,pe=0,fe=y,q=0;q<S;++q){if(x[j]!==Ze[pe])break e;++pe,j+=A}++de}e:for(;;){for(j=y+Le*v,pe=0,fe=y,q=0;q<S;++q){if(x[j]!==at[pe])break e;++pe,j+=A}--Le}for(V=de;V<=Le;++V){for(j=y+V*v,pe=0,q=0;q<S&&(Re=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(Re===0){if(V!==de)for(re=v*V,ee=v*de,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;++de}else{for(j=y+V*v,pe=0,q=0;q<S&&(je=x[j]-at[pe])==0;++q)pe+=C,j+=k;if(je===0)for(;;){for(j=y+Le*v,pe=0,q=0;q<S&&(Fe=x[j]-at[pe])==0;++q)pe+=C,j+=k;if(Fe!==0){for(j=y+Le*v,pe=0,q=0;q<S&&(Fe=x[j]-Ze[pe])==0;++q)pe+=C,j+=k;if(Fe<0){for(re=v*V,ee=v*de,K=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,W=K+fe,P=x[j=re+fe],x[j]=x[B],x[B]=x[W],x[W]=P,fe+=A;++de,--Le}else{for(re=v*V,ee=v*Le,fe=y,q=0;q<S;++q)B=ee+fe,P=x[j=re+fe],x[j]=x[B],x[B]=P,fe+=A;--Le}break}if(--Le<V)break}}}}c(Ze),c(at),Le-de<=32?u(de,Le,x,y,v,M,p,S,A,k,C):w(de,Le,x,y,v,M,p,S,A,k,C)}}},l={"uint32,1,0":function(u,d){return function(c){var w=c.data,m=0|c.offset,f=c.shape,x=c.stride,y=0|x[0],v=0|f[0],M=0|x[1],p=0|f[1],S=M,A=M;v<=32?u(0,v-1,w,m,y,M,v,p,S,A,1):d(0,v-1,w,m,y,M,v,p,S,A,1)}}};h.exports=function(u,d){var c=[d,u].join(","),w=l[c],m=function(x,y){var v=n(y),M=[y,x].join(","),p=r[M];return v?p(v[0],v[1]):p()}(u,d),f=function(x,y,v){var M=n(y),p=[y,x].join(","),S=s[p];return x.length>1&&M?S(v,M[0],M[1]):S(v)}(u,d,m);return w(m,f)}},8729:function(h,o,t){var i=t(8139),n={};h.exports=function(r){var s=r.order,l=r.dtype,u=[s,l].join(":"),d=n[u];return d||(n[u]=d=i(s,l)),d(r),r}},5050:function(h,o,t){var i=t(4780),n=typeof Float64Array<"u";function r(c,w){return c[0]-w[0]}function s(){var c,w=this.stride,m=new Array(w.length);for(c=0;c<m.length;++c)m[c]=[Math.abs(w[c]),c];m.sort(r);var f=new Array(m.length);for(c=0;c<f.length;++c)f[c]=m[c][1];return f}var l={T:function(c){function w(f){this.data=f}var m=w.prototype;return m.dtype=c,m.index=function(){return-1},m.size=0,m.dimension=-1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new w(this.data)},m.get=m.set=function(){},m.pick=function(){return null},function(f){return new w(f)}},0:function(c,w){function m(x,y){this.data=x,this.offset=y}var f=m.prototype;return f.dtype=c,f.index=function(){return this.offset},f.dimension=0,f.size=1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new m(this.data,this.offset)},f.pick=function(){return w(this.data)},f.valueOf=f.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},f.set=function(x){return c==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,y,v,M){return new m(x,M)}},1:function(c,w,m){function f(y,v,M,p){this.data=y,this.shape=[v],this.stride=[M],this.offset=0|p}var x=f.prototype;return x.dtype=c,x.dimension=1,Object.defineProperty(x,"size",{get:function(){return this.shape[0]}}),x.order=[0],x.set=function(y,v){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,v):this.data[this.offset+this.stride[0]*y]=v},x.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},x.index=function(y){return this.offset+this.stride[0]*y},x.hi=function(y){return new f(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},x.lo=function(y){var v=this.offset,M=0,p=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(v+=S*(M=0|y),p-=M),new f(this.data,p,S,v)},x.step=function(y){var v=this.shape[0],M=this.stride[0],p=this.offset,S=0,A=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(p+=M*(v-1),v=A(-v/S)):v=A(v/S),M*=S),new f(this.data,v,M,p)},x.transpose=function(y){y=y===void 0?0:0|y;var v=this.shape,M=this.stride;return new f(this.data,v[y],M[y],this.offset)},x.pick=function(y){var v=[],M=[],p=this.offset;return typeof y=="number"&&y>=0?p=p+this.stride[0]*y|0:(v.push(this.shape[0]),M.push(this.stride[0])),(0,w[v.length+1])(this.data,v,M,p)},function(y,v,M,p){return new f(y,v[0],M[0],p)}},2:function(c,w,m){function f(y,v,M,p,S,A){this.data=y,this.shape=[v,M],this.stride=[p,S],this.offset=0|A}var x=f.prototype;return x.dtype=c,x.dimension=2,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(x,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),x.set=function(y,v,M){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v,M):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]=M},x.get=function(y,v){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]},x.index=function(y,v){return this.offset+this.stride[0]*y+this.stride[1]*v},x.hi=function(y,v){return new f(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,this.stride[0],this.stride[1],this.offset)},x.lo=function(y,v){var M=this.offset,p=0,S=this.shape[0],A=this.shape[1],k=this.stride[0],C=this.stride[1];return typeof y=="number"&&y>=0&&(M+=k*(p=0|y),S-=p),typeof v=="number"&&v>=0&&(M+=C*(p=0|v),A-=p),new f(this.data,S,A,k,C,M)},x.step=function(y,v){var M=this.shape[0],p=this.shape[1],S=this.stride[0],A=this.stride[1],k=this.offset,C=0,P=Math.ceil;return typeof y=="number"&&((C=0|y)<0?(k+=S*(M-1),M=P(-M/C)):M=P(M/C),S*=C),typeof v=="number"&&((C=0|v)<0?(k+=A*(p-1),p=P(-p/C)):p=P(p/C),A*=C),new f(this.data,M,p,S,A,k)},x.transpose=function(y,v){y=y===void 0?0:0|y,v=v===void 0?1:0|v;var M=this.shape,p=this.stride;return new f(this.data,M[y],M[v],p[y],p[v],this.offset)},x.pick=function(y,v){var M=[],p=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(M.push(this.shape[0]),p.push(this.stride[0])),typeof v=="number"&&v>=0?S=S+this.stride[1]*v|0:(M.push(this.shape[1]),p.push(this.stride[1])),(0,w[M.length+1])(this.data,M,p,S)},function(y,v,M,p){return new f(y,v[0],v[1],M[0],M[1],p)}},3:function(c,w,m){function f(y,v,M,p,S,A,k,C){this.data=y,this.shape=[v,M,p],this.stride=[S,A,k],this.offset=0|C}var x=f.prototype;return x.dtype=c,x.dimension=3,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(x,"order",{get:function(){var y=Math.abs(this.stride[0]),v=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return y>v?v>M?[2,1,0]:y>M?[1,2,0]:[1,0,2]:y>M?[2,0,1]:M>v?[0,1,2]:[0,2,1]}}),x.set=function(y,v,M,p){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M,p):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M]=p},x.get=function(y,v,M){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M]},x.index=function(y,v,M){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M},x.hi=function(y,v,M){return new f(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof M!="number"||M<0?this.shape[2]:0|M,this.stride[0],this.stride[1],this.stride[2],this.offset)},x.lo=function(y,v,M){var p=this.offset,S=0,A=this.shape[0],k=this.shape[1],C=this.shape[2],P=this.stride[0],R=this.stride[1],O=this.stride[2];return typeof y=="number"&&y>=0&&(p+=P*(S=0|y),A-=S),typeof v=="number"&&v>=0&&(p+=R*(S=0|v),k-=S),typeof M=="number"&&M>=0&&(p+=O*(S=0|M),C-=S),new f(this.data,A,k,C,P,R,O,p)},x.step=function(y,v,M){var p=this.shape[0],S=this.shape[1],A=this.shape[2],k=this.stride[0],C=this.stride[1],P=this.stride[2],R=this.offset,O=0,X=Math.ceil;return typeof y=="number"&&((O=0|y)<0?(R+=k*(p-1),p=X(-p/O)):p=X(p/O),k*=O),typeof v=="number"&&((O=0|v)<0?(R+=C*(S-1),S=X(-S/O)):S=X(S/O),C*=O),typeof M=="number"&&((O=0|M)<0?(R+=P*(A-1),A=X(-A/O)):A=X(A/O),P*=O),new f(this.data,p,S,A,k,C,P,R)},x.transpose=function(y,v,M){y=y===void 0?0:0|y,v=v===void 0?1:0|v,M=M===void 0?2:0|M;var p=this.shape,S=this.stride;return new f(this.data,p[y],p[v],p[M],S[y],S[v],S[M],this.offset)},x.pick=function(y,v,M){var p=[],S=[],A=this.offset;return typeof y=="number"&&y>=0?A=A+this.stride[0]*y|0:(p.push(this.shape[0]),S.push(this.stride[0])),typeof v=="number"&&v>=0?A=A+this.stride[1]*v|0:(p.push(this.shape[1]),S.push(this.stride[1])),typeof M=="number"&&M>=0?A=A+this.stride[2]*M|0:(p.push(this.shape[2]),S.push(this.stride[2])),(0,w[p.length+1])(this.data,p,S,A)},function(y,v,M,p){return new f(y,v[0],v[1],v[2],M[0],M[1],M[2],p)}},4:function(c,w,m){function f(y,v,M,p,S,A,k,C,P,R){this.data=y,this.shape=[v,M,p,S],this.stride=[A,k,C,P],this.offset=0|R}var x=f.prototype;return x.dtype=c,x.dimension=4,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(y,v,M,p,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p]=S},x.get=function(y,v,M,p){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p]},x.index=function(y,v,M,p){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p},x.hi=function(y,v,M,p){return new f(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof M!="number"||M<0?this.shape[2]:0|M,typeof p!="number"||p<0?this.shape[3]:0|p,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},x.lo=function(y,v,M,p){var S=this.offset,A=0,k=this.shape[0],C=this.shape[1],P=this.shape[2],R=this.shape[3],O=this.stride[0],X=this.stride[1],D=this.stride[2],V=this.stride[3];return typeof y=="number"&&y>=0&&(S+=O*(A=0|y),k-=A),typeof v=="number"&&v>=0&&(S+=X*(A=0|v),C-=A),typeof M=="number"&&M>=0&&(S+=D*(A=0|M),P-=A),typeof p=="number"&&p>=0&&(S+=V*(A=0|p),R-=A),new f(this.data,k,C,P,R,O,X,D,V,S)},x.step=function(y,v,M,p){var S=this.shape[0],A=this.shape[1],k=this.shape[2],C=this.shape[3],P=this.stride[0],R=this.stride[1],O=this.stride[2],X=this.stride[3],D=this.offset,V=0,j=Math.ceil;return typeof y=="number"&&((V=0|y)<0?(D+=P*(S-1),S=j(-S/V)):S=j(S/V),P*=V),typeof v=="number"&&((V=0|v)<0?(D+=R*(A-1),A=j(-A/V)):A=j(A/V),R*=V),typeof M=="number"&&((V=0|M)<0?(D+=O*(k-1),k=j(-k/V)):k=j(k/V),O*=V),typeof p=="number"&&((V=0|p)<0?(D+=X*(C-1),C=j(-C/V)):C=j(C/V),X*=V),new f(this.data,S,A,k,C,P,R,O,X,D)},x.transpose=function(y,v,M,p){y=y===void 0?0:0|y,v=v===void 0?1:0|v,M=M===void 0?2:0|M,p=p===void 0?3:0|p;var S=this.shape,A=this.stride;return new f(this.data,S[y],S[v],S[M],S[p],A[y],A[v],A[M],A[p],this.offset)},x.pick=function(y,v,M,p){var S=[],A=[],k=this.offset;return typeof y=="number"&&y>=0?k=k+this.stride[0]*y|0:(S.push(this.shape[0]),A.push(this.stride[0])),typeof v=="number"&&v>=0?k=k+this.stride[1]*v|0:(S.push(this.shape[1]),A.push(this.stride[1])),typeof M=="number"&&M>=0?k=k+this.stride[2]*M|0:(S.push(this.shape[2]),A.push(this.stride[2])),typeof p=="number"&&p>=0?k=k+this.stride[3]*p|0:(S.push(this.shape[3]),A.push(this.stride[3])),(0,w[S.length+1])(this.data,S,A,k)},function(y,v,M,p){return new f(y,v[0],v[1],v[2],v[3],M[0],M[1],M[2],M[3],p)}},5:function(c,w,m){function f(y,v,M,p,S,A,k,C,P,R,O,X){this.data=y,this.shape=[v,M,p,S,A],this.stride=[k,C,P,R,O],this.offset=0|X}var x=f.prototype;return x.dtype=c,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(y,v,M,p,S,A){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p+this.stride[4]*S,A):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p+this.stride[4]*S]=A},x.get=function(y,v,M,p,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p+this.stride[4]*S]},x.index=function(y,v,M,p,S){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*M+this.stride[3]*p+this.stride[4]*S},x.hi=function(y,v,M,p,S){return new f(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof M!="number"||M<0?this.shape[2]:0|M,typeof p!="number"||p<0?this.shape[3]:0|p,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(y,v,M,p,S){var A=this.offset,k=0,C=this.shape[0],P=this.shape[1],R=this.shape[2],O=this.shape[3],X=this.shape[4],D=this.stride[0],V=this.stride[1],j=this.stride[2],B=this.stride[3],W=this.stride[4];return typeof y=="number"&&y>=0&&(A+=D*(k=0|y),C-=k),typeof v=="number"&&v>=0&&(A+=V*(k=0|v),P-=k),typeof M=="number"&&M>=0&&(A+=j*(k=0|M),R-=k),typeof p=="number"&&p>=0&&(A+=B*(k=0|p),O-=k),typeof S=="number"&&S>=0&&(A+=W*(k=0|S),X-=k),new f(this.data,C,P,R,O,X,D,V,j,B,W,A)},x.step=function(y,v,M,p,S){var A=this.shape[0],k=this.shape[1],C=this.shape[2],P=this.shape[3],R=this.shape[4],O=this.stride[0],X=this.stride[1],D=this.stride[2],V=this.stride[3],j=this.stride[4],B=this.offset,W=0,q=Math.ceil;return typeof y=="number"&&((W=0|y)<0?(B+=O*(A-1),A=q(-A/W)):A=q(A/W),O*=W),typeof v=="number"&&((W=0|v)<0?(B+=X*(k-1),k=q(-k/W)):k=q(k/W),X*=W),typeof M=="number"&&((W=0|M)<0?(B+=D*(C-1),C=q(-C/W)):C=q(C/W),D*=W),typeof p=="number"&&((W=0|p)<0?(B+=V*(P-1),P=q(-P/W)):P=q(P/W),V*=W),typeof S=="number"&&((W=0|S)<0?(B+=j*(R-1),R=q(-R/W)):R=q(R/W),j*=W),new f(this.data,A,k,C,P,R,O,X,D,V,j,B)},x.transpose=function(y,v,M,p,S){y=y===void 0?0:0|y,v=v===void 0?1:0|v,M=M===void 0?2:0|M,p=p===void 0?3:0|p,S=S===void 0?4:0|S;var A=this.shape,k=this.stride;return new f(this.data,A[y],A[v],A[M],A[p],A[S],k[y],k[v],k[M],k[p],k[S],this.offset)},x.pick=function(y,v,M,p,S){var A=[],k=[],C=this.offset;return typeof y=="number"&&y>=0?C=C+this.stride[0]*y|0:(A.push(this.shape[0]),k.push(this.stride[0])),typeof v=="number"&&v>=0?C=C+this.stride[1]*v|0:(A.push(this.shape[1]),k.push(this.stride[1])),typeof M=="number"&&M>=0?C=C+this.stride[2]*M|0:(A.push(this.shape[2]),k.push(this.stride[2])),typeof p=="number"&&p>=0?C=C+this.stride[3]*p|0:(A.push(this.shape[3]),k.push(this.stride[3])),typeof S=="number"&&S>=0?C=C+this.stride[4]*S|0:(A.push(this.shape[4]),k.push(this.stride[4])),(0,w[A.length+1])(this.data,A,k,C)},function(y,v,M,p){return new f(y,v[0],v[1],v[2],v[3],v[4],M[0],M[1],M[2],M[3],M[4],p)}}};function u(c,w){var m=w===-1?"T":String(w),f=l[m];return w===-1?f(c):w===0?f(c,d[c][0]):f(c,d[c],s)}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};h.exports=function(c,w,m,f){if(c===void 0)return(0,d.array[0])([]);typeof c=="number"&&(c=[c]),w===void 0&&(w=[c.length]);var x=w.length;if(m===void 0){m=new Array(x);for(var y=x-1,v=1;y>=0;--y)m[y]=v,v*=w[y]}if(f===void 0)for(f=0,y=0;y<x;++y)m[y]<0&&(f-=(w[y]-1)*m[y]);for(var M=function(S){if(i(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),p=d[M];p.length<=x+1;)p.push(u(M,p.length-1));return(0,p[x+1])(c,w,m,f)}},8551:function(h,o,t){var i=t(8362),n=Math.pow(2,-1074),r=-1>>>0;h.exports=function(s,l){if(isNaN(s)||isNaN(l))return NaN;if(s===l)return s;if(s===0)return l<0?-n:n;var u=i.hi(s),d=i.lo(s);return l>s==s>0?d===r?(u+=1,d=0):d+=1:d===0?(d=r,u-=1):d-=1,i.pack(d,u)}},115:function(h,o){o.vertexNormals=function(t,i,n){for(var r=i.length,s=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u)s[u]=[0,0,0];for(u=0;u<t.length;++u)for(var d=t[u],c=0,w=d[d.length-1],m=d[0],f=0;f<d.length;++f){c=w,w=m,m=d[(f+1)%d.length];for(var x=i[c],y=i[w],v=i[m],M=new Array(3),p=0,S=new Array(3),A=0,k=0;k<3;++k)M[k]=x[k]-y[k],p+=M[k]*M[k],S[k]=v[k]-y[k],A+=S[k]*S[k];if(p*A>l){var C=s[w],P=1/Math.sqrt(p*A);for(k=0;k<3;++k){var R=(k+1)%3,O=(k+2)%3;C[k]+=P*(S[R]*M[O]-S[O]*M[R])}}}for(u=0;u<r;++u){C=s[u];var X=0;for(k=0;k<3;++k)X+=C[k]*C[k];if(X>l)for(P=1/Math.sqrt(X),k=0;k<3;++k)C[k]*=P;else for(k=0;k<3;++k)C[k]=0}return s},o.faceNormals=function(t,i,n){for(var r=t.length,s=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u){for(var d=t[u],c=new Array(3),w=0;w<3;++w)c[w]=i[d[w]];var m=new Array(3),f=new Array(3);for(w=0;w<3;++w)m[w]=c[1][w]-c[0][w],f[w]=c[2][w]-c[0][w];var x=new Array(3),y=0;for(w=0;w<3;++w){var v=(w+1)%3,M=(w+2)%3;x[w]=m[v]*f[M]-m[M]*f[v],y+=x[w]*x[w]}for(y=y>l?1/Math.sqrt(y):0,w=0;w<3;++w)x[w]*=y;s[u]=x}return s}},567:function(h){h.exports=function(o,t,i,n,r,s,l,u,d,c){var w=t+s+c;if(m>0){var m=Math.sqrt(w+1);o[0]=.5*(l-d)/m,o[1]=.5*(u-n)/m,o[2]=.5*(i-s)/m,o[3]=.5*m}else{var f=Math.max(t,s,c);m=Math.sqrt(2*f-w+1),t>=f?(o[0]=.5*m,o[1]=.5*(r+i)/m,o[2]=.5*(u+n)/m,o[3]=.5*(l-d)/m):s>=f?(o[0]=.5*(i+r)/m,o[1]=.5*m,o[2]=.5*(d+l)/m,o[3]=.5*(u-n)/m):(o[0]=.5*(n+u)/m,o[1]=.5*(l+d)/m,o[2]=.5*m,o[3]=.5*(i-r)/m)}return o}},7774:function(h,o,t){h.exports=function(f){var x=(f=f||{}).center||[0,0,0],y=f.rotation||[0,0,0,1],v=f.radius||1;x=[].slice.call(x,0,3),c(y=[].slice.call(y,0,4),y);var M=new w(y,x,Math.log(v));return M.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&M.lookAt(0,f.eye,f.center,f.up),M};var i=t(8444),n=t(3012),r=t(5950),s=t(7437),l=t(567);function u(f,x,y){return Math.sqrt(Math.pow(f,2)+Math.pow(x,2)+Math.pow(y,2))}function d(f,x,y,v){return Math.sqrt(Math.pow(f,2)+Math.pow(x,2)+Math.pow(y,2)+Math.pow(v,2))}function c(f,x){var y=x[0],v=x[1],M=x[2],p=x[3],S=d(y,v,M,p);S>1e-6?(f[0]=y/S,f[1]=v/S,f[2]=M/S,f[3]=p/S):(f[0]=f[1]=f[2]=0,f[3]=1)}function w(f,x,y){this.radius=i([y]),this.center=i(x),this.rotation=i(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var m=w.prototype;m.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},m.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var x=this.computedRotation;c(x,x);var y=this.computedMatrix;r(y,x);var v=this.computedCenter,M=this.computedEye,p=this.computedUp,S=Math.exp(this.computedRadius[0]);M[0]=v[0]+S*y[2],M[1]=v[1]+S*y[6],M[2]=v[2]+S*y[10],p[0]=y[1],p[1]=y[5],p[2]=y[9];for(var A=0;A<3;++A){for(var k=0,C=0;C<3;++C)k+=y[A+4*C]*M[C];y[12+A]=-k}},m.getMatrix=function(f,x){this.recalcMatrix(f);var y=this.computedMatrix;if(x){for(var v=0;v<16;++v)x[v]=y[v];return x}return y},m.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},m.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},m.pan=function(f,x,y,v){x=x||0,y=y||0,v=v||0,this.recalcMatrix(f);var M=this.computedMatrix,p=M[1],S=M[5],A=M[9],k=u(p,S,A);p/=k,S/=k,A/=k;var C=M[0],P=M[4],R=M[8],O=C*p+P*S+R*A,X=u(C-=p*O,P-=S*O,R-=A*O);C/=X,P/=X,R/=X,M[2],M[6],M[10];var D=C*x+p*y,V=P*x+S*y,j=R*x+A*y;this.center.move(f,D,V,j);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+v),this.radius.set(f,Math.log(B))},m.rotate=function(f,x,y,v){this.recalcMatrix(f),x=x||0,y=y||0;var M=this.computedMatrix,p=M[0],S=M[4],A=M[8],k=M[1],C=M[5],P=M[9],R=M[2],O=M[6],X=M[10],D=x*p+y*k,V=x*S+y*C,j=x*A+y*P,B=-(O*j-X*V),W=-(X*D-R*j),q=-(R*V-O*D),re=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(W,2)-Math.pow(q,2))),ee=d(B,W,q,re);ee>1e-6?(B/=ee,W/=ee,q/=ee,re/=ee):(B=W=q=0,re=1);var K=this.computedRotation,Y=K[0],$=K[1],ne=K[2],ae=K[3],se=Y*re+ae*B+$*q-ne*W,ce=$*re+ae*W+ne*B-Y*q,me=ne*re+ae*q+Y*W-$*B,ye=ae*re-Y*B-$*W-ne*q;if(v){B=R,W=O,q=X;var Te=Math.sin(v)/u(B,W,q);B*=Te,W*=Te,q*=Te,ye=ye*(re=Math.cos(x))-(se=se*re+ye*B+ce*q-me*W)*B-(ce=ce*re+ye*W+me*B-se*q)*W-(me=me*re+ye*q+se*W-ce*B)*q}var Ce=d(se,ce,me,ye);Ce>1e-6?(se/=Ce,ce/=Ce,me/=Ce,ye/=Ce):(se=ce=me=0,ye=1),this.rotation.set(f,se,ce,me,ye)},m.lookAt=function(f,x,y,v){this.recalcMatrix(f),y=y||this.computedCenter,x=x||this.computedEye,v=v||this.computedUp;var M=this.computedMatrix;n(M,x,y,v);var p=this.computedRotation;l(p,M[0],M[1],M[2],M[4],M[5],M[6],M[8],M[9],M[10]),c(p,p),this.rotation.set(f,p[0],p[1],p[2],p[3]);for(var S=0,A=0;A<3;++A)S+=Math.pow(y[A]-x[A],2);this.radius.set(f,.5*Math.log(Math.max(S,1e-6))),this.center.set(f,y[0],y[1],y[2])},m.translate=function(f,x,y,v){this.center.move(f,x||0,y||0,v||0)},m.setMatrix=function(f,x){var y=this.computedRotation;l(y,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),c(y,y),this.rotation.set(f,y[0],y[1],y[2],y[3]);var v=this.computedMatrix;s(v,x);var M=v[15];if(Math.abs(M)>1e-6){var p=v[12]/M,S=v[13]/M,A=v[14]/M;this.recalcMatrix(f);var k=Math.exp(this.computedRadius[0]);this.center.set(f,p-v[2]*k,S-v[6]*k,A-v[10]*k),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},m.setDistance=function(f,x){x>0&&this.radius.set(f,Math.log(x))},m.setDistanceLimits=function(f,x){f=f>0?Math.log(f):-1/0,x=x>0?Math.log(x):1/0,x=Math.max(x,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=x},m.getDistanceLimits=function(f){var x=this.radius.bounds;return f?(f[0]=Math.exp(x[0][0]),f[1]=Math.exp(x[1][0]),f):[Math.exp(x[0][0]),Math.exp(x[1][0])]},m.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},m.fromJSON=function(f){var x=this.lastT(),y=f.center;y&&this.center.set(x,y[0],y[1],y[2]);var v=f.rotation;v&&this.rotation.set(x,v[0],v[1],v[2],v[3]);var M=f.distance;M&&M>0&&this.radius.set(x,Math.log(M)),this.setDistanceLimits(f.zoomMin,f.zoomMax)}},4930:function(h,o,t){var i=t(6184);h.exports=function(n,r,s){return i(s=s!==void 0?s+"":" ",r)+n}},4405:function(h){h.exports=function(o,t){t||(t=[0,""]),o=String(o);var i=parseFloat(o,10);return t[0]=i,t[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(h,o,t){h.exports=function(n,r){for(var s=0|r.length,l=n.length,u=[new Array(s),new Array(s)],d=0;d<s;++d)u[0][d]=[],u[1][d]=[];for(d=0;d<l;++d){var c=n[d];u[0][c[0]].push(c),u[1][c[1]].push(c)}var w=[];for(d=0;d<s;++d)u[0][d].length+u[1][d].length===0&&w.push([d]);function m(S,A){var k=u[A][S[A]];k.splice(k.indexOf(S),1)}function f(S,A,k){for(var C,P,R,O=0;O<2;++O)if(u[O][A].length>0){C=u[O][A][0],R=O;break}P=C[1^R];for(var X=0;X<2;++X)for(var D=u[X][A],V=0;V<D.length;++V){var j=D[V],B=j[1^X];i(r[S],r[A],r[P],r[B])>0&&(C=j,P=B,R=X)}return k||C&&m(C,R),P}function x(S,A){var k=u[A][S][0],C=[S];m(k,A);for(var P=k[1^A];;){for(;P!==S;)C.push(P),P=f(C[C.length-2],P,!1);if(u[0][S].length+u[1][S].length===0)break;var R=C[C.length-1],O=S,X=C[1],D=f(R,O,!0);if(i(r[R],r[O],r[X],r[D])<0)break;C.push(S),P=f(R,O)}return C}function y(S,A){return A[1]===A[A.length-1]}for(d=0;d<s;++d)for(var v=0;v<2;++v){for(var M=[];u[v][d].length>0;){u[0][d].length;var p=x(d,v);y(0,p)?M.push.apply(M,p):(M.length>0&&w.push(M),M=p)}M.length>0&&w.push(M)}return w};var i=t(9398)},3959:function(h,o,t){h.exports=function(n,r){for(var s=i(n,r.length),l=new Array(r.length),u=new Array(r.length),d=[],c=0;c<r.length;++c){var w=s[c].length;u[c]=w,l[c]=!0,w<=1&&d.push(c)}for(;d.length>0;){l[v=d.pop()]=!1;var m=s[v];for(c=0;c<m.length;++c){var f=m[c];--u[f]==0&&d.push(f)}}var x=new Array(r.length),y=[];for(c=0;c<r.length;++c)if(l[c]){var v=y.length;x[c]=v,y.push(r[c])}else x[c]=-1;var M=[];for(c=0;c<n.length;++c){var p=n[c];l[p[0]]&&l[p[1]]&&M.push([x[p[0]],x[p[1]]])}return[M,y]};var i=t(8348)},8040:function(h,o,t){h.exports=function(w,m){var f=d(w,m);w=f[0];for(var x=(m=f[1]).length,y=(w.length,i(w,m.length)),v=0;v<x;++v)if(y[v].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=n(w,m),p=(M=M.filter(function(Oe){for(var Se=Oe.length,Me=[0],ue=0;ue<Se;++ue){var le=m[Oe[ue]],ie=m[Oe[(ue+1)%Se]],ge=s(-le[0],le[1]),Ae=s(-le[0],ie[1]),we=s(ie[0],le[1]),Ne=s(ie[0],ie[1]);Me=l(Me,l(l(ge,Ae),l(we,Ne)))}return Me[Me.length-1]>0})).length,S=new Array(p),A=new Array(p);for(v=0;v<p;++v){S[v]=v;var k=new Array(p),C=M[v].map(function(Oe){return m[Oe]}),P=r([C]),R=0;e:for(var O=0;O<p;++O)if(k[O]=0,v!==O){for(var X=(pe=M[O]).length,D=0;D<X;++D){var V=P(m[pe[D]]);if(V!==0){V<0&&(k[O]=1,R+=1);continue e}}k[O]=1,R+=1}A[v]=[R,v,k]}for(A.sort(function(Oe,Se){return Se[0]-Oe[0]}),v=0;v<p;++v){var j=(k=A[v])[1],B=k[2];for(O=0;O<p;++O)B[O]&&(S[O]=j)}var W=function(Oe){for(var Se=new Array(Oe),Me=0;Me<Oe;++Me)Se[Me]=[];return Se}(p);for(v=0;v<p;++v)W[v].push(S[v]),W[S[v]].push(v);var q={},re=c(x,!1);for(v=0;v<p;++v)for(X=(pe=M[v]).length,O=0;O<X;++O){var ee=pe[O],K=pe[(O+1)%X],Y=Math.min(ee,K)+":"+Math.max(ee,K);if(Y in q){var $=q[Y];W[$].push(v),W[v].push($),re[ee]=re[K]=!0}else q[Y]=v}function ne(Oe){for(var Se=Oe.length,Me=0;Me<Se;++Me)if(!re[Oe[Me]])return!1;return!0}var ae=[],se=c(p,-1);for(v=0;v<p;++v)S[v]!==v||ne(M[v])?se[v]=-1:(ae.push(v),se[v]=0);for(f=[];ae.length>0;){var ce=ae.pop(),me=W[ce];u(me,function(Oe,Se){return Oe-Se});var ye,Te=me.length,Ce=se[ce];for(Ce===0&&(ye=[pe=M[ce]]),v=0;v<Te;++v){var pe,fe=me[v];se[fe]>=0||(se[fe]=1^Ce,ae.push(fe),Ce===0&&(ne(pe=M[fe])||(pe.reverse(),ye.push(pe))))}Ce===0&&f.push(ye)}return f};var i=t(8348),n=t(4166),r=t(211),s=t(9660),l=t(9662),u=t(1215),d=t(3959);function c(w,m){for(var f=new Array(w),x=0;x<w;++x)f[x]=m;return f}},211:function(h,o,t){h.exports=function(c){for(var w=c.length,m=[],f=[],x=0;x<w;++x)for(var y=c[x],v=y.length,M=v-1,p=0;p<v;M=p++){var S=y[M],A=y[p];S[0]===A[0]?f.push([S,A]):m.push([S,A])}if(m.length===0)return f.length===0?d:(k=u(f),function(R){return k(R[0],R[1])?0:1});var k,C=n(m),P=function(R,O){return function(X){var D=s.le(O,X[0]);if(D<0)return 1;var V=R[D];if(!V){if(!(D>0&&O[D]===X[0]))return 1;V=R[D-1]}for(var j=1;V;){var B=V.key,W=i(X,B[0],B[1]);if(B[0][0]<B[1][0])if(W<0)V=V.left;else{if(!(W>0))return 0;j=-1,V=V.right}else if(W>0)V=V.left;else{if(!(W<0))return 0;j=1,V=V.right}}return j}}(C.slabs,C.coordinates);return f.length===0?P:function(R,O){return function(X){return R(X[0],X[1])?0:O(X)}}(u(f),P)};var i=t(417)[3],n=t(4385),r=t(9014),s=t(5070);function l(){return!0}function u(c){for(var w={},m=0;m<c.length;++m){var f=c[m],x=f[0][0],y=f[0][1],v=f[1][1],M=[Math.min(y,v),Math.max(y,v)];x in w?w[x].push(M):w[x]=[M]}var p={},S=Object.keys(w);for(m=0;m<S.length;++m){var A=w[S[m]];p[S[m]]=r(A)}return function(k){return function(C,P){var R=k[C];return!!R&&!!R.queryPoint(P,l)}}(p)}function d(c){return 1}},7309:function(h){var o=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);h.exports=function(n,r,s,l,u){o.length<l.length&&(o=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var d=0;d<l.length;++d)o[d]=n[d]-l[d],t[d]=r[d]-n[d],i[d]=s[d]-n[d];var c=0,w=0,m=0,f=0,x=0,y=0;for(d=0;d<l.length;++d){var v=t[d],M=i[d],p=o[d];c+=v*v,w+=v*M,m+=M*M,f+=p*v,x+=p*M,y+=p*p}var S,A,k,C,P,R=Math.abs(c*m-w*w),O=w*x-m*f,X=w*f-c*x;if(O+X<=R)if(O<0)X<0&&f<0?(X=0,-f>=c?(O=1,S=c+2*f+y):S=f*(O=-f/c)+y):(O=0,x>=0?(X=0,S=y):-x>=m?(X=1,S=m+2*x+y):S=x*(X=-x/m)+y);else if(X<0)X=0,f>=0?(O=0,S=y):-f>=c?(O=1,S=c+2*f+y):S=f*(O=-f/c)+y;else{var D=1/R;S=(O*=D)*(c*O+w*(X*=D)+2*f)+X*(w*O+m*X+2*x)+y}else O<0?(k=m+x)>(A=w+f)?(C=k-A)>=(P=c-2*w+m)?(O=1,X=0,S=c+2*f+y):S=(O=C/P)*(c*O+w*(X=1-O)+2*f)+X*(w*O+m*X+2*x)+y:(O=0,k<=0?(X=1,S=m+2*x+y):x>=0?(X=0,S=y):S=x*(X=-x/m)+y):X<0?(k=c+f)>(A=w+x)?(C=k-A)>=(P=c-2*w+m)?(X=1,O=0,S=m+2*x+y):S=(O=1-(X=C/P))*(c*O+w*X+2*f)+X*(w*O+m*X+2*x)+y:(X=0,k<=0?(O=1,S=c+2*f+y):f>=0?(O=0,S=y):S=f*(O=-f/c)+y):(C=m+x-w-f)<=0?(O=0,X=1,S=m+2*x+y):C>=(P=c-2*w+m)?(O=1,X=0,S=c+2*f+y):S=(O=C/P)*(c*O+w*(X=1-O)+2*f)+X*(w*O+m*X+2*x)+y;var V=1-O-X;for(d=0;d<l.length;++d)u[d]=V*n[d]+O*r[d]+X*s[d];return S<0?0:S}},1116:function(h,o,t){h.exports=t(6093)},7584:function(h,o,t){var i=t(1539);h.exports=function(n,r){for(var s=n.length,l=new Array(s),u=0;u<s;++u)l[u]=i(n[u],r[u]);return l}},2826:function(h,o,t){h.exports=function(n){for(var r=new Array(n.length),s=0;s<n.length;++s)r[s]=i(n[s]);return r};var i=t(5125)},4469:function(h,o,t){var i=t(5125),n=t(3962);h.exports=function(r,s){for(var l=i(s),u=r.length,d=new Array(u),c=0;c<u;++c)d[c]=n(r[c],l);return d}},6695:function(h,o,t){var i=t(4354);h.exports=function(n,r){for(var s=n.length,l=new Array(s),u=0;u<s;++u)l[u]=i(n[u],r[u]);return l}},7037:function(h,o,t){var i=t(9209),n=t(1284),r=t(9887);h.exports=function(s){s.sort(n);for(var l=s.length,u=0,d=0;d<l;++d){var c=s[d],w=r(c);if(w!==0){if(u>0){var m=s[u-1];if(i(c,m)===0&&r(m)!==w){u-=1;continue}}s[u++]=c}}return s.length=u,s}},6184:function(h){var o,t="";h.exports=function(i,n){if(typeof i!="string")throw new TypeError("expected a string");if(n===1)return i;if(n===2)return i+i;var r=i.length*n;if(o!==i||o===void 0)o=i,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=i),n>>=1,i+=i;return t=(t+=i).substr(0,r)}},8161:function(h,o,t){h.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(h){h.exports=function(o){for(var t=o.length,i=o[o.length-1],n=t,r=t-2;r>=0;--r){var s=i;(d=(u=o[r])-((i=s+u)-s))&&(o[--n]=i,i=d)}var l=0;for(r=n;r<t;++r){var u,d;(d=(u=i)-((i=(s=o[r])+u)-s))&&(o[l++]=d)}return o[l++]=i,o.length=l,o}},8167:function(h,o,t){var i=t(9660),n=t(9662),r=t(8289),s=t(402);function l(x,y,v,M){return function(p){return M(x(v(p[0][0],p[1][1]),v(-p[0][1],p[1][0])))}}function u(x,y,v,M){return function(p){return M(x(y(x(v(p[1][1],p[2][2]),v(-p[1][2],p[2][1])),p[0][0]),x(y(x(v(p[1][0],p[2][2]),v(-p[1][2],p[2][0])),-p[0][1]),y(x(v(p[1][0],p[2][1]),v(-p[1][1],p[2][0])),p[0][2]))))}}function d(x,y,v,M){return function(p){return M(x(x(y(x(y(x(v(p[2][2],p[3][3]),v(-p[2][3],p[3][2])),p[1][1]),x(y(x(v(p[2][1],p[3][3]),v(-p[2][3],p[3][1])),-p[1][2]),y(x(v(p[2][1],p[3][2]),v(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),y(x(y(x(v(p[2][2],p[3][3]),v(-p[2][3],p[3][2])),p[1][0]),x(y(x(v(p[2][0],p[3][3]),v(-p[2][3],p[3][0])),-p[1][2]),y(x(v(p[2][0],p[3][2]),v(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),x(y(x(y(x(v(p[2][1],p[3][3]),v(-p[2][3],p[3][1])),p[1][0]),x(y(x(v(p[2][0],p[3][3]),v(-p[2][3],p[3][0])),-p[1][1]),y(x(v(p[2][0],p[3][1]),v(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),y(x(y(x(v(p[2][1],p[3][2]),v(-p[2][2],p[3][1])),p[1][0]),x(y(x(v(p[2][0],p[3][2]),v(-p[2][2],p[3][0])),-p[1][1]),y(x(v(p[2][0],p[3][1]),v(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function c(x,y,v,M){return function(p){return M(x(x(y(x(x(y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][2]),x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),-p[2][3]),y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][1]),x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),-p[2][3]),y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),x(y(x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),p[2][1]),x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),-p[2][2]),y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),y(x(y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][1]),x(y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),-p[2][2]),y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),y(x(x(y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][2]),x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),-p[2][3]),y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][3]),y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),x(y(x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][2]),y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),y(x(y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][0]),x(y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),-p[2][2]),y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),x(y(x(x(y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][1]),x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),-p[2][3]),y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),y(x(y(x(v(p[3][3],p[4][4]),v(-p[3][4],p[4][3])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][3]),y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),x(y(x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),y(x(y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),x(y(x(x(y(x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),p[2][1]),x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),-p[2][2]),y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),y(x(y(x(v(p[3][2],p[4][4]),v(-p[3][4],p[4][2])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][2]),y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),x(y(x(y(x(v(p[3][1],p[4][4]),v(-p[3][4],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][4]),v(-p[3][4],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),y(x(y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),y(x(x(y(x(y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][1]),x(y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),-p[2][2]),y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),y(x(y(x(v(p[3][2],p[4][3]),v(-p[3][3],p[4][2])),p[2][0]),x(y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),-p[2][2]),y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),x(y(x(y(x(v(p[3][1],p[4][3]),v(-p[3][3],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][3]),v(-p[3][3],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),y(x(y(x(v(p[3][1],p[4][2]),v(-p[3][2],p[4][1])),p[2][0]),x(y(x(v(p[3][0],p[4][2]),v(-p[3][2],p[4][0])),-p[2][1]),y(x(v(p[3][0],p[4][1]),v(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function w(x){return(x===2?l:x===3?u:x===4?d:x===5?c:void 0)(n,r,i,s)}var m=[function(){return[0]},function(x){return[x[0][0]]}];function f(x,y,v,M,p,S,A,k){return function(C){switch(C.length){case 0:return x(C);case 1:return y(C);case 2:return v(C);case 3:return M(C);case 4:return p(C);case 5:return S(C)}var P=A[C.length];return P||(P=A[C.length]=k(C.length)),P(C)}}(function(){for(;m.length<6;)m.push(w(m.length));h.exports=f.apply(void 0,m.concat([m,w]));for(var x=0;x<m.length;++x)h.exports[x]=m[x]})()},9130:function(h,o,t){var i=t(9660),n=t(9662);h.exports=function(r,s){for(var l=i(r[0],s[0]),u=1;u<r.length;++u)l=n(l,i(r[u],s[u]));return l}},2227:function(h,o,t){var i=t(9660),n=t(9662),r=t(4078),s=t(8289);function l(y){return(y===3?u:y===4?d:y===5?c:w)(n,r,i,s)}function u(y,v,M,p){return function(S,A,k){var C=M(S[0],S[0]),P=p(C,A[0]),R=p(C,k[0]),O=M(A[0],A[0]),X=p(O,S[0]),D=p(O,k[0]),V=M(k[0],k[0]),j=p(V,S[0]),B=p(V,A[0]),W=y(v(B,D),v(X,P)),q=v(j,R),re=v(W,q);return re[re.length-1]}}function d(y,v,M,p){return function(S,A,k,C){var P=y(M(S[0],S[0]),M(S[1],S[1])),R=p(P,A[0]),O=p(P,k[0]),X=p(P,C[0]),D=y(M(A[0],A[0]),M(A[1],A[1])),V=p(D,S[0]),j=p(D,k[0]),B=p(D,C[0]),W=y(M(k[0],k[0]),M(k[1],k[1])),q=p(W,S[0]),re=p(W,A[0]),ee=p(W,C[0]),K=y(M(C[0],C[0]),M(C[1],C[1])),Y=p(K,S[0]),$=p(K,A[0]),ne=p(K,k[0]),ae=y(y(p(v(ne,ee),A[1]),y(p(v($,B),-k[1]),p(v(re,j),C[1]))),y(p(v($,B),S[1]),y(p(v(Y,X),-A[1]),p(v(V,R),C[1])))),se=y(y(p(v(ne,ee),S[1]),y(p(v(Y,X),-k[1]),p(v(q,O),C[1]))),y(p(v(re,j),S[1]),y(p(v(q,O),-A[1]),p(v(V,R),k[1])))),ce=v(ae,se);return ce[ce.length-1]}}function c(y,v,M,p){return function(S,A,k,C,P){var R=y(M(S[0],S[0]),y(M(S[1],S[1]),M(S[2],S[2]))),O=p(R,A[0]),X=p(R,k[0]),D=p(R,C[0]),V=p(R,P[0]),j=y(M(A[0],A[0]),y(M(A[1],A[1]),M(A[2],A[2]))),B=p(j,S[0]),W=p(j,k[0]),q=p(j,C[0]),re=p(j,P[0]),ee=y(M(k[0],k[0]),y(M(k[1],k[1]),M(k[2],k[2]))),K=p(ee,S[0]),Y=p(ee,A[0]),$=p(ee,C[0]),ne=p(ee,P[0]),ae=y(M(C[0],C[0]),y(M(C[1],C[1]),M(C[2],C[2]))),se=p(ae,S[0]),ce=p(ae,A[0]),me=p(ae,k[0]),ye=p(ae,P[0]),Te=y(M(P[0],P[0]),y(M(P[1],P[1]),M(P[2],P[2]))),Ce=p(Te,S[0]),pe=p(Te,A[0]),fe=p(Te,k[0]),Oe=p(Te,C[0]),Se=y(y(y(p(y(p(v(Oe,ye),k[1]),y(p(v(fe,ne),-C[1]),p(v(me,$),P[1]))),A[2]),y(p(y(p(v(Oe,ye),A[1]),y(p(v(pe,re),-C[1]),p(v(ce,q),P[1]))),-k[2]),p(y(p(v(fe,ne),A[1]),y(p(v(pe,re),-k[1]),p(v(Y,W),P[1]))),C[2]))),y(p(y(p(v(me,$),A[1]),y(p(v(ce,q),-k[1]),p(v(Y,W),C[1]))),-P[2]),y(p(y(p(v(Oe,ye),A[1]),y(p(v(pe,re),-C[1]),p(v(ce,q),P[1]))),S[2]),p(y(p(v(Oe,ye),S[1]),y(p(v(Ce,V),-C[1]),p(v(se,D),P[1]))),-A[2])))),y(y(p(y(p(v(pe,re),S[1]),y(p(v(Ce,V),-A[1]),p(v(B,O),P[1]))),C[2]),y(p(y(p(v(ce,q),S[1]),y(p(v(se,D),-A[1]),p(v(B,O),C[1]))),-P[2]),p(y(p(v(me,$),A[1]),y(p(v(ce,q),-k[1]),p(v(Y,W),C[1]))),S[2]))),y(p(y(p(v(me,$),S[1]),y(p(v(se,D),-k[1]),p(v(K,X),C[1]))),-A[2]),y(p(y(p(v(ce,q),S[1]),y(p(v(se,D),-A[1]),p(v(B,O),C[1]))),k[2]),p(y(p(v(Y,W),S[1]),y(p(v(K,X),-A[1]),p(v(B,O),k[1]))),-C[2]))))),Me=y(y(y(p(y(p(v(Oe,ye),k[1]),y(p(v(fe,ne),-C[1]),p(v(me,$),P[1]))),S[2]),p(y(p(v(Oe,ye),S[1]),y(p(v(Ce,V),-C[1]),p(v(se,D),P[1]))),-k[2])),y(p(y(p(v(fe,ne),S[1]),y(p(v(Ce,V),-k[1]),p(v(K,X),P[1]))),C[2]),p(y(p(v(me,$),S[1]),y(p(v(se,D),-k[1]),p(v(K,X),C[1]))),-P[2]))),y(y(p(y(p(v(fe,ne),A[1]),y(p(v(pe,re),-k[1]),p(v(Y,W),P[1]))),S[2]),p(y(p(v(fe,ne),S[1]),y(p(v(Ce,V),-k[1]),p(v(K,X),P[1]))),-A[2])),y(p(y(p(v(pe,re),S[1]),y(p(v(Ce,V),-A[1]),p(v(B,O),P[1]))),k[2]),p(y(p(v(Y,W),S[1]),y(p(v(K,X),-A[1]),p(v(B,O),k[1]))),-P[2])))),ue=v(Se,Me);return ue[ue.length-1]}}function w(y,v,M,p){return function(S,A,k,C,P,R){var O=y(y(M(S[0],S[0]),M(S[1],S[1])),y(M(S[2],S[2]),M(S[3],S[3]))),X=p(O,A[0]),D=p(O,k[0]),V=p(O,C[0]),j=p(O,P[0]),B=p(O,R[0]),W=y(y(M(A[0],A[0]),M(A[1],A[1])),y(M(A[2],A[2]),M(A[3],A[3]))),q=p(W,S[0]),re=p(W,k[0]),ee=p(W,C[0]),K=p(W,P[0]),Y=p(W,R[0]),$=y(y(M(k[0],k[0]),M(k[1],k[1])),y(M(k[2],k[2]),M(k[3],k[3]))),ne=p($,S[0]),ae=p($,A[0]),se=p($,C[0]),ce=p($,P[0]),me=p($,R[0]),ye=y(y(M(C[0],C[0]),M(C[1],C[1])),y(M(C[2],C[2]),M(C[3],C[3]))),Te=p(ye,S[0]),Ce=p(ye,A[0]),pe=p(ye,k[0]),fe=p(ye,P[0]),Oe=p(ye,R[0]),Se=y(y(M(P[0],P[0]),M(P[1],P[1])),y(M(P[2],P[2]),M(P[3],P[3]))),Me=p(Se,S[0]),ue=p(Se,A[0]),le=p(Se,k[0]),ie=p(Se,C[0]),ge=p(Se,R[0]),Ae=y(y(M(R[0],R[0]),M(R[1],R[1])),y(M(R[2],R[2]),M(R[3],R[3]))),we=p(Ae,S[0]),Ne=p(Ae,A[0]),He=p(Ae,k[0]),de=p(Ae,C[0]),Le=p(Ae,P[0]),Ee=y(y(y(p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),k[2]),p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),-C[2])),y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),P[2]),p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),-R[2]))),A[3]),y(p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),A[2]),p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),-C[2])),y(p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),P[2]),p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),-R[2]))),-k[3]),p(y(y(p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),A[2]),p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),-k[2])),y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),P[2]),p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),-R[2]))),C[3]))),y(y(p(y(y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),A[2]),p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),-k[2])),y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),C[2]),p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),-R[2]))),-P[3]),p(y(y(p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),A[2]),p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),-k[2])),y(p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),C[2]),p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),-P[2]))),R[3])),y(p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),A[2]),p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),-C[2])),y(p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),P[2]),p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),-R[2]))),S[3]),p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-C[2])),y(p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),P[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-R[2]))),-A[3])))),y(y(y(p(y(y(p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),P[2]),p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),-R[2]))),C[3]),p(y(y(p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),S[2]),p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),C[2]),p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),-R[2]))),-P[3])),y(p(y(y(p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),S[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-A[2])),y(p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),C[2]),p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),-P[2]))),R[3]),p(y(y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),A[2]),p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),-k[2])),y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),C[2]),p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),-R[2]))),S[3]))),y(y(p(y(y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),S[2]),p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),-k[2])),y(p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),C[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-R[2]))),-A[3]),p(y(y(p(y(p(v(de,Oe),A[1]),y(p(v(Ne,Y),-C[1]),p(v(Ce,ee),R[1]))),S[2]),p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),C[2]),p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),-R[2]))),k[3])),y(p(y(y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),S[2]),p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-R[2]))),-C[3]),p(y(y(p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),S[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-A[2])),y(p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-C[2]))),R[3]))))),Re=y(y(y(p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),k[2]),p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),-C[2])),y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),P[2]),p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),-R[2]))),S[3]),y(p(y(y(p(y(p(v(Le,ge),C[1]),y(p(v(de,Oe),-P[1]),p(v(ie,fe),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-C[2])),y(p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),P[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-R[2]))),-k[3]),p(y(y(p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-k[2])),y(p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),P[2]),p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),-R[2]))),C[3]))),y(y(p(y(y(p(y(p(v(de,Oe),k[1]),y(p(v(He,me),-C[1]),p(v(pe,se),R[1]))),S[2]),p(y(p(v(de,Oe),S[1]),y(p(v(we,B),-C[1]),p(v(Te,V),R[1]))),-k[2])),y(p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),C[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-R[2]))),-P[3]),p(y(y(p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),S[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-k[2])),y(p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),C[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-P[2]))),R[3])),y(p(y(y(p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),A[2]),p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),-k[2])),y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),P[2]),p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),-R[2]))),S[3]),p(y(y(p(y(p(v(Le,ge),k[1]),y(p(v(He,me),-P[1]),p(v(le,ce),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-k[2])),y(p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),P[2]),p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),-R[2]))),-A[3])))),y(y(y(p(y(y(p(y(p(v(Le,ge),A[1]),y(p(v(Ne,Y),-P[1]),p(v(ue,K),R[1]))),S[2]),p(y(p(v(Le,ge),S[1]),y(p(v(we,B),-P[1]),p(v(Me,j),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),P[2]),p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),-R[2]))),k[3]),p(y(y(p(y(p(v(He,me),A[1]),y(p(v(Ne,Y),-k[1]),p(v(ae,re),R[1]))),S[2]),p(y(p(v(He,me),S[1]),y(p(v(we,B),-k[1]),p(v(ne,D),R[1]))),-A[2])),y(p(y(p(v(Ne,Y),S[1]),y(p(v(we,B),-A[1]),p(v(q,X),R[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-R[2]))),-P[3])),y(p(y(y(p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),S[2]),p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),-A[2])),y(p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-P[2]))),R[3]),p(y(y(p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),A[2]),p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),-k[2])),y(p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),C[2]),p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),-P[2]))),S[3]))),y(y(p(y(y(p(y(p(v(ie,fe),k[1]),y(p(v(le,ce),-C[1]),p(v(pe,se),P[1]))),S[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-k[2])),y(p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),C[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-P[2]))),-A[3]),p(y(y(p(y(p(v(ie,fe),A[1]),y(p(v(ue,K),-C[1]),p(v(Ce,ee),P[1]))),S[2]),p(y(p(v(ie,fe),S[1]),y(p(v(Me,j),-C[1]),p(v(Te,V),P[1]))),-A[2])),y(p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),C[2]),p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),-P[2]))),k[3])),y(p(y(y(p(y(p(v(le,ce),A[1]),y(p(v(ue,K),-k[1]),p(v(ae,re),P[1]))),S[2]),p(y(p(v(le,ce),S[1]),y(p(v(Me,j),-k[1]),p(v(ne,D),P[1]))),-A[2])),y(p(y(p(v(ue,K),S[1]),y(p(v(Me,j),-A[1]),p(v(q,X),P[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-P[2]))),-C[3]),p(y(y(p(y(p(v(pe,se),A[1]),y(p(v(Ce,ee),-k[1]),p(v(ae,re),C[1]))),S[2]),p(y(p(v(pe,se),S[1]),y(p(v(Te,V),-k[1]),p(v(ne,D),C[1]))),-A[2])),y(p(y(p(v(Ce,ee),S[1]),y(p(v(Te,V),-A[1]),p(v(q,X),C[1]))),k[2]),p(y(p(v(ae,re),S[1]),y(p(v(ne,D),-A[1]),p(v(q,X),k[1]))),-C[2]))),P[3]))))),je=v(Ee,Re);return je[je.length-1]}}var m=[function(){return 0},function(){return 0},function(){return 0}];function f(y){var v=m[y.length];return v||(v=m[y.length]=l(y.length)),v.apply(void 0,y)}function x(y,v,M,p,S,A,k,C){return function(P,R,O,X,D,V){switch(arguments.length){case 0:case 1:return 0;case 2:return p(P,R);case 3:return S(P,R,O);case 4:return A(P,R,O,X);case 5:return k(P,R,O,X,D);case 6:return C(P,R,O,X,D,V)}for(var j=new Array(arguments.length),B=0;B<arguments.length;++B)j[B]=arguments[B];return y(j)}}(function(){for(;m.length<=6;)m.push(l(m.length));h.exports=x.apply(void 0,[f].concat(m));for(var y=0;y<=6;++y)h.exports[y]=m[y]})()},6606:function(h,o,t){var i=t(8167);function n(m){return(m===2?r:m===3?s:m===4?l:m===5?u:d)(m<6?i[m]:i)}function r(m){return function(f,x){return[m([[+x[0],+f[0][1]],[+x[1],+f[1][1]]]),m([[+f[0][0],+x[0]],[+f[1][0],+x[1]]]),m(f)]}}function s(m){return function(f,x){return[m([[+x[0],+f[0][1],+f[0][2]],[+x[1],+f[1][1],+f[1][2]],[+x[2],+f[2][1],+f[2][2]]]),m([[+f[0][0],+x[0],+f[0][2]],[+f[1][0],+x[1],+f[1][2]],[+f[2][0],+x[2],+f[2][2]]]),m([[+f[0][0],+f[0][1],+x[0]],[+f[1][0],+f[1][1],+x[1]],[+f[2][0],+f[2][1],+x[2]]]),m(f)]}}function l(m){return function(f,x){return[m([[+x[0],+f[0][1],+f[0][2],+f[0][3]],[+x[1],+f[1][1],+f[1][2],+f[1][3]],[+x[2],+f[2][1],+f[2][2],+f[2][3]],[+x[3],+f[3][1],+f[3][2],+f[3][3]]]),m([[+f[0][0],+x[0],+f[0][2],+f[0][3]],[+f[1][0],+x[1],+f[1][2],+f[1][3]],[+f[2][0],+x[2],+f[2][2],+f[2][3]],[+f[3][0],+x[3],+f[3][2],+f[3][3]]]),m([[+f[0][0],+f[0][1],+x[0],+f[0][3]],[+f[1][0],+f[1][1],+x[1],+f[1][3]],[+f[2][0],+f[2][1],+x[2],+f[2][3]],[+f[3][0],+f[3][1],+x[3],+f[3][3]]]),m([[+f[0][0],+f[0][1],+f[0][2],+x[0]],[+f[1][0],+f[1][1],+f[1][2],+x[1]],[+f[2][0],+f[2][1],+f[2][2],+x[2]],[+f[3][0],+f[3][1],+f[3][2],+x[3]]]),m(f)]}}function u(m){return function(f,x){return[m([[+x[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4]],[+x[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4]],[+x[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4]],[+x[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4]],[+x[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4]]]),m([[+f[0][0],+x[0],+f[0][2],+f[0][3],+f[0][4]],[+f[1][0],+x[1],+f[1][2],+f[1][3],+f[1][4]],[+f[2][0],+x[2],+f[2][2],+f[2][3],+f[2][4]],[+f[3][0],+x[3],+f[3][2],+f[3][3],+f[3][4]],[+f[4][0],+x[4],+f[4][2],+f[4][3],+f[4][4]]]),m([[+f[0][0],+f[0][1],+x[0],+f[0][3],+f[0][4]],[+f[1][0],+f[1][1],+x[1],+f[1][3],+f[1][4]],[+f[2][0],+f[2][1],+x[2],+f[2][3],+f[2][4]],[+f[3][0],+f[3][1],+x[3],+f[3][3],+f[3][4]],[+f[4][0],+f[4][1],+x[4],+f[4][3],+f[4][4]]]),m([[+f[0][0],+f[0][1],+f[0][2],+x[0],+f[0][4]],[+f[1][0],+f[1][1],+f[1][2],+x[1],+f[1][4]],[+f[2][0],+f[2][1],+f[2][2],+x[2],+f[2][4]],[+f[3][0],+f[3][1],+f[3][2],+x[3],+f[3][4]],[+f[4][0],+f[4][1],+f[4][2],+x[4],+f[4][4]]]),m([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+x[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+x[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+x[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+x[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+x[4]]]),m(f)]}}function d(m){return function(f,x){return[m([[+x[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+x[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+x[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+x[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+x[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+x[5],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),m([[+f[0][0],+x[0],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+x[1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+x[2],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+x[3],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+x[4],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+x[5],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),m([[+f[0][0],+f[0][1],+x[0],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+x[1],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+x[2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+x[3],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+x[4],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+x[5],+f[5][3],+f[5][4],+f[5][5]]]),m([[+f[0][0],+f[0][1],+f[0][2],+x[0],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+x[1],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+x[2],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+x[3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+x[4],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+x[5],+f[5][4],+f[5][5]]]),m([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+x[0],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+x[1],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+x[2],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+x[3],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+x[4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+x[5],+f[5][5]]]),m([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+x[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+x[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+x[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+x[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+x[4]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+x[5]]]),m(f)]}}var c=[function(){return[[0]]},function(m,f){return[[f[0]],[m[0][0]]]}];function w(m,f,x,y,v,M,p,S){return function(A,k){switch(A.length){case 0:return m(A,k);case 1:return f(A,k);case 2:return x(A,k);case 3:return y(A,k);case 4:return v(A,k);case 5:return M(A,k)}var C=p[A.length];return C||(C=p[A.length]=S(A.length)),C(A,k)}}(function(){for(;c.length<6;)c.push(n(c.length));h.exports=w.apply(void 0,c.concat([c,n]));for(var m=0;m<6;++m)h.exports[m]=c[m]})()},417:function(h,o,t){var i=t(9660),n=t(9662),r=t(8289),s=t(4078);function l(v,M,p,S){return function(A,k,C){var P=v(v(M(k[1],C[0]),M(-C[1],k[0])),v(M(A[1],k[0]),M(-k[1],A[0]))),R=v(M(A[1],C[0]),M(-C[1],A[0])),O=S(P,R);return O[O.length-1]}}function u(v,M,p,S){return function(A,k,C,P){var R=v(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),k[2]),v(p(v(M(k[1],P[0]),M(-P[1],k[0])),-C[2]),p(v(M(k[1],C[0]),M(-C[1],k[0])),P[2]))),v(p(v(M(k[1],P[0]),M(-P[1],k[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),P[2])))),O=v(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-C[2]),p(v(M(A[1],C[0]),M(-C[1],A[0])),P[2]))),v(p(v(M(k[1],C[0]),M(-C[1],k[0])),A[2]),v(p(v(M(A[1],C[0]),M(-C[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),C[2])))),X=S(R,O);return X[X.length-1]}}function d(v,M,p,S){return function(A,k,C,P,R){var O=v(v(v(p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),C[2]),v(p(v(M(C[1],R[0]),M(-R[1],C[0])),-P[2]),p(v(M(C[1],P[0]),M(-P[1],C[0])),R[2]))),k[3]),v(p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),k[2]),v(p(v(M(k[1],R[0]),M(-R[1],k[0])),-P[2]),p(v(M(k[1],P[0]),M(-P[1],k[0])),R[2]))),-C[3]),p(v(p(v(M(C[1],R[0]),M(-R[1],C[0])),k[2]),v(p(v(M(k[1],R[0]),M(-R[1],k[0])),-C[2]),p(v(M(k[1],C[0]),M(-C[1],k[0])),R[2]))),P[3]))),v(p(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),k[2]),v(p(v(M(k[1],P[0]),M(-P[1],k[0])),-C[2]),p(v(M(k[1],C[0]),M(-C[1],k[0])),P[2]))),-R[3]),v(p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),k[2]),v(p(v(M(k[1],R[0]),M(-R[1],k[0])),-P[2]),p(v(M(k[1],P[0]),M(-P[1],k[0])),R[2]))),A[3]),p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-P[2]),p(v(M(A[1],P[0]),M(-P[1],A[0])),R[2]))),-k[3])))),v(v(p(v(p(v(M(k[1],R[0]),M(-R[1],k[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),R[2]))),P[3]),v(p(v(p(v(M(k[1],P[0]),M(-P[1],k[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),P[2]))),-R[3]),p(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),k[2]),v(p(v(M(k[1],P[0]),M(-P[1],k[0])),-C[2]),p(v(M(k[1],C[0]),M(-C[1],k[0])),P[2]))),A[3]))),v(p(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-C[2]),p(v(M(A[1],C[0]),M(-C[1],A[0])),P[2]))),-k[3]),v(p(v(p(v(M(k[1],P[0]),M(-P[1],k[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),P[2]))),C[3]),p(v(p(v(M(k[1],C[0]),M(-C[1],k[0])),A[2]),v(p(v(M(A[1],C[0]),M(-C[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),C[2]))),-P[3]))))),X=v(v(v(p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),C[2]),v(p(v(M(C[1],R[0]),M(-R[1],C[0])),-P[2]),p(v(M(C[1],P[0]),M(-P[1],C[0])),R[2]))),A[3]),p(v(p(v(M(P[1],R[0]),M(-R[1],P[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-P[2]),p(v(M(A[1],P[0]),M(-P[1],A[0])),R[2]))),-C[3])),v(p(v(p(v(M(C[1],R[0]),M(-R[1],C[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-C[2]),p(v(M(A[1],C[0]),M(-C[1],A[0])),R[2]))),P[3]),p(v(p(v(M(C[1],P[0]),M(-P[1],C[0])),A[2]),v(p(v(M(A[1],P[0]),M(-P[1],A[0])),-C[2]),p(v(M(A[1],C[0]),M(-C[1],A[0])),P[2]))),-R[3]))),v(v(p(v(p(v(M(C[1],R[0]),M(-R[1],C[0])),k[2]),v(p(v(M(k[1],R[0]),M(-R[1],k[0])),-C[2]),p(v(M(k[1],C[0]),M(-C[1],k[0])),R[2]))),A[3]),p(v(p(v(M(C[1],R[0]),M(-R[1],C[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-C[2]),p(v(M(A[1],C[0]),M(-C[1],A[0])),R[2]))),-k[3])),v(p(v(p(v(M(k[1],R[0]),M(-R[1],k[0])),A[2]),v(p(v(M(A[1],R[0]),M(-R[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),R[2]))),C[3]),p(v(p(v(M(k[1],C[0]),M(-C[1],k[0])),A[2]),v(p(v(M(A[1],C[0]),M(-C[1],A[0])),-k[2]),p(v(M(A[1],k[0]),M(-k[1],A[0])),C[2]))),-R[3])))),D=S(O,X);return D[D.length-1]}}function c(v){return(v===3?l:v===4?u:d)(n,i,r,s)}var w=c(3),m=c(4),f=[function(){return 0},function(){return 0},function(v,M){return M[0]-v[0]},function(v,M,p){var S,A=(v[1]-p[1])*(M[0]-p[0]),k=(v[0]-p[0])*(M[1]-p[1]),C=A-k;if(A>0){if(k<=0)return C;S=A+k}else{if(!(A<0)||k>=0)return C;S=-(A+k)}var P=33306690738754716e-32*S;return C>=P||C<=-P?C:w(v,M,p)},function(v,M,p,S){var A=v[0]-S[0],k=M[0]-S[0],C=p[0]-S[0],P=v[1]-S[1],R=M[1]-S[1],O=p[1]-S[1],X=v[2]-S[2],D=M[2]-S[2],V=p[2]-S[2],j=k*O,B=C*R,W=C*P,q=A*O,re=A*R,ee=k*P,K=X*(j-B)+D*(W-q)+V*(re-ee),Y=7771561172376103e-31*((Math.abs(j)+Math.abs(B))*Math.abs(X)+(Math.abs(W)+Math.abs(q))*Math.abs(D)+(Math.abs(re)+Math.abs(ee))*Math.abs(V));return K>Y||-K>Y?K:m(v,M,p,S)}];function x(v){var M=f[v.length];return M||(M=f[v.length]=c(v.length)),M.apply(void 0,v)}function y(v,M,p,S,A,k,C){return function(P,R,O,X,D){switch(arguments.length){case 0:case 1:return 0;case 2:return S(P,R);case 3:return A(P,R,O);case 4:return k(P,R,O,X);case 5:return C(P,R,O,X,D)}for(var V=new Array(arguments.length),j=0;j<arguments.length;++j)V[j]=arguments[j];return v(V)}}(function(){for(;f.length<=5;)f.push(c(f.length));h.exports=y.apply(void 0,[x].concat(f));for(var v=0;v<=5;++v)h.exports[v]=f[v]})()},2019:function(h,o,t){var i=t(9662),n=t(8289);h.exports=function(r,s){if(r.length===1)return n(s,r[0]);if(s.length===1)return n(r,s[0]);if(r.length===0||s.length===0)return[0];var l=[0];if(r.length<s.length)for(var u=0;u<r.length;++u)l=i(l,n(s,r[u]));else for(u=0;u<s.length;++u)l=i(l,n(r,s[u]));return l}},8289:function(h,o,t){var i=t(9660),n=t(87);h.exports=function(r,s){var l=r.length;if(l===1){var u=i(r[0],s);return u[0]?u:[u[1]]}var d=new Array(2*l),c=[.1,.1],w=[.1,.1],m=0;i(r[0],s,c),c[0]&&(d[m++]=c[0]);for(var f=1;f<l;++f){i(r[f],s,w);var x=c[1];n(x,w[0],c),c[0]&&(d[m++]=c[0]);var y=w[1],v=c[1],M=y+v,p=v-(M-y);c[1]=M,p&&(d[m++]=p)}return c[1]&&(d[m++]=c[1]),m===0&&(d[m++]=0),d.length=m,d}},4434:function(h,o,t){h.exports=function(n,r,s,l){var u=i(n,s,l),d=i(r,s,l);if(u>0&&d>0||u<0&&d<0)return!1;var c=i(s,n,r),w=i(l,n,r);return!(c>0&&w>0||c<0&&w<0)&&(u!==0||d!==0||c!==0||w!==0||function(m,f,x,y){for(var v=0;v<2;++v){var M=m[v],p=f[v],S=Math.min(M,p),A=Math.max(M,p),k=x[v],C=y[v],P=Math.min(k,C);if(Math.max(k,C)<S||A<P)return!1}return!0}(n,r,s,l))};var i=t(417)[3]},4078:function(h){h.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(P,R){var O=P+R,X=O-P,D=P-(O-X)+(R-X);return D?[D,O]:[O]}(o[0],-t[0]);var r,s,l=new Array(i+n),u=0,d=0,c=0,w=Math.abs,m=o[d],f=w(m),x=-t[c],y=w(x);f<y?(s=m,(d+=1)<i&&(f=w(m=o[d]))):(s=x,(c+=1)<n&&(y=w(x=-t[c]))),d<i&&f<y||c>=n?(r=m,(d+=1)<i&&(f=w(m=o[d]))):(r=x,(c+=1)<n&&(y=w(x=-t[c])));for(var v,M,p=r+s,S=p-r,A=s-S,k=A,C=p;d<i&&c<n;)f<y?(r=m,(d+=1)<i&&(f=w(m=o[d]))):(r=x,(c+=1)<n&&(y=w(x=-t[c]))),(A=(s=k)-(S=(p=r+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v;for(;d<i;)(A=(s=k)-(S=(p=(r=m)+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v,(d+=1)<i&&(m=o[d]);for(;c<n;)(A=(s=k)-(S=(p=(r=x)+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v,(c+=1)<n&&(x=-t[c]);return k&&(l[u++]=k),C&&(l[u++]=C),u||(l[u++]=0),l.length=u,l}},9662:function(h){h.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(P,R){var O=P+R,X=O-P,D=P-(O-X)+(R-X);return D?[D,O]:[O]}(o[0],t[0]);var r,s,l=new Array(i+n),u=0,d=0,c=0,w=Math.abs,m=o[d],f=w(m),x=t[c],y=w(x);f<y?(s=m,(d+=1)<i&&(f=w(m=o[d]))):(s=x,(c+=1)<n&&(y=w(x=t[c]))),d<i&&f<y||c>=n?(r=m,(d+=1)<i&&(f=w(m=o[d]))):(r=x,(c+=1)<n&&(y=w(x=t[c])));for(var v,M,p=r+s,S=p-r,A=s-S,k=A,C=p;d<i&&c<n;)f<y?(r=m,(d+=1)<i&&(f=w(m=o[d]))):(r=x,(c+=1)<n&&(y=w(x=t[c]))),(A=(s=k)-(S=(p=r+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v;for(;d<i;)(A=(s=k)-(S=(p=(r=m)+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v,(d+=1)<i&&(m=o[d]);for(;c<n;)(A=(s=k)-(S=(p=(r=x)+s)-r))&&(l[u++]=A),k=C-((v=C+p)-(M=v-C))+(p-M),C=v,(c+=1)<n&&(x=t[c]);return k&&(l[u++]=k),C&&(l[u++]=C),u||(l[u++]=0),l.length=u,l}},8691:function(h,o,t){h.exports=function(r){return n(i(r))};var i=t(2692),n=t(7037)},7212:function(h,o,t){h.exports=function(l,u,d,c){if(d=d||0,c===void 0&&(c=function(p){for(var S=p.length,A=0,k=0;k<S;++k)A=0|Math.max(A,p[k].length);return A-1}(l)),l.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var w=function(p,S){for(var A=p.length,k=n.mallocUint8(A),C=0;C<A;++C)k[C]=p[C]<S|0;return k}(u,+d),m=function(p,S){for(var A=p.length,k=S*(S+1)/2*A|0,C=n.mallocUint32(2*k),P=0,R=0;R<A;++R)for(var O=p[R],X=(S=O.length,0);X<S;++X)for(var D=0;D<X;++D){var V=O[D],j=O[X];C[P++]=0|Math.min(V,j),C[P++]=0|Math.max(V,j)}r(i(C,[P/2|0,2]));var B=2;for(R=2;R<P;R+=2)C[R-2]===C[R]&&C[R-1]===C[R+1]||(C[B++]=C[R],C[B++]=C[R+1]);return i(C,[B/2|0,2])}(l,c),f=function(p,S,A,k){for(var C=p.data,P=p.shape[0],R=n.mallocDouble(P),O=0,X=0;X<P;++X){var D=C[2*X],V=C[2*X+1];if(A[D]!==A[V]){var j=S[D],B=S[V];C[2*O]=D,C[2*O+1]=V,R[O++]=(B-k)/(B-j)}}return p.shape[0]=O,i(R,[O])}(m,u,w,+d),x=function(p,S){var A=n.mallocInt32(2*S),k=p.shape[0],C=p.data;A[0]=0;for(var P=0,R=0;R<k;++R){var O=C[2*R];if(O!==P){for(A[2*P+1]=R;++P<O;)A[2*P]=R,A[2*P+1]=R;A[2*P]=R}}for(A[2*P+1]=k;++P<S;)A[2*P]=A[2*P+1]=k;return A}(m,0|u.length),y=s(c)(l,m.data,x,w),v=function(p){for(var S=0|p.shape[0],A=p.data,k=new Array(S),C=0;C<S;++C)k[C]=[A[2*C],A[2*C+1]];return k}(m),M=[].slice.call(f.data,0,f.shape[0]);return n.free(w),n.free(m.data),n.free(f.data),n.free(x),{cells:y,vertexIds:v,vertexWeights:M}};var i=t(5050),n=t(5306),r=t(8729),s=t(1168)},1168:function(h){h.exports=function(t){return o[t]()};var o=[function(){return function(t,i,n,r){for(var s=t.length,l=0;l<s;++l)t[l].length;return[]}},function(){function t(i,n,r,s){for(var l=0|Math.min(r,s),u=0|Math.max(r,s),d=i[2*l],c=i[2*l+1];d<c;){var w=d+c>>1,m=n[2*w+1];if(m===u)return w;u<m?c=w:d=w+1}return d}return function(i,n,r,s){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d];if(c.length===2){var w=(s[c[0]]<<0)+(s[c[1]]<<1);if(w===0||w===3)continue;switch(w){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,s){for(var l=0|Math.min(r,s),u=0|Math.max(r,s),d=i[2*l],c=i[2*l+1];d<c;){var w=d+c>>1,m=n[2*w+1];if(m===u)return w;u<m?c=w:d=w+1}return d}return function(i,n,r,s){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d],w=c.length;if(w===3){if((m=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2))==0||m===7)continue;switch(m){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(w===2){var m;if((m=(s[c[0]]<<0)+(s[c[1]]<<1))==0||m===3)continue;switch(m){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,s){for(var l=0|Math.min(r,s),u=0|Math.max(r,s),d=i[2*l],c=i[2*l+1];d<c;){var w=d+c>>1,m=n[2*w+1];if(m===u)return w;u<m?c=w:d=w+1}return d}return function(i,n,r,s){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d],w=c.length;if(w===4){if((m=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2)+(s[c[3]]<<3))==0||m===15)continue;switch(m){case 0:case 15:break;case 1:u.push([t(r,n,c[0],c[1]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])]);break;case 2:u.push([t(r,n,c[1],c[2]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])]);break;case 3:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])],[t(r,n,c[1],c[3]),t(r,n,c[1],c[2]),t(r,n,c[0],c[3])]);break;case 4:u.push([t(r,n,c[2],c[0]),t(r,n,c[2],c[1]),t(r,n,c[2],c[3])]);break;case 5:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[0],c[3])],[t(r,n,c[2],c[1]),t(r,n,c[2],c[3]),t(r,n,c[0],c[3])]);break;case 6:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])],[t(r,n,c[2],c[3]),t(r,n,c[2],c[0]),t(r,n,c[1],c[3])]);break;case 7:u.push([t(r,n,c[0],c[3]),t(r,n,c[1],c[3]),t(r,n,c[2],c[3])]);break;case 8:u.push([t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[3],c[2])]);break;case 9:u.push([t(r,n,c[3],c[1]),t(r,n,c[0],c[1]),t(r,n,c[0],c[2])],[t(r,n,c[3],c[2]),t(r,n,c[3],c[1]),t(r,n,c[0],c[2])]);break;case 10:u.push([t(r,n,c[1],c[0]),t(r,n,c[3],c[0]),t(r,n,c[1],c[2])],[t(r,n,c[3],c[0]),t(r,n,c[3],c[2]),t(r,n,c[1],c[2])]);break;case 11:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[3],c[2])]);break;case 12:u.push([t(r,n,c[3],c[0]),t(r,n,c[2],c[0]),t(r,n,c[2],c[1])],[t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[2],c[1])]);break;case 13:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[3],c[1])]);break;case 14:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[3],c[0])])}}else if(w===3){if((m=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2))==0||m===7)continue;switch(m){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(w===2){var m;if((m=(s[c[0]]<<0)+(s[c[1]]<<1))==0||m===3)continue;switch(m){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}}]},8211:function(h,o,t){t(2288),t(1731),o.H=function(i,n){var r=i.length,s=i.length-n.length,l=Math.min;if(s)return s;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return(c=i[0]+i[1]-n[0]-n[1])||l(i[0],i[1])-l(n[0],n[1]);case 3:var u=i[0]+i[1],d=n[0]+n[1];if(c=u+i[2]-(d+n[2]))return c;var c,w=l(i[0],i[1]),m=l(n[0],n[1]);return(c=l(w,i[2])-l(m,n[2]))||l(w+i[2],u)-l(m+n[2],d);default:var f=i.slice(0);f.sort();var x=n.slice(0);x.sort();for(var y=0;y<r;++y)if(s=f[y]-x[y])return s;return 0}}},9392:function(h,o){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var r=n>>31;return(n^r)-r},o.min=function(n,r){return r^(n^r)&-(n<r)},o.max=function(n,r){return n^(n^r)&-(n<r)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var r,s;return r=(n>65535)<<4,r|=s=((n>>>=r)>255)<<3,r|=s=((n>>>=s)>15)<<2,(r|=s=((n>>>=s)>3)<<1)|(n>>>=s)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var s=r,l=r,u=7;for(s>>>=1;s;s>>>=1)l<<=1,l|=1&s,--u;n[r]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},o.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,r,s){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6656:function(h,o,t){var i=t(9392),n=t(9521);function r(m,f){var x=m.length,y=m.length-f.length,v=Math.min;if(y)return y;switch(x){case 0:return 0;case 1:return m[0]-f[0];case 2:return(S=m[0]+m[1]-f[0]-f[1])||v(m[0],m[1])-v(f[0],f[1]);case 3:var M=m[0]+m[1],p=f[0]+f[1];if(S=M+m[2]-(p+f[2]))return S;var S,A=v(m[0],m[1]),k=v(f[0],f[1]);return(S=v(A,m[2])-v(k,f[2]))||v(A+m[2],M)-v(k+f[2],p);default:var C=m.slice(0);C.sort();var P=f.slice(0);P.sort();for(var R=0;R<x;++R)if(y=C[R]-P[R])return y;return 0}}function s(m,f){return r(m[0],f[0])}function l(m,f){if(f){for(var x=m.length,y=new Array(x),v=0;v<x;++v)y[v]=[m[v],f[v]];for(y.sort(s),v=0;v<x;++v)m[v]=y[v][0],f[v]=y[v][1];return m}return m.sort(r),m}function u(m){if(m.length===0)return[];for(var f=1,x=m.length,y=1;y<x;++y){var v=m[y];if(r(v,m[y-1])){if(y===f){f++;continue}m[f++]=v}}return m.length=f,m}function d(m,f){for(var x=0,y=m.length-1,v=-1;x<=y;){var M=x+y>>1,p=r(m[M],f);p<=0?(p===0&&(v=M),x=M+1):p>0&&(y=M-1)}return v}function c(m,f){for(var x=new Array(m.length),y=0,v=x.length;y<v;++y)x[y]=[];for(var M=[],p=(y=0,f.length);y<p;++y)for(var S=f[y],A=S.length,k=1,C=1<<A;k<C;++k){M.length=i.popCount(k);for(var P=0,R=0;R<A;++R)k&1<<R&&(M[P++]=S[R]);var O=d(m,M);if(!(O<0))for(;x[O++].push(y),!(O>=m.length||r(m[O],M)!==0););}return x}function w(m,f){if(f<0)return[];for(var x=[],y=(1<<f+1)-1,v=0;v<m.length;++v)for(var M=m[v],p=y;p<1<<M.length;p=i.nextCombination(p)){for(var S=new Array(f+1),A=0,k=0;k<M.length;++k)p&1<<k&&(S[A++]=M[k]);x.push(S)}return l(x)}o.dimension=function(m){for(var f=0,x=Math.max,y=0,v=m.length;y<v;++y)f=x(f,m[y].length);return f-1},o.countVertices=function(m){for(var f=-1,x=Math.max,y=0,v=m.length;y<v;++y)for(var M=m[y],p=0,S=M.length;p<S;++p)f=x(f,M[p]);return f+1},o.cloneCells=function(m){for(var f=new Array(m.length),x=0,y=m.length;x<y;++x)f[x]=m[x].slice(0);return f},o.compareCells=r,o.normalize=l,o.unique=u,o.findCell=d,o.incidence=c,o.dual=function(m,f){if(!f)return c(u(w(m,0)),m);for(var x=new Array(f),y=0;y<f;++y)x[y]=[];y=0;for(var v=m.length;y<v;++y)for(var M=m[y],p=0,S=M.length;p<S;++p)x[M[p]].push(y);return x},o.explode=function(m){for(var f=[],x=0,y=m.length;x<y;++x)for(var v=m[x],M=0|v.length,p=1,S=1<<M;p<S;++p){for(var A=[],k=0;k<M;++k)p>>>k&1&&A.push(v[k]);f.push(A)}return l(f)},o.skeleton=w,o.boundary=function(m){for(var f=[],x=0,y=m.length;x<y;++x)for(var v=m[x],M=0,p=v.length;M<p;++M){for(var S=new Array(v.length-1),A=0,k=0;A<p;++A)A!==M&&(S[k++]=v[A]);f.push(S)}return l(f)},o.connectedComponents=function(m,f){return f?function(x,y){for(var v=new n(y),M=0;M<x.length;++M)for(var p=x[M],S=0;S<p.length;++S)for(var A=S+1;A<p.length;++A)v.link(p[S],p[A]);var k=[],C=v.ranks;for(M=0;M<C.length;++M)C[M]=-1;for(M=0;M<x.length;++M){var P=v.find(x[M][0]);C[P]<0?(C[P]=k.length,k.push([x[M].slice(0)])):k[C[P]].push(x[M].slice(0))}return k}(m,f):function(x){for(var y=u(l(w(x,0))),v=new n(y.length),M=0;M<x.length;++M)for(var p=x[M],S=0;S<p.length;++S)for(var A=d(y,[p[S]]),k=S+1;k<p.length;++k)v.link(A,d(y,[p[k]]));var C=[],P=v.ranks;for(M=0;M<P.length;++M)P[M]=-1;for(M=0;M<x.length;++M){var R=v.find(d(y,[x[M][0]]));P[R]<0?(P[R]=C.length,C.push([x[M].slice(0)])):C[P[R]].push(x[M].slice(0))}return C}(m)}},9521:function(h){function o(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}h.exports=o,o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},o.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var n=i[t];i[t]=i[n],t=n}return t},o.prototype.link=function(t,i){var n=this.find(t),r=this.find(i);if(n!==r){var s=this.ranks,l=this.roots,u=s[n],d=s[r];u<d?l[n]=r:d<u?l[r]=n:(l[r]=n,++s[n])}}},8243:function(h,o,t){h.exports=function(r,s,l){for(var u=s.length,d=r.length,c=new Array(u),w=new Array(u),m=new Array(u),f=new Array(u),x=0;x<u;++x)c[x]=w[x]=-1,m[x]=1/0,f[x]=!1;for(x=0;x<d;++x){var y=r[x];if(y.length!==2)throw new Error("Input must be a graph");var v=y[1],M=y[0];w[M]!==-1?w[M]=-2:w[M]=v,c[v]!==-1?c[v]=-2:c[v]=M}function p(ee){if(f[ee])return 1/0;var K,Y,$,ne=c[ee],ae=w[ee];return ne<0||ae<0?1/0:(K=s[ee],Y=s[ne],$=s[ae],Math.abs(i(K,Y,$))/Math.sqrt(Math.pow(Y[0]-$[0],2)+Math.pow(Y[1]-$[1],2)))}function S(ee,K){var Y=D[ee],$=D[K];D[ee]=$,D[K]=Y,V[Y]=K,V[$]=ee}function A(ee){return m[D[ee]]}function k(ee){return 1&ee?ee-1>>1:(ee>>1)-1}function C(ee){for(var K=A(ee);;){var Y=K,$=2*ee+1,ne=2*(ee+1),ae=ee;if($<j){var se=A($);se<Y&&(ae=$,Y=se)}if(ne<j&&A(ne)<Y&&(ae=ne),ae===ee)return ee;S(ee,ae),ee=ae}}function P(ee){for(var K=A(ee);ee>0;){var Y=k(ee);if(!(Y>=0&&K<A(Y)))return ee;S(ee,Y),ee=Y}}function R(){if(j>0){var ee=D[0];return S(0,j-1),j-=1,C(0),ee}return-1}function O(ee,K){var Y=D[ee];return m[Y]===K?ee:(m[Y]=-1/0,P(ee),R(),m[Y]=K,P((j+=1)-1))}function X(ee){if(!f[ee]){f[ee]=!0;var K=c[ee],Y=w[ee];c[Y]>=0&&(c[Y]=K),w[K]>=0&&(w[K]=Y),V[K]>=0&&O(V[K],p(K)),V[Y]>=0&&O(V[Y],p(Y))}}var D=[],V=new Array(u);for(x=0;x<u;++x)(m[x]=p(x))<1/0?(V[x]=D.length,D.push(x)):V[x]=-1;var j=D.length;for(x=j>>1;x>=0;--x)C(x);for(;;){var B=R();if(B<0||m[B]>l)break;X(B)}var W=[];for(x=0;x<u;++x)f[x]||(V[x]=W.length,W.push(s[x].slice()));function q(ee,K){if(ee[K]<0)return K;var Y=K,$=K;do{var ne=ee[$];if(!f[$]||ne<0||ne===$||(ne=ee[$=ne],!f[$]||ne<0||ne===$))break;$=ne,Y=ee[Y]}while(Y!==$);for(var ae=K;ae!==$;ae=ee[ae])ee[ae]=$;return $}W.length;var re=[];return r.forEach(function(ee){var K=q(c,ee[0]),Y=q(w,ee[1]);if(K>=0&&Y>=0&&K!==Y){var $=V[K],ne=V[Y];$!==ne&&re.push([$,ne])}}),n.unique(n.normalize(re)),{positions:W,edges:re}};var i=t(417),n=t(6656)},6638:function(h,o,t){h.exports=function(r,s){var l,u,d,c;if(s[0][0]<s[1][0])l=s[0],u=s[1];else{if(!(s[0][0]>s[1][0]))return n(s,r);l=s[1],u=s[0]}if(r[0][0]<r[1][0])d=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,s);d=r[1],c=r[0]}var w=i(l,u,c),m=i(l,u,d);if(w<0){if(m<=0)return w}else if(w>0){if(m>=0)return w}else if(m)return m;if(w=i(c,d,u),m=i(c,d,l),w<0){if(m<=0)return w}else if(w>0){if(m>=0)return w}else if(m)return m;return u[0]-c[0]};var i=t(417);function n(r,s){var l,u,d,c;if(s[0][0]<s[1][0])l=s[0],u=s[1];else{if(!(s[0][0]>s[1][0])){var w=Math.min(r[0][1],r[1][1]),m=Math.max(r[0][1],r[1][1]),f=Math.min(s[0][1],s[1][1]),x=Math.max(s[0][1],s[1][1]);return m<f?m-f:w>x?w-x:m-x}l=s[1],u=s[0]}r[0][1]<r[1][1]?(d=r[0],c=r[1]):(d=r[1],c=r[0]);var y=i(u,l,d);return y||(y=i(u,l,c))||c-u}},4385:function(h,o,t){h.exports=function(m){for(var f=m.length,x=2*f,y=new Array(x),v=0;v<f;++v){var M=m[v],p=M[0][0]<M[1][0];y[2*v]=new w(M[0][0],M,p,v),y[2*v+1]=new w(M[1][0],M,!p,v)}y.sort(function(X,D){var V=X.x-D.x;return V||(V=X.create-D.create)||Math.min(X.segment[0][1],X.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var S=n(s),A=[],k=[],C=[];for(v=0;v<x;){for(var P=y[v].x,R=[];v<x;){var O=y[v];if(O.x!==P)break;v+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(R.push(new c(O.segment[0][1],O.index,!0,!0)),R.push(new c(O.segment[1][1],O.index,!1,!1))):(R.push(new c(O.segment[1][1],O.index,!0,!1)),R.push(new c(O.segment[0][1],O.index,!1,!0)))):S=O.create?S.insert(O.segment,O.index):S.remove(O.segment)}A.push(S.root),k.push(P),C.push(R)}return new l(A,k,C)};var i=t(5070),n=t(7080),r=t(417),s=t(6638);function l(m,f,x){this.slabs=m,this.coordinates=f,this.horizontal=x}function u(m,f){return m.y-f}function d(m,f){for(var x=null;m;){var y,v,M=m.key;M[0][0]<M[1][0]?(y=M[0],v=M[1]):(y=M[1],v=M[0]);var p=r(y,v,f);if(p<0)m=m.left;else if(p>0)if(f[0]!==M[1][0])x=m,m=m.right;else{if(S=d(m.right,f))return S;m=m.left}else{if(f[0]!==M[1][0])return m;var S;if(S=d(m.right,f))return S;m=m.left}}return x}function c(m,f,x,y){this.y=m,this.index=f,this.start=x,this.closed=y}function w(m,f,x,y){this.x=m,this.segment=f,this.create=x,this.index=y}l.prototype.castUp=function(m){var f=i.le(this.coordinates,m[0]);if(f<0)return-1;this.slabs[f];var x=d(this.slabs[f],m),y=-1;if(x&&(y=x.value),this.coordinates[f]===m[0]){var v=null;if(x&&(v=x.key),f>0){var M=d(this.slabs[f-1],m);M&&(v?s(M.key,v)>0&&(v=M.key,y=M.value):(y=M.value,v=M.key))}var p=this.horizontal[f];if(p.length>0){var S=i.ge(p,m[1],u);if(S<p.length){var A=p[S];if(m[1]===A.y){if(A.closed)return A.index;for(;S<p.length-1&&p[S+1].y===m[1];)if((A=p[S+=1]).closed)return A.index;if(A.y===m[1]&&!A.start){if((S+=1)>=p.length)return y;A=p[S]}}if(A.start)if(v){var k=r(v[0],v[1],[m[0],A.y]);v[0][0]>v[1][0]&&(k=-k),k>0&&(y=A.index)}else y=A.index;else A.y!==m[1]&&(y=A.index)}}}return y}},4670:function(h,o,t){var i=t(9130),n=t(9662);function r(l,u){var d=n(i(l,u),[u[u.length-1]]);return d[d.length-1]}function s(l,u,d,c){var w=-u/(c-u);w<0?w=0:w>1&&(w=1);for(var m=1-w,f=l.length,x=new Array(f),y=0;y<f;++y)x[y]=w*l[y]+m*d[y];return x}h.exports=function(l,u){for(var d=[],c=[],w=r(l[l.length-1],u),m=l[l.length-1],f=l[0],x=0;x<l.length;++x,m=f){var y=r(f=l[x],u);if(w<0&&y>0||w>0&&y<0){var v=s(m,y,f,w);d.push(v),c.push(v.slice())}y<0?c.push(f.slice()):y>0?d.push(f.slice()):(d.push(f.slice()),c.push(f.slice())),w=y}return{positive:d,negative:c}},h.exports.positive=function(l,u){for(var d=[],c=r(l[l.length-1],u),w=l[l.length-1],m=l[0],f=0;f<l.length;++f,w=m){var x=r(m=l[f],u);(c<0&&x>0||c>0&&x<0)&&d.push(s(w,x,m,c)),x>=0&&d.push(m.slice()),c=x}return d},h.exports.negative=function(l,u){for(var d=[],c=r(l[l.length-1],u),w=l[l.length-1],m=l[0],f=0;f<l.length;++f,w=m){var x=r(m=l[f],u);(c<0&&x>0||c>0&&x<0)&&d.push(s(w,x,m,c)),x<=0&&d.push(m.slice()),c=x}return d}},8974:function(h,o,t){var i;(function(){var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return function(d,c){var w,m,f,x,y,v,M,p,S,A=1,k=d.length,C="";for(m=0;m<k;m++)if(typeof d[m]=="string")C+=d[m];else if(typeof d[m]=="object"){if((x=d[m]).keys)for(w=c[A],f=0;f<x.keys.length;f++){if(w==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[f],x.keys[f-1]));w=w[x.keys[f]]}else w=x.param_no?c[x.param_no]:c[A++];if(n.not_type.test(x.type)&&n.not_primitive.test(x.type)&&w instanceof Function&&(w=w()),n.numeric_arg.test(x.type)&&typeof w!="number"&&isNaN(w))throw new TypeError(r("[sprintf] expecting number but found %T",w));switch(n.number.test(x.type)&&(p=w>=0),x.type){case"b":w=parseInt(w,10).toString(2);break;case"c":w=String.fromCharCode(parseInt(w,10));break;case"d":case"i":w=parseInt(w,10);break;case"j":w=JSON.stringify(w,null,x.width?parseInt(x.width):0);break;case"e":w=x.precision?parseFloat(w).toExponential(x.precision):parseFloat(w).toExponential();break;case"f":w=x.precision?parseFloat(w).toFixed(x.precision):parseFloat(w);break;case"g":w=x.precision?String(Number(w.toPrecision(x.precision))):parseFloat(w);break;case"o":w=(parseInt(w,10)>>>0).toString(8);break;case"s":w=String(w),w=x.precision?w.substring(0,x.precision):w;break;case"t":w=String(!!w),w=x.precision?w.substring(0,x.precision):w;break;case"T":w=Object.prototype.toString.call(w).slice(8,-1).toLowerCase(),w=x.precision?w.substring(0,x.precision):w;break;case"u":w=parseInt(w,10)>>>0;break;case"v":w=w.valueOf(),w=x.precision?w.substring(0,x.precision):w;break;case"x":w=(parseInt(w,10)>>>0).toString(16);break;case"X":w=(parseInt(w,10)>>>0).toString(16).toUpperCase()}n.json.test(x.type)?C+=w:(!n.number.test(x.type)||p&&!x.sign?S="":(S=p?"+":"-",w=w.toString().replace(n.sign,"")),v=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",M=x.width-(S+w).length,y=x.width&&M>0?v.repeat(M):"",C+=x.align?S+w+y:v==="0"?S+y+w:y+S+w)}return C}(function(d){if(l[d])return l[d];for(var c,w=d,m=[],f=0;w;){if((c=n.text.exec(w))!==null)m.push(c[0]);else if((c=n.modulo.exec(w))!==null)m.push("%");else{if((c=n.placeholder.exec(w))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var x=[],y=c[2],v=[];if((v=n.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(x.push(v[1]);(y=y.substring(v[0].length))!=="";)if((v=n.key_access.exec(y))!==null)x.push(v[1]);else{if((v=n.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");x.push(v[1])}c[2]=x}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");m.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}w=w.substring(c[0].length)}return l[d]=m}(u),arguments)}function s(u,d){return r.apply(null,[u].concat(d||[]))}var l=Object.create(null);o.sprintf=r,o.vsprintf=s,typeof window<"u"&&(window.sprintf=r,window.vsprintf=s,(i=(function(){return{sprintf:r,vsprintf:s}}).call(o,t,o,h))===void 0||(h.exports=i))})()},4162:function(h,o,t){h.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(w,m){for(var f=n(w,m),x=f.length,y=new Array(x),v=new Array(x),M=0;M<x;++M)y[M]=[f[M]],v[M]=[M];return{positions:y,cells:v}}(l,u);var d=l.order.join()+"-"+l.dtype,c=s[d];return u=+u||0,c||(c=s[d]=function(w,m){var f=w.length+"d",x=r[f];if(x)return x(i,w,m)}(l.order,l.dtype)),c(l,u)};var i=t(9284),n=t(9584),r={"2d":function(l,u,d){var c=l({order:u,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(w,m,f,x){return w>x|0},vertex:function(w,m,f,x,y,v,M,p,S,A,k,C,P){var R=(M<<0)+(p<<1)+(S<<2)+(A<<3)|0;if(R!==0&&R!==15)switch(R){case 0:case 15:k.push([w-.5,m-.5]);break;case 1:k.push([w-.25-.25*(x+f-2*P)/(f-x),m-.25-.25*(y+f-2*P)/(f-y)]);break;case 2:k.push([w-.75-.25*(-x-f+2*P)/(x-f),m-.25-.25*(v+x-2*P)/(x-v)]);break;case 3:k.push([w-.5,m-.5-.5*(y+f+v+x-4*P)/(f-y+x-v)]);break;case 4:k.push([w-.25-.25*(v+y-2*P)/(y-v),m-.75-.25*(-y-f+2*P)/(y-f)]);break;case 5:k.push([w-.5-.5*(x+f+v+y-4*P)/(f-x+y-v),m-.5]);break;case 6:k.push([w-.5-.25*(-x-f+v+y)/(x-f+y-v),m-.5-.25*(-y-f+v+x)/(y-f+x-v)]);break;case 7:k.push([w-.75-.25*(v+y-2*P)/(y-v),m-.75-.25*(v+x-2*P)/(x-v)]);break;case 8:k.push([w-.75-.25*(-v-y+2*P)/(v-y),m-.75-.25*(-v-x+2*P)/(v-x)]);break;case 9:k.push([w-.5-.25*(x+f+-v-y)/(f-x+v-y),m-.5-.25*(y+f+-v-x)/(f-y+v-x)]);break;case 10:k.push([w-.5-.5*(-x-f-v-y+4*P)/(x-f+v-y),m-.5]);break;case 11:k.push([w-.25-.25*(-v-y+2*P)/(v-y),m-.75-.25*(y+f-2*P)/(f-y)]);break;case 12:k.push([w-.5,m-.5-.5*(-y-f-v-x+4*P)/(y-f+v-x)]);break;case 13:k.push([w-.75-.25*(x+f-2*P)/(f-x),m-.25-.25*(-v-x+2*P)/(v-x)]);break;case 14:k.push([w-.25-.25*(-x-f+2*P)/(x-f),m-.25-.25*(-y-f+2*P)/(y-f)])}},cell:function(w,m,f,x,y,v,M,p,S){y?p.push([w,m]):p.push([m,w])}});return function(w,m){var f=[],x=[];return c(w,f,x,m),{positions:f,cells:x}}}},s={}},6946:function(h,o,t){h.exports=function s(l,u,d){d=d||{};var c=r[l];c||(c=r[l]={" ":{data:new Float32Array(0),shape:.2}});var w=c[u];if(!w)if(u.length<=1||!/\d/.test(u))w=c[u]=function(C){for(var P=C.cells,R=C.positions,O=new Float32Array(6*P.length),X=0,D=0,V=0;V<P.length;++V)for(var j=P[V],B=0;B<3;++B){var W=R[j[B]];O[X++]=W[0],O[X++]=W[1]+1.4,D=Math.max(W[0],D)}return{data:O,shape:D}}(i(u,{triangles:!0,font:l,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=u.split(/(\d|\s)/),f=new Array(m.length),x=0,y=0,v=0;v<m.length;++v)f[v]=s(l,m[v]),x+=f[v].data.length,y+=f[v].shape,v>0&&(y+=.02);var M=new Float32Array(x),p=0,S=-.5*y;for(v=0;v<f.length;++v){for(var A=f[v].data,k=0;k<A.length;k+=2)M[p++]=A[k]+S,M[p++]=A[k+1];S+=f[v].shape+.02}w=c[u]={data:M,shape:y}}return w};var i=t(875),n=window||b.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},14:function(h,o,t){var i=t(4405);h.exports=s;var n=96;function r(l,u){var d=i(getComputedStyle(l).getPropertyValue(u));return d[0]*s(d[1],l)}function s(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(d,c){var w=document.createElement("div");w.style["font-size"]="128"+d,c.appendChild(w);var m=r(w,"font-size")/128;return c.removeChild(w),m}(l,u);case"em":return r(u,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},3440:function(h,o,t){h.exports=function(y){var v=(y=y||{}).center||[0,0,0],M=y.up||[0,1,0],p=y.right||w(M),S=y.radius||1,A=y.theta||0,k=y.phi||0;if(v=[].slice.call(v,0,3),M=[].slice.call(M,0,3),l(M,M),p=[].slice.call(p,0,3),l(p,p),"eye"in y){var C=y.eye,P=[C[0]-v[0],C[1]-v[1],C[2]-v[2]];s(p,P,M),d(p[0],p[1],p[2])<1e-6?p=w(M):l(p,p),S=d(P[0],P[1],P[2]);var R=u(M,P)/S,O=u(p,P)/S;k=Math.acos(R),A=Math.acos(O)}return S=Math.log(S),new m(y.zoomMin,y.zoomMax,v,M,p,S,A,k)};var i=t(8444),n=t(7437),r=t(4422),s=t(903),l=t(899),u=t(9305);function d(y,v,M){return Math.sqrt(Math.pow(y,2)+Math.pow(v,2)+Math.pow(M,2))}function c(y){return Math.min(1,Math.max(-1,y))}function w(y){var v=Math.abs(y[0]),M=Math.abs(y[1]),p=Math.abs(y[2]),S=[0,0,0];v>Math.max(M,p)?S[2]=1:M>Math.max(v,p)?S[0]=1:S[1]=1;for(var A=0,k=0,C=0;C<3;++C)A+=y[C]*y[C],k+=S[C]*y[C];for(C=0;C<3;++C)S[C]-=k/A*y[C];return l(S,S),S}function m(y,v,M,p,S,A,k,C){this.center=i(M),this.up=i(p),this.right=i(S),this.radius=i([A]),this.angle=i([k,C]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,v),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var f=m.prototype;f.setDistanceLimits=function(y,v){y=y>0?Math.log(y):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=v},f.getDistanceLimits=function(y){var v=this.radius.bounds[0];return y?(y[0]=Math.exp(v[0][0]),y[1]=Math.exp(v[1][0]),y):[Math.exp(v[0][0]),Math.exp(v[1][0])]},f.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var v=this.computedUp,M=this.computedRight,p=0,S=0,A=0;A<3;++A)S+=v[A]*M[A],p+=v[A]*v[A];var k=Math.sqrt(p),C=0;for(A=0;A<3;++A)M[A]-=v[A]*S/p,C+=M[A]*M[A],v[A]/=k;var P=Math.sqrt(C);for(A=0;A<3;++A)M[A]/=P;var R=this.computedToward;s(R,v,M),l(R,R);var O=Math.exp(this.computedRadius[0]),X=this.computedAngle[0],D=this.computedAngle[1],V=Math.cos(X),j=Math.sin(X),B=Math.cos(D),W=Math.sin(D),q=this.computedCenter,re=V*B,ee=j*B,K=W,Y=-V*W,$=-j*W,ne=B,ae=this.computedEye,se=this.computedMatrix;for(A=0;A<3;++A){var ce=re*M[A]+ee*R[A]+K*v[A];se[4*A+1]=Y*M[A]+$*R[A]+ne*v[A],se[4*A+2]=ce,se[4*A+3]=0}var me=se[1],ye=se[5],Te=se[9],Ce=se[2],pe=se[6],fe=se[10],Oe=ye*fe-Te*pe,Se=Te*Ce-me*fe,Me=me*pe-ye*Ce,ue=d(Oe,Se,Me);for(Oe/=ue,Se/=ue,Me/=ue,se[0]=Oe,se[4]=Se,se[8]=Me,A=0;A<3;++A)ae[A]=q[A]+se[2+4*A]*O;for(A=0;A<3;++A){C=0;for(var le=0;le<3;++le)C+=se[A+4*le]*ae[le];se[12+A]=-C}se[15]=1},f.getMatrix=function(y,v){this.recalcMatrix(y);var M=this.computedMatrix;if(v){for(var p=0;p<16;++p)v[p]=M[p];return v}return M};var x=[0,0,0];f.rotate=function(y,v,M,p){if(this.angle.move(y,v,M),p){this.recalcMatrix(y);var S=this.computedMatrix;x[0]=S[2],x[1]=S[6],x[2]=S[10];for(var A=this.computedUp,k=this.computedRight,C=this.computedToward,P=0;P<3;++P)S[4*P]=A[P],S[4*P+1]=k[P],S[4*P+2]=C[P];for(r(S,S,p,x),P=0;P<3;++P)A[P]=S[4*P],k[P]=S[4*P+1];this.up.set(y,A[0],A[1],A[2]),this.right.set(y,k[0],k[1],k[2])}},f.pan=function(y,v,M,p){v=v||0,M=M||0,p=p||0,this.recalcMatrix(y);var S=this.computedMatrix,A=(Math.exp(this.computedRadius[0]),S[1]),k=S[5],C=S[9],P=d(A,k,C);A/=P,k/=P,C/=P;var R=S[0],O=S[4],X=S[8],D=R*A+O*k+X*C,V=d(R-=A*D,O-=k*D,X-=C*D),j=(R/=V)*v+A*M,B=(O/=V)*v+k*M,W=(X/=V)*v+C*M;this.center.move(y,j,B,W);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+p),this.radius.set(y,Math.log(q))},f.translate=function(y,v,M,p){this.center.move(y,v||0,M||0,p||0)},f.setMatrix=function(y,v,M,p){var S=1;typeof M=="number"&&(S=0|M),(S<0||S>3)&&(S=1);var A=(S+2)%3;v||(this.recalcMatrix(y),v=this.computedMatrix);var k=v[S],C=v[S+4],P=v[S+8];if(p){var R=Math.abs(k),O=Math.abs(C),X=Math.abs(P),D=Math.max(R,O,X);R===D?(k=k<0?-1:1,C=P=0):X===D?(P=P<0?-1:1,k=C=0):(C=C<0?-1:1,k=P=0)}else{var V=d(k,C,P);k/=V,C/=V,P/=V}var j,B,W=v[A],q=v[A+4],re=v[A+8],ee=W*k+q*C+re*P,K=d(W-=k*ee,q-=C*ee,re-=P*ee),Y=C*(re/=K)-P*(q/=K),$=P*(W/=K)-k*re,ne=k*q-C*W,ae=d(Y,$,ne);if(Y/=ae,$/=ae,ne/=ae,this.center.jump(y,we,Ne,He),this.radius.idle(y),this.up.jump(y,k,C,P),this.right.jump(y,W,q,re),S===2){var se=v[1],ce=v[5],me=v[9],ye=se*W+ce*q+me*re,Te=se*Y+ce*$+me*ne;j=Oe<0?-Math.PI/2:Math.PI/2,B=Math.atan2(Te,ye)}else{var Ce=v[2],pe=v[6],fe=v[10],Oe=Ce*k+pe*C+fe*P,Se=Ce*W+pe*q+fe*re,Me=Ce*Y+pe*$+fe*ne;j=Math.asin(c(Oe)),B=Math.atan2(Me,Se)}this.angle.jump(y,B,j),this.recalcMatrix(y);var ue=v[2],le=v[6],ie=v[10],ge=this.computedMatrix;n(ge,v);var Ae=ge[15],we=ge[12]/Ae,Ne=ge[13]/Ae,He=ge[14]/Ae,de=Math.exp(this.computedRadius[0]);this.center.jump(y,we-ue*de,Ne-le*de,He-ie*de)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},f.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},f.setDistance=function(y,v){v>0&&this.radius.set(y,Math.log(v))},f.lookAt=function(y,v,M,p){this.recalcMatrix(y),v=v||this.computedEye,M=M||this.computedCenter;var S=(p=p||this.computedUp)[0],A=p[1],k=p[2],C=d(S,A,k);if(!(C<1e-6)){S/=C,A/=C,k/=C;var P=v[0]-M[0],R=v[1]-M[1],O=v[2]-M[2],X=d(P,R,O);if(!(X<1e-6)){P/=X,R/=X,O/=X;var D=this.computedRight,V=D[0],j=D[1],B=D[2],W=S*V+A*j+k*B,q=d(V-=W*S,j-=W*A,B-=W*k);if(!(q<.01&&(q=d(V=A*O-k*R,j=k*P-S*O,B=S*R-A*P))<1e-6)){V/=q,j/=q,B/=q,this.up.set(y,S,A,k),this.right.set(y,V,j,B),this.center.set(y,M[0],M[1],M[2]),this.radius.set(y,Math.log(X));var re=A*B-k*j,ee=k*V-S*B,K=S*j-A*V,Y=d(re,ee,K),$=S*P+A*R+k*O,ne=V*P+j*R+B*O,ae=(re/=Y)*P+(ee/=Y)*R+(K/=Y)*O,se=Math.asin(c($)),ce=Math.atan2(ae,ne),me=this.angle._state,ye=me[me.length-1],Te=me[me.length-2];ye%=2*Math.PI;var Ce=Math.abs(ye+2*Math.PI-ce),pe=Math.abs(ye-ce),fe=Math.abs(ye-2*Math.PI-ce);Ce<pe&&(ye+=2*Math.PI),fe<pe&&(ye-=2*Math.PI),this.angle.jump(this.angle.lastT(),ye,Te),this.angle.set(y,ce,se)}}}}},9660:function(h){h.exports=function(t,i,n){var r=t*i,s=o*t,l=s-(s-t),u=t-l,d=o*i,c=d-(d-i),w=i-c,m=u*w-(r-l*c-u*c-l*w);return n?(n[0]=m,n[1]=r,n):[m,r]};var o=+(Math.pow(2,27)+1)},87:function(h){h.exports=function(o,t,i){var n=o+t,r=n-o,s=t-r,l=o-(n-r);return i?(i[0]=l+s,i[1]=n,i):[l+s,n]}},5306:function(h,o,t){var i=t(2288),n=t(3094),r=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var s=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",d=t.g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=n([32,0])),d.BIGUINT64||(d.BIGUINT64=n([32,0])),d.BIGINT64||(d.BIGINT64=n([32,0])),d.BUFFER||(d.BUFFER=n([32,0]));var c=d.DATA,w=d.BUFFER;function m(D){if(D){var V=D.length||D.byteLength,j=i.log2(V);c[j].push(D)}}function f(D){D=i.nextPow2(D);var V=i.log2(D),j=c[V];return j.length>0?j.pop():new ArrayBuffer(D)}function x(D){return new Uint8Array(f(D),0,D)}function y(D){return new Uint16Array(f(2*D),0,D)}function v(D){return new Uint32Array(f(4*D),0,D)}function M(D){return new Int8Array(f(D),0,D)}function p(D){return new Int16Array(f(2*D),0,D)}function S(D){return new Int32Array(f(4*D),0,D)}function A(D){return new Float32Array(f(4*D),0,D)}function k(D){return new Float64Array(f(8*D),0,D)}function C(D){return s?new Uint8ClampedArray(f(D),0,D):x(D)}function P(D){return l?new BigUint64Array(f(8*D),0,D):null}function R(D){return u?new BigInt64Array(f(8*D),0,D):null}function O(D){return new DataView(f(D),0,D)}function X(D){D=i.nextPow2(D);var V=i.log2(D),j=w[V];return j.length>0?j.pop():new r(D)}o.free=function(D){if(r.isBuffer(D))w[i.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var V=D.length||D.byteLength,j=0|i.log2(V);c[j].push(D)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(D){m(D.buffer)},o.freeArrayBuffer=m,o.freeBuffer=function(D){w[i.log2(D.length)].push(D)},o.malloc=function(D,V){if(V===void 0||V==="arraybuffer")return f(D);switch(V){case"uint8":return x(D);case"uint16":return y(D);case"uint32":return v(D);case"int8":return M(D);case"int16":return p(D);case"int32":return S(D);case"float":case"float32":return A(D);case"double":case"float64":return k(D);case"uint8_clamped":return C(D);case"bigint64":return R(D);case"biguint64":return P(D);case"buffer":return X(D);case"data":case"dataview":return O(D);default:return null}return null},o.mallocArrayBuffer=f,o.mallocUint8=x,o.mallocUint16=y,o.mallocUint32=v,o.mallocInt8=M,o.mallocInt16=p,o.mallocInt32=S,o.mallocFloat32=o.mallocFloat=A,o.mallocFloat64=o.mallocDouble=k,o.mallocUint8Clamped=C,o.mallocBigUint64=P,o.mallocBigInt64=R,o.mallocDataView=O,o.mallocBuffer=X,o.clearCache=function(){for(var D=0;D<32;++D)d.UINT8[D].length=0,d.UINT16[D].length=0,d.UINT32[D].length=0,d.INT8[D].length=0,d.INT16[D].length=0,d.INT32[D].length=0,d.FLOAT[D].length=0,d.DOUBLE[D].length=0,d.BIGUINT64[D].length=0,d.BIGINT64[D].length=0,d.UINT8C[D].length=0,c[D].length=0,w[D].length=0}},1731:function(h){function o(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}h.exports=o;var t=o.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var s=r[n];r[n]=i,n=s}return i},t.link=function(i,n){var r=this.find(i),s=this.find(n);if(r!==s){var l=this.ranks,u=this.roots,d=l[r],c=l[s];d<c?u[r]=s:c<d?u[s]=r:(u[s]=r,++l[r])}}},1215:function(h){h.exports=function(o,t,i){return o.length===0?o:t?(i||o.sort(t),function(n,r){for(var s=1,l=n.length,u=n[0],d=n[0],c=1;c<l;++c)if(d=u,r(u=n[c],d)){if(c===s){s++;continue}n[s++]=u}return n.length=s,n}(o,t)):(i||o.sort(),function(n){for(var r=1,s=n.length,l=n[0],u=n[0],d=1;d<s;++d,u=l)if(u=l,(l=n[d])!==u){if(d===r){r++;continue}n[r++]=l}return n.length=r,n}(o))}},875:function(h,o,t){h.exports=function(s,l){return typeof l=="object"&&l!==null||(l={}),i(s,l.canvas||n,l.context||r,l)};var i=t(712),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},712:function(h,o,t){h.exports=function(P,R,O,X){var D=64,V=1.25,j={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return X&&(X.size&&X.size>0&&(D=X.size),X.lineSpacing&&X.lineSpacing>0&&(V=X.lineSpacing),X.styletags&&X.styletags.breaklines&&(j.breaklines=!!X.styletags.breaklines),X.styletags&&X.styletags.bolds&&(j.bolds=!!X.styletags.bolds),X.styletags&&X.styletags.italics&&(j.italics=!!X.styletags.italics),X.styletags&&X.styletags.subscripts&&(j.subscripts=!!X.styletags.subscripts),X.styletags&&X.styletags.superscripts&&(j.superscripts=!!X.styletags.superscripts)),O.font=[X.fontStyle,X.fontVariant,X.fontWeight,D+"px",X.font].filter(function(B){return B}).join(" "),O.textAlign="start",O.textBaseline="alphabetic",O.direction="ltr",C(function(B,W,q,re,ee,K){q=q.replace(/\n/g,""),q=K.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var Y="",$=[];for(ce=0;ce<q.length;++ce)$[ce]=Y;K.bolds===!0&&($=S(d,c,q,$)),K.italics===!0&&($=S(w,m,q,$)),K.superscripts===!0&&($=S(f,y,q,$)),K.subscripts===!0&&($=S(v,p,q,$));var ne=[],ae="";for(ce=0;ce<q.length;++ce)$[ce]!==null&&(ae+=q[ce],ne.push($[ce]));var se,ce,me,ye,Te,Ce=ae.split(`
`),pe=Ce.length,fe=Math.round(ee*re),Oe=re,Se=2*re,Me=0,ue=pe*fe+Se;B.height<ue&&(B.height=ue),W.fillStyle="#000",W.fillRect(0,0,B.width,B.height),W.fillStyle="#fff";var le=0,ie="";function ge(){if(ie!==""){var Re=W.measureText(ie).width;W.fillText(ie,Oe+me,Se+ye),me+=Re}}function Ae(){return Math.round(Te)+"px "}function we(Re,je){var Fe=""+W.font;if(K.subscripts===!0){var Xe=Re.indexOf(M),Ze=je.indexOf(M),at=Xe>-1?parseInt(Re[1+Xe]):0,lt=Ze>-1?parseInt(je[1+Ze]):0;at!==lt&&(Fe=Fe.replace(Ae(),"?px "),Te*=Math.pow(.75,lt-at),Fe=Fe.replace("?px ",Ae())),ye+=.25*fe*(lt-at)}if(K.superscripts===!0){var ot=Re.indexOf(x),bt=je.indexOf(x),wt=ot>-1?parseInt(Re[1+ot]):0,ht=bt>-1?parseInt(je[1+bt]):0;wt!==ht&&(Fe=Fe.replace(Ae(),"?px "),Te*=Math.pow(.75,ht-wt),Fe=Fe.replace("?px ",Ae())),ye-=.25*fe*(ht-wt)}if(K.bolds===!0){var ct=Re.indexOf(c)>-1,Tt=je.indexOf(c)>-1;!ct&&Tt&&(Fe=Lt?Fe.replace("italic ","italic bold "):"bold "+Fe),ct&&!Tt&&(Fe=Fe.replace("bold ",""))}if(K.italics===!0){var Lt=Re.indexOf(m)>-1,kt=je.indexOf(m)>-1;!Lt&&kt&&(Fe="italic "+Fe),Lt&&!kt&&(Fe=Fe.replace("italic ",""))}W.font=Fe}for(se=0;se<pe;++se){var Ne=Ce[se]+`
`;for(me=0,ye=se*fe,Te=re,ie="",ce=0;ce<Ne.length;++ce){var He=ce+le<ne.length?ne[ce+le]:ne[ne.length-1];Y===He?ie+=Ne[ce]:(ge(),ie=Ne[ce],He!==void 0&&(we(Y,He),Y=He))}ge(),le+=Ne.length;var de=0|Math.round(me+2*Oe);Me<de&&(Me=de)}var Le=Me,Ee=Se+fe*pe;return n(W.getImageData(0,0,Le,Ee).data,[Ee,Le,4]).pick(-1,-1,0).transpose(1,0)}(R,O,P,D,V,j),X,D)},h.exports.processPixels=C;var i=t(4162),n=t(5050),r=t(8243),s=t(197),l=t(7761),u=t(8040),d="b",c="b|",w="i",m="i|",f="sup",x="+",y="+1",v="sub",M="-",p="-1";function S(P,R,O,X){for(var D="<"+P+">",V="</"+P+">",j=D.length,B=V.length,W=R[0]===x||R[0]===M,q=0,re=-B;q>-1&&(q=O.indexOf(D,q))!==-1&&(re=O.indexOf(V,q+j))!==-1&&!(re<=q);){for(var ee=q;ee<re+B;++ee)if(ee<q+j||ee>=re)X[ee]=null,O=O.substr(0,ee)+" "+O.substr(ee+1);else if(X[ee]!==null){var K=X[ee].indexOf(R[0]);K===-1?X[ee]+=R:W&&(X[ee]=X[ee].substr(0,K+1)+(1+parseInt(X[ee][K+1]))+X[ee].substr(K+2))}var Y=q+j,$=O.substr(Y,re-Y).indexOf(D);q=$!==-1?$:re+B}return X}function A(P,R){var O=i(P,128);return R?r(O.cells,O.positions,.25):{edges:O.cells,positions:O.positions}}function k(P,R,O,X){var D=A(P,X),V=function(se,ce,me){for(var ye=ce.textAlign||"start",Te=ce.textBaseline||"alphabetic",Ce=[1<<30,1<<30],pe=[0,0],fe=se.length,Oe=0;Oe<fe;++Oe)for(var Se=se[Oe],Me=0;Me<2;++Me)Ce[Me]=0|Math.min(Ce[Me],Se[Me]),pe[Me]=0|Math.max(pe[Me],Se[Me]);var ue=0;switch(ye){case"center":ue=-.5*(Ce[0]+pe[0]);break;case"right":case"end":ue=-pe[0];break;case"left":case"start":ue=-Ce[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ye+"'")}var le=0;switch(Te){case"hanging":case"top":le=-Ce[1];break;case"middle":le=-.5*(Ce[1]+pe[1]);break;case"alphabetic":case"ideographic":le=-3*me;break;case"bottom":le=-pe[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Te+"'")}var ie=1/me;return"lineHeight"in ce?ie*=+ce.lineHeight:"width"in ce?ie=ce.width/(pe[0]-Ce[0]):"height"in ce&&(ie=ce.height/(pe[1]-Ce[1])),se.map(function(ge){return[ie*(ge[0]+ue),ie*(ge[1]+le)]})}(D.positions,R,O),j=D.edges,B=R.orientation==="ccw";if(s(V,j),R.polygons||R.polygon||R.polyline){for(var W=u(j,V),q=new Array(W.length),re=0;re<W.length;++re){for(var ee=W[re],K=new Array(ee.length),Y=0;Y<ee.length;++Y){for(var $=ee[Y],ne=new Array($.length),ae=0;ae<$.length;++ae)ne[ae]=V[$[ae]].slice();B&&ne.reverse(),K[Y]=ne}q[re]=K}return q}return R.triangles||R.triangulate||R.triangle?{cells:l(V,j,{delaunay:!1,exterior:!1,interior:!0}),positions:V}:{edges:j,positions:V}}function C(P,R,O){try{return k(P,R,O,!0)}catch{}try{return k(P,R,O,!1)}catch{}return R.polygons||R.polyline||R.polygon?[]:R.triangles||R.triangulate||R.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(h){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var o=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,n=Object.freeze({});if(i.set(n,1),i.get(n)===1)return void(h.exports=WeakMap);o=!0}}var r=Object.getOwnPropertyNames,s=Object.defineProperty,l=Object.isExtensible,u="weakmap:",d=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),w=new Uint8Array(c);crypto.getRandomValues(w),d=u+"rand:"+Array.prototype.map.call(w,function(k){return(k%36).toString(36)}).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(k){return r(k).filter(M)}}),"getPropertyNames"in Object){var m=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(k){return m(k).filter(M)}})}(function(){var k=Object.freeze;s(Object,"freeze",{value:function(R){return p(R),k(R)}});var C=Object.seal;s(Object,"seal",{value:function(R){return p(R),C(R)}});var P=Object.preventExtensions;s(Object,"preventExtensions",{value:function(R){return p(R),P(R)}})})();var f=!1,x=0,y=function(){this instanceof y||A();var k=[],C=[],P=x++;return Object.create(y.prototype,{get___:{value:S(function(R,O){var X,D=p(R);return D?P in D?D[P]:O:(X=k.indexOf(R))>=0?C[X]:O})},has___:{value:S(function(R){var O=p(R);return O?P in O:k.indexOf(R)>=0})},set___:{value:S(function(R,O){var X,D=p(R);return D?D[P]=O:(X=k.indexOf(R))>=0?C[X]=O:(X=k.length,C[X]=O,k[X]=R),this})},delete___:{value:S(function(R){var O,X,D=p(R);return D?P in D&&delete D[P]:!((O=k.indexOf(R))<0||(X=k.length-1,k[O]=void 0,C[O]=C[X],k[O]=k[X],k.length=X,C.length=X,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(k,C){return this.get___(k,C)},writable:!0,configurable:!0},has:{value:function(k){return this.has___(k)},writable:!0,configurable:!0},set:{value:function(k,C){return this.set___(k,C)},writable:!0,configurable:!0},delete:{value:function(k){return this.delete___(k)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function k(){this instanceof y||A();var C,P=new t,R=void 0,O=!1;return C=o?function(X,D){return P.set(X,D),P.has(X)||(R||(R=new y),R.set(X,D)),this}:function(X,D){if(O)try{P.set(X,D)}catch{R||(R=new y),R.set___(X,D)}else P.set(X,D);return this},Object.create(y.prototype,{get___:{value:S(function(X,D){return R?P.has(X)?P.get(X):R.get___(X,D):P.get(X,D)})},has___:{value:S(function(X){return P.has(X)||!!R&&R.has___(X)})},set___:{value:S(C)},delete___:{value:S(function(X){var D=!!P.delete(X);return R&&R.delete___(X)||D})},permitHostObjects___:{value:S(function(X){if(X!==v)throw new Error("bogus call to permitHostObjects___");O=!0})}})}o&&typeof Proxy<"u"&&(Proxy=void 0),k.prototype=y.prototype,h.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),h.exports=y)}function v(k){k.permitHostObjects___&&k.permitHostObjects___(v)}function M(k){return!(k.substr(0,8)==u&&k.substr(k.length-3)==="___")}function p(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var C=k[d];if(C&&C.key===k)return C;if(l(k)){C={key:k};try{return s(k,d,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}function S(k){return k.prototype=null,Object.freeze(k)}function A(){f||typeof console>"u"||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(h,o,t){var i=t(7178);h.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var s=r.valueOf(n);return s&&s.identity===n?s:i(r,n)}}},7178:function(h){h.exports=function(o,t){var i={identity:t},n=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):i},writable:!0}),i}},4037:function(h,o,t){var i=t(9222);h.exports=function(){var n=i();return{get:function(r,s){var l=n(r);return l.hasOwnProperty("value")?l.value:s},set:function(r,s){return n(r).value=s,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},6183:function(h){h.exports=function(o){var t={};return function(i,n,r){var s=i.dtype,l=i.order,u=[s,l.join()].join(),d=t[u];return d||(t[u]=d=o([s,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n,r)}}((function(){return function(o,t,i,n,r,s){var l=o[0],u=i[0],d=[0],c=u;n|=0;var w=0,m=u;for(w=0;w<l;++w){var f=t[n]-s,x=t[n+c]-s;f>=0!=x>=0&&r.push(d[0]+.5+.5*(f+x)/(f-x)),n+=m,++d[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},9584:function(h,o,t){h.exports=function(n,r){var s=[];return r=+r||0,i(n.hi(n.shape[0]-1),s,r),s};var i=t(6183)},6601:function(){}},_={};function g(h){var o=_[h];if(o!==void 0)return o.exports;var t=_[h]={id:h,loaded:!1,exports:{}};return a[h].call(t.exports,t,t.exports,g),t.loaded=!0,t.exports}return g.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),g.nmd=function(h){return h.paths=[],h.children||(h.children=[]),h},g(7386)}()},F.exports=T()},12856:function(F,L,e){function T(ue,le){for(var ie=0;ie<le.length;ie++){var ge=le[ie];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(ue,(Ae=function(we,Ne){if(g(we)!=="object"||we===null)return we;var He=we[Symbol.toPrimitive];if(He!==void 0){var de=He.call(we,"string");if(g(de)!=="object")return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(we)}(ge.key),g(Ae)==="symbol"?Ae:String(Ae)),ge)}var Ae}function b(ue,le){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ie,ge){return ie.__proto__=ge,ie},b(ue,le)}function a(ue){if(ue===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue}function _(ue){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},_(ue)}function g(ue){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},g(ue)}var h=e(95341),o=e(95280),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=r,L.SlowBuffer=function(ue){return+ue!=ue&&(ue=0),r.alloc(+ue)},L.INSPECT_MAX_BYTES=50;var i=2147483647;function n(ue){if(ue>i)throw new RangeError('The value "'+ue+'" is invalid for option "size"');var le=new Uint8Array(ue);return Object.setPrototypeOf(le,r.prototype),le}function r(ue,le,ie){if(typeof ue=="number"){if(typeof le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(ue)}return s(ue,le,ie)}function s(ue,le,ie){if(typeof ue=="string")return function(we,Ne){if(typeof Ne=="string"&&Ne!==""||(Ne="utf8"),!r.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);var He=0|m(we,Ne),de=n(He),Le=de.write(we,Ne);return Le!==He&&(de=de.slice(0,Le)),de}(ue,le);if(ArrayBuffer.isView(ue))return function(we){if(pe(we,Uint8Array)){var Ne=new Uint8Array(we);return c(Ne.buffer,Ne.byteOffset,Ne.byteLength)}return d(we)}(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+g(ue));if(pe(ue,ArrayBuffer)||ue&&pe(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(ue,SharedArrayBuffer)||ue&&pe(ue.buffer,SharedArrayBuffer)))return c(ue,le,ie);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=ue.valueOf&&ue.valueOf();if(ge!=null&&ge!==ue)return r.from(ge,le,ie);var Ae=function(we){if(r.isBuffer(we)){var Ne=0|w(we.length),He=n(Ne);return He.length===0||we.copy(He,0,0,Ne),He}return we.length!==void 0?typeof we.length!="number"||fe(we.length)?n(0):d(we):we.type==="Buffer"&&Array.isArray(we.data)?d(we.data):void 0}(ue);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return r.from(ue[Symbol.toPrimitive]("string"),le,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+g(ue))}function l(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function u(ue){return l(ue),n(ue<0?0:0|w(ue))}function d(ue){for(var le=ue.length<0?0:0|w(ue.length),ie=n(le),ge=0;ge<le;ge+=1)ie[ge]=255&ue[ge];return ie}function c(ue,le,ie){if(le<0||ue.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<le+(ie||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ge=le===void 0&&ie===void 0?new Uint8Array(ue):ie===void 0?new Uint8Array(ue,le):new Uint8Array(ue,le,ie),Object.setPrototypeOf(ge,r.prototype),ge}function w(ue){if(ue>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|ue}function m(ue,le){if(r.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||pe(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+g(ue));var ie=ue.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&ie===0)return 0;for(var Ae=!1;;)switch(le){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return ye(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ie;case"hex":return ie>>>1;case"base64":return Te(ue).length;default:if(Ae)return ge?-1:ye(ue).length;le=(""+le).toLowerCase(),Ae=!0}}function f(ue,le,ie){var ge=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0)<=(le>>>=0))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return D(this,le,ie);case"utf8":case"utf-8":return P(this,le,ie);case"ascii":return O(this,le,ie);case"latin1":case"binary":return X(this,le,ie);case"base64":return C(this,le,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,le,ie);default:if(ge)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),ge=!0}}function x(ue,le,ie){var ge=ue[le];ue[le]=ue[ie],ue[ie]=ge}function y(ue,le,ie,ge,Ae){if(ue.length===0)return-1;if(typeof ie=="string"?(ge=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),fe(ie=+ie)&&(ie=Ae?0:ue.length-1),ie<0&&(ie=ue.length+ie),ie>=ue.length){if(Ae)return-1;ie=ue.length-1}else if(ie<0){if(!Ae)return-1;ie=0}if(typeof le=="string"&&(le=r.from(le,ge)),r.isBuffer(le))return le.length===0?-1:v(ue,le,ie,ge,Ae);if(typeof le=="number")return le&=255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(ue,le,ie):Uint8Array.prototype.lastIndexOf.call(ue,le,ie):v(ue,[le],ie,ge,Ae);throw new TypeError("val must be string, number or Buffer")}function v(ue,le,ie,ge,Ae){var we,Ne=1,He=ue.length,de=le.length;if(ge!==void 0&&((ge=String(ge).toLowerCase())==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(ue.length<2||le.length<2)return-1;Ne=2,He/=2,de/=2,ie/=2}function Le(Fe,Xe){return Ne===1?Fe[Xe]:Fe.readUInt16BE(Xe*Ne)}if(Ae){var Ee=-1;for(we=ie;we<He;we++)if(Le(ue,we)===Le(le,Ee===-1?0:we-Ee)){if(Ee===-1&&(Ee=we),we-Ee+1===de)return Ee*Ne}else Ee!==-1&&(we-=we-Ee),Ee=-1}else for(ie+de>He&&(ie=He-de),we=ie;we>=0;we--){for(var Re=!0,je=0;je<de;je++)if(Le(ue,we+je)!==Le(le,je)){Re=!1;break}if(Re)return we}return-1}function M(ue,le,ie,ge){ie=Number(ie)||0;var Ae=ue.length-ie;ge?(ge=Number(ge))>Ae&&(ge=Ae):ge=Ae;var we,Ne=le.length;for(ge>Ne/2&&(ge=Ne/2),we=0;we<ge;++we){var He=parseInt(le.substr(2*we,2),16);if(fe(He))return we;ue[ie+we]=He}return we}function p(ue,le,ie,ge){return Ce(ye(le,ue.length-ie),ue,ie,ge)}function S(ue,le,ie,ge){return Ce(function(Ae){for(var we=[],Ne=0;Ne<Ae.length;++Ne)we.push(255&Ae.charCodeAt(Ne));return we}(le),ue,ie,ge)}function A(ue,le,ie,ge){return Ce(Te(le),ue,ie,ge)}function k(ue,le,ie,ge){return Ce(function(Ae,we){for(var Ne,He,de,Le=[],Ee=0;Ee<Ae.length&&!((we-=2)<0);++Ee)He=(Ne=Ae.charCodeAt(Ee))>>8,de=Ne%256,Le.push(de),Le.push(He);return Le}(le,ue.length-ie),ue,ie,ge)}function C(ue,le,ie){return le===0&&ie===ue.length?h.fromByteArray(ue):h.fromByteArray(ue.slice(le,ie))}function P(ue,le,ie){ie=Math.min(ue.length,ie);for(var ge=[],Ae=le;Ae<ie;){var we=ue[Ae],Ne=null,He=we>239?4:we>223?3:we>191?2:1;if(Ae+He<=ie){var de=void 0,Le=void 0,Ee=void 0,Re=void 0;switch(He){case 1:we<128&&(Ne=we);break;case 2:(192&(de=ue[Ae+1]))==128&&(Re=(31&we)<<6|63&de)>127&&(Ne=Re);break;case 3:de=ue[Ae+1],Le=ue[Ae+2],(192&de)==128&&(192&Le)==128&&(Re=(15&we)<<12|(63&de)<<6|63&Le)>2047&&(Re<55296||Re>57343)&&(Ne=Re);break;case 4:de=ue[Ae+1],Le=ue[Ae+2],Ee=ue[Ae+3],(192&de)==128&&(192&Le)==128&&(192&Ee)==128&&(Re=(15&we)<<18|(63&de)<<12|(63&Le)<<6|63&Ee)>65535&&Re<1114112&&(Ne=Re)}}Ne===null?(Ne=65533,He=1):Ne>65535&&(Ne-=65536,ge.push(Ne>>>10&1023|55296),Ne=56320|1023&Ne),ge.push(Ne),Ae+=He}return function(je){var Fe=je.length;if(Fe<=R)return String.fromCharCode.apply(String,je);for(var Xe="",Ze=0;Ze<Fe;)Xe+=String.fromCharCode.apply(String,je.slice(Ze,Ze+=R));return Xe}(ge)}L.kMaxLength=i,r.TYPED_ARRAY_SUPPORT=function(){try{var ue=new Uint8Array(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,Uint8Array.prototype),Object.setPrototypeOf(ue,le),ue.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(ue,le,ie){return s(ue,le,ie)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(ue,le,ie){return function(ge,Ae,we){return l(ge),ge<=0?n(ge):Ae!==void 0?typeof we=="string"?n(ge).fill(Ae,we):n(ge).fill(Ae):n(ge)}(ue,le,ie)},r.allocUnsafe=function(ue){return u(ue)},r.allocUnsafeSlow=function(ue){return u(ue)},r.isBuffer=function(ue){return ue!=null&&ue._isBuffer===!0&&ue!==r.prototype},r.compare=function(ue,le){if(pe(ue,Uint8Array)&&(ue=r.from(ue,ue.offset,ue.byteLength)),pe(le,Uint8Array)&&(le=r.from(le,le.offset,le.byteLength)),!r.isBuffer(ue)||!r.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ue===le)return 0;for(var ie=ue.length,ge=le.length,Ae=0,we=Math.min(ie,ge);Ae<we;++Ae)if(ue[Ae]!==le[Ae]){ie=ue[Ae],ge=le[Ae];break}return ie<ge?-1:ge<ie?1:0},r.isEncoding=function(ue){switch(String(ue).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(ue,le){if(!Array.isArray(ue))throw new TypeError('"list" argument must be an Array of Buffers');if(ue.length===0)return r.alloc(0);var ie;if(le===void 0)for(le=0,ie=0;ie<ue.length;++ie)le+=ue[ie].length;var ge=r.allocUnsafe(le),Ae=0;for(ie=0;ie<ue.length;++ie){var we=ue[ie];if(pe(we,Uint8Array))Ae+we.length>ge.length?(r.isBuffer(we)||(we=r.from(we)),we.copy(ge,Ae)):Uint8Array.prototype.set.call(ge,we,Ae);else{if(!r.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(ge,Ae)}Ae+=we.length}return ge},r.byteLength=m,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var ue=this.length;if(ue%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<ue;le+=2)x(this,le,le+1);return this},r.prototype.swap32=function(){var ue=this.length;if(ue%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<ue;le+=4)x(this,le,le+3),x(this,le+1,le+2);return this},r.prototype.swap64=function(){var ue=this.length;if(ue%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<ue;le+=8)x(this,le,le+7),x(this,le+1,le+6),x(this,le+2,le+5),x(this,le+3,le+4);return this},r.prototype.toString=function(){var ue=this.length;return ue===0?"":arguments.length===0?P(this,0,ue):f.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(ue){if(!r.isBuffer(ue))throw new TypeError("Argument must be a Buffer");return this===ue||r.compare(this,ue)===0},r.prototype.inspect=function(){var ue="",le=L.INSPECT_MAX_BYTES;return ue=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ue+=" ... "),"<Buffer "+ue+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(ue,le,ie,ge,Ae){if(pe(ue,Uint8Array)&&(ue=r.from(ue,ue.offset,ue.byteLength)),!r.isBuffer(ue))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+g(ue));if(le===void 0&&(le=0),ie===void 0&&(ie=ue?ue.length:0),ge===void 0&&(ge=0),Ae===void 0&&(Ae=this.length),le<0||ie>ue.length||ge<0||Ae>this.length)throw new RangeError("out of range index");if(ge>=Ae&&le>=ie)return 0;if(ge>=Ae)return-1;if(le>=ie)return 1;if(this===ue)return 0;for(var we=(Ae>>>=0)-(ge>>>=0),Ne=(ie>>>=0)-(le>>>=0),He=Math.min(we,Ne),de=this.slice(ge,Ae),Le=ue.slice(le,ie),Ee=0;Ee<He;++Ee)if(de[Ee]!==Le[Ee]){we=de[Ee],Ne=Le[Ee];break}return we<Ne?-1:Ne<we?1:0},r.prototype.includes=function(ue,le,ie){return this.indexOf(ue,le,ie)!==-1},r.prototype.indexOf=function(ue,le,ie){return y(this,ue,le,ie,!0)},r.prototype.lastIndexOf=function(ue,le,ie){return y(this,ue,le,ie,!1)},r.prototype.write=function(ue,le,ie,ge){if(le===void 0)ge="utf8",ie=this.length,le=0;else if(ie===void 0&&typeof le=="string")ge=le,ie=this.length,le=0;else{if(!isFinite(le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");le>>>=0,isFinite(ie)?(ie>>>=0,ge===void 0&&(ge="utf8")):(ge=ie,ie=void 0)}var Ae=this.length-le;if((ie===void 0||ie>Ae)&&(ie=Ae),ue.length>0&&(ie<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var we=!1;;)switch(ge){case"hex":return M(this,ue,le,ie);case"utf8":case"utf-8":return p(this,ue,le,ie);case"ascii":case"latin1":case"binary":return S(this,ue,le,ie);case"base64":return A(this,ue,le,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ue,le,ie);default:if(we)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),we=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function O(ue,le,ie){var ge="";ie=Math.min(ue.length,ie);for(var Ae=le;Ae<ie;++Ae)ge+=String.fromCharCode(127&ue[Ae]);return ge}function X(ue,le,ie){var ge="";ie=Math.min(ue.length,ie);for(var Ae=le;Ae<ie;++Ae)ge+=String.fromCharCode(ue[Ae]);return ge}function D(ue,le,ie){var ge=ue.length;(!le||le<0)&&(le=0),(!ie||ie<0||ie>ge)&&(ie=ge);for(var Ae="",we=le;we<ie;++we)Ae+=Oe[ue[we]];return Ae}function V(ue,le,ie){for(var ge=ue.slice(le,ie),Ae="",we=0;we<ge.length-1;we+=2)Ae+=String.fromCharCode(ge[we]+256*ge[we+1]);return Ae}function j(ue,le,ie){if(ue%1!=0||ue<0)throw new RangeError("offset is not uint");if(ue+le>ie)throw new RangeError("Trying to access beyond buffer length")}function B(ue,le,ie,ge,Ae,we){if(!r.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>Ae||le<we)throw new RangeError('"value" argument is out of bounds');if(ie+ge>ue.length)throw new RangeError("Index out of range")}function W(ue,le,ie,ge,Ae){ae(le,ge,Ae,ue,ie,7);var we=Number(le&BigInt(4294967295));ue[ie++]=we,we>>=8,ue[ie++]=we,we>>=8,ue[ie++]=we,we>>=8,ue[ie++]=we;var Ne=Number(le>>BigInt(32)&BigInt(4294967295));return ue[ie++]=Ne,Ne>>=8,ue[ie++]=Ne,Ne>>=8,ue[ie++]=Ne,Ne>>=8,ue[ie++]=Ne,ie}function q(ue,le,ie,ge,Ae){ae(le,ge,Ae,ue,ie,7);var we=Number(le&BigInt(4294967295));ue[ie+7]=we,we>>=8,ue[ie+6]=we,we>>=8,ue[ie+5]=we,we>>=8,ue[ie+4]=we;var Ne=Number(le>>BigInt(32)&BigInt(4294967295));return ue[ie+3]=Ne,Ne>>=8,ue[ie+2]=Ne,Ne>>=8,ue[ie+1]=Ne,Ne>>=8,ue[ie]=Ne,ie+8}function re(ue,le,ie,ge,Ae,we){if(ie+ge>ue.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function ee(ue,le,ie,ge,Ae){return le=+le,ie>>>=0,Ae||re(ue,0,ie,4),o.write(ue,le,ie,ge,23,4),ie+4}function K(ue,le,ie,ge,Ae){return le=+le,ie>>>=0,Ae||re(ue,0,ie,8),o.write(ue,le,ie,ge,52,8),ie+8}r.prototype.slice=function(ue,le){var ie=this.length;(ue=~~ue)<0?(ue+=ie)<0&&(ue=0):ue>ie&&(ue=ie),(le=le===void 0?ie:~~le)<0?(le+=ie)<0&&(le=0):le>ie&&(le=ie),le<ue&&(le=ue);var ge=this.subarray(ue,le);return Object.setPrototypeOf(ge,r.prototype),ge},r.prototype.readUintLE=r.prototype.readUIntLE=function(ue,le,ie){ue>>>=0,le>>>=0,ie||j(ue,le,this.length);for(var ge=this[ue],Ae=1,we=0;++we<le&&(Ae*=256);)ge+=this[ue+we]*Ae;return ge},r.prototype.readUintBE=r.prototype.readUIntBE=function(ue,le,ie){ue>>>=0,le>>>=0,ie||j(ue,le,this.length);for(var ge=this[ue+--le],Ae=1;le>0&&(Ae*=256);)ge+=this[ue+--le]*Ae;return ge},r.prototype.readUint8=r.prototype.readUInt8=function(ue,le){return ue>>>=0,le||j(ue,1,this.length),this[ue]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(ue,le){return ue>>>=0,le||j(ue,2,this.length),this[ue]|this[ue+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(ue,le){return ue>>>=0,le||j(ue,2,this.length),this[ue]<<8|this[ue+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),(this[ue]|this[ue+1]<<8|this[ue+2]<<16)+16777216*this[ue+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),16777216*this[ue]+(this[ue+1]<<16|this[ue+2]<<8|this[ue+3])},r.prototype.readBigUInt64LE=Se(function(ue){se(ue>>>=0,"offset");var le=this[ue],ie=this[ue+7];le!==void 0&&ie!==void 0||ce(ue,this.length-8);var ge=le+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,24),Ae=this[++ue]+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+ie*Math.pow(2,24);return BigInt(ge)+(BigInt(Ae)<<BigInt(32))}),r.prototype.readBigUInt64BE=Se(function(ue){se(ue>>>=0,"offset");var le=this[ue],ie=this[ue+7];le!==void 0&&ie!==void 0||ce(ue,this.length-8);var ge=le*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+this[++ue],Ae=this[++ue]*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+ie;return(BigInt(ge)<<BigInt(32))+BigInt(Ae)}),r.prototype.readIntLE=function(ue,le,ie){ue>>>=0,le>>>=0,ie||j(ue,le,this.length);for(var ge=this[ue],Ae=1,we=0;++we<le&&(Ae*=256);)ge+=this[ue+we]*Ae;return ge>=(Ae*=128)&&(ge-=Math.pow(2,8*le)),ge},r.prototype.readIntBE=function(ue,le,ie){ue>>>=0,le>>>=0,ie||j(ue,le,this.length);for(var ge=le,Ae=1,we=this[ue+--ge];ge>0&&(Ae*=256);)we+=this[ue+--ge]*Ae;return we>=(Ae*=128)&&(we-=Math.pow(2,8*le)),we},r.prototype.readInt8=function(ue,le){return ue>>>=0,le||j(ue,1,this.length),128&this[ue]?-1*(255-this[ue]+1):this[ue]},r.prototype.readInt16LE=function(ue,le){ue>>>=0,le||j(ue,2,this.length);var ie=this[ue]|this[ue+1]<<8;return 32768&ie?4294901760|ie:ie},r.prototype.readInt16BE=function(ue,le){ue>>>=0,le||j(ue,2,this.length);var ie=this[ue+1]|this[ue]<<8;return 32768&ie?4294901760|ie:ie},r.prototype.readInt32LE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),this[ue]|this[ue+1]<<8|this[ue+2]<<16|this[ue+3]<<24},r.prototype.readInt32BE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),this[ue]<<24|this[ue+1]<<16|this[ue+2]<<8|this[ue+3]},r.prototype.readBigInt64LE=Se(function(ue){se(ue>>>=0,"offset");var le=this[ue],ie=this[ue+7];le!==void 0&&ie!==void 0||ce(ue,this.length-8);var ge=this[ue+4]+this[ue+5]*Math.pow(2,8)+this[ue+6]*Math.pow(2,16)+(ie<<24);return(BigInt(ge)<<BigInt(32))+BigInt(le+this[++ue]*Math.pow(2,8)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,24))}),r.prototype.readBigInt64BE=Se(function(ue){se(ue>>>=0,"offset");var le=this[ue],ie=this[ue+7];le!==void 0&&ie!==void 0||ce(ue,this.length-8);var ge=(le<<24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+this[++ue];return(BigInt(ge)<<BigInt(32))+BigInt(this[++ue]*Math.pow(2,24)+this[++ue]*Math.pow(2,16)+this[++ue]*Math.pow(2,8)+ie)}),r.prototype.readFloatLE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),o.read(this,ue,!0,23,4)},r.prototype.readFloatBE=function(ue,le){return ue>>>=0,le||j(ue,4,this.length),o.read(this,ue,!1,23,4)},r.prototype.readDoubleLE=function(ue,le){return ue>>>=0,le||j(ue,8,this.length),o.read(this,ue,!0,52,8)},r.prototype.readDoubleBE=function(ue,le){return ue>>>=0,le||j(ue,8,this.length),o.read(this,ue,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(ue,le,ie,ge){ue=+ue,le>>>=0,ie>>>=0,ge||B(this,ue,le,ie,Math.pow(2,8*ie)-1,0);var Ae=1,we=0;for(this[le]=255&ue;++we<ie&&(Ae*=256);)this[le+we]=ue/Ae&255;return le+ie},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(ue,le,ie,ge){ue=+ue,le>>>=0,ie>>>=0,ge||B(this,ue,le,ie,Math.pow(2,8*ie)-1,0);var Ae=ie-1,we=1;for(this[le+Ae]=255&ue;--Ae>=0&&(we*=256);)this[le+Ae]=ue/we&255;return le+ie},r.prototype.writeUint8=r.prototype.writeUInt8=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,1,255,0),this[le]=255&ue,le+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,2,65535,0),this[le]=255&ue,this[le+1]=ue>>>8,le+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,2,65535,0),this[le]=ue>>>8,this[le+1]=255&ue,le+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,4,4294967295,0),this[le+3]=ue>>>24,this[le+2]=ue>>>16,this[le+1]=ue>>>8,this[le]=255&ue,le+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,4,4294967295,0),this[le]=ue>>>24,this[le+1]=ue>>>16,this[le+2]=ue>>>8,this[le+3]=255&ue,le+4},r.prototype.writeBigUInt64LE=Se(function(ue){return W(this,ue,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=Se(function(ue){return q(this,ue,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(ue,le,ie,ge){if(ue=+ue,le>>>=0,!ge){var Ae=Math.pow(2,8*ie-1);B(this,ue,le,ie,Ae-1,-Ae)}var we=0,Ne=1,He=0;for(this[le]=255&ue;++we<ie&&(Ne*=256);)ue<0&&He===0&&this[le+we-1]!==0&&(He=1),this[le+we]=(ue/Ne>>0)-He&255;return le+ie},r.prototype.writeIntBE=function(ue,le,ie,ge){if(ue=+ue,le>>>=0,!ge){var Ae=Math.pow(2,8*ie-1);B(this,ue,le,ie,Ae-1,-Ae)}var we=ie-1,Ne=1,He=0;for(this[le+we]=255&ue;--we>=0&&(Ne*=256);)ue<0&&He===0&&this[le+we+1]!==0&&(He=1),this[le+we]=(ue/Ne>>0)-He&255;return le+ie},r.prototype.writeInt8=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,1,127,-128),ue<0&&(ue=255+ue+1),this[le]=255&ue,le+1},r.prototype.writeInt16LE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,2,32767,-32768),this[le]=255&ue,this[le+1]=ue>>>8,le+2},r.prototype.writeInt16BE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,2,32767,-32768),this[le]=ue>>>8,this[le+1]=255&ue,le+2},r.prototype.writeInt32LE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,4,2147483647,-2147483648),this[le]=255&ue,this[le+1]=ue>>>8,this[le+2]=ue>>>16,this[le+3]=ue>>>24,le+4},r.prototype.writeInt32BE=function(ue,le,ie){return ue=+ue,le>>>=0,ie||B(this,ue,le,4,2147483647,-2147483648),ue<0&&(ue=4294967295+ue+1),this[le]=ue>>>24,this[le+1]=ue>>>16,this[le+2]=ue>>>8,this[le+3]=255&ue,le+4},r.prototype.writeBigInt64LE=Se(function(ue){return W(this,ue,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=Se(function(ue){return q(this,ue,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(ue,le,ie){return ee(this,ue,le,!0,ie)},r.prototype.writeFloatBE=function(ue,le,ie){return ee(this,ue,le,!1,ie)},r.prototype.writeDoubleLE=function(ue,le,ie){return K(this,ue,le,!0,ie)},r.prototype.writeDoubleBE=function(ue,le,ie){return K(this,ue,le,!1,ie)},r.prototype.copy=function(ue,le,ie,ge){if(!r.isBuffer(ue))throw new TypeError("argument should be a Buffer");if(ie||(ie=0),ge||ge===0||(ge=this.length),le>=ue.length&&(le=ue.length),le||(le=0),ge>0&&ge<ie&&(ge=ie),ge===ie||ue.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),ue.length-le<ge-ie&&(ge=ue.length-le+ie);var Ae=ge-ie;return this===ue&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,ie,ge):Uint8Array.prototype.set.call(ue,this.subarray(ie,ge),le),Ae},r.prototype.fill=function(ue,le,ie,ge){if(typeof ue=="string"){if(typeof le=="string"?(ge=le,le=0,ie=this.length):typeof ie=="string"&&(ge=ie,ie=this.length),ge!==void 0&&typeof ge!="string")throw new TypeError("encoding must be a string");if(typeof ge=="string"&&!r.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(ue.length===1){var Ae=ue.charCodeAt(0);(ge==="utf8"&&Ae<128||ge==="latin1")&&(ue=Ae)}}else typeof ue=="number"?ue&=255:typeof ue=="boolean"&&(ue=Number(ue));if(le<0||this.length<le||this.length<ie)throw new RangeError("Out of range index");if(ie<=le)return this;var we;if(le>>>=0,ie=ie===void 0?this.length:ie>>>0,ue||(ue=0),typeof ue=="number")for(we=le;we<ie;++we)this[we]=ue;else{var Ne=r.isBuffer(ue)?ue:r.from(ue,ge),He=Ne.length;if(He===0)throw new TypeError('The value "'+ue+'" is invalid for argument "value"');for(we=0;we<ie-le;++we)this[we+le]=Ne[we%He]}return this};var Y={};function $(ue,le,ie){Y[ue]=function(ge){(function(Ee,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function");Ee.prototype=Object.create(Re&&Re.prototype,{constructor:{value:Ee,writable:!0,configurable:!0}}),Object.defineProperty(Ee,"prototype",{writable:!1}),Re&&b(Ee,Re)})(Le,ge);var Ae,we,Ne,He,de=(Ne=Le,He=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ee,Re=_(Ne);if(He){var je=_(this).constructor;Ee=Reflect.construct(Re,arguments,je)}else Ee=Re.apply(this,arguments);return function(Fe,Xe){if(Xe&&(g(Xe)==="object"||typeof Xe=="function"))return Xe;if(Xe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(Fe)}(this,Ee)});function Le(){var Ee;return function(Re,je){if(!(Re instanceof je))throw new TypeError("Cannot call a class as a function")}(this,Le),Ee=de.call(this),Object.defineProperty(a(Ee),"message",{value:le.apply(a(Ee),arguments),writable:!0,configurable:!0}),Ee.name="".concat(Ee.name," [").concat(ue,"]"),Ee.stack,delete Ee.name,Ee}return Ae=Le,(we=[{key:"code",get:function(){return ue},set:function(Ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ee,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ue,"]: ").concat(this.message)}}])&&T(Ae.prototype,we),Object.defineProperty(Ae,"prototype",{writable:!1}),Le}(ie)}function ne(ue){for(var le="",ie=ue.length,ge=ue[0]==="-"?1:0;ie>=ge+4;ie-=3)le="_".concat(ue.slice(ie-3,ie)).concat(le);return"".concat(ue.slice(0,ie)).concat(le)}function ae(ue,le,ie,ge,Ae,we){if(ue>ie||ue<le){var Ne,He=typeof le=="bigint"?"n":"";throw Ne=we>3?le===0||le===BigInt(0)?">= 0".concat(He," and < 2").concat(He," ** ").concat(8*(we+1)).concat(He):">= -(2".concat(He," ** ").concat(8*(we+1)-1).concat(He,") and < 2 ** ")+"".concat(8*(we+1)-1).concat(He):">= ".concat(le).concat(He," and <= ").concat(ie).concat(He),new Y.ERR_OUT_OF_RANGE("value",Ne,ue)}(function(de,Le,Ee){se(Le,"offset"),de[Le]!==void 0&&de[Le+Ee]!==void 0||ce(Le,de.length-(Ee+1))})(ge,Ae,we)}function se(ue,le){if(typeof ue!="number")throw new Y.ERR_INVALID_ARG_TYPE(le,"number",ue)}function ce(ue,le,ie){throw Math.floor(ue)!==ue?(se(ue,ie),new Y.ERR_OUT_OF_RANGE(ie||"offset","an integer",ue)):le<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE(ie||"offset",">= ".concat(ie?1:0," and <= ").concat(le),ue)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?"".concat(ue," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(ue,le){return'The "'.concat(ue,'" argument must be of type number. Received type ').concat(g(le))},TypeError),$("ERR_OUT_OF_RANGE",function(ue,le,ie){var ge='The value of "'.concat(ue,'" is out of range.'),Ae=ie;return Number.isInteger(ie)&&Math.abs(ie)>Math.pow(2,32)?Ae=ne(String(ie)):typeof ie=="bigint"&&(Ae=String(ie),(ie>Math.pow(BigInt(2),BigInt(32))||ie<-Math.pow(BigInt(2),BigInt(32)))&&(Ae=ne(Ae)),Ae+="n"),ge+" It must be ".concat(le,". Received ").concat(Ae)},RangeError);var me=/[^+/0-9A-Za-z-_]/g;function ye(ue,le){var ie;le=le||1/0;for(var ge=ue.length,Ae=null,we=[],Ne=0;Ne<ge;++Ne){if((ie=ue.charCodeAt(Ne))>55295&&ie<57344){if(!Ae){if(ie>56319){(le-=3)>-1&&we.push(239,191,189);continue}if(Ne+1===ge){(le-=3)>-1&&we.push(239,191,189);continue}Ae=ie;continue}if(ie<56320){(le-=3)>-1&&we.push(239,191,189),Ae=ie;continue}ie=65536+(Ae-55296<<10|ie-56320)}else Ae&&(le-=3)>-1&&we.push(239,191,189);if(Ae=null,ie<128){if((le-=1)<0)break;we.push(ie)}else if(ie<2048){if((le-=2)<0)break;we.push(ie>>6|192,63&ie|128)}else if(ie<65536){if((le-=3)<0)break;we.push(ie>>12|224,ie>>6&63|128,63&ie|128)}else{if(!(ie<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;we.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}}return we}function Te(ue){return h.toByteArray(function(le){if((le=(le=le.split("=")[0]).trim().replace(me,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(ue))}function Ce(ue,le,ie,ge){var Ae;for(Ae=0;Ae<ge&&!(Ae+ie>=le.length||Ae>=ue.length);++Ae)le[Ae+ie]=ue[Ae];return Ae}function pe(ue,le){return ue instanceof le||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===le.name}function fe(ue){return ue!=ue}var Oe=function(){for(var ue="0123456789abcdef",le=new Array(256),ie=0;ie<16;++ie)for(var ge=16*ie,Ae=0;Ae<16;++Ae)le[ge+Ae]=ue[ie]+ue[Ae];return le}();function Se(ue){return typeof BigInt>"u"?Me:ue}function Me(){throw new Error("BigInt not supported")}},35791:function(F){F.exports=b,F.exports.isMobile=b,F.exports.default=b;var L=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,T=/android|ipad|playbook|silk/i;function b(a){a||(a={});var _=a.ua;if(_||typeof navigator>"u"||(_=navigator.userAgent),_&&_.headers&&typeof _.headers["user-agent"]=="string"&&(_=_.headers["user-agent"]),typeof _!="string")return!1;var g=L.test(_)&&!e.test(_)||!!a.tablet&&T.test(_);return!g&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&_.indexOf("Macintosh")!==-1&&_.indexOf("Safari")!==-1&&(g=!0),g}},86781:function(F,L,e){e.r(L),e.d(L,{sankeyCenter:function(){return n},sankeyCircular:function(){return C},sankeyJustify:function(){return i},sankeyLeft:function(){return o},sankeyRight:function(){return t}});var T=e(33064),b=e(15140),a=e(45879),_=e(2502),g=e.n(_);function h(Ce){return Ce.target.depth}function o(Ce){return Ce.depth}function t(Ce,pe){return pe-1-Ce.height}function i(Ce,pe){return Ce.sourceLinks.length?Ce.depth:pe-1}function n(Ce){return Ce.targetLinks.length?Ce.depth:Ce.sourceLinks.length?(0,T.VV)(Ce.sourceLinks,h)-1:0}function r(Ce){return function(){return Ce}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ce){return typeof Ce}:function(Ce){return Ce&&typeof Symbol=="function"&&Ce.constructor===Symbol&&Ce!==Symbol.prototype?"symbol":typeof Ce};function l(Ce,pe){return d(Ce.source,pe.source)||Ce.index-pe.index}function u(Ce,pe){return d(Ce.target,pe.target)||Ce.index-pe.index}function d(Ce,pe){return Ce.partOfCycle===pe.partOfCycle?Ce.y0-pe.y0:Ce.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function c(Ce){return Ce.value}function w(Ce){return(Ce.y0+Ce.y1)/2}function m(Ce){return w(Ce.source)}function f(Ce){return w(Ce.target)}function x(Ce){return Ce.index}function y(Ce){return Ce.nodes}function v(Ce){return Ce.links}function M(Ce,pe){var fe=Ce.get(pe);if(!fe)throw new Error("missing: "+pe);return fe}function p(Ce,pe){return pe(Ce)}var S=25,A=10,k=.3;function C(){var Ce,pe,fe=0,Oe=0,Se=1,Me=1,ue=24,le=x,ie=i,ge=y,Ae=v,we=32,Ne=2,He=null;function de(){var Ee={nodes:ge.apply(null,arguments),links:Ae.apply(null,arguments)};(function(je){je.nodes.forEach(function(Xe,Ze){Xe.index=Ze,Xe.sourceLinks=[],Xe.targetLinks=[]});var Fe=(0,b.UI)(je.nodes,le);je.links.forEach(function(Xe,Ze){Xe.index=Ze;var at=Xe.source,lt=Xe.target;(at===void 0?"undefined":s(at))!=="object"&&(at=Xe.source=M(Fe,at)),(lt===void 0?"undefined":s(lt))!=="object"&&(lt=Xe.target=M(Fe,lt)),at.sourceLinks.push(Xe),lt.targetLinks.push(Xe)})})(Ee),function(je,Fe,Xe){var Ze=0;if(Xe===null){for(var at=[],lt=0;lt<je.links.length;lt++){var ot=je.links[lt],bt=ot.source.index,wt=ot.target.index;at[bt]||(at[bt]=[]),at[wt]||(at[wt]=[]),at[bt].indexOf(wt)===-1&&at[bt].push(wt)}var ht=g()(at);ht.sort(function(Lt,kt){return Lt.length-kt.length});var ct={};for(lt=0;lt<ht.length;lt++){var Tt=ht[lt].slice(-2);ct[Tt[0]]||(ct[Tt[0]]={}),ct[Tt[0]][Tt[1]]=!0}je.links.forEach(function(Lt){var kt=Lt.target.index,Ot=Lt.source.index;kt===Ot||ct[Ot]&&ct[Ot][kt]?(Lt.circular=!0,Lt.circularLinkID=Ze,Ze+=1):Lt.circular=!1})}else je.links.forEach(function(Lt){Lt.source[Xe]<Lt.target[Xe]?Lt.circular=!1:(Lt.circular=!0,Lt.circularLinkID=Ze,Ze+=1)})}(Ee,0,He),function(je){je.nodes.forEach(function(Fe){Fe.partOfCycle=!1,Fe.value=Math.max((0,T.Sm)(Fe.sourceLinks,c),(0,T.Sm)(Fe.targetLinks,c)),Fe.sourceLinks.forEach(function(Xe){Xe.circular&&(Fe.partOfCycle=!0,Fe.circularLinkType=Xe.circularLinkType)}),Fe.targetLinks.forEach(function(Xe){Xe.circular&&(Fe.partOfCycle=!0,Fe.circularLinkType=Xe.circularLinkType)})})}(Ee),function(je){var Fe,Xe,Ze;for(Fe=je.nodes,Xe=[],Ze=0;Fe.length;++Ze,Fe=Xe,Xe=[])Fe.forEach(function(at){at.depth=Ze,at.sourceLinks.forEach(function(lt){Xe.indexOf(lt.target)<0&&!lt.circular&&Xe.push(lt.target)})});for(Fe=je.nodes,Xe=[],Ze=0;Fe.length;++Ze,Fe=Xe,Xe=[])Fe.forEach(function(at){at.height=Ze,at.targetLinks.forEach(function(lt){Xe.indexOf(lt.source)<0&&!lt.circular&&Xe.push(lt.source)})});je.nodes.forEach(function(at){at.column=Math.floor(ie.call(null,at,Ze))})}(Ee),P(Ee,le),function(je,Fe,Xe){var Ze=(0,b.b1)().key(function(wt){return wt.column}).sortKeys(T.j2).entries(je.nodes).map(function(wt){return wt.values});(function(wt){if(pe){var ht=1/0;Ze.forEach(function(kt){var Ot=Me*pe/(kt.length+1);ht=Ot<ht?Ot:ht}),Ce=ht}var ct=(0,T.VV)(Ze,function(kt){return(Me-Oe-(kt.length-1)*Ce)/(0,T.Sm)(kt,c)});ct*=k,je.links.forEach(function(kt){kt.width=kt.value*ct});var Tt=function(kt){var Ot=0,Pt=0,et=0,nt=0,Ye=(0,T.Fp)(kt.nodes,function(tt){return tt.column});return kt.links.forEach(function(tt){tt.circular&&(tt.circularLinkType=="top"?Ot+=tt.width:Pt+=tt.width,tt.target.column==0&&(nt+=tt.width),tt.source.column==Ye&&(et+=tt.width))}),{top:Ot=Ot>0?Ot+S+A:Ot,bottom:Pt=Pt>0?Pt+S+A:Pt,left:nt=nt>0?nt+S+A:nt,right:et=et>0?et+S+A:et}}(je),Lt=function(kt,Ot){var Pt=(0,T.Fp)(kt.nodes,function(ut){return ut.column}),et=Se-fe,nt=Me-Oe,Ye=et/(et+Ot.right+Ot.left),tt=nt/(nt+Ot.top+Ot.bottom);return fe=fe*Ye+Ot.left,Se=Ot.right==0?Se:Se*Ye,Oe=Oe*tt+Ot.top,Me*=tt,kt.nodes.forEach(function(ut){ut.x0=fe+ut.column*((Se-fe-ue)/Pt),ut.x1=ut.x0+ue}),tt}(je,Tt);ct*=Lt,je.links.forEach(function(kt){kt.width=kt.value*ct}),Ze.forEach(function(kt){var Ot=kt.length;kt.forEach(function(Pt,et){Pt.depth==Ze.length-1&&Ot==1||Pt.depth==0&&Ot==1?(Pt.y0=Me/2-Pt.value*ct,Pt.y1=Pt.y0+Pt.value*ct):Pt.partOfCycle?O(Pt,wt)==0?(Pt.y0=Me/2+et,Pt.y1=Pt.y0+Pt.value*ct):Pt.circularLinkType=="top"?(Pt.y0=Oe+et,Pt.y1=Pt.y0+Pt.value*ct):(Pt.y0=Me-Pt.value*ct-et,Pt.y1=Pt.y0+Pt.value*ct):Tt.top==0||Tt.bottom==0?(Pt.y0=(Me-Oe)/Ot*et,Pt.y1=Pt.y0+Pt.value*ct):(Pt.y0=(Me-Oe)/2-Ot/2+et,Pt.y1=Pt.y0+Pt.value*ct)})})})(Xe),bt();for(var at=1,lt=Fe;lt>0;--lt)ot(at*=.99,Xe),bt();function ot(wt,ht){var ct=Ze.length;Ze.forEach(function(Tt){var Lt=Tt.length,kt=Tt[0].depth;Tt.forEach(function(Ot){var Pt;if((Ot.sourceLinks.length||Ot.targetLinks.length)&&!(Ot.partOfCycle&&O(Ot,ht)>0))if(kt==0&&Lt==1)Pt=Ot.y1-Ot.y0,Ot.y0=Me/2-Pt/2,Ot.y1=Me/2+Pt/2;else if(kt==ct-1&&Lt==1)Pt=Ot.y1-Ot.y0,Ot.y0=Me/2-Pt/2,Ot.y1=Me/2+Pt/2;else{var et=(0,T.J6)(Ot.sourceLinks,f),nt=(0,T.J6)(Ot.targetLinks,m),Ye=((et&&nt?(et+nt)/2:et||nt)-w(Ot))*wt;Ot.y0+=Ye,Ot.y1+=Ye}})})}function bt(){Ze.forEach(function(wt){var ht,ct,Tt,Lt=Oe,kt=wt.length;for(wt.sort(d),Tt=0;Tt<kt;++Tt)(ct=Lt-(ht=wt[Tt]).y0)>0&&(ht.y0+=ct,ht.y1+=ct),Lt=ht.y1+Ce;if((ct=Lt-Ce-Me)>0)for(Lt=ht.y0-=ct,ht.y1-=ct,Tt=kt-2;Tt>=0;--Tt)(ct=(ht=wt[Tt]).y1+Ce-Lt)>0&&(ht.y0-=ct,ht.y1-=ct),Lt=ht.y0})}}(Ee,we,le),Le(Ee);for(var Re=0;Re<4;Re++)se(Ee,Me,le),ce(Ee,0,le),ne(Ee,Oe,Me,le),se(Ee,Me,le),ce(Ee,0,le);return function(je,Fe,Xe){var Ze=je.nodes,at=je.links,lt=!1,ot=!1;if(at.forEach(function(ht){ht.circularLinkType=="top"?lt=!0:ht.circularLinkType=="bottom"&&(ot=!0)}),lt==0||ot==0){var bt=(0,T.VV)(Ze,function(ht){return ht.y0}),wt=(Xe-Fe)/((0,T.Fp)(Ze,function(ht){return ht.y1})-bt);Ze.forEach(function(ht){var ct=(ht.y1-ht.y0)*wt;ht.y0=(ht.y0-bt)*wt,ht.y1=ht.y0+ct}),at.forEach(function(ht){ht.y0=(ht.y0-bt)*wt,ht.y1=(ht.y1-bt)*wt,ht.width=ht.width*wt})}}(Ee,Oe,Me),V(Ee,Ne,Me,le),Ee}function Le(Ee){Ee.nodes.forEach(function(Re){Re.sourceLinks.sort(u),Re.targetLinks.sort(l)}),Ee.nodes.forEach(function(Re){var je=Re.y0,Fe=je,Xe=Re.y1,Ze=Xe;Re.sourceLinks.forEach(function(at){at.circular?(at.y0=Xe-at.width/2,Xe-=at.width):(at.y0=je+at.width/2,je+=at.width)}),Re.targetLinks.forEach(function(at){at.circular?(at.y1=Ze-at.width/2,Ze-=at.width):(at.y1=Fe+at.width/2,Fe+=at.width)})})}return de.nodeId=function(Ee){return arguments.length?(le=typeof Ee=="function"?Ee:r(Ee),de):le},de.nodeAlign=function(Ee){return arguments.length?(ie=typeof Ee=="function"?Ee:r(Ee),de):ie},de.nodeWidth=function(Ee){return arguments.length?(ue=+Ee,de):ue},de.nodePadding=function(Ee){return arguments.length?(Ce=+Ee,de):Ce},de.nodes=function(Ee){return arguments.length?(ge=typeof Ee=="function"?Ee:r(Ee),de):ge},de.links=function(Ee){return arguments.length?(Ae=typeof Ee=="function"?Ee:r(Ee),de):Ae},de.size=function(Ee){return arguments.length?(fe=Oe=0,Se=+Ee[0],Me=+Ee[1],de):[Se-fe,Me-Oe]},de.extent=function(Ee){return arguments.length?(fe=+Ee[0][0],Se=+Ee[1][0],Oe=+Ee[0][1],Me=+Ee[1][1],de):[[fe,Oe],[Se,Me]]},de.iterations=function(Ee){return arguments.length?(we=+Ee,de):we},de.circularLinkGap=function(Ee){return arguments.length?(Ne=+Ee,de):Ne},de.nodePaddingRatio=function(Ee){return arguments.length?(pe=+Ee,de):pe},de.sortNodes=function(Ee){return arguments.length?(He=Ee,de):He},de.update=function(Ee){return P(Ee,le),Le(Ee),Ee.links.forEach(function(Re){Re.circular&&(Re.circularLinkType=Re.y0+Re.y1<Me?"top":"bottom",Re.source.circularLinkType=Re.circularLinkType,Re.target.circularLinkType=Re.circularLinkType)}),se(Ee,Me,le,!1),ce(Ee,0,le),V(Ee,Ne,Me,le),Ee},de}function P(Ce,pe){var fe=0,Oe=0;Ce.links.forEach(function(Se){Se.circular&&(Se.source.circularLinkType||Se.target.circularLinkType?Se.circularLinkType=Se.source.circularLinkType?Se.source.circularLinkType:Se.target.circularLinkType:Se.circularLinkType=fe<Oe?"top":"bottom",Se.circularLinkType=="top"?fe+=1:Oe+=1,Ce.nodes.forEach(function(Me){p(Me,pe)!=p(Se.source,pe)&&p(Me,pe)!=p(Se.target,pe)||(Me.circularLinkType=Se.circularLinkType)}))}),Ce.links.forEach(function(Se){Se.circular&&(Se.source.circularLinkType==Se.target.circularLinkType&&(Se.circularLinkType=Se.source.circularLinkType),Te(Se,pe)&&(Se.circularLinkType=Se.source.circularLinkType))})}function R(Ce){var pe=Math.abs(Ce.y1-Ce.y0),fe=Math.abs(Ce.target.x0-Ce.source.x1);return Math.atan(fe/pe)}function O(Ce,pe){var fe=0;Ce.sourceLinks.forEach(function(Se){fe=Se.circular&&!Te(Se,pe)?fe+1:fe});var Oe=0;return Ce.targetLinks.forEach(function(Se){Oe=Se.circular&&!Te(Se,pe)?Oe+1:Oe}),fe+Oe}function X(Ce){var pe=Ce.source.sourceLinks,fe=0;pe.forEach(function(Me){fe=Me.circular?fe+1:fe});var Oe=Ce.target.targetLinks,Se=0;return Oe.forEach(function(Me){Se=Me.circular?Se+1:Se}),!(fe>1||Se>1)}function D(Ce,pe,fe){return Ce.sort(j),Ce.forEach(function(Oe,Se){var Me,ue,le=0;if(Te(Oe,fe)&&X(Oe))Oe.circularPathData.verticalBuffer=le+Oe.width/2;else{for(var ie=0;ie<Se;ie++)if(Me=Ce[Se],ue=Ce[ie],!(Me.source.column<ue.target.column||Me.target.column>ue.source.column)){var ge=Ce[ie].circularPathData.verticalBuffer+Ce[ie].width/2+pe;le=ge>le?ge:le}Oe.circularPathData.verticalBuffer=le+Oe.width/2}}),Ce}function V(Ce,pe,fe,Oe){var Se=(0,T.VV)(Ce.links,function(Me){return Me.source.y0});Ce.links.forEach(function(Me){Me.circular&&(Me.circularPathData={})}),D(Ce.links.filter(function(Me){return Me.circularLinkType=="top"}),pe,Oe),D(Ce.links.filter(function(Me){return Me.circularLinkType=="bottom"}),pe,Oe),Ce.links.forEach(function(Me){if(Me.circular){if(Me.circularPathData.arcRadius=Me.width+A,Me.circularPathData.leftNodeBuffer=5,Me.circularPathData.rightNodeBuffer=5,Me.circularPathData.sourceWidth=Me.source.x1-Me.source.x0,Me.circularPathData.sourceX=Me.source.x0+Me.circularPathData.sourceWidth,Me.circularPathData.targetX=Me.target.x0,Me.circularPathData.sourceY=Me.y0,Me.circularPathData.targetY=Me.y1,Te(Me,Oe)&&X(Me))Me.circularPathData.leftSmallArcRadius=A+Me.width/2,Me.circularPathData.leftLargeArcRadius=A+Me.width/2,Me.circularPathData.rightSmallArcRadius=A+Me.width/2,Me.circularPathData.rightLargeArcRadius=A+Me.width/2,Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Me.source.y1+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=Me.source.y0-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius);else{var ue=Me.source.column,le=Me.circularLinkType,ie=Ce.links.filter(function(we){return we.source.column==ue&&we.circularLinkType==le});Me.circularLinkType=="bottom"?ie.sort(W):ie.sort(B);var ge=0;ie.forEach(function(we,Ne){we.circularLinkID==Me.circularLinkID&&(Me.circularPathData.leftSmallArcRadius=A+Me.width/2+ge,Me.circularPathData.leftLargeArcRadius=A+Me.width/2+Ne*pe+ge),ge+=we.width}),ue=Me.target.column,ie=Ce.links.filter(function(we){return we.target.column==ue&&we.circularLinkType==le}),Me.circularLinkType=="bottom"?ie.sort(re):ie.sort(q),ge=0,ie.forEach(function(we,Ne){we.circularLinkID==Me.circularLinkID&&(Me.circularPathData.rightSmallArcRadius=A+Me.width/2+ge,Me.circularPathData.rightLargeArcRadius=A+Me.width/2+Ne*pe+ge),ge+=we.width}),Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Math.max(fe,Me.source.y1,Me.target.y1)+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=Se-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius)}Me.circularPathData.leftInnerExtent=Me.circularPathData.sourceX+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightInnerExtent=Me.circularPathData.targetX-Me.circularPathData.rightNodeBuffer,Me.circularPathData.leftFullExtent=Me.circularPathData.sourceX+Me.circularPathData.leftLargeArcRadius+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightFullExtent=Me.circularPathData.targetX-Me.circularPathData.rightLargeArcRadius-Me.circularPathData.rightNodeBuffer}if(Me.circular)Me.path=function(we){return we.circularLinkType=="top"?"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY}(Me);else{var Ae=(0,a.h5)().source(function(we){return[we.source.x0+(we.source.x1-we.source.x0),we.y0]}).target(function(we){return[we.target.x0,we.y1]});Me.path=Ae(Me)}})}function j(Ce,pe){return ee(Ce)==ee(pe)?Ce.circularLinkType=="bottom"?W(Ce,pe):B(Ce,pe):ee(pe)-ee(Ce)}function B(Ce,pe){return Ce.y0-pe.y0}function W(Ce,pe){return pe.y0-Ce.y0}function q(Ce,pe){return Ce.y1-pe.y1}function re(Ce,pe){return pe.y1-Ce.y1}function ee(Ce){return Ce.target.column-Ce.source.column}function K(Ce){return Ce.target.x0-Ce.source.x1}function Y(Ce,pe){var fe=R(Ce),Oe=K(pe)/Math.tan(fe);return ye(Ce)=="up"?Ce.y1+Oe:Ce.y1-Oe}function $(Ce,pe){var fe=R(Ce),Oe=K(pe)/Math.tan(fe);return ye(Ce)=="up"?Ce.y1-Oe:Ce.y1+Oe}function ne(Ce,pe,fe,Oe){Ce.links.forEach(function(Se){if(!Se.circular&&Se.target.column-Se.source.column>1){var Me=Se.source.column+1,ue=Se.target.column-1,le=1,ie=ue-Me+1;for(le=1;Me<=ue;Me++,le++)Ce.nodes.forEach(function(ge){if(ge.column==Me){var Ae,we=le/(ie+1),Ne=Math.pow(1-we,3),He=3*we*Math.pow(1-we,2),de=3*Math.pow(we,2)*(1-we),Le=Math.pow(we,3),Ee=Ne*Se.y0+He*Se.y0+de*Se.y1+Le*Se.y1,Re=Ee-Se.width/2,je=Ee+Se.width/2;Re>ge.y0&&Re<ge.y1?(Ae=ge.y1-Re+10,Ae=ge.circularLinkType=="bottom"?Ae:-Ae,ge=ae(ge,Ae,pe,fe),Ce.nodes.forEach(function(Fe){var Xe,Ze;p(Fe,Oe)!=p(ge,Oe)&&Fe.column==ge.column&&(Ze=Fe,(Xe=ge).y0>Ze.y0&&Xe.y0<Ze.y1||Xe.y1>Ze.y0&&Xe.y1<Ze.y1||Xe.y0<Ze.y0&&Xe.y1>Ze.y1)&&ae(Fe,Ae,pe,fe)})):(je>ge.y0&&je<ge.y1||Re<ge.y0&&je>ge.y1)&&(Ae=je-ge.y0+10,ge=ae(ge,Ae,pe,fe),Ce.nodes.forEach(function(Fe){p(Fe,Oe)!=p(ge,Oe)&&Fe.column==ge.column&&Fe.y0<ge.y1&&Fe.y1>ge.y1&&ae(Fe,Ae,pe,fe)}))}})}})}function ae(Ce,pe,fe,Oe){return Ce.y0+pe>=fe&&Ce.y1+pe<=Oe&&(Ce.y0=Ce.y0+pe,Ce.y1=Ce.y1+pe,Ce.targetLinks.forEach(function(Se){Se.y1=Se.y1+pe}),Ce.sourceLinks.forEach(function(Se){Se.y0=Se.y0+pe})),Ce}function se(Ce,pe,fe,Oe){Ce.nodes.forEach(function(Se){Oe&&Se.y+(Se.y1-Se.y0)>pe&&(Se.y=Se.y-(Se.y+(Se.y1-Se.y0)-pe));var Me=Ce.links.filter(function(ie){return p(ie.source,fe)==p(Se,fe)}),ue=Me.length;ue>1&&Me.sort(function(ie,ge){if(!ie.circular&&!ge.circular){if(ie.target.column==ge.target.column||!me(ie,ge))return ie.y1-ge.y1;if(ie.target.column>ge.target.column){var Ae=$(ge,ie);return ie.y1-Ae}if(ge.target.column>ie.target.column)return $(ie,ge)-ge.y1}return ie.circular&&!ge.circular?ie.circularLinkType=="top"?-1:1:ge.circular&&!ie.circular?ge.circularLinkType=="top"?1:-1:ie.circular&&ge.circular?ie.circularLinkType===ge.circularLinkType&&ie.circularLinkType=="top"?ie.target.column===ge.target.column?ie.target.y1-ge.target.y1:ge.target.column-ie.target.column:ie.circularLinkType===ge.circularLinkType&&ie.circularLinkType=="bottom"?ie.target.column===ge.target.column?ge.target.y1-ie.target.y1:ie.target.column-ge.target.column:ie.circularLinkType=="top"?-1:1:void 0});var le=Se.y0;Me.forEach(function(ie){ie.y0=le+ie.width/2,le+=ie.width}),Me.forEach(function(ie,ge){if(ie.circularLinkType=="bottom"){for(var Ae=ge+1,we=0;Ae<ue;Ae++)we+=Me[Ae].width;ie.y0=Se.y1-we-ie.width/2}})})}function ce(Ce,pe,fe){Ce.nodes.forEach(function(Oe){var Se=Ce.links.filter(function(le){return p(le.target,fe)==p(Oe,fe)}),Me=Se.length;Me>1&&Se.sort(function(le,ie){if(!le.circular&&!ie.circular){if(le.source.column==ie.source.column||!me(le,ie))return le.y0-ie.y0;if(ie.source.column<le.source.column){var ge=Y(ie,le);return le.y0-ge}if(le.source.column<ie.source.column)return Y(le,ie)-ie.y0}return le.circular&&!ie.circular?le.circularLinkType=="top"?-1:1:ie.circular&&!le.circular?ie.circularLinkType=="top"?1:-1:le.circular&&ie.circular?le.circularLinkType===ie.circularLinkType&&le.circularLinkType=="top"?le.source.column===ie.source.column?le.source.y1-ie.source.y1:le.source.column-ie.source.column:le.circularLinkType===ie.circularLinkType&&le.circularLinkType=="bottom"?le.source.column===ie.source.column?le.source.y1-ie.source.y1:ie.source.column-le.source.column:le.circularLinkType=="top"?-1:1:void 0});var ue=Oe.y0;Se.forEach(function(le){le.y1=ue+le.width/2,ue+=le.width}),Se.forEach(function(le,ie){if(le.circularLinkType=="bottom"){for(var ge=ie+1,Ae=0;ge<Me;ge++)Ae+=Se[ge].width;le.y1=Oe.y1-Ae-le.width/2}})})}function me(Ce,pe){return ye(Ce)==ye(pe)}function ye(Ce){return Ce.y0-Ce.y1>0?"up":"down"}function Te(Ce,pe){return p(Ce.source,pe)==p(Ce.target,pe)}},30838:function(F,L,e){e.r(L),e.d(L,{sankey:function(){return x},sankeyCenter:function(){return o},sankeyJustify:function(){return h},sankeyLeft:function(){return _},sankeyLinkHorizontal:function(){return p},sankeyRight:function(){return g}});var T=e(33064),b=e(15140);function a(S){return S.target.depth}function _(S){return S.depth}function g(S,A){return A-1-S.height}function h(S,A){return S.sourceLinks.length?S.depth:A-1}function o(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,T.VV)(S.sourceLinks,a)-1:0}function t(S){return function(){return S}}function i(S,A){return r(S.source,A.source)||S.index-A.index}function n(S,A){return r(S.target,A.target)||S.index-A.index}function r(S,A){return S.y0-A.y0}function s(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function d(S){return l(S.target)*S.value}function c(S){return S.index}function w(S){return S.nodes}function m(S){return S.links}function f(S,A){var k=S.get(A);if(!k)throw new Error("missing: "+A);return k}function x(){var S=0,A=0,k=1,C=1,P=24,R=8,O=c,X=h,D=w,V=m,j=32;function B(){var q={nodes:D.apply(null,arguments),links:V.apply(null,arguments)};return function(re){re.nodes.forEach(function(K,Y){K.index=Y,K.sourceLinks=[],K.targetLinks=[]});var ee=(0,b.UI)(re.nodes,O);re.links.forEach(function(K,Y){K.index=Y;var $=K.source,ne=K.target;typeof $!="object"&&($=K.source=f(ee,$)),typeof ne!="object"&&(ne=K.target=f(ee,ne)),$.sourceLinks.push(K),ne.targetLinks.push(K)})}(q),function(re){re.nodes.forEach(function(ee){ee.value=Math.max((0,T.Sm)(ee.sourceLinks,s),(0,T.Sm)(ee.targetLinks,s))})}(q),function(re){var ee,K,Y;for(ee=re.nodes,K=[],Y=0;ee.length;++Y,ee=K,K=[])ee.forEach(function(ne){ne.depth=Y,ne.sourceLinks.forEach(function(ae){K.indexOf(ae.target)<0&&K.push(ae.target)})});for(ee=re.nodes,K=[],Y=0;ee.length;++Y,ee=K,K=[])ee.forEach(function(ne){ne.height=Y,ne.targetLinks.forEach(function(ae){K.indexOf(ae.source)<0&&K.push(ae.source)})});var $=(k-S-P)/(Y-1);re.nodes.forEach(function(ne){ne.x1=(ne.x0=S+Math.max(0,Math.min(Y-1,Math.floor(X.call(null,ne,Y))))*$)+P})}(q),function(re){var ee=(0,b.b1)().key(function(se){return se.x0}).sortKeys(T.j2).entries(re.nodes).map(function(se){return se.values});(function(){var se=(0,T.Fp)(ee,function(ye){return ye.length}),ce=.6666666666666666*(C-A)/(se-1);R>ce&&(R=ce);var me=(0,T.VV)(ee,function(ye){return(C-A-(ye.length-1)*R)/(0,T.Sm)(ye,s)});ee.forEach(function(ye){ye.forEach(function(Te,Ce){Te.y1=(Te.y0=Ce)+Te.value*me})}),re.links.forEach(function(ye){ye.width=ye.value*me})})(),ae();for(var K=1,Y=j;Y>0;--Y)ne(K*=.99),ae(),$(K),ae();function $(se){ee.forEach(function(ce){ce.forEach(function(me){if(me.targetLinks.length){var ye=((0,T.Sm)(me.targetLinks,u)/(0,T.Sm)(me.targetLinks,s)-l(me))*se;me.y0+=ye,me.y1+=ye}})})}function ne(se){ee.slice().reverse().forEach(function(ce){ce.forEach(function(me){if(me.sourceLinks.length){var ye=((0,T.Sm)(me.sourceLinks,d)/(0,T.Sm)(me.sourceLinks,s)-l(me))*se;me.y0+=ye,me.y1+=ye}})})}function ae(){ee.forEach(function(se){var ce,me,ye,Te=A,Ce=se.length;for(se.sort(r),ye=0;ye<Ce;++ye)(me=Te-(ce=se[ye]).y0)>0&&(ce.y0+=me,ce.y1+=me),Te=ce.y1+R;if((me=Te-R-C)>0)for(Te=ce.y0-=me,ce.y1-=me,ye=Ce-2;ye>=0;--ye)(me=(ce=se[ye]).y1+R-Te)>0&&(ce.y0-=me,ce.y1-=me),Te=ce.y0})}}(q),W(q),q}function W(q){q.nodes.forEach(function(re){re.sourceLinks.sort(n),re.targetLinks.sort(i)}),q.nodes.forEach(function(re){var ee=re.y0,K=ee;re.sourceLinks.forEach(function(Y){Y.y0=ee+Y.width/2,ee+=Y.width}),re.targetLinks.forEach(function(Y){Y.y1=K+Y.width/2,K+=Y.width})})}return B.update=function(q){return W(q),q},B.nodeId=function(q){return arguments.length?(O=typeof q=="function"?q:t(q),B):O},B.nodeAlign=function(q){return arguments.length?(X=typeof q=="function"?q:t(q),B):X},B.nodeWidth=function(q){return arguments.length?(P=+q,B):P},B.nodePadding=function(q){return arguments.length?(R=+q,B):R},B.nodes=function(q){return arguments.length?(D=typeof q=="function"?q:t(q),B):D},B.links=function(q){return arguments.length?(V=typeof q=="function"?q:t(q),B):V},B.size=function(q){return arguments.length?(S=A=0,k=+q[0],C=+q[1],B):[k-S,C-A]},B.extent=function(q){return arguments.length?(S=+q[0][0],k=+q[1][0],A=+q[0][1],C=+q[1][1],B):[[S,A],[k,C]]},B.iterations=function(q){return arguments.length?(j=+q,B):j},B}var y=e(45879);function v(S){return[S.source.x1,S.y0]}function M(S){return[S.target.x0,S.y1]}function p(){return(0,y.h5)().source(v).target(M)}},39898:function(F,L,e){var T,b;(function(){var a={version:"3.8.0"},_=[].slice,g=function(U){return _.call(U)},h=self.document;function o(U){return U&&(U.ownerDocument||U.document||U).documentElement}function t(U){return U&&(U.ownerDocument&&U.ownerDocument.defaultView||U.document&&U||U.defaultView)}if(h)try{g(h.documentElement.childNodes)[0].nodeType}catch{g=function(te){for(var oe=te.length,_e=new Array(oe);oe--;)_e[oe]=te[oe];return _e}}if(Date.now||(Date.now=function(){return+new Date}),h)try{h.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,s=this.CSSStyleDeclaration.prototype,l=s.setProperty;i.setAttribute=function(te,oe){n.call(this,te,oe+"")},i.setAttributeNS=function(te,oe,_e){r.call(this,te,oe,_e+"")},s.setProperty=function(te,oe,_e){l.call(this,te,oe+"",_e)}}function u(U,te){return U<te?-1:U>te?1:U>=te?0:NaN}function d(U){return U===null?NaN:+U}function c(U){return!isNaN(U)}function w(U){return{left:function(te,oe,_e,ke){for(arguments.length<3&&(_e=0),arguments.length<4&&(ke=te.length);_e<ke;){var ze=_e+ke>>>1;U(te[ze],oe)<0?_e=ze+1:ke=ze}return _e},right:function(te,oe,_e,ke){for(arguments.length<3&&(_e=0),arguments.length<4&&(ke=te.length);_e<ke;){var ze=_e+ke>>>1;U(te[ze],oe)>0?ke=ze:_e=ze+1}return _e}}}a.ascending=u,a.descending=function(U,te){return te<U?-1:te>U?1:te>=U?0:NaN},a.min=function(U,te){var oe,_e,ke=-1,ze=U.length;if(arguments.length===1){for(;++ke<ze;)if((_e=U[ke])!=null&&_e>=_e){oe=_e;break}for(;++ke<ze;)(_e=U[ke])!=null&&oe>_e&&(oe=_e)}else{for(;++ke<ze;)if((_e=te.call(U,U[ke],ke))!=null&&_e>=_e){oe=_e;break}for(;++ke<ze;)(_e=te.call(U,U[ke],ke))!=null&&oe>_e&&(oe=_e)}return oe},a.max=function(U,te){var oe,_e,ke=-1,ze=U.length;if(arguments.length===1){for(;++ke<ze;)if((_e=U[ke])!=null&&_e>=_e){oe=_e;break}for(;++ke<ze;)(_e=U[ke])!=null&&_e>oe&&(oe=_e)}else{for(;++ke<ze;)if((_e=te.call(U,U[ke],ke))!=null&&_e>=_e){oe=_e;break}for(;++ke<ze;)(_e=te.call(U,U[ke],ke))!=null&&_e>oe&&(oe=_e)}return oe},a.extent=function(U,te){var oe,_e,ke,ze=-1,Ge=U.length;if(arguments.length===1){for(;++ze<Ge;)if((_e=U[ze])!=null&&_e>=_e){oe=ke=_e;break}for(;++ze<Ge;)(_e=U[ze])!=null&&(oe>_e&&(oe=_e),ke<_e&&(ke=_e))}else{for(;++ze<Ge;)if((_e=te.call(U,U[ze],ze))!=null&&_e>=_e){oe=ke=_e;break}for(;++ze<Ge;)(_e=te.call(U,U[ze],ze))!=null&&(oe>_e&&(oe=_e),ke<_e&&(ke=_e))}return[oe,ke]},a.sum=function(U,te){var oe,_e=0,ke=U.length,ze=-1;if(arguments.length===1)for(;++ze<ke;)c(oe=+U[ze])&&(_e+=oe);else for(;++ze<ke;)c(oe=+te.call(U,U[ze],ze))&&(_e+=oe);return _e},a.mean=function(U,te){var oe,_e=0,ke=U.length,ze=-1,Ge=ke;if(arguments.length===1)for(;++ze<ke;)c(oe=d(U[ze]))?_e+=oe:--Ge;else for(;++ze<ke;)c(oe=d(te.call(U,U[ze],ze)))?_e+=oe:--Ge;if(Ge)return _e/Ge},a.quantile=function(U,te){var oe=(U.length-1)*te+1,_e=Math.floor(oe),ke=+U[_e-1],ze=oe-_e;return ze?ke+ze*(U[_e]-ke):ke},a.median=function(U,te){var oe,_e=[],ke=U.length,ze=-1;if(arguments.length===1)for(;++ze<ke;)c(oe=d(U[ze]))&&_e.push(oe);else for(;++ze<ke;)c(oe=d(te.call(U,U[ze],ze)))&&_e.push(oe);if(_e.length)return a.quantile(_e.sort(u),.5)},a.variance=function(U,te){var oe,_e,ke=U.length,ze=0,Ge=0,qe=-1,Je=0;if(arguments.length===1)for(;++qe<ke;)c(oe=d(U[qe]))&&(Ge+=(_e=oe-ze)*(oe-(ze+=_e/++Je)));else for(;++qe<ke;)c(oe=d(te.call(U,U[qe],qe)))&&(Ge+=(_e=oe-ze)*(oe-(ze+=_e/++Je)));if(Je>1)return Ge/(Je-1)},a.deviation=function(){var U=a.variance.apply(this,arguments);return U&&Math.sqrt(U)};var m=w(u);function f(U){return U.length}a.bisectLeft=m.left,a.bisect=a.bisectRight=m.right,a.bisector=function(U){return w(U.length===1?function(te,oe){return u(U(te),oe)}:U)},a.shuffle=function(U,te,oe){(ze=arguments.length)<3&&(oe=U.length,ze<2&&(te=0));for(var _e,ke,ze=oe-te;ze;)ke=Math.random()*ze--|0,_e=U[ze+te],U[ze+te]=U[ke+te],U[ke+te]=_e;return U},a.permute=function(U,te){for(var oe=te.length,_e=new Array(oe);oe--;)_e[oe]=U[te[oe]];return _e},a.pairs=function(U){for(var te=0,oe=U.length-1,_e=U[0],ke=new Array(oe<0?0:oe);te<oe;)ke[te]=[_e,_e=U[++te]];return ke},a.transpose=function(U){if(!(ke=U.length))return[];for(var te=-1,oe=a.min(U,f),_e=new Array(oe);++te<oe;)for(var ke,ze=-1,Ge=_e[te]=new Array(ke);++ze<ke;)Ge[ze]=U[ze][te];return _e},a.zip=function(){return a.transpose(arguments)},a.keys=function(U){var te=[];for(var oe in U)te.push(oe);return te},a.values=function(U){var te=[];for(var oe in U)te.push(U[oe]);return te},a.entries=function(U){var te=[];for(var oe in U)te.push({key:oe,value:U[oe]});return te},a.merge=function(U){for(var te,oe,_e,ke=U.length,ze=-1,Ge=0;++ze<ke;)Ge+=U[ze].length;for(oe=new Array(Ge);--ke>=0;)for(te=(_e=U[ke]).length;--te>=0;)oe[--Ge]=_e[te];return oe};var x=Math.abs;function y(U,te){for(var oe in te)Object.defineProperty(U.prototype,oe,{value:te[oe],enumerable:!1})}function v(){this._=Object.create(null)}a.range=function(U,te,oe){if(arguments.length<3&&(oe=1,arguments.length<2&&(te=U,U=0)),(te-U)/oe==1/0)throw new Error("infinite range");var _e,ke=[],ze=function(qe){for(var Je=1;qe*Je%1;)Je*=10;return Je}(x(oe)),Ge=-1;if(U*=ze,te*=ze,(oe*=ze)<0)for(;(_e=U+oe*++Ge)>te;)ke.push(_e/ze);else for(;(_e=U+oe*++Ge)<te;)ke.push(_e/ze);return ke},a.map=function(U,te){var oe=new v;if(U instanceof v)U.forEach(function(qe,Je){oe.set(qe,Je)});else if(Array.isArray(U)){var _e,ke=-1,ze=U.length;if(arguments.length===1)for(;++ke<ze;)oe.set(ke,U[ke]);else for(;++ke<ze;)oe.set(te.call(U,_e=U[ke],ke),_e)}else for(var Ge in U)oe.set(Ge,U[Ge]);return oe};var M="__proto__",p="\0";function S(U){return(U+="")===M||U[0]===p?p+U:U}function A(U){return(U+="")[0]===p?U.slice(1):U}function k(U){return S(U)in this._}function C(U){return(U=S(U))in this._&&delete this._[U]}function P(){var U=[];for(var te in this._)U.push(A(te));return U}function R(){var U=0;for(var te in this._)++U;return U}function O(){for(var U in this._)return!1;return!0}function X(){this._=Object.create(null)}function D(U){return U}function V(U,te,oe){return function(){var _e=oe.apply(te,arguments);return _e===te?U:_e}}function j(U,te){if(te in U)return te;te=te.charAt(0).toUpperCase()+te.slice(1);for(var oe=0,_e=B.length;oe<_e;++oe){var ke=B[oe]+te;if(ke in U)return ke}}y(v,{has:k,get:function(U){return this._[S(U)]},set:function(U,te){return this._[S(U)]=te},remove:C,keys:P,values:function(){var U=[];for(var te in this._)U.push(this._[te]);return U},entries:function(){var U=[];for(var te in this._)U.push({key:A(te),value:this._[te]});return U},size:R,empty:O,forEach:function(U){for(var te in this._)U.call(this,A(te),this._[te])}}),a.nest=function(){var U,te,oe={},_e=[],ke=[];function ze(qe,Je,$e){if($e>=_e.length)return te?te.call(oe,Je):U?Je.sort(U):Je;for(var st,yt,_t,It,zt=-1,Rt=Je.length,Ht=_e[$e++],Dt=new v;++zt<Rt;)(It=Dt.get(st=Ht(yt=Je[zt])))?It.push(yt):Dt.set(st,[yt]);return qe?(yt=qe(),_t=function(sn,$t){yt.set(sn,ze(qe,$t,$e))}):(yt={},_t=function(sn,$t){yt[sn]=ze(qe,$t,$e)}),Dt.forEach(_t),yt}function Ge(qe,Je){if(Je>=_e.length)return qe;var $e=[],st=ke[Je++];return qe.forEach(function(yt,_t){$e.push({key:yt,values:Ge(_t,Je)})}),st?$e.sort(function(yt,_t){return st(yt.key,_t.key)}):$e}return oe.map=function(qe,Je){return ze(Je,qe,0)},oe.entries=function(qe){return Ge(ze(a.map,qe,0),0)},oe.key=function(qe){return _e.push(qe),oe},oe.sortKeys=function(qe){return ke[_e.length-1]=qe,oe},oe.sortValues=function(qe){return U=qe,oe},oe.rollup=function(qe){return te=qe,oe},oe},a.set=function(U){var te=new X;if(U)for(var oe=0,_e=U.length;oe<_e;++oe)te.add(U[oe]);return te},y(X,{has:k,add:function(U){return this._[S(U+="")]=!0,U},remove:C,values:P,size:R,empty:O,forEach:function(U){for(var te in this._)U.call(this,A(te))}}),a.behavior={},a.rebind=function(U,te){for(var oe,_e=1,ke=arguments.length;++_e<ke;)U[oe=arguments[_e]]=V(U,te,te[oe]);return U};var B=["webkit","ms","moz","Moz","o","O"];function W(){}function q(){}function re(U){var te=[],oe=new v;function _e(){for(var ke,ze=te,Ge=-1,qe=ze.length;++Ge<qe;)(ke=ze[Ge].on)&&ke.apply(this,arguments);return U}return _e.on=function(ke,ze){var Ge,qe=oe.get(ke);return arguments.length<2?qe&&qe.on:(qe&&(qe.on=null,te=te.slice(0,Ge=te.indexOf(qe)).concat(te.slice(Ge+1)),oe.remove(ke)),ze&&te.push(oe.set(ke,{on:ze})),U)},_e}function ee(){a.event.preventDefault()}function K(){for(var U,te=a.event;U=te.sourceEvent;)te=U;return te}function Y(U){for(var te=new q,oe=0,_e=arguments.length;++oe<_e;)te[arguments[oe]]=re(te);return te.of=function(ke,ze){return function(Ge){try{var qe=Ge.sourceEvent=a.event;Ge.target=U,a.event=Ge,te[Ge.type].apply(ke,ze)}finally{a.event=qe}}},te}a.dispatch=function(){for(var U=new q,te=-1,oe=arguments.length;++te<oe;)U[arguments[te]]=re(U);return U},q.prototype.on=function(U,te){var oe=U.indexOf("."),_e="";if(oe>=0&&(_e=U.slice(oe+1),U=U.slice(0,oe)),U)return arguments.length<2?this[U].on(_e):this[U].on(_e,te);if(arguments.length===2){if(te==null)for(U in this)this.hasOwnProperty(U)&&this[U].on(_e,null);return this}},a.event=null,a.requote=function(U){return U.replace($,"\\$&")};var $=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ne={}.__proto__?function(U,te){U.__proto__=te}:function(U,te){for(var oe in te)U[oe]=te[oe]};function ae(U){return ne(U,ye),U}var se=function(U,te){return te.querySelector(U)},ce=function(U,te){return te.querySelectorAll(U)},me=function(U,te){var oe=U.matches||U[j(U,"matchesSelector")];return me=function(_e,ke){return oe.call(_e,ke)},me(U,te)};typeof Sizzle=="function"&&(se=function(U,te){return Sizzle(U,te)[0]||null},ce=Sizzle,me=Sizzle.matchesSelector),a.selection=function(){return a.select(h.documentElement)};var ye=a.selection.prototype=[];function Te(U){return typeof U=="function"?U:function(){return se(U,this)}}function Ce(U){return typeof U=="function"?U:function(){return ce(U,this)}}ye.select=function(U){var te,oe,_e,ke,ze=[];U=Te(U);for(var Ge=-1,qe=this.length;++Ge<qe;){ze.push(te=[]),te.parentNode=(_e=this[Ge]).parentNode;for(var Je=-1,$e=_e.length;++Je<$e;)(ke=_e[Je])?(te.push(oe=U.call(ke,ke.__data__,Je,Ge)),oe&&"__data__"in ke&&(oe.__data__=ke.__data__)):te.push(null)}return ae(ze)},ye.selectAll=function(U){var te,oe,_e=[];U=Ce(U);for(var ke=-1,ze=this.length;++ke<ze;)for(var Ge=this[ke],qe=-1,Je=Ge.length;++qe<Je;)(oe=Ge[qe])&&(_e.push(te=g(U.call(oe,oe.__data__,qe,ke))),te.parentNode=oe);return ae(_e)};var pe="http://www.w3.org/1999/xhtml",fe={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(U,te){return U=a.ns.qualify(U),te==null?U.local?function(){this.removeAttributeNS(U.space,U.local)}:function(){this.removeAttribute(U)}:typeof te=="function"?U.local?function(){var oe=te.apply(this,arguments);oe==null?this.removeAttributeNS(U.space,U.local):this.setAttributeNS(U.space,U.local,oe)}:function(){var oe=te.apply(this,arguments);oe==null?this.removeAttribute(U):this.setAttribute(U,oe)}:U.local?function(){this.setAttributeNS(U.space,U.local,te)}:function(){this.setAttribute(U,te)}}function Se(U){return U.trim().replace(/\s+/g," ")}function Me(U){return new RegExp("(?:^|\\s+)"+a.requote(U)+"(?:\\s+|$)","g")}function ue(U){return(U+"").trim().split(/^|\s+/)}function le(U,te){var oe=(U=ue(U).map(ie)).length;return typeof te=="function"?function(){for(var _e=-1,ke=te.apply(this,arguments);++_e<oe;)U[_e](this,ke)}:function(){for(var _e=-1;++_e<oe;)U[_e](this,te)}}function ie(U){var te=Me(U);return function(oe,_e){if(ke=oe.classList)return _e?ke.add(U):ke.remove(U);var ke=oe.getAttribute("class")||"";_e?(te.lastIndex=0,te.test(ke)||oe.setAttribute("class",Se(ke+" "+U))):oe.setAttribute("class",Se(ke.replace(te," ")))}}function ge(U,te,oe){return te==null?function(){this.style.removeProperty(U)}:typeof te=="function"?function(){var _e=te.apply(this,arguments);_e==null?this.style.removeProperty(U):this.style.setProperty(U,_e,oe)}:function(){this.style.setProperty(U,te,oe)}}function Ae(U,te){return te==null?function(){delete this[U]}:typeof te=="function"?function(){var oe=te.apply(this,arguments);oe==null?delete this[U]:this[U]=oe}:function(){this[U]=te}}function we(U){return typeof U=="function"?U:(U=a.ns.qualify(U)).local?function(){return this.ownerDocument.createElementNS(U.space,U.local)}:function(){var te=this.ownerDocument,oe=this.namespaceURI;return oe===pe&&te.documentElement.namespaceURI===pe?te.createElement(U):te.createElementNS(oe,U)}}function Ne(){var U=this.parentNode;U&&U.removeChild(this)}function He(U){return{__data__:U}}function de(U){return function(){return me(this,U)}}function Le(U){return arguments.length||(U=u),function(te,oe){return te&&oe?U(te.__data__,oe.__data__):!te-!oe}}function Ee(U,te){for(var oe=0,_e=U.length;oe<_e;oe++)for(var ke,ze=U[oe],Ge=0,qe=ze.length;Ge<qe;Ge++)(ke=ze[Ge])&&te(ke,Ge,oe);return U}function Re(U){return ne(U,je),U}a.ns={prefix:fe,qualify:function(U){var te=U.indexOf(":"),oe=U;return te>=0&&(oe=U.slice(0,te))!=="xmlns"&&(U=U.slice(te+1)),fe.hasOwnProperty(oe)?{space:fe[oe],local:U}:U}},ye.attr=function(U,te){if(arguments.length<2){if(typeof U=="string"){var oe=this.node();return(U=a.ns.qualify(U)).local?oe.getAttributeNS(U.space,U.local):oe.getAttribute(U)}for(te in U)this.each(Oe(te,U[te]));return this}return this.each(Oe(U,te))},ye.classed=function(U,te){if(arguments.length<2){if(typeof U=="string"){var oe=this.node(),_e=(U=ue(U)).length,ke=-1;if(te=oe.classList){for(;++ke<_e;)if(!te.contains(U[ke]))return!1}else for(te=oe.getAttribute("class");++ke<_e;)if(!Me(U[ke]).test(te))return!1;return!0}for(te in U)this.each(le(te,U[te]));return this}return this.each(le(U,te))},ye.style=function(U,te,oe){var _e=arguments.length;if(_e<3){if(typeof U!="string"){for(oe in _e<2&&(te=""),U)this.each(ge(oe,U[oe],te));return this}if(_e<2){var ke=this.node();return t(ke).getComputedStyle(ke,null).getPropertyValue(U)}oe=""}return this.each(ge(U,te,oe))},ye.property=function(U,te){if(arguments.length<2){if(typeof U=="string")return this.node()[U];for(te in U)this.each(Ae(te,U[te]));return this}return this.each(Ae(U,te))},ye.text=function(U){return arguments.length?this.each(typeof U=="function"?function(){var te=U.apply(this,arguments);this.textContent=te??""}:U==null?function(){this.textContent=""}:function(){this.textContent=U}):this.node().textContent},ye.html=function(U){return arguments.length?this.each(typeof U=="function"?function(){var te=U.apply(this,arguments);this.innerHTML=te??""}:U==null?function(){this.innerHTML=""}:function(){this.innerHTML=U}):this.node().innerHTML},ye.append=function(U){return U=we(U),this.select(function(){return this.appendChild(U.apply(this,arguments))})},ye.insert=function(U,te){return U=we(U),te=Te(te),this.select(function(){return this.insertBefore(U.apply(this,arguments),te.apply(this,arguments)||null)})},ye.remove=function(){return this.each(Ne)},ye.data=function(U,te){var oe,_e,ke=-1,ze=this.length;if(!arguments.length){for(U=new Array(ze=(oe=this[0]).length);++ke<ze;)(_e=oe[ke])&&(U[ke]=_e.__data__);return U}function Ge(st,yt){var _t,It,zt,Rt=st.length,Ht=yt.length,Dt=Math.min(Rt,Ht),sn=new Array(Ht),$t=new Array(Ht),Zt=new Array(Rt);if(te){var xn,bn=new v,Un=new Array(Rt);for(_t=-1;++_t<Rt;)(It=st[_t])&&(bn.has(xn=te.call(It,It.__data__,_t))?Zt[_t]=It:bn.set(xn,It),Un[_t]=xn);for(_t=-1;++_t<Ht;)(It=bn.get(xn=te.call(yt,zt=yt[_t],_t)))?It!==!0&&(sn[_t]=It,It.__data__=zt):$t[_t]=He(zt),bn.set(xn,!0);for(_t=-1;++_t<Rt;)_t in Un&&bn.get(Un[_t])!==!0&&(Zt[_t]=st[_t])}else{for(_t=-1;++_t<Dt;)It=st[_t],zt=yt[_t],It?(It.__data__=zt,sn[_t]=It):$t[_t]=He(zt);for(;_t<Ht;++_t)$t[_t]=He(yt[_t]);for(;_t<Rt;++_t)Zt[_t]=st[_t]}$t.update=sn,$t.parentNode=sn.parentNode=Zt.parentNode=st.parentNode,qe.push($t),Je.push(sn),$e.push(Zt)}var qe=Re([]),Je=ae([]),$e=ae([]);if(typeof U=="function")for(;++ke<ze;)Ge(oe=this[ke],U.call(oe,oe.parentNode.__data__,ke));else for(;++ke<ze;)Ge(oe=this[ke],U);return Je.enter=function(){return qe},Je.exit=function(){return $e},Je},ye.datum=function(U){return arguments.length?this.property("__data__",U):this.property("__data__")},ye.filter=function(U){var te,oe,_e,ke=[];typeof U!="function"&&(U=de(U));for(var ze=0,Ge=this.length;ze<Ge;ze++){ke.push(te=[]),te.parentNode=(oe=this[ze]).parentNode;for(var qe=0,Je=oe.length;qe<Je;qe++)(_e=oe[qe])&&U.call(_e,_e.__data__,qe,ze)&&te.push(_e)}return ae(ke)},ye.order=function(){for(var U=-1,te=this.length;++U<te;)for(var oe,_e=this[U],ke=_e.length-1,ze=_e[ke];--ke>=0;)(oe=_e[ke])&&(ze&&ze!==oe.nextSibling&&ze.parentNode.insertBefore(oe,ze),ze=oe);return this},ye.sort=function(U){U=Le.apply(this,arguments);for(var te=-1,oe=this.length;++te<oe;)this[te].sort(U);return this.order()},ye.each=function(U){return Ee(this,function(te,oe,_e){U.call(te,te.__data__,oe,_e)})},ye.call=function(U){var te=g(arguments);return U.apply(te[0]=this,te),this},ye.empty=function(){return!this.node()},ye.node=function(){for(var U=0,te=this.length;U<te;U++)for(var oe=this[U],_e=0,ke=oe.length;_e<ke;_e++){var ze=oe[_e];if(ze)return ze}return null},ye.size=function(){var U=0;return Ee(this,function(){++U}),U};var je=[];function Fe(U,te,oe){var _e="__on"+U,ke=U.indexOf("."),ze=Ze;ke>0&&(U=U.slice(0,ke));var Ge=Xe.get(U);function qe(){var Je=this[_e];Je&&(this.removeEventListener(U,Je,Je.$),delete this[_e])}return Ge&&(U=Ge,ze=at),ke?te?function(){var Je=ze(te,g(arguments));qe.call(this),this.addEventListener(U,this[_e]=Je,Je.$=oe),Je._=te}:qe:te?W:function(){var Je,$e=new RegExp("^__on([^.]+)"+a.requote(U)+"$");for(var st in this)if(Je=st.match($e)){var yt=this[st];this.removeEventListener(Je[1],yt,yt.$),delete this[st]}}}a.selection.enter=Re,a.selection.enter.prototype=je,je.append=ye.append,je.empty=ye.empty,je.node=ye.node,je.call=ye.call,je.size=ye.size,je.select=function(U){for(var te,oe,_e,ke,ze,Ge=[],qe=-1,Je=this.length;++qe<Je;){_e=(ke=this[qe]).update,Ge.push(te=[]),te.parentNode=ke.parentNode;for(var $e=-1,st=ke.length;++$e<st;)(ze=ke[$e])?(te.push(_e[$e]=oe=U.call(ke.parentNode,ze.__data__,$e,qe)),oe.__data__=ze.__data__):te.push(null)}return ae(Ge)},je.insert=function(U,te){var oe,_e,ke;return arguments.length<2&&(oe=this,te=function(ze,Ge,qe){var Je,$e=oe[qe].update,st=$e.length;for(qe!=ke&&(ke=qe,_e=0),Ge>=_e&&(_e=Ge+1);!(Je=$e[_e])&&++_e<st;);return Je}),ye.insert.call(this,U,te)},a.select=function(U){var te;return typeof U=="string"?(te=[se(U,h)]).parentNode=h.documentElement:(te=[U]).parentNode=o(U),ae([te])},a.selectAll=function(U){var te;return typeof U=="string"?(te=g(ce(U,h))).parentNode=h.documentElement:(te=g(U)).parentNode=null,ae([te])},ye.on=function(U,te,oe){var _e=arguments.length;if(_e<3){if(typeof U!="string"){for(oe in _e<2&&(te=!1),U)this.each(Fe(oe,U[oe],te));return this}if(_e<2)return(_e=this.node()["__on"+U])&&_e._;oe=!1}return this.each(Fe(U,te,oe))};var Xe=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ze(U,te){return function(oe){var _e=a.event;a.event=oe,te[0]=this.__data__;try{U.apply(this,te)}finally{a.event=_e}}}function at(U,te){var oe=Ze(U,te);return function(_e){var ke=this,ze=_e.relatedTarget;ze&&(ze===ke||8&ze.compareDocumentPosition(ke))||oe.call(ke,_e)}}h&&Xe.forEach(function(U){"on"+U in h&&Xe.remove(U)});var lt,ot=0;function bt(U){var te=".dragsuppress-"+ ++ot,oe="click"+te,_e=a.select(t(U)).on("touchmove"+te,ee).on("dragstart"+te,ee).on("selectstart"+te,ee);if(lt==null&&(lt=!("onselectstart"in U)&&j(U.style,"userSelect")),lt){var ke=o(U).style,ze=ke[lt];ke[lt]="none"}return function(Ge){if(_e.on(te,null),lt&&(ke[lt]=ze),Ge){var qe=function(){_e.on(oe,null)};_e.on(oe,function(){ee(),qe()},!0),setTimeout(qe,0)}}}a.mouse=function(U){return ht(U,K())};var wt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(U,te){te.changedTouches&&(te=te.changedTouches[0]);var oe=U.ownerSVGElement||U;if(oe.createSVGPoint){var _e=oe.createSVGPoint();if(wt<0){var ke=t(U);if(ke.scrollX||ke.scrollY){var ze=(oe=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();wt=!(ze.f||ze.e),oe.remove()}}return wt?(_e.x=te.pageX,_e.y=te.pageY):(_e.x=te.clientX,_e.y=te.clientY),[(_e=_e.matrixTransform(U.getScreenCTM().inverse())).x,_e.y]}var Ge=U.getBoundingClientRect();return[te.clientX-Ge.left-U.clientLeft,te.clientY-Ge.top-U.clientTop]}function ct(){return a.event.changedTouches[0].identifier}a.touch=function(U,te,oe){if(arguments.length<3&&(oe=te,te=K().changedTouches),te){for(var _e,ke=0,ze=te.length;ke<ze;++ke)if((_e=te[ke]).identifier===oe)return ht(U,_e)}},a.behavior.drag=function(){var U=Y(ke,"drag","dragstart","dragend"),te=null,oe=ze(W,a.mouse,t,"mousemove","mouseup"),_e=ze(ct,a.touch,D,"touchmove","touchend");function ke(){this.on("mousedown.drag",oe).on("touchstart.drag",_e)}function ze(Ge,qe,Je,$e,st){return function(){var yt,_t=this,It=a.event.target.correspondingElement||a.event.target,zt=_t.parentNode,Rt=U.of(_t,arguments),Ht=0,Dt=Ge(),sn=".drag"+(Dt==null?"":"-"+Dt),$t=a.select(Je(It)).on($e+sn,function(){var bn,Un,jn=qe(zt,Dt);jn&&(bn=jn[0]-xn[0],Un=jn[1]-xn[1],Ht|=bn|Un,xn=jn,Rt({type:"drag",x:jn[0]+yt[0],y:jn[1]+yt[1],dx:bn,dy:Un}))}).on(st+sn,function(){qe(zt,Dt)&&($t.on($e+sn,null).on(st+sn,null),Zt(Ht),Rt({type:"dragend"}))}),Zt=bt(It),xn=qe(zt,Dt);yt=te?[(yt=te.apply(_t,arguments)).x-xn[0],yt.y-xn[1]]:[0,0],Rt({type:"dragstart"})}}return ke.origin=function(Ge){return arguments.length?(te=Ge,ke):te},a.rebind(ke,U,"on")},a.touches=function(U,te){return arguments.length<2&&(te=K().touches),te?g(te).map(function(oe){var _e=ht(U,oe);return _e.identifier=oe.identifier,_e}):[]};var Tt=1e-6,Lt=Tt*Tt,kt=Math.PI,Ot=2*kt,Pt=Ot-Tt,et=kt/2,nt=kt/180,Ye=180/kt;function tt(U){return U>1?et:U<-1?-et:Math.asin(U)}function ut(U){return((U=Math.exp(U))+1/U)/2}var Ke=Math.SQRT2;a.interpolateZoom=function(U,te){var oe,_e,ke=U[0],ze=U[1],Ge=U[2],qe=te[0],Je=te[1],$e=te[2],st=qe-ke,yt=Je-ze,_t=st*st+yt*yt;if(_t<Lt)_e=Math.log($e/Ge)/Ke,oe=function(sn){return[ke+sn*st,ze+sn*yt,Ge*Math.exp(Ke*sn*_e)]};else{var It=Math.sqrt(_t),zt=($e*$e-Ge*Ge+4*_t)/(2*Ge*2*It),Rt=($e*$e-Ge*Ge-4*_t)/(2*$e*2*It),Ht=Math.log(Math.sqrt(zt*zt+1)-zt),Dt=Math.log(Math.sqrt(Rt*Rt+1)-Rt);_e=(Dt-Ht)/Ke,oe=function(sn){var $t,Zt=sn*_e,xn=ut(Ht),bn=Ge/(2*It)*(xn*($t=Ke*Zt+Ht,(($t=Math.exp(2*$t))-1)/($t+1))-function(Un){return((Un=Math.exp(Un))-1/Un)/2}(Ht));return[ke+bn*st,ze+bn*yt,Ge*xn/ut(Ke*Zt+Ht)]}}return oe.duration=1e3*_e,oe},a.behavior.zoom=function(){var U,te,oe,_e,ke,ze,Ge,qe,Je,$e={x:0,y:0,k:1},st=[960,500],yt=Qe,_t=250,It=0,zt="mousedown.zoom",Rt="mousemove.zoom",Ht="mouseup.zoom",Dt="touchstart.zoom",sn=Y($t,"zoomstart","zoom","zoomend");function $t(Gn){Gn.on(zt,cr).on(Be+".zoom",Mr).on("dblclick.zoom",Fr).on(Dt,vr)}function Zt(Gn){return[(Gn[0]-$e.x)/$e.k,(Gn[1]-$e.y)/$e.k]}function xn(Gn){$e.k=Math.max(yt[0],Math.min(yt[1],Gn))}function bn(Gn,ur){ur=function(yr){return[yr[0]*$e.k+$e.x,yr[1]*$e.k+$e.y]}(ur),$e.x+=Gn[0]-ur[0],$e.y+=Gn[1]-ur[1]}function Un(Gn,ur,yr,Ar){Gn.__chart__={x:$e.x,y:$e.y,k:$e.k},xn(Math.pow(2,Ar)),bn(te=ur,yr),Gn=a.select(Gn),_t>0&&(Gn=Gn.transition().duration(_t)),Gn.call($t.event)}function jn(){Ge&&Ge.domain(ze.range().map(function(Gn){return(Gn-$e.x)/$e.k}).map(ze.invert)),Je&&Je.domain(qe.range().map(function(Gn){return(Gn-$e.y)/$e.k}).map(qe.invert))}function Xn(Gn){It++||Gn({type:"zoomstart"})}function Qn(Gn){jn(),Gn({type:"zoom",scale:$e.k,translate:[$e.x,$e.y]})}function hr(Gn){--It||(Gn({type:"zoomend"}),te=null)}function cr(){var Gn=this,ur=sn.of(Gn,arguments),yr=0,Ar=a.select(t(Gn)).on(Rt,function(){yr=1,bn(a.mouse(Gn),Or),Qn(ur)}).on(Ht,function(){Ar.on(Rt,null).on(Ht,null),jr(yr),hr(ur)}),Or=Zt(a.mouse(Gn)),jr=bt(Gn);pa.call(Gn),Xn(ur)}function vr(){var Gn,ur=this,yr=sn.of(ur,arguments),Ar={},Or=0,jr=".zoom-"+a.event.changedTouches[0].identifier,Yr="touchmove"+jr,ai="touchend"+jr,Ti=[],Mi=a.select(ur),oi=bt(ur);function Bi(){var $r=a.touches(ur);return Gn=$e.k,$r.forEach(function(qr){qr.identifier in Ar&&(Ar[qr.identifier]=Zt(qr))}),$r}function la(){var $r=a.event.target;a.select($r).on(Yr,Xi).on(ai,ea),Ti.push($r);for(var qr=a.event.changedTouches,Ai=0,vi=qr.length;Ai<vi;++Ai)Ar[qr[Ai].identifier]=null;var ki=Bi(),Ea=Date.now();if(ki.length===1){if(Ea-ke<500){var Oi=ki[0];Un(ur,Oi,Ar[Oi.identifier],Math.floor(Math.log($e.k)/Math.LN2)+1),ee()}ke=Ea}else if(ki.length>1){Oi=ki[0];var si=ki[1],Bs=Oi[0]-si[0],Da=Oi[1]-si[1];Or=Bs*Bs+Da*Da}}function Xi(){var $r,qr,Ai,vi,ki=a.touches(ur);pa.call(ur);for(var Ea=0,Oi=ki.length;Ea<Oi;++Ea,vi=null)if(Ai=ki[Ea],vi=Ar[Ai.identifier]){if(qr)break;$r=Ai,qr=vi}if(vi){var si=(si=Ai[0]-$r[0])*si+(si=Ai[1]-$r[1])*si,Bs=Or&&Math.sqrt(si/Or);$r=[($r[0]+Ai[0])/2,($r[1]+Ai[1])/2],qr=[(qr[0]+vi[0])/2,(qr[1]+vi[1])/2],xn(Bs*Gn)}ke=null,bn($r,qr),Qn(yr)}function ea(){if(a.event.touches.length){for(var $r=a.event.changedTouches,qr=0,Ai=$r.length;qr<Ai;++qr)delete Ar[$r[qr].identifier];for(var vi in Ar)return void Bi()}a.selectAll(Ti).on(jr,null),Mi.on(zt,cr).on(Dt,vr),oi(),hr(yr)}la(),Xn(yr),Mi.on(zt,null).on(Dt,la)}function Mr(){var Gn=sn.of(this,arguments);_e?clearTimeout(_e):(pa.call(this),U=Zt(te=oe||a.mouse(this)),Xn(Gn)),_e=setTimeout(function(){_e=null,hr(Gn)},50),ee(),xn(Math.pow(2,.002*De())*$e.k),bn(te,U),Qn(Gn)}function Fr(){var Gn=a.mouse(this),ur=Math.log($e.k)/Math.LN2;Un(this,Gn,Zt(Gn),a.event.shiftKey?Math.ceil(ur)-1:Math.floor(ur)+1)}return Be||(Be="onwheel"in h?(De=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in h?(De=function(){return a.event.wheelDelta},"mousewheel"):(De=function(){return-a.event.detail},"MozMousePixelScroll")),$t.event=function(Gn){Gn.each(function(){var ur=sn.of(this,arguments),yr=$e;ps?a.select(this).transition().each("start.zoom",function(){$e=this.__chart__||{x:0,y:0,k:1},Xn(ur)}).tween("zoom:zoom",function(){var Ar=st[0],Or=st[1],jr=te?te[0]:Ar/2,Yr=te?te[1]:Or/2,ai=a.interpolateZoom([(jr-$e.x)/$e.k,(Yr-$e.y)/$e.k,Ar/$e.k],[(jr-yr.x)/yr.k,(Yr-yr.y)/yr.k,Ar/yr.k]);return function(Ti){var Mi=ai(Ti),oi=Ar/Mi[2];this.__chart__=$e={x:jr-Mi[0]*oi,y:Yr-Mi[1]*oi,k:oi},Qn(ur)}}).each("interrupt.zoom",function(){hr(ur)}).each("end.zoom",function(){hr(ur)}):(this.__chart__=$e,Xn(ur),Qn(ur),hr(ur))})},$t.translate=function(Gn){return arguments.length?($e={x:+Gn[0],y:+Gn[1],k:$e.k},jn(),$t):[$e.x,$e.y]},$t.scale=function(Gn){return arguments.length?($e={x:$e.x,y:$e.y,k:null},xn(+Gn),jn(),$t):$e.k},$t.scaleExtent=function(Gn){return arguments.length?(yt=Gn==null?Qe:[+Gn[0],+Gn[1]],$t):yt},$t.center=function(Gn){return arguments.length?(oe=Gn&&[+Gn[0],+Gn[1]],$t):oe},$t.size=function(Gn){return arguments.length?(st=Gn&&[+Gn[0],+Gn[1]],$t):st},$t.duration=function(Gn){return arguments.length?(_t=+Gn,$t):_t},$t.x=function(Gn){return arguments.length?(Ge=Gn,ze=Gn.copy(),$e={x:0,y:0,k:1},$t):Ge},$t.y=function(Gn){return arguments.length?(Je=Gn,qe=Gn.copy(),$e={x:0,y:0,k:1},$t):Je},a.rebind($t,sn,"on")};var De,Be,Qe=[0,1/0];function rt(){}function vt(U,te,oe){return this instanceof vt?(this.h=+U,this.s=+te,void(this.l=+oe)):arguments.length<2?U instanceof vt?new vt(U.h,U.s,U.l):cn(""+U,vn,vt):new vt(U,te,oe)}a.color=rt,rt.prototype.toString=function(){return this.rgb()+""},a.hsl=vt;var mt=vt.prototype=new rt;function xt(U,te,oe){var _e,ke;function ze(Ge){return Math.round(255*function(qe){return qe>360?qe-=360:qe<0&&(qe+=360),qe<60?_e+(ke-_e)*qe/60:qe<180?ke:qe<240?_e+(ke-_e)*(240-qe)/60:_e}(Ge))}return U=isNaN(U)?0:(U%=360)<0?U+360:U,te=isNaN(te)||te<0?0:te>1?1:te,_e=2*(oe=oe<0?0:oe>1?1:oe)-(ke=oe<=.5?oe*(1+te):oe+te-oe*te),new wn(ze(U+120),ze(U),ze(U-120))}function dt(U,te,oe){return this instanceof dt?(this.h=+U,this.c=+te,void(this.l=+oe)):arguments.length<2?U instanceof dt?new dt(U.h,U.c,U.l):function(_e,ke,ze){return _e>0?new dt(Math.atan2(ze,ke)*Ye,Math.sqrt(ke*ke+ze*ze),_e):new dt(NaN,NaN,_e)}(U instanceof gt?U.l:(U=yn((U=a.rgb(U)).r,U.g,U.b)).l,U.a,U.b):new dt(U,te,oe)}mt.brighter=function(U){return U=Math.pow(.7,arguments.length?U:1),new vt(this.h,this.s,this.l/U)},mt.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new vt(this.h,this.s,U*this.l)},mt.rgb=function(){return xt(this.h,this.s,this.l)},a.hcl=dt;var Et=dt.prototype=new rt;function pt(U,te,oe){return isNaN(U)&&(U=0),isNaN(te)&&(te=0),new gt(oe,Math.cos(U*=nt)*te,Math.sin(U)*te)}function gt(U,te,oe){return this instanceof gt?(this.l=+U,this.a=+te,void(this.b=+oe)):arguments.length<2?U instanceof gt?new gt(U.l,U.a,U.b):U instanceof dt?pt(U.h,U.c,U.l):yn((U=wn(U)).r,U.g,U.b):new gt(U,te,oe)}Et.brighter=function(U){return new dt(this.h,this.c,Math.min(100,this.l+Mt*(arguments.length?U:1)))},Et.darker=function(U){return new dt(this.h,this.c,Math.max(0,this.l-Mt*(arguments.length?U:1)))},Et.rgb=function(){return pt(this.h,this.c,this.l).rgb()},a.lab=gt;var Mt=18,Nt=.95047,Bt=1,Ut=1.08883,Jt=gt.prototype=new rt;function Vt(U,te,oe){var _e=(U+16)/116,ke=_e+te/500,ze=_e-oe/200;return new wn(gn(3.2404542*(ke=Qt(ke)*Nt)-1.5371385*(_e=Qt(_e)*Bt)-.4985314*(ze=Qt(ze)*Ut)),gn(-.969266*ke+1.8760108*_e+.041556*ze),gn(.0556434*ke-.2040259*_e+1.0572252*ze))}function Qt(U){return U>.206893034?U*U*U:(U-.13793103448275862)/7.787037}function qt(U){return U>.008856?Math.pow(U,.3333333333333333):7.787037*U+.13793103448275862}function gn(U){return Math.round(255*(U<=.00304?12.92*U:1.055*Math.pow(U,.4166666666666667)-.055))}function wn(U,te,oe){return this instanceof wn?(this.r=~~U,this.g=~~te,void(this.b=~~oe)):arguments.length<2?U instanceof wn?new wn(U.r,U.g,U.b):cn(""+U,wn,xt):new wn(U,te,oe)}function hn(U){return new wn(U>>16,U>>8&255,255&U)}function Xt(U){return hn(U)+""}Jt.brighter=function(U){return new gt(Math.min(100,this.l+Mt*(arguments.length?U:1)),this.a,this.b)},Jt.darker=function(U){return new gt(Math.max(0,this.l-Mt*(arguments.length?U:1)),this.a,this.b)},Jt.rgb=function(){return Vt(this.l,this.a,this.b)},a.rgb=wn;var an=wn.prototype=new rt;function tn(U){return U<16?"0"+Math.max(0,U).toString(16):Math.min(255,U).toString(16)}function cn(U,te,oe){var _e,ke,ze,Ge=0,qe=0,Je=0;if(_e=/([a-z]+)\((.*)\)/.exec(U=U.toLowerCase()))switch(ke=_e[2].split(","),_e[1]){case"hsl":return oe(parseFloat(ke[0]),parseFloat(ke[1])/100,parseFloat(ke[2])/100);case"rgb":return te(In(ke[0]),In(ke[1]),In(ke[2]))}return(ze=kn.get(U))?te(ze.r,ze.g,ze.b):(U==null||U.charAt(0)!=="#"||isNaN(ze=parseInt(U.slice(1),16))||(U.length===4?(Ge=(3840&ze)>>4,Ge|=Ge>>4,qe=240&ze,qe|=qe>>4,Je=15&ze,Je|=Je<<4):U.length===7&&(Ge=(16711680&ze)>>16,qe=(65280&ze)>>8,Je=255&ze)),te(Ge,qe,Je))}function vn(U,te,oe){var _e,ke,ze=Math.min(U/=255,te/=255,oe/=255),Ge=Math.max(U,te,oe),qe=Ge-ze,Je=(Ge+ze)/2;return qe?(ke=Je<.5?qe/(Ge+ze):qe/(2-Ge-ze),_e=U==Ge?(te-oe)/qe+(te<oe?6:0):te==Ge?(oe-U)/qe+2:(U-te)/qe+4,_e*=60):(_e=NaN,ke=Je>0&&Je<1?0:_e),new vt(_e,ke,Je)}function yn(U,te,oe){var _e=qt((.4124564*(U=Pn(U))+.3575761*(te=Pn(te))+.1804375*(oe=Pn(oe)))/Nt),ke=qt((.2126729*U+.7151522*te+.072175*oe)/Bt);return gt(116*ke-16,500*(_e-ke),200*(ke-qt((.0193339*U+.119192*te+.9503041*oe)/Ut)))}function Pn(U){return(U/=255)<=.04045?U/12.92:Math.pow((U+.055)/1.055,2.4)}function In(U){var te=parseFloat(U);return U.charAt(U.length-1)==="%"?Math.round(2.55*te):te}an.brighter=function(U){U=Math.pow(.7,arguments.length?U:1);var te=this.r,oe=this.g,_e=this.b,ke=30;return te||oe||_e?(te&&te<ke&&(te=ke),oe&&oe<ke&&(oe=ke),_e&&_e<ke&&(_e=ke),new wn(Math.min(255,te/U),Math.min(255,oe/U),Math.min(255,_e/U))):new wn(ke,ke,ke)},an.darker=function(U){return new wn((U=Math.pow(.7,arguments.length?U:1))*this.r,U*this.g,U*this.b)},an.hsl=function(){return vn(this.r,this.g,this.b)},an.toString=function(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)};var kn=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function zn(U){return typeof U=="function"?U:function(){return U}}function er(U){return function(te,oe,_e){return arguments.length===2&&typeof oe=="function"&&(_e=oe,oe=null),ir(te,oe,U,_e)}}function ir(U,te,oe,_e){var ke={},ze=a.dispatch("beforesend","progress","load","error"),Ge={},qe=new XMLHttpRequest,Je=null;function $e(){var st,yt=qe.status;if(!yt&&function(_t){var It=_t.responseType;return It&&It!=="text"?_t.response:_t.responseText}(qe)||yt>=200&&yt<300||yt===304){try{st=oe.call(ke,qe)}catch(_t){return void ze.error.call(ke,_t)}ze.load.call(ke,st)}else ze.error.call(ke,qe)}return self.XDomainRequest&&!("withCredentials"in qe)&&/^(http(s)?:)?\/\//.test(U)&&(qe=new XDomainRequest),"onload"in qe?qe.onload=qe.onerror=$e:qe.onreadystatechange=function(){qe.readyState>3&&$e()},qe.onprogress=function(st){var yt=a.event;a.event=st;try{ze.progress.call(ke,qe)}finally{a.event=yt}},ke.header=function(st,yt){return st=(st+"").toLowerCase(),arguments.length<2?Ge[st]:(yt==null?delete Ge[st]:Ge[st]=yt+"",ke)},ke.mimeType=function(st){return arguments.length?(te=st==null?null:st+"",ke):te},ke.responseType=function(st){return arguments.length?(Je=st,ke):Je},ke.response=function(st){return oe=st,ke},["get","post"].forEach(function(st){ke[st]=function(){return ke.send.apply(ke,[st].concat(g(arguments)))}}),ke.send=function(st,yt,_t){if(arguments.length===2&&typeof yt=="function"&&(_t=yt,yt=null),qe.open(st,U,!0),te==null||"accept"in Ge||(Ge.accept=te+",*/*"),qe.setRequestHeader)for(var It in Ge)qe.setRequestHeader(It,Ge[It]);return te!=null&&qe.overrideMimeType&&qe.overrideMimeType(te),Je!=null&&(qe.responseType=Je),_t!=null&&ke.on("error",_t).on("load",function(zt){_t(null,zt)}),ze.beforesend.call(ke,qe),qe.send(yt??null),ke},ke.abort=function(){return qe.abort(),ke},a.rebind(ke,ze,"on"),_e==null?ke:ke.get(function(st){return st.length===1?function(yt,_t){st(yt==null?_t:null)}:st}(_e))}kn.forEach(function(U,te){kn.set(U,hn(te))}),a.functor=zn,a.xhr=er(D),a.dsv=function(U,te){var oe=new RegExp('["'+U+`
]`),_e=U.charCodeAt(0);function ke($e,st,yt){arguments.length<3&&(yt=st,st=null);var _t=ir($e,te,st==null?ze:Ge(st),yt);return _t.row=function(It){return arguments.length?_t.response((st=It)==null?ze:Ge(It)):st},_t}function ze($e){return ke.parse($e.responseText)}function Ge($e){return function(st){return ke.parse(st.responseText,$e)}}function qe($e){return $e.map(Je).join(U)}function Je($e){return oe.test($e)?'"'+$e.replace(/\"/g,'""')+'"':$e}return ke.parse=function($e,st){var yt;return ke.parseRows($e,function(_t,It){if(yt)return yt(_t,It-1);var zt=function(Rt){for(var Ht={},Dt=_t.length,sn=0;sn<Dt;++sn)Ht[_t[sn]]=Rt[sn];return Ht};yt=st?function(Rt,Ht){return st(zt(Rt),Ht)}:zt})},ke.parseRows=function($e,st){var yt,_t,It={},zt={},Rt=[],Ht=$e.length,Dt=0,sn=0;function $t(){if(Dt>=Ht)return zt;if(_t)return _t=!1,It;var xn=Dt;if($e.charCodeAt(xn)===34){for(var bn=xn;bn++<Ht;)if($e.charCodeAt(bn)===34){if($e.charCodeAt(bn+1)!==34)break;++bn}return Dt=bn+2,(Un=$e.charCodeAt(bn+1))===13?(_t=!0,$e.charCodeAt(bn+2)===10&&++Dt):Un===10&&(_t=!0),$e.slice(xn+1,bn).replace(/""/g,'"')}for(;Dt<Ht;){var Un,jn=1;if((Un=$e.charCodeAt(Dt++))===10)_t=!0;else if(Un===13)_t=!0,$e.charCodeAt(Dt)===10&&(++Dt,++jn);else if(Un!==_e)continue;return $e.slice(xn,Dt-jn)}return $e.slice(xn)}for(;(yt=$t())!==zt;){for(var Zt=[];yt!==It&&yt!==zt;)Zt.push(yt),yt=$t();st&&(Zt=st(Zt,sn++))==null||Rt.push(Zt)}return Rt},ke.format=function($e){if(Array.isArray($e[0]))return ke.formatRows($e);var st=new X,yt=[];return $e.forEach(function(_t){for(var It in _t)st.has(It)||yt.push(st.add(It))}),[yt.map(Je).join(U)].concat($e.map(function(_t){return yt.map(function(It){return Je(_t[It])}).join(U)})).join(`
`)},ke.formatRows=function($e){return $e.map(qe).join(`
`)},ke},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("	","text/tab-separated-values");var fr,ar,Jn,br,Gt=this[j(this,"requestAnimationFrame")]||function(U){setTimeout(U,17)};function ln(U,te,oe){var _e=arguments.length;_e<2&&(te=0),_e<3&&(oe=Date.now());var ke={c:U,t:oe+te,n:null};return ar?ar.n=ke:fr=ke,ar=ke,Jn||(br=clearTimeout(br),Jn=1,Gt(mn)),ke}function mn(){var U=_n(),te=Ln()-U;te>24?(isFinite(te)&&(clearTimeout(br),br=setTimeout(mn,te)),Jn=0):(Jn=1,Gt(mn))}function _n(){for(var U=Date.now(),te=fr;te;)U>=te.t&&te.c(U-te.t)&&(te.c=null),te=te.n;return U}function Ln(){for(var U,te=fr,oe=1/0;te;)te.c?(te.t<oe&&(oe=te.t),te=(U=te).n):te=U?U.n=te.n:fr=te.n;return ar=U,oe}function Yn(U){return U[0]}function Nn(U){return U[1]}function Bn(U){for(var te,oe,_e,ke=U.length,ze=[0,1],Ge=2,qe=2;qe<ke;qe++){for(;Ge>1&&(te=U[ze[Ge-2]],oe=U[ze[Ge-1]],_e=U[qe],(oe[0]-te[0])*(_e[1]-te[1])-(oe[1]-te[1])*(_e[0]-te[0])<=0);)--Ge;ze[Ge++]=qe}return ze.slice(0,Ge)}function rr(U,te){return U[0]-te[0]||U[1]-te[1]}a.timer=function(){ln.apply(this,arguments)},a.timer.flush=function(){_n(),Ln()},a.round=function(U,te){return te?Math.round(U*(te=Math.pow(10,te)))/te:Math.round(U)},a.geom={},a.geom.hull=function(U){var te=Yn,oe=Nn;if(arguments.length)return _e(U);function _e(ke){if(ke.length<3)return[];var ze,Ge=zn(te),qe=zn(oe),Je=ke.length,$e=[],st=[];for(ze=0;ze<Je;ze++)$e.push([+Ge.call(this,ke[ze],ze),+qe.call(this,ke[ze],ze),ze]);for($e.sort(rr),ze=0;ze<Je;ze++)st.push([$e[ze][0],-$e[ze][1]]);var yt=Bn($e),_t=Bn(st),It=_t[0]===yt[0],zt=_t[_t.length-1]===yt[yt.length-1],Rt=[];for(ze=yt.length-1;ze>=0;--ze)Rt.push(ke[$e[yt[ze]][2]]);for(ze=+It;ze<_t.length-zt;++ze)Rt.push(ke[$e[_t[ze]][2]]);return Rt}return _e.x=function(ke){return arguments.length?(te=ke,_e):te},_e.y=function(ke){return arguments.length?(oe=ke,_e):oe},_e},a.geom.polygon=function(U){return ne(U,Yt),U};var Yt=a.geom.polygon.prototype=[];function An(U,te,oe){return(oe[0]-te[0])*(U[1]-te[1])<(oe[1]-te[1])*(U[0]-te[0])}function Ct(U,te,oe,_e){var ke=U[0],ze=oe[0],Ge=te[0]-ke,qe=_e[0]-ze,Je=U[1],$e=oe[1],st=te[1]-Je,yt=_e[1]-$e,_t=(qe*(Je-$e)-yt*(ke-ze))/(yt*Ge-qe*st);return[ke+_t*Ge,Je+_t*st]}function Kt(U){var te=U[0],oe=U[U.length-1];return!(te[0]-oe[0]||te[1]-oe[1])}Yt.area=function(){for(var U,te=-1,oe=this.length,_e=this[oe-1],ke=0;++te<oe;)U=_e,_e=this[te],ke+=U[1]*_e[0]-U[0]*_e[1];return .5*ke},Yt.centroid=function(U){var te,oe,_e=-1,ke=this.length,ze=0,Ge=0,qe=this[ke-1];for(arguments.length||(U=-1/(6*this.area()));++_e<ke;)te=qe,qe=this[_e],oe=te[0]*qe[1]-qe[0]*te[1],ze+=(te[0]+qe[0])*oe,Ge+=(te[1]+qe[1])*oe;return[ze*U,Ge*U]},Yt.clip=function(U){for(var te,oe,_e,ke,ze,Ge,qe=Kt(U),Je=-1,$e=this.length-Kt(this),st=this[$e-1];++Je<$e;){for(te=U.slice(),U.length=0,ke=this[Je],ze=te[(_e=te.length-qe)-1],oe=-1;++oe<_e;)An(Ge=te[oe],st,ke)?(An(ze,st,ke)||U.push(Ct(ze,Ge,st,ke)),U.push(Ge)):An(ze,st,ke)&&U.push(Ct(ze,Ge,st,ke)),ze=Ge;qe&&U.push(U[0]),st=ke}return U};var rn,Tn,Mn,Cn,pn,en=[],nn=[];function fn(){wi(this),this.edge=this.site=this.circle=null}function dn(U){var te=en.pop()||new fn;return te.site=U,te}function Rn(U){mr(U),Mn.remove(U),en.push(U),wi(U)}function On(U){var te=U.circle,oe=te.x,_e=te.cy,ke={x:oe,y:_e},ze=U.P,Ge=U.N,qe=[U];Rn(U);for(var Je=ze;Je.circle&&x(oe-Je.circle.x)<Tt&&x(_e-Je.circle.cy)<Tt;)ze=Je.P,qe.unshift(Je),Rn(Je),Je=ze;qe.unshift(Je),mr(Je);for(var $e=Ge;$e.circle&&x(oe-$e.circle.x)<Tt&&x(_e-$e.circle.cy)<Tt;)Ge=$e.N,qe.push($e),Rn($e),$e=Ge;qe.push($e),mr($e);var st,yt=qe.length;for(st=1;st<yt;++st)$e=qe[st],Je=qe[st-1],_r($e.edge,Je.site,$e.site,ke);Je=qe[0],($e=qe[yt-1]).edge=$n(Je.site,$e.site,null,ke),sr(Je),sr($e)}function qn(U){for(var te,oe,_e,ke,ze=U.x,Ge=U.y,qe=Mn._;qe;)if((_e=Vn(qe,Ge)-ze)>Tt)qe=qe.L;else{if(!((ke=ze-tr(qe,Ge))>Tt)){_e>-Tt?(te=qe.P,oe=qe):ke>-Tt?(te=qe,oe=qe.N):te=oe=qe;break}if(!qe.R){te=qe;break}qe=qe.R}var Je=dn(U);if(Mn.insert(te,Je),te||oe){if(te===oe)return mr(te),oe=dn(te.site),Mn.insert(Je,oe),Je.edge=oe.edge=$n(te.site,Je.site),sr(te),void sr(oe);if(oe){mr(te),mr(oe);var $e=te.site,st=$e.x,yt=$e.y,_t=U.x-st,It=U.y-yt,zt=oe.site,Rt=zt.x-st,Ht=zt.y-yt,Dt=2*(_t*Ht-It*Rt),sn=_t*_t+It*It,$t=Rt*Rt+Ht*Ht,Zt={x:(Ht*sn-It*$t)/Dt+st,y:(_t*$t-Rt*sn)/Dt+yt};_r(oe.edge,$e,zt,Zt),Je.edge=$n($e,U,null,Zt),oe.edge=$n(U,zt,null,Zt),sr(te),sr(oe)}else Je.edge=$n(te.site,Je.site)}}function Vn(U,te){var oe=U.site,_e=oe.x,ke=oe.y,ze=ke-te;if(!ze)return _e;var Ge=U.P;if(!Ge)return-1/0;var qe=(oe=Ge.site).x,Je=oe.y,$e=Je-te;if(!$e)return qe;var st=qe-_e,yt=1/ze-1/$e,_t=st/$e;return yt?(-_t+Math.sqrt(_t*_t-2*yt*(st*st/(-2*$e)-Je+$e/2+ke-ze/2)))/yt+_e:(_e+qe)/2}function tr(U,te){var oe=U.N;if(oe)return Vn(oe,te);var _e=U.site;return _e.y===te?_e.x:1/0}function Zn(U){this.site=U,this.edges=[]}function lr(U,te){return te.angle-U.angle}function or(){wi(this),this.x=this.y=this.arc=this.site=this.cy=null}function sr(U){var te=U.P,oe=U.N;if(te&&oe){var _e=te.site,ke=U.site,ze=oe.site;if(_e!==ze){var Ge=ke.x,qe=ke.y,Je=_e.x-Ge,$e=_e.y-qe,st=ze.x-Ge,yt=2*(Je*(Ht=ze.y-qe)-$e*st);if(!(yt>=-Lt)){var _t=Je*Je+$e*$e,It=st*st+Ht*Ht,zt=(Ht*_t-$e*It)/yt,Rt=(Je*It-st*_t)/yt,Ht=Rt+qe,Dt=nn.pop()||new or;Dt.arc=U,Dt.site=ke,Dt.x=zt+Ge,Dt.y=Ht+Math.sqrt(zt*zt+Rt*Rt),Dt.cy=Ht,U.circle=Dt;for(var sn=null,$t=pn._;$t;)if(Dt.y<$t.y||Dt.y===$t.y&&Dt.x<=$t.x){if(!$t.L){sn=$t.P;break}$t=$t.L}else{if(!$t.R){sn=$t;break}$t=$t.R}pn.insert(sn,Dt),sn||(Cn=Dt)}}}}function mr(U){var te=U.circle;te&&(te.P||(Cn=te.N),pn.remove(te),nn.push(te),wi(te),U.circle=null)}function gr(U,te){var oe=U.b;if(oe)return!0;var _e,ke,ze=U.a,Ge=te[0][0],qe=te[1][0],Je=te[0][1],$e=te[1][1],st=U.l,yt=U.r,_t=st.x,It=st.y,zt=yt.x,Rt=yt.y,Ht=(_t+zt)/2,Dt=(It+Rt)/2;if(Rt===It){if(Ht<Ge||Ht>=qe)return;if(_t>zt){if(ze){if(ze.y>=$e)return}else ze={x:Ht,y:Je};oe={x:Ht,y:$e}}else{if(ze){if(ze.y<Je)return}else ze={x:Ht,y:$e};oe={x:Ht,y:Je}}}else if(ke=Dt-(_e=(_t-zt)/(Rt-It))*Ht,_e<-1||_e>1)if(_t>zt){if(ze){if(ze.y>=$e)return}else ze={x:(Je-ke)/_e,y:Je};oe={x:($e-ke)/_e,y:$e}}else{if(ze){if(ze.y<Je)return}else ze={x:($e-ke)/_e,y:$e};oe={x:(Je-ke)/_e,y:Je}}else if(It<Rt){if(ze){if(ze.x>=qe)return}else ze={x:Ge,y:_e*Ge+ke};oe={x:qe,y:_e*qe+ke}}else{if(ze){if(ze.x<Ge)return}else ze={x:qe,y:_e*qe+ke};oe={x:Ge,y:_e*Ge+ke}}return U.a=ze,U.b=oe,!0}function Er(U,te){this.l=U,this.r=te,this.a=this.b=null}function $n(U,te,oe,_e){var ke=new Er(U,te);return rn.push(ke),oe&&_r(ke,U,te,oe),_e&&_r(ke,te,U,_e),Tn[U.i].edges.push(new Dr(ke,U,te)),Tn[te.i].edges.push(new Dr(ke,te,U)),ke}function _r(U,te,oe,_e){U.a||U.b?U.l===oe?U.b=_e:U.a=_e:(U.a=_e,U.l=te,U.r=oe)}function Dr(U,te,oe){var _e=U.a,ke=U.b;this.edge=U,this.site=te,this.angle=oe?Math.atan2(oe.y-te.y,oe.x-te.x):U.l===te?Math.atan2(ke.x-_e.x,_e.y-ke.y):Math.atan2(_e.x-ke.x,ke.y-_e.y)}function ii(){this._=null}function wi(U){U.U=U.C=U.L=U.R=U.P=U.N=null}function yi(U,te){var oe=te,_e=te.R,ke=oe.U;ke?ke.L===oe?ke.L=_e:ke.R=_e:U._=_e,_e.U=ke,oe.U=_e,oe.R=_e.L,oe.R&&(oe.R.U=oe),_e.L=oe}function Ei(U,te){var oe=te,_e=te.L,ke=oe.U;ke?ke.L===oe?ke.L=_e:ke.R=_e:U._=_e,_e.U=ke,oe.U=_e,oe.L=_e.R,oe.L&&(oe.L.U=oe),_e.R=oe}function hi(U){for(;U.L;)U=U.L;return U}function Fi(U,te){var oe,_e,ke,ze=U.sort(vo).pop();for(rn=[],Tn=new Array(U.length),Mn=new ii,pn=new ii;;)if(ke=Cn,ze&&(!ke||ze.y<ke.y||ze.y===ke.y&&ze.x<ke.x))ze.x===oe&&ze.y===_e||(Tn[ze.i]=new Zn(ze),qn(ze),oe=ze.x,_e=ze.y),ze=U.pop();else{if(!ke)break;On(ke.arc)}te&&(function(qe){for(var Je,$e,st,yt,_t,It=rn,zt=($e=qe[0][0],st=qe[0][1],yt=qe[1][0],_t=qe[1][1],function(Ht){var Dt,sn=Ht.a,$t=Ht.b,Zt=sn.x,xn=sn.y,bn=0,Un=1,jn=$t.x-Zt,Xn=$t.y-xn;if(Dt=$e-Zt,jn||!(Dt>0)){if(Dt/=jn,jn<0){if(Dt<bn)return;Dt<Un&&(Un=Dt)}else if(jn>0){if(Dt>Un)return;Dt>bn&&(bn=Dt)}if(Dt=yt-Zt,jn||!(Dt<0)){if(Dt/=jn,jn<0){if(Dt>Un)return;Dt>bn&&(bn=Dt)}else if(jn>0){if(Dt<bn)return;Dt<Un&&(Un=Dt)}if(Dt=st-xn,Xn||!(Dt>0)){if(Dt/=Xn,Xn<0){if(Dt<bn)return;Dt<Un&&(Un=Dt)}else if(Xn>0){if(Dt>Un)return;Dt>bn&&(bn=Dt)}if(Dt=_t-xn,Xn||!(Dt<0)){if(Dt/=Xn,Xn<0){if(Dt>Un)return;Dt>bn&&(bn=Dt)}else if(Xn>0){if(Dt<bn)return;Dt<Un&&(Un=Dt)}return bn>0&&(Ht.a={x:Zt+bn*jn,y:xn+bn*Xn}),Un<1&&(Ht.b={x:Zt+Un*jn,y:xn+Un*Xn}),Ht}}}}}),Rt=It.length;Rt--;)(!gr(Je=It[Rt],qe)||!zt(Je)||x(Je.a.x-Je.b.x)<Tt&&x(Je.a.y-Je.b.y)<Tt)&&(Je.a=Je.b=null,It.splice(Rt,1))}(te),function(qe){for(var Je,$e,st,yt,_t,It,zt,Rt,Ht,Dt,sn=qe[0][0],$t=qe[1][0],Zt=qe[0][1],xn=qe[1][1],bn=Tn,Un=bn.length;Un--;)if((_t=bn[Un])&&_t.prepare())for(Rt=(zt=_t.edges).length,It=0;It<Rt;)st=(Dt=zt[It].end()).x,yt=Dt.y,Je=(Ht=zt[++It%Rt].start()).x,$e=Ht.y,(x(st-Je)>Tt||x(yt-$e)>Tt)&&(zt.splice(It,0,new Dr((jn=_t.site,Xn=Dt,Qn=x(st-sn)<Tt&&xn-yt>Tt?{x:sn,y:x(Je-sn)<Tt?$e:xn}:x(yt-xn)<Tt&&$t-st>Tt?{x:x($e-xn)<Tt?Je:$t,y:xn}:x(st-$t)<Tt&&yt-Zt>Tt?{x:$t,y:x(Je-$t)<Tt?$e:Zt}:x(yt-Zt)<Tt&&st-sn>Tt?{x:x($e-Zt)<Tt?Je:sn,y:Zt}:null,hr=void 0,(hr=new Er(jn,null)).a=Xn,hr.b=Qn,rn.push(hr),hr),_t.site,null)),++Rt);var jn,Xn,Qn,hr}(te));var Ge={cells:Tn,edges:rn};return Mn=pn=rn=Tn=null,Ge}function vo(U,te){return te.y-U.y||te.x-U.x}Zn.prototype.prepare=function(){for(var U,te=this.edges,oe=te.length;oe--;)(U=te[oe].edge).b&&U.a||te.splice(oe,1);return te.sort(lr),te.length},Dr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ii.prototype={insert:function(U,te){var oe,_e,ke;if(U){if(te.P=U,te.N=U.N,U.N&&(U.N.P=te),U.N=te,U.R){for(U=U.R;U.L;)U=U.L;U.L=te}else U.R=te;oe=U}else this._?(U=hi(this._),te.P=null,te.N=U,U.P=U.L=te,oe=U):(te.P=te.N=null,this._=te,oe=null);for(te.L=te.R=null,te.U=oe,te.C=!0,U=te;oe&&oe.C;)oe===(_e=oe.U).L?(ke=_e.R)&&ke.C?(oe.C=ke.C=!1,_e.C=!0,U=_e):(U===oe.R&&(yi(this,oe),oe=(U=oe).U),oe.C=!1,_e.C=!0,Ei(this,_e)):(ke=_e.L)&&ke.C?(oe.C=ke.C=!1,_e.C=!0,U=_e):(U===oe.L&&(Ei(this,oe),oe=(U=oe).U),oe.C=!1,_e.C=!0,yi(this,_e)),oe=U.U;this._.C=!1},remove:function(U){U.N&&(U.N.P=U.P),U.P&&(U.P.N=U.N),U.N=U.P=null;var te,oe,_e,ke=U.U,ze=U.L,Ge=U.R;if(oe=ze?Ge?hi(Ge):ze:Ge,ke?ke.L===U?ke.L=oe:ke.R=oe:this._=oe,ze&&Ge?(_e=oe.C,oe.C=U.C,oe.L=ze,ze.U=oe,oe!==Ge?(ke=oe.U,oe.U=U.U,U=oe.R,ke.L=U,oe.R=Ge,Ge.U=oe):(oe.U=ke,ke=oe,U=oe.R)):(_e=U.C,U=oe),U&&(U.U=ke),!_e)if(U&&U.C)U.C=!1;else{do{if(U===this._)break;if(U===ke.L){if((te=ke.R).C&&(te.C=!1,ke.C=!0,yi(this,ke),te=ke.R),te.L&&te.L.C||te.R&&te.R.C){te.R&&te.R.C||(te.L.C=!1,te.C=!0,Ei(this,te),te=ke.R),te.C=ke.C,ke.C=te.R.C=!1,yi(this,ke),U=this._;break}}else if((te=ke.L).C&&(te.C=!1,ke.C=!0,Ei(this,ke),te=ke.L),te.L&&te.L.C||te.R&&te.R.C){te.L&&te.L.C||(te.R.C=!1,te.C=!0,yi(this,te),te=ke.L),te.C=ke.C,ke.C=te.L.C=!1,Ei(this,ke),U=this._;break}te.C=!0,U=ke,ke=ke.U}while(!U.C);U&&(U.C=!1)}}},a.geom.voronoi=function(U){var te=Yn,oe=Nn,_e=te,ke=oe,ze=Ra;if(U)return Ge(U);function Ge(Je){var $e=new Array(Je.length),st=ze[0][0],yt=ze[0][1],_t=ze[1][0],It=ze[1][1];return Fi(qe(Je),ze).cells.forEach(function(zt,Rt){var Ht=zt.edges,Dt=zt.site;($e[Rt]=Ht.length?Ht.map(function(sn){var $t=sn.start();return[$t.x,$t.y]}):Dt.x>=st&&Dt.x<=_t&&Dt.y>=yt&&Dt.y<=It?[[st,It],[_t,It],[_t,yt],[st,yt]]:[]).point=Je[Rt]}),$e}function qe(Je){return Je.map(function($e,st){return{x:Math.round(_e($e,st)/Tt)*Tt,y:Math.round(ke($e,st)/Tt)*Tt,i:st}})}return Ge.links=function(Je){return Fi(qe(Je)).edges.filter(function($e){return $e.l&&$e.r}).map(function($e){return{source:Je[$e.l.i],target:Je[$e.r.i]}})},Ge.triangles=function(Je){var $e=[];return Fi(qe(Je)).cells.forEach(function(st,yt){for(var _t,It,zt,Rt,Ht=st.site,Dt=st.edges.sort(lr),sn=-1,$t=Dt.length,Zt=Dt[$t-1].edge,xn=Zt.l===Ht?Zt.r:Zt.l;++sn<$t;)_t=xn,xn=(Zt=Dt[sn].edge).l===Ht?Zt.r:Zt.l,yt<_t.i&&yt<xn.i&&(zt=_t,Rt=xn,((It=Ht).x-Rt.x)*(zt.y-It.y)-(It.x-zt.x)*(Rt.y-It.y)<0)&&$e.push([Je[yt],Je[_t.i],Je[xn.i]])}),$e},Ge.x=function(Je){return arguments.length?(_e=zn(te=Je),Ge):te},Ge.y=function(Je){return arguments.length?(ke=zn(oe=Je),Ge):oe},Ge.clipExtent=function(Je){return arguments.length?(ze=Je??Ra,Ge):ze===Ra?null:ze},Ge.size=function(Je){return arguments.length?Ge.clipExtent(Je&&[[0,0],Je]):ze===Ra?null:ze&&ze[1]},Ge};var Ra=[[-1e6,-1e6],[1e6,1e6]];function Oo(U){return U.x}function Xl(U){return U.y}function ws(U,te,oe,_e,ke,ze){if(!U(te,oe,_e,ke,ze)){var Ge=.5*(oe+ke),qe=.5*(_e+ze),Je=te.nodes;Je[0]&&ws(U,Je[0],oe,_e,Ge,qe),Je[1]&&ws(U,Je[1],Ge,_e,ke,qe),Je[2]&&ws(U,Je[2],oe,qe,Ge,ze),Je[3]&&ws(U,Je[3],Ge,qe,ke,ze)}}function il(U,te){U=a.rgb(U),te=a.rgb(te);var oe=U.r,_e=U.g,ke=U.b,ze=te.r-oe,Ge=te.g-_e,qe=te.b-ke;return function(Je){return"#"+tn(Math.round(oe+ze*Je))+tn(Math.round(_e+Ge*Je))+tn(Math.round(ke+qe*Je))}}function Yl(U,te){var oe,_e={},ke={};for(oe in U)oe in te?_e[oe]=xo(U[oe],te[oe]):ke[oe]=U[oe];for(oe in te)oe in U||(ke[oe]=te[oe]);return function(ze){for(oe in _e)ke[oe]=_e[oe](ze);return ke}}function yo(U,te){return U=+U,te=+te,function(oe){return U*(1-oe)+te*oe}}function gu(U,te){var oe,_e,ke,ze=Ts.lastIndex=Ms.lastIndex=0,Ge=-1,qe=[],Je=[];for(U+="",te+="";(oe=Ts.exec(U))&&(_e=Ms.exec(te));)(ke=_e.index)>ze&&(ke=te.slice(ze,ke),qe[Ge]?qe[Ge]+=ke:qe[++Ge]=ke),(oe=oe[0])===(_e=_e[0])?qe[Ge]?qe[Ge]+=_e:qe[++Ge]=_e:(qe[++Ge]=null,Je.push({i:Ge,x:yo(oe,_e)})),ze=Ms.lastIndex;return ze<te.length&&(ke=te.slice(ze),qe[Ge]?qe[Ge]+=ke:qe[++Ge]=ke),qe.length<2?Je[0]?(te=Je[0].x,function($e){return te($e)+""}):function(){return te}:(te=Je.length,function($e){for(var st,yt=0;yt<te;++yt)qe[(st=Je[yt]).i]=st.x($e);return qe.join("")})}a.geom.delaunay=function(U){return a.geom.voronoi().triangles(U)},a.geom.quadtree=function(U,te,oe,_e,ke){var ze,Ge=Yn,qe=Nn;if(ze=arguments.length)return Ge=Oo,qe=Xl,ze===3&&(ke=oe,_e=te,oe=te=0),Je(U);function Je($e){var st,yt,_t,It,zt,Rt,Ht,Dt,sn,$t=zn(Ge),Zt=zn(qe);if(te!=null)Rt=te,Ht=oe,Dt=_e,sn=ke;else if(Dt=sn=-(Rt=Ht=1/0),yt=[],_t=[],zt=$e.length,ze)for(It=0;It<zt;++It)(st=$e[It]).x<Rt&&(Rt=st.x),st.y<Ht&&(Ht=st.y),st.x>Dt&&(Dt=st.x),st.y>sn&&(sn=st.y),yt.push(st.x),_t.push(st.y);else for(It=0;It<zt;++It){var xn=+$t(st=$e[It],It),bn=+Zt(st,It);xn<Rt&&(Rt=xn),bn<Ht&&(Ht=bn),xn>Dt&&(Dt=xn),bn>sn&&(sn=bn),yt.push(xn),_t.push(bn)}var Un=Dt-Rt,jn=sn-Ht;function Xn(cr,vr,Mr,Fr,Gn,ur,yr,Ar){if(!isNaN(Mr)&&!isNaN(Fr))if(cr.leaf){var Or=cr.x,jr=cr.y;if(Or!=null)if(x(Or-Mr)+x(jr-Fr)<.01)Qn(cr,vr,Mr,Fr,Gn,ur,yr,Ar);else{var Yr=cr.point;cr.x=cr.y=cr.point=null,Qn(cr,Yr,Or,jr,Gn,ur,yr,Ar),Qn(cr,vr,Mr,Fr,Gn,ur,yr,Ar)}else cr.x=Mr,cr.y=Fr,cr.point=vr}else Qn(cr,vr,Mr,Fr,Gn,ur,yr,Ar)}function Qn(cr,vr,Mr,Fr,Gn,ur,yr,Ar){var Or=.5*(Gn+yr),jr=.5*(ur+Ar),Yr=Mr>=Or,ai=Fr>=jr,Ti=ai<<1|Yr;cr.leaf=!1,Yr?Gn=Or:yr=Or,ai?ur=jr:Ar=jr,Xn(cr=cr.nodes[Ti]||(cr.nodes[Ti]={leaf:!0,nodes:[],point:null,x:null,y:null}),vr,Mr,Fr,Gn,ur,yr,Ar)}Un>jn?sn=Ht+Un:Dt=Rt+jn;var hr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(cr){Xn(hr,cr,+$t(cr,++It),+Zt(cr,It),Rt,Ht,Dt,sn)}};if(hr.visit=function(cr){ws(cr,hr,Rt,Ht,Dt,sn)},hr.find=function(cr){return function(vr,Mr,Fr,Gn,ur,yr,Ar){var Or,jr=1/0;return function Yr(ai,Ti,Mi,oi,Bi){if(!(Ti>yr||Mi>Ar||oi<Gn||Bi<ur)){if(la=ai.point){var la,Xi=Mr-ai.x,ea=Fr-ai.y,$r=Xi*Xi+ea*ea;if($r<jr){var qr=Math.sqrt(jr=$r);Gn=Mr-qr,ur=Fr-qr,yr=Mr+qr,Ar=Fr+qr,Or=la}}for(var Ai=ai.nodes,vi=.5*(Ti+oi),ki=.5*(Mi+Bi),Ea=(Fr>=ki)<<1|Mr>=vi,Oi=Ea+4;Ea<Oi;++Ea)if(ai=Ai[3&Ea])switch(3&Ea){case 0:Yr(ai,Ti,Mi,vi,ki);break;case 1:Yr(ai,vi,Mi,oi,ki);break;case 2:Yr(ai,Ti,ki,vi,Bi);break;case 3:Yr(ai,vi,ki,oi,Bi)}}}(vr,Gn,ur,yr,Ar),Or}(hr,cr[0],cr[1],Rt,Ht,Dt,sn)},It=-1,te==null){for(;++It<zt;)Xn(hr,$e[It],yt[It],_t[It],Rt,Ht,Dt,sn);--It}else $e.forEach(hr.add);return yt=_t=$e=st=null,hr}return Je.x=function($e){return arguments.length?(Ge=$e,Je):Ge},Je.y=function($e){return arguments.length?(qe=$e,Je):qe},Je.extent=function($e){return arguments.length?($e==null?te=oe=_e=ke=null:(te=+$e[0][0],oe=+$e[0][1],_e=+$e[1][0],ke=+$e[1][1]),Je):te==null?null:[[te,oe],[_e,ke]]},Je.size=function($e){return arguments.length?($e==null?te=oe=_e=ke=null:(te=oe=0,_e=+$e[0],ke=+$e[1]),Je):te==null?null:[_e-te,ke-oe]},Je},a.interpolateRgb=il,a.interpolateObject=Yl,a.interpolateNumber=yo,a.interpolateString=gu;var Ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ms=new RegExp(Ts.source,"g");function xo(U,te){for(var oe,_e=a.interpolators.length;--_e>=0&&!(oe=a.interpolators[_e](U,te)););return oe}function Wi(U,te){var oe,_e=[],ke=[],ze=U.length,Ge=te.length,qe=Math.min(U.length,te.length);for(oe=0;oe<qe;++oe)_e.push(xo(U[oe],te[oe]));for(;oe<ze;++oe)ke[oe]=U[oe];for(;oe<Ge;++oe)ke[oe]=te[oe];return function(Je){for(oe=0;oe<qe;++oe)ke[oe]=_e[oe](Je);return ke}}a.interpolate=xo,a.interpolators=[function(U,te){var oe=typeof te;return(oe==="string"?kn.has(te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(te)?il:gu:te instanceof rt?il:Array.isArray(te)?Wi:oe==="object"&&isNaN(te)?Yl:yo)(U,te)}],a.interpolateArray=Wi;var al=function(){return D},ti=a.map({linear:al,poly:function(U){return function(te){return Math.pow(te,U)}},quad:function(){return io},cubic:function(){return Qo},sin:function(){return Fo},exp:function(){return Ll},circle:function(){return vu},elastic:function(U,te){var oe;return arguments.length<2&&(te=.45),arguments.length?oe=te/Ot*Math.asin(1/U):(U=1,oe=te/4),function(_e){return 1+U*Math.pow(2,-10*_e)*Math.sin((_e-oe)*Ot/te)}},back:function(U){return U||(U=1.70158),function(te){return te*te*((U+1)*te-U)}},bounce:function(){return es}}),_o=a.map({in:D,out:Va,"in-out":Do,"out-in":function(U){return Do(Va(U))}});function Va(U){return function(te){return 1-U(1-te)}}function Do(U){return function(te){return .5*(te<.5?U(2*te):2-U(2-2*te))}}function io(U){return U*U}function Qo(U){return U*U*U}function zo(U){if(U<=0)return 0;if(U>=1)return 1;var te=U*U,oe=te*U;return 4*(U<.5?oe:3*(U-te)+oe-.75)}function Fo(U){return 1-Math.cos(U*et)}function Ll(U){return Math.pow(2,10*(U-1))}function vu(U){return 1-Math.sqrt(1-U*U)}function es(U){return U<.36363636363636365?7.5625*U*U:U<.7272727272727273?7.5625*(U-=.5454545454545454)*U+.75:U<.9090909090909091?7.5625*(U-=.8181818181818182)*U+.9375:7.5625*(U-=.9545454545454546)*U+.984375}function yu(U,te){return te-=U,function(oe){return Math.round(U+te*oe)}}function Zl(U){var te,oe,_e,ke=[U.a,U.b],ze=[U.c,U.d],Ge=Kl(ke),qe=xu(ke,ze),Je=Kl(((te=ze)[0]+=(_e=-qe)*(oe=ke)[0],te[1]+=_e*oe[1],te))||0;ke[0]*ze[1]<ze[0]*ke[1]&&(ke[0]*=-1,ke[1]*=-1,Ge*=-1,qe*=-1),this.rotate=(Ge?Math.atan2(ke[1],ke[0]):Math.atan2(-ze[0],ze[1]))*Ye,this.translate=[U.e,U.f],this.scale=[Ge,Je],this.skew=Je?Math.atan2(qe,Je)*Ye:0}function xu(U,te){return U[0]*te[0]+U[1]*te[1]}function Kl(U){var te=Math.sqrt(xu(U,U));return te&&(U[0]/=te,U[1]/=te),te}a.ease=function(U){var te,oe=U.indexOf("-"),_e=oe>=0?U.slice(0,oe):U,ke=oe>=0?U.slice(oe+1):"in";return _e=ti.get(_e)||al,ke=_o.get(ke)||D,te=ke(_e.apply(null,_.call(arguments,1))),function(ze){return ze<=0?0:ze>=1?1:te(ze)}},a.interpolateHcl=function(U,te){U=a.hcl(U),te=a.hcl(te);var oe=U.h,_e=U.c,ke=U.l,ze=te.h-oe,Ge=te.c-_e,qe=te.l-ke;return isNaN(Ge)&&(Ge=0,_e=isNaN(_e)?te.c:_e),isNaN(ze)?(ze=0,oe=isNaN(oe)?te.h:oe):ze>180?ze-=360:ze<-180&&(ze+=360),function(Je){return pt(oe+ze*Je,_e+Ge*Je,ke+qe*Je)+""}},a.interpolateHsl=function(U,te){U=a.hsl(U),te=a.hsl(te);var oe=U.h,_e=U.s,ke=U.l,ze=te.h-oe,Ge=te.s-_e,qe=te.l-ke;return isNaN(Ge)&&(Ge=0,_e=isNaN(_e)?te.s:_e),isNaN(ze)?(ze=0,oe=isNaN(oe)?te.h:oe):ze>180?ze-=360:ze<-180&&(ze+=360),function(Je){return xt(oe+ze*Je,_e+Ge*Je,ke+qe*Je)+""}},a.interpolateLab=function(U,te){U=a.lab(U),te=a.lab(te);var oe=U.l,_e=U.a,ke=U.b,ze=te.l-oe,Ge=te.a-_e,qe=te.b-ke;return function(Je){return Vt(oe+ze*Je,_e+Ge*Je,ke+qe*Je)+""}},a.interpolateRound=yu,a.transform=function(U){var te=h.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(oe){if(oe!=null){te.setAttribute("transform",oe);var _e=te.transform.baseVal.consolidate()}return new Zl(_e?_e.matrix:_u)})(U)},Zl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var _u={a:1,b:0,c:0,d:1,e:0,f:0};function Gs(U){return U.length?U.pop()+",":""}function ts(U,te){var oe=[],_e=[];return U=a.transform(U),te=a.transform(te),function(ke,ze,Ge,qe){if(ke[0]!==ze[0]||ke[1]!==ze[1]){var Je=Ge.push("translate(",null,",",null,")");qe.push({i:Je-4,x:yo(ke[0],ze[0])},{i:Je-2,x:yo(ke[1],ze[1])})}else(ze[0]||ze[1])&&Ge.push("translate("+ze+")")}(U.translate,te.translate,oe,_e),function(ke,ze,Ge,qe){ke!==ze?(ke-ze>180?ze+=360:ze-ke>180&&(ke+=360),qe.push({i:Ge.push(Gs(Ge)+"rotate(",null,")")-2,x:yo(ke,ze)})):ze&&Ge.push(Gs(Ge)+"rotate("+ze+")")}(U.rotate,te.rotate,oe,_e),function(ke,ze,Ge,qe){ke!==ze?qe.push({i:Ge.push(Gs(Ge)+"skewX(",null,")")-2,x:yo(ke,ze)}):ze&&Ge.push(Gs(Ge)+"skewX("+ze+")")}(U.skew,te.skew,oe,_e),function(ke,ze,Ge,qe){if(ke[0]!==ze[0]||ke[1]!==ze[1]){var Je=Ge.push(Gs(Ge)+"scale(",null,",",null,")");qe.push({i:Je-4,x:yo(ke[0],ze[0])},{i:Je-2,x:yo(ke[1],ze[1])})}else ze[0]===1&&ze[1]===1||Ge.push(Gs(Ge)+"scale("+ze+")")}(U.scale,te.scale,oe,_e),U=te=null,function(ke){for(var ze,Ge=-1,qe=_e.length;++Ge<qe;)oe[(ze=_e[Ge]).i]=ze.x(ke);return oe.join("")}}function As(U,te){return te=(te-=U=+U)||1/te,function(oe){return(oe-U)/te}}function Ws(U,te){return te=(te-=U=+U)||1/te,function(oe){return Math.max(0,Math.min(1,(oe-U)/te))}}function Cl(U){for(var te=U.source,oe=U.target,_e=function(Ge,qe){if(Ge===qe)return Ge;for(var Je=Jl(Ge),$e=Jl(qe),st=Je.pop(),yt=$e.pop(),_t=null;st===yt;)_t=st,st=Je.pop(),yt=$e.pop();return _t}(te,oe),ke=[te];te!==_e;)te=te.parent,ke.push(te);for(var ze=ke.length;oe!==_e;)ke.splice(ze,0,oe),oe=oe.parent;return ke}function Jl(U){for(var te=[],oe=U.parent;oe!=null;)te.push(U),U=oe,oe=oe.parent;return te.push(U),te}function $l(U){U.fixed|=2}function Za(U){U.fixed&=-7}function Ss(U){U.fixed|=4,U.px=U.x,U.py=U.y}function bo(U){U.fixed&=-5}function No(U,te,oe){var _e=0,ke=0;if(U.charge=0,!U.leaf)for(var ze,Ge=U.nodes,qe=Ge.length,Je=-1;++Je<qe;)(ze=Ge[Je])!=null&&(No(ze,te,oe),U.charge+=ze.charge,_e+=ze.charge*ze.cx,ke+=ze.charge*ze.cy);if(U.point){U.leaf||(U.point.x+=Math.random()-.5,U.point.y+=Math.random()-.5);var $e=te*oe[U.point.index];U.charge+=U.pointCharge=$e,_e+=$e*U.point.x,ke+=$e*U.point.y}U.cx=_e/U.charge,U.cy=ke/U.charge}a.interpolateTransform=ts,a.layout={},a.layout.bundle=function(){return function(U){for(var te=[],oe=-1,_e=U.length;++oe<_e;)te.push(Cl(U[oe]));return te}},a.layout.chord=function(){var U,te,oe,_e,ke,ze,Ge,qe={},Je=0;function $e(){var yt,_t,It,zt,Rt,Ht={},Dt=[],sn=a.range(_e),$t=[];for(U=[],te=[],yt=0,zt=-1;++zt<_e;){for(_t=0,Rt=-1;++Rt<_e;)_t+=oe[zt][Rt];Dt.push(_t),$t.push(a.range(_e)),yt+=_t}for(ke&&sn.sort(function(hr,cr){return ke(Dt[hr],Dt[cr])}),ze&&$t.forEach(function(hr,cr){hr.sort(function(vr,Mr){return ze(oe[cr][vr],oe[cr][Mr])})}),yt=(Ot-Je*_e)/yt,_t=0,zt=-1;++zt<_e;){for(It=_t,Rt=-1;++Rt<_e;){var Zt=sn[zt],xn=$t[Zt][Rt],bn=oe[Zt][xn],Un=_t,jn=_t+=bn*yt;Ht[Zt+"-"+xn]={index:Zt,subindex:xn,startAngle:Un,endAngle:jn,value:bn}}te[Zt]={index:Zt,startAngle:It,endAngle:_t,value:Dt[Zt]},_t+=Je}for(zt=-1;++zt<_e;)for(Rt=zt-1;++Rt<_e;){var Xn=Ht[zt+"-"+Rt],Qn=Ht[Rt+"-"+zt];(Xn.value||Qn.value)&&U.push(Xn.value<Qn.value?{source:Qn,target:Xn}:{source:Xn,target:Qn})}Ge&&st()}function st(){U.sort(function(yt,_t){return Ge((yt.source.value+yt.target.value)/2,(_t.source.value+_t.target.value)/2)})}return qe.matrix=function(yt){return arguments.length?(_e=(oe=yt)&&oe.length,U=te=null,qe):oe},qe.padding=function(yt){return arguments.length?(Je=yt,U=te=null,qe):Je},qe.sortGroups=function(yt){return arguments.length?(ke=yt,U=te=null,qe):ke},qe.sortSubgroups=function(yt){return arguments.length?(ze=yt,U=null,qe):ze},qe.sortChords=function(yt){return arguments.length?(Ge=yt,U&&st(),qe):Ge},qe.chords=function(){return U||$e(),U},qe.groups=function(){return te||$e(),te},qe},a.layout.force=function(){var U,te,oe,_e,ke,ze,Ge={},qe=a.dispatch("start","tick","end"),Je=[1,1],$e=.9,st=bu,yt=ns,_t=-30,It=pi,zt=.1,Rt=.64,Ht=[],Dt=[];function sn(Zt){return function(xn,bn,Un,jn){if(xn.point!==Zt){var Xn=xn.cx-Zt.x,Qn=xn.cy-Zt.y,hr=jn-bn,cr=Xn*Xn+Qn*Qn;if(hr*hr/Rt<cr){if(cr<It){var vr=xn.charge/cr;Zt.px-=Xn*vr,Zt.py-=Qn*vr}return!0}xn.point&&cr&&cr<It&&(vr=xn.pointCharge/cr,Zt.px-=Xn*vr,Zt.py-=Qn*vr)}return!xn.charge}}function $t(Zt){Zt.px=a.event.x,Zt.py=a.event.y,Ge.resume()}return Ge.tick=function(){if((oe*=.99)<.005)return U=null,qe.end({type:"end",alpha:oe=0}),!0;var Zt,xn,bn,Un,jn,Xn,Qn,hr,cr,vr=Ht.length,Mr=Dt.length;for(xn=0;xn<Mr;++xn)Un=(bn=Dt[xn]).source,(Xn=(hr=(jn=bn.target).x-Un.x)*hr+(cr=jn.y-Un.y)*cr)&&(hr*=Xn=oe*ke[xn]*((Xn=Math.sqrt(Xn))-_e[xn])/Xn,cr*=Xn,jn.x-=hr*(Qn=Un.weight+jn.weight?Un.weight/(Un.weight+jn.weight):.5),jn.y-=cr*Qn,Un.x+=hr*(Qn=1-Qn),Un.y+=cr*Qn);if((Qn=oe*zt)&&(hr=Je[0]/2,cr=Je[1]/2,xn=-1,Qn))for(;++xn<vr;)(bn=Ht[xn]).x+=(hr-bn.x)*Qn,bn.y+=(cr-bn.y)*Qn;if(_t)for(No(Zt=a.geom.quadtree(Ht),oe,ze),xn=-1;++xn<vr;)(bn=Ht[xn]).fixed||Zt.visit(sn(bn));for(xn=-1;++xn<vr;)(bn=Ht[xn]).fixed?(bn.x=bn.px,bn.y=bn.py):(bn.x-=(bn.px-(bn.px=bn.x))*$e,bn.y-=(bn.py-(bn.py=bn.y))*$e);qe.tick({type:"tick",alpha:oe})},Ge.nodes=function(Zt){return arguments.length?(Ht=Zt,Ge):Ht},Ge.links=function(Zt){return arguments.length?(Dt=Zt,Ge):Dt},Ge.size=function(Zt){return arguments.length?(Je=Zt,Ge):Je},Ge.linkDistance=function(Zt){return arguments.length?(st=typeof Zt=="function"?Zt:+Zt,Ge):st},Ge.distance=Ge.linkDistance,Ge.linkStrength=function(Zt){return arguments.length?(yt=typeof Zt=="function"?Zt:+Zt,Ge):yt},Ge.friction=function(Zt){return arguments.length?($e=+Zt,Ge):$e},Ge.charge=function(Zt){return arguments.length?(_t=typeof Zt=="function"?Zt:+Zt,Ge):_t},Ge.chargeDistance=function(Zt){return arguments.length?(It=Zt*Zt,Ge):Math.sqrt(It)},Ge.gravity=function(Zt){return arguments.length?(zt=+Zt,Ge):zt},Ge.theta=function(Zt){return arguments.length?(Rt=Zt*Zt,Ge):Math.sqrt(Rt)},Ge.alpha=function(Zt){return arguments.length?(Zt=+Zt,oe?Zt>0?oe=Zt:(U.c=null,U.t=NaN,U=null,qe.end({type:"end",alpha:oe=0})):Zt>0&&(qe.start({type:"start",alpha:oe=Zt}),U=ln(Ge.tick)),Ge):oe},Ge.start=function(){var Zt,xn,bn,Un=Ht.length,jn=Dt.length,Xn=Je[0],Qn=Je[1];for(Zt=0;Zt<Un;++Zt)(bn=Ht[Zt]).index=Zt,bn.weight=0;for(Zt=0;Zt<jn;++Zt)typeof(bn=Dt[Zt]).source=="number"&&(bn.source=Ht[bn.source]),typeof bn.target=="number"&&(bn.target=Ht[bn.target]),++bn.source.weight,++bn.target.weight;for(Zt=0;Zt<Un;++Zt)bn=Ht[Zt],isNaN(bn.x)&&(bn.x=hr("x",Xn)),isNaN(bn.y)&&(bn.y=hr("y",Qn)),isNaN(bn.px)&&(bn.px=bn.x),isNaN(bn.py)&&(bn.py=bn.y);if(_e=[],typeof st=="function")for(Zt=0;Zt<jn;++Zt)_e[Zt]=+st.call(this,Dt[Zt],Zt);else for(Zt=0;Zt<jn;++Zt)_e[Zt]=st;if(ke=[],typeof yt=="function")for(Zt=0;Zt<jn;++Zt)ke[Zt]=+yt.call(this,Dt[Zt],Zt);else for(Zt=0;Zt<jn;++Zt)ke[Zt]=yt;if(ze=[],typeof _t=="function")for(Zt=0;Zt<Un;++Zt)ze[Zt]=+_t.call(this,Ht[Zt],Zt);else for(Zt=0;Zt<Un;++Zt)ze[Zt]=_t;function hr(cr,vr){if(!xn){for(xn=new Array(Un),ur=0;ur<Un;++ur)xn[ur]=[];for(ur=0;ur<jn;++ur){var Mr=Dt[ur];xn[Mr.source.index].push(Mr.target),xn[Mr.target.index].push(Mr.source)}}for(var Fr,Gn=xn[Zt],ur=-1,yr=Gn.length;++ur<yr;)if(!isNaN(Fr=Gn[ur][cr]))return Fr;return Math.random()*vr}return Ge.resume()},Ge.resume=function(){return Ge.alpha(.1)},Ge.stop=function(){return Ge.alpha(0)},Ge.drag=function(){if(te||(te=a.behavior.drag().origin(D).on("dragstart.force",$l).on("drag.force",$t).on("dragend.force",Za)),!arguments.length)return te;this.on("mouseover.force",Ss).on("mouseout.force",bo).call(te)},a.rebind(Ge,qe,"on")};var bu=20,ns=1,pi=1/0;function ao(U,te){return a.rebind(U,te,"sort","children","value"),U.nodes=U,U.links=wu,U}function ol(U,te){for(var oe=[U];(U=oe.pop())!=null;)if(te(U),(ke=U.children)&&(_e=ke.length))for(var _e,ke;--_e>=0;)oe.push(ke[_e])}function Ka(U,te){for(var oe=[U],_e=[];(U=oe.pop())!=null;)if(_e.push(U),(ze=U.children)&&(ke=ze.length))for(var ke,ze,Ge=-1;++Ge<ke;)oe.push(ze[Ge]);for(;(U=_e.pop())!=null;)te(U)}function Es(U){return U.children}function Xu(U){return U.value}function Pl(U,te){return te.value-U.value}function wu(U){return a.merge(U.map(function(te){return(te.children||[]).map(function(oe){return{source:te,target:oe}})}))}a.layout.hierarchy=function(){var U=Pl,te=Es,oe=Xu;function _e(ke){var ze,Ge=[ke],qe=[];for(ke.depth=0;(ze=Ge.pop())!=null;)if(qe.push(ze),($e=te.call(_e,ze,ze.depth))&&(Je=$e.length)){for(var Je,$e,st;--Je>=0;)Ge.push(st=$e[Je]),st.parent=ze,st.depth=ze.depth+1;oe&&(ze.value=0),ze.children=$e}else oe&&(ze.value=+oe.call(_e,ze,ze.depth)||0),delete ze.children;return Ka(ke,function(yt){var _t,It;U&&(_t=yt.children)&&_t.sort(U),oe&&(It=yt.parent)&&(It.value+=yt.value)}),qe}return _e.sort=function(ke){return arguments.length?(U=ke,_e):U},_e.children=function(ke){return arguments.length?(te=ke,_e):te},_e.value=function(ke){return arguments.length?(oe=ke,_e):oe},_e.revalue=function(ke){return oe&&(ol(ke,function(ze){ze.children&&(ze.value=0)}),Ka(ke,function(ze){var Ge;ze.children||(ze.value=+oe.call(_e,ze,ze.depth)||0),(Ge=ze.parent)&&(Ge.value+=ze.value)})),ke},_e},a.layout.partition=function(){var U=a.layout.hierarchy(),te=[1,1];function oe(ze,Ge,qe,Je){var $e=ze.children;if(ze.x=Ge,ze.y=ze.depth*Je,ze.dx=qe,ze.dy=Je,$e&&(st=$e.length)){var st,yt,_t,It=-1;for(qe=ze.value?qe/ze.value:0;++It<st;)oe(yt=$e[It],Ge,_t=yt.value*qe,Je),Ge+=_t}}function _e(ze){var Ge=ze.children,qe=0;if(Ge&&(Je=Ge.length))for(var Je,$e=-1;++$e<Je;)qe=Math.max(qe,_e(Ge[$e]));return 1+qe}function ke(ze,Ge){var qe=U.call(this,ze,Ge);return oe(qe[0],0,te[0],te[1]/_e(qe[0])),qe}return ke.size=function(ze){return arguments.length?(te=ze,ke):te},ao(ke,U)},a.layout.pie=function(){var U=Number,te=Tu,oe=0,_e=Ot,ke=0;function ze(Ge){var qe,Je=Ge.length,$e=Ge.map(function(sn,$t){return+U.call(ze,sn,$t)}),st=+(typeof oe=="function"?oe.apply(this,arguments):oe),yt=(typeof _e=="function"?_e.apply(this,arguments):_e)-st,_t=Math.min(Math.abs(yt)/Je,+(typeof ke=="function"?ke.apply(this,arguments):ke)),It=_t*(yt<0?-1:1),zt=a.sum($e),Rt=zt?(yt-Je*It)/zt:0,Ht=a.range(Je),Dt=[];return te!=null&&Ht.sort(te===Tu?function(sn,$t){return $e[$t]-$e[sn]}:function(sn,$t){return te(Ge[sn],Ge[$t])}),Ht.forEach(function(sn){Dt[sn]={data:Ge[sn],value:qe=$e[sn],startAngle:st,endAngle:st+=qe*Rt+It,padAngle:_t}}),Dt}return ze.value=function(Ge){return arguments.length?(U=Ge,ze):U},ze.sort=function(Ge){return arguments.length?(te=Ge,ze):te},ze.startAngle=function(Ge){return arguments.length?(oe=Ge,ze):oe},ze.endAngle=function(Ge){return arguments.length?(_e=Ge,ze):_e},ze.padAngle=function(Ge){return arguments.length?(ke=Ge,ze):ke},ze};var Tu={};function sl(U){return U.x}function qs(U){return U.y}function ll(U,te,oe){U.y0=te,U.y=oe}a.layout.stack=function(){var U=D,te=is,oe=Uo,_e=ll,ke=sl,ze=qs;function Ge(qe,Je){if(!(_t=qe.length))return qe;var $e=qe.map(function(sn,$t){return U.call(Ge,sn,$t)}),st=$e.map(function(sn){return sn.map(function($t,Zt){return[ke.call(Ge,$t,Zt),ze.call(Ge,$t,Zt)]})}),yt=te.call(Ge,st,Je);$e=a.permute($e,yt),st=a.permute(st,yt);var _t,It,zt,Rt,Ht=oe.call(Ge,st,Je),Dt=$e[0].length;for(zt=0;zt<Dt;++zt)for(_e.call(Ge,$e[0][zt],Rt=Ht[zt],st[0][zt][1]),It=1;It<_t;++It)_e.call(Ge,$e[It][zt],Rt+=st[It-1][zt][1],st[It][zt][1]);return qe}return Ge.values=function(qe){return arguments.length?(U=qe,Ge):U},Ge.order=function(qe){return arguments.length?(te=typeof qe=="function"?qe:rs.get(qe)||is,Ge):te},Ge.offset=function(qe){return arguments.length?(oe=typeof qe=="function"?qe:Bo.get(qe)||Uo,Ge):oe},Ge.x=function(qe){return arguments.length?(ke=qe,Ge):ke},Ge.y=function(qe){return arguments.length?(ze=qe,Ge):ze},Ge.out=function(qe){return arguments.length?(_e=qe,Ge):_e},Ge};var rs=a.map({"inside-out":function(U){var te,oe,_e=U.length,ke=U.map(Rl),ze=U.map(oo),Ge=a.range(_e).sort(function(yt,_t){return ke[yt]-ke[_t]}),qe=0,Je=0,$e=[],st=[];for(te=0;te<_e;++te)oe=Ge[te],qe<Je?(qe+=ze[oe],$e.push(oe)):(Je+=ze[oe],st.push(oe));return st.reverse().concat($e)},reverse:function(U){return a.range(U.length).reverse()},default:is}),Bo=a.map({silhouette:function(U){var te,oe,_e,ke=U.length,ze=U[0].length,Ge=[],qe=0,Je=[];for(oe=0;oe<ze;++oe){for(te=0,_e=0;te<ke;te++)_e+=U[te][oe][1];_e>qe&&(qe=_e),Ge.push(_e)}for(oe=0;oe<ze;++oe)Je[oe]=(qe-Ge[oe])/2;return Je},wiggle:function(U){var te,oe,_e,ke,ze,Ge,qe,Je,$e,st=U.length,yt=U[0],_t=yt.length,It=[];for(It[0]=Je=$e=0,oe=1;oe<_t;++oe){for(te=0,ke=0;te<st;++te)ke+=U[te][oe][1];for(te=0,ze=0,qe=yt[oe][0]-yt[oe-1][0];te<st;++te){for(_e=0,Ge=(U[te][oe][1]-U[te][oe-1][1])/(2*qe);_e<te;++_e)Ge+=(U[_e][oe][1]-U[_e][oe-1][1])/qe;ze+=Ge*U[te][oe][1]}It[oe]=Je-=ke?ze/ke*qe:0,Je<$e&&($e=Je)}for(oe=0;oe<_t;++oe)It[oe]-=$e;return It},expand:function(U){var te,oe,_e,ke=U.length,ze=U[0].length,Ge=1/ke,qe=[];for(oe=0;oe<ze;++oe){for(te=0,_e=0;te<ke;te++)_e+=U[te][oe][1];if(_e)for(te=0;te<ke;te++)U[te][oe][1]/=_e;else for(te=0;te<ke;te++)U[te][oe][1]=Ge}for(oe=0;oe<ze;++oe)qe[oe]=0;return qe},zero:Uo});function is(U){return a.range(U.length)}function Uo(U){for(var te=-1,oe=U[0].length,_e=[];++te<oe;)_e[te]=0;return _e}function Rl(U){for(var te,oe=1,_e=0,ke=U[0][1],ze=U.length;oe<ze;++oe)(te=U[oe][1])>ke&&(_e=oe,ke=te);return _e}function oo(U){return U.reduce(Mu,0)}function Mu(U,te){return U+te[1]}function Au(U,te){return Il(U,Math.ceil(Math.log(te.length)/Math.LN2+1))}function Il(U,te){for(var oe=-1,_e=+U[0],ke=(U[1]-_e)/te,ze=[];++oe<=te;)ze[oe]=ke*oe+_e;return ze}function as(U){return[a.min(U),a.max(U)]}function Ol(U,te){return U.value-te.value}function ks(U,te){var oe=U._pack_next;U._pack_next=te,te._pack_prev=U,te._pack_next=oe,oe._pack_prev=te}function Ql(U,te){U._pack_next=te,te._pack_prev=U}function Xs(U,te){var oe=te.x-U.x,_e=te.y-U.y,ke=U.r+te.r;return .999*ke*ke>oe*oe+_e*_e}function Ls(U){if((te=U.children)&&(Je=te.length)){var te,oe,_e,ke,ze,Ge,qe,Je,$e=1/0,st=-1/0,yt=1/0,_t=-1/0;if(te.forEach(ul),(oe=te[0]).x=-oe.r,oe.y=0,$t(oe),Je>1&&((_e=te[1]).x=_e.r,_e.y=0,$t(_e),Je>2))for(os(oe,_e,ke=te[2]),$t(ke),ks(oe,ke),oe._pack_prev=ke,ks(ke,_e),_e=oe._pack_next,ze=3;ze<Je;ze++){os(oe,_e,ke=te[ze]);var It=0,zt=1,Rt=1;for(Ge=_e._pack_next;Ge!==_e;Ge=Ge._pack_next,zt++)if(Xs(Ge,ke)){It=1;break}if(It==1)for(qe=oe._pack_prev;qe!==Ge._pack_prev&&!Xs(qe,ke);qe=qe._pack_prev,Rt++);It?(zt<Rt||zt==Rt&&_e.r<oe.r?Ql(oe,_e=Ge):Ql(oe=qe,_e),ze--):(ks(oe,ke),_e=ke,$t(ke))}var Ht=($e+st)/2,Dt=(yt+_t)/2,sn=0;for(ze=0;ze<Je;ze++)(ke=te[ze]).x-=Ht,ke.y-=Dt,sn=Math.max(sn,ke.r+Math.sqrt(ke.x*ke.x+ke.y*ke.y));U.r=sn,te.forEach(Ys)}function $t(Zt){$e=Math.min(Zt.x-Zt.r,$e),st=Math.max(Zt.x+Zt.r,st),yt=Math.min(Zt.y-Zt.r,yt),_t=Math.max(Zt.y+Zt.r,_t)}}function ul(U){U._pack_next=U._pack_prev=U}function Ys(U){delete U._pack_next,delete U._pack_prev}function di(U,te,oe,_e){var ke=U.children;if(U.x=te+=_e*U.x,U.y=oe+=_e*U.y,U.r*=_e,ke)for(var ze=-1,Ge=ke.length;++ze<Ge;)di(ke[ze],te,oe,_e)}function os(U,te,oe){var _e=U.r+oe.r,ke=te.x-U.x,ze=te.y-U.y;if(_e&&(ke||ze)){var Ge=te.r+oe.r,qe=ke*ke+ze*ze,Je=.5+((_e*=_e)-(Ge*=Ge))/(2*qe),$e=Math.sqrt(Math.max(0,2*Ge*(_e+qe)-(_e-=qe)*_e-Ge*Ge))/(2*qe);oe.x=U.x+Je*ke+$e*ze,oe.y=U.y+Je*ze-$e*ke}else oe.x=U.x+_e,oe.y=U.y}function jo(U,te){return U.parent==te.parent?1:2}function ia(U){var te=U.children;return te.length?te[0]:U.t}function Zr(U){var te,oe=U.children;return(te=oe.length)?oe[te-1]:U.t}function ni(U,te,oe){var _e=oe/(te.i-U.i);te.c-=_e,te.s+=oe,U.c+=_e,te.z+=oe,te.m+=oe}function ss(U,te,oe){return U.a.parent===te.parent?U.a:oe}function Vo(U){var te=U.children;return te&&te.length?Vo(te[0]):U}function eu(U){var te,oe=U.children;return oe&&(te=oe.length)?eu(oe[te-1]):U}function cl(U){return{x:U.x,y:U.y,dx:U.dx,dy:U.dy}}function ls(U,te){var oe=U.x+te[3],_e=U.y+te[0],ke=U.dx-te[1]-te[3],ze=U.dy-te[0]-te[2];return ke<0&&(oe+=ke/2,ke=0),ze<0&&(_e+=ze/2,ze=0),{x:oe,y:_e,dx:ke,dy:ze}}function fl(U){var te=U[0],oe=U[U.length-1];return te<oe?[te,oe]:[oe,te]}function Ho(U){return U.rangeExtent?U.rangeExtent():fl(U.range())}function Cs(U,te,oe,_e){var ke=oe(U[0],U[1]),ze=_e(te[0],te[1]);return function(Ge){return ze(ke(Ge))}}function us(U,te){var oe,_e=0,ke=U.length-1,ze=U[_e],Ge=U[ke];return Ge<ze&&(oe=_e,_e=ke,ke=oe,oe=ze,ze=Ge,Ge=oe),U[_e]=te.floor(ze),U[ke]=te.ceil(Ge),U}function Pi(U){return U?{floor:function(te){return Math.floor(te/U)*U},ceil:function(te){return Math.ceil(te/U)*U}}:Ps}a.layout.histogram=function(){var U=!0,te=Number,oe=as,_e=Au;function ke(ze,Ge){for(var qe,Je,$e=[],st=ze.map(te,this),yt=oe.call(this,st,Ge),_t=_e.call(this,yt,st,Ge),It=(Ge=-1,st.length),zt=_t.length-1,Rt=U?1:1/It;++Ge<zt;)(qe=$e[Ge]=[]).dx=_t[Ge+1]-(qe.x=_t[Ge]),qe.y=0;if(zt>0)for(Ge=-1;++Ge<It;)(Je=st[Ge])>=yt[0]&&Je<=yt[1]&&((qe=$e[a.bisect(_t,Je,1,zt)-1]).y+=Rt,qe.push(ze[Ge]));return $e}return ke.value=function(ze){return arguments.length?(te=ze,ke):te},ke.range=function(ze){return arguments.length?(oe=zn(ze),ke):oe},ke.bins=function(ze){return arguments.length?(_e=typeof ze=="number"?function(Ge){return Il(Ge,ze)}:zn(ze),ke):_e},ke.frequency=function(ze){return arguments.length?(U=!!ze,ke):U},ke},a.layout.pack=function(){var U,te=a.layout.hierarchy().sort(Ol),oe=0,_e=[1,1];function ke(ze,Ge){var qe=te.call(this,ze,Ge),Je=qe[0],$e=_e[0],st=_e[1],yt=U==null?Math.sqrt:typeof U=="function"?U:function(){return U};if(Je.x=Je.y=0,Ka(Je,function(It){It.r=+yt(It.value)}),Ka(Je,Ls),oe){var _t=oe*(U?1:Math.max(2*Je.r/$e,2*Je.r/st))/2;Ka(Je,function(It){It.r+=_t}),Ka(Je,Ls),Ka(Je,function(It){It.r-=_t})}return di(Je,$e/2,st/2,U?1:1/Math.max(2*Je.r/$e,2*Je.r/st)),qe}return ke.size=function(ze){return arguments.length?(_e=ze,ke):_e},ke.radius=function(ze){return arguments.length?(U=ze==null||typeof ze=="function"?ze:+ze,ke):U},ke.padding=function(ze){return arguments.length?(oe=+ze,ke):oe},ao(ke,te)},a.layout.tree=function(){var U=a.layout.hierarchy().sort(null).value(null),te=jo,oe=[1,1],_e=null;function ke(Je,$e){var st=U.call(this,Je,$e),yt=st[0],_t=function($t){for(var Zt,xn={A:null,children:[$t]},bn=[xn];(Zt=bn.pop())!=null;)for(var Un,jn=Zt.children,Xn=0,Qn=jn.length;Xn<Qn;++Xn)bn.push((jn[Xn]=Un={_:jn[Xn],parent:Zt,children:(Un=jn[Xn].children)&&Un.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Xn}).a=Un);return xn.children[0]}(yt);if(Ka(_t,ze),_t.parent.m=-_t.z,ol(_t,Ge),_e)ol(yt,qe);else{var It=yt,zt=yt,Rt=yt;ol(yt,function($t){$t.x<It.x&&(It=$t),$t.x>zt.x&&(zt=$t),$t.depth>Rt.depth&&(Rt=$t)});var Ht=te(It,zt)/2-It.x,Dt=oe[0]/(zt.x+te(zt,It)/2+Ht),sn=oe[1]/(Rt.depth||1);ol(yt,function($t){$t.x=($t.x+Ht)*Dt,$t.y=$t.depth*sn})}return st}function ze(Je){var $e=Je.children,st=Je.parent.children,yt=Je.i?st[Je.i-1]:null;if($e.length){(function(It){for(var zt,Rt=0,Ht=0,Dt=It.children,sn=Dt.length;--sn>=0;)(zt=Dt[sn]).z+=Rt,zt.m+=Rt,Rt+=zt.s+(Ht+=zt.c)})(Je);var _t=($e[0].z+$e[$e.length-1].z)/2;yt?(Je.z=yt.z+te(Je._,yt._),Je.m=Je.z-_t):Je.z=_t}else yt&&(Je.z=yt.z+te(Je._,yt._));Je.parent.A=function(It,zt,Rt){if(zt){for(var Ht,Dt=It,sn=It,$t=zt,Zt=Dt.parent.children[0],xn=Dt.m,bn=sn.m,Un=$t.m,jn=Zt.m;$t=Zr($t),Dt=ia(Dt),$t&&Dt;)Zt=ia(Zt),(sn=Zr(sn)).a=It,(Ht=$t.z+Un-Dt.z-xn+te($t._,Dt._))>0&&(ni(ss($t,It,Rt),It,Ht),xn+=Ht,bn+=Ht),Un+=$t.m,xn+=Dt.m,jn+=Zt.m,bn+=sn.m;$t&&!Zr(sn)&&(sn.t=$t,sn.m+=Un-bn),Dt&&!ia(Zt)&&(Zt.t=Dt,Zt.m+=xn-jn,Rt=It)}return Rt}(Je,yt,Je.parent.A||st[0])}function Ge(Je){Je._.x=Je.z+Je.parent.m,Je.m+=Je.parent.m}function qe(Je){Je.x*=oe[0],Je.y=Je.depth*oe[1]}return ke.separation=function(Je){return arguments.length?(te=Je,ke):te},ke.size=function(Je){return arguments.length?(_e=(oe=Je)==null?qe:null,ke):_e?null:oe},ke.nodeSize=function(Je){return arguments.length?(_e=(oe=Je)==null?null:qe,ke):_e?oe:null},ao(ke,U)},a.layout.cluster=function(){var U=a.layout.hierarchy().sort(null).value(null),te=jo,oe=[1,1],_e=!1;function ke(ze,Ge){var qe,Je=U.call(this,ze,Ge),$e=Je[0],st=0;Ka($e,function(Rt){var Ht=Rt.children;Ht&&Ht.length?(Rt.x=function(Dt){return Dt.reduce(function(sn,$t){return sn+$t.x},0)/Dt.length}(Ht),Rt.y=function(Dt){return 1+a.max(Dt,function(sn){return sn.y})}(Ht)):(Rt.x=qe?st+=te(Rt,qe):0,Rt.y=0,qe=Rt)});var yt=Vo($e),_t=eu($e),It=yt.x-te(yt,_t)/2,zt=_t.x+te(_t,yt)/2;return Ka($e,_e?function(Rt){Rt.x=(Rt.x-$e.x)*oe[0],Rt.y=($e.y-Rt.y)*oe[1]}:function(Rt){Rt.x=(Rt.x-It)/(zt-It)*oe[0],Rt.y=(1-($e.y?Rt.y/$e.y:1))*oe[1]}),Je}return ke.separation=function(ze){return arguments.length?(te=ze,ke):te},ke.size=function(ze){return arguments.length?(_e=(oe=ze)==null,ke):_e?null:oe},ke.nodeSize=function(ze){return arguments.length?(_e=(oe=ze)!=null,ke):_e?oe:null},ao(ke,U)},a.layout.treemap=function(){var U,te=a.layout.hierarchy(),oe=Math.round,_e=[1,1],ke=null,ze=cl,Ge=!1,qe="squarify",Je=.5*(1+Math.sqrt(5));function $e(Rt,Ht){for(var Dt,sn,$t=-1,Zt=Rt.length;++$t<Zt;)sn=(Dt=Rt[$t]).value*(Ht<0?0:Ht),Dt.area=isNaN(sn)||sn<=0?0:sn}function st(Rt){var Ht=Rt.children;if(Ht&&Ht.length){var Dt,sn,$t,Zt=ze(Rt),xn=[],bn=Ht.slice(),Un=1/0,jn=qe==="slice"?Zt.dx:qe==="dice"?Zt.dy:qe==="slice-dice"?1&Rt.depth?Zt.dy:Zt.dx:Math.min(Zt.dx,Zt.dy);for($e(bn,Zt.dx*Zt.dy/Rt.value),xn.area=0;($t=bn.length)>0;)xn.push(Dt=bn[$t-1]),xn.area+=Dt.area,qe!=="squarify"||(sn=_t(xn,jn))<=Un?(bn.pop(),Un=sn):(xn.area-=xn.pop().area,It(xn,jn,Zt,!1),jn=Math.min(Zt.dx,Zt.dy),xn.length=xn.area=0,Un=1/0);xn.length&&(It(xn,jn,Zt,!0),xn.length=xn.area=0),Ht.forEach(st)}}function yt(Rt){var Ht=Rt.children;if(Ht&&Ht.length){var Dt,sn=ze(Rt),$t=Ht.slice(),Zt=[];for($e($t,sn.dx*sn.dy/Rt.value),Zt.area=0;Dt=$t.pop();)Zt.push(Dt),Zt.area+=Dt.area,Dt.z!=null&&(It(Zt,Dt.z?sn.dx:sn.dy,sn,!$t.length),Zt.length=Zt.area=0);Ht.forEach(yt)}}function _t(Rt,Ht){for(var Dt,sn=Rt.area,$t=0,Zt=1/0,xn=-1,bn=Rt.length;++xn<bn;)(Dt=Rt[xn].area)&&(Dt<Zt&&(Zt=Dt),Dt>$t&&($t=Dt));return Ht*=Ht,(sn*=sn)?Math.max(Ht*$t*Je/sn,sn/(Ht*Zt*Je)):1/0}function It(Rt,Ht,Dt,sn){var $t,Zt=-1,xn=Rt.length,bn=Dt.x,Un=Dt.y,jn=Ht?oe(Rt.area/Ht):0;if(Ht==Dt.dx){for((sn||jn>Dt.dy)&&(jn=Dt.dy);++Zt<xn;)($t=Rt[Zt]).x=bn,$t.y=Un,$t.dy=jn,bn+=$t.dx=Math.min(Dt.x+Dt.dx-bn,jn?oe($t.area/jn):0);$t.z=!0,$t.dx+=Dt.x+Dt.dx-bn,Dt.y+=jn,Dt.dy-=jn}else{for((sn||jn>Dt.dx)&&(jn=Dt.dx);++Zt<xn;)($t=Rt[Zt]).x=bn,$t.y=Un,$t.dx=jn,Un+=$t.dy=Math.min(Dt.y+Dt.dy-Un,jn?oe($t.area/jn):0);$t.z=!1,$t.dy+=Dt.y+Dt.dy-Un,Dt.x+=jn,Dt.dx-=jn}}function zt(Rt){var Ht=U||te(Rt),Dt=Ht[0];return Dt.x=Dt.y=0,Dt.value?(Dt.dx=_e[0],Dt.dy=_e[1]):Dt.dx=Dt.dy=0,U&&te.revalue(Dt),$e([Dt],Dt.dx*Dt.dy/Dt.value),(U?yt:st)(Dt),Ge&&(U=Ht),Ht}return zt.size=function(Rt){return arguments.length?(_e=Rt,zt):_e},zt.padding=function(Rt){if(!arguments.length)return ke;function Ht(sn){return ls(sn,Rt)}var Dt;return ze=(ke=Rt)==null?cl:(Dt=typeof Rt)=="function"?function(sn){var $t=Rt.call(zt,sn,sn.depth);return $t==null?cl(sn):ls(sn,typeof $t=="number"?[$t,$t,$t,$t]:$t)}:(Dt==="number"&&(Rt=[Rt,Rt,Rt,Rt]),Ht),zt},zt.round=function(Rt){return arguments.length?(oe=Rt?Math.round:Number,zt):oe!=Number},zt.sticky=function(Rt){return arguments.length?(Ge=Rt,U=null,zt):Ge},zt.ratio=function(Rt){return arguments.length?(Je=Rt,zt):Je},zt.mode=function(Rt){return arguments.length?(qe=Rt+"",zt):qe},ao(zt,te)},a.random={normal:function(U,te){var oe=arguments.length;return oe<2&&(te=1),oe<1&&(U=0),function(){var _e,ke,ze;do ze=(_e=2*Math.random()-1)*_e+(ke=2*Math.random()-1)*ke;while(!ze||ze>1);return U+te*_e*Math.sqrt(-2*Math.log(ze)/ze)}},logNormal:function(){var U=a.random.normal.apply(a,arguments);return function(){return Math.exp(U())}},bates:function(U){var te=a.random.irwinHall(U);return function(){return te()/U}},irwinHall:function(U){return function(){for(var te=0,oe=0;oe<U;oe++)te+=Math.random();return te}}},a.scale={};var Ps={floor:D,ceil:D};function Rs(U,te,oe,_e){var ke=[],ze=[],Ge=0,qe=Math.min(U.length,te.length)-1;for(U[qe]<U[0]&&(U=U.slice().reverse(),te=te.slice().reverse());++Ge<=qe;)ke.push(oe(U[Ge-1],U[Ge])),ze.push(_e(te[Ge-1],te[Ge]));return function(Je){var $e=a.bisect(U,Je,1,qe)-1;return ze[$e](ke[$e](Je))}}function Zi(U,te,oe,_e){var ke,ze;function Ge(){var Je=Math.min(U.length,te.length)>2?Rs:Cs,$e=_e?Ws:As;return ke=Je(U,te,$e,oe),ze=Je(te,U,$e,xo),qe}function qe(Je){return ke(Je)}return qe.invert=function(Je){return ze(Je)},qe.domain=function(Je){return arguments.length?(U=Je.map(Number),Ge()):U},qe.range=function(Je){return arguments.length?(te=Je,Ge()):te},qe.rangeRound=function(Je){return qe.range(Je).interpolate(yu)},qe.clamp=function(Je){return arguments.length?(_e=Je,Ge()):_e},qe.interpolate=function(Je){return arguments.length?(oe=Je,Ge()):oe},qe.ticks=function(Je){return Ta(U,Je)},qe.tickFormat=function(Je,$e){return d3_scale_linearTickFormat(U,Je,$e)},qe.nice=function(Je){return fa(U,Je),Ge()},qe.copy=function(){return Zi(U,te,oe,_e)},Ge()}function ga(U,te){return a.rebind(U,te,"range","rangeRound","interpolate","clamp")}function fa(U,te){return us(U,Pi(Ki(U,te)[2])),us(U,Pi(Ki(U,te)[2])),U}function Ki(U,te){te==null&&(te=10);var oe=fl(U),_e=oe[1]-oe[0],ke=Math.pow(10,Math.floor(Math.log(_e/te)/Math.LN10)),ze=te/_e*ke;return ze<=.15?ke*=10:ze<=.35?ke*=5:ze<=.75&&(ke*=2),oe[0]=Math.ceil(oe[0]/ke)*ke,oe[1]=Math.floor(oe[1]/ke)*ke+.5*ke,oe[2]=ke,oe}function Ta(U,te){return a.range.apply(a,Ki(U,te))}function cs(U,te,oe,_e){function ke(qe){return(oe?Math.log(qe<0?0:qe):-Math.log(qe>0?0:-qe))/Math.log(te)}function ze(qe){return oe?Math.pow(te,qe):-Math.pow(te,-qe)}function Ge(qe){return U(ke(qe))}return Ge.invert=function(qe){return ze(U.invert(qe))},Ge.domain=function(qe){return arguments.length?(oe=qe[0]>=0,U.domain((_e=qe.map(Number)).map(ke)),Ge):_e},Ge.base=function(qe){return arguments.length?(te=+qe,U.domain(_e.map(ke)),Ge):te},Ge.nice=function(){var qe=us(_e.map(ke),oe?Math:so);return U.domain(qe),_e=qe.map(ze),Ge},Ge.ticks=function(){var qe=fl(_e),Je=[],$e=qe[0],st=qe[1],yt=Math.floor(ke($e)),_t=Math.ceil(ke(st)),It=te%1?2:te;if(isFinite(_t-yt)){if(oe){for(;yt<_t;yt++)for(var zt=1;zt<It;zt++)Je.push(ze(yt)*zt);Je.push(ze(yt))}else for(Je.push(ze(yt));yt++<_t;)for(zt=It-1;zt>0;zt--)Je.push(ze(yt)*zt);for(yt=0;Je[yt]<$e;yt++);for(_t=Je.length;Je[_t-1]>st;_t--);Je=Je.slice(yt,_t)}return Je},Ge.copy=function(){return cs(U.copy(),te,oe,_e)},ga(Ge,U)}a.scale.linear=function(){return Zi([0,1],[0,1],xo,!1)},a.scale.log=function(){return cs(a.scale.linear().domain([0,1]),10,!0,[1,10])};var so={floor:function(U){return-Math.ceil(-U)},ceil:function(U){return-Math.floor(-U)}};function aa(U,te,oe){var _e=Ha(te),ke=Ha(1/te);function ze(Ge){return U(_e(Ge))}return ze.invert=function(Ge){return ke(U.invert(Ge))},ze.domain=function(Ge){return arguments.length?(U.domain((oe=Ge.map(Number)).map(_e)),ze):oe},ze.ticks=function(Ge){return Ta(oe,Ge)},ze.tickFormat=function(Ge,qe){return d3_scale_linearTickFormat(oe,Ge,qe)},ze.nice=function(Ge){return ze.domain(fa(oe,Ge))},ze.exponent=function(Ge){return arguments.length?(_e=Ha(te=Ge),ke=Ha(1/te),U.domain(oe.map(_e)),ze):te},ze.copy=function(){return aa(U.copy(),te,oe)},ga(ze,U)}function Ha(U){return function(te){return te<0?-Math.pow(-te,U):Math.pow(te,U)}}function Ja(U,te){var oe,_e,ke;function ze(qe){return _e[((oe.get(qe)||(te.t==="range"?oe.set(qe,U.push(qe)):NaN))-1)%_e.length]}function Ge(qe,Je){return a.range(U.length).map(function($e){return qe+Je*$e})}return ze.domain=function(qe){if(!arguments.length)return U;U=[],oe=new v;for(var Je,$e=-1,st=qe.length;++$e<st;)oe.has(Je=qe[$e])||oe.set(Je,U.push(Je));return ze[te.t].apply(ze,te.a)},ze.range=function(qe){return arguments.length?(_e=qe,ke=0,te={t:"range",a:arguments},ze):_e},ze.rangePoints=function(qe,Je){arguments.length<2&&(Je=0);var $e=qe[0],st=qe[1],yt=U.length<2?($e=($e+st)/2,0):(st-$e)/(U.length-1+Je);return _e=Ge($e+yt*Je/2,yt),ke=0,te={t:"rangePoints",a:arguments},ze},ze.rangeRoundPoints=function(qe,Je){arguments.length<2&&(Je=0);var $e=qe[0],st=qe[1],yt=U.length<2?($e=st=Math.round(($e+st)/2),0):(st-$e)/(U.length-1+Je)|0;return _e=Ge($e+Math.round(yt*Je/2+(st-$e-(U.length-1+Je)*yt)/2),yt),ke=0,te={t:"rangeRoundPoints",a:arguments},ze},ze.rangeBands=function(qe,Je,$e){arguments.length<2&&(Je=0),arguments.length<3&&($e=Je);var st=qe[1]<qe[0],yt=qe[st-0],_t=(qe[1-st]-yt)/(U.length-Je+2*$e);return _e=Ge(yt+_t*$e,_t),st&&_e.reverse(),ke=_t*(1-Je),te={t:"rangeBands",a:arguments},ze},ze.rangeRoundBands=function(qe,Je,$e){arguments.length<2&&(Je=0),arguments.length<3&&($e=Je);var st=qe[1]<qe[0],yt=qe[st-0],_t=qe[1-st],It=Math.floor((_t-yt)/(U.length-Je+2*$e));return _e=Ge(yt+Math.round((_t-yt-(U.length-Je)*It)/2),It),st&&_e.reverse(),ke=Math.round(It*(1-Je)),te={t:"rangeRoundBands",a:arguments},ze},ze.rangeBand=function(){return ke},ze.rangeExtent=function(){return fl(te.a[0])},ze.copy=function(){return Ja(U,te)},ze.domain(U)}a.scale.pow=function(){return aa(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return Ja([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(Dl)},a.scale.category20=function(){return a.scale.ordinal().range($a)},a.scale.category20b=function(){return a.scale.ordinal().range(oa)},a.scale.category20c=function(){return a.scale.ordinal().range(Sr)};var Dl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Xt),$a=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Xt),oa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Xt),Sr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Xt);function va(U,te){var oe;function _e(){var ze=0,Ge=te.length;for(oe=[];++ze<Ge;)oe[ze-1]=a.quantile(U,ze/Ge);return ke}function ke(ze){if(!isNaN(ze=+ze))return te[a.bisect(oe,ze)]}return ke.domain=function(ze){return arguments.length?(U=ze.map(d).filter(c).sort(u),_e()):U},ke.range=function(ze){return arguments.length?(te=ze,_e()):te},ke.quantiles=function(){return oe},ke.invertExtent=function(ze){return(ze=te.indexOf(ze))<0?[NaN,NaN]:[ze>0?oe[ze-1]:U[0],ze<oe.length?oe[ze]:U[U.length-1]]},ke.copy=function(){return va(U,te)},_e()}function hl(U,te,oe){var _e,ke;function ze(qe){return oe[Math.max(0,Math.min(ke,Math.floor(_e*(qe-U))))]}function Ge(){return _e=oe.length/(te-U),ke=oe.length-1,ze}return ze.domain=function(qe){return arguments.length?(U=+qe[0],te=+qe[qe.length-1],Ge()):[U,te]},ze.range=function(qe){return arguments.length?(oe=qe,Ge()):oe},ze.invertExtent=function(qe){return[qe=(qe=oe.indexOf(qe))<0?NaN:qe/_e+U,qe+1/_e]},ze.copy=function(){return hl(U,te,oe)},Ge()}function zl(U,te){function oe(_e){if(_e<=_e)return te[a.bisect(U,_e)]}return oe.domain=function(_e){return arguments.length?(U=_e,oe):U},oe.range=function(_e){return arguments.length?(te=_e,oe):te},oe.invertExtent=function(_e){return _e=te.indexOf(_e),[U[_e-1],U[_e]]},oe.copy=function(){return zl(U,te)},oe}function Is(U){function te(oe){return+oe}return te.invert=te,te.domain=te.range=function(oe){return arguments.length?(U=oe.map(te),te):U},te.ticks=function(oe){return Ta(U,oe)},te.tickFormat=function(oe,_e){return d3_scale_linearTickFormat(U,oe,_e)},te.copy=function(){return Is(U)},te}function Os(){return 0}a.scale.quantile=function(){return va([],[])},a.scale.quantize=function(){return hl(0,1,[0,1])},a.scale.threshold=function(){return zl([.5],[0,1])},a.scale.identity=function(){return Is([0,1])},a.svg={},a.svg.arc=function(){var U=Tr,te=lo,oe=Os,_e=Go,ke=Zs,ze=pl,Ge=ya;function qe(){var $e=Math.max(0,+U.apply(this,arguments)),st=Math.max(0,+te.apply(this,arguments)),yt=ke.apply(this,arguments)-et,_t=ze.apply(this,arguments)-et,It=Math.abs(_t-yt),zt=yt>_t?0:1;if(st<$e&&(Rt=st,st=$e,$e=Rt),It>=Pt)return Je(st,zt)+($e?Je($e,1-zt):"")+"Z";var Rt,Ht,Dt,sn,$t,Zt,xn,bn,Un,jn,Xn,Qn,hr=0,cr=0,vr=[];if((sn=(+Ge.apply(this,arguments)||0)/2)&&(Dt=_e===Go?Math.sqrt($e*$e+st*st):+_e.apply(this,arguments),zt||(cr*=-1),st&&(cr=tt(Dt/st*Math.sin(sn))),$e&&(hr=tt(Dt/$e*Math.sin(sn)))),st){$t=st*Math.cos(yt+cr),Zt=st*Math.sin(yt+cr),xn=st*Math.cos(_t-cr),bn=st*Math.sin(_t-cr);var Mr=Math.abs(_t-yt-2*cr)<=kt?0:1;if(cr&&uo($t,Zt,xn,bn)===zt^Mr){var Fr=(yt+_t)/2;$t=st*Math.cos(Fr),Zt=st*Math.sin(Fr),xn=bn=null}}else $t=Zt=0;if($e){Un=$e*Math.cos(_t-hr),jn=$e*Math.sin(_t-hr),Xn=$e*Math.cos(yt+hr),Qn=$e*Math.sin(yt+hr);var Gn=Math.abs(yt-_t+2*hr)<=kt?0:1;if(hr&&uo(Un,jn,Xn,Qn)===1-zt^Gn){var ur=(yt+_t)/2;Un=$e*Math.cos(ur),jn=$e*Math.sin(ur),Xn=Qn=null}}else Un=jn=0;if(It>Tt&&(Rt=Math.min(Math.abs(st-$e)/2,+oe.apply(this,arguments)))>.001){Ht=$e<st^zt?0:1;var yr=Rt,Ar=Rt;if(It<kt){var Or=Xn==null?[Un,jn]:xn==null?[$t,Zt]:Ct([$t,Zt],[Xn,Qn],[xn,bn],[Un,jn]),jr=$t-Or[0],Yr=Zt-Or[1],ai=xn-Or[0],Ti=bn-Or[1],Mi=1/Math.sin(Math.acos((jr*ai+Yr*Ti)/(Math.sqrt(jr*jr+Yr*Yr)*Math.sqrt(ai*ai+Ti*Ti)))/2),oi=Math.sqrt(Or[0]*Or[0]+Or[1]*Or[1]);Ar=Math.min(Rt,($e-oi)/(Mi-1)),yr=Math.min(Rt,(st-oi)/(Mi+1))}if(xn!=null){var Bi=Qa(Xn==null?[Un,jn]:[Xn,Qn],[$t,Zt],st,yr,zt),la=Qa([xn,bn],[Un,jn],st,yr,zt);Rt===yr?vr.push("M",Bi[0],"A",yr,",",yr," 0 0,",Ht," ",Bi[1],"A",st,",",st," 0 ",1-zt^uo(Bi[1][0],Bi[1][1],la[1][0],la[1][1]),",",zt," ",la[1],"A",yr,",",yr," 0 0,",Ht," ",la[0]):vr.push("M",Bi[0],"A",yr,",",yr," 0 1,",Ht," ",la[0])}else vr.push("M",$t,",",Zt);if(Xn!=null){var Xi=Qa([$t,Zt],[Xn,Qn],$e,-Ar,zt),ea=Qa([Un,jn],xn==null?[$t,Zt]:[xn,bn],$e,-Ar,zt);Rt===Ar?vr.push("L",ea[0],"A",Ar,",",Ar," 0 0,",Ht," ",ea[1],"A",$e,",",$e," 0 ",zt^uo(ea[1][0],ea[1][1],Xi[1][0],Xi[1][1]),",",1-zt," ",Xi[1],"A",Ar,",",Ar," 0 0,",Ht," ",Xi[0]):vr.push("L",ea[0],"A",Ar,",",Ar," 0 0,",Ht," ",Xi[0])}else vr.push("L",Un,",",jn)}else vr.push("M",$t,",",Zt),xn!=null&&vr.push("A",st,",",st," 0 ",Mr,",",zt," ",xn,",",bn),vr.push("L",Un,",",jn),Xn!=null&&vr.push("A",$e,",",$e," 0 ",Gn,",",1-zt," ",Xn,",",Qn);return vr.push("Z"),vr.join("")}function Je($e,st){return"M0,"+$e+"A"+$e+","+$e+" 0 1,"+st+" 0,"+-$e+"A"+$e+","+$e+" 0 1,"+st+" 0,"+$e}return qe.innerRadius=function($e){return arguments.length?(U=zn($e),qe):U},qe.outerRadius=function($e){return arguments.length?(te=zn($e),qe):te},qe.cornerRadius=function($e){return arguments.length?(oe=zn($e),qe):oe},qe.padRadius=function($e){return arguments.length?(_e=$e==Go?Go:zn($e),qe):_e},qe.startAngle=function($e){return arguments.length?(ke=zn($e),qe):ke},qe.endAngle=function($e){return arguments.length?(ze=zn($e),qe):ze},qe.padAngle=function($e){return arguments.length?(Ge=zn($e),qe):Ge},qe.centroid=function(){var $e=(+U.apply(this,arguments)+ +te.apply(this,arguments))/2,st=(+ke.apply(this,arguments)+ +ze.apply(this,arguments))/2-et;return[Math.cos(st)*$e,Math.sin(st)*$e]},qe};var Go="auto";function Tr(U){return U.innerRadius}function lo(U){return U.outerRadius}function Zs(U){return U.startAngle}function pl(U){return U.endAngle}function ya(U){return U&&U.padAngle}function uo(U,te,oe,_e){return(U-oe)*te-(te-_e)*U>0?0:1}function Qa(U,te,oe,_e,ke){var ze=U[0]-te[0],Ge=U[1]-te[1],qe=(ke?_e:-_e)/Math.sqrt(ze*ze+Ge*Ge),Je=qe*Ge,$e=-qe*ze,st=U[0]+Je,yt=U[1]+$e,_t=te[0]+Je,It=te[1]+$e,zt=(st+_t)/2,Rt=(yt+It)/2,Ht=_t-st,Dt=It-yt,sn=Ht*Ht+Dt*Dt,$t=oe-_e,Zt=st*It-_t*yt,xn=(Dt<0?-1:1)*Math.sqrt(Math.max(0,$t*$t*sn-Zt*Zt)),bn=(Zt*Dt-Ht*xn)/sn,Un=(-Zt*Ht-Dt*xn)/sn,jn=(Zt*Dt+Ht*xn)/sn,Xn=(-Zt*Ht+Dt*xn)/sn,Qn=bn-zt,hr=Un-Rt,cr=jn-zt,vr=Xn-Rt;return Qn*Qn+hr*hr>cr*cr+vr*vr&&(bn=jn,Un=Xn),[[bn-Je,Un-$e],[bn*oe/$t,Un*oe/$t]]}function Ga(){return!0}function wo(U){var te=Yn,oe=Nn,_e=Ga,ke=Ji,ze=ke.key,Ge=.7;function qe(Je){var $e,st=[],yt=[],_t=-1,It=Je.length,zt=zn(te),Rt=zn(oe);function Ht(){st.push("M",ke(U(yt),Ge))}for(;++_t<It;)_e.call(this,$e=Je[_t],_t)?yt.push([+zt.call(this,$e,_t),+Rt.call(this,$e,_t)]):yt.length&&(Ht(),yt=[]);return yt.length&&Ht(),st.length?st.join(""):null}return qe.x=function(Je){return arguments.length?(te=Je,qe):te},qe.y=function(Je){return arguments.length?(oe=Je,qe):oe},qe.defined=function(Je){return arguments.length?(_e=Je,qe):_e},qe.interpolate=function(Je){return arguments.length?(ze=typeof Je=="function"?ke=Je:(ke=Wo.get(Je)||Ji).key,qe):ze},qe.tension=function(Je){return arguments.length?(Ge=Je,qe):Ge},qe}a.svg.line=function(){return wo(D)};var Wo=a.map({linear:Ji,"linear-closed":Ds,step:function(U){for(var te=0,oe=U.length,_e=U[0],ke=[_e[0],",",_e[1]];++te<oe;)ke.push("H",(_e[0]+(_e=U[te])[0])/2,"V",_e[1]);return oe>1&&ke.push("H",_e[0]),ke.join("")},"step-before":Ks,"step-after":sa,basis:Ia,"basis-open":function(U){if(U.length<4)return Ji(U);for(var te,oe=[],_e=-1,ke=U.length,ze=[0],Ge=[0];++_e<3;)te=U[_e],ze.push(te[0]),Ge.push(te[1]);for(oe.push($i(Ni,ze)+","+$i(Ni,Ge)),--_e;++_e<ke;)te=U[_e],ze.shift(),ze.push(te[0]),Ge.shift(),Ge.push(te[1]),ui(oe,ze,Ge);return oe.join("")},"basis-closed":function(U){for(var te,oe,_e=-1,ke=U.length,ze=ke+4,Ge=[],qe=[];++_e<4;)oe=U[_e%ke],Ge.push(oe[0]),qe.push(oe[1]);for(te=[$i(Ni,Ge),",",$i(Ni,qe)],--_e;++_e<ze;)oe=U[_e%ke],Ge.shift(),Ge.push(oe[0]),qe.shift(),qe.push(oe[1]),ui(te,Ge,qe);return te.join("")},bundle:function(U,te){var oe=U.length-1;if(oe)for(var _e,ke,ze=U[0][0],Ge=U[0][1],qe=U[oe][0]-ze,Je=U[oe][1]-Ge,$e=-1;++$e<=oe;)ke=$e/oe,(_e=U[$e])[0]=te*_e[0]+(1-te)*(ze+ke*qe),_e[1]=te*_e[1]+(1-te)*(Ge+ke*Je);return Ia(U)},cardinal:function(U,te){return U.length<3?Ji(U):U[0]+mi(U,dl(U,te))},"cardinal-open":function(U,te){return U.length<4?Ji(U):U[1]+mi(U.slice(1,-1),dl(U,te))},"cardinal-closed":function(U,te){return U.length<3?Ds(U):U[0]+mi((U.push(U[0]),U),dl([U[U.length-2]].concat(U,[U[1]]),te))},monotone:function(U){return U.length<3?Ji(U):U[0]+mi(U,function(te){for(var oe,_e,ke,ze,Ge=[],qe=function(st){for(var yt=0,_t=st.length-1,It=[],zt=st[0],Rt=st[1],Ht=It[0]=Wa(zt,Rt);++yt<_t;)It[yt]=(Ht+(Ht=Wa(zt=Rt,Rt=st[yt+1])))/2;return It[yt]=Ht,It}(te),Je=-1,$e=te.length-1;++Je<$e;)oe=Wa(te[Je],te[Je+1]),x(oe)<Tt?qe[Je]=qe[Je+1]=0:(ze=(_e=qe[Je]/oe)*_e+(ke=qe[Je+1]/oe)*ke)>9&&(ze=3*oe/Math.sqrt(ze),qe[Je]=ze*_e,qe[Je+1]=ze*ke);for(Je=-1;++Je<=$e;)ze=(te[Math.min($e,Je+1)][0]-te[Math.max(0,Je-1)][0])/(6*(1+qe[Je]*qe[Je])),Ge.push([ze||0,qe[Je]*ze||0]);return Ge}(U))}});function Ji(U){return U.length>1?U.join("L"):U+"Z"}function Ds(U){return U.join("L")+"Z"}function Ks(U){for(var te=0,oe=U.length,_e=U[0],ke=[_e[0],",",_e[1]];++te<oe;)ke.push("V",(_e=U[te])[1],"H",_e[0]);return ke.join("")}function sa(U){for(var te=0,oe=U.length,_e=U[0],ke=[_e[0],",",_e[1]];++te<oe;)ke.push("H",(_e=U[te])[0],"V",_e[1]);return ke.join("")}function mi(U,te){if(te.length<1||U.length!=te.length&&U.length!=te.length+2)return Ji(U);var oe=U.length!=te.length,_e="",ke=U[0],ze=U[1],Ge=te[0],qe=Ge,Je=1;if(oe&&(_e+="Q"+(ze[0]-2*Ge[0]/3)+","+(ze[1]-2*Ge[1]/3)+","+ze[0]+","+ze[1],ke=U[1],Je=2),te.length>1){qe=te[1],ze=U[Je],Je++,_e+="C"+(ke[0]+Ge[0])+","+(ke[1]+Ge[1])+","+(ze[0]-qe[0])+","+(ze[1]-qe[1])+","+ze[0]+","+ze[1];for(var $e=2;$e<te.length;$e++,Je++)ze=U[Je],qe=te[$e],_e+="S"+(ze[0]-qe[0])+","+(ze[1]-qe[1])+","+ze[0]+","+ze[1]}if(oe){var st=U[Je];_e+="Q"+(ze[0]+2*qe[0]/3)+","+(ze[1]+2*qe[1]/3)+","+st[0]+","+st[1]}return _e}function dl(U,te){for(var oe,_e=[],ke=(1-te)/2,ze=U[0],Ge=U[1],qe=1,Je=U.length;++qe<Je;)oe=ze,ze=Ge,Ge=U[qe],_e.push([ke*(Ge[0]-oe[0]),ke*(Ge[1]-oe[1])]);return _e}function Ia(U){if(U.length<3)return Ji(U);var te=1,oe=U.length,_e=U[0],ke=_e[0],ze=_e[1],Ge=[ke,ke,ke,(_e=U[1])[0]],qe=[ze,ze,ze,_e[1]],Je=[ke,",",ze,"L",$i(Ni,Ge),",",$i(Ni,qe)];for(U.push(U[oe-1]);++te<=oe;)_e=U[te],Ge.shift(),Ge.push(_e[0]),qe.shift(),qe.push(_e[1]),ui(Je,Ge,qe);return U.pop(),Je.push("L",_e),Je.join("")}function $i(U,te){return U[0]*te[0]+U[1]*te[1]+U[2]*te[2]+U[3]*te[3]}Wo.forEach(function(U,te){te.key=U,te.closed=/-closed$/.test(U)});var To=[0,2/3,1/3,0],tu=[0,1/3,2/3,0],Ni=[0,1/6,2/3,1/6];function ui(U,te,oe){U.push("C",$i(To,te),",",$i(To,oe),",",$i(tu,te),",",$i(tu,oe),",",$i(Ni,te),",",$i(Ni,oe))}function Wa(U,te){return(te[1]-U[1])/(te[0]-U[0])}function Mo(U){for(var te,oe,_e,ke=-1,ze=U.length;++ke<ze;)oe=(te=U[ke])[0],_e=te[1]-et,te[0]=oe*Math.cos(_e),te[1]=oe*Math.sin(_e);return U}function co(U){var te=Yn,oe=Yn,_e=0,ke=Nn,ze=Ga,Ge=Ji,qe=Ge.key,Je=Ge,$e="L",st=.7;function yt(_t){var It,zt,Rt,Ht=[],Dt=[],sn=[],$t=-1,Zt=_t.length,xn=zn(te),bn=zn(_e),Un=te===oe?function(){return zt}:zn(oe),jn=_e===ke?function(){return Rt}:zn(ke);function Xn(){Ht.push("M",Ge(U(sn),st),$e,Je(U(Dt.reverse()),st),"Z")}for(;++$t<Zt;)ze.call(this,It=_t[$t],$t)?(Dt.push([zt=+xn.call(this,It,$t),Rt=+bn.call(this,It,$t)]),sn.push([+Un.call(this,It,$t),+jn.call(this,It,$t)])):Dt.length&&(Xn(),Dt=[],sn=[]);return Dt.length&&Xn(),Ht.length?Ht.join(""):null}return yt.x=function(_t){return arguments.length?(te=oe=_t,yt):oe},yt.x0=function(_t){return arguments.length?(te=_t,yt):te},yt.x1=function(_t){return arguments.length?(oe=_t,yt):oe},yt.y=function(_t){return arguments.length?(_e=ke=_t,yt):ke},yt.y0=function(_t){return arguments.length?(_e=_t,yt):_e},yt.y1=function(_t){return arguments.length?(ke=_t,yt):ke},yt.defined=function(_t){return arguments.length?(ze=_t,yt):ze},yt.interpolate=function(_t){return arguments.length?(qe=typeof _t=="function"?Ge=_t:(Ge=Wo.get(_t)||Ji).key,Je=Ge.reverse||Ge,$e=Ge.closed?"M":"L",yt):qe},yt.tension=function(_t){return arguments.length?(st=_t,yt):st},yt}function Fl(U){return U.source}function fs(U){return U.target}function zs(U){return U.radius}function qi(U){return[U.x,U.y]}function ha(){return 64}function Pr(){return"circle"}function Ir(U){var te=Math.sqrt(U/kt);return"M0,"+te+"A"+te+","+te+" 0 1,1 0,"+-te+"A"+te+","+te+" 0 1,1 0,"+te+"Z"}a.svg.line.radial=function(){var U=wo(Mo);return U.radius=U.x,delete U.x,U.angle=U.y,delete U.y,U},Ks.reverse=sa,sa.reverse=Ks,a.svg.area=function(){return co(D)},a.svg.area.radial=function(){var U=co(Mo);return U.radius=U.x,delete U.x,U.innerRadius=U.x0,delete U.x0,U.outerRadius=U.x1,delete U.x1,U.angle=U.y,delete U.y,U.startAngle=U.y0,delete U.y0,U.endAngle=U.y1,delete U.y1,U},a.svg.chord=function(){var U=Fl,te=fs,oe=zs,_e=Zs,ke=pl;function ze($e,st){var yt,_t,It=Ge(this,U,$e,st),zt=Ge(this,te,$e,st);return"M"+It.p0+qe(It.r,It.p1,It.a1-It.a0)+(_t=zt,((yt=It).a0==_t.a0&&yt.a1==_t.a1?Je(It.r,It.p1,It.r,It.p0):Je(It.r,It.p1,zt.r,zt.p0)+qe(zt.r,zt.p1,zt.a1-zt.a0)+Je(zt.r,zt.p1,It.r,It.p0))+"Z")}function Ge($e,st,yt,_t){var It=st.call($e,yt,_t),zt=oe.call($e,It,_t),Rt=_e.call($e,It,_t)-et,Ht=ke.call($e,It,_t)-et;return{r:zt,a0:Rt,a1:Ht,p0:[zt*Math.cos(Rt),zt*Math.sin(Rt)],p1:[zt*Math.cos(Ht),zt*Math.sin(Ht)]}}function qe($e,st,yt){return"A"+$e+","+$e+" 0 "+ +(yt>kt)+",1 "+st}function Je($e,st,yt,_t){return"Q 0,0 "+_t}return ze.radius=function($e){return arguments.length?(oe=zn($e),ze):oe},ze.source=function($e){return arguments.length?(U=zn($e),ze):U},ze.target=function($e){return arguments.length?(te=zn($e),ze):te},ze.startAngle=function($e){return arguments.length?(_e=zn($e),ze):_e},ze.endAngle=function($e){return arguments.length?(ke=zn($e),ze):ke},ze},a.svg.diagonal=function(){var U=Fl,te=fs,oe=qi;function _e(ke,ze){var Ge=U.call(this,ke,ze),qe=te.call(this,ke,ze),Je=(Ge.y+qe.y)/2,$e=[Ge,{x:Ge.x,y:Je},{x:qe.x,y:Je},qe];return"M"+($e=$e.map(oe))[0]+"C"+$e[1]+" "+$e[2]+" "+$e[3]}return _e.source=function(ke){return arguments.length?(U=zn(ke),_e):U},_e.target=function(ke){return arguments.length?(te=zn(ke),_e):te},_e.projection=function(ke){return arguments.length?(oe=ke,_e):oe},_e},a.svg.diagonal.radial=function(){var U=a.svg.diagonal(),te=qi,oe=U.projection;return U.projection=function(_e){return arguments.length?oe(function(ke){return function(){var ze=ke.apply(this,arguments),Ge=ze[0],qe=ze[1]-et;return[Ge*Math.cos(qe),Ge*Math.sin(qe)]}}(te=_e)):te},U},a.svg.symbol=function(){var U=Pr,te=ha;function oe(_e,ke){return(Js.get(U.call(this,_e,ke))||Ir)(te.call(this,_e,ke))}return oe.type=function(_e){return arguments.length?(U=zn(_e),oe):U},oe.size=function(_e){return arguments.length?(te=zn(_e),oe):te},oe};var Js=a.map({circle:Ir,cross:function(U){var te=Math.sqrt(U/5)/2;return"M"+-3*te+","+-te+"H"+-te+"V"+-3*te+"H"+te+"V"+-te+"H"+3*te+"V"+te+"H"+te+"V"+3*te+"H"+-te+"V"+te+"H"+-3*te+"Z"},diamond:function(U){var te=Math.sqrt(U/(2*hs)),oe=te*hs;return"M0,"+-te+"L"+oe+",0 0,"+te+" "+-oe+",0Z"},square:function(U){var te=Math.sqrt(U)/2;return"M"+-te+","+-te+"L"+te+","+-te+" "+te+","+te+" "+-te+","+te+"Z"},"triangle-down":function(U){var te=Math.sqrt(U/Ma),oe=te*Ma/2;return"M0,"+oe+"L"+te+","+-oe+" "+-te+","+-oe+"Z"},"triangle-up":function(U){var te=Math.sqrt(U/Ma),oe=te*Ma/2;return"M0,"+-oe+"L"+te+","+oe+" "+-te+","+oe+"Z"}});a.svg.symbolTypes=Js.keys();var Ma=Math.sqrt(3),hs=Math.tan(30*nt);ye.transition=function(U){for(var te,oe,_e=ps||++Qi,ke=Fs(U),ze=[],Ge=ds||{time:Date.now(),ease:zo,delay:0,duration:250},qe=-1,Je=this.length;++qe<Je;){ze.push(te=[]);for(var $e=this[qe],st=-1,yt=$e.length;++st<yt;)(oe=$e[st])&&Qs(oe,st,ke,_e,Ge),te.push(oe)}return da(ze,ke,_e)},ye.interrupt=function(U){return this.each(U==null?pa:$s(Fs(U)))};var pa=$s(Fs());function $s(U){return function(){var te,oe,_e;(te=this[U])&&(_e=te[oe=te.active])&&(_e.timer.c=null,_e.timer.t=NaN,--te.count?delete te[oe]:delete this[U],te.active+=.5,_e.event&&_e.event.interrupt.call(this,this.__data__,_e.index))}}function da(U,te,oe){return ne(U,Nr),U.namespace=te,U.id=oe,U}var ps,ds,Nr=[],Qi=0;function Ao(U,te,oe,_e){var ke=U.id,ze=U.namespace;return Ee(U,typeof oe=="function"?function(Ge,qe,Je){Ge[ze][ke].tween.set(te,_e(oe.call(Ge,Ge.__data__,qe,Je)))}:(oe=_e(oe),function(Ge){Ge[ze][ke].tween.set(te,oe)}))}function Oa(U){return U==null&&(U=""),function(){this.textContent=U}}function Fs(U){return U==null?"__transition__":"__transition_"+U+"__"}function Qs(U,te,oe,_e,ke){var ze,Ge,qe,Je,$e,st=U[oe]||(U[oe]={active:0,count:0}),yt=st[_e];function _t(zt){var Rt=st.active,Ht=st[Rt];for(var Dt in Ht&&(Ht.timer.c=null,Ht.timer.t=NaN,--st.count,delete st[Rt],Ht.event&&Ht.event.interrupt.call(U,U.__data__,Ht.index)),st)if(+Dt<_e){var sn=st[Dt];sn.timer.c=null,sn.timer.t=NaN,--st.count,delete st[Dt]}Ge.c=It,ln(function(){return Ge.c&&It(zt||1)&&(Ge.c=null,Ge.t=NaN),1},0,ze),st.active=_e,yt.event&&yt.event.start.call(U,U.__data__,te),$e=[],yt.tween.forEach(function($t,Zt){(Zt=Zt.call(U,U.__data__,te))&&$e.push(Zt)}),Je=yt.ease,qe=yt.duration}function It(zt){for(var Rt=zt/qe,Ht=Je(Rt),Dt=$e.length;Dt>0;)$e[--Dt].call(U,Ht);if(Rt>=1)return yt.event&&yt.event.end.call(U,U.__data__,te),--st.count?delete st[_e]:delete U[oe],1}yt||(ze=ke.time,Ge=ln(function(zt){var Rt=yt.delay;if(Ge.t=Rt+ze,Rt<=zt)return _t(zt-Rt);Ge.c=_t},0,ze),yt=st[_e]={tween:new v,time:ze,timer:Ge,delay:ke.delay,duration:ke.duration,ease:ke.ease,index:te},ke=null,++st.count)}Nr.call=ye.call,Nr.empty=ye.empty,Nr.node=ye.node,Nr.size=ye.size,a.transition=function(U,te){return U&&U.transition?ps?U.transition(te):U:a.selection().transition(U)},a.transition.prototype=Nr,Nr.select=function(U){var te,oe,_e,ke=this.id,ze=this.namespace,Ge=[];U=Te(U);for(var qe=-1,Je=this.length;++qe<Je;){Ge.push(te=[]);for(var $e=this[qe],st=-1,yt=$e.length;++st<yt;)(_e=$e[st])&&(oe=U.call(_e,_e.__data__,st,qe))?("__data__"in _e&&(oe.__data__=_e.__data__),Qs(oe,st,ze,ke,_e[ze][ke]),te.push(oe)):te.push(null)}return da(Ge,ze,ke)},Nr.selectAll=function(U){var te,oe,_e,ke,ze,Ge=this.id,qe=this.namespace,Je=[];U=Ce(U);for(var $e=-1,st=this.length;++$e<st;)for(var yt=this[$e],_t=-1,It=yt.length;++_t<It;)if(_e=yt[_t]){ze=_e[qe][Ge],oe=U.call(_e,_e.__data__,_t,$e),Je.push(te=[]);for(var zt=-1,Rt=oe.length;++zt<Rt;)(ke=oe[zt])&&Qs(ke,zt,qe,Ge,ze),te.push(ke)}return da(Je,qe,Ge)},Nr.filter=function(U){var te,oe,_e=[];typeof U!="function"&&(U=de(U));for(var ke=0,ze=this.length;ke<ze;ke++){_e.push(te=[]);for(var Ge,qe=0,Je=(Ge=this[ke]).length;qe<Je;qe++)(oe=Ge[qe])&&U.call(oe,oe.__data__,qe,ke)&&te.push(oe)}return da(_e,this.namespace,this.id)},Nr.tween=function(U,te){var oe=this.id,_e=this.namespace;return arguments.length<2?this.node()[_e][oe].tween.get(U):Ee(this,te==null?function(ke){ke[_e][oe].tween.remove(U)}:function(ke){ke[_e][oe].tween.set(U,te)})},Nr.attr=function(U,te){if(arguments.length<2){for(te in U)this.attr(te,U[te]);return this}var oe=U=="transform"?ts:xo,_e=a.ns.qualify(U);function ke(){this.removeAttribute(_e)}function ze(){this.removeAttributeNS(_e.space,_e.local)}return Ao(this,"attr."+U,te,_e.local?function(Ge){return Ge==null?ze:(Ge+="",function(){var qe,Je=this.getAttributeNS(_e.space,_e.local);return Je!==Ge&&(qe=oe(Je,Ge),function($e){this.setAttributeNS(_e.space,_e.local,qe($e))})})}:function(Ge){return Ge==null?ke:(Ge+="",function(){var qe,Je=this.getAttribute(_e);return Je!==Ge&&(qe=oe(Je,Ge),function($e){this.setAttribute(_e,qe($e))})})})},Nr.attrTween=function(U,te){var oe=a.ns.qualify(U);return this.tween("attr."+U,oe.local?function(_e,ke){var ze=te.call(this,_e,ke,this.getAttributeNS(oe.space,oe.local));return ze&&function(Ge){this.setAttributeNS(oe.space,oe.local,ze(Ge))}}:function(_e,ke){var ze=te.call(this,_e,ke,this.getAttribute(oe));return ze&&function(Ge){this.setAttribute(oe,ze(Ge))}})},Nr.style=function(U,te,oe){var _e=arguments.length;if(_e<3){if(typeof U!="string"){for(oe in _e<2&&(te=""),U)this.style(oe,U[oe],te);return this}oe=""}function ke(){this.style.removeProperty(U)}return Ao(this,"style."+U,te,function(ze){return ze==null?ke:(ze+="",function(){var Ge,qe=t(this).getComputedStyle(this,null).getPropertyValue(U);return qe!==ze&&(Ge=xo(qe,ze),function(Je){this.style.setProperty(U,Ge(Je),oe)})})})},Nr.styleTween=function(U,te,oe){return arguments.length<3&&(oe=""),this.tween("style."+U,function(_e,ke){var ze=te.call(this,_e,ke,t(this).getComputedStyle(this,null).getPropertyValue(U));return ze&&function(Ge){this.style.setProperty(U,ze(Ge),oe)}})},Nr.text=function(U){return Ao(this,"text",U,Oa)},Nr.remove=function(){var U=this.namespace;return this.each("end.transition",function(){var te;this[U].count<2&&(te=this.parentNode)&&te.removeChild(this)})},Nr.ease=function(U){var te=this.id,oe=this.namespace;return arguments.length<1?this.node()[oe][te].ease:(typeof U!="function"&&(U=a.ease.apply(a,arguments)),Ee(this,function(_e){_e[oe][te].ease=U}))},Nr.delay=function(U){var te=this.id,oe=this.namespace;return arguments.length<1?this.node()[oe][te].delay:Ee(this,typeof U=="function"?function(_e,ke,ze){_e[oe][te].delay=+U.call(_e,_e.__data__,ke,ze)}:(U=+U,function(_e){_e[oe][te].delay=U}))},Nr.duration=function(U){var te=this.id,oe=this.namespace;return arguments.length<1?this.node()[oe][te].duration:Ee(this,typeof U=="function"?function(_e,ke,ze){_e[oe][te].duration=Math.max(1,U.call(_e,_e.__data__,ke,ze))}:(U=Math.max(1,U),function(_e){_e[oe][te].duration=U}))},Nr.each=function(U,te){var oe=this.id,_e=this.namespace;if(arguments.length<2){var ke=ds,ze=ps;try{ps=oe,Ee(this,function(Ge,qe,Je){ds=Ge[_e][oe],U.call(Ge,Ge.__data__,qe,Je)})}finally{ds=ke,ps=ze}}else Ee(this,function(Ge){var qe=Ge[_e][oe];(qe.event||(qe.event=a.dispatch("start","end","interrupt"))).on(U,te)});return this},Nr.transition=function(){for(var U,te,oe,_e=this.id,ke=++Qi,ze=this.namespace,Ge=[],qe=0,Je=this.length;qe<Je;qe++){Ge.push(U=[]);for(var $e,st=0,yt=($e=this[qe]).length;st<yt;st++)(te=$e[st])&&Qs(te,st,ze,ke,{time:(oe=te[ze][_e]).time,ease:oe.ease,delay:oe.delay+oe.duration,duration:oe.duration}),U.push(te)}return da(Ge,ze,ke)},a.svg.axis=function(){var U,te=a.scale.linear(),oe=Ns,_e=6,ke=6,ze=3,Ge=[10],qe=null;function Je($e){$e.each(function(){var st,yt=a.select(this),_t=this.__chart__||te,It=this.__chart__=te.copy(),zt=qe??(It.ticks?It.ticks.apply(It,Ge):It.domain()),Rt=U??(It.tickFormat?It.tickFormat.apply(It,Ge):D),Ht=yt.selectAll(".tick").data(zt,It),Dt=Ht.enter().insert("g",".domain").attr("class","tick").style("opacity",Tt),sn=a.transition(Ht.exit()).style("opacity",Tt).remove(),$t=a.transition(Ht.order()).style("opacity",1),Zt=Math.max(_e,0)+ze,xn=Ho(It),bn=yt.selectAll(".domain").data([0]),Un=(bn.enter().append("path").attr("class","domain"),a.transition(bn));Dt.append("line"),Dt.append("text");var jn,Xn,Qn,hr,cr=Dt.select("line"),vr=$t.select("line"),Mr=Ht.select("text").text(Rt),Fr=Dt.select("text"),Gn=$t.select("text"),ur=oe==="top"||oe==="left"?-1:1;if(oe==="bottom"||oe==="top"?(st=N,jn="x",Qn="y",Xn="x2",hr="y2",Mr.attr("dy",ur<0?"0em":".71em").style("text-anchor","middle"),Un.attr("d","M"+xn[0]+","+ur*ke+"V0H"+xn[1]+"V"+ur*ke)):(st=G,jn="y",Qn="x",Xn="y2",hr="x2",Mr.attr("dy",".32em").style("text-anchor",ur<0?"end":"start"),Un.attr("d","M"+ur*ke+","+xn[0]+"H0V"+xn[1]+"H"+ur*ke)),cr.attr(hr,ur*_e),Fr.attr(Qn,ur*Zt),vr.attr(Xn,0).attr(hr,ur*_e),Gn.attr(jn,0).attr(Qn,ur*Zt),It.rangeBand){var yr=It,Ar=yr.rangeBand()/2;_t=It=function(Or){return yr(Or)+Ar}}else _t.rangeBand?_t=It:sn.call(st,It,_t);Dt.call(st,_t,It),$t.call(st,It,It)})}return Je.scale=function($e){return arguments.length?(te=$e,Je):te},Je.orient=function($e){return arguments.length?(oe=$e in qo?$e+"":Ns,Je):oe},Je.ticks=function(){return arguments.length?(Ge=g(arguments),Je):Ge},Je.tickValues=function($e){return arguments.length?(qe=$e,Je):qe},Je.tickFormat=function($e){return arguments.length?(U=$e,Je):U},Je.tickSize=function($e){var st=arguments.length;return st?(_e=+$e,ke=+arguments[st-1],Je):_e},Je.innerTickSize=function($e){return arguments.length?(_e=+$e,Je):_e},Je.outerTickSize=function($e){return arguments.length?(ke=+$e,Je):ke},Je.tickPadding=function($e){return arguments.length?(ze=+$e,Je):ze},Je.tickSubdivide=function(){return arguments.length&&Je},Je};var Ns="bottom",qo={top:1,right:1,bottom:1,left:1};function N(U,te,oe){U.attr("transform",function(_e){var ke=te(_e);return"translate("+(isFinite(ke)?ke:oe(_e))+",0)"})}function G(U,te,oe){U.attr("transform",function(_e){var ke=te(_e);return"translate(0,"+(isFinite(ke)?ke:oe(_e))+")"})}a.svg.brush=function(){var U,te,oe=Y(st,"brushstart","brush","brushend"),_e=null,ke=null,ze=[0,0],Ge=[0,0],qe=!0,Je=!0,$e=Q[0];function st(Rt){Rt.each(function(){var Ht=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",zt).on("touchstart.brush",zt),Dt=Ht.selectAll(".background").data([0]);Dt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ht.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Ht.selectAll(".resize").data($e,D);sn.exit().remove(),sn.enter().append("g").attr("class",function(bn){return"resize "+bn}).style("cursor",function(bn){return H[bn]}).append("rect").attr("x",function(bn){return/[ew]$/.test(bn)?-3:null}).attr("y",function(bn){return/^[ns]/.test(bn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",st.empty()?"none":null);var $t,Zt=a.transition(Ht),xn=a.transition(Dt);_e&&($t=Ho(_e),xn.attr("x",$t[0]).attr("width",$t[1]-$t[0]),_t(Zt)),ke&&($t=Ho(ke),xn.attr("y",$t[0]).attr("height",$t[1]-$t[0]),It(Zt)),yt(Zt)})}function yt(Rt){Rt.selectAll(".resize").attr("transform",function(Ht){return"translate("+ze[+/e$/.test(Ht)]+","+Ge[+/^s/.test(Ht)]+")"})}function _t(Rt){Rt.select(".extent").attr("x",ze[0]),Rt.selectAll(".extent,.n>rect,.s>rect").attr("width",ze[1]-ze[0])}function It(Rt){Rt.select(".extent").attr("y",Ge[0]),Rt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ge[1]-Ge[0])}function zt(){var Rt,Ht,Dt=this,sn=a.select(a.event.target),$t=oe.of(Dt,arguments),Zt=a.select(Dt),xn=sn.datum(),bn=!/^(n|s)$/.test(xn)&&_e,Un=!/^(e|w)$/.test(xn)&&ke,jn=sn.classed("extent"),Xn=bt(Dt),Qn=a.mouse(Dt),hr=a.select(t(Dt)).on("keydown.brush",function(){a.event.keyCode==32&&(jn||(Rt=null,Qn[0]-=ze[1],Qn[1]-=Ge[1],jn=2),ee())}).on("keyup.brush",function(){a.event.keyCode==32&&jn==2&&(Qn[0]+=ze[1],Qn[1]+=Ge[1],jn=0,ee())});if(a.event.changedTouches?hr.on("touchmove.brush",Mr).on("touchend.brush",Gn):hr.on("mousemove.brush",Mr).on("mouseup.brush",Gn),Zt.interrupt().selectAll("*").interrupt(),jn)Qn[0]=ze[0]-Qn[0],Qn[1]=Ge[0]-Qn[1];else if(xn){var cr=+/w$/.test(xn),vr=+/^n/.test(xn);Ht=[ze[1-cr]-Qn[0],Ge[1-vr]-Qn[1]],Qn[0]=ze[cr],Qn[1]=Ge[vr]}else a.event.altKey&&(Rt=Qn.slice());function Mr(){var ur=a.mouse(Dt),yr=!1;Ht&&(ur[0]+=Ht[0],ur[1]+=Ht[1]),jn||(a.event.altKey?(Rt||(Rt=[(ze[0]+ze[1])/2,(Ge[0]+Ge[1])/2]),Qn[0]=ze[+(ur[0]<Rt[0])],Qn[1]=Ge[+(ur[1]<Rt[1])]):Rt=null),bn&&Fr(ur,_e,0)&&(_t(Zt),yr=!0),Un&&Fr(ur,ke,1)&&(It(Zt),yr=!0),yr&&(yt(Zt),$t({type:"brush",mode:jn?"move":"resize"}))}function Fr(ur,yr,Ar){var Or,jr,Yr=Ho(yr),ai=Yr[0],Ti=Yr[1],Mi=Qn[Ar],oi=Ar?Ge:ze,Bi=oi[1]-oi[0];if(jn&&(ai-=Mi,Ti-=Bi+Mi),Or=(Ar?Je:qe)?Math.max(ai,Math.min(Ti,ur[Ar])):ur[Ar],jn?jr=(Or+=Mi)+Bi:(Rt&&(Mi=Math.max(ai,Math.min(Ti,2*Rt[Ar]-Or))),Mi<Or?(jr=Or,Or=Mi):jr=Mi),oi[0]!=Or||oi[1]!=jr)return Ar?te=null:U=null,oi[0]=Or,oi[1]=jr,!0}function Gn(){Mr(),Zt.style("pointer-events","all").selectAll(".resize").style("display",st.empty()?"none":null),a.select("body").style("cursor",null),hr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Xn(),$t({type:"brushend"})}Zt.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",sn.style("cursor")),$t({type:"brushstart"}),Mr()}return st.event=function(Rt){Rt.each(function(){var Ht=oe.of(this,arguments),Dt={x:ze,y:Ge,i:U,j:te},sn=this.__chart__||Dt;this.__chart__=Dt,ps?a.select(this).transition().each("start.brush",function(){U=sn.i,te=sn.j,ze=sn.x,Ge=sn.y,Ht({type:"brushstart"})}).tween("brush:brush",function(){var $t=Wi(ze,Dt.x),Zt=Wi(Ge,Dt.y);return U=te=null,function(xn){ze=Dt.x=$t(xn),Ge=Dt.y=Zt(xn),Ht({type:"brush",mode:"resize"})}}).each("end.brush",function(){U=Dt.i,te=Dt.j,Ht({type:"brush",mode:"resize"}),Ht({type:"brushend"})}):(Ht({type:"brushstart"}),Ht({type:"brush",mode:"resize"}),Ht({type:"brushend"}))})},st.x=function(Rt){return arguments.length?($e=Q[!(_e=Rt)<<1|!ke],st):_e},st.y=function(Rt){return arguments.length?($e=Q[!_e<<1|!(ke=Rt)],st):ke},st.clamp=function(Rt){return arguments.length?(_e&&ke?(qe=!!Rt[0],Je=!!Rt[1]):_e?qe=!!Rt:ke&&(Je=!!Rt),st):_e&&ke?[qe,Je]:_e?qe:ke?Je:null},st.extent=function(Rt){var Ht,Dt,sn,$t,Zt;return arguments.length?(_e&&(Ht=Rt[0],Dt=Rt[1],ke&&(Ht=Ht[0],Dt=Dt[0]),U=[Ht,Dt],_e.invert&&(Ht=_e(Ht),Dt=_e(Dt)),Dt<Ht&&(Zt=Ht,Ht=Dt,Dt=Zt),Ht==ze[0]&&Dt==ze[1]||(ze=[Ht,Dt])),ke&&(sn=Rt[0],$t=Rt[1],_e&&(sn=sn[1],$t=$t[1]),te=[sn,$t],ke.invert&&(sn=ke(sn),$t=ke($t)),$t<sn&&(Zt=sn,sn=$t,$t=Zt),sn==Ge[0]&&$t==Ge[1]||(Ge=[sn,$t])),st):(_e&&(U?(Ht=U[0],Dt=U[1]):(Ht=ze[0],Dt=ze[1],_e.invert&&(Ht=_e.invert(Ht),Dt=_e.invert(Dt)),Dt<Ht&&(Zt=Ht,Ht=Dt,Dt=Zt))),ke&&(te?(sn=te[0],$t=te[1]):(sn=Ge[0],$t=Ge[1],ke.invert&&(sn=ke.invert(sn),$t=ke.invert($t)),$t<sn&&(Zt=sn,sn=$t,$t=Zt))),_e&&ke?[[Ht,sn],[Dt,$t]]:_e?[Ht,Dt]:ke&&[sn,$t])},st.clear=function(){return st.empty()||(ze=[0,0],Ge=[0,0],U=te=null),st},st.empty=function(){return!!_e&&ze[0]==ze[1]||!!ke&&Ge[0]==Ge[1]},a.rebind(st,oe,"on")};var H={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Q=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function xe(U){return JSON.parse(U.responseText)}function Pe(U){var te=h.createRange();return te.selectNode(h.body),te.createContextualFragment(U.responseText)}a.text=er(function(U){return U.responseText}),a.json=function(U,te){return ir(U,"application/json",xe,te)},a.html=function(U,te){return ir(U,"text/html",Pe,te)},a.xml=er(function(U){return U.responseXML}),(b=typeof(T=a)=="function"?T.call(L,e,L,F):T)===void 0||(F.exports=b)}).apply(self)},88294:function(F,L,e){F.exports=e(62849)},62849:function(F,L,e){var T=e(91358),b=e(53435),a=e(18863),_=e(21527),g=e(71299),h=e(46775),o=e(30120),t=e(64941),i=e(90660),n=e(27084);function r(s,l){for(var u=l[0],d=l[1],c=1/(l[2]-u),w=1/(l[3]-d),m=new Array(s.length),f=0,x=s.length/2;f<x;f++)m[2*f]=b((s[2*f]-u)*c,0,1),m[2*f+1]=b((s[2*f+1]-d)*w,0,1);return m}F.exports=function(s,l){l||(l={}),s=o(s,"float64"),l=g(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=h(l.maxDepth,255),d=h(l.bounds,_(s,2));d[0]===d[2]&&d[2]++,d[1]===d[3]&&d[3]++;var c,w=r(s,d),m=s.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?c=new(i(l.dtype))(m):l.dtype&&(c=l.dtype,Array.isArray(c)&&(c.length=m));for(var f=0;f<m;++f)c[f]=f;var x=[],y=[],v=[],M=[];(function O(X,D,V,j,B,W){if(!j.length)return null;var q=x[B]||(x[B]=[]),re=v[B]||(v[B]=[]),ee=y[B]||(y[B]=[]),K=q.length;if(++B>u||W>1073741824){for(var Y=0;Y<j.length;Y++)q.push(j[Y]),re.push(W),ee.push(null,null,null,null);return K}if(q.push(j[0]),re.push(W),j.length<=1)return ee.push(null,null,null,null),K;for(var $=.5*V,ne=X+$,ae=D+$,se=[],ce=[],me=[],ye=[],Te=1,Ce=j.length;Te<Ce;Te++){var pe=j[Te],fe=w[2*pe],Oe=w[2*pe+1];fe<ne?Oe<ae?se.push(pe):ce.push(pe):Oe<ae?me.push(pe):ye.push(pe)}return W<<=2,ee.push(O(X,D,$,se,B,W),O(X,ae,$,ce,B,W+1),O(ne,D,$,me,B,W+2),O(ne,ae,$,ye,B,W+3)),K})(0,0,1,c,0,1);for(var p=0,S=0;S<x.length;S++){var A=x[S];if(c.set)c.set(A,p);else for(var k=0,C=A.length;k<C;k++)c[k+p]=A[k];var P=p+x[S].length;M[S]=[p,P],p=P}return c.range=function(){for(var O,X=[],D=arguments.length;D--;)X[D]=arguments[D];if(t(X[X.length-1])){var V=X.pop();X.length||V.x==null&&V.l==null&&V.left==null||(X=[V],O={}),O=g(V,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else O={};X.length||(X=d);var j,B=a.apply(void 0,X),W=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],q=W[0],re=W[1],ee=W[2],K=W[3],Y=r([q,re,ee,K],d),$=Y[0],ne=Y[1],ae=Y[2],se=Y[3],ce=h(O.level,x.length);if(O.d!=null&&(typeof O.d=="number"?j=[O.d,O.d]:O.d.length&&(j=O.d),ce=Math.min(Math.max(Math.ceil(-n(Math.abs(j[0])/(d[2]-d[0]))),Math.ceil(-n(Math.abs(j[1])/(d[3]-d[1])))),ce)),ce=Math.min(ce,x.length),O.lod)return function(ye,Te,Ce,pe,fe){for(var Oe=[],Se=0;Se<fe;Se++){var Me=v[Se],ue=M[Se][0],le=R(ye,Te,Se),ie=R(Ce,pe,Se),ge=T.ge(Me,le),Ae=T.gt(Me,ie,ge,Me.length-1);Oe[Se]=[ge+ue,Ae+ue]}return Oe}($,ne,ae,se,ce);var me=[];return function ye(Te,Ce,pe,fe,Oe,Se){if(Oe!==null&&Se!==null&&!($>Te+pe||ne>Ce+pe||ae<Te||se<Ce||fe>=ce||Oe===Se)){var Me=x[fe];Se===void 0&&(Se=Me.length);for(var ue=Oe;ue<Se;ue++){var le=Me[ue],ie=s[2*le],ge=s[2*le+1];ie>=q&&ie<=ee&&ge>=re&&ge<=K&&me.push(le)}var Ae=y[fe],we=Ae[4*Oe+0],Ne=Ae[4*Oe+1],He=Ae[4*Oe+2],de=Ae[4*Oe+3],Le=function(je,Fe){for(var Xe=null,Ze=0;Xe===null;)if(Xe=je[4*Fe+Ze],++Ze>je.length)return null;return Xe}(Ae,Oe+1),Ee=.5*pe,Re=fe+1;ye(Te,Ce,Ee,Re,we,Ne||He||de||Le),ye(Te,Ce+Ee,Ee,Re,Ne,He||de||Le),ye(Te+Ee,Ce,Ee,Re,He,de||Le),ye(Te+Ee,Ce+Ee,Ee,Re,de,Le)}}(0,0,1,0,0,1),me},c;function R(O,X,D){for(var V=1,j=.5,B=.5,W=.5,q=0;q<D;q++)V<<=2,V+=O<j?X<B?0:1:X<B?2:3,W*=.5,j+=O<j?-W:W,B+=X<B?-W:W;return V}}},30774:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(60302),b=6378137;function a(h){var o=0;if(h&&h.length>0){o+=Math.abs(_(h[0]));for(var t=1;t<h.length;t++)o-=Math.abs(_(h[t]))}return o}function _(h){var o,t,i,n,r,s,l=0,u=h.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,n=u-1,r=0):s===u-1?(i=u-1,n=0,r=1):(i=s,n=s+1,r=s+2),o=h[i],t=h[n],l+=(g(h[r][0])-g(o[0]))*Math.sin(g(t[1]));l=l*b*b/2}return l}function g(h){return h*Math.PI/180}L.default=function(h){return T.geomReduce(h,function(o,t){return o+function(i){var n,r=0;switch(i.type){case"Polygon":return a(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)r+=a(i.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(F,L){function e(s,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=s,d}function T(s,l,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(s[0])||!r(s[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:s},l,u)}function b(s,l,u){u===void 0&&(u={});for(var d=0,c=s;d<c.length;d++){var w=c[d];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var m=0;m<w[w.length-1].length;m++)if(w[w.length-1][m]!==w[0][m])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function a(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function _(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function g(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function h(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function r(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:1.0936*L.earthRadius},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:1.0936133},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(s,l,u){switch(s){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return b(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return g(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},L.point=T,L.points=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return T(d,l)}),u)},L.polygon=b,L.polygons=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return b(d,l)}),u)},L.lineString=a,L.lineStrings=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return a(d,l)}),u)},L.featureCollection=_,L.multiLineString=g,L.multiPoint=h,L.multiPolygon=o,L.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},L.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},L.radiansToLength=t,L.lengthToRadians=i,L.lengthToDegrees=function(s,l){return n(i(s,l))},L.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},L.radiansToDegrees=n,L.degreesToRadians=function(s){return s%360*Math.PI/180},L.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},L.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var d=L.areaFactors[l];if(!d)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return s/d*c},L.isNumber=r,L.isObject=function(s){return!!s&&s.constructor===Object},L.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},L.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},60302:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(23132);function b(i,n,r){if(i!==null)for(var s,l,u,d,c,w,m,f,x=0,y=0,v=i.type,M=v==="FeatureCollection",p=v==="Feature",S=M?i.features.length:1,A=0;A<S;A++){c=(f=!!(m=M?i.features[A].geometry:p?i.geometry:i)&&m.type==="GeometryCollection")?m.geometries.length:1;for(var k=0;k<c;k++){var C=0,P=0;if((d=f?m.geometries[k]:m)!==null){w=d.coordinates;var R=d.type;switch(x=!r||R!=="Polygon"&&R!=="MultiPolygon"?0:1,R){case null:break;case"Point":if(n(w,y,A,C,P)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<w.length;s++){if(n(w[s],y,A,C,P)===!1)return!1;y++,R==="MultiPoint"&&C++}R==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<w.length;s++){for(l=0;l<w[s].length-x;l++){if(n(w[s][l],y,A,C,P)===!1)return!1;y++}R==="MultiLineString"&&C++,R==="Polygon"&&P++}R==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<w.length;s++){for(P=0,l=0;l<w[s].length;l++){for(u=0;u<w[s][l].length-x;u++){if(n(w[s][l][u],y,A,C,P)===!1)return!1;y++}P++}C++}break;case"GeometryCollection":for(s=0;s<d.geometries.length;s++)if(b(d.geometries[s],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function _(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function g(i,n){var r,s,l,u,d,c,w,m,f,x,y=0,v=i.type==="FeatureCollection",M=i.type==="Feature",p=v?i.features.length:1;for(r=0;r<p;r++){for(c=v?i.features[r].geometry:M?i.geometry:i,m=v?i.features[r].properties:M?i.properties:{},f=v?i.features[r].bbox:M?i.bbox:void 0,x=v?i.features[r].id:M?i.id:void 0,d=(w=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=w?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,m,f,x)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],y,m,f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,m,f,x)===!1)return!1;y++}}function h(i,n){g(i,function(r,s,l,u,d){var c,w=r===null?null:r.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,l,{bbox:u,id:d}),s,0)!==!1&&void 0}switch(w){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var m=0;m<r.coordinates.length;m++){var f={type:c,coordinates:r.coordinates[m]};if(n(T.feature(f,l),s,m)===!1)return!1}})}function o(i,n){h(i,function(r,s,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,w=0,m=0,f=0;return b(r,function(x,y,v,M,p){if(c===void 0||s>w||M>m||p>f)return c=x,w=s,m=M,f=p,void(u=0);var S=T.lineString([c,x],r.properties);if(n(S,s,l,p,u)===!1)return!1;u++,c=x})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,s,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,s,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(T.lineString(d[c],r.properties),s,l,c)===!1)return!1}}})}L.coordEach=b,L.coordReduce=function(i,n,r,s){var l=r;return b(i,function(u,d,c,w,m){l=d===0&&r===void 0?u:n(l,u,d,c,w,m)},s),l},L.propEach=a,L.propReduce=function(i,n,r){var s=r;return a(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.featureEach=_,L.featureReduce=function(i,n,r){var s=r;return _(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.coordAll=function(i){var n=[];return b(i,function(r){n.push(r)}),n},L.geomEach=g,L.geomReduce=function(i,n,r){var s=r;return g(i,function(l,u,d,c,w){s=u===0&&r===void 0?l:n(s,l,u,d,c,w)}),s},L.flattenEach=h,L.flattenReduce=function(i,n,r){var s=r;return h(i,function(l,u,d){s=u===0&&d===0&&r===void 0?l:n(s,l,u,d)}),s},L.segmentEach=o,L.segmentReduce=function(i,n,r){var s=r,l=!1;return o(i,function(u,d,c,w,m){s=l===!1&&r===void 0?u:n(s,u,d,c,w,m),l=!0}),s},L.lineEach=t,L.lineReduce=function(i,n,r){var s=r;return t(i,function(l,u,d,c){s=u===0&&r===void 0?l:n(s,l,u,d,c)}),s},L.findSegment=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=w.length+d-1),T.lineString([w[d],w[d+1]],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d-1),T.lineString([w[u][d],w[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d-1),T.lineString([w[l][d],w[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d-1),T.lineString([w[l][u][d],w[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":return T.point(w,c,n);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],c,n);case"LineString":return d<0&&(d=w.length+d),T.point(w[d],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),T.point(w[u][d],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d),T.point(w[l][d],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d),T.point(w[l][u][d],c,n)}throw new Error("geojson is invalid")}},85268:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(27138);function b(a){var _=[1/0,1/0,-1/0,-1/0];return T.coordEach(a,function(g){_[0]>g[0]&&(_[0]=g[0]),_[1]>g[1]&&(_[1]=g[1]),_[2]<g[0]&&(_[2]=g[0]),_[3]<g[1]&&(_[3]=g[1])}),_}b.default=b,L.default=b},94228:function(F,L){function e(s,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=s,d}function T(s,l,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(s[0])||!r(s[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:s},l,u)}function b(s,l,u){u===void 0&&(u={});for(var d=0,c=s;d<c.length;d++){var w=c[d];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var m=0;m<w[w.length-1].length;m++)if(w[w.length-1][m]!==w[0][m])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function a(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function _(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function g(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function h(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function r(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:1.0936*L.earthRadius},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:1.0936133},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(s,l,u){switch(s){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return b(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return g(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},L.point=T,L.points=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return T(d,l)}),u)},L.polygon=b,L.polygons=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return b(d,l)}),u)},L.lineString=a,L.lineStrings=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return a(d,l)}),u)},L.featureCollection=_,L.multiLineString=g,L.multiPoint=h,L.multiPolygon=o,L.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},L.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},L.radiansToLength=t,L.lengthToRadians=i,L.lengthToDegrees=function(s,l){return n(i(s,l))},L.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},L.radiansToDegrees=n,L.degreesToRadians=function(s){return s%360*Math.PI/180},L.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},L.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var d=L.areaFactors[l];if(!d)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return s/d*c},L.isNumber=r,L.isObject=function(s){return!!s&&s.constructor===Object},L.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},L.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},27138:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(94228);function b(i,n,r){if(i!==null)for(var s,l,u,d,c,w,m,f,x=0,y=0,v=i.type,M=v==="FeatureCollection",p=v==="Feature",S=M?i.features.length:1,A=0;A<S;A++){c=(f=!!(m=M?i.features[A].geometry:p?i.geometry:i)&&m.type==="GeometryCollection")?m.geometries.length:1;for(var k=0;k<c;k++){var C=0,P=0;if((d=f?m.geometries[k]:m)!==null){w=d.coordinates;var R=d.type;switch(x=!r||R!=="Polygon"&&R!=="MultiPolygon"?0:1,R){case null:break;case"Point":if(n(w,y,A,C,P)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<w.length;s++){if(n(w[s],y,A,C,P)===!1)return!1;y++,R==="MultiPoint"&&C++}R==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<w.length;s++){for(l=0;l<w[s].length-x;l++){if(n(w[s][l],y,A,C,P)===!1)return!1;y++}R==="MultiLineString"&&C++,R==="Polygon"&&P++}R==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<w.length;s++){for(P=0,l=0;l<w[s].length;l++){for(u=0;u<w[s][l].length-x;u++){if(n(w[s][l][u],y,A,C,P)===!1)return!1;y++}P++}C++}break;case"GeometryCollection":for(s=0;s<d.geometries.length;s++)if(b(d.geometries[s],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function _(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function g(i,n){var r,s,l,u,d,c,w,m,f,x,y=0,v=i.type==="FeatureCollection",M=i.type==="Feature",p=v?i.features.length:1;for(r=0;r<p;r++){for(c=v?i.features[r].geometry:M?i.geometry:i,m=v?i.features[r].properties:M?i.properties:{},f=v?i.features[r].bbox:M?i.bbox:void 0,x=v?i.features[r].id:M?i.id:void 0,d=(w=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=w?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,m,f,x)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],y,m,f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,m,f,x)===!1)return!1;y++}}function h(i,n){g(i,function(r,s,l,u,d){var c,w=r===null?null:r.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,l,{bbox:u,id:d}),s,0)!==!1&&void 0}switch(w){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var m=0;m<r.coordinates.length;m++){var f={type:c,coordinates:r.coordinates[m]};if(n(T.feature(f,l),s,m)===!1)return!1}})}function o(i,n){h(i,function(r,s,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,w=0,m=0,f=0;return b(r,function(x,y,v,M,p){if(c===void 0||s>w||M>m||p>f)return c=x,w=s,m=M,f=p,void(u=0);var S=T.lineString([c,x],r.properties);if(n(S,s,l,p,u)===!1)return!1;u++,c=x})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,s,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,s,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(T.lineString(d[c],r.properties),s,l,c)===!1)return!1}}})}L.coordEach=b,L.coordReduce=function(i,n,r,s){var l=r;return b(i,function(u,d,c,w,m){l=d===0&&r===void 0?u:n(l,u,d,c,w,m)},s),l},L.propEach=a,L.propReduce=function(i,n,r){var s=r;return a(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.featureEach=_,L.featureReduce=function(i,n,r){var s=r;return _(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.coordAll=function(i){var n=[];return b(i,function(r){n.push(r)}),n},L.geomEach=g,L.geomReduce=function(i,n,r){var s=r;return g(i,function(l,u,d,c,w){s=u===0&&r===void 0?l:n(s,l,u,d,c,w)}),s},L.flattenEach=h,L.flattenReduce=function(i,n,r){var s=r;return h(i,function(l,u,d){s=u===0&&d===0&&r===void 0?l:n(s,l,u,d)}),s},L.segmentEach=o,L.segmentReduce=function(i,n,r){var s=r,l=!1;return o(i,function(u,d,c,w,m){s=l===!1&&r===void 0?u:n(s,u,d,c,w,m),l=!0}),s},L.lineEach=t,L.lineReduce=function(i,n,r){var s=r;return t(i,function(l,u,d,c){s=u===0&&r===void 0?l:n(s,l,u,d,c)}),s},L.findSegment=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=w.length+d-1),T.lineString([w[d],w[d+1]],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d-1),T.lineString([w[u][d],w[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d-1),T.lineString([w[l][d],w[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d-1),T.lineString([w[l][u][d],w[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":return T.point(w,c,n);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],c,n);case"LineString":return d<0&&(d=w.length+d),T.point(w[d],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),T.point(w[u][d],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d),T.point(w[l][d],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d),T.point(w[l][u][d],c,n)}throw new Error("geojson is invalid")}},29261:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(88553),b=e(64182);L.default=function(a,_){_===void 0&&(_={});var g=0,h=0,o=0;return T.coordEach(a,function(t){g+=t[0],h+=t[1],o++}),b.point([g/o,h/o],_.properties)}},64182:function(F,L){function e(s,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=s,d}function T(s,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:s},l,u)}function b(s,l,u){u===void 0&&(u={});for(var d=0,c=s;d<c.length;d++){var w=c[d];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var m=0;m<w[w.length-1].length;m++)if(w[w.length-1][m]!==w[0][m])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function a(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function _(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function g(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function h(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=L.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function r(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)&&!/^\s*$/.test(s)}Object.defineProperty(L,"__esModule",{value:!0}),L.earthRadius=63710088e-1,L.factors={centimeters:100*L.earthRadius,centimetres:100*L.earthRadius,degrees:L.earthRadius/111325,feet:3.28084*L.earthRadius,inches:39.37*L.earthRadius,kilometers:L.earthRadius/1e3,kilometres:L.earthRadius/1e3,meters:L.earthRadius,metres:L.earthRadius,miles:L.earthRadius/1609.344,millimeters:1e3*L.earthRadius,millimetres:1e3*L.earthRadius,nauticalmiles:L.earthRadius/1852,radians:1,yards:L.earthRadius/1.0936},L.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/L.earthRadius,yards:.91441111923921},L.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},L.feature=e,L.geometry=function(s,l,u){switch(s){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return b(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return g(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},L.point=T,L.points=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return T(d,l)}),u)},L.polygon=b,L.polygons=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return b(d,l)}),u)},L.lineString=a,L.lineStrings=function(s,l,u){return u===void 0&&(u={}),_(s.map(function(d){return a(d,l)}),u)},L.featureCollection=_,L.multiLineString=g,L.multiPoint=h,L.multiPolygon=o,L.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},L.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},L.radiansToLength=t,L.lengthToRadians=i,L.lengthToDegrees=function(s,l){return n(i(s,l))},L.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},L.radiansToDegrees=n,L.degreesToRadians=function(s){return s%360*Math.PI/180},L.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},L.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var d=L.areaFactors[l];if(!d)throw new Error("invalid original units");var c=L.areaFactors[u];if(!c)throw new Error("invalid final units");return s/d*c},L.isNumber=r,L.isObject=function(s){return!!s&&s.constructor===Object},L.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},L.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")},L.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},L.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},L.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},L.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},L.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},L.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},L.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(F,L,e){Object.defineProperty(L,"__esModule",{value:!0});var T=e(64182);function b(i,n,r){if(i!==null)for(var s,l,u,d,c,w,m,f,x=0,y=0,v=i.type,M=v==="FeatureCollection",p=v==="Feature",S=M?i.features.length:1,A=0;A<S;A++){c=(f=!!(m=M?i.features[A].geometry:p?i.geometry:i)&&m.type==="GeometryCollection")?m.geometries.length:1;for(var k=0;k<c;k++){var C=0,P=0;if((d=f?m.geometries[k]:m)!==null){w=d.coordinates;var R=d.type;switch(x=!r||R!=="Polygon"&&R!=="MultiPolygon"?0:1,R){case null:break;case"Point":if(n(w,y,A,C,P)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<w.length;s++){if(n(w[s],y,A,C,P)===!1)return!1;y++,R==="MultiPoint"&&C++}R==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<w.length;s++){for(l=0;l<w[s].length-x;l++){if(n(w[s][l],y,A,C,P)===!1)return!1;y++}R==="MultiLineString"&&C++,R==="Polygon"&&P++}R==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<w.length;s++){for(P=0,l=0;l<w[s].length;l++){for(u=0;u<w[s][l].length-x;u++){if(n(w[s][l][u],y,A,C,P)===!1)return!1;y++}P++}C++}break;case"GeometryCollection":for(s=0;s<d.geometries.length;s++)if(b(d.geometries[s],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function _(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function g(i,n){var r,s,l,u,d,c,w,m,f,x,y=0,v=i.type==="FeatureCollection",M=i.type==="Feature",p=v?i.features.length:1;for(r=0;r<p;r++){for(c=v?i.features[r].geometry:M?i.geometry:i,m=v?i.features[r].properties:M?i.properties:{},f=v?i.features[r].bbox:M?i.bbox:void 0,x=v?i.features[r].id:M?i.id:void 0,d=(w=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=w?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,m,f,x)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],y,m,f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,m,f,x)===!1)return!1;y++}}function h(i,n){g(i,function(r,s,l,u,d){var c,w=r===null?null:r.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return n(T.feature(r,l,{bbox:u,id:d}),s,0)!==!1&&void 0}switch(w){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var m=0;m<r.coordinates.length;m++){var f={type:c,coordinates:r.coordinates[m]};if(n(T.feature(f,l),s,m)===!1)return!1}})}function o(i,n){h(i,function(r,s,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,w=0,m=0,f=0;return b(r,function(x,y,v,M,p){if(c===void 0||s>w||M>m||p>f)return c=x,w=s,m=M,f=p,void(u=0);var S=T.lineString([c,x],r.properties);if(n(S,s,l,p,u)===!1)return!1;u++,c=x})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,s,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,s,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(T.lineString(d[c],r.properties),s,l,c)===!1)return!1}}})}L.coordEach=b,L.coordReduce=function(i,n,r,s){var l=r;return b(i,function(u,d,c,w,m){l=d===0&&r===void 0?u:n(l,u,d,c,w,m)},s),l},L.propEach=a,L.propReduce=function(i,n,r){var s=r;return a(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.featureEach=_,L.featureReduce=function(i,n,r){var s=r;return _(i,function(l,u){s=u===0&&r===void 0?l:n(s,l,u)}),s},L.coordAll=function(i){var n=[];return b(i,function(r){n.push(r)}),n},L.geomEach=g,L.geomReduce=function(i,n,r){var s=r;return g(i,function(l,u,d,c,w){s=u===0&&r===void 0?l:n(s,l,u,d,c,w)}),s},L.flattenEach=h,L.flattenReduce=function(i,n,r){var s=r;return h(i,function(l,u,d){s=u===0&&d===0&&r===void 0?l:n(s,l,u,d)}),s},L.segmentEach=o,L.segmentReduce=function(i,n,r){var s=r,l=!1;return o(i,function(u,d,c,w,m){s=l===!1&&r===void 0?u:n(s,u,d,c,w,m),l=!0}),s},L.lineEach=t,L.lineReduce=function(i,n,r){var s=r;return t(i,function(l,u,d,c){s=u===0&&r===void 0?l:n(s,l,u,d,c)}),s},L.findSegment=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=w.length+d-1),T.lineString([w[d],w[d+1]],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d-1),T.lineString([w[u][d],w[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d-1),T.lineString([w[l][d],w[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d-1),T.lineString([w[l][u][d],w[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},L.findPoint=function(i,n){if(n=n||{},!T.isObject(n))throw new Error("options is invalid");var r,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,r=i.features[s].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var w=r.coordinates;switch(r.type){case"Point":return T.point(w,c,n);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],c,n);case"LineString":return d<0&&(d=w.length+d),T.point(w[d],c,n);case"Polygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),T.point(w[u][d],c,n);case"MultiLineString":return l<0&&(l=w.length+l),d<0&&(d=w[l].length+d),T.point(w[l][d],c,n);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),d<0&&(d=w[l][u].length-d),T.point(w[l][u][d],c,n)}throw new Error("geojson is invalid")}},65185:function(F){F.exports=function(L){var e=0,T=0,b=0,a=0;return L.map(function(_){var g=(_=_.slice())[0],h=g.toUpperCase();if(g!=h)switch(_[0]=h,g){case"a":_[6]+=b,_[7]+=a;break;case"v":_[1]+=a;break;case"h":_[1]+=b;break;default:for(var o=1;o<_.length;)_[o++]+=b,_[o++]+=a}switch(h){case"Z":b=e,a=T;break;case"H":b=_[1];break;case"V":a=_[1];break;case"M":b=e=_[1],a=T=_[2];break;default:b=_[_.length-2],a=_[_.length-1]}return _})}},21527:function(F){F.exports=function(L,e){if(!L||L.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var T=Array(2*e),b=0;b<e;b++){for(var a=-1/0,_=1/0,g=b,h=L.length;g<h;g+=e)L[g]>a&&(a=L[g]),L[g]<_&&(_=L[g]);T[b]=_,T[e+b]=a}return T}},6851:function(F){F.exports=function(L,e,T){if(typeof Array.prototype.findIndex=="function")return L.findIndex(e,T);if(typeof e!="function")throw new TypeError("predicate must be a function");var b=Object(L),a=b.length;if(a===0)return-1;for(var _=0;_<a;_++)if(e.call(T,b[_],_,b))return _;return-1}},54:function(F,L,e){var T=e(21527);F.exports=function(b,a,_){if(!b||b.length==null)throw Error("Argument should be an array");a==null&&(a=1),_==null&&(_=T(b,a));for(var g=0;g<a;g++){var h=_[a+g],o=_[g],t=g,i=b.length;if(h===1/0&&o===-1/0)for(t=g;t<i;t+=a)b[t]=b[t]===h?1:b[t]===o?0:.5;else if(h===1/0)for(t=g;t<i;t+=a)b[t]=b[t]===h?1:0;else if(o===-1/0)for(t=g;t<i;t+=a)b[t]=b[t]===o?0:1;else{var n=h-o;for(t=g;t<i;t+=a)isNaN(b[t])||(b[t]=n===0?.5:(b[t]-o)/n)}}return b}},57471:function(F){F.exports=function(L,e){var T=typeof L=="number",b=typeof e=="number";T&&!b?(e=L,L=0):T||b||(L=0,e=0);var a=(e|=0)-(L|=0);if(a<0)throw new Error("array length must be positive");for(var _=new Array(a),g=0,h=L;g<a;g++,h++)_[g]=h;return _}},32791:function(F,L,e){var T=e(90386);function b(D){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},b(D)}var a,_,g=e(79616).codes,h=g.ERR_AMBIGUOUS_ARGUMENT,o=g.ERR_INVALID_ARG_TYPE,t=g.ERR_INVALID_ARG_VALUE,i=g.ERR_INVALID_RETURN_VALUE,n=g.ERR_MISSING_ARGS,r=e(73894),s=e(43827).inspect,l=e(43827).types,u=l.isPromise,d=l.isRegExp,c=Object.assign?Object.assign:e(73523).assign,w=Object.is?Object.is:e(64003);function m(){var D=e(74061);a=D.isDeepEqual,_=D.isDeepStrictEqual}var f=!1,x=F.exports=p,y={};function v(D){throw D.message instanceof Error?D.message:new r(D)}function M(D,V,j,B){if(!j){var W=!1;if(V===0)W=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var q=new r({actual:j,expected:!0,message:B,operator:"==",stackStartFn:D});throw q.generatedMessage=W,q}}function p(){for(var D=arguments.length,V=new Array(D),j=0;j<D;j++)V[j]=arguments[j];M.apply(void 0,[p,V.length].concat(V))}x.fail=function D(V,j,B,W,q){var re,ee=arguments.length;if(ee===0?re="Failed":ee===1?(B=V,V=void 0):(f===!1&&(f=!0,(T.emitWarning?T.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ee===2&&(W="!=")),B instanceof Error)throw B;var K={actual:V,expected:j,operator:W===void 0?"fail":W,stackStartFn:q||D};B!==void 0&&(K.message=B);var Y=new r(K);throw re&&(Y.message=re,Y.generatedMessage=!0),Y},x.AssertionError=r,x.ok=p,x.equal=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");V!=j&&v({actual:V,expected:j,message:B,operator:"==",stackStartFn:D})},x.notEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");V==j&&v({actual:V,expected:j,message:B,operator:"!=",stackStartFn:D})},x.deepEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");a===void 0&&m(),a(V,j)||v({actual:V,expected:j,message:B,operator:"deepEqual",stackStartFn:D})},x.notDeepEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");a===void 0&&m(),a(V,j)&&v({actual:V,expected:j,message:B,operator:"notDeepEqual",stackStartFn:D})},x.deepStrictEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");a===void 0&&m(),_(V,j)||v({actual:V,expected:j,message:B,operator:"deepStrictEqual",stackStartFn:D})},x.notDeepStrictEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");a===void 0&&m(),_(V,j)&&v({actual:V,expected:j,message:B,operator:"notDeepStrictEqual",stackStartFn:D})},x.strictEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");w(V,j)||v({actual:V,expected:j,message:B,operator:"strictEqual",stackStartFn:D})},x.notStrictEqual=function D(V,j,B){if(arguments.length<2)throw new n("actual","expected");w(V,j)&&v({actual:V,expected:j,message:B,operator:"notStrictEqual",stackStartFn:D})};var S=function D(V,j,B){var W=this;(function(q,re){if(!(q instanceof re))throw new TypeError("Cannot call a class as a function")})(this,D),j.forEach(function(q){q in V&&(B!==void 0&&typeof B[q]=="string"&&d(V[q])&&V[q].test(B[q])?W[q]=B[q]:W[q]=V[q])})};function A(D,V,j,B){if(typeof V!="function"){if(d(V))return V.test(D);if(arguments.length===2)throw new o("expected",["Function","RegExp"],V);if(b(D)!=="object"||D===null){var W=new r({actual:D,expected:V,message:j,operator:"deepStrictEqual",stackStartFn:B});throw W.operator=B.name,W}var q=Object.keys(V);if(V instanceof Error)q.push("name","message");else if(q.length===0)throw new t("error",V,"may not be an empty object");return a===void 0&&m(),q.forEach(function(re){typeof D[re]=="string"&&d(V[re])&&V[re].test(D[re])||function(ee,K,Y,$,ne,ae){if(!(Y in ee)||!_(ee[Y],K[Y])){if(!$){var se=new S(ee,ne),ce=new S(K,ne,ee),me=new r({actual:se,expected:ce,operator:"deepStrictEqual",stackStartFn:ae});throw me.actual=ee,me.expected=K,me.operator=ae.name,me}v({actual:ee,expected:K,message:$,operator:ae.name,stackStartFn:ae})}}(D,V,re,j,q,B)}),!0}return V.prototype!==void 0&&D instanceof V||!Error.isPrototypeOf(V)&&V.call({},D)===!0}function k(D){if(typeof D!="function")throw new o("fn","Function",D);try{D()}catch(V){return V}return y}function C(D){return u(D)||D!==null&&b(D)==="object"&&typeof D.then=="function"&&typeof D.catch=="function"}function P(D){return Promise.resolve().then(function(){var V;if(typeof D=="function"){if(!C(V=D()))throw new i("instance of Promise","promiseFn",V)}else{if(!C(D))throw new o("promiseFn",["Function","Promise"],D);V=D}return Promise.resolve().then(function(){return V}).then(function(){return y}).catch(function(j){return j})})}function R(D,V,j,B){if(typeof j=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],j);if(b(V)==="object"&&V!==null){if(V.message===j)throw new h("error/message",'The error message "'.concat(V.message,'" is identical to the message.'))}else if(V===j)throw new h("error/message",'The error "'.concat(V,'" is identical to the message.'));B=j,j=void 0}else if(j!=null&&b(j)!=="object"&&typeof j!="function")throw new o("error",["Object","Error","Function","RegExp"],j);if(V===y){var W="";j&&j.name&&(W+=" (".concat(j.name,")")),W+=B?": ".concat(B):".";var q=D.name==="rejects"?"rejection":"exception";v({actual:void 0,expected:j,operator:D.name,message:"Missing expected ".concat(q).concat(W),stackStartFn:D})}if(j&&!A(V,j,B,D))throw V}function O(D,V,j,B){if(V!==y){if(typeof j=="string"&&(B=j,j=void 0),!j||A(V,j)){var W=B?": ".concat(B):".",q=D.name==="doesNotReject"?"rejection":"exception";v({actual:V,expected:j,operator:D.name,message:"Got unwanted ".concat(q).concat(W,`
`)+'Actual message: "'.concat(V&&V.message,'"'),stackStartFn:D})}throw V}}function X(){for(var D=arguments.length,V=new Array(D),j=0;j<D;j++)V[j]=arguments[j];M.apply(void 0,[X,V.length].concat(V))}x.throws=function D(V){for(var j=arguments.length,B=new Array(j>1?j-1:0),W=1;W<j;W++)B[W-1]=arguments[W];R.apply(void 0,[D,k(V)].concat(B))},x.rejects=function D(V){for(var j=arguments.length,B=new Array(j>1?j-1:0),W=1;W<j;W++)B[W-1]=arguments[W];return P(V).then(function(q){return R.apply(void 0,[D,q].concat(B))})},x.doesNotThrow=function D(V){for(var j=arguments.length,B=new Array(j>1?j-1:0),W=1;W<j;W++)B[W-1]=arguments[W];O.apply(void 0,[D,k(V)].concat(B))},x.doesNotReject=function D(V){for(var j=arguments.length,B=new Array(j>1?j-1:0),W=1;W<j;W++)B[W-1]=arguments[W];return P(V).then(function(q){return O.apply(void 0,[D,q].concat(B))})},x.ifError=function D(V){if(V!=null){var j="ifError got unwanted exception: ";b(V)==="object"&&typeof V.message=="string"?V.message.length===0&&V.constructor?j+=V.constructor.name:j+=V.message:j+=s(V);var B=new r({actual:V,expected:null,operator:"ifError",message:j,stackStartFn:D}),W=V.stack;if(typeof W=="string"){var q=W.split(`
`);q.shift();for(var re=B.stack.split(`
`),ee=0;ee<q.length;ee++){var K=re.indexOf(q[ee]);if(K!==-1){re=re.slice(0,K);break}}B.stack="".concat(re.join(`
`),`
`).concat(q.join(`
`))}throw B}},x.strict=c(X,x,{equal:x.strictEqual,deepEqual:x.deepStrictEqual,notEqual:x.notStrictEqual,notDeepEqual:x.notDeepStrictEqual}),x.strict.strict=x.strict},73894:function(F,L,e){var T=e(90386);function b(v,M,p){return M in v?Object.defineProperty(v,M,{value:p,enumerable:!0,configurable:!0,writable:!0}):v[M]=p,v}function a(v,M){for(var p=0;p<M.length;p++){var S=M[p];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function _(v,M){return!M||n(M)!=="object"&&typeof M!="function"?g(v):M}function g(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(v){var M=typeof Map=="function"?new Map:void 0;return h=function(p){if(p===null||(S=p,Function.toString.call(S).indexOf("[native code]")===-1))return p;var S;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(p))return M.get(p);M.set(p,A)}function A(){return o(p,arguments,i(this).constructor)}return A.prototype=Object.create(p.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),t(A,p)},h(v)}function o(v,M,p){return o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,A,k){var C=[null];C.push.apply(C,A);var P=new(Function.bind.apply(S,C));return k&&t(P,k.prototype),P},o.apply(null,arguments)}function t(v,M){return t=Object.setPrototypeOf||function(p,S){return p.__proto__=S,p},t(v,M)}function i(v){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},i(v)}function n(v){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},n(v)}var r=e(43827).inspect,s=e(79616).codes.ERR_INVALID_ARG_TYPE;function l(v,M,p){return(p===void 0||p>v.length)&&(p=v.length),v.substring(p-M.length,p)===M}var u="",d="",c="",w="",m={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function f(v){var M=Object.keys(v),p=Object.create(Object.getPrototypeOf(v));return M.forEach(function(S){p[S]=v[S]}),Object.defineProperty(p,"message",{value:v.message}),p}function x(v){return r(v,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(v){function M(A){var k;if(function(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}(this,M),n(A)!=="object"||A===null)throw new s("options","Object",A);var C=A.message,P=A.operator,R=A.stackStartFn,O=A.actual,X=A.expected,D=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)k=_(this,i(M).call(this,String(C)));else if(T.stderr&&T.stderr.isTTY&&(T.stderr&&T.stderr.getColorDepth&&T.stderr.getColorDepth()!==1?(u="\x1B[34m",d="\x1B[32m",w="\x1B[39m",c="\x1B[31m"):(u="",d="",w="",c="")),n(O)==="object"&&O!==null&&n(X)==="object"&&X!==null&&"stack"in O&&O instanceof Error&&"stack"in X&&X instanceof Error&&(O=f(O),X=f(X)),P==="deepStrictEqual"||P==="strictEqual")k=_(this,i(M).call(this,function(re,ee,K){var Y="",$="",ne=0,ae="",se=!1,ce=x(re),me=ce.split(`
`),ye=x(ee).split(`
`),Te=0,Ce="";if(K==="strictEqual"&&n(re)==="object"&&n(ee)==="object"&&re!==null&&ee!==null&&(K="strictEqualObject"),me.length===1&&ye.length===1&&me[0]!==ye[0]){var pe=me[0].length+ye[0].length;if(pe<=10){if(!(n(re)==="object"&&re!==null||n(ee)==="object"&&ee!==null||re===0&&ee===0))return"".concat(m[K],`

`)+"".concat(me[0]," !== ").concat(ye[0],`
`)}else if(K!=="strictEqualObject"&&pe<(T.stderr&&T.stderr.isTTY?T.stderr.columns:80)){for(;me[0][Te]===ye[0][Te];)Te++;Te>2&&(Ce=`
  `.concat(function(He,de){if(de=Math.floor(de),He.length==0||de==0)return"";var Le=He.length*de;for(de=Math.floor(Math.log(de)/Math.log(2));de;)He+=He,de--;return He+He.substring(0,Le-He.length)}(" ",Te),"^"),Te=0)}}for(var fe=me[me.length-1],Oe=ye[ye.length-1];fe===Oe&&(Te++<2?ae=`
  `.concat(fe).concat(ae):Y=fe,me.pop(),ye.pop(),me.length!==0&&ye.length!==0);)fe=me[me.length-1],Oe=ye[ye.length-1];var Se=Math.max(me.length,ye.length);if(Se===0){var Me=ce.split(`
`);if(Me.length>30)for(Me[26]="".concat(u,"...").concat(w);Me.length>27;)Me.pop();return"".concat(m.notIdentical,`

`).concat(Me.join(`
`),`
`)}Te>3&&(ae=`
`.concat(u,"...").concat(w).concat(ae),se=!0),Y!==""&&(ae=`
  `.concat(Y).concat(ae),Y="");var ue=0,le=m[K]+`
`.concat(d,"+ actual").concat(w," ").concat(c,"- expected").concat(w),ie=" ".concat(u,"...").concat(w," Lines skipped");for(Te=0;Te<Se;Te++){var ge=Te-ne;if(me.length<Te+1)ge>1&&Te>2&&(ge>4?($+=`
`.concat(u,"...").concat(w),se=!0):ge>3&&($+=`
  `.concat(ye[Te-2]),ue++),$+=`
  `.concat(ye[Te-1]),ue++),ne=Te,Y+=`
`.concat(c,"-").concat(w," ").concat(ye[Te]),ue++;else if(ye.length<Te+1)ge>1&&Te>2&&(ge>4?($+=`
`.concat(u,"...").concat(w),se=!0):ge>3&&($+=`
  `.concat(me[Te-2]),ue++),$+=`
  `.concat(me[Te-1]),ue++),ne=Te,$+=`
`.concat(d,"+").concat(w," ").concat(me[Te]),ue++;else{var Ae=ye[Te],we=me[Te],Ne=we!==Ae&&(!l(we,",")||we.slice(0,-1)!==Ae);Ne&&l(Ae,",")&&Ae.slice(0,-1)===we&&(Ne=!1,we+=","),Ne?(ge>1&&Te>2&&(ge>4?($+=`
`.concat(u,"...").concat(w),se=!0):ge>3&&($+=`
  `.concat(me[Te-2]),ue++),$+=`
  `.concat(me[Te-1]),ue++),ne=Te,$+=`
`.concat(d,"+").concat(w," ").concat(we),Y+=`
`.concat(c,"-").concat(w," ").concat(Ae),ue+=2):($+=Y,Y="",ge!==1&&Te!==0||($+=`
  `.concat(we),ue++))}if(ue>20&&Te<Se-2)return"".concat(le).concat(ie,`
`).concat($,`
`).concat(u,"...").concat(w).concat(Y,`
`)+"".concat(u,"...").concat(w)}return"".concat(le).concat(se?ie:"",`
`).concat($).concat(Y).concat(ae).concat(Ce)}(O,X,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var V=m[P],j=x(O).split(`
`);if(P==="notStrictEqual"&&n(O)==="object"&&O!==null&&(V=m.notStrictEqualObject),j.length>30)for(j[26]="".concat(u,"...").concat(w);j.length>27;)j.pop();k=j.length===1?_(this,i(M).call(this,"".concat(V," ").concat(j[0]))):_(this,i(M).call(this,"".concat(V,`

`).concat(j.join(`
`),`
`)))}else{var B=x(O),W="",q=m[P];P==="notDeepEqual"||P==="notEqual"?(B="".concat(m[P],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(W="".concat(x(X)),B.length>512&&(B="".concat(B.slice(0,509),"...")),W.length>512&&(W="".concat(W.slice(0,509),"...")),P==="deepEqual"||P==="equal"?B="".concat(q,`

`).concat(B,`

should equal

`):W=" ".concat(P," ").concat(W)),k=_(this,i(M).call(this,"".concat(B).concat(W)))}return Error.stackTraceLimit=D,k.generatedMessage=!C,Object.defineProperty(g(k),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),k.code="ERR_ASSERTION",k.actual=O,k.expected=X,k.operator=P,Error.captureStackTrace&&Error.captureStackTrace(g(k),R),k.stack,k.name="AssertionError",_(k)}var p,S;return function(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),k&&t(A,k)}(M,v),p=M,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(A,k){return r(this,function(C){for(var P=1;P<arguments.length;P++){var R=arguments[P]!=null?arguments[P]:{},O=Object.keys(R);typeof Object.getOwnPropertySymbols=="function"&&(O=O.concat(Object.getOwnPropertySymbols(R).filter(function(X){return Object.getOwnPropertyDescriptor(R,X).enumerable}))),O.forEach(function(X){b(C,X,R[X])})}return C}({},k,{customInspect:!1,depth:0}))}}],S&&a(p.prototype,S),M}(h(Error));F.exports=y},79616:function(F,L,e){function T(i){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},T(i)}function b(i){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},b(i)}function a(i,n){return a=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},a(i,n)}var _,g,h={};function o(i,n,r){r||(r=Error);var s=function(l){function u(d,c,w){var m;return function(f,x){if(!(f instanceof x))throw new TypeError("Cannot call a class as a function")}(this,u),m=function(f,x){return!x||T(x)!=="object"&&typeof x!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(f):x}(this,b(u).call(this,function(f,x,y){return typeof n=="string"?n:n(f,x,y)}(d,c,w))),m.code=i,m}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),c&&a(d,c)}(u,l),u}(r);h[i]=s}function t(i,n){if(Array.isArray(i)){var r=i.length;return i=i.map(function(s){return String(s)}),r>2?"one of ".concat(n," ").concat(i.slice(0,r-1).join(", "),", or ")+i[r-1]:r===2?"one of ".concat(n," ").concat(i[0]," or ").concat(i[1]):"of ".concat(n," ").concat(i[0])}return"of ".concat(n," ").concat(String(i))}o("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),o("ERR_INVALID_ARG_TYPE",function(i,n,r){var s,l,u,d,c;if(_===void 0&&(_=e(32791)),_(typeof i=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(s="must not be",n=n.replace(/^not /,"")):s="must be",function(m,f,x){return(x===void 0||x>m.length)&&(x=m.length),m.substring(x-9,x)===f}(i," argument"))u="The ".concat(i," ").concat(s," ").concat(t(n,"type"));else{var w=(typeof c!="number"&&(c=0),c+1>(d=i).length||d.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(w," ").concat(s," ").concat(t(n,"type"))}return u+". Received type ".concat(T(r))},TypeError),o("ERR_INVALID_ARG_VALUE",function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";g===void 0&&(g=e(43827));var s=g.inspect(n);return s.length>128&&(s="".concat(s.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(r,". Received ").concat(s)},TypeError),o("ERR_INVALID_RETURN_VALUE",function(i,n,r){var s;return s=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(T(r)),"Expected ".concat(i,' to be returned from the "').concat(n,'"')+" function but got ".concat(s,".")},TypeError),o("ERR_MISSING_ARGS",function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];_===void 0&&(_=e(32791)),_(n.length>0,"At least one arg needs to be specified");var s="The ",l=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),l){case 1:s+="".concat(n[0]," argument");break;case 2:s+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:s+=n.slice(0,l-1).join(", "),s+=", and ".concat(n[l-1]," arguments")}return"".concat(s," must be specified")},TypeError),F.exports.codes=h},74061:function(F,L,e){function T(ne,ae){return function(se){if(Array.isArray(se))return se}(ne)||function(se,ce){var me=[],ye=!0,Te=!1,Ce=void 0;try{for(var pe,fe=se[Symbol.iterator]();!(ye=(pe=fe.next()).done)&&(me.push(pe.value),!ce||me.length!==ce);ye=!0);}catch(Oe){Te=!0,Ce=Oe}finally{try{ye||fe.return==null||fe.return()}finally{if(Te)throw Ce}}return me}(ne,ae)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(ne){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},b(ne)}var a=/a/g.flags!==void 0,_=function(ne){var ae=[];return ne.forEach(function(se){return ae.push(se)}),ae},g=function(ne){var ae=[];return ne.forEach(function(se,ce){return ae.push([ce,se])}),ae},h=Object.is?Object.is:e(64003),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function i(ne){return ne.call.bind(ne)}var n=i(Object.prototype.hasOwnProperty),r=i(Object.prototype.propertyIsEnumerable),s=i(Object.prototype.toString),l=e(43827).types,u=l.isAnyArrayBuffer,d=l.isArrayBufferView,c=l.isDate,w=l.isMap,m=l.isRegExp,f=l.isSet,x=l.isNativeError,y=l.isBoxedPrimitive,v=l.isNumberObject,M=l.isStringObject,p=l.isBooleanObject,S=l.isBigIntObject,A=l.isSymbolObject,k=l.isFloat32Array,C=l.isFloat64Array;function P(ne){if(ne.length===0||ne.length>10)return!0;for(var ae=0;ae<ne.length;ae++){var se=ne.charCodeAt(ae);if(se<48||se>57)return!0}return ne.length===10&&ne>=Math.pow(2,32)}function R(ne){return Object.keys(ne).filter(P).concat(o(ne).filter(Object.prototype.propertyIsEnumerable.bind(ne)))}function O(ne,ae){if(ne===ae)return 0;for(var se=ne.length,ce=ae.length,me=0,ye=Math.min(se,ce);me<ye;++me)if(ne[me]!==ae[me]){se=ne[me],ce=ae[me];break}return se<ce?-1:ce<se?1:0}var X=0,D=1,V=2,j=3;function B(ne,ae,se,ce){if(ne===ae)return ne!==0||!se||h(ne,ae);if(se){if(b(ne)!=="object")return typeof ne=="number"&&t(ne)&&t(ae);if(b(ae)!=="object"||ne===null||ae===null||Object.getPrototypeOf(ne)!==Object.getPrototypeOf(ae))return!1}else{if(ne===null||b(ne)!=="object")return(ae===null||b(ae)!=="object")&&ne==ae;if(ae===null||b(ae)!=="object")return!1}var me,ye,Te,Ce,pe=s(ne);if(pe!==s(ae))return!1;if(Array.isArray(ne)){if(ne.length!==ae.length)return!1;var fe=R(ne),Oe=R(ae);return fe.length===Oe.length&&q(ne,ae,se,ce,D,fe)}if(pe==="[object Object]"&&(!w(ne)&&w(ae)||!f(ne)&&f(ae)))return!1;if(c(ne)){if(!c(ae)||Date.prototype.getTime.call(ne)!==Date.prototype.getTime.call(ae))return!1}else if(m(ne)){if(!m(ae)||(Te=ne,Ce=ae,!(a?Te.source===Ce.source&&Te.flags===Ce.flags:RegExp.prototype.toString.call(Te)===RegExp.prototype.toString.call(Ce))))return!1}else if(x(ne)||ne instanceof Error){if(ne.message!==ae.message||ne.name!==ae.name)return!1}else{if(d(ne)){if(se||!k(ne)&&!C(ne)){if(!function(ue,le){return ue.byteLength===le.byteLength&&O(new Uint8Array(ue.buffer,ue.byteOffset,ue.byteLength),new Uint8Array(le.buffer,le.byteOffset,le.byteLength))===0}(ne,ae))return!1}else if(!function(ue,le){if(ue.byteLength!==le.byteLength)return!1;for(var ie=0;ie<ue.byteLength;ie++)if(ue[ie]!==le[ie])return!1;return!0}(ne,ae))return!1;var Se=R(ne),Me=R(ae);return Se.length===Me.length&&q(ne,ae,se,ce,X,Se)}if(f(ne))return!(!f(ae)||ne.size!==ae.size)&&q(ne,ae,se,ce,V);if(w(ne))return!(!w(ae)||ne.size!==ae.size)&&q(ne,ae,se,ce,j);if(u(ne)){if(ye=ae,(me=ne).byteLength!==ye.byteLength||O(new Uint8Array(me),new Uint8Array(ye))!==0)return!1}else if(y(ne)&&!function(ue,le){return v(ue)?v(le)&&h(Number.prototype.valueOf.call(ue),Number.prototype.valueOf.call(le)):M(ue)?M(le)&&String.prototype.valueOf.call(ue)===String.prototype.valueOf.call(le):p(ue)?p(le)&&Boolean.prototype.valueOf.call(ue)===Boolean.prototype.valueOf.call(le):S(ue)?S(le)&&BigInt.prototype.valueOf.call(ue)===BigInt.prototype.valueOf.call(le):A(le)&&Symbol.prototype.valueOf.call(ue)===Symbol.prototype.valueOf.call(le)}(ne,ae))return!1}return q(ne,ae,se,ce,X)}function W(ne,ae){return ae.filter(function(se){return r(ne,se)})}function q(ne,ae,se,ce,me,ye){if(arguments.length===5){ye=Object.keys(ne);var Te=Object.keys(ae);if(ye.length!==Te.length)return!1}for(var Ce=0;Ce<ye.length;Ce++)if(!n(ae,ye[Ce]))return!1;if(se&&arguments.length===5){var pe=o(ne);if(pe.length!==0){var fe=0;for(Ce=0;Ce<pe.length;Ce++){var Oe=pe[Ce];if(r(ne,Oe)){if(!r(ae,Oe))return!1;ye.push(Oe),fe++}else if(r(ae,Oe))return!1}var Se=o(ae);if(pe.length!==Se.length&&W(ae,Se).length!==fe)return!1}else{var Me=o(ae);if(Me.length!==0&&W(ae,Me).length!==0)return!1}}if(ye.length===0&&(me===X||me===D&&ne.length===0||ne.size===0))return!0;if(ce===void 0)ce={val1:new Map,val2:new Map,position:0};else{var ue=ce.val1.get(ne);if(ue!==void 0){var le=ce.val2.get(ae);if(le!==void 0)return ue===le}ce.position++}ce.val1.set(ne,ce.position),ce.val2.set(ae,ce.position);var ie=function(ge,Ae,we,Ne,He,de){var Le=0;if(de===V){if(!function(Fe,Xe,Ze,at){for(var lt=null,ot=_(Fe),bt=0;bt<ot.length;bt++){var wt=ot[bt];if(b(wt)==="object"&&wt!==null)lt===null&&(lt=new Set),lt.add(wt);else if(!Xe.has(wt)){if(Ze||!K(Fe,Xe,wt))return!1;lt===null&&(lt=new Set),lt.add(wt)}}if(lt!==null){for(var ht=_(Xe),ct=0;ct<ht.length;ct++){var Tt=ht[ct];if(b(Tt)==="object"&&Tt!==null){if(!re(lt,Tt,Ze,at))return!1}else if(!Ze&&!Fe.has(Tt)&&!re(lt,Tt,Ze,at))return!1}return lt.size===0}return!0}(ge,Ae,we,He))return!1}else if(de===j){if(!function(Fe,Xe,Ze,at){for(var lt=null,ot=g(Fe),bt=0;bt<ot.length;bt++){var wt=T(ot[bt],2),ht=wt[0],ct=wt[1];if(b(ht)==="object"&&ht!==null)lt===null&&(lt=new Set),lt.add(ht);else{var Tt=Xe.get(ht);if(Tt===void 0&&!Xe.has(ht)||!B(ct,Tt,Ze,at)){if(Ze||!Y(Fe,Xe,ht,ct,at))return!1;lt===null&&(lt=new Set),lt.add(ht)}}}if(lt!==null){for(var Lt=g(Xe),kt=0;kt<Lt.length;kt++){var Ot=T(Lt[kt],2),Pt=(ht=Ot[0],Ot[1]);if(b(ht)==="object"&&ht!==null){if(!$(lt,Fe,ht,Pt,Ze,at))return!1}else if(!(Ze||Fe.has(ht)&&B(Fe.get(ht),Pt,!1,at)||$(lt,Fe,ht,Pt,!1,at)))return!1}return lt.size===0}return!0}(ge,Ae,we,He))return!1}else if(de===D)for(;Le<ge.length;Le++){if(!n(ge,Le)){if(n(Ae,Le))return!1;for(var Ee=Object.keys(ge);Le<Ee.length;Le++){var Re=Ee[Le];if(!n(Ae,Re)||!B(ge[Re],Ae[Re],we,He))return!1}return Ee.length===Object.keys(Ae).length}if(!n(Ae,Le)||!B(ge[Le],Ae[Le],we,He))return!1}for(Le=0;Le<Ne.length;Le++){var je=Ne[Le];if(!B(ge[je],Ae[je],we,He))return!1}return!0}(ne,ae,se,ye,ce,me);return ce.val1.delete(ne),ce.val2.delete(ae),ie}function re(ne,ae,se,ce){for(var me=_(ne),ye=0;ye<me.length;ye++){var Te=me[ye];if(B(ae,Te,se,ce))return ne.delete(Te),!0}return!1}function ee(ne){switch(b(ne)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ne=+ne;case"number":if(t(ne))return!1}return!0}function K(ne,ae,se){var ce=ee(se);return ce??(ae.has(ce)&&!ne.has(ce))}function Y(ne,ae,se,ce,me){var ye=ee(se);if(ye!=null)return ye;var Te=ae.get(ye);return!(Te===void 0&&!ae.has(ye)||!B(ce,Te,!1,me))&&!ne.has(ye)&&B(ce,Te,!1,me)}function $(ne,ae,se,ce,me,ye){for(var Te=_(ne),Ce=0;Ce<Te.length;Ce++){var pe=Te[Ce];if(B(se,pe,me,ye)&&B(ce,ae.get(pe),me,ye))return ne.delete(pe),!0}return!1}F.exports={isDeepEqual:function(ne,ae){return B(ne,ae,!1)},isDeepStrictEqual:function(ne,ae){return B(ne,ae,!0)}}},95341:function(F,L){L.byteLength=function(o){var t=g(o),i=t[0],n=t[1];return 3*(i+n)/4-n},L.toByteArray=function(o){var t,i,n=g(o),r=n[0],s=n[1],l=new b(function(c,w,m){return 3*(w+m)/4-m}(0,r,s)),u=0,d=s>0?r-4:r;for(i=0;i<d;i+=4)t=T[o.charCodeAt(i)]<<18|T[o.charCodeAt(i+1)]<<12|T[o.charCodeAt(i+2)]<<6|T[o.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return s===2&&(t=T[o.charCodeAt(i)]<<2|T[o.charCodeAt(i+1)]>>4,l[u++]=255&t),s===1&&(t=T[o.charCodeAt(i)]<<10|T[o.charCodeAt(i+1)]<<4|T[o.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},L.fromByteArray=function(o){for(var t,i=o.length,n=i%3,r=[],s=16383,l=0,u=i-n;l<u;l+=s)r.push(h(o,l,l+s>u?u:l+s));return n===1?(t=o[i-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(o[i-2]<<8)+o[i-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],T=[],b=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0;_<64;++_)e[_]=a[_],T[a.charCodeAt(_)]=_;function g(o){var t=o.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=o.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function h(o,t,i){for(var n,r,s=[],l=t;l<i;l+=3)n=(o[l]<<16&16711680)+(o[l+1]<<8&65280)+(255&o[l+2]),s.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return s.join("")}T["-".charCodeAt(0)]=62,T["_".charCodeAt(0)]=63},91358:function(F){function L(g,h,o,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,s=g[r];(o!==void 0?o(s,h):s-h)>=0?(n=r,i=r-1):t=r+1}return n}function e(g,h,o,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,s=g[r];(o!==void 0?o(s,h):s-h)>0?(n=r,i=r-1):t=r+1}return n}function T(g,h,o,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,s=g[r];(o!==void 0?o(s,h):s-h)<0?(n=r,t=r+1):i=r-1}return n}function b(g,h,o,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,s=g[r];(o!==void 0?o(s,h):s-h)<=0?(n=r,t=r+1):i=r-1}return n}function a(g,h,o,t,i){for(;t<=i;){var n=t+i>>>1,r=g[n],s=o!==void 0?o(r,h):r-h;if(s===0)return n;s<=0?t=n+1:i=n-1}return-1}function _(g,h,o,t,i,n){return typeof o=="function"?n(g,h,o,t===void 0?0:0|t,i===void 0?g.length-1:0|i):n(g,h,void 0,o===void 0?0:0|o,t===void 0?g.length-1:0|t)}F.exports={ge:function(g,h,o,t,i){return _(g,h,o,t,i,L)},gt:function(g,h,o,t,i){return _(g,h,o,t,i,e)},lt:function(g,h,o,t,i){return _(g,h,o,t,i,T)},le:function(g,h,o,t,i){return _(g,h,o,t,i,b)},eq:function(g,h,o,t,i){return _(g,h,o,t,i,a)}}},13547:function(F,L){function e(b){var a=32;return(b&=-b)&&a--,65535&b&&(a-=16),16711935&b&&(a-=8),252645135&b&&(a-=4),858993459&b&&(a-=2),1431655765&b&&(a-=1),a}L.INT_BITS=32,L.INT_MAX=2147483647,L.INT_MIN=-2147483648,L.sign=function(b){return(b>0)-(b<0)},L.abs=function(b){var a=b>>31;return(b^a)-a},L.min=function(b,a){return a^(b^a)&-(b<a)},L.max=function(b,a){return b^(b^a)&-(b<a)},L.isPow2=function(b){return!(b&b-1||!b)},L.log2=function(b){var a,_;return a=(b>65535)<<4,a|=_=((b>>>=a)>255)<<3,a|=_=((b>>>=_)>15)<<2,(a|=_=((b>>>=_)>3)<<1)|(b>>>=_)>>1},L.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},L.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},L.countTrailingZeros=e,L.nextPow2=function(b){return b+=b===0,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,1+(b|=b>>>16)},L.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},L.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var T=new Array(256);(function(b){for(var a=0;a<256;++a){var _=a,g=a,h=7;for(_>>>=1;_;_>>>=1)g<<=1,g|=1&_,--h;b[a]=g<<h&255}})(T),L.reverse=function(b){return T[255&b]<<24|T[b>>>8&255]<<16|T[b>>>16&255]<<8|T[b>>>24&255]},L.interleave2=function(b,a){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},L.deinterleave2=function(b,a){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>a&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},L.interleave3=function(b,a,_){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(_=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2))<<2},L.deinterleave3=function(b,a){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>a&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},L.nextCombination=function(b){var a=b|b-1;return a+1|(~a&-~a)-1>>>e(b)+1}},44781:function(F,L,e){var T=e(53435);F.exports=function(g,h){h||(h={});var o,t,i,n,r,s,l,u,d,c,w,m=h.cutoff==null?.25:h.cutoff,f=h.radius==null?8:h.radius,x=h.channel||0;if(ArrayBuffer.isView(g)||Array.isArray(g)){if(!h.width||!h.height)throw Error("For raw data width and height should be provided by options");o=h.width,t=h.height,n=g,s=h.stride?h.stride:Math.floor(g.length/o/t)}else window.HTMLCanvasElement&&g instanceof window.HTMLCanvasElement?(l=(u=g).getContext("2d"),o=u.width,t=u.height,n=(d=l.getImageData(0,0,o,t)).data,s=4):window.CanvasRenderingContext2D&&g instanceof window.CanvasRenderingContext2D?(l=g,o=(u=g.canvas).width,t=u.height,n=(d=l.getImageData(0,0,o,t)).data,s=4):window.ImageData&&g instanceof window.ImageData&&(d=g,o=g.width,t=g.height,n=d.data,s=4);if(i=Math.max(o,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(o*t),c=0,w=r.length;c<w;c++)n[c]=r[c*s+x]/255;else if(s!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(o*t),v=Array(o*t),M=Array(i),p=Array(i),S=Array(i+1),A=Array(i);for(c=0,w=o*t;c<w;c++){var k=n[c];y[c]=k===1?0:k===0?b:Math.pow(Math.max(0,.5-k),2),v[c]=k===1?b:k===0?0:Math.pow(Math.max(0,k-.5),2)}a(y,o,t,M,p,A,S),a(v,o,t,M,p,A,S);var C=window.Float32Array?new Float32Array(o*t):new Array(o*t);for(c=0,w=o*t;c<w;c++)C[c]=T(1-((y[c]-v[c])/f+m),0,1);return C};var b=1e20;function a(g,h,o,t,i,n,r){for(var s=0;s<h;s++){for(var l=0;l<o;l++)t[l]=g[l*h+s];for(_(t,i,n,r,o),l=0;l<o;l++)g[l*h+s]=i[l]}for(l=0;l<o;l++){for(s=0;s<h;s++)t[s]=g[l*h+s];for(_(t,i,n,r,h),s=0;s<h;s++)g[l*h+s]=Math.sqrt(i[s])}}function _(g,h,o,t,i){o[0]=0,t[0]=-b,t[1]=+b;for(var n=1,r=0;n<i;n++){for(var s=(g[n]+n*n-(g[o[r]]+o[r]*o[r]))/(2*n-2*o[r]);s<=t[r];)r--,s=(g[n]+n*n-(g[o[r]]+o[r]*o[r]))/(2*n-2*o[r]);o[++r]=n,t[r]=s,t[r+1]=+b}for(n=0,r=0;n<i;n++){for(;t[r+1]<n;)r++;h[n]=(n-o[r])*(n-o[r])+g[o[r]]}}},6614:function(F,L,e){var T=e(68318),b=e(68222),a=b(T("String.prototype.indexOf"));F.exports=function(_,g){var h=T(_,!!g);return typeof h=="function"&&a(_,".prototype.")>-1?b(h):h}},68222:function(F,L,e){var T=e(77575),b=e(68318),a=b("%Function.prototype.apply%"),_=b("%Function.prototype.call%"),g=b("%Reflect.apply%",!0)||T.call(_,a),h=b("%Object.getOwnPropertyDescriptor%",!0),o=b("%Object.defineProperty%",!0),t=b("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}F.exports=function(n){var r=g(T,_,arguments);return h&&o&&h(r,"length").configurable&&o(r,"length",{value:1+t(0,n.length-(arguments.length-1))}),r};var i=function(){return g(T,a,arguments)};o?o(F.exports,"apply",{value:i}):F.exports.apply=i},53435:function(F){F.exports=function(L,e,T){return e<T?L<e?e:L>T?T:L:L<T?T:L>e?e:L}},6475:function(F,L,e){var T=e(53435);function b(a,_){_==null&&(_=!0);var g=a[0],h=a[1],o=a[2],t=a[3];return t==null&&(t=_?1:255),_&&(g*=255,h*=255,o*=255,t*=255),16777216*(g=255&T(g,0,255))+((h=255&T(h,0,255))<<16)+((o=255&T(o,0,255))<<8)+(255&T(t,0,255))}F.exports=b,F.exports.to=b,F.exports.from=function(a,_){var g=(a=+a)>>>24,h=(16711680&a)>>>16,o=(65280&a)>>>8,t=255&a;return _===!1?[g,h,o,t]:[g/255,h/255,o/255,t/255]}},76857:function(F){F.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(F,L,e){var T=e(36652),b=e(53435),a=e(90660);F.exports=function(_,g){g!=="float"&&g||(g="array"),g==="uint"&&(g="uint8"),g==="uint_clamped"&&(g="uint8_clamped");var h=new(a(g))(4),o=g!=="uint8"&&g!=="uint8_clamped";return _.length&&typeof _!="string"||((_=T(_))[0]/=255,_[1]/=255,_[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(_)?(h[0]=_[0],h[1]=_[1],h[2]=_[2],h[3]=_[3]!=null?_[3]:255,o&&(h[0]/=255,h[1]/=255,h[2]/=255,h[3]/=255),h):(o?(h[0]=_[0],h[1]=_[1],h[2]=_[2],h[3]=_[3]!=null?_[3]:1):(h[0]=b(Math.floor(255*_[0]),0,255),h[1]=b(Math.floor(255*_[1]),0,255),h[2]=b(Math.floor(255*_[2]),0,255),h[3]=_[3]==null?255:b(Math.floor(255*_[3]),0,255)),h)}},90736:function(F,L,e){var T=e(76857),b=e(10973),a=e(46775);F.exports=function(g){var h,o,t=[],i=1;if(typeof g=="string")if(T[g])t=T[g].slice(),o="rgb";else if(g==="transparent")i=0,o="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var n=g.slice(1);i=1,(l=n.length)<=4?(t=[parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16)],l===4&&(i=parseInt(n[3]+n[3],16)/255)):(t=[parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16)],l===8&&(i=parseInt(n[6]+n[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(h=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g)){var r=h[1],s=r==="rgb";o=n=r.replace(/a$/,"");var l=n==="cmyk"?4:n==="gray"?1:3;t=h[2].trim().split(/\s*,\s*/).map(function(d,c){if(/%$/.test(d))return c===l?parseFloat(d)/100:n==="rgb"?255*parseFloat(d)/100:parseFloat(d);if(n[c]==="h"){if(/deg$/.test(d))return parseFloat(d);if(_[d]!==void 0)return _[d]}return parseFloat(d)}),r===n&&t.push(1),i=s||t[l]===void 0?1:t[l],t=t.slice(0,l)}else g.length>10&&/[0-9](?:\s|\/)/.test(g)&&(t=g.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),o=g.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(g))if(b(g)){var u=a(g.r,g.red,g.R,null);u!==null?(o="rgb",t=[u,a(g.g,g.green,g.G),a(g.b,g.blue,g.B)]):(o="hsl",t=[a(g.h,g.hue,g.H),a(g.s,g.saturation,g.S),a(g.l,g.lightness,g.L,g.b,g.brightness)]),i=a(g.a,g.alpha,g.opacity,1),g.opacity!=null&&(i/=100)}else(Array.isArray(g)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))&&(t=[g[0],g[1],g[2]],o="rgb",i=g.length===4?g[3]:1);else o="rgb",t=[g>>>16,(65280&g)>>>8,255&g];return{space:o,values:t,alpha:i}};var _={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(F,L,e){var T=e(90736),b=e(80009),a=e(53435);F.exports=function(_){var g,h=T(_);return h.space?((g=Array(3))[0]=a(h.values[0],0,255),g[1]=a(h.values[1],0,255),g[2]=a(h.values[2],0,255),h.space[0]==="h"&&(g=b.rgb(g)),g.push(a(h.alpha,0,1)),g):[]}},80009:function(F,L,e){var T=e(6866);F.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(b){var a,_,g,h,o,t=b[0]/360,i=b[1]/100,n=b[2]/100;if(i===0)return[o=255*n,o,o];a=2*n-(_=n<.5?n*(1+i):n+i-n*i),h=[0,0,0];for(var r=0;r<3;r++)(g=t+.3333333333333333*-(r-1))<0?g++:g>1&&g--,o=6*g<1?a+6*(_-a)*g:2*g<1?_:3*g<2?a+(_-a)*(.6666666666666666-g)*6:a,h[r]=255*o;return h}},T.hsl=function(b){var a,_,g=b[0]/255,h=b[1]/255,o=b[2]/255,t=Math.min(g,h,o),i=Math.max(g,h,o),n=i-t;return i===t?a=0:g===i?a=(h-o)/n:h===i?a=2+(o-g)/n:o===i&&(a=4+(g-h)/n),(a=Math.min(60*a,360))<0&&(a+=360),_=(t+i)/2,[a,100*(i===t?0:_<=.5?n/(i+t):n/(2-i-t)),100*_]}},6866:function(F){F.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(F){F.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(F,L,e){F.exports={parse:e(41004),stringify:e(53313)}},63625:function(F,L,e){var T=e(40402);F.exports={isSize:function(b){return/^[\d\.]/.test(b)||b.indexOf("/")!==-1||T.indexOf(b)!==-1}}},41004:function(F,L,e){var T=e(90448),b=e(38732),a=e(41901),_=e(15659),g=e(96209),h=e(83794),o=e(99011),t=e(63625).isSize;F.exports=n;var i=n.cache={};function n(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(i[s])return i[s];if(s==="")throw new Error("Cannot parse an empty string.");if(a.indexOf(s)!==-1)return i[s]={system:s};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=o(s,/\s+/);l=d.shift();){if(b.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(w){u[w]=l}),i[s]=u;if(g.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(h.indexOf(l)===-1){if(_.indexOf(l)===-1){if(t(l)){var c=o(l,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=r(c[1]):d[0]==="/"&&(d.shift(),u.lineHeight=r(d.shift())),!d.length)throw new Error("Missing required font-family.");return u.family=o(d.join(" "),/\s*,\s*/).map(T),i[s]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function r(s){var l=parseFloat(s);return l.toString()===s?l:s}},53313:function(F,L,e){var T=e(71299),b=e(63625).isSize,a=s(e(38732)),_=s(e(41901)),g=s(e(15659)),h=s(e(96209)),o=s(e(83794)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(l,u){if(l&&!u[l]&&!a[l])throw Error("Unknown keyword `"+l+"`");return l}function s(l){for(var u={},d=0;d<l.length;d++)u[l[d]]=1;return u}F.exports=function(l){if((l=T(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&r(l.system,_),l.system;if(r(l.style,h),r(l.variant,t),r(l.weight,g),r(l.stretch,o),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!b)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(d){return i[d]?d:'"'+d+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},55174:function(F,L,e){var T,b=e(24582),a=e(10424),_=e(82527),g=e(19012),h=e(21780),o=e(16906),t=Function.prototype.bind,i=Object.defineProperty,n=Object.prototype.hasOwnProperty;T=function(r,s,l){var u,d=a(s)&&_(s.value);return delete(u=g(s)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&n.call(this,r)?d:(s.value=t.call(d,l.resolveContext?l.resolveContext(this):this),i(this,r,s),this[r])},u},F.exports=function(r){var s=h(arguments[1]);return b(s.resolveContext)&&_(s.resolveContext),o(r,function(l,u){return T(u,l,s)})}},62072:function(F,L,e){var T=e(24582),b=e(84985),a=e(95879),_=e(21780),g=e(66741),h=F.exports=function(o,t){var i,n,r,s,l;return arguments.length<2||typeof o!="string"?(s=t,t=o,o=null):s=arguments[2],T(o)?(i=g.call(o,"c"),n=g.call(o,"e"),r=g.call(o,"w")):(i=r=!0,n=!1),l={value:t,configurable:i,enumerable:n,writable:r},s?a(_(s),l):l};h.gs=function(o,t,i){var n,r,s,l;return typeof o!="string"?(s=i,i=t,t=o,o=null):s=arguments[3],T(t)?b(t)?T(i)?b(i)||(s=i,i=void 0):i=void 0:(s=t,t=i=void 0):t=void 0,T(o)?(n=g.call(o,"c"),r=g.call(o,"e")):(n=!0,r=!1),l={get:t,set:i,configurable:n,enumerable:r},s?a(_(s),l):l}},33064:function(F,L,e){function T(r,s){return r<s?-1:r>s?1:r>=s?0:NaN}e.d(L,{j2:function(){return T},Fp:function(){return _},J6:function(){return h},TS:function(){return o},VV:function(){return t},w6:function(){return i},Sm:function(){return n}}),(b=T).length===1&&(a=b,b=function(r,s){return T(a(r),s)});var b,a;function _(r,s){var l,u,d=r.length,c=-1;if(s==null){for(;++c<d;)if((l=r[c])!=null&&l>=l)for(u=l;++c<d;)(l=r[c])!=null&&l>u&&(u=l)}else for(;++c<d;)if((l=s(r[c],c,r))!=null&&l>=l)for(u=l;++c<d;)(l=s(r[c],c,r))!=null&&l>u&&(u=l);return u}function g(r){return r===null?NaN:+r}function h(r,s){var l,u=r.length,d=u,c=-1,w=0;if(s==null)for(;++c<u;)isNaN(l=g(r[c]))?--d:w+=l;else for(;++c<u;)isNaN(l=g(s(r[c],c,r)))?--d:w+=l;if(d)return w/d}function o(r){for(var s,l,u,d=r.length,c=-1,w=0;++c<d;)w+=r[c].length;for(l=new Array(w);--d>=0;)for(s=(u=r[d]).length;--s>=0;)l[--w]=u[s];return l}function t(r,s){var l,u,d=r.length,c=-1;if(s==null){for(;++c<d;)if((l=r[c])!=null&&l>=l)for(u=l;++c<d;)(l=r[c])!=null&&u>l&&(u=l)}else for(;++c<d;)if((l=s(r[c],c,r))!=null&&l>=l)for(u=l;++c<d;)(l=s(r[c],c,r))!=null&&u>l&&(u=l);return u}function i(r,s,l){r=+r,s=+s,l=(d=arguments.length)<2?(s=r,r=0,1):d<3?1:+l;for(var u=-1,d=0|Math.max(0,Math.ceil((s-r)/l)),c=new Array(d);++u<d;)c[u]=r+u*l;return c}function n(r,s){var l,u=r.length,d=-1,c=0;if(s==null)for(;++d<u;)(l=+r[d])&&(c+=l);else for(;++d<u;)(l=+s(r[d],d,r))&&(c+=l);return c}},15140:function(F,L,e){e.d(L,{UI:function(){return _},b1:function(){return g}});var T="$";function b(){}function a(s,l){var u=new b;if(s instanceof b)s.each(function(f,x){u.set(x,f)});else if(Array.isArray(s)){var d,c=-1,w=s.length;if(l==null)for(;++c<w;)u.set(c,s[c]);else for(;++c<w;)u.set(l(d=s[c],c,s),d)}else if(s)for(var m in s)u.set(m,s[m]);return u}b.prototype=a.prototype={constructor:b,has:function(s){return T+s in this},get:function(s){return this[T+s]},set:function(s,l){return this[T+s]=l,this},remove:function(s){var l=T+s;return l in this&&delete this[l]},clear:function(){for(var s in this)s[0]===T&&delete this[s]},keys:function(){var s=[];for(var l in this)l[0]===T&&s.push(l.slice(1));return s},values:function(){var s=[];for(var l in this)l[0]===T&&s.push(this[l]);return s},entries:function(){var s=[];for(var l in this)l[0]===T&&s.push({key:l.slice(1),value:this[l]});return s},size:function(){var s=0;for(var l in this)l[0]===T&&++s;return s},empty:function(){for(var s in this)if(s[0]===T)return!1;return!0},each:function(s){for(var l in this)l[0]===T&&s(this[l],l.slice(1),this)}};var _=a;function g(){var s,l,u,d=[],c=[];function w(f,x,y,v){if(x>=d.length)return s!=null&&f.sort(s),l!=null?l(f):f;for(var M,p,S,A=-1,k=f.length,C=d[x++],P=_(),R=y();++A<k;)(S=P.get(M=C(p=f[A])+""))?S.push(p):P.set(M,[p]);return P.each(function(O,X){v(R,X,w(O,x,y,v))}),R}function m(f,x){if(++x>d.length)return f;var y,v=c[x-1];return l!=null&&x>=d.length?y=f.entries():(y=[],f.each(function(M,p){y.push({key:p,values:m(M,x)})})),v!=null?y.sort(function(M,p){return v(M.key,p.key)}):y}return u={object:function(f){return w(f,0,h,o)},map:function(f){return w(f,0,t,i)},entries:function(f){return m(w(f,0,t,i),0)},key:function(f){return d.push(f),u},sortKeys:function(f){return c[d.length-1]=f,u},sortValues:function(f){return s=f,u},rollup:function(f){return l=f,u}}}function h(){return{}}function o(s,l,u){s[l]=u}function t(){return _()}function i(s,l,u){s.set(l,u)}function n(){}var r=_.prototype;n.prototype={constructor:n,has:r.has,add:function(s){return this[T+(s+="")]=s,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49887:function(F,L,e){function T(pe,fe){var Oe;function Se(){var Me,ue,le=Oe.length,ie=0,ge=0;for(Me=0;Me<le;++Me)ie+=(ue=Oe[Me]).x,ge+=ue.y;for(ie=ie/le-pe,ge=ge/le-fe,Me=0;Me<le;++Me)(ue=Oe[Me]).x-=ie,ue.y-=ge}return pe==null&&(pe=0),fe==null&&(fe=0),Se.initialize=function(Me){Oe=Me},Se.x=function(Me){return arguments.length?(pe=+Me,Se):pe},Se.y=function(Me){return arguments.length?(fe=+Me,Se):fe},Se}function b(pe){return function(){return pe}}function a(){return 1e-6*(Math.random()-.5)}function _(pe,fe,Oe,Se){if(isNaN(fe)||isNaN(Oe))return pe;var Me,ue,le,ie,ge,Ae,we,Ne,He,de=pe._root,Le={data:Se},Ee=pe._x0,Re=pe._y0,je=pe._x1,Fe=pe._y1;if(!de)return pe._root=Le,pe;for(;de.length;)if((Ae=fe>=(ue=(Ee+je)/2))?Ee=ue:je=ue,(we=Oe>=(le=(Re+Fe)/2))?Re=le:Fe=le,Me=de,!(de=de[Ne=we<<1|Ae]))return Me[Ne]=Le,pe;if(ie=+pe._x.call(null,de.data),ge=+pe._y.call(null,de.data),fe===ie&&Oe===ge)return Le.next=de,Me?Me[Ne]=Le:pe._root=Le,pe;do Me=Me?Me[Ne]=new Array(4):pe._root=new Array(4),(Ae=fe>=(ue=(Ee+je)/2))?Ee=ue:je=ue,(we=Oe>=(le=(Re+Fe)/2))?Re=le:Fe=le;while((Ne=we<<1|Ae)==(He=(ge>=le)<<1|ie>=ue));return Me[He]=de,Me[Ne]=Le,pe}function g(pe,fe,Oe,Se,Me){this.node=pe,this.x0=fe,this.y0=Oe,this.x1=Se,this.y1=Me}function h(pe){return pe[0]}function o(pe){return pe[1]}function t(pe,fe,Oe){var Se=new i(fe??h,Oe??o,NaN,NaN,NaN,NaN);return pe==null?Se:Se.addAll(pe)}function i(pe,fe,Oe,Se,Me,ue){this._x=pe,this._y=fe,this._x0=Oe,this._y0=Se,this._x1=Me,this._y1=ue,this._root=void 0}function n(pe){for(var fe={data:pe.data},Oe=fe;pe=pe.next;)Oe=Oe.next={data:pe.data};return fe}e.r(L),e.d(L,{forceCenter:function(){return T},forceCollide:function(){return u},forceLink:function(){return m},forceManyBody:function(){return me},forceRadial:function(){return ye},forceSimulation:function(){return ce},forceX:function(){return Te},forceY:function(){return Ce}});var r=t.prototype=i.prototype;function s(pe){return pe.x+pe.vx}function l(pe){return pe.y+pe.vy}function u(pe){var fe,Oe,Se=1,Me=1;function ue(){for(var ge,Ae,we,Ne,He,de,Le,Ee=fe.length,Re=0;Re<Me;++Re)for(Ae=t(fe,s,l).visitAfter(le),ge=0;ge<Ee;++ge)we=fe[ge],de=Oe[we.index],Le=de*de,Ne=we.x+we.vx,He=we.y+we.vy,Ae.visit(je);function je(Fe,Xe,Ze,at,lt){var ot=Fe.data,bt=Fe.r,wt=de+bt;if(!ot)return Xe>Ne+wt||at<Ne-wt||Ze>He+wt||lt<He-wt;if(ot.index>we.index){var ht=Ne-ot.x-ot.vx,ct=He-ot.y-ot.vy,Tt=ht*ht+ct*ct;Tt<wt*wt&&(ht===0&&(Tt+=(ht=a())*ht),ct===0&&(Tt+=(ct=a())*ct),Tt=(wt-(Tt=Math.sqrt(Tt)))/Tt*Se,we.vx+=(ht*=Tt)*(wt=(bt*=bt)/(Le+bt)),we.vy+=(ct*=Tt)*wt,ot.vx-=ht*(wt=1-wt),ot.vy-=ct*wt)}}}function le(ge){if(ge.data)return ge.r=Oe[ge.data.index];for(var Ae=ge.r=0;Ae<4;++Ae)ge[Ae]&&ge[Ae].r>ge.r&&(ge.r=ge[Ae].r)}function ie(){if(fe){var ge,Ae,we=fe.length;for(Oe=new Array(we),ge=0;ge<we;++ge)Ae=fe[ge],Oe[Ae.index]=+pe(Ae,ge,fe)}}return typeof pe!="function"&&(pe=b(pe==null?1:+pe)),ue.initialize=function(ge){fe=ge,ie()},ue.iterations=function(ge){return arguments.length?(Me=+ge,ue):Me},ue.strength=function(ge){return arguments.length?(Se=+ge,ue):Se},ue.radius=function(ge){return arguments.length?(pe=typeof ge=="function"?ge:b(+ge),ie(),ue):pe},ue}r.copy=function(){var pe,fe,Oe=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Se=this._root;if(!Se)return Oe;if(!Se.length)return Oe._root=n(Se),Oe;for(pe=[{source:Se,target:Oe._root=new Array(4)}];Se=pe.pop();)for(var Me=0;Me<4;++Me)(fe=Se.source[Me])&&(fe.length?pe.push({source:fe,target:Se.target[Me]=new Array(4)}):Se.target[Me]=n(fe));return Oe},r.add=function(pe){var fe=+this._x.call(null,pe),Oe=+this._y.call(null,pe);return _(this.cover(fe,Oe),fe,Oe,pe)},r.addAll=function(pe){var fe,Oe,Se,Me,ue=pe.length,le=new Array(ue),ie=new Array(ue),ge=1/0,Ae=1/0,we=-1/0,Ne=-1/0;for(Oe=0;Oe<ue;++Oe)isNaN(Se=+this._x.call(null,fe=pe[Oe]))||isNaN(Me=+this._y.call(null,fe))||(le[Oe]=Se,ie[Oe]=Me,Se<ge&&(ge=Se),Se>we&&(we=Se),Me<Ae&&(Ae=Me),Me>Ne&&(Ne=Me));if(ge>we||Ae>Ne)return this;for(this.cover(ge,Ae).cover(we,Ne),Oe=0;Oe<ue;++Oe)_(this,le[Oe],ie[Oe],pe[Oe]);return this},r.cover=function(pe,fe){if(isNaN(pe=+pe)||isNaN(fe=+fe))return this;var Oe=this._x0,Se=this._y0,Me=this._x1,ue=this._y1;if(isNaN(Oe))Me=(Oe=Math.floor(pe))+1,ue=(Se=Math.floor(fe))+1;else{for(var le,ie,ge=Me-Oe,Ae=this._root;Oe>pe||pe>=Me||Se>fe||fe>=ue;)switch(ie=(fe<Se)<<1|pe<Oe,(le=new Array(4))[ie]=Ae,Ae=le,ge*=2,ie){case 0:Me=Oe+ge,ue=Se+ge;break;case 1:Oe=Me-ge,ue=Se+ge;break;case 2:Me=Oe+ge,Se=ue-ge;break;case 3:Oe=Me-ge,Se=ue-ge}this._root&&this._root.length&&(this._root=Ae)}return this._x0=Oe,this._y0=Se,this._x1=Me,this._y1=ue,this},r.data=function(){var pe=[];return this.visit(function(fe){if(!fe.length)do pe.push(fe.data);while(fe=fe.next)}),pe},r.extent=function(pe){return arguments.length?this.cover(+pe[0][0],+pe[0][1]).cover(+pe[1][0],+pe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(pe,fe,Oe){var Se,Me,ue,le,ie,ge,Ae,we=this._x0,Ne=this._y0,He=this._x1,de=this._y1,Le=[],Ee=this._root;for(Ee&&Le.push(new g(Ee,we,Ne,He,de)),Oe==null?Oe=1/0:(we=pe-Oe,Ne=fe-Oe,He=pe+Oe,de=fe+Oe,Oe*=Oe);ge=Le.pop();)if(!(!(Ee=ge.node)||(Me=ge.x0)>He||(ue=ge.y0)>de||(le=ge.x1)<we||(ie=ge.y1)<Ne))if(Ee.length){var Re=(Me+le)/2,je=(ue+ie)/2;Le.push(new g(Ee[3],Re,je,le,ie),new g(Ee[2],Me,je,Re,ie),new g(Ee[1],Re,ue,le,je),new g(Ee[0],Me,ue,Re,je)),(Ae=(fe>=je)<<1|pe>=Re)&&(ge=Le[Le.length-1],Le[Le.length-1]=Le[Le.length-1-Ae],Le[Le.length-1-Ae]=ge)}else{var Fe=pe-+this._x.call(null,Ee.data),Xe=fe-+this._y.call(null,Ee.data),Ze=Fe*Fe+Xe*Xe;if(Ze<Oe){var at=Math.sqrt(Oe=Ze);we=pe-at,Ne=fe-at,He=pe+at,de=fe+at,Se=Ee.data}}return Se},r.remove=function(pe){if(isNaN(ue=+this._x.call(null,pe))||isNaN(le=+this._y.call(null,pe)))return this;var fe,Oe,Se,Me,ue,le,ie,ge,Ae,we,Ne,He,de=this._root,Le=this._x0,Ee=this._y0,Re=this._x1,je=this._y1;if(!de)return this;if(de.length)for(;;){if((Ae=ue>=(ie=(Le+Re)/2))?Le=ie:Re=ie,(we=le>=(ge=(Ee+je)/2))?Ee=ge:je=ge,fe=de,!(de=de[Ne=we<<1|Ae]))return this;if(!de.length)break;(fe[Ne+1&3]||fe[Ne+2&3]||fe[Ne+3&3])&&(Oe=fe,He=Ne)}for(;de.data!==pe;)if(Se=de,!(de=de.next))return this;return(Me=de.next)&&delete de.next,Se?(Me?Se.next=Me:delete Se.next,this):fe?(Me?fe[Ne]=Me:delete fe[Ne],(de=fe[0]||fe[1]||fe[2]||fe[3])&&de===(fe[3]||fe[2]||fe[1]||fe[0])&&!de.length&&(Oe?Oe[He]=de:this._root=de),this):(this._root=Me,this)},r.removeAll=function(pe){for(var fe=0,Oe=pe.length;fe<Oe;++fe)this.remove(pe[fe]);return this},r.root=function(){return this._root},r.size=function(){var pe=0;return this.visit(function(fe){if(!fe.length)do++pe;while(fe=fe.next)}),pe},r.visit=function(pe){var fe,Oe,Se,Me,ue,le,ie=[],ge=this._root;for(ge&&ie.push(new g(ge,this._x0,this._y0,this._x1,this._y1));fe=ie.pop();)if(!pe(ge=fe.node,Se=fe.x0,Me=fe.y0,ue=fe.x1,le=fe.y1)&&ge.length){var Ae=(Se+ue)/2,we=(Me+le)/2;(Oe=ge[3])&&ie.push(new g(Oe,Ae,we,ue,le)),(Oe=ge[2])&&ie.push(new g(Oe,Se,we,Ae,le)),(Oe=ge[1])&&ie.push(new g(Oe,Ae,Me,ue,we)),(Oe=ge[0])&&ie.push(new g(Oe,Se,Me,Ae,we))}return this},r.visitAfter=function(pe){var fe,Oe=[],Se=[];for(this._root&&Oe.push(new g(this._root,this._x0,this._y0,this._x1,this._y1));fe=Oe.pop();){var Me=fe.node;if(Me.length){var ue,le=fe.x0,ie=fe.y0,ge=fe.x1,Ae=fe.y1,we=(le+ge)/2,Ne=(ie+Ae)/2;(ue=Me[0])&&Oe.push(new g(ue,le,ie,we,Ne)),(ue=Me[1])&&Oe.push(new g(ue,we,ie,ge,Ne)),(ue=Me[2])&&Oe.push(new g(ue,le,Ne,we,Ae)),(ue=Me[3])&&Oe.push(new g(ue,we,Ne,ge,Ae))}Se.push(fe)}for(;fe=Se.pop();)pe(fe.node,fe.x0,fe.y0,fe.x1,fe.y1);return this},r.x=function(pe){return arguments.length?(this._x=pe,this):this._x},r.y=function(pe){return arguments.length?(this._y=pe,this):this._y};var d=e(15140);function c(pe){return pe.index}function w(pe,fe){var Oe=pe.get(fe);if(!Oe)throw new Error("missing: "+fe);return Oe}function m(pe){var fe,Oe,Se,Me,ue,le=c,ie=function(Le){return 1/Math.min(Me[Le.source.index],Me[Le.target.index])},ge=b(30),Ae=1;function we(Le){for(var Ee=0,Re=pe.length;Ee<Ae;++Ee)for(var je,Fe,Xe,Ze,at,lt,ot,bt=0;bt<Re;++bt)Fe=(je=pe[bt]).source,Ze=(Xe=je.target).x+Xe.vx-Fe.x-Fe.vx||a(),at=Xe.y+Xe.vy-Fe.y-Fe.vy||a(),Ze*=lt=((lt=Math.sqrt(Ze*Ze+at*at))-Oe[bt])/lt*Le*fe[bt],at*=lt,Xe.vx-=Ze*(ot=ue[bt]),Xe.vy-=at*ot,Fe.vx+=Ze*(ot=1-ot),Fe.vy+=at*ot}function Ne(){if(Se){var Le,Ee,Re=Se.length,je=pe.length,Fe=(0,d.UI)(Se,le);for(Le=0,Me=new Array(Re);Le<je;++Le)(Ee=pe[Le]).index=Le,typeof Ee.source!="object"&&(Ee.source=w(Fe,Ee.source)),typeof Ee.target!="object"&&(Ee.target=w(Fe,Ee.target)),Me[Ee.source.index]=(Me[Ee.source.index]||0)+1,Me[Ee.target.index]=(Me[Ee.target.index]||0)+1;for(Le=0,ue=new Array(je);Le<je;++Le)Ee=pe[Le],ue[Le]=Me[Ee.source.index]/(Me[Ee.source.index]+Me[Ee.target.index]);fe=new Array(je),He(),Oe=new Array(je),de()}}function He(){if(Se)for(var Le=0,Ee=pe.length;Le<Ee;++Le)fe[Le]=+ie(pe[Le],Le,pe)}function de(){if(Se)for(var Le=0,Ee=pe.length;Le<Ee;++Le)Oe[Le]=+ge(pe[Le],Le,pe)}return pe==null&&(pe=[]),we.initialize=function(Le){Se=Le,Ne()},we.links=function(Le){return arguments.length?(pe=Le,Ne(),we):pe},we.id=function(Le){return arguments.length?(le=Le,we):le},we.iterations=function(Le){return arguments.length?(Ae=+Le,we):Ae},we.strength=function(Le){return arguments.length?(ie=typeof Le=="function"?Le:b(+Le),He(),we):ie},we.distance=function(Le){return arguments.length?(ge=typeof Le=="function"?Le:b(+Le),de(),we):ge},we}var f={value:function(){}};function x(){for(var pe,fe=0,Oe=arguments.length,Se={};fe<Oe;++fe){if(!(pe=arguments[fe]+"")||pe in Se||/[\s.]/.test(pe))throw new Error("illegal type: "+pe);Se[pe]=[]}return new y(Se)}function y(pe){this._=pe}function v(pe,fe){for(var Oe,Se=0,Me=pe.length;Se<Me;++Se)if((Oe=pe[Se]).name===fe)return Oe.value}function M(pe,fe,Oe){for(var Se=0,Me=pe.length;Se<Me;++Se)if(pe[Se].name===fe){pe[Se]=f,pe=pe.slice(0,Se).concat(pe.slice(Se+1));break}return Oe!=null&&pe.push({name:fe,value:Oe}),pe}y.prototype=x.prototype={constructor:y,on:function(pe,fe){var Oe,Se,Me=this._,ue=(Se=Me,(pe+"").trim().split(/^|\s+/).map(function(ge){var Ae="",we=ge.indexOf(".");if(we>=0&&(Ae=ge.slice(we+1),ge=ge.slice(0,we)),ge&&!Se.hasOwnProperty(ge))throw new Error("unknown type: "+ge);return{type:ge,name:Ae}})),le=-1,ie=ue.length;if(!(arguments.length<2)){if(fe!=null&&typeof fe!="function")throw new Error("invalid callback: "+fe);for(;++le<ie;)if(Oe=(pe=ue[le]).type)Me[Oe]=M(Me[Oe],pe.name,fe);else if(fe==null)for(Oe in Me)Me[Oe]=M(Me[Oe],pe.name,null);return this}for(;++le<ie;)if((Oe=(pe=ue[le]).type)&&(Oe=v(Me[Oe],pe.name)))return Oe},copy:function(){var pe={},fe=this._;for(var Oe in fe)pe[Oe]=fe[Oe].slice();return new y(pe)},call:function(pe,fe){if((Oe=arguments.length-2)>0)for(var Oe,Se,Me=new Array(Oe),ue=0;ue<Oe;++ue)Me[ue]=arguments[ue+2];if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(ue=0,Oe=(Se=this._[pe]).length;ue<Oe;++ue)Se[ue].value.apply(fe,Me)},apply:function(pe,fe,Oe){if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(var Se=this._[pe],Me=0,ue=Se.length;Me<ue;++Me)Se[Me].value.apply(fe,Oe)}};var p,S,A=x,k=0,C=0,P=0,R=1e3,O=0,X=0,D=0,V=typeof performance=="object"&&performance.now?performance:Date,j=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(pe){setTimeout(pe,17)};function B(){return X||(j(W),X=V.now()+D)}function W(){X=0}function q(){this._call=this._time=this._next=null}function re(pe,fe,Oe){var Se=new q;return Se.restart(pe,fe,Oe),Se}function ee(){X=(O=V.now())+D,k=C=0;try{(function(){B(),++k;for(var pe,fe=p;fe;)(pe=X-fe._time)>=0&&fe._call.call(null,pe),fe=fe._next;--k})()}finally{k=0,function(){for(var pe,fe,Oe=p,Se=1/0;Oe;)Oe._call?(Se>Oe._time&&(Se=Oe._time),pe=Oe,Oe=Oe._next):(fe=Oe._next,Oe._next=null,Oe=pe?pe._next=fe:p=fe);S=pe,Y(Se)}(),X=0}}function K(){var pe=V.now(),fe=pe-O;fe>R&&(D-=fe,O=pe)}function Y(pe){k||(C&&(C=clearTimeout(C)),pe-X>24?(pe<1/0&&(C=setTimeout(ee,pe-V.now()-D)),P&&(P=clearInterval(P))):(P||(O=V.now(),P=setInterval(K,R)),k=1,j(ee)))}function $(pe){return pe.x}function ne(pe){return pe.y}q.prototype=re.prototype={constructor:q,restart:function(pe,fe,Oe){if(typeof pe!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?B():+Oe)+(fe==null?0:+fe),this._next||S===this||(S?S._next=this:p=this,S=this),this._call=pe,this._time=Oe,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};var ae=10,se=Math.PI*(3-Math.sqrt(5));function ce(pe){var fe,Oe=1,Se=.001,Me=1-Math.pow(Se,1/300),ue=0,le=.6,ie=(0,d.UI)(),ge=re(we),Ae=A("tick","end");function we(){Ne(),Ae.call("tick",fe),Oe<Se&&(ge.stop(),Ae.call("end",fe))}function Ne(Le){var Ee,Re,je=pe.length;Le===void 0&&(Le=1);for(var Fe=0;Fe<Le;++Fe)for(Oe+=(ue-Oe)*Me,ie.each(function(Xe){Xe(Oe)}),Ee=0;Ee<je;++Ee)(Re=pe[Ee]).fx==null?Re.x+=Re.vx*=le:(Re.x=Re.fx,Re.vx=0),Re.fy==null?Re.y+=Re.vy*=le:(Re.y=Re.fy,Re.vy=0);return fe}function He(){for(var Le,Ee=0,Re=pe.length;Ee<Re;++Ee){if((Le=pe[Ee]).index=Ee,Le.fx!=null&&(Le.x=Le.fx),Le.fy!=null&&(Le.y=Le.fy),isNaN(Le.x)||isNaN(Le.y)){var je=ae*Math.sqrt(Ee),Fe=Ee*se;Le.x=je*Math.cos(Fe),Le.y=je*Math.sin(Fe)}(isNaN(Le.vx)||isNaN(Le.vy))&&(Le.vx=Le.vy=0)}}function de(Le){return Le.initialize&&Le.initialize(pe),Le}return pe==null&&(pe=[]),He(),fe={tick:Ne,restart:function(){return ge.restart(we),fe},stop:function(){return ge.stop(),fe},nodes:function(Le){return arguments.length?(pe=Le,He(),ie.each(de),fe):pe},alpha:function(Le){return arguments.length?(Oe=+Le,fe):Oe},alphaMin:function(Le){return arguments.length?(Se=+Le,fe):Se},alphaDecay:function(Le){return arguments.length?(Me=+Le,fe):+Me},alphaTarget:function(Le){return arguments.length?(ue=+Le,fe):ue},velocityDecay:function(Le){return arguments.length?(le=1-Le,fe):1-le},force:function(Le,Ee){return arguments.length>1?(Ee==null?ie.remove(Le):ie.set(Le,de(Ee)),fe):ie.get(Le)},find:function(Le,Ee,Re){var je,Fe,Xe,Ze,at,lt=0,ot=pe.length;for(Re==null?Re=1/0:Re*=Re,lt=0;lt<ot;++lt)(Xe=(je=Le-(Ze=pe[lt]).x)*je+(Fe=Ee-Ze.y)*Fe)<Re&&(at=Ze,Re=Xe);return at},on:function(Le,Ee){return arguments.length>1?(Ae.on(Le,Ee),fe):Ae.on(Le)}}}function me(){var pe,fe,Oe,Se,Me=b(-30),ue=1,le=1/0,ie=.81;function ge(He){var de,Le=pe.length,Ee=t(pe,$,ne).visitAfter(we);for(Oe=He,de=0;de<Le;++de)fe=pe[de],Ee.visit(Ne)}function Ae(){if(pe){var He,de,Le=pe.length;for(Se=new Array(Le),He=0;He<Le;++He)de=pe[He],Se[de.index]=+Me(de,He,pe)}}function we(He){var de,Le,Ee,Re,je,Fe=0,Xe=0;if(He.length){for(Ee=Re=je=0;je<4;++je)(de=He[je])&&(Le=Math.abs(de.value))&&(Fe+=de.value,Xe+=Le,Ee+=Le*de.x,Re+=Le*de.y);He.x=Ee/Xe,He.y=Re/Xe}else{(de=He).x=de.data.x,de.y=de.data.y;do Fe+=Se[de.data.index];while(de=de.next)}He.value=Fe}function Ne(He,de,Le,Ee){if(!He.value)return!0;var Re=He.x-fe.x,je=He.y-fe.y,Fe=Ee-de,Xe=Re*Re+je*je;if(Fe*Fe/ie<Xe)return Xe<le&&(Re===0&&(Xe+=(Re=a())*Re),je===0&&(Xe+=(je=a())*je),Xe<ue&&(Xe=Math.sqrt(ue*Xe)),fe.vx+=Re*He.value*Oe/Xe,fe.vy+=je*He.value*Oe/Xe),!0;if(!(He.length||Xe>=le)){(He.data!==fe||He.next)&&(Re===0&&(Xe+=(Re=a())*Re),je===0&&(Xe+=(je=a())*je),Xe<ue&&(Xe=Math.sqrt(ue*Xe)));do He.data!==fe&&(Fe=Se[He.data.index]*Oe/Xe,fe.vx+=Re*Fe,fe.vy+=je*Fe);while(He=He.next)}}return ge.initialize=function(He){pe=He,Ae()},ge.strength=function(He){return arguments.length?(Me=typeof He=="function"?He:b(+He),Ae(),ge):Me},ge.distanceMin=function(He){return arguments.length?(ue=He*He,ge):Math.sqrt(ue)},ge.distanceMax=function(He){return arguments.length?(le=He*He,ge):Math.sqrt(le)},ge.theta=function(He){return arguments.length?(ie=He*He,ge):Math.sqrt(ie)},ge}function ye(pe,fe,Oe){var Se,Me,ue,le=b(.1);function ie(Ae){for(var we=0,Ne=Se.length;we<Ne;++we){var He=Se[we],de=He.x-fe||1e-6,Le=He.y-Oe||1e-6,Ee=Math.sqrt(de*de+Le*Le),Re=(ue[we]-Ee)*Me[we]*Ae/Ee;He.vx+=de*Re,He.vy+=Le*Re}}function ge(){if(Se){var Ae,we=Se.length;for(Me=new Array(we),ue=new Array(we),Ae=0;Ae<we;++Ae)ue[Ae]=+pe(Se[Ae],Ae,Se),Me[Ae]=isNaN(ue[Ae])?0:+le(Se[Ae],Ae,Se)}}return typeof pe!="function"&&(pe=b(+pe)),fe==null&&(fe=0),Oe==null&&(Oe=0),ie.initialize=function(Ae){Se=Ae,ge()},ie.strength=function(Ae){return arguments.length?(le=typeof Ae=="function"?Ae:b(+Ae),ge(),ie):le},ie.radius=function(Ae){return arguments.length?(pe=typeof Ae=="function"?Ae:b(+Ae),ge(),ie):pe},ie.x=function(Ae){return arguments.length?(fe=+Ae,ie):fe},ie.y=function(Ae){return arguments.length?(Oe=+Ae,ie):Oe},ie}function Te(pe){var fe,Oe,Se,Me=b(.1);function ue(ie){for(var ge,Ae=0,we=fe.length;Ae<we;++Ae)(ge=fe[Ae]).vx+=(Se[Ae]-ge.x)*Oe[Ae]*ie}function le(){if(fe){var ie,ge=fe.length;for(Oe=new Array(ge),Se=new Array(ge),ie=0;ie<ge;++ie)Oe[ie]=isNaN(Se[ie]=+pe(fe[ie],ie,fe))?0:+Me(fe[ie],ie,fe)}}return typeof pe!="function"&&(pe=b(pe==null?0:+pe)),ue.initialize=function(ie){fe=ie,le()},ue.strength=function(ie){return arguments.length?(Me=typeof ie=="function"?ie:b(+ie),le(),ue):Me},ue.x=function(ie){return arguments.length?(pe=typeof ie=="function"?ie:b(+ie),le(),ue):pe},ue}function Ce(pe){var fe,Oe,Se,Me=b(.1);function ue(ie){for(var ge,Ae=0,we=fe.length;Ae<we;++Ae)(ge=fe[Ae]).vy+=(Se[Ae]-ge.y)*Oe[Ae]*ie}function le(){if(fe){var ie,ge=fe.length;for(Oe=new Array(ge),Se=new Array(ge),ie=0;ie<ge;++ie)Oe[ie]=isNaN(Se[ie]=+pe(fe[ie],ie,fe))?0:+Me(fe[ie],ie,fe)}}return typeof pe!="function"&&(pe=b(pe==null?0:+pe)),ue.initialize=function(ie){fe=ie,le()},ue.strength=function(ie){return arguments.length?(Me=typeof ie=="function"?ie:b(+ie),le(),ue):Me},ue.y=function(ie){return arguments.length?(pe=typeof ie=="function"?ie:b(+ie),le(),ue):pe},ue}},60721:function(F,L,e){function T(u,d){if((c=(u=d?u.toExponential(d-1):u.toExponential()).indexOf("e"))<0)return null;var c,w=u.slice(0,c);return[w.length>1?w[0]+w.slice(2):w,+u.slice(c+1)]}e.d(L,{WU:function(){return n},FF:function(){return l}});var b,a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _(u){if(!(d=a.exec(u)))throw new Error("invalid format: "+u);var d;return new g({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function g(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function h(u,d){var c=T(u,d);if(!c)return u+"";var w=c[0],m=c[1];return m<0?"0."+new Array(-m).join("0")+w:w.length>m+1?w.slice(0,m+1)+"."+w.slice(m+1):w+new Array(m-w.length+2).join("0")}_.prototype=g.prototype,g.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var o={"%":function(u,d){return(100*u).toFixed(d)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,d){return u.toExponential(d)},f:function(u,d){return u.toFixed(d)},g:function(u,d){return u.toPrecision(d)},o:function(u){return Math.round(u).toString(8)},p:function(u,d){return h(100*u,d)},r:h,s:function(u,d){var c=T(u,d);if(!c)return u+"";var w=c[0],m=c[1],f=m-(b=3*Math.max(-8,Math.min(8,Math.floor(m/3))))+1,x=w.length;return f===x?w:f>x?w+new Array(f-x+1).join("0"):f>0?w.slice(0,f)+"."+w.slice(f):"0."+new Array(1-f).join("0")+T(u,Math.max(0,d+f-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,n,r=Array.prototype.map,s=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function l(u){var d,c,w=u.grouping===void 0||u.thousands===void 0?t:(d=r.call(u.grouping,Number),c=u.thousands+"",function(A,k){for(var C=A.length,P=[],R=0,O=d[0],X=0;C>0&&O>0&&(X+O+1>k&&(O=Math.max(1,k-X)),P.push(A.substring(C-=O,C+O)),!((X+=O+1)>k));)O=d[R=(R+1)%d.length];return P.reverse().join(c)}),m=u.currency===void 0?"":u.currency[0]+"",f=u.currency===void 0?"":u.currency[1]+"",x=u.decimal===void 0?".":u.decimal+"",y=u.numerals===void 0?t:function(A){return function(k){return k.replace(/[0-9]/g,function(C){return A[+C]})}}(r.call(u.numerals,String)),v=u.percent===void 0?"%":u.percent+"",M=u.minus===void 0?"-":u.minus+"",p=u.nan===void 0?"NaN":u.nan+"";function S(A){var k=(A=_(A)).fill,C=A.align,P=A.sign,R=A.symbol,O=A.zero,X=A.width,D=A.comma,V=A.precision,j=A.trim,B=A.type;B==="n"?(D=!0,B="g"):o[B]||(V===void 0&&(V=12),j=!0,B="g"),(O||k==="0"&&C==="=")&&(O=!0,k="0",C="=");var W=R==="$"?m:R==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",q=R==="$"?f:/[%p]/.test(B)?v:"",re=o[B],ee=/[defgprs%]/.test(B);function K(Y){var $,ne,ae,se=W,ce=q;if(B==="c")ce=re(Y)+ce,Y="";else{var me=(Y=+Y)<0||1/Y<0;if(Y=isNaN(Y)?p:re(Math.abs(Y),V),j&&(Y=function(Ce){e:for(var pe,fe=Ce.length,Oe=1,Se=-1;Oe<fe;++Oe)switch(Ce[Oe]){case".":Se=pe=Oe;break;case"0":Se===0&&(Se=Oe),pe=Oe;break;default:if(!+Ce[Oe])break e;Se>0&&(Se=0)}return Se>0?Ce.slice(0,Se)+Ce.slice(pe+1):Ce}(Y)),me&&+Y==0&&P!=="+"&&(me=!1),se=(me?P==="("?P:M:P==="-"||P==="("?"":P)+se,ce=(B==="s"?s[8+b/3]:"")+ce+(me&&P==="("?")":""),ee){for($=-1,ne=Y.length;++$<ne;)if(48>(ae=Y.charCodeAt($))||ae>57){ce=(ae===46?x+Y.slice($+1):Y.slice($))+ce,Y=Y.slice(0,$);break}}}D&&!O&&(Y=w(Y,1/0));var ye=se.length+Y.length+ce.length,Te=ye<X?new Array(X-ye+1).join(k):"";switch(D&&O&&(Y=w(Te+Y,Te.length?X-ce.length:1/0),Te=""),C){case"<":Y=se+Y+ce+Te;break;case"=":Y=se+Te+Y+ce;break;case"^":Y=Te.slice(0,ye=Te.length>>1)+se+Y+ce+Te.slice(ye);break;default:Y=Te+se+Y+ce}return y(Y)}return V=V===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V)),K.toString=function(){return A+""},K}return{format:S,formatPrefix:function(A,k){var C,P=S(((A=_(A)).type="f",A)),R=3*Math.max(-8,Math.min(8,Math.floor((C=k,((C=T(Math.abs(C)))?C[1]:NaN)/3)))),O=Math.pow(10,-R),X=s[8+R/3];return function(D){return P(O*D)+X}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=i.format,i.formatPrefix},65704:function(F,L,e){e.r(L),e.d(L,{geoAiry:function(){return D},geoAiryRaw:function(){return X},geoAitoff:function(){return j},geoAitoffRaw:function(){return V},geoArmadillo:function(){return W},geoArmadilloRaw:function(){return B},geoAugust:function(){return re},geoAugustRaw:function(){return q},geoBaker:function(){return $},geoBakerRaw:function(){return Y},geoBerghaus:function(){return se},geoBerghausRaw:function(){return ae},geoBertin1953:function(){return Oe},geoBertin1953Raw:function(){return fe},geoBoggs:function(){return we},geoBoggsRaw:function(){return Ae},geoBonne:function(){return Ee},geoBonneRaw:function(){return Le},geoBottomley:function(){return je},geoBottomleyRaw:function(){return Re},geoBromley:function(){return Xe},geoBromleyRaw:function(){return Fe},geoChamberlin:function(){return Tt},geoChamberlinAfrica:function(){return ct},geoChamberlinRaw:function(){return wt},geoCollignon:function(){return kt},geoCollignonRaw:function(){return Lt},geoCraig:function(){return Pt},geoCraigRaw:function(){return Ot},geoCraster:function(){return Ye},geoCrasterRaw:function(){return nt},geoCylindricalEqualArea:function(){return ut},geoCylindricalEqualAreaRaw:function(){return tt},geoCylindricalStereographic:function(){return De},geoCylindricalStereographicRaw:function(){return Ke},geoEckert1:function(){return Qe},geoEckert1Raw:function(){return Be},geoEckert2:function(){return vt},geoEckert2Raw:function(){return rt},geoEckert3:function(){return xt},geoEckert3Raw:function(){return mt},geoEckert4:function(){return Et},geoEckert4Raw:function(){return dt},geoEckert5:function(){return gt},geoEckert5Raw:function(){return pt},geoEckert6:function(){return Nt},geoEckert6Raw:function(){return Mt},geoEisenlohr:function(){return Jt},geoEisenlohrRaw:function(){return Ut},geoFahey:function(){return qt},geoFaheyRaw:function(){return Qt},geoFoucaut:function(){return wn},geoFoucautRaw:function(){return gn},geoFoucautSinusoidal:function(){return Xt},geoFoucautSinusoidalRaw:function(){return hn},geoGilbert:function(){return yn},geoGingery:function(){return zn},geoGingeryRaw:function(){return Pn},geoGinzburg4:function(){return fr},geoGinzburg4Raw:function(){return ir},geoGinzburg5:function(){return Jn},geoGinzburg5Raw:function(){return ar},geoGinzburg6:function(){return Gt},geoGinzburg6Raw:function(){return br},geoGinzburg8:function(){return mn},geoGinzburg8Raw:function(){return ln},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return _n},geoGringorten:function(){return Bn},geoGringortenQuincuncial:function(){return Ja},geoGringortenRaw:function(){return Nn},geoGuyou:function(){return Ct},geoGuyouRaw:function(){return An},geoHammer:function(){return Te},geoHammerRaw:function(){return me},geoHammerRetroazimuthal:function(){return Mn},geoHammerRetroazimuthalRaw:function(){return rn},geoHealpix:function(){return qn},geoHealpixRaw:function(){return fn},geoHill:function(){return tr},geoHillRaw:function(){return Vn},geoHomolosine:function(){return gr},geoHomolosineRaw:function(){return mr},geoHufnagel:function(){return $n},geoHufnagelRaw:function(){return Er},geoHyperelliptical:function(){return wi},geoHyperellipticalRaw:function(){return ii},geoInterrupt:function(){return hi},geoInterruptedBoggs:function(){return vo},geoInterruptedHomolosine:function(){return Oo},geoInterruptedMollweide:function(){return ws},geoInterruptedMollweideHemispheres:function(){return Yl},geoInterruptedQuarticAuthalic:function(){return sl},geoInterruptedSinuMollweide:function(){return gu},geoInterruptedSinusoidal:function(){return Ms},geoKavrayskiy7:function(){return Wi},geoKavrayskiy7Raw:function(){return xo},geoLagrange:function(){return ti},geoLagrangeRaw:function(){return al},geoLarrivee:function(){return Do},geoLarriveeRaw:function(){return Va},geoLaskowski:function(){return Qo},geoLaskowskiRaw:function(){return io},geoLittrow:function(){return Fo},geoLittrowRaw:function(){return zo},geoLoximuthal:function(){return vu},geoLoximuthalRaw:function(){return Ll},geoMiller:function(){return yu},geoMillerRaw:function(){return es},geoModifiedStereographic:function(){return Za},geoModifiedStereographicAlaska:function(){return As},geoModifiedStereographicGs48:function(){return Ws},geoModifiedStereographicGs50:function(){return Cl},geoModifiedStereographicLee:function(){return $l},geoModifiedStereographicMiller:function(){return Jl},geoModifiedStereographicRaw:function(){return Zl},geoMollweide:function(){return le},geoMollweideRaw:function(){return ue},geoMtFlatPolarParabolic:function(){return bu},geoMtFlatPolarParabolicRaw:function(){return No},geoMtFlatPolarQuartic:function(){return pi},geoMtFlatPolarQuarticRaw:function(){return ns},geoMtFlatPolarSinusoidal:function(){return ol},geoMtFlatPolarSinusoidalRaw:function(){return ao},geoNaturalEarth:function(){return Ka.Z},geoNaturalEarth2:function(){return Xu},geoNaturalEarth2Raw:function(){return Es},geoNaturalEarthRaw:function(){return Ka.K},geoNellHammer:function(){return wu},geoNellHammerRaw:function(){return Pl},geoNicolosi:function(){return ll},geoNicolosiRaw:function(){return qs},geoPatterson:function(){return Ol},geoPattersonRaw:function(){return as},geoPeirceQuincuncial:function(){return Dl},geoPierceQuincuncial:function(){return Dl},geoPolyconic:function(){return Ql},geoPolyconicRaw:function(){return ks},geoPolyhedral:function(){return os},geoPolyhedralButterfly:function(){return eu},geoPolyhedralCollignon:function(){return fl},geoPolyhedralWaterman:function(){return Ho},geoProject:function(){return Rs},geoQuantize:function(){return $a},geoQuincuncial:function(){return Ha},geoRectangularPolyconic:function(){return Sr},geoRectangularPolyconicRaw:function(){return oa},geoRobinson:function(){return zl},geoRobinsonRaw:function(){return hl},geoSatellite:function(){return Os},geoSatelliteRaw:function(){return Is},geoSinuMollweide:function(){return sr},geoSinuMollweideRaw:function(){return or},geoSinusoidal:function(){return de},geoSinusoidalRaw:function(){return He},geoStitch:function(){return $i},geoTimes:function(){return tu},geoTimesRaw:function(){return To},geoTwoPointAzimuthal:function(){return Mo},geoTwoPointAzimuthalRaw:function(){return ui},geoTwoPointAzimuthalUsa:function(){return Wa},geoTwoPointEquidistant:function(){return fs},geoTwoPointEquidistantRaw:function(){return co},geoTwoPointEquidistantUsa:function(){return Fl},geoVanDerGrinten:function(){return qi},geoVanDerGrinten2:function(){return Pr},geoVanDerGrinten2Raw:function(){return ha},geoVanDerGrinten3:function(){return Js},geoVanDerGrinten3Raw:function(){return Ir},geoVanDerGrinten4:function(){return hs},geoVanDerGrinten4Raw:function(){return Ma},geoVanDerGrintenRaw:function(){return zs},geoWagner:function(){return $s},geoWagner4:function(){return Qi},geoWagner4Raw:function(){return Nr},geoWagner6:function(){return Oa},geoWagner6Raw:function(){return Ao},geoWagner7:function(){return da},geoWagnerRaw:function(){return pa},geoWiechel:function(){return Qs},geoWiechelRaw:function(){return Fs},geoWinkel3:function(){return qo},geoWinkel3Raw:function(){return Ns}});var T=e(15002),b=Math.abs,a=Math.atan,_=Math.atan2,g=Math.cos,h=Math.exp,o=Math.floor,t=Math.log,i=Math.max,n=Math.min,r=Math.pow,s=Math.round,l=Math.sign||function(N){return N>0?1:N<0?-1:0},u=Math.sin,d=Math.tan,c=1e-6,w=1e-12,m=Math.PI,f=m/2,x=m/4,y=Math.SQRT1_2,v=P(2),M=P(m),p=2*m,S=180/m,A=m/180;function k(N){return N>1?f:N<-1?-f:Math.asin(N)}function C(N){return N>1?0:N<-1?m:Math.acos(N)}function P(N){return N>0?Math.sqrt(N):0}function R(N){return(h(N)-h(-N))/2}function O(N){return(h(N)+h(-N))/2}function X(N){var G=d(N/2),H=2*t(g(N/2))/(G*G);function Q(xe,Pe){var U=g(xe),te=g(Pe),oe=u(Pe),_e=te*U,ke=-((1-_e?t((1+_e)/2)/(1-_e):-.5)+H/(1+_e));return[ke*te*u(xe),ke*oe]}return Q.invert=function(xe,Pe){var U,te=P(xe*xe+Pe*Pe),oe=-N/2,_e=50;if(!te)return[0,0];do{var ke=oe/2,ze=g(ke),Ge=u(ke),qe=Ge/ze,Je=-t(b(ze));oe-=U=(2/qe*Je-H*qe-te)/(-Je/(Ge*Ge)+1-H/(2*ze*ze))*(ze<0?.7:1)}while(b(U)>c&&--_e>0);var $e=u(oe);return[_(xe*$e,te*g(oe)),k(Pe*$e/te)]},Q}function D(){var N=f,G=(0,T.r)(X),H=G(N);return H.radius=function(Q){return arguments.length?G(N=Q*A):N*S},H.scale(179.976).clipAngle(147)}function V(N,G){var H=g(G),Q=function(xe){return xe?xe/Math.sin(xe):1}(C(H*g(N/=2)));return[2*H*u(N)*Q,u(G)*Q]}function j(){return(0,T.Z)(V).scale(152.63)}function B(N){var G=u(N),H=g(N),Q=N>=0?1:-1,xe=d(Q*N),Pe=(1+G-H)/2;function U(te,oe){var _e=g(oe),ke=g(te/=2);return[(1+_e)*u(te),(Q*oe>-_(ke,xe)-.001?0:10*-Q)+Pe+u(oe)*H-(1+_e)*G*ke]}return U.invert=function(te,oe){var _e=0,ke=0,ze=50;do{var Ge=g(_e),qe=u(_e),Je=g(ke),$e=u(ke),st=1+Je,yt=st*qe-te,_t=Pe+$e*H-st*G*Ge-oe,It=st*Ge/2,zt=-qe*$e,Rt=G*st*qe/2,Ht=H*Je+G*Ge*$e,Dt=zt*Rt-Ht*It,sn=(_t*zt-yt*Ht)/Dt/2,$t=(yt*Rt-_t*It)/Dt;b($t)>2&&($t/=2),_e-=sn,ke-=$t}while((b(sn)>c||b($t)>c)&&--ze>0);return Q*ke>-_(g(_e),xe)-.001?[2*_e,ke]:null},U}function W(){var N=20*A,G=N>=0?1:-1,H=d(G*N),Q=(0,T.r)(B),xe=Q(N),Pe=xe.stream;return xe.parallel=function(U){return arguments.length?(H=d((G=(N=U*A)>=0?1:-1)*N),Q(N)):N*S},xe.stream=function(U){var te=xe.rotate(),oe=Pe(U),_e=(xe.rotate([0,0]),Pe(U)),ke=xe.precision();return xe.rotate(te),oe.sphere=function(){_e.polygonStart(),_e.lineStart();for(var ze=-180*G;G*ze<180;ze+=90*G)_e.point(ze,90*G);if(N)for(;G*(ze-=3*G*ke)>=-180;)_e.point(ze,G*-_(g(ze*A/2),H)*S);_e.lineEnd(),_e.polygonEnd()},oe},xe.scale(218.695).center([0,28.0974])}function q(N,G){var H=d(G/2),Q=P(1-H*H),xe=1+Q*g(N/=2),Pe=u(N)*Q/xe,U=H/xe,te=Pe*Pe,oe=U*U;return[1.3333333333333333*Pe*(3+te-3*oe),1.3333333333333333*U*(3+3*te-oe)]}function re(){return(0,T.Z)(q).scale(66.1603)}V.invert=function(N,G){if(!(N*N+4*G*G>m*m+c)){var H=N,Q=G,xe=25;do{var Pe,U=u(H),te=u(H/2),oe=g(H/2),_e=u(Q),ke=g(Q),ze=u(2*Q),Ge=_e*_e,qe=ke*ke,Je=te*te,$e=1-qe*oe*oe,st=$e?C(ke*oe)*P(Pe=1/$e):Pe=0,yt=2*st*ke*te-N,_t=st*_e-G,It=Pe*(qe*Je+st*ke*oe*Ge),zt=Pe*(.5*U*ze-2*st*_e*te),Rt=.25*Pe*(ze*te-st*_e*qe*U),Ht=Pe*(Ge*oe+st*Je*ke),Dt=zt*Rt-Ht*It;if(!Dt)break;var sn=(_t*zt-yt*Ht)/Dt,$t=(yt*Rt-_t*It)/Dt;H-=sn,Q-=$t}while((b(sn)>c||b($t)>c)&&--xe>0);return[H,Q]}},q.invert=function(N,G){if(G*=.375,!(N*=.375)&&b(G)>1)return null;var H=1+N*N+G*G,Q=P((H-P(H*H-4*G*G))/2),xe=k(Q)/3,Pe=Q?function(_e){return t(_e+P(_e*_e-1))}(b(G/Q))/3:function(_e){return t(_e+P(_e*_e+1))}(b(N))/3,U=g(xe),te=O(Pe),oe=te*te-U*U;return[2*l(N)*_(R(Pe)*U,.25-oe),2*l(G)*_(te*u(xe),.25+oe)]};var ee=P(8),K=t(1+v);function Y(N,G){var H=b(G);return H<x?[N,t(d(x+G/2))]:[N*g(H)*(2*v-1/u(H)),l(G)*(2*v*(H-x)-t(d(H/2)))]}function $(){return(0,T.Z)(Y).scale(112.314)}Y.invert=function(N,G){if((Q=b(G))<K)return[N,2*a(h(G))-f];var H,Q,xe=x,Pe=25;do{var U=g(xe/2),te=d(xe/2);xe-=H=(ee*(xe-x)-t(te)-Q)/(ee-U*U/(2*te))}while(b(H)>w&&--Pe>0);return[N/(g(xe)*(ee-1/u(xe))),l(G)*xe]};var ne=e(17889);function ae(N){var G=2*m/N;function H(Q,xe){var Pe=(0,ne.N)(Q,xe);if(b(Q)>f){var U=_(Pe[1],Pe[0]),te=P(Pe[0]*Pe[0]+Pe[1]*Pe[1]),oe=G*s((U-f)/G)+f,_e=_(u(U-=oe),2-g(U));U=oe+k(m/te*u(_e))-_e,Pe[0]=te*g(U),Pe[1]=te*u(U)}return Pe}return H.invert=function(Q,xe){var Pe=P(Q*Q+xe*xe);if(Pe>f){var U=_(xe,Q),te=G*s((U-f)/G)+f,oe=U>te?-1:1,_e=Pe*g(te-U),ke=1/d(oe*C((_e-m)/P(m*(m-2*_e)+Pe*Pe)));U=te+2*a((ke+oe*P(ke*ke-3))/3),Q=Pe*g(U),xe=Pe*u(U)}return ne.N.invert(Q,xe)},H}function se(){var N=5,G=(0,T.r)(ae),H=G(N),Q=H.stream,xe=.01,Pe=-g(xe*A),U=u(xe*A);return H.lobes=function(te){return arguments.length?G(N=+te):N},H.stream=function(te){var oe=H.rotate(),_e=Q(te),ke=(H.rotate([0,0]),Q(te));return H.rotate(oe),_e.sphere=function(){ke.polygonStart(),ke.lineStart();for(var ze=0,Ge=360/N,qe=2*m/N,Je=90-180/N,$e=f;ze<N;++ze,Je-=Ge,$e-=qe)ke.point(_(U*g($e),Pe)*S,k(U*u($e))*S),Je<-90?(ke.point(-90,-180-Je-xe),ke.point(-90,-180-Je+xe)):(ke.point(90,Je+xe),ke.point(90,Je-xe));ke.lineEnd(),ke.polygonEnd()},_e},H.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ce=e(12956);function me(N,G){if(arguments.length<2&&(G=N),G===1)return ce.l;if(G===1/0)return ye;function H(Q,xe){var Pe=(0,ce.l)(Q/G,xe);return Pe[0]*=N,Pe}return H.invert=function(Q,xe){var Pe=ce.l.invert(Q/N,xe);return Pe[0]*=G,Pe},H}function ye(N,G){return[N*g(G)/g(G/=2),2*u(G)]}function Te(){var N=2,G=(0,T.r)(me),H=G(N);return H.coefficient=function(Q){return arguments.length?G(N=+Q):N},H.scale(169.529)}function Ce(N,G,H){var Q,xe,Pe,U=100;H=H===void 0?0:+H,G=+G;do(xe=N(H))===(Pe=N(H+c))&&(Pe=xe+c),H-=Q=-1*c*(xe-G)/(xe-Pe);while(U-- >0&&b(Q)>c);return U<0?NaN:H}function pe(N,G,H){return G===void 0&&(G=40),H===void 0&&(H=w),function(Q,xe,Pe,U){var te,oe,_e;Pe=Pe===void 0?0:+Pe,U=U===void 0?0:+U;for(var ke=0;ke<G;ke++){var ze=N(Pe,U),Ge=ze[0]-Q,qe=ze[1]-xe;if(b(Ge)<H&&b(qe)<H)break;var Je=Ge*Ge+qe*qe;if(Je>te)Pe-=oe/=2,U-=_e/=2;else{te=Je;var $e=(Pe>0?-1:1)*H,st=(U>0?-1:1)*H,yt=N(Pe+$e,U),_t=N(Pe,U+st),It=(yt[0]-ze[0])/$e,zt=(yt[1]-ze[1])/$e,Rt=(_t[0]-ze[0])/st,Ht=(_t[1]-ze[1])/st,Dt=Ht*It-zt*Rt,sn=(b(Dt)<.5?.5:1)/Dt;if(Pe+=oe=(qe*Rt-Ge*Ht)*sn,U+=_e=(Ge*zt-qe*It)*sn,b(oe)<H&&b(_e)<H)break}}return[Pe,U]}}function fe(){var N=me(1.68,2);function G(H,Q){if(H+Q<-1.4){var xe=(H-Q+1.6)*(H+Q+1.4)/8;H+=xe,Q-=.8*xe*u(Q+m/2)}var Pe=N(H,Q),U=(1-g(H*Q))/12;return Pe[1]<0&&(Pe[0]*=1+U),Pe[1]>0&&(Pe[1]*=1+U/1.5*Pe[0]*Pe[0]),Pe}return G.invert=pe(G),G}function Oe(){return(0,T.Z)(fe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Se(N,G){var H,Q=N*u(G),xe=30;do G-=H=(G+u(G)-Q)/(1+g(G));while(b(H)>c&&--xe>0);return G/2}function Me(N,G,H){function Q(xe,Pe){return[N*xe*g(Pe=Se(H,Pe)),G*u(Pe)]}return Q.invert=function(xe,Pe){return Pe=k(Pe/G),[xe/(N*g(Pe)),k((2*Pe+u(2*Pe))/H)]},Q}ye.invert=function(N,G){var H=2*k(G/2);return[N*g(H/2)/g(H),H]};var ue=Me(v/f,v,m);function le(){return(0,T.Z)(ue).scale(169.529)}var ie=2.00276,ge=1.11072;function Ae(N,G){var H=Se(m,G);return[ie*N/(1/g(G)+ge/g(H)),(G+v*u(H))/ie]}function we(){return(0,T.Z)(Ae).scale(160.857)}function Ne(N){var G=0,H=(0,T.r)(N),Q=H(G);return Q.parallel=function(xe){return arguments.length?H(G=xe*A):G*S},Q}function He(N,G){return[N*g(G),G]}function de(){return(0,T.Z)(He).scale(152.63)}function Le(N){if(!N)return He;var G=1/d(N);function H(Q,xe){var Pe=G+N-xe,U=Pe&&Q*g(xe)/Pe;return[Pe*u(U),G-Pe*g(U)]}return H.invert=function(Q,xe){var Pe=P(Q*Q+(xe=G-xe)*xe),U=G+N-Pe;return[Pe/g(U)*_(Q,xe),U]},H}function Ee(){return Ne(Le).scale(123.082).center([0,26.1441]).parallel(45)}function Re(N){function G(H,Q){var xe=f-Q,Pe=xe&&H*N*u(xe)/xe;return[xe*u(Pe)/N,f-xe*g(Pe)]}return G.invert=function(H,Q){var xe=H*N,Pe=f-Q,U=P(xe*xe+Pe*Pe),te=_(xe,Pe);return[(U?U/u(U):1)*te/N,f-U]},G}function je(){var N=.5,G=(0,T.r)(Re),H=G(N);return H.fraction=function(Q){return arguments.length?G(N=+Q):N},H.scale(158.837)}Ae.invert=function(N,G){var H,Q,xe=ie*G,Pe=G<0?-x:x,U=25;do Q=xe-v*u(Pe),Pe-=H=(u(2*Pe)+2*Pe-m*u(Q))/(2*g(2*Pe)+2+m*g(Q)*v*g(Pe));while(b(H)>c&&--U>0);return Q=xe-v*u(Pe),[N*(1/g(Q)+ge/g(Pe))/ie,Q]},He.invert=function(N,G){return[N/g(G),G]};var Fe=Me(1,4/m,m);function Xe(){return(0,T.Z)(Fe).scale(152.63)}var Ze=e(66624),at=e(49386);function lt(N,G,H,Q,xe,Pe){var U,te=g(Pe);if(b(N)>1||b(Pe)>1)U=C(H*xe+G*Q*te);else{var oe=u(N/2),_e=u(Pe/2);U=2*k(P(oe*oe+G*Q*_e*_e))}return b(U)>c?[U,_(Q*u(Pe),G*xe-H*Q*te)]:[0,0]}function ot(N,G,H){return C((N*N+G*G-H*H)/(2*N*G))}function bt(N){return N-2*m*o((N+m)/(2*m))}function wt(N,G,H){for(var Q,xe=[[N[0],N[1],u(N[1]),g(N[1])],[G[0],G[1],u(G[1]),g(G[1])],[H[0],H[1],u(H[1]),g(H[1])]],Pe=xe[2],U=0;U<3;++U,Pe=Q)Q=xe[U],Pe.v=lt(Q[1]-Pe[1],Pe[3],Pe[2],Q[3],Q[2],Q[0]-Pe[0]),Pe.point=[0,0];var te=ot(xe[0].v[0],xe[2].v[0],xe[1].v[0]),oe=ot(xe[0].v[0],xe[1].v[0],xe[2].v[0]),_e=m-te;xe[2].point[1]=0,xe[0].point[0]=-(xe[1].point[0]=xe[0].v[0]/2);var ke=[xe[2].point[0]=xe[0].point[0]+xe[2].v[0]*g(te),2*(xe[0].point[1]=xe[1].point[1]=xe[2].v[0]*u(te))];return function(ze,Ge){var qe,Je=u(Ge),$e=g(Ge),st=new Array(3);for(qe=0;qe<3;++qe){var yt=xe[qe];if(st[qe]=lt(Ge-yt[1],yt[3],yt[2],$e,Je,ze-yt[0]),!st[qe][0])return yt.point;st[qe][1]=bt(st[qe][1]-yt.v[1])}var _t=ke.slice();for(qe=0;qe<3;++qe){var It=qe==2?0:qe+1,zt=ot(xe[qe].v[0],st[qe][0],st[It][0]);st[qe][1]<0&&(zt=-zt),qe?qe==1?(zt=oe-zt,_t[0]-=st[qe][0]*g(zt),_t[1]-=st[qe][0]*u(zt)):(zt=_e-zt,_t[0]+=st[qe][0]*g(zt),_t[1]+=st[qe][0]*u(zt)):(_t[0]+=st[qe][0]*g(zt),_t[1]-=st[qe][0]*u(zt))}return _t[0]/=3,_t[1]/=3,_t}}function ht(N){return N[0]*=A,N[1]*=A,N}function ct(){return Tt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Tt(N,G,H){var Q=(0,Ze.Z)({type:"MultiPoint",coordinates:[N,G,H]}),xe=[-Q[0],-Q[1]],Pe=(0,at.Z)(xe),U=wt(ht(Pe(N)),ht(Pe(G)),ht(Pe(H)));U.invert=pe(U);var te=(0,T.Z)(U).rotate(xe),oe=te.center;return delete te.rotate,te.center=function(_e){return arguments.length?oe(Pe(_e)):Pe.invert(oe())},te.clipAngle(90)}function Lt(N,G){var H=P(1-u(G));return[2/M*N*H,M*(1-H)]}function kt(){return(0,T.Z)(Lt).scale(95.6464).center([0,30])}function Ot(N){var G=d(N);function H(Q,xe){return[Q,(Q?Q/u(Q):1)*(u(xe)*g(Q)-G*g(xe))]}return H.invert=G?function(Q,xe){Q&&(xe*=u(Q)/Q);var Pe=g(Q);return[Q,2*_(P(Pe*Pe+G*G-xe*xe)-Pe,G-xe)]}:function(Q,xe){return[Q,k(Q?xe*d(Q)/Q:xe)]},H}function Pt(){return Ne(Ot).scale(249.828).clipAngle(90)}Lt.invert=function(N,G){var H=(H=G/M-1)*H;return[H>0?N*P(m/H)/2:0,k(1-H)]};var et=P(3);function nt(N,G){return[et*N*(2*g(2*G/3)-1)/M,et*M*u(G/3)]}function Ye(){return(0,T.Z)(nt).scale(156.19)}function tt(N){var G=g(N);function H(Q,xe){return[Q*G,u(xe)/G]}return H.invert=function(Q,xe){return[Q/G,k(xe*G)]},H}function ut(){return Ne(tt).parallel(38.58).scale(195.044)}function Ke(N){var G=g(N);function H(Q,xe){return[Q*G,(1+G)*d(xe/2)]}return H.invert=function(Q,xe){return[Q/G,2*a(xe/(1+G))]},H}function De(){return Ne(Ke).scale(124.75)}function Be(N,G){var H=P(8/(3*m));return[H*N*(1-b(G)/m),H*G]}function Qe(){return(0,T.Z)(Be).scale(165.664)}function rt(N,G){var H=P(4-3*u(b(G)));return[2/P(6*m)*N*H,l(G)*P(2*m/3)*(2-H)]}function vt(){return(0,T.Z)(rt).scale(165.664)}function mt(N,G){var H=P(m*(4+m));return[2/H*N*(1+P(1-4*G*G/(m*m))),4/H*G]}function xt(){return(0,T.Z)(mt).scale(180.739)}function dt(N,G){var H=(2+f)*u(G);G/=2;for(var Q=0,xe=1/0;Q<10&&b(xe)>c;Q++){var Pe=g(G);G-=xe=(G+u(G)*(Pe+2)-H)/(2*Pe*(1+Pe))}return[2/P(m*(4+m))*N*(1+g(G)),2*P(m/(4+m))*u(G)]}function Et(){return(0,T.Z)(dt).scale(180.739)}function pt(N,G){return[N*(1+g(G))/P(2+m),2*G/P(2+m)]}function gt(){return(0,T.Z)(pt).scale(173.044)}function Mt(N,G){for(var H=(1+f)*u(G),Q=0,xe=1/0;Q<10&&b(xe)>c;Q++)G-=xe=(G+u(G)-H)/(1+g(G));return H=P(2+m),[N*(1+g(G))/H,2*G/H]}function Nt(){return(0,T.Z)(Mt).scale(173.044)}nt.invert=function(N,G){var H=3*k(G/(et*M));return[M*N/(et*(2*g(2*H/3)-1)),H]},Be.invert=function(N,G){var H=P(8/(3*m)),Q=G/H;return[N/(H*(1-b(Q)/m)),Q]},rt.invert=function(N,G){var H=2-b(G)/P(2*m/3);return[N*P(6*m)/(2*H),l(G)*k((4-H*H)/3)]},mt.invert=function(N,G){var H=P(m*(4+m))/2;return[N*H/(1+P(1-G*G*(4+m)/(4*m))),G*H/2]},dt.invert=function(N,G){var H=G*P((4+m)/m)/2,Q=k(H),xe=g(Q);return[N/(2/P(m*(4+m))*(1+xe)),k((Q+H*(xe+2))/(2+f))]},pt.invert=function(N,G){var H=P(2+m),Q=G*H/2;return[H*N/(1+g(Q)),Q]},Mt.invert=function(N,G){var H=1+f,Q=P(H/2);return[2*N*Q/(1+g(G*=Q)),k((G+u(G))/H)]};var Bt=3+2*v;function Ut(N,G){var H=u(N/=2),Q=g(N),xe=P(g(G)),Pe=g(G/=2),U=u(G)/(Pe+v*Q*xe),te=P(2/(1+U*U)),oe=P((v*Pe+(Q+H)*xe)/(v*Pe+(Q-H)*xe));return[Bt*(te*(oe-1/oe)-2*t(oe)),Bt*(te*U*(oe+1/oe)-2*a(U))]}function Jt(){return(0,T.Z)(Ut).scale(62.5271)}Ut.invert=function(N,G){if(!(H=q.invert(N/1.2,1.065*G)))return null;var H,Q=H[0],xe=H[1],Pe=20;N/=Bt,G/=Bt;do{var U=Q/2,te=xe/2,oe=u(U),_e=g(U),ke=u(te),ze=g(te),Ge=g(xe),qe=P(Ge),Je=ke/(ze+v*_e*qe),$e=Je*Je,st=P(2/(1+$e)),yt=(v*ze+(_e+oe)*qe)/(v*ze+(_e-oe)*qe),_t=P(yt),It=_t-1/_t,zt=_t+1/_t,Rt=st*It-2*t(_t)-N,Ht=st*Je*zt-2*a(Je)-G,Dt=ke&&y*qe*oe*$e/ke,sn=(v*_e*ze+qe)/(2*(ze+v*_e*qe)*(ze+v*_e*qe)*qe),$t=-.5*Je*st*st*st,Zt=$t*Dt,xn=$t*sn,bn=(bn=2*ze+v*qe*(_e-oe))*bn*_t,Un=(v*_e*ze*qe+Ge)/bn,jn=-v*oe*ke/(qe*bn),Xn=It*Zt-2*Un/_t+st*(Un+Un/yt),Qn=It*xn-2*jn/_t+st*(jn+jn/yt),hr=Je*zt*Zt-2*Dt/(1+$e)+st*zt*Dt+st*Je*(Un-Un/yt),cr=Je*zt*xn-2*sn/(1+$e)+st*zt*sn+st*Je*(jn-jn/yt),vr=Qn*hr-cr*Xn;if(!vr)break;var Mr=(Ht*Qn-Rt*cr)/vr,Fr=(Rt*hr-Ht*Xn)/vr;Q-=Mr,xe=i(-f,n(f,xe-Fr))}while((b(Mr)>c||b(Fr)>c)&&--Pe>0);return b(b(xe)-f)<c?[0,xe]:Pe&&[Q,xe]};var Vt=g(35*A);function Qt(N,G){var H=d(G/2);return[N*Vt*P(1-H*H),(1+Vt)*H]}function qt(){return(0,T.Z)(Qt).scale(137.152)}function gn(N,G){var H=G/2,Q=g(H);return[2*N/M*g(G)*Q*Q,M*d(H)]}function wn(){return(0,T.Z)(gn).scale(135.264)}function hn(N){var G=1-N,H=xe(m,0)[0]-xe(-m,0)[0],Q=P(2*(xe(0,f)[1]-xe(0,-f)[1])/H);function xe(te,oe){var _e=g(oe),ke=u(oe);return[_e/(G+N*_e)*te,G*oe+N*ke]}function Pe(te,oe){var _e=xe(te,oe);return[_e[0]*Q,_e[1]/Q]}function U(te){return Pe(0,te)[1]}return Pe.invert=function(te,oe){var _e=Ce(U,oe);return[te/Q*(N+G/g(_e)),_e]},Pe}function Xt(){var N=.5,G=(0,T.r)(hn),H=G(N);return H.alpha=function(Q){return arguments.length?G(N=+Q):N},H.scale(168.725)}Qt.invert=function(N,G){var H=G/(1+Vt);return[N&&N/(Vt*P(1-H*H)),2*a(H)]},gn.invert=function(N,G){var H=a(G/M),Q=g(H),xe=2*H;return[N*M/2/(g(xe)*Q*Q),xe]};var an=e(57962),tn=e(97492);function cn(N){return[N[0]/2,k(d(N[1]/2*A))*S]}function vn(N){return[2*N[0],2*a(u(N[1]*A))*S]}function yn(N){N==null&&(N=an.Z);var G=N(),H=(0,tn.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function Q(Pe){return G(cn(Pe))}function xe(Pe){Q[Pe]=function(){return arguments.length?(G[Pe].apply(G,arguments),Q):G[Pe]()}}return G.invert&&(Q.invert=function(Pe){return vn(G.invert(Pe))}),Q.stream=function(Pe){var U=G.stream(Pe),te=H.stream({point:function(oe,_e){U.point(oe/2,k(d(-_e/2*A))*S)},lineStart:function(){U.lineStart()},lineEnd:function(){U.lineEnd()},polygonStart:function(){U.polygonStart()},polygonEnd:function(){U.polygonEnd()}});return te.sphere=U.sphere,te},Q.rotate=function(Pe){return arguments.length?(H.rotate(Pe),Q):H.rotate()},Q.center=function(Pe){return arguments.length?(G.center(cn(Pe)),Q):vn(G.center())},xe("angle"),xe("clipAngle"),xe("clipExtent"),xe("fitExtent"),xe("fitHeight"),xe("fitSize"),xe("fitWidth"),xe("scale"),xe("translate"),xe("precision"),Q.scale(249.5)}function Pn(N,G){var H=2*m/G,Q=N*N;function xe(Pe,U){var te=(0,ne.N)(Pe,U),oe=te[0],_e=te[1],ke=oe*oe+_e*_e;if(ke>Q){var ze=P(ke),Ge=_(_e,oe),qe=H*s(Ge/H),Je=Ge-qe,$e=N*g(Je),st=(N*u(Je)-Je*u($e))/(f-$e),yt=In(Je,st),_t=(m-N)/kn(yt,$e,m);oe=ze;var It,zt=50;do oe-=It=(N+kn(yt,$e,oe)*_t-ze)/(yt(oe)*_t);while(b(It)>c&&--zt>0);_e=Je*u(oe),oe<f&&(_e-=st*(oe-f));var Rt=u(qe),Ht=g(qe);te[0]=oe*Ht-_e*Rt,te[1]=oe*Rt+_e*Ht}return te}return xe.invert=function(Pe,U){var te=Pe*Pe+U*U;if(te>Q){var oe=P(te),_e=_(U,Pe),ke=H*s(_e/H),ze=_e-ke;Pe=oe*g(ze),U=oe*u(ze);for(var Ge=Pe-f,qe=u(Pe),Je=U/qe,$e=Pe<f?1/0:0,st=10;;){var yt=N*u(Je),_t=N*g(Je),It=u(_t),zt=f-_t,Rt=(yt-Je*It)/zt,Ht=In(Je,Rt);if(b($e)<w||!--st)break;Je-=$e=(Je*qe-Rt*Ge-U)/(qe-2*Ge*(zt*(_t+Je*yt*g(_t)-It)-yt*(yt-Je*It))/(zt*zt))}Pe=(oe=N+kn(Ht,_t,Pe)*(m-N)/kn(Ht,_t,m))*g(_e=ke+Je),U=oe*u(_e)}return ne.N.invert(Pe,U)},xe}function In(N,G){return function(H){var Q=N*g(H);return H<f&&(Q-=G),P(1+Q*Q)}}function kn(N,G,H){for(var Q=(H-G)/50,xe=N(G)+N(H),Pe=1,U=G;Pe<50;++Pe)xe+=2*N(U+=Q);return .5*xe*Q}function zn(){var N=6,G=30*A,H=g(G),Q=u(G),xe=(0,T.r)(Pn),Pe=xe(G,N),U=Pe.stream,te=-g(.01*A),oe=u(.01*A);return Pe.radius=function(_e){return arguments.length?(H=g(G=_e*A),Q=u(G),xe(G,N)):G*S},Pe.lobes=function(_e){return arguments.length?xe(G,N=+_e):N},Pe.stream=function(_e){var ke=Pe.rotate(),ze=U(_e),Ge=(Pe.rotate([0,0]),U(_e));return Pe.rotate(ke),ze.sphere=function(){Ge.polygonStart(),Ge.lineStart();for(var qe=0,Je=2*m/N,$e=0;qe<N;++qe,$e-=Je)Ge.point(_(oe*g($e),te)*S,k(oe*u($e))*S),Ge.point(_(Q*g($e-Je/2),H)*S,k(Q*u($e-Je/2))*S);Ge.lineEnd(),Ge.polygonEnd()},ze},Pe.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function er(N,G,H,Q,xe,Pe,U,te){function oe(_e,ke){if(!ke)return[N*_e/m,0];var ze=ke*ke,Ge=N+ze*(G+ze*(H+ze*Q)),qe=ke*(xe-1+ze*(Pe-te+ze*U)),Je=(Ge*Ge+qe*qe)/(2*qe),$e=_e*k(Ge/Je)/m;return[Je*u($e),ke*(1+ze*te)+Je*(1-g($e))]}return arguments.length<8&&(te=0),oe.invert=function(_e,ke){var ze,Ge,qe=m*_e/N,Je=ke,$e=50;do{var st=Je*Je,yt=N+st*(G+st*(H+st*Q)),_t=Je*(xe-1+st*(Pe-te+st*U)),It=yt*yt+_t*_t,zt=2*_t,Rt=It/zt,Ht=Rt*Rt,Dt=k(yt/Rt)/m,sn=qe*Dt,$t=yt*yt,Zt=(2*G+st*(4*H+6*st*Q))*Je,xn=xe+st*(3*Pe+5*st*U),bn=(2*(yt*Zt+_t*(xn-1))*zt-It*(2*(xn-1)))/(zt*zt),Un=g(sn),jn=u(sn),Xn=Rt*Un,Qn=Rt*jn,hr=qe/m*(1/P(1-$t/Ht))*(Zt*Rt-yt*bn)/Ht,cr=Qn-_e,vr=Je*(1+st*te)+Rt-Xn-ke,Mr=bn*jn+Xn*hr,Fr=Xn*Dt,Gn=1+bn-(bn*Un-Qn*hr),ur=Qn*Dt,yr=Mr*ur-Gn*Fr;if(!yr)break;qe-=ze=(vr*Mr-cr*Gn)/yr,Je-=Ge=(cr*ur-vr*Fr)/yr}while((b(ze)>c||b(Ge)>c)&&--$e>0);return[qe,Je]},oe}var ir=er(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function fr(){return(0,T.Z)(ir).scale(149.995)}var ar=er(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Jn(){return(0,T.Z)(ar).scale(153.93)}var br=er(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Gt(){return(0,T.Z)(br).scale(130.945)}function ln(N,G){var H=N*N,Q=G*G;return[N*(1-.162388*Q)*(.87-952426e-9*H*H),G*(1+Q/12)]}function mn(){return(0,T.Z)(ln).scale(131.747)}ln.invert=function(N,G){var H,Q=N,xe=G,Pe=50;do{var U=xe*xe;xe-=H=(xe*(1+U/12)-G)/(1+U/4)}while(b(H)>c&&--Pe>0);Pe=50,N/=1-.162388*U;do{var te=(te=Q*Q)*te;Q-=H=(Q*(.87-952426e-9*te)-N)/(.87-.00476213*te)}while(b(H)>c&&--Pe>0);return[Q,xe]};var _n=er(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,T.Z)(_n).scale(131.087)}function Yn(N){var G=N(f,0)[0]-N(-f,0)[0];function H(Q,xe){var Pe=Q>0?-.5:.5,U=N(Q+Pe*m,xe);return U[0]-=Pe*G,U}return N.invert&&(H.invert=function(Q,xe){var Pe=Q>0?-.5:.5,U=N.invert(Q+Pe*G,xe),te=U[0]-Pe*m;return te<-m?te+=2*m:te>m&&(te-=2*m),U[0]=te,U}),H}function Nn(N,G){var H=l(N),Q=l(G),xe=g(G),Pe=g(N)*xe,U=u(N)*xe,te=u(Q*G);N=b(_(U,te)),G=k(Pe),b(N-f)>c&&(N%=f);var oe=function(_e,ke){if(ke===f)return[0,0];var ze,Ge,qe=u(ke),Je=qe*qe,$e=Je*Je,st=1+$e,yt=1+3*$e,_t=1-$e,It=k(1/P(st)),zt=_t+Je*st*It,Rt=(1-qe)/zt,Ht=P(Rt),Dt=Rt*st,sn=P(Dt),$t=Ht*_t;if(_e===0)return[0,-($t+Je*sn)];var Zt,xn=g(ke),bn=1/xn,Un=2*qe*xn,jn=(-zt*xn-(1-qe)*((-3*Je+It*yt)*Un))/(zt*zt),Xn=-bn*Un,Qn=-bn*(Je*st*jn+Rt*yt*Un),hr=-2*bn*(_t*(.5*jn/Ht)-2*Je*Ht*Un),cr=4*_e/m;if(_e>.222*m||ke<m/4&&_e>.175*m){if(ze=($t+Je*P(Dt*(1+$e)-$t*$t))/(1+$e),_e>m/4)return[ze,ze];var vr=ze,Mr=.5*ze;ze=.5*(Mr+vr),Ge=50;do{var Fr=ze*(hr+Xn*P(Dt-ze*ze))+Qn*k(ze/sn)-cr;if(!Fr)break;Fr<0?Mr=ze:vr=ze,ze=.5*(Mr+vr)}while(b(vr-Mr)>c&&--Ge>0)}else{ze=c,Ge=25;do{var Gn=ze*ze,ur=P(Dt-Gn),yr=hr+Xn*ur,Ar=ze*yr+Qn*k(ze/sn)-cr;ze-=Zt=ur?Ar/(yr+(Qn-Xn*Gn)/ur):0}while(b(Zt)>c&&--Ge>0)}return[ze,-$t-Je*P(Dt-ze*ze)]}(N>m/4?f-N:N,G);return N>m/4&&(te=oe[0],oe[0]=-oe[1],oe[1]=-te),oe[0]*=H,oe[1]*=-Q,oe}function Bn(){return(0,T.Z)(Yn(Nn)).scale(239.75)}function rr(N,G){var H,Q,xe,Pe,U,te;if(G<c)return[(Pe=u(N))-(H=G*(N-Pe*(Q=g(N)))/4)*Q,Q+H*Pe,1-G*Pe*Pe/2,N-H];if(G>=1-c)return H=(1-G)/4,xe=1/(Q=O(N)),[(Pe=((te=h(2*(te=N)))-1)/(te+1))+H*((U=Q*R(N))-N)/(Q*Q),xe-H*Pe*xe*(U-N),xe+H*Pe*xe*(U+N),2*a(h(N))-f+H*(U-N)/Q];var oe=[1,0,0,0,0,0,0,0,0],_e=[P(G),0,0,0,0,0,0,0,0],ke=0;for(Q=P(1-G),U=1;b(_e[ke]/oe[ke])>c&&ke<8;)H=oe[ke++],_e[ke]=(H-Q)/2,oe[ke]=(H+Q)/2,Q=P(H*Q),U*=2;xe=U*oe[ke]*N;do xe=(k(Pe=_e[ke]*u(Q=xe)/oe[ke])+xe)/2;while(--ke);return[u(xe),Pe=g(xe),Pe/g(xe-Q),xe]}function Yt(N,G){if(!G)return N;if(G===1)return t(d(N/2+x));for(var H=1,Q=P(1-G),xe=P(G),Pe=0;b(xe)>c;Pe++){if(N%m){var U=a(Q*d(N)/H);U<0&&(U+=m),N+=U+~~(N/m)*m}else N+=N;xe=(H+Q)/2,Q=P(H*Q),xe=((H=xe)-Q)/2}return N/(r(2,Pe)*H)}function An(N,G){var H=(v-1)/(v+1),Q=P(1-H*H),xe=Yt(f,Q*Q),Pe=t(d(m/4+b(G)/2)),U=h(-1*Pe)/P(H),te=function(_e,ke){var ze=_e*_e,Ge=ke+1,qe=1-ze-ke*ke;return[.5*((_e>=0?f:-f)-_(qe,2*_e)),-.25*t(qe*qe+4*ze)+.5*t(Ge*Ge+ze)]}(U*g(-1*N),U*u(-1*N)),oe=function(_e,ke,ze){var Ge=b(_e),qe=R(b(ke));if(Ge){var Je=1/u(Ge),$e=1/(d(Ge)*d(Ge)),st=-($e+ze*(qe*qe*Je*Je)-1+ze),yt=(-st+P(st*st-(ze-1)*$e*4))/2;return[Yt(a(1/P(yt)),ze)*l(_e),Yt(a(P((yt/$e-1)/ze)),1-ze)*l(ke)]}return[0,Yt(a(qe),1-ze)*l(ke)]}(te[0],te[1],Q*Q);return[-oe[1],(G>=0?1:-1)*(.5*xe-oe[0])]}function Ct(){return(0,T.Z)(Yn(An)).scale(151.496)}Nn.invert=function(N,G){b(N)>1&&(N=2*l(N)-N),b(G)>1&&(G=2*l(G)-G);var H=l(N),Q=l(G),xe=-H*N,Pe=-Q*G,U=Pe/xe<1,te=function(ze,Ge){for(var qe=0,Je=1,$e=.5,st=50;;){var yt=$e*$e,_t=P($e),It=k(1/P(1+yt)),zt=1-yt+$e*(1+yt)*It,Rt=(1-_t)/zt,Ht=P(Rt),Dt=Rt*(1+yt),sn=Ht*(1-yt),$t=P(Dt-ze*ze),Zt=Ge+sn+$e*$t;if(b(Je-qe)<w||--st==0||Zt===0)break;Zt>0?qe=$e:Je=$e,$e=.5*(qe+Je)}if(!st)return null;var xn=k(_t),bn=g(xn),Un=1/bn,jn=2*_t*bn,Xn=(-zt*bn-(-3*$e+It*(1+3*yt))*jn*(1-_t))/(zt*zt);return[m/4*(ze*(-2*Un*((1-yt)*(.5*Xn/Ht)-2*$e*Ht*jn)+-Un*jn*$t)+-Un*($e*(1+yt)*Xn+Rt*(1+3*yt)*jn)*k(ze/P(Dt))),xn]}(U?Pe:xe,U?xe:Pe),oe=te[0],_e=te[1],ke=g(_e);return U&&(oe=-f-oe),[H*(_(u(oe)*ke,-u(_e))+m),Q*k(g(oe)*ke)]},An.invert=function(N,G){var H,Q,xe,Pe,U,te,oe=(v-1)/(v+1),_e=P(1-oe*oe),ke=(Q=-N,xe=_e*_e,(H=.5*Yt(f,_e*_e)-G)?(Pe=rr(H,xe),Q?(te=(U=rr(Q,1-xe))[1]*U[1]+xe*Pe[0]*Pe[0]*U[0]*U[0],[[Pe[0]*U[2]/te,Pe[1]*Pe[2]*U[0]*U[1]/te],[Pe[1]*U[1]/te,-Pe[0]*Pe[2]*U[0]*U[2]/te],[Pe[2]*U[1]*U[2]/te,-xe*Pe[0]*Pe[1]*U[0]/te]]):[[Pe[0],0],[Pe[1],0],[Pe[2],0]]):[[0,(U=rr(Q,1-xe))[0]/U[1]],[1/U[1],0],[U[2]/U[1],0]]),ze=function(Ge,qe){var Je=qe[0]*qe[0]+qe[1]*qe[1];return[(Ge[0]*qe[0]+Ge[1]*qe[1])/Je,(Ge[1]*qe[0]-Ge[0]*qe[1])/Je]}(ke[0],ke[1]);return[_(ze[1],ze[0])/-1,2*a(h(-.5*t(oe*ze[0]*ze[0]+oe*ze[1]*ze[1])))-f]};var Kt=e(7613);function rn(N){var G=u(N),H=g(N),Q=Tn(N);function xe(Pe,U){var te=Q(Pe,U);Pe=te[0],U=te[1];var oe=u(U),_e=g(U),ke=g(Pe),ze=C(G*oe+H*_e*ke),Ge=u(ze),qe=b(Ge)>c?ze/Ge:1;return[qe*H*u(Pe),(b(Pe)>f?qe:-qe)*(G*_e-H*oe*ke)]}return Q.invert=Tn(-N),xe.invert=function(Pe,U){var te=P(Pe*Pe+U*U),oe=-u(te),_e=g(te),ke=te*_e,ze=-U*oe,Ge=te*G,qe=P(ke*ke+ze*ze-Ge*Ge),Je=_(ke*Ge+ze*qe,ze*Ge-ke*qe),$e=(te>f?-1:1)*_(Pe*oe,te*g(Je)*_e+U*u(Je)*oe);return Q.invert($e,Je)},xe}function Tn(N){var G=u(N),H=g(N);return function(Q,xe){var Pe=g(xe),U=g(Q)*Pe,te=u(Q)*Pe,oe=u(xe);return[_(te,U*H-oe*G),k(oe*H+U*G)]}}function Mn(){var N=0,G=(0,T.r)(rn),H=G(N),Q=H.rotate,xe=H.stream,Pe=(0,Kt.Z)();return H.parallel=function(U){if(!arguments.length)return N*S;var te=H.rotate();return G(N=U*A).rotate(te)},H.rotate=function(U){return arguments.length?(Q.call(H,[U[0],U[1]-N*S]),Pe.center([-U[0],-U[1]]),H):((U=Q.call(H))[1]+=N*S,U)},H.stream=function(U){return(U=xe(U)).sphere=function(){U.polygonStart();var te,oe=Pe.radius(89.99)().coordinates[0],_e=oe.length-1,ke=-1;for(U.lineStart();++ke<_e;)U.point((te=oe[ke])[0],te[1]);for(U.lineEnd(),_e=(oe=Pe.radius(90.01)().coordinates[0]).length-1,U.lineStart();--ke>=0;)U.point((te=oe[ke])[0],te[1]);U.lineEnd(),U.polygonEnd()},U},H.scale(79.4187).parallel(45).clipAngle(179.999)}var Cn=e(33064),pn=e(72736),en=k(1-1/3)*S,nn=tt(0);function fn(N){var G=en*A,H=Lt(m,G)[0]-Lt(-m,G)[0],Q=nn(0,G)[1],xe=Lt(0,G)[1],Pe=M-xe,U=p/N,te=4/p,oe=Q+Pe*Pe*4/p;function _e(ke,ze){var Ge,qe=b(ze);if(qe>G){var Je=n(N-1,i(0,o((ke+m)/U)));(Ge=Lt(ke+=m*(N-1)/N-Je*U,qe))[0]=Ge[0]*p/H-p*(N-1)/(2*N)+Je*p/N,Ge[1]=Q+4*(Ge[1]-xe)*Pe/p,ze<0&&(Ge[1]=-Ge[1])}else Ge=nn(ke,ze);return Ge[0]*=te,Ge[1]/=oe,Ge}return _e.invert=function(ke,ze){ke/=te;var Ge=b(ze*=oe);if(Ge>Q){var qe=n(N-1,i(0,o((ke+m)/U)));ke=(ke+m*(N-1)/N-qe*U)*H/p;var Je=Lt.invert(ke,.25*(Ge-Q)*p/Pe+xe);return Je[0]-=m*(N-1)/N-qe*U,ze<0&&(Je[1]=-Je[1]),Je}return nn.invert(ke,ze)},_e}function dn(N,G){return[N,1&G?90-c:en]}function Rn(N,G){return[N,1&G?-90+c:-en]}function On(N){return[N[0]*(1-c),N[1]]}function qn(){var N=4,G=(0,T.r)(fn),H=G(N),Q=H.stream;return H.lobes=function(xe){return arguments.length?G(N=+xe):N},H.stream=function(xe){var Pe=H.rotate(),U=Q(xe),te=(H.rotate([0,0]),Q(xe));return H.rotate(Pe),U.sphere=function(){var oe,_e;(0,pn.Z)((oe=180/N,_e=[].concat((0,Cn.w6)(-180,180+oe/2,oe).map(dn),(0,Cn.w6)(180,-180-oe/2,-oe).map(Rn)),{type:"Polygon",coordinates:[oe===180?_e.map(On):_e]}),te)},U},H.scale(239.75)}function Vn(N){var G,H=1+N,Q=k(u(1/H)),xe=2*P(m/(G=m+4*Q*H)),Pe=.5*xe*(H+P(N*(2+N))),U=N*N,te=H*H;function oe(_e,ke){var ze,Ge,qe=1-u(ke);if(qe&&qe<2){var Je,$e=f-ke,st=25;do{var yt=u($e),_t=g($e),It=Q+_(yt,H-_t),zt=1+te-2*H*_t;$e-=Je=($e-U*Q-H*yt+zt*It-.5*qe*G)/(2*H*yt*It)}while(b(Je)>w&&--st>0);ze=xe*P(zt),Ge=_e*It/m}else ze=xe*(N+qe),Ge=_e*Q/m;return[ze*u(Ge),Pe-ze*g(Ge)]}return oe.invert=function(_e,ke){var ze=_e*_e+(ke-=Pe)*ke,Ge=(1+te-ze/(xe*xe))/(2*H),qe=C(Ge),Je=u(qe),$e=Q+_(Je,H-Ge);return[k(_e/P(ze))*m/$e,k(1-2*(qe-U*Q-H*Je+(1+te-2*H*Ge)*$e)/G)]},oe}function tr(){var N=1,G=(0,T.r)(Vn),H=G(N);return H.ratio=function(Q){return arguments.length?G(N=+Q):N},H.scale(167.774).center([0,18.67])}var Zn=.7109889596207567,lr=.0528035274542;function or(N,G){return G>-Zn?((N=ue(N,G))[1]+=lr,N):He(N,G)}function sr(){return(0,T.Z)(or).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function mr(N,G){return b(G)>Zn?((N=ue(N,G))[1]-=G>0?lr:-lr,N):He(N,G)}function gr(){return(0,T.Z)(mr).scale(152.63)}function Er(N,G,H,Q){var xe=P(4*m/(2*H+(1+N-G/2)*u(2*H)+(N+G)/2*u(4*H)+G/2*u(6*H))),Pe=P(Q*u(H)*P((1+N*g(2*H)+G*g(4*H))/(1+N+G))),U=H*oe(1);function te(ze){return P(1+N*g(2*ze)+G*g(4*ze))}function oe(ze){var Ge=ze*H;return(2*Ge+(1+N-G/2)*u(2*Ge)+(N+G)/2*u(4*Ge)+G/2*u(6*Ge))/H}function _e(ze){return te(ze)*u(ze)}var ke=function(ze,Ge){var qe=H*Ce(oe,U*u(Ge)/H,Ge/m);isNaN(qe)&&(qe=H*l(Ge));var Je=xe*te(qe);return[Je*Pe*ze/m*g(qe),Je/Pe*u(qe)]};return ke.invert=function(ze,Ge){var qe=Ce(_e,Ge*Pe/xe);return[ze*m/(g(qe)*xe*Pe*te(qe)),k(H*oe(qe/H)/U)]},H===0&&(xe=P(Q/m),(ke=function(ze,Ge){return[ze*xe,u(Ge)/xe]}).invert=function(ze,Ge){return[ze/xe,k(Ge*xe)]}),ke}function $n(){var N=1,G=0,H=45*A,Q=2,xe=(0,T.r)(Er),Pe=xe(N,G,H,Q);return Pe.a=function(U){return arguments.length?xe(N=+U,G,H,Q):N},Pe.b=function(U){return arguments.length?xe(N,G=+U,H,Q):G},Pe.psiMax=function(U){return arguments.length?xe(N,G,H=+U*A,Q):H*S},Pe.ratio=function(U){return arguments.length?xe(N,G,H,Q=+U):Q},Pe.scale(180.739)}function _r(N,G,H,Q,xe,Pe,U,te,oe,_e,ke){if(ke.nanEncountered)return NaN;var ze,Ge,qe,Je,$e,st,yt,_t,It,zt;if(Ge=N(G+.25*(ze=H-G)),qe=N(H-.25*ze),isNaN(Ge))ke.nanEncountered=!0;else{if(!isNaN(qe))return zt=((st=(Je=ze*(Q+4*Ge+xe)/12)+($e=ze*(xe+4*qe+Pe)/12))-U)/15,_e>oe?(ke.maxDepthCount++,st+zt):Math.abs(zt)<te?st+zt:(_t=_r(N,G,yt=G+.5*ze,Q,Ge,xe,Je,.5*te,oe,_e+1,ke),isNaN(_t)?(ke.nanEncountered=!0,NaN):(It=_r(N,yt,H,xe,qe,Pe,$e,.5*te,oe,_e+1,ke),isNaN(It)?(ke.nanEncountered=!0,NaN):_t+It));ke.nanEncountered=!0}}function Dr(N,G,H,Q,xe){Q===void 0&&(Q=1e-8),xe===void 0&&(xe=20);var Pe=N(G),U=N(.5*(G+H)),te=N(H);return _r(N,G,H,Pe,U,te,(Pe+4*U+te)*(H-G)/6,Q,xe,1,{maxDepthCount:0,nanEncountered:!1})}function ii(N,G,H){function Q(qe){return N+(1-N)*r(1-r(qe,G),1/G)}function xe(qe){return Dr(Q,0,qe,1e-4)}for(var Pe=1/xe(1),U=1e3,te=1.00000001*Pe,oe=[],_e=0;_e<=U;_e++)oe.push(xe(_e/U)*te);function ke(qe){var Je=0,$e=U,st=500;do oe[st]>qe?$e=st:Je=st,st=Je+$e>>1;while(st>Je);var yt=oe[st+1]-oe[st];return yt&&(yt=(qe-oe[st+1])/yt),(st+1+yt)/U}var ze=2*ke(1)/m*Pe/H,Ge=function(qe,Je){var $e=ke(b(u(Je))),st=Q($e)*qe;return $e/=ze,[st,Je>=0?$e:-$e]};return Ge.invert=function(qe,Je){var $e;return b(Je*=ze)<1&&($e=l(Je)*k(xe(b(Je))*Pe)),[qe/Q(b(Je)),$e]},Ge}function wi(){var N=0,G=2.5,H=1.183136,Q=(0,T.r)(ii),xe=Q(N,G,H);return xe.alpha=function(Pe){return arguments.length?Q(N=+Pe,G,H):N},xe.k=function(Pe){return arguments.length?Q(N,G=+Pe,H):G},xe.gamma=function(Pe){return arguments.length?Q(N,G,H=+Pe):H},xe.scale(152.63)}function yi(N,G){return b(N[0]-G[0])<c&&b(N[1]-G[1])<c}function Ei(N,G){for(var H,Q,xe,Pe=-1,U=N.length,te=N[0],oe=[];++Pe<U;){Q=((H=N[Pe])[0]-te[0])/G,xe=(H[1]-te[1])/G;for(var _e=0;_e<G;++_e)oe.push([te[0]+_e*Q,te[1]+_e*xe]);te=H}return oe.push(H),oe}function hi(N,G,H){var Q,xe;function Pe(oe,_e){for(var ke=_e<0?-1:1,ze=G[+(_e<0)],Ge=0,qe=ze.length-1;Ge<qe&&oe>ze[Ge][2][0];++Ge);var Je=N(oe-ze[Ge][1][0],_e);return Je[0]+=N(ze[Ge][1][0],ke*_e>ke*ze[Ge][0][1]?ze[Ge][0][1]:_e)[0],Je}H?Pe.invert=H(Pe):N.invert&&(Pe.invert=function(oe,_e){for(var ke=xe[+(_e<0)],ze=G[+(_e<0)],Ge=0,qe=ke.length;Ge<qe;++Ge){var Je=ke[Ge];if(Je[0][0]<=oe&&oe<Je[1][0]&&Je[0][1]<=_e&&_e<Je[1][1]){var $e=N.invert(oe-N(ze[Ge][1][0],0)[0],_e);return $e[0]+=ze[Ge][1][0],yi(Pe($e[0],$e[1]),[oe,_e])?$e:null}}});var U=(0,T.Z)(Pe),te=U.stream;return U.stream=function(oe){var _e=U.rotate(),ke=te(oe),ze=(U.rotate([0,0]),te(oe));return U.rotate(_e),ke.sphere=function(){(0,pn.Z)(Q,ze)},ke},U.lobes=function(oe){return arguments.length?(Q=function(_e){var ke,ze,Ge,qe,Je,$e,st,yt=[],_t=_e[0].length;for(st=0;st<_t;++st)ze=(ke=_e[0][st])[0][0],Ge=ke[0][1],qe=ke[1][1],Je=ke[2][0],$e=ke[2][1],yt.push(Ei([[ze+c,Ge+c],[ze+c,qe-c],[Je-c,qe-c],[Je-c,$e+c]],30));for(st=_e[1].length-1;st>=0;--st)ze=(ke=_e[1][st])[0][0],Ge=ke[0][1],qe=ke[1][1],Je=ke[2][0],$e=ke[2][1],yt.push(Ei([[Je-c,$e-c],[Je-c,qe+c],[ze+c,qe+c],[ze+c,Ge-c]],30));return{type:"Polygon",coordinates:[(0,Cn.TS)(yt)]}}(oe),G=oe.map(function(_e){return _e.map(function(ke){return[[ke[0][0]*A,ke[0][1]*A],[ke[1][0]*A,ke[1][1]*A],[ke[2][0]*A,ke[2][1]*A]]})}),xe=G.map(function(_e){return _e.map(function(ke){var ze,Ge=N(ke[0][0],ke[0][1])[0],qe=N(ke[2][0],ke[2][1])[0],Je=N(ke[1][0],ke[0][1])[1],$e=N(ke[1][0],ke[1][1])[1];return Je>$e&&(ze=Je,Je=$e,$e=ze),[[Ge,Je],[qe,$e]]})}),U):G.map(function(_e){return _e.map(function(ke){return[[ke[0][0]*S,ke[0][1]*S],[ke[1][0]*S,ke[1][1]*S],[ke[2][0]*S,ke[2][1]*S]]})})},G!=null&&U.lobes(G),U}or.invert=function(N,G){return G>-Zn?ue.invert(N,G-lr):He.invert(N,G)},mr.invert=function(N,G){return b(G)>Zn?ue.invert(N,G+(G>0?lr:-lr)):He.invert(N,G)};var Fi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function vo(){return hi(Ae,Fi).scale(160.857)}var Ra=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Oo(){return hi(mr,Ra).scale(152.63)}var Xl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ws(){return hi(ue,Xl).scale(169.529)}var il=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Yl(){return hi(ue,il).scale(169.529).rotate([20,0])}var yo=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function gu(){return hi(or,yo,pe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ts=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ms(){return hi(He,Ts).scale(152.63).rotate([-20,0])}function xo(N,G){return[3/p*N*P(m*m/3-G*G),G]}function Wi(){return(0,T.Z)(xo).scale(158.837)}function al(N){function G(H,Q){if(b(b(Q)-f)<c)return[0,Q<0?-2:2];var xe=u(Q),Pe=r((1+xe)/(1-xe),N/2),U=.5*(Pe+1/Pe)+g(H*=N);return[2*u(H)/U,(Pe-1/Pe)/U]}return G.invert=function(H,Q){var xe=b(Q);if(b(xe-2)<c)return H?null:[0,l(Q)*f];if(xe>2)return null;var Pe=(H/=2)*H,U=(Q/=2)*Q,te=2*Q/(1+Pe+U);return te=r((1+te)/(1-te),1/N),[_(2*H,1-Pe-U)/N,k((te-1)/(te+1))]},G}function ti(){var N=.5,G=(0,T.r)(al),H=G(N);return H.spacing=function(Q){return arguments.length?G(N=+Q):N},H.scale(124.75)}xo.invert=function(N,G){return[p/3*N/P(m*m/3-G*G),G]};var _o=m/v;function Va(N,G){return[N*(1+P(g(G)))/2,G/(g(G/2)*g(N/6))]}function Do(){return(0,T.Z)(Va).scale(97.2672)}function io(N,G){var H=N*N,Q=G*G;return[N*(.975534+Q*(-.0143059*H-.119161+-.0547009*Q)),G*(1.00384+H*(.0802894+-.02855*Q+199025e-9*H)+Q*(.0998909+-.0491032*Q))]}function Qo(){return(0,T.Z)(io).scale(139.98)}function zo(N,G){return[u(N)/g(G),d(G)*g(N)]}function Fo(){return(0,T.Z)(zo).scale(144.049).clipAngle(89.999)}function Ll(N){var G=g(N),H=d(x+N/2);function Q(xe,Pe){var U=Pe-N,te=b(U)<c?xe*G:b(te=x+Pe/2)<c||b(b(te)-f)<c?0:xe*U/t(d(te)/H);return[te,U]}return Q.invert=function(xe,Pe){var U,te=Pe+N;return[b(Pe)<c?xe/G:b(U=x+te/2)<c||b(b(U)-f)<c?0:xe*t(d(U)/H)/Pe,te]},Q}function vu(){return Ne(Ll).parallel(40).scale(158.837)}function es(N,G){return[N,1.25*t(d(x+.4*G))]}function yu(){return(0,T.Z)(es).scale(108.318)}function Zl(N){var G=N.length-1;function H(Q,xe){for(var Pe,U=g(xe),te=2/(1+U*g(Q)),oe=te*U*u(Q),_e=te*u(xe),ke=G,ze=N[ke],Ge=ze[0],qe=ze[1];--ke>=0;)Ge=(ze=N[ke])[0]+oe*(Pe=Ge)-_e*qe,qe=ze[1]+oe*qe+_e*Pe;return[Ge=oe*(Pe=Ge)-_e*qe,qe=oe*qe+_e*Pe]}return H.invert=function(Q,xe){var Pe=20,U=Q,te=xe;do{for(var oe,_e=G,ke=N[_e],ze=ke[0],Ge=ke[1],qe=0,Je=0;--_e>=0;)qe=ze+U*(oe=qe)-te*Je,Je=Ge+U*Je+te*oe,ze=(ke=N[_e])[0]+U*(oe=ze)-te*Ge,Ge=ke[1]+U*Ge+te*oe;var $e,st,yt=(qe=ze+U*(oe=qe)-te*Je)*qe+(Je=Ge+U*Je+te*oe)*Je;U-=$e=((ze=U*(oe=ze)-te*Ge-Q)*qe+(Ge=U*Ge+te*oe-xe)*Je)/yt,te-=st=(Ge*qe-ze*Je)/yt}while(b($e)+b(st)>c*c&&--Pe>0);if(Pe){var _t=P(U*U+te*te),It=2*a(.5*_t),zt=u(It);return[_(U*zt,_t*g(It)),_t?k(te*zt/_t):0]}},H}Va.invert=function(N,G){var H=b(N),Q=b(G),xe=c,Pe=f;Q<_o?Pe*=Q/_o:xe+=6*C(_o/Q);for(var U=0;U<25;U++){var te=u(Pe),oe=P(g(Pe)),_e=u(Pe/2),ke=g(Pe/2),ze=u(xe/6),Ge=g(xe/6),qe=.5*xe*(1+oe)-H,Je=Pe/(ke*Ge)-Q,$e=oe?-.25*xe*te/oe:0,st=.5*(1+oe),yt=(1+.5*Pe*_e/ke)/(ke*Ge),_t=Pe/ke*(ze/6)/(Ge*Ge),It=$e*_t-yt*st,zt=(qe*_t-Je*st)/It,Rt=(Je*$e-qe*yt)/It;if(Pe-=zt,xe-=Rt,b(zt)<c&&b(Rt)<c)break}return[N<0?-xe:xe,G<0?-Pe:Pe]},io.invert=function(N,G){var H=l(N)*m,Q=G/2,xe=50;do{var Pe=H*H,U=Q*Q,te=H*Q,oe=H*(.975534+U*(-.0143059*Pe-.119161+-.0547009*U))-N,_e=Q*(1.00384+Pe*(.0802894+-.02855*U+199025e-9*Pe)+U*(.0998909+-.0491032*U))-G,ke=.975534-U*(.119161+3*Pe*.0143059+.0547009*U),ze=-te*(.238322+.2188036*U+.0286118*Pe),Ge=te*(.1605788+7961e-7*Pe+-.0571*U),qe=1.00384+Pe*(.0802894+199025e-9*Pe)+U*(3*(.0998909-.02855*Pe)-.245516*U),Je=ze*Ge-qe*ke,$e=(_e*ze-oe*qe)/Je,st=(oe*Ge-_e*ke)/Je;H-=$e,Q-=st}while((b($e)>c||b(st)>c)&&--xe>0);return xe&&[H,Q]},zo.invert=function(N,G){var H=N*N,Q=G*G+1,xe=H+Q,Pe=N?y*P((xe-P(xe*xe-4*H))/H):1/P(Q);return[k(N*Pe),l(G)*C(Pe)]},es.invert=function(N,G){return[N,2.5*a(h(.8*G))-.625*m]};var xu=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Kl=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],_u=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Gs=[[.9245,0],[0,0],[.01943,0]],ts=[[.721316,0],[0,0],[-.00881625,-.00617325]];function As(){return Za(xu,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Ws(){return Za(Kl,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Cl(){return Za(_u,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Jl(){return Za(Gs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function $l(){return Za(ts,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Za(N,G){var H=(0,T.Z)(Zl(N)).rotate(G).clipAngle(90),Q=(0,at.Z)(G),xe=H.center;return delete H.rotate,H.center=function(Pe){return arguments.length?xe(Q(Pe)):Q.invert(xe())},H}var Ss=P(6),bo=P(7);function No(N,G){var H=k(7*u(G)/(3*Ss));return[Ss*N*(2*g(2*H/3)-1)/bo,9*u(H/3)/bo]}function bu(){return(0,T.Z)(No).scale(164.859)}function ns(N,G){for(var H,Q=(1+y)*u(G),xe=G,Pe=0;Pe<25&&(xe-=H=(u(xe/2)+u(xe)-Q)/(.5*g(xe/2)+g(xe)),!(b(H)<c));Pe++);return[N*(1+2*g(xe)/g(xe/2))/(3*v),2*P(3)*u(xe/2)/P(2+v)]}function pi(){return(0,T.Z)(ns).scale(188.209)}function ao(N,G){for(var H,Q=P(6/(4+m)),xe=(1+m/4)*u(G),Pe=G/2,U=0;U<25&&(Pe-=H=(Pe/2+u(Pe)-xe)/(.5+g(Pe)),!(b(H)<c));U++);return[Q*(.5+g(Pe))*N/1.5,Q*Pe]}function ol(){return(0,T.Z)(ao).scale(166.518)}No.invert=function(N,G){var H=3*k(G*bo/9);return[N*bo/(Ss*(2*g(2*H/3)-1)),k(3*u(H)*Ss/7)]},ns.invert=function(N,G){var H=G*P(2+v)/(2*P(3)),Q=2*k(H);return[3*v*N/(1+2*g(Q)/g(Q/2)),k((H+u(Q))/(1+y))]},ao.invert=function(N,G){var H=P(6/(4+m)),Q=G/H;return b(b(Q)-f)<c&&(Q=Q<0?-f:f),[1.5*N/(H*(.5+g(Q))),k((Q/2+u(Q))/(1+m/4))]};var Ka=e(26867);function Es(N,G){var H=G*G,Q=H*H,xe=H*Q;return[N*(.84719-.13063*H+xe*xe*(.05494*H-.04515-.02326*Q+.00331*xe)),G*(1.01183+Q*Q*(.01926*H-.02625-.00396*Q))]}function Xu(){return(0,T.Z)(Es).scale(175.295)}function Pl(N,G){return[N*(1+g(G))/2,2*(G-d(G/2))]}function wu(){return(0,T.Z)(Pl).scale(152.63)}Es.invert=function(N,G){var H,Q,xe,Pe,U=G,te=25;do U-=H=(U*(1.01183+(xe=(Q=U*U)*Q)*xe*(.01926*Q-.02625-.00396*xe))-G)/(1.01183+xe*xe*(.21186*Q-.23625+-.05148*xe));while(b(H)>w&&--te>0);return[N/(.84719-.13063*(Q=U*U)+(Pe=Q*(xe=Q*Q))*Pe*(.05494*Q-.04515-.02326*xe+.00331*Pe)),U]},Pl.invert=function(N,G){for(var H=G/2,Q=0,xe=1/0;Q<10&&b(xe)>c;++Q){var Pe=g(G/2);G-=xe=(G-d(G/2)-H)/(1-.5/(Pe*Pe))}return[2*N/(1+g(G)),G]};var Tu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function sl(){return hi(me(1/0),Tu).rotate([20,0]).scale(152.63)}function qs(N,G){var H=u(G),Q=g(G),xe=l(N);if(N===0||b(G)===f)return[0,G];if(G===0)return[N,0];if(b(N)===f)return[N*Q,f*H];var Pe=m/(2*N)-2*N/m,U=2*G/m,te=(1-U*U)/(H-U),oe=Pe*Pe,_e=te*te,ke=1+oe/_e,ze=1+_e/oe,Ge=(Pe*H/te-Pe/2)/ke,qe=(_e*H/oe+te/2)/ze,Je=qe*qe-(_e*H*H/oe+te*H-1)/ze;return[f*(Ge+P(Ge*Ge+Q*Q/ke)*xe),f*(qe+P(Je<0?0:Je)*l(-G*Pe)*xe)]}function ll(){return(0,T.Z)(qs).scale(127.267)}qs.invert=function(N,G){var H=(N/=f)*N,Q=H+(G/=f)*G,xe=m*m;return[N?(Q-1+P((1-Q)*(1-Q)+4*H))/(2*N)*f:0,Ce(function(Pe){return Q*(m*u(Pe)-2*Pe)*m+4*Pe*Pe*(G-u(Pe))+2*m*Pe-xe*G},0)]};var rs=1.0148,Bo=.23185,is=-.14499,Uo=.02406,Rl=rs,oo=5*Bo,Mu=7*is,Au=9*Uo,Il=1.790857183;function as(N,G){var H=G*G;return[N,G*(rs+H*H*(Bo+H*(is+Uo*H)))]}function Ol(){return(0,T.Z)(as).scale(139.319)}function ks(N,G){if(b(G)<c)return[N,0];var H=d(G),Q=N*u(G);return[u(Q)/H,G+(1-g(Q))/H]}function Ql(){return(0,T.Z)(ks).scale(103.74)}as.invert=function(N,G){G>Il?G=Il:G<-1.790857183&&(G=-1.790857183);var H,Q=G;do{var xe=Q*Q;Q-=H=(Q*(rs+xe*xe*(Bo+xe*(is+Uo*xe)))-G)/(Rl+xe*xe*(oo+xe*(Mu+Au*xe)))}while(b(H)>c);return[N,Q]},ks.invert=function(N,G){if(b(G)<c)return[N,0];var H,Q=N*N+G*G,xe=.5*G,Pe=10;do{var U=d(xe),te=1/g(xe),oe=Q-2*G*xe+xe*xe;xe-=H=(U*oe+2*(xe-G))/(2+oe*te*te+2*(xe-G)*U)}while(b(H)>c&&--Pe>0);return U=d(xe),[(b(G)<b(xe+1/U)?k(N*U):l(G)*l(N)*(C(b(N*U))+f))/u(xe),xe]};var Xs=e(77338),Ls=e(83074);function ul(N,G){return[N[0]*G[0]+N[1]*G[3],N[0]*G[1]+N[1]*G[4],N[0]*G[2]+N[1]*G[5]+N[2],N[3]*G[0]+N[4]*G[3],N[3]*G[1]+N[4]*G[4],N[3]*G[2]+N[4]*G[5]+N[5]]}function Ys(N,G){return[N[0]-G[0],N[1]-G[1]]}function di(N){return P(N[0]*N[0]+N[1]*N[1])}function os(N,G,H){function Q(te,oe){var _e,ke=G(te,oe),ze=ke.project([te*S,oe*S]);return(_e=ke.transform)?[_e[0]*ze[0]+_e[1]*ze[1]+_e[2],-(_e[3]*ze[0]+_e[4]*ze[1]+_e[5])]:(ze[1]=-ze[1],ze)}function xe(te,oe){var _e=te.project.invert,ke=te.transform,ze=oe;if(ke&&(ke=function(st){var yt=1/(st[0]*st[4]-st[1]*st[3]);return[yt*st[4],-yt*st[1],yt*(st[1]*st[5]-st[2]*st[4]),-yt*st[3],yt*st[0],yt*(st[2]*st[3]-st[0]*st[5])]}(ke),ze=[ke[0]*ze[0]+ke[1]*ze[1]+ke[2],ke[3]*ze[0]+ke[4]*ze[1]+ke[5]]),_e&&te===function(st){return G(st[0]*A,st[1]*A)}(Ge=_e(ze)))return Ge;for(var Ge,qe=te.children,Je=0,$e=qe&&qe.length;Je<$e;++Je)if(Ge=xe(qe[Je],oe))return Ge}(function te(oe,_e){if(oe.edges=function(Rt){for(var Ht=Rt.length,Dt=[],sn=Rt[Ht-1],$t=0;$t<Ht;++$t)Dt.push([sn,sn=Rt[$t]]);return Dt}(oe.face),_e.face){var ke=oe.shared=function(Rt,Ht){for(var Dt,sn,$t=Rt.length,Zt=null,xn=0;xn<$t;++xn){Dt=Rt[xn];for(var bn=Ht.length;--bn>=0;)if(sn=Ht[bn],Dt[0]===sn[0]&&Dt[1]===sn[1]){if(Zt)return[Zt,Dt];Zt=Dt}}}(oe.face,_e.face),ze=($e=ke.map(_e.project),st=ke.map(oe.project),yt=Ys($e[1],$e[0]),_t=Ys(st[1],st[0]),It=function(Rt,Ht){return _(Rt[0]*Ht[1]-Rt[1]*Ht[0],Rt[0]*Ht[0]+Rt[1]*Ht[1])}(yt,_t),zt=di(yt)/di(_t),ul([1,0,$e[0][0],0,1,$e[0][1]],ul([zt,0,0,0,zt,0],ul([g(It),u(It),0,-u(It),g(It),0],[1,0,-st[0][0],0,1,-st[0][1]]))));oe.transform=_e.transform?ul(_e.transform,ze):ze;for(var Ge=_e.edges,qe=0,Je=Ge.length;qe<Je;++qe)ia(ke[0],Ge[qe][1])&&ia(ke[1],Ge[qe][0])&&(Ge[qe]=oe),ia(ke[0],Ge[qe][0])&&ia(ke[1],Ge[qe][1])&&(Ge[qe]=oe);for(qe=0,Je=(Ge=oe.edges).length;qe<Je;++qe)ia(ke[0],Ge[qe][0])&&ia(ke[1],Ge[qe][1])&&(Ge[qe]=_e),ia(ke[0],Ge[qe][1])&&ia(ke[1],Ge[qe][0])&&(Ge[qe]=_e)}else oe.transform=_e.transform;var $e,st,yt,_t,It,zt;return oe.children&&oe.children.forEach(function(Rt){te(Rt,oe)}),oe})(N,{transform:null}),Zr(N)&&(Q.invert=function(te,oe){var _e=xe(N,[te,-oe]);return _e&&(_e[0]*=A,_e[1]*=A,_e)});var Pe=(0,T.Z)(Q),U=Pe.stream;return Pe.stream=function(te){var oe=Pe.rotate(),_e=U(te),ke=(Pe.rotate([0,0]),U(te));return Pe.rotate(oe),_e.sphere=function(){ke.polygonStart(),ke.lineStart(),jo(ke,N),ke.lineEnd(),ke.polygonEnd()},_e},Pe.angle(H==null?-30:H*S)}function jo(N,G,H){var Q,xe,Pe=G.edges,U=Pe.length,te={type:"MultiPoint",coordinates:G.face},oe=G.face.filter(function($e){return b($e[1])!==90}),_e=(0,Xs.Z)({type:"MultiPoint",coordinates:oe}),ke=!1,ze=-1,Ge=_e[1][0]-_e[0][0],qe=Ge===180||Ge===360?[(_e[0][0]+_e[1][0])/2,(_e[0][1]+_e[1][1])/2]:(0,Ze.Z)(te);if(H)for(;++ze<U&&Pe[ze]!==H;);++ze;for(var Je=0;Je<U;++Je)xe=Pe[(Je+ze)%U],Array.isArray(xe)?(ke||(N.point((Q=(0,Ls.Z)(xe[0],qe)(c))[0],Q[1]),ke=!0),N.point((Q=(0,Ls.Z)(xe[1],qe)(c))[0],Q[1])):(ke=!1,xe!==H&&jo(N,xe,G))}function ia(N,G){return N&&G&&N[0]===G[0]&&N[1]===G[1]}function Zr(N){return N.project.invert||N.children&&N.children.some(Zr)}var ni=e(98936),ss=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Vo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(N){return N.map(function(G){return ss[G]})});function eu(N){N=N||function(H){var Q=(0,Ze.Z)({type:"MultiPoint",coordinates:H});return(0,ni.Z)().scale(1).translate([0,0]).rotate([-Q[0],-Q[1]])};var G=Vo.map(function(H){return{face:H,project:N(H)}});return[-1,0,0,1,0,1,4,5].forEach(function(H,Q){var xe=G[H];xe&&(xe.children||(xe.children=[])).push(G[Q])}),os(G[0],function(H,Q){return G[H<-m/2?Q<0?6:4:H<0?Q<0?2:0:H<m/2?Q<0?3:1:Q<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var cl=2/P(3);function ls(N,G){var H=Lt(N,G);return[H[0]*cl,H[1]]}function fl(N){N=N||function(H){var Q=(0,Ze.Z)({type:"MultiPoint",coordinates:H});return(0,T.Z)(ls).translate([0,0]).scale(1).rotate(Q[1]>0?[-Q[0],0]:[180-Q[0],180])};var G=Vo.map(function(H){return{face:H,project:N(H)}});return[-1,0,0,1,0,1,4,5].forEach(function(H,Q){var xe=G[H];xe&&(xe.children||(xe.children=[])).push(G[Q])}),os(G[0],function(H,Q){return G[H<-m/2?Q<0?6:4:H<0?Q<0?2:0:H<m/2?Q<0?3:1:Q<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ho(N){N=N||function(Pe){var U=Pe.length===6?(0,Ze.Z)({type:"MultiPoint",coordinates:Pe}):Pe[0];return(0,ni.Z)().scale(1).translate([0,0]).rotate([-U[0],-U[1]])};var G=Vo.map(function(Pe){for(var U,te=Pe.map(Pi),oe=te.length,_e=te[oe-1],ke=[],ze=0;ze<oe;++ze)U=te[ze],ke.push(us([.9486832980505138*_e[0]+.31622776601683794*U[0],.9486832980505138*_e[1]+.31622776601683794*U[1],.9486832980505138*_e[2]+.31622776601683794*U[2]]),us([.9486832980505138*U[0]+.31622776601683794*_e[0],.9486832980505138*U[1]+.31622776601683794*_e[1],.9486832980505138*U[2]+.31622776601683794*_e[2]])),_e=U;return ke}),H=[],Q=[-1,0,0,1,0,1,4,5];G.forEach(function(Pe,U){for(var te,oe,_e=Vo[U],ke=_e.length,ze=H[U]=[],Ge=0;Ge<ke;++Ge)G.push([_e[Ge],Pe[(2*Ge+2)%(2*ke)],Pe[(2*Ge+1)%(2*ke)]]),Q.push(U),ze.push((te=Pi(Pe[(2*Ge+2)%(2*ke)]),oe=Pi(Pe[(2*Ge+1)%(2*ke)]),[te[1]*oe[2]-te[2]*oe[1],te[2]*oe[0]-te[0]*oe[2],te[0]*oe[1]-te[1]*oe[0]]))});var xe=G.map(function(Pe){return{project:N(Pe),face:Pe}});return Q.forEach(function(Pe,U){var te=xe[Pe];te&&(te.children||(te.children=[])).push(xe[U])}),os(xe[0],function(Pe,U){var te=g(U),oe=[te*g(Pe),te*u(Pe),u(U)],_e=Pe<-m/2?U<0?6:4:Pe<0?U<0?2:0:Pe<m/2?U<0?3:1:U<0?7:5,ke=H[_e];return xe[Cs(ke[0],oe)<0?8+3*_e:Cs(ke[1],oe)<0?8+3*_e+1:Cs(ke[2],oe)<0?8+3*_e+2:_e]}).angle(-30).scale(110.625).center([0,45])}function Cs(N,G){for(var H=0,Q=N.length,xe=0;H<Q;++H)xe+=N[H]*G[H];return xe}function us(N){return[_(N[1],N[0])*S,k(i(-1,n(1,N[2])))*S]}function Pi(N){var G=N[0]*A,H=N[1]*A,Q=g(H);return[Q*g(G),Q*u(G),u(H)]}function Ps(){}function Rs(N,G){var H,Q=G.stream;if(!Q)throw new Error("invalid projection");switch(N&&N.type){case"Feature":H=ga;break;case"FeatureCollection":H=Zi;break;default:H=fa}return H(N,Q)}function Zi(N,G){return{type:"FeatureCollection",features:N.features.map(function(H){return ga(H,G)})}}function ga(N,G){return{type:"Feature",id:N.id,properties:N.properties,geometry:fa(N.geometry,G)}}function fa(N,G){if(!N)return null;if(N.type==="GeometryCollection")return function(Q,xe){return{type:"GeometryCollection",geometries:Q.geometries.map(function(Pe){return fa(Pe,xe)})}}(N,G);var H;switch(N.type){case"Point":case"MultiPoint":H=cs;break;case"LineString":case"MultiLineString":H=so;break;case"Polygon":case"MultiPolygon":case"Sphere":H=aa;break;default:return null}return(0,pn.Z)(N,G(H)),H.result()}ls.invert=function(N,G){return Lt.invert(N/cl,G)};var Ki=[],Ta=[],cs={point:function(N,G){Ki.push([N,G])},result:function(){var N=Ki.length?Ki.length<2?{type:"Point",coordinates:Ki[0]}:{type:"MultiPoint",coordinates:Ki}:null;return Ki=[],N}},so={lineStart:Ps,point:function(N,G){Ki.push([N,G])},lineEnd:function(){Ki.length&&(Ta.push(Ki),Ki=[])},result:function(){var N=Ta.length?Ta.length<2?{type:"LineString",coordinates:Ta[0]}:{type:"MultiLineString",coordinates:Ta}:null;return Ta=[],N}},aa={polygonStart:Ps,lineStart:Ps,point:function(N,G){Ki.push([N,G])},lineEnd:function(){var N=Ki.length;if(N){do Ki.push(Ki[0].slice());while(++N<4);Ta.push(Ki),Ki=[]}},polygonEnd:Ps,result:function(){if(!Ta.length)return null;var N=[],G=[];return Ta.forEach(function(H){(function(Q){if((xe=Q.length)<4)return!1;for(var xe,Pe=0,U=Q[xe-1][1]*Q[0][0]-Q[xe-1][0]*Q[0][1];++Pe<xe;)U+=Q[Pe-1][1]*Q[Pe][0]-Q[Pe-1][0]*Q[Pe][1];return U<=0})(H)?N.push([H]):G.push(H)}),G.forEach(function(H){var Q=H[0];N.some(function(xe){if(function(Pe,U){for(var te=U[0],oe=U[1],_e=!1,ke=0,ze=Pe.length,Ge=ze-1;ke<ze;Ge=ke++){var qe=Pe[ke],Je=qe[0],$e=qe[1],st=Pe[Ge],yt=st[0],_t=st[1];$e>oe^_t>oe&&te<(yt-Je)*(oe-$e)/(_t-$e)+Je&&(_e=!_e)}return _e}(xe[0],Q))return xe.push(H),!0})||N.push([H])}),Ta=[],N.length?N.length>1?{type:"MultiPolygon",coordinates:N}:{type:"Polygon",coordinates:N[0]}:null}};function Ha(N){var G=N(f,0)[0]-N(-f,0)[0];function H(Q,xe){var Pe=b(Q)<f,U=N(Pe?Q:Q>0?Q-m:Q+m,xe),te=(U[0]-U[1])*y,oe=(U[0]+U[1])*y;if(Pe)return[te,oe];var _e=G*y,ke=te>0^oe>0?-1:1;return[ke*te-l(oe)*_e,ke*oe-l(te)*_e]}return N.invert&&(H.invert=function(Q,xe){var Pe=(Q+xe)*y,U=(xe-Q)*y,te=b(Pe)<.5*G&&b(U)<.5*G;if(!te){var oe=G*y,_e=Pe>0^U>0?-1:1,ke=-_e*Q+(U>0?1:-1)*oe,ze=-_e*xe+(Pe>0?1:-1)*oe;Pe=(-ke-ze)*y,U=(ke-ze)*y}var Ge=N.invert(Pe,U);return te||(Ge[0]+=Pe>0?m:-m),Ge}),(0,T.Z)(H).rotate([-90,-90,45]).clipAngle(179.999)}function Ja(){return Ha(Nn).scale(176.423)}function Dl(){return Ha(An).scale(111.48)}function $a(N,G){if(!(0<=(G=+G)&&G<=20))throw new Error("invalid digits");function H(_e){var ke=_e.length,ze=2,Ge=new Array(ke);for(Ge[0]=+_e[0].toFixed(G),Ge[1]=+_e[1].toFixed(G);ze<ke;)Ge[ze]=_e[ze],++ze;return Ge}function Q(_e){return _e.map(H)}function xe(_e){for(var ke=H(_e[0]),ze=[ke],Ge=1;Ge<_e.length;Ge++){var qe=H(_e[Ge]);(qe.length>2||qe[0]!=ke[0]||qe[1]!=ke[1])&&(ze.push(qe),ke=qe)}return ze.length===1&&_e.length>1&&ze.push(H(_e[_e.length-1])),ze}function Pe(_e){return _e.map(xe)}function U(_e){if(_e==null)return _e;var ke;switch(_e.type){case"GeometryCollection":ke={type:"GeometryCollection",geometries:_e.geometries.map(U)};break;case"Point":ke={type:"Point",coordinates:H(_e.coordinates)};break;case"MultiPoint":ke={type:_e.type,coordinates:Q(_e.coordinates)};break;case"LineString":ke={type:_e.type,coordinates:xe(_e.coordinates)};break;case"MultiLineString":case"Polygon":ke={type:_e.type,coordinates:Pe(_e.coordinates)};break;case"MultiPolygon":ke={type:"MultiPolygon",coordinates:_e.coordinates.map(Pe)};break;default:return _e}return _e.bbox!=null&&(ke.bbox=_e.bbox),ke}function te(_e){var ke={type:"Feature",properties:_e.properties,geometry:U(_e.geometry)};return _e.id!=null&&(ke.id=_e.id),_e.bbox!=null&&(ke.bbox=_e.bbox),ke}if(N!=null)switch(N.type){case"Feature":return te(N);case"FeatureCollection":var oe={type:"FeatureCollection",features:N.features.map(te)};return N.bbox!=null&&(oe.bbox=N.bbox),oe;default:return U(N)}return N}function oa(N){var G=u(N);function H(Q,xe){var Pe=G?d(Q*G/2)/G:Q/2;if(!xe)return[2*Pe,-N];var U=2*a(Pe*u(xe)),te=1/d(xe);return[u(U)*te,xe+(1-g(U))*te-N]}return H.invert=function(Q,xe){if(b(xe+=N)<c)return[G?2*a(G*Q/2)/G:Q,0];var Pe,U=Q*Q+xe*xe,te=0,oe=10;do{var _e=d(te),ke=1/g(te),ze=U-2*xe*te+te*te;te-=Pe=(_e*ze+2*(te-xe))/(2+ze*ke*ke+2*(te-xe)*_e)}while(b(Pe)>c&&--oe>0);var Ge=Q*(_e=d(te)),qe=d(b(xe)<b(te+1/_e)?.5*k(Ge):.5*C(Ge)+m/4)/u(te);return[G?2*a(G*qe)/G:2*qe,te]},H}function Sr(){return Ne(oa).scale(131.215)}var va=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function hl(N,G){var H,Q=n(18,36*b(G)/m),xe=o(Q),Pe=Q-xe,U=(H=va[xe])[0],te=H[1],oe=(H=va[++xe])[0],_e=H[1],ke=(H=va[n(19,++xe)])[0],ze=H[1];return[N*(oe+Pe*(ke-U)/2+Pe*Pe*(ke-2*oe+U)/2),(G>0?f:-f)*(_e+Pe*(ze-te)/2+Pe*Pe*(ze-2*_e+te)/2)]}function zl(){return(0,T.Z)(hl).scale(152.63)}function Is(N,G){var H=function(U){function te(oe,_e){var ke=g(_e),ze=(U-1)/(U-ke*g(oe));return[ze*ke*u(oe),ze*u(_e)]}return te.invert=function(oe,_e){var ke=oe*oe+_e*_e,ze=P(ke),Ge=(U-P(1-ke*(U+1)/(U-1)))/((U-1)/ze+ze/(U-1));return[_(oe*Ge,ze*P(1-Ge*Ge)),ze?k(_e*Ge/ze):0]},te}(N);if(!G)return H;var Q=g(G),xe=u(G);function Pe(U,te){var oe=H(U,te),_e=oe[1],ke=_e*xe/(N-1)+Q;return[oe[0]*Q/ke,_e/ke]}return Pe.invert=function(U,te){var oe=(N-1)/(N-1-te*xe);return H.invert(oe*U,oe*te*Q)},Pe}function Os(){var N=2,G=0,H=(0,T.r)(Is),Q=H(N,G);return Q.distance=function(xe){return arguments.length?H(N=+xe,G):N},Q.tilt=function(xe){return arguments.length?H(N,G=xe*A):G*S},Q.scale(432.147).clipAngle(C(1/N)*S-1e-6)}va.forEach(function(N){N[1]*=1.0144}),hl.invert=function(N,G){var H=G/f,Q=90*H,xe=n(18,b(Q/5)),Pe=i(0,o(xe));do{var U=va[Pe][1],te=va[Pe+1][1],oe=va[n(19,Pe+2)][1],_e=oe-U,ke=oe-2*te+U,ze=2*(b(H)-te)/_e,Ge=ke/_e,qe=ze*(1-Ge*ze*(1-2*Ge*ze));if(qe>=0||Pe===1){Q=(G>=0?5:-5)*(qe+xe);var Je,$e=50;do qe=(xe=n(18,b(Q)/5))-(Pe=o(xe)),U=va[Pe][1],te=va[Pe+1][1],oe=va[n(19,Pe+2)][1],Q-=(Je=(G>=0?f:-f)*(te+qe*(oe-U)/2+qe*qe*(oe-2*te+U)/2)-G)*S;while(b(Je)>w&&--$e>0);break}}while(--Pe>=0);var st=va[Pe][0],yt=va[Pe+1][0],_t=va[n(19,Pe+2)][0];return[N/(yt+qe*(_t-st)/2+qe*qe*(_t-2*yt+st)/2),Q*A]};var Go=1e-4,Tr=1e4,lo=-180,Zs=lo+Go,pl=180,ya=pl-Go,uo=-90,Qa=uo+Go,Ga=90,wo=Ga-Go;function Wo(N){return N.length>0}function Ji(N){return N===uo||N===Ga?[0,N]:[lo,(G=N,Math.floor(G*Tr)/Tr)];var G}function Ds(N){var G=N[0],H=N[1],Q=!1;return G<=Zs?(G=lo,Q=!0):G>=ya&&(G=pl,Q=!0),H<=Qa?(H=uo,Q=!0):H>=wo&&(H=Ga,Q=!0),Q?[G,H]:N}function Ks(N){return N.map(Ds)}function sa(N,G,H){for(var Q=0,xe=N.length;Q<xe;++Q){var Pe=N[Q].slice();H.push({index:-1,polygon:G,ring:Pe});for(var U=0,te=Pe.length;U<te;++U){var oe=Pe[U],_e=oe[0],ke=oe[1];if(_e<=Zs||_e>=ya||ke<=Qa||ke>=wo){Pe[U]=Ds(oe);for(var ze=U+1;ze<te;++ze){var Ge=Pe[ze],qe=Ge[0],Je=Ge[1];if(qe>Zs&&qe<ya&&Je>Qa&&Je<wo)break}if(ze===U+1)continue;if(U){var $e={index:-1,polygon:G,ring:Pe.slice(0,U+1)};$e.ring[$e.ring.length-1]=Ji(ke),H[H.length-1]=$e}else H.pop();if(ze>=te)break;H.push({index:-1,polygon:G,ring:Pe=Pe.slice(ze-1)}),Pe[0]=Ji(Pe[0][1]),U=-1,te=Pe.length}}}}function mi(N){var G,H,Q,xe,Pe,U,te=N.length,oe={},_e={};for(G=0;G<te;++G)Q=(H=N[G]).ring[0],Pe=H.ring[H.ring.length-1],Q[0]!==Pe[0]||Q[1]!==Pe[1]?(H.index=G,oe[Q]=_e[Pe]=H):(H.polygon.push(H.ring),N[G]=null);for(G=0;G<te;++G)if(H=N[G]){if(Q=H.ring[0],Pe=H.ring[H.ring.length-1],xe=_e[Q],U=oe[Pe],delete oe[Q],delete _e[Pe],Q[0]===Pe[0]&&Q[1]===Pe[1]){H.polygon.push(H.ring);continue}xe?(delete _e[Q],delete oe[xe.ring[0]],xe.ring.pop(),N[xe.index]=null,H={index:-1,polygon:xe.polygon,ring:xe.ring.concat(H.ring)},xe===U?H.polygon.push(H.ring):(H.index=te++,N.push(oe[H.ring[0]]=_e[H.ring[H.ring.length-1]]=H))):U?(delete oe[Pe],delete _e[U.ring[U.ring.length-1]],H.ring.pop(),H={index:te++,polygon:U.polygon,ring:H.ring.concat(U.ring)},N[U.index]=null,N.push(oe[H.ring[0]]=_e[H.ring[H.ring.length-1]]=H)):(H.ring.push(H.ring[0]),H.polygon.push(H.ring))}}function dl(N){var G={type:"Feature",geometry:Ia(N.geometry)};return N.id!=null&&(G.id=N.id),N.bbox!=null&&(G.bbox=N.bbox),N.properties!=null&&(G.properties=N.properties),G}function Ia(N){if(N==null)return N;var G,H,Q,xe;switch(N.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:N.geometries.map(Ia)};break;case"Point":G={type:"Point",coordinates:Ds(N.coordinates)};break;case"MultiPoint":case"LineString":G={type:N.type,coordinates:Ks(N.coordinates)};break;case"MultiLineString":G={type:"MultiLineString",coordinates:N.coordinates.map(Ks)};break;case"Polygon":var Pe=[];sa(N.coordinates,Pe,H=[]),mi(H),G={type:"Polygon",coordinates:Pe};break;case"MultiPolygon":H=[],Q=-1,xe=N.coordinates.length;for(var U=new Array(xe);++Q<xe;)sa(N.coordinates[Q],U[Q]=[],H);mi(H),G={type:"MultiPolygon",coordinates:U.filter(Wo)};break;default:return N}return N.bbox!=null&&(G.bbox=N.bbox),G}function $i(N){if(N==null)return N;switch(N.type){case"Feature":return dl(N);case"FeatureCollection":var G={type:"FeatureCollection",features:N.features.map(dl)};return N.bbox!=null&&(G.bbox=N.bbox),G;default:return Ia(N)}}function To(N,G){var H=d(G/2),Q=u(x*H);return[N*(.74482-.34588*Q*Q),1.70711*H]}function tu(){return(0,T.Z)(To).scale(146.153)}function Ni(N,G,H){var Q=(0,Ls.Z)(G,H),xe=Q(.5),Pe=(0,at.Z)([-xe[0],-xe[1]])(G),U=Q.distance/2,te=-k(u(Pe[1]*A)/u(U)),oe=[-xe[0],-xe[1],-(Pe[0]>0?m-te:te)*S],_e=(0,T.Z)(N(U)).rotate(oe),ke=(0,at.Z)(oe),ze=_e.center;return delete _e.rotate,_e.center=function(Ge){return arguments.length?ze(ke(Ge)):ke.invert(ze())},_e.clipAngle(90)}function ui(N){var G=g(N);function H(Q,xe){var Pe=(0,ni.M)(Q,xe);return Pe[0]*=G,Pe}return H.invert=function(Q,xe){return ni.M.invert(Q/G,xe)},H}function Wa(){return Mo([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Mo(N,G){return Ni(ui,N,G)}function co(N){if(!(N*=2))return ne.N;var G=-N/2,H=-G,Q=N*N,xe=d(H),Pe=.5/u(H);function U(te,oe){var _e=C(g(oe)*g(te-G)),ke=C(g(oe)*g(te-H));return[((_e*=_e)-(ke*=ke))/(2*N),(oe<0?-1:1)*P(4*Q*ke-(Q-_e+ke)*(Q-_e+ke))/(2*N)]}return U.invert=function(te,oe){var _e,ke,ze=oe*oe,Ge=g(P(ze+(_e=te+G)*_e)),qe=g(P(ze+(_e=te+H)*_e));return[_(ke=Ge-qe,_e=(Ge+qe)*xe),(oe<0?-1:1)*C(P(_e*_e+ke*ke)*Pe)]},U}function Fl(){return fs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function fs(N,G){return Ni(co,N,G)}function zs(N,G){if(b(G)<c)return[N,0];var H=b(G/f),Q=k(H);if(b(N)<c||b(b(G)-f)<c)return[0,l(G)*m*d(Q/2)];var xe=g(Q),Pe=b(m/N-N/m)/2,U=Pe*Pe,te=xe/(H+xe-1),oe=te*(2/H-1),_e=oe*oe,ke=_e+U,ze=te-_e,Ge=U+te;return[l(N)*m*(Pe*ze+P(U*ze*ze-ke*(te*te-_e)))/ke,l(G)*m*(oe*Ge-Pe*P((U+1)*ke-Ge*Ge))/ke]}function qi(){return(0,T.Z)(zs).scale(79.4183)}function ha(N,G){if(b(G)<c)return[N,0];var H=b(G/f),Q=k(H);if(b(N)<c||b(b(G)-f)<c)return[0,l(G)*m*d(Q/2)];var xe=g(Q),Pe=b(m/N-N/m)/2,U=Pe*Pe,te=xe*(P(1+U)-Pe*xe)/(1+U*H*H);return[l(N)*m*te,l(G)*m*P(1-te*(2*Pe+te))]}function Pr(){return(0,T.Z)(ha).scale(79.4183)}function Ir(N,G){if(b(G)<c)return[N,0];var H=G/f,Q=k(H);if(b(N)<c||b(b(G)-f)<c)return[0,m*d(Q/2)];var xe=(m/N-N/m)/2,Pe=H/(1+g(Q));return[m*(l(N)*P(xe*xe+1-Pe*Pe)-xe),m*Pe]}function Js(){return(0,T.Z)(Ir).scale(79.4183)}function Ma(N,G){if(!G)return[N,0];var H=b(G);if(!N||H===f)return[0,G];var Q=H/f,xe=Q*Q,Pe=(8*Q-xe*(xe+2)-5)/(2*xe*(Q-1)),U=Pe*Pe,te=Q*Pe,oe=xe+U+2*te,_e=Q+3*Pe,ke=N/f,ze=ke+1/ke,Ge=l(b(N)-f)*P(ze*ze-4),qe=Ge*Ge,Je=(Ge*(oe+U-1)+2*P(oe*(xe+U*qe-1)+(1-xe)*(xe*(_e*_e+4*U)+12*te*U+4*U*U)))/(4*oe+qe);return[l(N)*f*Je,l(G)*f*P(1+Ge*b(Je)-Je*Je)]}function hs(){return(0,T.Z)(Ma).scale(127.16)}function pa(N,G,H,Q){var xe=m/3;N=i(N,c),G=i(G,c),N=n(N,f),G=n(G,m-c),H=i(H,0),H=n(H,100-c);var Pe=(Q=i(Q,c))/100,U=C((H/100+1)*g(xe))/xe,te=u(N)/u(U*f),oe=G/m,_e=P(Pe*u(N/2)/u(G/2));return function(ke,ze,Ge,qe,Je){function $e(st,yt){var _t=Ge*u(qe*yt),It=P(1-_t*_t),zt=P(2/(1+It*g(st*=Je)));return[ke*It*zt*u(st),ze*_t*zt]}return $e.invert=function(st,yt){var _t=st/ke,It=yt/ze,zt=P(_t*_t+It*It),Rt=2*k(zt/2);return[_(st*d(Rt),ke*zt)/Je,zt&&k(yt*u(Rt)/(ze*Ge*zt))/qe]},$e}(_e/P(oe*te*U),1/(_e*P(oe*te*U)),te,U,oe)}function $s(){var N=65*A,G=60*A,H=20,Q=200,xe=(0,T.r)(pa),Pe=xe(N,G,H,Q);return Pe.poleline=function(U){return arguments.length?xe(N=+U*A,G,H,Q):N*S},Pe.parallels=function(U){return arguments.length?xe(N,G=+U*A,H,Q):G*S},Pe.inflation=function(U){return arguments.length?xe(N,G,H=+U,Q):H},Pe.ratio=function(U){return arguments.length?xe(N,G,H,Q=+U):Q},Pe.scale(163.775)}function da(){return $s().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}To.invert=function(N,G){var H=G/1.70711,Q=u(x*H);return[N/(.74482-.34588*Q*Q),2*a(H)]},zs.invert=function(N,G){if(b(G)<c)return[N,0];if(b(N)<c)return[0,f*u(2*a(G/m))];var H=(N/=m)*N,Q=(G/=m)*G,xe=H+Q,Pe=xe*xe,U=-b(G)*(1+xe),te=U-2*Q+H,oe=-2*U+1+2*Q+Pe,_e=Q/oe+(2*te*te*te/(oe*oe*oe)-9*U*te/(oe*oe))/27,ke=(U-te*te/(3*oe))/oe,ze=2*P(-ke/3),Ge=C(3*_e/(ke*ze))/3;return[m*(xe-1+P(1+2*(H-Q)+Pe))/(2*N),l(G)*m*(-ze*g(Ge+m/3)-te/(3*oe))]},ha.invert=function(N,G){if(!N)return[0,f*u(2*a(G/m))];var H=b(N/m),Q=(1-H*H-(G/=m)*G)/(2*H),xe=P(Q*Q+1);return[l(N)*m*(xe-Q),l(G)*f*u(2*_(P((1-2*Q*H)*(Q+xe)-H),P(xe+Q+H)))]},Ir.invert=function(N,G){if(!G)return[N,0];var H=G/m,Q=(m*m*(1-H*H)-N*N)/(2*m*N);return[N?m*(l(N)*P(Q*Q+1)-Q):0,f*u(2*a(H))]},Ma.invert=function(N,G){var H;if(!N||!G)return[N,G];G/=m;var Q=l(N)*N/f,xe=(Q*Q-1+4*G*G)/b(Q),Pe=xe*xe,U=2*G,te=50;do{var oe=U*U,_e=(8*U-oe*(oe+2)-5)/(2*oe*(U-1)),ke=(3*U-oe*U-10)/(2*oe*U),ze=_e*_e,Ge=U*_e,qe=U+_e,Je=qe*qe,$e=U+3*_e,st=-2*qe*(4*Ge*ze+(1-4*oe+3*oe*oe)*(1+ke)+ze*(14*oe-6-Pe+(8*oe-8-2*Pe)*ke)+Ge*(12*oe-8+(10*oe-10-Pe)*ke)),yt=P(Je*(oe+ze*Pe-1)+(1-oe)*(oe*($e*$e+4*ze)+ze*(12*Ge+4*ze)));U-=H=(xe*(Je+ze-1)+2*yt-Q*(4*Je+Pe))/(xe*(2*_e*ke+2*qe*(1+ke))+st/yt-8*qe*(xe*(-1+ze+Je)+2*yt)*(1+ke)/(Pe+4*Je))}while(H>c&&--te>0);return[l(N)*(P(xe*xe+4)+xe)*m/4,f*U]};var ps=4*m+3*P(3),ds=2*P(2*m*P(3)/ps),Nr=Me(ds*P(3)/m,ds,ps/6);function Qi(){return(0,T.Z)(Nr).scale(176.84)}function Ao(N,G){return[N*P(1-3*G*G/(m*m)),G]}function Oa(){return(0,T.Z)(Ao).scale(152.63)}function Fs(N,G){var H=g(G),Q=g(N)*H,xe=1-Q,Pe=g(N=_(u(N)*H,-u(G))),U=u(N);return[U*(H=P(1-Q*Q))-Pe*xe,-Pe*H-U*xe]}function Qs(){return(0,T.Z)(Fs).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Ns(N,G){var H=V(N,G);return[(H[0]+N/f)/2,(H[1]+G)/2]}function qo(){return(0,T.Z)(Ns).scale(158.837)}Ao.invert=function(N,G){return[N/P(1-3*G*G/(m*m)),G]},Fs.invert=function(N,G){var H=(N*N+G*G)/-2,Q=P(-H*(2+H)),xe=G*H+N*Q,Pe=N*H-G*Q,U=P(Pe*Pe+xe*xe);return[_(Q*xe,U*(1+H)),U?-k(Q*Pe/U):0]},Ns.invert=function(N,G){var H=N,Q=G,xe=25;do{var Pe,U=g(Q),te=u(Q),oe=u(2*Q),_e=te*te,ke=U*U,ze=u(H),Ge=g(H/2),qe=u(H/2),Je=qe*qe,$e=1-ke*Ge*Ge,st=$e?C(U*Ge)*P(Pe=1/$e):Pe=0,yt=.5*(2*st*U*qe+H/f)-N,_t=.5*(st*te+Q)-G,It=.5*Pe*(ke*Je+st*U*Ge*_e)+.5/f,zt=Pe*(ze*oe/4-st*te*qe),Rt=.125*Pe*(oe*qe-st*te*ke*ze),Ht=.5*Pe*(_e*Ge+st*Je*U)+.5,Dt=zt*Rt-Ht*It,sn=(_t*zt-yt*Ht)/Dt,$t=(yt*Rt-_t*It)/Dt;H-=sn,Q-=$t}while((b(sn)>c||b($t)>c)&&--xe>0);return[H,Q]}},33940:function(F,L,e){function T(){return new b}function b(){this.reset()}e.d(L,{Z:function(){return T}}),b.prototype={constructor:b,reset:function(){this.s=this.t=0},add:function(g){_(a,g,this.t),_(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new b;function _(g,h,o){var t=g.s=h+o,i=t-h,n=t-i;g.t=h-n+(o-i)}},97860:function(F,L,e){e.d(L,{L9:function(){return n},ZP:function(){return w},gL:function(){return s}});var T,b,a,_,g,h=e(33940),o=e(39695),t=e(73182),i=e(72736),n=(0,h.Z)(),r=(0,h.Z)(),s={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){n.reset(),s.lineStart=l,s.lineEnd=u},polygonEnd:function(){var m=+n;r.add(m<0?o.BZ+m:m),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){r.add(o.BZ)}};function l(){s.point=d}function u(){c(T,b)}function d(m,f){s.point=c,T=m,b=f,m*=o.uR,f*=o.uR,a=m,_=(0,o.mC)(f=f/2+o.pu),g=(0,o.O$)(f)}function c(m,f){m*=o.uR,f=(f*=o.uR)/2+o.pu;var x=m-a,y=x>=0?1:-1,v=y*x,M=(0,o.mC)(f),p=(0,o.O$)(f),S=g*p,A=_*M+S*(0,o.mC)(v),k=S*y*(0,o.O$)(v);n.add((0,o.fv)(k,A)),a=m,_=M,g=p}function w(m){return r.reset(),(0,i.Z)(m,s),2*r}},77338:function(F,L,e){e.d(L,{Z:function(){return C}});var T,b,a,_,g,h,o,t,i,n,r=e(33940),s=e(97860),l=e(7620),u=e(39695),d=e(72736),c=(0,r.Z)(),w={point:m,lineStart:x,lineEnd:y,polygonStart:function(){w.point=v,w.lineStart=M,w.lineEnd=p,c.reset(),s.gL.polygonStart()},polygonEnd:function(){s.gL.polygonEnd(),w.point=m,w.lineStart=x,w.lineEnd=y,s.L9<0?(T=-(a=180),b=-(_=90)):c>u.Ho?_=90:c<-u.Ho&&(b=-90),n[0]=T,n[1]=a},sphere:function(){T=-(a=180),b=-(_=90)}};function m(P,R){i.push(n=[T=P,a=P]),R<b&&(b=R),R>_&&(_=R)}function f(P,R){var O=(0,l.Og)([P*u.uR,R*u.uR]);if(t){var X=(0,l.T5)(t,O),D=[X[1],-X[0],0],V=(0,l.T5)(D,X);(0,l.iJ)(V),V=(0,l.Y1)(V);var j,B=P-g,W=B>0?1:-1,q=V[0]*u.RW*W,re=(0,u.Wn)(B)>180;re^(W*g<q&&q<W*P)?(j=V[1]*u.RW)>_&&(_=j):re^(W*g<(q=(q+360)%360-180)&&q<W*P)?(j=-V[1]*u.RW)<b&&(b=j):(R<b&&(b=R),R>_&&(_=R)),re?P<g?S(T,P)>S(T,a)&&(a=P):S(P,a)>S(T,a)&&(T=P):a>=T?(P<T&&(T=P),P>a&&(a=P)):P>g?S(T,P)>S(T,a)&&(a=P):S(P,a)>S(T,a)&&(T=P)}else i.push(n=[T=P,a=P]);R<b&&(b=R),R>_&&(_=R),t=O,g=P}function x(){w.point=f}function y(){n[0]=T,n[1]=a,w.point=m,t=null}function v(P,R){if(t){var O=P-g;c.add((0,u.Wn)(O)>180?O+(O>0?360:-360):O)}else h=P,o=R;s.gL.point(P,R),f(P,R)}function M(){s.gL.lineStart()}function p(){v(h,o),s.gL.lineEnd(),(0,u.Wn)(c)>u.Ho&&(T=-(a=180)),n[0]=T,n[1]=a,t=null}function S(P,R){return(R-=P)<0?R+360:R}function A(P,R){return P[0]-R[0]}function k(P,R){return P[0]<=P[1]?P[0]<=R&&R<=P[1]:R<P[0]||P[1]<R}function C(P){var R,O,X,D,V,j,B;if(_=a=-(T=b=1/0),i=[],(0,d.Z)(P,w),O=i.length){for(i.sort(A),R=1,V=[X=i[0]];R<O;++R)k(X,(D=i[R])[0])||k(X,D[1])?(S(X[0],D[1])>S(X[0],X[1])&&(X[1]=D[1]),S(D[0],X[1])>S(X[0],X[1])&&(X[0]=D[0])):V.push(X=D);for(j=-1/0,R=0,X=V[O=V.length-1];R<=O;X=D,++R)D=V[R],(B=S(X[1],D[0]))>j&&(j=B,T=D[0],a=X[1])}return i=n=null,T===1/0||b===1/0?[[NaN,NaN],[NaN,NaN]]:[[T,b],[a,_]]}},7620:function(F,L,e){e.d(L,{Og:function(){return a},T:function(){return o},T5:function(){return g},Y1:function(){return b},iJ:function(){return t},j9:function(){return _},s0:function(){return h}});var T=e(39695);function b(i){return[(0,T.fv)(i[1],i[0]),(0,T.ZR)(i[2])]}function a(i){var n=i[0],r=i[1],s=(0,T.mC)(r);return[s*(0,T.mC)(n),s*(0,T.O$)(n),(0,T.O$)(r)]}function _(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function g(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]}function h(i,n){i[0]+=n[0],i[1]+=n[1],i[2]+=n[2]}function o(i,n){return[i[0]*n,i[1]*n,i[2]*n]}function t(i){var n=(0,T._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=n,i[1]/=n,i[2]/=n}},66624:function(F,L,e){e.d(L,{Z:function(){return O}});var T,b,a,_,g,h,o,t,i,n,r,s,l,u,d,c,w=e(39695),m=e(73182),f=e(72736),x={sphere:m.Z,point:y,lineStart:M,lineEnd:A,polygonStart:function(){x.lineStart=k,x.lineEnd=C},polygonEnd:function(){x.lineStart=M,x.lineEnd=A}};function y(X,D){X*=w.uR,D*=w.uR;var V=(0,w.mC)(D);v(V*(0,w.mC)(X),V*(0,w.O$)(X),(0,w.O$)(D))}function v(X,D,V){++T,a+=(X-a)/T,_+=(D-_)/T,g+=(V-g)/T}function M(){x.point=p}function p(X,D){X*=w.uR,D*=w.uR;var V=(0,w.mC)(D);u=V*(0,w.mC)(X),d=V*(0,w.O$)(X),c=(0,w.O$)(D),x.point=S,v(u,d,c)}function S(X,D){X*=w.uR,D*=w.uR;var V=(0,w.mC)(D),j=V*(0,w.mC)(X),B=V*(0,w.O$)(X),W=(0,w.O$)(D),q=(0,w.fv)((0,w._b)((q=d*W-c*B)*q+(q=c*j-u*W)*q+(q=u*B-d*j)*q),u*j+d*B+c*W);b+=q,h+=q*(u+(u=j)),o+=q*(d+(d=B)),t+=q*(c+(c=W)),v(u,d,c)}function A(){x.point=y}function k(){x.point=P}function C(){R(s,l),x.point=y}function P(X,D){s=X,l=D,X*=w.uR,D*=w.uR,x.point=R;var V=(0,w.mC)(D);u=V*(0,w.mC)(X),d=V*(0,w.O$)(X),c=(0,w.O$)(D),v(u,d,c)}function R(X,D){X*=w.uR,D*=w.uR;var V=(0,w.mC)(D),j=V*(0,w.mC)(X),B=V*(0,w.O$)(X),W=(0,w.O$)(D),q=d*W-c*B,re=c*j-u*W,ee=u*B-d*j,K=(0,w._b)(q*q+re*re+ee*ee),Y=(0,w.ZR)(K),$=K&&-Y/K;i+=$*q,n+=$*re,r+=$*ee,b+=Y,h+=Y*(u+(u=j)),o+=Y*(d+(d=B)),t+=Y*(c+(c=W)),v(u,d,c)}function O(X){T=b=a=_=g=h=o=t=i=n=r=0,(0,f.Z)(X,x);var D=i,V=n,j=r,B=D*D+V*V+j*j;return B<w.aW&&(D=h,V=o,j=t,b<w.Ho&&(D=a,V=_,j=g),(B=D*D+V*V+j*j)<w.aW)?[NaN,NaN]:[(0,w.fv)(V,D)*w.RW,(0,w.ZR)(j/(0,w._b)(B))*w.RW]}},7613:function(F,L,e){e.d(L,{m:function(){return g},Z:function(){return o}});var T=e(7620);function b(t){return function(){return t}}var a=e(39695),_=e(49386);function g(t,i,n,r,s,l){if(n){var u=(0,a.mC)(i),d=(0,a.O$)(i),c=r*n;s==null?(s=i+r*a.BZ,l=i-c/2):(s=h(u,s),l=h(u,l),(r>0?s<l:s>l)&&(s+=r*a.BZ));for(var w,m=s;r>0?m>l:m<l;m-=c)w=(0,T.Y1)([u,-d*(0,a.mC)(m),-d*(0,a.O$)(m)]),t.point(w[0],w[1])}}function h(t,i){(i=(0,T.Og)(i))[0]-=t,(0,T.iJ)(i);var n=(0,a.Kh)(-i[1]);return((-i[2]<0?-n:n)+a.BZ-a.Ho)%a.BZ}function o(){var t,i,n=b([0,0]),r=b(90),s=b(6),l={point:function(d,c){t.push(d=i(d,c)),d[0]*=a.RW,d[1]*=a.RW}};function u(){var d=n.apply(this,arguments),c=r.apply(this,arguments)*a.uR,w=s.apply(this,arguments)*a.uR;return t=[],i=(0,_.I)(-d[0]*a.uR,-d[1]*a.uR,0).invert,g(l,c,w,1),d={type:"Polygon",coordinates:[t]},t=i=null,d}return u.center=function(d){return arguments.length?(n=typeof d=="function"?d:b([+d[0],+d[1]]),u):n},u.radius=function(d){return arguments.length?(r=typeof d=="function"?d:b(+d),u):r},u.precision=function(d){return arguments.length?(s=typeof d=="function"?d:b(+d),u):s},u}},87070:function(F,L,e){var T=e(97023),b=e(39695);L.Z=(0,T.Z)(function(){return!0},function(a){var _,g=NaN,h=NaN,o=NaN;return{lineStart:function(){a.lineStart(),_=1},point:function(t,i){var n=t>0?b.pi:-b.pi,r=(0,b.Wn)(t-g);(0,b.Wn)(r-b.pi)<b.Ho?(a.point(g,h=(h+i)/2>0?b.ou:-b.ou),a.point(o,h),a.lineEnd(),a.lineStart(),a.point(n,h),a.point(t,h),_=0):o!==n&&r>=b.pi&&((0,b.Wn)(g-o)<b.Ho&&(g-=o*b.Ho),(0,b.Wn)(t-n)<b.Ho&&(t-=n*b.Ho),h=function(s,l,u,d){var c,w,m=(0,b.O$)(s-u);return(0,b.Wn)(m)>b.Ho?(0,b.z4)(((0,b.O$)(l)*(w=(0,b.mC)(d))*(0,b.O$)(u)-(0,b.O$)(d)*(c=(0,b.mC)(l))*(0,b.O$)(s))/(c*w*m)):(l+d)/2}(g,h,t,i),a.point(o,h),a.lineEnd(),a.lineStart(),a.point(n,h),_=0),a.point(g=t,h=i),o=n},lineEnd:function(){a.lineEnd(),g=h=NaN},clean:function(){return 2-_}}},function(a,_,g,h){var o;if(a==null)o=g*b.ou,h.point(-b.pi,o),h.point(0,o),h.point(b.pi,o),h.point(b.pi,0),h.point(b.pi,-o),h.point(0,-o),h.point(-b.pi,-o),h.point(-b.pi,0),h.point(-b.pi,o);else if((0,b.Wn)(a[0]-_[0])>b.Ho){var t=a[0]<_[0]?b.pi:-b.pi;o=g*t/2,h.point(-t,o),h.point(0,o),h.point(t,o)}else h.point(_[0],_[1])},[-b.pi,-b.ou])},85272:function(F,L,e){e.d(L,{Z:function(){return b}});var T=e(73182);function b(){var a,_=[];return{point:function(g,h,o){a.push([g,h,o])},lineStart:function(){_.push(a=[])},lineEnd:T.Z,rejoin:function(){_.length>1&&_.push(_.pop().concat(_.shift()))},result:function(){var g=_;return _=[],a=null,g}}}},1457:function(F,L,e){e.d(L,{Z:function(){return h}});var T=e(7620),b=e(7613),a=e(39695),_=e(67108),g=e(97023);function h(o){var t=(0,a.mC)(o),i=6*a.uR,n=t>0,r=(0,a.Wn)(t)>a.Ho;function s(d,c){return(0,a.mC)(d)*(0,a.mC)(c)>t}function l(d,c,w){var m=(0,T.Og)(d),f=(0,T.Og)(c),x=[1,0,0],y=(0,T.T5)(m,f),v=(0,T.j9)(y,y),M=y[0],p=v-M*M;if(!p)return!w&&d;var S=t*v/p,A=-t*M/p,k=(0,T.T5)(x,y),C=(0,T.T)(x,S),P=(0,T.T)(y,A);(0,T.s0)(C,P);var R=k,O=(0,T.j9)(C,R),X=(0,T.j9)(R,R),D=O*O-X*((0,T.j9)(C,C)-1);if(!(D<0)){var V=(0,a._b)(D),j=(0,T.T)(R,(-O-V)/X);if((0,T.s0)(j,C),j=(0,T.Y1)(j),!w)return j;var B,W=d[0],q=c[0],re=d[1],ee=c[1];q<W&&(B=W,W=q,q=B);var K=q-W,Y=(0,a.Wn)(K-a.pi)<a.Ho;if(!Y&&ee<re&&(B=re,re=ee,ee=B),Y||K<a.Ho?Y?re+ee>0^j[1]<((0,a.Wn)(j[0]-W)<a.Ho?re:ee):re<=j[1]&&j[1]<=ee:K>a.pi^(W<=j[0]&&j[0]<=q)){var $=(0,T.T)(R,(-O+V)/X);return(0,T.s0)($,C),[j,(0,T.Y1)($)]}}}function u(d,c){var w=n?o:a.pi-o,m=0;return d<-w?m|=1:d>w&&(m|=2),c<-w?m|=4:c>w&&(m|=8),m}return(0,g.Z)(s,function(d){var c,w,m,f,x;return{lineStart:function(){f=m=!1,x=1},point:function(y,v){var M,p=[y,v],S=s(y,v),A=n?S?0:u(y,v):S?u(y+(y<0?a.pi:-a.pi),v):0;if(!c&&(f=m=S)&&d.lineStart(),S!==m&&(!(M=l(c,p))||(0,_.Z)(c,M)||(0,_.Z)(p,M))&&(p[2]=1),S!==m)x=0,S?(d.lineStart(),M=l(p,c),d.point(M[0],M[1])):(M=l(c,p),d.point(M[0],M[1],2),d.lineEnd()),c=M;else if(r&&c&&n^S){var k;A&w||!(k=l(p,c,!0))||(x=0,n?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}!S||c&&(0,_.Z)(c,p)||d.point(p[0],p[1]),c=p,m=S,w=A},lineEnd:function(){m&&d.lineEnd(),c=null},clean:function(){return x|(f&&m)<<1}}},function(d,c,w,m){(0,b.m)(m,o,i,w,d,c)},n?[0,-o]:[-a.pi,o-a.pi])}},97023:function(F,L,e){e.d(L,{Z:function(){return h}});var T=e(85272),b=e(46225),a=e(39695),_=e(23071),g=e(33064);function h(i,n,r,s){return function(l){var u,d,c,w=n(l),m=(0,T.Z)(),f=n(m),x=!1,y={point:v,lineStart:p,lineEnd:S,polygonStart:function(){y.point=A,y.lineStart=k,y.lineEnd=C,d=[],u=[]},polygonEnd:function(){y.point=v,y.lineStart=p,y.lineEnd=S,d=(0,g.TS)(d);var P=(0,_.Z)(u,s);d.length?(x||(l.polygonStart(),x=!0),(0,b.Z)(d,t,P,r,l)):P&&(x||(l.polygonStart(),x=!0),l.lineStart(),r(null,null,1,l),l.lineEnd()),x&&(l.polygonEnd(),x=!1),d=u=null},sphere:function(){l.polygonStart(),l.lineStart(),r(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function v(P,R){i(P,R)&&l.point(P,R)}function M(P,R){w.point(P,R)}function p(){y.point=M,w.lineStart()}function S(){y.point=v,w.lineEnd()}function A(P,R){c.push([P,R]),f.point(P,R)}function k(){f.lineStart(),c=[]}function C(){A(c[0][0],c[0][1]),f.lineEnd();var P,R,O,X,D=f.clean(),V=m.result(),j=V.length;if(c.pop(),u.push(c),c=null,j)if(1&D){if((R=(O=V[0]).length-1)>0){for(x||(l.polygonStart(),x=!0),l.lineStart(),P=0;P<R;++P)l.point((X=O[P])[0],X[1]);l.lineEnd()}}else j>1&&2&D&&V.push(V.pop().concat(V.shift())),d.push(V.filter(o))}return y}}function o(i){return i.length>1}function t(i,n){return((i=i.x)[0]<0?i[1]-a.ou-a.Ho:a.ou-i[1])-((n=n.x)[0]<0?n[1]-a.ou-a.Ho:a.ou-n[1])}},87605:function(F,L,e){e.d(L,{Z:function(){return o}});var T=e(39695),b=e(85272),a=e(46225),_=e(33064),g=1e9,h=-g;function o(t,i,n,r){function s(w,m){return t<=w&&w<=n&&i<=m&&m<=r}function l(w,m,f,x){var y=0,v=0;if(w==null||(y=u(w,f))!==(v=u(m,f))||c(w,m)<0^f>0)do x.point(y===0||y===3?t:n,y>1?r:i);while((y=(y+f+4)%4)!==v);else x.point(m[0],m[1])}function u(w,m){return(0,T.Wn)(w[0]-t)<T.Ho?m>0?0:3:(0,T.Wn)(w[0]-n)<T.Ho?m>0?2:1:(0,T.Wn)(w[1]-i)<T.Ho?m>0?1:0:m>0?3:2}function d(w,m){return c(w.x,m.x)}function c(w,m){var f=u(w,1),x=u(m,1);return f!==x?f-x:f===0?m[1]-w[1]:f===1?w[0]-m[0]:f===2?w[1]-m[1]:m[0]-w[0]}return function(w){var m,f,x,y,v,M,p,S,A,k,C,P=w,R=(0,b.Z)(),O={point:X,lineStart:function(){O.point=D,f&&f.push(x=[]),k=!0,A=!1,p=S=NaN},lineEnd:function(){m&&(D(y,v),M&&A&&R.rejoin(),m.push(R.result())),O.point=X,A&&P.lineEnd()},polygonStart:function(){P=R,m=[],f=[],C=!0},polygonEnd:function(){var V=function(){for(var W=0,q=0,re=f.length;q<re;++q)for(var ee,K,Y=f[q],$=1,ne=Y.length,ae=Y[0],se=ae[0],ce=ae[1];$<ne;++$)ee=se,K=ce,se=(ae=Y[$])[0],ce=ae[1],K<=r?ce>r&&(se-ee)*(r-K)>(ce-K)*(t-ee)&&++W:ce<=r&&(se-ee)*(r-K)<(ce-K)*(t-ee)&&--W;return W}(),j=C&&V,B=(m=(0,_.TS)(m)).length;(j||B)&&(w.polygonStart(),j&&(w.lineStart(),l(null,null,1,w),w.lineEnd()),B&&(0,a.Z)(m,d,V,l,w),w.polygonEnd()),P=w,m=f=x=null}};function X(V,j){s(V,j)&&P.point(V,j)}function D(V,j){var B=s(V,j);if(f&&x.push([V,j]),k)y=V,v=j,M=B,k=!1,B&&(P.lineStart(),P.point(V,j));else if(B&&A)P.point(V,j);else{var W=[p=Math.max(h,Math.min(g,p)),S=Math.max(h,Math.min(g,S))],q=[V=Math.max(h,Math.min(g,V)),j=Math.max(h,Math.min(g,j))];(function(re,ee,K,Y,$,ne){var ae,se=re[0],ce=re[1],me=0,ye=1,Te=ee[0]-se,Ce=ee[1]-ce;if(ae=K-se,Te||!(ae>0)){if(ae/=Te,Te<0){if(ae<me)return;ae<ye&&(ye=ae)}else if(Te>0){if(ae>ye)return;ae>me&&(me=ae)}if(ae=$-se,Te||!(ae<0)){if(ae/=Te,Te<0){if(ae>ye)return;ae>me&&(me=ae)}else if(Te>0){if(ae<me)return;ae<ye&&(ye=ae)}if(ae=Y-ce,Ce||!(ae>0)){if(ae/=Ce,Ce<0){if(ae<me)return;ae<ye&&(ye=ae)}else if(Ce>0){if(ae>ye)return;ae>me&&(me=ae)}if(ae=ne-ce,Ce||!(ae<0)){if(ae/=Ce,Ce<0){if(ae>ye)return;ae>me&&(me=ae)}else if(Ce>0){if(ae<me)return;ae<ye&&(ye=ae)}return me>0&&(re[0]=se+me*Te,re[1]=ce+me*Ce),ye<1&&(ee[0]=se+ye*Te,ee[1]=ce+ye*Ce),!0}}}}})(W,q,t,i,n,r)?(A||(P.lineStart(),P.point(W[0],W[1])),P.point(q[0],q[1]),B||P.lineEnd(),C=!1):B&&(P.lineStart(),P.point(V,j),C=!1)}p=V,S=j,A=B}return O}}},46225:function(F,L,e){e.d(L,{Z:function(){return _}});var T=e(67108),b=e(39695);function a(h,o,t,i){this.x=h,this.z=o,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function _(h,o,t,i,n){var r,s,l=[],u=[];if(h.forEach(function(x){if(!((y=x.length-1)<=0)){var y,v,M=x[0],p=x[y];if((0,T.Z)(M,p)){if(!M[2]&&!p[2]){for(n.lineStart(),r=0;r<y;++r)n.point((M=x[r])[0],M[1]);return void n.lineEnd()}p[0]+=2*b.Ho}l.push(v=new a(M,x,null,!0)),u.push(v.o=new a(M,null,v,!1)),l.push(v=new a(p,x,null,!1)),u.push(v.o=new a(p,null,v,!0))}}),l.length){for(u.sort(o),g(l),g(u),r=0,s=u.length;r<s;++r)u[r].e=t=!t;for(var d,c,w=l[0];;){for(var m=w,f=!0;m.v;)if((m=m.n)===w)return;d=m.z,n.lineStart();do{if(m.v=m.o.v=!0,m.e){if(f)for(r=0,s=d.length;r<s;++r)n.point((c=d[r])[0],c[1]);else i(m.x,m.n.x,1,n);m=m.n}else{if(f)for(d=m.p.z,r=d.length-1;r>=0;--r)n.point((c=d[r])[0],c[1]);else i(m.x,m.p.x,-1,n);m=m.p}d=(m=m.o).z,f=!f}while(!m.v);n.lineEnd()}}}function g(h){if(o=h.length){for(var o,t,i=0,n=h[0];++i<o;)n.n=t=h[i],t.p=n,n=t;n.n=t=h[0],t.p=n}}},96059:function(F,L,e){function T(b,a){function _(g,h){return g=b(g,h),a(g[0],g[1])}return b.invert&&a.invert&&(_.invert=function(g,h){return(g=a.invert(g,h))&&b.invert(g[0],g[1])}),_}e.d(L,{Z:function(){return T}})},8593:function(F,L,e){function T(b){return b}e.d(L,{Z:function(){return T}})},27362:function(F,L,e){e.r(L),e.d(L,{geoAlbers:function(){return xt},geoAlbersUsa:function(){return Et},geoArea:function(){return T.ZP},geoAzimuthalEqualArea:function(){return pt.Z},geoAzimuthalEqualAreaRaw:function(){return pt.l},geoAzimuthalEquidistant:function(){return gt.Z},geoAzimuthalEquidistantRaw:function(){return gt.N},geoBounds:function(){return b.Z},geoCentroid:function(){return a.Z},geoCircle:function(){return _.Z},geoClipAntimeridian:function(){return g.Z},geoClipCircle:function(){return h.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return o.Z},geoConicConformal:function(){return Qt},geoConicConformalRaw:function(){return Vt},geoConicEqualArea:function(){return mt},geoConicEqualAreaRaw:function(){return vt},geoConicEquidistant:function(){return wn},geoConicEquidistantRaw:function(){return gn},geoContains:function(){return V},geoDistance:function(){return S},geoEqualEarth:function(){return yn},geoEqualEarthRaw:function(){return vn},geoEquirectangular:function(){return qt.Z},geoEquirectangularRaw:function(){return qt.k},geoGnomonic:function(){return Pn.Z},geoGnomonicRaw:function(){return Pn.M},geoGraticule:function(){return q},geoGraticule10:function(){return re},geoIdentity:function(){return kn},geoInterpolate:function(){return ne.Z},geoLength:function(){return v},geoMercator:function(){return Bt},geoMercatorRaw:function(){return Nt},geoNaturalEarth1:function(){return zn.Z},geoNaturalEarth1Raw:function(){return zn.K},geoOrthographic:function(){return er.Z},geoOrthographicRaw:function(){return er.I},geoPath:function(){return Be},geoProjection:function(){return Qe.Z},geoProjectionMutator:function(){return Qe.r},geoRotation:function(){return Mt.Z},geoStereographic:function(){return ar},geoStereographicRaw:function(){return fr},geoStream:function(){return c.Z},geoTransform:function(){return In.Z},geoTransverseMercator:function(){return br},geoTransverseMercatorRaw:function(){return Jn}});var T=e(97860),b=e(77338),a=e(66624),_=e(7613),g=e(87070),h=e(1457),o=e(87605);function t(){var Gt,ln,mn,_n=0,Ln=0,Yn=960,Nn=500;return mn={stream:function(Bn){return Gt&&ln===Bn?Gt:Gt=(0,o.Z)(_n,Ln,Yn,Nn)(ln=Bn)},extent:function(Bn){return arguments.length?(_n=+Bn[0][0],Ln=+Bn[0][1],Yn=+Bn[1][0],Nn=+Bn[1][1],Gt=ln=null,mn):[[_n,Ln],[Yn,Nn]]}}}var i,n,r,s=e(23071),l=e(33940),u=e(39695),d=e(73182),c=e(72736),w=(0,l.Z)(),m={sphere:d.Z,point:d.Z,lineStart:function(){m.point=x,m.lineEnd=f},lineEnd:d.Z,polygonStart:d.Z,polygonEnd:d.Z};function f(){m.point=m.lineEnd=d.Z}function x(Gt,ln){Gt*=u.uR,ln*=u.uR,i=Gt,n=(0,u.O$)(ln),r=(0,u.mC)(ln),m.point=y}function y(Gt,ln){Gt*=u.uR,ln*=u.uR;var mn=(0,u.O$)(ln),_n=(0,u.mC)(ln),Ln=(0,u.Wn)(Gt-i),Yn=(0,u.mC)(Ln),Nn=_n*(0,u.O$)(Ln),Bn=r*mn-n*_n*Yn,rr=n*mn+r*_n*Yn;w.add((0,u.fv)((0,u._b)(Nn*Nn+Bn*Bn),rr)),i=Gt,n=mn,r=_n}function v(Gt){return w.reset(),(0,c.Z)(Gt,m),+w}var M=[null,null],p={type:"LineString",coordinates:M};function S(Gt,ln){return M[0]=Gt,M[1]=ln,v(p)}var A={Feature:function(Gt,ln){return C(Gt.geometry,ln)},FeatureCollection:function(Gt,ln){for(var mn=Gt.features,_n=-1,Ln=mn.length;++_n<Ln;)if(C(mn[_n].geometry,ln))return!0;return!1}},k={Sphere:function(){return!0},Point:function(Gt,ln){return P(Gt.coordinates,ln)},MultiPoint:function(Gt,ln){for(var mn=Gt.coordinates,_n=-1,Ln=mn.length;++_n<Ln;)if(P(mn[_n],ln))return!0;return!1},LineString:function(Gt,ln){return R(Gt.coordinates,ln)},MultiLineString:function(Gt,ln){for(var mn=Gt.coordinates,_n=-1,Ln=mn.length;++_n<Ln;)if(R(mn[_n],ln))return!0;return!1},Polygon:function(Gt,ln){return O(Gt.coordinates,ln)},MultiPolygon:function(Gt,ln){for(var mn=Gt.coordinates,_n=-1,Ln=mn.length;++_n<Ln;)if(O(mn[_n],ln))return!0;return!1},GeometryCollection:function(Gt,ln){for(var mn=Gt.geometries,_n=-1,Ln=mn.length;++_n<Ln;)if(C(mn[_n],ln))return!0;return!1}};function C(Gt,ln){return!(!Gt||!k.hasOwnProperty(Gt.type))&&k[Gt.type](Gt,ln)}function P(Gt,ln){return S(Gt,ln)===0}function R(Gt,ln){for(var mn,_n,Ln,Yn=0,Nn=Gt.length;Yn<Nn;Yn++){if((_n=S(Gt[Yn],ln))===0||Yn>0&&(Ln=S(Gt[Yn],Gt[Yn-1]))>0&&mn<=Ln&&_n<=Ln&&(mn+_n-Ln)*(1-Math.pow((mn-_n)/Ln,2))<u.aW*Ln)return!0;mn=_n}return!1}function O(Gt,ln){return!!(0,s.Z)(Gt.map(X),D(ln))}function X(Gt){return(Gt=Gt.map(D)).pop(),Gt}function D(Gt){return[Gt[0]*u.uR,Gt[1]*u.uR]}function V(Gt,ln){return(Gt&&A.hasOwnProperty(Gt.type)?A[Gt.type]:C)(Gt,ln)}var j=e(33064);function B(Gt,ln,mn){var _n=(0,j.w6)(Gt,ln-u.Ho,mn).concat(ln);return function(Ln){return _n.map(function(Yn){return[Ln,Yn]})}}function W(Gt,ln,mn){var _n=(0,j.w6)(Gt,ln-u.Ho,mn).concat(ln);return function(Ln){return _n.map(function(Yn){return[Yn,Ln]})}}function q(){var Gt,ln,mn,_n,Ln,Yn,Nn,Bn,rr,Yt,An,Ct,Kt=10,rn=Kt,Tn=90,Mn=360,Cn=2.5;function pn(){return{type:"MultiLineString",coordinates:en()}}function en(){return(0,j.w6)((0,u.mD)(_n/Tn)*Tn,mn,Tn).map(An).concat((0,j.w6)((0,u.mD)(Bn/Mn)*Mn,Nn,Mn).map(Ct)).concat((0,j.w6)((0,u.mD)(ln/Kt)*Kt,Gt,Kt).filter(function(nn){return(0,u.Wn)(nn%Tn)>u.Ho}).map(rr)).concat((0,j.w6)((0,u.mD)(Yn/rn)*rn,Ln,rn).filter(function(nn){return(0,u.Wn)(nn%Mn)>u.Ho}).map(Yt))}return pn.lines=function(){return en().map(function(nn){return{type:"LineString",coordinates:nn}})},pn.outline=function(){return{type:"Polygon",coordinates:[An(_n).concat(Ct(Nn).slice(1),An(mn).reverse().slice(1),Ct(Bn).reverse().slice(1))]}},pn.extent=function(nn){return arguments.length?pn.extentMajor(nn).extentMinor(nn):pn.extentMinor()},pn.extentMajor=function(nn){return arguments.length?(_n=+nn[0][0],mn=+nn[1][0],Bn=+nn[0][1],Nn=+nn[1][1],_n>mn&&(nn=_n,_n=mn,mn=nn),Bn>Nn&&(nn=Bn,Bn=Nn,Nn=nn),pn.precision(Cn)):[[_n,Bn],[mn,Nn]]},pn.extentMinor=function(nn){return arguments.length?(ln=+nn[0][0],Gt=+nn[1][0],Yn=+nn[0][1],Ln=+nn[1][1],ln>Gt&&(nn=ln,ln=Gt,Gt=nn),Yn>Ln&&(nn=Yn,Yn=Ln,Ln=nn),pn.precision(Cn)):[[ln,Yn],[Gt,Ln]]},pn.step=function(nn){return arguments.length?pn.stepMajor(nn).stepMinor(nn):pn.stepMinor()},pn.stepMajor=function(nn){return arguments.length?(Tn=+nn[0],Mn=+nn[1],pn):[Tn,Mn]},pn.stepMinor=function(nn){return arguments.length?(Kt=+nn[0],rn=+nn[1],pn):[Kt,rn]},pn.precision=function(nn){return arguments.length?(Cn=+nn,rr=B(Yn,Ln,90),Yt=W(ln,Gt,Cn),An=B(Bn,Nn,90),Ct=W(_n,mn,Cn),pn):Cn},pn.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function re(){return q()()}var ee,K,Y,$,ne=e(83074),ae=e(8593),se=(0,l.Z)(),ce=(0,l.Z)(),me={point:d.Z,lineStart:d.Z,lineEnd:d.Z,polygonStart:function(){me.lineStart=ye,me.lineEnd=pe},polygonEnd:function(){me.lineStart=me.lineEnd=me.point=d.Z,se.add((0,u.Wn)(ce)),ce.reset()},result:function(){var Gt=se/2;return se.reset(),Gt}};function ye(){me.point=Te}function Te(Gt,ln){me.point=Ce,ee=Y=Gt,K=$=ln}function Ce(Gt,ln){ce.add($*Gt-Y*ln),Y=Gt,$=ln}function pe(){Ce(ee,K)}var fe,Oe,Se,Me,ue=me,le=e(3559),ie=0,ge=0,Ae=0,we=0,Ne=0,He=0,de=0,Le=0,Ee=0,Re={point:je,lineStart:Fe,lineEnd:at,polygonStart:function(){Re.lineStart=lt,Re.lineEnd=ot},polygonEnd:function(){Re.point=je,Re.lineStart=Fe,Re.lineEnd=at},result:function(){var Gt=Ee?[de/Ee,Le/Ee]:He?[we/He,Ne/He]:Ae?[ie/Ae,ge/Ae]:[NaN,NaN];return ie=ge=Ae=we=Ne=He=de=Le=Ee=0,Gt}};function je(Gt,ln){ie+=Gt,ge+=ln,++Ae}function Fe(){Re.point=Xe}function Xe(Gt,ln){Re.point=Ze,je(Se=Gt,Me=ln)}function Ze(Gt,ln){var mn=Gt-Se,_n=ln-Me,Ln=(0,u._b)(mn*mn+_n*_n);we+=Ln*(Se+Gt)/2,Ne+=Ln*(Me+ln)/2,He+=Ln,je(Se=Gt,Me=ln)}function at(){Re.point=je}function lt(){Re.point=bt}function ot(){wt(fe,Oe)}function bt(Gt,ln){Re.point=wt,je(fe=Se=Gt,Oe=Me=ln)}function wt(Gt,ln){var mn=Gt-Se,_n=ln-Me,Ln=(0,u._b)(mn*mn+_n*_n);we+=Ln*(Se+Gt)/2,Ne+=Ln*(Me+ln)/2,He+=Ln,de+=(Ln=Me*Gt-Se*ln)*(Se+Gt),Le+=Ln*(Me+ln),Ee+=3*Ln,je(Se=Gt,Me=ln)}var ht=Re;function ct(Gt){this._context=Gt}ct.prototype={_radius:4.5,pointRadius:function(Gt){return this._radius=Gt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Gt,ln){switch(this._point){case 0:this._context.moveTo(Gt,ln),this._point=1;break;case 1:this._context.lineTo(Gt,ln);break;default:this._context.moveTo(Gt+this._radius,ln),this._context.arc(Gt,ln,this._radius,0,u.BZ)}},result:d.Z};var Tt,Lt,kt,Ot,Pt,et=(0,l.Z)(),nt={point:d.Z,lineStart:function(){nt.point=Ye},lineEnd:function(){Tt&&tt(Lt,kt),nt.point=d.Z},polygonStart:function(){Tt=!0},polygonEnd:function(){Tt=null},result:function(){var Gt=+et;return et.reset(),Gt}};function Ye(Gt,ln){nt.point=tt,Lt=Ot=Gt,kt=Pt=ln}function tt(Gt,ln){Ot-=Gt,Pt-=ln,et.add((0,u._b)(Ot*Ot+Pt*Pt)),Ot=Gt,Pt=ln}var ut=nt;function Ke(){this._string=[]}function De(Gt){return"m0,"+Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+-2*Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+2*Gt+"z"}function Be(Gt,ln){var mn,_n,Ln=4.5;function Yn(Nn){return Nn&&(typeof Ln=="function"&&_n.pointRadius(+Ln.apply(this,arguments)),(0,c.Z)(Nn,mn(_n))),_n.result()}return Yn.area=function(Nn){return(0,c.Z)(Nn,mn(ue)),ue.result()},Yn.measure=function(Nn){return(0,c.Z)(Nn,mn(ut)),ut.result()},Yn.bounds=function(Nn){return(0,c.Z)(Nn,mn(le.Z)),le.Z.result()},Yn.centroid=function(Nn){return(0,c.Z)(Nn,mn(ht)),ht.result()},Yn.projection=function(Nn){return arguments.length?(mn=Nn==null?(Gt=null,ae.Z):(Gt=Nn).stream,Yn):Gt},Yn.context=function(Nn){return arguments.length?(_n=Nn==null?(ln=null,new Ke):new ct(ln=Nn),typeof Ln!="function"&&_n.pointRadius(Ln),Yn):ln},Yn.pointRadius=function(Nn){return arguments.length?(Ln=typeof Nn=="function"?Nn:(_n.pointRadius(+Nn),+Nn),Yn):Ln},Yn.projection(Gt).context(ln)}Ke.prototype={_radius:4.5,_circle:De(4.5),pointRadius:function(Gt){return(Gt=+Gt)!==this._radius&&(this._radius=Gt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Gt,ln){switch(this._point){case 0:this._string.push("M",Gt,",",ln),this._point=1;break;case 1:this._string.push("L",Gt,",",ln);break;default:this._circle==null&&(this._circle=De(this._radius)),this._string.push("M",Gt,",",ln,this._circle)}},result:function(){if(this._string.length){var Gt=this._string.join("");return this._string=[],Gt}return null}};var Qe=e(15002);function rt(Gt){var ln=0,mn=u.pi/3,_n=(0,Qe.r)(Gt),Ln=_n(ln,mn);return Ln.parallels=function(Yn){return arguments.length?_n(ln=Yn[0]*u.uR,mn=Yn[1]*u.uR):[ln*u.RW,mn*u.RW]},Ln}function vt(Gt,ln){var mn=(0,u.O$)(Gt),_n=(mn+(0,u.O$)(ln))/2;if((0,u.Wn)(_n)<u.Ho)return function(Bn){var rr=(0,u.mC)(Bn);function Yt(An,Ct){return[An*rr,(0,u.O$)(Ct)/rr]}return Yt.invert=function(An,Ct){return[An/rr,(0,u.ZR)(Ct*rr)]},Yt}(Gt);var Ln=1+mn*(2*_n-mn),Yn=(0,u._b)(Ln)/_n;function Nn(Bn,rr){var Yt=(0,u._b)(Ln-2*_n*(0,u.O$)(rr))/_n;return[Yt*(0,u.O$)(Bn*=_n),Yn-Yt*(0,u.mC)(Bn)]}return Nn.invert=function(Bn,rr){var Yt=Yn-rr,An=(0,u.fv)(Bn,(0,u.Wn)(Yt))*(0,u.Xx)(Yt);return Yt*_n<0&&(An-=u.pi*(0,u.Xx)(Bn)*(0,u.Xx)(Yt)),[An/_n,(0,u.ZR)((Ln-(Bn*Bn+Yt*Yt)*_n*_n)/(2*_n))]},Nn}function mt(){return rt(vt).scale(155.424).center([0,33.6442])}function xt(){return mt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var dt=e(47589);function Et(){var Gt,ln,mn,_n,Ln,Yn,Nn=xt(),Bn=mt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),rr=mt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Yt={point:function(Kt,rn){Yn=[Kt,rn]}};function An(Kt){var rn=Kt[0],Tn=Kt[1];return Yn=null,mn.point(rn,Tn),Yn||(_n.point(rn,Tn),Yn)||(Ln.point(rn,Tn),Yn)}function Ct(){return Gt=ln=null,An}return An.invert=function(Kt){var rn=Nn.scale(),Tn=Nn.translate(),Mn=(Kt[0]-Tn[0])/rn,Cn=(Kt[1]-Tn[1])/rn;return(Cn>=.12&&Cn<.234&&Mn>=-.425&&Mn<-.214?Bn:Cn>=.166&&Cn<.234&&Mn>=-.214&&Mn<-.115?rr:Nn).invert(Kt)},An.stream=function(Kt){return Gt&&ln===Kt?Gt:(rn=[Nn.stream(ln=Kt),Bn.stream(Kt),rr.stream(Kt)],Tn=rn.length,Gt={point:function(Mn,Cn){for(var pn=-1;++pn<Tn;)rn[pn].point(Mn,Cn)},sphere:function(){for(var Mn=-1;++Mn<Tn;)rn[Mn].sphere()},lineStart:function(){for(var Mn=-1;++Mn<Tn;)rn[Mn].lineStart()},lineEnd:function(){for(var Mn=-1;++Mn<Tn;)rn[Mn].lineEnd()},polygonStart:function(){for(var Mn=-1;++Mn<Tn;)rn[Mn].polygonStart()},polygonEnd:function(){for(var Mn=-1;++Mn<Tn;)rn[Mn].polygonEnd()}});var rn,Tn},An.precision=function(Kt){return arguments.length?(Nn.precision(Kt),Bn.precision(Kt),rr.precision(Kt),Ct()):Nn.precision()},An.scale=function(Kt){return arguments.length?(Nn.scale(Kt),Bn.scale(.35*Kt),rr.scale(Kt),An.translate(Nn.translate())):Nn.scale()},An.translate=function(Kt){if(!arguments.length)return Nn.translate();var rn=Nn.scale(),Tn=+Kt[0],Mn=+Kt[1];return mn=Nn.translate(Kt).clipExtent([[Tn-.455*rn,Mn-.238*rn],[Tn+.455*rn,Mn+.238*rn]]).stream(Yt),_n=Bn.translate([Tn-.307*rn,Mn+.201*rn]).clipExtent([[Tn-.425*rn+u.Ho,Mn+.12*rn+u.Ho],[Tn-.214*rn-u.Ho,Mn+.234*rn-u.Ho]]).stream(Yt),Ln=rr.translate([Tn-.205*rn,Mn+.212*rn]).clipExtent([[Tn-.214*rn+u.Ho,Mn+.166*rn+u.Ho],[Tn-.115*rn-u.Ho,Mn+.234*rn-u.Ho]]).stream(Yt),Ct()},An.fitExtent=function(Kt,rn){return(0,dt.qg)(An,Kt,rn)},An.fitSize=function(Kt,rn){return(0,dt.mF)(An,Kt,rn)},An.fitWidth=function(Kt,rn){return(0,dt.V6)(An,Kt,rn)},An.fitHeight=function(Kt,rn){return(0,dt.rf)(An,Kt,rn)},An.scale(1070)}var pt=e(12956),gt=e(17889),Mt=e(49386);function Nt(Gt,ln){return[Gt,(0,u.cM)((0,u.OR)((u.ou+ln)/2))]}function Bt(){return Ut(Nt).scale(961/u.BZ)}function Ut(Gt){var ln,mn,_n,Ln=(0,Qe.Z)(Gt),Yn=Ln.center,Nn=Ln.scale,Bn=Ln.translate,rr=Ln.clipExtent,Yt=null;function An(){var Ct=u.pi*Nn(),Kt=Ln((0,Mt.Z)(Ln.rotate()).invert([0,0]));return rr(Yt==null?[[Kt[0]-Ct,Kt[1]-Ct],[Kt[0]+Ct,Kt[1]+Ct]]:Gt===Nt?[[Math.max(Kt[0]-Ct,Yt),ln],[Math.min(Kt[0]+Ct,mn),_n]]:[[Yt,Math.max(Kt[1]-Ct,ln)],[mn,Math.min(Kt[1]+Ct,_n)]])}return Ln.scale=function(Ct){return arguments.length?(Nn(Ct),An()):Nn()},Ln.translate=function(Ct){return arguments.length?(Bn(Ct),An()):Bn()},Ln.center=function(Ct){return arguments.length?(Yn(Ct),An()):Yn()},Ln.clipExtent=function(Ct){return arguments.length?(Ct==null?Yt=ln=mn=_n=null:(Yt=+Ct[0][0],ln=+Ct[0][1],mn=+Ct[1][0],_n=+Ct[1][1]),An()):Yt==null?null:[[Yt,ln],[mn,_n]]},An()}function Jt(Gt){return(0,u.OR)((u.ou+Gt)/2)}function Vt(Gt,ln){var mn=(0,u.mC)(Gt),_n=Gt===ln?(0,u.O$)(Gt):(0,u.cM)(mn/(0,u.mC)(ln))/(0,u.cM)(Jt(ln)/Jt(Gt)),Ln=mn*(0,u.sQ)(Jt(Gt),_n)/_n;if(!_n)return Nt;function Yn(Nn,Bn){Ln>0?Bn<-u.ou+u.Ho&&(Bn=-u.ou+u.Ho):Bn>u.ou-u.Ho&&(Bn=u.ou-u.Ho);var rr=Ln/(0,u.sQ)(Jt(Bn),_n);return[rr*(0,u.O$)(_n*Nn),Ln-rr*(0,u.mC)(_n*Nn)]}return Yn.invert=function(Nn,Bn){var rr=Ln-Bn,Yt=(0,u.Xx)(_n)*(0,u._b)(Nn*Nn+rr*rr),An=(0,u.fv)(Nn,(0,u.Wn)(rr))*(0,u.Xx)(rr);return rr*_n<0&&(An-=u.pi*(0,u.Xx)(Nn)*(0,u.Xx)(rr)),[An/_n,2*(0,u.z4)((0,u.sQ)(Ln/Yt,1/_n))-u.ou]},Yn}function Qt(){return rt(Vt).scale(109.5).parallels([30,30])}Nt.invert=function(Gt,ln){return[Gt,2*(0,u.z4)((0,u.Qq)(ln))-u.ou]};var qt=e(97492);function gn(Gt,ln){var mn=(0,u.mC)(Gt),_n=Gt===ln?(0,u.O$)(Gt):(mn-(0,u.mC)(ln))/(ln-Gt),Ln=mn/_n+Gt;if((0,u.Wn)(_n)<u.Ho)return qt.k;function Yn(Nn,Bn){var rr=Ln-Bn,Yt=_n*Nn;return[rr*(0,u.O$)(Yt),Ln-rr*(0,u.mC)(Yt)]}return Yn.invert=function(Nn,Bn){var rr=Ln-Bn,Yt=(0,u.fv)(Nn,(0,u.Wn)(rr))*(0,u.Xx)(rr);return rr*_n<0&&(Yt-=u.pi*(0,u.Xx)(Nn)*(0,u.Xx)(rr)),[Yt/_n,Ln-(0,u.Xx)(_n)*(0,u._b)(Nn*Nn+rr*rr)]},Yn}function wn(){return rt(gn).scale(131.154).center([0,13.9389])}var hn=1.340264,Xt=-.081106,an=893e-6,tn=.003796,cn=(0,u._b)(3)/2;function vn(Gt,ln){var mn=(0,u.ZR)(cn*(0,u.O$)(ln)),_n=mn*mn,Ln=_n*_n*_n;return[Gt*(0,u.mC)(mn)/(cn*(hn+3*Xt*_n+Ln*(7*an+9*tn*_n))),mn*(hn+Xt*_n+Ln*(an+tn*_n))]}function yn(){return(0,Qe.Z)(vn).scale(177.158)}vn.invert=function(Gt,ln){for(var mn,_n=ln,Ln=_n*_n,Yn=Ln*Ln*Ln,Nn=0;Nn<12&&(Yn=(Ln=(_n-=mn=(_n*(hn+Xt*Ln+Yn*(an+tn*Ln))-ln)/(hn+3*Xt*Ln+Yn*(7*an+9*tn*Ln)))*_n)*Ln*Ln,!((0,u.Wn)(mn)<u.aW));++Nn);return[cn*Gt*(hn+3*Xt*Ln+Yn*(7*an+9*tn*Ln))/(0,u.mC)(_n),(0,u.ZR)((0,u.O$)(_n)/cn)]};var Pn=e(98936),In=e(64684);function kn(){var Gt,ln,mn,_n,Ln,Yn,Nn,Bn=1,rr=0,Yt=0,An=1,Ct=1,Kt=0,rn=null,Tn=1,Mn=1,Cn=(0,In.l)({point:function(fn,dn){var Rn=nn([fn,dn]);this.stream.point(Rn[0],Rn[1])}}),pn=ae.Z;function en(){return Tn=Bn*An,Mn=Bn*Ct,Yn=Nn=null,nn}function nn(fn){var dn=fn[0]*Tn,Rn=fn[1]*Mn;if(Kt){var On=Rn*Gt-dn*ln;dn=dn*Gt+Rn*ln,Rn=On}return[dn+rr,Rn+Yt]}return nn.invert=function(fn){var dn=fn[0]-rr,Rn=fn[1]-Yt;if(Kt){var On=Rn*Gt+dn*ln;dn=dn*Gt-Rn*ln,Rn=On}return[dn/Tn,Rn/Mn]},nn.stream=function(fn){return Yn&&Nn===fn?Yn:Yn=Cn(pn(Nn=fn))},nn.postclip=function(fn){return arguments.length?(pn=fn,rn=mn=_n=Ln=null,en()):pn},nn.clipExtent=function(fn){return arguments.length?(pn=fn==null?(rn=mn=_n=Ln=null,ae.Z):(0,o.Z)(rn=+fn[0][0],mn=+fn[0][1],_n=+fn[1][0],Ln=+fn[1][1]),en()):rn==null?null:[[rn,mn],[_n,Ln]]},nn.scale=function(fn){return arguments.length?(Bn=+fn,en()):Bn},nn.translate=function(fn){return arguments.length?(rr=+fn[0],Yt=+fn[1],en()):[rr,Yt]},nn.angle=function(fn){return arguments.length?(Kt=fn%360*u.uR,ln=(0,u.O$)(Kt),Gt=(0,u.mC)(Kt),en()):Kt*u.RW},nn.reflectX=function(fn){return arguments.length?(An=fn?-1:1,en()):An<0},nn.reflectY=function(fn){return arguments.length?(Ct=fn?-1:1,en()):Ct<0},nn.fitExtent=function(fn,dn){return(0,dt.qg)(nn,fn,dn)},nn.fitSize=function(fn,dn){return(0,dt.mF)(nn,fn,dn)},nn.fitWidth=function(fn,dn){return(0,dt.V6)(nn,fn,dn)},nn.fitHeight=function(fn,dn){return(0,dt.rf)(nn,fn,dn)},nn}var zn=e(26867),er=e(57962),ir=e(25382);function fr(Gt,ln){var mn=(0,u.mC)(ln),_n=1+(0,u.mC)(Gt)*mn;return[mn*(0,u.O$)(Gt)/_n,(0,u.O$)(ln)/_n]}function ar(){return(0,Qe.Z)(fr).scale(250).clipAngle(142)}function Jn(Gt,ln){return[(0,u.cM)((0,u.OR)((u.ou+ln)/2)),-Gt]}function br(){var Gt=Ut(Jn),ln=Gt.center,mn=Gt.rotate;return Gt.center=function(_n){return arguments.length?ln([-_n[1],_n[0]]):[(_n=ln())[1],-_n[0]]},Gt.rotate=function(_n){return arguments.length?mn([_n[0],_n[1],_n.length>2?_n[2]+90:90]):[(_n=mn())[0],_n[1],_n[2]-90]},mn([0,0,90]).scale(159.155)}fr.invert=(0,ir.O)(function(Gt){return 2*(0,u.z4)(Gt)}),Jn.invert=function(Gt,ln){return[-ln,2*(0,u.z4)((0,u.Qq)(Gt))-u.ou]}},83074:function(F,L,e){e.d(L,{Z:function(){return b}});var T=e(39695);function b(a,_){var g=a[0]*T.uR,h=a[1]*T.uR,o=_[0]*T.uR,t=_[1]*T.uR,i=(0,T.mC)(h),n=(0,T.O$)(h),r=(0,T.mC)(t),s=(0,T.O$)(t),l=i*(0,T.mC)(g),u=i*(0,T.O$)(g),d=r*(0,T.mC)(o),c=r*(0,T.O$)(o),w=2*(0,T.ZR)((0,T._b)((0,T.Jy)(t-h)+i*r*(0,T.Jy)(o-g))),m=(0,T.O$)(w),f=w?function(x){var y=(0,T.O$)(x*=w)/m,v=(0,T.O$)(w-x)/m,M=v*l+y*d,p=v*u+y*c,S=v*n+y*s;return[(0,T.fv)(p,M)*T.RW,(0,T.fv)(S,(0,T._b)(M*M+p*p))*T.RW]}:function(){return[g*T.RW,h*T.RW]};return f.distance=w,f}},39695:function(F,L,e){e.d(L,{BZ:function(){return h},Ho:function(){return T},Jy:function(){return M},Kh:function(){return y},O$:function(){return w},OR:function(){return x},Qq:function(){return u},RW:function(){return o},Wn:function(){return i},Xx:function(){return m},ZR:function(){return v},_b:function(){return f},aW:function(){return b},cM:function(){return d},fv:function(){return r},mC:function(){return s},mD:function(){return l},ou:function(){return _},pi:function(){return a},pu:function(){return g},sQ:function(){return c},uR:function(){return t},z4:function(){return n}});var T=1e-6,b=1e-12,a=Math.PI,_=a/2,g=a/4,h=2*a,o=180/a,t=a/180,i=Math.abs,n=Math.atan,r=Math.atan2,s=Math.cos,l=Math.ceil,u=Math.exp,d=Math.log,c=Math.pow,w=Math.sin,m=Math.sign||function(p){return p>0?1:p<0?-1:0},f=Math.sqrt,x=Math.tan;function y(p){return p>1?0:p<-1?a:Math.acos(p)}function v(p){return p>1?_:p<-1?-_:Math.asin(p)}function M(p){return(p=w(p/2))*p}},73182:function(F,L,e){function T(){}e.d(L,{Z:function(){return T}})},3559:function(F,L,e){var T=e(73182),b=1/0,a=b,_=-b,g=_,h={point:function(o,t){o<b&&(b=o),o>_&&(_=o),t<a&&(a=t),t>g&&(g=t)},lineStart:T.Z,lineEnd:T.Z,polygonStart:T.Z,polygonEnd:T.Z,result:function(){var o=[[b,a],[_,g]];return _=g=-(a=b=1/0),o}};L.Z=h},67108:function(F,L,e){e.d(L,{Z:function(){return b}});var T=e(39695);function b(a,_){return(0,T.Wn)(a[0]-_[0])<T.Ho&&(0,T.Wn)(a[1]-_[1])<T.Ho}},23071:function(F,L,e){e.d(L,{Z:function(){return h}});var T=e(33940),b=e(7620),a=e(39695),_=(0,T.Z)();function g(o){return(0,a.Wn)(o[0])<=a.pi?o[0]:(0,a.Xx)(o[0])*(((0,a.Wn)(o[0])+a.pi)%a.BZ-a.pi)}function h(o,t){var i=g(t),n=t[1],r=(0,a.O$)(n),s=[(0,a.O$)(i),-(0,a.mC)(i),0],l=0,u=0;_.reset(),r===1?n=a.ou+a.Ho:r===-1&&(n=-a.ou-a.Ho);for(var d=0,c=o.length;d<c;++d)if(m=(w=o[d]).length)for(var w,m,f=w[m-1],x=g(f),y=f[1]/2+a.pu,v=(0,a.O$)(y),M=(0,a.mC)(y),p=0;p<m;++p,x=A,v=C,M=P,f=S){var S=w[p],A=g(S),k=S[1]/2+a.pu,C=(0,a.O$)(k),P=(0,a.mC)(k),R=A-x,O=R>=0?1:-1,X=O*R,D=X>a.pi,V=v*C;if(_.add((0,a.fv)(V*O*(0,a.O$)(X),M*P+V*(0,a.mC)(X))),l+=D?R+O*a.BZ:R,D^x>=i^A>=i){var j=(0,b.T5)((0,b.Og)(f),(0,b.Og)(S));(0,b.iJ)(j);var B=(0,b.T5)(s,j);(0,b.iJ)(B);var W=(D^R>=0?-1:1)*(0,a.ZR)(B[2]);(n>W||n===W&&(j[0]||j[1]))&&(u+=D^R>=0?1:-1)}}return(l<-a.Ho||l<a.Ho&&_<-a.Ho)^1&u}},25382:function(F,L,e){e.d(L,{O:function(){return a},W:function(){return b}});var T=e(39695);function b(_){return function(g,h){var o=(0,T.mC)(g),t=(0,T.mC)(h),i=_(o*t);return[i*t*(0,T.O$)(g),i*(0,T.O$)(h)]}}function a(_){return function(g,h){var o=(0,T._b)(g*g+h*h),t=_(o),i=(0,T.O$)(t),n=(0,T.mC)(t);return[(0,T.fv)(g*i,o*n),(0,T.ZR)(o&&h*i/o)]}}},12956:function(F,L,e){e.d(L,{Z:function(){return g},l:function(){return _}});var T=e(39695),b=e(25382),a=e(15002),_=(0,b.W)(function(h){return(0,T._b)(2/(1+h))});function g(){return(0,a.Z)(_).scale(124.75).clipAngle(179.999)}_.invert=(0,b.O)(function(h){return 2*(0,T.ZR)(h/2)})},17889:function(F,L,e){e.d(L,{N:function(){return _},Z:function(){return g}});var T=e(39695),b=e(25382),a=e(15002),_=(0,b.W)(function(h){return(h=(0,T.Kh)(h))&&h/(0,T.O$)(h)});function g(){return(0,a.Z)(_).scale(79.4188).clipAngle(179.999)}_.invert=(0,b.O)(function(h){return h})},97492:function(F,L,e){e.d(L,{Z:function(){return a},k:function(){return b}});var T=e(15002);function b(_,g){return[_,g]}function a(){return(0,T.Z)(b).scale(152.63)}b.invert=b},47589:function(F,L,e){e.d(L,{V6:function(){return h},mF:function(){return g},qg:function(){return _},rf:function(){return o}});var T=e(72736),b=e(3559);function a(t,i,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,T.Z)(n,t.stream(b.Z)),i(b.Z.result()),r!=null&&t.clipExtent(r),t}function _(t,i,n){return a(t,function(r){var s=i[1][0]-i[0][0],l=i[1][1]-i[0][1],u=Math.min(s/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),d=+i[0][0]+(s-u*(r[1][0]+r[0][0]))/2,c=+i[0][1]+(l-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([d,c])},n)}function g(t,i,n){return _(t,[[0,0],i],n)}function h(t,i,n){return a(t,function(r){var s=+i,l=s/(r[1][0]-r[0][0]),u=(s-l*(r[1][0]+r[0][0]))/2,d=-l*r[0][1];t.scale(150*l).translate([u,d])},n)}function o(t,i,n){return a(t,function(r){var s=+i,l=s/(r[1][1]-r[0][1]),u=-l*r[0][0],d=(s-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,d])},n)}},98936:function(F,L,e){e.d(L,{M:function(){return _},Z:function(){return g}});var T=e(39695),b=e(25382),a=e(15002);function _(h,o){var t=(0,T.mC)(o),i=(0,T.mC)(h)*t;return[t*(0,T.O$)(h)/i,(0,T.O$)(o)/i]}function g(){return(0,a.Z)(_).scale(144.049).clipAngle(60)}_.invert=(0,b.O)(T.z4)},15002:function(F,L,e){e.d(L,{Z:function(){return w},r:function(){return m}});var T=e(87070),b=e(1457),a=e(87605),_=e(96059),g=e(8593),h=e(39695),o=e(49386),t=e(64684),i=e(47589),n=e(7620),r=16,s=(0,h.mC)(30*h.uR);function l(f,x){return+x?function(y,v){function M(p,S,A,k,C,P,R,O,X,D,V,j,B,W){var q=R-p,re=O-S,ee=q*q+re*re;if(ee>4*v&&B--){var K=k+D,Y=C+V,$=P+j,ne=(0,h._b)(K*K+Y*Y+$*$),ae=(0,h.ZR)($/=ne),se=(0,h.Wn)((0,h.Wn)($)-1)<h.Ho||(0,h.Wn)(A-X)<h.Ho?(A+X)/2:(0,h.fv)(Y,K),ce=y(se,ae),me=ce[0],ye=ce[1],Te=me-p,Ce=ye-S,pe=re*Te-q*Ce;(pe*pe/ee>v||(0,h.Wn)((q*Te+re*Ce)/ee-.5)>.3||k*D+C*V+P*j<s)&&(M(p,S,A,k,C,P,me,ye,se,K/=ne,Y/=ne,$,B,W),W.point(me,ye),M(me,ye,se,K,Y,$,R,O,X,D,V,j,B,W))}}return function(p){var S,A,k,C,P,R,O,X,D,V,j,B,W={point:q,lineStart:re,lineEnd:K,polygonStart:function(){p.polygonStart(),W.lineStart=Y},polygonEnd:function(){p.polygonEnd(),W.lineStart=re}};function q(ae,se){ae=y(ae,se),p.point(ae[0],ae[1])}function re(){X=NaN,W.point=ee,p.lineStart()}function ee(ae,se){var ce=(0,n.Og)([ae,se]),me=y(ae,se);M(X,D,O,V,j,B,X=me[0],D=me[1],O=ae,V=ce[0],j=ce[1],B=ce[2],r,p),p.point(X,D)}function K(){W.point=q,p.lineEnd()}function Y(){re(),W.point=$,W.lineEnd=ne}function $(ae,se){ee(S=ae,se),A=X,k=D,C=V,P=j,R=B,W.point=ee}function ne(){M(X,D,O,V,j,B,A,k,S,C,P,R,r,p),W.lineEnd=K,K()}return W}}(f,x):function(y){return(0,t.l)({point:function(v,M){v=y(v,M),this.stream.point(v[0],v[1])}})}(f)}var u=(0,t.l)({point:function(f,x){this.stream.point(f*h.uR,x*h.uR)}});function d(f,x,y,v,M){function p(S,A){return[x+f*(S*=v),y-f*(A*=M)]}return p.invert=function(S,A){return[(S-x)/f*v,(y-A)/f*M]},p}function c(f,x,y,v,M,p){var S=(0,h.mC)(p),A=(0,h.O$)(p),k=S*f,C=A*f,P=S/f,R=A/f,O=(A*y-S*x)/f,X=(A*x+S*y)/f;function D(V,j){return[k*(V*=v)-C*(j*=M)+x,y-C*V-k*j]}return D.invert=function(V,j){return[v*(P*V-R*j+O),M*(X-R*V-P*j)]},D}function w(f){return m(function(){return f})()}function m(f){var x,y,v,M,p,S,A,k,C,P,R=150,O=480,X=250,D=0,V=0,j=0,B=0,W=0,q=0,re=1,ee=1,K=null,Y=T.Z,$=null,ne=g.Z,ae=.5;function se(Te){return k(Te[0]*h.uR,Te[1]*h.uR)}function ce(Te){return(Te=k.invert(Te[0],Te[1]))&&[Te[0]*h.RW,Te[1]*h.RW]}function me(){var Te=c(R,0,0,re,ee,q).apply(null,x(D,V)),Ce=(q?c:d)(R,O-Te[0],X-Te[1],re,ee,q);return y=(0,o.I)(j,B,W),A=(0,_.Z)(x,Ce),k=(0,_.Z)(y,A),S=l(A,ae),ye()}function ye(){return C=P=null,se}return se.stream=function(Te){return C&&P===Te?C:C=u(function(Ce){return(0,t.l)({point:function(pe,fe){var Oe=Ce(pe,fe);return this.stream.point(Oe[0],Oe[1])}})}(y)(Y(S(ne(P=Te)))))},se.preclip=function(Te){return arguments.length?(Y=Te,K=void 0,ye()):Y},se.postclip=function(Te){return arguments.length?(ne=Te,$=v=M=p=null,ye()):ne},se.clipAngle=function(Te){return arguments.length?(Y=+Te?(0,b.Z)(K=Te*h.uR):(K=null,T.Z),ye()):K*h.RW},se.clipExtent=function(Te){return arguments.length?(ne=Te==null?($=v=M=p=null,g.Z):(0,a.Z)($=+Te[0][0],v=+Te[0][1],M=+Te[1][0],p=+Te[1][1]),ye()):$==null?null:[[$,v],[M,p]]},se.scale=function(Te){return arguments.length?(R=+Te,me()):R},se.translate=function(Te){return arguments.length?(O=+Te[0],X=+Te[1],me()):[O,X]},se.center=function(Te){return arguments.length?(D=Te[0]%360*h.uR,V=Te[1]%360*h.uR,me()):[D*h.RW,V*h.RW]},se.rotate=function(Te){return arguments.length?(j=Te[0]%360*h.uR,B=Te[1]%360*h.uR,W=Te.length>2?Te[2]%360*h.uR:0,me()):[j*h.RW,B*h.RW,W*h.RW]},se.angle=function(Te){return arguments.length?(q=Te%360*h.uR,me()):q*h.RW},se.reflectX=function(Te){return arguments.length?(re=Te?-1:1,me()):re<0},se.reflectY=function(Te){return arguments.length?(ee=Te?-1:1,me()):ee<0},se.precision=function(Te){return arguments.length?(S=l(A,ae=Te*Te),ye()):(0,h._b)(ae)},se.fitExtent=function(Te,Ce){return(0,i.qg)(se,Te,Ce)},se.fitSize=function(Te,Ce){return(0,i.mF)(se,Te,Ce)},se.fitWidth=function(Te,Ce){return(0,i.V6)(se,Te,Ce)},se.fitHeight=function(Te,Ce){return(0,i.rf)(se,Te,Ce)},function(){return x=f.apply(this,arguments),se.invert=x.invert&&ce,me()}}},26867:function(F,L,e){e.d(L,{K:function(){return a},Z:function(){return _}});var T=e(15002),b=e(39695);function a(g,h){var o=h*h,t=o*o;return[g*(.8707-.131979*o+t*(t*(.003971*o-.001529*t)-.013791)),h*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))]}function _(){return(0,T.Z)(a).scale(175.295)}a.invert=function(g,h){var o,t=h,i=25;do{var n=t*t,r=n*n;t-=o=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-h)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,b.Wn)(o)>b.Ho&&--i>0);return[g/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},57962:function(F,L,e){e.d(L,{I:function(){return _},Z:function(){return g}});var T=e(39695),b=e(25382),a=e(15002);function _(h,o){return[(0,T.mC)(o)*(0,T.O$)(h),(0,T.O$)(o)]}function g(){return(0,a.Z)(_).scale(249.5).clipAngle(90+T.Ho)}_.invert=(0,b.O)(T.ZR)},49386:function(F,L,e){e.d(L,{I:function(){return _},Z:function(){return t}});var T=e(96059),b=e(39695);function a(i,n){return[(0,b.Wn)(i)>b.pi?i+Math.round(-i/b.BZ)*b.BZ:i,n]}function _(i,n,r){return(i%=b.BZ)?n||r?(0,T.Z)(h(i),o(n,r)):h(i):n||r?o(n,r):a}function g(i){return function(n,r){return[(n+=i)>b.pi?n-b.BZ:n<-b.pi?n+b.BZ:n,r]}}function h(i){var n=g(i);return n.invert=g(-i),n}function o(i,n){var r=(0,b.mC)(i),s=(0,b.O$)(i),l=(0,b.mC)(n),u=(0,b.O$)(n);function d(c,w){var m=(0,b.mC)(w),f=(0,b.mC)(c)*m,x=(0,b.O$)(c)*m,y=(0,b.O$)(w),v=y*r+f*s;return[(0,b.fv)(x*l-v*u,f*r-y*s),(0,b.ZR)(v*l+x*u)]}return d.invert=function(c,w){var m=(0,b.mC)(w),f=(0,b.mC)(c)*m,x=(0,b.O$)(c)*m,y=(0,b.O$)(w),v=y*l-x*u;return[(0,b.fv)(x*l+y*u,f*r+v*s),(0,b.ZR)(v*r-f*s)]},d}function t(i){function n(r){return(r=i(r[0]*b.uR,r[1]*b.uR))[0]*=b.RW,r[1]*=b.RW,r}return i=_(i[0]*b.uR,i[1]*b.uR,i.length>2?i[2]*b.uR:0),n.invert=function(r){return(r=i.invert(r[0]*b.uR,r[1]*b.uR))[0]*=b.RW,r[1]*=b.RW,r},n}a.invert=a},72736:function(F,L,e){function T(o,t){o&&a.hasOwnProperty(o.type)&&a[o.type](o,t)}e.d(L,{Z:function(){return h}});var b={Feature:function(o,t){T(o.geometry,t)},FeatureCollection:function(o,t){for(var i=o.features,n=-1,r=i.length;++n<r;)T(i[n].geometry,t)}},a={Sphere:function(o,t){t.sphere()},Point:function(o,t){o=o.coordinates,t.point(o[0],o[1],o[2])},MultiPoint:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)o=i[n],t.point(o[0],o[1],o[2])},LineString:function(o,t){_(o.coordinates,t,0)},MultiLineString:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)_(i[n],t,0)},Polygon:function(o,t){g(o.coordinates,t)},MultiPolygon:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)g(i[n],t)},GeometryCollection:function(o,t){for(var i=o.geometries,n=-1,r=i.length;++n<r;)T(i[n],t)}};function _(o,t,i){var n,r=-1,s=o.length-i;for(t.lineStart();++r<s;)n=o[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function g(o,t){var i=-1,n=o.length;for(t.polygonStart();++i<n;)_(o[i],t,1);t.polygonEnd()}function h(o,t){o&&b.hasOwnProperty(o.type)?b[o.type](o,t):T(o,t)}},64684:function(F,L,e){function T(_){return{stream:b(_)}}function b(_){return function(g){var h=new a;for(var o in _)h[o]=_[o];return h.stream=g,h}}function a(){}e.d(L,{Z:function(){return T},l:function(){return b}}),a.prototype={constructor:a,point:function(_,g){this.stream.point(_,g)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(F,L,e){function T(le,ie){return le.parent===ie.parent?1:2}function b(le,ie){return le+ie.x}function a(le,ie){return Math.max(le,ie.y)}function _(){var le=T,ie=1,ge=1,Ae=!1;function we(Ne){var He,de=0;Ne.eachAfter(function(Fe){var Xe=Fe.children;Xe?(Fe.x=function(Ze){return Ze.reduce(b,0)/Ze.length}(Xe),Fe.y=function(Ze){return 1+Ze.reduce(a,0)}(Xe)):(Fe.x=He?de+=le(Fe,He):0,Fe.y=0,He=Fe)});var Le=function(Fe){for(var Xe;Xe=Fe.children;)Fe=Xe[0];return Fe}(Ne),Ee=function(Fe){for(var Xe;Xe=Fe.children;)Fe=Xe[Xe.length-1];return Fe}(Ne),Re=Le.x-le(Le,Ee)/2,je=Ee.x+le(Ee,Le)/2;return Ne.eachAfter(Ae?function(Fe){Fe.x=(Fe.x-Ne.x)*ie,Fe.y=(Ne.y-Fe.y)*ge}:function(Fe){Fe.x=(Fe.x-Re)/(je-Re)*ie,Fe.y=(1-(Ne.y?Fe.y/Ne.y:1))*ge})}return we.separation=function(Ne){return arguments.length?(le=Ne,we):le},we.size=function(Ne){return arguments.length?(Ae=!1,ie=+Ne[0],ge=+Ne[1],we):Ae?null:[ie,ge]},we.nodeSize=function(Ne){return arguments.length?(Ae=!0,ie=+Ne[0],ge=+Ne[1],we):Ae?[ie,ge]:null},we}function g(le){var ie=0,ge=le.children,Ae=ge&&ge.length;if(Ae)for(;--Ae>=0;)ie+=ge[Ae].value;else ie=1;le.value=ie}function h(le,ie){var ge,Ae,we,Ne,He,de=new n(le),Le=+le.value&&(de.value=le.value),Ee=[de];for(ie==null&&(ie=o);ge=Ee.pop();)if(Le&&(ge.value=+ge.data.value),(we=ie(ge.data))&&(He=we.length))for(ge.children=new Array(He),Ne=He-1;Ne>=0;--Ne)Ee.push(Ae=ge.children[Ne]=new n(we[Ne])),Ae.parent=ge,Ae.depth=ge.depth+1;return de.eachBefore(i)}function o(le){return le.children}function t(le){le.data=le.data.data}function i(le){var ie=0;do le.height=ie;while((le=le.parent)&&le.height<++ie)}function n(le){this.data=le,this.depth=this.height=0,this.parent=null}e.r(L),e.d(L,{cluster:function(){return _},hierarchy:function(){return h},pack:function(){return R},packEnclose:function(){return s},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return Y},tree:function(){return ye},treemap:function(){return Oe},treemapBinary:function(){return Se},treemapDice:function(){return j},treemapResquarify:function(){return ue},treemapSlice:function(){return Te},treemapSliceDice:function(){return Me},treemapSquarify:function(){return fe}}),n.prototype=h.prototype={constructor:n,count:function(){return this.eachAfter(g)},each:function(le){var ie,ge,Ae,we,Ne=this,He=[Ne];do for(ie=He.reverse(),He=[];Ne=ie.pop();)if(le(Ne),ge=Ne.children)for(Ae=0,we=ge.length;Ae<we;++Ae)He.push(ge[Ae]);while(He.length);return this},eachAfter:function(le){for(var ie,ge,Ae,we=this,Ne=[we],He=[];we=Ne.pop();)if(He.push(we),ie=we.children)for(ge=0,Ae=ie.length;ge<Ae;++ge)Ne.push(ie[ge]);for(;we=He.pop();)le(we);return this},eachBefore:function(le){for(var ie,ge,Ae=this,we=[Ae];Ae=we.pop();)if(le(Ae),ie=Ae.children)for(ge=ie.length-1;ge>=0;--ge)we.push(ie[ge]);return this},sum:function(le){return this.eachAfter(function(ie){for(var ge=+le(ie.data)||0,Ae=ie.children,we=Ae&&Ae.length;--we>=0;)ge+=Ae[we].value;ie.value=ge})},sort:function(le){return this.eachBefore(function(ie){ie.children&&ie.children.sort(le)})},path:function(le){for(var ie=this,ge=function(Ne,He){if(Ne===He)return Ne;var de=Ne.ancestors(),Le=He.ancestors(),Ee=null;for(Ne=de.pop(),He=Le.pop();Ne===He;)Ee=Ne,Ne=de.pop(),He=Le.pop();return Ee}(ie,le),Ae=[ie];ie!==ge;)ie=ie.parent,Ae.push(ie);for(var we=Ae.length;le!==ge;)Ae.splice(we,0,le),le=le.parent;return Ae},ancestors:function(){for(var le=this,ie=[le];le=le.parent;)ie.push(le);return ie},descendants:function(){var le=[];return this.each(function(ie){le.push(ie)}),le},leaves:function(){var le=[];return this.eachBefore(function(ie){ie.children||le.push(ie)}),le},links:function(){var le=this,ie=[];return le.each(function(ge){ge!==le&&ie.push({source:ge.parent,target:ge})}),ie},copy:function(){return h(this).eachBefore(t)}};var r=Array.prototype.slice;function s(le){for(var ie,ge,Ae=0,we=(le=function(He){for(var de,Le,Ee=He.length;Ee;)Le=Math.random()*Ee--|0,de=He[Ee],He[Ee]=He[Le],He[Le]=de;return He}(r.call(le))).length,Ne=[];Ae<we;)ie=le[Ae],ge&&d(ge,ie)?++Ae:(ge=w(Ne=l(Ne,ie)),Ae=0);return ge}function l(le,ie){var ge,Ae;if(c(ie,le))return[ie];for(ge=0;ge<le.length;++ge)if(u(ie,le[ge])&&c(m(le[ge],ie),le))return[le[ge],ie];for(ge=0;ge<le.length-1;++ge)for(Ae=ge+1;Ae<le.length;++Ae)if(u(m(le[ge],le[Ae]),ie)&&u(m(le[ge],ie),le[Ae])&&u(m(le[Ae],ie),le[ge])&&c(f(le[ge],le[Ae],ie),le))return[le[ge],le[Ae],ie];throw new Error}function u(le,ie){var ge=le.r-ie.r,Ae=ie.x-le.x,we=ie.y-le.y;return ge<0||ge*ge<Ae*Ae+we*we}function d(le,ie){var ge=le.r-ie.r+1e-6,Ae=ie.x-le.x,we=ie.y-le.y;return ge>0&&ge*ge>Ae*Ae+we*we}function c(le,ie){for(var ge=0;ge<ie.length;++ge)if(!d(le,ie[ge]))return!1;return!0}function w(le){switch(le.length){case 1:return{x:(ie=le[0]).x,y:ie.y,r:ie.r};case 2:return m(le[0],le[1]);case 3:return f(le[0],le[1],le[2])}var ie}function m(le,ie){var ge=le.x,Ae=le.y,we=le.r,Ne=ie.x,He=ie.y,de=ie.r,Le=Ne-ge,Ee=He-Ae,Re=de-we,je=Math.sqrt(Le*Le+Ee*Ee);return{x:(ge+Ne+Le/je*Re)/2,y:(Ae+He+Ee/je*Re)/2,r:(je+we+de)/2}}function f(le,ie,ge){var Ae=le.x,we=le.y,Ne=le.r,He=ie.x,de=ie.y,Le=ie.r,Ee=ge.x,Re=ge.y,je=ge.r,Fe=Ae-He,Xe=Ae-Ee,Ze=we-de,at=we-Re,lt=Le-Ne,ot=je-Ne,bt=Ae*Ae+we*we-Ne*Ne,wt=bt-He*He-de*de+Le*Le,ht=bt-Ee*Ee-Re*Re+je*je,ct=Xe*Ze-Fe*at,Tt=(Ze*ht-at*wt)/(2*ct)-Ae,Lt=(at*lt-Ze*ot)/ct,kt=(Xe*wt-Fe*ht)/(2*ct)-we,Ot=(Fe*ot-Xe*lt)/ct,Pt=Lt*Lt+Ot*Ot-1,et=2*(Ne+Tt*Lt+kt*Ot),nt=Tt*Tt+kt*kt-Ne*Ne,Ye=-(Pt?(et+Math.sqrt(et*et-4*Pt*nt))/(2*Pt):nt/et);return{x:Ae+Tt+Lt*Ye,y:we+kt+Ot*Ye,r:Ye}}function x(le,ie,ge){var Ae,we,Ne,He,de=le.x-ie.x,Le=le.y-ie.y,Ee=de*de+Le*Le;Ee?(we=ie.r+ge.r,we*=we,He=le.r+ge.r,we>(He*=He)?(Ae=(Ee+He-we)/(2*Ee),Ne=Math.sqrt(Math.max(0,He/Ee-Ae*Ae)),ge.x=le.x-Ae*de-Ne*Le,ge.y=le.y-Ae*Le+Ne*de):(Ae=(Ee+we-He)/(2*Ee),Ne=Math.sqrt(Math.max(0,we/Ee-Ae*Ae)),ge.x=ie.x+Ae*de-Ne*Le,ge.y=ie.y+Ae*Le+Ne*de)):(ge.x=ie.x+ge.r,ge.y=ie.y)}function y(le,ie){var ge=le.r+ie.r-1e-6,Ae=ie.x-le.x,we=ie.y-le.y;return ge>0&&ge*ge>Ae*Ae+we*we}function v(le){var ie=le._,ge=le.next._,Ae=ie.r+ge.r,we=(ie.x*ge.r+ge.x*ie.r)/Ae,Ne=(ie.y*ge.r+ge.y*ie.r)/Ae;return we*we+Ne*Ne}function M(le){this._=le,this.next=null,this.previous=null}function p(le){if(!(we=le.length))return 0;var ie,ge,Ae,we,Ne,He,de,Le,Ee,Re,je;if((ie=le[0]).x=0,ie.y=0,!(we>1))return ie.r;if(ge=le[1],ie.x=-ge.r,ge.x=ie.r,ge.y=0,!(we>2))return ie.r+ge.r;x(ge,ie,Ae=le[2]),ie=new M(ie),ge=new M(ge),Ae=new M(Ae),ie.next=Ae.previous=ge,ge.next=ie.previous=Ae,Ae.next=ge.previous=ie;e:for(de=3;de<we;++de){x(ie._,ge._,Ae=le[de]),Ae=new M(Ae),Le=ge.next,Ee=ie.previous,Re=ge._.r,je=ie._.r;do if(Re<=je){if(y(Le._,Ae._)){ge=Le,ie.next=ge,ge.previous=ie,--de;continue e}Re+=Le._.r,Le=Le.next}else{if(y(Ee._,Ae._)){(ie=Ee).next=ge,ge.previous=ie,--de;continue e}je+=Ee._.r,Ee=Ee.previous}while(Le!==Ee.next);for(Ae.previous=ie,Ae.next=ge,ie.next=ge.previous=ge=Ae,Ne=v(ie);(Ae=Ae.next)!==ge;)(He=v(Ae))<Ne&&(ie=Ae,Ne=He);ge=ie.next}for(ie=[ge._],Ae=ge;(Ae=Ae.next)!==ge;)ie.push(Ae._);for(Ae=s(ie),de=0;de<we;++de)(ie=le[de]).x-=Ae.x,ie.y-=Ae.y;return Ae.r}function S(le){return p(le),le}function A(le){if(typeof le!="function")throw new Error;return le}function k(){return 0}function C(le){return function(){return le}}function P(le){return Math.sqrt(le.value)}function R(){var le=null,ie=1,ge=1,Ae=k;function we(Ne){return Ne.x=ie/2,Ne.y=ge/2,le?Ne.eachBefore(O(le)).eachAfter(X(Ae,.5)).eachBefore(D(1)):Ne.eachBefore(O(P)).eachAfter(X(k,1)).eachAfter(X(Ae,Ne.r/Math.min(ie,ge))).eachBefore(D(Math.min(ie,ge)/(2*Ne.r))),Ne}return we.radius=function(Ne){return arguments.length?(le=(He=Ne)==null?null:A(He),we):le;var He},we.size=function(Ne){return arguments.length?(ie=+Ne[0],ge=+Ne[1],we):[ie,ge]},we.padding=function(Ne){return arguments.length?(Ae=typeof Ne=="function"?Ne:C(+Ne),we):Ae},we}function O(le){return function(ie){ie.children||(ie.r=Math.max(0,+le(ie)||0))}}function X(le,ie){return function(ge){if(Ae=ge.children){var Ae,we,Ne,He=Ae.length,de=le(ge)*ie||0;if(de)for(we=0;we<He;++we)Ae[we].r+=de;if(Ne=p(Ae),de)for(we=0;we<He;++we)Ae[we].r-=de;ge.r=Ne+de}}}function D(le){return function(ie){var ge=ie.parent;ie.r*=le,ge&&(ie.x=ge.x+le*ie.x,ie.y=ge.y+le*ie.y)}}function V(le){le.x0=Math.round(le.x0),le.y0=Math.round(le.y0),le.x1=Math.round(le.x1),le.y1=Math.round(le.y1)}function j(le,ie,ge,Ae,we){for(var Ne,He=le.children,de=-1,Le=He.length,Ee=le.value&&(Ae-ie)/le.value;++de<Le;)(Ne=He[de]).y0=ge,Ne.y1=we,Ne.x0=ie,Ne.x1=ie+=Ne.value*Ee}function B(){var le=1,ie=1,ge=0,Ae=!1;function we(Ne){var He=Ne.height+1;return Ne.x0=Ne.y0=ge,Ne.x1=le,Ne.y1=ie/He,Ne.eachBefore(function(de,Le){return function(Ee){Ee.children&&j(Ee,Ee.x0,de*(Ee.depth+1)/Le,Ee.x1,de*(Ee.depth+2)/Le);var Re=Ee.x0,je=Ee.y0,Fe=Ee.x1-ge,Xe=Ee.y1-ge;Fe<Re&&(Re=Fe=(Re+Fe)/2),Xe<je&&(je=Xe=(je+Xe)/2),Ee.x0=Re,Ee.y0=je,Ee.x1=Fe,Ee.y1=Xe}}(ie,He)),Ae&&Ne.eachBefore(V),Ne}return we.round=function(Ne){return arguments.length?(Ae=!!Ne,we):Ae},we.size=function(Ne){return arguments.length?(le=+Ne[0],ie=+Ne[1],we):[le,ie]},we.padding=function(Ne){return arguments.length?(ge=+Ne,we):ge},we}var W="$",q={depth:-1},re={};function ee(le){return le.id}function K(le){return le.parentId}function Y(){var le=ee,ie=K;function ge(Ae){var we,Ne,He,de,Le,Ee,Re,je=Ae.length,Fe=new Array(je),Xe={};for(Ne=0;Ne<je;++Ne)we=Ae[Ne],Le=Fe[Ne]=new n(we),(Ee=le(we,Ne,Ae))!=null&&(Ee+="")&&(Xe[Re=W+(Le.id=Ee)]=Re in Xe?re:Le);for(Ne=0;Ne<je;++Ne)if(Le=Fe[Ne],(Ee=ie(Ae[Ne],Ne,Ae))!=null&&(Ee+="")){if(!(de=Xe[W+Ee]))throw new Error("missing: "+Ee);if(de===re)throw new Error("ambiguous: "+Ee);de.children?de.children.push(Le):de.children=[Le],Le.parent=de}else{if(He)throw new Error("multiple roots");He=Le}if(!He)throw new Error("no root");if(He.parent=q,He.eachBefore(function(Ze){Ze.depth=Ze.parent.depth+1,--je}).eachBefore(i),He.parent=null,je>0)throw new Error("cycle");return He}return ge.id=function(Ae){return arguments.length?(le=A(Ae),ge):le},ge.parentId=function(Ae){return arguments.length?(ie=A(Ae),ge):ie},ge}function $(le,ie){return le.parent===ie.parent?1:2}function ne(le){var ie=le.children;return ie?ie[0]:le.t}function ae(le){var ie=le.children;return ie?ie[ie.length-1]:le.t}function se(le,ie,ge){var Ae=ge/(ie.i-le.i);ie.c-=Ae,ie.s+=ge,le.c+=Ae,ie.z+=ge,ie.m+=ge}function ce(le,ie,ge){return le.a.parent===ie.parent?le.a:ge}function me(le,ie){this._=le,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ie}function ye(){var le=$,ie=1,ge=1,Ae=null;function we(Le){var Ee=function(ot){for(var bt,wt,ht,ct,Tt,Lt=new me(ot,0),kt=[Lt];bt=kt.pop();)if(ht=bt._.children)for(bt.children=new Array(Tt=ht.length),ct=Tt-1;ct>=0;--ct)kt.push(wt=bt.children[ct]=new me(ht[ct],ct)),wt.parent=bt;return(Lt.parent=new me(null,0)).children=[Lt],Lt}(Le);if(Ee.eachAfter(Ne),Ee.parent.m=-Ee.z,Ee.eachBefore(He),Ae)Le.eachBefore(de);else{var Re=Le,je=Le,Fe=Le;Le.eachBefore(function(ot){ot.x<Re.x&&(Re=ot),ot.x>je.x&&(je=ot),ot.depth>Fe.depth&&(Fe=ot)});var Xe=Re===je?1:le(Re,je)/2,Ze=Xe-Re.x,at=ie/(je.x+Xe+Ze),lt=ge/(Fe.depth||1);Le.eachBefore(function(ot){ot.x=(ot.x+Ze)*at,ot.y=ot.depth*lt})}return Le}function Ne(Le){var Ee=Le.children,Re=Le.parent.children,je=Le.i?Re[Le.i-1]:null;if(Ee){(function(Xe){for(var Ze,at=0,lt=0,ot=Xe.children,bt=ot.length;--bt>=0;)(Ze=ot[bt]).z+=at,Ze.m+=at,at+=Ze.s+(lt+=Ze.c)})(Le);var Fe=(Ee[0].z+Ee[Ee.length-1].z)/2;je?(Le.z=je.z+le(Le._,je._),Le.m=Le.z-Fe):Le.z=Fe}else je&&(Le.z=je.z+le(Le._,je._));Le.parent.A=function(Xe,Ze,at){if(Ze){for(var lt,ot=Xe,bt=Xe,wt=Ze,ht=ot.parent.children[0],ct=ot.m,Tt=bt.m,Lt=wt.m,kt=ht.m;wt=ae(wt),ot=ne(ot),wt&&ot;)ht=ne(ht),(bt=ae(bt)).a=Xe,(lt=wt.z+Lt-ot.z-ct+le(wt._,ot._))>0&&(se(ce(wt,Xe,at),Xe,lt),ct+=lt,Tt+=lt),Lt+=wt.m,ct+=ot.m,kt+=ht.m,Tt+=bt.m;wt&&!ae(bt)&&(bt.t=wt,bt.m+=Lt-Tt),ot&&!ne(ht)&&(ht.t=ot,ht.m+=ct-kt,at=Xe)}return at}(Le,je,Le.parent.A||Re[0])}function He(Le){Le._.x=Le.z+Le.parent.m,Le.m+=Le.parent.m}function de(Le){Le.x*=ie,Le.y=Le.depth*ge}return we.separation=function(Le){return arguments.length?(le=Le,we):le},we.size=function(Le){return arguments.length?(Ae=!1,ie=+Le[0],ge=+Le[1],we):Ae?null:[ie,ge]},we.nodeSize=function(Le){return arguments.length?(Ae=!0,ie=+Le[0],ge=+Le[1],we):Ae?[ie,ge]:null},we}function Te(le,ie,ge,Ae,we){for(var Ne,He=le.children,de=-1,Le=He.length,Ee=le.value&&(we-ge)/le.value;++de<Le;)(Ne=He[de]).x0=ie,Ne.x1=Ae,Ne.y0=ge,Ne.y1=ge+=Ne.value*Ee}me.prototype=Object.create(n.prototype);var Ce=(1+Math.sqrt(5))/2;function pe(le,ie,ge,Ae,we,Ne){for(var He,de,Le,Ee,Re,je,Fe,Xe,Ze,at,lt,ot=[],bt=ie.children,wt=0,ht=0,ct=bt.length,Tt=ie.value;wt<ct;){Le=we-ge,Ee=Ne-Ae;do Re=bt[ht++].value;while(!Re&&ht<ct);for(je=Fe=Re,lt=Re*Re*(at=Math.max(Ee/Le,Le/Ee)/(Tt*le)),Ze=Math.max(Fe/lt,lt/je);ht<ct;++ht){if(Re+=de=bt[ht].value,de<je&&(je=de),de>Fe&&(Fe=de),lt=Re*Re*at,(Xe=Math.max(Fe/lt,lt/je))>Ze){Re-=de;break}Ze=Xe}ot.push(He={value:Re,dice:Le<Ee,children:bt.slice(wt,ht)}),He.dice?j(He,ge,Ae,we,Tt?Ae+=Ee*Re/Tt:Ne):Te(He,ge,Ae,Tt?ge+=Le*Re/Tt:we,Ne),Tt-=Re,wt=ht}return ot}var fe=function le(ie){function ge(Ae,we,Ne,He,de){pe(ie,Ae,we,Ne,He,de)}return ge.ratio=function(Ae){return le((Ae=+Ae)>1?Ae:1)},ge}(Ce);function Oe(){var le=fe,ie=!1,ge=1,Ae=1,we=[0],Ne=k,He=k,de=k,Le=k,Ee=k;function Re(Fe){return Fe.x0=Fe.y0=0,Fe.x1=ge,Fe.y1=Ae,Fe.eachBefore(je),we=[0],ie&&Fe.eachBefore(V),Fe}function je(Fe){var Xe=we[Fe.depth],Ze=Fe.x0+Xe,at=Fe.y0+Xe,lt=Fe.x1-Xe,ot=Fe.y1-Xe;lt<Ze&&(Ze=lt=(Ze+lt)/2),ot<at&&(at=ot=(at+ot)/2),Fe.x0=Ze,Fe.y0=at,Fe.x1=lt,Fe.y1=ot,Fe.children&&(Xe=we[Fe.depth+1]=Ne(Fe)/2,Ze+=Ee(Fe)-Xe,at+=He(Fe)-Xe,(lt-=de(Fe)-Xe)<Ze&&(Ze=lt=(Ze+lt)/2),(ot-=Le(Fe)-Xe)<at&&(at=ot=(at+ot)/2),le(Fe,Ze,at,lt,ot))}return Re.round=function(Fe){return arguments.length?(ie=!!Fe,Re):ie},Re.size=function(Fe){return arguments.length?(ge=+Fe[0],Ae=+Fe[1],Re):[ge,Ae]},Re.tile=function(Fe){return arguments.length?(le=A(Fe),Re):le},Re.padding=function(Fe){return arguments.length?Re.paddingInner(Fe).paddingOuter(Fe):Re.paddingInner()},Re.paddingInner=function(Fe){return arguments.length?(Ne=typeof Fe=="function"?Fe:C(+Fe),Re):Ne},Re.paddingOuter=function(Fe){return arguments.length?Re.paddingTop(Fe).paddingRight(Fe).paddingBottom(Fe).paddingLeft(Fe):Re.paddingTop()},Re.paddingTop=function(Fe){return arguments.length?(He=typeof Fe=="function"?Fe:C(+Fe),Re):He},Re.paddingRight=function(Fe){return arguments.length?(de=typeof Fe=="function"?Fe:C(+Fe),Re):de},Re.paddingBottom=function(Fe){return arguments.length?(Le=typeof Fe=="function"?Fe:C(+Fe),Re):Le},Re.paddingLeft=function(Fe){return arguments.length?(Ee=typeof Fe=="function"?Fe:C(+Fe),Re):Ee},Re}function Se(le,ie,ge,Ae,we){var Ne,He,de=le.children,Le=de.length,Ee=new Array(Le+1);for(Ee[0]=He=Ne=0;Ne<Le;++Ne)Ee[Ne+1]=He+=de[Ne].value;(function Re(je,Fe,Xe,Ze,at,lt,ot){if(je>=Fe-1){var bt=de[je];return bt.x0=Ze,bt.y0=at,bt.x1=lt,void(bt.y1=ot)}for(var wt=Ee[je],ht=Xe/2+wt,ct=je+1,Tt=Fe-1;ct<Tt;){var Lt=ct+Tt>>>1;Ee[Lt]<ht?ct=Lt+1:Tt=Lt}ht-Ee[ct-1]<Ee[ct]-ht&&je+1<ct&&--ct;var kt=Ee[ct]-wt,Ot=Xe-kt;if(lt-Ze>ot-at){var Pt=(Ze*Ot+lt*kt)/Xe;Re(je,ct,kt,Ze,at,Pt,ot),Re(ct,Fe,Ot,Pt,at,lt,ot)}else{var et=(at*Ot+ot*kt)/Xe;Re(je,ct,kt,Ze,at,lt,et),Re(ct,Fe,Ot,Ze,et,lt,ot)}})(0,Le,le.value,ie,ge,Ae,we)}function Me(le,ie,ge,Ae,we){(1&le.depth?Te:j)(le,ie,ge,Ae,we)}var ue=function le(ie){function ge(Ae,we,Ne,He,de){if((Le=Ae._squarify)&&Le.ratio===ie)for(var Le,Ee,Re,je,Fe,Xe=-1,Ze=Le.length,at=Ae.value;++Xe<Ze;){for(Re=(Ee=Le[Xe]).children,je=Ee.value=0,Fe=Re.length;je<Fe;++je)Ee.value+=Re[je].value;Ee.dice?j(Ee,we,Ne,He,Ne+=(de-Ne)*Ee.value/at):Te(Ee,we,Ne,we+=(He-we)*Ee.value/at,de),at-=Ee.value}else Ae._squarify=Le=pe(ie,Ae,we,Ne,He,de),Le.ratio=ie}return ge.ratio=function(Ae){return le((Ae=+Ae)>1?Ae:1)},ge}(Ce)},45879:function(F,L,e){e.d(L,{h5:function(){return d}});var T=Math.PI,b=2*T,a=1e-6,_=b-a;function g(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function h(){return new g}g.prototype=h.prototype={constructor:g,moveTo:function(c,w){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+w)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,w){this._+="L"+(this._x1=+c)+","+(this._y1=+w)},quadraticCurveTo:function(c,w,m,f){this._+="Q"+ +c+","+ +w+","+(this._x1=+m)+","+(this._y1=+f)},bezierCurveTo:function(c,w,m,f,x,y){this._+="C"+ +c+","+ +w+","+ +m+","+ +f+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(c,w,m,f,x){c=+c,w=+w,m=+m,f=+f,x=+x;var y=this._x1,v=this._y1,M=m-c,p=f-w,S=y-c,A=v-w,k=S*S+A*A;if(x<0)throw new Error("negative radius: "+x);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=w);else if(k>a)if(Math.abs(A*M-p*S)>a&&x){var C=m-y,P=f-v,R=M*M+p*p,O=C*C+P*P,X=Math.sqrt(R),D=Math.sqrt(k),V=x*Math.tan((T-Math.acos((R+k-O)/(2*X*D)))/2),j=V/D,B=V/X;Math.abs(j-1)>a&&(this._+="L"+(c+j*S)+","+(w+j*A)),this._+="A"+x+","+x+",0,0,"+ +(A*C>S*P)+","+(this._x1=c+B*M)+","+(this._y1=w+B*p)}else this._+="L"+(this._x1=c)+","+(this._y1=w)},arc:function(c,w,m,f,x,y){c=+c,w=+w,y=!!y;var v=(m=+m)*Math.cos(f),M=m*Math.sin(f),p=c+v,S=w+M,A=1^y,k=y?f-x:x-f;if(m<0)throw new Error("negative radius: "+m);this._x1===null?this._+="M"+p+","+S:(Math.abs(this._x1-p)>a||Math.abs(this._y1-S)>a)&&(this._+="L"+p+","+S),m&&(k<0&&(k=k%b+b),k>_?this._+="A"+m+","+m+",0,1,"+A+","+(c-v)+","+(w-M)+"A"+m+","+m+",0,1,"+A+","+(this._x1=p)+","+(this._y1=S):k>a&&(this._+="A"+m+","+m+",0,"+ +(k>=T)+","+A+","+(this._x1=c+m*Math.cos(x))+","+(this._y1=w+m*Math.sin(x))))},rect:function(c,w,m,f){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+w)+"h"+ +m+"v"+ +f+"h"+-m+"Z"},toString:function(){return this._}};var o=h,t=Array.prototype.slice;function i(c){return function(){return c}}function n(c){return c[0]}function r(c){return c[1]}function s(c){return c.source}function l(c){return c.target}function u(c,w,m,f,x){c.moveTo(w,m),c.bezierCurveTo(w=(w+f)/2,m,w,x,f,x)}function d(){return function(c){var w=s,m=l,f=n,x=r,y=null;function v(){var M,p=t.call(arguments),S=w.apply(this,p),A=m.apply(this,p);if(y||(y=M=o()),c(y,+f.apply(this,(p[0]=S,p)),+x.apply(this,p),+f.apply(this,(p[0]=A,p)),+x.apply(this,p)),M)return y=null,M+""||null}return v.source=function(M){return arguments.length?(w=M,v):w},v.target=function(M){return arguments.length?(m=M,v):m},v.x=function(M){return arguments.length?(f=typeof M=="function"?M:i(+M),v):f},v.y=function(M){return arguments.length?(x=typeof M=="function"?M:i(+M),v):x},v.context=function(M){return arguments.length?(y=M??null,v):y},v}(u)}},84096:function(F,L,e){e.d(L,{i$:function(){return s},Dq:function(){return n},g0:function(){return l}});var T=e(58176),b=e(48480),a=e(59879),_=e(82301),g=e(34823),h=e(79791);function o(ct){if(0<=ct.y&&ct.y<100){var Tt=new Date(-1,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L);return Tt.setFullYear(ct.y),Tt}return new Date(ct.y,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L)}function t(ct){if(0<=ct.y&&ct.y<100){var Tt=new Date(Date.UTC(-1,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L));return Tt.setUTCFullYear(ct.y),Tt}return new Date(Date.UTC(ct.y,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L))}function i(ct,Tt,Lt){return{y:ct,m:Tt,d:Lt,H:0,M:0,S:0,L:0}}function n(ct){var Tt=ct.dateTime,Lt=ct.date,kt=ct.time,Ot=ct.periods,Pt=ct.days,et=ct.shortDays,nt=ct.months,Ye=ct.shortMonths,tt=x(Ot),ut=y(Ot),Ke=x(Pt),De=y(Pt),Be=x(et),Qe=y(et),rt=x(nt),vt=y(nt),mt=x(Ye),xt=y(Ye),dt={a:function(Bt){return et[Bt.getDay()]},A:function(Bt){return Pt[Bt.getDay()]},b:function(Bt){return Ye[Bt.getMonth()]},B:function(Bt){return nt[Bt.getMonth()]},c:null,d:Y,e:Y,f:ce,H:$,I:ne,j:ae,L:se,m:me,M:ye,p:function(Bt){return Ot[+(Bt.getHours()>=12)]},q:function(Bt){return 1+~~(Bt.getMonth()/3)},Q:wt,s:ht,S:Te,u:Ce,U:pe,V:fe,w:Oe,W:Se,x:null,X:null,y:Me,Y:ue,Z:le,"%":bt},Et={a:function(Bt){return et[Bt.getUTCDay()]},A:function(Bt){return Pt[Bt.getUTCDay()]},b:function(Bt){return Ye[Bt.getUTCMonth()]},B:function(Bt){return nt[Bt.getUTCMonth()]},c:null,d:ie,e:ie,f:He,H:ge,I:Ae,j:we,L:Ne,m:de,M:Le,p:function(Bt){return Ot[+(Bt.getUTCHours()>=12)]},q:function(Bt){return 1+~~(Bt.getUTCMonth()/3)},Q:wt,s:ht,S:Ee,u:Re,U:je,V:Fe,w:Xe,W:Ze,x:null,X:null,y:at,Y:lt,Z:ot,"%":bt},pt={a:function(Bt,Ut,Jt){var Vt=Be.exec(Ut.slice(Jt));return Vt?(Bt.w=Qe[Vt[0].toLowerCase()],Jt+Vt[0].length):-1},A:function(Bt,Ut,Jt){var Vt=Ke.exec(Ut.slice(Jt));return Vt?(Bt.w=De[Vt[0].toLowerCase()],Jt+Vt[0].length):-1},b:function(Bt,Ut,Jt){var Vt=mt.exec(Ut.slice(Jt));return Vt?(Bt.m=xt[Vt[0].toLowerCase()],Jt+Vt[0].length):-1},B:function(Bt,Ut,Jt){var Vt=rt.exec(Ut.slice(Jt));return Vt?(Bt.m=vt[Vt[0].toLowerCase()],Jt+Vt[0].length):-1},c:function(Bt,Ut,Jt){return Nt(Bt,Tt,Ut,Jt)},d:X,e:X,f:q,H:V,I:V,j:D,L:W,m:O,M:j,p:function(Bt,Ut,Jt){var Vt=tt.exec(Ut.slice(Jt));return Vt?(Bt.p=ut[Vt[0].toLowerCase()],Jt+Vt[0].length):-1},q:R,Q:ee,s:K,S:B,u:M,U:p,V:S,w:v,W:A,x:function(Bt,Ut,Jt){return Nt(Bt,Lt,Ut,Jt)},X:function(Bt,Ut,Jt){return Nt(Bt,kt,Ut,Jt)},y:C,Y:k,Z:P,"%":re};function gt(Bt,Ut){return function(Jt){var Vt,Qt,qt,gn=[],wn=-1,hn=0,Xt=Bt.length;for(Jt instanceof Date||(Jt=new Date(+Jt));++wn<Xt;)Bt.charCodeAt(wn)===37&&(gn.push(Bt.slice(hn,wn)),(Qt=u[Vt=Bt.charAt(++wn)])!=null?Vt=Bt.charAt(++wn):Qt=Vt==="e"?" ":"0",(qt=Ut[Vt])&&(Vt=qt(Jt,Qt)),gn.push(Vt),hn=wn+1);return gn.push(Bt.slice(hn,wn)),gn.join("")}}function Mt(Bt,Ut){return function(Jt){var Vt,Qt,qt=i(1900,void 0,1);if(Nt(qt,Bt,Jt+="",0)!=Jt.length)return null;if("Q"in qt)return new Date(qt.Q);if("s"in qt)return new Date(1e3*qt.s+("L"in qt?qt.L:0));if(Ut&&!("Z"in qt)&&(qt.Z=0),"p"in qt&&(qt.H=qt.H%12+12*qt.p),qt.m===void 0&&(qt.m="q"in qt?qt.q:0),"V"in qt){if(qt.V<1||qt.V>53)return null;"w"in qt||(qt.w=1),"Z"in qt?(Qt=(Vt=t(i(qt.y,0,1))).getUTCDay(),Vt=Qt>4||Qt===0?T.l6.ceil(Vt):(0,T.l6)(Vt),Vt=b.Z.offset(Vt,7*(qt.V-1)),qt.y=Vt.getUTCFullYear(),qt.m=Vt.getUTCMonth(),qt.d=Vt.getUTCDate()+(qt.w+6)%7):(Qt=(Vt=o(i(qt.y,0,1))).getDay(),Vt=Qt>4||Qt===0?a.wA.ceil(Vt):(0,a.wA)(Vt),Vt=_.Z.offset(Vt,7*(qt.V-1)),qt.y=Vt.getFullYear(),qt.m=Vt.getMonth(),qt.d=Vt.getDate()+(qt.w+6)%7)}else("W"in qt||"U"in qt)&&("w"in qt||(qt.w="u"in qt?qt.u%7:"W"in qt?1:0),Qt="Z"in qt?t(i(qt.y,0,1)).getUTCDay():o(i(qt.y,0,1)).getDay(),qt.m=0,qt.d="W"in qt?(qt.w+6)%7+7*qt.W-(Qt+5)%7:qt.w+7*qt.U-(Qt+6)%7);return"Z"in qt?(qt.H+=qt.Z/100|0,qt.M+=qt.Z%100,t(qt)):o(qt)}}function Nt(Bt,Ut,Jt,Vt){for(var Qt,qt,gn=0,wn=Ut.length,hn=Jt.length;gn<wn;){if(Vt>=hn)return-1;if((Qt=Ut.charCodeAt(gn++))===37){if(Qt=Ut.charAt(gn++),!(qt=pt[Qt in u?Ut.charAt(gn++):Qt])||(Vt=qt(Bt,Jt,Vt))<0)return-1}else if(Qt!=Jt.charCodeAt(Vt++))return-1}return Vt}return dt.x=gt(Lt,dt),dt.X=gt(kt,dt),dt.c=gt(Tt,dt),Et.x=gt(Lt,Et),Et.X=gt(kt,Et),Et.c=gt(Tt,Et),{format:function(Bt){var Ut=gt(Bt+="",dt);return Ut.toString=function(){return Bt},Ut},parse:function(Bt){var Ut=Mt(Bt+="",!1);return Ut.toString=function(){return Bt},Ut},utcFormat:function(Bt){var Ut=gt(Bt+="",Et);return Ut.toString=function(){return Bt},Ut},utcParse:function(Bt){var Ut=Mt(Bt+="",!0);return Ut.toString=function(){return Bt},Ut}}}var r,s,l,u={"-":"",_:" ",0:"0"},d=/^\s*\d+/,c=/^%/,w=/[\\^$*+?|[\]().{}]/g;function m(ct,Tt,Lt){var kt=ct<0?"-":"",Ot=(kt?-ct:ct)+"",Pt=Ot.length;return kt+(Pt<Lt?new Array(Lt-Pt+1).join(Tt)+Ot:Ot)}function f(ct){return ct.replace(w,"\\$&")}function x(ct){return new RegExp("^(?:"+ct.map(f).join("|")+")","i")}function y(ct){for(var Tt={},Lt=-1,kt=ct.length;++Lt<kt;)Tt[ct[Lt].toLowerCase()]=Lt;return Tt}function v(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+1));return kt?(ct.w=+kt[0],Lt+kt[0].length):-1}function M(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+1));return kt?(ct.u=+kt[0],Lt+kt[0].length):-1}function p(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.U=+kt[0],Lt+kt[0].length):-1}function S(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.V=+kt[0],Lt+kt[0].length):-1}function A(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.W=+kt[0],Lt+kt[0].length):-1}function k(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+4));return kt?(ct.y=+kt[0],Lt+kt[0].length):-1}function C(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.y=+kt[0]+(+kt[0]>68?1900:2e3),Lt+kt[0].length):-1}function P(ct,Tt,Lt){var kt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Tt.slice(Lt,Lt+6));return kt?(ct.Z=kt[1]?0:-(kt[2]+(kt[3]||"00")),Lt+kt[0].length):-1}function R(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+1));return kt?(ct.q=3*kt[0]-3,Lt+kt[0].length):-1}function O(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.m=kt[0]-1,Lt+kt[0].length):-1}function X(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.d=+kt[0],Lt+kt[0].length):-1}function D(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+3));return kt?(ct.m=0,ct.d=+kt[0],Lt+kt[0].length):-1}function V(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.H=+kt[0],Lt+kt[0].length):-1}function j(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.M=+kt[0],Lt+kt[0].length):-1}function B(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+2));return kt?(ct.S=+kt[0],Lt+kt[0].length):-1}function W(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+3));return kt?(ct.L=+kt[0],Lt+kt[0].length):-1}function q(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt,Lt+6));return kt?(ct.L=Math.floor(kt[0]/1e3),Lt+kt[0].length):-1}function re(ct,Tt,Lt){var kt=c.exec(Tt.slice(Lt,Lt+1));return kt?Lt+kt[0].length:-1}function ee(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt));return kt?(ct.Q=+kt[0],Lt+kt[0].length):-1}function K(ct,Tt,Lt){var kt=d.exec(Tt.slice(Lt));return kt?(ct.s=+kt[0],Lt+kt[0].length):-1}function Y(ct,Tt){return m(ct.getDate(),Tt,2)}function $(ct,Tt){return m(ct.getHours(),Tt,2)}function ne(ct,Tt){return m(ct.getHours()%12||12,Tt,2)}function ae(ct,Tt){return m(1+_.Z.count((0,g.Z)(ct),ct),Tt,3)}function se(ct,Tt){return m(ct.getMilliseconds(),Tt,3)}function ce(ct,Tt){return se(ct,Tt)+"000"}function me(ct,Tt){return m(ct.getMonth()+1,Tt,2)}function ye(ct,Tt){return m(ct.getMinutes(),Tt,2)}function Te(ct,Tt){return m(ct.getSeconds(),Tt,2)}function Ce(ct){var Tt=ct.getDay();return Tt===0?7:Tt}function pe(ct,Tt){return m(a.OM.count((0,g.Z)(ct)-1,ct),Tt,2)}function fe(ct,Tt){var Lt=ct.getDay();return ct=Lt>=4||Lt===0?(0,a.bL)(ct):a.bL.ceil(ct),m(a.bL.count((0,g.Z)(ct),ct)+((0,g.Z)(ct).getDay()===4),Tt,2)}function Oe(ct){return ct.getDay()}function Se(ct,Tt){return m(a.wA.count((0,g.Z)(ct)-1,ct),Tt,2)}function Me(ct,Tt){return m(ct.getFullYear()%100,Tt,2)}function ue(ct,Tt){return m(ct.getFullYear()%1e4,Tt,4)}function le(ct){var Tt=ct.getTimezoneOffset();return(Tt>0?"-":(Tt*=-1,"+"))+m(Tt/60|0,"0",2)+m(Tt%60,"0",2)}function ie(ct,Tt){return m(ct.getUTCDate(),Tt,2)}function ge(ct,Tt){return m(ct.getUTCHours(),Tt,2)}function Ae(ct,Tt){return m(ct.getUTCHours()%12||12,Tt,2)}function we(ct,Tt){return m(1+b.Z.count((0,h.Z)(ct),ct),Tt,3)}function Ne(ct,Tt){return m(ct.getUTCMilliseconds(),Tt,3)}function He(ct,Tt){return Ne(ct,Tt)+"000"}function de(ct,Tt){return m(ct.getUTCMonth()+1,Tt,2)}function Le(ct,Tt){return m(ct.getUTCMinutes(),Tt,2)}function Ee(ct,Tt){return m(ct.getUTCSeconds(),Tt,2)}function Re(ct){var Tt=ct.getUTCDay();return Tt===0?7:Tt}function je(ct,Tt){return m(T.Ox.count((0,h.Z)(ct)-1,ct),Tt,2)}function Fe(ct,Tt){var Lt=ct.getUTCDay();return ct=Lt>=4||Lt===0?(0,T.hB)(ct):T.hB.ceil(ct),m(T.hB.count((0,h.Z)(ct),ct)+((0,h.Z)(ct).getUTCDay()===4),Tt,2)}function Xe(ct){return ct.getUTCDay()}function Ze(ct,Tt){return m(T.l6.count((0,h.Z)(ct)-1,ct),Tt,2)}function at(ct,Tt){return m(ct.getUTCFullYear()%100,Tt,2)}function lt(ct,Tt){return m(ct.getUTCFullYear()%1e4,Tt,4)}function ot(){return"+0000"}function bt(){return"%"}function wt(ct){return+ct}function ht(ct){return Math.floor(+ct/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s=r.format,r.parse,l=r.utcFormat,r.utcParse},82301:function(F,L,e){e.d(L,{a:function(){return _}});var T=e(30052),b=e(54263),a=(0,T.Z)(function(g){g.setHours(0,0,0,0)},function(g,h){g.setDate(g.getDate()+h)},function(g,h){return(h-g-(h.getTimezoneOffset()-g.getTimezoneOffset())*b.yB)/b.UD},function(g){return g.getDate()-1});L.Z=a;var _=a.range},54263:function(F,L,e){e.d(L,{UD:function(){return _},Y2:function(){return a},Ym:function(){return T},iM:function(){return g},yB:function(){return b}});var T=1e3,b=6e4,a=36e5,_=864e5,g=6048e5},81041:function(F,L,e){e.r(L),e.d(L,{timeDay:function(){return d.Z},timeDays:function(){return d.a},timeFriday:function(){return c.mC},timeFridays:function(){return c.b$},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return T.Z},timeMillisecond:function(){return a},timeMilliseconds:function(){return _},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return c.wA},timeMondays:function(){return c.bJ},timeMonth:function(){return m},timeMonths:function(){return f},timeSaturday:function(){return c.EY},timeSaturdays:function(){return c.Ff},timeSecond:function(){return o},timeSeconds:function(){return t},timeSunday:function(){return c.OM},timeSundays:function(){return c.vm},timeThursday:function(){return c.bL},timeThursdays:function(){return c.$t},timeTuesday:function(){return c.sy},timeTuesdays:function(){return c.aU},timeWednesday:function(){return c.zg},timeWednesdays:function(){return c.Ld},timeWeek:function(){return c.OM},timeWeeks:function(){return c.vm},timeYear:function(){return x.Z},timeYears:function(){return x.g},utcDay:function(){return k.Z},utcDays:function(){return k.y},utcFriday:function(){return C.QQ},utcFridays:function(){return C.fz},utcHour:function(){return S},utcHours:function(){return A},utcMillisecond:function(){return a},utcMilliseconds:function(){return _},utcMinute:function(){return v},utcMinutes:function(){return M},utcMonday:function(){return C.l6},utcMondays:function(){return C.$3},utcMonth:function(){return R},utcMonths:function(){return O},utcSaturday:function(){return C.g4},utcSaturdays:function(){return C.Q_},utcSecond:function(){return o},utcSeconds:function(){return t},utcSunday:function(){return C.Ox},utcSundays:function(){return C.SU},utcThursday:function(){return C.hB},utcThursdays:function(){return C.xj},utcTuesday:function(){return C.J1},utcTuesdays:function(){return C.DK},utcWednesday:function(){return C.b3},utcWednesdays:function(){return C.uy},utcWeek:function(){return C.Ox},utcWeeks:function(){return C.SU},utcYear:function(){return X.Z},utcYears:function(){return X.D}});var T=e(30052),b=(0,T.Z)(function(){},function(D,V){D.setTime(+D+V)},function(D,V){return V-D});b.every=function(D){return D=Math.floor(D),isFinite(D)&&D>0?D>1?(0,T.Z)(function(V){V.setTime(Math.floor(V/D)*D)},function(V,j){V.setTime(+V+j*D)},function(V,j){return(j-V)/D}):b:null};var a=b,_=b.range,g=e(54263),h=(0,T.Z)(function(D){D.setTime(D-D.getMilliseconds())},function(D,V){D.setTime(+D+V*g.Ym)},function(D,V){return(V-D)/g.Ym},function(D){return D.getUTCSeconds()}),o=h,t=h.range,i=(0,T.Z)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*g.Ym)},function(D,V){D.setTime(+D+V*g.yB)},function(D,V){return(V-D)/g.yB},function(D){return D.getMinutes()}),n=i,r=i.range,s=(0,T.Z)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*g.Ym-D.getMinutes()*g.yB)},function(D,V){D.setTime(+D+V*g.Y2)},function(D,V){return(V-D)/g.Y2},function(D){return D.getHours()}),l=s,u=s.range,d=e(82301),c=e(59879),w=(0,T.Z)(function(D){D.setDate(1),D.setHours(0,0,0,0)},function(D,V){D.setMonth(D.getMonth()+V)},function(D,V){return V.getMonth()-D.getMonth()+12*(V.getFullYear()-D.getFullYear())},function(D){return D.getMonth()}),m=w,f=w.range,x=e(34823),y=(0,T.Z)(function(D){D.setUTCSeconds(0,0)},function(D,V){D.setTime(+D+V*g.yB)},function(D,V){return(V-D)/g.yB},function(D){return D.getUTCMinutes()}),v=y,M=y.range,p=(0,T.Z)(function(D){D.setUTCMinutes(0,0,0)},function(D,V){D.setTime(+D+V*g.Y2)},function(D,V){return(V-D)/g.Y2},function(D){return D.getUTCHours()}),S=p,A=p.range,k=e(48480),C=e(58176),P=(0,T.Z)(function(D){D.setUTCDate(1),D.setUTCHours(0,0,0,0)},function(D,V){D.setUTCMonth(D.getUTCMonth()+V)},function(D,V){return V.getUTCMonth()-D.getUTCMonth()+12*(V.getUTCFullYear()-D.getUTCFullYear())},function(D){return D.getUTCMonth()}),R=P,O=P.range,X=e(79791)},30052:function(F,L,e){e.d(L,{Z:function(){return a}});var T=new Date,b=new Date;function a(_,g,h,o){function t(i){return _(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return _(i=new Date(+i)),i},t.ceil=function(i){return _(i=new Date(i-1)),g(i,1),_(i),i},t.round=function(i){var n=t(i),r=t.ceil(i);return i-n<r-i?n:r},t.offset=function(i,n){return g(i=new Date(+i),n==null?1:Math.floor(n)),i},t.range=function(i,n,r){var s,l=[];if(i=t.ceil(i),r=r==null?1:Math.floor(r),!(i<n&&r>0))return l;do l.push(s=new Date(+i)),g(i,r),_(i);while(s<i&&i<n);return l},t.filter=function(i){return a(function(n){if(n>=n)for(;_(n),!i(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;g(n,-1),!i(n););else for(;--r>=0;)for(;g(n,1),!i(n););})},h&&(t.count=function(i,n){return T.setTime(+i),b.setTime(+n),_(T),_(b),Math.floor(h(T,b))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(o?function(n){return o(n)%i==0}:function(n){return t.count(0,n)%i==0}):t:null}),t}},48480:function(F,L,e){e.d(L,{y:function(){return _}});var T=e(30052),b=e(54263),a=(0,T.Z)(function(g){g.setUTCHours(0,0,0,0)},function(g,h){g.setUTCDate(g.getUTCDate()+h)},function(g,h){return(h-g)/b.UD},function(g){return g.getUTCDate()-1});L.Z=a;var _=a.range},58176:function(F,L,e){e.d(L,{$3:function(){return s},DK:function(){return l},J1:function(){return h},Ox:function(){return _},QQ:function(){return i},Q_:function(){return w},SU:function(){return r},b3:function(){return o},fz:function(){return c},g4:function(){return n},hB:function(){return t},l6:function(){return g},uy:function(){return u},xj:function(){return d}});var T=e(30052),b=e(54263);function a(m){return(0,T.Z)(function(f){f.setUTCDate(f.getUTCDate()-(f.getUTCDay()+7-m)%7),f.setUTCHours(0,0,0,0)},function(f,x){f.setUTCDate(f.getUTCDate()+7*x)},function(f,x){return(x-f)/b.iM})}var _=a(0),g=a(1),h=a(2),o=a(3),t=a(4),i=a(5),n=a(6),r=_.range,s=g.range,l=h.range,u=o.range,d=t.range,c=i.range,w=n.range},79791:function(F,L,e){e.d(L,{D:function(){return a}});var T=e(30052),b=(0,T.Z)(function(_){_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,g){_.setUTCFullYear(_.getUTCFullYear()+g)},function(_,g){return g.getUTCFullYear()-_.getUTCFullYear()},function(_){return _.getUTCFullYear()});b.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,T.Z)(function(g){g.setUTCFullYear(Math.floor(g.getUTCFullYear()/_)*_),g.setUTCMonth(0,1),g.setUTCHours(0,0,0,0)},function(g,h){g.setUTCFullYear(g.getUTCFullYear()+h*_)}):null},L.Z=b;var a=b.range},59879:function(F,L,e){e.d(L,{$t:function(){return d},EY:function(){return n},Ff:function(){return w},Ld:function(){return u},OM:function(){return _},aU:function(){return l},b$:function(){return c},bJ:function(){return s},bL:function(){return t},mC:function(){return i},sy:function(){return h},vm:function(){return r},wA:function(){return g},zg:function(){return o}});var T=e(30052),b=e(54263);function a(m){return(0,T.Z)(function(f){f.setDate(f.getDate()-(f.getDay()+7-m)%7),f.setHours(0,0,0,0)},function(f,x){f.setDate(f.getDate()+7*x)},function(f,x){return(x-f-(x.getTimezoneOffset()-f.getTimezoneOffset())*b.yB)/b.iM})}var _=a(0),g=a(1),h=a(2),o=a(3),t=a(4),i=a(5),n=a(6),r=_.range,s=g.range,l=h.range,u=o.range,d=t.range,c=i.range,w=n.range},34823:function(F,L,e){e.d(L,{g:function(){return a}});var T=e(30052),b=(0,T.Z)(function(_){_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,g){_.setFullYear(_.getFullYear()+g)},function(_,g){return g.getFullYear()-_.getFullYear()},function(_){return _.getFullYear()});b.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,T.Z)(function(g){g.setFullYear(Math.floor(g.getFullYear()/_)*_),g.setMonth(0,1),g.setHours(0,0,0,0)},function(g,h){g.setFullYear(g.getFullYear()+h*_)}):null},L.Z=b;var a=b.range},17045:function(F,L,e){var T=e(8709),b=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",a=Object.prototype.toString,_=Array.prototype.concat,g=Object.defineProperty,h=e(55622)(),o=g&&h,t=function(n,r,s,l){if(r in n){if(l===!0){if(n[r]===s)return}else if(typeof(u=l)!="function"||a.call(u)!=="[object Function]"||!l())return}var u;o?g(n,r,{configurable:!0,enumerable:!1,value:s,writable:!0}):n[r]=s},i=function(n,r){var s=arguments.length>2?arguments[2]:{},l=T(r);b&&(l=_.call(l,Object.getOwnPropertySymbols(r)));for(var u=0;u<l.length;u+=1)t(n,l[u],r[l[u]],s[l[u]])};i.supportsDescriptors=!!o,F.exports=i},46775:function(F){F.exports=function(){for(var L=0;L<arguments.length;L++)if(arguments[L]!==void 0)return arguments[L]}},53545:function(F){F.exports=T;var L=(T.canvas=document.createElement("canvas")).getContext("2d"),e=b([32,126]);function T(a,_){Array.isArray(a)&&(a=a.join(", "));var g,h={},o=16,t=.05;_&&(_.length===2&&typeof _[0]=="number"?g=b(_):Array.isArray(_)?g=_:(_.o?g=b(_.o):_.pairs&&(g=_.pairs),_.fontSize&&(o=_.fontSize),_.threshold!=null&&(t=_.threshold))),g||(g=e),L.font=o+"px "+a;for(var i=0;i<g.length;i++){var n=g[i],r=L.measureText(n[0]).width+L.measureText(n[1]).width,s=L.measureText(n).width;if(Math.abs(r-s)>o*t){var l=(s-r)/o;h[n]=1e3*l}}return h}function b(a){for(var _=[],g=a[0];g<=a[1];g++)for(var h=String.fromCharCode(g),o=a[0];o<a[1];o++){var t=h+String.fromCharCode(o);_.push(t)}return _}T.createPairs=b,T.ascii=e},31457:function(F,L,e){var T=e(65185),b=e(18625),a={M:"moveTo",C:"bezierCurveTo"};F.exports=function(_,g){_.beginPath(),b(T(g)).forEach(function(h){var o=h[0],t=h.slice(1);_[a[o]].apply(_,t)}),_.closePath()}},90660:function(F){F.exports=function(L){switch(L){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(F){function L(e,T,b){var a=0|e[b];if(a<=0)return[];var _,g=new Array(a);if(b===e.length-1)for(_=0;_<a;++_)g[_]=T;else for(_=0;_<a;++_)g[_]=L(e,T,b+1);return g}F.exports=function(e,T){switch(T===void 0&&(T=0),typeof e){case"number":if(e>0)return function(b,a){var _,g;for(_=new Array(b),g=0;g<b;++g)_[g]=a;return _}(0|e,T);break;case"object":if(typeof e.length=="number")return L(e,T,0)}return[]}},11474:function(F){function L(S,A,k){k=k||2;var C,P,R,O,X,D,V,j=A&&A.length,B=j?A[0]*k:S.length,W=e(S,0,B,k,!0),q=[];if(!W||W.next===W.prev)return q;if(j&&(W=function(ee,K,Y,$){var ne,ae,se,ce=[];for(ne=0,ae=K.length;ne<ae;ne++)(se=e(ee,K[ne]*$,ne<ae-1?K[ne+1]*$:ee.length,$,!1))===se.next&&(se.steiner=!0),ce.push(r(se));for(ce.sort(o),ne=0;ne<ce.length;ne++)t(ce[ne],Y),Y=T(Y,Y.next);return Y}(S,A,W,k)),S.length>80*k){C=R=S[0],P=O=S[1];for(var re=k;re<B;re+=k)(X=S[re])<C&&(C=X),(D=S[re+1])<P&&(P=D),X>R&&(R=X),D>O&&(O=D);V=(V=Math.max(R-C,O-P))!==0?1/V:0}return b(W,q,k,C,P,V),q}function e(S,A,k,C,P){var R,O;if(P===p(S,A,k,C)>0)for(R=A;R<k;R+=C)O=y(R,S[R],S[R+1],O);else for(R=k-C;R>=A;R-=C)O=y(R,S[R],S[R+1],O);return O&&d(O,O.next)&&(v(O),O=O.next),O}function T(S,A){if(!S)return S;A||(A=S);var k,C=S;do if(k=!1,C.steiner||!d(C,C.next)&&u(C.prev,C,C.next)!==0)C=C.next;else{if(v(C),(C=A=C.prev)===C.next)break;k=!0}while(k||C!==A);return A}function b(S,A,k,C,P,R,O){if(S){!O&&R&&function(j,B,W,q){var re=j;do re.z===null&&(re.z=n(re.x,re.y,B,W,q)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==j);re.prevZ.nextZ=null,re.prevZ=null,function(ee){var K,Y,$,ne,ae,se,ce,me,ye=1;do{for(Y=ee,ee=null,ae=null,se=0;Y;){for(se++,$=Y,ce=0,K=0;K<ye&&(ce++,$=$.nextZ);K++);for(me=ye;ce>0||me>0&&$;)ce!==0&&(me===0||!$||Y.z<=$.z)?(ne=Y,Y=Y.nextZ,ce--):(ne=$,$=$.nextZ,me--),ae?ae.nextZ=ne:ee=ne,ne.prevZ=ae,ae=ne;Y=$}ae.nextZ=null,ye*=2}while(se>1)}(re)}(S,C,P,R);for(var X,D,V=S;S.prev!==S.next;)if(X=S.prev,D=S.next,R?_(S,C,P,R):a(S))A.push(X.i/k),A.push(S.i/k),A.push(D.i/k),v(S),S=D.next,V=D.next;else if((S=D)===V){O?O===1?b(S=g(T(S),A,k),A,k,C,P,R,2):O===2&&h(S,A,k,C,P,R):b(T(S),A,k,C,P,R,1);break}}}function a(S){var A=S.prev,k=S,C=S.next;if(u(A,k,C)>=0)return!1;for(var P=S.next.next;P!==S.prev;){if(s(A.x,A.y,k.x,k.y,C.x,C.y,P.x,P.y)&&u(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function _(S,A,k,C){var P=S.prev,R=S,O=S.next;if(u(P,R,O)>=0)return!1;for(var X=P.x<R.x?P.x<O.x?P.x:O.x:R.x<O.x?R.x:O.x,D=P.y<R.y?P.y<O.y?P.y:O.y:R.y<O.y?R.y:O.y,V=P.x>R.x?P.x>O.x?P.x:O.x:R.x>O.x?R.x:O.x,j=P.y>R.y?P.y>O.y?P.y:O.y:R.y>O.y?R.y:O.y,B=n(X,D,A,k,C),W=n(V,j,A,k,C),q=S.prevZ,re=S.nextZ;q&&q.z>=B&&re&&re.z<=W;){if(q!==S.prev&&q!==S.next&&s(P.x,P.y,R.x,R.y,O.x,O.y,q.x,q.y)&&u(q.prev,q,q.next)>=0||(q=q.prevZ,re!==S.prev&&re!==S.next&&s(P.x,P.y,R.x,R.y,O.x,O.y,re.x,re.y)&&u(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;q&&q.z>=B;){if(q!==S.prev&&q!==S.next&&s(P.x,P.y,R.x,R.y,O.x,O.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;re&&re.z<=W;){if(re!==S.prev&&re!==S.next&&s(P.x,P.y,R.x,R.y,O.x,O.y,re.x,re.y)&&u(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function g(S,A,k){var C=S;do{var P=C.prev,R=C.next.next;!d(P,R)&&c(P,C,C.next,R)&&f(P,R)&&f(R,P)&&(A.push(P.i/k),A.push(C.i/k),A.push(R.i/k),v(C),v(C.next),C=S=R),C=C.next}while(C!==S);return T(C)}function h(S,A,k,C,P,R){var O=S;do{for(var X=O.next.next;X!==O.prev;){if(O.i!==X.i&&l(O,X)){var D=x(O,X);return O=T(O,O.next),D=T(D,D.next),b(O,A,k,C,P,R),void b(D,A,k,C,P,R)}X=X.next}O=O.next}while(O!==S)}function o(S,A){return S.x-A.x}function t(S,A){if(A=function(C,P){var R,O=P,X=C.x,D=C.y,V=-1/0;do{if(D<=O.y&&D>=O.next.y&&O.next.y!==O.y){var j=O.x+(D-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(j<=X&&j>V){if(V=j,j===X){if(D===O.y)return O;if(D===O.next.y)return O.next}R=O.x<O.next.x?O:O.next}}O=O.next}while(O!==P);if(!R)return null;if(X===V)return R;var B,W=R,q=R.x,re=R.y,ee=1/0;O=R;do X>=O.x&&O.x>=q&&X!==O.x&&s(D<re?X:V,D,q,re,D<re?V:X,D,O.x,O.y)&&(B=Math.abs(D-O.y)/(X-O.x),f(O,C)&&(B<ee||B===ee&&(O.x>R.x||O.x===R.x&&i(R,O)))&&(R=O,ee=B)),O=O.next;while(O!==W);return R}(S,A),A){var k=x(A,S);T(A,A.next),T(k,k.next)}}function i(S,A){return u(S.prev,S,A.prev)<0&&u(A.next,S,S.next)<0}function n(S,A,k,C,P){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-k)*P)|S<<8))|S<<4))|S<<2))|S<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-C)*P)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function r(S){var A=S,k=S;do(A.x<k.x||A.x===k.x&&A.y<k.y)&&(k=A),A=A.next;while(A!==S);return k}function s(S,A,k,C,P,R,O,X){return(P-O)*(A-X)-(S-O)*(R-X)>=0&&(S-O)*(C-X)-(k-O)*(A-X)>=0&&(k-O)*(R-X)-(P-O)*(C-X)>=0}function l(S,A){return S.next.i!==A.i&&S.prev.i!==A.i&&!function(k,C){var P=k;do{if(P.i!==k.i&&P.next.i!==k.i&&P.i!==C.i&&P.next.i!==C.i&&c(P,P.next,k,C))return!0;P=P.next}while(P!==k);return!1}(S,A)&&(f(S,A)&&f(A,S)&&function(k,C){var P=k,R=!1,O=(k.x+C.x)/2,X=(k.y+C.y)/2;do P.y>X!=P.next.y>X&&P.next.y!==P.y&&O<(P.next.x-P.x)*(X-P.y)/(P.next.y-P.y)+P.x&&(R=!R),P=P.next;while(P!==k);return R}(S,A)&&(u(S.prev,S,A.prev)||u(S,A.prev,A))||d(S,A)&&u(S.prev,S,S.next)>0&&u(A.prev,A,A.next)>0)}function u(S,A,k){return(A.y-S.y)*(k.x-A.x)-(A.x-S.x)*(k.y-A.y)}function d(S,A){return S.x===A.x&&S.y===A.y}function c(S,A,k,C){var P=m(u(S,A,k)),R=m(u(S,A,C)),O=m(u(k,C,S)),X=m(u(k,C,A));return P!==R&&O!==X||!(P!==0||!w(S,k,A))||!(R!==0||!w(S,C,A))||!(O!==0||!w(k,S,C))||!(X!==0||!w(k,A,C))}function w(S,A,k){return A.x<=Math.max(S.x,k.x)&&A.x>=Math.min(S.x,k.x)&&A.y<=Math.max(S.y,k.y)&&A.y>=Math.min(S.y,k.y)}function m(S){return S>0?1:S<0?-1:0}function f(S,A){return u(S.prev,S,S.next)<0?u(S,A,S.next)>=0&&u(S,S.prev,A)>=0:u(S,A,S.prev)<0||u(S,S.next,A)<0}function x(S,A){var k=new M(S.i,S.x,S.y),C=new M(A.i,A.x,A.y),P=S.next,R=A.prev;return S.next=A,A.prev=S,k.next=P,P.prev=k,C.next=k,k.prev=C,R.next=C,C.prev=R,C}function y(S,A,k,C){var P=new M(S,A,k);return C?(P.next=C.next,P.prev=C,C.next.prev=P,C.next=P):(P.prev=P,P.next=P),P}function v(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function M(S,A,k){this.i=S,this.x=A,this.y=k,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function p(S,A,k,C){for(var P=0,R=A,O=k-C;R<k;R+=C)P+=(S[O]-S[R])*(S[R+1]+S[O+1]),O=R;return P}F.exports=L,F.exports.default=L,L.deviation=function(S,A,k,C){var P=A&&A.length,R=P?A[0]*k:S.length,O=Math.abs(p(S,0,R,k));if(P)for(var X=0,D=A.length;X<D;X++){var V=A[X]*k,j=X<D-1?A[X+1]*k:S.length;O-=Math.abs(p(S,V,j,k))}var B=0;for(X=0;X<C.length;X+=3){var W=C[X]*k,q=C[X+1]*k,re=C[X+2]*k;B+=Math.abs((S[W]-S[re])*(S[q+1]-S[W+1])-(S[W]-S[q])*(S[re+1]-S[W+1]))}return O===0&&B===0?0:Math.abs((B-O)/O)},L.flatten=function(S){for(var A=S[0][0].length,k={vertices:[],holes:[],dimensions:A},C=0,P=0;P<S.length;P++){for(var R=0;R<S[P].length;R++)for(var O=0;O<A;O++)k.vertices.push(S[P][R][O]);P>0&&(C+=S[P-1].length,k.holes.push(C))}return k}},2502:function(F,L,e){var T=e(68664);F.exports=function(b,a){var _,g=[],h=[],o=[],t={},i=[];function n(f){o[f]=!1,t.hasOwnProperty(f)&&Object.keys(t[f]).forEach(function(x){delete t[f][x],o[x]&&n(x)})}function r(f){var x,y,v=!1;for(h.push(f),o[f]=!0,x=0;x<i[f].length;x++)(y=i[f][x])===_?(s(_,h),v=!0):o[y]||(v=r(y));if(v)n(f);else for(x=0;x<i[f].length;x++){y=i[f][x];var M=t[y];M||(M={},t[y]=M),M[y]=!0}return h.pop(),v}function s(f,x){var y=[].concat(x).concat(f);a?a(r):g.push(y)}function l(f){(function(k){for(var C=0;C<b.length;C++)C<k&&(b[C]=[]),b[C]=b[C].filter(function(P){return P>=k})})(f);for(var x,y=T(b).components.filter(function(k){return k.length>1}),v=1/0,M=0;M<y.length;M++)for(var p=0;p<y[M].length;p++)y[M][p]<v&&(v=y[M][p],x=M);var S=y[x];if(!S)return!1;var A=b.map(function(k,C){return S.indexOf(C)===-1?[]:k.filter(function(P){return S.indexOf(P)!==-1})});return{leastVertex:v,adjList:A}}_=0;for(var u=b.length;_<u;){var d=l(_);if(_=d.leastVertex,i=d.adjList){for(var c=0;c<i.length;c++)for(var w=0;w<i[c].length;w++){var m=i[c][w];o[+m]=!1,t[m]={}}r(_),_+=1}else _=u}return a?void 0:g}},16134:function(F,L,e){var T=e(36672);F.exports=function(){return T(this).length=0,this}},4892:function(F,L,e){F.exports=e(64404)()?Array.from:e(49441)},64404:function(F){F.exports=function(){var L,e,T=Array.from;return typeof T=="function"&&(e=T(L=["raz","dwa"]),!!(e&&e!==L&&e[1]==="dwa"))}},49441:function(F,L,e){var T=e(8260).iterator,b=e(73051),a=e(33717),_=e(35976),g=e(78513),h=e(36672),o=e(95296),t=e(87963),i=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;F.exports=function(l){var u,d,c,w,m,f,x,y,v,M,p=arguments[1],S=arguments[2];if(l=Object(h(l)),o(p)&&g(p),this&&this!==Array&&a(this))u=this;else{if(!p){if(b(l))return(m=l.length)!==1?Array.apply(null,l):((w=new Array(1))[0]=l[0],w);if(i(l)){for(w=new Array(m=l.length),d=0;d<m;++d)w[d]=l[d];return w}}w=[]}if(!i(l)){if((v=l[T])!==void 0){for(x=g(v).call(l),u&&(w=new u),y=x.next(),d=0;!y.done;)M=p?n.call(p,S,y.value,d):y.value,u?(r.value=M,s(w,d,r)):w[d]=M,y=x.next(),++d;m=d}else if(t(l)){for(m=l.length,u&&(w=new u),d=0,c=0;d<m;++d)M=l[d],d+1<m&&(f=M.charCodeAt(0))>=55296&&f<=56319&&(M+=l[++d]),M=p?n.call(p,S,M,c):M,u?(r.value=M,s(w,c,r)):w[c]=M,++c;m=c}}if(m===void 0)for(m=_(l.length),u&&(w=new u(m)),d=0;d<m;++d)M=p?n.call(p,S,l[d],d):l[d],u?(r.value=M,s(w,d,r)):w[d]=M;return u&&(r.value=null,w.length=m),w}},73051:function(F){var L=Object.prototype.toString,e=L.call(function(){return arguments}());F.exports=function(T){return L.call(T)===e}},33717:function(F){var L=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);F.exports=function(T){return typeof T=="function"&&e(L.call(T))}},52345:function(F){F.exports=function(){}},9953:function(F,L,e){F.exports=e(90436)()?Math.sign:e(6069)},90436:function(F){F.exports=function(){var L=Math.sign;return typeof L=="function"&&L(10)===1&&L(-20)===-1}},6069:function(F){F.exports=function(L){return L=Number(L),isNaN(L)||L===0?L:L>0?1:-1}},56247:function(F,L,e){var T=e(9953),b=Math.abs,a=Math.floor;F.exports=function(_){return isNaN(_)?0:(_=Number(_))!==0&&isFinite(_)?T(_)*a(b(_)):_}},35976:function(F,L,e){var T=e(56247),b=Math.max;F.exports=function(a){return b(0,T(a))}},67260:function(F,L,e){var T=e(78513),b=e(36672),a=Function.prototype.bind,_=Function.prototype.call,g=Object.keys,h=Object.prototype.propertyIsEnumerable;F.exports=function(o,t){return function(i,n){var r,s=arguments[2],l=arguments[3];return i=Object(b(i)),T(n),r=g(i),l&&r.sort(typeof l=="function"?a.call(l,i):void 0),typeof o!="function"&&(o=r[o]),_.call(o,r,function(u,d){return h.call(i,u)?_.call(n,s,i[u],u,i,d):t})}}},95879:function(F,L,e){F.exports=e(73583)()?Object.assign:e(34205)},73583:function(F){F.exports=function(){var L,e=Object.assign;return typeof e=="function"&&(e(L={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),L.foo+L.bar+L.trzy==="razdwatrzy")}},34205:function(F,L,e){var T=e(68700),b=e(36672),a=Math.max;F.exports=function(_,g){var h,o,t,i=a(arguments.length,2);for(_=Object(b(_)),t=function(n){try{_[n]=g[n]}catch(r){h||(h=r)}},o=1;o<i;++o)T(g=arguments[o]).forEach(t);if(h!==void 0)throw h;return _}},19012:function(F,L,e){var T=e(4892),b=e(95879),a=e(36672);F.exports=function(_){var g=Object(a(_)),h=arguments[1],o=Object(arguments[2]);if(g!==_&&!h)return g;var t={};return h?T(h,function(i){(o.ensure||i in _)&&(t[i]=_[i])}):b(t,_),t}},52818:function(F,L,e){var T,b,a,_,g=Object.create;e(33247)()||(T=e(51882)),F.exports=T?T.level!==1?g:(b={},a={},_={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(h){a[h]=h!=="__proto__"?_:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(b,a),Object.defineProperty(T,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:b}),function(h,o){return g(h===null?b:h,o)}):g},96437:function(F,L,e){F.exports=e(67260)("forEach")},99611:function(F,L,e){var T=e(95296),b={function:!0,object:!0};F.exports=function(a){return T(a)&&b[typeof a]||!1}},95296:function(F,L,e){var T=e(52345)();F.exports=function(b){return b!==T&&b!==null}},68700:function(F,L,e){F.exports=e(13895)()?Object.keys:e(25217)},13895:function(F){F.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(F,L,e){var T=e(95296),b=Object.keys;F.exports=function(a){return b(T(a)?Object(a):a)}},16906:function(F,L,e){var T=e(78513),b=e(96437),a=Function.prototype.call;F.exports=function(_,g){var h={},o=arguments[2];return T(g),b(_,function(t,i,n,r){h[i]=a.call(g,o,t,i,n,r)}),h}},21780:function(F,L,e){var T=e(95296),b=Array.prototype.forEach,a=Object.create;F.exports=function(_){var g=a(null);return b.call(arguments,function(h){T(h)&&function(o,t){var i;for(i in o)t[i]=o[i]}(Object(h),g)}),g}},1496:function(F,L,e){F.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function(F){var L=Object.create,e=Object.getPrototypeOf,T={};F.exports=function(){var b=Object.setPrototypeOf;return typeof b=="function"&&e(b((arguments[0]||L)(null),T))===T}},51882:function(F,L,e){var T,b,a,_,g=e(99611),h=e(36672),o=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};T=function(n,r){if(h(n),r===null||g(r))return n;throw new TypeError("Prototype must be null or an object")},F.exports=(b=function(){var n,r=Object.create(null),s={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(r,s)}catch{}if(Object.getPrototypeOf(r)===s)return{set:n,level:2}}return r.__proto__=s,Object.getPrototypeOf(r)===s?{level:2}:((r={}).__proto__=s,Object.getPrototypeOf(r)===s&&{level:1})}(),b?(b.level===2?b.set?(_=b.set,a=function(n,r){return _.call(T(n,r),r),n}):a=function(n,r){return T(n,r).__proto__=r,n}:a=function n(r,s){var l;return T(r,s),(l=o.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,s===null&&(s=n.nullPolyfill),r.__proto__=s,l&&t(n.nullPolyfill,"__proto__",i),r},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:b.level})):null),e(52818)},78513:function(F){F.exports=function(L){if(typeof L!="function")throw new TypeError(L+" is not a function");return L}},98976:function(F,L,e){var T=e(99611);F.exports=function(b){if(!T(b))throw new TypeError(b+" is not an Object");return b}},36672:function(F,L,e){var T=e(95296);F.exports=function(b){if(!T(b))throw new TypeError("Cannot use null or undefined");return b}},66741:function(F,L,e){F.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function(F){var L="razdwatrzy";F.exports=function(){return typeof L.contains=="function"&&L.contains("dwa")===!0&&L.contains("foo")===!1}},60381:function(F){var L=String.prototype.indexOf;F.exports=function(e){return L.call(this,e,arguments[1])>-1}},87963:function(F){var L=Object.prototype.toString,e=L.call("");F.exports=function(T){return typeof T=="string"||T&&typeof T=="object"&&(T instanceof String||L.call(T)===e)||!1}},43043:function(F){var L=Object.create(null),e=Math.random;F.exports=function(){var T;do T=e().toString(36).slice(2);while(L[T]);return T}},32411:function(F,L,e){var T,b=e(1496),a=e(66741),_=e(62072),g=e(8260),h=e(95426),o=Object.defineProperty;T=F.exports=function(t,i){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");h.call(this,t),i=i?a.call(i,"key+value")?"key+value":a.call(i,"key")?"key":"value":"value",o(this,"__kind__",_("",i))},b&&b(T,h),delete T.prototype.constructor,T.prototype=Object.create(h.prototype,{_resolve:_(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),o(T.prototype,g.toStringTag,_("c","Array Iterator"))},27515:function(F,L,e){var T=e(73051),b=e(78513),a=e(87963),_=e(66661),g=Array.isArray,h=Function.prototype.call,o=Array.prototype.some;F.exports=function(t,i){var n,r,s,l,u,d,c,w,m=arguments[2];if(g(t)||T(t)?n="array":a(t)?n="string":t=_(t),b(i),s=function(){l=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(h.call(i,m,r.value,s),l)return;r=t.next()}else for(d=t.length,u=0;u<d&&(c=t[u],u+1<d&&(w=c.charCodeAt(0))>=55296&&w<=56319&&(c+=t[++u]),h.call(i,m,c,s),!l);++u);else o.call(t,function(f){return h.call(i,m,f,s),l})}},66661:function(F,L,e){var T=e(73051),b=e(87963),a=e(32411),_=e(259),g=e(58095),h=e(8260).iterator;F.exports=function(o){return typeof g(o)[h]=="function"?o[h]():T(o)?new a(o):b(o)?new _(o):new a(o)}},95426:function(F,L,e){var T,b=e(16134),a=e(95879),_=e(78513),g=e(36672),h=e(62072),o=e(55174),t=e(8260),i=Object.defineProperty,n=Object.defineProperties;F.exports=T=function(r,s){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");n(this,{__list__:h("w",g(r)),__context__:h("w",s),__nextIndex__:h("w",0)}),s&&(_(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete T.prototype.constructor,n(T.prototype,a({_next:h(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:h(function(r){return this.__list__[r]}),_unBind:h(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},o({_onAdd:h(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,l){s>=r&&(this.__redo__[l]=++s)},this),this.__redo__.push(r)):i(this,"__redo__",h("c",[r])))}),_onDelete:h(function(r){var s;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((s=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(l,u){l>r&&(this.__redo__[u]=--l)},this)))}),_onClear:h(function(){this.__redo__&&b.call(this.__redo__),this.__nextIndex__=0})}))),i(T.prototype,t.iterator,h(function(){return this}))},35940:function(F,L,e){var T=e(73051),b=e(95296),a=e(87963),_=e(8260).iterator,g=Array.isArray;F.exports=function(h){return!(!b(h)||!g(h)&&!a(h)&&!T(h)&&typeof h[_]!="function")}},259:function(F,L,e){var T,b=e(1496),a=e(62072),_=e(8260),g=e(95426),h=Object.defineProperty;T=F.exports=function(o){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");o=String(o),g.call(this,o),h(this,"__length__",a("",o.length))},b&&b(T,g),delete T.prototype.constructor,T.prototype=Object.create(g.prototype,{_next:a(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:a(function(o){var t,i=this.__list__[o];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),h(T.prototype,_.toStringTag,a("c","String Iterator"))},58095:function(F,L,e){var T=e(35940);F.exports=function(b){if(!T(b))throw new TypeError(b+" is not iterable");return b}},73523:function(F){function L(e,T){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var b=Object(e),a=1;a<arguments.length;a++){var _=arguments[a];if(_!=null)for(var g=Object.keys(Object(_)),h=0,o=g.length;h<o;h++){var t=g[h],i=Object.getOwnPropertyDescriptor(_,t);i!==void 0&&i.enumerable&&(b[t]=_[t])}}return b}F.exports={assign:L,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:L})}}},8260:function(F,L,e){F.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function(F,L,e){var T=e(94908),b={object:!0,symbol:!0};F.exports=function(){var a,_=T.Symbol;if(typeof _!="function")return!1;a=_("test symbol");try{String(a)}catch{return!1}return!!b[typeof _.iterator]&&!!b[typeof _.toPrimitive]&&!!b[typeof _.toStringTag]}},82276:function(F){F.exports=function(L){return!!L&&(typeof L=="symbol"||!!L.constructor&&L.constructor.name==="Symbol"&&L[L.constructor.toStringTag]==="Symbol")}},29366:function(F,L,e){var T=e(62072),b=Object.create,a=Object.defineProperty,_=Object.prototype,g=b(null);F.exports=function(h){for(var o,t,i=0;g[h+(i||"")];)++i;return g[h+=i||""]=!0,a(_,o="@@"+h,T.gs(null,function(n){t||(t=!0,a(this,o,T(n)),t=!1)})),o}},92842:function(F,L,e){var T=e(62072),b=e(94908).Symbol;F.exports=function(a){return Object.defineProperties(a,{hasInstance:T("",b&&b.hasInstance||a("hasInstance")),isConcatSpreadable:T("",b&&b.isConcatSpreadable||a("isConcatSpreadable")),iterator:T("",b&&b.iterator||a("iterator")),match:T("",b&&b.match||a("match")),replace:T("",b&&b.replace||a("replace")),search:T("",b&&b.search||a("search")),species:T("",b&&b.species||a("species")),split:T("",b&&b.split||a("split")),toPrimitive:T("",b&&b.toPrimitive||a("toPrimitive")),toStringTag:T("",b&&b.toStringTag||a("toStringTag")),unscopables:T("",b&&b.unscopables||a("unscopables"))})}},13304:function(F,L,e){var T=e(62072),b=e(53308),a=Object.create(null);F.exports=function(_){return Object.defineProperties(_,{for:T(function(g){return a[g]?a[g]:a[g]=_(String(g))}),keyFor:T(function(g){var h;for(h in b(g),a)if(a[h]===g)return h})})}},18415:function(F,L,e){var T,b,a,_=e(62072),g=e(53308),h=e(94908).Symbol,o=e(29366),t=e(92842),i=e(13304),n=Object.create,r=Object.defineProperties,s=Object.defineProperty;if(typeof h=="function")try{String(h()),a=!0}catch{}else h=null;b=function(l){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return T(l)},F.exports=T=function l(u){var d;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return a?h(u):(d=n(b.prototype),u=u===void 0?"":String(u),r(d,{__description__:_("",u),__name__:_("",o(u))}))},t(T),i(T),r(b.prototype,{constructor:_(T),toString:_("",function(){return this.__name__})}),r(T.prototype,{toString:_(function(){return"Symbol ("+g(this).__description__+")"}),valueOf:_(function(){return g(this)})}),s(T.prototype,T.toPrimitive,_("",function(){var l=g(this);return typeof l=="symbol"?l:l.toString()})),s(T.prototype,T.toStringTag,_("c","Symbol")),s(b.prototype,T.toStringTag,_("c",T.prototype[T.toStringTag])),s(b.prototype,T.toPrimitive,_("c",T.prototype[T.toPrimitive]))},53308:function(F,L,e){var T=e(82276);F.exports=function(b){if(!T(b))throw new TypeError(b+" is not a symbol");return b}},83522:function(F,L,e){F.exports=e(96402)()?WeakMap:e(329)},96402:function(F){F.exports=function(){var L,e;if(typeof WeakMap!="function")return!1;try{L=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(L)==="[object WeakMap]"&&typeof L.set=="function"&&L.set({},1)===L&&typeof L.delete=="function"&&typeof L.has=="function"&&L.get(e)==="one"}},96416:function(F){F.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(F,L,e){var T,b=e(95296),a=e(1496),_=e(98976),g=e(36672),h=e(43043),o=e(62072),t=e(66661),i=e(27515),n=e(8260).toStringTag,r=e(96416),s=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf;F.exports=T=function(){var c,w=arguments[0];if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");return c=r&&a&&WeakMap!==T?a(new WeakMap,d(this)):this,b(w)&&(s(w)||(w=t(w))),l(c,"__weakMapData__",o("c","$weakMap$"+h())),w&&i(w,function(m){g(m),c.set(m[0],m[1])}),c},r&&(a&&a(T,WeakMap),T.prototype=Object.create(WeakMap.prototype,{constructor:o(T)})),Object.defineProperties(T.prototype,{delete:o(function(c){return!!u.call(_(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:o(function(c){if(u.call(_(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:o(function(c){return u.call(_(c),this.__weakMapData__)}),set:o(function(c,w){return l(_(c),this.__weakMapData__,o("c",w)),this}),toString:o(function(){return"[object WeakMap]"})}),l(T.prototype,n,o("c","WeakMap"))},15398:function(F){var L,e=typeof Reflect=="object"?Reflect:null,T=e&&typeof e.apply=="function"?e.apply:function(u,d,c){return Function.prototype.apply.call(u,d,c)};L=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var b=Number.isNaN||function(u){return u!=u};function a(){a.init.call(this)}F.exports=a,F.exports.once=function(u,d){return new Promise(function(c,w){function m(x){u.removeListener(d,f),w(x)}function f(){typeof u.removeListener=="function"&&u.removeListener("error",m),c([].slice.call(arguments))}l(u,d,f,{once:!0}),d!=="error"&&function(x,y,v){typeof x.on=="function"&&l(x,"error",y,{once:!0})}(u,m)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var _=10;function g(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function h(u){return u._maxListeners===void 0?a.defaultMaxListeners:u._maxListeners}function o(u,d,c,w){var m,f,x,y;if(g(c),(f=u._events)===void 0?(f=u._events=Object.create(null),u._eventsCount=0):(f.newListener!==void 0&&(u.emit("newListener",d,c.listener?c.listener:c),f=u._events),x=f[d]),x===void 0)x=f[d]=c,++u._eventsCount;else if(typeof x=="function"?x=f[d]=w?[c,x]:[x,c]:w?x.unshift(c):x.push(c),(m=h(u))>0&&x.length>m&&!x.warned){x.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=u,v.type=d,v.count=x.length,y=v,console&&console.warn&&console.warn(y)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,d,c){var w={fired:!1,wrapFn:void 0,target:u,type:d,listener:c},m=t.bind(w);return m.listener=c,w.wrapFn=m,m}function n(u,d,c){var w=u._events;if(w===void 0)return[];var m=w[d];return m===void 0?[]:typeof m=="function"?c?[m.listener||m]:[m]:c?function(f){for(var x=new Array(f.length),y=0;y<x.length;++y)x[y]=f[y].listener||f[y];return x}(m):s(m,m.length)}function r(u){var d=this._events;if(d!==void 0){var c=d[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function s(u,d){for(var c=new Array(d),w=0;w<d;++w)c[w]=u[w];return c}function l(u,d,c,w){if(typeof u.on=="function")w.once?u.once(d,c):u.on(d,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(d,function m(f){w.once&&u.removeEventListener(d,m),c(f)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(u){if(typeof u!="number"||u<0||b(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");_=u}}),a.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||b(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(u){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var w=u==="error",m=this._events;if(m!==void 0)w=w&&m.error===void 0;else if(!w)return!1;if(w){var f;if(d.length>0&&(f=d[0]),f instanceof Error)throw f;var x=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw x.context=f,x}var y=m[u];if(y===void 0)return!1;if(typeof y=="function")T(y,this,d);else{var v=y.length,M=s(y,v);for(c=0;c<v;++c)T(M[c],this,d)}return!0},a.prototype.addListener=function(u,d){return o(this,u,d,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,d){return o(this,u,d,!0)},a.prototype.once=function(u,d){return g(d),this.on(u,i(this,u,d)),this},a.prototype.prependOnceListener=function(u,d){return g(d),this.prependListener(u,i(this,u,d)),this},a.prototype.removeListener=function(u,d){var c,w,m,f,x;if(g(d),(w=this._events)===void 0)return this;if((c=w[u])===void 0)return this;if(c===d||c.listener===d)--this._eventsCount==0?this._events=Object.create(null):(delete w[u],w.removeListener&&this.emit("removeListener",u,c.listener||d));else if(typeof c!="function"){for(m=-1,f=c.length-1;f>=0;f--)if(c[f]===d||c[f].listener===d){x=c[f].listener,m=f;break}if(m<0)return this;m===0?c.shift():function(y,v){for(;v+1<y.length;v++)y[v]=y[v+1];y.pop()}(c,m),c.length===1&&(w[u]=c[0]),w.removeListener!==void 0&&this.emit("removeListener",u,x||d)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var d,c,w;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var m,f=Object.keys(c);for(w=0;w<f.length;++w)(m=f[w])!=="removeListener"&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(d=c[u])=="function")this.removeListener(u,d);else if(d!==void 0)for(w=d.length-1;w>=0;w--)this.removeListener(u,d[w]);return this},a.prototype.listeners=function(u){return n(this,u,!0)},a.prototype.rawListeners=function(u){return n(this,u,!1)},a.listenerCount=function(u,d){return typeof u.listenerCount=="function"?u.listenerCount(d):r.call(u,d)},a.prototype.listenerCount=r,a.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},60774:function(F){var L=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};F.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return L()}try{return __global__||L()}finally{delete Object.prototype.__global__}}()},94908:function(F,L,e){F.exports=e(51152)()?globalThis:e(60774)},51152:function(F){F.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(F,L,e){var T=e(18546);F.exports=function(b){var a=typeof b;if(a==="string"){var _=b;if((b=+b)==0&&T(_))return!1}else if(a!=="number")return!1;return b-b<1}},30120:function(F,L,e){var T=e(90660);F.exports=function(b,a,_){if(!b)throw new TypeError("must specify data as first parameter");if(_=0|+(_||0),Array.isArray(b)&&b[0]&&typeof b[0][0]=="number"){var g,h,o,t,i=b[0].length,n=b.length*i;a&&typeof a!="string"||(a=new(T(a||"float32"))(n+_));var r=a.length-_;if(n!==r)throw new Error("source length "+n+" ("+i+"x"+b.length+") does not match destination length "+r);for(g=0,o=_;g<b.length;g++)for(h=0;h<i;h++)a[o++]=b[g][h]===null?NaN:b[g][h]}else if(a&&typeof a!="string")a.set(b,_);else{var s=T(a||"float32");if(Array.isArray(b)||a==="array")for(g=0,o=_,t=(a=new s(b.length+_)).length;o<t;o++,g++)a[o]=b[g]===null?NaN:b[g];else _===0?a=new s(b):(a=new s(b.length+_)).set(b,_)}return a}},68016:function(F,L,e){var T=e(53313),b=[32,126];F.exports=function(a){var _=(a=a||{}).shape?a.shape:a.canvas?[a.canvas.width,a.canvas.height]:[512,512],g=a.canvas||document.createElement("canvas"),h=a.font,o=typeof a.step=="number"?[a.step,a.step]:a.step||[32,32],t=a.chars||b;if(h&&typeof h!="string"&&(h=T(h)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],n=t[0],r=0;n<=t[1];n++)i[r++]=String.fromCharCode(n);t=i}}else t=String(t).split("");_=_.slice(),g.width=_[0],g.height=_[1];var s=g.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,g.width,g.height),s.font=h,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var l=o[0]/2,u=o[1]/2;for(n=0;n<t.length;n++)s.fillText(t[n],l,u),(l+=o[0])>_[0]-o[0]/2&&(l=o[0]/2,u+=o[1]);return g}},32879:function(F){function L(a,_){_||(_={}),(typeof a=="string"||Array.isArray(a))&&(_.family=a);var g=Array.isArray(_.family)?_.family.join(", "):_.family;if(!g)throw Error("`family` must be defined");var h=_.size||_.fontSize||_.em||48,o=_.weight||_.fontWeight||"",t=(a=[_.style||_.fontStyle||"",o,h].join(" ")+"px "+g,_.origin||"top");if(L.cache[g]&&h<=L.cache[g].em)return e(L.cache[g],t);var i=_.canvas||L.canvas,n=i.getContext("2d"),r={upper:_.upper!==void 0?_.upper:"H",lower:_.lower!==void 0?_.lower:"x",descent:_.descent!==void 0?_.descent:"p",ascent:_.ascent!==void 0?_.ascent:"h",tittle:_.tittle!==void 0?_.tittle:"i",overshoot:_.overshoot!==void 0?_.overshoot:"O"},s=Math.ceil(1.5*h);i.height=s,i.width=.5*s,n.font=a;var l="H",u={top:0};n.clearRect(0,0,s,s),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var d=T(n.getImageData(0,0,s,s));n.clearRect(0,0,s,s),n.textBaseline="bottom",n.fillText(l,0,s);var c=T(n.getImageData(0,0,s,s));u.lineHeight=u.bottom=s-c+d,n.clearRect(0,0,s,s),n.textBaseline="alphabetic",n.fillText(l,0,s);var w=s-T(n.getImageData(0,0,s,s))-1+d;u.baseline=u.alphabetic=w,n.clearRect(0,0,s,s),n.textBaseline="middle",n.fillText(l,0,.5*s);var m=T(n.getImageData(0,0,s,s));u.median=u.middle=s-m-1+d-.5*s,n.clearRect(0,0,s,s),n.textBaseline="hanging",n.fillText(l,0,.5*s);var f=T(n.getImageData(0,0,s,s));u.hanging=s-f-1+d-.5*s,n.clearRect(0,0,s,s),n.textBaseline="ideographic",n.fillText(l,0,s);var x=T(n.getImageData(0,0,s,s));if(u.ideographic=s-x-1+d,r.upper&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.upper,0,0),u.upper=T(n.getImageData(0,0,s,s)),u.capHeight=u.baseline-u.upper),r.lower&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.lower,0,0),u.lower=T(n.getImageData(0,0,s,s)),u.xHeight=u.baseline-u.lower),r.tittle&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.tittle,0,0),u.tittle=T(n.getImageData(0,0,s,s))),r.ascent&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.ascent,0,0),u.ascent=T(n.getImageData(0,0,s,s))),r.descent&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.descent,0,0),u.descent=b(n.getImageData(0,0,s,s))),r.overshoot){n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(r.overshoot,0,0);var y=b(n.getImageData(0,0,s,s));u.overshoot=y-w}for(var v in u)u[v]/=h;return u.em=h,L.cache[g]=u,e(u,t)}function e(a,_){var g={};for(var h in typeof _=="string"&&(_=a[_]),a)h!=="em"&&(g[h]=a[h]-_);return g}function T(a){for(var _=a.height,g=a.data,h=3;h<g.length;h+=4)if(g[h]!==0)return Math.floor(.25*(h-3)/_)}function b(a){for(var _=a.height,g=a.data,h=g.length-1;h>0;h-=4)if(g[h]!==0)return Math.floor(.25*(h-3)/_)}F.exports=L,L.canvas=document.createElement("canvas"),L.cache={}},31353:function(F,L,e){var T=e(85395),b=Object.prototype.toString,a=Object.prototype.hasOwnProperty;F.exports=function(_,g,h){if(!T(g))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=h),b.call(_)==="[object Array]"?function(t,i,n){for(var r=0,s=t.length;r<s;r++)a.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(_,g,o):typeof _=="string"?function(t,i,n){for(var r=0,s=t.length;r<s;r++)n==null?i(t.charAt(r),r,t):i.call(n,t.charAt(r),r,t)}(_,g,o):function(t,i,n){for(var r in t)a.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(_,g,o)}},73047:function(F){var L=Array.prototype.slice,e=Object.prototype.toString;F.exports=function(T){var b=this;if(typeof b!="function"||e.call(b)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var a,_=L.call(arguments,1),g=Math.max(0,b.length-_.length),h=[],o=0;o<g;o++)h.push("$"+o);if(a=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof a){var i=b.apply(this,_.concat(L.call(arguments)));return Object(i)===i?i:this}return b.apply(T,_.concat(L.call(arguments)))}),b.prototype){var t=function(){};t.prototype=b.prototype,a.prototype=new t,t.prototype=null}return a}},77575:function(F,L,e){var T=e(73047);F.exports=Function.prototype.bind||T},86249:function(F){F.exports=function(L,e){if(typeof L!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var T=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(T.width=e.width),typeof e.height=="number"&&(T.height=e.height);var b,a=e;try{var _=[L];L.indexOf("webgl")===0&&_.push("experimental-"+L);for(var g=0;g<_.length;g++)if(b=T.getContext(_[g],a))return b}catch{b=null}return b||null}},68318:function(F,L,e){var T,b=SyntaxError,a=Function,_=TypeError,g=function(k){try{return a('"use strict"; return ('+k+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var o=function(){throw new _},t=h?function(){try{return o}catch{try{return h(arguments,"callee").get}catch{return o}}}():o,i=e(57877)(),n=Object.getPrototypeOf||function(k){return k.__proto__},r={},s=typeof Uint8Array>"u"?T:n(Uint8Array),l={"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":i?n([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":r,"%AsyncGenerator%":r,"%AsyncGeneratorFunction%":r,"%AsyncIteratorPrototype%":r,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":r,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?n(n([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i?n(new Map()[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i?n(new Set()[Symbol.iterator]()):T,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i?n(""[Symbol.iterator]()):T,"%Symbol%":i?Symbol:T,"%SyntaxError%":b,"%ThrowTypeError%":t,"%TypedArray%":s,"%TypeError%":_,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};try{null.error}catch(k){var u=n(n(k));l["%Error.prototype%"]=u}var d=function k(C){var P;if(C==="%AsyncFunction%")P=g("async function () {}");else if(C==="%GeneratorFunction%")P=g("function* () {}");else if(C==="%AsyncGeneratorFunction%")P=g("async function* () {}");else if(C==="%AsyncGenerator%"){var R=k("%AsyncGeneratorFunction%");R&&(P=R.prototype)}else if(C==="%AsyncIteratorPrototype%"){var O=k("%AsyncGenerator%");O&&(P=n(O.prototype))}return l[C]=P,P},c={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=e(77575),m=e(35065),f=w.call(Function.call,Array.prototype.concat),x=w.call(Function.apply,Array.prototype.splice),y=w.call(Function.call,String.prototype.replace),v=w.call(Function.call,String.prototype.slice),M=w.call(Function.call,RegExp.prototype.exec),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,A=function(k,C){var P,R=k;if(m(c,R)&&(R="%"+(P=c[R])[0]+"%"),m(l,R)){var O=l[R];if(O===r&&(O=d(R)),O===void 0&&!C)throw new _("intrinsic "+k+" exists, but is not available. Please file an issue!");return{alias:P,name:R,value:O}}throw new b("intrinsic "+k+" does not exist!")};F.exports=function(k,C){if(typeof k!="string"||k.length===0)throw new _("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new _('"allowMissing" argument must be a boolean');if(M(/^%?[^%]*%?$/,k)===null)throw new b("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(Y){var $=v(Y,0,1),ne=v(Y,-1);if($==="%"&&ne!=="%")throw new b("invalid intrinsic syntax, expected closing `%`");if(ne==="%"&&$!=="%")throw new b("invalid intrinsic syntax, expected opening `%`");var ae=[];return y(Y,p,function(se,ce,me,ye){ae[ae.length]=me?y(ye,S,"$1"):ce||se}),ae}(k),R=P.length>0?P[0]:"",O=A("%"+R+"%",C),X=O.name,D=O.value,V=!1,j=O.alias;j&&(R=j[0],x(P,f([0,1],j)));for(var B=1,W=!0;B<P.length;B+=1){var q=P[B],re=v(q,0,1),ee=v(q,-1);if((re==='"'||re==="'"||re==="`"||ee==='"'||ee==="'"||ee==="`")&&re!==ee)throw new b("property names with quotes must have matching quotes");if(q!=="constructor"&&W||(V=!0),m(l,X="%"+(R+="."+q)+"%"))D=l[X];else if(D!=null){if(!(q in D)){if(!C)throw new _("base intrinsic for "+k+" exists, but the property is not available.");return}if(h&&B+1>=P.length){var K=h(D,q);D=(W=!!K)&&"get"in K&&!("originalValue"in K.get)?K.get:D[q]}else W=m(D,q),D=D[q];W&&!V&&(l[X]=D)}}return D}},85400:function(F){F.exports=function(L,e){var T=e[0],b=e[1],a=e[2],_=e[3],g=e[4],h=e[5],o=e[6],t=e[7],i=e[8],n=e[9],r=e[10],s=e[11],l=e[12],u=e[13],d=e[14],c=e[15];return L[0]=h*(r*c-s*d)-n*(o*c-t*d)+u*(o*s-t*r),L[1]=-(b*(r*c-s*d)-n*(a*c-_*d)+u*(a*s-_*r)),L[2]=b*(o*c-t*d)-h*(a*c-_*d)+u*(a*t-_*o),L[3]=-(b*(o*s-t*r)-h*(a*s-_*r)+n*(a*t-_*o)),L[4]=-(g*(r*c-s*d)-i*(o*c-t*d)+l*(o*s-t*r)),L[5]=T*(r*c-s*d)-i*(a*c-_*d)+l*(a*s-_*r),L[6]=-(T*(o*c-t*d)-g*(a*c-_*d)+l*(a*t-_*o)),L[7]=T*(o*s-t*r)-g*(a*s-_*r)+i*(a*t-_*o),L[8]=g*(n*c-s*u)-i*(h*c-t*u)+l*(h*s-t*n),L[9]=-(T*(n*c-s*u)-i*(b*c-_*u)+l*(b*s-_*n)),L[10]=T*(h*c-t*u)-g*(b*c-_*u)+l*(b*t-_*h),L[11]=-(T*(h*s-t*n)-g*(b*s-_*n)+i*(b*t-_*h)),L[12]=-(g*(n*d-r*u)-i*(h*d-o*u)+l*(h*r-o*n)),L[13]=T*(n*d-r*u)-i*(b*d-a*u)+l*(b*r-a*n),L[14]=-(T*(h*d-o*u)-g*(b*d-a*u)+l*(b*o-a*h)),L[15]=T*(h*r-o*n)-g*(b*r-a*n)+i*(b*o-a*h),L}},42331:function(F){F.exports=function(L){var e=new Float32Array(16);return e[0]=L[0],e[1]=L[1],e[2]=L[2],e[3]=L[3],e[4]=L[4],e[5]=L[5],e[6]=L[6],e[7]=L[7],e[8]=L[8],e[9]=L[9],e[10]=L[10],e[11]=L[11],e[12]=L[12],e[13]=L[13],e[14]=L[14],e[15]=L[15],e}},31042:function(F){F.exports=function(L,e){return L[0]=e[0],L[1]=e[1],L[2]=e[2],L[3]=e[3],L[4]=e[4],L[5]=e[5],L[6]=e[6],L[7]=e[7],L[8]=e[8],L[9]=e[9],L[10]=e[10],L[11]=e[11],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15],L}},11902:function(F){F.exports=function(){var L=new Float32Array(16);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},89887:function(F){F.exports=function(L){var e=L[0],T=L[1],b=L[2],a=L[3],_=L[4],g=L[5],h=L[6],o=L[7],t=L[8],i=L[9],n=L[10],r=L[11],s=L[12],l=L[13],u=L[14],d=L[15];return(e*g-T*_)*(n*d-r*u)-(e*h-b*_)*(i*d-r*l)+(e*o-a*_)*(i*u-n*l)+(T*h-b*g)*(t*d-r*s)-(T*o-a*g)*(t*u-n*s)+(b*o-a*h)*(t*l-i*s)}},27812:function(F){F.exports=function(L,e){var T=e[0],b=e[1],a=e[2],_=e[3],g=T+T,h=b+b,o=a+a,t=T*g,i=b*g,n=b*h,r=a*g,s=a*h,l=a*o,u=_*g,d=_*h,c=_*o;return L[0]=1-n-l,L[1]=i+c,L[2]=r-d,L[3]=0,L[4]=i-c,L[5]=1-t-l,L[6]=s+u,L[7]=0,L[8]=r+d,L[9]=s-u,L[10]=1-t-n,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},34045:function(F){F.exports=function(L,e,T){var b,a,_,g=T[0],h=T[1],o=T[2],t=Math.sqrt(g*g+h*h+o*o);return Math.abs(t)<1e-6?null:(g*=t=1/t,h*=t,o*=t,b=Math.sin(e),_=1-(a=Math.cos(e)),L[0]=g*g*_+a,L[1]=h*g*_+o*b,L[2]=o*g*_-h*b,L[3]=0,L[4]=g*h*_-o*b,L[5]=h*h*_+a,L[6]=o*h*_+g*b,L[7]=0,L[8]=g*o*_+h*b,L[9]=h*o*_-g*b,L[10]=o*o*_+a,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L)}},45973:function(F){F.exports=function(L,e,T){var b=e[0],a=e[1],_=e[2],g=e[3],h=b+b,o=a+a,t=_+_,i=b*h,n=b*o,r=b*t,s=a*o,l=a*t,u=_*t,d=g*h,c=g*o,w=g*t;return L[0]=1-(s+u),L[1]=n+w,L[2]=r-c,L[3]=0,L[4]=n-w,L[5]=1-(i+u),L[6]=l+d,L[7]=0,L[8]=r+c,L[9]=l-d,L[10]=1-(i+s),L[11]=0,L[12]=T[0],L[13]=T[1],L[14]=T[2],L[15]=1,L}},81472:function(F){F.exports=function(L,e){return L[0]=e[0],L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=e[1],L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=e[2],L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},14669:function(F){F.exports=function(L,e){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=e[0],L[13]=e[1],L[14]=e[2],L[15]=1,L}},75262:function(F){F.exports=function(L,e){var T=Math.sin(e),b=Math.cos(e);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=b,L[6]=T,L[7]=0,L[8]=0,L[9]=-T,L[10]=b,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},331:function(F){F.exports=function(L,e){var T=Math.sin(e),b=Math.cos(e);return L[0]=b,L[1]=0,L[2]=-T,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=T,L[9]=0,L[10]=b,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},11049:function(F){F.exports=function(L,e){var T=Math.sin(e),b=Math.cos(e);return L[0]=b,L[1]=T,L[2]=0,L[3]=0,L[4]=-T,L[5]=b,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},75195:function(F){F.exports=function(L,e,T,b,a,_,g){var h=1/(T-e),o=1/(a-b),t=1/(_-g);return L[0]=2*_*h,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=2*_*o,L[6]=0,L[7]=0,L[8]=(T+e)*h,L[9]=(a+b)*o,L[10]=(g+_)*t,L[11]=-1,L[12]=0,L[13]=0,L[14]=g*_*2*t,L[15]=0,L}},71551:function(F){F.exports=function(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}},79576:function(F,L,e){F.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function(F){F.exports=function(L,e){var T=e[0],b=e[1],a=e[2],_=e[3],g=e[4],h=e[5],o=e[6],t=e[7],i=e[8],n=e[9],r=e[10],s=e[11],l=e[12],u=e[13],d=e[14],c=e[15],w=T*h-b*g,m=T*o-a*g,f=T*t-_*g,x=b*o-a*h,y=b*t-_*h,v=a*t-_*o,M=i*u-n*l,p=i*d-r*l,S=i*c-s*l,A=n*d-r*u,k=n*c-s*u,C=r*c-s*d,P=w*C-m*k+f*A+x*S-y*p+v*M;return P?(P=1/P,L[0]=(h*C-o*k+t*A)*P,L[1]=(a*k-b*C-_*A)*P,L[2]=(u*v-d*y+c*x)*P,L[3]=(r*y-n*v-s*x)*P,L[4]=(o*S-g*C-t*p)*P,L[5]=(T*C-a*S+_*p)*P,L[6]=(d*f-l*v-c*m)*P,L[7]=(i*v-r*f+s*m)*P,L[8]=(g*k-h*S+t*M)*P,L[9]=(b*S-T*k-_*M)*P,L[10]=(l*y-u*f+c*w)*P,L[11]=(n*f-i*y-s*w)*P,L[12]=(h*p-g*A-o*M)*P,L[13]=(T*A-b*p+a*M)*P,L[14]=(u*m-l*x-d*w)*P,L[15]=(i*x-n*m+r*w)*P,L):null}},65551:function(F,L,e){var T=e(71551);F.exports=function(b,a,_,g){var h,o,t,i,n,r,s,l,u,d,c=a[0],w=a[1],m=a[2],f=g[0],x=g[1],y=g[2],v=_[0],M=_[1],p=_[2];return Math.abs(c-v)<1e-6&&Math.abs(w-M)<1e-6&&Math.abs(m-p)<1e-6?T(b):(s=c-v,l=w-M,u=m-p,h=x*(u*=d=1/Math.sqrt(s*s+l*l+u*u))-y*(l*=d),o=y*(s*=d)-f*u,t=f*l-x*s,(d=Math.sqrt(h*h+o*o+t*t))?(h*=d=1/d,o*=d,t*=d):(h=0,o=0,t=0),i=l*t-u*o,n=u*h-s*t,r=s*o-l*h,(d=Math.sqrt(i*i+n*n+r*r))?(i*=d=1/d,n*=d,r*=d):(i=0,n=0,r=0),b[0]=h,b[1]=i,b[2]=s,b[3]=0,b[4]=o,b[5]=n,b[6]=l,b[7]=0,b[8]=t,b[9]=r,b[10]=u,b[11]=0,b[12]=-(h*c+o*w+t*m),b[13]=-(i*c+n*w+r*m),b[14]=-(s*c+l*w+u*m),b[15]=1,b)}},91362:function(F){F.exports=function(L,e,T){var b=e[0],a=e[1],_=e[2],g=e[3],h=e[4],o=e[5],t=e[6],i=e[7],n=e[8],r=e[9],s=e[10],l=e[11],u=e[12],d=e[13],c=e[14],w=e[15],m=T[0],f=T[1],x=T[2],y=T[3];return L[0]=m*b+f*h+x*n+y*u,L[1]=m*a+f*o+x*r+y*d,L[2]=m*_+f*t+x*s+y*c,L[3]=m*g+f*i+x*l+y*w,m=T[4],f=T[5],x=T[6],y=T[7],L[4]=m*b+f*h+x*n+y*u,L[5]=m*a+f*o+x*r+y*d,L[6]=m*_+f*t+x*s+y*c,L[7]=m*g+f*i+x*l+y*w,m=T[8],f=T[9],x=T[10],y=T[11],L[8]=m*b+f*h+x*n+y*u,L[9]=m*a+f*o+x*r+y*d,L[10]=m*_+f*t+x*s+y*c,L[11]=m*g+f*i+x*l+y*w,m=T[12],f=T[13],x=T[14],y=T[15],L[12]=m*b+f*h+x*n+y*u,L[13]=m*a+f*o+x*r+y*d,L[14]=m*_+f*t+x*s+y*c,L[15]=m*g+f*i+x*l+y*w,L}},60378:function(F){F.exports=function(L,e,T,b,a,_,g){var h=1/(e-T),o=1/(b-a),t=1/(_-g);return L[0]=-2*h,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*o,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*t,L[11]=0,L[12]=(e+T)*h,L[13]=(a+b)*o,L[14]=(g+_)*t,L[15]=1,L}},7864:function(F){F.exports=function(L,e,T,b,a){var _=1/Math.tan(e/2),g=1/(b-a);return L[0]=_/T,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=_,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=(a+b)*g,L[11]=-1,L[12]=0,L[13]=0,L[14]=2*a*b*g,L[15]=0,L}},35279:function(F){F.exports=function(L,e,T,b){var a=Math.tan(e.upDegrees*Math.PI/180),_=Math.tan(e.downDegrees*Math.PI/180),g=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),o=2/(g+h),t=2/(a+_);return L[0]=o,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=t,L[6]=0,L[7]=0,L[8]=-(g-h)*o*.5,L[9]=(a-_)*t*.5,L[10]=b/(T-b),L[11]=-1,L[12]=0,L[13]=0,L[14]=b*T/(T-b),L[15]=0,L}},65074:function(F){F.exports=function(L,e,T,b){var a,_,g,h,o,t,i,n,r,s,l,u,d,c,w,m,f,x,y,v,M,p,S,A,k=b[0],C=b[1],P=b[2],R=Math.sqrt(k*k+C*C+P*P);return Math.abs(R)<1e-6?null:(k*=R=1/R,C*=R,P*=R,a=Math.sin(T),g=1-(_=Math.cos(T)),h=e[0],o=e[1],t=e[2],i=e[3],n=e[4],r=e[5],s=e[6],l=e[7],u=e[8],d=e[9],c=e[10],w=e[11],m=k*k*g+_,f=C*k*g+P*a,x=P*k*g-C*a,y=k*C*g-P*a,v=C*C*g+_,M=P*C*g+k*a,p=k*P*g+C*a,S=C*P*g-k*a,A=P*P*g+_,L[0]=h*m+n*f+u*x,L[1]=o*m+r*f+d*x,L[2]=t*m+s*f+c*x,L[3]=i*m+l*f+w*x,L[4]=h*y+n*v+u*M,L[5]=o*y+r*v+d*M,L[6]=t*y+s*v+c*M,L[7]=i*y+l*v+w*M,L[8]=h*p+n*S+u*A,L[9]=o*p+r*S+d*A,L[10]=t*p+s*S+c*A,L[11]=i*p+l*S+w*A,e!==L&&(L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L)}},35545:function(F){F.exports=function(L,e,T){var b=Math.sin(T),a=Math.cos(T),_=e[4],g=e[5],h=e[6],o=e[7],t=e[8],i=e[9],n=e[10],r=e[11];return e!==L&&(L[0]=e[0],L[1]=e[1],L[2]=e[2],L[3]=e[3],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[4]=_*a+t*b,L[5]=g*a+i*b,L[6]=h*a+n*b,L[7]=o*a+r*b,L[8]=t*a-_*b,L[9]=i*a-g*b,L[10]=n*a-h*b,L[11]=r*a-o*b,L}},94918:function(F){F.exports=function(L,e,T){var b=Math.sin(T),a=Math.cos(T),_=e[0],g=e[1],h=e[2],o=e[3],t=e[8],i=e[9],n=e[10],r=e[11];return e!==L&&(L[4]=e[4],L[5]=e[5],L[6]=e[6],L[7]=e[7],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[0]=_*a-t*b,L[1]=g*a-i*b,L[2]=h*a-n*b,L[3]=o*a-r*b,L[8]=_*b+t*a,L[9]=g*b+i*a,L[10]=h*b+n*a,L[11]=o*b+r*a,L}},15692:function(F){F.exports=function(L,e,T){var b=Math.sin(T),a=Math.cos(T),_=e[0],g=e[1],h=e[2],o=e[3],t=e[4],i=e[5],n=e[6],r=e[7];return e!==L&&(L[8]=e[8],L[9]=e[9],L[10]=e[10],L[11]=e[11],L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15]),L[0]=_*a+t*b,L[1]=g*a+i*b,L[2]=h*a+n*b,L[3]=o*a+r*b,L[4]=t*a-_*b,L[5]=i*a-g*b,L[6]=n*a-h*b,L[7]=r*a-o*b,L}},10789:function(F){F.exports=function(L,e,T){var b=T[0],a=T[1],_=T[2];return L[0]=e[0]*b,L[1]=e[1]*b,L[2]=e[2]*b,L[3]=e[3]*b,L[4]=e[4]*a,L[5]=e[5]*a,L[6]=e[6]*a,L[7]=e[7]*a,L[8]=e[8]*_,L[9]=e[9]*_,L[10]=e[10]*_,L[11]=e[11]*_,L[12]=e[12],L[13]=e[13],L[14]=e[14],L[15]=e[15],L}},6726:function(F){F.exports=function(L){return"mat4("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+", "+L[9]+", "+L[10]+", "+L[11]+", "+L[12]+", "+L[13]+", "+L[14]+", "+L[15]+")"}},31283:function(F){F.exports=function(L,e,T){var b,a,_,g,h,o,t,i,n,r,s,l,u=T[0],d=T[1],c=T[2];return e===L?(L[12]=e[0]*u+e[4]*d+e[8]*c+e[12],L[13]=e[1]*u+e[5]*d+e[9]*c+e[13],L[14]=e[2]*u+e[6]*d+e[10]*c+e[14],L[15]=e[3]*u+e[7]*d+e[11]*c+e[15]):(b=e[0],a=e[1],_=e[2],g=e[3],h=e[4],o=e[5],t=e[6],i=e[7],n=e[8],r=e[9],s=e[10],l=e[11],L[0]=b,L[1]=a,L[2]=_,L[3]=g,L[4]=h,L[5]=o,L[6]=t,L[7]=i,L[8]=n,L[9]=r,L[10]=s,L[11]=l,L[12]=b*u+h*d+n*c+e[12],L[13]=a*u+o*d+r*c+e[13],L[14]=_*u+t*d+s*c+e[14],L[15]=g*u+i*d+l*c+e[15]),L}},88654:function(F){F.exports=function(L,e){if(L===e){var T=e[1],b=e[2],a=e[3],_=e[6],g=e[7],h=e[11];L[1]=e[4],L[2]=e[8],L[3]=e[12],L[4]=T,L[6]=e[9],L[7]=e[13],L[8]=b,L[9]=_,L[11]=e[14],L[12]=a,L[13]=g,L[14]=h}else L[0]=e[0],L[1]=e[4],L[2]=e[8],L[3]=e[12],L[4]=e[1],L[5]=e[5],L[6]=e[9],L[7]=e[13],L[8]=e[2],L[9]=e[6],L[10]=e[10],L[11]=e[14],L[12]=e[3],L[13]=e[7],L[14]=e[11],L[15]=e[15];return L}},42505:function(F,L,e){var T=e(72791),b=e(71299),a=e(98580),_=e(12018),g=e(83522),h=e(25075),o=e(68016),t=e(58404),i=e(18863),n=e(10973),r=e(25677),s=e(75686),l=e(53545),u=e(56131),d=e(32879),c=e(30120),w=e(13547).nextPow2,m=new g,f=!1;if(document.body){var x=document.body.appendChild(document.createElement("div"));x.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(x).fontStretch&&(f=!0),document.body.removeChild(x)}var y=function(v){(function(M){return typeof M=="function"&&M._gl&&M.prop&&M.texture&&M.buffer})(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=_(v),this.shader=m.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||a({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),m.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(v)?v:{})};y.prototype.createShader=function(){var v=this.regl,M=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(p,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(p,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(p,S){return S.atlas.texture},charStep:function(p,S){return S.atlas.step},em:function(p,S){return S.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:v,draw:M,atlas:{}}},y.prototype.update=function(v){var M=this;if(typeof v=="string")v={text:v};else if(!v)return;(v=b(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(ie){return parseFloat(ie)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=i(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=c(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||v.font||(v.font=y.baseFontSize+"px sans-serif");var p,S=!1,A=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(ie,ge){if(typeof ie=="string")try{ie=T.parse(ie)}catch{ie=T.parse(y.baseFontSize+"px "+ie)}else ie=T.parse(T.stringify(ie));var Ae=T.stringify({size:y.baseFontSize,family:ie.family,stretch:f?ie.stretch:void 0,variant:ie.variant,weight:ie.weight,style:ie.style}),we=r(ie.size),Ne=Math.round(we[0]*s(we[1]));if(Ne!==M.fontSize[ge]&&(A=!0,M.fontSize[ge]=Ne),!(M.font[ge]&&Ae==M.font[ge].baseString||(S=!0,M.font[ge]=y.fonts[Ae],M.font[ge]))){var He=ie.family.join(", "),de=[ie.style];ie.style!=ie.variant&&de.push(ie.variant),ie.variant!=ie.weight&&de.push(ie.weight),f&&ie.weight!=ie.stretch&&de.push(ie.stretch),M.font[ge]={baseString:Ae,family:He,weight:ie.weight,stretch:ie.stretch,style:ie.style,variant:ie.variant,width:{},kerning:{},metrics:d(He,{origin:"top",fontSize:y.baseFontSize,fontStyle:de.join(" ")})},y.fonts[Ae]=M.font[ge]}}),(S||A)&&this.font.forEach(function(ie,ge){var Ae=T.stringify({size:M.fontSize[ge],family:ie.family,stretch:f?ie.stretch:void 0,variant:ie.variant,weight:ie.weight,style:ie.style});if(M.fontAtlas[ge]=M.shader.atlas[Ae],!M.fontAtlas[ge]){var we=ie.metrics;M.shader.atlas[Ae]=M.fontAtlas[ge]={fontString:Ae,step:2*Math.ceil(M.fontSize[ge]*we.bottom*.5),em:M.fontSize[ge],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:M.regl.texture()}}v.text==null&&(v.text=M.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var k=Array(.5*v.position.length),C=0;C<k.length;C++)k[C]=v.text;v.text=k}if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var P=1;P<v.text.length;P++)this.textOffsets[P]=this.textOffsets[P-1]+v.text[P-1].length,this.count+=v.text[P].length,this.counts.push(v.text[P].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];p=[],this.font.forEach(function(ie,ge){y.atlasContext.font=ie.baseString;for(var Ae=M.fontAtlas[ge],we=0;we<M.text.length;we++){var Ne=M.text.charAt(we);if(Ae.ids[Ne]==null&&(Ae.ids[Ne]=Ae.chars.length,Ae.chars.push(Ne),p.push(Ne)),ie.width[Ne]==null&&(ie.width[Ne]=y.atlasContext.measureText(Ne).width/y.baseFontSize,M.kerning)){var He=[];for(var de in ie.width)He.push(de+Ne,Ne+de);u(ie.kerning,l(ie.family,{pairs:He}))}}})}if(v.position)if(v.position.length>2){for(var R=!v.position[0].length,O=t.mallocFloat(2*this.count),X=0,D=0;X<this.counts.length;X++){var V=this.counts[X];if(R)for(var j=0;j<V;j++)O[D++]=v.position[2*X],O[D++]=v.position[2*X+1];else for(var B=0;B<V;B++)O[D++]=v.position[X][0],O[D++]=v.position[X][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),t.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var W=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,ee=0;re<this.counts.length;re++){for(var K=this.counts[re],Y=this.font[re]||this.font[0],$=this.fontAtlas[re]||this.fontAtlas[0],ne=0;ne<K;ne++){var ae=this.text.charAt(ee),se=this.text.charAt(ee-1);if(W[ee]=$.ids[ae],q[2*ee]=Y.width[ae],ne){var ce=q[2*ee-2],me=q[2*ee],ye=q[2*ee-1]+.5*ce+.5*me;if(this.kerning){var Te=Y.kerning[se+ae];Te&&(ye+=.001*Te)}q[2*ee+1]=ye}else q[2*ee+1]=.5*q[2*ee];ee++}this.textWidth.push(q.length?.5*q[2*ee-2]+q[2*ee-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:W,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(W),t.freeFloat(q),p.length&&this.font.forEach(function(ie,ge){var Ae=M.fontAtlas[ge],we=Ae.step,Ne=Math.floor(y.maxAtlasSize/we),He=Math.min(Ne,Ae.chars.length),de=Math.ceil(Ae.chars.length/He),Le=w(He*we),Ee=w(de*we);Ae.width=Le,Ae.height=Ee,Ae.rows=de,Ae.cols=He,Ae.em&&Ae.texture({data:o({canvas:y.atlasCanvas,font:Ae.fontString,chars:Ae.chars,shape:[Le,Ee],step:[we,we]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(ie,ge){var Ae=Array.isArray(M.align)?M.align.length>1?M.align[ge]:M.align[0]:M.align;if(typeof Ae=="number")return Ae;switch(Ae){case"right":case"end":return-ie;case"center":case"centre":case"middle":return .5*-ie}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ie,ge){var Ae=(M.font[ge]||M.font[0]).metrics,we=0;return we+=.5*Ae.bottom,-1*(we+=typeof ie=="number"?ie-Ae.baseline:-Ae[ie])})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color!="string"&&isNaN(v.color)){var Ce;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var pe=v.color.length;Ce=t.mallocUint8(pe);for(var fe=(v.color.subarray||v.color.slice).bind(v.color),Oe=0;Oe<pe;Oe+=4)Ce.set(h(fe(Oe,Oe+4),"uint8"),Oe)}else{var Se=v.color.length;Ce=t.mallocUint8(4*Se);for(var Me=0;Me<Se;Me++)Ce.set(h(v.color[Me]||0,"uint8"),4*Me)}this.color=Ce}else this.color=h(v.color,"uint8");if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ue=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ue);for(var le=0;le<this.batch.length;le++)this.batch[le]={count:this.counts.length>1?this.counts[le]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[le]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*le,4*le+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[le]:this.opacity,baseline:this.baselineOffset[le]!=null?this.baselineOffset[le]:this.baselineOffset[0],align:this.align?this.alignOffset[le]!=null?this.alignOffset[le]:this.alignOffset[0]:0,atlas:this.fontAtlas[le]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*le,2*le+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},F.exports=y},12018:function(F,L,e){var T=e(71299);function b(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*e.g.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*e.g.innerHeight);else{var h=g.container.getBoundingClientRect();g.canvas.width=g.width||h.right-h.left,g.canvas.height=g.height||h.bottom-h.top}}function a(g){return typeof g.getContext=="function"&&"width"in g&&"height"in g}function _(){var g=document.createElement("canvas");return g.style.position="absolute",g.style.top=0,g.style.left=0,g}F.exports=function(g){var h;if(g?typeof g=="string"&&(g={container:g}):g={},(g=a(g)||typeof(h=g).nodeName=="string"&&typeof h.appendChild=="function"&&typeof h.getBoundingClientRect=="function"?{container:g}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(g)?{gl:g}:T(g,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(g.pixelRatio=e.g.pixelRatio||1),g.gl)return g.gl;if(g.canvas&&(g.container=g.canvas.parentNode),g.container){if(typeof g.container=="string"){var o=document.querySelector(g.container);if(!o)throw Error("Element "+g.container+" is not found");g.container=o}a(g.container)?(g.canvas=g.container,g.container=g.canvas.parentNode):g.canvas||(g.canvas=_(),g.container.appendChild(g.canvas),b(g))}else if(!g.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");g.container=document.body||document.documentElement,g.canvas=_(),g.container.appendChild(g.canvas),b(g)}return g.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{g.gl=g.canvas.getContext(t,g.attrs)}catch{}return g.gl}),g.gl}},56068:function(F){F.exports=function(L){typeof L=="string"&&(L=[L]);for(var e=[].slice.call(arguments,1),T=[],b=0;b<L.length-1;b++)T.push(L[b],e[b]||"");return T.push(L[b]),T.join("")}},40383:function(F,L,e){var T=e(68318)("%Object.getOwnPropertyDescriptor%",!0);if(T)try{T([],"length")}catch{T=null}F.exports=T},57035:function(F,L,e){var T,b=e(54404);T=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:b,F.exports=T},38520:function(F,L,e){var T=e(54404);F.exports=T&&function(){var b=!1;try{var a=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{b=!1}return b}()},55622:function(F,L,e){var T=e(68318)("%Object.defineProperty%",!0),b=function(){if(T)try{return T({},"a",{value:1}),!0}catch{return!1}return!1};b.hasArrayLengthDefineBug=function(){if(!b())return null;try{return T([],"length",{value:1}).length!==1}catch{return!0}},F.exports=b},57877:function(F,L,e){var T=typeof Symbol<"u"&&Symbol,b=e(35638);F.exports=function(){return typeof T=="function"&&typeof Symbol=="function"&&typeof T("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&b()}},35638:function(F){F.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var L={},e=Symbol("test"),T=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(T)!=="[object Symbol]")return!1;for(e in L[e]=42,L)return!1;if(typeof Object.keys=="function"&&Object.keys(L).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(L).length!==0)return!1;var b=Object.getOwnPropertySymbols(L);if(b.length!==1||b[0]!==e||!Object.prototype.propertyIsEnumerable.call(L,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(L,e);if(a.value!==42||a.enumerable!==!0)return!1}return!0}},84543:function(F,L,e){var T=e(35638);F.exports=function(){return T()&&!!Symbol.toStringTag}},35065:function(F,L,e){var T=e(77575);F.exports=T.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(F,L){L.read=function(e,T,b,a,_){var g,h,o=8*_-a-1,t=(1<<o)-1,i=t>>1,n=-7,r=b?_-1:0,s=b?-1:1,l=e[T+r];for(r+=s,g=l&(1<<-n)-1,l>>=-n,n+=o;n>0;g=256*g+e[T+r],r+=s,n-=8);for(h=g&(1<<-n)-1,g>>=-n,n+=a;n>0;h=256*h+e[T+r],r+=s,n-=8);if(g===0)g=1-i;else{if(g===t)return h?NaN:1/0*(l?-1:1);h+=Math.pow(2,a),g-=i}return(l?-1:1)*h*Math.pow(2,g-a)},L.write=function(e,T,b,a,_,g){var h,o,t,i=8*g-_-1,n=(1<<i)-1,r=n>>1,s=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=a?0:g-1,u=a?1:-1,d=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(o=isNaN(T)?1:0,h=n):(h=Math.floor(Math.log(T)/Math.LN2),T*(t=Math.pow(2,-h))<1&&(h--,t*=2),(T+=h+r>=1?s/t:s*Math.pow(2,1-r))*t>=2&&(h++,t/=2),h+r>=n?(o=0,h=n):h+r>=1?(o=(T*t-1)*Math.pow(2,_),h+=r):(o=T*Math.pow(2,r-1)*Math.pow(2,_),h=0));_>=8;e[b+l]=255&o,l+=u,o/=256,_-=8);for(h=h<<_|o,i+=_;i>0;e[b+l]=255&h,l+=u,h/=256,i-=8);e[b+l-u]|=128*d}},42018:function(F){typeof Object.create=="function"?F.exports=function(L,e){e&&(L.super_=e,L.prototype=Object.create(e.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}))}:F.exports=function(L,e){if(e){L.super_=e;var T=function(){};T.prototype=e.prototype,L.prototype=new T,L.prototype.constructor=L}}},47216:function(F,L,e){var T=e(84543)(),b=e(6614)("Object.prototype.toString"),a=function(h){return!(T&&h&&typeof h=="object"&&Symbol.toStringTag in h)&&b(h)==="[object Arguments]"},_=function(h){return!!a(h)||h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&b(h)!=="[object Array]"&&b(h.callee)==="[object Function]"},g=function(){return a(arguments)}();a.isLegacyArguments=_,F.exports=g?a:_},54404:function(F){F.exports=!0},85395:function(F){var L,e,T=Function.prototype.toString,b=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof b=="function"&&typeof Object.defineProperty=="function")try{L=Object.defineProperty({},"length",{get:function(){throw e}}),e={},b(function(){throw 42},null,L)}catch(r){r!==e&&(b=null)}else b=null;var a=/^\s*class\b/,_=function(r){try{var s=T.call(r);return a.test(s)}catch{return!1}},g=function(r){try{return!_(r)&&(T.call(r),!0)}catch{return!1}},h=Object.prototype.toString,o=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var n=document.all;h.call(n)===h.call(document.all)&&(i=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var s=h.call(r);return(s==="[object HTMLAllCollection]"||s==="[object HTML document.all class]"||s==="[object HTMLCollection]"||s==="[object Object]")&&r("")==null}catch{}return!1})}F.exports=b?function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{b(r,null,L)}catch(s){if(s!==e)return!1}return!_(r)&&g(r)}:function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(o)return g(r);if(_(r))return!1;var s=h.call(r);return!(s!=="[object Function]"&&s!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(s))&&g(r)}},65481:function(F,L,e){var T,b=Object.prototype.toString,a=Function.prototype.toString,_=/^\s*(?:function)?\*/,g=e(84543)(),h=Object.getPrototypeOf;F.exports=function(o){if(typeof o!="function")return!1;if(_.test(a.call(o)))return!0;if(!g)return b.call(o)==="[object GeneratorFunction]";if(!h)return!1;if(T===void 0){var t=function(){if(!g)return!1;try{return Function("return function*() {}")()}catch{}}();T=!!t&&h(t)}return h(o)===T}},62683:function(F){F.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(F){F.exports=function(L){return L!=L}},15567:function(F,L,e){var T=e(68222),b=e(17045),a=e(64274),_=e(14922),g=e(22442),h=T(_(),Number);b(h,{getPolyfill:_,implementation:a,shim:g}),F.exports=h},14922:function(F,L,e){var T=e(64274);F.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:T}},22442:function(F,L,e){var T=e(17045),b=e(14922);F.exports=function(){var a=b();return T(Number,{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a}},64941:function(F){F.exports=function(L){var e=typeof L;return L!==null&&(e==="object"||e==="function")}},10973:function(F){var L=Object.prototype.toString;F.exports=function(e){var T;return L.call(e)==="[object Object]"&&((T=Object.getPrototypeOf(e))===null||T===Object.getPrototypeOf({}))}},18546:function(F){F.exports=function(L){for(var e,T=L.length,b=0;b<T;b++)if(((e=L.charCodeAt(b))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function(F){F.exports=function(L){return typeof L=="string"&&(L=L.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(L)&&/[\dz]$/i.test(L)&&L.length>4))}},9187:function(F,L,e){var T=e(31353),b=e(72077),a=e(6614),_=a("Object.prototype.toString"),g=e(84543)(),h=e(40383),o=typeof globalThis>"u"?e.g:globalThis,t=b(),i=a("Array.prototype.indexOf",!0)||function(l,u){for(var d=0;d<l.length;d+=1)if(l[d]===u)return d;return-1},n=a("String.prototype.slice"),r={},s=Object.getPrototypeOf;g&&h&&s&&T(t,function(l){var u=new o[l];if(Symbol.toStringTag in u){var d=s(u),c=h(d,Symbol.toStringTag);if(!c){var w=s(d);c=h(w,Symbol.toStringTag)}r[l]=c.get}}),F.exports=function(l){if(!l||typeof l!="object")return!1;if(!g||!(Symbol.toStringTag in l)){var u=n(_(l),8,-1);return i(t,u)>-1}return!!h&&function(d){var c=!1;return T(r,function(w,m){if(!c)try{c=w.call(d)===m}catch{}}),c}(l)}},44517:function(F){F.exports=function(){var L,e,T;function b(a,_){if(L)if(e){var g="var sharedChunk = {}; ("+L+")(sharedChunk); ("+e+")(sharedChunk);",h={};L(h),(T=_(h)).workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))}else e=_;else L=_}return b(0,function(a){function _(E,z){return E(z={exports:{}},z.exports),z.exports}var g="1.10.1",h=o;function o(E,z,Z,he){this.cx=3*E,this.bx=3*(Z-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(he-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=he,this.p2x=Z,this.p2y=he}o.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},o.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},o.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},o.prototype.solveCurveX=function(E,z){var Z,he,Ie,Ue,We;for(z===void 0&&(z=1e-6),Ie=E,We=0;We<8;We++){if(Ue=this.sampleCurveX(Ie)-E,Math.abs(Ue)<z)return Ie;var it=this.sampleCurveDerivativeX(Ie);if(Math.abs(it)<1e-6)break;Ie-=Ue/it}if((Ie=E)<(Z=0))return Z;if(Ie>(he=1))return he;for(;Z<he;){if(Ue=this.sampleCurveX(Ie),Math.abs(Ue-E)<z)return Ie;E>Ue?Z=Ie:he=Ie,Ie=.5*(he-Z)+Z}return Ie},o.prototype.solve=function(E,z){return this.sampleCurveY(this.solveCurveX(E,z))};var t=i;function i(E,z){this.x=E,this.y=z}function n(E,z,Z,he){var Ie=new h(E,z,Z,he);return function(Ue){return Ie.solve(Ue)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,z){return this.clone()._rotateAround(E,z)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var z=E.x-this.x,Z=E.y-this.y;return z*z+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,z){return Math.atan2(this.x*z-this.y*E,this.x*E+this.y*z)},_matMult:function(E){var z=E[0]*this.x+E[1]*this.y,Z=E[2]*this.x+E[3]*this.y;return this.x=z,this.y=Z,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var z=Math.cos(E),Z=Math.sin(E),he=z*this.x-Z*this.y,Ie=Z*this.x+z*this.y;return this.x=he,this.y=Ie,this},_rotateAround:function(E,z){var Z=Math.cos(E),he=Math.sin(E),Ie=z.x+Z*(this.x-z.x)-he*(this.y-z.y),Ue=z.y+he*(this.x-z.x)+Z*(this.y-z.y);return this.x=Ie,this.y=Ue,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(E){return E instanceof i?E:Array.isArray(E)?new i(E[0],E[1]):E};var r=n(.25,.1,.25,1);function s(E,z,Z){return Math.min(Z,Math.max(z,E))}function l(E,z,Z){var he=Z-z,Ie=((E-z)%he+he)%he+z;return Ie===z?Z:Ie}function u(E){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var he=0,Ie=z;he<Ie.length;he+=1){var Ue=Ie[he];for(var We in Ue)E[We]=Ue[We]}return E}var d=1;function c(){return d++}function w(){return function E(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}()}function m(E){return!!E&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E)}function f(E,z){E.forEach(function(Z){z[Z]&&(z[Z]=z[Z].bind(z))})}function x(E,z){return E.indexOf(z,E.length-z.length)!==-1}function y(E,z,Z){var he={};for(var Ie in E)he[Ie]=z.call(Z||this,E[Ie],Ie,E);return he}function v(E,z,Z){var he={};for(var Ie in E)z.call(Z||this,E[Ie],Ie,E)&&(he[Ie]=E[Ie]);return he}function M(E){return Array.isArray(E)?E.map(M):typeof E=="object"&&E?y(E,M):E}var p={};function S(E){p[E]||(typeof console<"u"&&console.warn(E),p[E]=!0)}function A(E,z,Z){return(Z.y-E.y)*(z.x-E.x)>(z.y-E.y)*(Z.x-E.x)}function k(E){for(var z=0,Z=0,he=E.length,Ie=he-1,Ue=void 0,We=void 0;Z<he;Ie=Z++)Ue=E[Z],z+=((We=E[Ie]).x-Ue.x)*(Ue.y+We.y);return z}function C(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function P(E){var z={};if(E.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(he,Ie,Ue,We){var it=Ue||We;return z[Ie]=!it||it.toLowerCase(),""}),z["max-age"]){var Z=parseInt(z["max-age"],10);isNaN(Z)?delete z["max-age"]:z["max-age"]=Z}return z}var R=null;function O(E){if(R==null){var z=E.navigator?E.navigator.userAgent:null;R=!!E.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return R}function X(E){try{var z=self[E];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch{return!1}}var D,V,j,B,W=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),q=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,re=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ee={now:W,frame:function(E){var z=q(E);return{cancel:function(){return re(z)}}},getImageData:function(E,z){z===void 0&&(z=0);var Z=self.document.createElement("canvas"),he=Z.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return Z.width=E.width,Z.height=E.height,he.drawImage(E,0,0,E.width,E.height),he.getImageData(-z,-z,E.width+2*z,E.height+2*z)},resolveURL:function(E){return D||(D=self.document.createElement("a")),D.href=E,D.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(V==null&&(V=self.matchMedia("(prefers-reduced-motion: reduce)")),V.matches)}},K={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(E){!$&&B&&(ne?ae(E):j=E)}},$=!1,ne=!1;function ae(E){var z=E.createTexture();E.bindTexture(E.TEXTURE_2D,z);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,B),E.isContextLost())return;Y.supported=!0}catch{}E.deleteTexture(z),$=!0}self.document&&((B=self.document.createElement("img")).onload=function(){j&&ae(j),j=null,ne=!0},B.onerror=function(){$=!0,j=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var se="01",ce=function(E,z){this._transformRequestFn=E,this._customAccessToken=z,this._createSkuToken()};function me(E){return E.indexOf("mapbox:")===0}ce.prototype._createSkuToken=function(){var E=function(){for(var z="",Z=0;Z<10;Z++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",se,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=E.token,this._skuTokenExpiresAt=E.tokenExpiresAt},ce.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ce.prototype.transformRequest=function(E,z){return this._transformRequestFn&&this._transformRequestFn(E,z)||{url:E}},ce.prototype.normalizeStyleURL=function(E,z){if(!me(E))return E;var Z=pe(E);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},ce.prototype.normalizeGlyphsURL=function(E,z){if(!me(E))return E;var Z=pe(E);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},ce.prototype.normalizeSourceURL=function(E,z){if(!me(E))return E;var Z=pe(E);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||z)},ce.prototype.normalizeSpriteURL=function(E,z,Z,he){var Ie=pe(E);return me(E)?(Ie.path="/styles/v1"+Ie.path+"/sprite"+z+Z,this._makeAPIURL(Ie,this._customAccessToken||he)):(Ie.path+=""+z+Z,fe(Ie))},ce.prototype.normalizeTileURL=function(E,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),E&&!me(E))return E;var Z=pe(E),he=ee.devicePixelRatio>=2||z===512?"@2x":"",Ie=Y.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+he+Ie),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Ue=this._customAccessToken||function(We){for(var it=0,ft=We;it<ft.length;it+=1){var At=ft[it].match(/^access_token=(.*)$/);if(At)return At[1]}return null}(Z.params)||K.ACCESS_TOKEN;return K.REQUIRE_ACCESS_TOKEN&&Ue&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Ue)},ce.prototype.canonicalizeTileURL=function(E,z){var Z=pe(E);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return E;var he="mapbox://tiles/";he+=Z.path.replace("/v4/","");var Ie=Z.params;return z&&(Ie=Ie.filter(function(Ue){return!Ue.match(/^access_token=/)})),Ie.length&&(he+="?"+Ie.join("&")),he},ce.prototype.canonicalizeTileset=function(E,z){for(var Z=!!z&&me(z),he=[],Ie=0,Ue=E.tiles||[];Ie<Ue.length;Ie+=1){var We=Ue[Ie];Te(We)?he.push(this.canonicalizeTileURL(We,Z)):he.push(We)}return he},ce.prototype._makeAPIURL=function(E,z){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=pe(K.API_URL);if(E.protocol=he.protocol,E.authority=he.authority,he.path!=="/"&&(E.path=""+he.path+E.path),!K.REQUIRE_ACCESS_TOKEN)return fe(E);if(!(z=z||K.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(z[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return E.params=E.params.filter(function(Ie){return Ie.indexOf("access_token")===-1}),E.params.push("access_token="+z),fe(E)};var ye=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Te(E){return ye.test(E)}var Ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pe(E){var z=E.match(Ce);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function fe(E){var z=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+z}var Oe="mapbox.eventData";function Se(E){if(!E)return null;var z,Z=E.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((z=Z[1],decodeURIComponent(self.atob(z).split("").map(function(he){return"%"+("00"+he.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var Me=function(E){this.type=E,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Me.prototype.getStorageKey=function(E){var z,Z,he=Se(K.ACCESS_TOKEN);return z=he&&he.u?(Z=he.u,self.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(Ie,Ue){return String.fromCharCode(+("0x"+Ue))}))):K.ACCESS_TOKEN||"",E?Oe+"."+E+":"+z:Oe+":"+z},Me.prototype.fetchEventData=function(){var E=X("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(E)try{var he=self.localStorage.getItem(z);he&&(this.eventData=JSON.parse(he));var Ie=self.localStorage.getItem(Z);Ie&&(this.anonId=Ie)}catch{S("Unable to read from LocalStorage")}},Me.prototype.saveEventData=function(){var E=X("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(E)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},Me.prototype.processRequests=function(E){},Me.prototype.postEvent=function(E,z,Z,he){var Ie=this;if(K.EVENTS_URL){var Ue=pe(K.EVENTS_URL);Ue.params.push("access_token="+(he||K.ACCESS_TOKEN||""));var We={event:this.type,created:new Date(E).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:g,skuId:se,userId:this.anonId},it=z?u(We,z):We,ft={url:fe(Ue),headers:{"Content-Type":"text/plain"},body:JSON.stringify([it])};this.pendingRequest=kt(ft,function(At){Ie.pendingRequest=null,Z(At),Ie.saveEventData(),Ie.processRequests(he)})}},Me.prototype.queueRequest=function(E,z){this.queue.push(E),this.processRequests(z)};var ue,le,ie=function(E){function z(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.postMapLoadEvent=function(Z,he,Ie,Ue){this.skuToken=Ie,(K.EVENTS_URL&&Ue||K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(We){return me(We)||Te(We)}))&&this.queueRequest({id:he,timestamp:Date.now()},Ue)},z.prototype.processRequests=function(Z){var he=this;if(!this.pendingRequest&&this.queue.length!==0){var Ie=this.queue.shift(),Ue=Ie.id,We=Ie.timestamp;Ue&&this.success[Ue]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=w()),this.postEvent(We,{skuToken:this.skuToken},function(it){it||Ue&&(he.success[Ue]=!0)},Z))}},z}(Me),ge=function(E){function z(Z){E.call(this,"appUserTurnstile"),this._customAccessToken=Z}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.postTurnstileEvent=function(Z,he){K.EVENTS_URL&&K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Ie){return me(Ie)||Te(Ie)})&&this.queueRequest(Date.now(),he)},z.prototype.processRequests=function(Z){var he=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ie=Se(K.ACCESS_TOKEN),Ue=Ie?Ie.u:K.ACCESS_TOKEN,We=Ue!==this.eventData.tokenU;m(this.anonId)||(this.anonId=w(),We=!0);var it=this.queue.shift();if(this.eventData.lastSuccess){var ft=new Date(this.eventData.lastSuccess),At=new Date(it),St=(it-this.eventData.lastSuccess)/864e5;We=We||St>=1||St<-1||ft.getDate()!==At.getDate()}else We=!0;if(!We)return this.processRequests();this.postEvent(it,{"enabled.telemetry":!1},function(Ft){Ft||(he.eventData.lastSuccess=it,he.eventData.tokenU=Ue)},Z)}},z}(Me),Ae=new ge,we=Ae.postTurnstileEvent.bind(Ae),Ne=new ie,He=Ne.postMapLoadEvent.bind(Ne),de="mapbox-tiles",Le=500,Ee=50,Re=42e4;function je(){self.caches&&!ue&&(ue=self.caches.open(de))}function Fe(E,z,Z){if(je(),ue){var he={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Ue,We){return he.headers.set(We,Ue)});var Ie=P(z.headers.get("Cache-Control")||"");Ie["no-store"]||(Ie["max-age"]&&he.headers.set("Expires",new Date(Z+1e3*Ie["max-age"]).toUTCString()),new Date(he.headers.get("Expires")).getTime()-Z<Re||function(Ue,We){if(le===void 0)try{new Response(new ReadableStream),le=!0}catch{le=!1}le?We(Ue.body):Ue.blob().then(We)}(z,function(Ue){var We=new self.Response(Ue,he);je(),ue&&ue.then(function(it){return it.put(Xe(E.url),We)}).catch(function(it){return S(it.message)})}))}}function Xe(E){var z=E.indexOf("?");return z<0?E:E.slice(0,z)}function Ze(E,z){if(je(),!ue)return z(null);var Z=Xe(E.url);ue.then(function(he){he.match(Z).then(function(Ie){var Ue=function(We){if(!We)return!1;var it=new Date(We.headers.get("Expires")||0),ft=P(We.headers.get("Cache-Control")||"");return it>Date.now()&&!ft["no-cache"]}(Ie);he.delete(Z),Ue&&he.put(Z,Ie.clone()),z(null,Ie,Ue)}).catch(z)}).catch(z)}var at,lt=1/0;function ot(){return at==null&&(at=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),at}var bt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bt);var wt=function(E){function z(Z,he,Ie){he===401&&Te(Ie)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,Z),this.status=he,this.url=Ie,this.name=this.constructor.name,this.message=Z}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),ht=C()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function ct(E,z){var Z,he=new self.AbortController,Ie=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:ht(),signal:he.signal}),Ue=!1,We=!1,it=(Z=Ie.url).indexOf("sku=")>0&&Te(Z);E.type==="json"&&Ie.headers.set("Accept","application/json");var ft=function(St,Ft,Wt){if(!We){if(St&&St.message!=="SecurityError"&&S(St),Ft&&Wt)return At(Ft);var jt=Date.now();self.fetch(Ie).then(function(on){if(on.ok){var un=it?on.clone():null;return At(on,un,jt)}return z(new wt(on.statusText,on.status,E.url))}).catch(function(on){on.code!==20&&z(new Error(on.message))})}},At=function(St,Ft,Wt){(E.type==="arrayBuffer"?St.arrayBuffer():E.type==="json"?St.json():St.text()).then(function(jt){We||(Ft&&Wt&&Fe(Ie,Ft,Wt),Ue=!0,z(null,jt,St.headers.get("Cache-Control"),St.headers.get("Expires")))}).catch(function(jt){We||z(new Error(jt.message))})};return it?Ze(Ie,ft):ft(null,null),{cancel:function(){We=!0,Ue||he.abort()}}}var Tt=function(E,z){if(Z=E.url,!(/^file:/.test(Z)||/^file:/.test(ht())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ct(E,z);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",E,z,void 0,!0)}var Z;return function(he,Ie){var Ue=new self.XMLHttpRequest;for(var We in Ue.open(he.method||"GET",he.url,!0),he.type==="arrayBuffer"&&(Ue.responseType="arraybuffer"),he.headers)Ue.setRequestHeader(We,he.headers[We]);return he.type==="json"&&(Ue.responseType="text",Ue.setRequestHeader("Accept","application/json")),Ue.withCredentials=he.credentials==="include",Ue.onerror=function(){Ie(new Error(Ue.statusText))},Ue.onload=function(){if((Ue.status>=200&&Ue.status<300||Ue.status===0)&&Ue.response!==null){var it=Ue.response;if(he.type==="json")try{it=JSON.parse(Ue.response)}catch(ft){return Ie(ft)}Ie(null,it,Ue.getResponseHeader("Cache-Control"),Ue.getResponseHeader("Expires"))}else Ie(new wt(Ue.statusText,Ue.status,he.url))},Ue.send(he.body),{cancel:function(){return Ue.abort()}}}(E,z)},Lt=function(E,z){return Tt(u(E,{type:"arrayBuffer"}),z)},kt=function(E,z){return Tt(u(E,{method:"POST"}),z)},Ot,Pt;Ot=[],Pt=0;var et=function(E,z){if(Y.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),Pt>=K.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:E,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(Z),Z}Pt++;var he=!1,Ie=function(){if(!he)for(he=!0,Pt--;Ot.length&&Pt<K.MAX_PARALLEL_IMAGE_REQUESTS;){var We=Ot.shift(),it=We.requestParameters,ft=We.callback;We.cancelled||(We.cancel=et(it,ft).cancel)}},Ue=Lt(E,function(We,it,ft,At){Ie(),We?z(We):it&&(ot()?function(St,Ft){var Wt=new self.Blob([new Uint8Array(St)],{type:"image/png"});self.createImageBitmap(Wt).then(function(jt){Ft(null,jt)}).catch(function(jt){Ft(new Error("Could not load image because of "+jt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(it,z):function(St,Ft,Wt,jt){var on=new self.Image,un=self.URL;on.onload=function(){Ft(null,on),un.revokeObjectURL(on.src)},on.onerror=function(){return Ft(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var En=new self.Blob([new Uint8Array(St)],{type:"image/png"});on.cacheControl=Wt,on.expires=jt,on.src=St.byteLength?un.createObjectURL(En):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(it,z,ft,At))});return{cancel:function(){Ue.cancel(),Ie()}}};function nt(E,z,Z){Z[E]&&Z[E].indexOf(z)!==-1||(Z[E]=Z[E]||[],Z[E].push(z))}function Ye(E,z,Z){if(Z&&Z[E]){var he=Z[E].indexOf(z);he!==-1&&Z[E].splice(he,1)}}var tt=function(E,z){z===void 0&&(z={}),u(this,z),this.type=E},ut=function(E){function z(Z,he){he===void 0&&(he={}),E.call(this,"error",u({error:Z},he))}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z}(tt),Ke=function(){};Ke.prototype.on=function(E,z){return this._listeners=this._listeners||{},nt(E,z,this._listeners),this},Ke.prototype.off=function(E,z){return Ye(E,z,this._listeners),Ye(E,z,this._oneTimeListeners),this},Ke.prototype.once=function(E,z){return this._oneTimeListeners=this._oneTimeListeners||{},nt(E,z,this._oneTimeListeners),this},Ke.prototype.fire=function(E,z){typeof E=="string"&&(E=new tt(E,z||{}));var Z=E.type;if(this.listens(Z)){E.target=this;for(var he=0,Ie=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];he<Ie.length;he+=1)Ie[he].call(this,E);for(var Ue=0,We=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Ue<We.length;Ue+=1){var it=We[Ue];Ye(Z,it,this._oneTimeListeners),it.call(this,E)}var ft=this._eventedParent;ft&&(u(E,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ft.fire(E))}else E instanceof ut&&console.error(E.error);return this},Ke.prototype.listens=function(E){return this._listeners&&this._listeners[E]&&this._listeners[E].length>0||this._oneTimeListeners&&this._oneTimeListeners[E]&&this._oneTimeListeners[E].length>0||this._eventedParent&&this._eventedParent.listens(E)},Ke.prototype.setEventedParent=function(E,z){return this._eventedParent=E,this._eventedParentData=z,this};var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Be=function(E,z,Z,he){this.message=(E?E+": ":"")+Z,he&&(this.identifier=he),z!=null&&z.__line__&&(this.line=z.__line__)};function Qe(E){var z=E.key,Z=E.value;return Z?[new Be(z,Z,"constants have been deprecated as of v8")]:[]}function rt(E){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var he=0,Ie=z;he<Ie.length;he+=1){var Ue=Ie[he];for(var We in Ue)E[We]=Ue[We]}return E}function vt(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function mt(E){if(Array.isArray(E))return E.map(mt);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var z={};for(var Z in E)z[Z]=mt(E[Z]);return z}return vt(E)}var xt=function(E){function z(Z,he){E.call(this,he),this.message=he,this.key=Z}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z}(Error),dt=function(E,z){z===void 0&&(z=[]),this.parent=E,this.bindings={};for(var Z=0,he=z;Z<he.length;Z+=1){var Ie=he[Z],Ue=Ie[0],We=Ie[1];this.bindings[Ue]=We}};dt.prototype.concat=function(E){return new dt(this,E)},dt.prototype.get=function(E){if(this.bindings[E])return this.bindings[E];if(this.parent)return this.parent.get(E);throw new Error(E+" not found in scope.")},dt.prototype.has=function(E){return!!this.bindings[E]||!!this.parent&&this.parent.has(E)};var Et={kind:"null"},pt={kind:"number"},gt={kind:"string"},Mt={kind:"boolean"},Nt={kind:"color"},Bt={kind:"object"},Ut={kind:"value"},Jt={kind:"collator"},Vt={kind:"formatted"},Qt={kind:"resolvedImage"};function qt(E,z){return{kind:"array",itemType:E,N:z}}function gn(E){if(E.kind==="array"){var z=gn(E.itemType);return typeof E.N=="number"?"array<"+z+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+z+">"}return E.kind}var wn=[Et,pt,gt,Mt,Nt,Vt,Bt,qt(Ut),Qt];function hn(E,z){if(z.kind==="error")return null;if(E.kind==="array"){if(z.kind==="array"&&(z.N===0&&z.itemType.kind==="value"||!hn(E.itemType,z.itemType))&&(typeof E.N!="number"||E.N===z.N))return null}else{if(E.kind===z.kind)return null;if(E.kind==="value"){for(var Z=0,he=wn;Z<he.length;Z+=1)if(!hn(he[Z],z))return null}}return"Expected "+gn(E)+" but found "+gn(z)+" instead."}function Xt(E,z){return z.some(function(Z){return Z.kind===E.kind})}function an(E,z){return z.some(function(Z){return Z==="null"?E===null:Z==="array"?Array.isArray(E):Z==="object"?E&&!Array.isArray(E)&&typeof E=="object":Z===typeof E})}var tn=_(function(E,z){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function he(ft){return(ft=Math.round(ft))<0?0:ft>255?255:ft}function Ie(ft){return ft<0?0:ft>1?1:ft}function Ue(ft){return ft[ft.length-1]==="%"?he(parseFloat(ft)/100*255):he(parseInt(ft))}function We(ft){return ft[ft.length-1]==="%"?Ie(parseFloat(ft)/100):Ie(parseFloat(ft))}function it(ft,At,St){return St<0?St+=1:St>1&&(St-=1),6*St<1?ft+(At-ft)*St*6:2*St<1?At:3*St<2?ft+(At-ft)*(2/3-St)*6:ft}try{z.parseCSSColor=function(ft){var At,St=ft.replace(/ /g,"").toLowerCase();if(St in Z)return Z[St].slice();if(St[0]==="#")return St.length===4?(At=parseInt(St.substr(1),16))>=0&&At<=4095?[(3840&At)>>4|(3840&At)>>8,240&At|(240&At)>>4,15&At|(15&At)<<4,1]:null:St.length===7&&(At=parseInt(St.substr(1),16))>=0&&At<=16777215?[(16711680&At)>>16,(65280&At)>>8,255&At,1]:null;var Ft=St.indexOf("("),Wt=St.indexOf(")");if(Ft!==-1&&Wt+1===St.length){var jt=St.substr(0,Ft),on=St.substr(Ft+1,Wt-(Ft+1)).split(","),un=1;switch(jt){case"rgba":if(on.length!==4)return null;un=We(on.pop());case"rgb":return on.length!==3?null:[Ue(on[0]),Ue(on[1]),Ue(on[2]),un];case"hsla":if(on.length!==4)return null;un=We(on.pop());case"hsl":if(on.length!==3)return null;var En=(parseFloat(on[0])%360+360)%360/360,Sn=We(on[1]),Dn=We(on[2]),Fn=Dn<=.5?Dn*(Sn+1):Dn+Sn-Dn*Sn,Wn=2*Dn-Fn;return[he(255*it(Wn,Fn,En+1/3)),he(255*it(Wn,Fn,En)),he(255*it(Wn,Fn,En-1/3)),un];default:return null}}return null}}catch{}}),cn=tn.parseCSSColor,vn=function(E,z,Z,he){he===void 0&&(he=1),this.r=E,this.g=z,this.b=Z,this.a=he};vn.parse=function(E){if(E){if(E instanceof vn)return E;if(typeof E=="string"){var z=cn(E);if(z)return new vn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},vn.prototype.toString=function(){var E=this.toArray(),z=E[0],Z=E[1],he=E[2],Ie=E[3];return"rgba("+Math.round(z)+","+Math.round(Z)+","+Math.round(he)+","+Ie+")"},vn.prototype.toArray=function(){var E=this,z=E.r,Z=E.g,he=E.b,Ie=E.a;return Ie===0?[0,0,0,0]:[255*z/Ie,255*Z/Ie,255*he/Ie,Ie]},vn.black=new vn(0,0,0,1),vn.white=new vn(1,1,1,1),vn.transparent=new vn(0,0,0,0),vn.red=new vn(1,0,0,1);var yn=function(E,z,Z){this.sensitivity=E?z?"variant":"case":z?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};yn.prototype.compare=function(E,z){return this.collator.compare(E,z)},yn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Pn=function(E,z,Z,he,Ie){this.text=E,this.image=z,this.scale=Z,this.fontStack=he,this.textColor=Ie},In=function(E){this.sections=E};In.fromString=function(E){return new In([new Pn(E,null,null,null,null)])},In.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(E){return E.text.length!==0||E.image&&E.image.name.length!==0})},In.factory=function(E){return E instanceof In?E:In.fromString(E)},In.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(E){return E.text}).join("")},In.prototype.serialize=function(){for(var E=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var he=Z[z];if(he.image)E.push(["image",he.image.name]);else{E.push(he.text);var Ie={};he.fontStack&&(Ie["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(Ie["font-scale"]=he.scale),he.textColor&&(Ie["text-color"]=["rgba"].concat(he.textColor.toArray())),E.push(Ie)}}return E};var kn=function(E){this.name=E.name,this.available=E.available};function zn(E,z,Z,he){return typeof E=="number"&&E>=0&&E<=255&&typeof z=="number"&&z>=0&&z<=255&&typeof Z=="number"&&Z>=0&&Z<=255?he===void 0||typeof he=="number"&&he>=0&&he<=1?null:"Invalid rgba value ["+[E,z,Z,he].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof he=="number"?[E,z,Z,he]:[E,z,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(E){if(E===null||typeof E=="string"||typeof E=="boolean"||typeof E=="number"||E instanceof vn||E instanceof yn||E instanceof In||E instanceof kn)return!0;if(Array.isArray(E)){for(var z=0,Z=E;z<Z.length;z+=1)if(!er(Z[z]))return!1;return!0}if(typeof E=="object"){for(var he in E)if(!er(E[he]))return!1;return!0}return!1}function ir(E){if(E===null)return Et;if(typeof E=="string")return gt;if(typeof E=="boolean")return Mt;if(typeof E=="number")return pt;if(E instanceof vn)return Nt;if(E instanceof yn)return Jt;if(E instanceof In)return Vt;if(E instanceof kn)return Qt;if(Array.isArray(E)){for(var z,Z=E.length,he=0,Ie=E;he<Ie.length;he+=1){var Ue=ir(Ie[he]);if(z){if(z===Ue)continue;z=Ut;break}z=Ue}return qt(z||Ut,Z)}return Bt}function fr(E){var z=typeof E;return E===null?"":z==="string"||z==="number"||z==="boolean"?String(E):E instanceof vn||E instanceof In||E instanceof kn?E.toString():JSON.stringify(E)}kn.prototype.toString=function(){return this.name},kn.fromString=function(E){return E?new kn({name:E,available:!1}):null},kn.prototype.serialize=function(){return["image",this.name]};var ar=function(E,z){this.type=E,this.value=z};ar.parse=function(E,z){if(E.length!==2)return z.error("'literal' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(!er(E[1]))return z.error("invalid value");var Z=E[1],he=ir(Z),Ie=z.expectedType;return he.kind!=="array"||he.N!==0||!Ie||Ie.kind!=="array"||typeof Ie.N=="number"&&Ie.N!==0||(he=Ie),new ar(he,Z)},ar.prototype.evaluate=function(){return this.value},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!0},ar.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof vn?["rgba"].concat(this.value.toArray()):this.value instanceof In?this.value.serialize():this.value};var Jn=function(E){this.name="ExpressionEvaluationError",this.message=E};Jn.prototype.toJSON=function(){return this.message};var br={string:gt,number:pt,boolean:Mt,object:Bt},Gt=function(E,z){this.type=E,this.args=z};Gt.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var Z,he=1,Ie=E[0];if(Ie==="array"){var Ue,We;if(E.length>2){var it=E[1];if(typeof it!="string"||!(it in br)||it==="object")return z.error('The item type argument of "array" must be one of string, number, boolean',1);Ue=br[it],he++}else Ue=Ut;if(E.length>3){if(E[2]!==null&&(typeof E[2]!="number"||E[2]<0||E[2]!==Math.floor(E[2])))return z.error('The length argument to "array" must be a positive integer literal',2);We=E[2],he++}Z=qt(Ue,We)}else Z=br[Ie];for(var ft=[];he<E.length;he++){var At=z.parse(E[he],he,Ut);if(!At)return null;ft.push(At)}return new Gt(Z,ft)},Gt.prototype.evaluate=function(E){for(var z=0;z<this.args.length;z++){var Z=this.args[z].evaluate(E);if(!hn(this.type,ir(Z)))return Z;if(z===this.args.length-1)throw new Jn("Expected value to be of type "+gn(this.type)+", but found "+gn(ir(Z))+" instead.")}return null},Gt.prototype.eachChild=function(E){this.args.forEach(E)},Gt.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},Gt.prototype.serialize=function(){var E=this.type,z=[E.kind];if(E.kind==="array"){var Z=E.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){z.push(Z.kind);var he=E.N;(typeof he=="number"||this.args.length>1)&&z.push(he)}}return z.concat(this.args.map(function(Ie){return Ie.serialize()}))};var ln=function(E){this.type=Vt,this.sections=E};ln.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var Z=E[1];if(!Array.isArray(Z)&&typeof Z=="object")return z.error("First argument must be an image or text section.");for(var he=[],Ie=!1,Ue=1;Ue<=E.length-1;++Ue){var We=E[Ue];if(Ie&&typeof We=="object"&&!Array.isArray(We)){Ie=!1;var it=null;if(We["font-scale"]&&!(it=z.parse(We["font-scale"],1,pt)))return null;var ft=null;if(We["text-font"]&&!(ft=z.parse(We["text-font"],1,qt(gt))))return null;var At=null;if(We["text-color"]&&!(At=z.parse(We["text-color"],1,Nt)))return null;var St=he[he.length-1];St.scale=it,St.font=ft,St.textColor=At}else{var Ft=z.parse(E[Ue],1,Ut);if(!Ft)return null;var Wt=Ft.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ie=!0,he.push({content:Ft,scale:null,font:null,textColor:null})}}return new ln(he)},ln.prototype.evaluate=function(E){return new In(this.sections.map(function(z){var Z=z.content.evaluate(E);return ir(Z)===Qt?new Pn("",Z,null,null,null):new Pn(fr(Z),null,z.scale?z.scale.evaluate(E):null,z.font?z.font.evaluate(E).join(","):null,z.textColor?z.textColor.evaluate(E):null)}))},ln.prototype.eachChild=function(E){for(var z=0,Z=this.sections;z<Z.length;z+=1){var he=Z[z];E(he.content),he.scale&&E(he.scale),he.font&&E(he.font),he.textColor&&E(he.textColor)}},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){for(var E=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var he=Z[z];E.push(he.content.serialize());var Ie={};he.scale&&(Ie["font-scale"]=he.scale.serialize()),he.font&&(Ie["text-font"]=he.font.serialize()),he.textColor&&(Ie["text-color"]=he.textColor.serialize()),E.push(Ie)}return E};var mn=function(E){this.type=Qt,this.input=E};mn.parse=function(E,z){if(E.length!==2)return z.error("Expected two arguments.");var Z=z.parse(E[1],1,gt);return Z?new mn(Z):z.error("No image name provided.")},mn.prototype.evaluate=function(E){var z=this.input.evaluate(E),Z=kn.fromString(z);return Z&&E.availableImages&&(Z.available=E.availableImages.indexOf(z)>-1),Z},mn.prototype.eachChild=function(E){E(this.input)},mn.prototype.outputDefined=function(){return!1},mn.prototype.serialize=function(){return["image",this.input.serialize()]};var _n={"to-boolean":Mt,"to-color":Nt,"to-number":pt,"to-string":gt},Ln=function(E,z){this.type=E,this.args=z};Ln.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var Z=E[0];if((Z==="to-boolean"||Z==="to-string")&&E.length!==2)return z.error("Expected one argument.");for(var he=_n[Z],Ie=[],Ue=1;Ue<E.length;Ue++){var We=z.parse(E[Ue],Ue,Ut);if(!We)return null;Ie.push(We)}return new Ln(he,Ie)},Ln.prototype.evaluate=function(E){if(this.type.kind==="boolean")return!!this.args[0].evaluate(E);if(this.type.kind==="color"){for(var z,Z,he=0,Ie=this.args;he<Ie.length;he+=1){if(Z=null,(z=Ie[he].evaluate(E))instanceof vn)return z;if(typeof z=="string"){var Ue=E.parseColor(z);if(Ue)return Ue}else if(Array.isArray(z)&&!(Z=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":zn(z[0],z[1],z[2],z[3])))return new vn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new Jn(Z||"Could not parse color from value '"+(typeof z=="string"?z:String(JSON.stringify(z)))+"'")}if(this.type.kind==="number"){for(var We=null,it=0,ft=this.args;it<ft.length;it+=1){if((We=ft[it].evaluate(E))===null)return 0;var At=Number(We);if(!isNaN(At))return At}throw new Jn("Could not convert "+JSON.stringify(We)+" to number.")}return this.type.kind==="formatted"?In.fromString(fr(this.args[0].evaluate(E))):this.type.kind==="resolvedImage"?kn.fromString(fr(this.args[0].evaluate(E))):fr(this.args[0].evaluate(E))},Ln.prototype.eachChild=function(E){this.args.forEach(E)},Ln.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},Ln.prototype.serialize=function(){if(this.type.kind==="formatted")return new ln([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new mn(this.args[0]).serialize();var E=["to-"+this.type.kind];return this.eachChild(function(z){E.push(z.serialize())}),E};var Yn=["Unknown","Point","LineString","Polygon"],Nn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Nn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Nn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Yn[this.feature.type]:this.feature.type:null},Nn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Nn.prototype.canonicalID=function(){return this.canonical},Nn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Nn.prototype.parseColor=function(E){var z=this._parseColorCache[E];return z||(z=this._parseColorCache[E]=vn.parse(E)),z};var Bn=function(E,z,Z,he){this.name=E,this.type=z,this._evaluate=Z,this.args=he};Bn.prototype.evaluate=function(E){return this._evaluate(E,this.args)},Bn.prototype.eachChild=function(E){this.args.forEach(E)},Bn.prototype.outputDefined=function(){return!1},Bn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(E){return E.serialize()}))},Bn.parse=function(E,z){var Z,he=E[0],Ie=Bn.definitions[he];if(!Ie)return z.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ue=Array.isArray(Ie)?Ie[0]:Ie.type,We=Array.isArray(Ie)?[[Ie[1],Ie[2]]]:Ie.overloads,it=We.filter(function(Vr){var Rr=Vr[0];return!Array.isArray(Rr)||Rr.length===E.length-1}),ft=null,At=0,St=it;At<St.length;At+=1){var Ft=St[At],Wt=Ft[0],jt=Ft[1];ft=new sr(z.registry,z.path,null,z.scope);for(var on=[],un=!1,En=1;En<E.length;En++){var Sn=E[En],Dn=Array.isArray(Wt)?Wt[En-1]:Wt.type,Fn=ft.parse(Sn,1+on.length,Dn);if(!Fn){un=!0;break}on.push(Fn)}if(!un)if(Array.isArray(Wt)&&Wt.length!==on.length)ft.error("Expected "+Wt.length+" arguments, but found "+on.length+" instead.");else{for(var Wn=0;Wn<on.length;Wn++){var Kn=Array.isArray(Wt)?Wt[Wn]:Wt.type,nr=on[Wn];ft.concat(Wn+1).checkSubtype(Kn,nr.type)}if(ft.errors.length===0)return new Bn(he,Ue,jt,on)}}if(it.length===1)(Z=z.errors).push.apply(Z,ft.errors);else{for(var xr=(it.length?it:We).map(function(Vr){return Rr=Vr[0],Array.isArray(Rr)?"("+Rr.map(gn).join(", ")+")":"("+gn(Rr.type)+"...)";var Rr}).join(" | "),pr=[],wr=1;wr<E.length;wr++){var kr=z.parse(E[wr],1+pr.length);if(!kr)return null;pr.push(gn(kr.type))}z.error("Expected arguments of type "+xr+", but found ("+pr.join(", ")+") instead.")}return null},Bn.register=function(E,z){for(var Z in Bn.definitions=z,z)E[Z]=Bn};var rr=function(E,z,Z){this.type=Jt,this.locale=Z,this.caseSensitive=E,this.diacriticSensitive=z};rr.parse=function(E,z){if(E.length!==2)return z.error("Expected one argument.");var Z=E[1];if(typeof Z!="object"||Array.isArray(Z))return z.error("Collator options argument must be an object.");var he=z.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Mt);if(!he)return null;var Ie=z.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Mt);if(!Ie)return null;var Ue=null;return Z.locale&&!(Ue=z.parse(Z.locale,1,gt))?null:new rr(he,Ie,Ue)},rr.prototype.evaluate=function(E){return new yn(this.caseSensitive.evaluate(E),this.diacriticSensitive.evaluate(E),this.locale?this.locale.evaluate(E):null)},rr.prototype.eachChild=function(E){E(this.caseSensitive),E(this.diacriticSensitive),this.locale&&E(this.locale)},rr.prototype.outputDefined=function(){return!1},rr.prototype.serialize=function(){var E={};return E["case-sensitive"]=this.caseSensitive.serialize(),E["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(E.locale=this.locale.serialize()),["collator",E]};var Yt=8192;function An(E,z){E[0]=Math.min(E[0],z[0]),E[1]=Math.min(E[1],z[1]),E[2]=Math.max(E[2],z[0]),E[3]=Math.max(E[3],z[1])}function Ct(E,z){return!(E[0]<=z[0]||E[2]>=z[2]||E[1]<=z[1]||E[3]>=z[3])}function Kt(E,z){var Z,he=(180+E[0])/360,Ie=(Z=E[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Ue=Math.pow(2,z.z);return[Math.round(he*Ue*Yt),Math.round(Ie*Ue*Yt)]}function rn(E,z,Z){return z[1]>E[1]!=Z[1]>E[1]&&E[0]<(Z[0]-z[0])*(E[1]-z[1])/(Z[1]-z[1])+z[0]}function Tn(E,z){for(var Z=!1,he=0,Ie=z.length;he<Ie;he++)for(var Ue=z[he],We=0,it=Ue.length;We<it-1;We++){if(ft=E,At=Ue[We],St=Ue[We+1],Ft=void 0,Wt=void 0,jt=void 0,on=void 0,Ft=ft[0]-At[0],Wt=ft[1]-At[1],jt=ft[0]-St[0],on=ft[1]-St[1],Ft*on-jt*Wt==0&&Ft*jt<=0&&Wt*on<=0)return!1;rn(E,Ue[We],Ue[We+1])&&(Z=!Z)}var ft,At,St,Ft,Wt,jt,on;return Z}function Mn(E,z){for(var Z=0;Z<z.length;Z++)if(Tn(E,z[Z]))return!0;return!1}function Cn(E,z,Z,he){var Ie=E[0]-Z[0],Ue=E[1]-Z[1],We=z[0]-Z[0],it=z[1]-Z[1],ft=he[0]-Z[0],At=he[1]-Z[1],St=Ie*At-ft*Ue,Ft=We*At-ft*it;return St>0&&Ft<0||St<0&&Ft>0}function pn(E,z,Z){for(var he=0,Ie=Z;he<Ie.length;he+=1)for(var Ue=Ie[he],We=0;We<Ue.length-1;++We)if(it=E,ft=z,At=Ue[We],St=Ue[We+1],Ft=void 0,Wt=void 0,jt=void 0,jt=[ft[0]-it[0],ft[1]-it[1]],Ft=[St[0]-At[0],St[1]-At[1]],Wt=jt,Ft[0]*Wt[1]-Ft[1]*Wt[0]!=0&&Cn(it,ft,At,St)&&Cn(At,St,it,ft))return!0;var it,ft,At,St,Ft,Wt,jt;return!1}function en(E,z){for(var Z=0;Z<E.length;++Z)if(!Tn(E[Z],z))return!1;for(var he=0;he<E.length-1;++he)if(pn(E[he],E[he+1],z))return!1;return!0}function nn(E,z){for(var Z=0;Z<z.length;Z++)if(en(E,z[Z]))return!0;return!1}function fn(E,z,Z){for(var he=[],Ie=0;Ie<E.length;Ie++){for(var Ue=[],We=0;We<E[Ie].length;We++){var it=Kt(E[Ie][We],Z);An(z,it),Ue.push(it)}he.push(Ue)}return he}function dn(E,z,Z){for(var he=[],Ie=0;Ie<E.length;Ie++){var Ue=fn(E[Ie],z,Z);he.push(Ue)}return he}function Rn(E,z,Z,he){if(E[0]<Z[0]||E[0]>Z[2]){var Ie=.5*he,Ue=E[0]-Z[0]>Ie?-he:Z[0]-E[0]>Ie?he:0;Ue===0&&(Ue=E[0]-Z[2]>Ie?-he:Z[2]-E[0]>Ie?he:0),E[0]+=Ue}An(z,E)}function On(E,z,Z,he){for(var Ie=Math.pow(2,he.z)*Yt,Ue=[he.x*Yt,he.y*Yt],We=[],it=0,ft=E;it<ft.length;it+=1)for(var At=0,St=ft[it];At<St.length;At+=1){var Ft=St[At],Wt=[Ft.x+Ue[0],Ft.y+Ue[1]];Rn(Wt,z,Z,Ie),We.push(Wt)}return We}function qn(E,z,Z,he){for(var Ie=Math.pow(2,he.z)*Yt,Ue=[he.x*Yt,he.y*Yt],We=[],it=0,ft=E;it<ft.length;it+=1){for(var At=[],St=0,Ft=ft[it];St<Ft.length;St+=1){var Wt=Ft[St],jt=[Wt.x+Ue[0],Wt.y+Ue[1]];An(z,jt),At.push(jt)}We.push(At)}if(z[2]-z[0]<=Ie/2){(Dn=z)[0]=Dn[1]=1/0,Dn[2]=Dn[3]=-1/0;for(var on=0,un=We;on<un.length;on+=1)for(var En=0,Sn=un[on];En<Sn.length;En+=1)Rn(Sn[En],z,Z,Ie)}var Dn;return We}var Vn=function(E,z){this.type=Mt,this.geojson=E,this.geometries=z};function tr(E){if(E instanceof Bn&&(E.name==="get"&&E.args.length===1||E.name==="feature-state"||E.name==="has"&&E.args.length===1||E.name==="properties"||E.name==="geometry-type"||E.name==="id"||/^filter-/.test(E.name))||E instanceof Vn)return!1;var z=!0;return E.eachChild(function(Z){z&&!tr(Z)&&(z=!1)}),z}function Zn(E){if(E instanceof Bn&&E.name==="feature-state")return!1;var z=!0;return E.eachChild(function(Z){z&&!Zn(Z)&&(z=!1)}),z}function lr(E,z){if(E instanceof Bn&&z.indexOf(E.name)>=0)return!1;var Z=!0;return E.eachChild(function(he){Z&&!lr(he,z)&&(Z=!1)}),Z}Vn.parse=function(E,z){if(E.length!==2)return z.error("'within' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(er(E[1])){var Z=E[1];if(Z.type==="FeatureCollection")for(var he=0;he<Z.features.length;++he){var Ie=Z.features[he].geometry.type;if(Ie==="Polygon"||Ie==="MultiPolygon")return new Vn(Z,Z.features[he].geometry)}else if(Z.type==="Feature"){var Ue=Z.geometry.type;if(Ue==="Polygon"||Ue==="MultiPolygon")return new Vn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Vn(Z,Z)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vn.prototype.evaluate=function(E){if(E.geometry()!=null&&E.canonicalID()!=null){if(E.geometryType()==="Point")return function(z,Z){var he=[1/0,1/0,-1/0,-1/0],Ie=[1/0,1/0,-1/0,-1/0],Ue=z.canonicalID();if(Z.type==="Polygon"){var We=fn(Z.coordinates,Ie,Ue),it=On(z.geometry(),he,Ie,Ue);if(!Ct(he,Ie))return!1;for(var ft=0,At=it;ft<At.length;ft+=1)if(!Tn(At[ft],We))return!1}if(Z.type==="MultiPolygon"){var St=dn(Z.coordinates,Ie,Ue),Ft=On(z.geometry(),he,Ie,Ue);if(!Ct(he,Ie))return!1;for(var Wt=0,jt=Ft;Wt<jt.length;Wt+=1)if(!Mn(jt[Wt],St))return!1}return!0}(E,this.geometries);if(E.geometryType()==="LineString")return function(z,Z){var he=[1/0,1/0,-1/0,-1/0],Ie=[1/0,1/0,-1/0,-1/0],Ue=z.canonicalID();if(Z.type==="Polygon"){var We=fn(Z.coordinates,Ie,Ue),it=qn(z.geometry(),he,Ie,Ue);if(!Ct(he,Ie))return!1;for(var ft=0,At=it;ft<At.length;ft+=1)if(!en(At[ft],We))return!1}if(Z.type==="MultiPolygon"){var St=dn(Z.coordinates,Ie,Ue),Ft=qn(z.geometry(),he,Ie,Ue);if(!Ct(he,Ie))return!1;for(var Wt=0,jt=Ft;Wt<jt.length;Wt+=1)if(!nn(jt[Wt],St))return!1}return!0}(E,this.geometries)}return!1},Vn.prototype.eachChild=function(){},Vn.prototype.outputDefined=function(){return!0},Vn.prototype.serialize=function(){return["within",this.geojson]};var or=function(E,z){this.type=z.type,this.name=E,this.boundExpression=z};or.parse=function(E,z){if(E.length!==2||typeof E[1]!="string")return z.error("'var' expression requires exactly one string literal argument.");var Z=E[1];return z.scope.has(Z)?new or(Z,z.scope.get(Z)):z.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},or.prototype.evaluate=function(E){return this.boundExpression.evaluate(E)},or.prototype.eachChild=function(){},or.prototype.outputDefined=function(){return!1},or.prototype.serialize=function(){return["var",this.name]};var sr=function(E,z,Z,he,Ie){z===void 0&&(z=[]),he===void 0&&(he=new dt),Ie===void 0&&(Ie=[]),this.registry=E,this.path=z,this.key=z.map(function(Ue){return"["+Ue+"]"}).join(""),this.scope=he,this.errors=Ie,this.expectedType=Z};function mr(E){if(E instanceof or)return mr(E.boundExpression);if(E instanceof Bn&&E.name==="error"||E instanceof rr||E instanceof Vn)return!1;var z=E instanceof Ln||E instanceof Gt,Z=!0;return E.eachChild(function(he){Z=z?Z&&mr(he):Z&&he instanceof ar}),!!Z&&tr(E)&&lr(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gr(E,z){for(var Z,he,Ie=E.length-1,Ue=0,We=Ie,it=0;Ue<=We;)if(Z=E[it=Math.floor((Ue+We)/2)],he=E[it+1],Z<=z){if(it===Ie||z<he)return it;Ue=it+1}else{if(!(Z>z))throw new Jn("Input is not a number.");We=it-1}return 0}sr.prototype.parse=function(E,z,Z,he,Ie){return Ie===void 0&&(Ie={}),z?this.concat(z,Z,he)._parse(E,Ie):this._parse(E,Ie)},sr.prototype._parse=function(E,z){function Z(At,St,Ft){return Ft==="assert"?new Gt(St,[At]):Ft==="coerce"?new Ln(St,[At]):At}if(E!==null&&typeof E!="string"&&typeof E!="boolean"&&typeof E!="number"||(E=["literal",E]),Array.isArray(E)){if(E.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=E[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ie=this.registry[he];if(Ie){var Ue=Ie.parse(E,this);if(!Ue)return null;if(this.expectedType){var We=this.expectedType,it=Ue.type;if(We.kind!=="string"&&We.kind!=="number"&&We.kind!=="boolean"&&We.kind!=="object"&&We.kind!=="array"||it.kind!=="value")if(We.kind!=="color"&&We.kind!=="formatted"&&We.kind!=="resolvedImage"||it.kind!=="value"&&it.kind!=="string"){if(this.checkSubtype(We,it))return null}else Ue=Z(Ue,We,z.typeAnnotation||"coerce");else Ue=Z(Ue,We,z.typeAnnotation||"assert")}if(!(Ue instanceof ar)&&Ue.type.kind!=="resolvedImage"&&mr(Ue)){var ft=new Nn;try{Ue=new ar(Ue.type,Ue.evaluate(ft))}catch(At){return this.error(At.message),null}}return Ue}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}return E===void 0?this.error("'undefined' value invalid. Use null instead."):typeof E=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof E+" instead.")},sr.prototype.concat=function(E,z,Z){var he=typeof E=="number"?this.path.concat(E):this.path,Ie=Z?this.scope.concat(Z):this.scope;return new sr(this.registry,he,z||null,Ie,this.errors)},sr.prototype.error=function(E){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];var he=""+this.key+z.map(function(Ie){return"["+Ie+"]"}).join("");this.errors.push(new xt(he,E))},sr.prototype.checkSubtype=function(E,z){var Z=hn(E,z);return Z&&this.error(Z),Z};var Er=function(E,z,Z){this.type=E,this.input=z,this.labels=[],this.outputs=[];for(var he=0,Ie=Z;he<Ie.length;he+=1){var Ue=Ie[he],We=Ue[0],it=Ue[1];this.labels.push(We),this.outputs.push(it)}};function $n(E,z,Z){return E*(1-Z)+z*Z}Er.parse=function(E,z){if(E.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return z.error("Expected an even number of arguments.");var Z=z.parse(E[1],1,pt);if(!Z)return null;var he=[],Ie=null;z.expectedType&&z.expectedType.kind!=="value"&&(Ie=z.expectedType);for(var Ue=1;Ue<E.length;Ue+=2){var We=Ue===1?-1/0:E[Ue],it=E[Ue+1],ft=Ue,At=Ue+1;if(typeof We!="number")return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ft);if(he.length&&he[he.length-1][0]>=We)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ft);var St=z.parse(it,At,Ie);if(!St)return null;Ie=Ie||St.type,he.push([We,St])}return new Er(Ie,Z,he)},Er.prototype.evaluate=function(E){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(E);var he=this.input.evaluate(E);if(he<=z[0])return Z[0].evaluate(E);var Ie=z.length;return he>=z[Ie-1]?Z[Ie-1].evaluate(E):Z[gr(z,he)].evaluate(E)},Er.prototype.eachChild=function(E){E(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)E(Z[z])},Er.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Er.prototype.serialize=function(){for(var E=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&E.push(this.labels[z]),E.push(this.outputs[z].serialize());return E};var _r=Object.freeze({__proto__:null,number:$n,color:function(E,z,Z){return new vn($n(E.r,z.r,Z),$n(E.g,z.g,Z),$n(E.b,z.b,Z),$n(E.a,z.a,Z))},array:function(E,z,Z){return E.map(function(he,Ie){return $n(he,z[Ie],Z)})}}),Dr=.95047,ii=1,wi=1.08883,yi=4/29,Ei=6/29,hi=3*Ei*Ei,Fi=Ei*Ei*Ei,vo=Math.PI/180,Ra=180/Math.PI;function Oo(E){return E>Fi?Math.pow(E,.3333333333333333):E/hi+yi}function Xl(E){return E>Ei?E*E*E:hi*(E-yi)}function ws(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,.4166666666666667)-.055)}function il(E){return(E/=255)<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function Yl(E){var z=il(E.r),Z=il(E.g),he=il(E.b),Ie=Oo((.4124564*z+.3575761*Z+.1804375*he)/Dr),Ue=Oo((.2126729*z+.7151522*Z+.072175*he)/ii);return{l:116*Ue-16,a:500*(Ie-Ue),b:200*(Ue-Oo((.0193339*z+.119192*Z+.9503041*he)/wi)),alpha:E.a}}function yo(E){var z=(E.l+16)/116,Z=isNaN(E.a)?z:z+E.a/500,he=isNaN(E.b)?z:z-E.b/200;return z=ii*Xl(z),Z=Dr*Xl(Z),he=wi*Xl(he),new vn(ws(3.2404542*Z-1.5371385*z-.4985314*he),ws(-.969266*Z+1.8760108*z+.041556*he),ws(.0556434*Z-.2040259*z+1.0572252*he),E.alpha)}function gu(E,z,Z){var he=z-E;return E+Z*(he>180||he<-180?he-360*Math.round(he/360):he)}var Ts={forward:Yl,reverse:yo,interpolate:function(E,z,Z){return{l:$n(E.l,z.l,Z),a:$n(E.a,z.a,Z),b:$n(E.b,z.b,Z),alpha:$n(E.alpha,z.alpha,Z)}}},Ms={forward:function(E){var z=Yl(E),Z=z.l,he=z.a,Ie=z.b,Ue=Math.atan2(Ie,he)*Ra;return{h:Ue<0?Ue+360:Ue,c:Math.sqrt(he*he+Ie*Ie),l:Z,alpha:E.a}},reverse:function(E){var z=E.h*vo,Z=E.c;return yo({l:E.l,a:Math.cos(z)*Z,b:Math.sin(z)*Z,alpha:E.alpha})},interpolate:function(E,z,Z){return{h:gu(E.h,z.h,Z),c:$n(E.c,z.c,Z),l:$n(E.l,z.l,Z),alpha:$n(E.alpha,z.alpha,Z)}}},xo=Object.freeze({__proto__:null,lab:Ts,hcl:Ms}),Wi=function(E,z,Z,he,Ie){this.type=E,this.operator=z,this.interpolation=Z,this.input=he,this.labels=[],this.outputs=[];for(var Ue=0,We=Ie;Ue<We.length;Ue+=1){var it=We[Ue],ft=it[0],At=it[1];this.labels.push(ft),this.outputs.push(At)}};function al(E,z,Z,he){var Ie=he-Z,Ue=E-Z;return Ie===0?0:z===1?Ue/Ie:(Math.pow(z,Ue)-1)/(Math.pow(z,Ie)-1)}Wi.interpolationFactor=function(E,z,Z,he){var Ie=0;if(E.name==="exponential")Ie=al(z,E.base,Z,he);else if(E.name==="linear")Ie=al(z,1,Z,he);else if(E.name==="cubic-bezier"){var Ue=E.controlPoints;Ie=new h(Ue[0],Ue[1],Ue[2],Ue[3]).solve(al(z,1,Z,he))}return Ie},Wi.parse=function(E,z){var Z=E[0],he=E[1],Ie=E[2],Ue=E.slice(3);if(!Array.isArray(he)||he.length===0)return z.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var We=he[1];if(typeof We!="number")return z.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:We}}else{if(he[0]!=="cubic-bezier")return z.error("Unknown interpolation type "+String(he[0]),1,0);var it=he.slice(1);if(it.length!==4||it.some(function(En){return typeof En!="number"||En<0||En>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:it}}if(E.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(Ie=z.parse(Ie,2,pt)))return null;var ft=[],At=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?At=Nt:z.expectedType&&z.expectedType.kind!=="value"&&(At=z.expectedType);for(var St=0;St<Ue.length;St+=2){var Ft=Ue[St],Wt=Ue[St+1],jt=St+3,on=St+4;if(typeof Ft!="number")return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',jt);if(ft.length&&ft[ft.length-1][0]>=Ft)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',jt);var un=z.parse(Wt,on,At);if(!un)return null;At=At||un.type,ft.push([Ft,un])}return At.kind==="number"||At.kind==="color"||At.kind==="array"&&At.itemType.kind==="number"&&typeof At.N=="number"?new Wi(At,Z,he,Ie,ft):z.error("Type "+gn(At)+" is not interpolatable.")},Wi.prototype.evaluate=function(E){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(E);var he=this.input.evaluate(E);if(he<=z[0])return Z[0].evaluate(E);var Ie=z.length;if(he>=z[Ie-1])return Z[Ie-1].evaluate(E);var Ue=gr(z,he),We=z[Ue],it=z[Ue+1],ft=Wi.interpolationFactor(this.interpolation,he,We,it),At=Z[Ue].evaluate(E),St=Z[Ue+1].evaluate(E);return this.operator==="interpolate"?_r[this.type.kind.toLowerCase()](At,St,ft):this.operator==="interpolate-hcl"?Ms.reverse(Ms.interpolate(Ms.forward(At),Ms.forward(St),ft)):Ts.reverse(Ts.interpolate(Ts.forward(At),Ts.forward(St),ft))},Wi.prototype.eachChild=function(E){E(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)E(Z[z])},Wi.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Wi.prototype.serialize=function(){var E;E=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,E,this.input.serialize()],Z=0;Z<this.labels.length;Z++)z.push(this.labels[Z],this.outputs[Z].serialize());return z};var ti=function(E,z){this.type=E,this.args=z};ti.parse=function(E,z){if(E.length<2)return z.error("Expectected at least one argument.");var Z=null,he=z.expectedType;he&&he.kind!=="value"&&(Z=he);for(var Ie=[],Ue=0,We=E.slice(1);Ue<We.length;Ue+=1){var it=We[Ue],ft=z.parse(it,1+Ie.length,Z,void 0,{typeAnnotation:"omit"});if(!ft)return null;Z=Z||ft.type,Ie.push(ft)}var At=he&&Ie.some(function(St){return hn(he,St.type)});return new ti(At?Ut:Z,Ie)},ti.prototype.evaluate=function(E){for(var z,Z=null,he=0,Ie=0,Ue=this.args;Ie<Ue.length&&(he++,(Z=Ue[Ie].evaluate(E))&&Z instanceof kn&&!Z.available&&(z||(z=Z.name),Z=null,he===this.args.length&&(Z=z)),Z===null);Ie+=1);return Z},ti.prototype.eachChild=function(E){this.args.forEach(E)},ti.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ti.prototype.serialize=function(){var E=["coalesce"];return this.eachChild(function(z){E.push(z.serialize())}),E};var _o=function(E,z){this.type=z.type,this.bindings=[].concat(E),this.result=z};_o.prototype.evaluate=function(E){return this.result.evaluate(E)},_o.prototype.eachChild=function(E){for(var z=0,Z=this.bindings;z<Z.length;z+=1)E(Z[z][1]);E(this.result)},_o.parse=function(E,z){if(E.length<4)return z.error("Expected at least 3 arguments, but found "+(E.length-1)+" instead.");for(var Z=[],he=1;he<E.length-1;he+=2){var Ie=E[he];if(typeof Ie!="string")return z.error("Expected string, but found "+typeof Ie+" instead.",he);if(/[^a-zA-Z0-9_]/.test(Ie))return z.error("Variable names must contain only alphanumeric characters or '_'.",he);var Ue=z.parse(E[he+1],he+1);if(!Ue)return null;Z.push([Ie,Ue])}var We=z.parse(E[E.length-1],E.length-1,z.expectedType,Z);return We?new _o(Z,We):null},_o.prototype.outputDefined=function(){return this.result.outputDefined()},_o.prototype.serialize=function(){for(var E=["let"],z=0,Z=this.bindings;z<Z.length;z+=1){var he=Z[z],Ie=he[0],Ue=he[1];E.push(Ie,Ue.serialize())}return E.push(this.result.serialize()),E};var Va=function(E,z,Z){this.type=E,this.index=z,this.input=Z};Va.parse=function(E,z){if(E.length!==3)return z.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var Z=z.parse(E[1],1,pt),he=z.parse(E[2],2,qt(z.expectedType||Ut));if(!Z||!he)return null;var Ie=he.type;return new Va(Ie.itemType,Z,he)},Va.prototype.evaluate=function(E){var z=this.index.evaluate(E),Z=this.input.evaluate(E);if(z<0)throw new Jn("Array index out of bounds: "+z+" < 0.");if(z>=Z.length)throw new Jn("Array index out of bounds: "+z+" > "+(Z.length-1)+".");if(z!==Math.floor(z))throw new Jn("Array index must be an integer, but found "+z+" instead.");return Z[z]},Va.prototype.eachChild=function(E){E(this.index),E(this.input)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Do=function(E,z){this.type=Mt,this.needle=E,this.haystack=z};Do.parse=function(E,z){if(E.length!==3)return z.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var Z=z.parse(E[1],1,Ut),he=z.parse(E[2],2,Ut);return Z&&he?Xt(Z.type,[Mt,gt,pt,Et,Ut])?new Do(Z,he):z.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(Z.type)+" instead"):null},Do.prototype.evaluate=function(E){var z=this.needle.evaluate(E),Z=this.haystack.evaluate(E);if(!Z)return!1;if(!an(z,["boolean","string","number","null"]))throw new Jn("Expected first argument to be of type boolean, string, number or null, but found "+gn(ir(z))+" instead.");if(!an(Z,["string","array"]))throw new Jn("Expected second argument to be of type array or string, but found "+gn(ir(Z))+" instead.");return Z.indexOf(z)>=0},Do.prototype.eachChild=function(E){E(this.needle),E(this.haystack)},Do.prototype.outputDefined=function(){return!0},Do.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var io=function(E,z,Z){this.type=pt,this.needle=E,this.haystack=z,this.fromIndex=Z};io.parse=function(E,z){if(E.length<=2||E.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var Z=z.parse(E[1],1,Ut),he=z.parse(E[2],2,Ut);if(!Z||!he)return null;if(!Xt(Z.type,[Mt,gt,pt,Et,Ut]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(Z.type)+" instead");if(E.length===4){var Ie=z.parse(E[3],3,pt);return Ie?new io(Z,he,Ie):null}return new io(Z,he)},io.prototype.evaluate=function(E){var z=this.needle.evaluate(E),Z=this.haystack.evaluate(E);if(!an(z,["boolean","string","number","null"]))throw new Jn("Expected first argument to be of type boolean, string, number or null, but found "+gn(ir(z))+" instead.");if(!an(Z,["string","array"]))throw new Jn("Expected second argument to be of type array or string, but found "+gn(ir(Z))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(E);return Z.indexOf(z,he)}return Z.indexOf(z)},io.prototype.eachChild=function(E){E(this.needle),E(this.haystack),this.fromIndex&&E(this.fromIndex)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var E=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),E]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Qo=function(E,z,Z,he,Ie,Ue){this.inputType=E,this.type=z,this.input=Z,this.cases=he,this.outputs=Ie,this.otherwise=Ue};Qo.parse=function(E,z){if(E.length<5)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if(E.length%2!=1)return z.error("Expected an even number of arguments.");var Z,he;z.expectedType&&z.expectedType.kind!=="value"&&(he=z.expectedType);for(var Ie={},Ue=[],We=2;We<E.length-1;We+=2){var it=E[We],ft=E[We+1];Array.isArray(it)||(it=[it]);var At=z.concat(We);if(it.length===0)return At.error("Expected at least one branch label.");for(var St=0,Ft=it;St<Ft.length;St+=1){var Wt=Ft[St];if(typeof Wt!="number"&&typeof Wt!="string")return At.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return At.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return At.error("Numeric branch labels must be integer values.");if(Z){if(At.checkSubtype(Z,ir(Wt)))return null}else Z=ir(Wt);if(Ie[String(Wt)]!==void 0)return At.error("Branch labels must be unique.");Ie[String(Wt)]=Ue.length}var jt=z.parse(ft,We,he);if(!jt)return null;he=he||jt.type,Ue.push(jt)}var on=z.parse(E[1],1,Ut);if(!on)return null;var un=z.parse(E[E.length-1],E.length-1,he);return un?on.type.kind!=="value"&&z.concat(1).checkSubtype(Z,on.type)?null:new Qo(Z,he,on,Ie,Ue,un):null},Qo.prototype.evaluate=function(E){var z=this.input.evaluate(E);return(ir(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(E)},Qo.prototype.eachChild=function(E){E(this.input),this.outputs.forEach(E),E(this.otherwise)},Qo.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})&&this.otherwise.outputDefined()},Qo.prototype.serialize=function(){for(var E=this,z=["match",this.input.serialize()],Z=[],he={},Ie=0,Ue=Object.keys(this.cases).sort();Ie<Ue.length;Ie+=1){var We=Ue[Ie];(Ft=he[this.cases[We]])===void 0?(he[this.cases[We]]=Z.length,Z.push([this.cases[We],[We]])):Z[Ft][1].push(We)}for(var it=function(jt){return E.inputType.kind==="number"?Number(jt):jt},ft=0,At=Z;ft<At.length;ft+=1){var St=At[ft],Ft=St[0],Wt=St[1];Wt.length===1?z.push(it(Wt[0])):z.push(Wt.map(it)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var zo=function(E,z,Z){this.type=E,this.branches=z,this.otherwise=Z};zo.parse=function(E,z){if(E.length<4)return z.error("Expected at least 3 arguments, but found only "+(E.length-1)+".");if(E.length%2!=0)return z.error("Expected an odd number of arguments.");var Z;z.expectedType&&z.expectedType.kind!=="value"&&(Z=z.expectedType);for(var he=[],Ie=1;Ie<E.length-1;Ie+=2){var Ue=z.parse(E[Ie],Ie,Mt);if(!Ue)return null;var We=z.parse(E[Ie+1],Ie+1,Z);if(!We)return null;he.push([Ue,We]),Z=Z||We.type}var it=z.parse(E[E.length-1],E.length-1,Z);return it?new zo(Z,he,it):null},zo.prototype.evaluate=function(E){for(var z=0,Z=this.branches;z<Z.length;z+=1){var he=Z[z],Ie=he[0],Ue=he[1];if(Ie.evaluate(E))return Ue.evaluate(E)}return this.otherwise.evaluate(E)},zo.prototype.eachChild=function(E){for(var z=0,Z=this.branches;z<Z.length;z+=1){var he=Z[z],Ie=he[0],Ue=he[1];E(Ie),E(Ue)}E(this.otherwise)},zo.prototype.outputDefined=function(){return this.branches.every(function(E){return E[0],E[1].outputDefined()})&&this.otherwise.outputDefined()},zo.prototype.serialize=function(){var E=["case"];return this.eachChild(function(z){E.push(z.serialize())}),E};var Fo=function(E,z,Z,he){this.type=E,this.input=z,this.beginIndex=Z,this.endIndex=he};function Ll(E,z){return E==="=="||E==="!="?z.kind==="boolean"||z.kind==="string"||z.kind==="number"||z.kind==="null"||z.kind==="value":z.kind==="string"||z.kind==="number"||z.kind==="value"}function vu(E,z,Z,he){return he.compare(z,Z)===0}function es(E,z,Z){var he=E!=="=="&&E!=="!=";return function(){function Ie(Ue,We,it){this.type=Mt,this.lhs=Ue,this.rhs=We,this.collator=it,this.hasUntypedArgument=Ue.type.kind==="value"||We.type.kind==="value"}return Ie.parse=function(Ue,We){if(Ue.length!==3&&Ue.length!==4)return We.error("Expected two or three arguments.");var it=Ue[0],ft=We.parse(Ue[1],1,Ut);if(!ft)return null;if(!Ll(it,ft.type))return We.concat(1).error('"'+it+`" comparisons are not supported for type '`+gn(ft.type)+"'.");var At=We.parse(Ue[2],2,Ut);if(!At)return null;if(!Ll(it,At.type))return We.concat(2).error('"'+it+`" comparisons are not supported for type '`+gn(At.type)+"'.");if(ft.type.kind!==At.type.kind&&ft.type.kind!=="value"&&At.type.kind!=="value")return We.error("Cannot compare types '"+gn(ft.type)+"' and '"+gn(At.type)+"'.");he&&(ft.type.kind==="value"&&At.type.kind!=="value"?ft=new Gt(At.type,[ft]):ft.type.kind!=="value"&&At.type.kind==="value"&&(At=new Gt(ft.type,[At])));var St=null;if(Ue.length===4){if(ft.type.kind!=="string"&&At.type.kind!=="string"&&ft.type.kind!=="value"&&At.type.kind!=="value")return We.error("Cannot use collator to compare non-string types.");if(!(St=We.parse(Ue[3],3,Jt)))return null}return new Ie(ft,At,St)},Ie.prototype.evaluate=function(Ue){var We=this.lhs.evaluate(Ue),it=this.rhs.evaluate(Ue);if(he&&this.hasUntypedArgument){var ft=ir(We),At=ir(it);if(ft.kind!==At.kind||ft.kind!=="string"&&ft.kind!=="number")throw new Jn('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ft.kind+", "+At.kind+") instead.")}if(this.collator&&!he&&this.hasUntypedArgument){var St=ir(We),Ft=ir(it);if(St.kind!=="string"||Ft.kind!=="string")return z(Ue,We,it)}return this.collator?Z(Ue,We,it,this.collator.evaluate(Ue)):z(Ue,We,it)},Ie.prototype.eachChild=function(Ue){Ue(this.lhs),Ue(this.rhs),this.collator&&Ue(this.collator)},Ie.prototype.outputDefined=function(){return!0},Ie.prototype.serialize=function(){var Ue=[E];return this.eachChild(function(We){Ue.push(We.serialize())}),Ue},Ie}()}Fo.parse=function(E,z){if(E.length<=2||E.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var Z=z.parse(E[1],1,Ut),he=z.parse(E[2],2,pt);if(!Z||!he)return null;if(!Xt(Z.type,[qt(Ut),gt,Ut]))return z.error("Expected first argument to be of type array or string, but found "+gn(Z.type)+" instead");if(E.length===4){var Ie=z.parse(E[3],3,pt);return Ie?new Fo(Z.type,Z,he,Ie):null}return new Fo(Z.type,Z,he)},Fo.prototype.evaluate=function(E){var z=this.input.evaluate(E),Z=this.beginIndex.evaluate(E);if(!an(z,["string","array"]))throw new Jn("Expected first argument to be of type array or string, but found "+gn(ir(z))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(E);return z.slice(Z,he)}return z.slice(Z)},Fo.prototype.eachChild=function(E){E(this.input),E(this.beginIndex),this.endIndex&&E(this.endIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var E=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),E]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var yu=es("==",function(E,z,Z){return z===Z},vu),Zl=es("!=",function(E,z,Z){return z!==Z},function(E,z,Z,he){return!vu(0,z,Z,he)}),xu=es("<",function(E,z,Z){return z<Z},function(E,z,Z,he){return he.compare(z,Z)<0}),Kl=es(">",function(E,z,Z){return z>Z},function(E,z,Z,he){return he.compare(z,Z)>0}),_u=es("<=",function(E,z,Z){return z<=Z},function(E,z,Z,he){return he.compare(z,Z)<=0}),Gs=es(">=",function(E,z,Z){return z>=Z},function(E,z,Z,he){return he.compare(z,Z)>=0}),ts=function(E,z,Z,he,Ie){this.type=gt,this.number=E,this.locale=z,this.currency=Z,this.minFractionDigits=he,this.maxFractionDigits=Ie};ts.parse=function(E,z){if(E.length!==3)return z.error("Expected two arguments.");var Z=z.parse(E[1],1,pt);if(!Z)return null;var he=E[2];if(typeof he!="object"||Array.isArray(he))return z.error("NumberFormat options argument must be an object.");var Ie=null;if(he.locale&&!(Ie=z.parse(he.locale,1,gt)))return null;var Ue=null;if(he.currency&&!(Ue=z.parse(he.currency,1,gt)))return null;var We=null;if(he["min-fraction-digits"]&&!(We=z.parse(he["min-fraction-digits"],1,pt)))return null;var it=null;return he["max-fraction-digits"]&&!(it=z.parse(he["max-fraction-digits"],1,pt))?null:new ts(Z,Ie,Ue,We,it)},ts.prototype.evaluate=function(E){return new Intl.NumberFormat(this.locale?this.locale.evaluate(E):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(E):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(E):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(E):void 0}).format(this.number.evaluate(E))},ts.prototype.eachChild=function(E){E(this.number),this.locale&&E(this.locale),this.currency&&E(this.currency),this.minFractionDigits&&E(this.minFractionDigits),this.maxFractionDigits&&E(this.maxFractionDigits)},ts.prototype.outputDefined=function(){return!1},ts.prototype.serialize=function(){var E={};return this.locale&&(E.locale=this.locale.serialize()),this.currency&&(E.currency=this.currency.serialize()),this.minFractionDigits&&(E["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(E["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),E]};var As=function(E){this.type=pt,this.input=E};As.parse=function(E,z){if(E.length!==2)return z.error("Expected 1 argument, but found "+(E.length-1)+" instead.");var Z=z.parse(E[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?z.error("Expected argument of type string or array, but found "+gn(Z.type)+" instead."):new As(Z):null},As.prototype.evaluate=function(E){var z=this.input.evaluate(E);if(typeof z=="string"||Array.isArray(z))return z.length;throw new Jn("Expected value to be of type string or array, but found "+gn(ir(z))+" instead.")},As.prototype.eachChild=function(E){E(this.input)},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){var E=["length"];return this.eachChild(function(z){E.push(z.serialize())}),E};var Ws={"==":yu,"!=":Zl,">":Kl,"<":xu,">=":Gs,"<=":_u,array:Gt,at:Va,boolean:Gt,case:zo,coalesce:ti,collator:rr,format:ln,image:mn,in:Do,"index-of":io,interpolate:Wi,"interpolate-hcl":Wi,"interpolate-lab":Wi,length:As,let:_o,literal:ar,match:Qo,number:Gt,"number-format":ts,object:Gt,slice:Fo,step:Er,string:Gt,"to-boolean":Ln,"to-color":Ln,"to-number":Ln,"to-string":Ln,var:or,within:Vn};function Cl(E,z){var Z=z[0],he=z[1],Ie=z[2],Ue=z[3];Z=Z.evaluate(E),he=he.evaluate(E),Ie=Ie.evaluate(E);var We=Ue?Ue.evaluate(E):1,it=zn(Z,he,Ie,We);if(it)throw new Jn(it);return new vn(Z/255*We,he/255*We,Ie/255*We,We)}function Jl(E,z){return E in z}function $l(E,z){var Z=z[E];return Z===void 0?null:Z}function Za(E){return{type:E}}function Ss(E){return{result:"success",value:E}}function bo(E){return{result:"error",value:E}}function No(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function bu(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function ns(E){return!!E.expression&&E.expression.interpolated}function pi(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function ao(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function ol(E){return E}function Ka(E,z){var Z,he,Ie,Ue=z.type==="color",We=E.stops&&typeof E.stops[0][0]=="object",it=We||E.property!==void 0,ft=We||!it,At=E.type||(ns(z)?"exponential":"interval");if(Ue&&((E=rt({},E)).stops&&(E.stops=E.stops.map(function(pr){return[pr[0],vn.parse(pr[1])]})),E.default?E.default=vn.parse(E.default):E.default=vn.parse(z.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!xo[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);if(At==="exponential")Z=wu;else if(At==="interval")Z=Pl;else if(At==="categorical"){Z=Xu,he=Object.create(null);for(var St=0,Ft=E.stops;St<Ft.length;St+=1){var Wt=Ft[St];he[Wt[0]]=Wt[1]}Ie=typeof E.stops[0][0]}else{if(At!=="identity")throw new Error('Unknown function type "'+At+'"');Z=Tu}if(We){for(var jt={},on=[],un=0;un<E.stops.length;un++){var En=E.stops[un],Sn=En[0].zoom;jt[Sn]===void 0&&(jt[Sn]={zoom:Sn,type:E.type,property:E.property,default:E.default,stops:[]},on.push(Sn)),jt[Sn].stops.push([En[0].value,En[1]])}for(var Dn=[],Fn=0,Wn=on;Fn<Wn.length;Fn+=1){var Kn=Wn[Fn];Dn.push([jt[Kn].zoom,Ka(jt[Kn],z)])}var nr={name:"linear"};return{kind:"composite",interpolationType:nr,interpolationFactor:Wi.interpolationFactor.bind(void 0,nr),zoomStops:Dn.map(function(pr){return pr[0]}),evaluate:function(pr,wr){var kr=pr.zoom;return wu({stops:Dn,base:E.base},z,kr).evaluate(kr,wr)}}}if(ft){var xr=At==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:xr,interpolationFactor:Wi.interpolationFactor.bind(void 0,xr),zoomStops:E.stops.map(function(pr){return pr[0]}),evaluate:function(pr){var wr=pr.zoom;return Z(E,z,wr,he,Ie)}}}return{kind:"source",evaluate:function(pr,wr){var kr=wr&&wr.properties?wr.properties[E.property]:void 0;return kr===void 0?Es(E.default,z.default):Z(E,z,kr,he,Ie)}}}function Es(E,z,Z){return E!==void 0?E:z!==void 0?z:Z!==void 0?Z:void 0}function Xu(E,z,Z,he,Ie){return Es(typeof Z===Ie?he[Z]:void 0,E.default,z.default)}function Pl(E,z,Z){if(pi(Z)!=="number")return Es(E.default,z.default);var he=E.stops.length;if(he===1||Z<=E.stops[0][0])return E.stops[0][1];if(Z>=E.stops[he-1][0])return E.stops[he-1][1];var Ie=gr(E.stops.map(function(Ue){return Ue[0]}),Z);return E.stops[Ie][1]}function wu(E,z,Z){var he=E.base!==void 0?E.base:1;if(pi(Z)!=="number")return Es(E.default,z.default);var Ie=E.stops.length;if(Ie===1||Z<=E.stops[0][0])return E.stops[0][1];if(Z>=E.stops[Ie-1][0])return E.stops[Ie-1][1];var Ue=gr(E.stops.map(function(Ft){return Ft[0]}),Z),We=function(Ft,Wt,jt,on){var un=on-jt,En=Ft-jt;return un===0?0:Wt===1?En/un:(Math.pow(Wt,En)-1)/(Math.pow(Wt,un)-1)}(Z,he,E.stops[Ue][0],E.stops[Ue+1][0]),it=E.stops[Ue][1],ft=E.stops[Ue+1][1],At=_r[z.type]||ol;if(E.colorSpace&&E.colorSpace!=="rgb"){var St=xo[E.colorSpace];At=function(Ft,Wt){return St.reverse(St.interpolate(St.forward(Ft),St.forward(Wt),We))}}return typeof it.evaluate=="function"?{evaluate:function(){for(var Ft=[],Wt=arguments.length;Wt--;)Ft[Wt]=arguments[Wt];var jt=it.evaluate.apply(void 0,Ft),on=ft.evaluate.apply(void 0,Ft);if(jt!==void 0&&on!==void 0)return At(jt,on,We)}}:At(it,ft,We)}function Tu(E,z,Z){return z.type==="color"?Z=vn.parse(Z):z.type==="formatted"?Z=In.fromString(Z.toString()):z.type==="resolvedImage"?Z=kn.fromString(Z.toString()):pi(Z)===z.type||z.type==="enum"&&z.values[Z]||(Z=void 0),Es(Z,E.default,z.default)}Bn.register(Ws,{error:[{kind:"error"},[gt],function(E,z){var Z=z[0];throw new Jn(Z.evaluate(E))}],typeof:[gt,[Ut],function(E,z){return gn(ir(z[0].evaluate(E)))}],"to-rgba":[qt(pt,4),[Nt],function(E,z){return z[0].evaluate(E).toArray()}],rgb:[Nt,[pt,pt,pt],Cl],rgba:[Nt,[pt,pt,pt,pt],Cl],has:{type:Mt,overloads:[[[gt],function(E,z){return Jl(z[0].evaluate(E),E.properties())}],[[gt,Bt],function(E,z){var Z=z[0],he=z[1];return Jl(Z.evaluate(E),he.evaluate(E))}]]},get:{type:Ut,overloads:[[[gt],function(E,z){return $l(z[0].evaluate(E),E.properties())}],[[gt,Bt],function(E,z){var Z=z[0],he=z[1];return $l(Z.evaluate(E),he.evaluate(E))}]]},"feature-state":[Ut,[gt],function(E,z){return $l(z[0].evaluate(E),E.featureState||{})}],properties:[Bt,[],function(E){return E.properties()}],"geometry-type":[gt,[],function(E){return E.geometryType()}],id:[Ut,[],function(E){return E.id()}],zoom:[pt,[],function(E){return E.globals.zoom}],"heatmap-density":[pt,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[pt,[],function(E){return E.globals.lineProgress||0}],accumulated:[Ut,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[pt,Za(pt),function(E,z){for(var Z=0,he=0,Ie=z;he<Ie.length;he+=1)Z+=Ie[he].evaluate(E);return Z}],"*":[pt,Za(pt),function(E,z){for(var Z=1,he=0,Ie=z;he<Ie.length;he+=1)Z*=Ie[he].evaluate(E);return Z}],"-":{type:pt,overloads:[[[pt,pt],function(E,z){var Z=z[0],he=z[1];return Z.evaluate(E)-he.evaluate(E)}],[[pt],function(E,z){return-z[0].evaluate(E)}]]},"/":[pt,[pt,pt],function(E,z){var Z=z[0],he=z[1];return Z.evaluate(E)/he.evaluate(E)}],"%":[pt,[pt,pt],function(E,z){var Z=z[0],he=z[1];return Z.evaluate(E)%he.evaluate(E)}],ln2:[pt,[],function(){return Math.LN2}],pi:[pt,[],function(){return Math.PI}],e:[pt,[],function(){return Math.E}],"^":[pt,[pt,pt],function(E,z){var Z=z[0],he=z[1];return Math.pow(Z.evaluate(E),he.evaluate(E))}],sqrt:[pt,[pt],function(E,z){var Z=z[0];return Math.sqrt(Z.evaluate(E))}],log10:[pt,[pt],function(E,z){var Z=z[0];return Math.log(Z.evaluate(E))/Math.LN10}],ln:[pt,[pt],function(E,z){var Z=z[0];return Math.log(Z.evaluate(E))}],log2:[pt,[pt],function(E,z){var Z=z[0];return Math.log(Z.evaluate(E))/Math.LN2}],sin:[pt,[pt],function(E,z){var Z=z[0];return Math.sin(Z.evaluate(E))}],cos:[pt,[pt],function(E,z){var Z=z[0];return Math.cos(Z.evaluate(E))}],tan:[pt,[pt],function(E,z){var Z=z[0];return Math.tan(Z.evaluate(E))}],asin:[pt,[pt],function(E,z){var Z=z[0];return Math.asin(Z.evaluate(E))}],acos:[pt,[pt],function(E,z){var Z=z[0];return Math.acos(Z.evaluate(E))}],atan:[pt,[pt],function(E,z){var Z=z[0];return Math.atan(Z.evaluate(E))}],min:[pt,Za(pt),function(E,z){return Math.min.apply(Math,z.map(function(Z){return Z.evaluate(E)}))}],max:[pt,Za(pt),function(E,z){return Math.max.apply(Math,z.map(function(Z){return Z.evaluate(E)}))}],abs:[pt,[pt],function(E,z){var Z=z[0];return Math.abs(Z.evaluate(E))}],round:[pt,[pt],function(E,z){var Z=z[0].evaluate(E);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[pt,[pt],function(E,z){var Z=z[0];return Math.floor(Z.evaluate(E))}],ceil:[pt,[pt],function(E,z){var Z=z[0];return Math.ceil(Z.evaluate(E))}],"filter-==":[Mt,[gt,Ut],function(E,z){var Z=z[0],he=z[1];return E.properties()[Z.value]===he.value}],"filter-id-==":[Mt,[Ut],function(E,z){var Z=z[0];return E.id()===Z.value}],"filter-type-==":[Mt,[gt],function(E,z){var Z=z[0];return E.geometryType()===Z.value}],"filter-<":[Mt,[gt,Ut],function(E,z){var Z=z[0],he=z[1],Ie=E.properties()[Z.value],Ue=he.value;return typeof Ie==typeof Ue&&Ie<Ue}],"filter-id-<":[Mt,[Ut],function(E,z){var Z=z[0],he=E.id(),Ie=Z.value;return typeof he==typeof Ie&&he<Ie}],"filter->":[Mt,[gt,Ut],function(E,z){var Z=z[0],he=z[1],Ie=E.properties()[Z.value],Ue=he.value;return typeof Ie==typeof Ue&&Ie>Ue}],"filter-id->":[Mt,[Ut],function(E,z){var Z=z[0],he=E.id(),Ie=Z.value;return typeof he==typeof Ie&&he>Ie}],"filter-<=":[Mt,[gt,Ut],function(E,z){var Z=z[0],he=z[1],Ie=E.properties()[Z.value],Ue=he.value;return typeof Ie==typeof Ue&&Ie<=Ue}],"filter-id-<=":[Mt,[Ut],function(E,z){var Z=z[0],he=E.id(),Ie=Z.value;return typeof he==typeof Ie&&he<=Ie}],"filter->=":[Mt,[gt,Ut],function(E,z){var Z=z[0],he=z[1],Ie=E.properties()[Z.value],Ue=he.value;return typeof Ie==typeof Ue&&Ie>=Ue}],"filter-id->=":[Mt,[Ut],function(E,z){var Z=z[0],he=E.id(),Ie=Z.value;return typeof he==typeof Ie&&he>=Ie}],"filter-has":[Mt,[Ut],function(E,z){return z[0].value in E.properties()}],"filter-has-id":[Mt,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[Mt,[qt(gt)],function(E,z){return z[0].value.indexOf(E.geometryType())>=0}],"filter-id-in":[Mt,[qt(Ut)],function(E,z){return z[0].value.indexOf(E.id())>=0}],"filter-in-small":[Mt,[gt,qt(Ut)],function(E,z){var Z=z[0];return z[1].value.indexOf(E.properties()[Z.value])>=0}],"filter-in-large":[Mt,[gt,qt(Ut)],function(E,z){var Z=z[0],he=z[1];return function(Ie,Ue,We,it){for(;We<=it;){var ft=We+it>>1;if(Ue[ft]===Ie)return!0;Ue[ft]>Ie?it=ft-1:We=ft+1}return!1}(E.properties()[Z.value],he.value,0,he.value.length-1)}],all:{type:Mt,overloads:[[[Mt,Mt],function(E,z){var Z=z[0],he=z[1];return Z.evaluate(E)&&he.evaluate(E)}],[Za(Mt),function(E,z){for(var Z=0,he=z;Z<he.length;Z+=1)if(!he[Z].evaluate(E))return!1;return!0}]]},any:{type:Mt,overloads:[[[Mt,Mt],function(E,z){var Z=z[0],he=z[1];return Z.evaluate(E)||he.evaluate(E)}],[Za(Mt),function(E,z){for(var Z=0,he=z;Z<he.length;Z+=1)if(he[Z].evaluate(E))return!0;return!1}]]},"!":[Mt,[Mt],function(E,z){return!z[0].evaluate(E)}],"is-supported-script":[Mt,[gt],function(E,z){var Z=z[0],he=E.globals&&E.globals.isSupportedScript;return!he||he(Z.evaluate(E))}],upcase:[gt,[gt],function(E,z){return z[0].evaluate(E).toUpperCase()}],downcase:[gt,[gt],function(E,z){return z[0].evaluate(E).toLowerCase()}],concat:[gt,Za(Ut),function(E,z){return z.map(function(Z){return fr(Z.evaluate(E))}).join("")}],"resolved-locale":[gt,[Jt],function(E,z){return z[0].evaluate(E).resolvedLocale()}]});var sl=function(E,z){this.expression=E,this._warningHistory={},this._evaluator=new Nn,this._defaultValue=z?function(Z){return Z.type==="color"&&ao(Z.default)?new vn(0,0,0,0):Z.type==="color"?vn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(z):null,this._enumValues=z&&z.type==="enum"?z.values:null};function qs(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in Ws}function ll(E,z){var Z=new sr(Ws,[],z?function(Ie){var Ue={color:Nt,string:gt,number:pt,enum:gt,boolean:Mt,formatted:Vt,resolvedImage:Qt};return Ie.type==="array"?qt(Ue[Ie.value]||Ut,Ie.length):Ue[Ie.type]}(z):void 0),he=Z.parse(E,void 0,void 0,void 0,z&&z.type==="string"?{typeAnnotation:"coerce"}:void 0);return he?Ss(new sl(he,z)):bo(Z.errors)}sl.prototype.evaluateWithoutErrorHandling=function(E,z,Z,he,Ie,Ue){return this._evaluator.globals=E,this._evaluator.feature=z,this._evaluator.featureState=Z,this._evaluator.canonical=he,this._evaluator.availableImages=Ie||null,this._evaluator.formattedSection=Ue,this.expression.evaluate(this._evaluator)},sl.prototype.evaluate=function(E,z,Z,he,Ie,Ue){this._evaluator.globals=E,this._evaluator.feature=z||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=he,this._evaluator.availableImages=Ie||null,this._evaluator.formattedSection=Ue||null;try{var We=this.expression.evaluate(this._evaluator);if(We==null||typeof We=="number"&&We!=We)return this._defaultValue;if(this._enumValues&&!(We in this._enumValues))throw new Jn("Expected value to be one of "+Object.keys(this._enumValues).map(function(it){return JSON.stringify(it)}).join(", ")+", but found "+JSON.stringify(We)+" instead.");return We}catch(it){return this._warningHistory[it.message]||(this._warningHistory[it.message]=!0,typeof console<"u"&&console.warn(it.message)),this._defaultValue}};var rs=function(E,z){this.kind=E,this._styleExpression=z,this.isStateDependent=E!=="constant"&&!Zn(z.expression)};rs.prototype.evaluateWithoutErrorHandling=function(E,z,Z,he,Ie,Ue){return this._styleExpression.evaluateWithoutErrorHandling(E,z,Z,he,Ie,Ue)},rs.prototype.evaluate=function(E,z,Z,he,Ie,Ue){return this._styleExpression.evaluate(E,z,Z,he,Ie,Ue)};var Bo=function(E,z,Z,he){this.kind=E,this.zoomStops=Z,this._styleExpression=z,this.isStateDependent=E!=="camera"&&!Zn(z.expression),this.interpolationType=he};function is(E,z){if((E=ll(E,z)).result==="error")return E;var Z=E.value.expression,he=tr(Z);if(!he&&!No(z))return bo([new xt("","data expressions not supported")]);var Ie=lr(Z,["zoom"]);if(!Ie&&!bu(z))return bo([new xt("","zoom expressions not supported")]);var Ue=Rl(Z);if(!Ue&&!Ie)return bo([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ue instanceof xt)return bo([Ue]);if(Ue instanceof Wi&&!ns(z))return bo([new xt("",'"interpolate" expressions cannot be used with this property')]);if(!Ue)return Ss(new rs(he?"constant":"source",E.value));var We=Ue instanceof Wi?Ue.interpolation:void 0;return Ss(new Bo(he?"camera":"composite",E.value,Ue.labels,We))}Bo.prototype.evaluateWithoutErrorHandling=function(E,z,Z,he,Ie,Ue){return this._styleExpression.evaluateWithoutErrorHandling(E,z,Z,he,Ie,Ue)},Bo.prototype.evaluate=function(E,z,Z,he,Ie,Ue){return this._styleExpression.evaluate(E,z,Z,he,Ie,Ue)},Bo.prototype.interpolationFactor=function(E,z,Z){return this.interpolationType?Wi.interpolationFactor(this.interpolationType,E,z,Z):0};var Uo=function(E,z){this._parameters=E,this._specification=z,rt(this,Ka(this._parameters,this._specification))};function Rl(E){var z=null;if(E instanceof _o)z=Rl(E.result);else if(E instanceof ti)for(var Z=0,he=E.args;Z<he.length;Z+=1){var Ie=he[Z];if(z=Rl(Ie))break}else(E instanceof Er||E instanceof Wi)&&E.input instanceof Bn&&E.input.name==="zoom"&&(z=E);return z instanceof xt||E.eachChild(function(Ue){var We=Rl(Ue);We instanceof xt?z=We:!z&&We?z=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):z&&We&&z!==We&&(z=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),z}function oo(E){var z=E.key,Z=E.value,he=E.valueSpec||{},Ie=E.objectElementValidators||{},Ue=E.style,We=E.styleSpec,it=[],ft=pi(Z);if(ft!=="object")return[new Be(z,Z,"object expected, "+ft+" found")];for(var At in Z){var St=At.split(".")[0],Ft=he[St]||he["*"],Wt=void 0;if(Ie[St])Wt=Ie[St];else if(he[St])Wt=Pi;else if(Ie["*"])Wt=Ie["*"];else{if(!he["*"]){it.push(new Be(z,Z[At],'unknown property "'+At+'"'));continue}Wt=Pi}it=it.concat(Wt({key:(z&&z+".")+At,value:Z[At],valueSpec:Ft,style:Ue,styleSpec:We,object:Z,objectKey:At},Z))}for(var jt in he)Ie[jt]||he[jt].required&&he[jt].default===void 0&&Z[jt]===void 0&&it.push(new Be(z,Z,'missing required property "'+jt+'"'));return it}function Mu(E){var z=E.value,Z=E.valueSpec,he=E.style,Ie=E.styleSpec,Ue=E.key,We=E.arrayElementValidator||Pi;if(pi(z)!=="array")return[new Be(Ue,z,"array expected, "+pi(z)+" found")];if(Z.length&&z.length!==Z.length)return[new Be(Ue,z,"array length "+Z.length+" expected, length "+z.length+" found")];if(Z["min-length"]&&z.length<Z["min-length"])return[new Be(Ue,z,"array length at least "+Z["min-length"]+" expected, length "+z.length+" found")];var it={type:Z.value,values:Z.values};Ie.$version<7&&(it.function=Z.function),pi(Z.value)==="object"&&(it=Z.value);for(var ft=[],At=0;At<z.length;At++)ft=ft.concat(We({array:z,arrayIndex:At,value:z[At],valueSpec:it,style:he,styleSpec:Ie,key:Ue+"["+At+"]"}));return ft}function Au(E){var z=E.key,Z=E.value,he=E.valueSpec,Ie=pi(Z);return Ie==="number"&&Z!=Z&&(Ie="NaN"),Ie!=="number"?[new Be(z,Z,"number expected, "+Ie+" found")]:"minimum"in he&&Z<he.minimum?[new Be(z,Z,Z+" is less than the minimum value "+he.minimum)]:"maximum"in he&&Z>he.maximum?[new Be(z,Z,Z+" is greater than the maximum value "+he.maximum)]:[]}function Il(E){var z,Z,he,Ie=E.valueSpec,Ue=vt(E.value.type),We={},it=Ue!=="categorical"&&E.value.property===void 0,ft=!it,At=pi(E.value.stops)==="array"&&pi(E.value.stops[0])==="array"&&pi(E.value.stops[0][0])==="object",St=oo({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:function(jt){if(Ue==="identity")return[new Be(jt.key,jt.value,'identity function may not have a "stops" property')];var on=[],un=jt.value;return on=on.concat(Mu({key:jt.key,value:un,valueSpec:jt.valueSpec,style:jt.style,styleSpec:jt.styleSpec,arrayElementValidator:Ft})),pi(un)==="array"&&un.length===0&&on.push(new Be(jt.key,un,"array must have at least one stop")),on},default:function(jt){return Pi({key:jt.key,value:jt.value,valueSpec:Ie,style:jt.style,styleSpec:jt.styleSpec})}}});return Ue==="identity"&&it&&St.push(new Be(E.key,E.value,'missing required property "property"')),Ue==="identity"||E.value.stops||St.push(new Be(E.key,E.value,'missing required property "stops"')),Ue==="exponential"&&E.valueSpec.expression&&!ns(E.valueSpec)&&St.push(new Be(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(ft&&!No(E.valueSpec)?St.push(new Be(E.key,E.value,"property functions not supported")):it&&!bu(E.valueSpec)&&St.push(new Be(E.key,E.value,"zoom functions not supported"))),Ue!=="categorical"&&!At||E.value.property!==void 0||St.push(new Be(E.key,E.value,'"property" property is required')),St;function Ft(jt){var on=[],un=jt.value,En=jt.key;if(pi(un)!=="array")return[new Be(En,un,"array expected, "+pi(un)+" found")];if(un.length!==2)return[new Be(En,un,"array length 2 expected, length "+un.length+" found")];if(At){if(pi(un[0])!=="object")return[new Be(En,un,"object expected, "+pi(un[0])+" found")];if(un[0].zoom===void 0)return[new Be(En,un,"object stop key must have zoom")];if(un[0].value===void 0)return[new Be(En,un,"object stop key must have value")];if(he&&he>vt(un[0].zoom))return[new Be(En,un[0].zoom,"stop zoom values must appear in ascending order")];vt(un[0].zoom)!==he&&(he=vt(un[0].zoom),Z=void 0,We={}),on=on.concat(oo({key:En+"[0]",value:un[0],valueSpec:{zoom:{}},style:jt.style,styleSpec:jt.styleSpec,objectElementValidators:{zoom:Au,value:Wt}}))}else on=on.concat(Wt({key:En+"[0]",value:un[0],valueSpec:{},style:jt.style,styleSpec:jt.styleSpec},un));return qs(mt(un[1]))?on.concat([new Be(En+"[1]",un[1],"expressions are not allowed in function stops.")]):on.concat(Pi({key:En+"[1]",value:un[1],valueSpec:Ie,style:jt.style,styleSpec:jt.styleSpec}))}function Wt(jt,on){var un=pi(jt.value),En=vt(jt.value),Sn=jt.value!==null?jt.value:on;if(z){if(un!==z)return[new Be(jt.key,Sn,un+" stop domain type must match previous stop domain type "+z)]}else z=un;if(un!=="number"&&un!=="string"&&un!=="boolean")return[new Be(jt.key,Sn,"stop domain value must be a number, string, or boolean")];if(un!=="number"&&Ue!=="categorical"){var Dn="number expected, "+un+" found";return No(Ie)&&Ue===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(jt.key,Sn,Dn)]}return Ue!=="categorical"||un!=="number"||isFinite(En)&&Math.floor(En)===En?Ue!=="categorical"&&un==="number"&&Z!==void 0&&En<Z?[new Be(jt.key,Sn,"stop domain values must appear in ascending order")]:(Z=En,Ue==="categorical"&&En in We?[new Be(jt.key,Sn,"stop domain values must be unique")]:(We[En]=!0,[])):[new Be(jt.key,Sn,"integer expected, found "+En)]}}function as(E){var z=(E.expressionContext==="property"?is:ll)(mt(E.value),E.valueSpec);if(z.result==="error")return z.value.map(function(he){return new Be(""+E.key+he.key,E.value,he.message)});var Z=z.value.expression||z.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!Z.outputDefined())return[new Be(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Zn(Z))return[new Be(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Zn(Z))return[new Be(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!lr(Z,["zoom","feature-state"]))return[new Be(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!tr(Z))return[new Be(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ol(E){var z=E.key,Z=E.value,he=E.valueSpec,Ie=[];return Array.isArray(he.values)?he.values.indexOf(vt(Z))===-1&&Ie.push(new Be(z,Z,"expected one of ["+he.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(he.values).indexOf(vt(Z))===-1&&Ie.push(new Be(z,Z,"expected one of ["+Object.keys(he.values).join(", ")+"], "+JSON.stringify(Z)+" found")),Ie}function ks(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var z=0,Z=E.slice(1);z<Z.length;z+=1){var he=Z[z];if(!ks(he)&&typeof he!="boolean")return!1}return!0;default:return!0}}Uo.deserialize=function(E){return new Uo(E._parameters,E._specification)},Uo.serialize=function(E){return{_parameters:E._parameters,_specification:E._specification}};var Ql={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xs(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};ks(E)||(E=Ys(E));var z=ll(E,Ql);if(z.result==="error")throw new Error(z.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,he,Ie){return z.value.evaluate(Z,he,{},Ie)},needGeometry:ul(E)}}function Ls(E,z){return E<z?-1:E>z?1:0}function ul(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var z=1;z<E.length;z++)if(ul(E[z]))return!0;return!1}function Ys(E){if(!E)return!0;var z,Z=E[0];return E.length<=1?Z!=="any":Z==="=="?di(E[1],E[2],"=="):Z==="!="?ia(di(E[1],E[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?di(E[1],E[2],Z):Z==="any"?(z=E.slice(1),["any"].concat(z.map(Ys))):Z==="all"?["all"].concat(E.slice(1).map(Ys)):Z==="none"?["all"].concat(E.slice(1).map(Ys).map(ia)):Z==="in"?os(E[1],E.slice(2)):Z==="!in"?ia(os(E[1],E.slice(2))):Z==="has"?jo(E[1]):Z==="!has"?ia(jo(E[1])):Z!=="within"||E}function di(E,z,Z){switch(E){case"$type":return["filter-type-"+Z,z];case"$id":return["filter-id-"+Z,z];default:return["filter-"+Z,E,z]}}function os(E,z){if(z.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(Z){return typeof Z!=typeof z[0]})?["filter-in-large",E,["literal",z.sort(Ls)]]:["filter-in-small",E,["literal",z]]}}function jo(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function ia(E){return["!",E]}function Zr(E){return ks(mt(E.value))?as(rt({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ni(E)}function ni(E){var z=E.value,Z=E.key;if(pi(z)!=="array")return[new Be(Z,z,"array expected, "+pi(z)+" found")];var he,Ie=E.styleSpec,Ue=[];if(z.length<1)return[new Be(Z,z,"filter array must have at least 1 element")];switch(Ue=Ue.concat(Ol({key:Z+"[0]",value:z[0],valueSpec:Ie.filter_operator,style:E.style,styleSpec:E.styleSpec})),vt(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&vt(z[1])==="$type"&&Ue.push(new Be(Z,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&Ue.push(new Be(Z,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(he=pi(z[1]))!=="string"&&Ue.push(new Be(Z+"[1]",z[1],"string expected, "+he+" found"));for(var We=2;We<z.length;We++)he=pi(z[We]),vt(z[1])==="$type"?Ue=Ue.concat(Ol({key:Z+"["+We+"]",value:z[We],valueSpec:Ie.geometry_type,style:E.style,styleSpec:E.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&Ue.push(new Be(Z+"["+We+"]",z[We],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var it=1;it<z.length;it++)Ue=Ue.concat(ni({key:Z+"["+it+"]",value:z[it],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":he=pi(z[1]),z.length!==2?Ue.push(new Be(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):he!=="string"&&Ue.push(new Be(Z+"[1]",z[1],"string expected, "+he+" found"));break;case"within":he=pi(z[1]),z.length!==2?Ue.push(new Be(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):he!=="object"&&Ue.push(new Be(Z+"[1]",z[1],"object expected, "+he+" found"))}return Ue}function ss(E,z){var Z=E.key,he=E.style,Ie=E.styleSpec,Ue=E.value,We=E.objectKey,it=Ie[z+"_"+E.layerType];if(!it)return[];var ft=We.match(/^(.*)-transition$/);if(z==="paint"&&ft&&it[ft[1]]&&it[ft[1]].transition)return Pi({key:Z,value:Ue,valueSpec:Ie.transition,style:he,styleSpec:Ie});var At,St=E.valueSpec||it[We];if(!St)return[new Be(Z,Ue,'unknown property "'+We+'"')];if(pi(Ue)==="string"&&No(St)&&!St.tokens&&(At=/^{([^}]+)}$/.exec(Ue)))return[new Be(Z,Ue,'"'+We+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(At[1])+" }`.")];var Ft=[];return E.layerType==="symbol"&&(We==="text-field"&&he&&!he.glyphs&&Ft.push(new Be(Z,Ue,'use of "text-field" requires a style "glyphs" property')),We==="text-font"&&ao(mt(Ue))&&vt(Ue.type)==="identity"&&Ft.push(new Be(Z,Ue,'"text-font" does not support identity functions'))),Ft.concat(Pi({key:E.key,value:Ue,valueSpec:St,style:he,styleSpec:Ie,expressionContext:"property",propertyType:z,propertyKey:We}))}function Vo(E){return ss(E,"paint")}function eu(E){return ss(E,"layout")}function cl(E){var z=[],Z=E.value,he=E.key,Ie=E.style,Ue=E.styleSpec;Z.type||Z.ref||z.push(new Be(he,Z,'either "type" or "ref" is required'));var We,it=vt(Z.type),ft=vt(Z.ref);if(Z.id)for(var At=vt(Z.id),St=0;St<E.arrayIndex;St++){var Ft=Ie.layers[St];vt(Ft.id)===At&&z.push(new Be(he,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Ft.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(on){on in Z&&z.push(new Be(he,Z[on],'"'+on+'" is prohibited for ref layers'))}),Ie.layers.forEach(function(on){vt(on.id)===ft&&(We=on)}),We?We.ref?z.push(new Be(he,Z.ref,"ref cannot reference another ref layer")):it=vt(We.type):z.push(new Be(he,Z.ref,'ref layer "'+ft+'" not found'));else if(it!=="background")if(Z.source){var Wt=Ie.sources&&Ie.sources[Z.source],jt=Wt&&vt(Wt.type);Wt?jt==="vector"&&it==="raster"?z.push(new Be(he,Z.source,'layer "'+Z.id+'" requires a raster source')):jt==="raster"&&it!=="raster"?z.push(new Be(he,Z.source,'layer "'+Z.id+'" requires a vector source')):jt!=="vector"||Z["source-layer"]?jt==="raster-dem"&&it!=="hillshade"?z.push(new Be(he,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):it!=="line"||!Z.paint||!Z.paint["line-gradient"]||jt==="geojson"&&Wt.lineMetrics||z.push(new Be(he,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new Be(he,Z,'layer "'+Z.id+'" must specify a "source-layer"')):z.push(new Be(he,Z.source,'source "'+Z.source+'" not found'))}else z.push(new Be(he,Z,'missing required property "source"'));return z=z.concat(oo({key:he,value:Z,valueSpec:Ue.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Pi({key:he+".type",value:Z.type,valueSpec:Ue.layer.type,style:E.style,styleSpec:E.styleSpec,object:Z,objectKey:"type"})},filter:Zr,layout:function(on){return oo({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(un){return eu(rt({layerType:it},un))}}})},paint:function(on){return oo({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(un){return Vo(rt({layerType:it},un))}}})}}})),z}function ls(E){var z=E.value,Z=E.key,he=pi(z);return he!=="string"?[new Be(Z,z,"string expected, "+he+" found")]:[]}var fl={promoteId:function(E){var z=E.key,Z=E.value;if(pi(Z)==="string")return ls({key:z,value:Z});var he=[];for(var Ie in Z)he.push.apply(he,ls({key:z+"."+Ie,value:Z[Ie]}));return he}};function Ho(E){var z=E.value,Z=E.key,he=E.styleSpec,Ie=E.style;if(!z.type)return[new Be(Z,z,'"type" is required')];var Ue,We=vt(z.type);switch(We){case"vector":case"raster":case"raster-dem":return oo({key:Z,value:z,valueSpec:he["source_"+We.replace("-","_")],style:E.style,styleSpec:he,objectElementValidators:fl});case"geojson":if(Ue=oo({key:Z,value:z,valueSpec:he.source_geojson,style:Ie,styleSpec:he,objectElementValidators:fl}),z.cluster)for(var it in z.clusterProperties){var ft=z.clusterProperties[it],At=ft[0],St=ft[1],Ft=typeof At=="string"?[At,["accumulated"],["get",it]]:At;Ue.push.apply(Ue,as({key:Z+"."+it+".map",value:St,expressionContext:"cluster-map"})),Ue.push.apply(Ue,as({key:Z+"."+it+".reduce",value:Ft,expressionContext:"cluster-reduce"}))}return Ue;case"video":return oo({key:Z,value:z,valueSpec:he.source_video,style:Ie,styleSpec:he});case"image":return oo({key:Z,value:z,valueSpec:he.source_image,style:Ie,styleSpec:he});case"canvas":return[new Be(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ol({key:Z+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ie,styleSpec:he})}}function Cs(E){var z=E.value,Z=E.styleSpec,he=Z.light,Ie=E.style,Ue=[],We=pi(z);if(z===void 0)return Ue;if(We!=="object")return Ue.concat([new Be("light",z,"object expected, "+We+" found")]);for(var it in z){var ft=it.match(/^(.*)-transition$/);Ue=ft&&he[ft[1]]&&he[ft[1]].transition?Ue.concat(Pi({key:it,value:z[it],valueSpec:Z.transition,style:Ie,styleSpec:Z})):he[it]?Ue.concat(Pi({key:it,value:z[it],valueSpec:he[it],style:Ie,styleSpec:Z})):Ue.concat([new Be(it,z[it],'unknown property "'+it+'"')])}return Ue}var us={"*":function(){return[]},array:Mu,boolean:function(E){var z=E.value,Z=E.key,he=pi(z);return he!=="boolean"?[new Be(Z,z,"boolean expected, "+he+" found")]:[]},number:Au,color:function(E){var z=E.key,Z=E.value,he=pi(Z);return he!=="string"?[new Be(z,Z,"color expected, "+he+" found")]:cn(Z)===null?[new Be(z,Z,'color expected, "'+Z+'" found')]:[]},constants:Qe,enum:Ol,filter:Zr,function:Il,layer:cl,object:oo,source:Ho,light:Cs,string:ls,formatted:function(E){return ls(E).length===0?[]:as(E)},resolvedImage:function(E){return ls(E).length===0?[]:as(E)}};function Pi(E){var z=E.value,Z=E.valueSpec,he=E.styleSpec;return Z.expression&&ao(vt(z))?Il(E):Z.expression&&qs(mt(z))?as(E):Z.type&&us[Z.type]?us[Z.type](E):oo(rt({},E,{valueSpec:Z.type?he[Z.type]:Z}))}function Ps(E){var z=E.value,Z=E.key,he=ls(E);return he.length||(z.indexOf("{fontstack}")===-1&&he.push(new Be(Z,z,'"glyphs" url must include a "{fontstack}" token')),z.indexOf("{range}")===-1&&he.push(new Be(Z,z,'"glyphs" url must include a "{range}" token'))),he}function Rs(E,z){z===void 0&&(z=De);var Z=[];return Z=Z.concat(Pi({key:"",value:E,valueSpec:z.$root,styleSpec:z,style:E,objectElementValidators:{glyphs:Ps,"*":function(){return[]}}})),E.constants&&(Z=Z.concat(Qe({key:"constants",value:E.constants,style:E,styleSpec:z}))),Zi(Z)}function Zi(E){return[].concat(E).sort(function(z,Z){return z.line-Z.line})}function ga(E){return function(){for(var z=[],Z=arguments.length;Z--;)z[Z]=arguments[Z];return Zi(E.apply(this,z))}}Rs.source=ga(Ho),Rs.light=ga(Cs),Rs.layer=ga(cl),Rs.filter=ga(Zr),Rs.paintProperty=ga(Vo),Rs.layoutProperty=ga(eu);var fa=Rs,Ki=fa.light,Ta=fa.paintProperty,cs=fa.layoutProperty;function so(E,z){var Z=!1;if(z&&z.length)for(var he=0,Ie=z;he<Ie.length;he+=1){var Ue=Ie[he];E.fire(new ut(new Error(Ue.message))),Z=!0}return Z}var aa=Ja,Ha=3;function Ja(E,z,Z){var he=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var Ie=new Int32Array(this.arrayBuffer);E=Ie[0],z=Ie[1],Z=Ie[2],this.d=z+2*Z;for(var Ue=0;Ue<this.d*this.d;Ue++){var We=Ie[Ha+Ue],it=Ie[Ha+Ue+1];he.push(We===it?null:Ie.subarray(We,it))}var ft=Ie[Ha+he.length],At=Ie[Ha+he.length+1];this.keys=Ie.subarray(ft,At),this.bboxes=Ie.subarray(At),this.insert=this._insertReadonly}else{this.d=z+2*Z;for(var St=0;St<this.d*this.d;St++)he.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=E,this.padding=Z,this.scale=z/E,this.uid=0;var Ft=Z/z*E;this.min=-Ft,this.max=E+Ft}Ja.prototype.insert=function(E,z,Z,he,Ie){this._forEachCell(z,Z,he,Ie,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(z),this.bboxes.push(Z),this.bboxes.push(he),this.bboxes.push(Ie)},Ja.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ja.prototype._insertCell=function(E,z,Z,he,Ie,Ue){this.cells[Ie].push(Ue)},Ja.prototype.query=function(E,z,Z,he,Ie){var Ue=this.min,We=this.max;if(E<=Ue&&z<=Ue&&We<=Z&&We<=he&&!Ie)return Array.prototype.slice.call(this.keys);var it=[];return this._forEachCell(E,z,Z,he,this._queryCell,it,{},Ie),it},Ja.prototype._queryCell=function(E,z,Z,he,Ie,Ue,We,it){var ft=this.cells[Ie];if(ft!==null)for(var At=this.keys,St=this.bboxes,Ft=0;Ft<ft.length;Ft++){var Wt=ft[Ft];if(We[Wt]===void 0){var jt=4*Wt;(it?it(St[jt+0],St[jt+1],St[jt+2],St[jt+3]):E<=St[jt+2]&&z<=St[jt+3]&&Z>=St[jt+0]&&he>=St[jt+1])?(We[Wt]=!0,Ue.push(At[Wt])):We[Wt]=!1}}},Ja.prototype._forEachCell=function(E,z,Z,he,Ie,Ue,We,it){for(var ft=this._convertToCellCoord(E),At=this._convertToCellCoord(z),St=this._convertToCellCoord(Z),Ft=this._convertToCellCoord(he),Wt=ft;Wt<=St;Wt++)for(var jt=At;jt<=Ft;jt++){var on=this.d*jt+Wt;if((!it||it(this._convertFromCellCoord(Wt),this._convertFromCellCoord(jt),this._convertFromCellCoord(Wt+1),this._convertFromCellCoord(jt+1)))&&Ie.call(this,E,z,Z,he,on,Ue,We,it))return}},Ja.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},Ja.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},Ja.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,z=Ha+this.cells.length+1+1,Z=0,he=0;he<this.cells.length;he++)Z+=this.cells[he].length;var Ie=new Int32Array(z+Z+this.keys.length+this.bboxes.length);Ie[0]=this.extent,Ie[1]=this.n,Ie[2]=this.padding;for(var Ue=z,We=0;We<E.length;We++){var it=E[We];Ie[Ha+We]=Ue,Ie.set(it,Ue),Ue+=it.length}return Ie[Ha+E.length]=Ue,Ie.set(this.keys,Ue),Ue+=this.keys.length,Ie[Ha+E.length+1]=Ue,Ie.set(this.bboxes,Ue),Ue+=this.bboxes.length,Ie.buffer};var Dl=self.ImageData,$a=self.ImageBitmap,oa={};function Sr(E,z,Z){Z===void 0&&(Z={}),Object.defineProperty(z,"_classRegistryKey",{value:E,writeable:!1}),oa[E]={klass:z,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var va in Sr("Object",Object),aa.serialize=function(E,z){var Z=E.toArrayBuffer();return z&&z.push(Z),{buffer:Z}},aa.deserialize=function(E){return new aa(E.buffer)},Sr("Grid",aa),Sr("Color",vn),Sr("Error",Error),Sr("ResolvedImage",kn),Sr("StylePropertyFunction",Uo),Sr("StyleExpression",sl,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",Bo),Sr("ZoomConstantExpression",rs),Sr("CompoundExpression",Bn,{omit:["_evaluate"]}),Ws)Ws[va]._classRegistryKey||Sr("Expression_"+va,Ws[va]);function hl(E){return E&&typeof ArrayBuffer<"u"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function zl(E){return $a&&E instanceof $a}function Is(E,z){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(hl(E)||zl(E))return z&&z.push(E),E;if(ArrayBuffer.isView(E)){var Z=E;return z&&z.push(Z.buffer),Z}if(E instanceof Dl)return z&&z.push(E.data.buffer),E;if(Array.isArray(E)){for(var he=[],Ie=0,Ue=E;Ie<Ue.length;Ie+=1){var We=Ue[Ie];he.push(Is(We,z))}return he}if(typeof E=="object"){var it=E.constructor,ft=it._classRegistryKey;if(!ft)throw new Error("can't serialize object of unregistered class");var At=it.serialize?it.serialize(E,z):{};if(!it.serialize){for(var St in E)if(E.hasOwnProperty(St)&&!(oa[ft].omit.indexOf(St)>=0)){var Ft=E[St];At[St]=oa[ft].shallow.indexOf(St)>=0?Ft:Is(Ft,z)}E instanceof Error&&(At.message=E.message)}if(At.$name)throw new Error("$name property is reserved for worker serialization logic.");return ft!=="Object"&&(At.$name=ft),At}throw new Error("can't serialize object of type "+typeof E)}function Os(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||hl(E)||zl(E)||ArrayBuffer.isView(E)||E instanceof Dl)return E;if(Array.isArray(E))return E.map(Os);if(typeof E=="object"){var z=E.$name||"Object",Z=oa[z].klass;if(!Z)throw new Error("can't deserialize unregistered class "+z);if(Z.deserialize)return Z.deserialize(E);for(var he=Object.create(Z.prototype),Ie=0,Ue=Object.keys(E);Ie<Ue.length;Ie+=1){var We=Ue[Ie];if(We!=="$name"){var it=E[We];he[We]=oa[z].shallow.indexOf(We)>=0?it:Os(it)}}return he}throw new Error("can't deserialize object of type "+typeof E)}var Go=function(){this.first=!0};Go.prototype.update=function(E,z){var Z=Math.floor(E);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=E,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=z),E!==this.lastZoom&&(this.lastZoom=E,this.lastFloorZoom=Z,!0))};var Tr={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function lo(E){for(var z=0,Z=E;z<Z.length;z+=1)if(Zs(Z[z].charCodeAt(0)))return!0;return!1}function Zs(E){return!(E!==746&&E!==747&&(E<4352||!(Tr["Bopomofo Extended"](E)||Tr.Bopomofo(E)||Tr["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Tr["CJK Compatibility Ideographs"](E)||Tr["CJK Compatibility"](E)||Tr["CJK Radicals Supplement"](E)||Tr["CJK Strokes"](E)||!(!Tr["CJK Symbols and Punctuation"](E)||E>=12296&&E<=12305||E>=12308&&E<=12319||E===12336)||Tr["CJK Unified Ideographs Extension A"](E)||Tr["CJK Unified Ideographs"](E)||Tr["Enclosed CJK Letters and Months"](E)||Tr["Hangul Compatibility Jamo"](E)||Tr["Hangul Jamo Extended-A"](E)||Tr["Hangul Jamo Extended-B"](E)||Tr["Hangul Jamo"](E)||Tr["Hangul Syllables"](E)||Tr.Hiragana(E)||Tr["Ideographic Description Characters"](E)||Tr.Kanbun(E)||Tr["Kangxi Radicals"](E)||Tr["Katakana Phonetic Extensions"](E)||Tr.Katakana(E)&&E!==12540||!(!Tr["Halfwidth and Fullwidth Forms"](E)||E===65288||E===65289||E===65293||E>=65306&&E<=65310||E===65339||E===65341||E===65343||E>=65371&&E<=65503||E===65507||E>=65512&&E<=65519)||!(!Tr["Small Form Variants"](E)||E>=65112&&E<=65118||E>=65123&&E<=65126)||Tr["Unified Canadian Aboriginal Syllabics"](E)||Tr["Unified Canadian Aboriginal Syllabics Extended"](E)||Tr["Vertical Forms"](E)||Tr["Yijing Hexagram Symbols"](E)||Tr["Yi Syllables"](E)||Tr["Yi Radicals"](E))))}function pl(E){return!(Zs(E)||function(z){return!!(Tr["Latin-1 Supplement"](z)&&(z===167||z===169||z===174||z===177||z===188||z===189||z===190||z===215||z===247)||Tr["General Punctuation"](z)&&(z===8214||z===8224||z===8225||z===8240||z===8241||z===8251||z===8252||z===8258||z===8263||z===8264||z===8265||z===8273)||Tr["Letterlike Symbols"](z)||Tr["Number Forms"](z)||Tr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||z===9003||z>=9085&&z<=9114||z>=9150&&z<=9165||z===9167||z>=9169&&z<=9179||z>=9186&&z<=9215)||Tr["Control Pictures"](z)&&z!==9251||Tr["Optical Character Recognition"](z)||Tr["Enclosed Alphanumerics"](z)||Tr["Geometric Shapes"](z)||Tr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||Tr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||Tr["CJK Symbols and Punctuation"](z)||Tr.Katakana(z)||Tr["Private Use Area"](z)||Tr["CJK Compatibility Forms"](z)||Tr["Small Form Variants"](z)||Tr["Halfwidth and Fullwidth Forms"](z)||z===8734||z===8756||z===8757||z>=9984&&z<=10087||z>=10102&&z<=10131||z===65532||z===65533)}(E))}function ya(E){return Tr.Arabic(E)||Tr["Arabic Supplement"](E)||Tr["Arabic Extended-A"](E)||Tr["Arabic Presentation Forms-A"](E)||Tr["Arabic Presentation Forms-B"](E)}function uo(E){return E>=1424&&E<=2303||Tr["Arabic Presentation Forms-A"](E)||Tr["Arabic Presentation Forms-B"](E)}function Qa(E,z){return!(!z&&uo(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Tr.Khmer(E))}function Ga(E){for(var z=0,Z=E;z<Z.length;z+=1)if(uo(Z[z].charCodeAt(0)))return!0;return!1}var wo="deferred",Wo="loading",Ji="loaded",Ds="error",Ks=null,sa="unavailable",mi=null,dl=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(sa=Ds),Ks&&Ks(E)};function Ia(){$i.fire(new tt("pluginStateChange",{pluginStatus:sa,pluginURL:mi}))}var $i=new Ke,To=function(){return sa},tu=function(){if(sa!==wo||!mi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");sa=Wo,Ia(),mi&&Lt({url:mi},function(E){E?dl(E):(sa=Ji,Ia())})},Ni={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return sa===Ji||Ni.applyArabicShaping!=null},isLoading:function(){return sa===Wo},setState:function(E){sa=E.pluginStatus,mi=E.pluginURL},isParsed:function(){return Ni.applyArabicShaping!=null&&Ni.processBidirectionalText!=null&&Ni.processStyledBidirectionalText!=null},getPluginURL:function(){return mi}},ui=function(E,z){this.zoom=E,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Go,this.transition={})};ui.prototype.isSupportedScript=function(E){return function(z,Z){for(var he=0,Ie=z;he<Ie.length;he+=1)if(!Qa(Ie[he].charCodeAt(0),Z))return!1;return!0}(E,Ni.isLoaded())},ui.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ui.prototype.getCrossfadeParameters=function(){var E=this.zoom,z=E-Math.floor(E),Z=this.crossFadingFactor();return E>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*z}};var Wa=function(E,z){this.property=E,this.value=z,this.expression=function(Z,he){if(ao(Z))return new Uo(Z,he);if(qs(Z)){var Ie=is(Z,he);if(Ie.result==="error")throw new Error(Ie.value.map(function(We){return We.key+": "+We.message}).join(", "));return Ie.value}var Ue=Z;return typeof Z=="string"&&he.type==="color"&&(Ue=vn.parse(Z)),{kind:"constant",evaluate:function(){return Ue}}}(z===void 0?E.specification.default:z,E.specification)};Wa.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Wa.prototype.possiblyEvaluate=function(E,z,Z){return this.property.possiblyEvaluate(this,E,z,Z)};var Mo=function(E){this.property=E,this.value=new Wa(E,void 0)};Mo.prototype.transitioned=function(E,z){return new Fl(this.property,this.value,z,u({},E.transition,this.transition),E.now)},Mo.prototype.untransitioned=function(){return new Fl(this.property,this.value,null,{},0)};var co=function(E){this._properties=E,this._values=Object.create(E.defaultTransitionablePropertyValues)};co.prototype.getValue=function(E){return M(this._values[E].value.value)},co.prototype.setValue=function(E,z){this._values.hasOwnProperty(E)||(this._values[E]=new Mo(this._values[E].property)),this._values[E].value=new Wa(this._values[E].property,z===null?void 0:M(z))},co.prototype.getTransition=function(E){return M(this._values[E].transition)},co.prototype.setTransition=function(E,z){this._values.hasOwnProperty(E)||(this._values[E]=new Mo(this._values[E].property)),this._values[E].transition=M(z)||void 0},co.prototype.serialize=function(){for(var E={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var he=Z[z],Ie=this.getValue(he);Ie!==void 0&&(E[he]=Ie);var Ue=this.getTransition(he);Ue!==void 0&&(E[he+"-transition"]=Ue)}return E},co.prototype.transitioned=function(E,z){for(var Z=new fs(this._properties),he=0,Ie=Object.keys(this._values);he<Ie.length;he+=1){var Ue=Ie[he];Z._values[Ue]=this._values[Ue].transitioned(E,z._values[Ue])}return Z},co.prototype.untransitioned=function(){for(var E=new fs(this._properties),z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var he=Z[z];E._values[he]=this._values[he].untransitioned()}return E};var Fl=function(E,z,Z,he,Ie){this.property=E,this.value=z,this.begin=Ie+he.delay||0,this.end=this.begin+he.duration||0,E.specification.transition&&(he.delay||he.duration)&&(this.prior=Z)};Fl.prototype.possiblyEvaluate=function(E,z,Z){var he=E.now||0,Ie=this.value.possiblyEvaluate(E,z,Z),Ue=this.prior;if(Ue){if(he>this.end)return this.prior=null,Ie;if(this.value.isDataDriven())return this.prior=null,Ie;if(he<this.begin)return Ue.possiblyEvaluate(E,z,Z);var We=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Ue.possiblyEvaluate(E,z,Z),Ie,function(it){if(it<=0)return 0;if(it>=1)return 1;var ft=it*it,At=ft*it;return 4*(it<.5?At:3*(it-ft)+At-.75)}(We))}return Ie};var fs=function(E){this._properties=E,this._values=Object.create(E.defaultTransitioningPropertyValues)};fs.prototype.possiblyEvaluate=function(E,z,Z){for(var he=new ha(this._properties),Ie=0,Ue=Object.keys(this._values);Ie<Ue.length;Ie+=1){var We=Ue[Ie];he._values[We]=this._values[We].possiblyEvaluate(E,z,Z)}return he},fs.prototype.hasTransition=function(){for(var E=0,z=Object.keys(this._values);E<z.length;E+=1){var Z=z[E];if(this._values[Z].prior)return!0}return!1};var zs=function(E){this._properties=E,this._values=Object.create(E.defaultPropertyValues)};zs.prototype.getValue=function(E){return M(this._values[E].value)},zs.prototype.setValue=function(E,z){this._values[E]=new Wa(this._values[E].property,z===null?void 0:M(z))},zs.prototype.serialize=function(){for(var E={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var he=Z[z],Ie=this.getValue(he);Ie!==void 0&&(E[he]=Ie)}return E},zs.prototype.possiblyEvaluate=function(E,z,Z){for(var he=new ha(this._properties),Ie=0,Ue=Object.keys(this._values);Ie<Ue.length;Ie+=1){var We=Ue[Ie];he._values[We]=this._values[We].possiblyEvaluate(E,z,Z)}return he};var qi=function(E,z,Z){this.property=E,this.value=z,this.parameters=Z};qi.prototype.isConstant=function(){return this.value.kind==="constant"},qi.prototype.constantOr=function(E){return this.value.kind==="constant"?this.value.value:E},qi.prototype.evaluate=function(E,z,Z,he){return this.property.evaluate(this.value,this.parameters,E,z,Z,he)};var ha=function(E){this._properties=E,this._values=Object.create(E.defaultPossiblyEvaluatedValues)};ha.prototype.get=function(E){return this._values[E]};var Pr=function(E){this.specification=E};Pr.prototype.possiblyEvaluate=function(E,z){return E.expression.evaluate(z)},Pr.prototype.interpolate=function(E,z,Z){var he=_r[this.specification.type];return he?he(E,z,Z):E};var Ir=function(E,z){this.specification=E,this.overrides=z};Ir.prototype.possiblyEvaluate=function(E,z,Z,he){return E.expression.kind==="constant"||E.expression.kind==="camera"?new qi(this,{kind:"constant",value:E.expression.evaluate(z,null,{},Z,he)},z):new qi(this,E.expression,z)},Ir.prototype.interpolate=function(E,z,Z){if(E.value.kind!=="constant"||z.value.kind!=="constant")return E;if(E.value.value===void 0||z.value.value===void 0)return new qi(this,{kind:"constant",value:void 0},E.parameters);var he=_r[this.specification.type];return he?new qi(this,{kind:"constant",value:he(E.value.value,z.value.value,Z)},E.parameters):E},Ir.prototype.evaluate=function(E,z,Z,he,Ie,Ue){return E.kind==="constant"?E.value:E.evaluate(z,Z,he,Ie,Ue)};var Js=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,he,Ie,Ue){if(Z.value===void 0)return new qi(this,{kind:"constant",value:void 0},he);if(Z.expression.kind==="constant"){var We=Z.expression.evaluate(he,null,{},Ie,Ue),it=Z.property.specification.type==="resolvedImage"&&typeof We!="string"?We.name:We,ft=this._calculate(it,it,it,he);return new qi(this,{kind:"constant",value:ft},he)}if(Z.expression.kind==="camera"){var At=this._calculate(Z.expression.evaluate({zoom:he.zoom-1}),Z.expression.evaluate({zoom:he.zoom}),Z.expression.evaluate({zoom:he.zoom+1}),he);return new qi(this,{kind:"constant",value:At},he)}return new qi(this,Z.expression,he)},z.prototype.evaluate=function(Z,he,Ie,Ue,We,it){if(Z.kind==="source"){var ft=Z.evaluate(he,Ie,Ue,We,it);return this._calculate(ft,ft,ft,he)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(he.zoom)-1},Ie,Ue),Z.evaluate({zoom:Math.floor(he.zoom)},Ie,Ue),Z.evaluate({zoom:Math.floor(he.zoom)+1},Ie,Ue),he):Z.value},z.prototype._calculate=function(Z,he,Ie,Ue){return Ue.zoom>Ue.zoomHistory.lastIntegerZoom?{from:Z,to:he}:{from:Ie,to:he}},z.prototype.interpolate=function(Z){return Z},z}(Ir),Ma=function(E){this.specification=E};Ma.prototype.possiblyEvaluate=function(E,z,Z,he){if(E.value!==void 0){if(E.expression.kind==="constant"){var Ie=E.expression.evaluate(z,null,{},Z,he);return this._calculate(Ie,Ie,Ie,z)}return this._calculate(E.expression.evaluate(new ui(Math.floor(z.zoom-1),z)),E.expression.evaluate(new ui(Math.floor(z.zoom),z)),E.expression.evaluate(new ui(Math.floor(z.zoom+1),z)),z)}},Ma.prototype._calculate=function(E,z,Z,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:E,to:z}:{from:Z,to:z}},Ma.prototype.interpolate=function(E){return E};var hs=function(E){this.specification=E};hs.prototype.possiblyEvaluate=function(E,z,Z,he){return!!E.expression.evaluate(z,null,{},Z,he)},hs.prototype.interpolate=function(){return!1};var pa=function(E){for(var z in this.properties=E,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],E){var Z=E[z];Z.specification.overridable&&this.overridableProperties.push(z);var he=this.defaultPropertyValues[z]=new Wa(Z,void 0),Ie=this.defaultTransitionablePropertyValues[z]=new Mo(Z);this.defaultTransitioningPropertyValues[z]=Ie.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=he.possiblyEvaluate({})}};Sr("DataDrivenProperty",Ir),Sr("DataConstantProperty",Pr),Sr("CrossFadedDataDrivenProperty",Js),Sr("CrossFadedProperty",Ma),Sr("ColorRampProperty",hs);var $s="-transition",da=function(E){function z(Z,he){if(E.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),he.layout&&(this._unevaluatedLayout=new zs(he.layout)),he.paint)){for(var Ie in this._transitionablePaint=new co(he.paint),Z.paint)this.setPaintProperty(Ie,Z.paint[Ie],{validate:!1});for(var Ue in Z.layout)this.setLayoutProperty(Ue,Z.layout[Ue],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ha(he.paint)}}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},z.prototype.setLayoutProperty=function(Z,he,Ie){if(Ie===void 0&&(Ie={}),he!=null){var Ue="layers."+this.id+".layout."+Z;if(this._validate(cs,Ue,Z,he,Ie))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,he):this.visibility=he},z.prototype.getPaintProperty=function(Z){return x(Z,$s)?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},z.prototype.setPaintProperty=function(Z,he,Ie){if(Ie===void 0&&(Ie={}),he!=null){var Ue="layers."+this.id+".paint."+Z;if(this._validate(Ta,Ue,Z,he,Ie))return!1}if(x(Z,$s))return this._transitionablePaint.setTransition(Z.slice(0,-11),he||void 0),!1;var We=this._transitionablePaint._values[Z],it=We.property.specification["property-type"]==="cross-faded-data-driven",ft=We.value.isDataDriven(),At=We.value;this._transitionablePaint.setValue(Z,he),this._handleSpecialPaintPropertyUpdate(Z);var St=this._transitionablePaint._values[Z].value;return St.isDataDriven()||ft||it||this._handleOverridablePaintPropertyUpdate(Z,At,St)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,he,Ie){return!1},z.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},z.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(Z,he){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,he)},z.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),v(Z,function(he,Ie){return!(he===void 0||Ie==="layout"&&!Object.keys(he).length||Ie==="paint"&&!Object.keys(he).length)})},z.prototype._validate=function(Z,he,Ie,Ue,We){return We===void 0&&(We={}),(!We||We.validate!==!1)&&so(this,Z.call(fa,{key:he,layerType:this.type,objectKey:Ie,value:Ue,styleSpec:De,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var Z in this.paint._values){var he=this.paint.get(Z);if(he instanceof qi&&No(he.property.specification)&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},z}(Ke),ps={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ds=function(E,z){this._structArray=E,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Nr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qi(E,z){z===void 0&&(z=1);var Z=0,he=0;return{members:E.map(function(Ie){var Ue,We=(Ue=Ie.type,ps[Ue].BYTES_PER_ELEMENT),it=Z=Ao(Z,Math.max(z,We)),ft=Ie.components||1;return he=Math.max(he,We),Z+=We*ft,{name:Ie.name,type:Ie.type,components:ft,offset:it}}),size:Ao(Z,Math.max(he,z)),alignment:z}}function Ao(E,z){return Math.ceil(E/z)*z}Nr.serialize=function(E,z){return E._trim(),z&&(E.isTransferred=!0,z.push(E.arrayBuffer)),{length:E.length,arrayBuffer:E.arrayBuffer}},Nr.deserialize=function(E){var z=Object.create(this.prototype);return z.arrayBuffer=E.arrayBuffer,z.length=E.length,z.capacity=E.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Nr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Nr.prototype.clear=function(){this.length=0},Nr.prototype.resize=function(E){this.reserve(E),this.length=E},Nr.prototype.reserve=function(E){if(E>this.capacity){this.capacity=Math.max(E,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Nr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Oa=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,he)},z.prototype.emplace=function(Z,he,Ie){var Ue=2*Z;return this.int16[Ue+0]=he,this.int16[Ue+1]=Ie,Z},z}(Nr);Oa.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",Oa);var Fs=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue){var We=this.length;return this.resize(We+1),this.emplace(We,Z,he,Ie,Ue)},z.prototype.emplace=function(Z,he,Ie,Ue,We){var it=4*Z;return this.int16[it+0]=he,this.int16[it+1]=Ie,this.int16[it+2]=Ue,this.int16[it+3]=We,Z},z}(Nr);Fs.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",Fs);var Qs=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it){var ft=this.length;return this.resize(ft+1),this.emplace(ft,Z,he,Ie,Ue,We,it)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft){var At=6*Z;return this.int16[At+0]=he,this.int16[At+1]=Ie,this.int16[At+2]=Ue,this.int16[At+3]=We,this.int16[At+4]=it,this.int16[At+5]=ft,Z},z}(Nr);Qs.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",Qs);var Ns=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it){var ft=this.length;return this.resize(ft+1),this.emplace(ft,Z,he,Ie,Ue,We,it)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft){var At=4*Z,St=8*Z;return this.int16[At+0]=he,this.int16[At+1]=Ie,this.uint8[St+4]=Ue,this.uint8[St+5]=We,this.uint8[St+6]=it,this.uint8[St+7]=ft,Z},z}(Nr);Ns.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",Ns);var qo=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,Z,he,Ie,Ue,We,it,ft,At,St,Ft)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt){var jt=9*Z,on=18*Z;return this.uint16[jt+0]=he,this.uint16[jt+1]=Ie,this.uint16[jt+2]=Ue,this.uint16[jt+3]=We,this.uint16[jt+4]=it,this.uint16[jt+5]=ft,this.uint16[jt+6]=At,this.uint16[jt+7]=St,this.uint8[on+16]=Ft,this.uint8[on+17]=Wt,Z},z}(Nr);qo.prototype.bytesPerElement=18,Sr("StructArrayLayout8ui2ub18",qo);var N=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt){var on=this.length;return this.resize(on+1),this.emplace(on,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on){var un=12*Z;return this.int16[un+0]=he,this.int16[un+1]=Ie,this.int16[un+2]=Ue,this.int16[un+3]=We,this.uint16[un+4]=it,this.uint16[un+5]=ft,this.uint16[un+6]=At,this.uint16[un+7]=St,this.int16[un+8]=Ft,this.int16[un+9]=Wt,this.int16[un+10]=jt,this.int16[un+11]=on,Z},z}(Nr);N.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",N);var G=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,Z,he,Ie)},z.prototype.emplace=function(Z,he,Ie,Ue){var We=3*Z;return this.float32[We+0]=he,this.float32[We+1]=Ie,this.float32[We+2]=Ue,Z},z}(Nr);G.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",G);var H=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var he=this.length;return this.resize(he+1),this.emplace(he,Z)},z.prototype.emplace=function(Z,he){var Ie=1*Z;return this.uint32[Ie+0]=he,Z},z}(Nr);H.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",H);var Q=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it,ft,At,St){var Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,Z,he,Ie,Ue,We,it,ft,At,St)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft){var Wt=10*Z,jt=5*Z;return this.int16[Wt+0]=he,this.int16[Wt+1]=Ie,this.int16[Wt+2]=Ue,this.int16[Wt+3]=We,this.int16[Wt+4]=it,this.int16[Wt+5]=ft,this.uint32[jt+3]=At,this.uint16[Wt+8]=St,this.uint16[Wt+9]=Ft,Z},z}(Nr);Q.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",Q);var xe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it){var ft=this.length;return this.resize(ft+1),this.emplace(ft,Z,he,Ie,Ue,We,it)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft){var At=6*Z;return this.int16[At+0]=he,this.int16[At+1]=Ie,this.int16[At+2]=Ue,this.int16[At+3]=We,this.int16[At+4]=it,this.int16[At+5]=ft,Z},z}(Nr);xe.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",xe);var Pe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We){var it=this.length;return this.resize(it+1),this.emplace(it,Z,he,Ie,Ue,We)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it){var ft=4*Z,At=8*Z;return this.float32[ft+0]=he,this.float32[ft+1]=Ie,this.float32[ft+2]=Ue,this.int16[At+6]=We,this.int16[At+7]=it,Z},z}(Nr);Pe.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",Pe);var U=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue){var We=this.length;return this.resize(We+1),this.emplace(We,Z,he,Ie,Ue)},z.prototype.emplace=function(Z,he,Ie,Ue,We){var it=12*Z,ft=3*Z;return this.uint8[it+0]=he,this.uint8[it+1]=Ie,this.float32[ft+1]=Ue,this.float32[ft+2]=We,Z},z}(Nr);U.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",U);var te=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,Z,he,Ie)},z.prototype.emplace=function(Z,he,Ie,Ue){var We=3*Z;return this.uint16[We+0]=he,this.uint16[We+1]=Ie,this.uint16[We+2]=Ue,Z},z}(Nr);te.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",te);var oe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn){var Fn=this.length;return this.resize(Fn+1),this.emplace(Fn,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn,Fn){var Wn=24*Z,Kn=12*Z,nr=48*Z;return this.int16[Wn+0]=he,this.int16[Wn+1]=Ie,this.uint16[Wn+2]=Ue,this.uint16[Wn+3]=We,this.uint32[Kn+2]=it,this.uint32[Kn+3]=ft,this.uint32[Kn+4]=At,this.uint16[Wn+10]=St,this.uint16[Wn+11]=Ft,this.uint16[Wn+12]=Wt,this.float32[Kn+7]=jt,this.float32[Kn+8]=on,this.uint8[nr+36]=un,this.uint8[nr+37]=En,this.uint8[nr+38]=Sn,this.uint32[Kn+10]=Dn,this.int16[Wn+22]=Fn,Z},z}(Nr);oe.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",oe);var _e=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn,Fn,Wn,Kn,nr,xr,pr,wr,kr,Vr,Rr,Ur){var zr=this.length;return this.resize(zr+1),this.emplace(zr,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn,Fn,Wn,Kn,nr,xr,pr,wr,kr,Vr,Rr,Ur)},z.prototype.emplace=function(Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un,En,Sn,Dn,Fn,Wn,Kn,nr,xr,pr,wr,kr,Vr,Rr,Ur,zr){var Lr=34*Z,Jr=17*Z;return this.int16[Lr+0]=he,this.int16[Lr+1]=Ie,this.int16[Lr+2]=Ue,this.int16[Lr+3]=We,this.int16[Lr+4]=it,this.int16[Lr+5]=ft,this.int16[Lr+6]=At,this.int16[Lr+7]=St,this.uint16[Lr+8]=Ft,this.uint16[Lr+9]=Wt,this.uint16[Lr+10]=jt,this.uint16[Lr+11]=on,this.uint16[Lr+12]=un,this.uint16[Lr+13]=En,this.uint16[Lr+14]=Sn,this.uint16[Lr+15]=Dn,this.uint16[Lr+16]=Fn,this.uint16[Lr+17]=Wn,this.uint16[Lr+18]=Kn,this.uint16[Lr+19]=nr,this.uint16[Lr+20]=xr,this.uint16[Lr+21]=pr,this.uint16[Lr+22]=wr,this.uint32[Jr+12]=kr,this.float32[Jr+13]=Vr,this.float32[Jr+14]=Rr,this.float32[Jr+15]=Ur,this.float32[Jr+16]=zr,Z},z}(Nr);_e.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",_e);var ke=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var he=this.length;return this.resize(he+1),this.emplace(he,Z)},z.prototype.emplace=function(Z,he){var Ie=1*Z;return this.float32[Ie+0]=he,Z},z}(Nr);ke.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",ke);var ze=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,Z,he,Ie)},z.prototype.emplace=function(Z,he,Ie,Ue){var We=3*Z;return this.int16[We+0]=he,this.int16[We+1]=Ie,this.int16[We+2]=Ue,Z},z}(Nr);ze.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",ze);var Ge=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,Z,he,Ie)},z.prototype.emplace=function(Z,he,Ie,Ue){var We=2*Z,it=4*Z;return this.uint32[We+0]=he,this.uint16[it+2]=Ie,this.uint16[it+3]=Ue,Z},z}(Nr);Ge.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",Ge);var qe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,he)},z.prototype.emplace=function(Z,he,Ie){var Ue=2*Z;return this.uint16[Ue+0]=he,this.uint16[Ue+1]=Ie,Z},z}(Nr);qe.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",qe);var Je=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var he=this.length;return this.resize(he+1),this.emplace(he,Z)},z.prototype.emplace=function(Z,he){var Ie=1*Z;return this.uint16[Ie+0]=he,Z},z}(Nr);Je.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",Je);var $e=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,he)},z.prototype.emplace=function(Z,he,Ie){var Ue=2*Z;return this.float32[Ue+0]=he,this.float32[Ue+1]=Ie,Z},z}(Nr);$e.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",$e);var st=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,he,Ie,Ue){var We=this.length;return this.resize(We+1),this.emplace(We,Z,he,Ie,Ue)},z.prototype.emplace=function(Z,he,Ie,Ue,We){var it=4*Z;return this.float32[it+0]=he,this.float32[it+1]=Ie,this.float32[it+2]=Ue,this.float32[it+3]=We,Z},z}(Nr);st.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",st);var yt=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,Z),z}(ds);yt.prototype.size=20;var _t=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new yt(this,Z)},z}(Q);Sr("CollisionBoxArray",_t);var It=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(he){this._structArray.uint8[this._pos1+37]=he},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(he){this._structArray.uint8[this._pos1+38]=he},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(he){this._structArray.uint32[this._pos4+10]=he},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,Z),z}(ds);It.prototype.size=48;var zt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new It(this,Z)},z}(oe);Sr("PlacedSymbolArray",zt);var Rt=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(he){this._structArray.uint32[this._pos4+12]=he},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,Z),z}(ds);Rt.prototype.size=68;var Ht=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new Rt(this,Z)},z}(_e);Sr("SymbolInstanceArray",Ht);var Dt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},z}(ke);Sr("GlyphOffsetArray",Dt);var sn=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.getx=function(Z){return this.int16[3*Z+0]},z.prototype.gety=function(Z){return this.int16[3*Z+1]},z.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},z}(ze);Sr("SymbolLineVertexArray",sn);var $t=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,Z),z}(ds);$t.prototype.size=8;var Zt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new $t(this,Z)},z}(Ge);Sr("FeatureIndexArray",Zt);var xn=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,bn=function(E){E===void 0&&(E=[]),this.segments=E};function Un(E,z){return 256*(E=s(Math.floor(E),0,255))+s(Math.floor(z),0,255)}bn.prototype.prepareSegment=function(E,z,Z,he){var Ie=this.segments[this.segments.length-1];return E>bn.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+bn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+E),(!Ie||Ie.vertexLength+E>bn.MAX_VERTEX_ARRAY_LENGTH||Ie.sortKey!==he)&&(Ie={vertexOffset:z.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},he!==void 0&&(Ie.sortKey=he),this.segments.push(Ie)),Ie},bn.prototype.get=function(){return this.segments},bn.prototype.destroy=function(){for(var E=0,z=this.segments;E<z.length;E+=1){var Z=z[E];for(var he in Z.vaos)Z.vaos[he].destroy()}},bn.simpleSegment=function(E,z,Z,he){return new bn([{vertexOffset:E,primitiveOffset:z,vertexLength:Z,primitiveLength:he,vaos:{},sortKey:0}])},bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",bn);var jn=Qi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Xn=_(function(E){E.exports=function(z,Z){var he,Ie,Ue,We,it,ft,At,St;for(he=3&z.length,Ie=z.length-he,Ue=Z,it=3432918353,ft=461845907,St=0;St<Ie;)At=255&z.charCodeAt(St)|(255&z.charCodeAt(++St))<<8|(255&z.charCodeAt(++St))<<16|(255&z.charCodeAt(++St))<<24,++St,Ue=27492+(65535&(We=5*(65535&(Ue=(Ue^=At=(65535&(At=(At=(65535&At)*it+(((At>>>16)*it&65535)<<16)&4294967295)<<15|At>>>17))*ft+(((At>>>16)*ft&65535)<<16)&4294967295)<<13|Ue>>>19))+((5*(Ue>>>16)&65535)<<16)&4294967295))+((58964+(We>>>16)&65535)<<16);switch(At=0,he){case 3:At^=(255&z.charCodeAt(St+2))<<16;case 2:At^=(255&z.charCodeAt(St+1))<<8;case 1:Ue^=At=(65535&(At=(At=(65535&(At^=255&z.charCodeAt(St)))*it+(((At>>>16)*it&65535)<<16)&4294967295)<<15|At>>>17))*ft+(((At>>>16)*ft&65535)<<16)&4294967295}return Ue^=z.length,Ue=2246822507*(65535&(Ue^=Ue>>>16))+((2246822507*(Ue>>>16)&65535)<<16)&4294967295,Ue=3266489909*(65535&(Ue^=Ue>>>13))+((3266489909*(Ue>>>16)&65535)<<16)&4294967295,(Ue^=Ue>>>16)>>>0}}),Qn=_(function(E){E.exports=function(z,Z){for(var he,Ie=z.length,Ue=Z^Ie,We=0;Ie>=4;)he=1540483477*(65535&(he=255&z.charCodeAt(We)|(255&z.charCodeAt(++We))<<8|(255&z.charCodeAt(++We))<<16|(255&z.charCodeAt(++We))<<24))+((1540483477*(he>>>16)&65535)<<16),Ue=1540483477*(65535&Ue)+((1540483477*(Ue>>>16)&65535)<<16)^(he=1540483477*(65535&(he^=he>>>24))+((1540483477*(he>>>16)&65535)<<16)),Ie-=4,++We;switch(Ie){case 3:Ue^=(255&z.charCodeAt(We+2))<<16;case 2:Ue^=(255&z.charCodeAt(We+1))<<8;case 1:Ue=1540483477*(65535&(Ue^=255&z.charCodeAt(We)))+((1540483477*(Ue>>>16)&65535)<<16)}return Ue=1540483477*(65535&(Ue^=Ue>>>13))+((1540483477*(Ue>>>16)&65535)<<16),(Ue^=Ue>>>15)>>>0}}),hr=Xn,cr=Xn,vr=Qn;hr.murmur3=cr,hr.murmur2=vr;var Mr=function(){this.ids=[],this.positions=[],this.indexed=!1};Mr.prototype.add=function(E,z,Z,he){this.ids.push(Gn(E)),this.positions.push(z,Z,he)},Mr.prototype.getPositions=function(E){for(var z=Gn(E),Z=0,he=this.ids.length-1;Z<he;){var Ie=Z+he>>1;this.ids[Ie]>=z?he=Ie:Z=Ie+1}for(var Ue=[];this.ids[Z]===z;){var We=this.positions[3*Z],it=this.positions[3*Z+1],ft=this.positions[3*Z+2];Ue.push({index:We,start:it,end:ft}),Z++}return Ue},Mr.serialize=function(E,z){var Z=new Float64Array(E.ids),he=new Uint32Array(E.positions);return ur(Z,he,0,Z.length-1),z&&z.push(Z.buffer,he.buffer),{ids:Z,positions:he}},Mr.deserialize=function(E){var z=new Mr;return z.ids=E.ids,z.positions=E.positions,z.indexed=!0,z};var Fr=Math.pow(2,53)-1;function Gn(E){var z=+E;return!isNaN(z)&&z<=Fr?z:hr(String(E))}function ur(E,z,Z,he){for(;Z<he;){for(var Ie=E[Z+he>>1],Ue=Z-1,We=he+1;;){do Ue++;while(E[Ue]<Ie);do We--;while(E[We]>Ie);if(Ue>=We)break;yr(E,Ue,We),yr(z,3*Ue,3*We),yr(z,3*Ue+1,3*We+1),yr(z,3*Ue+2,3*We+2)}We-Z<he-We?(ur(E,z,Z,We),Z=We+1):(ur(E,z,We+1,he),he=We)}}function yr(E,z,Z){var he=E[z];E[z]=E[Z],E[Z]=he}Sr("FeaturePositionMap",Mr);var Ar=function(E,z){this.gl=E.gl,this.location=z},Or=function(E){function z(Z,he){E.call(this,Z,he),this.current=0}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},z}(Ar),jr=function(E){function z(Z,he){E.call(this,Z,he),this.current=0}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},z}(Ar),Yr=function(E){function z(Z,he){E.call(this,Z,he),this.current=[0,0]}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},z}(Ar),ai=function(E){function z(Z,he){E.call(this,Z,he),this.current=[0,0,0]}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},z}(Ar),Ti=function(E){function z(Z,he){E.call(this,Z,he),this.current=[0,0,0,0]}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},z}(Ar),Mi=function(E){function z(Z,he){E.call(this,Z,he),this.current=vn.transparent}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},z}(Ar),oi=new Float32Array(16),Bi=function(E){function z(Z,he){E.call(this,Z,he),this.current=oi}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var he=1;he<16;he++)if(Z[he]!==this.current[he]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},z}(Ar);function la(E){return[Un(255*E.r,255*E.g),Un(255*E.b,255*E.a)]}var Xi=function(E,z,Z){this.value=E,this.uniformNames=z.map(function(he){return"u_"+he}),this.type=Z};Xi.prototype.setUniform=function(E,z,Z){E.set(Z.constantOr(this.value))},Xi.prototype.getBinding=function(E,z,Z){return this.type==="color"?new Mi(E,z):new jr(E,z)};var ea=function(E,z){this.uniformNames=z.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ea.prototype.setConstantPatternPositions=function(E,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=E.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=E.tlbr},ea.prototype.setUniform=function(E,z,Z,he){var Ie=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ie&&E.set(Ie)},ea.prototype.getBinding=function(E,z,Z){return Z.substr(0,9)==="u_pattern"?new Ti(E,z):new jr(E,z)};var $r=function(E,z,Z,he){this.expression=E,this.type=Z,this.maxValue=0,this.paintVertexAttributes=z.map(function(Ie){return{name:"a_"+Ie,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new he};$r.prototype.populatePaintArray=function(E,z,Z,he,Ie){var Ue=this.paintVertexArray.length,We=this.expression.evaluate(new ui(0),z,{},he,[],Ie);this.paintVertexArray.resize(E),this._setPaintValue(Ue,E,We)},$r.prototype.updatePaintArray=function(E,z,Z,he){var Ie=this.expression.evaluate({zoom:0},Z,he);this._setPaintValue(E,z,Ie)},$r.prototype._setPaintValue=function(E,z,Z){if(this.type==="color")for(var he=la(Z),Ie=E;Ie<z;Ie++)this.paintVertexArray.emplace(Ie,he[0],he[1]);else{for(var Ue=E;Ue<z;Ue++)this.paintVertexArray.emplace(Ue,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},$r.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$r.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qr=function(E,z,Z,he,Ie,Ue){this.expression=E,this.uniformNames=z.map(function(We){return"u_"+We+"_t"}),this.type=Z,this.useIntegerZoom=he,this.zoom=Ie,this.maxValue=0,this.paintVertexAttributes=z.map(function(We){return{name:"a_"+We,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Ue};qr.prototype.populatePaintArray=function(E,z,Z,he,Ie){var Ue=this.expression.evaluate(new ui(this.zoom),z,{},he,[],Ie),We=this.expression.evaluate(new ui(this.zoom+1),z,{},he,[],Ie),it=this.paintVertexArray.length;this.paintVertexArray.resize(E),this._setPaintValue(it,E,Ue,We)},qr.prototype.updatePaintArray=function(E,z,Z,he){var Ie=this.expression.evaluate({zoom:this.zoom},Z,he),Ue=this.expression.evaluate({zoom:this.zoom+1},Z,he);this._setPaintValue(E,z,Ie,Ue)},qr.prototype._setPaintValue=function(E,z,Z,he){if(this.type==="color")for(var Ie=la(Z),Ue=la(he),We=E;We<z;We++)this.paintVertexArray.emplace(We,Ie[0],Ie[1],Ue[0],Ue[1]);else{for(var it=E;it<z;it++)this.paintVertexArray.emplace(it,Z,he);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(he))}},qr.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qr.prototype.setUniform=function(E,z){var Z=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,he=s(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);E.set(he)},qr.prototype.getBinding=function(E,z,Z){return new jr(E,z)};var Ai=function(E,z,Z,he,Ie,Ue){this.expression=E,this.type=z,this.useIntegerZoom=Z,this.zoom=he,this.layerId=Ue,this.zoomInPaintVertexArray=new Ie,this.zoomOutPaintVertexArray=new Ie};Ai.prototype.populatePaintArray=function(E,z,Z){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(E),this.zoomOutPaintVertexArray.resize(E),this._setPaintValues(he,E,z.patterns&&z.patterns[this.layerId],Z)},Ai.prototype.updatePaintArray=function(E,z,Z,he,Ie){this._setPaintValues(E,z,Z.patterns&&Z.patterns[this.layerId],Ie)},Ai.prototype._setPaintValues=function(E,z,Z,he){if(he&&Z){var Ie=Z.min,Ue=Z.mid,We=Z.max,it=he[Ie],ft=he[Ue],At=he[We];if(it&&ft&&At)for(var St=E;St<z;St++)this.zoomInPaintVertexArray.emplace(St,ft.tl[0],ft.tl[1],ft.br[0],ft.br[1],it.tl[0],it.tl[1],it.br[0],it.br[1],ft.pixelRatio,it.pixelRatio),this.zoomOutPaintVertexArray.emplace(St,ft.tl[0],ft.tl[1],ft.br[0],ft.br[1],At.tl[0],At.tl[1],At.br[0],At.br[1],ft.pixelRatio,At.pixelRatio)}},Ai.prototype.upload=function(E){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=E.createVertexBuffer(this.zoomInPaintVertexArray,jn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=E.createVertexBuffer(this.zoomOutPaintVertexArray,jn.members,this.expression.isStateDependent))},Ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var vi=function(E,z,Z,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var Ie=[];for(var Ue in E.paint._values)if(Z(Ue)){var We=E.paint.get(Ue);if(We instanceof qi&&No(We.property.specification)){var it=Ea(Ue,E.type),ft=We.value,At=We.property.specification.type,St=We.property.useIntegerZoom,Ft=We.property.specification["property-type"],Wt=Ft==="cross-faded"||Ft==="cross-faded-data-driven";if(ft.kind==="constant")this.binders[Ue]=Wt?new ea(ft.value,it):new Xi(ft.value,it,At),Ie.push("/u_"+Ue);else if(ft.kind==="source"||Wt){var jt=Oi(Ue,At,"source");this.binders[Ue]=Wt?new Ai(ft,At,St,z,jt,E.id):new $r(ft,it,At,jt),Ie.push("/a_"+Ue)}else{var on=Oi(Ue,At,"composite");this.binders[Ue]=new qr(ft,it,At,St,z,on),Ie.push("/z_"+Ue)}}}this.cacheKey=Ie.sort().join("")};vi.prototype.getMaxValue=function(E){var z=this.binders[E];return z instanceof $r||z instanceof qr?z.maxValue:0},vi.prototype.populatePaintArrays=function(E,z,Z,he,Ie){for(var Ue in this.binders){var We=this.binders[Ue];(We instanceof $r||We instanceof qr||We instanceof Ai)&&We.populatePaintArray(E,z,Z,he,Ie)}},vi.prototype.setConstantPatternPositions=function(E,z){for(var Z in this.binders){var he=this.binders[Z];he instanceof ea&&he.setConstantPatternPositions(E,z)}},vi.prototype.updatePaintArrays=function(E,z,Z,he,Ie){var Ue=!1;for(var We in E)for(var it=0,ft=z.getPositions(We);it<ft.length;it+=1){var At=ft[it],St=Z.feature(At.index);for(var Ft in this.binders){var Wt=this.binders[Ft];if((Wt instanceof $r||Wt instanceof qr||Wt instanceof Ai)&&Wt.expression.isStateDependent===!0){var jt=he.paint.get(Ft);Wt.expression=jt.value,Wt.updatePaintArray(At.start,At.end,St,E[We],Ie),Ue=!0}}}return Ue},vi.prototype.defines=function(){var E=[];for(var z in this.binders){var Z=this.binders[z];(Z instanceof Xi||Z instanceof ea)&&E.push.apply(E,Z.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return E},vi.prototype.getPaintVertexBuffers=function(){return this._buffers},vi.prototype.getUniforms=function(E,z){var Z=[];for(var he in this.binders){var Ie=this.binders[he];if(Ie instanceof Xi||Ie instanceof ea||Ie instanceof qr)for(var Ue=0,We=Ie.uniformNames;Ue<We.length;Ue+=1){var it=We[Ue];if(z[it]){var ft=Ie.getBinding(E,z[it],it);Z.push({name:it,property:he,binding:ft})}}}return Z},vi.prototype.setUniforms=function(E,z,Z,he){for(var Ie=0,Ue=z;Ie<Ue.length;Ie+=1){var We=Ue[Ie],it=We.name,ft=We.property,At=We.binding;this.binders[ft].setUniform(At,he,Z.get(ft),it)}},vi.prototype.updatePaintBuffers=function(E){for(var z in this._buffers=[],this.binders){var Z=this.binders[z];if(E&&Z instanceof Ai){var he=E.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(Z instanceof $r||Z instanceof qr)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},vi.prototype.upload=function(E){for(var z in this.binders){var Z=this.binders[z];(Z instanceof $r||Z instanceof qr||Z instanceof Ai)&&Z.upload(E)}this.updatePaintBuffers()},vi.prototype.destroy=function(){for(var E in this.binders){var z=this.binders[E];(z instanceof $r||z instanceof qr||z instanceof Ai)&&z.destroy()}};var ki=function(E,z,Z,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var Ie=0,Ue=z;Ie<Ue.length;Ie+=1){var We=Ue[Ie];this.programConfigurations[We.id]=new vi(We,Z,he,E)}this.needsUpload=!1,this._featureMap=new Mr,this._bufferOffset=0};function Ea(E,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[E]||[E.replace(z+"-","").replace(/-/g,"_")]}function Oi(E,z,Z){var he={color:{source:$e,composite:st},number:{source:ke,composite:$e}},Ie=function(Ue){return{"line-pattern":{source:qo,composite:qo},"fill-pattern":{source:qo,composite:qo},"fill-extrusion-pattern":{source:qo,composite:qo}}[Ue]}(E);return Ie&&Ie[Z]||he[z][Z]}ki.prototype.populatePaintArrays=function(E,z,Z,he,Ie,Ue){for(var We in this.programConfigurations)this.programConfigurations[We].populatePaintArrays(E,z,he,Ie,Ue);z.id!==void 0&&this._featureMap.add(z.id,Z,this._bufferOffset,E),this._bufferOffset=E,this.needsUpload=!0},ki.prototype.updatePaintArrays=function(E,z,Z,he){for(var Ie=0,Ue=Z;Ie<Ue.length;Ie+=1){var We=Ue[Ie];this.needsUpload=this.programConfigurations[We.id].updatePaintArrays(E,this._featureMap,z,We,he)||this.needsUpload}},ki.prototype.get=function(E){return this.programConfigurations[E]},ki.prototype.upload=function(E){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(E);this.needsUpload=!1}},ki.prototype.destroy=function(){for(var E in this.programConfigurations)this.programConfigurations[E].destroy()},Sr("ConstantBinder",Xi),Sr("CrossFadedConstantBinder",ea),Sr("SourceExpressionBinder",$r),Sr("CrossFadedCompositeBinder",Ai),Sr("CompositeExpressionBinder",qr),Sr("ProgramConfiguration",vi,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",ki);var si=8192,Bs,Da=(Bs=15,{min:-1*Math.pow(2,Bs-1),max:Math.pow(2,Bs-1)-1});function eo(E){for(var z=si/E.extent,Z=E.loadGeometry(),he=0;he<Z.length;he++)for(var Ie=Z[he],Ue=0;Ue<Ie.length;Ue++){var We=Ie[Ue];We.x=Math.round(We.x*z),We.y=Math.round(We.y*z),(We.x<Da.min||We.x>Da.max||We.y<Da.min||We.y>Da.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),We.x=s(We.x,Da.min,Da.max),We.y=s(We.y,Da.min,Da.max))}return Z}function Hi(E,z,Z,he,Ie){E.emplaceBack(2*z+(he+1)/2,2*Z+(Ie+1)/2)}var ua=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new Oa,this.indexArray=new te,this.segments=new bn,this.programConfigurations=new ki(xn,E.layers,E.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function fo(E,z){for(var Z=0;Z<E.length;Z++)if(Su(z,E[Z]))return!0;for(var he=0;he<z.length;he++)if(Su(E,z[he]))return!0;return!!Vf(E,z)}function Sc(E,z,Z){return!!Su(E,z)||!!Hf(z,E,Z)}function Gh(E,z){if(E.length===1)return Wh(z,E[0]);for(var Z=0;Z<z.length;Z++)for(var he=z[Z],Ie=0;Ie<he.length;Ie++)if(Su(E,he[Ie]))return!0;for(var Ue=0;Ue<E.length;Ue++)if(Wh(z,E[Ue]))return!0;for(var We=0;We<z.length;We++)if(Vf(E,z[We]))return!0;return!1}function hd(E,z,Z){if(E.length>1){if(Vf(E,z))return!0;for(var he=0;he<z.length;he++)if(Hf(z[he],E,Z))return!0}for(var Ie=0;Ie<E.length;Ie++)if(Hf(E[Ie],z,Z))return!0;return!1}function Vf(E,z){if(E.length===0||z.length===0)return!1;for(var Z=0;Z<E.length-1;Z++)for(var he=E[Z],Ie=E[Z+1],Ue=0;Ue<z.length-1;Ue++)if(Ec(he,Ie,z[Ue],z[Ue+1]))return!0;return!1}function Ec(E,z,Z,he){return A(E,Z,he)!==A(z,Z,he)&&A(E,z,Z)!==A(E,z,he)}function Hf(E,z,Z){var he=Z*Z;if(z.length===1)return E.distSqr(z[0])<he;for(var Ie=1;Ie<z.length;Ie++)if(Yu(E,z[Ie-1],z[Ie])<he)return!0;return!1}function Yu(E,z,Z){var he=z.distSqr(Z);if(he===0)return E.distSqr(z);var Ie=((E.x-z.x)*(Z.x-z.x)+(E.y-z.y)*(Z.y-z.y))/he;return Ie<0?E.distSqr(z):Ie>1?E.distSqr(Z):E.distSqr(Z.sub(z)._mult(Ie)._add(z))}function Wh(E,z){for(var Z,he,Ie,Ue=!1,We=0;We<E.length;We++)for(var it=0,ft=(Z=E[We]).length-1;it<Z.length;ft=it++)he=Z[it],Ie=Z[ft],he.y>z.y!=Ie.y>z.y&&z.x<(Ie.x-he.x)*(z.y-he.y)/(Ie.y-he.y)+he.x&&(Ue=!Ue);return Ue}function Su(E,z){for(var Z=!1,he=0,Ie=E.length-1;he<E.length;Ie=he++){var Ue=E[he],We=E[Ie];Ue.y>z.y!=We.y>z.y&&z.x<(We.x-Ue.x)*(z.y-Ue.y)/(We.y-Ue.y)+Ue.x&&(Z=!Z)}return Z}function Gf(E,z,Z){var he=Z[0],Ie=Z[2];if(E.x<he.x&&z.x<he.x||E.x>Ie.x&&z.x>Ie.x||E.y<he.y&&z.y<he.y||E.y>Ie.y&&z.y>Ie.y)return!1;var Ue=A(E,z,Z[0]);return Ue!==A(E,z,Z[1])||Ue!==A(E,z,Z[2])||Ue!==A(E,z,Z[3])}function Wf(E,z,Z){var he=z.paint.get(E).value;return he.kind==="constant"?he.value:Z.programConfigurations.get(z.id).getMaxValue(E)}function qh(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Xh(E,z,Z,he,Ie){if(!z[0]&&!z[1])return E;var Ue=t.convert(z)._mult(Ie);Z==="viewport"&&Ue._rotate(-he);for(var We=[],it=0;it<E.length;it++){var ft=E[it];We.push(ft.sub(Ue))}return We}ua.prototype.populate=function(E,z,Z){var he=this.layers[0],Ie=[],Ue=null;he.type==="circle"&&(Ue=he.layout.get("circle-sort-key"));for(var We=0,it=E;We<it.length;We+=1){var ft=it[We],At=ft.feature,St=ft.id,Ft=ft.index,Wt=ft.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,on={type:At.type,id:St,properties:At.properties,geometry:jt?eo(At):[]};if(this.layers[0]._featureFilter.filter(new ui(this.zoom),on,Z)){jt||(on.geometry=eo(At));var un=Ue?Ue.evaluate(on,{},Z):void 0,En={id:St,properties:At.properties,type:At.type,sourceLayerIndex:Wt,index:Ft,geometry:on.geometry,patterns:{},sortKey:un};Ie.push(En)}}Ue&&Ie.sort(function(wr,kr){return wr.sortKey-kr.sortKey});for(var Sn=0,Dn=Ie;Sn<Dn.length;Sn+=1){var Fn=Dn[Sn],Wn=Fn,Kn=Wn.geometry,nr=Wn.index,xr=Wn.sourceLayerIndex,pr=E[nr].feature;this.addFeature(Fn,Kn,nr,Z),z.featureIndex.insert(pr,Kn,nr,xr,this.index)}},ua.prototype.update=function(E,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,Z)},ua.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ua.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,xn),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ua.prototype.addFeature=function(E,z,Z,he){for(var Ie=0,Ue=z;Ie<Ue.length;Ie+=1)for(var We=0,it=Ue[Ie];We<it.length;We+=1){var ft=it[We],At=ft.x,St=ft.y;if(!(At<0||At>=si||St<0||St>=si)){var Ft=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,E.sortKey),Wt=Ft.vertexLength;Hi(this.layoutVertexArray,At,St,-1,-1),Hi(this.layoutVertexArray,At,St,1,-1),Hi(this.layoutVertexArray,At,St,1,1),Hi(this.layoutVertexArray,At,St,-1,1),this.indexArray.emplaceBack(Wt,Wt+1,Wt+2),this.indexArray.emplaceBack(Wt,Wt+3,Wt+2),Ft.vertexLength+=4,Ft.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,Z,{},he)},Sr("CircleBucket",ua,{omit:["layers"]});var hy=new pa({"circle-sort-key":new Ir(De.layout_circle["circle-sort-key"])}),py={paint:new pa({"circle-radius":new Ir(De.paint_circle["circle-radius"]),"circle-color":new Ir(De.paint_circle["circle-color"]),"circle-blur":new Ir(De.paint_circle["circle-blur"]),"circle-opacity":new Ir(De.paint_circle["circle-opacity"]),"circle-translate":new Pr(De.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ir(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ir(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ir(De.paint_circle["circle-stroke-opacity"])}),layout:hy},ms=typeof Float32Array<"u"?Float32Array:Array;function pd(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function nm(E,z,Z){var he=z[0],Ie=z[1],Ue=z[2],We=z[3],it=z[4],ft=z[5],At=z[6],St=z[7],Ft=z[8],Wt=z[9],jt=z[10],on=z[11],un=z[12],En=z[13],Sn=z[14],Dn=z[15],Fn=Z[0],Wn=Z[1],Kn=Z[2],nr=Z[3];return E[0]=Fn*he+Wn*it+Kn*Ft+nr*un,E[1]=Fn*Ie+Wn*ft+Kn*Wt+nr*En,E[2]=Fn*Ue+Wn*At+Kn*jt+nr*Sn,E[3]=Fn*We+Wn*St+Kn*on+nr*Dn,Fn=Z[4],Wn=Z[5],Kn=Z[6],nr=Z[7],E[4]=Fn*he+Wn*it+Kn*Ft+nr*un,E[5]=Fn*Ie+Wn*ft+Kn*Wt+nr*En,E[6]=Fn*Ue+Wn*At+Kn*jt+nr*Sn,E[7]=Fn*We+Wn*St+Kn*on+nr*Dn,Fn=Z[8],Wn=Z[9],Kn=Z[10],nr=Z[11],E[8]=Fn*he+Wn*it+Kn*Ft+nr*un,E[9]=Fn*Ie+Wn*ft+Kn*Wt+nr*En,E[10]=Fn*Ue+Wn*At+Kn*jt+nr*Sn,E[11]=Fn*We+Wn*St+Kn*on+nr*Dn,Fn=Z[12],Wn=Z[13],Kn=Z[14],nr=Z[15],E[12]=Fn*he+Wn*it+Kn*Ft+nr*un,E[13]=Fn*Ie+Wn*ft+Kn*Wt+nr*En,E[14]=Fn*Ue+Wn*At+Kn*jt+nr*Sn,E[15]=Fn*We+Wn*St+Kn*on+nr*Dn,E}Math.hypot||(Math.hypot=function(){for(var E=arguments,z=0,Z=arguments.length;Z--;)z+=E[Z]*E[Z];return Math.sqrt(z)});var dy=nm,Yh,my=function(E,z,Z){return E[0]=z[0]-Z[0],E[1]=z[1]-Z[1],E[2]=z[2]-Z[2],E};function Zh(E,z,Z){var he=z[0],Ie=z[1],Ue=z[2],We=z[3];return E[0]=Z[0]*he+Z[4]*Ie+Z[8]*Ue+Z[12]*We,E[1]=Z[1]*he+Z[5]*Ie+Z[9]*Ue+Z[13]*We,E[2]=Z[2]*he+Z[6]*Ie+Z[10]*Ue+Z[14]*We,E[3]=Z[3]*he+Z[7]*Ie+Z[11]*Ue+Z[15]*We,E}Yh=new ms(3),ms!=Float32Array&&(Yh[0]=0,Yh[1]=0,Yh[2]=0),function(){var E=new ms(4);ms!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0)}();var gy=function(E){var z=E[0],Z=E[1];return z*z+Z*Z},vy=(function(){var E=new ms(2);ms!=Float32Array&&(E[0]=0,E[1]=0)}(),function(E){function z(Z){E.call(this,Z,py)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new ua(Z)},z.prototype.queryRadius=function(Z){var he=Z;return Wf("circle-radius",this,he)+Wf("circle-stroke-width",this,he)+qh(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(Z,he,Ie,Ue,We,it,ft,At){for(var St=Xh(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),it.angle,ft),Ft=this.paint.get("circle-radius").evaluate(he,Ie)+this.paint.get("circle-stroke-width").evaluate(he,Ie),Wt=this.paint.get("circle-pitch-alignment")==="map",jt=Wt?St:function(xr,pr){return xr.map(function(wr){return rm(wr,pr)})}(St,At),on=Wt?Ft*ft:Ft,un=0,En=Ue;un<En.length;un+=1)for(var Sn=0,Dn=En[un];Sn<Dn.length;Sn+=1){var Fn=Dn[Sn],Wn=Wt?Fn:rm(Fn,At),Kn=on,nr=Zh([],[Fn.x,Fn.y,0,1],At);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Kn*=nr[3]/it.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Kn*=it.cameraToCenterDistance/nr[3]),Sc(jt,Wn,Kn))return!0}return!1},z}(da));function rm(E,z){var Z=Zh([],[E.x,E.y,0,1],z);return new t(Z[0]/Z[3],Z[1]/Z[3])}var im=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z}(ua);function dd(E,z,Z,he){var Ie=z.width,Ue=z.height;if(he){if(he instanceof Uint8ClampedArray)he=new Uint8Array(he.buffer);else if(he.length!==Ie*Ue*Z)throw new RangeError("mismatched image size")}else he=new Uint8Array(Ie*Ue*Z);return E.width=Ie,E.height=Ue,E.data=he,E}function am(E,z,Z){var he=z.width,Ie=z.height;if(he!==E.width||Ie!==E.height){var Ue=dd({},{width:he,height:Ie},Z);md(E,Ue,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,he),height:Math.min(E.height,Ie)},Z),E.width=he,E.height=Ie,E.data=Ue.data}}function md(E,z,Z,he,Ie,Ue){if(Ie.width===0||Ie.height===0)return z;if(Ie.width>E.width||Ie.height>E.height||Z.x>E.width-Ie.width||Z.y>E.height-Ie.height)throw new RangeError("out of range source coordinates for image copy");if(Ie.width>z.width||Ie.height>z.height||he.x>z.width-Ie.width||he.y>z.height-Ie.height)throw new RangeError("out of range destination coordinates for image copy");for(var We=E.data,it=z.data,ft=0;ft<Ie.height;ft++)for(var At=((Z.y+ft)*E.width+Z.x)*Ue,St=((he.y+ft)*z.width+he.x)*Ue,Ft=0;Ft<Ie.width*Ue;Ft++)it[St+Ft]=We[At+Ft];return z}Sr("HeatmapBucket",im,{omit:["layers"]});var Zu=function(E,z){dd(this,E,1,z)};Zu.prototype.resize=function(E){am(this,E,1)},Zu.prototype.clone=function(){return new Zu({width:this.width,height:this.height},new Uint8Array(this.data))},Zu.copy=function(E,z,Z,he,Ie){md(E,z,Z,he,Ie,1)};var So=function(E,z){dd(this,E,4,z)};So.prototype.resize=function(E){am(this,E,4)},So.prototype.replace=function(E,z){z?this.data.set(E):E instanceof Uint8ClampedArray?this.data=new Uint8Array(E.buffer):this.data=E},So.prototype.clone=function(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))},So.copy=function(E,z,Z,he,Ie){md(E,z,Z,he,Ie,4)},Sr("AlphaImage",Zu),Sr("RGBAImage",So);var yy={paint:new pa({"heatmap-radius":new Ir(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ir(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hs(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(De.paint_heatmap["heatmap-opacity"])})};function om(E,z){for(var Z=new Uint8Array(1024),he={},Ie=0,Ue=0;Ie<256;Ie++,Ue+=4){he[z]=Ie/255;var We=E.evaluate(he);Z[Ue+0]=Math.floor(255*We.r/We.a),Z[Ue+1]=Math.floor(255*We.g/We.a),Z[Ue+2]=Math.floor(255*We.b/We.a),Z[Ue+3]=Math.floor(255*We.a)}return new So({width:256,height:1},Z)}var xy=function(E){function z(Z){E.call(this,Z,yy),this._updateColorRamp()}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new im(Z)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=om(Z,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},z}(da),_y={paint:new pa({"hillshade-illumination-direction":new Pr(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(De.paint_hillshade["hillshade-accent-color"])})},by=function(E){function z(Z){E.call(this,Z,_y)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},z}(da),sm=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,gd=Kh,wy=Kh;function Kh(E,z,Z){Z=Z||2;var he,Ie,Ue,We,it,ft,At,St=z&&z.length,Ft=St?z[0]*Z:E.length,Wt=lm(E,0,Ft,Z,!0),jt=[];if(!Wt||Wt.next===Wt.prev)return jt;if(St&&(Wt=function(un,En,Sn,Dn){var Fn,Wn,Kn,nr=[];for(Fn=0,Wn=En.length;Fn<Wn;Fn++)(Kn=lm(un,En[Fn]*Dn,Fn<Wn-1?En[Fn+1]*Dn:un.length,Dn,!1))===Kn.next&&(Kn.steiner=!0),nr.push(Cy(Kn));for(nr.sort(Ey),Fn=0;Fn<nr.length;Fn++)ky(nr[Fn],Sn),Sn=Eu(Sn,Sn.next);return Sn}(E,z,Wt,Z)),E.length>80*Z){he=Ue=E[0],Ie=We=E[1];for(var on=Z;on<Ft;on+=Z)(it=E[on])<he&&(he=it),(ft=E[on+1])<Ie&&(Ie=ft),it>Ue&&(Ue=it),ft>We&&(We=ft);At=(At=Math.max(Ue-he,We-Ie))!==0?1/At:0}return qf(Wt,jt,Z,he,Ie,At),jt}function lm(E,z,Z,he,Ie){var Ue,We;if(Ie===xd(E,z,Z,he)>0)for(Ue=z;Ue<Z;Ue+=he)We=fm(Ue,E[Ue],E[Ue+1],We);else for(Ue=Z-he;Ue>=z;Ue-=he)We=fm(Ue,E[Ue],E[Ue+1],We);return We&&Jh(We,We.next)&&(Yf(We),We=We.next),We}function Eu(E,z){if(!E)return E;z||(z=E);var Z,he=E;do if(Z=!1,he.steiner||!Jh(he,he.next)&&xa(he.prev,he,he.next)!==0)he=he.next;else{if(Yf(he),(he=z=he.prev)===he.next)break;Z=!0}while(Z||he!==z);return z}function qf(E,z,Z,he,Ie,Ue,We){if(E){!We&&Ue&&function(St,Ft,Wt,jt){var on=St;do on.z===null&&(on.z=vd(on.x,on.y,Ft,Wt,jt)),on.prevZ=on.prev,on.nextZ=on.next,on=on.next;while(on!==St);on.prevZ.nextZ=null,on.prevZ=null,function(un){var En,Sn,Dn,Fn,Wn,Kn,nr,xr,pr=1;do{for(Sn=un,un=null,Wn=null,Kn=0;Sn;){for(Kn++,Dn=Sn,nr=0,En=0;En<pr&&(nr++,Dn=Dn.nextZ);En++);for(xr=pr;nr>0||xr>0&&Dn;)nr!==0&&(xr===0||!Dn||Sn.z<=Dn.z)?(Fn=Sn,Sn=Sn.nextZ,nr--):(Fn=Dn,Dn=Dn.nextZ,xr--),Wn?Wn.nextZ=Fn:un=Fn,Fn.prevZ=Wn,Wn=Fn;Sn=Dn}Wn.nextZ=null,pr*=2}while(Kn>1)}(on)}(E,he,Ie,Ue);for(var it,ft,At=E;E.prev!==E.next;)if(it=E.prev,ft=E.next,Ue?My(E,he,Ie,Ue):Ty(E))z.push(it.i/Z),z.push(E.i/Z),z.push(ft.i/Z),Yf(E),E=ft.next,At=ft.next;else if((E=ft)===At){We?We===1?qf(E=Ay(Eu(E),z,Z),z,Z,he,Ie,Ue,2):We===2&&Sy(E,z,Z,he,Ie,Ue):qf(Eu(E),z,Z,he,Ie,Ue,1);break}}}function Ty(E){var z=E.prev,Z=E,he=E.next;if(xa(z,Z,he)>=0)return!1;for(var Ie=E.next.next;Ie!==E.prev;){if(kc(z.x,z.y,Z.x,Z.y,he.x,he.y,Ie.x,Ie.y)&&xa(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.next}return!0}function My(E,z,Z,he){var Ie=E.prev,Ue=E,We=E.next;if(xa(Ie,Ue,We)>=0)return!1;for(var it=Ie.x<Ue.x?Ie.x<We.x?Ie.x:We.x:Ue.x<We.x?Ue.x:We.x,ft=Ie.y<Ue.y?Ie.y<We.y?Ie.y:We.y:Ue.y<We.y?Ue.y:We.y,At=Ie.x>Ue.x?Ie.x>We.x?Ie.x:We.x:Ue.x>We.x?Ue.x:We.x,St=Ie.y>Ue.y?Ie.y>We.y?Ie.y:We.y:Ue.y>We.y?Ue.y:We.y,Ft=vd(it,ft,z,Z,he),Wt=vd(At,St,z,Z,he),jt=E.prevZ,on=E.nextZ;jt&&jt.z>=Ft&&on&&on.z<=Wt;){if(jt!==E.prev&&jt!==E.next&&kc(Ie.x,Ie.y,Ue.x,Ue.y,We.x,We.y,jt.x,jt.y)&&xa(jt.prev,jt,jt.next)>=0||(jt=jt.prevZ,on!==E.prev&&on!==E.next&&kc(Ie.x,Ie.y,Ue.x,Ue.y,We.x,We.y,on.x,on.y)&&xa(on.prev,on,on.next)>=0))return!1;on=on.nextZ}for(;jt&&jt.z>=Ft;){if(jt!==E.prev&&jt!==E.next&&kc(Ie.x,Ie.y,Ue.x,Ue.y,We.x,We.y,jt.x,jt.y)&&xa(jt.prev,jt,jt.next)>=0)return!1;jt=jt.prevZ}for(;on&&on.z<=Wt;){if(on!==E.prev&&on!==E.next&&kc(Ie.x,Ie.y,Ue.x,Ue.y,We.x,We.y,on.x,on.y)&&xa(on.prev,on,on.next)>=0)return!1;on=on.nextZ}return!0}function Ay(E,z,Z){var he=E;do{var Ie=he.prev,Ue=he.next.next;!Jh(Ie,Ue)&&um(Ie,he,he.next,Ue)&&Xf(Ie,Ue)&&Xf(Ue,Ie)&&(z.push(Ie.i/Z),z.push(he.i/Z),z.push(Ue.i/Z),Yf(he),Yf(he.next),he=E=Ue),he=he.next}while(he!==E);return Eu(he)}function Sy(E,z,Z,he,Ie,Ue){var We=E;do{for(var it=We.next.next;it!==We.prev;){if(We.i!==it.i&&Py(We,it)){var ft=cm(We,it);return We=Eu(We,We.next),ft=Eu(ft,ft.next),qf(We,z,Z,he,Ie,Ue),void qf(ft,z,Z,he,Ie,Ue)}it=it.next}We=We.next}while(We!==E)}function Ey(E,z){return E.x-z.x}function ky(E,z){if(z=function(he,Ie){var Ue,We=Ie,it=he.x,ft=he.y,At=-1/0;do{if(ft<=We.y&&ft>=We.next.y&&We.next.y!==We.y){var St=We.x+(ft-We.y)*(We.next.x-We.x)/(We.next.y-We.y);if(St<=it&&St>At){if(At=St,St===it){if(ft===We.y)return We;if(ft===We.next.y)return We.next}Ue=We.x<We.next.x?We:We.next}}We=We.next}while(We!==Ie);if(!Ue)return null;if(it===At)return Ue;var Ft,Wt=Ue,jt=Ue.x,on=Ue.y,un=1/0;We=Ue;do it>=We.x&&We.x>=jt&&it!==We.x&&kc(ft<on?it:At,ft,jt,on,ft<on?At:it,ft,We.x,We.y)&&(Ft=Math.abs(ft-We.y)/(it-We.x),Xf(We,he)&&(Ft<un||Ft===un&&(We.x>Ue.x||We.x===Ue.x&&Ly(Ue,We)))&&(Ue=We,un=Ft)),We=We.next;while(We!==Wt);return Ue}(E,z)){var Z=cm(z,E);Eu(z,z.next),Eu(Z,Z.next)}}function Ly(E,z){return xa(E.prev,E,z.prev)<0&&xa(z.next,E,E.next)<0}function vd(E,z,Z,he,Ie){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-Z)*Ie)|E<<8))|E<<4))|E<<2))|E<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-he)*Ie)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function Cy(E){var z=E,Z=E;do(z.x<Z.x||z.x===Z.x&&z.y<Z.y)&&(Z=z),z=z.next;while(z!==E);return Z}function kc(E,z,Z,he,Ie,Ue,We,it){return(Ie-We)*(z-it)-(E-We)*(Ue-it)>=0&&(E-We)*(he-it)-(Z-We)*(z-it)>=0&&(Z-We)*(Ue-it)-(Ie-We)*(he-it)>=0}function Py(E,z){return E.next.i!==z.i&&E.prev.i!==z.i&&!function(Z,he){var Ie=Z;do{if(Ie.i!==Z.i&&Ie.next.i!==Z.i&&Ie.i!==he.i&&Ie.next.i!==he.i&&um(Ie,Ie.next,Z,he))return!0;Ie=Ie.next}while(Ie!==Z);return!1}(E,z)&&(Xf(E,z)&&Xf(z,E)&&function(Z,he){var Ie=Z,Ue=!1,We=(Z.x+he.x)/2,it=(Z.y+he.y)/2;do Ie.y>it!=Ie.next.y>it&&Ie.next.y!==Ie.y&&We<(Ie.next.x-Ie.x)*(it-Ie.y)/(Ie.next.y-Ie.y)+Ie.x&&(Ue=!Ue),Ie=Ie.next;while(Ie!==Z);return Ue}(E,z)&&(xa(E.prev,E,z.prev)||xa(E,z.prev,z))||Jh(E,z)&&xa(E.prev,E,E.next)>0&&xa(z.prev,z,z.next)>0)}function xa(E,z,Z){return(z.y-E.y)*(Z.x-z.x)-(z.x-E.x)*(Z.y-z.y)}function Jh(E,z){return E.x===z.x&&E.y===z.y}function um(E,z,Z,he){var Ie=Qh(xa(E,z,Z)),Ue=Qh(xa(E,z,he)),We=Qh(xa(Z,he,E)),it=Qh(xa(Z,he,z));return Ie!==Ue&&We!==it||!(Ie!==0||!$h(E,Z,z))||!(Ue!==0||!$h(E,he,z))||!(We!==0||!$h(Z,E,he))||!(it!==0||!$h(Z,z,he))}function $h(E,z,Z){return z.x<=Math.max(E.x,Z.x)&&z.x>=Math.min(E.x,Z.x)&&z.y<=Math.max(E.y,Z.y)&&z.y>=Math.min(E.y,Z.y)}function Qh(E){return E>0?1:E<0?-1:0}function Xf(E,z){return xa(E.prev,E,E.next)<0?xa(E,z,E.next)>=0&&xa(E,E.prev,z)>=0:xa(E,z,E.prev)<0||xa(E,E.next,z)<0}function cm(E,z){var Z=new yd(E.i,E.x,E.y),he=new yd(z.i,z.x,z.y),Ie=E.next,Ue=z.prev;return E.next=z,z.prev=E,Z.next=Ie,Ie.prev=Z,he.next=Z,Z.prev=he,Ue.next=he,he.prev=Ue,he}function fm(E,z,Z,he){var Ie=new yd(E,z,Z);return he?(Ie.next=he.next,Ie.prev=he,he.next.prev=Ie,he.next=Ie):(Ie.prev=Ie,Ie.next=Ie),Ie}function Yf(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function yd(E,z,Z){this.i=E,this.x=z,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xd(E,z,Z,he){for(var Ie=0,Ue=z,We=Z-he;Ue<Z;Ue+=he)Ie+=(E[We]-E[Ue])*(E[Ue+1]+E[We+1]),We=Ue;return Ie}function Ry(E,z,Z,he,Ie){hm(E,z,Z||0,he||E.length-1,Ie||Iy)}function hm(E,z,Z,he,Ie){for(;he>Z;){if(he-Z>600){var Ue=he-Z+1,We=z-Z+1,it=Math.log(Ue),ft=.5*Math.exp(2*it/3),At=.5*Math.sqrt(it*ft*(Ue-ft)/Ue)*(We-Ue/2<0?-1:1);hm(E,z,Math.max(Z,Math.floor(z-We*ft/Ue+At)),Math.min(he,Math.floor(z+(Ue-We)*ft/Ue+At)),Ie)}var St=E[z],Ft=Z,Wt=he;for(Zf(E,Z,z),Ie(E[he],St)>0&&Zf(E,Z,he);Ft<Wt;){for(Zf(E,Ft,Wt),Ft++,Wt--;Ie(E[Ft],St)<0;)Ft++;for(;Ie(E[Wt],St)>0;)Wt--}Ie(E[Z],St)===0?Zf(E,Z,Wt):Zf(E,++Wt,he),Wt<=z&&(Z=Wt+1),z<=Wt&&(he=Wt-1)}}function Zf(E,z,Z){var he=E[z];E[z]=E[Z],E[Z]=he}function Iy(E,z){return E<z?-1:E>z?1:0}function _d(E,z){var Z=E.length;if(Z<=1)return[E];for(var he,Ie,Ue=[],We=0;We<Z;We++){var it=k(E[We]);it!==0&&(E[We].area=Math.abs(it),Ie===void 0&&(Ie=it<0),Ie===it<0?(he&&Ue.push(he),he=[E[We]]):he.push(E[We]))}if(he&&Ue.push(he),z>1)for(var ft=0;ft<Ue.length;ft++)Ue[ft].length<=z||(Ry(Ue[ft],z,1,Ue[ft].length-1,Oy),Ue[ft]=Ue[ft].slice(0,z));return Ue}function Oy(E,z){return z.area-E.area}function bd(E,z,Z){for(var he=Z.patternDependencies,Ie=!1,Ue=0,We=z;Ue<We.length;Ue+=1){var it=We[Ue].paint.get(E+"-pattern");it.isConstant()||(Ie=!0);var ft=it.constantOr(null);ft&&(Ie=!0,he[ft.to]=!0,he[ft.from]=!0)}return Ie}function wd(E,z,Z,he,Ie){for(var Ue=Ie.patternDependencies,We=0,it=z;We<it.length;We+=1){var ft=it[We],At=ft.paint.get(E+"-pattern").value;if(At.kind!=="constant"){var St=At.evaluate({zoom:he-1},Z,{},Ie.availableImages),Ft=At.evaluate({zoom:he},Z,{},Ie.availableImages),Wt=At.evaluate({zoom:he+1},Z,{},Ie.availableImages);St=St&&St.name?St.name:St,Ft=Ft&&Ft.name?Ft.name:Ft,Wt=Wt&&Wt.name?Wt.name:Wt,Ue[St]=!0,Ue[Ft]=!0,Ue[Wt]=!0,Z.patterns[ft.id]={min:St,mid:Ft,max:Wt}}}return Z}Kh.deviation=function(E,z,Z,he){var Ie=z&&z.length,Ue=Ie?z[0]*Z:E.length,We=Math.abs(xd(E,0,Ue,Z));if(Ie)for(var it=0,ft=z.length;it<ft;it++){var At=z[it]*Z,St=it<ft-1?z[it+1]*Z:E.length;We-=Math.abs(xd(E,At,St,Z))}var Ft=0;for(it=0;it<he.length;it+=3){var Wt=he[it]*Z,jt=he[it+1]*Z,on=he[it+2]*Z;Ft+=Math.abs((E[Wt]-E[on])*(E[jt+1]-E[Wt+1])-(E[Wt]-E[jt])*(E[on+1]-E[Wt+1]))}return We===0&&Ft===0?0:Math.abs((Ft-We)/We)},Kh.flatten=function(E){for(var z=E[0][0].length,Z={vertices:[],holes:[],dimensions:z},he=0,Ie=0;Ie<E.length;Ie++){for(var Ue=0;Ue<E[Ie].length;Ue++)for(var We=0;We<z;We++)Z.vertices.push(E[Ie][Ue][We]);Ie>0&&(he+=E[Ie-1].length,Z.holes.push(he))}return Z},gd.default=wy;var ml=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Oa,this.indexArray=new te,this.indexArray2=new qe,this.programConfigurations=new ki(sm,E.layers,E.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};ml.prototype.populate=function(E,z,Z){this.hasPattern=bd("fill",this.layers,z);for(var he=this.layers[0].layout.get("fill-sort-key"),Ie=[],Ue=0,We=E;Ue<We.length;Ue+=1){var it=We[Ue],ft=it.feature,At=it.id,St=it.index,Ft=it.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,jt={type:ft.type,id:At,properties:ft.properties,geometry:Wt?eo(ft):[]};if(this.layers[0]._featureFilter.filter(new ui(this.zoom),jt,Z)){Wt||(jt.geometry=eo(ft));var on=he?he.evaluate(jt,{},Z,z.availableImages):void 0,un={id:At,properties:ft.properties,type:ft.type,sourceLayerIndex:Ft,index:St,geometry:jt.geometry,patterns:{},sortKey:on};Ie.push(un)}}he&&Ie.sort(function(wr,kr){return wr.sortKey-kr.sortKey});for(var En=0,Sn=Ie;En<Sn.length;En+=1){var Dn=Sn[En],Fn=Dn,Wn=Fn.geometry,Kn=Fn.index,nr=Fn.sourceLayerIndex;if(this.hasPattern){var xr=wd("fill",this.layers,Dn,this.zoom,z);this.patternFeatures.push(xr)}else this.addFeature(Dn,Wn,Kn,Z,{});var pr=E[Kn].feature;z.featureIndex.insert(pr,Wn,Kn,nr,this.index)}},ml.prototype.update=function(E,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,Z)},ml.prototype.addFeatures=function(E,z,Z){for(var he=0,Ie=this.patternFeatures;he<Ie.length;he+=1){var Ue=Ie[he];this.addFeature(Ue,Ue.geometry,Ue.index,z,Z)}},ml.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ml.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ml.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,sm),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.indexBuffer2=E.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(E),this.uploaded=!0},ml.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ml.prototype.addFeature=function(E,z,Z,he,Ie){for(var Ue=0,We=_d(z,500);Ue<We.length;Ue+=1){for(var it=We[Ue],ft=0,At=0,St=it;At<St.length;At+=1)ft+=St[At].length;for(var Ft=this.segments.prepareSegment(ft,this.layoutVertexArray,this.indexArray),Wt=Ft.vertexLength,jt=[],on=[],un=0,En=it;un<En.length;un+=1){var Sn=En[un];if(Sn.length!==0){Sn!==it[0]&&on.push(jt.length/2);var Dn=this.segments2.prepareSegment(Sn.length,this.layoutVertexArray,this.indexArray2),Fn=Dn.vertexLength;this.layoutVertexArray.emplaceBack(Sn[0].x,Sn[0].y),this.indexArray2.emplaceBack(Fn+Sn.length-1,Fn),jt.push(Sn[0].x),jt.push(Sn[0].y);for(var Wn=1;Wn<Sn.length;Wn++)this.layoutVertexArray.emplaceBack(Sn[Wn].x,Sn[Wn].y),this.indexArray2.emplaceBack(Fn+Wn-1,Fn+Wn),jt.push(Sn[Wn].x),jt.push(Sn[Wn].y);Dn.vertexLength+=Sn.length,Dn.primitiveLength+=Sn.length}}for(var Kn=gd(jt,on),nr=0;nr<Kn.length;nr+=3)this.indexArray.emplaceBack(Wt+Kn[nr],Wt+Kn[nr+1],Wt+Kn[nr+2]);Ft.vertexLength+=ft,Ft.primitiveLength+=Kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,Z,Ie,he)},Sr("FillBucket",ml,{omit:["layers","patternFeatures"]});var Dy=new pa({"fill-sort-key":new Ir(De.layout_fill["fill-sort-key"])}),zy={paint:new pa({"fill-antialias":new Pr(De.paint_fill["fill-antialias"]),"fill-opacity":new Ir(De.paint_fill["fill-opacity"]),"fill-color":new Ir(De.paint_fill["fill-color"]),"fill-outline-color":new Ir(De.paint_fill["fill-outline-color"]),"fill-translate":new Pr(De.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new Js(De.paint_fill["fill-pattern"])}),layout:Dy},Fy=function(E){function z(Z){E.call(this,Z,zy)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,he){E.prototype.recalculate.call(this,Z,he);var Ie=this.paint._values["fill-outline-color"];Ie.value.kind==="constant"&&Ie.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(Z){return new ml(Z)},z.prototype.queryRadius=function(){return qh(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(Z,he,Ie,Ue,We,it,ft){return Gh(Xh(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),it.angle,ft),Ue)},z.prototype.isTileClipped=function(){return!0},z}(da),pm=Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dm=Lc;function Lc(E,z,Z,he,Ie){this.properties={},this.extent=Z,this.type=0,this._pbf=E,this._geometry=-1,this._keys=he,this._values=Ie,E.readFields(Ny,this,z)}function Ny(E,z,Z){E==1?z.id=Z.readVarint():E==2?function(he,Ie){for(var Ue=he.readVarint()+he.pos;he.pos<Ue;){var We=Ie._keys[he.readVarint()],it=Ie._values[he.readVarint()];Ie.properties[We]=it}}(Z,z):E==3?z.type=Z.readVarint():E==4&&(z._geometry=Z.pos)}function By(E){for(var z,Z,he=0,Ie=0,Ue=E.length,We=Ue-1;Ie<Ue;We=Ie++)z=E[Ie],he+=((Z=E[We]).x-z.x)*(z.y+Z.y);return he}Lc.types=["Unknown","Point","LineString","Polygon"],Lc.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var z,Z=E.readVarint()+E.pos,he=1,Ie=0,Ue=0,We=0,it=[];E.pos<Z;){if(Ie<=0){var ft=E.readVarint();he=7&ft,Ie=ft>>3}if(Ie--,he===1||he===2)Ue+=E.readSVarint(),We+=E.readSVarint(),he===1&&(z&&it.push(z),z=[]),z.push(new t(Ue,We));else{if(he!==7)throw new Error("unknown command "+he);z&&z.push(z[0].clone())}}return z&&it.push(z),it},Lc.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var z=E.readVarint()+E.pos,Z=1,he=0,Ie=0,Ue=0,We=1/0,it=-1/0,ft=1/0,At=-1/0;E.pos<z;){if(he<=0){var St=E.readVarint();Z=7&St,he=St>>3}if(he--,Z===1||Z===2)(Ie+=E.readSVarint())<We&&(We=Ie),Ie>it&&(it=Ie),(Ue+=E.readSVarint())<ft&&(ft=Ue),Ue>At&&(At=Ue);else if(Z!==7)throw new Error("unknown command "+Z)}return[We,ft,it,At]},Lc.prototype.toGeoJSON=function(E,z,Z){var he,Ie,Ue=this.extent*Math.pow(2,Z),We=this.extent*E,it=this.extent*z,ft=this.loadGeometry(),At=Lc.types[this.type];function St(jt){for(var on=0;on<jt.length;on++){var un=jt[on],En=180-360*(un.y+it)/Ue;jt[on]=[360*(un.x+We)/Ue-180,360/Math.PI*Math.atan(Math.exp(En*Math.PI/180))-90]}}switch(this.type){case 1:var Ft=[];for(he=0;he<ft.length;he++)Ft[he]=ft[he][0];St(ft=Ft);break;case 2:for(he=0;he<ft.length;he++)St(ft[he]);break;case 3:for(ft=function(jt){var on=jt.length;if(on<=1)return[jt];for(var un,En,Sn=[],Dn=0;Dn<on;Dn++){var Fn=By(jt[Dn]);Fn!==0&&(En===void 0&&(En=Fn<0),En===Fn<0?(un&&Sn.push(un),un=[jt[Dn]]):un.push(jt[Dn]))}return un&&Sn.push(un),Sn}(ft),he=0;he<ft.length;he++)for(Ie=0;Ie<ft[he].length;Ie++)St(ft[he][Ie])}ft.length===1?ft=ft[0]:At="Multi"+At;var Wt={type:"Feature",geometry:{type:At,coordinates:ft},properties:this.properties};return"id"in this&&(Wt.id=this.id),Wt};var mm=gm;function gm(E,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(Uy,this,z),this.length=this._features.length}function Uy(E,z,Z){E===15?z.version=Z.readVarint():E===1?z.name=Z.readString():E===5?z.extent=Z.readVarint():E===2?z._features.push(Z.pos):E===3?z._keys.push(Z.readString()):E===4&&z._values.push(function(he){for(var Ie=null,Ue=he.readVarint()+he.pos;he.pos<Ue;){var We=he.readVarint()>>3;Ie=We===1?he.readString():We===2?he.readFloat():We===3?he.readDouble():We===4?he.readVarint64():We===5?he.readVarint():We===6?he.readSVarint():We===7?he.readBoolean():null}return Ie}(Z))}function jy(E,z,Z){if(E===3){var he=new mm(Z,Z.readVarint()+Z.pos);he.length&&(z[he.name]=he)}}gm.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var z=this._pbf.readVarint()+this._pbf.pos;return new dm(this._pbf,z,this.extent,this._keys,this._values)};var Cc={VectorTile:function(E,z){this.layers=E.readFields(jy,{},z)},VectorTileFeature:dm,VectorTileLayer:mm},Vy=Cc.VectorTileFeature.types,Td=Math.pow(2,13);function Kf(E,z,Z,he,Ie,Ue,We,it){E.emplaceBack(z,Z,2*Math.floor(he*Td)+We,Ie*Td*2,Ue*Td*2,Math.round(it))}var vl=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new Qs,this.indexArray=new te,this.programConfigurations=new ki(pm,E.layers,E.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Hy(E,z){return E.x===z.x&&(E.x<0||E.x>si)||E.y===z.y&&(E.y<0||E.y>si)}vl.prototype.populate=function(E,z,Z){this.features=[],this.hasPattern=bd("fill-extrusion",this.layers,z);for(var he=0,Ie=E;he<Ie.length;he+=1){var Ue=Ie[he],We=Ue.feature,it=Ue.id,ft=Ue.index,At=Ue.sourceLayerIndex,St=this.layers[0]._featureFilter.needGeometry,Ft={type:We.type,id:it,properties:We.properties,geometry:St?eo(We):[]};if(this.layers[0]._featureFilter.filter(new ui(this.zoom),Ft,Z)){var Wt={id:it,sourceLayerIndex:At,index:ft,geometry:St?Ft.geometry:eo(We),properties:We.properties,type:We.type,patterns:{}};We.id!==void 0&&(Wt.id=We.id),this.hasPattern?this.features.push(wd("fill-extrusion",this.layers,Wt,this.zoom,z)):this.addFeature(Wt,Wt.geometry,ft,Z,{}),z.featureIndex.insert(We,Wt.geometry,ft,At,this.index,!0)}}},vl.prototype.addFeatures=function(E,z,Z){for(var he=0,Ie=this.features;he<Ie.length;he+=1){var Ue=Ie[he],We=Ue.geometry;this.addFeature(Ue,We,Ue.index,z,Z)}},vl.prototype.update=function(E,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,Z)},vl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vl.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,pm),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vl.prototype.addFeature=function(E,z,Z,he,Ie){for(var Ue=0,We=_d(z,500);Ue<We.length;Ue+=1){for(var it=We[Ue],ft=0,At=0,St=it;At<St.length;At+=1)ft+=St[At].length;for(var Ft=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Wt=0,jt=it;Wt<jt.length;Wt+=1){var on=jt[Wt];if(on.length!==0&&!((Jr=on).every(function(Hr){return Hr.x<0})||Jr.every(function(Hr){return Hr.x>si})||Jr.every(function(Hr){return Hr.y<0})||Jr.every(function(Hr){return Hr.y>si})))for(var un=0,En=0;En<on.length;En++){var Sn=on[En];if(En>=1){var Dn=on[En-1];if(!Hy(Sn,Dn)){Ft.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(Ft=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Fn=Sn.sub(Dn)._perp()._unit(),Wn=Dn.dist(Sn);un+Wn>32768&&(un=0),Kf(this.layoutVertexArray,Sn.x,Sn.y,Fn.x,Fn.y,0,0,un),Kf(this.layoutVertexArray,Sn.x,Sn.y,Fn.x,Fn.y,0,1,un),un+=Wn,Kf(this.layoutVertexArray,Dn.x,Dn.y,Fn.x,Fn.y,0,0,un),Kf(this.layoutVertexArray,Dn.x,Dn.y,Fn.x,Fn.y,0,1,un);var Kn=Ft.vertexLength;this.indexArray.emplaceBack(Kn,Kn+2,Kn+1),this.indexArray.emplaceBack(Kn+1,Kn+2,Kn+3),Ft.vertexLength+=4,Ft.primitiveLength+=2}}}}if(Ft.vertexLength+ft>bn.MAX_VERTEX_ARRAY_LENGTH&&(Ft=this.segments.prepareSegment(ft,this.layoutVertexArray,this.indexArray)),Vy[E.type]==="Polygon"){for(var nr=[],xr=[],pr=Ft.vertexLength,wr=0,kr=it;wr<kr.length;wr+=1){var Vr=kr[wr];if(Vr.length!==0){Vr!==it[0]&&xr.push(nr.length/2);for(var Rr=0;Rr<Vr.length;Rr++){var Ur=Vr[Rr];Kf(this.layoutVertexArray,Ur.x,Ur.y,0,0,1,1,0),nr.push(Ur.x),nr.push(Ur.y)}}}for(var zr=gd(nr,xr),Lr=0;Lr<zr.length;Lr+=3)this.indexArray.emplaceBack(pr+zr[Lr],pr+zr[Lr+2],pr+zr[Lr+1]);Ft.primitiveLength+=zr.length/3,Ft.vertexLength+=ft}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,Z,Ie,he)},Sr("FillExtrusionBucket",vl,{omit:["layers","features"]});var Gy={paint:new pa({"fill-extrusion-opacity":new Pr(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ir(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Js(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ir(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ir(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Wy=function(E){function z(Z){E.call(this,Z,Gy)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new vl(Z)},z.prototype.queryRadius=function(){return qh(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(Z,he,Ie,Ue,We,it,ft,At){var St=Xh(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),it.angle,ft),Ft=this.paint.get("fill-extrusion-height").evaluate(he,Ie),Wt=this.paint.get("fill-extrusion-base").evaluate(he,Ie),jt=function(un,En,Sn,Dn){for(var Fn=[],Wn=0,Kn=un;Wn<Kn.length;Wn+=1){var nr=Kn[Wn],xr=[nr.x,nr.y,Dn,1];Zh(xr,xr,En),Fn.push(new t(xr[0]/xr[3],xr[1]/xr[3]))}return Fn}(St,At,0,0),on=function(un,En,Sn,Dn){for(var Fn=[],Wn=[],Kn=Dn[8]*En,nr=Dn[9]*En,xr=Dn[10]*En,pr=Dn[11]*En,wr=Dn[8]*Sn,kr=Dn[9]*Sn,Vr=Dn[10]*Sn,Rr=Dn[11]*Sn,Ur=0,zr=un;Ur<zr.length;Ur+=1){for(var Lr=[],Jr=[],Hr=0,Li=zr[Ur];Hr<Li.length;Hr+=1){var Br=Li[Hr],_i=Br.x,Ii=Br.y,Di=Dn[0]*_i+Dn[4]*Ii+Dn[12],zi=Dn[1]*_i+Dn[5]*Ii+Dn[13],Ci=Dn[2]*_i+Dn[6]*Ii+Dn[14],wa=Dn[3]*_i+Dn[7]*Ii+Dn[15],Gi=Ci+xr,La=wa+pr,qa=Di+wr,Fa=zi+kr,ho=Ci+Vr,Na=wa+Rr,Aa=new t((Di+Kn)/La,(zi+nr)/La);Aa.z=Gi/La,Lr.push(Aa);var Ba=new t(qa/Na,Fa/Na);Ba.z=ho/Na,Jr.push(Ba)}Fn.push(Lr),Wn.push(Jr)}return[Fn,Wn]}(Ue,Wt,Ft,At);return function(un,En,Sn){var Dn=1/0;Gh(Sn,En)&&(Dn=vm(Sn,En[0]));for(var Fn=0;Fn<En.length;Fn++)for(var Wn=En[Fn],Kn=un[Fn],nr=0;nr<Wn.length-1;nr++){var xr=Wn[nr],pr=Wn[nr+1],wr=Kn[nr],kr=[xr,pr,Kn[nr+1],wr,xr];fo(Sn,kr)&&(Dn=Math.min(Dn,vm(Sn,kr)))}return Dn!==1/0&&Dn}(on[0],on[1],jt)},z}(da);function Jf(E,z){return E.x*z.x+E.y*z.y}function vm(E,z){if(E.length===1){for(var Z,he=0,Ie=z[he++];!Z||Ie.equals(Z);)if(!(Z=z[he++]))return 1/0;for(;he<z.length;he++){var Ue=z[he],We=E[0],it=Z.sub(Ie),ft=Ue.sub(Ie),At=We.sub(Ie),St=Jf(it,it),Ft=Jf(it,ft),Wt=Jf(ft,ft),jt=Jf(At,it),on=Jf(At,ft),un=St*Wt-Ft*Ft,En=(Wt*jt-Ft*on)/un,Sn=(St*on-Ft*jt)/un,Dn=1-En-Sn,Fn=Ie.z*Dn+Z.z*En+Ue.z*Sn;if(isFinite(Fn))return Fn}return 1/0}for(var Wn=1/0,Kn=0,nr=z;Kn<nr.length;Kn+=1){var xr=nr[Kn];Wn=Math.min(Wn,xr.z)}return Wn}var ym=Qi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,qy=Cc.VectorTileFeature.types,Xy=Math.cos(Math.PI/180*37.5),xm=Math.pow(2,14)/.5,Eo=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ns,this.indexArray=new te,this.programConfigurations=new ki(ym,E.layers,E.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Eo.prototype.populate=function(E,z,Z){this.hasPattern=bd("line",this.layers,z);for(var he=this.layers[0].layout.get("line-sort-key"),Ie=[],Ue=0,We=E;Ue<We.length;Ue+=1){var it=We[Ue],ft=it.feature,At=it.id,St=it.index,Ft=it.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,jt={type:ft.type,id:At,properties:ft.properties,geometry:Wt?eo(ft):[]};if(this.layers[0]._featureFilter.filter(new ui(this.zoom),jt,Z)){Wt||(jt.geometry=eo(ft));var on=he?he.evaluate(jt,{},Z):void 0,un={id:At,properties:ft.properties,type:ft.type,sourceLayerIndex:Ft,index:St,geometry:jt.geometry,patterns:{},sortKey:on};Ie.push(un)}}he&&Ie.sort(function(wr,kr){return wr.sortKey-kr.sortKey});for(var En=0,Sn=Ie;En<Sn.length;En+=1){var Dn=Sn[En],Fn=Dn,Wn=Fn.geometry,Kn=Fn.index,nr=Fn.sourceLayerIndex;if(this.hasPattern){var xr=wd("line",this.layers,Dn,this.zoom,z);this.patternFeatures.push(xr)}else this.addFeature(Dn,Wn,Kn,Z,{});var pr=E[Kn].feature;z.featureIndex.insert(pr,Wn,Kn,nr,this.index)}},Eo.prototype.update=function(E,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,Z)},Eo.prototype.addFeatures=function(E,z,Z){for(var he=0,Ie=this.patternFeatures;he<Ie.length;he+=1){var Ue=Ie[he];this.addFeature(Ue,Ue.geometry,Ue.index,z,Z)}},Eo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Eo.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,ym),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},Eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Eo.prototype.addFeature=function(E,z,Z,he,Ie){for(var Ue=this.layers[0].layout,We=Ue.get("line-join").evaluate(E,{}),it=Ue.get("line-cap"),ft=Ue.get("line-miter-limit"),At=Ue.get("line-round-limit"),St=0,Ft=z;St<Ft.length;St+=1){var Wt=Ft[St];this.addLine(Wt,E,We,it,ft,At)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,Z,Ie,he)},Eo.prototype.addLine=function(E,z,Z,he,Ie,Ue){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var We=0;We<E.length-1;We++)this.totalDistance+=E[We].dist(E[We+1]);this.updateScaledDistance()}for(var it=qy[z.type]==="Polygon",ft=E.length;ft>=2&&E[ft-1].equals(E[ft-2]);)ft--;for(var At=0;At<ft-1&&E[At].equals(E[At+1]);)At++;if(!(ft<(it?3:2))){Z==="bevel"&&(Ie=1.05);var St,Ft=this.overscaling<=16?15*si/(512*this.overscaling):0,Wt=this.segments.prepareSegment(10*ft,this.layoutVertexArray,this.indexArray),jt=void 0,on=void 0,un=void 0,En=void 0;this.e1=this.e2=-1,it&&(St=E[ft-2],En=E[At].sub(St)._unit()._perp());for(var Sn=At;Sn<ft;Sn++)if(!(on=Sn===ft-1?it?E[At+1]:void 0:E[Sn+1])||!E[Sn].equals(on)){En&&(un=En),St&&(jt=St),St=E[Sn],En=on?on.sub(St)._unit()._perp():un;var Dn=(un=un||En).add(En);Dn.x===0&&Dn.y===0||Dn._unit();var Fn=un.x*En.x+un.y*En.y,Wn=Dn.x*En.x+Dn.y*En.y,Kn=Wn!==0?1/Wn:1/0,nr=2*Math.sqrt(2-2*Wn),xr=Wn<Xy&&jt&&on,pr=un.x*En.y-un.y*En.x>0;if(xr&&Sn>At){var wr=St.dist(jt);if(wr>2*Ft){var kr=St.sub(St.sub(jt)._mult(Ft/wr)._round());this.updateDistance(jt,kr),this.addCurrentVertex(kr,un,0,0,Wt),jt=kr}}var Vr=jt&&on,Rr=Vr?Z:it?"butt":he;if(Vr&&Rr==="round"&&(Kn<Ue?Rr="miter":Kn<=2&&(Rr="fakeround")),Rr==="miter"&&Kn>Ie&&(Rr="bevel"),Rr==="bevel"&&(Kn>2&&(Rr="flipbevel"),Kn<Ie&&(Rr="miter")),jt&&this.updateDistance(jt,St),Rr==="miter")Dn._mult(Kn),this.addCurrentVertex(St,Dn,0,0,Wt);else if(Rr==="flipbevel"){if(Kn>100)Dn=En.mult(-1);else{var Ur=Kn*un.add(En).mag()/un.sub(En).mag();Dn._perp()._mult(Ur*(pr?-1:1))}this.addCurrentVertex(St,Dn,0,0,Wt),this.addCurrentVertex(St,Dn.mult(-1),0,0,Wt)}else if(Rr==="bevel"||Rr==="fakeround"){var zr=-Math.sqrt(Kn*Kn-1),Lr=pr?zr:0,Jr=pr?0:zr;if(jt&&this.addCurrentVertex(St,un,Lr,Jr,Wt),Rr==="fakeround")for(var Hr=Math.round(180*nr/Math.PI/20),Li=1;Li<Hr;Li++){var Br=Li/Hr;if(Br!==.5){var _i=Br-.5;Br+=Br*_i*(Br-1)*((1.0904+Fn*(Fn*(3.55645-1.43519*Fn)-3.2452))*_i*_i+(.848013+Fn*(.215638*Fn-1.06021)))}var Ii=En.sub(un)._mult(Br)._add(un)._unit()._mult(pr?-1:1);this.addHalfVertex(St,Ii.x,Ii.y,!1,pr,0,Wt)}on&&this.addCurrentVertex(St,En,-Lr,-Jr,Wt)}else if(Rr==="butt")this.addCurrentVertex(St,Dn,0,0,Wt);else if(Rr==="square"){var Di=jt?1:-1;this.addCurrentVertex(St,Dn,Di,Di,Wt)}else Rr==="round"&&(jt&&(this.addCurrentVertex(St,un,0,0,Wt),this.addCurrentVertex(St,un,1,1,Wt,!0)),on&&(this.addCurrentVertex(St,En,-1,-1,Wt,!0),this.addCurrentVertex(St,En,0,0,Wt)));if(xr&&Sn<ft-1){var zi=St.dist(on);if(zi>2*Ft){var Ci=St.add(on.sub(St)._mult(Ft/zi)._round());this.updateDistance(St,Ci),this.addCurrentVertex(Ci,En,0,0,Wt),St=Ci}}}}},Eo.prototype.addCurrentVertex=function(E,z,Z,he,Ie,Ue){Ue===void 0&&(Ue=!1);var We=z.x+z.y*Z,it=z.y-z.x*Z,ft=-z.x+z.y*he,At=-z.y-z.x*he;this.addHalfVertex(E,We,it,Ue,!1,Z,Ie),this.addHalfVertex(E,ft,At,Ue,!0,-he,Ie),this.distance>xm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(E,z,Z,he,Ie,Ue))},Eo.prototype.addHalfVertex=function(E,z,Z,he,Ie,Ue,We){var it=E.x,ft=E.y,At=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((it<<1)+(he?1:0),(ft<<1)+(Ie?1:0),Math.round(63*z)+128,Math.round(63*Z)+128,1+(Ue===0?0:Ue<0?-1:1)|(63&At)<<2,At>>6);var St=We.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,St),We.primitiveLength++),Ie?this.e2=St:this.e1=St},Eo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(xm-1):this.distance},Eo.prototype.updateDistance=function(E,z){this.distance+=E.dist(z),this.updateScaledDistance()},Sr("LineBucket",Eo,{omit:["layers","patternFeatures"]});var Yy=new pa({"line-cap":new Pr(De.layout_line["line-cap"]),"line-join":new Ir(De.layout_line["line-join"]),"line-miter-limit":new Pr(De.layout_line["line-miter-limit"]),"line-round-limit":new Pr(De.layout_line["line-round-limit"]),"line-sort-key":new Ir(De.layout_line["line-sort-key"])}),_m={paint:new pa({"line-opacity":new Ir(De.paint_line["line-opacity"]),"line-color":new Ir(De.paint_line["line-color"]),"line-translate":new Pr(De.paint_line["line-translate"]),"line-translate-anchor":new Pr(De.paint_line["line-translate-anchor"]),"line-width":new Ir(De.paint_line["line-width"]),"line-gap-width":new Ir(De.paint_line["line-gap-width"]),"line-offset":new Ir(De.paint_line["line-offset"]),"line-blur":new Ir(De.paint_line["line-blur"]),"line-dasharray":new Ma(De.paint_line["line-dasharray"]),"line-pattern":new Js(De.paint_line["line-pattern"]),"line-gradient":new hs(De.paint_line["line-gradient"])}),layout:Yy},Zy=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,he){return he=new ui(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),E.prototype.possiblyEvaluate.call(this,Z,he)},z.prototype.evaluate=function(Z,he,Ie,Ue){return he=u({},he,{zoom:Math.floor(he.zoom)}),E.prototype.evaluate.call(this,Z,he,Ie,Ue)},z}(Ir),bm=new Zy(_m.paint.properties["line-width"].specification);bm.useIntegerZoom=!0;var Ky=function(E){function z(Z){E.call(this,Z,_m)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},z.prototype._updateGradient=function(){var Z=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=om(Z,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(Z,he){E.prototype.recalculate.call(this,Z,he),this.paint._values["line-floorwidth"]=bm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},z.prototype.createBucket=function(Z){return new Eo(Z)},z.prototype.queryRadius=function(Z){var he=Z,Ie=wm(Wf("line-width",this,he),Wf("line-gap-width",this,he)),Ue=Wf("line-offset",this,he);return Ie/2+Math.abs(Ue)+qh(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(Z,he,Ie,Ue,We,it,ft){var At=Xh(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),it.angle,ft),St=ft/2*wm(this.paint.get("line-width").evaluate(he,Ie),this.paint.get("line-gap-width").evaluate(he,Ie)),Ft=this.paint.get("line-offset").evaluate(he,Ie);return Ft&&(Ue=function(Wt,jt){for(var on=[],un=new t(0,0),En=0;En<Wt.length;En++){for(var Sn=Wt[En],Dn=[],Fn=0;Fn<Sn.length;Fn++){var Wn=Sn[Fn-1],Kn=Sn[Fn],nr=Sn[Fn+1],xr=Fn===0?un:Kn.sub(Wn)._unit()._perp(),pr=Fn===Sn.length-1?un:nr.sub(Kn)._unit()._perp(),wr=xr._add(pr)._unit(),kr=wr.x*pr.x+wr.y*pr.y;wr._mult(1/kr),Dn.push(wr._mult(jt)._add(Kn))}on.push(Dn)}return on}(Ue,Ft*ft)),function(Wt,jt,on){for(var un=0;un<jt.length;un++){var En=jt[un];if(Wt.length>=3){for(var Sn=0;Sn<En.length;Sn++)if(Su(Wt,En[Sn]))return!0}if(hd(Wt,En,on))return!0}return!1}(At,Ue,St)},z.prototype.isTileClipped=function(){return!0},z}(da);function wm(E,z){return z>0?z+2*E:E}var Md=Qi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Jy=Qi([{name:"a_projected_pos",components:3,type:"Float32"}],4),$y=(Qi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Tm=(Qi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Qy=Qi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ex(E,z,Z){return E.sections.forEach(function(he){he.text=function(Ie,Ue,We){var it=Ue.layout.get("text-transform").evaluate(We,{});return it==="uppercase"?Ie=Ie.toLocaleUpperCase():it==="lowercase"&&(Ie=Ie.toLocaleLowerCase()),Ni.applyArabicShaping&&(Ie=Ni.applyArabicShaping(Ie)),Ie}(he.text,z,Z)}),E}Qi([{name:"triangle",components:3,type:"Uint16"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qi([{type:"Float32",name:"offsetX"}]),Qi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var $f={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},za=24,Mm=function(E,z,Z,he,Ie){var Ue,We,it=8*Ie-he-1,ft=(1<<it)-1,At=ft>>1,St=-7,Ft=Z?Ie-1:0,Wt=Z?-1:1,jt=E[z+Ft];for(Ft+=Wt,Ue=jt&(1<<-St)-1,jt>>=-St,St+=it;St>0;Ue=256*Ue+E[z+Ft],Ft+=Wt,St-=8);for(We=Ue&(1<<-St)-1,Ue>>=-St,St+=he;St>0;We=256*We+E[z+Ft],Ft+=Wt,St-=8);if(Ue===0)Ue=1-At;else{if(Ue===ft)return We?NaN:1/0*(jt?-1:1);We+=Math.pow(2,he),Ue-=At}return(jt?-1:1)*We*Math.pow(2,Ue-he)},Am=function(E,z,Z,he,Ie,Ue){var We,it,ft,At=8*Ue-Ie-1,St=(1<<At)-1,Ft=St>>1,Wt=Ie===23?Math.pow(2,-24)-Math.pow(2,-77):0,jt=he?0:Ue-1,on=he?1:-1,un=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(it=isNaN(z)?1:0,We=St):(We=Math.floor(Math.log(z)/Math.LN2),z*(ft=Math.pow(2,-We))<1&&(We--,ft*=2),(z+=We+Ft>=1?Wt/ft:Wt*Math.pow(2,1-Ft))*ft>=2&&(We++,ft/=2),We+Ft>=St?(it=0,We=St):We+Ft>=1?(it=(z*ft-1)*Math.pow(2,Ie),We+=Ft):(it=z*Math.pow(2,Ft-1)*Math.pow(2,Ie),We=0));Ie>=8;E[Z+jt]=255&it,jt+=on,it/=256,Ie-=8);for(We=We<<Ie|it,At+=Ie;At>0;E[Z+jt]=255&We,jt+=on,We/=256,At-=8);E[Z+jt-on]|=128*un},ep=Ri;function Ri(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}Ri.Varint=0,Ri.Fixed64=1,Ri.Bytes=2,Ri.Fixed32=5;var Ad=4294967296,Sm=1/Ad,Em=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function nu(E){return E.type===Ri.Bytes?E.readVarint()+E.pos:E.pos+1}function Pc(E,z,Z){return Z?4294967296*z+(E>>>0):4294967296*(z>>>0)+(E>>>0)}function km(E,z,Z){var he=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));Z.realloc(he);for(var Ie=Z.pos-1;Ie>=E;Ie--)Z.buf[Ie+he]=Z.buf[Ie]}function tx(E,z){for(var Z=0;Z<E.length;Z++)z.writeVarint(E[Z])}function nx(E,z){for(var Z=0;Z<E.length;Z++)z.writeSVarint(E[Z])}function rx(E,z){for(var Z=0;Z<E.length;Z++)z.writeFloat(E[Z])}function ix(E,z){for(var Z=0;Z<E.length;Z++)z.writeDouble(E[Z])}function ax(E,z){for(var Z=0;Z<E.length;Z++)z.writeBoolean(E[Z])}function ox(E,z){for(var Z=0;Z<E.length;Z++)z.writeFixed32(E[Z])}function sx(E,z){for(var Z=0;Z<E.length;Z++)z.writeSFixed32(E[Z])}function lx(E,z){for(var Z=0;Z<E.length;Z++)z.writeFixed64(E[Z])}function ux(E,z){for(var Z=0;Z<E.length;Z++)z.writeSFixed64(E[Z])}function tp(E,z){return(E[z]|E[z+1]<<8|E[z+2]<<16)+16777216*E[z+3]}function Rc(E,z,Z){E[Z]=z,E[Z+1]=z>>>8,E[Z+2]=z>>>16,E[Z+3]=z>>>24}function Lm(E,z){return(E[z]|E[z+1]<<8|E[z+2]<<16)+(E[z+3]<<24)}Ri.prototype={destroy:function(){this.buf=null},readFields:function(E,z,Z){for(Z=Z||this.length;this.pos<Z;){var he=this.readVarint(),Ie=he>>3,Ue=this.pos;this.type=7&he,E(Ie,z,this),this.pos===Ue&&this.skip(he)}return z},readMessage:function(E,z){return this.readFields(E,z,this.readVarint()+this.pos)},readFixed32:function(){var E=tp(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=Lm(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=tp(this.buf,this.pos)+tp(this.buf,this.pos+4)*Ad;return this.pos+=8,E},readSFixed64:function(){var E=tp(this.buf,this.pos)+Lm(this.buf,this.pos+4)*Ad;return this.pos+=8,E},readFloat:function(){var E=Mm(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Mm(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var z,Z,he=this.buf;return z=127&(Z=he[this.pos++]),Z<128?z:(z|=(127&(Z=he[this.pos++]))<<7,Z<128?z:(z|=(127&(Z=he[this.pos++]))<<14,Z<128?z:(z|=(127&(Z=he[this.pos++]))<<21,Z<128?z:function(Ie,Ue,We){var it,ft,At=We.buf;if(it=(112&(ft=At[We.pos++]))>>4,ft<128||(it|=(127&(ft=At[We.pos++]))<<3,ft<128)||(it|=(127&(ft=At[We.pos++]))<<10,ft<128)||(it|=(127&(ft=At[We.pos++]))<<17,ft<128)||(it|=(127&(ft=At[We.pos++]))<<24,ft<128)||(it|=(1&(ft=At[We.pos++]))<<31,ft<128))return Pc(Ie,it,Ue);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(Z=he[this.pos]))<<28,E,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var E=this.readVarint()+this.pos,z=this.pos;return this.pos=E,E-z>=12&&Em?function(Z,he,Ie){return Em.decode(Z.subarray(he,Ie))}(this.buf,z,E):function(Z,he,Ie){for(var Ue="",We=he;We<Ie;){var it,ft,At,St=Z[We],Ft=null,Wt=St>239?4:St>223?3:St>191?2:1;if(We+Wt>Ie)break;Wt===1?St<128&&(Ft=St):Wt===2?(192&(it=Z[We+1]))==128&&(Ft=(31&St)<<6|63&it)<=127&&(Ft=null):Wt===3?(it=Z[We+1],ft=Z[We+2],(192&it)==128&&(192&ft)==128&&((Ft=(15&St)<<12|(63&it)<<6|63&ft)<=2047||Ft>=55296&&Ft<=57343)&&(Ft=null)):Wt===4&&(it=Z[We+1],ft=Z[We+2],At=Z[We+3],(192&it)==128&&(192&ft)==128&&(192&At)==128&&((Ft=(15&St)<<18|(63&it)<<12|(63&ft)<<6|63&At)<=65535||Ft>=1114112)&&(Ft=null)),Ft===null?(Ft=65533,Wt=1):Ft>65535&&(Ft-=65536,Ue+=String.fromCharCode(Ft>>>10&1023|55296),Ft=56320|1023&Ft),Ue+=String.fromCharCode(Ft),We+=Wt}return Ue}(this.buf,z,E)},readBytes:function(){var E=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,E);return this.pos=E,z},readPackedVarint:function(E,z){if(this.type!==Ri.Bytes)return E.push(this.readVarint(z));var Z=nu(this);for(E=E||[];this.pos<Z;)E.push(this.readVarint(z));return E},readPackedSVarint:function(E){if(this.type!==Ri.Bytes)return E.push(this.readSVarint());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==Ri.Bytes)return E.push(this.readBoolean());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==Ri.Bytes)return E.push(this.readFloat());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==Ri.Bytes)return E.push(this.readDouble());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==Ri.Bytes)return E.push(this.readFixed32());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==Ri.Bytes)return E.push(this.readSFixed32());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==Ri.Bytes)return E.push(this.readFixed64());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==Ri.Bytes)return E.push(this.readSFixed64());var z=nu(this);for(E=E||[];this.pos<z;)E.push(this.readSFixed64());return E},skip:function(E){var z=7&E;if(z===Ri.Varint)for(;this.buf[this.pos++]>127;);else if(z===Ri.Bytes)this.pos=this.readVarint()+this.pos;else if(z===Ri.Fixed32)this.pos+=4;else{if(z!==Ri.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(E,z){this.writeVarint(E<<3|z)},realloc:function(E){for(var z=this.length||16;z<this.pos+E;)z*=2;if(z!==this.length){var Z=new Uint8Array(z);Z.set(this.buf),this.buf=Z,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),Rc(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),Rc(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),Rc(this.buf,-1&E,this.pos),Rc(this.buf,Math.floor(E*Sm),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),Rc(this.buf,-1&E,this.pos),Rc(this.buf,Math.floor(E*Sm),this.pos+4),this.pos+=8},writeVarint:function(E){(E=+E||0)>268435455||E<0?function(z,Z){var he,Ie;if(z>=0?(he=z%4294967296|0,Ie=z/4294967296|0):(Ie=~(-z/4294967296),4294967295^(he=~(-z%4294967296))?he=he+1|0:(he=0,Ie=Ie+1|0)),z>=18446744073709552e3||z<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Ue,We,it){it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos]=127&Ue}(he,0,Z),function(Ue,We){var it=(7&Ue)<<4;We.buf[We.pos++]|=it|((Ue>>>=3)?128:0),Ue&&(We.buf[We.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(We.buf[We.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(We.buf[We.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(We.buf[We.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(We.buf[We.pos++]=127&Ue)))))}(Ie,Z)}(E,this):(this.realloc(4),this.buf[this.pos++]=127&E|(E>127?128:0),E<=127||(this.buf[this.pos++]=127&(E>>>=7)|(E>127?128:0),E<=127||(this.buf[this.pos++]=127&(E>>>=7)|(E>127?128:0),E<=127||(this.buf[this.pos++]=E>>>7&127))))},writeSVarint:function(E){this.writeVarint(E<0?2*-E-1:2*E)},writeBoolean:function(E){this.writeVarint(!!E)},writeString:function(E){E=String(E),this.realloc(4*E.length),this.pos++;var z=this.pos;this.pos=function(he,Ie,Ue){for(var We,it,ft=0;ft<Ie.length;ft++){if((We=Ie.charCodeAt(ft))>55295&&We<57344){if(!it){We>56319||ft+1===Ie.length?(he[Ue++]=239,he[Ue++]=191,he[Ue++]=189):it=We;continue}if(We<56320){he[Ue++]=239,he[Ue++]=191,he[Ue++]=189,it=We;continue}We=it-55296<<10|We-56320|65536,it=null}else it&&(he[Ue++]=239,he[Ue++]=191,he[Ue++]=189,it=null);We<128?he[Ue++]=We:(We<2048?he[Ue++]=We>>6|192:(We<65536?he[Ue++]=We>>12|224:(he[Ue++]=We>>18|240,he[Ue++]=We>>12&63|128),he[Ue++]=We>>6&63|128),he[Ue++]=63&We|128)}return Ue}(this.buf,E,this.pos);var Z=this.pos-z;Z>=128&&km(z,Z,this),this.pos=z-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(E){this.realloc(4),Am(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),Am(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var z=E.length;this.writeVarint(z),this.realloc(z);for(var Z=0;Z<z;Z++)this.buf[this.pos++]=E[Z]},writeRawMessage:function(E,z){this.pos++;var Z=this.pos;E(z,this);var he=this.pos-Z;he>=128&&km(Z,he,this),this.pos=Z-1,this.writeVarint(he),this.pos+=he},writeMessage:function(E,z,Z){this.writeTag(E,Ri.Bytes),this.writeRawMessage(z,Z)},writePackedVarint:function(E,z){z.length&&this.writeMessage(E,tx,z)},writePackedSVarint:function(E,z){z.length&&this.writeMessage(E,nx,z)},writePackedBoolean:function(E,z){z.length&&this.writeMessage(E,ax,z)},writePackedFloat:function(E,z){z.length&&this.writeMessage(E,rx,z)},writePackedDouble:function(E,z){z.length&&this.writeMessage(E,ix,z)},writePackedFixed32:function(E,z){z.length&&this.writeMessage(E,ox,z)},writePackedSFixed32:function(E,z){z.length&&this.writeMessage(E,sx,z)},writePackedFixed64:function(E,z){z.length&&this.writeMessage(E,lx,z)},writePackedSFixed64:function(E,z){z.length&&this.writeMessage(E,ux,z)},writeBytesField:function(E,z){this.writeTag(E,Ri.Bytes),this.writeBytes(z)},writeFixed32Field:function(E,z){this.writeTag(E,Ri.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(E,z){this.writeTag(E,Ri.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(E,z){this.writeTag(E,Ri.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(E,z){this.writeTag(E,Ri.Fixed64),this.writeSFixed64(z)},writeVarintField:function(E,z){this.writeTag(E,Ri.Varint),this.writeVarint(z)},writeSVarintField:function(E,z){this.writeTag(E,Ri.Varint),this.writeSVarint(z)},writeStringField:function(E,z){this.writeTag(E,Ri.Bytes),this.writeString(z)},writeFloatField:function(E,z){this.writeTag(E,Ri.Fixed32),this.writeFloat(z)},writeDoubleField:function(E,z){this.writeTag(E,Ri.Fixed64),this.writeDouble(z)},writeBooleanField:function(E,z){this.writeVarintField(E,!!z)}};var Sd=3;function cx(E,z,Z){E===1&&Z.readMessage(fx,z)}function fx(E,z,Z){if(E===3){var he=Z.readMessage(hx,{}),Ie=he.id,Ue=he.bitmap,We=he.width,it=he.height,ft=he.left,At=he.top,St=he.advance;z.push({id:Ie,bitmap:new Zu({width:We+2*Sd,height:it+2*Sd},Ue),metrics:{width:We,height:it,left:ft,top:At,advance:St}})}}function hx(E,z,Z){E===1?z.id=Z.readVarint():E===2?z.bitmap=Z.readBytes():E===3?z.width=Z.readVarint():E===4?z.height=Z.readVarint():E===5?z.left=Z.readSVarint():E===6?z.top=Z.readSVarint():E===7&&(z.advance=Z.readVarint())}var Cm=Sd;function Pm(E){for(var z=0,Z=0,he=0,Ie=E;he<Ie.length;he+=1){var Ue=Ie[he];z+=Ue.w*Ue.h,Z=Math.max(Z,Ue.w)}E.sort(function(un,En){return En.h-un.h});for(var We=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),Z),h:1/0}],it=0,ft=0,At=0,St=E;At<St.length;At+=1)for(var Ft=St[At],Wt=We.length-1;Wt>=0;Wt--){var jt=We[Wt];if(!(Ft.w>jt.w||Ft.h>jt.h)){if(Ft.x=jt.x,Ft.y=jt.y,ft=Math.max(ft,Ft.y+Ft.h),it=Math.max(it,Ft.x+Ft.w),Ft.w===jt.w&&Ft.h===jt.h){var on=We.pop();Wt<We.length&&(We[Wt]=on)}else Ft.h===jt.h?(jt.x+=Ft.w,jt.w-=Ft.w):Ft.w===jt.w?(jt.y+=Ft.h,jt.h-=Ft.h):(We.push({x:jt.x+Ft.w,y:jt.y,w:jt.w-Ft.w,h:Ft.h}),jt.y+=Ft.h,jt.h-=Ft.h);break}}return{w:it,h:ft,fill:z/(it*ft)||0}}var Xo=1,np=function(E,z){var Z=z.pixelRatio,he=z.version,Ie=z.stretchX,Ue=z.stretchY,We=z.content;this.paddedRect=E,this.pixelRatio=Z,this.stretchX=Ie,this.stretchY=Ue,this.content=We,this.version=he},Qf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Qf.tl.get=function(){return[this.paddedRect.x+Xo,this.paddedRect.y+Xo]},Qf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Xo,this.paddedRect.y+this.paddedRect.h-Xo]},Qf.tlbr.get=function(){return this.tl.concat(this.br)},Qf.displaySize.get=function(){return[(this.paddedRect.w-2*Xo)/this.pixelRatio,(this.paddedRect.h-2*Xo)/this.pixelRatio]},Object.defineProperties(np.prototype,Qf);var eh=function(E,z){var Z={},he={};this.haveRenderCallbacks=[];var Ie=[];this.addImages(E,Z,Ie),this.addImages(z,he,Ie);var Ue=Pm(Ie),We=Ue.w,it=Ue.h,ft=new So({width:We||1,height:it||1});for(var At in E){var St=E[At],Ft=Z[At].paddedRect;So.copy(St.data,ft,{x:0,y:0},{x:Ft.x+Xo,y:Ft.y+Xo},St.data)}for(var Wt in z){var jt=z[Wt],on=he[Wt].paddedRect,un=on.x+Xo,En=on.y+Xo,Sn=jt.data.width,Dn=jt.data.height;So.copy(jt.data,ft,{x:0,y:0},{x:un,y:En},jt.data),So.copy(jt.data,ft,{x:0,y:Dn-1},{x:un,y:En-1},{width:Sn,height:1}),So.copy(jt.data,ft,{x:0,y:0},{x:un,y:En+Dn},{width:Sn,height:1}),So.copy(jt.data,ft,{x:Sn-1,y:0},{x:un-1,y:En},{width:1,height:Dn}),So.copy(jt.data,ft,{x:0,y:0},{x:un+Sn,y:En},{width:1,height:Dn})}this.image=ft,this.iconPositions=Z,this.patternPositions=he};eh.prototype.addImages=function(E,z,Z){for(var he in E){var Ie=E[he],Ue={x:0,y:0,w:Ie.data.width+2*Xo,h:Ie.data.height+2*Xo};Z.push(Ue),z[he]=new np(Ue,Ie),Ie.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},eh.prototype.patchUpdatedImages=function(E,z){for(var Z in E.dispatchRenderCallbacks(this.haveRenderCallbacks),E.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],E.getImage(Z),z),this.patchUpdatedImage(this.patternPositions[Z],E.getImage(Z),z)},eh.prototype.patchUpdatedImage=function(E,z,Z){if(E&&z&&E.version!==z.version){E.version=z.version;var he=E.tl,Ie=he[0],Ue=he[1];Z.update(z.data,void 0,{x:Ie,y:Ue})}},Sr("ImagePosition",np),Sr("ImageAtlas",eh);var gs={horizontal:1,vertical:2,horizontalOnly:3},th=-17,Ic=function(){this.scale=1,this.fontStack="",this.imageName=null};Ic.forText=function(E,z){var Z=new Ic;return Z.scale=E||1,Z.fontStack=z,Z},Ic.forImage=function(E){var z=new Ic;return z.imageName=E,z};var to=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function rp(E,z,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un){var En,Sn=to.fromFeature(E,Ie);Ft===gs.vertical&&Sn.verticalizePunctuation();var Dn=Ni.processBidirectionalText,Fn=Ni.processStyledBidirectionalText;if(Dn&&Sn.sections.length===1){En=[];for(var Wn=0,Kn=Dn(Sn.toString(),Ed(Sn,At,Ue,z,he,jt,on));Wn<Kn.length;Wn+=1){var nr=Kn[Wn],xr=new to;xr.text=nr,xr.sections=Sn.sections;for(var pr=0;pr<nr.length;pr++)xr.sectionIndex.push(0);En.push(xr)}}else if(Fn){En=[];for(var wr=0,kr=Fn(Sn.text,Sn.sectionIndex,Ed(Sn,At,Ue,z,he,jt,on));wr<kr.length;wr+=1){var Vr=kr[wr],Rr=new to;Rr.text=Vr[0],Rr.sectionIndex=Vr[1],Rr.sections=Sn.sections,En.push(Rr)}}else En=function(Lr,Jr){for(var Hr=[],Li=Lr.text,Br=0,_i=0,Ii=Jr;_i<Ii.length;_i+=1){var Di=Ii[_i];Hr.push(Lr.substring(Br,Di)),Br=Di}return Br<Li.length&&Hr.push(Lr.substring(Br,Li.length)),Hr}(Sn,Ed(Sn,At,Ue,z,he,jt,on));var Ur=[],zr={positionedLines:Ur,text:Sn.toString(),top:St[1],bottom:St[1],left:St[0],right:St[0],writingMode:Ft,iconsInText:!1,verticalizable:!1};return function(Lr,Jr,Hr,Li,Br,_i,Ii,Di,zi,Ci,wa,Gi){for(var La=0,qa=th,Fa=0,ho=0,Na=Di==="right"?1:Di==="left"?0:.5,Aa=0,Ba=0,Ca=Br;Ba<Ca.length;Ba+=1){var Sa=Ca[Ba];Sa.trim();var Gr=Sa.getMaxScale(),ri=(Gr-1)*za,ta={positionedGlyphs:[],lineOffset:0};Lr.positionedLines[Aa]=ta;var Si=ta.positionedGlyphs,Yi=0;if(Sa.length()){for(var ji=0;ji<Sa.length();ji++){var ci=Sa.getSection(ji),na=Sa.getSectionIndex(ji),po=Sa.getCharCode(ji),Zo=0,no=null,xl=null,au=null,Pa=za,_l=!(zi===gs.horizontal||!wa&&!Zs(po)||wa&&(ip[po]||ya(po)));if(ci.imageName){var el=Li[ci.imageName];if(!el)continue;au=ci.imageName,Lr.iconsInText=Lr.iconsInText||!0,xl=el.paddedRect;var tl=el.displaySize;ci.scale=ci.scale*za/Gi,no={width:tl[0],height:tl[1],left:Xo,top:-Cm,advance:_l?tl[1]:tl[0]},Zo=ri+(za-tl[1]*ci.scale),Pa=no.advance;var Qu=_l?tl[0]*ci.scale-za*Gr:tl[1]*ci.scale-za*Gr;Qu>0&&Qu>Yi&&(Yi=Qu)}else{var pp=Hr[ci.fontStack],ec=pp&&pp[po];if(ec&&ec.rect)xl=ec.rect,no=ec.metrics;else{var dp=Jr[ci.fontStack],ah=dp&&dp[po];if(!ah)continue;no=ah.metrics}Zo=(Gr-ci.scale)*za}_l?(Lr.verticalizable=!0,Si.push({glyph:po,imageName:au,x:La,y:qa+Zo,vertical:_l,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:na,metrics:no,rect:xl}),La+=Pa*ci.scale+Ci):(Si.push({glyph:po,imageName:au,x:La,y:qa+Zo,vertical:_l,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:na,metrics:no,rect:xl}),La+=no.advance*ci.scale+Ci)}if(Si.length!==0){var Fd=La-Ci;Fa=Math.max(Fd,Fa),dx(Si,0,Si.length-1,Na,Yi)}La=0;var mp=_i*Gr+Yi;ta.lineOffset=Math.max(Yi,ri),qa+=mp,ho=Math.max(mp,ho),++Aa}else qa+=_i,++Aa}var Hc=qa-th,gp=kd(Ii),vp=gp.horizontalAlign,oh=gp.verticalAlign;(function(Nd,sh,tc,Gc,yp,xp,Wc,_p,bp){var lh=(sh-tc)*yp,uh=0;uh=xp!==Wc?-_p*Gc-th:(-Gc*bp+.5)*Wc;for(var nc=0,ch=Nd;nc<ch.length;nc+=1)for(var rc=0,fh=ch[nc].positionedGlyphs;rc<fh.length;rc+=1){var hh=fh[rc];hh.x+=lh,hh.y+=uh}})(Lr.positionedLines,Na,vp,oh,Fa,ho,_i,Hc,Br.length),Lr.top+=-oh*Hc,Lr.bottom=Lr.top+Hc,Lr.left+=-vp*Fa,Lr.right=Lr.left+Fa}(zr,z,Z,he,En,We,it,ft,Ft,At,Wt,un),!function(Lr){for(var Jr=0,Hr=Lr;Jr<Hr.length;Jr+=1)if(Hr[Jr].positionedGlyphs.length!==0)return!1;return!0}(Ur)&&zr}to.fromFeature=function(E,z){for(var Z=new to,he=0;he<E.sections.length;he++){var Ie=E.sections[he];Ie.image?Z.addImageSection(Ie):Z.addTextSection(Ie,z)}return Z},to.prototype.length=function(){return this.text.length},to.prototype.getSection=function(E){return this.sections[this.sectionIndex[E]]},to.prototype.getSectionIndex=function(E){return this.sectionIndex[E]},to.prototype.getCharCode=function(E){return this.text.charCodeAt(E)},to.prototype.verticalizePunctuation=function(){this.text=function(E){for(var z="",Z=0;Z<E.length;Z++){var he=E.charCodeAt(Z+1)||null,Ie=E.charCodeAt(Z-1)||null;he&&pl(he)&&!$f[E[Z+1]]||Ie&&pl(Ie)&&!$f[E[Z-1]]||!$f[E[Z]]?z+=E[Z]:z+=$f[E[Z]]}return z}(this.text)},to.prototype.trim=function(){for(var E=0,z=0;z<this.text.length&&ip[this.text.charCodeAt(z)];z++)E++;for(var Z=this.text.length,he=this.text.length-1;he>=0&&he>=E&&ip[this.text.charCodeAt(he)];he--)Z--;this.text=this.text.substring(E,Z),this.sectionIndex=this.sectionIndex.slice(E,Z)},to.prototype.substring=function(E,z){var Z=new to;return Z.text=this.text.substring(E,z),Z.sectionIndex=this.sectionIndex.slice(E,z),Z.sections=this.sections,Z},to.prototype.toString=function(){return this.text},to.prototype.getMaxScale=function(){var E=this;return this.sectionIndex.reduce(function(z,Z){return Math.max(z,E.sections[Z].scale)},0)},to.prototype.addTextSection=function(E,z){this.text+=E.text,this.sections.push(Ic.forText(E.scale,E.fontStack||z));for(var Z=this.sections.length-1,he=0;he<E.text.length;++he)this.sectionIndex.push(Z)},to.prototype.addImageSection=function(E){var z=E.image?E.image.name:"";if(z.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Ic.forImage(z)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},to.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yo={};function Rm(E,z,Z,he,Ie,Ue){if(z.imageName){var We=he[z.imageName];return We?We.displaySize[0]*z.scale*za/Ue+Ie:0}var it=Z[z.fontStack],ft=it&&it[E];return ft?ft.metrics.advance*z.scale+Ie:0}function Im(E,z,Z,he){var Ie=Math.pow(E-z,2);return he?E<z?Ie/2:2*Ie:Ie+Math.abs(Z)*Z}function px(E,z,Z){var he=0;return E===10&&(he-=1e4),Z&&(he+=150),E!==40&&E!==65288||(he+=50),z!==41&&z!==65289||(he+=50),he}function Om(E,z,Z,he,Ie,Ue){for(var We=null,it=Im(z,Z,Ie,Ue),ft=0,At=he;ft<At.length;ft+=1){var St=At[ft],Ft=Im(z-St.x,Z,Ie,Ue)+St.badness;Ft<=it&&(We=St,it=Ft)}return{index:E,x:z,priorBreak:We,badness:it}}function Dm(E){return E?Dm(E.priorBreak).concat(E.index):[]}function Ed(E,z,Z,he,Ie,Ue,We){if(Ue!=="point")return[];if(!E)return[];for(var it=[],ft=function(En,Sn,Dn,Fn,Wn,Kn){for(var nr=0,xr=0;xr<En.length();xr++){var pr=En.getSection(xr);nr+=Rm(En.getCharCode(xr),pr,Fn,Wn,Sn,Kn)}return nr/Math.max(1,Math.ceil(nr/Dn))}(E,z,Z,he,Ie,We),At=E.text.indexOf("")>=0,St=0,Ft=0;Ft<E.length();Ft++){var Wt=E.getSection(Ft),jt=E.getCharCode(Ft);if(ip[jt]||(St+=Rm(jt,Wt,he,Ie,z,We)),Ft<E.length()-1){var on=!((un=jt)<11904||!(Tr["Bopomofo Extended"](un)||Tr.Bopomofo(un)||Tr["CJK Compatibility Forms"](un)||Tr["CJK Compatibility Ideographs"](un)||Tr["CJK Compatibility"](un)||Tr["CJK Radicals Supplement"](un)||Tr["CJK Strokes"](un)||Tr["CJK Symbols and Punctuation"](un)||Tr["CJK Unified Ideographs Extension A"](un)||Tr["CJK Unified Ideographs"](un)||Tr["Enclosed CJK Letters and Months"](un)||Tr["Halfwidth and Fullwidth Forms"](un)||Tr.Hiragana(un)||Tr["Ideographic Description Characters"](un)||Tr["Kangxi Radicals"](un)||Tr["Katakana Phonetic Extensions"](un)||Tr.Katakana(un)||Tr["Vertical Forms"](un)||Tr["Yi Radicals"](un)||Tr["Yi Syllables"](un)));(Yo[jt]||on||Wt.imageName)&&it.push(Om(Ft+1,St,ft,it,px(jt,E.getCharCode(Ft+1),on&&At),!1))}}var un;return Dm(Om(E.length(),St,ft,it,0,!0))}function kd(E){var z=.5,Z=.5;switch(E){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(E){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:z,verticalAlign:Z}}function dx(E,z,Z,he,Ie){if(he||Ie)for(var Ue=E[Z],We=Ue.metrics.advance*Ue.scale,it=(E[Z].x+We)*he,ft=z;ft<=Z;ft++)E[ft].x-=it,E[ft].y+=Ie}function zm(E,z,Z,he,Ie,Ue){var We,it=E.image;if(it.content){var ft=it.content,At=it.pixelRatio||1;We=[ft[0]/At,ft[1]/At,it.displaySize[0]-ft[2]/At,it.displaySize[1]-ft[3]/At]}var St,Ft,Wt,jt,on=z.left*Ue,un=z.right*Ue;Z==="width"||Z==="both"?(jt=Ie[0]+on-he[3],Ft=Ie[0]+un+he[1]):Ft=(jt=Ie[0]+(on+un-it.displaySize[0])/2)+it.displaySize[0];var En=z.top*Ue,Sn=z.bottom*Ue;return Z==="height"||Z==="both"?(St=Ie[1]+En-he[0],Wt=Ie[1]+Sn+he[2]):Wt=(St=Ie[1]+(En+Sn-it.displaySize[1])/2)+it.displaySize[1],{image:it,top:St,right:Ft,bottom:Wt,left:jt,collisionPadding:We}}Yo[10]=!0,Yo[32]=!0,Yo[38]=!0,Yo[40]=!0,Yo[41]=!0,Yo[43]=!0,Yo[45]=!0,Yo[47]=!0,Yo[173]=!0,Yo[183]=!0,Yo[8203]=!0,Yo[8208]=!0,Yo[8211]=!0,Yo[8231]=!0;var Oc=function(E){function z(Z,he,Ie,Ue){E.call(this,Z,he),this.angle=Ie,Ue!==void 0&&(this.segment=Ue)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(t);Sr("Anchor",Oc);var yl=128;function Ld(E,z){var Z=z.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new ui(E+1))};if(Z.kind==="source")return{kind:"source"};for(var he=Z.zoomStops,Ie=Z.interpolationType,Ue=0;Ue<he.length&&he[Ue]<=E;)Ue++;for(var We=Ue=Math.max(0,Ue-1);We<he.length&&he[We]<E+1;)We++;We=Math.min(he.length-1,We);var it=he[Ue],ft=he[We];return Z.kind==="composite"?{kind:"composite",minZoom:it,maxZoom:ft,interpolationType:Ie}:{kind:"camera",minZoom:it,maxZoom:ft,minSize:Z.evaluate(new ui(it)),maxSize:Z.evaluate(new ui(ft)),interpolationType:Ie}}function Fm(E,z,Z){var he=z.uSize,Ie=z.uSizeT,Ue=Z.lowerSize,We=Z.upperSize;return E.kind==="source"?Ue/yl:E.kind==="composite"?$n(Ue/yl,We/yl,Ie):he}function Nm(E,z){var Z=0,he=0;if(E.kind==="constant")he=E.layoutSize;else if(E.kind!=="source"){var Ie=E.interpolationType,Ue=E.minZoom,We=E.maxZoom,it=Ie?s(Wi.interpolationFactor(Ie,z,Ue,We),0,1):0;E.kind==="camera"?he=$n(E.minSize,E.maxSize,it):Z=it}return{uSizeT:Z,uSize:he}}var mx=Object.freeze({__proto__:null,getSizeData:Ld,evaluateSizeForFeature:Fm,evaluateSizeForZoom:Nm,SIZE_PACK_FACTOR:yl});function Bm(E,z,Z,he,Ie){if(z.segment===void 0)return!0;for(var Ue=z,We=z.segment+1,it=0;it>-Z/2;){if(--We<0)return!1;it-=E[We].dist(Ue),Ue=E[We]}it+=E[We].dist(E[We+1]),We++;for(var ft=[],At=0;it<Z/2;){var St=E[We-1],Ft=E[We],Wt=E[We+1];if(!Wt)return!1;var jt=St.angleTo(Ft)-Ft.angleTo(Wt);for(jt=Math.abs((jt+3*Math.PI)%(2*Math.PI)-Math.PI),ft.push({distance:it,angleDelta:jt}),At+=jt;it-ft[0].distance>he;)At-=ft.shift().angleDelta;if(At>Ie)return!1;We++,it+=Ft.dist(Wt)}return!0}function Um(E){for(var z=0,Z=0;Z<E.length-1;Z++)z+=E[Z].dist(E[Z+1]);return z}function jm(E,z,Z){return E?.6*z*Z:0}function Vm(E,z){return Math.max(E?E.right-E.left:0,z?z.right-z.left:0)}function gx(E,z,Z,he,Ie,Ue){for(var We=jm(Z,Ie,Ue),it=Vm(Z,he)*Ue,ft=0,At=Um(E)/2,St=0;St<E.length-1;St++){var Ft=E[St],Wt=E[St+1],jt=Ft.dist(Wt);if(ft+jt>At){var on=(At-ft)/jt,un=$n(Ft.x,Wt.x,on),En=$n(Ft.y,Wt.y,on),Sn=new Oc(un,En,Wt.angleTo(Ft),St);return Sn._round(),!We||Bm(E,Sn,it,We,z)?Sn:void 0}ft+=jt}}function vx(E,z,Z,he,Ie,Ue,We,it,ft){var At=jm(he,Ue,We),St=Vm(he,Ie),Ft=St*We,Wt=E[0].x===0||E[0].x===ft||E[0].y===0||E[0].y===ft;return z-Ft<z/4&&(z=Ft+z/4),Hm(E,Wt?z/2*it%z:(St/2+2*Ue)*We*it%z,z,At,Z,Ft,Wt,!1,ft)}function Hm(E,z,Z,he,Ie,Ue,We,it,ft){for(var At=Ue/2,St=Um(E),Ft=0,Wt=z-Z,jt=[],on=0;on<E.length-1;on++){for(var un=E[on],En=E[on+1],Sn=un.dist(En),Dn=En.angleTo(un);Wt+Z<Ft+Sn;){var Fn=((Wt+=Z)-Ft)/Sn,Wn=$n(un.x,En.x,Fn),Kn=$n(un.y,En.y,Fn);if(Wn>=0&&Wn<ft&&Kn>=0&&Kn<ft&&Wt-At>=0&&Wt+At<=St){var nr=new Oc(Wn,Kn,Dn,on);nr._round(),he&&!Bm(E,nr,Ue,he,Ie)||jt.push(nr)}}Ft+=Sn}return it||jt.length||We||(jt=Hm(E,Ft/2,Z,he,Ie,Ue,We,!0,ft)),jt}function Gm(E,z,Z,he,Ie){for(var Ue=[],We=0;We<E.length;We++)for(var it=E[We],ft=void 0,At=0;At<it.length-1;At++){var St=it[At],Ft=it[At+1];St.x<z&&Ft.x<z||(St.x<z?St=new t(z,St.y+(Ft.y-St.y)*((z-St.x)/(Ft.x-St.x)))._round():Ft.x<z&&(Ft=new t(z,St.y+(Ft.y-St.y)*((z-St.x)/(Ft.x-St.x)))._round()),St.y<Z&&Ft.y<Z||(St.y<Z?St=new t(St.x+(Ft.x-St.x)*((Z-St.y)/(Ft.y-St.y)),Z)._round():Ft.y<Z&&(Ft=new t(St.x+(Ft.x-St.x)*((Z-St.y)/(Ft.y-St.y)),Z)._round()),St.x>=he&&Ft.x>=he||(St.x>=he?St=new t(he,St.y+(Ft.y-St.y)*((he-St.x)/(Ft.x-St.x)))._round():Ft.x>=he&&(Ft=new t(he,St.y+(Ft.y-St.y)*((he-St.x)/(Ft.x-St.x)))._round()),St.y>=Ie&&Ft.y>=Ie||(St.y>=Ie?St=new t(St.x+(Ft.x-St.x)*((Ie-St.y)/(Ft.y-St.y)),Ie)._round():Ft.y>=Ie&&(Ft=new t(St.x+(Ft.x-St.x)*((Ie-St.y)/(Ft.y-St.y)),Ie)._round()),ft&&St.equals(ft[ft.length-1])||(ft=[St],Ue.push(ft)),ft.push(Ft)))))}return Ue}var Dc=Xo;function Wm(E,z,Z,he){var Ie=[],Ue=E.image,We=Ue.pixelRatio,it=Ue.paddedRect.w-2*Dc,ft=Ue.paddedRect.h-2*Dc,At=E.right-E.left,St=E.bottom-E.top,Ft=Ue.stretchX||[[0,it]],Wt=Ue.stretchY||[[0,ft]],jt=function(_i,Ii){return _i+Ii[1]-Ii[0]},on=Ft.reduce(jt,0),un=Wt.reduce(jt,0),En=it-on,Sn=ft-un,Dn=0,Fn=on,Wn=0,Kn=un,nr=0,xr=En,pr=0,wr=Sn;if(Ue.content&&he){var kr=Ue.content;Dn=ap(Ft,0,kr[0]),Wn=ap(Wt,0,kr[1]),Fn=ap(Ft,kr[0],kr[2]),Kn=ap(Wt,kr[1],kr[3]),nr=kr[0]-Dn,pr=kr[1]-Wn,xr=kr[2]-kr[0]-Fn,wr=kr[3]-kr[1]-Kn}var Vr=function(_i,Ii,Di,zi){var Ci=op(_i.stretch-Dn,Fn,At,E.left),wa=sp(_i.fixed-nr,xr,_i.stretch,on),Gi=op(Ii.stretch-Wn,Kn,St,E.top),La=sp(Ii.fixed-pr,wr,Ii.stretch,un),qa=op(Di.stretch-Dn,Fn,At,E.left),Fa=sp(Di.fixed-nr,xr,Di.stretch,on),ho=op(zi.stretch-Wn,Kn,St,E.top),Na=sp(zi.fixed-pr,wr,zi.stretch,un),Aa=new t(Ci,Gi),Ba=new t(qa,Gi),Ca=new t(qa,ho),Sa=new t(Ci,ho),Gr=new t(wa/We,La/We),ri=new t(Fa/We,Na/We),ta=z*Math.PI/180;if(ta){var Si=Math.sin(ta),Yi=Math.cos(ta),ji=[Yi,-Si,Si,Yi];Aa._matMult(ji),Ba._matMult(ji),Sa._matMult(ji),Ca._matMult(ji)}var ci=_i.stretch+_i.fixed,na=Di.stretch+Di.fixed,po=Ii.stretch+Ii.fixed,Zo=zi.stretch+zi.fixed;return{tl:Aa,tr:Ba,bl:Sa,br:Ca,tex:{x:Ue.paddedRect.x+Dc+ci,y:Ue.paddedRect.y+Dc+po,w:na-ci,h:Zo-po},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ri,minFontScaleX:xr/We/At,minFontScaleY:wr/We/St,isSDF:Z}};if(he&&(Ue.stretchX||Ue.stretchY))for(var Rr=qm(Ft,En,on),Ur=qm(Wt,Sn,un),zr=0;zr<Rr.length-1;zr++)for(var Lr=Rr[zr],Jr=Rr[zr+1],Hr=0;Hr<Ur.length-1;Hr++){var Li=Ur[Hr],Br=Ur[Hr+1];Ie.push(Vr(Lr,Li,Jr,Br))}else Ie.push(Vr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:it+1},{fixed:0,stretch:ft+1}));return Ie}function ap(E,z,Z){for(var he=0,Ie=0,Ue=E;Ie<Ue.length;Ie+=1){var We=Ue[Ie];he+=Math.max(z,Math.min(Z,We[1]))-Math.max(z,Math.min(Z,We[0]))}return he}function qm(E,z,Z){for(var he=[{fixed:-Dc,stretch:0}],Ie=0,Ue=E;Ie<Ue.length;Ie+=1){var We=Ue[Ie],it=We[0],ft=We[1],At=he[he.length-1];he.push({fixed:it-At.stretch,stretch:At.stretch}),he.push({fixed:it-At.stretch,stretch:At.stretch+(ft-it)})}return he.push({fixed:z+Dc,stretch:Z}),he}function op(E,z,Z,he){return E/z*Z+he}function sp(E,z,Z,he){return E-z*Z/he}var lp=function(E,z,Z,he,Ie,Ue,We,it,ft,At){if(this.boxStartIndex=E.length,ft){var St=Ue.top,Ft=Ue.bottom,Wt=Ue.collisionPadding;Wt&&(St-=Wt[1],Ft+=Wt[3]);var jt=Ft-St;jt>0&&(jt=Math.max(10,jt),this.circleDiameter=jt)}else{var on=Ue.top*We-it,un=Ue.bottom*We+it,En=Ue.left*We-it,Sn=Ue.right*We+it,Dn=Ue.collisionPadding;if(Dn&&(En-=Dn[0]*We,on-=Dn[1]*We,Sn+=Dn[2]*We,un+=Dn[3]*We),At){var Fn=new t(En,on),Wn=new t(Sn,on),Kn=new t(En,un),nr=new t(Sn,un),xr=At*Math.PI/180;Fn._rotate(xr),Wn._rotate(xr),Kn._rotate(xr),nr._rotate(xr),En=Math.min(Fn.x,Wn.x,Kn.x,nr.x),Sn=Math.max(Fn.x,Wn.x,Kn.x,nr.x),on=Math.min(Fn.y,Wn.y,Kn.y,nr.y),un=Math.max(Fn.y,Wn.y,Kn.y,nr.y)}E.emplaceBack(z.x,z.y,En,on,Sn,un,Z,he,Ie)}this.boxEndIndex=E.length},zc=function(E,z){if(E===void 0&&(E=[]),z===void 0&&(z=yx),this.data=E,this.length=this.data.length,this.compare=z,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function yx(E,z){return E<z?-1:E>z?1:0}function xx(E,z,Z){z===void 0&&(z=1),Z===void 0&&(Z=!1);for(var he=1/0,Ie=1/0,Ue=-1/0,We=-1/0,it=E[0],ft=0;ft<it.length;ft++){var At=it[ft];(!ft||At.x<he)&&(he=At.x),(!ft||At.y<Ie)&&(Ie=At.y),(!ft||At.x>Ue)&&(Ue=At.x),(!ft||At.y>We)&&(We=At.y)}var St=Ue-he,Ft=We-Ie,Wt=Math.min(St,Ft),jt=Wt/2,on=new zc([],_x);if(Wt===0)return new t(he,Ie);for(var un=he;un<Ue;un+=Wt)for(var En=Ie;En<We;En+=Wt)on.push(new Fc(un+jt,En+jt,jt,E));for(var Sn=function(Wn){for(var Kn=0,nr=0,xr=0,pr=Wn[0],wr=0,kr=pr.length,Vr=kr-1;wr<kr;Vr=wr++){var Rr=pr[wr],Ur=pr[Vr],zr=Rr.x*Ur.y-Ur.x*Rr.y;nr+=(Rr.x+Ur.x)*zr,xr+=(Rr.y+Ur.y)*zr,Kn+=3*zr}return new Fc(nr/Kn,xr/Kn,0,Wn)}(E),Dn=on.length;on.length;){var Fn=on.pop();(Fn.d>Sn.d||!Sn.d)&&(Sn=Fn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Fn.d)/1e4,Dn)),Fn.max-Sn.d<=z||(jt=Fn.h/2,on.push(new Fc(Fn.p.x-jt,Fn.p.y-jt,jt,E)),on.push(new Fc(Fn.p.x+jt,Fn.p.y-jt,jt,E)),on.push(new Fc(Fn.p.x-jt,Fn.p.y+jt,jt,E)),on.push(new Fc(Fn.p.x+jt,Fn.p.y+jt,jt,E)),Dn+=4)}return Z&&(console.log("num probes: "+Dn),console.log("best distance: "+Sn.d)),Sn.p}function _x(E,z){return z.max-E.max}function Fc(E,z,Z,he){this.p=new t(E,z),this.h=Z,this.d=function(Ie,Ue){for(var We=!1,it=1/0,ft=0;ft<Ue.length;ft++)for(var At=Ue[ft],St=0,Ft=At.length,Wt=Ft-1;St<Ft;Wt=St++){var jt=At[St],on=At[Wt];jt.y>Ie.y!=on.y>Ie.y&&Ie.x<(on.x-jt.x)*(Ie.y-jt.y)/(on.y-jt.y)+jt.x&&(We=!We),it=Math.min(it,Yu(Ie,jt,on))}return(We?1:-1)*Math.sqrt(it)}(this.p,he),this.max=this.d+this.h*Math.SQRT2}zc.prototype.push=function(E){this.data.push(E),this.length++,this._up(this.length-1)},zc.prototype.pop=function(){if(this.length!==0){var E=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),E}},zc.prototype.peek=function(){return this.data[0]},zc.prototype._up=function(E){for(var z=this.data,Z=this.compare,he=z[E];E>0;){var Ie=E-1>>1,Ue=z[Ie];if(Z(he,Ue)>=0)break;z[E]=Ue,E=Ie}z[E]=he},zc.prototype._down=function(E){for(var z=this.data,Z=this.compare,he=this.length>>1,Ie=z[E];E<he;){var Ue=1+(E<<1),We=z[Ue],it=Ue+1;if(it<this.length&&Z(z[it],We)<0&&(Ue=it,We=z[it]),Z(We,Ie)>=0)break;z[E]=We,E=Ue}z[E]=Ie};var Nc=7,Cd=Number.POSITIVE_INFINITY;function Xm(E,z){return z[1]!==Cd?function(Z,he,Ie){var Ue=0,We=0;switch(he=Math.abs(he),Ie=Math.abs(Ie),Z){case"top-right":case"top-left":case"top":We=Ie-Nc;break;case"bottom-right":case"bottom-left":case"bottom":We=-Ie+Nc}switch(Z){case"top-right":case"bottom-right":case"right":Ue=-he;break;case"top-left":case"bottom-left":case"left":Ue=he}return[Ue,We]}(E,z[0],z[1]):function(Z,he){var Ie=0,Ue=0;he<0&&(he=0);var We=he/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Ue=We-Nc;break;case"bottom-right":case"bottom-left":Ue=-We+Nc;break;case"bottom":Ue=-he+Nc;break;case"top":Ue=he-Nc}switch(Z){case"top-right":case"bottom-right":Ie=-We;break;case"top-left":case"bottom-left":Ie=We;break;case"left":Ie=he;break;case"right":Ie=-he}return[Ie,Ue]}(E,z[0])}function Pd(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var nh=255,ku=nh*yl;function Ym(E,z,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on){var un=function(Wn,Kn,nr,xr,pr,wr,kr,Vr){for(var Rr=xr.layout.get("text-rotate").evaluate(wr,{})*Math.PI/180,Ur=[],zr=0,Lr=Kn.positionedLines;zr<Lr.length;zr+=1)for(var Jr=Lr[zr],Hr=0,Li=Jr.positionedGlyphs;Hr<Li.length;Hr+=1){var Br=Li[Hr];if(Br.rect){var _i=Br.rect||{},Ii=Cm+1,Di=!0,zi=1,Ci=0,wa=(pr||Vr)&&Br.vertical,Gi=Br.metrics.advance*Br.scale/2;if(Vr&&Kn.verticalizable){var La=(Br.scale-1)*za,qa=(za-Br.metrics.width*Br.scale)/2;Ci=Jr.lineOffset/2-(Br.imageName?-qa:La)}if(Br.imageName){var Fa=kr[Br.imageName];Di=Fa.sdf,zi=Fa.pixelRatio,Ii=Xo/zi}var ho=pr?[Br.x+Gi,Br.y]:[0,0],Na=pr?[0,0]:[Br.x+Gi+nr[0],Br.y+nr[1]-Ci],Aa=[0,0];wa&&(Aa=Na,Na=[0,0]);var Ba=(Br.metrics.left-Ii)*Br.scale-Gi+Na[0],Ca=(-Br.metrics.top-Ii)*Br.scale+Na[1],Sa=Ba+_i.w*Br.scale/zi,Gr=Ca+_i.h*Br.scale/zi,ri=new t(Ba,Ca),ta=new t(Sa,Ca),Si=new t(Ba,Gr),Yi=new t(Sa,Gr);if(wa){var ji=new t(-Gi,Gi-th),ci=-Math.PI/2,na=za/2-Gi,po=Br.imageName?na:0,Zo=new t(5-th-na,-po),no=new(Function.prototype.bind.apply(t,[null].concat(Aa)));ri._rotateAround(ci,ji)._add(Zo)._add(no),ta._rotateAround(ci,ji)._add(Zo)._add(no),Si._rotateAround(ci,ji)._add(Zo)._add(no),Yi._rotateAround(ci,ji)._add(Zo)._add(no)}if(Rr){var xl=Math.sin(Rr),au=Math.cos(Rr),Pa=[au,-xl,xl,au];ri._matMult(Pa),ta._matMult(Pa),Si._matMult(Pa),Yi._matMult(Pa)}var _l=new t(0,0),el=new t(0,0);Ur.push({tl:ri,tr:ta,bl:Si,br:Yi,tex:_i,writingMode:Kn.writingMode,glyphOffset:ho,sectionIndex:Br.sectionIndex,isSDF:Di,pixelOffsetTL:_l,pixelOffsetBR:el,minFontScaleX:0,minFontScaleY:0})}}return Ur}(0,Z,it,Ie,Ue,We,he,E.allowVerticalPlacement),En=E.textSizeData,Sn=null;En.kind==="source"?(Sn=[yl*Ie.layout.get("text-size").evaluate(We,{})])[0]>ku&&S(E.layerIds[0]+': Value for "text-size" is >= '+nh+'. Reduce your "text-size".'):En.kind==="composite"&&((Sn=[yl*jt.compositeTextSizes[0].evaluate(We,{},on),yl*jt.compositeTextSizes[1].evaluate(We,{},on)])[0]>ku||Sn[1]>ku)&&S(E.layerIds[0]+': Value for "text-size" is >= '+nh+'. Reduce your "text-size".'),E.addSymbols(E.text,un,Sn,it,Ue,We,At,z,ft.lineStartIndex,ft.lineLength,Wt,on);for(var Dn=0,Fn=St;Dn<Fn.length;Dn+=1)Ft[Fn[Dn]]=E.text.placedSymbolArray.length-1;return 4*un.length}function Zm(E){for(var z in E)return E[z];return null}function bx(E,z,Z,he){var Ie=E.compareText;if(z in Ie){for(var Ue=Ie[z],We=Ue.length-1;We>=0;We--)if(he.dist(Ue[We])<Z)return!0}else Ie[z]=[];return Ie[z].push(he),!1}var wx=Cc.VectorTileFeature.types,Tx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function up(E,z,Z,he,Ie,Ue,We,it,ft,At,St,Ft,Wt){var jt=it?Math.min(ku,Math.round(it[0])):0,on=it?Math.min(ku,Math.round(it[1])):0;E.emplaceBack(z,Z,Math.round(32*he),Math.round(32*Ie),Ue,We,(jt<<1)+(ft?1:0),on,16*At,16*St,256*Ft,256*Wt)}function Rd(E,z,Z){E.emplaceBack(z.x,z.y,Z),E.emplaceBack(z.x,z.y,Z),E.emplaceBack(z.x,z.y,Z),E.emplaceBack(z.x,z.y,Z)}function Mx(E){for(var z=0,Z=E.sections;z<Z.length;z+=1)if(Ga(Z[z].text))return!0;return!1}var Bc=function(E){this.layoutVertexArray=new N,this.indexArray=new te,this.programConfigurations=E,this.segments=new bn,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new H,this.placedSymbolArray=new zt};Bc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Bc.prototype.upload=function(E,z,Z,he){this.isEmpty()||(Z&&(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Md.members),this.indexBuffer=E.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=E.createVertexBuffer(this.dynamicLayoutVertexArray,Jy.members,!0),this.opacityVertexBuffer=E.createVertexBuffer(this.opacityVertexArray,Tx,!0),this.opacityVertexBuffer.itemSize=1),(Z||he)&&this.programConfigurations.upload(E))},Bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Sr("SymbolBuffers",Bc);var rh=function(E,z,Z){this.layoutVertexArray=new E,this.layoutAttributes=z,this.indexArray=new Z,this.segments=new bn,this.collisionVertexArray=new U};rh.prototype.upload=function(E){this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=E.createVertexBuffer(this.collisionVertexArray,$y.members,!0)},rh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Sr("CollisionBuffers",rh);var xi=function(E){this.collisionBoxArray=E.collisionBoxArray,this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(We){return We.id}),this.index=E.index,this.pixelRatio=E.pixelRatio,this.sourceLayerIndex=E.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pd([]),this.placementViewportMatrix=pd([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ld(this.zoom,z["text-size"]),this.iconSizeData=Ld(this.zoom,z["icon-size"]);var Z=this.layers[0].layout,he=Z.get("symbol-sort-key"),Ie=Z.get("symbol-z-order");this.sortFeaturesByKey=Ie!=="viewport-y"&&he.constantOr(1)!==void 0;var Ue=Ie==="viewport-y"||Ie==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ue&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(We){return gs[We]})),this.stateDependentLayerIds=this.layers.filter(function(We){return We.isStateDependent()}).map(function(We){return We.id}),this.sourceID=E.sourceID};xi.prototype.createArrays=function(){this.text=new Bc(new ki(Md.members,this.layers,this.zoom,function(E){return/^text/.test(E)})),this.icon=new Bc(new ki(Md.members,this.layers,this.zoom,function(E){return/^icon/.test(E)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new sn,this.symbolInstances=new Ht},xi.prototype.calculateGlyphDependencies=function(E,z,Z,he,Ie){for(var Ue=0;Ue<E.length;Ue++)if(z[E.charCodeAt(Ue)]=!0,(Z||he)&&Ie){var We=$f[E.charAt(Ue)];We&&(z[We.charCodeAt(0)]=!0)}},xi.prototype.populate=function(E,z,Z){var he=this.layers[0],Ie=he.layout,Ue=Ie.get("text-font"),We=Ie.get("text-field"),it=Ie.get("icon-image"),ft=(We.value.kind!=="constant"||We.value.value instanceof In&&!We.value.value.isEmpty()||We.value.value.toString().length>0)&&(Ue.value.kind!=="constant"||Ue.value.value.length>0),At=it.value.kind!=="constant"||!!it.value.value||Object.keys(it.parameters).length>0,St=Ie.get("symbol-sort-key");if(this.features=[],ft||At){for(var Ft=z.iconDependencies,Wt=z.glyphDependencies,jt=z.availableImages,on=new ui(this.zoom),un=0,En=E;un<En.length;un+=1){var Sn=En[un],Dn=Sn.feature,Fn=Sn.id,Wn=Sn.index,Kn=Sn.sourceLayerIndex,nr=he._featureFilter.needGeometry,xr={type:Dn.type,id:Fn,properties:Dn.properties,geometry:nr?eo(Dn):[]};if(he._featureFilter.filter(on,xr,Z)){nr||(xr.geometry=eo(Dn));var pr=void 0;if(ft){var wr=he.getValueAndResolveTokens("text-field",xr,Z,jt),kr=In.factory(wr);Mx(kr)&&(this.hasRTLText=!0),(!this.hasRTLText||To()==="unavailable"||this.hasRTLText&&Ni.isParsed())&&(pr=ex(kr,he,xr))}var Vr=void 0;if(At){var Rr=he.getValueAndResolveTokens("icon-image",xr,Z,jt);Vr=Rr instanceof kn?Rr:kn.fromString(Rr)}if(pr||Vr){var Ur=this.sortFeaturesByKey?St.evaluate(xr,{},Z):void 0,zr={id:Fn,text:pr,icon:Vr,index:Wn,sourceLayerIndex:Kn,geometry:eo(Dn),properties:Dn.properties,type:wx[Dn.type],sortKey:Ur};if(this.features.push(zr),Vr&&(Ft[Vr.name]=!0),pr){var Lr=Ue.evaluate(xr,{},Z).join(","),Jr=Ie.get("text-rotation-alignment")==="map"&&Ie.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gs.vertical)>=0;for(var Hr=0,Li=pr.sections;Hr<Li.length;Hr+=1){var Br=Li[Hr];if(Br.image)Ft[Br.image.name]=!0;else{var _i=lo(pr.toString()),Ii=Br.fontStack||Lr,Di=Wt[Ii]=Wt[Ii]||{};this.calculateGlyphDependencies(Br.text,Di,Jr,this.allowVerticalPlacement,_i)}}}}}}Ie.get("symbol-placement")==="line"&&(this.features=function(zi){var Ci={},wa={},Gi=[],La=0;function qa(Yi){Gi.push(zi[Yi]),La++}function Fa(Yi,ji,ci){var na=wa[Yi];return delete wa[Yi],wa[ji]=na,Gi[na].geometry[0].pop(),Gi[na].geometry[0]=Gi[na].geometry[0].concat(ci[0]),na}function ho(Yi,ji,ci){var na=Ci[ji];return delete Ci[ji],Ci[Yi]=na,Gi[na].geometry[0].shift(),Gi[na].geometry[0]=ci[0].concat(Gi[na].geometry[0]),na}function Na(Yi,ji,ci){var na=ci?ji[0][ji[0].length-1]:ji[0][0];return Yi+":"+na.x+":"+na.y}for(var Aa=0;Aa<zi.length;Aa++){var Ba=zi[Aa],Ca=Ba.geometry,Sa=Ba.text?Ba.text.toString():null;if(Sa){var Gr=Na(Sa,Ca),ri=Na(Sa,Ca,!0);if(Gr in wa&&ri in Ci&&wa[Gr]!==Ci[ri]){var ta=ho(Gr,ri,Ca),Si=Fa(Gr,ri,Gi[ta].geometry);delete Ci[Gr],delete wa[ri],wa[Na(Sa,Gi[Si].geometry,!0)]=Si,Gi[ta].geometry=null}else Gr in wa?Fa(Gr,ri,Ca):ri in Ci?ho(Gr,ri,Ca):(qa(Aa),Ci[Gr]=La-1,wa[ri]=La-1)}else qa(Aa)}return Gi.filter(function(Yi){return Yi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zi,Ci){return zi.sortKey-Ci.sortKey})}},xi.prototype.update=function(E,z,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(E,z,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(E,z,this.layers,Z))},xi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},xi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},xi.prototype.upload=function(E){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(E),this.iconCollisionBox.upload(E)),this.text.upload(E,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(E,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},xi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},xi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},xi.prototype.addToLineVertexArray=function(E,z){var Z=this.lineVertexArray.length;if(E.segment!==void 0){for(var he=E.dist(z[E.segment+1]),Ie=E.dist(z[E.segment]),Ue={},We=E.segment+1;We<z.length;We++)Ue[We]={x:z[We].x,y:z[We].y,tileUnitDistanceFromAnchor:he},We<z.length-1&&(he+=z[We+1].dist(z[We]));for(var it=E.segment||0;it>=0;it--)Ue[it]={x:z[it].x,y:z[it].y,tileUnitDistanceFromAnchor:Ie},it>0&&(Ie+=z[it-1].dist(z[it]));for(var ft=0;ft<z.length;ft++){var At=Ue[ft];this.lineVertexArray.emplaceBack(At.x,At.y,At.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},xi.prototype.addSymbols=function(E,z,Z,he,Ie,Ue,We,it,ft,At,St,Ft){for(var Wt=E.indexArray,jt=E.layoutVertexArray,on=E.segments.prepareSegment(4*z.length,jt,Wt,Ue.sortKey),un=this.glyphOffsetArray.length,En=on.vertexLength,Sn=this.allowVerticalPlacement&&We===gs.vertical?Math.PI/2:0,Dn=Ue.text&&Ue.text.sections,Fn=0;Fn<z.length;Fn++){var Wn=z[Fn],Kn=Wn.tl,nr=Wn.tr,xr=Wn.bl,pr=Wn.br,wr=Wn.tex,kr=Wn.pixelOffsetTL,Vr=Wn.pixelOffsetBR,Rr=Wn.minFontScaleX,Ur=Wn.minFontScaleY,zr=Wn.glyphOffset,Lr=Wn.isSDF,Jr=Wn.sectionIndex,Hr=on.vertexLength,Li=zr[1];up(jt,it.x,it.y,Kn.x,Li+Kn.y,wr.x,wr.y,Z,Lr,kr.x,kr.y,Rr,Ur),up(jt,it.x,it.y,nr.x,Li+nr.y,wr.x+wr.w,wr.y,Z,Lr,Vr.x,kr.y,Rr,Ur),up(jt,it.x,it.y,xr.x,Li+xr.y,wr.x,wr.y+wr.h,Z,Lr,kr.x,Vr.y,Rr,Ur),up(jt,it.x,it.y,pr.x,Li+pr.y,wr.x+wr.w,wr.y+wr.h,Z,Lr,Vr.x,Vr.y,Rr,Ur),Rd(E.dynamicLayoutVertexArray,it,Sn),Wt.emplaceBack(Hr,Hr+1,Hr+2),Wt.emplaceBack(Hr+1,Hr+2,Hr+3),on.vertexLength+=4,on.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zr[0]),Fn!==z.length-1&&Jr===z[Fn+1].sectionIndex||E.programConfigurations.populatePaintArrays(jt.length,Ue,Ue.index,{},Ft,Dn&&Dn[Jr])}E.placedSymbolArray.emplaceBack(it.x,it.y,un,this.glyphOffsetArray.length-un,En,ft,At,it.segment,Z?Z[0]:0,Z?Z[1]:0,he[0],he[1],We,0,!1,0,St)},xi.prototype._addCollisionDebugVertex=function(E,z,Z,he,Ie,Ue){return z.emplaceBack(0,0),E.emplaceBack(Z.x,Z.y,he,Ie,Math.round(Ue.x),Math.round(Ue.y))},xi.prototype.addCollisionDebugVertices=function(E,z,Z,he,Ie,Ue,We){var it=Ie.segments.prepareSegment(4,Ie.layoutVertexArray,Ie.indexArray),ft=it.vertexLength,At=Ie.layoutVertexArray,St=Ie.collisionVertexArray,Ft=We.anchorX,Wt=We.anchorY;this._addCollisionDebugVertex(At,St,Ue,Ft,Wt,new t(E,z)),this._addCollisionDebugVertex(At,St,Ue,Ft,Wt,new t(Z,z)),this._addCollisionDebugVertex(At,St,Ue,Ft,Wt,new t(Z,he)),this._addCollisionDebugVertex(At,St,Ue,Ft,Wt,new t(E,he)),it.vertexLength+=4;var jt=Ie.indexArray;jt.emplaceBack(ft,ft+1),jt.emplaceBack(ft+1,ft+2),jt.emplaceBack(ft+2,ft+3),jt.emplaceBack(ft+3,ft),it.primitiveLength+=4},xi.prototype.addDebugCollisionBoxes=function(E,z,Z,he){for(var Ie=E;Ie<z;Ie++){var Ue=this.collisionBoxArray.get(Ie),We=Ue.x1,it=Ue.y1,ft=Ue.x2,At=Ue.y2;this.addCollisionDebugVertices(We,it,ft,At,he?this.textCollisionBox:this.iconCollisionBox,Ue.anchorPoint,Z)}},xi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rh(xe,Tm.members,qe),this.iconCollisionBox=new rh(xe,Tm.members,qe);for(var E=0;E<this.symbolInstances.length;E++){var z=this.symbolInstances.get(E);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},xi.prototype._deserializeCollisionBoxesForSymbol=function(E,z,Z,he,Ie,Ue,We,it,ft){for(var At={},St=z;St<Z;St++){var Ft=E.get(St);At.textBox={x1:Ft.x1,y1:Ft.y1,x2:Ft.x2,y2:Ft.y2,anchorPointX:Ft.anchorPointX,anchorPointY:Ft.anchorPointY},At.textFeatureIndex=Ft.featureIndex;break}for(var Wt=he;Wt<Ie;Wt++){var jt=E.get(Wt);At.verticalTextBox={x1:jt.x1,y1:jt.y1,x2:jt.x2,y2:jt.y2,anchorPointX:jt.anchorPointX,anchorPointY:jt.anchorPointY},At.verticalTextFeatureIndex=jt.featureIndex;break}for(var on=Ue;on<We;on++){var un=E.get(on);At.iconBox={x1:un.x1,y1:un.y1,x2:un.x2,y2:un.y2,anchorPointX:un.anchorPointX,anchorPointY:un.anchorPointY},At.iconFeatureIndex=un.featureIndex;break}for(var En=it;En<ft;En++){var Sn=E.get(En);At.verticalIconBox={x1:Sn.x1,y1:Sn.y1,x2:Sn.x2,y2:Sn.y2,anchorPointX:Sn.anchorPointX,anchorPointY:Sn.anchorPointY},At.verticalIconFeatureIndex=Sn.featureIndex;break}return At},xi.prototype.deserializeCollisionBoxes=function(E){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var Z=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(E,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},xi.prototype.hasTextData=function(){return this.text.segments.get().length>0},xi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},xi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},xi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},xi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},xi.prototype.addIndicesForPlacedSymbol=function(E,z){for(var Z=E.placedSymbolArray.get(z),he=Z.vertexStartIndex+4*Z.numGlyphs,Ie=Z.vertexStartIndex;Ie<he;Ie+=4)E.indexArray.emplaceBack(Ie,Ie+1,Ie+2),E.indexArray.emplaceBack(Ie+1,Ie+2,Ie+3)},xi.prototype.getSortedSymbolIndexes=function(E){if(this.sortedAngle===E&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var z=Math.sin(E),Z=Math.cos(E),he=[],Ie=[],Ue=[],We=0;We<this.symbolInstances.length;++We){Ue.push(We);var it=this.symbolInstances.get(We);he.push(0|Math.round(z*it.anchorX+Z*it.anchorY)),Ie.push(it.featureIndex)}return Ue.sort(function(ft,At){return he[ft]-he[At]||Ie[At]-Ie[ft]}),Ue},xi.prototype.addToSortKeyRanges=function(E,z){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===z?Z.symbolInstanceEnd=E+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:E,symbolInstanceEnd:E+1})},xi.prototype.sortFeatures=function(E){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==E&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(E),this.sortedAngle=E,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,he=this.symbolInstanceIndexes;Z<he.length;Z+=1){var Ie=he[Z],Ue=this.symbolInstances.get(Ie);this.featureSortOrder.push(Ue.featureIndex),[Ue.rightJustifiedTextSymbolIndex,Ue.centerJustifiedTextSymbolIndex,Ue.leftJustifiedTextSymbolIndex].forEach(function(We,it,ft){We>=0&&ft.indexOf(We)===it&&z.addIndicesForPlacedSymbol(z.text,We)}),Ue.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ue.verticalPlacedTextSymbolIndex),Ue.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ue.placedIconSymbolIndex),Ue.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ue.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Sr("SymbolBucket",xi,{omit:["layers","collisionBoxArray","features","compareText"]}),xi.MAX_GLYPHS=65535,xi.addDynamicAttributes=Rd;var Ax=new pa({"symbol-placement":new Pr(De.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ir(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(De.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pr(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ir(De.layout_symbol["icon-size"]),"icon-text-fit":new Pr(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ir(De.layout_symbol["icon-image"]),"icon-rotate":new Ir(De.layout_symbol["icon-rotate"]),"icon-padding":new Pr(De.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(De.layout_symbol["icon-keep-upright"]),"icon-offset":new Ir(De.layout_symbol["icon-offset"]),"icon-anchor":new Ir(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(De.layout_symbol["text-rotation-alignment"]),"text-field":new Ir(De.layout_symbol["text-field"]),"text-font":new Ir(De.layout_symbol["text-font"]),"text-size":new Ir(De.layout_symbol["text-size"]),"text-max-width":new Ir(De.layout_symbol["text-max-width"]),"text-line-height":new Pr(De.layout_symbol["text-line-height"]),"text-letter-spacing":new Ir(De.layout_symbol["text-letter-spacing"]),"text-justify":new Ir(De.layout_symbol["text-justify"]),"text-radial-offset":new Ir(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(De.layout_symbol["text-variable-anchor"]),"text-anchor":new Ir(De.layout_symbol["text-anchor"]),"text-max-angle":new Pr(De.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(De.layout_symbol["text-writing-mode"]),"text-rotate":new Ir(De.layout_symbol["text-rotate"]),"text-padding":new Pr(De.layout_symbol["text-padding"]),"text-keep-upright":new Pr(De.layout_symbol["text-keep-upright"]),"text-transform":new Ir(De.layout_symbol["text-transform"]),"text-offset":new Ir(De.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(De.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pr(De.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(De.layout_symbol["text-optional"])}),Id={paint:new pa({"icon-opacity":new Ir(De.paint_symbol["icon-opacity"]),"icon-color":new Ir(De.paint_symbol["icon-color"]),"icon-halo-color":new Ir(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ir(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ir(De.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ir(De.paint_symbol["text-opacity"]),"text-color":new Ir(De.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new Ir(De.paint_symbol["text-halo-color"]),"text-halo-width":new Ir(De.paint_symbol["text-halo-width"]),"text-halo-blur":new Ir(De.paint_symbol["text-halo-blur"]),"text-translate":new Pr(De.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(De.paint_symbol["text-translate-anchor"])}),layout:Ax},Uc=function(E){this.type=E.property.overrides?E.property.overrides.runtimeType:Et,this.defaultValue=E};Uc.prototype.evaluate=function(E){if(E.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(E.formattedSection))return z.getOverride(E.formattedSection)}return E.feature&&E.featureState?this.defaultValue.evaluate(E.feature,E.featureState):this.defaultValue.property.specification.default},Uc.prototype.eachChild=function(E){this.defaultValue.isConstant()||E(this.defaultValue.value._styleExpression.expression)},Uc.prototype.outputDefined=function(){return!1},Uc.prototype.serialize=function(){return null},Sr("FormatSectionOverride",Uc,{omit:["defaultValue"]});var Sx=function(E){function z(Z){E.call(this,Z,Id)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,he){if(E.prototype.recalculate.call(this,Z,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Ie=this.layout.get("text-writing-mode");if(Ie){for(var Ue=[],We=0,it=Ie;We<it.length;We+=1){var ft=it[We];Ue.indexOf(ft)<0&&Ue.push(ft)}this.layout._values["text-writing-mode"]=Ue}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(Z,he,Ie,Ue){var We=this.layout.get(Z).evaluate(he,{},Ie,Ue),it=this._unevaluatedLayout._values[Z];return it.isDataDriven()||qs(it.value)||!We?We:function(ft,At){return At.replace(/{([^{}]+)}/g,function(St,Ft){return Ft in ft?String(ft[Ft]):""})}(he.properties,We)},z.prototype.createBucket=function(Z){return new xi(Z)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var Z=0,he=Id.paint.overridableProperties;Z<he.length;Z+=1){var Ie=he[Z];if(z.hasPaintOverride(this.layout,Ie)){var Ue,We=this.paint.get(Ie),it=new Uc(We),ft=new sl(it,We.property.specification);Ue=We.value.kind==="constant"||We.value.kind==="source"?new rs("source",ft):new Bo("composite",ft,We.value.zoomStops,We.value._interpolationType),this.paint._values[Ie]=new qi(We.property,Ue,We.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,he,Ie){return!(!this.layout||he.isDataDriven()||Ie.isDataDriven())&&z.hasPaintOverride(this.layout,Z)},z.hasPaintOverride=function(Z,he){var Ie=Z.get("text-field"),Ue=Id.paint.properties[he],We=!1,it=function(St){for(var Ft=0,Wt=St;Ft<Wt.length;Ft+=1){var jt=Wt[Ft];if(Ue.overrides&&Ue.overrides.hasOverride(jt))return void(We=!0)}};if(Ie.value.kind==="constant"&&Ie.value.value instanceof In)it(Ie.value.value.sections);else if(Ie.value.kind==="source"){var ft=function(St){if(!We)if(St instanceof ar&&ir(St.value)===Vt){var Ft=St.value;it(Ft.sections)}else St instanceof ln?it(St.sections):St.eachChild(ft)},At=Ie.value;At._styleExpression&&ft(At._styleExpression.expression)}return We},z}(da),Ex={paint:new pa({"background-color":new Pr(De.paint_background["background-color"]),"background-pattern":new Ma(De.paint_background["background-pattern"]),"background-opacity":new Pr(De.paint_background["background-opacity"])})},kx=function(E){function z(Z){E.call(this,Z,Ex)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z}(da),Lx={paint:new pa({"raster-opacity":new Pr(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(De.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(De.paint_raster["raster-saturation"]),"raster-contrast":new Pr(De.paint_raster["raster-contrast"]),"raster-resampling":new Pr(De.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(De.paint_raster["raster-fade-duration"])})},Cx=function(E){function z(Z){E.call(this,Z,Lx)}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z}(da),Px=function(E){function z(Z){E.call(this,Z,{}),this.implementation=Z}return E&&(z.__proto__=E),z.prototype=Object.create(E&&E.prototype),z.prototype.constructor=z,z.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},z.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},z.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},z}(da),Rx={circle:vy,heatmap:xy,hillshade:by,fill:Fy,"fill-extrusion":Wy,line:Ky,symbol:Sx,background:kx,raster:Cx},Km=self.HTMLImageElement,Jm=self.HTMLCanvasElement,$m=self.HTMLVideoElement,Qm=self.ImageData,cp=self.ImageBitmap,Ku=function(E,z,Z,he){this.context=E,this.format=Z,this.texture=E.gl.createTexture(),this.update(z,he)};Ku.prototype.update=function(E,z,Z){var he=E.width,Ie=E.height,Ue=!(this.size&&this.size[0]===he&&this.size[1]===Ie||Z),We=this.context,it=We.gl;if(this.useMipmap=!!(z&&z.useMipmap),it.bindTexture(it.TEXTURE_2D,this.texture),We.pixelStoreUnpackFlipY.set(!1),We.pixelStoreUnpack.set(1),We.pixelStoreUnpackPremultiplyAlpha.set(this.format===it.RGBA&&(!z||z.premultiply!==!1)),Ue)this.size=[he,Ie],E instanceof Km||E instanceof Jm||E instanceof $m||E instanceof Qm||cp&&E instanceof cp?it.texImage2D(it.TEXTURE_2D,0,this.format,this.format,it.UNSIGNED_BYTE,E):it.texImage2D(it.TEXTURE_2D,0,this.format,he,Ie,0,this.format,it.UNSIGNED_BYTE,E.data);else{var ft=Z||{x:0,y:0},At=ft.x,St=ft.y;E instanceof Km||E instanceof Jm||E instanceof $m||E instanceof Qm||cp&&E instanceof cp?it.texSubImage2D(it.TEXTURE_2D,0,At,St,it.RGBA,it.UNSIGNED_BYTE,E):it.texSubImage2D(it.TEXTURE_2D,0,At,St,he,Ie,it.RGBA,it.UNSIGNED_BYTE,E.data)}this.useMipmap&&this.isSizePowerOfTwo()&&it.generateMipmap(it.TEXTURE_2D)},Ku.prototype.bind=function(E,z,Z){var he=this.context.gl;he.bindTexture(he.TEXTURE_2D,this.texture),Z!==he.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=he.LINEAR),E!==this.filter&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,E),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,Z||E),this.filter=E),z!==this.wrap&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,z),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,z),this.wrap=z)},Ku.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ku.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Od=function(E){var z=this;this._callback=E,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};Od.prototype.trigger=function(){var E=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){E._triggered=!1,E._callback()},0))},Od.prototype.remove=function(){delete this._channel,this._callback=function(){}};var jc=function(E,z,Z){this.target=E,this.parent=z,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Od(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?E:self};function eg(E,z,Z){var he=2*Math.PI*6378137/256/Math.pow(2,Z);return[E*he-2*Math.PI*6378137/2,z*he-2*Math.PI*6378137/2]}jc.prototype.send=function(E,z,Z,he,Ie){var Ue=this;Ie===void 0&&(Ie=!1);var We=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[We]=Z);var it=O(this.globalScope)?void 0:[];return this.target.postMessage({id:We,type:E,hasCallback:!!Z,targetMapId:he,mustQueue:Ie,sourceMapId:this.mapId,data:Is(z,it)},it),{cancel:function(){Z&&delete Ue.callbacks[We],Ue.target.postMessage({id:We,type:"<cancel>",targetMapId:he,sourceMapId:Ue.mapId})}}},jc.prototype.receive=function(E){var z=E.data,Z=z.id;if(Z&&(!z.targetMapId||this.mapId===z.targetMapId))if(z.type==="<cancel>"){delete this.tasks[Z];var he=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],he&&he()}else C()||z.mustQueue?(this.tasks[Z]=z,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,z)},jc.prototype.process=function(){if(this.taskQueue.length){var E=this.taskQueue.shift(),z=this.tasks[E];delete this.tasks[E],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(E,z)}},jc.prototype.processTask=function(E,z){var Z=this;if(z.type==="<response>"){var he=this.callbacks[E];delete this.callbacks[E],he&&(z.error?he(Os(z.error)):he(null,Os(z.data)))}else{var Ie=!1,Ue=O(this.globalScope)?void 0:[],We=z.hasCallback?function(St,Ft){Ie=!0,delete Z.cancelCallbacks[E],Z.target.postMessage({id:E,type:"<response>",sourceMapId:Z.mapId,error:St?Is(St):null,data:Is(Ft,Ue)},Ue)}:function(St){Ie=!0},it=null,ft=Os(z.data);if(this.parent[z.type])it=this.parent[z.type](z.sourceMapId,ft,We);else if(this.parent.getWorkerSource){var At=z.type.split(".");it=this.parent.getWorkerSource(z.sourceMapId,At[0],ft.source)[At[1]](ft,We)}else We(new Error("Could not find function "+z.type));!Ie&&it&&it.cancel&&(this.cancelCallbacks[E]=it.cancel)}},jc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var _a=function(E,z){E&&(z?this.setSouthWest(E).setNorthEast(z):E.length===4?this.setSouthWest([E[0],E[1]]).setNorthEast([E[2],E[3]]):this.setSouthWest(E[0]).setNorthEast(E[1]))};_a.prototype.setNorthEast=function(E){return this._ne=E instanceof Ui?new Ui(E.lng,E.lat):Ui.convert(E),this},_a.prototype.setSouthWest=function(E){return this._sw=E instanceof Ui?new Ui(E.lng,E.lat):Ui.convert(E),this},_a.prototype.extend=function(E){var z,Z,he=this._sw,Ie=this._ne;if(E instanceof Ui)z=E,Z=E;else{if(!(E instanceof _a)){if(Array.isArray(E)){if(E.length===4||E.every(Array.isArray)){var Ue=E;return this.extend(_a.convert(Ue))}var We=E;return this.extend(Ui.convert(We))}return this}if(z=E._sw,Z=E._ne,!z||!Z)return this}return he||Ie?(he.lng=Math.min(z.lng,he.lng),he.lat=Math.min(z.lat,he.lat),Ie.lng=Math.max(Z.lng,Ie.lng),Ie.lat=Math.max(Z.lat,Ie.lat)):(this._sw=new Ui(z.lng,z.lat),this._ne=new Ui(Z.lng,Z.lat)),this},_a.prototype.getCenter=function(){return new Ui((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},_a.prototype.getSouthWest=function(){return this._sw},_a.prototype.getNorthEast=function(){return this._ne},_a.prototype.getNorthWest=function(){return new Ui(this.getWest(),this.getNorth())},_a.prototype.getSouthEast=function(){return new Ui(this.getEast(),this.getSouth())},_a.prototype.getWest=function(){return this._sw.lng},_a.prototype.getSouth=function(){return this._sw.lat},_a.prototype.getEast=function(){return this._ne.lng},_a.prototype.getNorth=function(){return this._ne.lat},_a.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},_a.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},_a.prototype.isEmpty=function(){return!(this._sw&&this._ne)},_a.prototype.contains=function(E){var z=Ui.convert(E),Z=z.lng,he=z.lat,Ie=this._sw.lat<=he&&he<=this._ne.lat,Ue=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ue=this._sw.lng>=Z&&Z>=this._ne.lng),Ie&&Ue},_a.convert=function(E){return!E||E instanceof _a?E:new _a(E)};var tg=63710088e-1,Ui=function(E,z){if(isNaN(E)||isNaN(z))throw new Error("Invalid LngLat object: ("+E+", "+z+")");if(this.lng=+E,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ui.prototype.wrap=function(){return new Ui(l(this.lng,-180,180),this.lat)},Ui.prototype.toArray=function(){return[this.lng,this.lat]},Ui.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ui.prototype.distanceTo=function(E){var z=Math.PI/180,Z=this.lat*z,he=E.lat*z,Ie=Math.sin(Z)*Math.sin(he)+Math.cos(Z)*Math.cos(he)*Math.cos((E.lng-this.lng)*z);return tg*Math.acos(Math.min(Ie,1))},Ui.prototype.toBounds=function(E){E===void 0&&(E=0);var z=360*E/40075017,Z=z/Math.cos(Math.PI/180*this.lat);return new _a(new Ui(this.lng-Z,this.lat-z),new Ui(this.lng+Z,this.lat+z))},Ui.convert=function(E){if(E instanceof Ui)return E;if(Array.isArray(E)&&(E.length===2||E.length===3))return new Ui(Number(E[0]),Number(E[1]));if(!Array.isArray(E)&&typeof E=="object"&&E!==null)return new Ui(Number("lng"in E?E.lng:E.lon),Number(E.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ng=2*Math.PI*tg;function rg(E){return ng*Math.cos(E*Math.PI/180)}function ig(E){return(180+E)/360}function ag(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function og(E,z){return E/rg(z)}function Dd(E){var z=180-360*E;return 360/Math.PI*Math.atan(Math.exp(z*Math.PI/180))-90}var Ju=function(E,z,Z){Z===void 0&&(Z=0),this.x=+E,this.y=+z,this.z=+Z};Ju.fromLngLat=function(E,z){z===void 0&&(z=0);var Z=Ui.convert(E);return new Ju(ig(Z.lng),ag(Z.lat),og(z,Z.lat))},Ju.prototype.toLngLat=function(){return new Ui(360*this.x-180,Dd(this.y))},Ju.prototype.toAltitude=function(){return E=this.z,z=this.y,E*rg(Dd(z));var E,z},Ju.prototype.meterInMercatorCoordinateUnits=function(){return 1/ng*(E=Dd(this.y),1/Math.cos(E*Math.PI/180));var E};var $u=function(E,z,Z){this.z=E,this.x=z,this.y=Z,this.key=ih(0,E,E,z,Z)};$u.prototype.equals=function(E){return this.z===E.z&&this.x===E.x&&this.y===E.y},$u.prototype.url=function(E,z){var Z,he,Ie,Ue,We,it=(Z=this.x,he=this.y,Ie=this.z,Ue=eg(256*Z,256*(he=Math.pow(2,Ie)-he-1),Ie),We=eg(256*(Z+1),256*(he+1),Ie),Ue[0]+","+Ue[1]+","+We[0]+","+We[1]),ft=function(At,St,Ft){for(var Wt,jt="",on=At;on>0;on--)jt+=(St&(Wt=1<<on-1)?1:0)+(Ft&Wt?2:0);return jt}(this.z,this.x,this.y);return E[(this.x+this.y)%E.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(z==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ft).replace("{bbox-epsg-3857}",it)},$u.prototype.getTilePoint=function(E){var z=Math.pow(2,this.z);return new t((E.x*z-this.x)*si,(E.y*z-this.y)*si)},$u.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sg=function(E,z){this.wrap=E,this.canonical=z,this.key=ih(E,z.z,z.z,z.x,z.y)},ba=function(E,z,Z,he,Ie){this.overscaledZ=E,this.wrap=z,this.canonical=new $u(Z,+he,+Ie),this.key=ih(z,E,Z,he,Ie)};function ih(E,z,Z,he,Ie){(E*=2)<0&&(E=-1*E-1);var Ue=1<<Z;return(Ue*Ue*E+Ue*Ie+he).toString(36)+Z.toString(36)+z.toString(36)}ba.prototype.equals=function(E){return this.overscaledZ===E.overscaledZ&&this.wrap===E.wrap&&this.canonical.equals(E.canonical)},ba.prototype.scaledTo=function(E){var z=this.canonical.z-E;return E>this.canonical.z?new ba(E,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ba(E,this.wrap,E,this.canonical.x>>z,this.canonical.y>>z)},ba.prototype.calculateScaledKey=function(E,z){var Z=this.canonical.z-E;return E>this.canonical.z?ih(this.wrap*+z,E,this.canonical.z,this.canonical.x,this.canonical.y):ih(this.wrap*+z,E,E,this.canonical.x>>Z,this.canonical.y>>Z)},ba.prototype.isChildOf=function(E){if(E.wrap!==this.wrap)return!1;var z=this.canonical.z-E.canonical.z;return E.overscaledZ===0||E.overscaledZ<this.overscaledZ&&E.canonical.x===this.canonical.x>>z&&E.canonical.y===this.canonical.y>>z},ba.prototype.children=function(E){if(this.overscaledZ>=E)return[new ba(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,Z=2*this.canonical.x,he=2*this.canonical.y;return[new ba(z,this.wrap,z,Z,he),new ba(z,this.wrap,z,Z+1,he),new ba(z,this.wrap,z,Z,he+1),new ba(z,this.wrap,z,Z+1,he+1)]},ba.prototype.isLessThan=function(E){return this.wrap<E.wrap||!(this.wrap>E.wrap)&&(this.overscaledZ<E.overscaledZ||!(this.overscaledZ>E.overscaledZ)&&(this.canonical.x<E.canonical.x||!(this.canonical.x>E.canonical.x)&&this.canonical.y<E.canonical.y))},ba.prototype.wrapped=function(){return new ba(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ba.prototype.unwrapTo=function(E){return new ba(this.overscaledZ,E,this.canonical.z,this.canonical.x,this.canonical.y)},ba.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ba.prototype.toUnwrapped=function(){return new sg(this.wrap,this.canonical)},ba.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ba.prototype.getTilePoint=function(E){return this.canonical.getTilePoint(new Ju(E.x-this.wrap,E.y))},Sr("CanonicalTileID",$u),Sr("OverscaledTileID",ba,{omit:["posMatrix"]});var ru=function(E,z,Z){if(this.uid=E,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return S('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var he=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=Z||"mapbox";for(var Ie=0;Ie<he;Ie++)this.data[this._idx(-1,Ie)]=this.data[this._idx(0,Ie)],this.data[this._idx(he,Ie)]=this.data[this._idx(he-1,Ie)],this.data[this._idx(Ie,-1)]=this.data[this._idx(Ie,0)],this.data[this._idx(Ie,he)]=this.data[this._idx(Ie,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};ru.prototype.get=function(E,z){var Z=new Uint8Array(this.data.buffer),he=4*this._idx(E,z);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[he],Z[he+1],Z[he+2])},ru.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},ru.prototype._idx=function(E,z){if(E<-1||E>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(E+1)},ru.prototype._unpackMapbox=function(E,z,Z){return(256*E*256+256*z+Z)/10-1e4},ru.prototype._unpackTerrarium=function(E,z,Z){return 256*E+z+Z/256-32768},ru.prototype.getPixels=function(){return new So({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ru.prototype.backfillBorder=function(E,z,Z){if(this.dim!==E.dim)throw new Error("dem dimension mismatch");var he=z*this.dim,Ie=z*this.dim+this.dim,Ue=Z*this.dim,We=Z*this.dim+this.dim;switch(z){case-1:he=Ie-1;break;case 1:Ie=he+1}switch(Z){case-1:Ue=We-1;break;case 1:We=Ue+1}for(var it=-z*this.dim,ft=-Z*this.dim,At=Ue;At<We;At++)for(var St=he;St<Ie;St++)this.data[this._idx(St,At)]=E.data[this._idx(St+it,At+ft)]},Sr("DEMData",ru);var fp=function(E){this._stringToNumber={},this._numberToString=[];for(var z=0;z<E.length;z++){var Z=E[z];this._stringToNumber[Z]=z,this._numberToString[z]=Z}};fp.prototype.encode=function(E){return this._stringToNumber[E]},fp.prototype.decode=function(E){return this._numberToString[E]};var hp=function(E,z,Z,he,Ie){this.type="Feature",this._vectorTileFeature=E,E._z=z,E._x=Z,E._y=he,this.properties=E.properties,this.id=Ie},zd={geometry:{configurable:!0}};zd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zd.geometry.set=function(E){this._geometry=E},hp.prototype.toJSON=function(){var E={geometry:this.geometry};for(var z in this)z!=="_geometry"&&z!=="_vectorTileFeature"&&(E[z]=this[z]);return E},Object.defineProperties(hp.prototype,zd);var Vc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vc.prototype.updateState=function(E,z,Z){var he=String(z);if(this.stateChanges[E]=this.stateChanges[E]||{},this.stateChanges[E][he]=this.stateChanges[E][he]||{},u(this.stateChanges[E][he],Z),this.deletedStates[E]===null)for(var Ie in this.deletedStates[E]={},this.state[E])Ie!==he&&(this.deletedStates[E][Ie]=null);else if(this.deletedStates[E]&&this.deletedStates[E][he]===null)for(var Ue in this.deletedStates[E][he]={},this.state[E][he])Z[Ue]||(this.deletedStates[E][he][Ue]=null);else for(var We in Z)this.deletedStates[E]&&this.deletedStates[E][he]&&this.deletedStates[E][he][We]===null&&delete this.deletedStates[E][he][We]},Vc.prototype.removeFeatureState=function(E,z,Z){if(this.deletedStates[E]!==null){var he=String(z);if(this.deletedStates[E]=this.deletedStates[E]||{},Z&&z!==void 0)this.deletedStates[E][he]!==null&&(this.deletedStates[E][he]=this.deletedStates[E][he]||{},this.deletedStates[E][he][Z]=null);else if(z!==void 0)if(this.stateChanges[E]&&this.stateChanges[E][he])for(Z in this.deletedStates[E][he]={},this.stateChanges[E][he])this.deletedStates[E][he][Z]=null;else this.deletedStates[E][he]=null;else this.deletedStates[E]=null}},Vc.prototype.getState=function(E,z){var Z=String(z),he=this.state[E]||{},Ie=this.stateChanges[E]||{},Ue=u({},he[Z],Ie[Z]);if(this.deletedStates[E]===null)return{};if(this.deletedStates[E]){var We=this.deletedStates[E][z];if(We===null)return{};for(var it in We)delete Ue[it]}return Ue},Vc.prototype.initializeTileState=function(E,z){E.setFeatureState(this.state,z)},Vc.prototype.coalesceChanges=function(E,z){var Z={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var Ie={};for(var Ue in this.stateChanges[he])this.state[he][Ue]||(this.state[he][Ue]={}),u(this.state[he][Ue],this.stateChanges[he][Ue]),Ie[Ue]=this.state[he][Ue];Z[he]=Ie}for(var We in this.deletedStates){this.state[We]=this.state[We]||{};var it={};if(this.deletedStates[We]===null)for(var ft in this.state[We])it[ft]={},this.state[We][ft]={};else for(var At in this.deletedStates[We]){if(this.deletedStates[We][At]===null)this.state[We][At]={};else for(var St=0,Ft=Object.keys(this.deletedStates[We][At]);St<Ft.length;St+=1){var Wt=Ft[St];delete this.state[We][At][Wt]}it[At]=this.state[We][At]}Z[We]=Z[We]||{},u(Z[We],it)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var jt in E)E[jt].setFeatureState(Z,z)};var iu=function(E,z){this.tileID=E,this.x=E.canonical.x,this.y=E.canonical.y,this.z=E.canonical.z,this.grid=new aa(si,16,0),this.grid3D=new aa(si,16,0),this.featureIndexArray=new Zt,this.promoteId=z};function lg(E,z,Z,he,Ie){return y(E,function(Ue,We){var it=z instanceof ha?z.get(We):null;return it&&it.evaluate?it.evaluate(Z,he,Ie):it})}function ug(E){for(var z=1/0,Z=1/0,he=-1/0,Ie=-1/0,Ue=0,We=E;Ue<We.length;Ue+=1){var it=We[Ue];z=Math.min(z,it.x),Z=Math.min(Z,it.y),he=Math.max(he,it.x),Ie=Math.max(Ie,it.y)}return{minX:z,minY:Z,maxX:he,maxY:Ie}}function Ix(E,z){return z-E}iu.prototype.insert=function(E,z,Z,he,Ie,Ue){var We=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,he,Ie);for(var it=Ue?this.grid3D:this.grid,ft=0;ft<z.length;ft++){for(var At=z[ft],St=[1/0,1/0,-1/0,-1/0],Ft=0;Ft<At.length;Ft++){var Wt=At[Ft];St[0]=Math.min(St[0],Wt.x),St[1]=Math.min(St[1],Wt.y),St[2]=Math.max(St[2],Wt.x),St[3]=Math.max(St[3],Wt.y)}St[0]<si&&St[1]<si&&St[2]>=0&&St[3]>=0&&it.insert(We,St[0],St[1],St[2],St[3])}},iu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Cc.VectorTile(new ep(this.rawTileData)).layers,this.sourceLayerCoder=new fp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},iu.prototype.query=function(E,z,Z,he){var Ie=this;this.loadVTLayers();for(var Ue=E.params||{},We=si/E.tileSize/E.scale,it=Xs(Ue.filter),ft=E.queryGeometry,At=E.queryPadding*We,St=ug(ft),Ft=this.grid.query(St.minX-At,St.minY-At,St.maxX+At,St.maxY+At),Wt=ug(E.cameraQueryGeometry),jt=0,on=this.grid3D.query(Wt.minX-At,Wt.minY-At,Wt.maxX+At,Wt.maxY+At,function(Wn,Kn,nr,xr){return function(pr,wr,kr,Vr,Rr){for(var Ur=0,zr=pr;Ur<zr.length;Ur+=1){var Lr=zr[Ur];if(wr<=Lr.x&&kr<=Lr.y&&Vr>=Lr.x&&Rr>=Lr.y)return!0}var Jr=[new t(wr,kr),new t(wr,Rr),new t(Vr,Rr),new t(Vr,kr)];if(pr.length>2){for(var Hr=0,Li=Jr;Hr<Li.length;Hr+=1)if(Su(pr,Li[Hr]))return!0}for(var Br=0;Br<pr.length-1;Br++)if(Gf(pr[Br],pr[Br+1],Jr))return!0;return!1}(E.cameraQueryGeometry,Wn-At,Kn-At,nr+At,xr+At)});jt<on.length;jt+=1){var un=on[jt];Ft.push(un)}Ft.sort(Ix);for(var En,Sn={},Dn=function(Wn){var Kn=Ft[Wn];if(Kn!==En){En=Kn;var nr=Ie.featureIndexArray.get(Kn),xr=null;Ie.loadMatchingFeature(Sn,nr.bucketIndex,nr.sourceLayerIndex,nr.featureIndex,it,Ue.layers,Ue.availableImages,z,Z,he,function(pr,wr,kr){return xr||(xr=eo(pr)),wr.queryIntersectsFeature(ft,pr,kr,xr,Ie.z,E.transform,We,E.pixelPosMatrix)})}},Fn=0;Fn<Ft.length;Fn++)Dn(Fn);return Sn},iu.prototype.loadMatchingFeature=function(E,z,Z,he,Ie,Ue,We,it,ft,At,St){var Ft=this.bucketLayerIDs[z];if(!Ue||function(xr,pr){for(var wr=0;wr<xr.length;wr++)if(pr.indexOf(xr[wr])>=0)return!0;return!1}(Ue,Ft)){var Wt=this.sourceLayerCoder.decode(Z),jt=this.vtLayers[Wt].feature(he);if(Ie.filter(new ui(this.tileID.overscaledZ),jt))for(var on=this.getId(jt,Wt),un=0;un<Ft.length;un++){var En=Ft[un];if(!(Ue&&Ue.indexOf(En)<0)){var Sn=it[En];if(Sn){var Dn={};on!==void 0&&At&&(Dn=At.getState(Sn.sourceLayer||"_geojsonTileLayer",on));var Fn=ft[En];Fn.paint=lg(Fn.paint,Sn.paint,jt,Dn,We),Fn.layout=lg(Fn.layout,Sn.layout,jt,Dn,We);var Wn=!St||St(jt,Sn,Dn);if(Wn){var Kn=new hp(jt,this.z,this.x,this.y,on);Kn.layer=Fn;var nr=E[En];nr===void 0&&(nr=E[En]=[]),nr.push({featureIndex:he,feature:Kn,intersectionZ:Wn})}}}}}},iu.prototype.lookupSymbolFeatures=function(E,z,Z,he,Ie,Ue,We,it){var ft={};this.loadVTLayers();for(var At=Xs(Ie),St=0,Ft=E;St<Ft.length;St+=1){var Wt=Ft[St];this.loadMatchingFeature(ft,Z,he,Wt,At,Ue,We,it,z)}return ft},iu.prototype.hasLayer=function(E){for(var z=0,Z=this.bucketLayerIDs;z<Z.length;z+=1)for(var he=0,Ie=Z[z];he<Ie.length;he+=1)if(E===Ie[he])return!0;return!1},iu.prototype.getId=function(E,z){var Z=E.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[z];typeof(Z=E.properties[he])=="boolean"&&(Z=Number(Z))}return Z},Sr("FeatureIndex",iu,{omit:["rawTileData","sourceLayerCoder"]});var ka=function(E,z){this.tileID=E,this.uid=c(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ka.prototype.registerFadeDuration=function(E){var z=E+this.timeAdded;z<ee.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},ka.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ka.prototype.loadVectorData=function(E,z,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",E){for(var he in E.featureIndex&&(this.latestFeatureIndex=E.featureIndex,E.rawTileData?(this.latestRawTileData=E.rawTileData,this.latestFeatureIndex.rawTileData=E.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=E.collisionBoxArray,this.buckets=function(At,St){var Ft={};if(!St)return Ft;for(var Wt=function(){var un=on[jt],En=un.layerIds.map(function(Wn){return St.getLayer(Wn)}).filter(Boolean);if(En.length!==0){un.layers=En,un.stateDependentLayerIds&&(un.stateDependentLayers=un.stateDependentLayerIds.map(function(Wn){return En.filter(function(Kn){return Kn.id===Wn})[0]}));for(var Sn=0,Dn=En;Sn<Dn.length;Sn+=1){var Fn=Dn[Sn];Ft[Fn.id]=un}}},jt=0,on=At;jt<on.length;jt+=1)Wt();return Ft}(E.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var Ie=this.buckets[he];if(Ie instanceof xi){if(this.hasSymbolBuckets=!0,!Z)break;Ie.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ue in this.buckets){var We=this.buckets[Ue];if(We instanceof xi&&We.hasRTLText){this.hasRTLText=!0,Ni.isLoading()||Ni.isLoaded()||To()!=="deferred"||tu();break}}for(var it in this.queryPadding=0,this.buckets){var ft=this.buckets[it];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(it).queryRadius(ft))}E.imageAtlas&&(this.imageAtlas=E.imageAtlas),E.glyphAtlasImage&&(this.glyphAtlasImage=E.glyphAtlasImage)}else this.collisionBoxArray=new _t},ka.prototype.unloadVectorData=function(){for(var E in this.buckets)this.buckets[E].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ka.prototype.getBucket=function(E){return this.buckets[E.id]},ka.prototype.upload=function(E){for(var z in this.buckets){var Z=this.buckets[z];Z.uploadPending()&&Z.upload(E)}var he=E.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ku(E,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ku(E,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},ka.prototype.prepare=function(E){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(E,this.imageAtlasTexture)},ka.prototype.queryRenderedFeatures=function(E,z,Z,he,Ie,Ue,We,it,ft,At){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:Ie,scale:Ue,tileSize:this.tileSize,pixelPosMatrix:At,transform:it,params:We,queryPadding:this.queryPadding*ft},E,z,Z):{}},ka.prototype.querySourceFeatures=function(E,z){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var he=Z.loadVTLayers(),Ie=z?z.sourceLayer:"",Ue=he._geojsonTileLayer||he[Ie];if(Ue)for(var We=Xs(z&&z.filter),it=this.tileID.canonical,ft=it.z,At=it.x,St=it.y,Ft={z:ft,x:At,y:St},Wt=0;Wt<Ue.length;Wt++){var jt=Ue.feature(Wt);if(We.filter(new ui(this.tileID.overscaledZ),jt)){var on=Z.getId(jt,Ie),un=new hp(jt,ft,At,St,on);un.tile=Ft,E.push(un)}}}},ka.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ka.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ka.prototype.setExpiryData=function(E){var z=this.expirationTime;if(E.cacheControl){var Z=P(E.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else E.expires&&(this.expirationTime=new Date(E.expires).getTime());if(this.expirationTime){var he=Date.now(),Ie=!1;if(this.expirationTime>he)Ie=!1;else if(z)if(this.expirationTime<z)Ie=!0;else{var Ue=this.expirationTime-z;Ue?this.expirationTime=he+Math.max(Ue,3e4):Ie=!0}else Ie=!0;Ie?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ka.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ka.prototype.setFeatureState=function(E,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(E).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(z.style.hasLayer(he)){var Ie=this.buckets[he],Ue=Ie.layers[0].sourceLayer||"_geojsonTileLayer",We=Z[Ue],it=E[Ue];if(We&&it&&Object.keys(it).length!==0){Ie.update(it,We,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ft=z&&z.style&&z.style.getLayer(he);ft&&(this.queryPadding=Math.max(this.queryPadding,ft.queryRadius(Ie)))}}}},ka.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ka.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ee.now()},ka.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ka.prototype.setHoldDuration=function(E){this.symbolFadeHoldUntil=ee.now()+E},ka.prototype.setDependencies=function(E,z){for(var Z={},he=0,Ie=z;he<Ie.length;he+=1)Z[Ie[he]]=!0;this.dependencies[E]=Z},ka.prototype.hasDependency=function(E,z){for(var Z=0,he=E;Z<he.length;Z+=1){var Ie=he[Z],Ue=this.dependencies[Ie];if(Ue){for(var We=0,it=z;We<it.length;We+=1)if(Ue[it[We]])return!0}}return!1};var Lu=self.performance,cg=function(E){this._marks={start:[E.url,"start"].join("#"),end:[E.url,"end"].join("#"),measure:E.url.toString()},Lu.mark(this._marks.start)};cg.prototype.finish=function(){Lu.mark(this._marks.end);var E=Lu.getEntriesByName(this._marks.measure);return E.length===0&&(Lu.measure(this._marks.measure,this._marks.start,this._marks.end),E=Lu.getEntriesByName(this._marks.measure),Lu.clearMarks(this._marks.start),Lu.clearMarks(this._marks.end),Lu.clearMeasures(this._marks.measure)),E},a.Actor=jc,a.AlphaImage=Zu,a.CanonicalTileID=$u,a.CollisionBoxArray=_t,a.Color=vn,a.DEMData=ru,a.DataConstantProperty=Pr,a.DictionaryCoder=fp,a.EXTENT=si,a.ErrorEvent=ut,a.EvaluationParameters=ui,a.Event=tt,a.Evented=Ke,a.FeatureIndex=iu,a.FillBucket=ml,a.FillExtrusionBucket=vl,a.ImageAtlas=eh,a.ImagePosition=np,a.LineBucket=Eo,a.LngLat=Ui,a.LngLatBounds=_a,a.MercatorCoordinate=Ju,a.ONE_EM=za,a.OverscaledTileID=ba,a.Point=t,a.Point$1=t,a.Properties=pa,a.Protobuf=ep,a.RGBAImage=So,a.RequestManager=ce,a.RequestPerformance=cg,a.ResourceType=bt,a.SegmentVector=bn,a.SourceFeatureState=Vc,a.StructArrayLayout1ui2=Je,a.StructArrayLayout2f1f2i16=Pe,a.StructArrayLayout2i4=Oa,a.StructArrayLayout3ui6=te,a.StructArrayLayout4i8=Fs,a.SymbolBucket=xi,a.Texture=Ku,a.Tile=ka,a.Transitionable=co,a.Uniform1f=jr,a.Uniform1i=Or,a.Uniform2f=Yr,a.Uniform3f=ai,a.Uniform4f=Ti,a.UniformColor=Mi,a.UniformMatrix4f=Bi,a.UnwrappedTileID=sg,a.ValidationError=Be,a.WritingMode=gs,a.ZoomHistory=Go,a.add=function(E,z,Z){return E[0]=z[0]+Z[0],E[1]=z[1]+Z[1],E[2]=z[2]+Z[2],E},a.addDynamicAttributes=Rd,a.asyncAll=function(E,z,Z){if(!E.length)return Z(null,[]);var he=E.length,Ie=new Array(E.length),Ue=null;E.forEach(function(We,it){z(We,function(ft,At){ft&&(Ue=ft),Ie[it]=At,--he==0&&Z(Ue,Ie)})})},a.bezier=n,a.bindAll=f,a.browser=ee,a.cacheEntryPossiblyAdded=function(E){++lt>Ee&&(E.getActor().send("enforceCacheSizeLimit",Le),lt=0)},a.clamp=s,a.clearTileCache=function(E){var z=self.caches.delete(de);E&&z.catch(E).then(function(){return E()})},a.clipLine=Gm,a.clone=function(E){var z=new ms(16);return z[0]=E[0],z[1]=E[1],z[2]=E[2],z[3]=E[3],z[4]=E[4],z[5]=E[5],z[6]=E[6],z[7]=E[7],z[8]=E[8],z[9]=E[9],z[10]=E[10],z[11]=E[11],z[12]=E[12],z[13]=E[13],z[14]=E[14],z[15]=E[15],z},a.clone$1=M,a.clone$2=function(E){var z=new ms(3);return z[0]=E[0],z[1]=E[1],z[2]=E[2],z},a.collisionCircleLayout=Qy,a.config=K,a.create=function(){var E=new ms(16);return ms!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E},a.create$1=function(){var E=new ms(9);return ms!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E},a.create$2=function(){var E=new ms(4);return ms!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E},a.createCommonjsModule=_,a.createExpression=ll,a.createLayout=Qi,a.createStyleLayer=function(E){return E.type==="custom"?new Px(E):new Rx[E.type](E)},a.cross=function(E,z,Z){var he=z[0],Ie=z[1],Ue=z[2],We=Z[0],it=Z[1],ft=Z[2];return E[0]=Ie*ft-Ue*it,E[1]=Ue*We-he*ft,E[2]=he*it-Ie*We,E},a.deepEqual=function E(z,Z){if(Array.isArray(z)){if(!Array.isArray(Z)||z.length!==Z.length)return!1;for(var he=0;he<z.length;he++)if(!E(z[he],Z[he]))return!1;return!0}if(typeof z=="object"&&z!==null&&Z!==null){if(typeof Z!="object"||Object.keys(z).length!==Object.keys(Z).length)return!1;for(var Ie in z)if(!E(z[Ie],Z[Ie]))return!1;return!0}return z===Z},a.dot=function(E,z){return E[0]*z[0]+E[1]*z[1]+E[2]*z[2]},a.dot$1=function(E,z){return E[0]*z[0]+E[1]*z[1]+E[2]*z[2]+E[3]*z[3]},a.ease=r,a.emitValidationErrors=so,a.endsWith=x,a.enforceCacheSizeLimit=function(E){je(),ue&&ue.then(function(z){z.keys().then(function(Z){for(var he=0;he<Z.length-E;he++)z.delete(Z[he])})})},a.evaluateSizeForFeature=Fm,a.evaluateSizeForZoom=Nm,a.evaluateVariableOffset=Xm,a.evented=$i,a.extend=u,a.featureFilter=Xs,a.filterObject=v,a.fromRotation=function(E,z){var Z=Math.sin(z),he=Math.cos(z);return E[0]=he,E[1]=Z,E[2]=0,E[3]=-Z,E[4]=he,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E},a.getAnchorAlignment=kd,a.getAnchorJustification=Pd,a.getArrayBuffer=Lt,a.getImage=et,a.getJSON=function(E,z){return Tt(u(E,{type:"json"}),z)},a.getRTLTextPluginStatus=To,a.getReferrer=ht,a.getVideo=function(E,z){var Z,he,Ie=self.document.createElement("video");Ie.muted=!0,Ie.onloadstart=function(){z(null,Ie)};for(var Ue=0;Ue<E.length;Ue++){var We=self.document.createElement("source");Z=E[Ue],he=void 0,(he=self.document.createElement("a")).href=Z,he.protocol===self.document.location.protocol&&he.host===self.document.location.host||(Ie.crossOrigin="Anonymous"),We.src=E[Ue],Ie.appendChild(We)}return{cancel:function(){}}},a.identity=pd,a.invert=function(E,z){var Z=z[0],he=z[1],Ie=z[2],Ue=z[3],We=z[4],it=z[5],ft=z[6],At=z[7],St=z[8],Ft=z[9],Wt=z[10],jt=z[11],on=z[12],un=z[13],En=z[14],Sn=z[15],Dn=Z*it-he*We,Fn=Z*ft-Ie*We,Wn=Z*At-Ue*We,Kn=he*ft-Ie*it,nr=he*At-Ue*it,xr=Ie*At-Ue*ft,pr=St*un-Ft*on,wr=St*En-Wt*on,kr=St*Sn-jt*on,Vr=Ft*En-Wt*un,Rr=Ft*Sn-jt*un,Ur=Wt*Sn-jt*En,zr=Dn*Ur-Fn*Rr+Wn*Vr+Kn*kr-nr*wr+xr*pr;return zr?(zr=1/zr,E[0]=(it*Ur-ft*Rr+At*Vr)*zr,E[1]=(Ie*Rr-he*Ur-Ue*Vr)*zr,E[2]=(un*xr-En*nr+Sn*Kn)*zr,E[3]=(Wt*nr-Ft*xr-jt*Kn)*zr,E[4]=(ft*kr-We*Ur-At*wr)*zr,E[5]=(Z*Ur-Ie*kr+Ue*wr)*zr,E[6]=(En*Wn-on*xr-Sn*Fn)*zr,E[7]=(St*xr-Wt*Wn+jt*Fn)*zr,E[8]=(We*Rr-it*kr+At*pr)*zr,E[9]=(he*kr-Z*Rr-Ue*pr)*zr,E[10]=(on*nr-un*Wn+Sn*Dn)*zr,E[11]=(Ft*Wn-St*nr-jt*Dn)*zr,E[12]=(it*wr-We*Vr-ft*pr)*zr,E[13]=(Z*Vr-he*wr+Ie*pr)*zr,E[14]=(un*Fn-on*Kn-En*Dn)*zr,E[15]=(St*Kn-Ft*Fn+Wt*Dn)*zr,E):null},a.isChar=Tr,a.isMapboxURL=me,a.keysDifference=function(E,z){var Z=[];for(var he in E)he in z||Z.push(he);return Z},a.makeRequest=Tt,a.mapObject=y,a.mercatorXfromLng=ig,a.mercatorYfromLat=ag,a.mercatorZfromAltitude=og,a.mul=dy,a.multiply=nm,a.mvt=Cc,a.normalize=function(E,z){var Z=z[0],he=z[1],Ie=z[2],Ue=Z*Z+he*he+Ie*Ie;return Ue>0&&(Ue=1/Math.sqrt(Ue)),E[0]=z[0]*Ue,E[1]=z[1]*Ue,E[2]=z[2]*Ue,E},a.number=$n,a.offscreenCanvasSupported=ot,a.ortho=function(E,z,Z,he,Ie,Ue,We){var it=1/(z-Z),ft=1/(he-Ie),At=1/(Ue-We);return E[0]=-2*it,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*ft,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*At,E[11]=0,E[12]=(z+Z)*it,E[13]=(Ie+he)*ft,E[14]=(We+Ue)*At,E[15]=1,E},a.parseGlyphPBF=function(E){return new ep(E).readFields(cx,[])},a.pbf=ep,a.performSymbolLayout=function(E,z,Z,he,Ie,Ue,We){E.createArrays();var it=512*E.overscaling;E.tilePixelRatio=si/it,E.compareText={},E.iconsNeedLinear=!1;var ft=E.layers[0].layout,At=E.layers[0]._unevaluatedLayout._values,St={};if(E.textSizeData.kind==="composite"){var Ft=E.textSizeData,Wt=Ft.minZoom,jt=Ft.maxZoom;St.compositeTextSizes=[At["text-size"].possiblyEvaluate(new ui(Wt),We),At["text-size"].possiblyEvaluate(new ui(jt),We)]}if(E.iconSizeData.kind==="composite"){var on=E.iconSizeData,un=on.minZoom,En=on.maxZoom;St.compositeIconSizes=[At["icon-size"].possiblyEvaluate(new ui(un),We),At["icon-size"].possiblyEvaluate(new ui(En),We)]}St.layoutTextSize=At["text-size"].possiblyEvaluate(new ui(E.zoom+1),We),St.layoutIconSize=At["icon-size"].possiblyEvaluate(new ui(E.zoom+1),We),St.textMaxSize=At["text-size"].possiblyEvaluate(new ui(18));for(var Sn=ft.get("text-line-height")*za,Dn=ft.get("text-rotation-alignment")==="map"&&ft.get("symbol-placement")!=="point",Fn=ft.get("text-keep-upright"),Wn=ft.get("text-size"),Kn=function(){var pr=xr[nr],wr=ft.get("text-font").evaluate(pr,{},We).join(","),kr=Wn.evaluate(pr,{},We),Vr=St.layoutTextSize.evaluate(pr,{},We),Rr=St.layoutIconSize.evaluate(pr,{},We),Ur={horizontal:{},vertical:void 0},zr=pr.text,Lr=[0,0];if(zr){var Jr=zr.toString(),Hr=ft.get("text-letter-spacing").evaluate(pr,{},We)*za,Li=function(Gr){for(var ri=0,ta=Gr;ri<ta.length;ri+=1)if(Si=ta[ri].charCodeAt(0),Tr.Arabic(Si)||Tr["Arabic Supplement"](Si)||Tr["Arabic Extended-A"](Si)||Tr["Arabic Presentation Forms-A"](Si)||Tr["Arabic Presentation Forms-B"](Si))return!1;var Si;return!0}(Jr)?Hr:0,Br=ft.get("text-anchor").evaluate(pr,{},We),_i=ft.get("text-variable-anchor");if(!_i){var Ii=ft.get("text-radial-offset").evaluate(pr,{},We);Lr=Ii?Xm(Br,[Ii*za,Cd]):ft.get("text-offset").evaluate(pr,{},We).map(function(Gr){return Gr*za})}var Di=Dn?"center":ft.get("text-justify").evaluate(pr,{},We),zi=ft.get("symbol-placement"),Ci=zi==="point"?ft.get("text-max-width").evaluate(pr,{},We)*za:0,wa=function(){E.allowVerticalPlacement&&lo(Jr)&&(Ur.vertical=rp(zr,z,Z,Ie,wr,Ci,Sn,Br,"left",Li,Lr,gs.vertical,!0,zi,Vr,kr))};if(!Dn&&_i){for(var Gi=Di==="auto"?_i.map(function(Gr){return Pd(Gr)}):[Di],La=!1,qa=0;qa<Gi.length;qa++){var Fa=Gi[qa];if(!Ur.horizontal[Fa])if(La)Ur.horizontal[Fa]=Ur.horizontal[0];else{var ho=rp(zr,z,Z,Ie,wr,Ci,Sn,"center",Fa,Li,Lr,gs.horizontal,!1,zi,Vr,kr);ho&&(Ur.horizontal[Fa]=ho,La=ho.positionedLines.length===1)}}wa()}else{Di==="auto"&&(Di=Pd(Br));var Na=rp(zr,z,Z,Ie,wr,Ci,Sn,Br,Di,Li,Lr,gs.horizontal,!1,zi,Vr,kr);Na&&(Ur.horizontal[Di]=Na),wa(),lo(Jr)&&Dn&&Fn&&(Ur.vertical=rp(zr,z,Z,Ie,wr,Ci,Sn,Br,Di,Li,Lr,gs.vertical,!1,zi,Vr,kr))}}var Aa=void 0,Ba=!1;if(pr.icon&&pr.icon.name){var Ca=he[pr.icon.name];Ca&&(Aa=function(Gr,ri,ta){var Si=kd(ta),Yi=Si.horizontalAlign,ji=Si.verticalAlign,ci=ri[0],na=ri[1],po=ci-Gr.displaySize[0]*Yi,Zo=po+Gr.displaySize[0],no=na-Gr.displaySize[1]*ji;return{image:Gr,top:no,bottom:no+Gr.displaySize[1],left:po,right:Zo}}(Ie[pr.icon.name],ft.get("icon-offset").evaluate(pr,{},We),ft.get("icon-anchor").evaluate(pr,{},We)),Ba=Ca.sdf,E.sdfIcons===void 0?E.sdfIcons=Ca.sdf:E.sdfIcons!==Ca.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ca.pixelRatio!==E.pixelRatio||ft.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var Sa=Zm(Ur.horizontal)||Ur.vertical;E.iconsInText=!!Sa&&Sa.iconsInText,(Sa||Aa)&&function(Gr,ri,ta,Si,Yi,ji,ci,na,po,Zo,no){var xl=ji.textMaxSize.evaluate(ri,{});xl===void 0&&(xl=ci);var au,Pa=Gr.layers[0].layout,_l=Pa.get("icon-offset").evaluate(ri,{},no),el=Zm(ta.horizontal),tl=24,Qu=ci/tl,pp=Gr.tilePixelRatio*Qu,ec=Gr.tilePixelRatio*xl/tl,dp=Gr.tilePixelRatio*na,ah=Gr.tilePixelRatio*Pa.get("symbol-spacing"),Fd=Pa.get("text-padding")*Gr.tilePixelRatio,mp=Pa.get("icon-padding")*Gr.tilePixelRatio,Hc=Pa.get("text-max-angle")/180*Math.PI,gp=Pa.get("text-rotation-alignment")==="map"&&Pa.get("symbol-placement")!=="point",vp=Pa.get("icon-rotation-alignment")==="map"&&Pa.get("symbol-placement")!=="point",oh=Pa.get("symbol-placement"),Nd=ah/2,sh=Pa.get("icon-text-fit");Si&&sh!=="none"&&(Gr.allowVerticalPlacement&&ta.vertical&&(au=zm(Si,ta.vertical,sh,Pa.get("icon-text-fit-padding"),_l,Qu)),el&&(Si=zm(Si,el,sh,Pa.get("icon-text-fit-padding"),_l,Qu)));var tc=function(Ox,ph){ph.x<0||ph.x>=si||ph.y<0||ph.y>=si||function(ca,bl,Dx,Cu,Gd,mg,wp,Nl,Tp,dh,Mp,Ap,Wd,gg,mh,vg,yg,xg,_g,bg,vs,Sp,wg,Bl,zx){var Tg,ic,qc,Xc,Yc,Zc=ca.addToLineVertexArray(bl,Dx),Mg=0,Ag=0,Sg=0,Eg=0,qd=-1,Xd=-1,ou={},kg=hr(""),Yd=0,Zd=0;if(Nl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Yd=(Tg=Nl.layout.get("text-offset").evaluate(vs,{},Bl).map(function(vh){return vh*za}))[0],Zd=Tg[1]):(Yd=Nl.layout.get("text-radial-offset").evaluate(vs,{},Bl)*za,Zd=Cd),ca.allowVerticalPlacement&&Cu.vertical){var Lg=Nl.layout.get("text-rotate").evaluate(vs,{},Bl)+90,Fx=Cu.vertical;Xc=new lp(Tp,bl,dh,Mp,Ap,Fx,Wd,gg,mh,Lg),wp&&(Yc=new lp(Tp,bl,dh,Mp,Ap,wp,yg,xg,mh,Lg))}if(Gd){var Kd=Nl.layout.get("icon-rotate").evaluate(vs,{}),Cg=Nl.layout.get("icon-text-fit")!=="none",Pg=Wm(Gd,Kd,wg,Cg),Jd=wp?Wm(wp,Kd,wg,Cg):void 0;qc=new lp(Tp,bl,dh,Mp,Ap,Gd,yg,xg,!1,Kd),Mg=4*Pg.length;var Rg=ca.iconSizeData,gh=null;Rg.kind==="source"?(gh=[yl*Nl.layout.get("icon-size").evaluate(vs,{})])[0]>ku&&S(ca.layerIds[0]+': Value for "icon-size" is >= '+nh+'. Reduce your "icon-size".'):Rg.kind==="composite"&&((gh=[yl*Sp.compositeIconSizes[0].evaluate(vs,{},Bl),yl*Sp.compositeIconSizes[1].evaluate(vs,{},Bl)])[0]>ku||gh[1]>ku)&&S(ca.layerIds[0]+': Value for "icon-size" is >= '+nh+'. Reduce your "icon-size".'),ca.addSymbols(ca.icon,Pg,gh,bg,_g,vs,!1,bl,Zc.lineStartIndex,Zc.lineLength,-1,Bl),qd=ca.icon.placedSymbolArray.length-1,Jd&&(Ag=4*Jd.length,ca.addSymbols(ca.icon,Jd,gh,bg,_g,vs,gs.vertical,bl,Zc.lineStartIndex,Zc.lineLength,-1,Bl),Xd=ca.icon.placedSymbolArray.length-1)}for(var Ig in Cu.horizontal){var Ep=Cu.horizontal[Ig];if(!ic){kg=hr(Ep.text);var Nx=Nl.layout.get("text-rotate").evaluate(vs,{},Bl);ic=new lp(Tp,bl,dh,Mp,Ap,Ep,Wd,gg,mh,Nx)}var Og=Ep.positionedLines.length===1;if(Sg+=Ym(ca,bl,Ep,mg,Nl,mh,vs,vg,Zc,Cu.vertical?gs.horizontal:gs.horizontalOnly,Og?Object.keys(Cu.horizontal):[Ig],ou,qd,Sp,Bl),Og)break}Cu.vertical&&(Eg+=Ym(ca,bl,Cu.vertical,mg,Nl,mh,vs,vg,Zc,gs.vertical,["vertical"],ou,Xd,Sp,Bl));var Bx=ic?ic.boxStartIndex:ca.collisionBoxArray.length,Ux=ic?ic.boxEndIndex:ca.collisionBoxArray.length,jx=Xc?Xc.boxStartIndex:ca.collisionBoxArray.length,Vx=Xc?Xc.boxEndIndex:ca.collisionBoxArray.length,Hx=qc?qc.boxStartIndex:ca.collisionBoxArray.length,Gx=qc?qc.boxEndIndex:ca.collisionBoxArray.length,Wx=Yc?Yc.boxStartIndex:ca.collisionBoxArray.length,qx=Yc?Yc.boxEndIndex:ca.collisionBoxArray.length,Ul=-1,kp=function(vh,zg){return vh&&vh.circleDiameter?Math.max(vh.circleDiameter,zg):zg};Ul=kp(ic,Ul),Ul=kp(Xc,Ul),Ul=kp(qc,Ul);var Dg=(Ul=kp(Yc,Ul))>-1?1:0;Dg&&(Ul*=zx/za),ca.glyphOffsetArray.length>=xi.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vs.sortKey!==void 0&&ca.addToSortKeyRanges(ca.symbolInstances.length,vs.sortKey),ca.symbolInstances.emplaceBack(bl.x,bl.y,ou.right>=0?ou.right:-1,ou.center>=0?ou.center:-1,ou.left>=0?ou.left:-1,ou.vertical||-1,qd,Xd,kg,Bx,Ux,jx,Vx,Hx,Gx,Wx,qx,dh,Sg,Eg,Mg,Ag,Dg,0,Wd,Yd,Zd,Ul)}(Gr,ph,Ox,ta,Si,Yi,au,Gr.layers[0],Gr.collisionBoxArray,ri.index,ri.sourceLayerIndex,Gr.index,pp,Fd,gp,po,dp,mp,vp,_l,ri,ji,Zo,no,ci)};if(oh==="line")for(var Gc=0,yp=Gm(ri.geometry,0,0,si,si);Gc<yp.length;Gc+=1)for(var xp=yp[Gc],Wc=0,_p=vx(xp,ah,Hc,ta.vertical||el,Si,tl,ec,Gr.overscaling,si);Wc<_p.length;Wc+=1){var bp=_p[Wc];el&&bx(Gr,el.text,Nd,bp)||tc(xp,bp)}else if(oh==="line-center")for(var lh=0,uh=ri.geometry;lh<uh.length;lh+=1){var nc=uh[lh];if(nc.length>1){var ch=gx(nc,Hc,ta.vertical||el,Si,tl,ec);ch&&tc(nc,ch)}}else if(ri.type==="Polygon")for(var rc=0,fh=_d(ri.geometry,0);rc<fh.length;rc+=1){var hh=fh[rc],fg=xx(hh,16);tc(hh[0],new Oc(fg.x,fg.y,0))}else if(ri.type==="LineString")for(var Bd=0,hg=ri.geometry;Bd<hg.length;Bd+=1){var Ud=hg[Bd];tc(Ud,new Oc(Ud[0].x,Ud[0].y,0))}else if(ri.type==="Point")for(var jd=0,pg=ri.geometry;jd<pg.length;jd+=1)for(var Vd=0,dg=pg[jd];Vd<dg.length;Vd+=1){var Hd=dg[Vd];tc([Hd],new Oc(Hd.x,Hd.y,0))}}(E,pr,Ur,Aa,he,St,Vr,Rr,Lr,Ba,We)},nr=0,xr=E.features;nr<xr.length;nr+=1)Kn();Ue&&E.generateCollisionDebugBuffers()},a.perspective=function(E,z,Z,he,Ie){var Ue,We=1/Math.tan(z/2);return E[0]=We/Z,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=We,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,Ie!=null&&Ie!==1/0?(Ue=1/(he-Ie),E[10]=(Ie+he)*Ue,E[14]=2*Ie*he*Ue):(E[10]=-1,E[14]=-2*he),E},a.pick=function(E,z){for(var Z={},he=0;he<z.length;he++){var Ie=z[he];Ie in E&&(Z[Ie]=E[Ie])}return Z},a.plugin=Ni,a.polygonIntersectsPolygon=fo,a.postMapLoadEvent=He,a.postTurnstileEvent=we,a.potpack=Pm,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=Sr,a.registerForPluginStateChange=function(E){return E({pluginStatus:sa,pluginURL:mi}),$i.on("pluginStateChange",E),E},a.rotate=function(E,z,Z){var he=z[0],Ie=z[1],Ue=z[2],We=z[3],it=Math.sin(Z),ft=Math.cos(Z);return E[0]=he*ft+Ue*it,E[1]=Ie*ft+We*it,E[2]=he*-it+Ue*ft,E[3]=Ie*-it+We*ft,E},a.rotateX=function(E,z,Z){var he=Math.sin(Z),Ie=Math.cos(Z),Ue=z[4],We=z[5],it=z[6],ft=z[7],At=z[8],St=z[9],Ft=z[10],Wt=z[11];return z!==E&&(E[0]=z[0],E[1]=z[1],E[2]=z[2],E[3]=z[3],E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15]),E[4]=Ue*Ie+At*he,E[5]=We*Ie+St*he,E[6]=it*Ie+Ft*he,E[7]=ft*Ie+Wt*he,E[8]=At*Ie-Ue*he,E[9]=St*Ie-We*he,E[10]=Ft*Ie-it*he,E[11]=Wt*Ie-ft*he,E},a.rotateZ=function(E,z,Z){var he=Math.sin(Z),Ie=Math.cos(Z),Ue=z[0],We=z[1],it=z[2],ft=z[3],At=z[4],St=z[5],Ft=z[6],Wt=z[7];return z!==E&&(E[8]=z[8],E[9]=z[9],E[10]=z[10],E[11]=z[11],E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15]),E[0]=Ue*Ie+At*he,E[1]=We*Ie+St*he,E[2]=it*Ie+Ft*he,E[3]=ft*Ie+Wt*he,E[4]=At*Ie-Ue*he,E[5]=St*Ie-We*he,E[6]=Ft*Ie-it*he,E[7]=Wt*Ie-ft*he,E},a.scale=function(E,z,Z){var he=Z[0],Ie=Z[1],Ue=Z[2];return E[0]=z[0]*he,E[1]=z[1]*he,E[2]=z[2]*he,E[3]=z[3]*he,E[4]=z[4]*Ie,E[5]=z[5]*Ie,E[6]=z[6]*Ie,E[7]=z[7]*Ie,E[8]=z[8]*Ue,E[9]=z[9]*Ue,E[10]=z[10]*Ue,E[11]=z[11]*Ue,E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15],E},a.scale$1=function(E,z,Z){return E[0]=z[0]*Z,E[1]=z[1]*Z,E[2]=z[2]*Z,E[3]=z[3]*Z,E},a.scale$2=function(E,z,Z){return E[0]=z[0]*Z,E[1]=z[1]*Z,E[2]=z[2]*Z,E},a.setCacheLimits=function(E,z){Le=E,Ee=z},a.setRTLTextPlugin=function(E,z,Z){if(Z===void 0&&(Z=!1),sa===wo||sa===Wo||sa===Ji)throw new Error("setRTLTextPlugin cannot be called multiple times.");mi=ee.resolveURL(E),sa=wo,Ks=z,Ia(),Z||tu()},a.sphericalToCartesian=function(E){var z=E[0],Z=E[1],he=E[2];return Z+=90,Z*=Math.PI/180,he*=Math.PI/180,{x:z*Math.cos(Z)*Math.sin(he),y:z*Math.sin(Z)*Math.sin(he),z:z*Math.cos(he)}},a.sqrLen=gy,a.styleSpec=De,a.sub=my,a.symbolSize=mx,a.transformMat3=function(E,z,Z){var he=z[0],Ie=z[1],Ue=z[2];return E[0]=he*Z[0]+Ie*Z[3]+Ue*Z[6],E[1]=he*Z[1]+Ie*Z[4]+Ue*Z[7],E[2]=he*Z[2]+Ie*Z[5]+Ue*Z[8],E},a.transformMat4=Zh,a.translate=function(E,z,Z){var he,Ie,Ue,We,it,ft,At,St,Ft,Wt,jt,on,un=Z[0],En=Z[1],Sn=Z[2];return z===E?(E[12]=z[0]*un+z[4]*En+z[8]*Sn+z[12],E[13]=z[1]*un+z[5]*En+z[9]*Sn+z[13],E[14]=z[2]*un+z[6]*En+z[10]*Sn+z[14],E[15]=z[3]*un+z[7]*En+z[11]*Sn+z[15]):(he=z[0],Ie=z[1],Ue=z[2],We=z[3],it=z[4],ft=z[5],At=z[6],St=z[7],Ft=z[8],Wt=z[9],jt=z[10],on=z[11],E[0]=he,E[1]=Ie,E[2]=Ue,E[3]=We,E[4]=it,E[5]=ft,E[6]=At,E[7]=St,E[8]=Ft,E[9]=Wt,E[10]=jt,E[11]=on,E[12]=he*un+it*En+Ft*Sn+z[12],E[13]=Ie*un+ft*En+Wt*Sn+z[13],E[14]=Ue*un+At*En+jt*Sn+z[14],E[15]=We*un+St*En+on*Sn+z[15]),E},a.triggerPluginCompletionEvent=dl,a.uniqueId=c,a.validateCustomStyleLayer=function(E){var z=[],Z=E.id;return Z===void 0&&z.push({message:"layers."+Z+': missing required property "id"'}),E.render===void 0&&z.push({message:"layers."+Z+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&z.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),z},a.validateLight=Ki,a.validateStyle=fa,a.values=function(E){var z=[];for(var Z in E)z.push(E[Z]);return z},a.vectorTile=Cc,a.version=g,a.warnOnce=S,a.webpSupported=Y,a.window=self,a.wrap=l}),b(0,function(a){function _(et){var nt=typeof et;if(nt==="number"||nt==="boolean"||nt==="string"||et==null)return JSON.stringify(et);if(Array.isArray(et)){for(var Ye="[",tt=0,ut=et;tt<ut.length;tt+=1)Ye+=_(ut[tt])+",";return Ye+"]"}for(var Ke=Object.keys(et).sort(),De="{",Be=0;Be<Ke.length;Be++)De+=JSON.stringify(Ke[Be])+":"+_(et[Ke[Be]])+",";return De+"}"}function g(et){for(var nt="",Ye=0,tt=a.refProperties;Ye<tt.length;Ye+=1)nt+="/"+_(et[tt[Ye]]);return nt}var h=function(et){this.keyCache={},et&&this.replace(et)};h.prototype.replace=function(et){this._layerConfigs={},this._layers={},this.update(et,[])},h.prototype.update=function(et,nt){for(var Ye=this,tt=0,ut=et;tt<ut.length;tt+=1){var Ke=ut[tt];this._layerConfigs[Ke.id]=Ke;var De=this._layers[Ke.id]=a.createStyleLayer(Ke);De._featureFilter=a.featureFilter(De.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(var Be=0,Qe=nt;Be<Qe.length;Be+=1){var rt=Qe[Be];delete this.keyCache[rt],delete this._layerConfigs[rt],delete this._layers[rt]}this.familiesBySource={};for(var vt=0,mt=function(Nt,Bt){for(var Ut={},Jt=0;Jt<Nt.length;Jt++){var Vt=Bt&&Bt[Nt[Jt].id]||g(Nt[Jt]);Bt&&(Bt[Nt[Jt].id]=Vt);var Qt=Ut[Vt];Qt||(Qt=Ut[Vt]=[]),Qt.push(Nt[Jt])}var qt=[];for(var gn in Ut)qt.push(Ut[gn]);return qt}(a.values(this._layerConfigs),this.keyCache);vt<mt.length;vt+=1){var xt=mt[vt].map(function(Nt){return Ye._layers[Nt.id]}),dt=xt[0];if(dt.visibility!=="none"){var Et=dt.source||"",pt=this.familiesBySource[Et];pt||(pt=this.familiesBySource[Et]={});var gt=dt.sourceLayer||"_geojsonTileLayer",Mt=pt[gt];Mt||(Mt=pt[gt]=[]),Mt.push(xt)}}};var o=function(et){var nt={},Ye=[];for(var tt in et){var ut=et[tt],Ke=nt[tt]={};for(var De in ut){var Be=ut[+De];if(Be&&Be.bitmap.width!==0&&Be.bitmap.height!==0){var Qe={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};Ye.push(Qe),Ke[De]={rect:Qe,metrics:Be.metrics}}}}var rt=a.potpack(Ye),vt=rt.w,mt=rt.h,xt=new a.AlphaImage({width:vt||1,height:mt||1});for(var dt in et){var Et=et[dt];for(var pt in Et){var gt=Et[+pt];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var Mt=nt[dt][pt].rect;a.AlphaImage.copy(gt.bitmap,xt,{x:0,y:0},{x:Mt.x+1,y:Mt.y+1},gt.bitmap)}}}this.image=xt,this.positions=nt};a.register("GlyphAtlas",o);var t=function(et){this.tileID=new a.OverscaledTileID(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.uid=et.uid,this.zoom=et.zoom,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId};function i(et,nt,Ye){for(var tt=new a.EvaluationParameters(nt),ut=0,Ke=et;ut<Ke.length;ut+=1)Ke[ut].recalculate(tt,Ye)}function n(et,nt){var Ye=a.getArrayBuffer(et.request,function(tt,ut,Ke,De){tt?nt(tt):ut&&nt(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ut)),rawData:ut,cacheControl:Ke,expires:De})});return function(){Ye.cancel(),nt()}}t.prototype.parse=function(et,nt,Ye,tt,ut){var Ke=this;this.status="parsing",this.data=et,this.collisionBoxArray=new a.CollisionBoxArray;var De=new a.DictionaryCoder(Object.keys(et.layers).sort()),Be=new a.FeatureIndex(this.tileID,this.promoteId);Be.bucketLayerIDs=[];var Qe,rt,vt,mt,xt={},dt={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ye},Et=nt.familiesBySource[this.source];for(var pt in Et){var gt=et.layers[pt];if(gt){gt.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+pt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Mt=De.encode(pt),Nt=[],Bt=0;Bt<gt.length;Bt++){var Ut=gt.feature(Bt),Jt=Be.getId(Ut,pt);Nt.push({feature:Ut,id:Jt,index:Bt,sourceLayerIndex:Mt})}for(var Vt=0,Qt=Et[pt];Vt<Qt.length;Vt+=1){var qt=Qt[Vt],gn=qt[0];gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||gn.visibility!=="none"&&(i(qt,this.zoom,Ye),(xt[gn.id]=gn.createBucket({index:Be.bucketLayerIDs.length,layers:qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mt,sourceID:this.source})).populate(Nt,dt,this.tileID.canonical),Be.bucketLayerIDs.push(qt.map(function(tn){return tn.id})))}}}var wn=a.mapObject(dt.glyphDependencies,function(tn){return Object.keys(tn).map(Number)});Object.keys(wn).length?tt.send("getGlyphs",{uid:this.uid,stacks:wn},function(tn,cn){Qe||(Qe=tn,rt=cn,an.call(Ke))}):rt={};var hn=Object.keys(dt.iconDependencies);hn.length?tt.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},function(tn,cn){Qe||(Qe=tn,vt=cn,an.call(Ke))}):vt={};var Xt=Object.keys(dt.patternDependencies);function an(){if(Qe)return ut(Qe);if(rt&&vt&&mt){var tn=new o(rt),cn=new a.ImageAtlas(vt,mt);for(var vn in xt){var yn=xt[vn];yn instanceof a.SymbolBucket?(i(yn.layers,this.zoom,Ye),a.performSymbolLayout(yn,rt,tn.positions,vt,cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):yn.hasPattern&&(yn instanceof a.LineBucket||yn instanceof a.FillBucket||yn instanceof a.FillExtrusionBucket)&&(i(yn.layers,this.zoom,Ye),yn.addFeatures(dt,this.tileID.canonical,cn.patternPositions))}this.status="done",ut(null,{buckets:a.values(xt).filter(function(Pn){return!Pn.isEmpty()}),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tn.image,imageAtlas:cn,glyphMap:this.returnDependencies?rt:null,iconMap:this.returnDependencies?vt:null,glyphPositions:this.returnDependencies?tn.positions:null})}}Xt.length?tt.send("getImages",{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"},function(tn,cn){Qe||(Qe=tn,mt=cn,an.call(Ke))}):mt={},an.call(this)};var r=function(et,nt,Ye,tt){this.actor=et,this.layerIndex=nt,this.availableImages=Ye,this.loadVectorData=tt||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(et,nt){var Ye=this,tt=et.uid;this.loading||(this.loading={});var ut=!!(et&&et.request&&et.request.collectResourceTiming)&&new a.RequestPerformance(et.request),Ke=this.loading[tt]=new t(et);Ke.abort=this.loadVectorData(et,function(De,Be){if(delete Ye.loading[tt],De||!Be)return Ke.status="done",Ye.loaded[tt]=Ke,nt(De);var Qe=Be.rawData,rt={};Be.expires&&(rt.expires=Be.expires),Be.cacheControl&&(rt.cacheControl=Be.cacheControl);var vt={};if(ut){var mt=ut.finish();mt&&(vt.resourceTiming=JSON.parse(JSON.stringify(mt)))}Ke.vectorTile=Be.vectorTile,Ke.parse(Be.vectorTile,Ye.layerIndex,Ye.availableImages,Ye.actor,function(xt,dt){if(xt||!dt)return nt(xt);nt(null,a.extend({rawTileData:Qe.slice(0)},dt,rt,vt))}),Ye.loaded=Ye.loaded||{},Ye.loaded[tt]=Ke})},r.prototype.reloadTile=function(et,nt){var Ye=this,tt=this.loaded,ut=et.uid,Ke=this;if(tt&&tt[ut]){var De=tt[ut];De.showCollisionBoxes=et.showCollisionBoxes;var Be=function(Qe,rt){var vt=De.reloadCallback;vt&&(delete De.reloadCallback,De.parse(De.vectorTile,Ke.layerIndex,Ye.availableImages,Ke.actor,vt)),nt(Qe,rt)};De.status==="parsing"?De.reloadCallback=Be:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Be):Be())}},r.prototype.abortTile=function(et,nt){var Ye=this.loading,tt=et.uid;Ye&&Ye[tt]&&Ye[tt].abort&&(Ye[tt].abort(),delete Ye[tt]),nt()},r.prototype.removeTile=function(et,nt){var Ye=this.loaded,tt=et.uid;Ye&&Ye[tt]&&delete Ye[tt],nt()};var s=a.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(et,nt){var Ye=et.uid,tt=et.encoding,ut=et.rawImageData,Ke=s&&ut instanceof s?this.getImageData(ut):ut,De=new a.DEMData(Ye,Ke,tt);this.loaded=this.loaded||{},this.loaded[Ye]=De,nt(null,De)},l.prototype.getImageData=function(et){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(et.width,et.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=et.width,this.offscreenCanvas.height=et.height,this.offscreenCanvasContext.drawImage(et,0,0,et.width,et.height);var nt=this.offscreenCanvasContext.getImageData(-1,-1,et.width+2,et.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:nt.width,height:nt.height},nt.data)},l.prototype.removeTile=function(et){var nt=this.loaded,Ye=et.uid;nt&&nt[Ye]&&delete nt[Ye]};var u=function et(nt,Ye){var tt,ut=nt&&nt.type;if(ut==="FeatureCollection")for(tt=0;tt<nt.features.length;tt++)et(nt.features[tt],Ye);else if(ut==="GeometryCollection")for(tt=0;tt<nt.geometries.length;tt++)et(nt.geometries[tt],Ye);else if(ut==="Feature")et(nt.geometry,Ye);else if(ut==="Polygon")d(nt.coordinates,Ye);else if(ut==="MultiPolygon")for(tt=0;tt<nt.coordinates.length;tt++)d(nt.coordinates[tt],Ye);return nt};function d(et,nt){if(et.length!==0){c(et[0],nt);for(var Ye=1;Ye<et.length;Ye++)c(et[Ye],!nt)}}function c(et,nt){for(var Ye=0,tt=0,ut=et.length,Ke=ut-1;tt<ut;Ke=tt++)Ye+=(et[tt][0]-et[Ke][0])*(et[Ke][1]+et[tt][1]);Ye>=0!=!!nt&&et.reverse()}var w=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,m=function(et){this._feature=et,this.extent=a.EXTENT,this.type=et.type,this.properties=et.tags,"id"in et&&!isNaN(et.id)&&(this.id=parseInt(et.id,10))};m.prototype.loadGeometry=function(){if(this._feature.type===1){for(var et=[],nt=0,Ye=this._feature.geometry;nt<Ye.length;nt+=1){var tt=Ye[nt];et.push([new a.Point$1(tt[0],tt[1])])}return et}for(var ut=[],Ke=0,De=this._feature.geometry;Ke<De.length;Ke+=1){for(var Be=[],Qe=0,rt=De[Ke];Qe<rt.length;Qe+=1){var vt=rt[Qe];Be.push(new a.Point$1(vt[0],vt[1]))}ut.push(Be)}return ut},m.prototype.toGeoJSON=function(et,nt,Ye){return w.call(this,et,nt,Ye)};var f=function(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=et.length,this._features=et};f.prototype.feature=function(et){return new m(this._features[et])};var x=a.vectorTile.VectorTileFeature,y=v;function v(et,nt){this.options=nt||{},this.features=et,this.length=et.length}function M(et,nt){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=nt||4096}v.prototype.feature=function(et){return new M(this.features[et],this.options.extent)},M.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var nt=0;nt<et.length;nt++){for(var Ye=et[nt],tt=[],ut=0;ut<Ye.length;ut++)tt.push(new a.Point$1(Ye[ut][0],Ye[ut][1]));this.geometry.push(tt)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,nt=1/0,Ye=-1/0,tt=1/0,ut=-1/0,Ke=0;Ke<et.length;Ke++)for(var De=et[Ke],Be=0;Be<De.length;Be++){var Qe=De[Be];nt=Math.min(nt,Qe.x),Ye=Math.max(Ye,Qe.x),tt=Math.min(tt,Qe.y),ut=Math.max(ut,Qe.y)}return[nt,tt,Ye,ut]},M.prototype.toGeoJSON=x.prototype.toGeoJSON;var p=C,S=C,A=function(et,nt){nt=nt||{};var Ye={};for(var tt in et)Ye[tt]=new y(et[tt].features,nt),Ye[tt].name=tt,Ye[tt].version=nt.version,Ye[tt].extent=nt.extent;return C({layers:Ye})},k=y;function C(et){var nt=new a.pbf;return function(Ye,tt){for(var ut in Ye.layers)tt.writeMessage(3,P,Ye.layers[ut])}(et,nt),nt.finish()}function P(et,nt){var Ye;nt.writeVarintField(15,et.version||1),nt.writeStringField(1,et.name||""),nt.writeVarintField(5,et.extent||4096);var tt={keys:[],values:[],keycache:{},valuecache:{}};for(Ye=0;Ye<et.length;Ye++)tt.feature=et.feature(Ye),nt.writeMessage(2,R,tt);var ut=tt.keys;for(Ye=0;Ye<ut.length;Ye++)nt.writeStringField(3,ut[Ye]);var Ke=tt.values;for(Ye=0;Ye<Ke.length;Ye++)nt.writeMessage(4,j,Ke[Ye])}function R(et,nt){var Ye=et.feature;Ye.id!==void 0&&nt.writeVarintField(1,Ye.id),nt.writeMessage(2,O,et),nt.writeVarintField(3,Ye.type),nt.writeMessage(4,V,Ye)}function O(et,nt){var Ye=et.feature,tt=et.keys,ut=et.values,Ke=et.keycache,De=et.valuecache;for(var Be in Ye.properties){var Qe=Ke[Be];Qe===void 0&&(tt.push(Be),Qe=tt.length-1,Ke[Be]=Qe),nt.writeVarint(Qe);var rt=Ye.properties[Be],vt=typeof rt;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(rt=JSON.stringify(rt));var mt=vt+":"+rt,xt=De[mt];xt===void 0&&(ut.push(rt),xt=ut.length-1,De[mt]=xt),nt.writeVarint(xt)}}function X(et,nt){return(nt<<3)+(7&et)}function D(et){return et<<1^et>>31}function V(et,nt){for(var Ye=et.loadGeometry(),tt=et.type,ut=0,Ke=0,De=Ye.length,Be=0;Be<De;Be++){var Qe=Ye[Be],rt=1;tt===1&&(rt=Qe.length),nt.writeVarint(X(1,rt));for(var vt=tt===3?Qe.length-1:Qe.length,mt=0;mt<vt;mt++){mt===1&&tt!==1&&nt.writeVarint(X(2,vt-1));var xt=Qe[mt].x-ut,dt=Qe[mt].y-Ke;nt.writeVarint(D(xt)),nt.writeVarint(D(dt)),ut+=xt,Ke+=dt}tt===3&&nt.writeVarint(X(7,1))}}function j(et,nt){var Ye=typeof et;Ye==="string"?nt.writeStringField(1,et):Ye==="boolean"?nt.writeBooleanField(7,et):Ye==="number"&&(et%1!=0?nt.writeDoubleField(3,et):et<0?nt.writeSVarintField(6,et):nt.writeVarintField(5,et))}function B(et,nt,Ye,tt,ut,Ke){if(!(ut-tt<=Ye)){var De=tt+ut>>1;W(et,nt,De,tt,ut,Ke%2),B(et,nt,Ye,tt,De-1,Ke+1),B(et,nt,Ye,De+1,ut,Ke+1)}}function W(et,nt,Ye,tt,ut,Ke){for(;ut>tt;){if(ut-tt>600){var De=ut-tt+1,Be=Ye-tt+1,Qe=Math.log(De),rt=.5*Math.exp(2*Qe/3),vt=.5*Math.sqrt(Qe*rt*(De-rt)/De)*(Be-De/2<0?-1:1);W(et,nt,Ye,Math.max(tt,Math.floor(Ye-Be*rt/De+vt)),Math.min(ut,Math.floor(Ye+(De-Be)*rt/De+vt)),Ke)}var mt=nt[2*Ye+Ke],xt=tt,dt=ut;for(q(et,nt,tt,Ye),nt[2*ut+Ke]>mt&&q(et,nt,tt,ut);xt<dt;){for(q(et,nt,xt,dt),xt++,dt--;nt[2*xt+Ke]<mt;)xt++;for(;nt[2*dt+Ke]>mt;)dt--}nt[2*tt+Ke]===mt?q(et,nt,tt,dt):q(et,nt,++dt,ut),dt<=Ye&&(tt=dt+1),Ye<=dt&&(ut=dt-1)}}function q(et,nt,Ye,tt){re(et,Ye,tt),re(nt,2*Ye,2*tt),re(nt,2*Ye+1,2*tt+1)}function re(et,nt,Ye){var tt=et[nt];et[nt]=et[Ye],et[Ye]=tt}function ee(et,nt,Ye,tt){var ut=et-Ye,Ke=nt-tt;return ut*ut+Ke*Ke}p.fromVectorTileJs=S,p.fromGeojsonVt=A,p.GeoJSONWrapper=k;var K=function(et){return et[0]},Y=function(et){return et[1]},$=function(et,nt,Ye,tt,ut){nt===void 0&&(nt=K),Ye===void 0&&(Ye=Y),tt===void 0&&(tt=64),ut===void 0&&(ut=Float64Array),this.nodeSize=tt,this.points=et;for(var Ke=et.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ke(et.length),Be=this.coords=new ut(2*et.length),Qe=0;Qe<et.length;Qe++)De[Qe]=Qe,Be[2*Qe]=nt(et[Qe]),Be[2*Qe+1]=Ye(et[Qe]);B(De,Be,tt,0,De.length-1,0)};$.prototype.range=function(et,nt,Ye,tt){return function(ut,Ke,De,Be,Qe,rt,vt){for(var mt,xt,dt=[0,ut.length-1,0],Et=[];dt.length;){var pt=dt.pop(),gt=dt.pop(),Mt=dt.pop();if(gt-Mt<=vt)for(var Nt=Mt;Nt<=gt;Nt++)mt=Ke[2*Nt],xt=Ke[2*Nt+1],mt>=De&&mt<=Qe&&xt>=Be&&xt<=rt&&Et.push(ut[Nt]);else{var Bt=Math.floor((Mt+gt)/2);mt=Ke[2*Bt],xt=Ke[2*Bt+1],mt>=De&&mt<=Qe&&xt>=Be&&xt<=rt&&Et.push(ut[Bt]);var Ut=(pt+1)%2;(pt===0?De<=mt:Be<=xt)&&(dt.push(Mt),dt.push(Bt-1),dt.push(Ut)),(pt===0?Qe>=mt:rt>=xt)&&(dt.push(Bt+1),dt.push(gt),dt.push(Ut))}}return Et}(this.ids,this.coords,et,nt,Ye,tt,this.nodeSize)},$.prototype.within=function(et,nt,Ye){return function(tt,ut,Ke,De,Be,Qe){for(var rt=[0,tt.length-1,0],vt=[],mt=Be*Be;rt.length;){var xt=rt.pop(),dt=rt.pop(),Et=rt.pop();if(dt-Et<=Qe)for(var pt=Et;pt<=dt;pt++)ee(ut[2*pt],ut[2*pt+1],Ke,De)<=mt&&vt.push(tt[pt]);else{var gt=Math.floor((Et+dt)/2),Mt=ut[2*gt],Nt=ut[2*gt+1];ee(Mt,Nt,Ke,De)<=mt&&vt.push(tt[gt]);var Bt=(xt+1)%2;(xt===0?Ke-Be<=Mt:De-Be<=Nt)&&(rt.push(Et),rt.push(gt-1),rt.push(Bt)),(xt===0?Ke+Be>=Mt:De+Be>=Nt)&&(rt.push(gt+1),rt.push(dt),rt.push(Bt))}}return vt}(this.ids,this.coords,et,nt,Ye,this.nodeSize)};var ne={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},ae=function(et){this.options=pe(Object.create(ne),et),this.trees=new Array(this.options.maxZoom+1)};function se(et,nt,Ye,tt,ut){return{x:et,y:nt,zoom:1/0,id:Ye,parentId:-1,numPoints:tt,properties:ut}}function ce(et,nt){var Ye=et.geometry.coordinates,tt=Ye[0],ut=Ye[1];return{x:Te(tt),y:Ce(ut),zoom:1/0,index:nt,parentId:-1}}function me(et){return{type:"Feature",id:et.id,properties:ye(et),geometry:{type:"Point",coordinates:[(tt=et.x,360*(tt-.5)),(nt=et.y,Ye=(180-360*nt)*Math.PI/180,360*Math.atan(Math.exp(Ye))/Math.PI-90)]}};var nt,Ye,tt}function ye(et){var nt=et.numPoints,Ye=nt>=1e4?Math.round(nt/1e3)+"k":nt>=1e3?Math.round(nt/100)/10+"k":nt;return pe(pe({},et.properties),{cluster:!0,cluster_id:et.id,point_count:nt,point_count_abbreviated:Ye})}function Te(et){return et/360+.5}function Ce(et){var nt=Math.sin(et*Math.PI/180),Ye=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return Ye<0?0:Ye>1?1:Ye}function pe(et,nt){for(var Ye in nt)et[Ye]=nt[Ye];return et}function fe(et){return et.x}function Oe(et){return et.y}function Se(et,nt,Ye,tt){for(var ut,Ke=tt,De=Ye-nt>>1,Be=Ye-nt,Qe=et[nt],rt=et[nt+1],vt=et[Ye],mt=et[Ye+1],xt=nt+3;xt<Ye;xt+=3){var dt=Me(et[xt],et[xt+1],Qe,rt,vt,mt);if(dt>Ke)ut=xt,Ke=dt;else if(dt===Ke){var Et=Math.abs(xt-De);Et<Be&&(ut=xt,Be=Et)}}Ke>tt&&(ut-nt>3&&Se(et,nt,ut,tt),et[ut+2]=Ke,Ye-ut>3&&Se(et,ut,Ye,tt))}function Me(et,nt,Ye,tt,ut,Ke){var De=ut-Ye,Be=Ke-tt;if(De!==0||Be!==0){var Qe=((et-Ye)*De+(nt-tt)*Be)/(De*De+Be*Be);Qe>1?(Ye=ut,tt=Ke):Qe>0&&(Ye+=De*Qe,tt+=Be*Qe)}return(De=et-Ye)*De+(Be=nt-tt)*Be}function ue(et,nt,Ye,tt){var ut={id:et===void 0?null:et,type:nt,geometry:Ye,tags:tt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ke){var De=Ke.geometry,Be=Ke.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")le(Ke,De);else if(Be==="Polygon"||Be==="MultiLineString")for(var Qe=0;Qe<De.length;Qe++)le(Ke,De[Qe]);else if(Be==="MultiPolygon")for(Qe=0;Qe<De.length;Qe++)for(var rt=0;rt<De[Qe].length;rt++)le(Ke,De[Qe][rt])}(ut),ut}function le(et,nt){for(var Ye=0;Ye<nt.length;Ye+=3)et.minX=Math.min(et.minX,nt[Ye]),et.minY=Math.min(et.minY,nt[Ye+1]),et.maxX=Math.max(et.maxX,nt[Ye]),et.maxY=Math.max(et.maxY,nt[Ye+1])}function ie(et,nt,Ye,tt){if(nt.geometry){var ut=nt.geometry.coordinates,Ke=nt.geometry.type,De=Math.pow(Ye.tolerance/((1<<Ye.maxZoom)*Ye.extent),2),Be=[],Qe=nt.id;if(Ye.promoteId?Qe=nt.properties[Ye.promoteId]:Ye.generateId&&(Qe=tt||0),Ke==="Point")ge(ut,Be);else if(Ke==="MultiPoint")for(var rt=0;rt<ut.length;rt++)ge(ut[rt],Be);else if(Ke==="LineString")Ae(ut,Be,De,!1);else if(Ke==="MultiLineString"){if(Ye.lineMetrics){for(rt=0;rt<ut.length;rt++)Be=[],Ae(ut[rt],Be,De,!1),et.push(ue(Qe,"LineString",Be,nt.properties));return}we(ut,Be,De,!1)}else if(Ke==="Polygon")we(ut,Be,De,!0);else{if(Ke!=="MultiPolygon"){if(Ke==="GeometryCollection"){for(rt=0;rt<nt.geometry.geometries.length;rt++)ie(et,{id:Qe,geometry:nt.geometry.geometries[rt],properties:nt.properties},Ye,tt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(rt=0;rt<ut.length;rt++){var vt=[];we(ut[rt],vt,De,!0),Be.push(vt)}}et.push(ue(Qe,Ke,Be,nt.properties))}}function ge(et,nt){nt.push(Ne(et[0])),nt.push(He(et[1])),nt.push(0)}function Ae(et,nt,Ye,tt){for(var ut,Ke,De=0,Be=0;Be<et.length;Be++){var Qe=Ne(et[Be][0]),rt=He(et[Be][1]);nt.push(Qe),nt.push(rt),nt.push(0),Be>0&&(De+=tt?(ut*rt-Qe*Ke)/2:Math.sqrt(Math.pow(Qe-ut,2)+Math.pow(rt-Ke,2))),ut=Qe,Ke=rt}var vt=nt.length-3;nt[2]=1,Se(nt,0,vt,Ye),nt[vt+2]=1,nt.size=Math.abs(De),nt.start=0,nt.end=nt.size}function we(et,nt,Ye,tt){for(var ut=0;ut<et.length;ut++){var Ke=[];Ae(et[ut],Ke,Ye,tt),nt.push(Ke)}}function Ne(et){return et/360+.5}function He(et){var nt=Math.sin(et*Math.PI/180),Ye=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return Ye<0?0:Ye>1?1:Ye}function de(et,nt,Ye,tt,ut,Ke,De,Be){if(tt/=nt,Ke>=(Ye/=nt)&&De<tt)return et;if(De<Ye||Ke>=tt)return null;for(var Qe=[],rt=0;rt<et.length;rt++){var vt=et[rt],mt=vt.geometry,xt=vt.type,dt=ut===0?vt.minX:vt.minY,Et=ut===0?vt.maxX:vt.maxY;if(dt>=Ye&&Et<tt)Qe.push(vt);else if(!(Et<Ye||dt>=tt)){var pt=[];if(xt==="Point"||xt==="MultiPoint")Le(mt,pt,Ye,tt,ut);else if(xt==="LineString")Ee(mt,pt,Ye,tt,ut,!1,Be.lineMetrics);else if(xt==="MultiLineString")je(mt,pt,Ye,tt,ut,!1);else if(xt==="Polygon")je(mt,pt,Ye,tt,ut,!0);else if(xt==="MultiPolygon")for(var gt=0;gt<mt.length;gt++){var Mt=[];je(mt[gt],Mt,Ye,tt,ut,!0),Mt.length&&pt.push(Mt)}if(pt.length){if(Be.lineMetrics&&xt==="LineString"){for(gt=0;gt<pt.length;gt++)Qe.push(ue(vt.id,xt,pt[gt],vt.tags));continue}xt!=="LineString"&&xt!=="MultiLineString"||(pt.length===1?(xt="LineString",pt=pt[0]):xt="MultiLineString"),xt!=="Point"&&xt!=="MultiPoint"||(xt=pt.length===3?"Point":"MultiPoint"),Qe.push(ue(vt.id,xt,pt,vt.tags))}}}return Qe.length?Qe:null}function Le(et,nt,Ye,tt,ut){for(var Ke=0;Ke<et.length;Ke+=3){var De=et[Ke+ut];De>=Ye&&De<=tt&&(nt.push(et[Ke]),nt.push(et[Ke+1]),nt.push(et[Ke+2]))}}function Ee(et,nt,Ye,tt,ut,Ke,De){for(var Be,Qe,rt=Re(et),vt=ut===0?Xe:Ze,mt=et.start,xt=0;xt<et.length-3;xt+=3){var dt=et[xt],Et=et[xt+1],pt=et[xt+2],gt=et[xt+3],Mt=et[xt+4],Nt=ut===0?dt:Et,Bt=ut===0?gt:Mt,Ut=!1;De&&(Be=Math.sqrt(Math.pow(dt-gt,2)+Math.pow(Et-Mt,2))),Nt<Ye?Bt>Ye&&(Qe=vt(rt,dt,Et,gt,Mt,Ye),De&&(rt.start=mt+Be*Qe)):Nt>tt?Bt<tt&&(Qe=vt(rt,dt,Et,gt,Mt,tt),De&&(rt.start=mt+Be*Qe)):Fe(rt,dt,Et,pt),Bt<Ye&&Nt>=Ye&&(Qe=vt(rt,dt,Et,gt,Mt,Ye),Ut=!0),Bt>tt&&Nt<=tt&&(Qe=vt(rt,dt,Et,gt,Mt,tt),Ut=!0),!Ke&&Ut&&(De&&(rt.end=mt+Be*Qe),nt.push(rt),rt=Re(et)),De&&(mt+=Be)}var Jt=et.length-3;dt=et[Jt],Et=et[Jt+1],pt=et[Jt+2],(Nt=ut===0?dt:Et)>=Ye&&Nt<=tt&&Fe(rt,dt,Et,pt),Jt=rt.length-3,Ke&&Jt>=3&&(rt[Jt]!==rt[0]||rt[Jt+1]!==rt[1])&&Fe(rt,rt[0],rt[1],rt[2]),rt.length&&nt.push(rt)}function Re(et){var nt=[];return nt.size=et.size,nt.start=et.start,nt.end=et.end,nt}function je(et,nt,Ye,tt,ut,Ke){for(var De=0;De<et.length;De++)Ee(et[De],nt,Ye,tt,ut,Ke,!1)}function Fe(et,nt,Ye,tt){et.push(nt),et.push(Ye),et.push(tt)}function Xe(et,nt,Ye,tt,ut,Ke){var De=(Ke-nt)/(tt-nt);return et.push(Ke),et.push(Ye+(ut-Ye)*De),et.push(1),De}function Ze(et,nt,Ye,tt,ut,Ke){var De=(Ke-Ye)/(ut-Ye);return et.push(nt+(tt-nt)*De),et.push(Ke),et.push(1),De}function at(et,nt){for(var Ye=[],tt=0;tt<et.length;tt++){var ut,Ke=et[tt],De=Ke.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")ut=lt(Ke.geometry,nt);else if(De==="MultiLineString"||De==="Polygon"){ut=[];for(var Be=0;Be<Ke.geometry.length;Be++)ut.push(lt(Ke.geometry[Be],nt))}else if(De==="MultiPolygon")for(ut=[],Be=0;Be<Ke.geometry.length;Be++){for(var Qe=[],rt=0;rt<Ke.geometry[Be].length;rt++)Qe.push(lt(Ke.geometry[Be][rt],nt));ut.push(Qe)}Ye.push(ue(Ke.id,De,ut,Ke.tags))}return Ye}function lt(et,nt){var Ye=[];Ye.size=et.size,et.start!==void 0&&(Ye.start=et.start,Ye.end=et.end);for(var tt=0;tt<et.length;tt+=3)Ye.push(et[tt]+nt,et[tt+1],et[tt+2]);return Ye}function ot(et,nt){if(et.transformed)return et;var Ye,tt,ut,Ke=1<<et.z,De=et.x,Be=et.y;for(Ye=0;Ye<et.features.length;Ye++){var Qe=et.features[Ye],rt=Qe.geometry,vt=Qe.type;if(Qe.geometry=[],vt===1)for(tt=0;tt<rt.length;tt+=2)Qe.geometry.push(bt(rt[tt],rt[tt+1],nt,Ke,De,Be));else for(tt=0;tt<rt.length;tt++){var mt=[];for(ut=0;ut<rt[tt].length;ut+=2)mt.push(bt(rt[tt][ut],rt[tt][ut+1],nt,Ke,De,Be));Qe.geometry.push(mt)}}return et.transformed=!0,et}function bt(et,nt,Ye,tt,ut,Ke){return[Math.round(Ye*(et*tt-ut)),Math.round(Ye*(nt*tt-Ke))]}function wt(et,nt,Ye,tt,ut){for(var Ke=nt===ut.maxZoom?0:ut.tolerance/((1<<nt)*ut.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ye,y:tt,z:nt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Be=0;Be<et.length;Be++){De.numFeatures++,ht(De,et[Be],Ke,ut);var Qe=et[Be].minX,rt=et[Be].minY,vt=et[Be].maxX,mt=et[Be].maxY;Qe<De.minX&&(De.minX=Qe),rt<De.minY&&(De.minY=rt),vt>De.maxX&&(De.maxX=vt),mt>De.maxY&&(De.maxY=mt)}return De}function ht(et,nt,Ye,tt){var ut=nt.geometry,Ke=nt.type,De=[];if(Ke==="Point"||Ke==="MultiPoint")for(var Be=0;Be<ut.length;Be+=3)De.push(ut[Be]),De.push(ut[Be+1]),et.numPoints++,et.numSimplified++;else if(Ke==="LineString")ct(De,ut,et,Ye,!1,!1);else if(Ke==="MultiLineString"||Ke==="Polygon")for(Be=0;Be<ut.length;Be++)ct(De,ut[Be],et,Ye,Ke==="Polygon",Be===0);else if(Ke==="MultiPolygon")for(var Qe=0;Qe<ut.length;Qe++){var rt=ut[Qe];for(Be=0;Be<rt.length;Be++)ct(De,rt[Be],et,Ye,!0,Be===0)}if(De.length){var vt=nt.tags||null;if(Ke==="LineString"&&tt.lineMetrics){for(var mt in vt={},nt.tags)vt[mt]=nt.tags[mt];vt.mapbox_clip_start=ut.start/ut.size,vt.mapbox_clip_end=ut.end/ut.size}var xt={geometry:De,type:Ke==="Polygon"||Ke==="MultiPolygon"?3:Ke==="LineString"||Ke==="MultiLineString"?2:1,tags:vt};nt.id!==null&&(xt.id=nt.id),et.features.push(xt)}}function ct(et,nt,Ye,tt,ut,Ke){var De=tt*tt;if(tt>0&&nt.size<(ut?De:tt))Ye.numPoints+=nt.length/3;else{for(var Be=[],Qe=0;Qe<nt.length;Qe+=3)(tt===0||nt[Qe+2]>De)&&(Ye.numSimplified++,Be.push(nt[Qe]),Be.push(nt[Qe+1])),Ye.numPoints++;ut&&function(rt,vt){for(var mt=0,xt=0,dt=rt.length,Et=dt-2;xt<dt;Et=xt,xt+=2)mt+=(rt[xt]-rt[Et])*(rt[xt+1]+rt[Et+1]);if(mt>0===vt)for(xt=0,dt=rt.length;xt<dt/2;xt+=2){var pt=rt[xt],gt=rt[xt+1];rt[xt]=rt[dt-2-xt],rt[xt+1]=rt[dt-1-xt],rt[dt-2-xt]=pt,rt[dt-1-xt]=gt}}(Be,Ke),et.push(Be)}}function Tt(et,nt){var Ye=(nt=this.options=function(ut,Ke){for(var De in Ke)ut[De]=Ke[De];return ut}(Object.create(this.options),nt)).debug;if(Ye&&console.time("preprocess data"),nt.maxZoom<0||nt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(nt.promoteId&&nt.generateId)throw new Error("promoteId and generateId cannot be used together.");var tt=function(ut,Ke){var De=[];if(ut.type==="FeatureCollection")for(var Be=0;Be<ut.features.length;Be++)ie(De,ut.features[Be],Ke,Be);else ut.type==="Feature"?ie(De,ut,Ke):ie(De,{geometry:ut},Ke);return De}(et,nt);this.tiles={},this.tileCoords=[],Ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",nt.indexMaxZoom,nt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(tt=function(ut,Ke){var De=Ke.buffer/Ke.extent,Be=ut,Qe=de(ut,1,-1-De,De,0,-1,2,Ke),rt=de(ut,1,1-De,2+De,0,-1,2,Ke);return(Qe||rt)&&(Be=de(ut,1,-De,1+De,0,-1,2,Ke)||[],Qe&&(Be=at(Qe,1).concat(Be)),rt&&(Be=Be.concat(at(rt,-1)))),Be}(tt,nt)).length&&this.splitTile(tt,0,0,0),Ye&&(tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Lt(et,nt,Ye){return 32*((1<<et)*Ye+nt)+et}function kt(et,nt){var Ye=et.tileID.canonical;if(!this._geoJSONIndex)return nt(null,null);var tt=this._geoJSONIndex.getTile(Ye.z,Ye.x,Ye.y);if(!tt)return nt(null,null);var ut=new f(tt.features),Ke=p(ut);Ke.byteOffset===0&&Ke.byteLength===Ke.buffer.byteLength||(Ke=new Uint8Array(Ke)),nt(null,{vectorTile:ut,rawData:Ke.buffer})}ae.prototype.load=function(et){var nt=this.options,Ye=nt.log,tt=nt.minZoom,ut=nt.maxZoom,Ke=nt.nodeSize;Ye&&console.time("total time");var De="prepare "+et.length+" points";Ye&&console.time(De),this.points=et;for(var Be=[],Qe=0;Qe<et.length;Qe++)et[Qe].geometry&&Be.push(ce(et[Qe],Qe));this.trees[ut+1]=new $(Be,fe,Oe,Ke,Float32Array),Ye&&console.timeEnd(De);for(var rt=ut;rt>=tt;rt--){var vt=+Date.now();Be=this._cluster(Be,rt),this.trees[rt]=new $(Be,fe,Oe,Ke,Float32Array),Ye&&console.log("z%d: %d clusters in %dms",rt,Be.length,+Date.now()-vt)}return Ye&&console.timeEnd("total time"),this},ae.prototype.getClusters=function(et,nt){var Ye=((et[0]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,et[1])),ut=et[2]===180?180:((et[2]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,et[3]));if(et[2]-et[0]>=360)Ye=-180,ut=180;else if(Ye>ut){var De=this.getClusters([Ye,tt,180,Ke],nt),Be=this.getClusters([-180,tt,ut,Ke],nt);return De.concat(Be)}for(var Qe=this.trees[this._limitZoom(nt)],rt=[],vt=0,mt=Qe.range(Te(Ye),Ce(Ke),Te(ut),Ce(tt));vt<mt.length;vt+=1){var xt=mt[vt],dt=Qe.points[xt];rt.push(dt.numPoints?me(dt):this.points[dt.index])}return rt},ae.prototype.getChildren=function(et){var nt=this._getOriginId(et),Ye=this._getOriginZoom(et),tt="No cluster with the specified id.",ut=this.trees[Ye];if(!ut)throw new Error(tt);var Ke=ut.points[nt];if(!Ke)throw new Error(tt);for(var De=this.options.radius/(this.options.extent*Math.pow(2,Ye-1)),Be=[],Qe=0,rt=ut.within(Ke.x,Ke.y,De);Qe<rt.length;Qe+=1){var vt=rt[Qe],mt=ut.points[vt];mt.parentId===et&&Be.push(mt.numPoints?me(mt):this.points[mt.index])}if(Be.length===0)throw new Error(tt);return Be},ae.prototype.getLeaves=function(et,nt,Ye){nt=nt||10,Ye=Ye||0;var tt=[];return this._appendLeaves(tt,et,nt,Ye,0),tt},ae.prototype.getTile=function(et,nt,Ye){var tt=this.trees[this._limitZoom(et)],ut=Math.pow(2,et),Ke=this.options,De=Ke.extent,Be=Ke.radius/De,Qe=(Ye-Be)/ut,rt=(Ye+1+Be)/ut,vt={features:[]};return this._addTileFeatures(tt.range((nt-Be)/ut,Qe,(nt+1+Be)/ut,rt),tt.points,nt,Ye,ut,vt),nt===0&&this._addTileFeatures(tt.range(1-Be/ut,Qe,1,rt),tt.points,ut,Ye,ut,vt),nt===ut-1&&this._addTileFeatures(tt.range(0,Qe,Be/ut,rt),tt.points,-1,Ye,ut,vt),vt.features.length?vt:null},ae.prototype.getClusterExpansionZoom=function(et){for(var nt=this._getOriginZoom(et)-1;nt<=this.options.maxZoom;){var Ye=this.getChildren(et);if(nt++,Ye.length!==1)break;et=Ye[0].properties.cluster_id}return nt},ae.prototype._appendLeaves=function(et,nt,Ye,tt,ut){for(var Ke=0,De=this.getChildren(nt);Ke<De.length;Ke+=1){var Be=De[Ke],Qe=Be.properties;if(Qe&&Qe.cluster?ut+Qe.point_count<=tt?ut+=Qe.point_count:ut=this._appendLeaves(et,Qe.cluster_id,Ye,tt,ut):ut<tt?ut++:et.push(Be),et.length===Ye)break}return ut},ae.prototype._addTileFeatures=function(et,nt,Ye,tt,ut,Ke){for(var De=0,Be=et;De<Be.length;De+=1){var Qe=nt[Be[De]],rt=Qe.numPoints,vt={type:1,geometry:[[Math.round(this.options.extent*(Qe.x*ut-Ye)),Math.round(this.options.extent*(Qe.y*ut-tt))]],tags:rt?ye(Qe):this.points[Qe.index].properties},mt=void 0;rt?mt=Qe.id:this.options.generateId?mt=Qe.index:this.points[Qe.index].id&&(mt=this.points[Qe.index].id),mt!==void 0&&(vt.id=mt),Ke.features.push(vt)}},ae.prototype._limitZoom=function(et){return Math.max(this.options.minZoom,Math.min(et,this.options.maxZoom+1))},ae.prototype._cluster=function(et,nt){for(var Ye=[],tt=this.options,ut=tt.radius,Ke=tt.extent,De=tt.reduce,Be=ut/(Ke*Math.pow(2,nt)),Qe=0;Qe<et.length;Qe++){var rt=et[Qe];if(!(rt.zoom<=nt)){rt.zoom=nt;for(var vt=this.trees[nt+1],mt=vt.within(rt.x,rt.y,Be),xt=rt.numPoints||1,dt=rt.x*xt,Et=rt.y*xt,pt=De&&xt>1?this._map(rt,!0):null,gt=(Qe<<5)+(nt+1)+this.points.length,Mt=0,Nt=mt;Mt<Nt.length;Mt+=1){var Bt=Nt[Mt],Ut=vt.points[Bt];if(!(Ut.zoom<=nt)){Ut.zoom=nt;var Jt=Ut.numPoints||1;dt+=Ut.x*Jt,Et+=Ut.y*Jt,xt+=Jt,Ut.parentId=gt,De&&(pt||(pt=this._map(rt,!0)),De(pt,this._map(Ut)))}}xt===1?Ye.push(rt):(rt.parentId=gt,Ye.push(se(dt/xt,Et/xt,gt,xt,pt)))}}return Ye},ae.prototype._getOriginId=function(et){return et-this.points.length>>5},ae.prototype._getOriginZoom=function(et){return(et-this.points.length)%32},ae.prototype._map=function(et,nt){if(et.numPoints)return nt?pe({},et.properties):et.properties;var Ye=this.points[et.index].properties,tt=this.options.map(Ye);return nt&&tt===Ye?pe({},tt):tt},Tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tt.prototype.splitTile=function(et,nt,Ye,tt,ut,Ke,De){for(var Be=[et,nt,Ye,tt],Qe=this.options,rt=Qe.debug;Be.length;){tt=Be.pop(),Ye=Be.pop(),nt=Be.pop(),et=Be.pop();var vt=1<<nt,mt=Lt(nt,Ye,tt),xt=this.tiles[mt];if(!xt&&(rt>1&&console.time("creation"),xt=this.tiles[mt]=wt(et,nt,Ye,tt,Qe),this.tileCoords.push({z:nt,x:Ye,y:tt}),rt)){rt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",nt,Ye,tt,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));var dt="z"+nt;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(xt.source=et,ut){if(nt===Qe.maxZoom||nt===ut)continue;var Et=1<<ut-nt;if(Ye!==Math.floor(Ke/Et)||tt!==Math.floor(De/Et))continue}else if(nt===Qe.indexMaxZoom||xt.numPoints<=Qe.indexMaxPoints)continue;if(xt.source=null,et.length!==0){rt>1&&console.time("clipping");var pt,gt,Mt,Nt,Bt,Ut,Jt=.5*Qe.buffer/Qe.extent,Vt=.5-Jt,Qt=.5+Jt,qt=1+Jt;pt=gt=Mt=Nt=null,Bt=de(et,vt,Ye-Jt,Ye+Qt,0,xt.minX,xt.maxX,Qe),Ut=de(et,vt,Ye+Vt,Ye+qt,0,xt.minX,xt.maxX,Qe),et=null,Bt&&(pt=de(Bt,vt,tt-Jt,tt+Qt,1,xt.minY,xt.maxY,Qe),gt=de(Bt,vt,tt+Vt,tt+qt,1,xt.minY,xt.maxY,Qe),Bt=null),Ut&&(Mt=de(Ut,vt,tt-Jt,tt+Qt,1,xt.minY,xt.maxY,Qe),Nt=de(Ut,vt,tt+Vt,tt+qt,1,xt.minY,xt.maxY,Qe),Ut=null),rt>1&&console.timeEnd("clipping"),Be.push(pt||[],nt+1,2*Ye,2*tt),Be.push(gt||[],nt+1,2*Ye,2*tt+1),Be.push(Mt||[],nt+1,2*Ye+1,2*tt),Be.push(Nt||[],nt+1,2*Ye+1,2*tt+1)}}},Tt.prototype.getTile=function(et,nt,Ye){var tt=this.options,ut=tt.extent,Ke=tt.debug;if(et<0||et>24)return null;var De=1<<et,Be=Lt(et,nt=(nt%De+De)%De,Ye);if(this.tiles[Be])return ot(this.tiles[Be],ut);Ke>1&&console.log("drilling down to z%d-%d-%d",et,nt,Ye);for(var Qe,rt=et,vt=nt,mt=Ye;!Qe&&rt>0;)rt--,vt=Math.floor(vt/2),mt=Math.floor(mt/2),Qe=this.tiles[Lt(rt,vt,mt)];return Qe&&Qe.source?(Ke>1&&console.log("found parent tile z%d-%d-%d",rt,vt,mt),Ke>1&&console.time("drilling down"),this.splitTile(Qe.source,rt,vt,mt,et,nt,Ye),Ke>1&&console.timeEnd("drilling down"),this.tiles[Be]?ot(this.tiles[Be],ut):null):null};var Ot=function(et){function nt(Ye,tt,ut,Ke){et.call(this,Ye,tt,ut,kt),Ke&&(this.loadGeoJSON=Ke)}return et&&(nt.__proto__=et),nt.prototype=Object.create(et&&et.prototype),nt.prototype.constructor=nt,nt.prototype.loadData=function(Ye,tt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=tt,this._pendingLoadDataParams=Ye,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},nt.prototype._loadData=function(){var Ye=this;if(this._pendingCallback&&this._pendingLoadDataParams){var tt=this._pendingCallback,ut=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ke=!!(ut&&ut.request&&ut.request.collectResourceTiming)&&new a.RequestPerformance(ut.request);this.loadGeoJSON(ut,function(De,Be){if(De||!Be)return tt(De);if(typeof Be!="object")return tt(new Error("Input data given to '"+ut.source+"' is not a valid GeoJSON object."));u(Be,!0);try{Ye._geoJSONIndex=ut.cluster?new ae(function(vt){var mt=vt.superclusterOptions,xt=vt.clusterProperties;if(!xt||!mt)return mt;for(var dt={},Et={},pt={accumulated:null,zoom:0},gt={properties:null},Mt=Object.keys(xt),Nt=0,Bt=Mt;Nt<Bt.length;Nt+=1){var Ut=Bt[Nt],Jt=xt[Ut],Vt=Jt[0],Qt=Jt[1],qt=a.createExpression(Qt),gn=a.createExpression(typeof Vt=="string"?[Vt,["accumulated"],["get",Ut]]:Vt);dt[Ut]=qt.value,Et[Ut]=gn.value}return mt.map=function(wn){gt.properties=wn;for(var hn={},Xt=0,an=Mt;Xt<an.length;Xt+=1){var tn=an[Xt];hn[tn]=dt[tn].evaluate(pt,gt)}return hn},mt.reduce=function(wn,hn){gt.properties=hn;for(var Xt=0,an=Mt;Xt<an.length;Xt+=1){var tn=an[Xt];pt.accumulated=wn[tn],wn[tn]=Et[tn].evaluate(pt,gt)}},mt}(ut)).load(Be.features):function(vt,mt){return new Tt(vt,mt)}(Be,ut.geojsonVtOptions)}catch(vt){return tt(vt)}Ye.loaded={};var Qe={};if(Ke){var rt=Ke.finish();rt&&(Qe.resourceTiming={},Qe.resourceTiming[ut.source]=JSON.parse(JSON.stringify(rt)))}tt(null,Qe)})}},nt.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},nt.prototype.reloadTile=function(Ye,tt){var ut=this.loaded,Ke=Ye.uid;return ut&&ut[Ke]?et.prototype.reloadTile.call(this,Ye,tt):this.loadTile(Ye,tt)},nt.prototype.loadGeoJSON=function(Ye,tt){if(Ye.request)a.getJSON(Ye.request,tt);else{if(typeof Ye.data!="string")return tt(new Error("Input data given to '"+Ye.source+"' is not a valid GeoJSON object."));try{return tt(null,JSON.parse(Ye.data))}catch{return tt(new Error("Input data given to '"+Ye.source+"' is not a valid GeoJSON object."))}}},nt.prototype.removeSource=function(Ye,tt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),tt()},nt.prototype.getClusterExpansionZoom=function(Ye,tt){try{tt(null,this._geoJSONIndex.getClusterExpansionZoom(Ye.clusterId))}catch(ut){tt(ut)}},nt.prototype.getClusterChildren=function(Ye,tt){try{tt(null,this._geoJSONIndex.getChildren(Ye.clusterId))}catch(ut){tt(ut)}},nt.prototype.getClusterLeaves=function(Ye,tt){try{tt(null,this._geoJSONIndex.getLeaves(Ye.clusterId,Ye.limit,Ye.offset))}catch(ut){tt(ut)}},nt}(r),Pt=function(et){var nt=this;this.self=et,this.actor=new a.Actor(et,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:Ot},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ye,tt){if(nt.workerSourceTypes[Ye])throw new Error('Worker source with name "'+Ye+'" already registered.');nt.workerSourceTypes[Ye]=tt},this.self.registerRTLTextPlugin=function(Ye){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ye.applyArabicShaping,a.plugin.processBidirectionalText=Ye.processBidirectionalText,a.plugin.processStyledBidirectionalText=Ye.processStyledBidirectionalText}};return Pt.prototype.setReferrer=function(et,nt){this.referrer=nt},Pt.prototype.setImages=function(et,nt,Ye){for(var tt in this.availableImages[et]=nt,this.workerSources[et]){var ut=this.workerSources[et][tt];for(var Ke in ut)ut[Ke].availableImages=nt}Ye()},Pt.prototype.setLayers=function(et,nt,Ye){this.getLayerIndex(et).replace(nt),Ye()},Pt.prototype.updateLayers=function(et,nt,Ye){this.getLayerIndex(et).update(nt.layers,nt.removedIds),Ye()},Pt.prototype.loadTile=function(et,nt,Ye){this.getWorkerSource(et,nt.type,nt.source).loadTile(nt,Ye)},Pt.prototype.loadDEMTile=function(et,nt,Ye){this.getDEMWorkerSource(et,nt.source).loadTile(nt,Ye)},Pt.prototype.reloadTile=function(et,nt,Ye){this.getWorkerSource(et,nt.type,nt.source).reloadTile(nt,Ye)},Pt.prototype.abortTile=function(et,nt,Ye){this.getWorkerSource(et,nt.type,nt.source).abortTile(nt,Ye)},Pt.prototype.removeTile=function(et,nt,Ye){this.getWorkerSource(et,nt.type,nt.source).removeTile(nt,Ye)},Pt.prototype.removeDEMTile=function(et,nt){this.getDEMWorkerSource(et,nt.source).removeTile(nt)},Pt.prototype.removeSource=function(et,nt,Ye){if(this.workerSources[et]&&this.workerSources[et][nt.type]&&this.workerSources[et][nt.type][nt.source]){var tt=this.workerSources[et][nt.type][nt.source];delete this.workerSources[et][nt.type][nt.source],tt.removeSource!==void 0?tt.removeSource(nt,Ye):Ye()}},Pt.prototype.loadWorkerSource=function(et,nt,Ye){try{this.self.importScripts(nt.url),Ye()}catch(tt){Ye(tt.toString())}},Pt.prototype.syncRTLPluginState=function(et,nt,Ye){try{a.plugin.setState(nt);var tt=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&tt!=null){this.self.importScripts(tt);var ut=a.plugin.isParsed();Ye(ut?void 0:new Error("RTL Text Plugin failed to import scripts from "+tt),ut)}}catch(Ke){Ye(Ke.toString())}},Pt.prototype.getAvailableImages=function(et){var nt=this.availableImages[et];return nt||(nt=[]),nt},Pt.prototype.getLayerIndex=function(et){var nt=this.layerIndexes[et];return nt||(nt=this.layerIndexes[et]=new h),nt},Pt.prototype.getWorkerSource=function(et,nt,Ye){var tt=this;if(this.workerSources[et]||(this.workerSources[et]={}),this.workerSources[et][nt]||(this.workerSources[et][nt]={}),!this.workerSources[et][nt][Ye]){var ut={send:function(Ke,De,Be){tt.actor.send(Ke,De,Be,et)}};this.workerSources[et][nt][Ye]=new this.workerSourceTypes[nt](ut,this.getLayerIndex(et),this.getAvailableImages(et))}return this.workerSources[et][nt][Ye]},Pt.prototype.getDEMWorkerSource=function(et,nt){return this.demWorkerSources[et]||(this.demWorkerSources[et]={}),this.demWorkerSources[et][nt]||(this.demWorkerSources[et][nt]=new l),this.demWorkerSources[et][nt]},Pt.prototype.enforceCacheSizeLimit=function(et,nt){a.enforceCacheSizeLimit(nt)},typeof WorkerGlobalScope<"u"&&a.window!==void 0&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new Pt(a.window)),Pt}),b(0,function(a){var _=a.createCommonjsModule(function(N){function G(xe){return!H(xe)}function H(xe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var U,te,oe=new Blob([""],{type:"text/javascript"}),_e=URL.createObjectURL(oe);try{te=new Worker(_e),U=!0}catch{U=!1}return te&&te.terminate(),URL.revokeObjectURL(_e),U}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var U=document.createElement("canvas");U.width=U.height=1;var te=U.getContext("2d");if(!te)return!1;var oe=te.getImageData(0,0,1,1);return oe&&oe.width===U.width}()?(Pe=xe&&xe.failIfMajorPerformanceCaveat,Q[Pe]===void 0&&(Q[Pe]=function(U){var te=function(_e){var ke=document.createElement("canvas"),ze=Object.create(G.webGLContextAttributes);return ze.failIfMajorPerformanceCaveat=_e,ke.probablySupportsContext?ke.probablySupportsContext("webgl",ze)||ke.probablySupportsContext("experimental-webgl",ze):ke.supportsContext?ke.supportsContext("webgl",ze)||ke.supportsContext("experimental-webgl",ze):ke.getContext("webgl",ze)||ke.getContext("experimental-webgl",ze)}(U);if(!te)return!1;var oe=te.createShader(te.VERTEX_SHADER);return!(!oe||te.isContextLost())&&(te.shaderSource(oe,"void main() {}"),te.compileShader(oe),te.getShaderParameter(oe,te.COMPILE_STATUS)===!0)}(Pe)),Q[Pe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Pe}N.exports?N.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=H);var Q={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),g={create:function(N,G,H){var Q=a.window.document.createElement(N);return G!==void 0&&(Q.className=G),H&&H.appendChild(Q),Q},createNS:function(N,G){return a.window.document.createElementNS(N,G)}},h=a.window.document.documentElement.style;function o(N){if(!h)return N[0];for(var G=0;G<N.length;G++)if(N[G]in h)return N[G];return N[0]}var t,i=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);g.disableDrag=function(){h&&i&&(t=h[i],h[i]="none")},g.enableDrag=function(){h&&i&&(h[i]=t)};var n=o(["transform","WebkitTransform"]);g.setTransform=function(N,G){N.style[n]=G};var r=!1;try{var s=Object.defineProperty({},"passive",{get:function(){r=!0}});a.window.addEventListener("test",s,s),a.window.removeEventListener("test",s,s)}catch{r=!1}g.addEventListener=function(N,G,H,Q){Q===void 0&&(Q={}),"passive"in Q&&r?N.addEventListener(G,H,Q):N.addEventListener(G,H,Q.capture)},g.removeEventListener=function(N,G,H,Q){Q===void 0&&(Q={}),"passive"in Q&&r?N.removeEventListener(G,H,Q):N.removeEventListener(G,H,Q.capture)};var l=function(N){N.preventDefault(),N.stopPropagation(),a.window.removeEventListener("click",l,!0)};function u(N){var G=N.userImage;return!!(G&&G.render&&G.render())&&(N.data.replace(new Uint8Array(G.data.buffer)),!0)}g.suppressClick=function(){a.window.addEventListener("click",l,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",l,!0)},0)},g.mousePos=function(N,G){var H=N.getBoundingClientRect();return new a.Point(G.clientX-H.left-N.clientLeft,G.clientY-H.top-N.clientTop)},g.touchPos=function(N,G){for(var H=N.getBoundingClientRect(),Q=[],xe=0;xe<G.length;xe++)Q.push(new a.Point(G[xe].clientX-H.left-N.clientLeft,G[xe].clientY-H.top-N.clientTop));return Q},g.mouseButton=function(N){return a.window.InstallTrigger!==void 0&&N.button===2&&N.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:N.button},g.remove=function(N){N.parentNode&&N.parentNode.removeChild(N)};var d=function(N){function G(){N.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var Q=0,xe=this.requestors;Q<xe.length;Q+=1){var Pe=xe[Q],U=Pe.ids,te=Pe.callback;this._notify(U,te)}this.requestors=[]}},G.prototype.getImage=function(H){return this.images[H]},G.prototype.addImage=function(H,Q){this._validate(H,Q)&&(this.images[H]=Q)},G.prototype._validate=function(H,Q){var xe=!0;return this._validateStretch(Q.stretchX,Q.data&&Q.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),xe=!1),this._validateStretch(Q.stretchY,Q.data&&Q.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),xe=!1),this._validateContent(Q.content,Q)||(this.fire(new a.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),xe=!1),xe},G.prototype._validateStretch=function(H,Q){if(!H)return!0;for(var xe=0,Pe=0,U=H;Pe<U.length;Pe+=1){var te=U[Pe];if(te[0]<xe||te[1]<te[0]||Q<te[1])return!1;xe=te[1]}return!0},G.prototype._validateContent=function(H,Q){return!(H&&(H.length!==4||H[0]<0||Q.data.width<H[0]||H[1]<0||Q.data.height<H[1]||H[2]<0||Q.data.width<H[2]||H[3]<0||Q.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},G.prototype.updateImage=function(H,Q){var xe=this.images[H];Q.version=xe.version+1,this.images[H]=Q,this.updatedImages[H]=!0},G.prototype.removeImage=function(H){var Q=this.images[H];delete this.images[H],delete this.patterns[H],Q.userImage&&Q.userImage.onRemove&&Q.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(H,Q){var xe=!0;if(!this.isLoaded())for(var Pe=0,U=H;Pe<U.length;Pe+=1){var te=U[Pe];this.images[te]||(xe=!1)}this.isLoaded()||xe?this._notify(H,Q):this.requestors.push({ids:H,callback:Q})},G.prototype._notify=function(H,Q){for(var xe={},Pe=0,U=H;Pe<U.length;Pe+=1){var te=U[Pe];this.images[te]||this.fire(new a.Event("styleimagemissing",{id:te}));var oe=this.images[te];oe?xe[te]={data:oe.data.clone(),pixelRatio:oe.pixelRatio,sdf:oe.sdf,version:oe.version,stretchX:oe.stretchX,stretchY:oe.stretchY,content:oe.content,hasRenderCallback:!!(oe.userImage&&oe.userImage.render)}:a.warnOnce('Image "'+te+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Q(null,xe)},G.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},G.prototype.getPattern=function(H){var Q=this.patterns[H],xe=this.getImage(H);if(!xe)return null;if(Q&&Q.position.version===xe.version)return Q.position;if(Q)Q.position.version=xe.version;else{var Pe={w:xe.data.width+2,h:xe.data.height+2,x:0,y:0},U=new a.ImagePosition(Pe,xe);this.patterns[H]={bin:Pe,position:U}}return this._updatePatternAtlas(),this.patterns[H].position},G.prototype.bind=function(H){var Q=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(H,this.atlasImage,Q.RGBA),this.atlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var H=[];for(var Q in this.patterns)H.push(this.patterns[Q].bin);var xe=a.potpack(H),Pe=xe.w,U=xe.h,te=this.atlasImage;for(var oe in te.resize({width:Pe||1,height:U||1}),this.patterns){var _e=this.patterns[oe].bin,ke=_e.x+1,ze=_e.y+1,Ge=this.images[oe].data,qe=Ge.width,Je=Ge.height;a.RGBAImage.copy(Ge,te,{x:0,y:0},{x:ke,y:ze},{width:qe,height:Je}),a.RGBAImage.copy(Ge,te,{x:0,y:Je-1},{x:ke,y:ze-1},{width:qe,height:1}),a.RGBAImage.copy(Ge,te,{x:0,y:0},{x:ke,y:ze+Je},{width:qe,height:1}),a.RGBAImage.copy(Ge,te,{x:qe-1,y:0},{x:ke-1,y:ze},{width:1,height:Je}),a.RGBAImage.copy(Ge,te,{x:0,y:0},{x:ke+qe,y:ze},{width:1,height:Je})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(H){for(var Q=0,xe=H;Q<xe.length;Q+=1){var Pe=xe[Q];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var U=this.images[Pe];u(U)&&this.updateImage(Pe,U)}}},G}(a.Evented),c=f,w=f,m=1e20;function f(N,G,H,Q,xe,Pe){this.fontSize=N||24,this.buffer=G===void 0?3:G,this.cutoff=Q||.25,this.fontFamily=xe||"sans-serif",this.fontWeight=Pe||"normal",this.radius=H||8;var U=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=U,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.d=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Int16Array(U),this.middle=Math.round(U/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function x(N,G,H,Q,xe,Pe,U){for(var te=0;te<G;te++){for(var oe=0;oe<H;oe++)Q[oe]=N[oe*G+te];for(y(Q,xe,Pe,U,H),oe=0;oe<H;oe++)N[oe*G+te]=xe[oe]}for(oe=0;oe<H;oe++){for(te=0;te<G;te++)Q[te]=N[oe*G+te];for(y(Q,xe,Pe,U,G),te=0;te<G;te++)N[oe*G+te]=Math.sqrt(xe[te])}}function y(N,G,H,Q,xe){H[0]=0,Q[0]=-m,Q[1]=+m;for(var Pe=1,U=0;Pe<xe;Pe++){for(var te=(N[Pe]+Pe*Pe-(N[H[U]]+H[U]*H[U]))/(2*Pe-2*H[U]);te<=Q[U];)U--,te=(N[Pe]+Pe*Pe-(N[H[U]]+H[U]*H[U]))/(2*Pe-2*H[U]);H[++U]=Pe,Q[U]=te,Q[U+1]=+m}for(Pe=0,U=0;Pe<xe;Pe++){for(;Q[U+1]<Pe;)U++;G[Pe]=(Pe-H[U])*(Pe-H[U])+N[H[U]]}}f.prototype.draw=function(N){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(N,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),Q=0;Q<this.size*this.size;Q++){var xe=G.data[4*Q+3]/255;this.gridOuter[Q]=xe===1?0:xe===0?m:Math.pow(Math.max(0,.5-xe),2),this.gridInner[Q]=xe===1?m:xe===0?0:Math.pow(Math.max(0,xe-.5),2)}for(x(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),x(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Q=0;Q<this.size*this.size;Q++){var Pe=this.gridOuter[Q]-this.gridInner[Q];H[Q]=Math.max(0,Math.min(255,Math.round(255-255*(Pe/this.radius+this.cutoff))))}return H},c.default=w;var v=function(N,G){this.requestManager=N,this.localIdeographFontFamily=G,this.entries={}};v.prototype.setURL=function(N){this.url=N},v.prototype.getGlyphs=function(N,G){var H=this,Q=[];for(var xe in N)for(var Pe=0,U=N[xe];Pe<U.length;Pe+=1){var te=U[Pe];Q.push({stack:xe,id:te})}a.asyncAll(Q,function(oe,_e){var ke=oe.stack,ze=oe.id,Ge=H.entries[ke];Ge||(Ge=H.entries[ke]={glyphs:{},requests:{},ranges:{}});var qe=Ge.glyphs[ze];if(qe===void 0){if(qe=H._tinySDF(Ge,ke,ze))return Ge.glyphs[ze]=qe,void _e(null,{stack:ke,id:ze,glyph:qe});var Je=Math.floor(ze/256);if(256*Je>65535)_e(new Error("glyphs > 65535 not supported"));else if(Ge.ranges[Je])_e(null,{stack:ke,id:ze,glyph:qe});else{var $e=Ge.requests[Je];$e||($e=Ge.requests[Je]=[],v.loadGlyphRange(ke,Je,H.url,H.requestManager,function(st,yt){if(yt){for(var _t in yt)H._doesCharSupportLocalGlyph(+_t)||(Ge.glyphs[+_t]=yt[+_t]);Ge.ranges[Je]=!0}for(var It=0,zt=$e;It<zt.length;It+=1)(0,zt[It])(st,yt);delete Ge.requests[Je]})),$e.push(function(st,yt){st?_e(st):yt&&_e(null,{stack:ke,id:ze,glyph:yt[ze]||null})})}}else _e(null,{stack:ke,id:ze,glyph:qe})},function(oe,_e){if(oe)G(oe);else if(_e){for(var ke={},ze=0,Ge=_e;ze<Ge.length;ze+=1){var qe=Ge[ze],Je=qe.stack,$e=qe.id,st=qe.glyph;(ke[Je]||(ke[Je]={}))[$e]=st&&{id:st.id,bitmap:st.bitmap.clone(),metrics:st.metrics}}G(null,ke)}})},v.prototype._doesCharSupportLocalGlyph=function(N){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](N)||a.isChar["Hangul Syllables"](N)||a.isChar.Hiragana(N)||a.isChar.Katakana(N))},v.prototype._tinySDF=function(N,G,H){var Q=this.localIdeographFontFamily;if(Q&&this._doesCharSupportLocalGlyph(H)){var xe=N.tinySDF;if(!xe){var Pe="400";/bold/i.test(G)?Pe="900":/medium/i.test(G)?Pe="500":/light/i.test(G)&&(Pe="200"),xe=N.tinySDF=new v.TinySDF(24,3,8,.25,Q,Pe)}return{id:H,bitmap:new a.AlphaImage({width:30,height:30},xe.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(N,G,H,Q,xe){var Pe=256*G,U=Pe+255,te=Q.transformRequest(Q.normalizeGlyphsURL(H).replace("{fontstack}",N).replace("{range}",Pe+"-"+U),a.ResourceType.Glyphs);a.getArrayBuffer(te,function(oe,_e){if(oe)xe(oe);else if(_e){for(var ke={},ze=0,Ge=a.parseGlyphPBF(_e);ze<Ge.length;ze+=1){var qe=Ge[ze];ke[qe.id]=qe}xe(null,ke)}})},v.TinySDF=c;var M=function(){this.specification=a.styleSpec.light.position};M.prototype.possiblyEvaluate=function(N,G){return a.sphericalToCartesian(N.expression.evaluate(G))},M.prototype.interpolate=function(N,G,H){return{x:a.number(N.x,G.x,H),y:a.number(N.y,G.y,H),z:a.number(N.z,G.z,H)}};var p=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new M,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),S="-transition",A=function(N){function G(H){N.call(this),this._transitionable=new a.Transitionable(p),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(H,Q){if(Q===void 0&&(Q={}),!this._validate(a.validateLight,H,Q))for(var xe in H){var Pe=H[xe];a.endsWith(xe,S)?this._transitionable.setTransition(xe.slice(0,-11),Pe):this._transitionable.setValue(xe,Pe)}},G.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},G.prototype._validate=function(H,Q,xe){return(!xe||xe.validate!==!1)&&a.emitValidationErrors(this,H.call(a.validateStyle,a.extend({value:Q,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},G}(a.Evented),k=function(N,G){this.width=N,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};k.prototype.getDash=function(N,G){var H=N.join(",")+String(G);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(N,G)),this.dashEntry[H]},k.prototype.getDashRanges=function(N,G,H){var Q=[],xe=N.length%2==1?-N[N.length-1]*H:0,Pe=N[0]*H,U=!0;Q.push({left:xe,right:Pe,isDash:U,zeroLength:N[0]===0});for(var te=N[0],oe=1;oe<N.length;oe++){U=!U;var _e=N[oe];xe=te*H,Pe=(te+=_e)*H,Q.push({left:xe,right:Pe,isDash:U,zeroLength:_e===0})}return Q},k.prototype.addRoundDash=function(N,G,H){for(var Q=G/2,xe=-H;xe<=H;xe++)for(var Pe=this.nextRow+H+xe,U=this.width*Pe,te=0,oe=N[te],_e=0;_e<this.width;_e++){_e/oe.right>1&&(oe=N[++te]);var ke=Math.abs(_e-oe.left),ze=Math.abs(_e-oe.right),Ge=Math.min(ke,ze),qe=void 0,Je=xe/H*(Q+1);if(oe.isDash){var $e=Q-Math.abs(Je);qe=Math.sqrt(Ge*Ge+$e*$e)}else qe=Q-Math.sqrt(Ge*Ge+Je*Je);this.data[U+_e]=Math.max(0,Math.min(255,qe+128))}},k.prototype.addRegularDash=function(N){for(var G=N.length-1;G>=0;--G){var H=N[G],Q=N[G+1];H.zeroLength?N.splice(G,1):Q&&Q.isDash===H.isDash&&(Q.left=H.left,N.splice(G,1))}var xe=N[0],Pe=N[N.length-1];xe.isDash===Pe.isDash&&(xe.left=Pe.left-this.width,Pe.right=xe.right+this.width);for(var U=this.width*this.nextRow,te=0,oe=N[te],_e=0;_e<this.width;_e++){_e/oe.right>1&&(oe=N[++te]);var ke=Math.abs(_e-oe.left),ze=Math.abs(_e-oe.right),Ge=Math.min(ke,ze),qe=oe.isDash?Ge:-Ge;this.data[U+_e]=Math.max(0,Math.min(255,qe+128))}},k.prototype.addDash=function(N,G){var H=G?7:0,Q=2*H+1;if(this.nextRow+Q>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var xe=0,Pe=0;Pe<N.length;Pe++)xe+=N[Pe];if(xe!==0){var U=this.width/xe,te=this.getDashRanges(N,this.width,U);G?this.addRoundDash(te,U,H):this.addRegularDash(te)}var oe={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:xe};return this.nextRow+=Q,this.dirty=!0,oe},k.prototype.bind=function(N){var G=N.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var C=function N(G,H){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var Q=this.workerPool.acquire(this.id),xe=0;xe<Q.length;xe++){var Pe=Q[xe],U=new N.Actor(Pe,H,this.id);U.name="Worker "+xe,this.actors.push(U)}};function P(N,G,H){var Q=function(xe,Pe){if(xe)return H(xe);if(Pe){var U=a.pick(a.extend(Pe,N),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Pe.vector_layers&&(U.vectorLayers=Pe.vector_layers,U.vectorLayerIds=U.vectorLayers.map(function(te){return te.id})),U.tiles=G.canonicalizeTileset(U,N.url),H(null,U)}};return N.url?a.getJSON(G.transformRequest(G.normalizeSourceURL(N.url),a.ResourceType.Source),Q):a.browser.frame(function(){return Q(null,N)})}C.prototype.broadcast=function(N,G,H){H=H||function(){},a.asyncAll(this.actors,function(Q,xe){Q.send(N,G,xe)},H)},C.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},C.prototype.remove=function(){this.actors.forEach(function(N){N.remove()}),this.actors=[],this.workerPool.release(this.id)},C.Actor=a.Actor;var R=function(N,G,H){this.bounds=a.LngLatBounds.convert(this.validateBounds(N)),this.minzoom=G||0,this.maxzoom=H||24};R.prototype.validateBounds=function(N){return Array.isArray(N)&&N.length===4?[Math.max(-180,N[0]),Math.max(-90,N[1]),Math.min(180,N[2]),Math.min(90,N[3])]:[-180,-90,180,90]},R.prototype.contains=function(N){var G=Math.pow(2,N.z),H=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*G),Q=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*G),xe=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*G),Pe=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*G);return N.x>=H&&N.x<xe&&N.y>=Q&&N.y<Pe};var O=function(N){function G(H,Q,xe,Pe){if(N.call(this),this.id=H,this.dispatcher=xe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Pe)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(Q,xe){H._tileJSONRequest=null,H._loaded=!0,Q?H.fire(new a.ErrorEvent(Q)):xe&&(a.extend(H,xe),xe.bounds&&(H.tileBounds=new R(xe.bounds,H.minzoom,H.maxzoom)),a.postTurnstileEvent(xe.tiles,H.map._requestManager._customAccessToken),a.postMapLoadEvent(xe.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return a.extend({},this._options)},G.prototype.loadTile=function(H,Q){var xe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(xe,a.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function U(te,oe){return delete H.request,H.aborted?Q(null):te&&te.status!==404?Q(te):(oe&&oe.resourceTiming&&(H.resourceTiming=oe.resourceTiming),this.map._refreshExpiredTiles&&oe&&H.setExpiryData(oe),H.loadVectorData(oe,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),Q(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}Pe.request.collectResourceTiming=this._collectResourceTiming,H.actor&&H.state!=="expired"?H.state==="loading"?H.reloadCallback=Q:H.request=H.actor.send("reloadTile",Pe,U.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",Pe,U.bind(this)))},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(a.Evented),X=function(N){function G(H,Q,xe,Pe){N.call(this),this.id=H,this.dispatcher=xe,this.setEventedParent(Pe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},Q),a.extend(this,a.pick(Q,["url","scheme","tileSize"]))}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function(Q,xe){H._tileJSONRequest=null,H._loaded=!0,Q?H.fire(new a.ErrorEvent(Q)):xe&&(a.extend(H,xe),xe.bounds&&(H.tileBounds=new R(xe.bounds,H.minzoom,H.maxzoom)),a.postTurnstileEvent(xe.tiles),a.postMapLoadEvent(xe.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return a.extend({},this._options)},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.loadTile=function(H,Q){var xe=this,Pe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=a.getImage(this.map._requestManager.transformRequest(Pe,a.ResourceType.Tile),function(U,te){if(delete H.request,H.aborted)H.state="unloaded",Q(null);else if(U)H.state="errored",Q(U);else if(te){xe.map._refreshExpiredTiles&&H.setExpiryData(te),delete te.cacheControl,delete te.expires;var oe=xe.map.painter.context,_e=oe.gl;H.texture=xe.map.painter.getTileTexture(te.width),H.texture?H.texture.update(te,{useMipmap:!0}):(H.texture=new a.Texture(oe,te,_e.RGBA,{useMipmap:!0}),H.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),oe.extTextureFilterAnisotropic&&_e.texParameterf(_e.TEXTURE_2D,oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,oe.extTextureFilterAnisotropicMax)),H.state="loaded",a.cacheEntryPossiblyAdded(xe.dispatcher),Q(null)}})},G.prototype.abortTile=function(H,Q){H.request&&(H.request.cancel(),delete H.request),Q()},G.prototype.unloadTile=function(H,Q){H.texture&&this.map.painter.saveTileTexture(H.texture),Q()},G.prototype.hasTransition=function(){return!1},G}(a.Evented),D=function(N){function G(H,Q,xe,Pe){N.call(this,H,Q,xe,Pe),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(H,Q){var xe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Pe(U,te){U&&(H.state="errored",Q(U)),te&&(H.dem=te,H.needsHillshadePrepare=!0,H.state="loaded",Q(null))}H.request=a.getImage(this.map._requestManager.transformRequest(xe,a.ResourceType.Tile),(function(U,te){if(delete H.request,H.aborted)H.state="unloaded",Q(null);else if(U)H.state="errored",Q(U);else if(te){this.map._refreshExpiredTiles&&H.setExpiryData(te),delete te.cacheControl,delete te.expires;var oe=a.window.ImageBitmap&&te instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?te:a.browser.getImageData(te,1),_e={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:oe,encoding:this.encoding};H.actor&&H.state!=="expired"||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",_e,Pe.bind(this)))}}).bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},G.prototype._getNeighboringTiles=function(H){var Q=H.canonical,xe=Math.pow(2,Q.z),Pe=(Q.x-1+xe)%xe,U=Q.x===0?H.wrap-1:H.wrap,te=(Q.x+1+xe)%xe,oe=Q.x+1===xe?H.wrap+1:H.wrap,_e={};return _e[new a.OverscaledTileID(H.overscaledZ,U,Q.z,Pe,Q.y).key]={backfilled:!1},_e[new a.OverscaledTileID(H.overscaledZ,oe,Q.z,te,Q.y).key]={backfilled:!1},Q.y>0&&(_e[new a.OverscaledTileID(H.overscaledZ,U,Q.z,Pe,Q.y-1).key]={backfilled:!1},_e[new a.OverscaledTileID(H.overscaledZ,H.wrap,Q.z,Q.x,Q.y-1).key]={backfilled:!1},_e[new a.OverscaledTileID(H.overscaledZ,oe,Q.z,te,Q.y-1).key]={backfilled:!1}),Q.y+1<xe&&(_e[new a.OverscaledTileID(H.overscaledZ,U,Q.z,Pe,Q.y+1).key]={backfilled:!1},_e[new a.OverscaledTileID(H.overscaledZ,H.wrap,Q.z,Q.x,Q.y+1).key]={backfilled:!1},_e[new a.OverscaledTileID(H.overscaledZ,oe,Q.z,te,Q.y+1).key]={backfilled:!1}),_e},G.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},G}(X),V=function(N){function G(H,Q,xe,Pe){N.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=xe.getActor(),this.setEventedParent(Pe),this._data=Q.data,this._options=a.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,this._resourceTiming=[],Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;var U=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*U,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*U,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Math.min(Q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(Q.clusterRadius||50)*U,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties},Q.workerOptions)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Q){if(Q)H.fire(new a.ErrorEvent(Q));else{var xe={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(xe.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new a.Event("data",xe))}})},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setData=function(H){var Q=this;return this._data=H,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(xe){if(xe)Q.fire(new a.ErrorEvent(xe));else{var Pe={dataType:"source",sourceDataType:"content"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Pe.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new a.Event("data",Pe))}}),this},G.prototype.getClusterExpansionZoom=function(H,Q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},Q),this},G.prototype.getClusterChildren=function(H,Q){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},Q),this},G.prototype.getClusterLeaves=function(H,Q,xe,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:Q,offset:xe},Pe),this},G.prototype._updateWorkerData=function(H){var Q=this;this._loaded=!1;var xe=a.extend({},this.workerOptions),Pe=this._data;typeof Pe=="string"?(xe.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Pe),a.ResourceType.Source),xe.request.collectResourceTiming=this._collectResourceTiming):xe.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",xe,function(U,te){Q._removed||te&&te.abandoned||(Q._loaded=!0,te&&te.resourceTiming&&te.resourceTiming[Q.id]&&(Q._resourceTiming=te.resourceTiming[Q.id].slice(0)),Q.actor.send(Q.type+".coalesce",{source:xe.source},null),H(U))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(H,Q){var xe=this,Pe=H.actor?"reloadTile":"loadTile";H.actor=this.actor;var U={type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};H.request=this.actor.send(Pe,U,function(te,oe){return delete H.request,H.unloadVectorData(),H.aborted?Q(null):te?Q(te):(H.loadVectorData(oe,xe.map.painter,Pe==="reloadTile"),Q(null))})},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},G.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(a.Evented),j=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(N){function G(H,Q,xe,Pe){N.call(this),this.id=H,this.dispatcher=xe,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Pe),this.options=Q}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(H,Q){var xe=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Pe,U){xe._loaded=!0,Pe?xe.fire(new a.ErrorEvent(Pe)):U&&(xe.image=U,H&&(xe.coordinates=H),Q&&Q(),xe._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(H){var Q=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){Q.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setCoordinates=function(H){var Q=this;this.coordinates=H;var xe=H.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(U){for(var te=1/0,oe=1/0,_e=-1/0,ke=-1/0,ze=0,Ge=U;ze<Ge.length;ze+=1){var qe=Ge[ze];te=Math.min(te,qe.x),oe=Math.min(oe,qe.y),_e=Math.max(_e,qe.x),ke=Math.max(ke,qe.y)}var Je=_e-te,$e=ke-oe,st=Math.max(Je,$e),yt=Math.max(0,Math.floor(-Math.log(st)/Math.LN2)),_t=Math.pow(2,yt);return new a.CanonicalTileID(yt,Math.floor((te+_e)/2*_t),Math.floor((oe+ke)/2*_t))}(xe),this.minzoom=this.maxzoom=this.tileID.z;var Pe=xe.map(function(U){return Q.tileID.getTilePoint(U)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var H=this.map.painter.context,Q=H.gl;for(var xe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(H,this.image,Q.RGBA),this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)),this.tiles){var Pe=this.tiles[xe];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},G.prototype.loadTile=function(H,Q){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},Q(null)):(H.state="errored",Q(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(a.Evented),W=function(N){function G(H,Q,xe,Pe){N.call(this,H,Q,xe,Pe),this.roundZoom=!0,this.type="video",this.options=Q}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1;var Q=this.options;this.urls=[];for(var xe=0,Pe=Q.urls;xe<Pe.length;xe+=1){var U=Pe[xe];this.urls.push(this.map._requestManager.transformRequest(U,a.ResourceType.Source).url)}a.getVideo(this.urls,function(te,oe){H._loaded=!0,te?H.fire(new a.ErrorEvent(te)):oe&&(H.video=oe,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(H){if(this.video){var Q=this.video.seekable;H<Q.start(0)||H>Q.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Q.start(0)+" and "+Q.end(0)+"-second mark."))):this.video.currentTime=H}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var H=this.map.painter.context,Q=H.gl;for(var xe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Q.texSubImage2D(Q.TEXTURE_2D,0,0,0,Q.RGBA,Q.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(H,this.video,Q.RGBA),this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)),this.tiles){var Pe=this.tiles[xe];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(B),q=function(N){function G(H,Q,xe,Pe){N.call(this,H,Q,xe,Pe),Q.coordinates?Array.isArray(Q.coordinates)&&Q.coordinates.length===4&&!Q.coordinates.some(function(U){return!Array.isArray(U)||U.length!==2||U.some(function(te){return typeof te!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+H,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas=="string"||Q.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate===void 0||Q.animate}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var Q=this.map.painter.context,xe=Q.gl;for(var Pe in this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(Q,this.canvas,xe.RGBA,{premultiply:!0}),this.tiles){var U=this.tiles[Pe];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var H=0,Q=[this.canvas.width,this.canvas.height];H<Q.length;H+=1){var xe=Q[H];if(isNaN(xe)||xe<=0)return!0}return!1},G}(B),re={vector:O,raster:X,"raster-dem":D,geojson:V,video:W,image:B,canvas:q};function ee(N,G){var H=a.identity([]);return a.translate(H,H,[1,1,0]),a.scale(H,H,[.5*N.width,.5*N.height,1]),a.multiply(H,H,N.calculatePosMatrix(G.toUnwrapped()))}function K(N,G,H,Q,xe,Pe){var U=function($e,st,yt){if($e)for(var _t=0,It=$e;_t<It.length;_t+=1){var zt=st[It[_t]];if(zt&&zt.source===yt&&zt.type==="fill-extrusion")return!0}else for(var Rt in st){var Ht=st[Rt];if(Ht.source===yt&&Ht.type==="fill-extrusion")return!0}return!1}(xe&&xe.layers,G,N.id),te=Pe.maxPitchScaleFactor(),oe=N.tilesIn(Q,te,U);oe.sort(Y);for(var _e=[],ke=0,ze=oe;ke<ze.length;ke+=1){var Ge=ze[ke];_e.push({wrappedTileID:Ge.tileID.wrapped().key,queryResults:Ge.tile.queryRenderedFeatures(G,H,N._state,Ge.queryGeometry,Ge.cameraQueryGeometry,Ge.scale,xe,Pe,te,ee(N.transform,Ge.tileID))})}var qe=function($e){for(var st={},yt={},_t=0,It=$e;_t<It.length;_t+=1){var zt=It[_t],Rt=zt.queryResults,Ht=zt.wrappedTileID,Dt=yt[Ht]=yt[Ht]||{};for(var sn in Rt)for(var $t=Rt[sn],Zt=Dt[sn]=Dt[sn]||{},xn=st[sn]=st[sn]||[],bn=0,Un=$t;bn<Un.length;bn+=1){var jn=Un[bn];Zt[jn.featureIndex]||(Zt[jn.featureIndex]=!0,xn.push(jn))}}return st}(_e);for(var Je in qe)qe[Je].forEach(function($e){var st=$e.feature,yt=N.getFeatureState(st.layer["source-layer"],st.id);st.source=st.layer.source,st.layer["source-layer"]&&(st.sourceLayer=st.layer["source-layer"]),st.state=yt});return qe}function Y(N,G){var H=N.tileID,Q=G.tileID;return H.overscaledZ-Q.overscaledZ||H.canonical.y-Q.canonical.y||H.wrap-Q.wrap||H.canonical.x-Q.canonical.x}var $=function(N,G){this.max=N,this.onRemove=G,this.reset()};$.prototype.reset=function(){for(var N in this.data)for(var G=0,H=this.data[N];G<H.length;G+=1){var Q=H[G];Q.timeout&&clearTimeout(Q.timeout),this.onRemove(Q.value)}return this.data={},this.order=[],this},$.prototype.add=function(N,G,H){var Q=this,xe=N.wrapped().key;this.data[xe]===void 0&&(this.data[xe]=[]);var Pe={value:G,timeout:void 0};if(H!==void 0&&(Pe.timeout=setTimeout(function(){Q.remove(N,Pe)},H)),this.data[xe].push(Pe),this.order.push(xe),this.order.length>this.max){var U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this},$.prototype.has=function(N){return N.wrapped().key in this.data},$.prototype.getAndRemove=function(N){return this.has(N)?this._getAndRemoveByKey(N.wrapped().key):null},$.prototype._getAndRemoveByKey=function(N){var G=this.data[N].shift();return G.timeout&&clearTimeout(G.timeout),this.data[N].length===0&&delete this.data[N],this.order.splice(this.order.indexOf(N),1),G.value},$.prototype.getByKey=function(N){var G=this.data[N];return G?G[0].value:null},$.prototype.get=function(N){return this.has(N)?this.data[N.wrapped().key][0].value:null},$.prototype.remove=function(N,G){if(!this.has(N))return this;var H=N.wrapped().key,Q=G===void 0?0:this.data[H].indexOf(G),xe=this.data[H][Q];return this.data[H].splice(Q,1),xe.timeout&&clearTimeout(xe.timeout),this.data[H].length===0&&delete this.data[H],this.onRemove(xe.value),this.order.splice(this.order.indexOf(H),1),this},$.prototype.setMaxSize=function(N){for(this.max=N;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},$.prototype.filter=function(N){var G=[];for(var H in this.data)for(var Q=0,xe=this.data[H];Q<xe.length;Q+=1){var Pe=xe[Q];N(Pe.value)||G.push(Pe)}for(var U=0,te=G;U<te.length;U+=1){var oe=te[U];this.remove(oe.value.tileID,oe)}};var ne=function(N,G,H){this.context=N;var Q=N.gl;this.buffer=Q.createBuffer(),this.dynamicDraw=!!H,this.context.unbindVAO(),N.bindElementBuffer.set(this.buffer),Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?Q.DYNAMIC_DRAW:Q.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ne.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ne.prototype.updateData=function(N){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,N.arrayBuffer)},ne.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var ae={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},se=function(N,G,H,Q){this.length=G.length,this.attributes=H,this.itemSize=G.bytesPerElement,this.dynamicDraw=Q,this.context=N;var xe=N.gl;this.buffer=xe.createBuffer(),N.bindVertexBuffer.set(this.buffer),xe.bufferData(xe.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?xe.DYNAMIC_DRAW:xe.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},se.prototype.updateData=function(N){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,N.arrayBuffer)},se.prototype.enableAttributes=function(N,G){for(var H=0;H<this.attributes.length;H++){var Q=this.attributes[H],xe=G.attributes[Q.name];xe!==void 0&&N.enableVertexAttribArray(xe)}},se.prototype.setVertexAttribPointers=function(N,G,H){for(var Q=0;Q<this.attributes.length;Q++){var xe=this.attributes[Q],Pe=G.attributes[xe.name];Pe!==void 0&&N.vertexAttribPointer(Pe,xe.components,N[ae[xe.type]],!1,this.itemSize,xe.offset+this.itemSize*(H||0))}},se.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var ce=function(N){this.gl=N.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ce.prototype.get=function(){return this.current},ce.prototype.set=function(N){},ce.prototype.getDefault=function(){return this.default},ce.prototype.setDefault=function(){this.set(this.default)};var me=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return a.Color.transparent},G.prototype.set=function(H){var Q=this.current;(H.r!==Q.r||H.g!==Q.g||H.b!==Q.b||H.a!==Q.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ce),ye=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},G}(ce),Te=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},G}(ce),Ce=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(H){var Q=this.current;(H[0]!==Q[0]||H[1]!==Q[1]||H[2]!==Q[2]||H[3]!==Q[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ce),pe=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},G}(ce),fe=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},G}(ce),Oe=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(H){var Q=this.current;(H.func!==Q.func||H.ref!==Q.ref||H.mask!==Q.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},G}(ce),Se=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},G.prototype.set=function(H){var Q=this.current;(H[0]!==Q[0]||H[1]!==Q[1]||H[2]!==Q[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},G}(ce),Me=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;H?Q.enable(Q.STENCIL_TEST):Q.disable(Q.STENCIL_TEST),this.current=H,this.dirty=!1}},G}(ce),ue=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(H){var Q=this.current;(H[0]!==Q[0]||H[1]!==Q[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ce),le=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;H?Q.enable(Q.DEPTH_TEST):Q.disable(Q.DEPTH_TEST),this.current=H,this.dirty=!1}},G}(ce),ie=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},G}(ce),ge=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;H?Q.enable(Q.BLEND):Q.disable(Q.BLEND),this.current=H,this.dirty=!1}},G}(ce),Ae=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},G.prototype.set=function(H){var Q=this.current;(H[0]!==Q[0]||H[1]!==Q[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ce),we=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return a.Color.transparent},G.prototype.set=function(H){var Q=this.current;(H.r!==Q.r||H.g!==Q.g||H.b!==Q.b||H.a!==Q.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ce),Ne=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},G}(ce),He=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;H?Q.enable(Q.CULL_FACE):Q.disable(Q.CULL_FACE),this.current=H,this.dirty=!1}},G}(ce),de=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},G}(ce),Le=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},G}(ce),Ee=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},G}(ce),Re=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},G}(ce),je=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},G.prototype.set=function(H){var Q=this.current;(H[0]!==Q[0]||H[1]!==Q[1]||H[2]!==Q[2]||H[3]!==Q[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ce),Fe=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},G}(ce),Xe=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.bindRenderbuffer(Q.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ce),Ze=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.bindTexture(Q.TEXTURE_2D,H),this.current=H,this.dirty=!1}},G}(ce),at=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.bindBuffer(Q.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},G}(ce),lt=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},G}(ce),ot=function(N){function G(H){N.call(this,H),this.vao=H.extVertexArrayObject}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},G}(ce),bt=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.pixelStorei(Q.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},G}(ce),wt=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},G}(ce),ht=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var Q=this.gl;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},G}(ce),ct=function(N){function G(H,Q){N.call(this,H),this.context=H,this.parent=Q}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ce),Tt=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Q=this.gl;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},G}(ct),Lt=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ct),kt=function(N,G,H,Q){this.context=N,this.width=G,this.height=H;var xe=N.gl,Pe=this.framebuffer=xe.createFramebuffer();this.colorAttachment=new Tt(N,Pe),Q&&(this.depthAttachment=new Lt(N,Pe))};kt.prototype.destroy=function(){var N=this.context.gl,G=this.colorAttachment.get();if(G&&N.deleteTexture(G),this.depthAttachment){var H=this.depthAttachment.get();H&&N.deleteRenderbuffer(H)}N.deleteFramebuffer(this.framebuffer)};var Ot=function(N,G,H){this.func=N,this.mask=G,this.range=H};Ot.ReadOnly=!1,Ot.ReadWrite=!0,Ot.disabled=new Ot(519,Ot.ReadOnly,[0,1]);var Pt=7680,et=function(N,G,H,Q,xe,Pe){this.test=N,this.ref=G,this.mask=H,this.fail=Q,this.depthFail=xe,this.pass=Pe};et.disabled=new et({func:519,mask:0},0,0,Pt,Pt,Pt);var nt=function(N,G,H){this.blendFunction=N,this.blendColor=G,this.mask=H};nt.Replace=[1,0],nt.disabled=new nt(nt.Replace,a.Color.transparent,[!1,!1,!1,!1]),nt.unblended=new nt(nt.Replace,a.Color.transparent,[!0,!0,!0,!0]),nt.alphaBlended=new nt([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Ye=function(N,G,H){this.enable=N,this.mode=G,this.frontFace=H};Ye.disabled=new Ye(!1,1029,2305),Ye.backCCW=new Ye(!0,1029,2305);var tt=function(N){this.gl=N,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new me(this),this.clearDepth=new ye(this),this.clearStencil=new Te(this),this.colorMask=new Ce(this),this.depthMask=new pe(this),this.stencilMask=new fe(this),this.stencilFunc=new Oe(this),this.stencilOp=new Se(this),this.stencilTest=new Me(this),this.depthRange=new ue(this),this.depthTest=new le(this),this.depthFunc=new ie(this),this.blend=new ge(this),this.blendFunc=new Ae(this),this.blendColor=new we(this),this.blendEquation=new Ne(this),this.cullFace=new He(this),this.cullFaceSide=new de(this),this.frontFace=new Le(this),this.program=new Ee(this),this.activeTexture=new Re(this),this.viewport=new je(this),this.bindFramebuffer=new Fe(this),this.bindRenderbuffer=new Xe(this),this.bindTexture=new Ze(this),this.bindVertexBuffer=new at(this),this.bindElementBuffer=new lt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new bt(this),this.pixelStoreUnpackPremultiplyAlpha=new wt(this),this.pixelStoreUnpackFlipY=new ht(this),this.extTextureFilterAnisotropic=N.getExtension("EXT_texture_filter_anisotropic")||N.getExtension("MOZ_EXT_texture_filter_anisotropic")||N.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=N.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=N.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(N.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=N.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=N.getExtension("EXT_disjoint_timer_query")};tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tt.prototype.createIndexBuffer=function(N,G){return new ne(this,N,G)},tt.prototype.createVertexBuffer=function(N,G,H){return new se(this,N,G,H)},tt.prototype.createRenderbuffer=function(N,G,H){var Q=this.gl,xe=Q.createRenderbuffer();return this.bindRenderbuffer.set(xe),Q.renderbufferStorage(Q.RENDERBUFFER,N,G,H),this.bindRenderbuffer.set(null),xe},tt.prototype.createFramebuffer=function(N,G,H){return new kt(this,N,G,H)},tt.prototype.clear=function(N){var G=N.color,H=N.depth,Q=this.gl,xe=0;G&&(xe|=Q.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),H!==void 0&&(xe|=Q.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),Q.clear(xe)},tt.prototype.setCullFace=function(N){N.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(N.mode),this.frontFace.set(N.frontFace))},tt.prototype.setDepthMode=function(N){N.func!==this.gl.ALWAYS||N.mask?(this.depthTest.set(!0),this.depthFunc.set(N.func),this.depthMask.set(N.mask),this.depthRange.set(N.range)):this.depthTest.set(!1)},tt.prototype.setStencilMode=function(N){N.test.func!==this.gl.ALWAYS||N.mask?(this.stencilTest.set(!0),this.stencilMask.set(N.mask),this.stencilOp.set([N.fail,N.depthFail,N.pass]),this.stencilFunc.set({func:N.test.func,ref:N.ref,mask:N.test.mask})):this.stencilTest.set(!1)},tt.prototype.setColorMode=function(N){a.deepEqual(N.blendFunction,nt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(N.blendFunction),this.blendColor.set(N.blendColor)),this.colorMask.set(N.mask)},tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ut=function(N){function G(H,Q,xe){var Pe=this;N.call(this),this.id=H,this.dispatcher=xe,this.on("data",function(U){U.dataType==="source"&&U.sourceDataType==="metadata"&&(Pe._sourceLoaded=!0),Pe._sourceLoaded&&!Pe._paused&&U.dataType==="source"&&U.sourceDataType==="content"&&(Pe.reload(),Pe.transform&&Pe.update(Pe.transform))}),this.on("error",function(){Pe._sourceErrored=!0}),this._source=function(U,te,oe,_e){var ke=new re[te.type](U,te,oe,_e);if(ke.id!==U)throw new Error("Expected Source id to be "+U+" instead of "+ke.id);return a.bindAll(["load","abort","unload","serialize","prepare"],ke),ke}(H,Q,xe,this),this._tiles={},this._cache=new $(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},G.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var Q=this._tiles[H];if(Q.state!=="loaded"&&Q.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(H,Q){return this._source.loadTile(H,Q)},G.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},G.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(H){for(var Q in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var xe=this._tiles[Q];xe.upload(H),xe.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return a.values(this._tiles).map(function(H){return H.tileID}).sort(Ke).map(function(H){return H.key})},G.prototype.getRenderableIds=function(H){var Q=this,xe=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,H)&&xe.push(this._tiles[Pe]);return H?xe.sort(function(U,te){var oe=U.tileID,_e=te.tileID,ke=new a.Point(oe.canonical.x,oe.canonical.y)._rotate(Q.transform.angle),ze=new a.Point(_e.canonical.x,_e.canonical.y)._rotate(Q.transform.angle);return oe.overscaledZ-_e.overscaledZ||ze.y-ke.y||ze.x-ke.x}).map(function(U){return U.tileID.key}):xe.map(function(U){return U.tileID}).sort(Ke).map(function(U){return U.key})},G.prototype.hasRenderableParent=function(H){var Q=this.findLoadedParent(H,0);return!!Q&&this._isIdRenderable(Q.tileID.key)},G.prototype._isIdRenderable=function(H,Q){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(Q||!this._tiles[H].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)this._tiles[H].state!=="errored"&&this._reloadTile(H,"reloading")},G.prototype._reloadTile=function(H,Q){var xe=this._tiles[H];xe&&(xe.state!=="loading"&&(xe.state=Q),this._loadTile(xe,this._tileLoaded.bind(this,xe,H,Q)))},G.prototype._tileLoaded=function(H,Q,xe,Pe){if(Pe)return H.state="errored",void(Pe.status!==404?this._source.fire(new a.ErrorEvent(Pe,{tile:H})):this.update(this.transform));H.timeAdded=a.browser.now(),xe==="expired"&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(Q,H),this.getSource().type==="raster-dem"&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},G.prototype._backfillDEM=function(H){for(var Q=this.getRenderableIds(),xe=0;xe<Q.length;xe++){var Pe=Q[xe];if(H.neighboringTiles&&H.neighboringTiles[Pe]){var U=this.getTileByID(Pe);te(H,U),te(U,H)}}function te(oe,_e){oe.needsHillshadePrepare=!0;var ke=_e.tileID.canonical.x-oe.tileID.canonical.x,ze=_e.tileID.canonical.y-oe.tileID.canonical.y,Ge=Math.pow(2,oe.tileID.canonical.z),qe=_e.tileID.key;ke===0&&ze===0||Math.abs(ze)>1||(Math.abs(ke)>1&&(Math.abs(ke+Ge)===1?ke+=Ge:Math.abs(ke-Ge)===1&&(ke-=Ge)),_e.dem&&oe.dem&&(oe.dem.backfillBorder(_e.dem,ke,ze),oe.neighboringTiles&&oe.neighboringTiles[qe]&&(oe.neighboringTiles[qe].backfilled=!0)))}},G.prototype.getTile=function(H){return this.getTileByID(H.key)},G.prototype.getTileByID=function(H){return this._tiles[H]},G.prototype._retainLoadedChildren=function(H,Q,xe,Pe){for(var U in this._tiles){var te=this._tiles[U];if(!(Pe[U]||!te.hasData()||te.tileID.overscaledZ<=Q||te.tileID.overscaledZ>xe)){for(var oe=te.tileID;te&&te.tileID.overscaledZ>Q+1;){var _e=te.tileID.scaledTo(te.tileID.overscaledZ-1);(te=this._tiles[_e.key])&&te.hasData()&&(oe=_e)}for(var ke=oe;ke.overscaledZ>Q;)if(H[(ke=ke.scaledTo(ke.overscaledZ-1)).key]){Pe[oe.key]=oe;break}}}},G.prototype.findLoadedParent=function(H,Q){if(H.key in this._loadedParentTiles){var xe=this._loadedParentTiles[H.key];return xe&&xe.tileID.overscaledZ>=Q?xe:null}for(var Pe=H.overscaledZ-1;Pe>=Q;Pe--){var U=H.scaledTo(Pe),te=this._getLoadedTile(U);if(te)return te}},G.prototype._getLoadedTile=function(H){var Q=this._tiles[H.key];return Q&&Q.hasData()?Q:this._cache.getByKey(H.wrapped().key)},G.prototype.updateCacheSize=function(H){var Q=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),xe=Math.floor(5*Q),Pe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,xe):xe;this._cache.setMaxSize(Pe)},G.prototype.handleWrapJump=function(H){var Q=(H-(this._prevLng===void 0?H:this._prevLng))/360,xe=Math.round(Q);if(this._prevLng=H,xe){var Pe={};for(var U in this._tiles){var te=this._tiles[U];te.tileID=te.tileID.unwrapTo(te.tileID.wrap+xe),Pe[te.tileID.key]=te}for(var oe in this._tiles=Pe,this._timers)clearTimeout(this._timers[oe]),delete this._timers[oe];for(var _e in this._tiles){var ke=this._tiles[_e];this._setTileReloadTimer(_e,ke)}}},G.prototype.update=function(H){var Q=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var xe;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?xe=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Dt){return new a.OverscaledTileID(Dt.canonical.z,Dt.wrap,Dt.canonical.z,Dt.canonical.x,Dt.canonical.y)}):(xe=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(xe=xe.filter(function(Dt){return Q._source.hasTile(Dt)}))):xe=[];var Pe=H.coveringZoomLevel(this._source),U=Math.max(Pe-G.maxOverzooming,this._source.minzoom),te=Math.max(Pe+G.maxUnderzooming,this._source.minzoom),oe=this._updateRetainedTiles(xe,Pe);if(De(this._source.type)){for(var _e={},ke={},ze=0,Ge=Object.keys(oe);ze<Ge.length;ze+=1){var qe=Ge[ze],Je=oe[qe],$e=this._tiles[qe];if($e&&!($e.fadeEndTime&&$e.fadeEndTime<=a.browser.now())){var st=this.findLoadedParent(Je,U);st&&(this._addTile(st.tileID),_e[st.tileID.key]=st.tileID),ke[qe]=Je}}for(var yt in this._retainLoadedChildren(ke,Pe,te,oe),_e)oe[yt]||(this._coveredTiles[yt]=!0,oe[yt]=_e[yt])}for(var _t in oe)this._tiles[_t].clearFadeHold();for(var It=0,zt=a.keysDifference(this._tiles,oe);It<zt.length;It+=1){var Rt=zt[It],Ht=this._tiles[Rt];Ht.hasSymbolBuckets&&!Ht.holdingForFade()?Ht.setHoldDuration(this.map._fadeDuration):Ht.hasSymbolBuckets&&!Ht.symbolFadeFinished()||this._removeTile(Rt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},G.prototype._updateRetainedTiles=function(H,Q){for(var xe={},Pe={},U=Math.max(Q-G.maxOverzooming,this._source.minzoom),te=Math.max(Q+G.maxUnderzooming,this._source.minzoom),oe={},_e=0,ke=H;_e<ke.length;_e+=1){var ze=ke[_e],Ge=this._addTile(ze);xe[ze.key]=ze,Ge.hasData()||Q<this._source.maxzoom&&(oe[ze.key]=ze)}this._retainLoadedChildren(oe,Q,te,xe);for(var qe=0,Je=H;qe<Je.length;qe+=1){var $e=Je[qe],st=this._tiles[$e.key];if(!st.hasData()){if(Q+1>this._source.maxzoom){var yt=$e.children(this._source.maxzoom)[0],_t=this.getTile(yt);if(_t&&_t.hasData()){xe[yt.key]=yt;continue}}else{var It=$e.children(this._source.maxzoom);if(xe[It[0].key]&&xe[It[1].key]&&xe[It[2].key]&&xe[It[3].key])continue}for(var zt=st.wasRequested(),Rt=$e.overscaledZ-1;Rt>=U;--Rt){var Ht=$e.scaledTo(Rt);if(Pe[Ht.key]||(Pe[Ht.key]=!0,!(st=this.getTile(Ht))&&zt&&(st=this._addTile(Ht)),st&&(xe[Ht.key]=Ht,zt=st.wasRequested(),st.hasData())))break}}}return xe},G.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var Q=[],xe=void 0,Pe=this._tiles[H].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){xe=this._loadedParentTiles[Pe.key];break}Q.push(Pe.key);var U=Pe.scaledTo(Pe.overscaledZ-1);if(xe=this._getLoadedTile(U))break;Pe=U}for(var te=0,oe=Q;te<oe.length;te+=1){var _e=oe[te];this._loadedParentTiles[_e]=xe}}},G.prototype._addTile=function(H){var Q=this._tiles[H.key];if(Q)return Q;(Q=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,Q),Q.tileID=H,this._state.initializeTileState(Q,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,Q)));var xe=!!Q;return xe||(Q=new a.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(Q,this._tileLoaded.bind(this,Q,H.key,Q.state))),Q?(Q.uses++,this._tiles[H.key]=Q,xe||this._source.fire(new a.Event("dataloading",{tile:Q,coord:Q.tileID,dataType:"source"})),Q):null},G.prototype._setTileReloadTimer=function(H,Q){var xe=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var Pe=Q.getExpiryTimeout();Pe&&(this._timers[H]=setTimeout(function(){xe._reloadTile(H,"expired"),delete xe._timers[H]},Pe))},G.prototype._removeTile=function(H){var Q=this._tiles[H];Q&&(Q.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),Q.uses>0||(Q.hasData()&&Q.state!=="reloading"?this._cache.add(Q.tileID,Q,Q.getExpiryTimeout()):(Q.aborted=!0,this._abortTile(Q),this._unloadTile(Q))))},G.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},G.prototype.tilesIn=function(H,Q,xe){var Pe=this,U=[],te=this.transform;if(!te)return U;for(var oe=xe?te.getCameraQueryGeometry(H):H,_e=H.map(function(Rt){return te.pointCoordinate(Rt)}),ke=oe.map(function(Rt){return te.pointCoordinate(Rt)}),ze=this.getIds(),Ge=1/0,qe=1/0,Je=-1/0,$e=-1/0,st=0,yt=ke;st<yt.length;st+=1){var _t=yt[st];Ge=Math.min(Ge,_t.x),qe=Math.min(qe,_t.y),Je=Math.max(Je,_t.x),$e=Math.max($e,_t.y)}for(var It=function(Rt){var Ht=Pe._tiles[ze[Rt]];if(!Ht.holdingForFade()){var Dt=Ht.tileID,sn=Math.pow(2,te.zoom-Ht.tileID.overscaledZ),$t=Q*Ht.queryPadding*a.EXTENT/Ht.tileSize/sn,Zt=[Dt.getTilePoint(new a.MercatorCoordinate(Ge,qe)),Dt.getTilePoint(new a.MercatorCoordinate(Je,$e))];if(Zt[0].x-$t<a.EXTENT&&Zt[0].y-$t<a.EXTENT&&Zt[1].x+$t>=0&&Zt[1].y+$t>=0){var xn=_e.map(function(Un){return Dt.getTilePoint(Un)}),bn=ke.map(function(Un){return Dt.getTilePoint(Un)});U.push({tile:Ht,tileID:Dt,queryGeometry:xn,cameraQueryGeometry:bn,scale:sn})}}},zt=0;zt<ze.length;zt++)It(zt);return U},G.prototype.getVisibleCoordinates=function(H){for(var Q=this,xe=this.getRenderableIds(H).map(function(oe){return Q._tiles[oe].tileID}),Pe=0,U=xe;Pe<U.length;Pe+=1){var te=U[Pe];te.posMatrix=this.transform.calculatePosMatrix(te.toUnwrapped())}return xe},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(De(this._source.type))for(var H in this._tiles){var Q=this._tiles[H];if(Q.fadeEndTime!==void 0&&Q.fadeEndTime>=a.browser.now())return!0}return!1},G.prototype.setFeatureState=function(H,Q,xe){H=H||"_geojsonTileLayer",this._state.updateState(H,Q,xe)},G.prototype.removeFeatureState=function(H,Q,xe){H=H||"_geojsonTileLayer",this._state.removeFeatureState(H,Q,xe)},G.prototype.getFeatureState=function(H,Q){return H=H||"_geojsonTileLayer",this._state.getState(H,Q)},G.prototype.setDependencies=function(H,Q,xe){var Pe=this._tiles[H];Pe&&Pe.setDependencies(Q,xe)},G.prototype.reloadTilesForDependencies=function(H,Q){for(var xe in this._tiles)this._tiles[xe].hasDependency(H,Q)&&this._reloadTile(xe,"reloading");this._cache.filter(function(Pe){return!Pe.hasDependency(H,Q)})},G}(a.Evented);function Ke(N,G){var H=Math.abs(2*N.wrap)-+(N.wrap<0),Q=Math.abs(2*G.wrap)-+(G.wrap<0);return N.overscaledZ-G.overscaledZ||Q-H||G.canonical.y-N.canonical.y||G.canonical.x-N.canonical.x}function De(N){return N==="raster"||N==="image"||N==="video"}function Be(){return new a.window.Worker(qo.workerUrl)}ut.maxOverzooming=10,ut.maxUnderzooming=3;var Qe="mapboxgl_preloaded_worker_pool",rt=function(){this.active={}};rt.prototype.acquire=function(N){if(!this.workers)for(this.workers=[];this.workers.length<rt.workerCount;)this.workers.push(new Be);return this.active[N]=!0,this.workers.slice()},rt.prototype.release=function(N){delete this.active[N],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},rt.prototype.isPreloaded=function(){return!!this.active[Qe]},rt.prototype.numActive=function(){return Object.keys(this.active).length};var vt,mt=Math.floor(a.browser.hardwareConcurrency/2);function xt(){return vt||(vt=new rt),vt}function dt(N,G){var H={};for(var Q in N)Q!=="ref"&&(H[Q]=N[Q]);return a.refProperties.forEach(function(xe){xe in G&&(H[xe]=G[xe])}),H}function Et(N){N=N.slice();for(var G=Object.create(null),H=0;H<N.length;H++)G[N[H].id]=N[H];for(var Q=0;Q<N.length;Q++)"ref"in N[Q]&&(N[Q]=dt(N[Q],G[N[Q].ref]));return N}rt.workerCount=Math.max(Math.min(mt,6),1);var pt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function gt(N,G,H){H.push({command:pt.addSource,args:[N,G[N]]})}function Mt(N,G,H){G.push({command:pt.removeSource,args:[N]}),H[N]=!0}function Nt(N,G,H,Q){Mt(N,H,Q),gt(N,G,H)}function Bt(N,G,H){var Q;for(Q in N[H])if(N[H].hasOwnProperty(Q)&&Q!=="data"&&!a.deepEqual(N[H][Q],G[H][Q]))return!1;for(Q in G[H])if(G[H].hasOwnProperty(Q)&&Q!=="data"&&!a.deepEqual(N[H][Q],G[H][Q]))return!1;return!0}function Ut(N,G,H,Q,xe,Pe){var U;for(U in G=G||{},N=N||{})N.hasOwnProperty(U)&&(a.deepEqual(N[U],G[U])||H.push({command:Pe,args:[Q,U,G[U],xe]}));for(U in G)G.hasOwnProperty(U)&&!N.hasOwnProperty(U)&&(a.deepEqual(N[U],G[U])||H.push({command:Pe,args:[Q,U,G[U],xe]}))}function Jt(N){return N.id}function Vt(N,G){return N[G.id]=G,N}function Qt(N,G){if(!N)return[{command:pt.setStyle,args:[G]}];var H=[];try{if(!a.deepEqual(N.version,G.version))return[{command:pt.setStyle,args:[G]}];a.deepEqual(N.center,G.center)||H.push({command:pt.setCenter,args:[G.center]}),a.deepEqual(N.zoom,G.zoom)||H.push({command:pt.setZoom,args:[G.zoom]}),a.deepEqual(N.bearing,G.bearing)||H.push({command:pt.setBearing,args:[G.bearing]}),a.deepEqual(N.pitch,G.pitch)||H.push({command:pt.setPitch,args:[G.pitch]}),a.deepEqual(N.sprite,G.sprite)||H.push({command:pt.setSprite,args:[G.sprite]}),a.deepEqual(N.glyphs,G.glyphs)||H.push({command:pt.setGlyphs,args:[G.glyphs]}),a.deepEqual(N.transition,G.transition)||H.push({command:pt.setTransition,args:[G.transition]}),a.deepEqual(N.light,G.light)||H.push({command:pt.setLight,args:[G.light]});var Q={},xe=[];(function(U,te,oe,_e){var ke;for(ke in te=te||{},U=U||{})U.hasOwnProperty(ke)&&(te.hasOwnProperty(ke)||Mt(ke,oe,_e));for(ke in te)te.hasOwnProperty(ke)&&(U.hasOwnProperty(ke)?a.deepEqual(U[ke],te[ke])||(U[ke].type==="geojson"&&te[ke].type==="geojson"&&Bt(U,te,ke)?oe.push({command:pt.setGeoJSONSourceData,args:[ke,te[ke].data]}):Nt(ke,te,oe,_e)):gt(ke,te,oe))})(N.sources,G.sources,xe,Q);var Pe=[];N.layers&&N.layers.forEach(function(U){Q[U.source]?H.push({command:pt.removeLayer,args:[U.id]}):Pe.push(U)}),H=H.concat(xe),function(U,te,oe){te=te||[];var _e,ke,ze,Ge,qe,Je,$e,st=(U=U||[]).map(Jt),yt=te.map(Jt),_t=U.reduce(Vt,{}),It=te.reduce(Vt,{}),zt=st.slice(),Rt=Object.create(null);for(_e=0,ke=0;_e<st.length;_e++)ze=st[_e],It.hasOwnProperty(ze)?ke++:(oe.push({command:pt.removeLayer,args:[ze]}),zt.splice(zt.indexOf(ze,ke),1));for(_e=0,ke=0;_e<yt.length;_e++)ze=yt[yt.length-1-_e],zt[zt.length-1-_e]!==ze&&(_t.hasOwnProperty(ze)?(oe.push({command:pt.removeLayer,args:[ze]}),zt.splice(zt.lastIndexOf(ze,zt.length-ke),1)):ke++,Je=zt[zt.length-_e],oe.push({command:pt.addLayer,args:[It[ze],Je]}),zt.splice(zt.length-_e,0,ze),Rt[ze]=!0);for(_e=0;_e<yt.length;_e++)if(Ge=_t[ze=yt[_e]],qe=It[ze],!Rt[ze]&&!a.deepEqual(Ge,qe))if(a.deepEqual(Ge.source,qe.source)&&a.deepEqual(Ge["source-layer"],qe["source-layer"])&&a.deepEqual(Ge.type,qe.type)){for($e in Ut(Ge.layout,qe.layout,oe,ze,null,pt.setLayoutProperty),Ut(Ge.paint,qe.paint,oe,ze,null,pt.setPaintProperty),a.deepEqual(Ge.filter,qe.filter)||oe.push({command:pt.setFilter,args:[ze,qe.filter]}),a.deepEqual(Ge.minzoom,qe.minzoom)&&a.deepEqual(Ge.maxzoom,qe.maxzoom)||oe.push({command:pt.setLayerZoomRange,args:[ze,qe.minzoom,qe.maxzoom]}),Ge)Ge.hasOwnProperty($e)&&$e!=="layout"&&$e!=="paint"&&$e!=="filter"&&$e!=="metadata"&&$e!=="minzoom"&&$e!=="maxzoom"&&($e.indexOf("paint.")===0?Ut(Ge[$e],qe[$e],oe,ze,$e.slice(6),pt.setPaintProperty):a.deepEqual(Ge[$e],qe[$e])||oe.push({command:pt.setLayerProperty,args:[ze,$e,qe[$e]]}));for($e in qe)qe.hasOwnProperty($e)&&!Ge.hasOwnProperty($e)&&$e!=="layout"&&$e!=="paint"&&$e!=="filter"&&$e!=="metadata"&&$e!=="minzoom"&&$e!=="maxzoom"&&($e.indexOf("paint.")===0?Ut(Ge[$e],qe[$e],oe,ze,$e.slice(6),pt.setPaintProperty):a.deepEqual(Ge[$e],qe[$e])||oe.push({command:pt.setLayerProperty,args:[ze,$e,qe[$e]]}))}else oe.push({command:pt.removeLayer,args:[ze]}),Je=zt[zt.lastIndexOf(ze)+1],oe.push({command:pt.addLayer,args:[qe,Je]})}(Pe,G.layers,H)}catch(U){console.warn("Unable to compute style diff:",U),H=[{command:pt.setStyle,args:[G]}]}return H}var qt=function(N,G){this.reset(N,G)};qt.prototype.reset=function(N,G){this.points=N||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qt.prototype.lerp=function(N){if(this.points.length===1)return this.points[0];N=a.clamp(N,0,1);for(var G=1,H=this._distances[G],Q=N*this.paddedLength+this.padding;H<Q&&G<this._distances.length;)H=this._distances[++G];var xe=G-1,Pe=this._distances[xe],U=H-Pe,te=U>0?(Q-Pe)/U:0;return this.points[xe].mult(1-te).add(this.points[G].mult(te))};var gn=function(N,G,H){var Q=this.boxCells=[],xe=this.circleCells=[];this.xCellCount=Math.ceil(N/H),this.yCellCount=Math.ceil(G/H);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)Q.push([]),xe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=N,this.height=G,this.xScale=this.xCellCount/N,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function wn(N,G,H,Q,xe){var Pe=a.create();return G?(a.scale(Pe,Pe,[1/xe,1/xe,1]),H||a.rotateZ(Pe,Pe,Q.angle)):a.multiply(Pe,Q.labelPlaneMatrix,N),Pe}function hn(N,G,H,Q,xe){if(G){var Pe=a.clone(N);return a.scale(Pe,Pe,[xe,xe,1]),H||a.rotateZ(Pe,Pe,-Q.angle),Pe}return Q.glCoordMatrix}function Xt(N,G){var H=[N.x,N.y,0,1];ir(H,H,G);var Q=H[3];return{point:new a.Point(H[0]/Q,H[1]/Q),signedDistanceFromCamera:Q}}function an(N,G){return .5+N/G*.5}function tn(N,G){var H=N[0]/N[3],Q=N[1]/N[3];return H>=-G[0]&&H<=G[0]&&Q>=-G[1]&&Q<=G[1]}function cn(N,G,H,Q,xe,Pe,U,te){var oe=Q?N.textSizeData:N.iconSizeData,_e=a.evaluateSizeForZoom(oe,H.transform.zoom),ke=[256/H.width*2+1,256/H.height*2+1],ze=Q?N.text.dynamicLayoutVertexArray:N.icon.dynamicLayoutVertexArray;ze.clear();for(var Ge=N.lineVertexArray,qe=Q?N.text.placedSymbolArray:N.icon.placedSymbolArray,Je=H.transform.width/H.transform.height,$e=!1,st=0;st<qe.length;st++){var yt=qe.get(st);if(yt.hidden||yt.writingMode===a.WritingMode.vertical&&!$e)er(yt.numGlyphs,ze);else{$e=!1;var _t=[yt.anchorX,yt.anchorY,0,1];if(a.transformMat4(_t,_t,G),tn(_t,ke)){var It=_t[3],zt=an(H.transform.cameraToCenterDistance,It),Rt=a.evaluateSizeForFeature(oe,_e,yt),Ht=U?Rt/zt:Rt*zt,Dt=new a.Point(yt.anchorX,yt.anchorY),sn=Xt(Dt,xe).point,$t={},Zt=Pn(yt,Ht,!1,te,G,xe,Pe,N.glyphOffsetArray,Ge,ze,sn,Dt,$t,Je);$e=Zt.useVertical,(Zt.notEnoughRoom||$e||Zt.needsFlipping&&Pn(yt,Ht,!0,te,G,xe,Pe,N.glyphOffsetArray,Ge,ze,sn,Dt,$t,Je).notEnoughRoom)&&er(yt.numGlyphs,ze)}else er(yt.numGlyphs,ze)}}Q?N.text.dynamicLayoutVertexBuffer.updateData(ze):N.icon.dynamicLayoutVertexBuffer.updateData(ze)}function vn(N,G,H,Q,xe,Pe,U,te,oe,_e,ke){var ze=te.glyphStartIndex+te.numGlyphs,Ge=te.lineStartIndex,qe=te.lineStartIndex+te.lineLength,Je=G.getoffsetX(te.glyphStartIndex),$e=G.getoffsetX(ze-1),st=kn(N*Je,H,Q,xe,Pe,U,te.segment,Ge,qe,oe,_e,ke);if(!st)return null;var yt=kn(N*$e,H,Q,xe,Pe,U,te.segment,Ge,qe,oe,_e,ke);return yt?{first:st,last:yt}:null}function yn(N,G,H,Q){return N===a.WritingMode.horizontal&&Math.abs(H.y-G.y)>Math.abs(H.x-G.x)*Q?{useVertical:!0}:(N===a.WritingMode.vertical?G.y<H.y:G.x>H.x)?{needsFlipping:!0}:null}function Pn(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze,Ge,qe){var Je,$e=G/24,st=N.lineOffsetX*$e,yt=N.lineOffsetY*$e;if(N.numGlyphs>1){var _t=N.glyphStartIndex+N.numGlyphs,It=N.lineStartIndex,zt=N.lineStartIndex+N.lineLength,Rt=vn($e,te,st,yt,H,ke,ze,N,oe,Pe,Ge);if(!Rt)return{notEnoughRoom:!0};var Ht=Xt(Rt.first.point,U).point,Dt=Xt(Rt.last.point,U).point;if(Q&&!H){var sn=yn(N.writingMode,Ht,Dt,qe);if(sn)return sn}Je=[Rt.first];for(var $t=N.glyphStartIndex+1;$t<_t-1;$t++)Je.push(kn($e*te.getoffsetX($t),st,yt,H,ke,ze,N.segment,It,zt,oe,Pe,Ge));Je.push(Rt.last)}else{if(Q&&!H){var Zt=Xt(ze,xe).point,xn=N.lineStartIndex+N.segment+1,bn=new a.Point(oe.getx(xn),oe.gety(xn)),Un=Xt(bn,xe),jn=Un.signedDistanceFromCamera>0?Un.point:In(ze,bn,Zt,1,xe),Xn=yn(N.writingMode,Zt,jn,qe);if(Xn)return Xn}var Qn=kn($e*te.getoffsetX(N.glyphStartIndex),st,yt,H,ke,ze,N.segment,N.lineStartIndex,N.lineStartIndex+N.lineLength,oe,Pe,Ge);if(!Qn)return{notEnoughRoom:!0};Je=[Qn]}for(var hr=0,cr=Je;hr<cr.length;hr+=1){var vr=cr[hr];a.addDynamicAttributes(_e,vr.point,vr.angle)}return{}}function In(N,G,H,Q,xe){var Pe=Xt(N.add(N.sub(G)._unit()),xe).point,U=H.sub(Pe);return H.add(U._mult(Q/U.mag()))}function kn(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze){var Ge=Q?N-G:N+G,qe=Ge>0?1:-1,Je=0;Q&&(qe*=-1,Je=Math.PI),qe<0&&(Je+=Math.PI);for(var $e=qe>0?te+U:te+U+1,st=xe,yt=xe,_t=0,It=0,zt=Math.abs(Ge),Rt=[];_t+It<=zt;){if(($e+=qe)<te||$e>=oe)return null;if(yt=st,Rt.push(st),(st=ze[$e])===void 0){var Ht=new a.Point(_e.getx($e),_e.gety($e)),Dt=Xt(Ht,ke);if(Dt.signedDistanceFromCamera>0)st=ze[$e]=Dt.point;else{var sn=$e-qe;st=In(_t===0?Pe:new a.Point(_e.getx(sn),_e.gety(sn)),Ht,yt,zt-_t+1,ke)}}_t+=It,It=yt.dist(st)}var $t=(zt-_t)/It,Zt=st.sub(yt),xn=Zt.mult($t)._add(yt);xn._add(Zt._unit()._perp()._mult(H*qe));var bn=Je+Math.atan2(st.y-yt.y,st.x-yt.x);return Rt.push(xn),{point:xn,angle:bn,path:Rt}}gn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},gn.prototype.insert=function(N,G,H,Q,xe){this._forEachCell(G,H,Q,xe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(N),this.bboxes.push(G),this.bboxes.push(H),this.bboxes.push(Q),this.bboxes.push(xe)},gn.prototype.insertCircle=function(N,G,H,Q){this._forEachCell(G-Q,H-Q,G+Q,H+Q,this._insertCircleCell,this.circleUid++),this.circleKeys.push(N),this.circles.push(G),this.circles.push(H),this.circles.push(Q)},gn.prototype._insertBoxCell=function(N,G,H,Q,xe,Pe){this.boxCells[xe].push(Pe)},gn.prototype._insertCircleCell=function(N,G,H,Q,xe,Pe){this.circleCells[xe].push(Pe)},gn.prototype._query=function(N,G,H,Q,xe,Pe){if(H<0||N>this.width||Q<0||G>this.height)return!xe&&[];var U=[];if(N<=0&&G<=0&&this.width<=H&&this.height<=Q){if(xe)return!0;for(var te=0;te<this.boxKeys.length;te++)U.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(var oe=0;oe<this.circleKeys.length;oe++){var _e=this.circles[3*oe],ke=this.circles[3*oe+1],ze=this.circles[3*oe+2];U.push({key:this.circleKeys[oe],x1:_e-ze,y1:ke-ze,x2:_e+ze,y2:ke+ze})}return Pe?U.filter(Pe):U}var Ge={hitTest:xe,seenUids:{box:{},circle:{}}};return this._forEachCell(N,G,H,Q,this._queryCell,U,Ge,Pe),xe?U.length>0:U},gn.prototype._queryCircle=function(N,G,H,Q,xe){var Pe=N-H,U=N+H,te=G-H,oe=G+H;if(U<0||Pe>this.width||oe<0||te>this.height)return!Q&&[];var _e=[],ke={hitTest:Q,circle:{x:N,y:G,radius:H},seenUids:{box:{},circle:{}}};return this._forEachCell(Pe,te,U,oe,this._queryCellCircle,_e,ke,xe),Q?_e.length>0:_e},gn.prototype.query=function(N,G,H,Q,xe){return this._query(N,G,H,Q,!1,xe)},gn.prototype.hitTest=function(N,G,H,Q,xe){return this._query(N,G,H,Q,!0,xe)},gn.prototype.hitTestCircle=function(N,G,H,Q){return this._queryCircle(N,G,H,!0,Q)},gn.prototype._queryCell=function(N,G,H,Q,xe,Pe,U,te){var oe=U.seenUids,_e=this.boxCells[xe];if(_e!==null)for(var ke=this.bboxes,ze=0,Ge=_e;ze<Ge.length;ze+=1){var qe=Ge[ze];if(!oe.box[qe]){oe.box[qe]=!0;var Je=4*qe;if(N<=ke[Je+2]&&G<=ke[Je+3]&&H>=ke[Je+0]&&Q>=ke[Je+1]&&(!te||te(this.boxKeys[qe]))){if(U.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[qe],x1:ke[Je],y1:ke[Je+1],x2:ke[Je+2],y2:ke[Je+3]})}}}var $e=this.circleCells[xe];if($e!==null)for(var st=this.circles,yt=0,_t=$e;yt<_t.length;yt+=1){var It=_t[yt];if(!oe.circle[It]){oe.circle[It]=!0;var zt=3*It;if(this._circleAndRectCollide(st[zt],st[zt+1],st[zt+2],N,G,H,Q)&&(!te||te(this.circleKeys[It]))){if(U.hitTest)return Pe.push(!0),!0;var Rt=st[zt],Ht=st[zt+1],Dt=st[zt+2];Pe.push({key:this.circleKeys[It],x1:Rt-Dt,y1:Ht-Dt,x2:Rt+Dt,y2:Ht+Dt})}}}},gn.prototype._queryCellCircle=function(N,G,H,Q,xe,Pe,U,te){var oe=U.circle,_e=U.seenUids,ke=this.boxCells[xe];if(ke!==null)for(var ze=this.bboxes,Ge=0,qe=ke;Ge<qe.length;Ge+=1){var Je=qe[Ge];if(!_e.box[Je]){_e.box[Je]=!0;var $e=4*Je;if(this._circleAndRectCollide(oe.x,oe.y,oe.radius,ze[$e+0],ze[$e+1],ze[$e+2],ze[$e+3])&&(!te||te(this.boxKeys[Je])))return Pe.push(!0),!0}}var st=this.circleCells[xe];if(st!==null)for(var yt=this.circles,_t=0,It=st;_t<It.length;_t+=1){var zt=It[_t];if(!_e.circle[zt]){_e.circle[zt]=!0;var Rt=3*zt;if(this._circlesCollide(yt[Rt],yt[Rt+1],yt[Rt+2],oe.x,oe.y,oe.radius)&&(!te||te(this.circleKeys[zt])))return Pe.push(!0),!0}}},gn.prototype._forEachCell=function(N,G,H,Q,xe,Pe,U,te){for(var oe=this._convertToXCellCoord(N),_e=this._convertToYCellCoord(G),ke=this._convertToXCellCoord(H),ze=this._convertToYCellCoord(Q),Ge=oe;Ge<=ke;Ge++)for(var qe=_e;qe<=ze;qe++){var Je=this.xCellCount*qe+Ge;if(xe.call(this,N,G,H,Q,Je,Pe,U,te))return}},gn.prototype._convertToXCellCoord=function(N){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(N*this.xScale)))},gn.prototype._convertToYCellCoord=function(N){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(N*this.yScale)))},gn.prototype._circlesCollide=function(N,G,H,Q,xe,Pe){var U=Q-N,te=xe-G,oe=H+Pe;return oe*oe>U*U+te*te},gn.prototype._circleAndRectCollide=function(N,G,H,Q,xe,Pe,U){var te=(Pe-Q)/2,oe=Math.abs(N-(Q+te));if(oe>te+H)return!1;var _e=(U-xe)/2,ke=Math.abs(G-(xe+_e));if(ke>_e+H)return!1;if(oe<=te||ke<=_e)return!0;var ze=oe-te,Ge=ke-_e;return ze*ze+Ge*Ge<=H*H};var zn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function er(N,G){for(var H=0;H<N;H++){var Q=G.length;G.resize(Q+4),G.float32.set(zn,3*Q)}}function ir(N,G,H){var Q=G[0],xe=G[1];return N[0]=H[0]*Q+H[4]*xe+H[12],N[1]=H[1]*Q+H[5]*xe+H[13],N[3]=H[3]*Q+H[7]*xe+H[15],N}var fr=100,ar=function(N,G,H){G===void 0&&(G=new gn(N.width+200,N.height+200,25)),H===void 0&&(H=new gn(N.width+200,N.height+200,25)),this.transform=N,this.grid=G,this.ignoredGrid=H,this.pitchfactor=Math.cos(N._pitch)*N.cameraToCenterDistance,this.screenRightBoundary=N.width+fr,this.screenBottomBoundary=N.height+fr,this.gridRightBoundary=N.width+200,this.gridBottomBoundary=N.height+200};function Jn(N,G,H){return G*(a.EXTENT/(N.tileSize*Math.pow(2,H-N.tileID.overscaledZ)))}ar.prototype.placeCollisionBox=function(N,G,H,Q,xe){var Pe=this.projectAndGetPerspectiveRatio(Q,N.anchorPointX,N.anchorPointY),U=H*Pe.perspectiveRatio,te=N.x1*U+Pe.point.x,oe=N.y1*U+Pe.point.y,_e=N.x2*U+Pe.point.x,ke=N.y2*U+Pe.point.y;return!this.isInsideGrid(te,oe,_e,ke)||!G&&this.grid.hitTest(te,oe,_e,ke,xe)?{box:[],offscreen:!1}:{box:[te,oe,_e,ke],offscreen:this.isOffscreen(te,oe,_e,ke)}},ar.prototype.placeCollisionCircles=function(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze,Ge){var qe=[],Je=new a.Point(G.anchorX,G.anchorY),$e=Xt(Je,Pe),st=an(this.transform.cameraToCenterDistance,$e.signedDistanceFromCamera),yt=(_e?xe/st:xe*st)/a.ONE_EM,_t=Xt(Je,U).point,It=vn(yt,Q,G.lineOffsetX*yt,G.lineOffsetY*yt,!1,_t,Je,G,H,U,{}),zt=!1,Rt=!1,Ht=!0;if(It){for(var Dt=.5*ze*st+Ge,sn=new a.Point(-100,-100),$t=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Zt=new qt,xn=It.first,bn=It.last,Un=[],jn=xn.path.length-1;jn>=1;jn--)Un.push(xn.path[jn]);for(var Xn=1;Xn<bn.path.length;Xn++)Un.push(bn.path[Xn]);var Qn=2.5*Dt;if(te){var hr=Un.map(function(Xi){return Xt(Xi,te)});Un=hr.some(function(Xi){return Xi.signedDistanceFromCamera<=0})?[]:hr.map(function(Xi){return Xi.point})}var cr=[];if(Un.length>0){for(var vr=Un[0].clone(),Mr=Un[0].clone(),Fr=1;Fr<Un.length;Fr++)vr.x=Math.min(vr.x,Un[Fr].x),vr.y=Math.min(vr.y,Un[Fr].y),Mr.x=Math.max(Mr.x,Un[Fr].x),Mr.y=Math.max(Mr.y,Un[Fr].y);cr=vr.x>=sn.x&&Mr.x<=$t.x&&vr.y>=sn.y&&Mr.y<=$t.y?[Un]:Mr.x<sn.x||vr.x>$t.x||Mr.y<sn.y||vr.y>$t.y?[]:a.clipLine([Un],sn.x,sn.y,$t.x,$t.y)}for(var Gn=0,ur=cr;Gn<ur.length;Gn+=1){var yr=ur[Gn];Zt.reset(yr,.25*Dt);var Ar;Ar=Zt.length<=.5*Dt?1:Math.ceil(Zt.paddedLength/Qn)+1;for(var Or=0;Or<Ar;Or++){var jr=Or/Math.max(Ar-1,1),Yr=Zt.lerp(jr),ai=Yr.x+fr,Ti=Yr.y+fr;qe.push(ai,Ti,Dt,0);var Mi=ai-Dt,oi=Ti-Dt,Bi=ai+Dt,la=Ti+Dt;if(Ht=Ht&&this.isOffscreen(Mi,oi,Bi,la),Rt=Rt||this.isInsideGrid(Mi,oi,Bi,la),!N&&this.grid.hitTestCircle(ai,Ti,Dt,ke)&&(zt=!0,!oe))return{circles:[],offscreen:!1,collisionDetected:zt}}}}return{circles:!oe&&zt||!Rt?[]:qe,offscreen:Ht,collisionDetected:zt}},ar.prototype.queryRenderedSymbols=function(N){if(N.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],H=1/0,Q=1/0,xe=-1/0,Pe=-1/0,U=0,te=N;U<te.length;U+=1){var oe=te[U],_e=new a.Point(oe.x+fr,oe.y+fr);H=Math.min(H,_e.x),Q=Math.min(Q,_e.y),xe=Math.max(xe,_e.x),Pe=Math.max(Pe,_e.y),G.push(_e)}for(var ke={},ze={},Ge=0,qe=this.grid.query(H,Q,xe,Pe).concat(this.ignoredGrid.query(H,Q,xe,Pe));Ge<qe.length;Ge+=1){var Je=qe[Ge],$e=Je.key;if(ke[$e.bucketInstanceId]===void 0&&(ke[$e.bucketInstanceId]={}),!ke[$e.bucketInstanceId][$e.featureIndex]){var st=[new a.Point(Je.x1,Je.y1),new a.Point(Je.x2,Je.y1),new a.Point(Je.x2,Je.y2),new a.Point(Je.x1,Je.y2)];a.polygonIntersectsPolygon(G,st)&&(ke[$e.bucketInstanceId][$e.featureIndex]=!0,ze[$e.bucketInstanceId]===void 0&&(ze[$e.bucketInstanceId]=[]),ze[$e.bucketInstanceId].push($e.featureIndex))}}return ze},ar.prototype.insertCollisionBox=function(N,G,H,Q,xe){var Pe={bucketInstanceId:H,featureIndex:Q,collisionGroupID:xe};(G?this.ignoredGrid:this.grid).insert(Pe,N[0],N[1],N[2],N[3])},ar.prototype.insertCollisionCircles=function(N,G,H,Q,xe){for(var Pe=G?this.ignoredGrid:this.grid,U={bucketInstanceId:H,featureIndex:Q,collisionGroupID:xe},te=0;te<N.length;te+=4)Pe.insertCircle(U,N[te],N[te+1],N[te+2])},ar.prototype.projectAndGetPerspectiveRatio=function(N,G,H){var Q=[G,H,0,1];return ir(Q,Q,N),{point:new a.Point((Q[0]/Q[3]+1)/2*this.transform.width+fr,(-Q[1]/Q[3]+1)/2*this.transform.height+fr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/Q[3]*.5}},ar.prototype.isOffscreen=function(N,G,H,Q){return H<fr||N>=this.screenRightBoundary||Q<fr||G>this.screenBottomBoundary},ar.prototype.isInsideGrid=function(N,G,H,Q){return H>=0&&N<this.gridRightBoundary&&Q>=0&&G<this.gridBottomBoundary},ar.prototype.getViewportMatrix=function(){var N=a.identity([]);return a.translate(N,N,[-100,-100,0]),N};var br=function(N,G,H,Q){this.opacity=N?Math.max(0,Math.min(1,N.opacity+(N.placed?G:-G))):Q&&H?1:0,this.placed=H};br.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Gt=function(N,G,H,Q,xe){this.text=new br(N?N.text:null,G,H,xe),this.icon=new br(N?N.icon:null,G,Q,xe)};Gt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ln=function(N,G,H){this.text=N,this.icon=G,this.skipFade=H},mn=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},_n=function(N,G,H,Q,xe){this.bucketInstanceId=N,this.featureIndex=G,this.sourceLayerIndex=H,this.bucketIndex=Q,this.tileID=xe},Ln=function(N){this.crossSourceCollisions=N,this.maxGroupID=0,this.collisionGroups={}};function Yn(N,G,H,Q,xe){var Pe=a.getAnchorAlignment(N),U=-(Pe.horizontalAlign-.5)*G,te=-(Pe.verticalAlign-.5)*H,oe=a.evaluateVariableOffset(N,Q);return new a.Point(U+oe[0]*xe,te+oe[1]*xe)}function Nn(N,G,H,Q,xe,Pe){var U=N.x1,te=N.x2,oe=N.y1,_e=N.y2,ke=N.anchorPointX,ze=N.anchorPointY,Ge=new a.Point(G,H);return Q&&Ge._rotate(xe?Pe:-Pe),{x1:U+Ge.x,y1:oe+Ge.y,x2:te+Ge.x,y2:_e+Ge.y,anchorPointX:ke,anchorPointY:ze}}Ln.prototype.get=function(N){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[N]){var G=++this.maxGroupID;this.collisionGroups[N]={ID:G,predicate:function(H){return H.collisionGroupID===G}}}return this.collisionGroups[N]};var Bn=function(N,G,H,Q){this.transform=N.clone(),this.collisionIndex=new ar(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Ln(H),this.collisionCircleArrays={},this.prevPlacement=Q,Q&&(Q.prevPlacement=void 0),this.placedOrientations={}};function rr(N,G,H,Q,xe){N.emplaceBack(G?1:0,H?1:0,Q||0,xe||0),N.emplaceBack(G?1:0,H?1:0,Q||0,xe||0),N.emplaceBack(G?1:0,H?1:0,Q||0,xe||0),N.emplaceBack(G?1:0,H?1:0,Q||0,xe||0)}Bn.prototype.getBucketParts=function(N,G,H,Q){var xe=H.getBucket(G),Pe=H.latestFeatureIndex;if(xe&&Pe&&G.id===xe.layerIds[0]){var U=H.collisionBoxArray,te=xe.layers[0].layout,oe=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),_e=H.tileSize/a.EXTENT,ke=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),ze=te.get("text-pitch-alignment")==="map",Ge=te.get("text-rotation-alignment")==="map",qe=Jn(H,1,this.transform.zoom),Je=wn(ke,ze,Ge,this.transform,qe),$e=null;if(ze){var st=hn(ke,ze,Ge,this.transform,qe);$e=a.multiply([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[xe.bucketInstanceId]=new _n(xe.bucketInstanceId,Pe,xe.sourceLayerIndex,xe.index,H.tileID);var yt={bucket:xe,layout:te,posMatrix:ke,textLabelPlaneMatrix:Je,labelToScreenMatrix:$e,scale:oe,textPixelRatio:_e,holdingForFade:H.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(xe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(xe.sourceID)};if(Q)for(var _t=0,It=xe.sortKeyRanges;_t<It.length;_t+=1){var zt=It[_t],Rt=zt.sortKey,Ht=zt.symbolInstanceStart,Dt=zt.symbolInstanceEnd;N.push({sortKey:Rt,symbolInstanceStart:Ht,symbolInstanceEnd:Dt,parameters:yt})}else N.push({symbolInstanceStart:0,symbolInstanceEnd:xe.symbolInstances.length,parameters:yt})}},Bn.prototype.attemptAnchorPlacement=function(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze,Ge,qe,Je){var $e,st=[ze.textOffset0,ze.textOffset1],yt=Yn(N,H,Q,st,xe),_t=this.collisionIndex.placeCollisionBox(Nn(G,yt.x,yt.y,Pe,U,this.transform.angle),ke,te,oe,_e.predicate);if(!Je||this.collisionIndex.placeCollisionBox(Nn(Je,yt.x,yt.y,Pe,U,this.transform.angle),ke,te,oe,_e.predicate).box.length!==0)return _t.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID].text&&($e=this.prevPlacement.variableOffsets[ze.crossTileID].anchor),this.variableOffsets[ze.crossTileID]={textOffset:st,width:H,height:Q,anchor:N,textBoxScale:xe,prevAnchor:$e},this.markUsedJustification(Ge,N,ze,qe),Ge.allowVerticalPlacement&&(this.markUsedOrientation(Ge,qe,ze),this.placedOrientations[ze.crossTileID]=qe),{shift:yt,placedGlyphBoxes:_t}):void 0},Bn.prototype.placeLayerBucketPart=function(N,G,H){var Q=this,xe=N.parameters,Pe=xe.bucket,U=xe.layout,te=xe.posMatrix,oe=xe.textLabelPlaneMatrix,_e=xe.labelToScreenMatrix,ke=xe.textPixelRatio,ze=xe.holdingForFade,Ge=xe.collisionBoxArray,qe=xe.partiallyEvaluatedTextSize,Je=xe.collisionGroup,$e=U.get("text-optional"),st=U.get("icon-optional"),yt=U.get("text-allow-overlap"),_t=U.get("icon-allow-overlap"),It=U.get("text-rotation-alignment")==="map",zt=U.get("text-pitch-alignment")==="map",Rt=U.get("icon-text-fit")!=="none",Ht=U.get("symbol-z-order")==="viewport-y",Dt=yt&&(_t||!Pe.hasIconData()||st),sn=_t&&(yt||!Pe.hasTextData()||$e);!Pe.collisionArrays&&Ge&&Pe.deserializeCollisionBoxes(Ge);var $t=function(Xn,Qn){if(!G[Xn.crossTileID])if(ze)Q.placements[Xn.crossTileID]=new ln(!1,!1,!1);else{var hr,cr=!1,vr=!1,Mr=!0,Fr=null,Gn={box:null,offscreen:null},ur={box:null,offscreen:null},yr=null,Ar=null,Or=0,jr=0,Yr=0;Qn.textFeatureIndex?Or=Qn.textFeatureIndex:Xn.useRuntimeCollisionCircles&&(Or=Xn.featureIndex),Qn.verticalTextFeatureIndex&&(jr=Qn.verticalTextFeatureIndex);var ai=Qn.textBox;if(ai){var Ti=function(Hi){var ua=a.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Hi&&Q.prevPlacement){var fo=Q.prevPlacement.placedOrientations[Xn.crossTileID];fo&&(Q.placedOrientations[Xn.crossTileID]=fo,ua=fo,Q.markUsedOrientation(Pe,ua,Xn))}return ua},Mi=function(Hi,ua){if(Pe.allowVerticalPlacement&&Xn.numVerticalGlyphVertices>0&&Qn.verticalTextBox)for(var fo=0,Sc=Pe.writingModes;fo<Sc.length&&(Sc[fo]===a.WritingMode.vertical?(Gn=ua(),ur=Gn):Gn=Hi(),!(Gn&&Gn.box&&Gn.box.length));fo+=1);else Gn=Hi()};if(U.get("text-variable-anchor")){var oi=U.get("text-variable-anchor");if(Q.prevPlacement&&Q.prevPlacement.variableOffsets[Xn.crossTileID]){var Bi=Q.prevPlacement.variableOffsets[Xn.crossTileID];oi.indexOf(Bi.anchor)>0&&(oi=oi.filter(function(Hi){return Hi!==Bi.anchor})).unshift(Bi.anchor)}var la=function(Hi,ua,fo){for(var Sc=Hi.x2-Hi.x1,Gh=Hi.y2-Hi.y1,hd=Xn.textBoxScale,Vf=Rt&&!_t?ua:null,Ec={box:[],offscreen:!1},Hf=yt?2*oi.length:oi.length,Yu=0;Yu<Hf;++Yu){var Wh=oi[Yu%oi.length],Su=Yu>=oi.length,Gf=Q.attemptAnchorPlacement(Wh,Hi,Sc,Gh,hd,It,zt,ke,te,Je,Su,Xn,Pe,fo,Vf);if(Gf&&(Ec=Gf.placedGlyphBoxes)&&Ec.box&&Ec.box.length){cr=!0,Fr=Gf.shift;break}}return Ec};Mi(function(){return la(ai,Qn.iconBox,a.WritingMode.horizontal)},function(){var Hi=Qn.verticalTextBox,ua=Gn&&Gn.box&&Gn.box.length;return Pe.allowVerticalPlacement&&!ua&&Xn.numVerticalGlyphVertices>0&&Hi?la(Hi,Qn.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Gn&&(cr=Gn.box,Mr=Gn.offscreen);var Xi=Ti(Gn&&Gn.box);if(!cr&&Q.prevPlacement){var ea=Q.prevPlacement.variableOffsets[Xn.crossTileID];ea&&(Q.variableOffsets[Xn.crossTileID]=ea,Q.markUsedJustification(Pe,ea.anchor,Xn,Xi))}}else{var $r=function(Hi,ua){var fo=Q.collisionIndex.placeCollisionBox(Hi,yt,ke,te,Je.predicate);return fo&&fo.box&&fo.box.length&&(Q.markUsedOrientation(Pe,ua,Xn),Q.placedOrientations[Xn.crossTileID]=ua),fo};Mi(function(){return $r(ai,a.WritingMode.horizontal)},function(){var Hi=Qn.verticalTextBox;return Pe.allowVerticalPlacement&&Xn.numVerticalGlyphVertices>0&&Hi?$r(Hi,a.WritingMode.vertical):{box:null,offscreen:null}}),Ti(Gn&&Gn.box&&Gn.box.length)}}if(cr=(hr=Gn)&&hr.box&&hr.box.length>0,Mr=hr&&hr.offscreen,Xn.useRuntimeCollisionCircles){var qr=Pe.text.placedSymbolArray.get(Xn.centerJustifiedTextSymbolIndex),Ai=a.evaluateSizeForFeature(Pe.textSizeData,qe,qr),vi=U.get("text-padding"),ki=Xn.collisionCircleDiameter;yr=Q.collisionIndex.placeCollisionCircles(yt,qr,Pe.lineVertexArray,Pe.glyphOffsetArray,Ai,te,oe,_e,H,zt,Je.predicate,ki,vi),cr=yt||yr.circles.length>0&&!yr.collisionDetected,Mr=Mr&&yr.offscreen}if(Qn.iconFeatureIndex&&(Yr=Qn.iconFeatureIndex),Qn.iconBox){var Ea=function(Hi){var ua=Rt&&Fr?Nn(Hi,Fr.x,Fr.y,It,zt,Q.transform.angle):Hi;return Q.collisionIndex.placeCollisionBox(ua,_t,ke,te,Je.predicate)};vr=ur&&ur.box&&ur.box.length&&Qn.verticalIconBox?(Ar=Ea(Qn.verticalIconBox)).box.length>0:(Ar=Ea(Qn.iconBox)).box.length>0,Mr=Mr&&Ar.offscreen}var Oi=$e||Xn.numHorizontalGlyphVertices===0&&Xn.numVerticalGlyphVertices===0,si=st||Xn.numIconVertices===0;if(Oi||si?si?Oi||(vr=vr&&cr):cr=vr&&cr:vr=cr=vr&&cr,cr&&hr&&hr.box&&(ur&&ur.box&&jr?Q.collisionIndex.insertCollisionBox(hr.box,U.get("text-ignore-placement"),Pe.bucketInstanceId,jr,Je.ID):Q.collisionIndex.insertCollisionBox(hr.box,U.get("text-ignore-placement"),Pe.bucketInstanceId,Or,Je.ID)),vr&&Ar&&Q.collisionIndex.insertCollisionBox(Ar.box,U.get("icon-ignore-placement"),Pe.bucketInstanceId,Yr,Je.ID),yr&&(cr&&Q.collisionIndex.insertCollisionCircles(yr.circles,U.get("text-ignore-placement"),Pe.bucketInstanceId,Or,Je.ID),H)){var Bs=Pe.bucketInstanceId,Da=Q.collisionCircleArrays[Bs];Da===void 0&&(Da=Q.collisionCircleArrays[Bs]=new mn);for(var eo=0;eo<yr.circles.length;eo+=4)Da.circles.push(yr.circles[eo+0]),Da.circles.push(yr.circles[eo+1]),Da.circles.push(yr.circles[eo+2]),Da.circles.push(yr.collisionDetected?1:0)}Q.placements[Xn.crossTileID]=new ln(cr||Dt,vr||sn,Mr||Pe.justReloaded),G[Xn.crossTileID]=!0}};if(Ht)for(var Zt=Pe.getSortedSymbolIndexes(this.transform.angle),xn=Zt.length-1;xn>=0;--xn){var bn=Zt[xn];$t(Pe.symbolInstances.get(bn),Pe.collisionArrays[bn])}else for(var Un=N.symbolInstanceStart;Un<N.symbolInstanceEnd;Un++)$t(Pe.symbolInstances.get(Un),Pe.collisionArrays[Un]);if(H&&Pe.bucketInstanceId in this.collisionCircleArrays){var jn=this.collisionCircleArrays[Pe.bucketInstanceId];a.invert(jn.invProjMatrix,te),jn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},Bn.prototype.markUsedJustification=function(N,G,H,Q){var xe,Pe={left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex};xe=Q===a.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:Pe[a.getAnchorJustification(G)];for(var U=0,te=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];U<te.length;U+=1){var oe=te[U];oe>=0&&(N.text.placedSymbolArray.get(oe).crossTileID=xe>=0&&oe!==xe?0:H.crossTileID)}},Bn.prototype.markUsedOrientation=function(N,G,H){for(var Q=G===a.WritingMode.horizontal||G===a.WritingMode.horizontalOnly?G:0,xe=G===a.WritingMode.vertical?G:0,Pe=0,U=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];Pe<U.length;Pe+=1){var te=U[Pe];N.text.placedSymbolArray.get(te).placedOrientation=Q}H.verticalPlacedTextSymbolIndex&&(N.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=xe)},Bn.prototype.commit=function(N){this.commitTime=N,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,H=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var Q=G?G.symbolFadeChange(N):1,xe=G?G.opacities:{},Pe=G?G.variableOffsets:{},U=G?G.placedOrientations:{};for(var te in this.placements){var oe=this.placements[te],_e=xe[te];_e?(this.opacities[te]=new Gt(_e,Q,oe.text,oe.icon),H=H||oe.text!==_e.text.placed||oe.icon!==_e.icon.placed):(this.opacities[te]=new Gt(null,Q,oe.text,oe.icon,oe.skipFade),H=H||oe.text||oe.icon)}for(var ke in xe){var ze=xe[ke];if(!this.opacities[ke]){var Ge=new Gt(ze,Q,!1,!1);Ge.isHidden()||(this.opacities[ke]=Ge,H=H||ze.text.placed||ze.icon.placed)}}for(var qe in Pe)this.variableOffsets[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.variableOffsets[qe]=Pe[qe]);for(var Je in U)this.placedOrientations[Je]||!this.opacities[Je]||this.opacities[Je].isHidden()||(this.placedOrientations[Je]=U[Je]);H?this.lastPlacementChangeTime=N:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:N)},Bn.prototype.updateLayerOpacities=function(N,G){for(var H={},Q=0,xe=G;Q<xe.length;Q+=1){var Pe=xe[Q],U=Pe.getBucket(N);U&&Pe.latestFeatureIndex&&N.id===U.layerIds[0]&&this.updateBucketOpacities(U,H,Pe.collisionBoxArray)}},Bn.prototype.updateBucketOpacities=function(N,G,H){var Q=this;N.hasTextData()&&N.text.opacityVertexArray.clear(),N.hasIconData()&&N.icon.opacityVertexArray.clear(),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexArray.clear(),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexArray.clear();var xe=N.layers[0].layout,Pe=new Gt(null,0,!1,!1,!0),U=xe.get("text-allow-overlap"),te=xe.get("icon-allow-overlap"),oe=xe.get("text-variable-anchor"),_e=xe.get("text-rotation-alignment")==="map",ke=xe.get("text-pitch-alignment")==="map",ze=xe.get("icon-text-fit")!=="none",Ge=new Gt(null,0,U&&(te||!N.hasIconData()||xe.get("icon-optional")),te&&(U||!N.hasTextData()||xe.get("text-optional")),!0);!N.collisionArrays&&H&&(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData())&&N.deserializeCollisionBoxes(H);for(var qe=function(yt,_t,It){for(var zt=0;zt<_t/4;zt++)yt.opacityVertexArray.emplaceBack(It)},Je=function(yt){var _t=N.symbolInstances.get(yt),It=_t.numHorizontalGlyphVertices,zt=_t.numVerticalGlyphVertices,Rt=_t.crossTileID,Ht=G[Rt],Dt=Q.opacities[Rt];Ht?Dt=Pe:Dt||(Dt=Ge,Q.opacities[Rt]=Dt),G[Rt]=!0;var sn=It>0||zt>0,$t=_t.numIconVertices>0,Zt=Q.placedOrientations[_t.crossTileID],xn=Zt===a.WritingMode.vertical,bn=Zt===a.WritingMode.horizontal||Zt===a.WritingMode.horizontalOnly;if(sn){var Un=Cn(Dt.text),jn=xn?pn:Un;qe(N.text,It,jn);var Xn=bn?pn:Un;qe(N.text,zt,Xn);var Qn=Dt.text.isHidden();[_t.rightJustifiedTextSymbolIndex,_t.centerJustifiedTextSymbolIndex,_t.leftJustifiedTextSymbolIndex].forEach(function(Yr){Yr>=0&&(N.text.placedSymbolArray.get(Yr).hidden=Qn||xn?1:0)}),_t.verticalPlacedTextSymbolIndex>=0&&(N.text.placedSymbolArray.get(_t.verticalPlacedTextSymbolIndex).hidden=Qn||bn?1:0);var hr=Q.variableOffsets[_t.crossTileID];hr&&Q.markUsedJustification(N,hr.anchor,_t,Zt);var cr=Q.placedOrientations[_t.crossTileID];cr&&(Q.markUsedJustification(N,"left",_t,cr),Q.markUsedOrientation(N,cr,_t))}if($t){var vr=Cn(Dt.icon),Mr=!(ze&&_t.verticalPlacedIconSymbolIndex&&xn);if(_t.placedIconSymbolIndex>=0){var Fr=Mr?vr:pn;qe(N.icon,_t.numIconVertices,Fr),N.icon.placedSymbolArray.get(_t.placedIconSymbolIndex).hidden=Dt.icon.isHidden()}if(_t.verticalPlacedIconSymbolIndex>=0){var Gn=Mr?pn:vr;qe(N.icon,_t.numVerticalIconVertices,Gn),N.icon.placedSymbolArray.get(_t.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden()}}if(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData()){var ur=N.collisionArrays[yt];if(ur){var yr=new a.Point(0,0);if(ur.textBox||ur.verticalTextBox){var Ar=!0;if(oe){var Or=Q.variableOffsets[Rt];Or?(yr=Yn(Or.anchor,Or.width,Or.height,Or.textOffset,Or.textBoxScale),_e&&yr._rotate(ke?Q.transform.angle:-Q.transform.angle)):Ar=!1}ur.textBox&&rr(N.textCollisionBox.collisionVertexArray,Dt.text.placed,!Ar||xn,yr.x,yr.y),ur.verticalTextBox&&rr(N.textCollisionBox.collisionVertexArray,Dt.text.placed,!Ar||bn,yr.x,yr.y)}var jr=!!(!bn&&ur.verticalIconBox);ur.iconBox&&rr(N.iconCollisionBox.collisionVertexArray,Dt.icon.placed,jr,ze?yr.x:0,ze?yr.y:0),ur.verticalIconBox&&rr(N.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!jr,ze?yr.x:0,ze?yr.y:0)}}},$e=0;$e<N.symbolInstances.length;$e++)Je($e);if(N.sortFeatures(this.transform.angle),this.retainedQueryData[N.bucketInstanceId]&&(this.retainedQueryData[N.bucketInstanceId].featureSortOrder=N.featureSortOrder),N.hasTextData()&&N.text.opacityVertexBuffer&&N.text.opacityVertexBuffer.updateData(N.text.opacityVertexArray),N.hasIconData()&&N.icon.opacityVertexBuffer&&N.icon.opacityVertexBuffer.updateData(N.icon.opacityVertexArray),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexBuffer&&N.iconCollisionBox.collisionVertexBuffer.updateData(N.iconCollisionBox.collisionVertexArray),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexBuffer&&N.textCollisionBox.collisionVertexBuffer.updateData(N.textCollisionBox.collisionVertexArray),N.bucketInstanceId in this.collisionCircleArrays){var st=this.collisionCircleArrays[N.bucketInstanceId];N.placementInvProjMatrix=st.invProjMatrix,N.placementViewportMatrix=st.viewportMatrix,N.collisionCircleArray=st.circles,delete this.collisionCircleArrays[N.bucketInstanceId]}},Bn.prototype.symbolFadeChange=function(N){return this.fadeDuration===0?1:(N-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Bn.prototype.zoomAdjustment=function(N){return Math.max(0,(this.transform.zoom-N)/1.5)},Bn.prototype.hasTransitions=function(N){return this.stale||N-this.lastPlacementChangeTime<this.fadeDuration},Bn.prototype.stillRecent=function(N,G){var H=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*H>N},Bn.prototype.setStale=function(){this.stale=!0};var Yt=Math.pow(2,25),An=Math.pow(2,24),Ct=Math.pow(2,17),Kt=Math.pow(2,16),rn=Math.pow(2,9),Tn=Math.pow(2,8),Mn=Math.pow(2,1);function Cn(N){if(N.opacity===0&&!N.placed)return 0;if(N.opacity===1&&N.placed)return 4294967295;var G=N.placed?1:0,H=Math.floor(127*N.opacity);return H*Yt+G*An+H*Ct+G*Kt+H*rn+G*Tn+H*Mn+G}var pn=0,en=function(N){this._sortAcrossTiles=N.layout.get("symbol-z-order")!=="viewport-y"&&N.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};en.prototype.continuePlacement=function(N,G,H,Q,xe){for(var Pe=this._bucketParts;this._currentTileIndex<N.length;){var U=N[this._currentTileIndex];if(G.getBucketParts(Pe,Q,U,this._sortAcrossTiles),this._currentTileIndex++,xe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(oe,_e){return oe.sortKey-_e.sortKey}));this._currentPartIndex<Pe.length;){var te=Pe[this._currentPartIndex];if(G.placeLayerBucketPart(te,this._seenCrossTileIDs,H),this._currentPartIndex++,xe())return!0}return!1};var nn=function(N,G,H,Q,xe,Pe,U){this.placement=new Bn(N,xe,Pe,U),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=Q,this._done=!1};nn.prototype.isDone=function(){return this._done},nn.prototype.continuePlacement=function(N,G,H){for(var Q=this,xe=a.browser.now(),Pe=function(){var oe=a.browser.now()-xe;return!Q._forceFullPlacement&&oe>2};this._currentPlacementIndex>=0;){var U=G[N[this._currentPlacementIndex]],te=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=te)&&(!U.maxzoom||U.maxzoom>te)){if(this._inProgressLayer||(this._inProgressLayer=new en(U)),this._inProgressLayer.continuePlacement(H[U.source],this.placement,this._showCollisionBoxes,U,Pe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},nn.prototype.commit=function(N){return this.placement.commit(N),this.placement};var fn=512/a.EXTENT/2,dn=function(N,G,H){this.tileID=N,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var Q=0;Q<G.length;Q++){var xe=G.get(Q),Pe=xe.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:xe.crossTileID,coord:this.getScaledCoordinates(xe,N)})}};dn.prototype.getScaledCoordinates=function(N,G){var H=G.canonical.z-this.tileID.canonical.z,Q=fn/Math.pow(2,H);return{x:Math.floor((G.canonical.x*a.EXTENT+N.anchorX)*Q),y:Math.floor((G.canonical.y*a.EXTENT+N.anchorY)*Q)}},dn.prototype.findMatches=function(N,G,H){for(var Q=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),xe=0;xe<N.length;xe++){var Pe=N.get(xe);if(!Pe.crossTileID){var U=this.indexedSymbolInstances[Pe.key];if(U)for(var te=this.getScaledCoordinates(Pe,G),oe=0,_e=U;oe<_e.length;oe+=1){var ke=_e[oe];if(Math.abs(ke.coord.x-te.x)<=Q&&Math.abs(ke.coord.y-te.y)<=Q&&!H[ke.crossTileID]){H[ke.crossTileID]=!0,Pe.crossTileID=ke.crossTileID;break}}}}};var Rn=function(){this.maxCrossTileID=0};Rn.prototype.generate=function(){return++this.maxCrossTileID};var On=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};On.prototype.handleWrapJump=function(N){var G=Math.round((N-this.lng)/360);if(G!==0)for(var H in this.indexes){var Q=this.indexes[H],xe={};for(var Pe in Q){var U=Q[Pe];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+G),xe[U.tileID.key]=U}this.indexes[H]=xe}this.lng=N},On.prototype.addBucket=function(N,G,H){if(this.indexes[N.overscaledZ]&&this.indexes[N.overscaledZ][N.key]){if(this.indexes[N.overscaledZ][N.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(N.overscaledZ,this.indexes[N.overscaledZ][N.key])}for(var Q=0;Q<G.symbolInstances.length;Q++)G.symbolInstances.get(Q).crossTileID=0;this.usedCrossTileIDs[N.overscaledZ]||(this.usedCrossTileIDs[N.overscaledZ]={});var xe=this.usedCrossTileIDs[N.overscaledZ];for(var Pe in this.indexes){var U=this.indexes[Pe];if(Number(Pe)>N.overscaledZ)for(var te in U){var oe=U[te];oe.tileID.isChildOf(N)&&oe.findMatches(G.symbolInstances,N,xe)}else{var _e=U[N.scaledTo(Number(Pe)).key];_e&&_e.findMatches(G.symbolInstances,N,xe)}}for(var ke=0;ke<G.symbolInstances.length;ke++){var ze=G.symbolInstances.get(ke);ze.crossTileID||(ze.crossTileID=H.generate(),xe[ze.crossTileID]=!0)}return this.indexes[N.overscaledZ]===void 0&&(this.indexes[N.overscaledZ]={}),this.indexes[N.overscaledZ][N.key]=new dn(N,G.symbolInstances,G.bucketInstanceId),!0},On.prototype.removeBucketCrossTileIDs=function(N,G){for(var H in G.indexedSymbolInstances)for(var Q=0,xe=G.indexedSymbolInstances[H];Q<xe.length;Q+=1){var Pe=xe[Q];delete this.usedCrossTileIDs[N][Pe.crossTileID]}},On.prototype.removeStaleBuckets=function(N){var G=!1;for(var H in this.indexes){var Q=this.indexes[H];for(var xe in Q)N[Q[xe].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,Q[xe]),delete Q[xe],G=!0)}return G};var qn=function(){this.layerIndexes={},this.crossTileIDs=new Rn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};qn.prototype.addLayer=function(N,G,H){var Q=this.layerIndexes[N.id];Q===void 0&&(Q=this.layerIndexes[N.id]=new On);var xe=!1,Pe={};Q.handleWrapJump(H);for(var U=0,te=G;U<te.length;U+=1){var oe=te[U],_e=oe.getBucket(N);_e&&N.id===_e.layerIds[0]&&(_e.bucketInstanceId||(_e.bucketInstanceId=++this.maxBucketInstanceId),Q.addBucket(oe.tileID,_e,this.crossTileIDs)&&(xe=!0),Pe[_e.bucketInstanceId]=!0)}return Q.removeStaleBuckets(Pe)&&(xe=!0),xe},qn.prototype.pruneUnusedLayers=function(N){var G={};for(var H in N.forEach(function(Q){G[Q]=!0}),this.layerIndexes)G[H]||delete this.layerIndexes[H]};var Vn=function(N,G){return a.emitValidationErrors(N,G&&G.filter(function(H){return H.identifier!=="source.canvas"}))},tr=a.pick(pt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Zn=a.pick(pt,["setCenter","setZoom","setBearing","setPitch"]),lr=function(){var N={},G=a.styleSpec.$version;for(var H in a.styleSpec.$root){var Q=a.styleSpec.$root[H];if(Q.required){var xe;(xe=H==="version"?G:Q.type==="array"?[]:{})!=null&&(N[H]=xe)}}return N}(),or=function(N){function G(H,Q){var xe=this;Q===void 0&&(Q={}),N.call(this),this.map=H,this.dispatcher=new C(xt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new v(H._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new qn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var Pe=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(U){var te={pluginStatus:U.pluginStatus,pluginURL:U.pluginURL};Pe.dispatcher.broadcast("syncRTLPluginState",te,function(oe,_e){if(a.triggerPluginCompletionEvent(oe),_e&&_e.every(function(ze){return ze}))for(var ke in Pe.sourceCaches)Pe.sourceCaches[ke].reload()})}),this.on("data",function(U){if(U.dataType==="source"&&U.sourceDataType==="metadata"){var te=xe.sourceCaches[U.sourceId];if(te){var oe=te.getSource();if(oe&&oe.vectorLayerIds)for(var _e in xe._layers){var ke=xe._layers[_e];ke.source===oe.id&&xe._validateLayer(ke)}}}})}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(H,Q){var xe=this;Q===void 0&&(Q={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var Pe=typeof Q.validate=="boolean"?Q.validate:!a.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,Q.accessToken);var U=this.map._requestManager.transformRequest(H,a.ResourceType.Style);this._request=a.getJSON(U,function(te,oe){xe._request=null,te?xe.fire(new a.ErrorEvent(te)):oe&&xe._load(oe,Pe)})},G.prototype.loadJSON=function(H,Q){var xe=this;Q===void 0&&(Q={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){xe._request=null,xe._load(H,Q.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(lr,!1)},G.prototype._load=function(H,Q){if(!Q||!Vn(this,a.validateStyle(H))){for(var xe in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(xe,H.sources[xe],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var Pe=Et(this.stylesheet.layers);this._order=Pe.map(function(_e){return _e.id}),this._layers={},this._serializedLayers={};for(var U=0,te=Pe;U<te.length;U+=1){var oe=te[U];(oe=a.createStyleLayer(oe)).setEventedParent(this,{layer:{id:oe.id}}),this._layers[oe.id]=oe,this._serializedLayers[oe.id]=oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},G.prototype._loadSprite=function(H){var Q=this;this._spriteRequest=function(xe,Pe,U){var te,oe,_e,ke=a.browser.devicePixelRatio>1?"@2x":"",ze=a.getJSON(Pe.transformRequest(Pe.normalizeSpriteURL(xe,ke,".json"),a.ResourceType.SpriteJSON),function(Je,$e){ze=null,_e||(_e=Je,te=$e,qe())}),Ge=a.getImage(Pe.transformRequest(Pe.normalizeSpriteURL(xe,ke,".png"),a.ResourceType.SpriteImage),function(Je,$e){Ge=null,_e||(_e=Je,oe=$e,qe())});function qe(){if(_e)U(_e);else if(te&&oe){var Je=a.browser.getImageData(oe),$e={};for(var st in te){var yt=te[st],_t=yt.width,It=yt.height,zt=yt.x,Rt=yt.y,Ht=yt.sdf,Dt=yt.pixelRatio,sn=yt.stretchX,$t=yt.stretchY,Zt=yt.content,xn=new a.RGBAImage({width:_t,height:It});a.RGBAImage.copy(Je,xn,{x:zt,y:Rt},{x:0,y:0},{width:_t,height:It}),$e[st]={data:xn,pixelRatio:Dt,sdf:Ht,stretchX:sn,stretchY:$t,content:Zt}}U(null,$e)}}return{cancel:function(){ze&&(ze.cancel(),ze=null),Ge&&(Ge.cancel(),Ge=null)}}}(H,this.map._requestManager,function(xe,Pe){if(Q._spriteRequest=null,xe)Q.fire(new a.ErrorEvent(xe));else if(Pe)for(var U in Pe)Q.imageManager.addImage(U,Pe[U]);Q.imageManager.setLoaded(!0),Q._availableImages=Q.imageManager.listImages(),Q.dispatcher.broadcast("setImages",Q._availableImages),Q.fire(new a.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(H){var Q=this.sourceCaches[H.source];if(Q){var xe=H.sourceLayer;if(xe){var Pe=Q.getSource();(Pe.type==="geojson"||Pe.vectorLayerIds&&Pe.vectorLayerIds.indexOf(xe)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+xe+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+H.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(H){for(var Q=[],xe=0,Pe=H;xe<Pe.length;xe+=1){var U=Pe[xe],te=this._layers[U];te.type!=="custom"&&Q.push(te.serialize())}return Q},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var Q in this._layers)if(this._layers[Q].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(H){if(this._loaded){var Q=this._changed;if(this._changed){var xe=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);for(var U in(xe.length||Pe.length)&&this._updateWorkerLayers(xe,Pe),this._updatedSources){var te=this._updatedSources[U];te==="reload"?this._reloadSource(U):te==="clear"&&this._clearSource(U)}for(var oe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[oe].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}for(var _e in this.sourceCaches)this.sourceCaches[_e].used=!1;for(var ke=0,ze=this._order;ke<ze.length;ke+=1){var Ge=ze[ke],qe=this._layers[Ge];qe.recalculate(H,this._availableImages),!qe.isHidden(H.zoom)&&qe.source&&(this.sourceCaches[qe.source].used=!0)}this.light.recalculate(H),this.z=H.zoom,Q&&this.fire(new a.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var Q in this.sourceCaches)this.sourceCaches[Q].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},G.prototype._updateWorkerLayers=function(H,Q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:Q})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(H){var Q=this;if(this._checkLoaded(),Vn(this,a.validateStyle(H)))return!1;(H=a.clone$1(H)).layers=Et(H.layers);var xe=Qt(this.serialize(),H).filter(function(U){return!(U.command in Zn)});if(xe.length===0)return!1;var Pe=xe.filter(function(U){return!(U.command in tr)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(U){return U.command}).join(", ")+".");return xe.forEach(function(U){U.command!=="setTransition"&&Q[U.command].apply(Q,U.args)}),this.stylesheet=H,!0},G.prototype.addImage=function(H,Q){if(this.getImage(H))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,Q),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},G.prototype.updateImage=function(H,Q){this.imageManager.updateImage(H,Q)},G.prototype.getImage=function(H){return this.imageManager.getImage(H)},G.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(H,Q,xe){var Pe=this;if(xe===void 0&&(xe={}),this._checkLoaded(),this.sourceCaches[H]!==void 0)throw new Error("There is already a source with this ID");if(!Q.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(Q).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(Q.type)>=0&&this._validate(a.validateStyle.source,"sources."+H,Q,null,xe))){this.map&&this.map._collectResourceTiming&&(Q.collectResourceTiming=!0);var U=this.sourceCaches[H]=new ut(H,Q,this.dispatcher);U.style=this,U.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:U.serialize(),sourceId:H}}),U.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(H){if(this._checkLoaded(),this.sourceCaches[H]===void 0)throw new Error("There is no source with this ID");for(var Q in this._layers)if(this._layers[Q].source===H)return this.fire(new a.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+Q+'" is using it.')));var xe=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],xe.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),xe.setEventedParent(null),xe.clearTiles(),xe.onRemove&&xe.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(H,Q){this._checkLoaded(),this.sourceCaches[H].getSource().setData(Q),this._changed=!0},G.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},G.prototype.addLayer=function(H,Q,xe){xe===void 0&&(xe={}),this._checkLoaded();var Pe=H.id;if(this.getLayer(Pe))this.fire(new a.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));else{var U;if(H.type==="custom"){if(Vn(this,a.validateCustomStyleLayer(H)))return;U=a.createStyleLayer(H)}else{if(typeof H.source=="object"&&(this.addSource(Pe,H.source),H=a.clone$1(H),H=a.extend(H,{source:Pe})),this._validate(a.validateStyle.layer,"layers."+Pe,H,{arrayIndex:-1},xe))return;U=a.createStyleLayer(H),this._validateLayer(U),U.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[U.id]=U.serialize()}var te=Q?this._order.indexOf(Q):this._order.length;if(Q&&te===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+Q+'" does not exist on this map.')));else{if(this._order.splice(te,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=U,this._removedLayers[Pe]&&U.source&&U.type!=="custom"){var oe=this._removedLayers[Pe];delete this._removedLayers[Pe],oe.type!==U.type?this._updatedSources[U.source]="clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())}this._updateLayer(U),U.onAdd&&U.onAdd(this.map)}}},G.prototype.moveLayer=function(H,Q){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==Q){var xe=this._order.indexOf(H);this._order.splice(xe,1);var Pe=Q?this._order.indexOf(Q):this._order.length;Q&&Pe===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+Q+'" does not exist on this map.'))):(this._order.splice(Pe,0,H),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(H){this._checkLoaded();var Q=this._layers[H];if(Q){Q.setEventedParent(null);var xe=this._order.indexOf(H);this._order.splice(xe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=Q,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],Q.onRemove&&Q.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(H){return this._layers[H]},G.prototype.hasLayer=function(H){return H in this._layers},G.prototype.setLayerZoomRange=function(H,Q,xe){this._checkLoaded();var Pe=this.getLayer(H);Pe?Pe.minzoom===Q&&Pe.maxzoom===xe||(Q!=null&&(Pe.minzoom=Q),xe!=null&&(Pe.maxzoom=xe),this._updateLayer(Pe)):this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(H,Q,xe){xe===void 0&&(xe={}),this._checkLoaded();var Pe=this.getLayer(H);if(Pe){if(!a.deepEqual(Pe.filter,Q))return Q==null?(Pe.filter=void 0,void this._updateLayer(Pe)):void(this._validate(a.validateStyle.filter,"layers."+Pe.id+".filter",Q,null,xe)||(Pe.filter=a.clone$1(Q),this._updateLayer(Pe)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(H){return a.clone$1(this.getLayer(H).filter)},G.prototype.setLayoutProperty=function(H,Q,xe,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var U=this.getLayer(H);U?a.deepEqual(U.getLayoutProperty(Q),xe)||(U.setLayoutProperty(Q,xe,Pe),this._updateLayer(U)):this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(H,Q){var xe=this.getLayer(H);if(xe)return xe.getLayoutProperty(Q);this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(H,Q,xe,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var U=this.getLayer(H);U?a.deepEqual(U.getPaintProperty(Q),xe)||(U.setPaintProperty(Q,xe,Pe)&&this._updateLayer(U),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(H,Q){return this.getLayer(H).getPaintProperty(Q)},G.prototype.setFeatureState=function(H,Q){this._checkLoaded();var xe=H.source,Pe=H.sourceLayer,U=this.sourceCaches[xe];if(U!==void 0){var te=U.getSource().type;te==="geojson"&&Pe?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):te!=="vector"||Pe?(H.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),U.setFeatureState(Pe,H.id,Q)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+xe+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(H,Q){this._checkLoaded();var xe=H.source,Pe=this.sourceCaches[xe];if(Pe!==void 0){var U=Pe.getSource().type,te=U==="vector"?H.sourceLayer:void 0;U!=="vector"||te?Q&&typeof H.id!="string"&&typeof H.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Pe.removeFeatureState(te,H.id,Q):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+xe+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(H){this._checkLoaded();var Q=H.source,xe=H.sourceLayer,Pe=this.sourceCaches[Q];if(Pe!==void 0){if(Pe.getSource().type!=="vector"||xe)return H.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(xe,H.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+Q+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return H!==void 0})},G.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&this.sourceCaches[H.source].getSource().type!=="raster"&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(H){for(var Q=this,xe=function(Zt){return Q._layers[Zt].type==="fill-extrusion"},Pe={},U=[],te=this._order.length-1;te>=0;te--){var oe=this._order[te];if(xe(oe)){Pe[oe]=te;for(var _e=0,ke=H;_e<ke.length;_e+=1){var ze=ke[_e][oe];if(ze)for(var Ge=0,qe=ze;Ge<qe.length;Ge+=1){var Je=qe[Ge];U.push(Je)}}}}U.sort(function(Zt,xn){return xn.intersectionZ-Zt.intersectionZ});for(var $e=[],st=this._order.length-1;st>=0;st--){var yt=this._order[st];if(xe(yt))for(var _t=U.length-1;_t>=0;_t--){var It=U[_t].feature;if(Pe[It.layer.id]<st)break;$e.push(It),U.pop()}else for(var zt=0,Rt=H;zt<Rt.length;zt+=1){var Ht=Rt[zt][yt];if(Ht)for(var Dt=0,sn=Ht;Dt<sn.length;Dt+=1){var $t=sn[Dt];$e.push($t.feature)}}}return $e},G.prototype.queryRenderedFeatures=function(H,Q,xe){Q&&Q.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",Q.filter,null,Q);var Pe={};if(Q&&Q.layers){if(!Array.isArray(Q.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var U=0,te=Q.layers;U<te.length;U+=1){var oe=te[U],_e=this._layers[oe];if(!_e)return this.fire(new a.ErrorEvent(new Error("The layer '"+oe+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[_e.source]=!0}}var ke=[];for(var ze in Q.availableImages=this._availableImages,this.sourceCaches)Q.layers&&!Pe[ze]||ke.push(K(this.sourceCaches[ze],this._layers,this._serializedLayers,H,Q,xe));return this.placement&&ke.push(function(Ge,qe,Je,$e,st,yt,_t){for(var It={},zt=yt.queryRenderedSymbols($e),Rt=[],Ht=0,Dt=Object.keys(zt).map(Number);Ht<Dt.length;Ht+=1){var sn=Dt[Ht];Rt.push(_t[sn])}Rt.sort(Y);for(var $t=function(){var jn=xn[Zt],Xn=jn.featureIndex.lookupSymbolFeatures(zt[jn.bucketInstanceId],qe,jn.bucketIndex,jn.sourceLayerIndex,st.filter,st.layers,st.availableImages,Ge);for(var Qn in Xn){var hr=It[Qn]=It[Qn]||[],cr=Xn[Qn];cr.sort(function(Gn,ur){var yr=jn.featureSortOrder;if(yr){var Ar=yr.indexOf(Gn.featureIndex);return yr.indexOf(ur.featureIndex)-Ar}return ur.featureIndex-Gn.featureIndex});for(var vr=0,Mr=cr;vr<Mr.length;vr+=1){var Fr=Mr[vr];hr.push(Fr)}}},Zt=0,xn=Rt;Zt<xn.length;Zt+=1)$t();var bn=function(jn){It[jn].forEach(function(Xn){var Qn=Xn.feature,hr=Ge[jn],cr=Je[hr.source].getFeatureState(Qn.layer["source-layer"],Qn.id);Qn.source=Qn.layer.source,Qn.layer["source-layer"]&&(Qn.sourceLayer=Qn.layer["source-layer"]),Qn.state=cr})};for(var Un in It)bn(Un);return It}(this._layers,this._serializedLayers,this.sourceCaches,H,Q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ke)},G.prototype.querySourceFeatures=function(H,Q){Q&&Q.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",Q.filter,null,Q);var xe=this.sourceCaches[H];return xe?function(Pe,U){for(var te=Pe.getRenderableIds().map(function(qe){return Pe.getTileByID(qe)}),oe=[],_e={},ke=0;ke<te.length;ke++){var ze=te[ke],Ge=ze.tileID.canonical.key;_e[Ge]||(_e[Ge]=!0,ze.querySourceFeatures(oe,U))}return oe}(xe,Q):[]},G.prototype.addSourceType=function(H,Q,xe){return G.getSourceType(H)?xe(new Error('A source type called "'+H+'" already exists.')):(G.setSourceType(H,Q),Q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:Q.workerSourceURL},xe):xe(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(H,Q){Q===void 0&&(Q={}),this._checkLoaded();var xe=this.light.getLight(),Pe=!1;for(var U in H)if(!a.deepEqual(H[U],xe[U])){Pe=!0;break}if(Pe){var te={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,Q),this.light.updateTransitions(te)}},G.prototype._validate=function(H,Q,xe,Pe,U){return U===void 0&&(U={}),(!U||U.validate!==!1)&&Vn(this,H.call(a.validateStyle,a.extend({key:Q,style:this.serialize(),value:xe,styleSpec:a.styleSpec},Pe)))},G.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var Q in this.sourceCaches)this.sourceCaches[Q].clearTiles(),this.sourceCaches[Q].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},G.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},G.prototype._updateSources=function(H){for(var Q in this.sourceCaches)this.sourceCaches[Q].update(H)},G.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},G.prototype._updatePlacement=function(H,Q,xe,Pe,U){U===void 0&&(U=!1);for(var te=!1,oe=!1,_e={},ke=0,ze=this._order;ke<ze.length;ke+=1){var Ge=ze[ke],qe=this._layers[Ge];if(qe.type==="symbol"){if(!_e[qe.source]){var Je=this.sourceCaches[qe.source];_e[qe.source]=Je.getRenderableIds(!0).map(function(zt){return Je.getTileByID(zt)}).sort(function(zt,Rt){return Rt.tileID.overscaledZ-zt.tileID.overscaledZ||(zt.tileID.isLessThan(Rt.tileID)?-1:1)})}var $e=this.crossTileSymbolIndex.addLayer(qe,_e[qe.source],H.center.lng);te=te||$e}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((U=U||this._layerOrderChanged||xe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),H.zoom))&&(this.pauseablePlacement=new nn(H,this._order,U,Q,xe,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,_e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),oe=!0),te&&this.pauseablePlacement.placement.setStale()),oe||te)for(var st=0,yt=this._order;st<yt.length;st+=1){var _t=yt[st],It=this._layers[_t];It.type==="symbol"&&this.placement.updateLayerOpacities(It,_e[It.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},G.prototype.getImages=function(H,Q,xe){this.imageManager.getImages(Q.icons,xe),this._updateTilesForChangedImages();var Pe=this.sourceCaches[Q.source];Pe&&Pe.setDependencies(Q.tileID.key,Q.type,Q.icons)},G.prototype.getGlyphs=function(H,Q,xe){this.glyphManager.getGlyphs(Q.stacks,xe)},G.prototype.getResource=function(H,Q,xe){return a.makeRequest(Q,xe)},G}(a.Evented);or.getSourceType=function(N){return re[N]},or.setSourceType=function(N,G){re[N]=G},or.registerForPluginStateChange=a.registerForPluginStateChange;var sr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),mr=ti(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),gr=ti(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Er=ti(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),$n=ti(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),_r=ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Dr=ti(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ii=ti(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),wi=ti("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),yi=ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ei=ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),hi=ti(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Fi=ti(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),vo=ti(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ra=ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Oo=ti(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Xl=ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ws=ti(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),il=ti(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Yl=ti(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yo=ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),gu=ti(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ts=ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ms=ti(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),xo=ti(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Wi=ti(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),al=ti(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ti(N,G){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Q={};return{fragmentSource:N=N.replace(H,function(xe,Pe,U,te,oe){return Q[oe]=!0,Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+oe+`
varying `+U+" "+te+" "+oe+`;
#else
uniform `+U+" "+te+" u_"+oe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+oe+`
    `+U+" "+te+" "+oe+" = u_"+oe+`;
#endif
`}),vertexSource:G=G.replace(H,function(xe,Pe,U,te,oe){var _e=te==="float"?"vec2":"vec4",ke=oe.match(/color/)?"color":_e;return Q[oe]?Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+oe+`
uniform lowp float u_`+oe+`_t;
attribute `+U+" "+_e+" a_"+oe+`;
varying `+U+" "+te+" "+oe+`;
#else
uniform `+U+" "+te+" u_"+oe+`;
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_`+oe+`
    `+oe+" = a_"+oe+`;
#else
    `+U+" "+te+" "+oe+" = u_"+oe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+oe+`
    `+oe+" = unpack_mix_"+ke+"(a_"+oe+", u_"+oe+`_t);
#else
    `+U+" "+te+" "+oe+" = u_"+oe+`;
#endif
`:Pe==="define"?`
#ifndef HAS_UNIFORM_u_`+oe+`
uniform lowp float u_`+oe+`_t;
attribute `+U+" "+_e+" a_"+oe+`;
#else
uniform `+U+" "+te+" u_"+oe+`;
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_`+oe+`
    `+U+" "+te+" "+oe+" = a_"+oe+`;
#else
    `+U+" "+te+" "+oe+" = u_"+oe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+oe+`
    `+U+" "+te+" "+oe+" = unpack_mix_"+ke+"(a_"+oe+", u_"+oe+`_t);
#else
    `+U+" "+te+" "+oe+" = u_"+oe+`;
#endif
`})}}var _o=Object.freeze({__proto__:null,prelude:mr,background:gr,backgroundPattern:Er,circle:$n,clippingMask:_r,heatmap:Dr,heatmapTexture:ii,collisionBox:wi,collisionCircle:yi,debug:Ei,fill:hi,fillOutline:Fi,fillOutlinePattern:vo,fillPattern:Ra,fillExtrusion:Oo,fillExtrusionPattern:Xl,hillshadePrepare:ws,hillshade:il,line:Yl,lineGradient:yo,linePattern:gu,lineSDF:Ts,raster:Ms,symbolIcon:xo,symbolSDF:Wi,symbolTextAndIcon:al}),Va=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Va.prototype.bind=function(N,G,H,Q,xe,Pe,U,te){this.context=N;for(var oe=this.boundPaintVertexBuffers.length!==Q.length,_e=0;!oe&&_e<Q.length;_e++)this.boundPaintVertexBuffers[_e]!==Q[_e]&&(oe=!0);var ke=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==H||oe||this.boundIndexBuffer!==xe||this.boundVertexOffset!==Pe||this.boundDynamicVertexBuffer!==U||this.boundDynamicVertexBuffer2!==te;!N.extVertexArrayObject||ke?this.freshBind(G,H,Q,xe,Pe,U,te):(N.bindVertexArrayOES.set(this.vao),U&&U.bind(),xe&&xe.dynamicDraw&&xe.bind(),te&&te.bind())},Va.prototype.freshBind=function(N,G,H,Q,xe,Pe,U){var te,oe=N.numAttributes,_e=this.context,ke=_e.gl;if(_e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=_e.extVertexArrayObject.createVertexArrayOES(),_e.bindVertexArrayOES.set(this.vao),te=0,this.boundProgram=N,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=Q,this.boundVertexOffset=xe,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=U;else{te=_e.currentNumAttributes||0;for(var ze=oe;ze<te;ze++)ke.disableVertexAttribArray(ze)}G.enableAttributes(ke,N);for(var Ge=0,qe=H;Ge<qe.length;Ge+=1)qe[Ge].enableAttributes(ke,N);Pe&&Pe.enableAttributes(ke,N),U&&U.enableAttributes(ke,N),G.bind(),G.setVertexAttribPointers(ke,N,xe);for(var Je=0,$e=H;Je<$e.length;Je+=1){var st=$e[Je];st.bind(),st.setVertexAttribPointers(ke,N,xe)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers(ke,N,xe)),Q&&Q.bind(),U&&(U.bind(),U.setVertexAttribPointers(ke,N,xe)),_e.currentNumAttributes=oe},Va.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Do=function(N,G,H,Q,xe){var Pe=N.gl;this.program=Pe.createProgram();var U=H?H.defines():[];xe&&U.push("#define OVERDRAW_INSPECTOR;");var te=U.concat(mr.fragmentSource,G.fragmentSource).join(`
`),oe=U.concat(mr.vertexSource,G.vertexSource).join(`
`),_e=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(_e,te),Pe.compileShader(_e),Pe.attachShader(this.program,_e);var ke=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(ke,oe),Pe.compileShader(ke),Pe.attachShader(this.program,ke);for(var ze=H?H.layoutAttributes:[],Ge=0;Ge<ze.length;Ge++)Pe.bindAttribLocation(this.program,Ge,ze[Ge].name);Pe.linkProgram(this.program),Pe.deleteShader(ke),Pe.deleteShader(_e),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var qe={},Je=0;Je<this.numAttributes;Je++){var $e=Pe.getActiveAttrib(this.program,Je);$e&&(this.attributes[$e.name]=Pe.getAttribLocation(this.program,$e.name))}for(var st=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),yt=0;yt<st;yt++){var _t=Pe.getActiveUniform(this.program,yt);_t&&(qe[_t.name]=Pe.getUniformLocation(this.program,_t.name))}this.fixedUniforms=Q(N,qe),this.binderUniforms=H?H.getUniforms(N,qe):[]}}};function io(N,G,H){var Q=1/Jn(H,1,G.transform.tileZoom),xe=Math.pow(2,H.tileID.overscaledZ),Pe=H.tileSize*Math.pow(2,G.transform.tileZoom)/xe,U=Pe*(H.tileID.canonical.x+H.tileID.wrap*xe),te=Pe*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[Q,N.fromScale,N.toScale],u_fade:N.t,u_pixel_coord_upper:[U>>16,te>>16],u_pixel_coord_lower:[65535&U,65535&te]}}Do.prototype.draw=function(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze,Ge,qe,Je,$e){var st,yt=N.gl;if(!this.failedToCreate){for(var _t in N.program.set(this.program),N.setDepthMode(H),N.setStencilMode(Q),N.setColorMode(xe),N.setCullFace(Pe),this.fixedUniforms)this.fixedUniforms[_t].set(U[_t]);qe&&qe.setUniforms(N,this.binderUniforms,ze,{zoom:Ge});for(var It=(st={},st[yt.LINES]=2,st[yt.TRIANGLES]=3,st[yt.LINE_STRIP]=1,st)[G],zt=0,Rt=ke.get();zt<Rt.length;zt+=1){var Ht=Rt[zt],Dt=Ht.vaos||(Ht.vaos={});(Dt[te]||(Dt[te]=new Va)).bind(N,this,oe,qe?qe.getPaintVertexBuffers():[],_e,Ht.vertexOffset,Je,$e),yt.drawElements(G,Ht.primitiveLength*It,yt.UNSIGNED_SHORT,Ht.primitiveOffset*It*2)}}};var Qo=function(N,G,H,Q){var xe=G.style.light,Pe=xe.properties.get("position"),U=[Pe.x,Pe.y,Pe.z],te=a.create$1();xe.properties.get("anchor")==="viewport"&&a.fromRotation(te,-G.transform.angle),a.transformMat3(U,U,te);var oe=xe.properties.get("color");return{u_matrix:N,u_lightpos:U,u_lightintensity:xe.properties.get("intensity"),u_lightcolor:[oe.r,oe.g,oe.b],u_vertical_gradient:+H,u_opacity:Q}},zo=function(N,G,H,Q,xe,Pe,U){return a.extend(Qo(N,G,H,Q),io(Pe,G,U),{u_height_factor:-Math.pow(2,xe.overscaledZ)/U.tileSize/8})},Fo=function(N){return{u_matrix:N}},Ll=function(N,G,H,Q){return a.extend(Fo(N),io(H,G,Q))},vu=function(N,G){return{u_matrix:N,u_world:G}},es=function(N,G,H,Q,xe){return a.extend(Ll(N,G,H,Q),{u_world:xe})},yu=function(N,G,H,Q){var xe,Pe,U=N.transform;if(Q.paint.get("circle-pitch-alignment")==="map"){var te=Jn(H,1,U.zoom);xe=!0,Pe=[te,te]}else xe=!1,Pe=U.pixelsToGLUnits;return{u_camera_to_center_distance:U.cameraToCenterDistance,u_scale_with_map:+(Q.paint.get("circle-pitch-scale")==="map"),u_matrix:N.translatePosMatrix(G.posMatrix,H,Q.paint.get("circle-translate"),Q.paint.get("circle-translate-anchor")),u_pitch_with_map:+xe,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Pe}},Zl=function(N,G,H){var Q=Jn(H,1,G.zoom),xe=Math.pow(2,G.zoom-H.tileID.overscaledZ),Pe=H.tileID.overscaleFactor();return{u_matrix:N,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:Q,u_extrude_scale:[G.pixelsToGLUnits[0]/(Q*xe),G.pixelsToGLUnits[1]/(Q*xe)],u_overscale_factor:Pe}},xu=function(N,G,H){return{u_matrix:N,u_inv_matrix:G,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},Kl=function(N,G,H){return H===void 0&&(H=1),{u_matrix:N,u_color:G,u_overlay:0,u_overlay_scale:H}},_u=function(N){return{u_matrix:N}},Gs=function(N,G,H,Q){return{u_matrix:N,u_extrude_scale:Jn(G,1,H),u_intensity:Q}},ts=function(N,G,H,Q){var xe=a.create();a.ortho(xe,0,N.width,N.height,0,0,1);var Pe=N.context.gl;return{u_matrix:xe,u_world:[Pe.drawingBufferWidth,Pe.drawingBufferHeight],u_image:H,u_color_ramp:Q,u_opacity:G.paint.get("heatmap-opacity")}},As=function(N,G,H){var Q=H.paint.get("hillshade-shadow-color"),xe=H.paint.get("hillshade-highlight-color"),Pe=H.paint.get("hillshade-accent-color"),U=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(U-=N.transform.angle);var te,oe,_e,ke=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(G.tileID.toUnwrapped(),ke),u_image:0,u_latrange:(te=G.tileID,oe=Math.pow(2,te.canonical.z),_e=te.canonical.y,[new a.MercatorCoordinate(0,_e/oe).toLngLat().lat,new a.MercatorCoordinate(0,(_e+1)/oe).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),U],u_shadow:Q,u_highlight:xe,u_accent:Pe}},Ws=function(N,G,H){var Q=G.stride,xe=a.create();return a.ortho(xe,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(xe,xe,[0,-a.EXTENT,0]),{u_matrix:xe,u_image:1,u_dimension:[Q,Q],u_zoom:N.overscaledZ,u_maxzoom:H,u_unpack:G.getUnpackVector()}},Cl=function(N,G,H){var Q=N.transform;return{u_matrix:bo(N,G,H),u_ratio:1/Jn(G,1,Q.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},Jl=function(N,G,H){return a.extend(Cl(N,G,H),{u_image:0})},$l=function(N,G,H,Q){var xe=N.transform,Pe=Ss(G,xe);return{u_matrix:bo(N,G,H),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Jn(G,1,xe.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[Pe,Q.fromScale,Q.toScale],u_fade:Q.t,u_units_to_pixels:[1/xe.pixelsToGLUnits[0],1/xe.pixelsToGLUnits[1]]}},Za=function(N,G,H,Q,xe){var Pe=N.transform,U=N.lineAtlas,te=Ss(G,Pe),oe=H.layout.get("line-cap")==="round",_e=U.getDash(Q.from,oe),ke=U.getDash(Q.to,oe),ze=_e.width*xe.fromScale,Ge=ke.width*xe.toScale;return a.extend(Cl(N,G,H),{u_patternscale_a:[te/ze,-_e.height/2],u_patternscale_b:[te/Ge,-ke.height/2],u_sdfgamma:U.width/(256*Math.min(ze,Ge)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:_e.y,u_tex_y_b:ke.y,u_mix:xe.t})};function Ss(N,G){return 1/Jn(N,1,G.tileZoom)}function bo(N,G,H){return N.translatePosMatrix(G.tileID.posMatrix,G,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var No=function(N,G,H,Q,xe){return{u_matrix:N,u_tl_parent:G,u_scale_parent:H,u_buffer_scale:1,u_fade_t:Q.mix,u_opacity:Q.opacity*xe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:xe.paint.get("raster-brightness-min"),u_brightness_high:xe.paint.get("raster-brightness-max"),u_saturation_factor:(U=xe.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(Pe=xe.paint.get("raster-contrast"),Pe>0?1/(1-Pe):1+Pe),u_spin_weights:bu(xe.paint.get("raster-hue-rotate"))};var Pe,U};function bu(N){N*=Math.PI/180;var G=Math.sin(N),H=Math.cos(N);return[(2*H+1)/3,(-Math.sqrt(3)*G-H+1)/3,(Math.sqrt(3)*G-H+1)/3]}var ns,pi=function(N,G,H,Q,xe,Pe,U,te,oe,_e){var ke=xe.transform;return{u_is_size_zoom_constant:+(N==="constant"||N==="source"),u_is_size_feature_constant:+(N==="constant"||N==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:ke.cameraToCenterDistance,u_pitch:ke.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:ke.width/ke.height,u_fade_change:xe.options.fadeDuration?xe.symbolFadeChange:1,u_matrix:Pe,u_label_plane_matrix:U,u_coord_matrix:te,u_is_text:+oe,u_pitch_with_map:+Q,u_texsize:_e,u_texture:0}},ao=function(N,G,H,Q,xe,Pe,U,te,oe,_e,ke){var ze=xe.transform;return a.extend(pi(N,G,H,Q,xe,Pe,U,te,oe,_e),{u_gamma_scale:Q?Math.cos(ze._pitch)*ze.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+ke})},ol=function(N,G,H,Q,xe,Pe,U,te,oe,_e){return a.extend(ao(N,G,H,Q,xe,Pe,U,te,!0,oe,!0),{u_texsize_icon:_e,u_texture_icon:1})},Ka=function(N,G,H){return{u_matrix:N,u_opacity:G,u_color:H}},Es=function(N,G,H,Q,xe,Pe){return a.extend(function(U,te,oe,_e){var ke=oe.imageManager.getPattern(U.from.toString()),ze=oe.imageManager.getPattern(U.to.toString()),Ge=oe.imageManager.getPixelSize(),qe=Ge.width,Je=Ge.height,$e=Math.pow(2,_e.tileID.overscaledZ),st=_e.tileSize*Math.pow(2,oe.transform.tileZoom)/$e,yt=st*(_e.tileID.canonical.x+_e.tileID.wrap*$e),_t=st*_e.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ke.tl,u_pattern_br_a:ke.br,u_pattern_tl_b:ze.tl,u_pattern_br_b:ze.br,u_texsize:[qe,Je],u_mix:te.t,u_pattern_size_a:ke.displaySize,u_pattern_size_b:ze.displaySize,u_scale_a:te.fromScale,u_scale_b:te.toScale,u_tile_units_to_pixels:1/Jn(_e,1,oe.transform.tileZoom),u_pixel_coord_upper:[yt>>16,_t>>16],u_pixel_coord_lower:[65535&yt,65535&_t]}}(Q,Pe,H,xe),{u_matrix:N,u_opacity:G})},Xu={fillExtrusion:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_lightpos:new a.Uniform3f(N,G.u_lightpos),u_lightintensity:new a.Uniform1f(N,G.u_lightintensity),u_lightcolor:new a.Uniform3f(N,G.u_lightcolor),u_vertical_gradient:new a.Uniform1f(N,G.u_vertical_gradient),u_opacity:new a.Uniform1f(N,G.u_opacity)}},fillExtrusionPattern:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_lightpos:new a.Uniform3f(N,G.u_lightpos),u_lightintensity:new a.Uniform1f(N,G.u_lightintensity),u_lightcolor:new a.Uniform3f(N,G.u_lightcolor),u_vertical_gradient:new a.Uniform1f(N,G.u_vertical_gradient),u_height_factor:new a.Uniform1f(N,G.u_height_factor),u_image:new a.Uniform1i(N,G.u_image),u_texsize:new a.Uniform2f(N,G.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,G.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,G.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,G.u_scale),u_fade:new a.Uniform1f(N,G.u_fade),u_opacity:new a.Uniform1f(N,G.u_opacity)}},fill:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix)}},fillPattern:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_image:new a.Uniform1i(N,G.u_image),u_texsize:new a.Uniform2f(N,G.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,G.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,G.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,G.u_scale),u_fade:new a.Uniform1f(N,G.u_fade)}},fillOutline:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_world:new a.Uniform2f(N,G.u_world)}},fillOutlinePattern:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_world:new a.Uniform2f(N,G.u_world),u_image:new a.Uniform1i(N,G.u_image),u_texsize:new a.Uniform2f(N,G.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,G.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,G.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,G.u_scale),u_fade:new a.Uniform1f(N,G.u_fade)}},circle:function(N,G){return{u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(N,G.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(N,G.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(N,G.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(N,G.u_matrix)}},collisionBox:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(N,G.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(N,G.u_extrude_scale),u_overscale_factor:new a.Uniform1f(N,G.u_overscale_factor)}},collisionCircle:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_inv_matrix:new a.UniformMatrix4f(N,G.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(N,G.u_viewport_size)}},debug:function(N,G){return{u_color:new a.UniformColor(N,G.u_color),u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_overlay:new a.Uniform1i(N,G.u_overlay),u_overlay_scale:new a.Uniform1f(N,G.u_overlay_scale)}},clippingMask:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix)}},heatmap:function(N,G){return{u_extrude_scale:new a.Uniform1f(N,G.u_extrude_scale),u_intensity:new a.Uniform1f(N,G.u_intensity),u_matrix:new a.UniformMatrix4f(N,G.u_matrix)}},heatmapTexture:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_world:new a.Uniform2f(N,G.u_world),u_image:new a.Uniform1i(N,G.u_image),u_color_ramp:new a.Uniform1i(N,G.u_color_ramp),u_opacity:new a.Uniform1f(N,G.u_opacity)}},hillshade:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_image:new a.Uniform1i(N,G.u_image),u_latrange:new a.Uniform2f(N,G.u_latrange),u_light:new a.Uniform2f(N,G.u_light),u_shadow:new a.UniformColor(N,G.u_shadow),u_highlight:new a.UniformColor(N,G.u_highlight),u_accent:new a.UniformColor(N,G.u_accent)}},hillshadePrepare:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_image:new a.Uniform1i(N,G.u_image),u_dimension:new a.Uniform2f(N,G.u_dimension),u_zoom:new a.Uniform1f(N,G.u_zoom),u_maxzoom:new a.Uniform1f(N,G.u_maxzoom),u_unpack:new a.Uniform4f(N,G.u_unpack)}},line:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_ratio:new a.Uniform1f(N,G.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,G.u_units_to_pixels)}},lineGradient:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_ratio:new a.Uniform1f(N,G.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,G.u_units_to_pixels),u_image:new a.Uniform1i(N,G.u_image)}},linePattern:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_texsize:new a.Uniform2f(N,G.u_texsize),u_ratio:new a.Uniform1f(N,G.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_image:new a.Uniform1i(N,G.u_image),u_units_to_pixels:new a.Uniform2f(N,G.u_units_to_pixels),u_scale:new a.Uniform3f(N,G.u_scale),u_fade:new a.Uniform1f(N,G.u_fade)}},lineSDF:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_ratio:new a.Uniform1f(N,G.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,G.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(N,G.u_patternscale_a),u_patternscale_b:new a.Uniform2f(N,G.u_patternscale_b),u_sdfgamma:new a.Uniform1f(N,G.u_sdfgamma),u_image:new a.Uniform1i(N,G.u_image),u_tex_y_a:new a.Uniform1f(N,G.u_tex_y_a),u_tex_y_b:new a.Uniform1f(N,G.u_tex_y_b),u_mix:new a.Uniform1f(N,G.u_mix)}},raster:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_tl_parent:new a.Uniform2f(N,G.u_tl_parent),u_scale_parent:new a.Uniform1f(N,G.u_scale_parent),u_buffer_scale:new a.Uniform1f(N,G.u_buffer_scale),u_fade_t:new a.Uniform1f(N,G.u_fade_t),u_opacity:new a.Uniform1f(N,G.u_opacity),u_image0:new a.Uniform1i(N,G.u_image0),u_image1:new a.Uniform1i(N,G.u_image1),u_brightness_low:new a.Uniform1f(N,G.u_brightness_low),u_brightness_high:new a.Uniform1f(N,G.u_brightness_high),u_saturation_factor:new a.Uniform1f(N,G.u_saturation_factor),u_contrast_factor:new a.Uniform1f(N,G.u_contrast_factor),u_spin_weights:new a.Uniform3f(N,G.u_spin_weights)}},symbolIcon:function(N,G){return{u_is_size_zoom_constant:new a.Uniform1i(N,G.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,G.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,G.u_size_t),u_size:new a.Uniform1f(N,G.u_size),u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,G.u_pitch),u_rotate_symbol:new a.Uniform1i(N,G.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,G.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,G.u_fade_change),u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,G.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,G.u_coord_matrix),u_is_text:new a.Uniform1i(N,G.u_is_text),u_pitch_with_map:new a.Uniform1i(N,G.u_pitch_with_map),u_texsize:new a.Uniform2f(N,G.u_texsize),u_texture:new a.Uniform1i(N,G.u_texture)}},symbolSDF:function(N,G){return{u_is_size_zoom_constant:new a.Uniform1i(N,G.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,G.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,G.u_size_t),u_size:new a.Uniform1f(N,G.u_size),u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,G.u_pitch),u_rotate_symbol:new a.Uniform1i(N,G.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,G.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,G.u_fade_change),u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,G.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,G.u_coord_matrix),u_is_text:new a.Uniform1i(N,G.u_is_text),u_pitch_with_map:new a.Uniform1i(N,G.u_pitch_with_map),u_texsize:new a.Uniform2f(N,G.u_texsize),u_texture:new a.Uniform1i(N,G.u_texture),u_gamma_scale:new a.Uniform1f(N,G.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(N,G.u_is_halo)}},symbolTextAndIcon:function(N,G){return{u_is_size_zoom_constant:new a.Uniform1i(N,G.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,G.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,G.u_size_t),u_size:new a.Uniform1f(N,G.u_size),u_camera_to_center_distance:new a.Uniform1f(N,G.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,G.u_pitch),u_rotate_symbol:new a.Uniform1i(N,G.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,G.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,G.u_fade_change),u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,G.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,G.u_coord_matrix),u_is_text:new a.Uniform1i(N,G.u_is_text),u_pitch_with_map:new a.Uniform1i(N,G.u_pitch_with_map),u_texsize:new a.Uniform2f(N,G.u_texsize),u_texsize_icon:new a.Uniform2f(N,G.u_texsize_icon),u_texture:new a.Uniform1i(N,G.u_texture),u_texture_icon:new a.Uniform1i(N,G.u_texture_icon),u_gamma_scale:new a.Uniform1f(N,G.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(N,G.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(N,G.u_is_halo)}},background:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_opacity:new a.Uniform1f(N,G.u_opacity),u_color:new a.UniformColor(N,G.u_color)}},backgroundPattern:function(N,G){return{u_matrix:new a.UniformMatrix4f(N,G.u_matrix),u_opacity:new a.Uniform1f(N,G.u_opacity),u_image:new a.Uniform1i(N,G.u_image),u_pattern_tl_a:new a.Uniform2f(N,G.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(N,G.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(N,G.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(N,G.u_pattern_br_b),u_texsize:new a.Uniform2f(N,G.u_texsize),u_mix:new a.Uniform1f(N,G.u_mix),u_pattern_size_a:new a.Uniform2f(N,G.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(N,G.u_pattern_size_b),u_scale_a:new a.Uniform1f(N,G.u_scale_a),u_scale_b:new a.Uniform1f(N,G.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(N,G.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,G.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(N,G.u_tile_units_to_pixels)}}};function Pl(N,G,H,Q,xe,Pe,U){for(var te=N.context,oe=te.gl,_e=N.useProgram("collisionBox"),ke=[],ze=0,Ge=0,qe=0;qe<Q.length;qe++){var Je=Q[qe],$e=G.getTile(Je),st=$e.getBucket(H);if(st){var yt=Je.posMatrix;xe[0]===0&&xe[1]===0||(yt=N.translatePosMatrix(Je.posMatrix,$e,xe,Pe));var _t=U?st.textCollisionBox:st.iconCollisionBox,It=st.collisionCircleArray;if(It.length>0){var zt=a.create(),Rt=yt;a.mul(zt,st.placementInvProjMatrix,N.transform.glCoordMatrix),a.mul(zt,zt,st.placementViewportMatrix),ke.push({circleArray:It,circleOffset:Ge,transform:Rt,invTransform:zt}),Ge=ze+=It.length/4}_t&&_e.draw(te,oe.LINES,Ot.disabled,et.disabled,N.colorModeForRenderPass(),Ye.disabled,Zl(yt,N.transform,$e),H.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,null,N.transform.zoom,null,null,_t.collisionVertexBuffer)}}if(U&&ke.length){var Ht=N.useProgram("collisionCircle"),Dt=new a.StructArrayLayout2f1f2i16;Dt.resize(4*ze),Dt._trim();for(var sn=0,$t=0,Zt=ke;$t<Zt.length;$t+=1)for(var xn=Zt[$t],bn=0;bn<xn.circleArray.length/4;bn++){var Un=4*bn,jn=xn.circleArray[Un+0],Xn=xn.circleArray[Un+1],Qn=xn.circleArray[Un+2],hr=xn.circleArray[Un+3];Dt.emplace(sn++,jn,Xn,Qn,hr,0),Dt.emplace(sn++,jn,Xn,Qn,hr,1),Dt.emplace(sn++,jn,Xn,Qn,hr,2),Dt.emplace(sn++,jn,Xn,Qn,hr,3)}(!ns||ns.length<2*ze)&&(ns=function(yr){var Ar=2*yr,Or=new a.StructArrayLayout3ui6;Or.resize(Ar),Or._trim();for(var jr=0;jr<Ar;jr++){var Yr=6*jr;Or.uint16[Yr+0]=4*jr+0,Or.uint16[Yr+1]=4*jr+1,Or.uint16[Yr+2]=4*jr+2,Or.uint16[Yr+3]=4*jr+2,Or.uint16[Yr+4]=4*jr+3,Or.uint16[Yr+5]=4*jr+0}return Or}(ze));for(var cr=te.createIndexBuffer(ns,!0),vr=te.createVertexBuffer(Dt,a.collisionCircleLayout.members,!0),Mr=0,Fr=ke;Mr<Fr.length;Mr+=1){var Gn=Fr[Mr],ur=xu(Gn.transform,Gn.invTransform,N.transform);Ht.draw(te,oe.TRIANGLES,Ot.disabled,et.disabled,N.colorModeForRenderPass(),Ye.disabled,ur,H.id,vr,cr,a.SegmentVector.simpleSegment(0,2*Gn.circleOffset,Gn.circleArray.length,Gn.circleArray.length/2),null,N.transform.zoom,null,null,null)}vr.destroy(),cr.destroy()}}var wu=a.identity(new Float32Array(16));function Tu(N,G,H,Q,xe,Pe){var U=a.getAnchorAlignment(N),te=-(U.horizontalAlign-.5)*G,oe=-(U.verticalAlign-.5)*H,_e=a.evaluateVariableOffset(N,Q);return new a.Point((te/xe+_e[0])*Pe,(oe/xe+_e[1])*Pe)}function sl(N,G,H,Q,xe,Pe,U,te,oe,_e,ke){var ze=N.text.placedSymbolArray,Ge=N.text.dynamicLayoutVertexArray,qe=N.icon.dynamicLayoutVertexArray,Je={};Ge.clear();for(var $e=0;$e<ze.length;$e++){var st=ze.get($e),yt=N.allowVerticalPlacement&&!st.placedOrientation,_t=st.hidden||!st.crossTileID||yt?null:Q[st.crossTileID];if(_t){var It=new a.Point(st.anchorX,st.anchorY),zt=Xt(It,H?te:U),Rt=an(Pe.cameraToCenterDistance,zt.signedDistanceFromCamera),Ht=xe.evaluateSizeForFeature(N.textSizeData,_e,st)*Rt/a.ONE_EM;H&&(Ht*=N.tilePixelRatio/oe);for(var Dt=_t.width,sn=_t.height,$t=Tu(_t.anchor,Dt,sn,_t.textOffset,_t.textBoxScale,Ht),Zt=H?Xt(It.add($t),U).point:zt.point.add(G?$t.rotate(-Pe.angle):$t),xn=N.allowVerticalPlacement&&st.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,bn=0;bn<st.numGlyphs;bn++)a.addDynamicAttributes(Ge,Zt,xn);ke&&st.associatedIconIndex>=0&&(Je[st.associatedIconIndex]={shiftedAnchor:Zt,angle:xn})}else er(st.numGlyphs,Ge)}if(ke){qe.clear();for(var Un=N.icon.placedSymbolArray,jn=0;jn<Un.length;jn++){var Xn=Un.get(jn);if(Xn.hidden)er(Xn.numGlyphs,qe);else{var Qn=Je[jn];if(Qn)for(var hr=0;hr<Xn.numGlyphs;hr++)a.addDynamicAttributes(qe,Qn.shiftedAnchor,Qn.angle);else er(Xn.numGlyphs,qe)}}N.icon.dynamicLayoutVertexBuffer.updateData(qe)}N.text.dynamicLayoutVertexBuffer.updateData(Ge)}function qs(N,G,H){return H.iconsInText&&G?"symbolTextAndIcon":N?"symbolSDF":"symbolIcon"}function ll(N,G,H,Q,xe,Pe,U,te,oe,_e,ke,ze){for(var Ge=N.context,qe=Ge.gl,Je=N.transform,$e=te==="map",st=oe==="map",yt=$e&&H.layout.get("symbol-placement")!=="point",_t=$e&&!st&&!yt,It=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,zt=N.depthModeForSublayer(0,Ot.ReadOnly),Rt=H.layout.get("text-variable-anchor"),Ht=[],Dt=0,sn=Q;Dt<sn.length;Dt+=1){var $t=sn[Dt],Zt=G.getTile($t),xn=Zt.getBucket(H);if(xn){var bn=xe?xn.text:xn.icon;if(bn&&bn.segments.get().length){var Un=bn.programConfigurations.get(H.id),jn=xe||xn.sdfIcons,Xn=xe?xn.textSizeData:xn.iconSizeData,Qn=st||Je.pitch!==0,hr=N.useProgram(qs(jn,xe,xn),Un),cr=a.evaluateSizeForZoom(Xn,Je.zoom),vr=void 0,Mr=[0,0],Fr=void 0,Gn=void 0,ur=null,yr=void 0;if(xe){if(Fr=Zt.glyphAtlasTexture,Gn=qe.LINEAR,vr=Zt.glyphAtlasTexture.size,xn.iconsInText){Mr=Zt.imageAtlasTexture.size,ur=Zt.imageAtlasTexture;var Ar=Xn.kind==="composite"||Xn.kind==="camera";yr=Qn||N.options.rotating||N.options.zooming||Ar?qe.LINEAR:qe.NEAREST}}else{var Or=H.layout.get("icon-size").constantOr(0)!==1||xn.iconsNeedLinear;Fr=Zt.imageAtlasTexture,Gn=jn||N.options.rotating||N.options.zooming||Or||Qn?qe.LINEAR:qe.NEAREST,vr=Zt.imageAtlasTexture.size}var jr=Jn(Zt,1,N.transform.zoom),Yr=wn($t.posMatrix,st,$e,N.transform,jr),ai=hn($t.posMatrix,st,$e,N.transform,jr),Ti=Rt&&xn.hasTextData(),Mi=H.layout.get("icon-text-fit")!=="none"&&Ti&&xn.hasIconData();yt&&cn(xn,$t.posMatrix,N,xe,Yr,ai,st,_e);var oi=N.translatePosMatrix($t.posMatrix,Zt,Pe,U),Bi=yt||xe&&Rt||Mi?wu:Yr,la=N.translatePosMatrix(ai,Zt,Pe,U,!0),Xi=jn&&H.paint.get(xe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ea={program:hr,buffers:bn,uniformValues:jn?xn.iconsInText?ol(Xn.kind,cr,_t,st,N,oi,Bi,la,vr,Mr):ao(Xn.kind,cr,_t,st,N,oi,Bi,la,xe,vr,!0):pi(Xn.kind,cr,_t,st,N,oi,Bi,la,xe,vr),atlasTexture:Fr,atlasTextureIcon:ur,atlasInterpolation:Gn,atlasInterpolationIcon:yr,isSDF:jn,hasHalo:Xi};if(It)for(var $r=0,qr=bn.segments.get();$r<qr.length;$r+=1){var Ai=qr[$r];Ht.push({segments:new a.SegmentVector([Ai]),sortKey:Ai.sortKey,state:ea})}else Ht.push({segments:bn.segments,sortKey:0,state:ea})}}}It&&Ht.sort(function(Bs,Da){return Bs.sortKey-Da.sortKey});for(var vi=0,ki=Ht;vi<ki.length;vi+=1){var Ea=ki[vi],Oi=Ea.state;if(Ge.activeTexture.set(qe.TEXTURE0),Oi.atlasTexture.bind(Oi.atlasInterpolation,qe.CLAMP_TO_EDGE),Oi.atlasTextureIcon&&(Ge.activeTexture.set(qe.TEXTURE1),Oi.atlasTextureIcon&&Oi.atlasTextureIcon.bind(Oi.atlasInterpolationIcon,qe.CLAMP_TO_EDGE)),Oi.isSDF){var si=Oi.uniformValues;Oi.hasHalo&&(si.u_is_halo=1,rs(Oi.buffers,Ea.segments,H,N,Oi.program,zt,ke,ze,si)),si.u_is_halo=0}rs(Oi.buffers,Ea.segments,H,N,Oi.program,zt,ke,ze,Oi.uniformValues)}}function rs(N,G,H,Q,xe,Pe,U,te,oe){var _e=Q.context,ke=_e.gl;xe.draw(_e,ke.TRIANGLES,Pe,U,te,Ye.disabled,oe,H.id,N.layoutVertexBuffer,N.indexBuffer,G,H.paint,Q.transform.zoom,N.programConfigurations.get(H.id),N.dynamicLayoutVertexBuffer,N.opacityVertexBuffer)}function Bo(N,G,H,Q,xe,Pe,U){var te,oe,_e,ke,ze,Ge=N.context.gl,qe=H.paint.get("fill-pattern"),Je=qe&&qe.constantOr(1),$e=H.getCrossfadeParameters();U?(oe=Je&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=Ge.LINES):(oe=Je?"fillPattern":"fill",te=Ge.TRIANGLES);for(var st=0,yt=Q;st<yt.length;st+=1){var _t=yt[st],It=G.getTile(_t);if(!Je||It.patternsLoaded()){var zt=It.getBucket(H);if(zt){var Rt=zt.programConfigurations.get(H.id),Ht=N.useProgram(oe,Rt);Je&&(N.context.activeTexture.set(Ge.TEXTURE0),It.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),Rt.updatePaintBuffers($e));var Dt=qe.constantOr(null);if(Dt&&It.imageAtlas){var sn=It.imageAtlas,$t=sn.patternPositions[Dt.to.toString()],Zt=sn.patternPositions[Dt.from.toString()];$t&&Zt&&Rt.setConstantPatternPositions($t,Zt)}var xn=N.translatePosMatrix(_t.posMatrix,It,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(U){ke=zt.indexBuffer2,ze=zt.segments2;var bn=[Ge.drawingBufferWidth,Ge.drawingBufferHeight];_e=oe==="fillOutlinePattern"&&Je?es(xn,N,$e,It,bn):vu(xn,bn)}else ke=zt.indexBuffer,ze=zt.segments,_e=Je?Ll(xn,N,$e,It):Fo(xn);Ht.draw(N.context,te,xe,N.stencilModeForClipping(_t),Pe,Ye.disabled,_e,H.id,zt.layoutVertexBuffer,ke,ze,H.paint,N.transform.zoom,Rt)}}}}function is(N,G,H,Q,xe,Pe,U){for(var te=N.context,oe=te.gl,_e=H.paint.get("fill-extrusion-pattern"),ke=_e.constantOr(1),ze=H.getCrossfadeParameters(),Ge=H.paint.get("fill-extrusion-opacity"),qe=0,Je=Q;qe<Je.length;qe+=1){var $e=Je[qe],st=G.getTile($e),yt=st.getBucket(H);if(yt){var _t=yt.programConfigurations.get(H.id),It=N.useProgram(ke?"fillExtrusionPattern":"fillExtrusion",_t);ke&&(N.context.activeTexture.set(oe.TEXTURE0),st.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),_t.updatePaintBuffers(ze));var zt=_e.constantOr(null);if(zt&&st.imageAtlas){var Rt=st.imageAtlas,Ht=Rt.patternPositions[zt.to.toString()],Dt=Rt.patternPositions[zt.from.toString()];Ht&&Dt&&_t.setConstantPatternPositions(Ht,Dt)}var sn=N.translatePosMatrix($e.posMatrix,st,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),$t=H.paint.get("fill-extrusion-vertical-gradient"),Zt=ke?zo(sn,N,$t,Ge,$e,ze,st):Qo(sn,N,$t,Ge);It.draw(te,te.gl.TRIANGLES,xe,Pe,U,Ye.backCCW,Zt,H.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,H.paint,N.transform.zoom,_t)}}}function Uo(N,G,H,Q,xe,Pe){var U=N.context,te=U.gl,oe=G.fbo;if(oe){var _e=N.useProgram("hillshade");U.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,oe.colorAttachment.get());var ke=As(N,G,H);_e.draw(U,te.TRIANGLES,Q,xe,Pe,Ye.disabled,ke,H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}}function Rl(N,G,H,Q,xe,Pe,U){var te=N.context,oe=te.gl,_e=G.dem;if(_e&&_e.data){var ke=_e.dim,ze=_e.stride,Ge=_e.getPixels();if(te.activeTexture.set(oe.TEXTURE1),te.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||N.getTileTexture(ze),G.demTexture){var qe=G.demTexture;qe.update(Ge,{premultiply:!1}),qe.bind(oe.NEAREST,oe.CLAMP_TO_EDGE)}else G.demTexture=new a.Texture(te,Ge,oe.RGBA,{premultiply:!1}),G.demTexture.bind(oe.NEAREST,oe.CLAMP_TO_EDGE);te.activeTexture.set(oe.TEXTURE0);var Je=G.fbo;if(!Je){var $e=new a.Texture(te,{width:ke,height:ke,data:null},oe.RGBA);$e.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),(Je=G.fbo=te.createFramebuffer(ke,ke,!0)).colorAttachment.set($e.texture)}te.bindFramebuffer.set(Je.framebuffer),te.viewport.set([0,0,ke,ke]),N.useProgram("hillshadePrepare").draw(te,oe.TRIANGLES,xe,Pe,U,Ye.disabled,Ws(G.tileID,_e,Q),H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function oo(N,G,H,Q,xe){var Pe=Q.paint.get("raster-fade-duration");if(Pe>0){var U=a.browser.now(),te=(U-N.timeAdded)/Pe,oe=G?(U-G.timeAdded)/Pe:-1,_e=H.getSource(),ke=xe.coveringZoomLevel({tileSize:_e.tileSize,roundZoom:_e.roundZoom}),ze=!G||Math.abs(G.tileID.overscaledZ-ke)>Math.abs(N.tileID.overscaledZ-ke),Ge=ze&&N.refreshedUponExpiration?1:a.clamp(ze?te:1-oe,0,1);return N.refreshedUponExpiration&&te>=1&&(N.refreshedUponExpiration=!1),G?{opacity:1,mix:1-Ge}:{opacity:Ge,mix:0}}return{opacity:1,mix:0}}var Mu=new a.Color(1,0,0,1),Au=new a.Color(0,1,0,1),Il=new a.Color(0,0,1,1),as=new a.Color(1,0,1,1),Ol=new a.Color(0,1,1,1);function ks(N){var G=N.transform.padding;Ql(N,N.transform.height-(G.top||0),3,Mu),Ql(N,G.bottom||0,3,Au),Xs(N,G.left||0,3,Il),Xs(N,N.transform.width-(G.right||0),3,as);var H=N.transform.centerPoint;(function(Q,xe,Pe,U){var te=20,oe=2;Ls(Q,xe-oe/2,Pe-te/2,oe,te,U),Ls(Q,xe-te/2,Pe-oe/2,te,oe,U)})(N,H.x,N.transform.height-H.y,Ol)}function Ql(N,G,H,Q){Ls(N,0,G+H/2,N.transform.width,H,Q)}function Xs(N,G,H,Q){Ls(N,G-H/2,0,H,N.transform.height,Q)}function Ls(N,G,H,Q,xe,Pe){var U=N.context,te=U.gl;te.enable(te.SCISSOR_TEST),te.scissor(G*a.browser.devicePixelRatio,H*a.browser.devicePixelRatio,Q*a.browser.devicePixelRatio,xe*a.browser.devicePixelRatio),U.clear({color:Pe}),te.disable(te.SCISSOR_TEST)}function ul(N,G,H){var Q=N.context,xe=Q.gl,Pe=H.posMatrix,U=N.useProgram("debug"),te=Ot.disabled,oe=et.disabled,_e=N.colorModeForRenderPass(),ke="$debug";Q.activeTexture.set(xe.TEXTURE0),N.emptyTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),U.draw(Q,xe.LINE_STRIP,te,oe,_e,Ye.disabled,Kl(Pe,a.Color.red),ke,N.debugBuffer,N.tileBorderIndexBuffer,N.debugSegments);var ze=G.getTileByID(H.key).latestRawTileData,Ge=ze&&ze.byteLength||0,qe=Math.floor(Ge/1024),Je=G.getTile(H).tileSize,$e=512/Math.min(Je,512)*(H.overscaledZ/N.transform.zoom)*.5,st=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(st+=" => "+H.overscaledZ),function(yt,_t){yt.initDebugOverlayCanvas();var It=yt.debugOverlayCanvas,zt=yt.context.gl,Rt=yt.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,It.width,It.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(_t,5,5),Rt.strokeText(_t,5,5),yt.debugOverlayTexture.update(It),yt.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(N,st+" "+qe+"kb"),U.draw(Q,xe.TRIANGLES,te,oe,nt.alphaBlended,Ye.disabled,Kl(Pe,a.Color.transparent,$e),ke,N.debugBuffer,N.quadTriangleIndexBuffer,N.debugSegments)}var Ys={symbol:function(N,G,H,Q,xe){if(N.renderPass==="translucent"){var Pe=et.disabled,U=N.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(te,oe,_e,ke,ze,Ge,qe){for(var Je=oe.transform,$e=ze==="map",st=Ge==="map",yt=0,_t=te;yt<_t.length;yt+=1){var It=_t[yt],zt=ke.getTile(It),Rt=zt.getBucket(_e);if(Rt&&Rt.text&&Rt.text.segments.get().length){var Ht=Rt.textSizeData,Dt=a.evaluateSizeForZoom(Ht,Je.zoom),sn=Jn(zt,1,oe.transform.zoom),$t=wn(It.posMatrix,st,$e,oe.transform,sn),Zt=_e.layout.get("icon-text-fit")!=="none"&&Rt.hasIconData();if(Dt){var xn=Math.pow(2,Je.zoom-zt.tileID.overscaledZ);sl(Rt,$e,st,qe,a.symbolSize,Je,$t,It.posMatrix,xn,Dt,Zt)}}}}(Q,N,H,G,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),xe),H.paint.get("icon-opacity").constantOr(1)!==0&&ll(N,G,H,Q,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Pe,U),H.paint.get("text-opacity").constantOr(1)!==0&&ll(N,G,H,Q,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Pe,U),G.map.showCollisionBoxes&&(Pl(N,G,H,Q,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),Pl(N,G,H,Q,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(N,G,H,Q){if(N.renderPass==="translucent"){var xe=H.paint.get("circle-opacity"),Pe=H.paint.get("circle-stroke-width"),U=H.paint.get("circle-stroke-opacity"),te=H.layout.get("circle-sort-key").constantOr(1)!==void 0;if(xe.constantOr(1)!==0||Pe.constantOr(1)!==0&&U.constantOr(1)!==0){for(var oe=N.context,_e=oe.gl,ke=N.depthModeForSublayer(0,Ot.ReadOnly),ze=et.disabled,Ge=N.colorModeForRenderPass(),qe=[],Je=0;Je<Q.length;Je++){var $e=Q[Je],st=G.getTile($e),yt=st.getBucket(H);if(yt){var _t=yt.programConfigurations.get(H.id),It={programConfiguration:_t,program:N.useProgram("circle",_t),layoutVertexBuffer:yt.layoutVertexBuffer,indexBuffer:yt.indexBuffer,uniformValues:yu(N,$e,st,H)};if(te)for(var zt=0,Rt=yt.segments.get();zt<Rt.length;zt+=1){var Ht=Rt[zt];qe.push({segments:new a.SegmentVector([Ht]),sortKey:Ht.sortKey,state:It})}else qe.push({segments:yt.segments,sortKey:0,state:It})}}te&&qe.sort(function(hr,cr){return hr.sortKey-cr.sortKey});for(var Dt=0,sn=qe;Dt<sn.length;Dt+=1){var $t=sn[Dt],Zt=$t.state,xn=Zt.programConfiguration,bn=Zt.program,Un=Zt.layoutVertexBuffer,jn=Zt.indexBuffer,Xn=Zt.uniformValues,Qn=$t.segments;bn.draw(oe,_e.TRIANGLES,ke,ze,Ge,Ye.disabled,Xn,H.id,Un,jn,Qn,H.paint,N.transform.zoom,xn)}}}},heatmap:function(N,G,H,Q){if(H.paint.get("heatmap-opacity")!==0)if(N.renderPass==="offscreen"){var xe=N.context,Pe=xe.gl,U=et.disabled,te=new nt([Pe.ONE,Pe.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function($e,st,yt){var _t=$e.gl;$e.activeTexture.set(_t.TEXTURE1),$e.viewport.set([0,0,st.width/4,st.height/4]);var It=yt.heatmapFbo;if(It)_t.bindTexture(_t.TEXTURE_2D,It.colorAttachment.get()),$e.bindFramebuffer.set(It.framebuffer);else{var zt=_t.createTexture();_t.bindTexture(_t.TEXTURE_2D,zt),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,_t.LINEAR),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,_t.LINEAR),It=yt.heatmapFbo=$e.createFramebuffer(st.width/4,st.height/4,!1),function(Rt,Ht,Dt,sn){var $t=Rt.gl,Zt=Rt.extRenderToTextureHalfFloat?Rt.extTextureHalfFloat.HALF_FLOAT_OES:$t.UNSIGNED_BYTE;$t.texImage2D($t.TEXTURE_2D,0,$t.RGBA,Ht.width/4,Ht.height/4,0,$t.RGBA,Zt,null),sn.colorAttachment.set(Dt)}($e,st,zt,It)}})(xe,N,H),xe.clear({color:a.Color.transparent});for(var oe=0;oe<Q.length;oe++){var _e=Q[oe];if(!G.hasRenderableParent(_e)){var ke=G.getTile(_e),ze=ke.getBucket(H);if(ze){var Ge=ze.programConfigurations.get(H.id),qe=N.useProgram("heatmap",Ge),Je=N.transform.zoom;qe.draw(xe,Pe.TRIANGLES,Ot.disabled,U,te,Ye.disabled,Gs(_e.posMatrix,ke,Je,H.paint.get("heatmap-intensity")),H.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,H.paint,N.transform.zoom,Ge)}}}xe.viewport.set([0,0,N.width,N.height])}else N.renderPass==="translucent"&&(N.context.setColorMode(N.colorModeForRenderPass()),function($e,st){var yt=$e.context,_t=yt.gl,It=st.heatmapFbo;if(It){yt.activeTexture.set(_t.TEXTURE0),_t.bindTexture(_t.TEXTURE_2D,It.colorAttachment.get()),yt.activeTexture.set(_t.TEXTURE1);var zt=st.colorRampTexture;zt||(zt=st.colorRampTexture=new a.Texture(yt,st.colorRamp,_t.RGBA)),zt.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),$e.useProgram("heatmapTexture").draw(yt,_t.TRIANGLES,Ot.disabled,et.disabled,$e.colorModeForRenderPass(),Ye.disabled,ts($e,st,0,1),st.id,$e.viewportBuffer,$e.quadTriangleIndexBuffer,$e.viewportSegments,st.paint,$e.transform.zoom)}}(N,H))},line:function(N,G,H,Q){if(N.renderPass==="translucent"){var xe=H.paint.get("line-opacity"),Pe=H.paint.get("line-width");if(xe.constantOr(1)!==0&&Pe.constantOr(1)!==0){var U=N.depthModeForSublayer(0,Ot.ReadOnly),te=N.colorModeForRenderPass(),oe=H.paint.get("line-dasharray"),_e=H.paint.get("line-pattern"),ke=_e.constantOr(1),ze=H.paint.get("line-gradient"),Ge=H.getCrossfadeParameters(),qe=ke?"linePattern":oe?"lineSDF":ze?"lineGradient":"line",Je=N.context,$e=Je.gl,st=!0;if(ze){Je.activeTexture.set($e.TEXTURE0);var yt=H.gradientTexture;if(!H.gradient)return;yt||(yt=H.gradientTexture=new a.Texture(Je,H.gradient,$e.RGBA)),yt.bind($e.LINEAR,$e.CLAMP_TO_EDGE)}for(var _t=0,It=Q;_t<It.length;_t+=1){var zt=It[_t],Rt=G.getTile(zt);if(!ke||Rt.patternsLoaded()){var Ht=Rt.getBucket(H);if(Ht){var Dt=Ht.programConfigurations.get(H.id),sn=N.context.program.get(),$t=N.useProgram(qe,Dt),Zt=st||$t.program!==sn,xn=_e.constantOr(null);if(xn&&Rt.imageAtlas){var bn=Rt.imageAtlas,Un=bn.patternPositions[xn.to.toString()],jn=bn.patternPositions[xn.from.toString()];Un&&jn&&Dt.setConstantPatternPositions(Un,jn)}var Xn=ke?$l(N,Rt,H,Ge):oe?Za(N,Rt,H,oe,Ge):ze?Jl(N,Rt,H):Cl(N,Rt,H);ke?(Je.activeTexture.set($e.TEXTURE0),Rt.imageAtlasTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Ge)):oe&&(Zt||N.lineAtlas.dirty)&&(Je.activeTexture.set($e.TEXTURE0),N.lineAtlas.bind(Je)),$t.draw(Je,$e.TRIANGLES,U,N.stencilModeForClipping(zt),te,Ye.disabled,Xn,H.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,H.paint,N.transform.zoom,Dt),st=!1}}}}}},fill:function(N,G,H,Q){var xe=H.paint.get("fill-color"),Pe=H.paint.get("fill-opacity");if(Pe.constantOr(1)!==0){var U=N.colorModeForRenderPass(),te=H.paint.get("fill-pattern"),oe=N.opaquePassEnabledForLayer()&&!te.constantOr(1)&&xe.constantOr(a.Color.transparent).a===1&&Pe.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===oe){var _e=N.depthModeForSublayer(1,N.renderPass==="opaque"?Ot.ReadWrite:Ot.ReadOnly);Bo(N,G,H,Q,_e,U,!1)}if(N.renderPass==="translucent"&&H.paint.get("fill-antialias")){var ke=N.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,Ot.ReadOnly);Bo(N,G,H,Q,ke,U,!0)}}},"fill-extrusion":function(N,G,H,Q){var xe=H.paint.get("fill-extrusion-opacity");if(xe!==0&&N.renderPass==="translucent"){var Pe=new Ot(N.context.gl.LEQUAL,Ot.ReadWrite,N.depthRangeFor3D);if(xe!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))is(N,G,H,Q,Pe,et.disabled,nt.disabled),is(N,G,H,Q,Pe,N.stencilModeFor3D(),N.colorModeForRenderPass());else{var U=N.colorModeForRenderPass();is(N,G,H,Q,Pe,et.disabled,U)}}},hillshade:function(N,G,H,Q){if(N.renderPass==="offscreen"||N.renderPass==="translucent"){for(var xe=N.context,Pe=G.getSource().maxzoom,U=N.depthModeForSublayer(0,Ot.ReadOnly),te=N.colorModeForRenderPass(),oe=N.renderPass==="translucent"?N.stencilConfigForOverlap(Q):[{},Q],_e=oe[0],ke=0,ze=oe[1];ke<ze.length;ke+=1){var Ge=ze[ke],qe=G.getTile(Ge);qe.needsHillshadePrepare&&N.renderPass==="offscreen"?Rl(N,qe,H,Pe,U,et.disabled,te):N.renderPass==="translucent"&&Uo(N,qe,H,U,_e[Ge.overscaledZ],te)}xe.viewport.set([0,0,N.width,N.height])}},raster:function(N,G,H,Q){if(N.renderPass==="translucent"&&H.paint.get("raster-opacity")!==0&&Q.length)for(var xe=N.context,Pe=xe.gl,U=G.getSource(),te=N.useProgram("raster"),oe=N.colorModeForRenderPass(),_e=U instanceof B?[{},Q]:N.stencilConfigForOverlap(Q),ke=_e[0],ze=_e[1],Ge=ze[ze.length-1].overscaledZ,qe=!N.options.moving,Je=0,$e=ze;Je<$e.length;Je+=1){var st=$e[Je],yt=N.depthModeForSublayer(st.overscaledZ-Ge,H.paint.get("raster-opacity")===1?Ot.ReadWrite:Ot.ReadOnly,Pe.LESS),_t=G.getTile(st),It=N.transform.calculatePosMatrix(st.toUnwrapped(),qe);_t.registerFadeDuration(H.paint.get("raster-fade-duration"));var zt=G.findLoadedParent(st,0),Rt=oo(_t,zt,G,H,N.transform),Ht=void 0,Dt=void 0,sn=H.paint.get("raster-resampling")==="nearest"?Pe.NEAREST:Pe.LINEAR;xe.activeTexture.set(Pe.TEXTURE0),_t.texture.bind(sn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),xe.activeTexture.set(Pe.TEXTURE1),zt?(zt.texture.bind(sn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),Ht=Math.pow(2,zt.tileID.overscaledZ-_t.tileID.overscaledZ),Dt=[_t.tileID.canonical.x*Ht%1,_t.tileID.canonical.y*Ht%1]):_t.texture.bind(sn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST);var $t=No(It,Dt||[0,0],Ht||1,Rt,H);U instanceof B?te.draw(xe,Pe.TRIANGLES,yt,et.disabled,oe,Ye.disabled,$t,H.id,U.boundsBuffer,N.quadTriangleIndexBuffer,U.boundsSegments):te.draw(xe,Pe.TRIANGLES,yt,ke[st.overscaledZ],oe,Ye.disabled,$t,H.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}},background:function(N,G,H){var Q=H.paint.get("background-color"),xe=H.paint.get("background-opacity");if(xe!==0){var Pe=N.context,U=Pe.gl,te=N.transform,oe=te.tileSize,_e=H.paint.get("background-pattern");if(!N.isPatternMissing(_e)){var ke=!_e&&Q.a===1&&xe===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass===ke){var ze=et.disabled,Ge=N.depthModeForSublayer(0,ke==="opaque"?Ot.ReadWrite:Ot.ReadOnly),qe=N.colorModeForRenderPass(),Je=N.useProgram(_e?"backgroundPattern":"background"),$e=te.coveringTiles({tileSize:oe});_e&&(Pe.activeTexture.set(U.TEXTURE0),N.imageManager.bind(N.context));for(var st=H.getCrossfadeParameters(),yt=0,_t=$e;yt<_t.length;yt+=1){var It=_t[yt],zt=N.transform.calculatePosMatrix(It.toUnwrapped()),Rt=_e?Es(zt,xe,N,_e,{tileID:It,tileSize:oe},st):Ka(zt,xe,Q);Je.draw(Pe,U.TRIANGLES,Ge,ze,qe,Ye.disabled,Rt,H.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}}}}},debug:function(N,G,H){for(var Q=0;Q<H.length;Q++)ul(N,G,H[Q])},custom:function(N,G,H){var Q=N.context,xe=H.implementation;if(N.renderPass==="offscreen"){var Pe=xe.prerender;Pe&&(N.setCustomLayerDefaults(),Q.setColorMode(N.colorModeForRenderPass()),Pe.call(xe,Q.gl,N.transform.customLayerMatrix()),Q.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),Q.setColorMode(N.colorModeForRenderPass()),Q.setStencilMode(et.disabled);var U=xe.renderingMode==="3d"?new Ot(N.context.gl.LEQUAL,Ot.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,Ot.ReadOnly);Q.setDepthMode(U),xe.render(Q.gl,N.transform.customLayerMatrix()),Q.setDirty(),N.setBaseState(),Q.bindFramebuffer.set(null)}}},di=function(N,G){this.context=new tt(N),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=ut.maxUnderzooming+ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qn,this.gpuTimers={}};di.prototype.resize=function(N,G){if(this.width=N*a.browser.devicePixelRatio,this.height=G*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,Q=this.style._order;H<Q.length;H+=1){var xe=Q[H];this.style._layers[xe].resize()}},di.prototype.setup=function(){var N=this.context,G=new a.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(a.EXTENT,0),G.emplaceBack(0,a.EXTENT),G.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=N.createVertexBuffer(G,sr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var H=new a.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(a.EXTENT,0),H.emplaceBack(0,a.EXTENT),H.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=N.createVertexBuffer(H,sr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var Q=new a.StructArrayLayout4i8;Q.emplaceBack(0,0,0,0),Q.emplaceBack(a.EXTENT,0,a.EXTENT,0),Q.emplaceBack(0,a.EXTENT,0,a.EXTENT),Q.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=N.createVertexBuffer(Q,j.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var xe=new a.StructArrayLayout2i4;xe.emplaceBack(0,0),xe.emplaceBack(1,0),xe.emplaceBack(0,1),xe.emplaceBack(1,1),this.viewportBuffer=N.createVertexBuffer(xe,sr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var Pe=new a.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=N.createIndexBuffer(Pe);var U=new a.StructArrayLayout3ui6;U.emplaceBack(0,1,2),U.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=N.createIndexBuffer(U),this.emptyTexture=new a.Texture(N,{width:1,height:1,data:new Uint8Array([0,0,0,0])},N.gl.RGBA);var te=this.context.gl;this.stencilClearMode=new et({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO)},di.prototype.clearStencil=function(){var N=this.context,G=N.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=a.create();a.ortho(H,0,this.width,this.height,0,0,1),a.scale(H,H,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(N,G.TRIANGLES,Ot.disabled,this.stencilClearMode,nt.disabled,Ye.disabled,_u(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},di.prototype._renderTileClippingMasks=function(N,G){if(this.currentStencilSource!==N.source&&N.isTileClipped()&&G&&G.length){this.currentStencilSource=N.source;var H=this.context,Q=H.gl;this.nextStencilID+G.length>256&&this.clearStencil(),H.setColorMode(nt.disabled),H.setDepthMode(Ot.disabled);var xe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,U=G;Pe<U.length;Pe+=1){var te=U[Pe],oe=this._tileClippingMaskIDs[te.key]=this.nextStencilID++;xe.draw(H,Q.TRIANGLES,Ot.disabled,new et({func:Q.ALWAYS,mask:0},oe,255,Q.KEEP,Q.KEEP,Q.REPLACE),nt.disabled,Ye.disabled,_u(te.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},di.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var N=this.nextStencilID++,G=this.context.gl;return new et({func:G.NOTEQUAL,mask:255},N,255,G.KEEP,G.KEEP,G.REPLACE)},di.prototype.stencilModeForClipping=function(N){var G=this.context.gl;return new et({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[N.key],0,G.KEEP,G.KEEP,G.REPLACE)},di.prototype.stencilConfigForOverlap=function(N){var G,H=this.context.gl,Q=N.sort(function(oe,_e){return _e.overscaledZ-oe.overscaledZ}),xe=Q[Q.length-1].overscaledZ,Pe=Q[0].overscaledZ-xe+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var U={},te=0;te<Pe;te++)U[te+xe]=new et({func:H.GEQUAL,mask:255},te+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=Pe,[U,Q]}return[(G={},G[xe]=et.disabled,G),Q]},di.prototype.colorModeForRenderPass=function(){var N=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new nt([N.CONSTANT_COLOR,N.ONE],new a.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?nt.unblended:nt.alphaBlended},di.prototype.depthModeForSublayer=function(N,G,H){if(!this.opaquePassEnabledForLayer())return Ot.disabled;var Q=1-((1+this.currentLayer)*this.numSublayers+N)*this.depthEpsilon;return new Ot(H||this.context.gl.LEQUAL,G,[Q,Q])},di.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},di.prototype.render=function(N,G){var H=this;this.style=N,this.options=G,this.lineAtlas=N.lineAtlas,this.imageManager=N.imageManager,this.glyphManager=N.glyphManager,this.symbolFadeChange=N.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var Q=this.style._order,xe=this.style.sourceCaches;for(var Pe in xe){var U=xe[Pe];U.used&&U.prepare(this.context)}var te,oe,_e={},ke={},ze={};for(var Ge in xe){var qe=xe[Ge];_e[Ge]=qe.getVisibleCoordinates(),ke[Ge]=_e[Ge].slice().reverse(),ze[Ge]=qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Je=0;Je<Q.length;Je++){var $e=Q[Je];if(this.style._layers[$e].is3D()){this.opaquePassCutoff=Je;break}}this.renderPass="offscreen";for(var st=0,yt=Q;st<yt.length;st+=1){var _t=yt[st],It=this.style._layers[_t];if(It.hasOffscreenPass()&&!It.isHidden(this.transform.zoom)){var zt=ke[It.source];(It.type==="custom"||zt.length)&&this.renderLayer(this,xe[It.source],It,zt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(N._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Q.length-1;this.currentLayer>=0;this.currentLayer--){var Rt=this.style._layers[Q[this.currentLayer]],Ht=xe[Rt.source],Dt=_e[Rt.source];this._renderTileClippingMasks(Rt,Dt),this.renderLayer(this,Ht,Rt,Dt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Q.length;this.currentLayer++){var sn=this.style._layers[Q[this.currentLayer]],$t=xe[sn.source],Zt=(sn.type==="symbol"?ze:ke)[sn.source];this._renderTileClippingMasks(sn,_e[sn.source]),this.renderLayer(this,$t,sn,Zt)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(xn){xn.source&&!xn.isHidden(H.transform.zoom)&&(xn.source!==(oe&&oe.id)&&(oe=H.style.sourceCaches[xn.source]),(!te||te.getSource().maxzoom<oe.getSource().maxzoom)&&(te=oe))}),te&&Ys.debug(this,te,te.getVisibleCoordinates())),this.options.showPadding&&ks(this),this.context.setDefault()},di.prototype.renderLayer=function(N,G,H,Q){H.isHidden(this.transform.zoom)||(H.type==="background"||H.type==="custom"||Q.length)&&(this.id=H.id,this.gpuTimingStart(H),Ys[H.type](N,G,H,Q,this.style.placement.variableOffsets),this.gpuTimingEnd())},di.prototype.gpuTimingStart=function(N){if(this.options.gpuTiming){var G=this.context.extTimerQuery,H=this.gpuTimers[N.id];H||(H=this.gpuTimers[N.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),H.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,H.query)}},di.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var N=this.context.extTimerQuery;N.endQueryEXT(N.TIME_ELAPSED_EXT)}},di.prototype.collectGpuTimers=function(){var N=this.gpuTimers;return this.gpuTimers={},N},di.prototype.queryGpuTimers=function(N){var G={};for(var H in N){var Q=N[H],xe=this.context.extTimerQuery,Pe=xe.getQueryObjectEXT(Q.query,xe.QUERY_RESULT_EXT)/1e6;xe.deleteQueryEXT(Q.query),G[H]=Pe}return G},di.prototype.translatePosMatrix=function(N,G,H,Q,xe){if(!H[0]&&!H[1])return N;var Pe=xe?Q==="map"?this.transform.angle:0:Q==="viewport"?-this.transform.angle:0;if(Pe){var U=Math.sin(Pe),te=Math.cos(Pe);H=[H[0]*te-H[1]*U,H[0]*U+H[1]*te]}var oe=[xe?H[0]:Jn(G,H[0],this.transform.zoom),xe?H[1]:Jn(G,H[1],this.transform.zoom),0],_e=new Float32Array(16);return a.translate(_e,N,oe),_e},di.prototype.saveTileTexture=function(N){var G=this._tileTextures[N.size[0]];G?G.push(N):this._tileTextures[N.size[0]]=[N]},di.prototype.getTileTexture=function(N){var G=this._tileTextures[N];return G&&G.length>0?G.pop():null},di.prototype.isPatternMissing=function(N){if(!N)return!1;if(!N.from||!N.to)return!0;var G=this.imageManager.getPattern(N.from.toString()),H=this.imageManager.getPattern(N.to.toString());return!G||!H},di.prototype.useProgram=function(N,G){this.cache=this.cache||{};var H=""+N+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new Do(this.context,_o[N],G,Xu[N],this._showOverdrawInspector)),this.cache[H]},di.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},di.prototype.setBaseState=function(){var N=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(N.FUNC_ADD)},di.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var N=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,N.RGBA)}},di.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var os=function(N,G){this.points=N,this.planes=G};os.fromInvProjectionMatrix=function(N,G,H){var Q=Math.pow(2,H),xe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(U){return a.transformMat4([],U,N)}).map(function(U){return a.scale$1([],U,1/U[3]/G*Q)}),Pe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(U){var te=a.sub([],xe[U[0]],xe[U[1]]),oe=a.sub([],xe[U[2]],xe[U[1]]),_e=a.normalize([],a.cross([],te,oe)),ke=-a.dot(_e,xe[U[1]]);return _e.concat(ke)});return new os(xe,Pe)};var jo=function(N,G){this.min=N,this.max=G,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};jo.prototype.quadrant=function(N){for(var G=[N%2==0,N<2],H=a.clone$2(this.min),Q=a.clone$2(this.max),xe=0;xe<G.length;xe++)H[xe]=G[xe]?this.min[xe]:this.center[xe],Q[xe]=G[xe]?this.center[xe]:this.max[xe];return Q[2]=this.max[2],new jo(H,Q)},jo.prototype.distanceX=function(N){return Math.max(Math.min(this.max[0],N[0]),this.min[0])-N[0]},jo.prototype.distanceY=function(N){return Math.max(Math.min(this.max[1],N[1]),this.min[1])-N[1]},jo.prototype.intersects=function(N){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,Q=0;Q<N.planes.length;Q++){for(var xe=N.planes[Q],Pe=0,U=0;U<G.length;U++)Pe+=a.dot$1(xe,G[U])>=0;if(Pe===0)return 0;Pe!==G.length&&(H=!1)}if(H)return 2;for(var te=0;te<3;te++){for(var oe=Number.MAX_VALUE,_e=-Number.MAX_VALUE,ke=0;ke<N.points.length;ke++){var ze=N.points[ke][te]-this.min[te];oe=Math.min(oe,ze),_e=Math.max(_e,ze)}if(_e<0||oe>this.max[te]-this.min[te])return 0}return 1};var ia=function(N,G,H,Q){if(N===void 0&&(N=0),G===void 0&&(G=0),H===void 0&&(H=0),Q===void 0&&(Q=0),isNaN(N)||N<0||isNaN(G)||G<0||isNaN(H)||H<0||isNaN(Q)||Q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=N,this.bottom=G,this.left=H,this.right=Q};ia.prototype.interpolate=function(N,G,H){return G.top!=null&&N.top!=null&&(this.top=a.number(N.top,G.top,H)),G.bottom!=null&&N.bottom!=null&&(this.bottom=a.number(N.bottom,G.bottom,H)),G.left!=null&&N.left!=null&&(this.left=a.number(N.left,G.left,H)),G.right!=null&&N.right!=null&&(this.right=a.number(N.right,G.right,H)),this},ia.prototype.getCenter=function(N,G){var H=a.clamp((this.left+N-this.right)/2,0,N),Q=a.clamp((this.top+G-this.bottom)/2,0,G);return new a.Point(H,Q)},ia.prototype.equals=function(N){return this.top===N.top&&this.bottom===N.bottom&&this.left===N.left&&this.right===N.right},ia.prototype.clone=function(){return new ia(this.top,this.bottom,this.left,this.right)},ia.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Zr=function(N,G,H,Q,xe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=xe===void 0||xe,this._minZoom=N||0,this._maxZoom=G||22,this._minPitch=H??0,this._maxPitch=Q??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ia,this._posMatrixCache={},this._alignedPosMatrixCache={}},ni={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Zr.prototype.clone=function(){var N=new Zr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return N.tileSize=this.tileSize,N.latRange=this.latRange,N.width=this.width,N.height=this.height,N._center=this._center,N.zoom=this.zoom,N.angle=this.angle,N._fov=this._fov,N._pitch=this._pitch,N._unmodified=this._unmodified,N._edgeInsets=this._edgeInsets.clone(),N._calcMatrices(),N},ni.minZoom.get=function(){return this._minZoom},ni.minZoom.set=function(N){this._minZoom!==N&&(this._minZoom=N,this.zoom=Math.max(this.zoom,N))},ni.maxZoom.get=function(){return this._maxZoom},ni.maxZoom.set=function(N){this._maxZoom!==N&&(this._maxZoom=N,this.zoom=Math.min(this.zoom,N))},ni.minPitch.get=function(){return this._minPitch},ni.minPitch.set=function(N){this._minPitch!==N&&(this._minPitch=N,this.pitch=Math.max(this.pitch,N))},ni.maxPitch.get=function(){return this._maxPitch},ni.maxPitch.set=function(N){this._maxPitch!==N&&(this._maxPitch=N,this.pitch=Math.min(this.pitch,N))},ni.renderWorldCopies.get=function(){return this._renderWorldCopies},ni.renderWorldCopies.set=function(N){N===void 0?N=!0:N===null&&(N=!1),this._renderWorldCopies=N},ni.worldSize.get=function(){return this.tileSize*this.scale},ni.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ni.size.get=function(){return new a.Point(this.width,this.height)},ni.bearing.get=function(){return-this.angle/Math.PI*180},ni.bearing.set=function(N){var G=-a.wrap(N,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ni.pitch.get=function(){return this._pitch/Math.PI*180},ni.pitch.set=function(N){var G=a.clamp(N,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},ni.fov.get=function(){return this._fov/Math.PI*180},ni.fov.set=function(N){N=Math.max(.01,Math.min(60,N)),this._fov!==N&&(this._unmodified=!1,this._fov=N/180*Math.PI,this._calcMatrices())},ni.zoom.get=function(){return this._zoom},ni.zoom.set=function(N){var G=Math.min(Math.max(N,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},ni.center.get=function(){return this._center},ni.center.set=function(N){N.lat===this._center.lat&&N.lng===this._center.lng||(this._unmodified=!1,this._center=N,this._constrain(),this._calcMatrices())},ni.padding.get=function(){return this._edgeInsets.toJSON()},ni.padding.set=function(N){this._edgeInsets.equals(N)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,N,1),this._calcMatrices())},ni.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Zr.prototype.isPaddingEqual=function(N){return this._edgeInsets.equals(N)},Zr.prototype.interpolatePadding=function(N,G,H){this._unmodified=!1,this._edgeInsets.interpolate(N,G,H),this._constrain(),this._calcMatrices()},Zr.prototype.coveringZoomLevel=function(N){var G=(N.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/N.tileSize));return Math.max(0,G)},Zr.prototype.getVisibleUnwrappedCoordinates=function(N){var G=[new a.UnwrappedTileID(0,N)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new a.Point(0,0)),Q=this.pointCoordinate(new a.Point(this.width,0)),xe=this.pointCoordinate(new a.Point(this.width,this.height)),Pe=this.pointCoordinate(new a.Point(0,this.height)),U=Math.floor(Math.min(H.x,Q.x,xe.x,Pe.x)),te=Math.floor(Math.max(H.x,Q.x,xe.x,Pe.x)),oe=U-1;oe<=te+1;oe++)oe!==0&&G.push(new a.UnwrappedTileID(oe,N));return G},Zr.prototype.coveringTiles=function(N){var G=this.coveringZoomLevel(N),H=G;if(N.minzoom!==void 0&&G<N.minzoom)return[];N.maxzoom!==void 0&&G>N.maxzoom&&(G=N.maxzoom);var Q=a.MercatorCoordinate.fromLngLat(this.center),xe=Math.pow(2,G),Pe=[xe*Q.x,xe*Q.y,0],U=os.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),te=N.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(te=G);var oe=function(Zt){return{aabb:new jo([Zt*xe,0,0],[(Zt+1)*xe,xe,0]),zoom:0,x:0,y:0,wrap:Zt,fullyVisible:!1}},_e=[],ke=[],ze=G,Ge=N.reparseOverscaled?H:G;if(this._renderWorldCopies)for(var qe=1;qe<=3;qe++)_e.push(oe(-qe)),_e.push(oe(qe));for(_e.push(oe(0));_e.length>0;){var Je=_e.pop(),$e=Je.x,st=Je.y,yt=Je.fullyVisible;if(!yt){var _t=Je.aabb.intersects(U);if(_t===0)continue;yt=_t===2}var It=Je.aabb.distanceX(Pe),zt=Je.aabb.distanceY(Pe),Rt=Math.max(Math.abs(It),Math.abs(zt)),Ht=3+(1<<ze-Je.zoom)-2;if(Je.zoom===ze||Rt>Ht&&Je.zoom>=te)ke.push({tileID:new a.OverscaledTileID(Je.zoom===ze?Ge:Je.zoom,Je.wrap,Je.zoom,$e,st),distanceSq:a.sqrLen([Pe[0]-.5-$e,Pe[1]-.5-st])});else for(var Dt=0;Dt<4;Dt++){var sn=($e<<1)+Dt%2,$t=(st<<1)+(Dt>>1);_e.push({aabb:Je.aabb.quadrant(Dt),zoom:Je.zoom+1,x:sn,y:$t,wrap:Je.wrap,fullyVisible:yt})}}return ke.sort(function(Zt,xn){return Zt.distanceSq-xn.distanceSq}).map(function(Zt){return Zt.tileID})},Zr.prototype.resize=function(N,G){this.width=N,this.height=G,this.pixelsToGLUnits=[2/N,-2/G],this._constrain(),this._calcMatrices()},ni.unmodified.get=function(){return this._unmodified},Zr.prototype.zoomScale=function(N){return Math.pow(2,N)},Zr.prototype.scaleZoom=function(N){return Math.log(N)/Math.LN2},Zr.prototype.project=function(N){var G=a.clamp(N.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(N.lng)*this.worldSize,a.mercatorYfromLat(G)*this.worldSize)},Zr.prototype.unproject=function(N){return new a.MercatorCoordinate(N.x/this.worldSize,N.y/this.worldSize).toLngLat()},ni.point.get=function(){return this.project(this.center)},Zr.prototype.setLocationAtPoint=function(N,G){var H=this.pointCoordinate(G),Q=this.pointCoordinate(this.centerPoint),xe=this.locationCoordinate(N),Pe=new a.MercatorCoordinate(xe.x-(H.x-Q.x),xe.y-(H.y-Q.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},Zr.prototype.locationPoint=function(N){return this.coordinatePoint(this.locationCoordinate(N))},Zr.prototype.pointLocation=function(N){return this.coordinateLocation(this.pointCoordinate(N))},Zr.prototype.locationCoordinate=function(N){return a.MercatorCoordinate.fromLngLat(N)},Zr.prototype.coordinateLocation=function(N){return N.toLngLat()},Zr.prototype.pointCoordinate=function(N){var G=[N.x,N.y,0,1],H=[N.x,N.y,1,1];a.transformMat4(G,G,this.pixelMatrixInverse),a.transformMat4(H,H,this.pixelMatrixInverse);var Q=G[3],xe=H[3],Pe=G[0]/Q,U=H[0]/xe,te=G[1]/Q,oe=H[1]/xe,_e=G[2]/Q,ke=H[2]/xe,ze=_e===ke?0:(0-_e)/(ke-_e);return new a.MercatorCoordinate(a.number(Pe,U,ze)/this.worldSize,a.number(te,oe,ze)/this.worldSize)},Zr.prototype.coordinatePoint=function(N){var G=[N.x*this.worldSize,N.y*this.worldSize,0,1];return a.transformMat4(G,G,this.pixelMatrix),new a.Point(G[0]/G[3],G[1]/G[3])},Zr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},Zr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Zr.prototype.setMaxBounds=function(N){N?(this.lngRange=[N.getWest(),N.getEast()],this.latRange=[N.getSouth(),N.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Zr.prototype.calculatePosMatrix=function(N,G){G===void 0&&(G=!1);var H=N.key,Q=G?this._alignedPosMatrixCache:this._posMatrixCache;if(Q[H])return Q[H];var xe=N.canonical,Pe=this.worldSize/this.zoomScale(xe.z),U=xe.x+Math.pow(2,xe.z)*N.wrap,te=a.identity(new Float64Array(16));return a.translate(te,te,[U*Pe,xe.y*Pe,0]),a.scale(te,te,[Pe/a.EXTENT,Pe/a.EXTENT,1]),a.multiply(te,G?this.alignedProjMatrix:this.projMatrix,te),Q[H]=new Float32Array(te),Q[H]},Zr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Zr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var N,G,H,Q,xe=-90,Pe=90,U=-180,te=180,oe=this.size,_e=this._unmodified;if(this.latRange){var ke=this.latRange;xe=a.mercatorYfromLat(ke[1])*this.worldSize,N=(Pe=a.mercatorYfromLat(ke[0])*this.worldSize)-xe<oe.y?oe.y/(Pe-xe):0}if(this.lngRange){var ze=this.lngRange;U=a.mercatorXfromLng(ze[0])*this.worldSize,G=(te=a.mercatorXfromLng(ze[1])*this.worldSize)-U<oe.x?oe.x/(te-U):0}var Ge=this.point,qe=Math.max(G||0,N||0);if(qe)return this.center=this.unproject(new a.Point(G?(te+U)/2:Ge.x,N?(Pe+xe)/2:Ge.y)),this.zoom+=this.scaleZoom(qe),this._unmodified=_e,void(this._constraining=!1);if(this.latRange){var Je=Ge.y,$e=oe.y/2;Je-$e<xe&&(Q=xe+$e),Je+$e>Pe&&(Q=Pe-$e)}if(this.lngRange){var st=Ge.x,yt=oe.x/2;st-yt<U&&(H=U+yt),st+yt>te&&(H=te-yt)}H===void 0&&Q===void 0||(this.center=this.unproject(new a.Point(H!==void 0?H:Ge.x,Q!==void 0?Q:Ge.y))),this._unmodified=_e,this._constraining=!1}},Zr.prototype._calcMatrices=function(){if(this.height){var N=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(N)*this.height;var H=Math.PI/2+this._pitch,Q=this._fov*(.5+G.y/this.height),xe=Math.sin(Q)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-H-Q,.01,Math.PI-.01)),Pe=this.point,U=Pe.x,te=Pe.y,oe=1.01*(Math.cos(Math.PI/2-this._pitch)*xe+this.cameraToCenterDistance),_e=this.height/50,ke=new Float64Array(16);a.perspective(ke,this._fov,this.width/this.height,_e,oe),ke[8]=2*-G.x/this.width,ke[9]=2*G.y/this.height,a.scale(ke,ke,[1,-1,1]),a.translate(ke,ke,[0,0,-this.cameraToCenterDistance]),a.rotateX(ke,ke,this._pitch),a.rotateZ(ke,ke,this.angle),a.translate(ke,ke,[-U,-te,0]),this.mercatorMatrix=a.scale([],ke,[this.worldSize,this.worldSize,this.worldSize]),a.scale(ke,ke,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ke,this.invProjMatrix=a.invert([],this.projMatrix);var ze=this.width%2/2,Ge=this.height%2/2,qe=Math.cos(this.angle),Je=Math.sin(this.angle),$e=U-Math.round(U)+qe*ze+Je*Ge,st=te-Math.round(te)+qe*Ge+Je*ze,yt=new Float64Array(ke);if(a.translate(yt,yt,[$e>.5?$e-1:$e,st>.5?st-1:st,0]),this.alignedProjMatrix=yt,ke=a.create(),a.scale(ke,ke,[this.width/2,-this.height/2,1]),a.translate(ke,ke,[1,-1,0]),this.labelPlaneMatrix=ke,ke=a.create(),a.scale(ke,ke,[1,-1,1]),a.translate(ke,ke,[-1,-1,0]),a.scale(ke,ke,[2/this.width,2/this.height,1]),this.glCoordMatrix=ke,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ke=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ke,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Zr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var N=this.pointCoordinate(new a.Point(0,0)),G=[N.x*this.worldSize,N.y*this.worldSize,0,1];return a.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Zr.prototype.getCameraPoint=function(){var N=this._pitch,G=Math.tan(N)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,G))},Zr.prototype.getCameraQueryGeometry=function(N){var G=this.getCameraPoint();if(N.length===1)return[N[0],G];for(var H=G.x,Q=G.y,xe=G.x,Pe=G.y,U=0,te=N;U<te.length;U+=1){var oe=te[U];H=Math.min(H,oe.x),Q=Math.min(Q,oe.y),xe=Math.max(xe,oe.x),Pe=Math.max(Pe,oe.y)}return[new a.Point(H,Q),new a.Point(xe,Q),new a.Point(xe,Pe),new a.Point(H,Pe),new a.Point(H,Q)]},Object.defineProperties(Zr.prototype,ni);var ss=function(N){var G,H,Q,xe,Pe;this._hashName=N&&encodeURIComponent(N),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),H=300,Q=!1,xe=null,Pe=function(){xe=null,Q&&(G(),xe=setTimeout(Pe,H),Q=!1)},function(){return Q=!0,xe||Pe(),xe})};ss.prototype.addTo=function(N){return this._map=N,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ss.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ss.prototype.getHashString=function(N){var G=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,Q=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),xe=Math.pow(10,Q),Pe=Math.round(G.lng*xe)/xe,U=Math.round(G.lat*xe)/xe,te=this._map.getBearing(),oe=this._map.getPitch(),_e="";if(_e+=N?"/"+Pe+"/"+U+"/"+H:H+"/"+U+"/"+Pe,(te||oe)&&(_e+="/"+Math.round(10*te)/10),oe&&(_e+="/"+Math.round(oe)),this._hashName){var ke=this._hashName,ze=!1,Ge=a.window.location.hash.slice(1).split("&").map(function(qe){var Je=qe.split("=")[0];return Je===ke?(ze=!0,Je+"="+_e):qe}).filter(function(qe){return qe});return ze||Ge.push(ke+"="+_e),"#"+Ge.join("&")}return"#"+_e},ss.prototype._getCurrentHash=function(){var N,G=this,H=a.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(Q){return Q.split("=")}).forEach(function(Q){Q[0]===G._hashName&&(N=Q)}),(N&&N[1]||"").split("/")):H.split("/")},ss.prototype._onHashChange=function(){var N=this._getCurrentHash();if(N.length>=3&&!N.some(function(H){return isNaN(H)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(N[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+N[2],+N[1]],zoom:+N[0],bearing:G,pitch:+(N[4]||0)}),!0}return!1},ss.prototype._updateHashUnthrottled=function(){var N=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",N)}catch{}};var Vo={linearity:.3,easing:a.bezier(0,0,.3,1)},eu=a.extend({deceleration:2500,maxSpeed:1400},Vo),cl=a.extend({deceleration:20,maxSpeed:1400},Vo),ls=a.extend({deceleration:1e3,maxSpeed:360},Vo),fl=a.extend({deceleration:1e3,maxSpeed:90},Vo),Ho=function(N){this._map=N,this.clear()};function Cs(N,G){(!N.duration||N.duration<G.duration)&&(N.duration=G.duration,N.easing=G.easing)}function us(N,G,H){var Q=H.maxSpeed,xe=H.linearity,Pe=H.deceleration,U=a.clamp(N*xe/(G/1e3),-Q,Q),te=Math.abs(U)/(Pe*xe);return{easing:H.easing,duration:1e3*te,amount:U*(te/2)}}Ho.prototype.clear=function(){this._inertiaBuffer=[]},Ho.prototype.record=function(N){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:N})},Ho.prototype._drainInertiaBuffer=function(){for(var N=this._inertiaBuffer,G=a.browser.now();N.length>0&&G-N[0].time>160;)N.shift()},Ho.prototype._onMoveEnd=function(N){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},H=0,Q=this._inertiaBuffer;H<Q.length;H+=1){var xe=Q[H].settings;G.zoom+=xe.zoomDelta||0,G.bearing+=xe.bearingDelta||0,G.pitch+=xe.pitchDelta||0,xe.panDelta&&G.pan._add(xe.panDelta),xe.around&&(G.around=xe.around),xe.pinchAround&&(G.pinchAround=xe.pinchAround)}var Pe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,U={};if(G.pan.mag()){var te=us(G.pan.mag(),Pe,a.extend({},eu,N||{}));U.offset=G.pan.mult(te.amount/G.pan.mag()),U.center=this._map.transform.center,Cs(U,te)}if(G.zoom){var oe=us(G.zoom,Pe,cl);U.zoom=this._map.transform.zoom+oe.amount,Cs(U,oe)}if(G.bearing){var _e=us(G.bearing,Pe,ls);U.bearing=this._map.transform.bearing+a.clamp(_e.amount,-179,179),Cs(U,_e)}if(G.pitch){var ke=us(G.pitch,Pe,fl);U.pitch=this._map.transform.pitch+ke.amount,Cs(U,ke)}if(U.zoom||U.bearing){var ze=G.pinchAround===void 0?G.around:G.pinchAround;U.around=ze?this._map.unproject(ze):this._map.getCenter()}return this.clear(),a.extend(U,{noMoveStart:!0})}};var Pi=function(N){function G(Q,xe,Pe,U){U===void 0&&(U={});var te=g.mousePos(xe.getCanvasContainer(),Pe),oe=xe.unproject(te);N.call(this,Q,a.extend({point:te,lngLat:oe,originalEvent:Pe},U)),this._defaultPrevented=!1,this.target=xe}N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(a.Event),Ps=function(N){function G(Q,xe,Pe){var U=Q==="touchend"?Pe.changedTouches:Pe.touches,te=g.touchPos(xe.getCanvasContainer(),U),oe=te.map(function(ze){return xe.unproject(ze)}),_e=te.reduce(function(ze,Ge,qe,Je){return ze.add(Ge.div(Je.length))},new a.Point(0,0)),ke=xe.unproject(_e);N.call(this,Q,{points:te,point:_e,lngLats:oe,lngLat:ke,originalEvent:Pe}),this._defaultPrevented=!1}N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(a.Event),Rs=function(N){function G(Q,xe,Pe){N.call(this,Q,{originalEvent:Pe}),this._defaultPrevented=!1}N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(a.Event),Zi=function(N,G){this._map=N,this._clickTolerance=G.clickTolerance};Zi.prototype.reset=function(){delete this._mousedownPos},Zi.prototype.wheel=function(N){return this._firePreventable(new Rs(N.type,this._map,N))},Zi.prototype.mousedown=function(N,G){return this._mousedownPos=G,this._firePreventable(new Pi(N.type,this._map,N))},Zi.prototype.mouseup=function(N){this._map.fire(new Pi(N.type,this._map,N))},Zi.prototype.click=function(N,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new Pi(N.type,this._map,N))},Zi.prototype.dblclick=function(N){return this._firePreventable(new Pi(N.type,this._map,N))},Zi.prototype.mouseover=function(N){this._map.fire(new Pi(N.type,this._map,N))},Zi.prototype.mouseout=function(N){this._map.fire(new Pi(N.type,this._map,N))},Zi.prototype.touchstart=function(N){return this._firePreventable(new Ps(N.type,this._map,N))},Zi.prototype.touchmove=function(N){this._map.fire(new Ps(N.type,this._map,N))},Zi.prototype.touchend=function(N){this._map.fire(new Ps(N.type,this._map,N))},Zi.prototype.touchcancel=function(N){this._map.fire(new Ps(N.type,this._map,N))},Zi.prototype._firePreventable=function(N){if(this._map.fire(N),N.defaultPrevented)return{}},Zi.prototype.isEnabled=function(){return!0},Zi.prototype.isActive=function(){return!1},Zi.prototype.enable=function(){},Zi.prototype.disable=function(){};var ga=function(N){this._map=N};ga.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ga.prototype.mousemove=function(N){this._map.fire(new Pi(N.type,this._map,N))},ga.prototype.mousedown=function(){this._delayContextMenu=!0},ga.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Pi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ga.prototype.contextmenu=function(N){this._delayContextMenu?this._contextMenuEvent=N:this._map.fire(new Pi(N.type,this._map,N)),this._map.listens("contextmenu")&&N.preventDefault()},ga.prototype.isEnabled=function(){return!0},ga.prototype.isActive=function(){return!1},ga.prototype.enable=function(){},ga.prototype.disable=function(){};var fa=function(N,G){this._map=N,this._el=N.getCanvasContainer(),this._container=N.getContainer(),this._clickTolerance=G.clickTolerance||1};function Ki(N,G){for(var H={},Q=0;Q<N.length;Q++)H[N[Q].identifier]=G[Q];return H}fa.prototype.isEnabled=function(){return!!this._enabled},fa.prototype.isActive=function(){return!!this._active},fa.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},fa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fa.prototype.mousedown=function(N,G){this.isEnabled()&&N.shiftKey&&N.button===0&&(g.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},fa.prototype.mousemoveWindow=function(N,G){if(this._active){var H=G;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var Q=this._startPos;this._lastPos=H,this._box||(this._box=g.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",N));var xe=Math.min(Q.x,H.x),Pe=Math.max(Q.x,H.x),U=Math.min(Q.y,H.y),te=Math.max(Q.y,H.y);g.setTransform(this._box,"translate("+xe+"px,"+U+"px)"),this._box.style.width=Pe-xe+"px",this._box.style.height=te-U+"px"}}},fa.prototype.mouseupWindow=function(N,G){var H=this;if(this._active&&N.button===0){var Q=this._startPos,xe=G;if(this.reset(),g.suppressClick(),Q.x!==xe.x||Q.y!==xe.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:N})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(Q,xe,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",N)}},fa.prototype.keydown=function(N){this._active&&N.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",N))},fa.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos},fa.prototype._fireEvent=function(N,G){return this._map.fire(new a.Event(N,{originalEvent:G}))};var Ta=function(N){this.reset(),this.numTouches=N.numTouches};Ta.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ta.prototype.touchstart=function(N,G,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=N.timeStamp),H.length===this.numTouches&&(this.centroid=function(Q){for(var xe=new a.Point(0,0),Pe=0,U=Q;Pe<U.length;Pe+=1){var te=U[Pe];xe._add(te)}return xe.div(Q.length)}(G),this.touches=Ki(H,G)))},Ta.prototype.touchmove=function(N,G,H){if(!this.aborted&&this.centroid){var Q=Ki(H,G);for(var xe in this.touches){var Pe=this.touches[xe],U=Q[xe];(!U||U.dist(Pe)>30)&&(this.aborted=!0)}}},Ta.prototype.touchend=function(N,G,H){if((!this.centroid||N.timeStamp-this.startTime>500)&&(this.aborted=!0),H.length===0){var Q=!this.aborted&&this.centroid;if(this.reset(),Q)return Q}};var cs=function(N){this.singleTap=new Ta(N),this.numTaps=N.numTaps,this.reset()};cs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},cs.prototype.touchstart=function(N,G,H){this.singleTap.touchstart(N,G,H)},cs.prototype.touchmove=function(N,G,H){this.singleTap.touchmove(N,G,H)},cs.prototype.touchend=function(N,G,H){var Q=this.singleTap.touchend(N,G,H);if(Q){var xe=N.timeStamp-this.lastTime<500,Pe=!this.lastTap||this.lastTap.dist(Q)<30;if(xe&&Pe||this.reset(),this.count++,this.lastTime=N.timeStamp,this.lastTap=Q,this.count===this.numTaps)return this.reset(),Q}};var so=function(){this._zoomIn=new cs({numTouches:1,numTaps:2}),this._zoomOut=new cs({numTouches:2,numTaps:1}),this.reset()};so.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},so.prototype.touchstart=function(N,G,H){this._zoomIn.touchstart(N,G,H),this._zoomOut.touchstart(N,G,H)},so.prototype.touchmove=function(N,G,H){this._zoomIn.touchmove(N,G,H),this._zoomOut.touchmove(N,G,H)},so.prototype.touchend=function(N,G,H){var Q=this,xe=this._zoomIn.touchend(N,G,H),Pe=this._zoomOut.touchend(N,G,H);return xe?(this._active=!0,N.preventDefault(),setTimeout(function(){return Q.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()+1,around:U.unproject(xe)},{originalEvent:N})}}):Pe?(this._active=!0,N.preventDefault(),setTimeout(function(){return Q.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()-1,around:U.unproject(Pe)},{originalEvent:N})}}):void 0},so.prototype.touchcancel=function(){this.reset()},so.prototype.enable=function(){this._enabled=!0},so.prototype.disable=function(){this._enabled=!1,this.reset()},so.prototype.isEnabled=function(){return this._enabled},so.prototype.isActive=function(){return this._active};var aa=function(N){this.reset(),this._clickTolerance=N.clickTolerance||1};aa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},aa.prototype._correctButton=function(N,G){return!1},aa.prototype._move=function(N,G){return{}},aa.prototype.mousedown=function(N,G){if(!this._lastPoint){var H=g.mouseButton(N);this._correctButton(N,H)&&(this._lastPoint=G,this._eventButton=H)}},aa.prototype.mousemoveWindow=function(N,G){var H=this._lastPoint;if(H&&(N.preventDefault(),this._moved||!(G.dist(H)<this._clickTolerance)))return this._moved=!0,this._lastPoint=G,this._move(H,G)},aa.prototype.mouseupWindow=function(N){g.mouseButton(N)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var Ha=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(H,Q){N.prototype.mousedown.call(this,H,Q),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(H,Q){return Q===0&&!H.ctrlKey},G.prototype._move=function(H,Q){return{around:Q,panDelta:Q.sub(H)}},G}(aa),Ja=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,Q){return Q===0&&H.ctrlKey||Q===2},G.prototype._move=function(H,Q){var xe=.8*(Q.x-H.x);if(xe)return this._active=!0,{bearingDelta:xe}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(aa),Dl=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,Q){return Q===0&&H.ctrlKey||Q===2},G.prototype._move=function(H,Q){var xe=-.5*(Q.y-H.y);if(xe)return this._active=!0,{pitchDelta:xe}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(aa),$a=function(N){this._minTouches=1,this._clickTolerance=N.clickTolerance||1,this.reset()};$a.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},$a.prototype.touchstart=function(N,G,H){return this._calculateTransform(N,G,H)},$a.prototype.touchmove=function(N,G,H){if(this._active)return N.preventDefault(),this._calculateTransform(N,G,H)},$a.prototype.touchend=function(N,G,H){this._calculateTransform(N,G,H),this._active&&H.length<this._minTouches&&this.reset()},$a.prototype.touchcancel=function(){this.reset()},$a.prototype._calculateTransform=function(N,G,H){H.length>0&&(this._active=!0);var Q=Ki(H,G),xe=new a.Point(0,0),Pe=new a.Point(0,0),U=0;for(var te in Q){var oe=Q[te],_e=this._touches[te];_e&&(xe._add(oe),Pe._add(oe.sub(_e)),U++,Q[te]=oe)}if(this._touches=Q,!(U<this._minTouches)&&Pe.mag()){var ke=Pe.div(U);if(this._sum._add(ke),!(this._sum.mag()<this._clickTolerance))return{around:xe.div(U),panDelta:ke}}},$a.prototype.enable=function(){this._enabled=!0},$a.prototype.disable=function(){this._enabled=!1,this.reset()},$a.prototype.isEnabled=function(){return this._enabled},$a.prototype.isActive=function(){return this._active};var oa=function(){this.reset()};function Sr(N,G,H){for(var Q=0;Q<N.length;Q++)if(N[Q].identifier===H)return G[Q]}oa.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},oa.prototype._start=function(N){},oa.prototype._move=function(N,G,H){return{}},oa.prototype.touchstart=function(N,G,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([G[0],G[1]]))},oa.prototype.touchmove=function(N,G,H){if(this._firstTwoTouches){N.preventDefault();var Q=this._firstTwoTouches,xe=Q[0],Pe=Q[1],U=Sr(H,G,xe),te=Sr(H,G,Pe);if(U&&te){var oe=this._aroundCenter?null:U.add(te).div(2);return this._move([U,te],oe,N)}}},oa.prototype.touchend=function(N,G,H){if(this._firstTwoTouches){var Q=this._firstTwoTouches,xe=Q[0],Pe=Q[1],U=Sr(H,G,xe),te=Sr(H,G,Pe);U&&te||(this._active&&g.suppressClick(),this.reset())}},oa.prototype.touchcancel=function(){this.reset()},oa.prototype.enable=function(N){this._enabled=!0,this._aroundCenter=!!N&&N.around==="center"},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};function va(N,G){return Math.log(N/G)/Math.LN2}var hl=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.reset=function(){N.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},G.prototype._move=function(H,Q){var xe=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(va(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:va(this._distance,xe),pinchAround:Q}},G}(oa);function zl(N,G){return 180*N.angleWith(G)/Math.PI}var Is=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.reset=function(){N.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},G.prototype._move=function(H,Q){var xe=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zl(this._vector,xe),pinchAround:Q}},G.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var Q=25/(Math.PI*this._minDiameter)*360,xe=zl(H,this._startVector);return Math.abs(xe)<Q},G}(oa);function Os(N){return Math.abs(N.y)>Math.abs(N.x)}var Go=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.reset=function(){N.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(H){this._lastPoints=H,Os(H[0].sub(H[1]))&&(this._valid=!1)},G.prototype._move=function(H,Q,xe){var Pe=H[0].sub(this._lastPoints[0]),U=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,U,xe.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(Pe.y+U.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(H,Q,xe){if(this._valid!==void 0)return this._valid;var Pe=H.mag()>=2,U=Q.mag()>=2;if(Pe||U){if(!Pe||!U)return this._firstMove===void 0&&(this._firstMove=xe),xe-this._firstMove<100&&void 0;var te=H.y>0==Q.y>0;return Os(H)&&Os(Q)&&te}},G}(oa),Tr={panStep:100,bearingStep:15,pitchStep:10},lo=function(){var N=Tr;this._panStep=N.panStep,this._bearingStep=N.bearingStep,this._pitchStep=N.pitchStep};function Zs(N){return N*(2-N)}lo.prototype.reset=function(){this._active=!1},lo.prototype.keydown=function(N){var G=this;if(!(N.altKey||N.ctrlKey||N.metaKey)){var H=0,Q=0,xe=0,Pe=0,U=0;switch(N.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:N.shiftKey?Q=-1:(N.preventDefault(),Pe=-1);break;case 39:N.shiftKey?Q=1:(N.preventDefault(),Pe=1);break;case 38:N.shiftKey?xe=1:(N.preventDefault(),U=-1);break;case 40:N.shiftKey?xe=-1:(N.preventDefault(),U=1);break;default:return}return{cameraAnimation:function(te){var oe=te.getZoom();te.easeTo({duration:300,easeId:"keyboardHandler",easing:Zs,zoom:H?Math.round(oe)+H*(N.shiftKey?2:1):oe,bearing:te.getBearing()+Q*G._bearingStep,pitch:te.getPitch()+xe*G._pitchStep,offset:[-Pe*G._panStep,-U*G._panStep],center:te.getCenter()},{originalEvent:N})}}}},lo.prototype.enable=function(){this._enabled=!0},lo.prototype.disable=function(){this._enabled=!1,this.reset()},lo.prototype.isEnabled=function(){return this._enabled},lo.prototype.isActive=function(){return this._active};var pl=4.000244140625,ya=function(N,G){this._map=N,this._el=N.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ya.prototype.setZoomRate=function(N){this._defaultZoomRate=N},ya.prototype.setWheelZoomRate=function(N){this._wheelZoomRate=N},ya.prototype.isEnabled=function(){return!!this._enabled},ya.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ya.prototype.isZooming=function(){return!!this._zooming},ya.prototype.enable=function(N){this.isEnabled()||(this._enabled=!0,this._aroundCenter=N&&N.around==="center")},ya.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ya.prototype.wheel=function(N){if(this.isEnabled()){var G=N.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*N.deltaY:N.deltaY,H=a.browser.now(),Q=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,G!==0&&G%pl==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":Q>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,N)):this._type||(this._type=Math.abs(Q*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),N.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=N,this._delta-=G,this._active||this._start(N)),N.preventDefault()}},ya.prototype._onTimeout=function(N){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},ya.prototype._start=function(N){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=g.mousePos(this._el,N);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ya.prototype.renderFrame=function(){return this._onScrollFrame()},ya.prototype._onScrollFrame=function(){var N=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var H=this._type==="wheel"&&Math.abs(this._delta)>pl?this._wheelZoomRate:this._defaultZoomRate,Q=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&Q!==0&&(Q=1/Q);var xe=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(xe*Q))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe,U=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,te=this._startZoom,oe=this._easing,_e=!1;if(this._type==="wheel"&&te&&oe){var ke=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),ze=oe(ke);Pe=a.number(te,U,ze),ke<1?this._frameId||(this._frameId=!0):_e=!0}else Pe=U,_e=!0;return this._active=!0,_e&&(this._active=!1,this._finishTimeout=setTimeout(function(){N._zooming=!1,N._handler._triggerRenderFrame(),delete N._targetZoom,delete N._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!_e,zoomDelta:Pe-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ya.prototype._smoothOutEasing=function(N){var G=a.ease;if(this._prevEase){var H=this._prevEase,Q=(a.browser.now()-H.start)/H.duration,xe=H.easing(Q+.01)-H.easing(Q),Pe=.27/Math.sqrt(xe*xe+1e-4)*.01,U=Math.sqrt(.0729-Pe*Pe);G=a.bezier(Pe,U,.25,1)}return this._prevEase={start:a.browser.now(),duration:N,easing:G},G},ya.prototype.reset=function(){this._active=!1};var uo=function(N,G){this._clickZoom=N,this._tapZoom=G};uo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},uo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},uo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},uo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Qa=function(){this.reset()};Qa.prototype.reset=function(){this._active=!1},Qa.prototype.dblclick=function(N,G){return N.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(N.shiftKey?-1:1),around:H.unproject(G)},{originalEvent:N})}}},Qa.prototype.enable=function(){this._enabled=!0},Qa.prototype.disable=function(){this._enabled=!1,this.reset()},Qa.prototype.isEnabled=function(){return this._enabled},Qa.prototype.isActive=function(){return this._active};var Ga=function(){this._tap=new cs({numTouches:1,numTaps:1}),this.reset()};Ga.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ga.prototype.touchstart=function(N,G,H){this._swipePoint||(this._tapTime&&N.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=G[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(N,G,H))},Ga.prototype.touchmove=function(N,G,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var Q=G[0],xe=Q.y-this._swipePoint.y;return this._swipePoint=Q,N.preventDefault(),this._active=!0,{zoomDelta:xe/128}}}else this._tap.touchmove(N,G,H)},Ga.prototype.touchend=function(N,G,H){this._tapTime?this._swipePoint&&H.length===0&&this.reset():this._tap.touchend(N,G,H)&&(this._tapTime=N.timeStamp)},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype.enable=function(){this._enabled=!0},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};var wo=function(N,G,H){this._el=N,this._mousePan=G,this._touchPan=H};wo.prototype.enable=function(N){this._inertiaOptions=N||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},wo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},wo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},wo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wo=function(N,G,H){this._pitchWithRotate=N.pitchWithRotate,this._mouseRotate=G,this._mousePitch=H};Wo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ji=function(N,G,H,Q){this._el=N,this._touchZoom=G,this._touchRotate=H,this._tapDragZoom=Q,this._rotationDisabled=!1,this._enabled=!0};Ji.prototype.enable=function(N){this._touchZoom.enable(N),this._rotationDisabled||this._touchRotate.enable(N),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ji.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ji.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ji.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ji.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ji.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ds=function(N){return N.zoom||N.drag||N.pitch||N.rotate},Ks=function(N){function G(){N.apply(this,arguments)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G}(a.Event);function sa(N){return N.panDelta&&N.panDelta.mag()||N.zoomDelta||N.bearingDelta||N.pitchDelta}var mi=function(N,G){this._map=N,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ho(N),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),a.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!1}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[a.window,"blur",void 0]];for(var Q=0,xe=this._listeners;Q<xe.length;Q+=1){var Pe=xe[Q],U=Pe[0],te=Pe[1],oe=Pe[2];g.addEventListener(U,te,U===a.window.document?this.handleWindowEvent:this.handleEvent,oe)}};mi.prototype.destroy=function(){for(var N=0,G=this._listeners;N<G.length;N+=1){var H=G[N],Q=H[0],xe=H[1],Pe=H[2];g.removeEventListener(Q,xe,Q===a.window.document?this.handleWindowEvent:this.handleEvent,Pe)}},mi.prototype._addDefaultHandlers=function(N){var G=this._map,H=G.getCanvasContainer();this._add("mapEvent",new Zi(G,N));var Q=G.boxZoom=new fa(G,N);this._add("boxZoom",Q);var xe=new so,Pe=new Qa;G.doubleClickZoom=new uo(Pe,xe),this._add("tapZoom",xe),this._add("clickZoom",Pe);var U=new Ga;this._add("tapDragZoom",U);var te=G.touchPitch=new Go;this._add("touchPitch",te);var oe=new Ja(N),_e=new Dl(N);G.dragRotate=new Wo(N,oe,_e),this._add("mouseRotate",oe,["mousePitch"]),this._add("mousePitch",_e,["mouseRotate"]);var ke=new Ha(N),ze=new $a(N);G.dragPan=new wo(H,ke,ze),this._add("mousePan",ke),this._add("touchPan",ze,["touchZoom","touchRotate"]);var Ge=new Is,qe=new hl;G.touchZoomRotate=new Ji(H,qe,Ge,U),this._add("touchRotate",Ge,["touchPan","touchZoom"]),this._add("touchZoom",qe,["touchPan","touchRotate"]);var Je=G.scrollZoom=new ya(G,this);this._add("scrollZoom",Je,["mousePan"]);var $e=G.keyboard=new lo;this._add("keyboard",$e),this._add("blockableMapEvent",new ga(G));for(var st=0,yt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];st<yt.length;st+=1){var _t=yt[st];N.interactive&&N[_t]&&G[_t].enable(N[_t])}},mi.prototype._add=function(N,G,H){this._handlers.push({handlerName:N,handler:G,allowed:H}),this._handlersById[N]=G},mi.prototype.stop=function(){if(!this._updatingCamera){for(var N=0,G=this._handlers;N<G.length;N+=1)G[N].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},mi.prototype.isActive=function(){for(var N=0,G=this._handlers;N<G.length;N+=1)if(G[N].handler.isActive())return!0;return!1},mi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},mi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},mi.prototype.isMoving=function(){return!!Ds(this._eventsInProgress)||this.isZooming()},mi.prototype._blockedByActive=function(N,G,H){for(var Q in N)if(Q!==H&&(!G||G.indexOf(Q)<0))return!0;return!1},mi.prototype.handleWindowEvent=function(N){this.handleEvent(N,N.type+"Window")},mi.prototype._getMapTouches=function(N){for(var G=[],H=0,Q=N;H<Q.length;H+=1){var xe=Q[H],Pe=xe.target;this._el.contains(Pe)&&G.push(xe)}return G},mi.prototype.handleEvent=function(N,G){if(N.type!=="blur"){this._updatingCamera=!0;for(var H=N.type==="renderFrame"?void 0:N,Q={needsRenderFrame:!1},xe={},Pe={},U=N.touches?this._getMapTouches(N.touches):void 0,te=U?g.touchPos(this._el,U):g.mousePos(this._el,N),oe=0,_e=this._handlers;oe<_e.length;oe+=1){var ke=_e[oe],ze=ke.handlerName,Ge=ke.handler,qe=ke.allowed;if(Ge.isEnabled()){var Je=void 0;this._blockedByActive(Pe,qe,ze)?Ge.reset():Ge[G||N.type]&&(Je=Ge[G||N.type](N,te,U),this.mergeHandlerResult(Q,xe,Je,ze,H),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||Ge.isActive())&&(Pe[ze]=Ge)}}var $e={};for(var st in this._previousActiveHandlers)Pe[st]||($e[st]=H);this._previousActiveHandlers=Pe,(Object.keys($e).length||sa(Q))&&(this._changes.push([Q,xe,$e]),this._triggerRenderFrame()),(Object.keys(Pe).length||sa(Q))&&this._map._stop(!0),this._updatingCamera=!1;var yt=Q.cameraAnimation;yt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],yt(this._map))}else this.stop()},mi.prototype.mergeHandlerResult=function(N,G,H,Q,xe){if(H){a.extend(N,H);var Pe={handlerName:Q,originalEvent:H.originalEvent||xe};H.zoomDelta!==void 0&&(G.zoom=Pe),H.panDelta!==void 0&&(G.drag=Pe),H.pitchDelta!==void 0&&(G.pitch=Pe),H.bearingDelta!==void 0&&(G.rotate=Pe)}},mi.prototype._applyChanges=function(){for(var N={},G={},H={},Q=0,xe=this._changes;Q<xe.length;Q+=1){var Pe=xe[Q],U=Pe[0],te=Pe[1],oe=Pe[2];U.panDelta&&(N.panDelta=(N.panDelta||new a.Point(0,0))._add(U.panDelta)),U.zoomDelta&&(N.zoomDelta=(N.zoomDelta||0)+U.zoomDelta),U.bearingDelta&&(N.bearingDelta=(N.bearingDelta||0)+U.bearingDelta),U.pitchDelta&&(N.pitchDelta=(N.pitchDelta||0)+U.pitchDelta),U.around!==void 0&&(N.around=U.around),U.pinchAround!==void 0&&(N.pinchAround=U.pinchAround),U.noInertia&&(N.noInertia=U.noInertia),a.extend(G,te),a.extend(H,oe)}this._updateMapTransform(N,G,H),this._changes=[]},mi.prototype._updateMapTransform=function(N,G,H){var Q=this._map,xe=Q.transform;if(!sa(N))return this._fireEvents(G,H);var Pe=N.panDelta,U=N.zoomDelta,te=N.bearingDelta,oe=N.pitchDelta,_e=N.around,ke=N.pinchAround;ke!==void 0&&(_e=ke),Q._stop(!0),_e=_e||Q.transform.centerPoint;var ze=xe.pointLocation(Pe?_e.sub(Pe):_e);te&&(xe.bearing+=te),oe&&(xe.pitch+=oe),U&&(xe.zoom+=U),xe.setLocationAtPoint(ze,_e),this._map._update(),N.noInertia||this._inertia.record(N),this._fireEvents(G,H)},mi.prototype._fireEvents=function(N,G){var H=this,Q=Ds(this._eventsInProgress),xe=Ds(N),Pe={};for(var U in N){var te=N[U].originalEvent;this._eventsInProgress[U]||(Pe[U+"start"]=te),this._eventsInProgress[U]=N[U]}for(var oe in!Q&&xe&&this._fireEvent("movestart",xe.originalEvent),Pe)this._fireEvent(oe,Pe[oe]);for(var _e in N.rotate&&(this._bearingChanged=!0),xe&&this._fireEvent("move",xe.originalEvent),N){var ke=N[_e].originalEvent;this._fireEvent(_e,ke)}var ze,Ge={};for(var qe in this._eventsInProgress){var Je=this._eventsInProgress[qe],$e=Je.handlerName,st=Je.originalEvent;this._handlersById[$e].isActive()||(delete this._eventsInProgress[qe],ze=G[$e]||st,Ge[qe+"end"]=ze)}for(var yt in Ge)this._fireEvent(yt,Ge[yt]);var _t=Ds(this._eventsInProgress);if((Q||xe)&&!_t){this._updatingCamera=!0;var It=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),zt=function(Rt){return Rt!==0&&-H._bearingSnap<Rt&&Rt<H._bearingSnap};It?(zt(It.bearing||this._map.getBearing())&&(It.bearing=0),this._map.easeTo(It,{originalEvent:ze})):(this._map.fire(new a.Event("moveend",{originalEvent:ze})),zt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},mi.prototype._fireEvent=function(N,G){this._map.fire(new a.Event(N,G?{originalEvent:G}:{}))},mi.prototype._triggerRenderFrame=function(){var N=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(G){delete N._frameId,N.handleEvent(new Ks("renderFrame",{timeStamp:G})),N._applyChanges()}))};var dl=function(N){function G(H,Q){N.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=Q.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(H,Q){return this.jumpTo({center:H},Q)},G.prototype.panBy=function(H,Q,xe){return H=a.Point.convert(H).mult(-1),this.panTo(this.transform.center,a.extend({offset:H},Q),xe)},G.prototype.panTo=function(H,Q,xe){return this.easeTo(a.extend({center:H},Q),xe)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(H,Q){return this.jumpTo({zoom:H},Q),this},G.prototype.zoomTo=function(H,Q,xe){return this.easeTo(a.extend({zoom:H},Q),xe)},G.prototype.zoomIn=function(H,Q){return this.zoomTo(this.getZoom()+1,H,Q),this},G.prototype.zoomOut=function(H,Q){return this.zoomTo(this.getZoom()-1,H,Q),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(H,Q){return this.jumpTo({bearing:H},Q),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(H,Q){return this.jumpTo({padding:H},Q),this},G.prototype.rotateTo=function(H,Q,xe){return this.easeTo(a.extend({bearing:H},Q),xe)},G.prototype.resetNorth=function(H,Q){return this.rotateTo(0,a.extend({duration:1e3},H),Q),this},G.prototype.resetNorthPitch=function(H,Q){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},H),Q),this},G.prototype.snapToNorth=function(H,Q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,Q):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(H,Q){return this.jumpTo({pitch:H},Q),this},G.prototype.cameraForBounds=function(H,Q){return H=a.LngLatBounds.convert(H),this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),0,Q)},G.prototype._cameraForBoxAndBearing=function(H,Q,xe,Pe){var U={top:0,bottom:0,right:0,left:0};if(typeof(Pe=a.extend({padding:U,offset:[0,0],maxZoom:this.transform.maxZoom},Pe)).padding=="number"){var te=Pe.padding;Pe.padding={top:te,bottom:te,right:te,left:te}}Pe.padding=a.extend(U,Pe.padding);var oe=this.transform,_e=oe.padding,ke=oe.project(a.LngLat.convert(H)),ze=oe.project(a.LngLat.convert(Q)),Ge=ke.rotate(-xe*Math.PI/180),qe=ze.rotate(-xe*Math.PI/180),Je=new a.Point(Math.max(Ge.x,qe.x),Math.max(Ge.y,qe.y)),$e=new a.Point(Math.min(Ge.x,qe.x),Math.min(Ge.y,qe.y)),st=Je.sub($e),yt=(oe.width-(_e.left+_e.right+Pe.padding.left+Pe.padding.right))/st.x,_t=(oe.height-(_e.top+_e.bottom+Pe.padding.top+Pe.padding.bottom))/st.y;if(!(_t<0||yt<0)){var It=Math.min(oe.scaleZoom(oe.scale*Math.min(yt,_t)),Pe.maxZoom),zt=a.Point.convert(Pe.offset),Rt=(Pe.padding.left-Pe.padding.right)/2,Ht=(Pe.padding.top-Pe.padding.bottom)/2,Dt=new a.Point(zt.x+Rt,zt.y+Ht).mult(oe.scale/oe.zoomScale(It));return{center:oe.unproject(ke.add(ze).div(2).sub(Dt)),zoom:It,bearing:xe}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(H,Q,xe){return this._fitInternal(this.cameraForBounds(H,Q),Q,xe)},G.prototype.fitScreenCoordinates=function(H,Q,xe,Pe,U){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(H)),this.transform.pointLocation(a.Point.convert(Q)),xe,Pe),Pe,U)},G.prototype._fitInternal=function(H,Q,xe){return H?(delete(Q=a.extend(H,Q)).padding,Q.linear?this.easeTo(Q,xe):this.flyTo(Q,xe)):this},G.prototype.jumpTo=function(H,Q){this.stop();var xe=this.transform,Pe=!1,U=!1,te=!1;return"zoom"in H&&xe.zoom!==+H.zoom&&(Pe=!0,xe.zoom=+H.zoom),H.center!==void 0&&(xe.center=a.LngLat.convert(H.center)),"bearing"in H&&xe.bearing!==+H.bearing&&(U=!0,xe.bearing=+H.bearing),"pitch"in H&&xe.pitch!==+H.pitch&&(te=!0,xe.pitch=+H.pitch),H.padding==null||xe.isPaddingEqual(H.padding)||(xe.padding=H.padding),this.fire(new a.Event("movestart",Q)).fire(new a.Event("move",Q)),Pe&&this.fire(new a.Event("zoomstart",Q)).fire(new a.Event("zoom",Q)).fire(new a.Event("zoomend",Q)),U&&this.fire(new a.Event("rotatestart",Q)).fire(new a.Event("rotate",Q)).fire(new a.Event("rotateend",Q)),te&&this.fire(new a.Event("pitchstart",Q)).fire(new a.Event("pitch",Q)).fire(new a.Event("pitchend",Q)),this.fire(new a.Event("moveend",Q))},G.prototype.easeTo=function(H,Q){var xe=this;this._stop(!1,H.easeId),((H=a.extend({offset:[0,0],duration:500,easing:a.ease},H)).animate===!1||!H.essential&&a.browser.prefersReducedMotion)&&(H.duration=0);var Pe=this.transform,U=this.getZoom(),te=this.getBearing(),oe=this.getPitch(),_e=this.getPadding(),ke="zoom"in H?+H.zoom:U,ze="bearing"in H?this._normalizeBearing(H.bearing,te):te,Ge="pitch"in H?+H.pitch:oe,qe="padding"in H?H.padding:Pe.padding,Je=a.Point.convert(H.offset),$e=Pe.centerPoint.add(Je),st=Pe.pointLocation($e),yt=a.LngLat.convert(H.center||st);this._normalizeCenter(yt);var _t,It,zt=Pe.project(st),Rt=Pe.project(yt).sub(zt),Ht=Pe.zoomScale(ke-U);H.around&&(_t=a.LngLat.convert(H.around),It=Pe.locationPoint(_t));var Dt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ke!==U,this._rotating=this._rotating||te!==ze,this._pitching=this._pitching||Ge!==oe,this._padding=!Pe.isPaddingEqual(qe),this._easeId=H.easeId,this._prepareEase(Q,H.noMoveStart,Dt),clearTimeout(this._easeEndTimeoutID),this._ease(function(sn){if(xe._zooming&&(Pe.zoom=a.number(U,ke,sn)),xe._rotating&&(Pe.bearing=a.number(te,ze,sn)),xe._pitching&&(Pe.pitch=a.number(oe,Ge,sn)),xe._padding&&(Pe.interpolatePadding(_e,qe,sn),$e=Pe.centerPoint.add(Je)),_t)Pe.setLocationAtPoint(_t,It);else{var $t=Pe.zoomScale(Pe.zoom-U),Zt=ke>U?Math.min(2,Ht):Math.max(.5,Ht),xn=Math.pow(Zt,1-sn),bn=Pe.unproject(zt.add(Rt.mult(sn*xn)).mult($t));Pe.setLocationAtPoint(Pe.renderWorldCopies?bn.wrap():bn,$e)}xe._fireMoveEvents(Q)},function(sn){xe._afterEase(Q,sn)},H),this},G.prototype._prepareEase=function(H,Q,xe){xe===void 0&&(xe={}),this._moving=!0,Q||xe.moving||this.fire(new a.Event("movestart",H)),this._zooming&&!xe.zooming&&this.fire(new a.Event("zoomstart",H)),this._rotating&&!xe.rotating&&this.fire(new a.Event("rotatestart",H)),this._pitching&&!xe.pitching&&this.fire(new a.Event("pitchstart",H))},G.prototype._fireMoveEvents=function(H){this.fire(new a.Event("move",H)),this._zooming&&this.fire(new a.Event("zoom",H)),this._rotating&&this.fire(new a.Event("rotate",H)),this._pitching&&this.fire(new a.Event("pitch",H))},G.prototype._afterEase=function(H,Q){if(!this._easeId||!Q||this._easeId!==Q){delete this._easeId;var xe=this._zooming,Pe=this._rotating,U=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,xe&&this.fire(new a.Event("zoomend",H)),Pe&&this.fire(new a.Event("rotateend",H)),U&&this.fire(new a.Event("pitchend",H)),this.fire(new a.Event("moveend",H))}},G.prototype.flyTo=function(H,Q){var xe=this;if(!H.essential&&a.browser.prefersReducedMotion){var Pe=a.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,Q)}this.stop(),H=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},H);var U=this.transform,te=this.getZoom(),oe=this.getBearing(),_e=this.getPitch(),ke=this.getPadding(),ze="zoom"in H?a.clamp(+H.zoom,U.minZoom,U.maxZoom):te,Ge="bearing"in H?this._normalizeBearing(H.bearing,oe):oe,qe="pitch"in H?+H.pitch:_e,Je="padding"in H?H.padding:U.padding,$e=U.zoomScale(ze-te),st=a.Point.convert(H.offset),yt=U.centerPoint.add(st),_t=U.pointLocation(yt),It=a.LngLat.convert(H.center||_t);this._normalizeCenter(It);var zt=U.project(_t),Rt=U.project(It).sub(zt),Ht=H.curve,Dt=Math.max(U.width,U.height),sn=Dt/$e,$t=Rt.mag();if("minZoom"in H){var Zt=a.clamp(Math.min(H.minZoom,te,ze),U.minZoom,U.maxZoom),xn=Dt/U.zoomScale(Zt-te);Ht=Math.sqrt(xn/$t*2)}var bn=Ht*Ht;function Un(Gn){var ur=(sn*sn-Dt*Dt+(Gn?-1:1)*bn*bn*$t*$t)/(2*(Gn?sn:Dt)*bn*$t);return Math.log(Math.sqrt(ur*ur+1)-ur)}function jn(Gn){return(Math.exp(Gn)-Math.exp(-Gn))/2}function Xn(Gn){return(Math.exp(Gn)+Math.exp(-Gn))/2}var Qn=Un(0),hr=function(Gn){return Xn(Qn)/Xn(Qn+Ht*Gn)},cr=function(Gn){return Dt*((Xn(Qn)*(jn(ur=Qn+Ht*Gn)/Xn(ur))-jn(Qn))/bn)/$t;var ur},vr=(Un(1)-Qn)/Ht;if(Math.abs($t)<1e-6||!isFinite(vr)){if(Math.abs(Dt-sn)<1e-6)return this.easeTo(H,Q);var Mr=sn<Dt?-1:1;vr=Math.abs(Math.log(sn/Dt))/Ht,cr=function(){return 0},hr=function(Gn){return Math.exp(Mr*Ht*Gn)}}if("duration"in H)H.duration=+H.duration;else{var Fr="screenSpeed"in H?+H.screenSpeed/Ht:+H.speed;H.duration=1e3*vr/Fr}return H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=oe!==Ge,this._pitching=qe!==_e,this._padding=!U.isPaddingEqual(Je),this._prepareEase(Q,!1),this._ease(function(Gn){var ur=Gn*vr,yr=1/hr(ur);U.zoom=Gn===1?ze:te+U.scaleZoom(yr),xe._rotating&&(U.bearing=a.number(oe,Ge,Gn)),xe._pitching&&(U.pitch=a.number(_e,qe,Gn)),xe._padding&&(U.interpolatePadding(ke,Je,Gn),yt=U.centerPoint.add(st));var Ar=Gn===1?It:U.unproject(zt.add(Rt.mult(cr(ur))).mult(yr));U.setLocationAtPoint(U.renderWorldCopies?Ar.wrap():Ar,yt),xe._fireMoveEvents(Q)},function(){return xe._afterEase(Q)},H),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(H,Q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var xe=this._onEaseEnd;delete this._onEaseEnd,xe.call(this,Q)}if(!H){var Pe=this.handlers;Pe&&Pe.stop()}return this},G.prototype._ease=function(H,Q,xe){xe.animate===!1||xe.duration===0?(H(1),Q()):(this._easeStart=a.browser.now(),this._easeOptions=xe,this._onEaseFrame=H,this._onEaseEnd=Q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var H=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(H,Q){H=a.wrap(H,-180,180);var xe=Math.abs(H-Q);return Math.abs(H-360-Q)<xe&&(H-=360),Math.abs(H+360-Q)<xe&&(H+=360),H},G.prototype._normalizeCenter=function(H){var Q=this.transform;if(Q.renderWorldCopies&&!Q.lngRange){var xe=H.lng-Q.center.lng;H.lng+=xe>180?-360:xe<-180?360:0}},G}(a.Evented),Ia=function(N){N===void 0&&(N={}),this.options=N,a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ia.prototype.getDefaultPosition=function(){return"bottom-right"},Ia.prototype.onAdd=function(N){var G=this.options&&this.options.compact;return this._map=N,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=g.create("div","mapboxgl-ctrl-attrib-inner",this._container),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ia.prototype.onRemove=function(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ia.prototype._updateEditLink=function(){var N=this._editLink;N||(N=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(N){var H=G.reduce(function(Q,xe,Pe){return xe.value&&(Q+=xe.key+"="+xe.value+(Pe<G.length-1?"&":"")),Q},"?");N.href=a.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),N.rel="noopener nofollow"}},Ia.prototype._updateData=function(N){!N||N.sourceDataType!=="metadata"&&N.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ia.prototype._updateAttributions=function(){if(this._map.style){var N=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?N=N.concat(this.options.customAttribution.map(function(te){return typeof te!="string"?"":te})):typeof this.options.customAttribution=="string"&&N.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var H=this._map.style.sourceCaches;for(var Q in H){var xe=H[Q];if(xe.used){var Pe=xe.getSource();Pe.attribution&&N.indexOf(Pe.attribution)<0&&N.push(Pe.attribution)}}N.sort(function(te,oe){return te.length-oe.length});var U=(N=N.filter(function(te,oe){for(var _e=oe+1;_e<N.length;_e++)if(N[_e].indexOf(te)>=0)return!1;return!0})).join(" | ");U!==this._attribHTML&&(this._attribHTML=U,N.length?(this._innerContainer.innerHTML=U,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ia.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var $i=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};$i.prototype.onAdd=function(N){this._map=N,this._container=g.create("div","mapboxgl-ctrl");var G=g.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},$i.prototype.onRemove=function(){g.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},$i.prototype.getDefaultPosition=function(){return"bottom-left"},$i.prototype._updateLogo=function(N){N&&N.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},$i.prototype._logoRequired=function(){if(this._map.style){var N=this._map.style.sourceCaches;for(var G in N)if(N[G].getSource().mapbox_logo)return!0;return!1}},$i.prototype._updateCompact=function(){var N=this._container.children;if(N.length){var G=N[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var To=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};To.prototype.add=function(N){var G=++this._id;return this._queue.push({callback:N,id:G,cancelled:!1}),G},To.prototype.remove=function(N){for(var G=this._currentlyRunning,H=0,Q=G?this._queue.concat(G):this._queue;H<Q.length;H+=1){var xe=Q[H];if(xe.id===N)return void(xe.cancelled=!0)}},To.prototype.run=function(N){N===void 0&&(N=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,Q=G;H<Q.length;H+=1){var xe=Q[H];if(!xe.cancelled&&(xe.callback(N),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},To.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var tu={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ni=a.window.HTMLImageElement,ui=a.window.HTMLElement,Wa=a.window.ImageBitmap,Mo=60,co={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Mo,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Fl=function(N){function G(Q){var xe=this;if((Q=a.extend({},co,Q)).minZoom!=null&&Q.maxZoom!=null&&Q.minZoom>Q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(Q.minPitch!=null&&Q.maxPitch!=null&&Q.minPitch>Q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(Q.minPitch!=null&&Q.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(Q.maxPitch!=null&&Q.maxPitch>Mo)throw new Error("maxPitch must be less than or equal to 60");var Pe=new Zr(Q.minZoom,Q.maxZoom,Q.minPitch,Q.maxPitch,Q.renderWorldCopies);if(N.call(this,Pe,Q),this._interactive=Q.interactive,this._maxTileCacheSize=Q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Q.preserveDrawingBuffer,this._antialias=Q.antialias,this._trackResize=Q.trackResize,this._bearingSnap=Q.bearingSnap,this._refreshExpiredTiles=Q.refreshExpiredTiles,this._fadeDuration=Q.fadeDuration,this._crossSourceCollisions=Q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Q.collectResourceTiming,this._renderTaskQueue=new To,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},tu,Q.locale),this._requestManager=new a.RequestManager(Q.transformRequest,Q.accessToken),typeof Q.container=="string"){if(this._container=a.window.document.getElementById(Q.container),!this._container)throw new Error("Container '"+Q.container+"' not found.")}else{if(!(Q.container instanceof ui))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Q.container}if(Q.maxBounds&&this.setMaxBounds(Q.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return xe._update(!1)}),this.on("moveend",function(){return xe._update(!1)}),this.on("zoom",function(){return xe._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new mi(this,Q);var U=typeof Q.hash=="string"&&Q.hash||void 0;this._hash=Q.hash&&new ss(U).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Q.center,zoom:Q.zoom,bearing:Q.bearing,pitch:Q.pitch}),Q.bounds&&(this.resize(),this.fitBounds(Q.bounds,a.extend({},Q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Q.localIdeographFontFamily,Q.style&&this.setStyle(Q.style,{localIdeographFontFamily:Q.localIdeographFontFamily}),Q.attributionControl&&this.addControl(new Ia({customAttribution:Q.customAttribution})),this.addControl(new $i,Q.logoPosition),this.on("style.load",function(){xe.transform.unmodified&&xe.jumpTo(xe.style.stylesheet)}),this.on("data",function(te){xe._update(te.dataType==="style"),xe.fire(new a.Event(te.dataType+"data",te))}),this.on("dataloading",function(te){xe.fire(new a.Event(te.dataType+"dataloading",te))})}N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(Q,xe){if(xe===void 0&&Q.getDefaultPosition&&(xe=Q.getDefaultPosition()),xe===void 0&&(xe="top-right"),!Q||!Q.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=Q.onAdd(this);this._controls.push(Q);var U=this._controlPositions[xe];return xe.indexOf("bottom")!==-1?U.insertBefore(Pe,U.firstChild):U.appendChild(Pe),this},G.prototype.removeControl=function(Q){if(!Q||!Q.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var xe=this._controls.indexOf(Q);return xe>-1&&this._controls.splice(xe,1),Q.onRemove(this),this},G.prototype.resize=function(Q){var xe=this._containerDimensions(),Pe=xe[0],U=xe[1];this._resizeCanvas(Pe,U),this.transform.resize(Pe,U),this.painter.resize(Pe,U);var te=!this._moving;return te&&(this.stop(),this.fire(new a.Event("movestart",Q)).fire(new a.Event("move",Q))),this.fire(new a.Event("resize",Q)),te&&this.fire(new a.Event("moveend",Q)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(Q){return this.transform.setMaxBounds(a.LngLatBounds.convert(Q)),this._update()},G.prototype.setMinZoom=function(Q){if((Q=Q??-2)>=-2&&Q<=this.transform.maxZoom)return this.transform.minZoom=Q,this._update(),this.getZoom()<Q&&this.setZoom(Q),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(Q){if((Q=Q??22)>=this.transform.minZoom)return this.transform.maxZoom=Q,this._update(),this.getZoom()>Q&&this.setZoom(Q),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(Q){if((Q=Q??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(Q>=0&&Q<=this.transform.maxPitch)return this.transform.minPitch=Q,this._update(),this.getPitch()<Q&&this.setPitch(Q),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(Q){if((Q=Q??Mo)>Mo)throw new Error("maxPitch must be less than or equal to 60");if(Q>=this.transform.minPitch)return this.transform.maxPitch=Q,this._update(),this.getPitch()>Q&&this.setPitch(Q),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(Q){return this.transform.renderWorldCopies=Q,this._update()},G.prototype.project=function(Q){return this.transform.locationPoint(a.LngLat.convert(Q))},G.prototype.unproject=function(Q){return this.transform.pointLocation(a.Point.convert(Q))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(Q,xe,Pe){var U,te=this;if(Q==="mouseenter"||Q==="mouseover"){var oe=!1;return{layer:xe,listener:Pe,delegates:{mousemove:function(ke){var ze=te.getLayer(xe)?te.queryRenderedFeatures(ke.point,{layers:[xe]}):[];ze.length?oe||(oe=!0,Pe.call(te,new Pi(Q,te,ke.originalEvent,{features:ze}))):oe=!1},mouseout:function(){oe=!1}}}}if(Q==="mouseleave"||Q==="mouseout"){var _e=!1;return{layer:xe,listener:Pe,delegates:{mousemove:function(ke){(te.getLayer(xe)?te.queryRenderedFeatures(ke.point,{layers:[xe]}):[]).length?_e=!0:_e&&(_e=!1,Pe.call(te,new Pi(Q,te,ke.originalEvent)))},mouseout:function(ke){_e&&(_e=!1,Pe.call(te,new Pi(Q,te,ke.originalEvent)))}}}}return{layer:xe,listener:Pe,delegates:(U={},U[Q]=function(ke){var ze=te.getLayer(xe)?te.queryRenderedFeatures(ke.point,{layers:[xe]}):[];ze.length&&(ke.features=ze,Pe.call(te,ke),delete ke.features)},U)}},G.prototype.on=function(Q,xe,Pe){if(Pe===void 0)return N.prototype.on.call(this,Q,xe);var U=this._createDelegatedListener(Q,xe,Pe);for(var te in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Q]=this._delegatedListeners[Q]||[],this._delegatedListeners[Q].push(U),U.delegates)this.on(te,U.delegates[te]);return this},G.prototype.once=function(Q,xe,Pe){if(Pe===void 0)return N.prototype.once.call(this,Q,xe);var U=this._createDelegatedListener(Q,xe,Pe);for(var te in U.delegates)this.once(te,U.delegates[te]);return this},G.prototype.off=function(Q,xe,Pe){var U=this;return Pe===void 0?N.prototype.off.call(this,Q,xe):(this._delegatedListeners&&this._delegatedListeners[Q]&&function(te){for(var oe=te[Q],_e=0;_e<oe.length;_e++){var ke=oe[_e];if(ke.layer===xe&&ke.listener===Pe){for(var ze in ke.delegates)U.off(ze,ke.delegates[ze]);return oe.splice(_e,1),U}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(Q,xe){if(!this.style)return[];var Pe;if(xe!==void 0||Q===void 0||Q instanceof a.Point||Array.isArray(Q)||(xe=Q,Q=void 0),xe=xe||{},(Q=Q||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof Q[0]=="number")Pe=[a.Point.convert(Q)];else{var U=a.Point.convert(Q[0]),te=a.Point.convert(Q[1]);Pe=[U,new a.Point(te.x,U.y),te,new a.Point(U.x,te.y),U]}return this.style.queryRenderedFeatures(Pe,xe,this.transform)},G.prototype.querySourceFeatures=function(Q,xe){return this.style.querySourceFeatures(Q,xe)},G.prototype.setStyle=function(Q,xe){return(xe=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},xe)).diff!==!1&&xe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Q?(this._diffStyle(Q,xe),this):(this._localIdeographFontFamily=xe.localIdeographFontFamily,this._updateStyle(Q,xe))},G.prototype._getUIString=function(Q){var xe=this._locale[Q];if(xe==null)throw new Error("Missing UI string '"+Q+"'");return xe},G.prototype._updateStyle=function(Q,xe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),Q?(this.style=new or(this,xe||{}),this.style.setEventedParent(this,{style:this.style}),typeof Q=="string"?this.style.loadURL(Q):this.style.loadJSON(Q),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new or(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(Q,xe){var Pe=this;if(typeof Q=="string"){var U=this._requestManager.normalizeStyleURL(Q),te=this._requestManager.transformRequest(U,a.ResourceType.Style);a.getJSON(te,function(oe,_e){oe?Pe.fire(new a.ErrorEvent(oe)):_e&&Pe._updateDiff(_e,xe)})}else typeof Q=="object"&&this._updateDiff(Q,xe)},G.prototype._updateDiff=function(Q,xe){try{this.style.setState(Q)&&this._update(!0)}catch(Pe){a.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(Q,xe)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(Q,xe){return this._lazyInitEmptyStyle(),this.style.addSource(Q,xe),this._update(!0)},G.prototype.isSourceLoaded=function(Q){var xe=this.style&&this.style.sourceCaches[Q];if(xe!==void 0)return xe.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+Q+"'")))},G.prototype.areTilesLoaded=function(){var Q=this.style&&this.style.sourceCaches;for(var xe in Q){var Pe=Q[xe]._tiles;for(var U in Pe){var te=Pe[U];if(te.state!=="loaded"&&te.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(Q,xe,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(Q,xe,Pe)},G.prototype.removeSource=function(Q){return this.style.removeSource(Q),this._update(!0)},G.prototype.getSource=function(Q){return this.style.getSource(Q)},G.prototype.addImage=function(Q,xe,Pe){Pe===void 0&&(Pe={});var U=Pe.pixelRatio;U===void 0&&(U=1);var te=Pe.sdf;te===void 0&&(te=!1);var oe=Pe.stretchX,_e=Pe.stretchY,ke=Pe.content;if(this._lazyInitEmptyStyle(),xe instanceof Ni||Wa&&xe instanceof Wa){var ze=a.browser.getImageData(xe),Ge=ze.width,qe=ze.height,Je=ze.data;this.style.addImage(Q,{data:new a.RGBAImage({width:Ge,height:qe},Je),pixelRatio:U,stretchX:oe,stretchY:_e,content:ke,sdf:te,version:0})}else{if(xe.width===void 0||xe.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $e=xe.width,st=xe.height,yt=xe.data,_t=xe;this.style.addImage(Q,{data:new a.RGBAImage({width:$e,height:st},new Uint8Array(yt)),pixelRatio:U,stretchX:oe,stretchY:_e,content:ke,sdf:te,version:0,userImage:_t}),_t.onAdd&&_t.onAdd(this,Q)}},G.prototype.updateImage=function(Q,xe){var Pe=this.style.getImage(Q);if(!Pe)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var U=xe instanceof Ni||Wa&&xe instanceof Wa?a.browser.getImageData(xe):xe,te=U.width,oe=U.height,_e=U.data;if(te===void 0||oe===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(te!==Pe.data.width||oe!==Pe.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ke=!(xe instanceof Ni||Wa&&xe instanceof Wa);Pe.data.replace(_e,ke),this.style.updateImage(Q,Pe)},G.prototype.hasImage=function(Q){return Q?!!this.style.getImage(Q):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(Q){this.style.removeImage(Q)},G.prototype.loadImage=function(Q,xe){a.getImage(this._requestManager.transformRequest(Q,a.ResourceType.Image),xe)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(Q,xe){return this._lazyInitEmptyStyle(),this.style.addLayer(Q,xe),this._update(!0)},G.prototype.moveLayer=function(Q,xe){return this.style.moveLayer(Q,xe),this._update(!0)},G.prototype.removeLayer=function(Q){return this.style.removeLayer(Q),this._update(!0)},G.prototype.getLayer=function(Q){return this.style.getLayer(Q)},G.prototype.setLayerZoomRange=function(Q,xe,Pe){return this.style.setLayerZoomRange(Q,xe,Pe),this._update(!0)},G.prototype.setFilter=function(Q,xe,Pe){return Pe===void 0&&(Pe={}),this.style.setFilter(Q,xe,Pe),this._update(!0)},G.prototype.getFilter=function(Q){return this.style.getFilter(Q)},G.prototype.setPaintProperty=function(Q,xe,Pe,U){return U===void 0&&(U={}),this.style.setPaintProperty(Q,xe,Pe,U),this._update(!0)},G.prototype.getPaintProperty=function(Q,xe){return this.style.getPaintProperty(Q,xe)},G.prototype.setLayoutProperty=function(Q,xe,Pe,U){return U===void 0&&(U={}),this.style.setLayoutProperty(Q,xe,Pe,U),this._update(!0)},G.prototype.getLayoutProperty=function(Q,xe){return this.style.getLayoutProperty(Q,xe)},G.prototype.setLight=function(Q,xe){return xe===void 0&&(xe={}),this._lazyInitEmptyStyle(),this.style.setLight(Q,xe),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(Q,xe){return this.style.setFeatureState(Q,xe),this._update()},G.prototype.removeFeatureState=function(Q,xe){return this.style.removeFeatureState(Q,xe),this._update()},G.prototype.getFeatureState=function(Q){return this.style.getFeatureState(Q)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var Q=0,xe=0;return this._container&&(Q=this._container.clientWidth||400,xe=this._container.clientHeight||300),[Q,xe]},G.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var Q=this._container;Q.classList.add("mapboxgl-map"),(this._missingCSSCanary=g.create("div","mapboxgl-canary",Q)).style.visibility="hidden",this._detectMissingCSS();var xe=this._canvasContainer=g.create("div","mapboxgl-canvas-container",Q);this._interactive&&xe.classList.add("mapboxgl-interactive"),this._canvas=g.create("canvas","mapboxgl-canvas",xe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Pe=this._containerDimensions();this._resizeCanvas(Pe[0],Pe[1]);var U=this._controlContainer=g.create("div","mapboxgl-control-container",Q),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(oe){te[oe]=g.create("div","mapboxgl-ctrl-"+oe,U)})},G.prototype._resizeCanvas=function(Q,xe){var Pe=a.browser.devicePixelRatio||1;this._canvas.width=Pe*Q,this._canvas.height=Pe*xe,this._canvas.style.width=Q+"px",this._canvas.style.height=xe+"px"},G.prototype._setupPainter=function(){var Q=a.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),xe=this._canvas.getContext("webgl",Q)||this._canvas.getContext("experimental-webgl",Q);xe?(this.painter=new di(xe,this.transform),a.webpSupported.testSupport(xe)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(Q){Q.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:Q}))},G.prototype._contextRestored=function(Q){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:Q}))},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(Q){return this.style?(this._styleDirty=this._styleDirty||Q,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(Q){return this._update(),this._renderTaskQueue.add(Q)},G.prototype._cancelRenderFrame=function(Q){this._renderTaskQueue.remove(Q)},G.prototype._render=function(Q){var xe,Pe=this,U=0,te=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(xe=te.createQueryEXT(),te.beginQueryEXT(te.TIME_ELAPSED_EXT,xe),U=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Q),!this._removed){var oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var _e=this.transform.zoom,ke=a.browser.now();this.style.zoomHistory.update(_e,ke);var ze=new a.EvaluationParameters(_e,{now:ke,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ge=ze.crossFadingFactor();Ge===1&&Ge===this._crossFadingFactor||(oe=!0,this._crossFadingFactor=Ge),this.style.update(ze)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var qe=a.browser.now()-U;te.endQueryEXT(te.TIME_ELAPSED_EXT,xe),setTimeout(function(){var $e=te.getQueryObjectEXT(xe,te.QUERY_RESULT_EXT)/1e6;te.deleteQueryEXT(xe),Pe.fire(new a.Event("gpu-timing-frame",{cpuTime:qe,gpuTime:$e}))},50)}if(this.listens("gpu-timing-layer")){var Je=this.painter.collectGpuTimers();setTimeout(function(){var $e=Pe.painter.queryGpuTimers(Je);Pe.fire(new a.Event("gpu-timing-layer",{layerTimes:$e}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var Q=0,xe=this._controls;Q<xe.length;Q+=1)xe[Q].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var Pe=this.painter.context.gl.getExtension("WEBGL_lose_context");Pe&&Pe.loseContext(),fs(this._canvasContainer),fs(this._controlContainer),fs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},G.prototype.triggerRepaint=function(){var Q=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(xe){Q._frame=null,Q._render(xe)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(Q){this._trackResize&&this.resize({originalEvent:Q})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(Q){this._showTileBoundaries!==Q&&(this._showTileBoundaries=Q,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(Q){this._showPadding!==Q&&(this._showPadding=Q,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(Q){this._showCollisionBoxes!==Q&&(this._showCollisionBoxes=Q,Q?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(Q){this._showOverdrawInspector!==Q&&(this._showOverdrawInspector=Q,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(Q){this._repaint!==Q&&(this._repaint=Q,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(Q){this._vertices=Q,this._update()},G.prototype._setCacheLimits=function(Q,xe){a.setCacheLimits(Q,xe)},H.version.get=function(){return a.version},Object.defineProperties(G.prototype,H),G}(dl);function fs(N){N.parentNode&&N.parentNode.removeChild(N)}var zs={showCompass:!0,showZoom:!0,visualizePitch:!1},qi=function(N){var G=this;this.options=a.extend({},zs,N),this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return G._map.zoomIn({},{originalEvent:H})}),g.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return G._map.zoomOut({},{originalEvent:H})}),g.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:H}):G._map.resetNorth({},{originalEvent:H})}),this._compassIcon=g.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};qi.prototype._updateZoomButtons=function(){var N=this._map.getZoom();this._zoomInButton.disabled=N===this._map.getMaxZoom(),this._zoomOutButton.disabled=N===this._map.getMinZoom()},qi.prototype._rotateCompassArrow=function(){var N=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=N},qi.prototype.onAdd=function(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container},qi.prototype.onRemove=function(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},qi.prototype._createButton=function(N,G){var H=g.create("button",N,this._container);return H.type="button",H.addEventListener("click",G),H},qi.prototype._setButtonTitle=function(N,G){var H=this._map._getUIString("NavigationControl."+G);N.title=H,N.setAttribute("aria-label",H)};var ha=function(N,G,H){H===void 0&&(H=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new Ja({clickTolerance:N.dragRotate._mouseRotate._clickTolerance}),this.map=N,H&&(this.mousePitch=new Dl({clickTolerance:N.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(G,"mousedown",this.mousedown),g.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(G,"touchmove",this.touchmove),g.addEventListener(G,"touchend",this.touchend),g.addEventListener(G,"touchcancel",this.reset)};function Pr(N,G,H){if(N=new a.LngLat(N.lng,N.lat),G){var Q=new a.LngLat(N.lng-360,N.lat),xe=new a.LngLat(N.lng+360,N.lat),Pe=H.locationPoint(N).distSqr(G);H.locationPoint(Q).distSqr(G)<Pe?N=Q:H.locationPoint(xe).distSqr(G)<Pe&&(N=xe)}for(;Math.abs(N.lng-H.center.lng)>180;){var U=H.locationPoint(N);if(U.x>=0&&U.y>=0&&U.x<=H.width&&U.y<=H.height)break;N.lng>H.center.lng?N.lng-=360:N.lng+=360}return N}ha.prototype.down=function(N,G){this.mouseRotate.mousedown(N,G),this.mousePitch&&this.mousePitch.mousedown(N,G),g.disableDrag()},ha.prototype.move=function(N,G){var H=this.map,Q=this.mouseRotate.mousemoveWindow(N,G);if(Q&&Q.bearingDelta&&H.setBearing(H.getBearing()+Q.bearingDelta),this.mousePitch){var xe=this.mousePitch.mousemoveWindow(N,G);xe&&xe.pitchDelta&&H.setPitch(H.getPitch()+xe.pitchDelta)}},ha.prototype.off=function(){var N=this.element;g.removeEventListener(N,"mousedown",this.mousedown),g.removeEventListener(N,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(N,"touchmove",this.touchmove),g.removeEventListener(N,"touchend",this.touchend),g.removeEventListener(N,"touchcancel",this.reset),this.offTemp()},ha.prototype.offTemp=function(){g.enableDrag(),g.removeEventListener(a.window,"mousemove",this.mousemove),g.removeEventListener(a.window,"mouseup",this.mouseup)},ha.prototype.mousedown=function(N){this.down(a.extend({},N,{ctrlKey:!0,preventDefault:function(){return N.preventDefault()}}),g.mousePos(this.element,N)),g.addEventListener(a.window,"mousemove",this.mousemove),g.addEventListener(a.window,"mouseup",this.mouseup)},ha.prototype.mousemove=function(N){this.move(N,g.mousePos(this.element,N))},ha.prototype.mouseup=function(N){this.mouseRotate.mouseupWindow(N),this.mousePitch&&this.mousePitch.mouseupWindow(N),this.offTemp()},ha.prototype.touchstart=function(N){N.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,N.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return N.preventDefault()}},this._startPos))},ha.prototype.touchmove=function(N){N.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,N.targetTouches)[0],this.move({preventDefault:function(){return N.preventDefault()}},this._lastPos))},ha.prototype.touchend=function(N){N.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ha.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ir={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Js(N,G,H){var Q=N.classList;for(var xe in Ir)Q.remove("mapboxgl-"+H+"-anchor-"+xe);Q.add("mapboxgl-"+H+"-anchor-"+G)}var Ma,hs=function(N){function G(H,Q){var xe=this;if(N.call(this),(H instanceof a.window.HTMLElement||Q)&&(H=a.extend({element:H},Q)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._draggable=H&&H.draggable||!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&H.pitchAlignment!=="auto"?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=a.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");var Pe=g.createNS("http://www.w3.org/2000/svg","svg");Pe.setAttributeNS(null,"display","block"),Pe.setAttributeNS(null,"height","41px"),Pe.setAttributeNS(null,"width","27px"),Pe.setAttributeNS(null,"viewBox","0 0 27 41");var U=g.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"stroke","none"),U.setAttributeNS(null,"stroke-width","1"),U.setAttributeNS(null,"fill","none"),U.setAttributeNS(null,"fill-rule","evenodd");var te=g.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill-rule","nonzero");var oe=g.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),oe.setAttributeNS(null,"fill","#000000");for(var _e=0,ke=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];_e<ke.length;_e+=1){var ze=ke[_e],Ge=g.createNS("http://www.w3.org/2000/svg","ellipse");Ge.setAttributeNS(null,"opacity","0.04"),Ge.setAttributeNS(null,"cx","10.5"),Ge.setAttributeNS(null,"cy","5.80029008"),Ge.setAttributeNS(null,"rx",ze.rx),Ge.setAttributeNS(null,"ry",ze.ry),oe.appendChild(Ge)}var qe=g.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill",this._color);var Je=g.createNS("http://www.w3.org/2000/svg","path");Je.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qe.appendChild(Je);var $e=g.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"opacity","0.25"),$e.setAttributeNS(null,"fill","#000000");var st=g.createNS("http://www.w3.org/2000/svg","path");st.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$e.appendChild(st);var yt=g.createNS("http://www.w3.org/2000/svg","g");yt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),yt.setAttributeNS(null,"fill","#FFFFFF");var _t=g.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"transform","translate(8.0, 8.0)");var It=g.createNS("http://www.w3.org/2000/svg","circle");It.setAttributeNS(null,"fill","#000000"),It.setAttributeNS(null,"opacity","0.25"),It.setAttributeNS(null,"cx","5.5"),It.setAttributeNS(null,"cy","5.5"),It.setAttributeNS(null,"r","5.4999962");var zt=g.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#FFFFFF"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962"),_t.appendChild(It),_t.appendChild(zt),te.appendChild(oe),te.appendChild(qe),te.appendChild($e),te.appendChild(yt),te.appendChild(_t),Pe.appendChild(te),this._element.appendChild(Pe),this._offset=a.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Rt){Rt.preventDefault()}),this._element.addEventListener("mousedown",function(Rt){Rt.preventDefault()}),this._element.addEventListener("focus",function(){var Rt=xe._map.getContainer();Rt.scrollTop=0,Rt.scrollLeft=0}),Js(this._element,this._anchor,"marker"),this._popup=null}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=a.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var Q=13.5,xe=Math.sqrt(Math.pow(Q,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[xe,-1*(24.6+xe)],"bottom-right":[-xe,-1*(24.6+xe)],left:[Q,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(H){var Q=H.code,xe=H.charCode||H.keyCode;Q!=="Space"&&Q!=="Enter"&&xe!==32&&xe!==13||this.togglePopup()},G.prototype._onMapClick=function(H){var Q=H.originalEvent.target,xe=this._element;this._popup&&(Q===xe||xe.contains(Q))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},G.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Q="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?Q="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(Q="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var xe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?xe="rotateX(0deg)":this._pitchAlignment==="map"&&(xe="rotateX("+this._map.getPitch()+"deg)"),H&&H.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,Ir[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+xe+" "+Q)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(H){return this._offset=a.Point.convert(H),this._update(),this},G.prototype._onMove=function(H){this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&H!=="auto"?H:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(a.Evented),pa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},$s=0,da=!1,ps=function(N){function G(H){N.call(this),this.options=a.extend({},pa,H),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){return this._map=H,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Q=this._setupUI,Ma!==void 0?Q(Ma):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(xe){Ma=xe.state!=="denied",Q(Ma)}):(Ma=!!a.window.navigator.geolocation,Q(Ma)),this._container;var Q},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$s=0,da=!1},G.prototype._isOutOfMapMaxBounds=function(H){var Q=this._map.getMaxBounds(),xe=H.coords;return Q&&(xe.longitude<Q.getWest()||xe.longitude>Q.getEast()||xe.latitude<Q.getSouth()||xe.latitude>Q.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(H),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",H)),this._finish()}},G.prototype._updateCamera=function(H){var Q=new a.LngLat(H.coords.longitude,H.coords.latitude),xe=H.coords.accuracy,Pe=this._map.getBearing(),U=a.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(Q.toBounds(xe),U,{geolocateSource:!0})},G.prototype._updateMarker=function(H){if(H){var Q=new a.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(Q).addTo(this._map),this._userLocationDotMarker.setLngLat(Q).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,Q=this._map.unproject([0,H]),xe=this._map.unproject([1,H]),Pe=Q.distanceTo(xe),U=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=U+"px",this._circleElement.style.height=U+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(H.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(H.code===3&&da)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",H)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(H){var Q=this;if(this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this._geolocateButton=g.create("button","mapboxgl-ctrl-geolocate",this._container),g.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",H===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var xe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=xe,this._geolocateButton.setAttribute("aria-label",xe)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new hs(this._dotElement),this._circleElement=g.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(U){var te=U.originalEvent&&U.originalEvent.type==="resize";U.geolocateSource||Q._watchState!=="ACTIVE_LOCK"||te||(Q._watchState="BACKGROUND",Q._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Q._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Q.fire(new a.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$s--,da=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++$s>1?(H={maximumAge:6e5,timeout:0},da=!0):(H=this.options.positionOptions,da=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(a.Evented),ds={maxWidth:100,unit:"metric"},Nr=function(N){this.options=a.extend({},ds,N),a.bindAll(["_onMove","setUnit"],this)};function Qi(N,G,H){var Q=H&&H.maxWidth||100,xe=N._container.clientHeight/2,Pe=N.unproject([0,xe]),U=N.unproject([Q,xe]),te=Pe.distanceTo(U);if(H&&H.unit==="imperial"){var oe=3.2808*te;oe>5280?Ao(G,Q,oe/5280,N._getUIString("ScaleControl.Miles")):Ao(G,Q,oe,N._getUIString("ScaleControl.Feet"))}else H&&H.unit==="nautical"?Ao(G,Q,te/1852,N._getUIString("ScaleControl.NauticalMiles")):te>=1e3?Ao(G,Q,te/1e3,N._getUIString("ScaleControl.Kilometers")):Ao(G,Q,te,N._getUIString("ScaleControl.Meters"))}function Ao(N,G,H,Q){var xe,Pe,U,te=(xe=H,(Pe=Math.pow(10,(""+Math.floor(xe)).length-1))*((U=xe/Pe)>=10?10:U>=5?5:U>=3?3:U>=2?2:U>=1?1:function(_e){var ke=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*ke)/ke}(U))),oe=te/H;N.style.width=G*oe+"px",N.innerHTML=te+"&nbsp;"+Q}Nr.prototype.getDefaultPosition=function(){return"bottom-left"},Nr.prototype._onMove=function(){Qi(this._map,this._container,this.options)},Nr.prototype.onAdd=function(N){return this._map=N,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Nr.prototype.onRemove=function(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Nr.prototype.setUnit=function(N){this.options.unit=N,Qi(this._map,this._container,this.options)};var Oa=function(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof a.window.HTMLElement?this._container=N.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Oa.prototype.onAdd=function(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Oa.prototype.onRemove=function(){g.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Oa.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Oa.prototype._setupUI=function(){var N=this._fullscreenButton=g.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","mapboxgl-ctrl-icon",N).setAttribute("aria-hidden",!0),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Oa.prototype._updateTitle=function(){var N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N},Oa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Oa.prototype._isFullscreen=function(){return this._fullscreen},Oa.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Oa.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Fs={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Qs=function(N){function G(H){N.call(this),this.options=a.extend(Object.create(Fs),H),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return N&&(G.__proto__=N),G.prototype=Object.create(N&&N.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=a.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(H){return this.setDOMContent(a.window.document.createTextNode(H))},G.prototype.setHTML=function(H){var Q,xe=a.window.document.createDocumentFragment(),Pe=a.window.document.createElement("body");for(Pe.innerHTML=H;Q=Pe.firstChild;)xe.appendChild(Q);return this.setDOMContent(xe)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},G.prototype.setDOMContent=function(H){return this._createContent(),this._content.appendChild(H),this._update(),this},G.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},G.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},G.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},G.prototype._createContent=function(){this._content&&g.remove(this._content),this._content=g.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(H){this._update(H.point)},G.prototype._onMouseMove=function(H){this._update(H.point)},G.prototype._onDrag=function(H){this._update(H.point)},G.prototype._update=function(H){var Q=this,xe=this._lngLat||this._trackPointer;if(this._map&&xe&&this._content&&(this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ge){return Q._container.classList.add(Ge)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var Pe=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),U=this.options.anchor,te=Ns(this.options.offset);if(!U){var oe,_e=this._container.offsetWidth,ke=this._container.offsetHeight;oe=Pe.y+te.bottom.y<ke?["top"]:Pe.y>this._map.transform.height-ke?["bottom"]:[],Pe.x<_e/2?oe.push("left"):Pe.x>this._map.transform.width-_e/2&&oe.push("right"),U=oe.length===0?"bottom":oe.join("-")}var ze=Pe.add(te[U]).round();g.setTransform(this._container,Ir[U]+" translate("+ze.x+"px,"+ze.y+"px)"),Js(this._container,U,"popup")}},G.prototype._onClose=function(){this.remove()},G}(a.Evented);function Ns(N){if(N){if(typeof N=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new a.Point(0,0),top:new a.Point(0,N),"top-left":new a.Point(G,G),"top-right":new a.Point(-G,G),bottom:new a.Point(0,-N),"bottom-left":new a.Point(G,-G),"bottom-right":new a.Point(-G,-G),left:new a.Point(N,0),right:new a.Point(-N,0)}}if(N instanceof a.Point||Array.isArray(N)){var H=a.Point.convert(N);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:a.Point.convert(N.center||[0,0]),top:a.Point.convert(N.top||[0,0]),"top-left":a.Point.convert(N["top-left"]||[0,0]),"top-right":a.Point.convert(N["top-right"]||[0,0]),bottom:a.Point.convert(N.bottom||[0,0]),"bottom-left":a.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(N["bottom-right"]||[0,0]),left:a.Point.convert(N.left||[0,0]),right:a.Point.convert(N.right||[0,0])}}return Ns(new a.Point(0,0))}var qo={version:a.version,supported:_,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Fl,NavigationControl:qi,GeolocateControl:ps,AttributionControl:Ia,ScaleControl:Nr,FullscreenControl:Oa,Popup:Qs,Marker:hs,Style:or,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){xt().acquire(Qe)},clearPrewarmedResources:function(){var N=vt;N&&(N.isPreloaded()&&N.numActive()===1?(N.release(Qe),vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(N){a.config.ACCESS_TOKEN=N},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(N){a.config.API_URL=N},get workerCount(){return rt.workerCount},set workerCount(N){rt.workerCount=N},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(N){a.config.MAX_PARALLEL_IMAGE_REQUESTS=N},clearStorage:function(N){a.clearTileCache(N)},workerUrl:""};return qo}),T}()},27084:function(F){F.exports=Math.log2||function(L){return Math.log(L)*Math.LOG2E}},16825:function(F,L,e){F.exports=function(b,a){a||(a=b,b=window);var _=0,g=0,h=0,o={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(f){var x=!1;return"altKey"in f&&(x=x||f.altKey!==o.alt,o.alt=!!f.altKey),"shiftKey"in f&&(x=x||f.shiftKey!==o.shift,o.shift=!!f.shiftKey),"ctrlKey"in f&&(x=x||f.ctrlKey!==o.control,o.control=!!f.ctrlKey),"metaKey"in f&&(x=x||f.metaKey!==o.meta,o.meta=!!f.metaKey),x}function n(f,x){var y=T.x(x),v=T.y(x);"buttons"in x&&(f=0|x.buttons),(f!==_||y!==g||v!==h||i(x))&&(_=0|f,g=y||0,h=v||0,a&&a(_,g,h,o))}function r(f){n(0,f)}function s(){(_||g||h||o.shift||o.alt||o.meta||o.control)&&(g=h=0,_=0,o.shift=o.alt=o.control=o.meta=!1,a&&a(0,0,0,o))}function l(f){i(f)&&a&&a(_,g,h,o)}function u(f){T.buttons(f)===0?n(0,f):n(_,f)}function d(f){n(_|T.buttons(f),f)}function c(f){n(_&~T.buttons(f),f)}function w(){t||(t=!0,b.addEventListener("mousemove",u),b.addEventListener("mousedown",d),b.addEventListener("mouseup",c),b.addEventListener("mouseleave",r),b.addEventListener("mouseenter",r),b.addEventListener("mouseout",r),b.addEventListener("mouseover",r),b.addEventListener("blur",s),b.addEventListener("keyup",l),b.addEventListener("keydown",l),b.addEventListener("keypress",l),b!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}w();var m={element:b};return Object.defineProperties(m,{enabled:{get:function(){return t},set:function(f){f?w():t&&(t=!1,b.removeEventListener("mousemove",u),b.removeEventListener("mousedown",d),b.removeEventListener("mouseup",c),b.removeEventListener("mouseleave",r),b.removeEventListener("mouseenter",r),b.removeEventListener("mouseout",r),b.removeEventListener("mouseover",r),b.removeEventListener("blur",s),b.removeEventListener("keyup",l),b.removeEventListener("keydown",l),b.removeEventListener("keypress",l),b!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return _},enumerable:!0},x:{get:function(){return g},enumerable:!0},y:{get:function(){return h},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),m};var T=e(74311)},48956:function(F){var L={left:0,top:0};F.exports=function(e,T,b){T=T||e.currentTarget||e.srcElement,Array.isArray(b)||(b=[0,0]);var a,_=e.clientX||0,g=e.clientY||0,h=(a=T)===window||a===document||a===document.body?L:a.getBoundingClientRect();return b[0]=_-h.left,b[1]=g-h.top,b}},74311:function(F,L){function e(T){return T.target||T.srcElement||window}L.buttons=function(T){if(typeof T=="object"){if("buttons"in T)return T.buttons;if("which"in T){if((b=T.which)===2)return 4;if(b===3)return 2;if(b>0)return 1<<b-1}else if("button"in T){var b;if((b=T.button)===1)return 4;if(b===2)return 2;if(b>=0)return 1<<b}}return 0},L.element=e,L.x=function(T){if(typeof T=="object"){if("offsetX"in T)return T.offsetX;var b=e(T).getBoundingClientRect();return T.clientX-b.left}return 0},L.y=function(T){if(typeof T=="object"){if("offsetY"in T)return T.offsetY;var b=e(T).getBoundingClientRect();return T.clientY-b.top}return 0}},1195:function(F,L,e){var T=e(75686);F.exports=function(b,a,_){typeof b=="function"&&(_=!!a,a=b,b=window);var g=T("ex",b),h=function(o){_&&o.preventDefault();var t=o.deltaX||0,i=o.deltaY||0,n=o.deltaZ||0,r=1;switch(o.deltaMode){case 1:r=g;break;case 2:r=window.innerHeight}if(i*=r,n*=r,(t*=r)||i||n)return a(t,i,n,o)};return b.addEventListener("wheel",h),h}},7417:function(F,L,e){var T;(function(b,a,_){a[b]=a[b]||function(){var g,h,o,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),g=function(y,v,M,p){return Object.defineProperty(y,v,{value:M,writable:!0,configurable:p!==!1})}}catch{g=function(v,M,p){return v[M]=p,v}}function n(y,v){o.add(y,v),h||(h=i(o.drain))}function r(y){var v,M=typeof y;return y==null||M!="object"&&M!="function"||(v=y.then),typeof v=="function"&&v}function s(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,v,M){var p,S;try{v===!1?M.reject(y.msg):(p=v===!0?y.msg:v.call(void 0,y.msg))===M.promise?M.reject(TypeError("Promise-chain cycle")):(S=r(p))?S.call(p,M.resolve,M.reject):M.resolve(p)}catch(A){M.reject(A)}}function u(y){var v,M=this;if(!M.triggered){M.triggered=!0,M.def&&(M=M.def);try{(v=r(y))?n(function(){var p=new w(M);try{v.call(y,function(){u.apply(p,arguments)},function(){d.apply(p,arguments)})}catch(S){d.call(p,S)}}):(M.msg=y,M.state=1,M.chain.length>0&&n(s,M))}catch(p){d.call(new w(M),p)}}}function d(y){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=y,v.state=2,v.chain.length>0&&n(s,v))}function c(y,v,M,p){for(var S=0;S<v.length;S++)(function(A){y.resolve(v[A]).then(function(k){M(A,k)},p)})(S)}function w(y){this.def=y,this.triggered=!1}function m(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var v=new m(this);this.then=function(M,p){var S={success:typeof M!="function"||M,failure:typeof p=="function"&&p};return S.promise=new this.constructor(function(A,k){if(typeof A!="function"||typeof k!="function")throw TypeError("Not a function");S.resolve=A,S.reject=k}),v.chain.push(S),v.state!==0&&n(s,v),S.promise},this.catch=function(M){return this.then(void 0,M)};try{y.call(void 0,function(M){u.call(v,M)},function(M){d.call(v,M)})}catch(M){d.call(v,M)}}o=function(){var y,v,M;function p(S,A){this.fn=S,this.self=A,this.next=void 0}return{add:function(S,A){M=new p(S,A),v?v.next=M:y=M,v=M,M=void 0},drain:function(){var S=y;for(y=v=h=void 0;S;)S.fn.call(S.self),S=S.next}}}();var x=g({},"constructor",f,!1);return f.prototype=x,g(x,"__NPO__",0,!1),g(f,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(v,M){if(typeof v!="function"||typeof M!="function")throw TypeError("Not a function");v(y)})}),g(f,"reject",function(y){return new this(function(v,M){if(typeof v!="function"||typeof M!="function")throw TypeError("Not a function");M(y)})}),g(f,"all",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):y.length===0?v.resolve([]):new v(function(M,p){if(typeof M!="function"||typeof p!="function")throw TypeError("Not a function");var S=y.length,A=Array(S),k=0;c(v,y,function(C,P){A[C]=P,++k===S&&M(A)},p)})}),g(f,"race",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):new v(function(M,p){if(typeof M!="function"||typeof p!="function")throw TypeError("Not a function");c(v,y,function(S,A){M(A)},p)})}),f}(),F.exports?F.exports=a[b]:(T=(function(){return a[b]}).call(L,e,L,F))===void 0||(F.exports=T)})("Promise",e.g!==void 0?e.g:this)},18625:function(F){var L=Math.PI,e=g(120);function T(h,o,t,i){return["C",h,o,t,i,t,i]}function b(h,o,t,i,n,r){return["C",h/3+.6666666666666666*t,o/3+.6666666666666666*i,n/3+.6666666666666666*t,r/3+.6666666666666666*i,n,r]}function a(h,o,t,i,n,r,s,l,u,d){if(d)S=d[0],A=d[1],M=d[2],p=d[3];else{var c=_(h,o,-n);h=c.x,o=c.y;var w=(h-(l=(c=_(l,u,-n)).x))/2,m=(o-(u=c.y))/2,f=w*w/(t*t)+m*m/(i*i);f>1&&(t*=f=Math.sqrt(f),i*=f);var x=t*t,y=i*i,v=(r==s?-1:1)*Math.sqrt(Math.abs((x*y-x*m*m-y*w*w)/(x*m*m+y*w*w)));v==1/0&&(v=1);var M=v*t*m/i+(h+l)/2,p=v*-i*w/t+(o+u)/2,S=Math.asin(((o-p)/i).toFixed(9)),A=Math.asin(((u-p)/i).toFixed(9));(S=h<M?L-S:S)<0&&(S=2*L+S),(A=l<M?L-A:A)<0&&(A=2*L+A),s&&S>A&&(S-=2*L),!s&&A>S&&(A-=2*L)}if(Math.abs(A-S)>e){var k=A,C=l,P=u;A=S+e*(s&&A>S?1:-1);var R=a(l=M+t*Math.cos(A),u=p+i*Math.sin(A),t,i,n,0,s,C,P,[A,k,M,p])}var O=Math.tan((A-S)/4),X=4/3*t*O,D=4/3*i*O,V=[2*h-(h+X*Math.sin(S)),2*o-(o-D*Math.cos(S)),l+X*Math.sin(A),u-D*Math.cos(A),l,u];if(d)return V;R&&(V=V.concat(R));for(var j=0;j<V.length;){var B=_(V[j],V[j+1],n);V[j++]=B.x,V[j++]=B.y}return V}function _(h,o,t){return{x:h*Math.cos(t)-o*Math.sin(t),y:h*Math.sin(t)+o*Math.cos(t)}}function g(h){return h*(L/180)}F.exports=function(h){for(var o,t=[],i=0,n=0,r=0,s=0,l=null,u=null,d=0,c=0,w=0,m=h.length;w<m;w++){var f=h[w],x=f[0];switch(x){case"M":r=f[1],s=f[2];break;case"A":(f=a(d,c,f[1],f[2],g(f[3]),f[4],f[5],f[6],f[7])).unshift("C"),f.length>7&&(t.push(f.splice(0,7)),f.unshift("C"));break;case"S":var y=d,v=c;o!="C"&&o!="S"||(y+=y-i,v+=v-n),f=["C",y,v,f[1],f[2],f[3],f[4]];break;case"T":o=="Q"||o=="T"?(l=2*d-l,u=2*c-u):(l=d,u=c),f=b(d,c,l,u,f[1],f[2]);break;case"Q":l=f[1],u=f[2],f=b(d,c,f[1],f[2],f[3],f[4]);break;case"L":f=T(d,c,f[1],f[2]);break;case"H":f=T(d,c,f[1],c);break;case"V":f=T(d,c,d,f[1]);break;case"Z":f=T(d,c,r,s)}o=x,d=f[f.length-2],c=f[f.length-1],f.length>4?(i=f[f.length-4],n=f[f.length-3]):(i=d,n=c),t.push(f)}return t}},56131:function(F){var L=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;F.exports=function(){try{if(!Object.assign)return!1;var b=new String("abc");if(b[5]="de",Object.getOwnPropertyNames(b)[0]==="5")return!1;for(var a={},_=0;_<10;_++)a["_"+String.fromCharCode(_)]=_;if(Object.getOwnPropertyNames(a).map(function(h){return a[h]}).join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(h){g[h]=h}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(b,a){for(var _,g,h=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(b),o=1;o<arguments.length;o++){for(var t in _=Object(arguments[o]))e.call(_,t)&&(h[t]=_[t]);if(L){g=L(_);for(var i=0;i<g.length;i++)T.call(_,g[i])&&(h[g[i]]=_[g[i]])}}return h}},65848:function(F){var L=function(e){return e!=e};F.exports=function(e,T){return e===0&&T===0?1/e==1/T:e===T||!(!L(e)||!L(T))}},64003:function(F,L,e){var T=e(17045),b=e(68222),a=e(65848),_=e(27015),g=e(55572),h=b(_(),Object);T(h,{getPolyfill:_,implementation:a,shim:g}),F.exports=h},27015:function(F,L,e){var T=e(65848);F.exports=function(){return typeof Object.is=="function"?Object.is:T}},55572:function(F,L,e){var T=e(27015),b=e(17045);F.exports=function(){var a=T();return b(Object,{is:a},{is:function(){return Object.is!==a}}),a}},99019:function(F,L,e){var T;if(!Object.keys){var b=Object.prototype.hasOwnProperty,a=Object.prototype.toString,_=e(64178),g=Object.prototype.propertyIsEnumerable,h=!g.call({toString:null},"toString"),o=g.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(s){var l=s.constructor;return l&&l.prototype===s},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window>"u")return!1;for(var s in window)try{if(!n["$"+s]&&b.call(window,s)&&window[s]!==null&&typeof window[s]=="object")try{i(window[s])}catch{return!0}}catch{return!0}return!1}();T=function(s){var l=s!==null&&typeof s=="object",u=a.call(s)==="[object Function]",d=_(s),c=l&&a.call(s)==="[object String]",w=[];if(!l&&!u&&!d)throw new TypeError("Object.keys called on a non-object");var m=o&&u;if(c&&s.length>0&&!b.call(s,0))for(var f=0;f<s.length;++f)w.push(String(f));if(d&&s.length>0)for(var x=0;x<s.length;++x)w.push(String(x));else for(var y in s)m&&y==="prototype"||!b.call(s,y)||w.push(String(y));if(h)for(var v=function(p){if(typeof window>"u"||!r)return i(p);try{return i(p)}catch{return!1}}(s),M=0;M<t.length;++M)v&&t[M]==="constructor"||!b.call(s,t[M])||w.push(t[M]);return w}}F.exports=T},8709:function(F,L,e){var T=Array.prototype.slice,b=e(64178),a=Object.keys,_=a?function(h){return a(h)}:e(99019),g=Object.keys;_.shim=function(){if(Object.keys){var h=function(){var o=Object.keys(arguments);return o&&o.length===arguments.length}(1,2);h||(Object.keys=function(o){return b(o)?g(T.call(o)):g(o)})}else Object.keys=_;return Object.keys||_},F.exports=_},64178:function(F){var L=Object.prototype.toString;F.exports=function(e){var T=L.call(e),b=T==="[object Arguments]";return b||(b=T!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&L.call(e.callee)==="[object Function]"),b}},88641:function(F){function L(b,a){if(typeof b!="string")return[b];var _=[b];typeof a=="string"||Array.isArray(a)?a={brackets:a}:a||(a={});var g=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"],h=a.escape||"___",o=!!a.flat;g.forEach(function(i){var n=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),r=[];function s(l,u,d){var c=_.push(l.slice(i[0].length,-i[1].length))-1;return r.push(c),h+c+h}_.forEach(function(l,u){for(var d,c=0;l!=d;)if(d=l,l=l.replace(n,s),c++>1e4)throw Error("References have circular dependency. Please, check them.");_[u]=l}),r=r.reverse(),_=_.map(function(l){return r.forEach(function(u){l=l.replace(new RegExp("(\\"+h+u+"\\"+h+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+h+"([0-9]+)\\"+h);return o?_:function i(n,r,s){for(var l,u=[],d=0;l=t.exec(n);){if(d++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,l.index)),u.push(i(r[l[1]],r)),n=n.slice(l.index+l[0].length)}return u.push(n),u}(_[0],_)}function e(b,a){if(a&&a.flat){var _,g=a&&a.escape||"___",h=b[0];if(!h)return"";for(var o=new RegExp("\\"+g+"([0-9]+)\\"+g),t=0;h!=_;){if(t++>1e4)throw Error("Circular references in "+b);_=h,h=h.replace(o,i)}return h}return b.reduce(function n(r,s){return Array.isArray(s)&&(s=s.reduce(n,"")),r+s},"");function i(n,r){if(b[r]==null)throw Error("Reference "+r+"is undefined");return b[r]}}function T(b,a){return Array.isArray(b)?e(b,a):L(b,a)}T.parse=L,T.stringify=e,F.exports=T},18863:function(F,L,e){var T=e(71299);F.exports=function(b){var a;return arguments.length>1&&(b=arguments),typeof b=="string"?b=b.split(/\s/).map(parseFloat):typeof b=="number"&&(b=[b]),b.length&&typeof b[0]=="number"?a=b.length===1?{width:b[0],height:b[0],x:0,y:0}:b.length===2?{width:b[0],height:b[1],x:0,y:0}:{x:b[0],y:b[1],width:b[2]-b[0]||0,height:b[3]-b[1]||0}:b&&(a={x:(b=T(b,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:b.top||0},b.width==null?b.right?a.width=b.right-a.x:a.width=0:a.width=b.width,b.height==null?b.bottom?a.height=b.bottom-a.y:a.height=0:a.height=b.height),a}},95616:function(F){F.exports=function(b){var a=[];return b.replace(e,function(_,g,h){var o=g.toLowerCase();for(h=function(t){var i=t.match(T);return i?i.map(Number):[]}(h),o=="m"&&h.length>2&&(a.push([g].concat(h.splice(0,2))),o="l",g=g=="m"?"l":"L");;){if(h.length==L[o])return h.unshift(g),a.push(h);if(h.length<L[o])throw new Error("malformed path data");a.push([g].concat(h.splice(0,L[o])))}}),a};var L={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(F){F.exports=function(L,e){e||(e=[0,""]),L=String(L);var T=parseFloat(L,10);return e[0]=T,e[1]=L.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function(F,L,e){var T=e(90386);(function(){var b,a,_,g,h,o;typeof performance<"u"&&performance!==null&&performance.now?F.exports=function(){return performance.now()}:T!=null&&T.hrtime?(F.exports=function(){return(b()-h)/1e6},a=T.hrtime,g=(b=function(){var t;return 1e9*(t=a())[0]+t[1]})(),o=1e9*T.uptime(),h=g-o):Date.now?(F.exports=function(){return Date.now()-_},_=Date.now()):(F.exports=function(){return new Date().getTime()-_},_=new Date().getTime())}).call(this)},71299:function(F){F.exports=function(T,b,a){var _,g,h={};if(typeof b=="string"&&(b=e(b)),Array.isArray(b)){var o={};for(g=0;g<b.length;g++)o[b[g]]=!0;b=o}for(_ in b)b[_]=e(b[_]);var t={};for(_ in b){var i=b[_];if(Array.isArray(i))for(g=0;g<i.length;g++){var n=i[g];if(a&&(t[n]=!0),n in T){if(h[_]=T[n],a)for(var r=g;r<i.length;r++)t[i[r]]=!0;break}}else _ in T&&(b[_]&&(h[_]=T[_]),a&&(t[_]=!0))}if(a)for(_ in T)t[_]||(h[_]=T[_]);return h};var L={};function e(T){return L[T]?L[T]:(typeof T=="string"&&(T=L[T]=T.split(/\s*,\s*|\s+/)),T)}},38258:function(F){F.exports=function(L,e,T,b){var a=L[0],_=L[1],g=!1;T===void 0&&(T=0),b===void 0&&(b=e.length);for(var h=b-T,o=0,t=h-1;o<h;t=o++){var i=e[o+T][0],n=e[o+T][1],r=e[t+T][0],s=e[t+T][1];n>_!=s>_&&a<(r-i)*(_-n)/(s-n)+i&&(g=!g)}return g}},52142:function(F,L,e){var T,b=e(69444),a=e(29023),_=e(87263),g=e(11328),h=e(55968),o=e(10670),t=!1,i=a();function n(r,s,l){var u=T.segments(r),d=T.segments(s),c=l(T.combine(u,d));return T.polygon(c)}T={buildLog:function(r){return r===!0?t=b():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return i.epsilon(r)},segments:function(r){var s=_(!0,i,t);return r.regions.forEach(s.addRegion),{segments:s.calculate(r.inverted),inverted:r.inverted}},combine:function(r,s){return{combined:_(!1,i,t).calculate(r.segments,r.inverted,s.segments,s.inverted),inverted1:r.inverted,inverted2:s.inverted}},selectUnion:function(r){return{segments:h.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:h.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:h.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:h.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:h.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:g(r.segments,i,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return o.toPolygon(T,r)},polygonToGeoJSON:function(r){return o.fromPolygon(T,i,r)},union:function(r,s){return n(r,s,T.selectUnion)},intersect:function(r,s){return n(r,s,T.selectIntersect)},difference:function(r,s){return n(r,s,T.selectDifference)},differenceRev:function(r,s){return n(r,s,T.selectDifferenceRev)},xor:function(r,s){return n(r,s,T.selectXor)}},typeof window=="object"&&(window.PolyBool=T),F.exports=T},69444:function(F){F.exports=function(){var L,e=0,T=!1;function b(a,_){return L.list.push({type:a,data:_?JSON.parse(JSON.stringify(_)):void 0}),L}return L={list:[],segmentId:function(){return e++},checkIntersection:function(a,_){return b("check",{seg1:a,seg2:_})},segmentChop:function(a,_){return b("div_seg",{seg:a,pt:_}),b("chop",{seg:a,pt:_})},statusRemove:function(a){return b("pop_seg",{seg:a})},segmentUpdate:function(a){return b("seg_update",{seg:a})},segmentNew:function(a,_){return b("new_seg",{seg:a,primary:_})},segmentRemove:function(a){return b("rem_seg",{seg:a})},tempStatus:function(a,_,g){return b("temp_status",{seg:a,above:_,below:g})},rewind:function(a){return b("rewind",{seg:a})},status:function(a,_,g){return b("status",{seg:a,above:_,below:g})},vert:function(a){return a===T?L:(T=a,b("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),b("log",{txt:a})},reset:function(){return b("reset")},selected:function(a){return b("selected",{segs:a})},chainStart:function(a){return b("chain_start",{seg:a})},chainRemoveHead:function(a,_){return b("chain_rem_head",{index:a,pt:_})},chainRemoveTail:function(a,_){return b("chain_rem_tail",{index:a,pt:_})},chainNew:function(a,_){return b("chain_new",{pt1:a,pt2:_})},chainMatch:function(a){return b("chain_match",{index:a})},chainClose:function(a){return b("chain_close",{index:a})},chainAddHead:function(a,_){return b("chain_add_head",{index:a,pt:_})},chainAddTail:function(a,_){return b("chain_add_tail",{index:a,pt:_})},chainConnect:function(a,_){return b("chain_con",{index1:a,index2:_})},chainReverse:function(a){return b("chain_rev",{index:a})},chainJoin:function(a,_){return b("chain_join",{index1:a,index2:_})},done:function(){return b("done")}}}},29023:function(F){F.exports=function(L){typeof L!="number"&&(L=1e-10);var e={epsilon:function(T){return typeof T=="number"&&(L=T),L},pointAboveOrOnLine:function(T,b,a){var _=b[0],g=b[1],h=a[0],o=a[1],t=T[0];return(h-_)*(T[1]-g)-(o-g)*(t-_)>=-L},pointBetween:function(T,b,a){var _=T[1]-b[1],g=a[0]-b[0],h=T[0]-b[0],o=a[1]-b[1],t=h*g+_*o;return!(t<L||t-(g*g+o*o)>-L)},pointsSameX:function(T,b){return Math.abs(T[0]-b[0])<L},pointsSameY:function(T,b){return Math.abs(T[1]-b[1])<L},pointsSame:function(T,b){return e.pointsSameX(T,b)&&e.pointsSameY(T,b)},pointsCompare:function(T,b){return e.pointsSameX(T,b)?e.pointsSameY(T,b)?0:T[1]<b[1]?-1:1:T[0]<b[0]?-1:1},pointsCollinear:function(T,b,a){var _=T[0]-b[0],g=T[1]-b[1],h=b[0]-a[0],o=b[1]-a[1];return Math.abs(_*o-h*g)<L},linesIntersect:function(T,b,a,_){var g=b[0]-T[0],h=b[1]-T[1],o=_[0]-a[0],t=_[1]-a[1],i=g*t-h*o;if(Math.abs(i)<L)return!1;var n=T[0]-a[0],r=T[1]-a[1],s=(o*r-t*n)/i,l=(g*r-h*n)/i,u={alongA:0,alongB:0,pt:[T[0]+s*g,T[1]+s*h]};return u.alongA=s<=-L?-2:s<L?-1:s-1<=-L?0:s-1<L?1:2,u.alongB=l<=-L?-2:l<L?-1:l-1<=-L?0:l-1<L?1:2,u},pointInsideRegion:function(T,b){for(var a=T[0],_=T[1],g=b[b.length-1][0],h=b[b.length-1][1],o=!1,t=0;t<b.length;t++){var i=b[t][0],n=b[t][1];n-_>L!=h-_>L&&(g-i)*(_-n)/(h-n)+i-a>L&&(o=!o),g=i,h=n}return o}};return e}},10670:function(F){var L={toPolygon:function(e,T){function b(g){if(g.length<=0)return e.segments({inverted:!1,regions:[]});function h(i){var n=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[n]})}for(var o=h(g[0]),t=1;t<g.length;t++)o=e.selectDifference(e.combine(o,h(g[t])));return o}if(T.type==="Polygon")return e.polygon(b(T.coordinates));if(T.type==="MultiPolygon"){for(var a=e.segments({inverted:!1,regions:[]}),_=0;_<T.coordinates.length;_++)a=e.selectUnion(e.combine(a,b(T.coordinates[_])));return e.polygon(a)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,T,b){function a(l,u){return T.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function _(l){return{region:l,children:[]}}b=e.polygon(e.segments(b));var g=_(null);function h(l,u){for(var d=0;d<l.children.length;d++)if(a(u,(w=l.children[d]).region))return void h(w,u);var c=_(u);for(d=0;d<l.children.length;d++){var w;a((w=l.children[d]).region,u)&&(c.children.push(w),l.children.splice(d,1),d--)}l.children.push(c)}for(var o=0;o<b.regions.length;o++){var t=b.regions[o];t.length<3||h(g,t)}function i(l,u){for(var d=0,c=l[l.length-1][0],w=l[l.length-1][1],m=[],f=0;f<l.length;f++){var x=l[f][0],y=l[f][1];m.push([x,y]),d+=y*c-x*w,c=x,w=y}return d<0!==u&&m.reverse(),m.push([m[0][0],m[0][1]]),m}var n=[];function r(l){var u=[i(l.region,!1)];n.push(u);for(var d=0;d<l.children.length;d++)u.push(s(l.children[d]))}function s(l){for(var u=0;u<l.children.length;u++)r(l.children[u]);return i(l.region,!0)}for(o=0;o<g.children.length;o++)r(g.children[o]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};F.exports=L},87263:function(F,L,e){var T=e(26859);F.exports=function(b,a,_){function g(r,s,l){return{id:_?_.segmentId():-1,start:r,end:s,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var h=T.create();function o(r,s){h.insertBefore(r,function(l){return u=r.isStart,d=r.pt,c=s,w=l.isStart,m=l.pt,f=l.other.pt,((x=a.pointsCompare(d,m))!==0?x:a.pointsSame(c,f)?0:u!==w?u?1:-1:a.pointAboveOrOnLine(c,w?m:f,w?f:m)?1:-1)<0;var u,d,c,w,m,f,x})}function t(r,s){var l=function(u,d){var c=T.node({isStart:!0,pt:u.start,seg:u,primary:d,other:null,status:null});return o(c,u.end),c}(r,s);return function(u,d,c){var w=T.node({isStart:!1,pt:d.end,seg:d,primary:c,other:u,status:null});u.other=w,o(w,u.pt)}(l,r,s),l}function i(r,s){var l=g(s,r.seg.end,r.seg);return function(u,d){_&&_.segmentChop(u.seg,d),u.other.remove(),u.seg.end=d,u.other.pt=d,o(u.other,u.pt)}(r,s),t(l,r.primary)}function n(r,s){var l=T.create();function u(k){return l.findTransition(function(C){var P,R,O,X,D,V;return P=k,R=C.ev,O=P.seg.start,X=P.seg.end,D=R.seg.start,V=R.seg.end,(a.pointsCollinear(O,D,V)?a.pointsCollinear(X,D,V)||a.pointAboveOrOnLine(X,D,V)?1:-1:a.pointAboveOrOnLine(O,D,V)?1:-1)>0})}function d(k,C){var P=k.seg,R=C.seg,O=P.start,X=P.end,D=R.start,V=R.end;_&&_.checkIntersection(P,R);var j=a.linesIntersect(O,X,D,V);if(j===!1){if(!a.pointsCollinear(O,X,D)||a.pointsSame(O,V)||a.pointsSame(X,D))return!1;var B=a.pointsSame(O,D),W=a.pointsSame(X,V);if(B&&W)return C;var q=!B&&a.pointBetween(O,D,V),re=!W&&a.pointBetween(X,D,V);if(B)return re?i(C,X):i(k,V),C;q&&(W||(re?i(C,X):i(k,V)),i(C,O))}else j.alongA===0&&(j.alongB===-1?i(k,D):j.alongB===0?i(k,j.pt):j.alongB===1&&i(k,V)),j.alongB===0&&(j.alongA===-1?i(C,O):j.alongA===0?i(C,j.pt):j.alongA===1&&i(C,X));return!1}for(var c=[];!h.isEmpty();){var w=h.getHead();if(_&&_.vert(w.pt[0]),w.isStart){let k=function(){if(f){var C=d(w,f);if(C)return C}return!!x&&d(w,x)};var A=k;_&&_.segmentNew(w.seg,w.primary);var m=u(w),f=m.before?m.before.ev:null,x=m.after?m.after.ev:null;_&&_.tempStatus(w.seg,!!f&&f.seg,!!x&&x.seg);var y,v,M=k();if(M&&(b?(v=w.seg.myFill.below===null||w.seg.myFill.above!==w.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=w.seg.myFill,_&&_.segmentUpdate(M.seg),w.other.remove(),w.remove()),h.getHead()!==w){_&&_.rewind(w.seg);continue}b?(v=w.seg.myFill.below===null||w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=x?x.seg.myFill.above:r,w.seg.myFill.above=v?!w.seg.myFill.below:w.seg.myFill.below):w.seg.otherFill===null&&(y=x?w.primary===x.primary?x.seg.otherFill.above:x.seg.myFill.above:w.primary?s:r,w.seg.otherFill={above:y,below:y}),_&&_.status(w.seg,!!f&&f.seg,!!x&&x.seg),w.other.status=m.insert(T.node({ev:w}))}else{var p=w.status;if(p===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(p.prev)&&l.exists(p.next)&&d(p.prev.ev,p.next.ev),_&&_.statusRemove(p.ev.seg),p.remove(),!w.primary){var S=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=S}c.push(w.seg)}h.getHead().remove()}return _&&_.done(),c}return b?{addRegion:function(r){for(var s,l,u,d=r[r.length-1],c=0;c<r.length;c++){s=d,d=r[c];var w=a.pointsCompare(s,d);w!==0&&t((l=w<0?s:d,u=w<0?d:s,{id:_?_.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,s,l,u){return r.forEach(function(d){t(g(d.start,d.end,d),!0)}),l.forEach(function(d){t(g(d.start,d.end,d),!1)}),n(s,u)}}}},26859:function(F){F.exports={create:function(){var L={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==L.root},isEmpty:function(){return L.root.next===null},getHead:function(){return L.root.next},insertBefore:function(e,T){for(var b=L.root,a=L.root.next;a!==null;){if(T(a))return e.prev=a.prev,e.next=a,a.prev.next=e,void(a.prev=e);b=a,a=a.next}b.next=e,e.prev=b,e.next=null},findTransition:function(e){for(var T=L.root,b=L.root.next;b!==null&&!e(b);)T=b,b=b.next;return{before:T===L.root?null:T,after:b,insert:function(a){return a.prev=T,a.next=b,T.next=a,b!==null&&(b.prev=a),a}}}};return L},node:function(L){return L.prev=null,L.next=null,L.remove=function(){L.prev.next=L.next,L.next&&(L.next.prev=L.prev),L.prev=null,L.next=null},L}}},11328:function(F){F.exports=function(L,e,T){var b=[],a=[];return L.forEach(function(_){var g=_.start,h=_.end;if(e.pointsSame(g,h))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(_);for(var o={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=o,n=0;n<b.length;n++){var r=(c=b[n])[0],s=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(r,g)){if(p(n,!0,!0))break}else if(e.pointsSame(r,h)){if(p(n,!0,!1))break}else if(e.pointsSame(s,g)){if(p(n,!1,!0))break}else if(e.pointsSame(s,h)&&p(n,!1,!1))break}if(i===o)return b.push([g,h]),void(T&&T.chainNew(g,h));if(i===t){T&&T.chainMatch(o.index);var l=o.index,u=o.matches_pt1?h:g,d=o.matches_head,c=b[l],w=d?c[0]:c[c.length-1],m=d?c[1]:c[c.length-2],f=d?c[c.length-1]:c[0],x=d?c[c.length-2]:c[1];return e.pointsCollinear(m,w,u)&&(d?(T&&T.chainRemoveHead(o.index,u),c.shift()):(T&&T.chainRemoveTail(o.index,u),c.pop()),w=m),e.pointsSame(f,u)?(b.splice(l,1),e.pointsCollinear(x,f,w)&&(d?(T&&T.chainRemoveTail(o.index,w),c.pop()):(T&&T.chainRemoveHead(o.index,w),c.shift())),T&&T.chainClose(o.index),void a.push(c)):void(d?(T&&T.chainAddHead(o.index,u),c.unshift(u)):(T&&T.chainAddTail(o.index,u),c.push(u)))}var y=o.index,v=t.index;T&&T.chainConnect(y,v);var M=b[y].length<b[v].length;o.matches_head?t.matches_head?M?(S(y),A(y,v)):(S(v),A(v,y)):A(v,y):t.matches_head?A(y,v):M?(S(y),A(v,y)):(S(v),A(y,v))}function p(k,C,P){return i.index=k,i.matches_head=C,i.matches_pt1=P,i===o?(i=t,!1):(i=null,!0)}function S(k){T&&T.chainReverse(k),b[k].reverse()}function A(k,C){var P=b[k],R=b[C],O=P[P.length-1],X=P[P.length-2],D=R[0],V=R[1];e.pointsCollinear(X,O,D)&&(T&&T.chainRemoveTail(k,O),P.pop(),O=X),e.pointsCollinear(O,D,V)&&(T&&T.chainRemoveHead(C,D),R.shift()),T&&T.chainJoin(k,C),b[k]=P.concat(R),b.splice(C,1)}}),a}},55968:function(F){function L(T,b,a){var _=[];return T.forEach(function(g){var h=(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);b[h]!==0&&_.push({id:a?a.segmentId():-1,start:g.start,end:g.end,myFill:{above:b[h]===1,below:b[h]===2},otherFill:null})}),a&&a.selected(_),_}var e={union:function(T,b){return L(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(T,b){return L(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(T,b){return L(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(T,b){return L(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(T,b){return L(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}};F.exports=e},14847:function(F,L,e){var T=e(21630).Transform,b=e(90715);function a(){T.call(this,{readableObjectMode:!0})}function _(g,h,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=g,h&&(this.code=h),o&&(this.statusCode=o)}a.prototype=Object.create(T.prototype),a.prototype.constructor=a,b(a.prototype),L.OF=function(g,h,o){for(var t=h,i=0;i<o.length;)if(g[t++]!==o[i++])return!1;return!0},L.eG=function(g,h){var o=[],t=0;if(h&&h==="hex")for(;t<g.length;)o.push(parseInt(g.slice(t,t+2),16)),t+=2;else for(;t<g.length;t++)o.push(255&g.charCodeAt(t));return o},L.mP=function(g,h){return g[h]|g[h+1]<<8},L.n8=function(g,h){return g[h+1]|g[h]<<8},L.nm=function(g,h){return g[h]|g[h+1]<<8|g[h+2]<<16|16777216*g[h+3]},L.Ag=function(g,h){return g[h+3]|g[h+2]<<8|g[h+1]<<16|16777216*g[h]},_.prototype=Object.create(Error.prototype),_.prototype.constructor=_},71371:function(F){function L(b,a){var _=new Error(b);return _.code=a,_}function e(b){try{return decodeURIComponent(escape(b))}catch{return b}}function T(b,a,_){this.input=b.subarray(a,_),this.start=a;var g=String.fromCharCode.apply(null,this.input.subarray(0,4));if(g!=="II*\0"&&g!=="MM\0*")throw L("invalid TIFF signature","EBADDATA");this.big_endian=g[0]==="M"}T.prototype.each=function(b){this.aborted=!1;var a=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:a}];this.ifds_to_read.length>0&&!this.aborted;){var _=this.ifds_to_read.shift();_.offset&&this.scan_ifd(_.id,_.offset,b)}},T.prototype.read_uint16=function(b){var a=this.input;if(b+2>a.length)throw L("unexpected EOF","EBADDATA");return this.big_endian?256*a[b]+a[b+1]:a[b]+256*a[b+1]},T.prototype.read_uint32=function(b){var a=this.input;if(b+4>a.length)throw L("unexpected EOF","EBADDATA");return this.big_endian?16777216*a[b]+65536*a[b+1]+256*a[b+2]+a[b+3]:a[b]+256*a[b+1]+65536*a[b+2]+16777216*a[b+3]},T.prototype.is_subifd_link=function(b,a){return b===0&&a===34665||b===0&&a===34853||b===34665&&a===40965},T.prototype.exif_format_length=function(b){switch(b){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(b,a){var _;switch(b){case 1:case 2:return this.input[a];case 6:return(_=this.input[a])|33554430*(128&_);case 3:return this.read_uint16(a);case 8:return(_=this.read_uint16(a))|131070*(32768&_);case 4:return this.read_uint32(a);case 9:return 0|this.read_uint32(a);default:return null}},T.prototype.scan_ifd=function(b,a,_){var g=this.read_uint16(a);a+=2;for(var h=0;h<g;h++){var o=this.read_uint16(a),t=this.read_uint16(a+2),i=this.read_uint32(a+4),n=this.exif_format_length(t),r=i*n,s=r<=4?a+8:this.read_uint32(a+8),l=!1;if(s+r>this.input.length)throw L("unexpected EOF","EBADDATA");for(var u=[],d=s,c=0;c<i;c++,d+=n){var w=this.exif_format_read(t,d);if(w===null){u=null;break}u.push(w)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(b,o)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:o,offset:u[0]}),l=!0),_({is_big_endian:this.big_endian,ifd:b,tag:o,format:t,count:i,entry_offset:a+this.start,data_length:r,data_offset:s+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);a+=12}b===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(a)})},F.exports.ExifParser=T,F.exports.get_orientation=function(b){var a=0;try{return new T(b,0,b.length).each(function(_){if(_.ifd===0&&_.tag===274&&Array.isArray(_.value))return a=_.value[0],!1}),a}catch{return-1}}},76767:function(F,L,e){var T=e(14847).n8,b=e(14847).Ag;function a(i,n){if(i.length<4+n)return null;var r=b(i,n);return i.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(n+4,n+8)),data:i.slice(n+8,n+r),end:n+r}}function _(i,n){for(var r=0;;){var s=a(i,r);if(!s)break;switch(s.boxtype){case"ispe":n.sizes.push({width:b(s.data,4),height:b(s.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&s.data[0]})}r=s.end}}function g(i,n,r){for(var s=0,l=0;l<r;l++)s=256*s+(i[n+l]||0);return s}function h(i,n){for(var r=i[4]>>4&15,s=15&i[4],l=i[5]>>4&15,u=T(i,6),d=8,c=0;c<u;c++){var w=T(i,d),m=T(i,d+=2),f=g(i,d+=2,l),x=T(i,d+=l);if(d+=2,m===0&&x===1){var y=g(i,d,r),v=g(i,d+r,s);n.item_loc[w]={length:v,offset:y+f}}d+=x*(r+s)}}function o(i,n){for(var r=T(i,4),s=6,l=0;l<r;l++){var u=a(i,s);if(!u)break;if(u.boxtype==="infe"){for(var d=T(u.data,4),c="",w=8;w<u.data.length&&u.data[w];w++)c+=String.fromCharCode(u.data[w]);n.item_inf[c]=d}s=u.end}}function t(i,n){for(var r=0;;){var s=a(i,r);if(!s)break;s.boxtype==="ipco"&&_(s.data,n),r=s.end}}F.exports.unbox=a,F.exports.readSizeFromMeta=function(i){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(w,m){for(var f=4;;){var x=a(w,f);if(!x)break;x.boxtype==="iprp"&&t(x.data,m),x.boxtype==="iloc"&&h(x.data,m),x.boxtype==="iinf"&&o(x.data,m),f=x.end}}(i,n),n.sizes.length){var r,s,l,u=(s=(r=n.sizes).reduce(function(w,m){return w.width>m.width||w.width===m.width&&w.height>m.height?w:m}),l=r.reduce(function(w,m){return w.height>m.height||w.height===m.height&&w.width>m.width?w:m}),s.width>l.height||s.width===l.height&&s.height>l.width?s:l),d=1;n.transforms.forEach(function(w){var m={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},f={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(w.type==="imir"&&(d=w.value===0?f[d]:m[d=m[d=f[d]]]),w.type==="irot")for(var x=0;x<w.value;x++)d=m[d]});var c=null;return n.item_inf.Exif&&(c=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?d:null,variants:n.sizes,exif_location:c}}},F.exports.getMimeType=function(i){var n=String.fromCharCode.apply(null,i.slice(0,4)),r={};r[n]=!0;for(var s=8;s<i.length;s+=4)r[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).Ag,_=e(76767),g=e(71371),h=T("ftyp");F.exports=function(o){if(b(o,4,h)){var t=_.unbox(o,0);if(t){var i=_.getMimeType(t.data);if(i){for(var n,r=t.end;;){var s=_.unbox(o,r);if(!s)break;if(r=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){n=s.data;break}}if(n){var l=_.readSizeFromMeta(n);if(l){var u={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=o.length){var d=a(o,l.exif_location.offset),c=o.slice(l.exif_location.offset+d+4,l.exif_location.offset+l.exif_location.length),w=g.get_orientation(c);w>0&&(u.orientation=w)}return u}}}}}}},2504:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).mP,_=T("BM");F.exports=function(g){if(!(g.length<26)&&b(g,0,_))return{width:a(g,18),height:a(g,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).mP,_=T("GIF87a"),g=T("GIF89a");F.exports=function(h){if(!(h.length<10)&&(b(h,0,_)||b(h,0,g)))return{width:a(h,6),height:a(h,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(F,L,e){var T=e(14847).mP;F.exports=function(b){var a=T(b,0),_=T(b,2),g=T(b,4);if(a===0&&_===1&&g){for(var h=[],o={width:0,height:0},t=0;t<g;t++){var i=b[6+16*t]||256,n=b[6+16*t+1]||256,r={width:i,height:n};h.push(r),(i>o.width||n>o.height)&&(o=r)}return{width:o.width,height:o.height,variants:h,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(F,L,e){var T=e(14847).n8,b=e(14847).eG,a=e(14847).OF,_=e(71371),g=b("Exif\0\0");F.exports=function(h){if(!(h.length<2)&&h[0]===255&&h[1]===216&&h[2]===255)for(var o=2;;){for(;;){if(h.length-o<2)return;if(h[o++]===255)break}for(var t,i,n=h[o++];n===255;)n=h[o++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||h.length-o<2)return;t=T(h,o)-2,o+=2}if(n===217||n===218)return;if(n===225&&t>=10&&a(h,o,g)&&(i=_.get_orientation(h.slice(o+6,o+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(h.length-o<t)return;var r={width:T(h,o+3),height:T(h,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(r.orientation=i),r}o+=t}}},6303:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).Ag,_=T(`PNG\r

`),g=T("IHDR");F.exports=function(h){if(!(h.length<24)&&b(h,0,_)&&b(h,12,g))return{width:a(h,16),height:a(h,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).Ag,_=T("8BPS\0");F.exports=function(g){if(!(g.length<22)&&b(g,0,_))return{width:a(g,18),height:a(g,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(F){function L(o){return typeof o=="number"&&isFinite(o)&&o>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,b=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,_=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,g=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(o){return g.test(o)?o.match(g)[0]:"px"}F.exports=function(o){if(function(f){var x,y=0,v=f.length;for(f[0]===239&&f[1]===187&&f[2]===191&&(y=3);y<v&&((x=f[y])===32||x===9||x===13||x===10);)y++;return y!==v&&f[y]===60}(o)){for(var t="",i=0;i<o.length;i++)t+=String.fromCharCode(o[i]);var n=(t.match(e)||[""])[0];if(T.test(n)){var r=function(f){var x=f.match(b),y=f.match(a),v=f.match(_);return{width:x&&(x[1]||x[2]),height:y&&(y[1]||y[2]),viewbox:v&&(v[1]||v[2])}}(n),s=parseFloat(r.width),l=parseFloat(r.height);if(r.width&&r.height)return!L(s)||!L(l)?void 0:{width:s,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.height)};var u=(r.viewbox||"").split(" "),d={width:u[2],height:u[3]},c=parseFloat(d.width),w=parseFloat(d.height);if(L(c)&&L(w)&&h(d.width)===h(d.height)){var m=c/w;return r.width?L(s)?{width:s,height:s/m,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.width)}:void 0:r.height?L(l)?{width:l*m,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.height),hUnits:h(r.height)}:void 0:{width:c,height:w,type:"svg",mime:"image/svg+xml",wUnits:h(d.width),hUnits:h(d.height)}}}}}},66278:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).mP,_=e(14847).n8,g=e(14847).nm,h=e(14847).Ag,o=T("II*\0"),t=T("MM\0*");function i(s,l,u){return u?_(s,l):a(s,l)}function n(s,l,u){return u?h(s,l):g(s,l)}function r(s,l,u){var d=i(s,l+2,u);return n(s,l+4,u)!==1||d!==3&&d!==4?null:d===3?i(s,l+8,u):n(s,l+8,u)}F.exports=function(s){if(!(s.length<8)&&(b(s,0,o)||b(s,0,t))){var l=s[0]===77,u=n(s,4,l)-8;if(!(u<0)){var d=u+8;if(!(s.length-d<2)){var c=12*i(s,d+0,l);if(!(c<=0||(d+=2,s.length-d<c))){var w,m,f,x;for(w=0;w<c;w+=12)(x=i(s,d+w,l))===256?m=r(s,d+w,l):x===257&&(f=r(s,d+w,l));return m&&f?{width:m,height:f,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(F,L,e){var T=e(14847).eG,b=e(14847).OF,a=e(14847).mP,_=e(14847).nm,g=e(71371),h=T("RIFF"),o=T("WEBP");function t(r,s){if(r[s+3]===157&&r[s+4]===1&&r[s+5]===42)return{width:16383&a(r,s+6),height:16383&a(r,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(r,s){if(r[s]===47){var l=_(r,s+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,s){return{width:1+(r[s+6]<<16|r[s+5]<<8|r[s+4]),height:1+(r[s+9]<<s|r[s+8]<<8|r[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}F.exports=function(r){if(!(r.length<16)&&(b(r,0,h)||b(r,8,o))){var s=12,l=null,u=0,d=_(r,4)+8;if(!(d>r.length)){for(;s+8<d;)if(r[s]!==0){var c=String.fromCharCode.apply(null,r.slice(s,s+4)),w=_(r,s+4);c==="VP8 "&&w>=10?l=l||t(r,s+8):c==="VP8L"&&w>=9?l=l||i(r,s+8):c==="VP8X"&&w>=10?l=l||n(r,s+8):c==="EXIF"&&(u=g.get_orientation(r.slice(s+8,s+8+w)),s=1/0),s+=8+w}else s++;if(l)return u>0&&(l.orientation=u),l}}}},91497:function(F,L,e){F.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function(F,L,e){var T=e(91497);F.exports=function(b){return function(a){for(var _=Object.keys(T),g=0;g<_.length;g++){var h=T[_[g]](a);if(h)return h}return null}(b)},F.exports.parsers=T},90386:function(F){var L,e,T=F.exports={};function b(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function _(l){if(L===setTimeout)return setTimeout(l,0);if((L===b||!L)&&setTimeout)return L=setTimeout,setTimeout(l,0);try{return L(l,0)}catch{try{return L.call(null,l,0)}catch{return L.call(this,l,0)}}}(function(){try{L=typeof setTimeout=="function"?setTimeout:b}catch{L=b}try{e=typeof clearTimeout=="function"?clearTimeout:a}catch{e=a}})();var g,h=[],o=!1,t=-1;function i(){o&&g&&(o=!1,g.length?h=g.concat(h):t=-1,h.length&&n())}function n(){if(!o){var l=_(i);o=!0;for(var u=h.length;u;){for(g=h,h=[];++t<u;)g&&g[t].run();t=-1,u=h.length}g=null,o=!1,function(d){if(e===clearTimeout)return clearTimeout(d);if((e===a||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(d);try{return e(d)}catch{try{return e.call(null,d)}catch{return e.call(this,d)}}}(l)}}function r(l,u){this.fun=l,this.array=u}function s(){}T.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)u[d-1]=arguments[d];h.push(new r(l,u)),h.length!==1||o||_(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=s,T.addListener=s,T.once=s,T.off=s,T.removeListener=s,T.removeAllListeners=s,T.emit=s,T.prependListener=s,T.prependOnceListener=s,T.listeners=function(l){return[]},T.binding=function(l){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(l){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},5877:function(F,L,e){for(var T=e(9748),b=typeof window>"u"?e.g:window,a=["moz","webkit"],_="AnimationFrame",g=b["request"+_],h=b["cancel"+_]||b["cancelRequest"+_],o=0;!g&&o<a.length;o++)g=b[a[o]+"Request"+_],h=b[a[o]+"Cancel"+_]||b[a[o]+"CancelRequest"+_];if(!g||!h){var t=0,i=0,n=[];g=function(r){if(n.length===0){var s=T(),l=Math.max(0,16.666666666666668-(s-t));t=l+s,setTimeout(function(){var u=n.slice(0);n.length=0;for(var d=0;d<u.length;d++)if(!u[d].cancelled)try{u[d].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(l))}return n.push({handle:++i,callback:r,cancelled:!1}),i},h=function(r){for(var s=0;s<n.length;s++)n[s].handle===r&&(n[s].cancelled=!0)}}F.exports=function(r){return g.call(b,r)},F.exports.cancel=function(){h.apply(b,arguments)},F.exports.polyfill=function(r){r||(r=b),r.requestAnimationFrame=g,r.cancelAnimationFrame=h}},3593:function(F,L,e){var T=e(21527),b=e(25075),a=e(93447),_=e(71299),g=e(56131),h=e(30120),o=e(57060),t=o.float32,i=o.fract32;F.exports=function(r,s){if(typeof r=="function"?(s||(s={}),s.regl=r):s=r,s.length&&(s.positions=s),!(r=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,d,c,w,m,f=r._gl,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return c=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=r.buffer({usage:"static",type:"float",data:n}),S(s),l=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(k,C){return[C.viewport.x,C.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:c,offset:function(k,C){return 4*C.offset},divisor:1},position:{buffer:u,offset:function(k,C){return 8*C.offset},divisor:1},positionFract:{buffer:d,offset:function(k,C){return 8*C.offset},divisor:1},error:{buffer:w,offset:function(k,C){return 16*C.offset},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),g(v,{update:S,draw:M,destroy:A,regl:r,gl:f,canvas:f.canvas,groups:y}),v;function v(k){k?S(k):k===null&&A(),M()}function M(k){if(typeof k=="number")return p(k);k&&!Array.isArray(k)&&(k=[k]),r._refresh(),y.forEach(function(C,P){C&&(k&&(k[P]?C.draw=!0:C.draw=!1),C.draw?p(P):C.draw=!0)})}function p(k){typeof k=="number"&&(k=y[k]),k!=null&&k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1&&(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],l(k),k.after&&k.after(k))}function S(k){if(k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var C=0,P=0;if(v.groups=y=k.map(function(B,W){var q=y[W];return B&&(typeof B=="function"?B={after:B}:typeof B[0]=="number"&&(B={positions:B}),B=_(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(y[W]=q={id:W,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=g({},x,B)),a(q,B,[{lineWidth:function(re){return .5*+re},capSize:function(re){return .5*+re},opacity:parseFloat,errors:function(re){return re=h(re),P+=re.length,re},positions:function(re,ee){return re=h(re,"float64"),ee.count=Math.floor(re.length/2),ee.bounds=T(re,2),ee.offset=C,C+=ee.count,re}},{color:function(re,ee){var K=ee.count;if(re||(re="transparent"),!Array.isArray(re)||typeof re[0]=="number"){var Y=re;re=Array(K);for(var $=0;$<K;$++)re[$]=Y}if(re.length<K)throw Error("Not enough colors");for(var ne=new Uint8Array(4*K),ae=0;ae<K;ae++){var se=b(re[ae],"uint8");ne.set(se,4*ae)}return ne},range:function(re,ee,K){var Y=ee.bounds;return re||(re=Y),ee.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],ee.translate=[-re[0],-re[1]],ee.scaleFract=i(ee.scale),ee.translateFract=i(ee.translate),re},viewport:function(re){var ee;return Array.isArray(re)?ee={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?(ee={x:re.x||re.left||0,y:re.y||re.top||0},re.right?ee.width=re.right-ee.x:ee.width=re.w||re.width||0,re.bottom?ee.height=re.bottom-ee.y:ee.height=re.h||re.height||0):ee={x:0,y:0,width:f.drawingBufferWidth,height:f.drawingBufferHeight},ee}}])),q}),C||P){var R=y.reduce(function(B,W,q){return B+(W?W.count:0)},0),O=new Float64Array(2*R),X=new Uint8Array(4*R),D=new Float32Array(4*R);y.forEach(function(B,W){if(B){var q=B.positions,re=B.count,ee=B.offset,K=B.color,Y=B.errors;re&&(X.set(K,4*ee),D.set(Y,4*ee),O.set(q,2*ee))}});var V=t(O);u(V);var j=i(O,V);d(j),c(X),w(D)}}}function A(){u.destroy(),d.destroy(),c.destroy(),w.destroy(),m.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(F,L,e){var T=e(25075),b=e(21527),a=e(56131),_=e(56068),g=e(71299),h=e(30120),o=e(11474),t=e(54),i=e(57060),n=i.float32,r=i.fract32,s=e(83522),l=e(18863),u=e(6851);function d(c,w){if(!(this instanceof d))return new d(c,w);if(typeof c=="function"?(w||(w={}),w.regl=c):w=c,w.length&&(w.positions=w),!(c=w.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=d.shaders.has(c)?d.shaders.get(c):d.shaders.set(c,d.createShaders(c)).get(c),this.update(w)}F.exports=d,d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new s,d.createShaders=function(c){var w,m=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),f={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(y,v){return v.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(y,v){return[v.viewport.x,v.viewport.y,y.viewportWidth,y.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(y,v){return!v.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},x=c(a({vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},f));try{w=c(a({cull:{enable:!0,face:"back"},vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},f))}catch{w=x}return{fill:c({primitive:"triangle",elements:function(y,v){return v.triangles},offset:0,vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(y,v){return[v.viewport.x,v.viewport.y,y.viewportWidth,y.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:f.blend,depth:{enable:!1},scissor:f.scissor,stencil:f.stencil,viewport:f.viewport}),rect:x,miter:w}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var c,w=[],m=arguments.length;m--;)w[m]=arguments[m];w.length&&(c=this).update.apply(c,w),this.draw()},d.prototype.draw=function(){for(var c=this,w=[],m=arguments.length;m--;)w[m]=arguments[m];return(w.length?w:this.passes).forEach(function(f,x){var y;if(f&&Array.isArray(f))return(y=c).draw.apply(y,f);typeof f=="number"&&(f=c.passes[f]),f&&f.count>1&&f.opacity&&(c.regl._refresh(),f.fill&&f.triangles&&f.triangles.length>2&&c.shaders.fill(f),f.thickness&&(f.scale[0]*f.viewport.width>d.precisionThreshold||f.scale[1]*f.viewport.height>d.precisionThreshold||f.join==="rect"||!f.join&&(f.thickness<=2||f.count>=d.maxPoints)?c.shaders.rect(f):c.shaders.miter(f)))}),this},d.prototype.update=function(c){var w=this;if(c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var m=this.regl,f=this.gl;if(c.forEach(function(p,S){var A=w.passes[S];if(p!==void 0)if(p!==null){if(typeof p[0]=="number"&&(p={positions:p}),p=g(p,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),A||(w.passes[S]=A={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:m.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:m.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},p=a({},d.defaults,p)),p.thickness!=null&&(A.thickness=parseFloat(p.thickness)),p.opacity!=null&&(A.opacity=parseFloat(p.opacity)),p.miterLimit!=null&&(A.miterLimit=parseFloat(p.miterLimit)),p.overlay!=null&&(A.overlay=!!p.overlay,S<d.maxLines&&(A.depth=2*(d.maxLines-1-S%d.maxLines)/d.maxLines-1)),p.join!=null&&(A.join=p.join),p.hole!=null&&(A.hole=p.hole),p.fill!=null&&(A.fill=p.fill?T(p.fill,"uint8"):null),p.viewport!=null&&(A.viewport=l(p.viewport)),A.viewport||(A.viewport=l([f.drawingBufferWidth,f.drawingBufferHeight])),p.close!=null&&(A.close=p.close),p.positions===null&&(p.positions=[]),p.positions){var k,C;if(p.positions.x&&p.positions.y){var P=p.positions.x,R=p.positions.y;C=A.count=Math.max(P.length,R.length),k=new Float64Array(2*C);for(var O=0;O<C;O++)k[2*O]=P[O],k[2*O+1]=R[O]}else k=h(p.positions,"float64"),C=A.count=Math.floor(k.length/2);var X=A.bounds=b(k,2);if(A.fill){for(var D=[],V={},j=0,B=0,W=0,q=A.count;B<q;B++){var re=k[2*B],ee=k[2*B+1];isNaN(re)||isNaN(ee)||re==null||ee==null?(re=k[2*j],ee=k[2*j+1],V[B]=j):j=B,D[W++]=re,D[W++]=ee}if(p.splitNull){A.count-1 in V||(V[A.count]=A.count-1);var K=Object.keys(V).map(Number).sort(function(ht,ct){return ht-ct}),Y=[],$=0,ne=A.hole!=null?A.hole[0]:null;if(ne!=null){var ae=u(K,function(ht){return ht>=ne});(K=K.slice(0,ae)).push(ne)}for(var se=function(ht){var ct=D.slice(2*$,2*K[ht]).concat(ne?D.slice(2*ne):[]),Tt=(A.hole||[]).map(function(kt){return kt-ne+(K[ht]-$)}),Lt=o(ct,Tt);Lt=Lt.map(function(kt){return kt+$+(kt+$<K[ht]?0:ne-K[ht])}),Y.push.apply(Y,Lt),$=K[ht]+1},ce=0;ce<K.length;ce++)se(ce);for(var me=0,ye=Y.length;me<ye;me++)V[Y[me]]!=null&&(Y[me]=V[Y[me]]);A.triangles=Y}else{for(var Te=o(D,A.hole||[]),Ce=0,pe=Te.length;Ce<pe;Ce++)V[Te[Ce]]!=null&&(Te[Ce]=V[Te[Ce]]);A.triangles=Te}}var fe=new Float64Array(k);t(fe,2,X);var Oe=new Float64Array(2*C+6);A.close?k[0]===k[2*C-2]&&k[1]===k[2*C-1]?(Oe[0]=fe[2*C-4],Oe[1]=fe[2*C-3]):(Oe[0]=fe[2*C-2],Oe[1]=fe[2*C-1]):(Oe[0]=fe[0],Oe[1]=fe[1]),Oe.set(fe,2),A.close?k[0]===k[2*C-2]&&k[1]===k[2*C-1]?(Oe[2*C+2]=fe[2],Oe[2*C+3]=fe[3],A.count-=1):(Oe[2*C+2]=fe[0],Oe[2*C+3]=fe[1],Oe[2*C+4]=fe[2],Oe[2*C+5]=fe[3]):(Oe[2*C+2]=fe[2*C-2],Oe[2*C+3]=fe[2*C-1],Oe[2*C+4]=fe[2*C-2],Oe[2*C+5]=fe[2*C-1]);var Se=n(Oe);A.positionBuffer(Se);var Me=r(Oe,Se);A.positionFractBuffer(Me)}if(p.range?A.range=p.range:A.range||(A.range=A.bounds),(p.range||p.positions)&&A.count){var ue=A.bounds,le=ue[2]-ue[0],ie=ue[3]-ue[1],ge=A.range[2]-A.range[0],Ae=A.range[3]-A.range[1];A.scale=[le/ge,ie/Ae],A.translate=[-A.range[0]/ge+ue[0]/ge||0,-A.range[1]/Ae+ue[1]/Ae||0],A.scaleFract=r(A.scale),A.translateFract=r(A.translate)}if(p.dashes){var we,Ne=0;if(!p.dashes||p.dashes.length<2)Ne=1,we=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ne=0;for(var He=0;He<p.dashes.length;++He)Ne+=p.dashes[He];we=new Uint8Array(Ne*d.dashMult);for(var de=0,Le=255,Ee=0;Ee<2;Ee++)for(var Re=0;Re<p.dashes.length;++Re){for(var je=0,Fe=p.dashes[Re]*d.dashMult*.5;je<Fe;++je)we[de++]=Le;Le^=255}}A.dashLength=Ne,A.dashTexture({channels:1,data:we,width:we.length,height:1,mag:"linear",min:"linear"},0,0)}if(p.color){var Xe=A.count,Ze=p.color;Ze||(Ze="transparent");var at=new Uint8Array(4*Xe+4);if(Array.isArray(Ze)&&typeof Ze[0]!="number"){for(var lt=0;lt<Xe;lt++){var ot=T(Ze[lt],"uint8");at.set(ot,4*lt)}at.set(T(Ze[0],"uint8"),4*Xe)}else for(var bt=T(Ze,"uint8"),wt=0;wt<Xe+1;wt++)at.set(bt,4*wt);A.colorBuffer({usage:"dynamic",type:"uint8",data:at})}}else w.passes[S]=null}),c.length<this.passes.length){for(var x=c.length;x<this.passes.length;x++){var y=this.passes[x];y&&(y.colorBuffer.destroy(),y.positionBuffer.destroy(),y.dashTexture.destroy())}this.passes.length=c.length}for(var v=[],M=0;M<this.passes.length;M++)this.passes[M]!==null&&v.push(this.passes[M]);return this.passes=v,this}},d.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(F,L,e){function T(f,x){return function(y){if(Array.isArray(y))return y}(f)||function(y,v){var M=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(M!=null){var p,S,A,k,C=[],P=!0,R=!1;try{if(A=(M=M.call(y)).next,v===0){if(Object(M)!==M)return;P=!1}else for(;!(P=(p=A.call(M)).done)&&(C.push(p.value),C.length!==v);P=!0);}catch(O){R=!0,S=O}finally{try{if(!P&&M.return!=null&&(k=M.return(),Object(k)!==k))return}finally{if(R)throw S}}return C}}(f,x)||b(f,x)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b(f,x){if(f){if(typeof f=="string")return a(f,x);var y=Object.prototype.toString.call(f).slice(8,-1);return y==="Object"&&f.constructor&&(y=f.constructor.name),y==="Map"||y==="Set"?Array.from(f):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?a(f,x):void 0}}function a(f,x){(x==null||x>f.length)&&(x=f.length);for(var y=0,v=new Array(x);y<x;y++)v[y]=f[y];return v}var _=e(25075),g=e(21527),h=e(6475),o=e(88294),t=e(56131),i=e(56068),n=e(71299),r=e(93447),s=e(30120),l=e(62683),u=e(57060),d=e(18863),c=w;function w(f,x){var y=this;if(!(this instanceof w))return new w(f,x);typeof f=="function"?(x||(x={}),x.regl=f):(x=f,f=null),x&&x.length&&(x.positions=x);var v,M=(f=x.regl)._gl,p=[];this.tooManyColors=l,v=f.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:f,gl:M,groups:[],markerCache:[null],markerTextures:[null],palette:p,paletteIds:{},paletteTexture:v,maxColors:255,maxSize:100,canvas:M.canvas}),this.update(x);var S={uniforms:{constPointSize:!!x.constPointSize,opacity:f.prop("opacity"),paletteSize:function(C,P){return[y.tooManyColors?0:255,v.height]},pixelRatio:f.context("pixelRatio"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translate:f.prop("translate"),translateFract:f.prop("translateFract"),markerTexture:f.prop("markerTexture"),paletteTexture:v},attributes:{x:function(C,P){return P.xAttr||{buffer:P.positionBuffer,stride:8,offset:0}},y:function(C,P){return P.yAttr||{buffer:P.positionBuffer,stride:8,offset:4}},xFract:function(C,P){return P.xAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:0}},yFract:function(C,P){return P.yAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:4}},size:function(C,P){return P.size.length?{buffer:P.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*P.size/y.maxSize)]}},borderSize:function(C,P){return P.borderSize.length?{buffer:P.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*P.borderSize/y.maxSize)]}},colorId:function(C,P){return P.color.length?{buffer:P.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?p.slice(4*P.color,4*P.color+4):[P.color]}},borderColorId:function(C,P){return P.borderColor.length?{buffer:P.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?p.slice(4*P.borderColor,4*P.borderColor+4):[P.borderColor]}},isActive:function(C,P){return P.activation===!0?{constant:[1]}:P.activation?P.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:f.prop("elements"),count:f.prop("count"),offset:f.prop("offset"),primitive:"points"},A=t({},S);A.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),A.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=f(A);var k=t({},S);k.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),k.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(k.frag=k.frag.replace("smoothstep","smoothStep"),A.frag=A.frag.replace("smoothstep","smoothStep")),this.drawCircle=f(k)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var f=this,x=arguments.length,y=new Array(x),v=0;v<x;v++)y[v]=arguments[v];var M=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var p=0;p<y.length;p++)this.drawItem(p,y[p]);else M.forEach(function(S,A){f.drawItem(A)});return this},w.prototype.drawItem=function(f,x){var y,v=this.groups,M=v[f];if(typeof x=="number"&&(f=x,M=v[x],x=null),M&&M.count&&M.opacity){M.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,M,x));for(var p=[],S=1;S<M.activation.length;S++)M.activation[S]&&(M.activation[S]===!0||M.activation[S].data.length)&&p.push.apply(p,function(A){if(Array.isArray(A))return a(A)}(y=this.getMarkerDrawOptions(S,M,x))||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(y)||b(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());p.length&&this.drawMarker(p)}},w.prototype.getMarkerDrawOptions=function(f,x,y){var v=x.range,M=x.tree,p=x.viewport,S=x.activation,A=x.selectionBuffer,k=x.count;if(this.regl,!M)return y?[t({},x,{markerTexture:this.markerTextures[f],activation:S[f],count:y.length,elements:y,offset:0})]:[t({},x,{markerTexture:this.markerTextures[f],activation:S[f],offset:0})];var C=[],P=M.range(v,{lod:!0,px:[(v[2]-v[0])/p.width,(v[3]-v[1])/p.height]});if(y){for(var R=S[f].data,O=new Uint8Array(k),X=0;X<y.length;X++){var D=y[X];O[D]=R?R[D]:1}A.subdata(O)}for(var V=P.length;V--;){var j=T(P[V],2),B=j[0],W=j[1];C.push(t({},x,{markerTexture:this.markerTextures[f],activation:y?A:S[f],offset:B,count:W-B}))}return C},w.prototype.update=function(){for(var f=this,x=arguments.length,y=new Array(x),v=0;v<x;v++)y[v]=arguments[v];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var M=this.groups,p=this.gl,S=this.regl,A=this.maxSize,k=this.maxColors,C=this.palette;this.groups=M=y.map(function(P,R){var O=M[R];if(P===void 0)return O;P===null?P={positions:null}:typeof P=="function"?P={ondraw:P}:typeof P[0]=="number"&&(P={positions:P}),(P=n(P,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(P.positions=[]),P.tooManyColors!=null&&(f.tooManyColors=P.tooManyColors),O||(M[R]=O={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},P=t({},w.defaults,P)),P.positions&&!("marker"in P)&&(P.marker=O.marker,delete O.marker),P.marker&&!("positions"in P)&&(P.positions=O.positions,delete O.positions);var X=0,D=0;if(r(O,P,[{snap:!0,size:function(Ce,pe){return Ce==null&&(Ce=w.defaults.size),X+=Ce&&Ce.length?1:0,Ce},borderSize:function(Ce,pe){return Ce==null&&(Ce=w.defaults.borderSize),X+=Ce&&Ce.length?1:0,Ce},opacity:parseFloat,color:function(Ce,pe){return Ce==null&&(Ce=w.defaults.color),Ce=f.updateColor(Ce),D++,Ce},borderColor:function(Ce,pe){return Ce==null&&(Ce=w.defaults.borderColor),Ce=f.updateColor(Ce),D++,Ce},bounds:function(Ce,pe,fe){return"range"in fe||(fe.range=null),Ce},positions:function(Ce,pe,fe){var Oe=pe.snap,Se=pe.positionBuffer,Me=pe.positionFractBuffer,ue=pe.selectionBuffer;if(Ce.x||Ce.y)return Ce.x.length?pe.xAttr={buffer:S.buffer(Ce.x),offset:0,stride:4,count:Ce.x.length}:pe.xAttr={buffer:Ce.x.buffer,offset:4*Ce.x.offset||0,stride:4*(Ce.x.stride||1),count:Ce.x.count},Ce.y.length?pe.yAttr={buffer:S.buffer(Ce.y),offset:0,stride:4,count:Ce.y.length}:pe.yAttr={buffer:Ce.y.buffer,offset:4*Ce.y.offset||0,stride:4*(Ce.y.stride||1),count:Ce.y.count},pe.count=Math.max(pe.xAttr.count,pe.yAttr.count),Ce;Ce=s(Ce,"float64");var le=pe.count=Math.floor(Ce.length/2),ie=pe.bounds=le?g(Ce,2):null;if(fe.range||pe.range||(delete pe.range,fe.range=ie),fe.marker||pe.marker||(delete pe.marker,fe.marker=null),Oe&&(Oe===!0||le>Oe)?pe.tree=o(Ce,{bounds:ie}):Oe&&Oe.length&&(pe.tree=Oe),pe.tree){var ge={primitive:"points",usage:"static",data:pe.tree,type:"uint32"};pe.elements?pe.elements(ge):pe.elements=S.elements(ge)}var Ae=u.float32(Ce);return Se({data:Ae,usage:"dynamic"}),Me({data:u.fract32(Ce,Ae),usage:"dynamic"}),ue({data:new Uint8Array(le),type:"uint8",usage:"stream"}),Ce}},{marker:function(Ce,pe,fe){var Oe=pe.activation;if(Oe.forEach(function(Ae){return Ae&&Ae.destroy&&Ae.destroy()}),Oe.length=0,Ce&&typeof Ce[0]!="number"){for(var Se=[],Me=0,ue=Math.min(Ce.length,pe.count);Me<ue;Me++){var le=f.addMarker(Ce[Me]);Se[le]||(Se[le]=new Uint8Array(pe.count)),Se[le][Me]=1}for(var ie=0;ie<Se.length;ie++)if(Se[ie]){var ge={data:Se[ie],type:"uint8",usage:"static"};Oe[ie]?Oe[ie](ge):Oe[ie]=S.buffer(ge),Oe[ie].data=Se[ie]}}else Oe[f.addMarker(Ce)]=!0;return Ce},range:function(Ce,pe,fe){var Oe=pe.bounds;if(Oe)return Ce||(Ce=Oe),pe.scale=[1/(Ce[2]-Ce[0]),1/(Ce[3]-Ce[1])],pe.translate=[-Ce[0],-Ce[1]],pe.scaleFract=u.fract(pe.scale),pe.translateFract=u.fract(pe.translate),Ce},viewport:function(Ce){return d(Ce||[p.drawingBufferWidth,p.drawingBufferHeight])}}]),X){var V=O,j=V.count,B=V.size,W=V.borderSize,q=V.sizeBuffer,re=new Uint8Array(2*j);if(B.length||W.length)for(var ee=0;ee<j;ee++)re[2*ee]=Math.round(255*(B[ee]==null?B:B[ee])/A),re[2*ee+1]=Math.round(255*(W[ee]==null?W:W[ee])/A);q({data:re,usage:"dynamic"})}if(D){var K,Y=O,$=Y.count,ne=Y.color,ae=Y.borderColor,se=Y.colorBuffer;if(f.tooManyColors){if(ne.length||ae.length){K=new Uint8Array(8*$);for(var ce=0;ce<$;ce++){var me=ne[ce];K[8*ce]=C[4*me],K[8*ce+1]=C[4*me+1],K[8*ce+2]=C[4*me+2],K[8*ce+3]=C[4*me+3];var ye=ae[ce];K[8*ce+4]=C[4*ye],K[8*ce+5]=C[4*ye+1],K[8*ce+6]=C[4*ye+2],K[8*ce+7]=C[4*ye+3]}}}else if(ne.length||ae.length){K=new Uint8Array(4*$+2);for(var Te=0;Te<$;Te++)ne[Te]!=null&&(K[4*Te]=ne[Te]%k,K[4*Te+1]=Math.floor(ne[Te]/k)),ae[Te]!=null&&(K[4*Te+2]=ae[Te]%k,K[4*Te+3]=Math.floor(ae[Te]/k))}se({data:K||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return O})}},w.prototype.addMarker=function(f){var x,y=this.markerTextures,v=this.regl,M=this.markerCache,p=f==null?0:M.indexOf(f);if(p>=0)return p;if(f instanceof Uint8Array||f instanceof Uint8ClampedArray)x=f;else{x=new Uint8Array(f.length);for(var S=0,A=f.length;S<A;S++)x[S]=255*f[S]}var k=Math.floor(Math.sqrt(x.length));return p=y.length,M.push(f),y.push(v.texture({channels:1,data:x,radius:k,mag:"linear",min:"linear"})),p},w.prototype.updateColor=function(f){var x=this.paletteIds,y=this.palette,v=this.maxColors;Array.isArray(f)||(f=[f]);var M=[];if(typeof f[0]=="number"){var p=[];if(Array.isArray(f))for(var S=0;S<f.length;S+=4)p.push(f.slice(S,S+4));else for(var A=0;A<f.length;A+=4)p.push(f.subarray(A,A+4));f=p}for(var k=0;k<f.length;k++){var C=f[k];C=_(C,"uint8");var P=h(C,!1);if(x[P]==null){var R=y.length;x[P]=Math.floor(R/4),y[R]=C[0],y[R+1]=C[1],y[R+2]=C[2],y[R+3]=C[3]}M[k]=x[P]}return!this.tooManyColors&&y.length>4*v&&(this.tooManyColors=!0),this.updatePalette(y),M.length===1?M[0]:M},w.prototype.updatePalette=function(f){if(!this.tooManyColors){var x=this.maxColors,y=this.paletteTexture,v=Math.ceil(.25*f.length/x);if(v>1)for(var M=.25*(f=f.slice()).length%x;M<v*x;M++)f.push(0,0,0,0);y.height<v&&y.resize(x,v),y.subimage({width:Math.min(.25*f.length,x),height:v,data:f},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(f){f.sizeBuffer.destroy(),f.positionBuffer.destroy(),f.positionFractBuffer.destroy(),f.colorBuffer.destroy(),f.activation.forEach(function(x){return x&&x.destroy&&x.destroy()}),f.selectionBuffer.destroy(),f.elements&&f.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(f){return f&&f.destroy&&f.destroy()}),this};var m=e(56131);F.exports=function(f,x){var y=new c(f,x),v=y.render.bind(y);return m(v,{render:v,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),v}},60487:function(F,L,e){var T=e(11870),b=e(71299),a=e(21527),_=e(5877),g=e(57471),h=e(18863),o=e(30120);function t(s,l){if(!(this instanceof t))return new t(s);this.traces=[],this.passes={},this.regl=s,this.scatter=T(s),this.canvas=this.scatter.canvas}function i(s,l,u){return(s.id!=null?s.id:s)<<16|(255&l)<<8|255&u}function n(s,l,u){var d,c,w,m,f=s[l],x=s[u];return f.length>2?(f[0],f[2],d=f[1],c=f[3]):f.length?(d=f[0],c=f[1]):(f.x,d=f.y,f.x,f.width,c=f.y+f.height),x.length>2?(w=x[0],m=x[2],x[1],x[3]):x.length?(w=x[0],m=x[1]):(w=x.x,x.y,m=x.x+x.width,x.y,x.height),[w,d,m,c]}function r(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var l=h(s);return[l.x,l.y,l.x+l.width,l.y+l.height]}F.exports=t,t.prototype.render=function(){for(var s,l=this,u=[],d=arguments.length;d--;)u[d]=arguments[d];return u.length&&(s=this).update.apply(s,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=_(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,_(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var s,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var d=0;d<l.length;d++)this.updateItem(d,l[d]);this.traces=this.traces.filter(Boolean);for(var c=[],w=0,m=0;m<this.traces.length;m++){for(var f=this.traces[m],x=this.traces[m].passes,y=0;y<x.length;y++)c.push(this.passes[x[y]]);f.passOffset=w,w+=f.passes.length}return(s=this.scatter).update.apply(s,c),this}},t.prototype.updateItem=function(s,l){var u=this.regl;if(l===null)return this.traces[s]=null,this;if(!l)return this;var d,c=b(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[s]||(this.traces[s]={id:s,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:h([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(w.color=c.color),c.size!=null&&(w.size=c.size),c.marker!=null&&(w.marker=c.marker),c.borderColor!=null&&(w.borderColor=c.borderColor),c.borderSize!=null&&(w.borderSize=c.borderSize),c.opacity!=null&&(w.opacity=c.opacity),c.viewport&&(w.viewport=h(c.viewport)),c.diagonal!=null&&(w.diagonal=c.diagonal),c.upper!=null&&(w.upper=c.upper),c.lower!=null&&(w.lower=c.lower),c.data){w.buffer(o(c.data)),w.columns=c.data.length,w.count=c.data[0].length,w.bounds=[];for(var m=0;m<w.columns;m++)w.bounds[m]=a(c.data[m],1)}c.range&&(w.range=c.range,d=w.range&&typeof w.range[0]!="number"),c.domain&&(w.domain=c.domain);var f=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===w.columns&&typeof c.padding[c.padding.length-1]=="number"?(w.padding=c.padding.map(r),f=!0):w.padding=r(c.padding));var x=w.columns,y=w.count,v=w.viewport.width,M=w.viewport.height,p=w.viewport.x,S=w.viewport.y,A=v/x,k=M/x;w.passes=[];for(var C=0;C<x;C++)for(var P=0;P<x;P++)if((w.diagonal||P!==C)&&(w.upper||!(C>P))&&(w.lower||!(C<P))){var R=i(w.id,C,P),O=this.passes[R]||(this.passes[R]={});if(c.data&&(c.transpose?O.positions={x:{buffer:w.buffer,offset:P,count:y,stride:x},y:{buffer:w.buffer,offset:C,count:y,stride:x}}:O.positions={x:{buffer:w.buffer,offset:P*y,count:y},y:{buffer:w.buffer,offset:C*y,count:y}},O.bounds=n(w.bounds,C,P)),c.domain||c.viewport||c.data){var X=f?n(w.padding,C,P):w.padding;if(w.domain){var D=n(w.domain,C,P),V=D[0],j=D[1],B=D[2],W=D[3];O.viewport=[p+V*v+X[0],S+j*M+X[1],p+B*v-X[2],S+W*M-X[3]]}else O.viewport=[p+P*A+A*X[0],S+C*k+k*X[1],p+(P+1)*A-A*X[2],S+(C+1)*k-k*X[3]]}c.color&&(O.color=w.color),c.size&&(O.size=w.size),c.marker&&(O.marker=w.marker),c.borderSize&&(O.borderSize=w.borderSize),c.borderColor&&(O.borderColor=w.borderColor),c.opacity&&(O.opacity=w.opacity),c.range&&(O.range=d?n(w.range,C,P):w.range||O.bounds),w.passes.push(R)}return this},t.prototype.draw=function(){for(var s,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var d=[],c=0;c<l.length;c++)if(typeof l[c]=="number"){var w=this.traces[l[c]],m=w.passes,f=w.passOffset;d.push.apply(d,g(f,f+m.length))}else if(l[c].length){var x=l[c],y=this.traces[c],v=y.passes,M=y.passOffset;v=v.map(function(p,S){d[M+S]=x})}(s=this.scatter).draw.apply(s,d)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(F){F.exports=function(){function L(Ye,tt){this.id=ae++,this.type=Ye,this.data=tt}function e(Ye){if(Ye.length===0)return[];var tt=Ye.charAt(0),ut=Ye.charAt(Ye.length-1);if(1<Ye.length&&tt===ut&&(tt==='"'||tt==="'"))return['"'+Ye.substr(1,Ye.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(tt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ye))return e(Ye.substr(0,tt.index)).concat(e(tt[1])).concat(e(Ye.substr(tt.index+tt[0].length)));if((tt=Ye.split(".")).length===1)return['"'+Ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ye=[],ut=0;ut<tt.length;++ut)Ye=Ye.concat(e(tt[ut]));return Ye}function T(Ye){return"["+e(Ye).join("][")+"]"}function b(Ye){return typeof Ye=="string"?Ye.split():Ye}function a(Ye){return typeof Ye=="string"?document.querySelector(Ye):Ye}function _(Ye){var tt,ut,Ke,De,Be=Ye||{};Ye={};var Qe=[],rt=[],vt=typeof window>"u"?1:window.devicePixelRatio,mt=!1,xt={},dt=function(pt){},Et=function(){};if(typeof Be=="string"?tt=document.querySelector(Be):typeof Be=="object"&&(typeof Be.nodeName=="string"&&typeof Be.appendChild=="function"&&typeof Be.getBoundingClientRect=="function"?tt=Be:typeof Be.drawArrays=="function"||typeof Be.drawElements=="function"?Ke=(De=Be).canvas:("gl"in Be?De=Be.gl:"canvas"in Be?Ke=a(Be.canvas):"container"in Be&&(ut=a(Be.container)),"attributes"in Be&&(Ye=Be.attributes),"extensions"in Be&&(Qe=b(Be.extensions)),"optionalExtensions"in Be&&(rt=b(Be.optionalExtensions)),"onDone"in Be&&(dt=Be.onDone),"profile"in Be&&(mt=!!Be.profile),"pixelRatio"in Be&&(vt=+Be.pixelRatio),"cachedCode"in Be&&(xt=Be.cachedCode))),tt&&(tt.nodeName.toLowerCase()==="canvas"?Ke=tt:ut=tt),!De){if(!Ke){if(!(tt=function(pt,gt,Mt){function Nt(){var Jt=window.innerWidth,Vt=window.innerHeight;pt!==document.body&&(Jt=(Vt=Ut.getBoundingClientRect()).right-Vt.left,Vt=Vt.bottom-Vt.top),Ut.width=Mt*Jt,Ut.height=Mt*Vt}var Bt,Ut=document.createElement("canvas");return ne(Ut.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),pt.appendChild(Ut),pt===document.body&&(Ut.style.position="absolute",ne(pt.style,{margin:0,padding:0})),pt!==document.body&&typeof ResizeObserver=="function"?(Bt=new ResizeObserver(function(){setTimeout(Nt)})).observe(pt):window.addEventListener("resize",Nt,!1),Nt(),{canvas:Ut,onDestroy:function(){Bt?Bt.disconnect():window.removeEventListener("resize",Nt),pt.removeChild(Ut)}}}(ut||document.body,0,vt)))return null;Ke=tt.canvas,Et=tt.onDestroy}Ye.premultipliedAlpha===void 0&&(Ye.premultipliedAlpha=!0),De=function(pt,gt){function Mt(Nt){try{return pt.getContext(Nt,gt)}catch{return null}}return Mt("webgl")||Mt("experimental-webgl")||Mt("webgl-experimental")}(Ke,Ye)}return De?{gl:De,canvas:Ke,container:ut,extensions:Qe,optionalExtensions:rt,pixelRatio:vt,profile:mt,cachedCode:xt,onDone:dt,onDestroy:Et}:(Et(),dt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function g(Ye,tt){for(var ut=Array(Ye),Ke=0;Ke<Ye;++Ke)ut[Ke]=tt(Ke);return ut}function h(Ye){var tt,ut;return tt=(65535<Ye)<<4,tt|=ut=(255<(Ye>>>=tt))<<3,(tt|=ut=(15<(Ye>>>=ut))<<2)|(ut=(3<(Ye>>>=ut))<<1)|Ye>>>ut>>1}function o(){function Ye(Ke){e:{for(var De=16;268435456>=De;De*=16)if(Ke<=De){Ke=De;break e}Ke=0}return 0<(De=ut[h(Ke)>>2]).length?De.pop():new ArrayBuffer(Ke)}function tt(Ke){ut[h(Ke.byteLength)>>2].push(Ke)}var ut=g(8,function(){return[]});return{alloc:Ye,free:tt,allocType:function(Ke,De){var Be=null;switch(Ke){case 5120:Be=new Int8Array(Ye(De),0,De);break;case 5121:Be=new Uint8Array(Ye(De),0,De);break;case 5122:Be=new Int16Array(Ye(2*De),0,De);break;case 5123:Be=new Uint16Array(Ye(2*De),0,De);break;case 5124:Be=new Int32Array(Ye(4*De),0,De);break;case 5125:Be=new Uint32Array(Ye(4*De),0,De);break;case 5126:Be=new Float32Array(Ye(4*De),0,De);break;default:return null}return Be.length!==De?Be.subarray(0,De):Be},freeType:function(Ke){tt(Ke.buffer)}}}function t(Ye){return!!Ye&&typeof Ye=="object"&&Array.isArray(Ye.shape)&&Array.isArray(Ye.stride)&&typeof Ye.offset=="number"&&Ye.shape.length===Ye.stride.length&&(Array.isArray(Ye.data)||Ce(Ye.data))}function i(Ye,tt,ut,Ke,De,Be){for(var Qe=0;Qe<tt;++Qe)for(var rt=Ye[Qe],vt=0;vt<ut;++vt)for(var mt=rt[vt],xt=0;xt<Ke;++xt)De[Be++]=mt[xt]}function n(Ye,tt,ut,Ke,De){for(var Be=1,Qe=ut+1;Qe<tt.length;++Qe)Be*=tt[Qe];var rt=tt[ut];if(tt.length-ut==4){var vt=tt[ut+1],mt=tt[ut+2];for(tt=tt[ut+3],Qe=0;Qe<rt;++Qe)i(Ye[Qe],vt,mt,tt,Ke,De),De+=Be}else for(Qe=0;Qe<rt;++Qe)n(Ye[Qe],tt,ut+1,Ke,De),De+=Be}function r(Ye){return 0|Oe[Object.prototype.toString.call(Ye)]}function s(Ye,tt){for(var ut=0;ut<tt.length;++ut)Ye[ut]=tt[ut]}function l(Ye,tt,ut,Ke,De,Be,Qe){for(var rt=0,vt=0;vt<ut;++vt)for(var mt=0;mt<Ke;++mt)Ye[rt++]=tt[De*vt+Be*mt+Qe]}function u(Ye,tt,ut,Ke){function De(dt){this.id=vt++,this.buffer=Ye.createBuffer(),this.type=dt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ut.profile&&(this.stats={size:0})}function Be(dt,Et,pt){dt.byteLength=Et.byteLength,Ye.bufferData(dt.type,Et,pt)}function Qe(dt,Et,pt,gt,Mt,Nt){if(dt.usage=pt,Array.isArray(Et)){if(dt.dtype=gt||5126,0<Et.length)if(Array.isArray(Et[0])){Mt=le(Et);for(var Bt=gt=1;Bt<Mt.length;++Bt)gt*=Mt[Bt];dt.dimension=gt,Be(dt,Et=ue(Et,Mt,dt.dtype),pt),Nt?dt.persistentData=Et:ye.freeType(Et)}else typeof Et[0]=="number"?(dt.dimension=Mt,s(Mt=ye.allocType(dt.dtype,Et.length),Et),Be(dt,Mt,pt),Nt?dt.persistentData=Mt:ye.freeType(Mt)):Ce(Et[0])&&(dt.dimension=Et[0].length,dt.dtype=gt||r(Et[0])||5126,Be(dt,Et=ue(Et,[Et.length,Et[0].length],dt.dtype),pt),Nt?dt.persistentData=Et:ye.freeType(Et))}else if(Ce(Et))dt.dtype=gt||r(Et),dt.dimension=Mt,Be(dt,Et,pt),Nt&&(dt.persistentData=new Uint8Array(new Uint8Array(Et.buffer)));else if(t(Et)){Mt=Et.shape;var Ut=Et.stride,Jt=(Bt=Et.offset,0),Vt=0,Qt=0,qt=0;Mt.length===1?(Jt=Mt[0],Vt=1,Qt=Ut[0],qt=0):Mt.length===2&&(Jt=Mt[0],Vt=Mt[1],Qt=Ut[0],qt=Ut[1]),dt.dtype=gt||r(Et.data)||5126,dt.dimension=Vt,l(Mt=ye.allocType(dt.dtype,Jt*Vt),Et.data,Jt,Vt,Qt,qt,Bt),Be(dt,Mt,pt),Nt?dt.persistentData=Mt:ye.freeType(Mt)}else Et instanceof ArrayBuffer&&(dt.dtype=5121,dt.dimension=Mt,Be(dt,Et,pt),Nt&&(dt.persistentData=new Uint8Array(new Uint8Array(Et))))}function rt(dt){tt.bufferCount--,Ke(dt),Ye.deleteBuffer(dt.buffer),dt.buffer=null,delete mt[dt.id]}var vt=0,mt={};De.prototype.bind=function(){Ye.bindBuffer(this.type,this.buffer)},De.prototype.destroy=function(){rt(this)};var xt=[];return ut.profile&&(tt.getTotalBufferSize=function(){var dt=0;return Object.keys(mt).forEach(function(Et){dt+=mt[Et].stats.size}),dt}),{create:function(dt,Et,pt,gt){function Mt(Bt){var Ut=35044,Jt=null,Vt=0,Qt=0,qt=1;return Array.isArray(Bt)||Ce(Bt)||t(Bt)||Bt instanceof ArrayBuffer?Jt=Bt:typeof Bt=="number"?Vt=0|Bt:Bt&&("data"in Bt&&(Jt=Bt.data),"usage"in Bt&&(Ut=Me[Bt.usage]),"type"in Bt&&(Qt=Se[Bt.type]),"dimension"in Bt&&(qt=0|Bt.dimension),"length"in Bt&&(Vt=0|Bt.length)),Nt.bind(),Jt?Qe(Nt,Jt,Ut,Qt,qt,gt):(Vt&&Ye.bufferData(Nt.type,Vt,Ut),Nt.dtype=Qt||5121,Nt.usage=Ut,Nt.dimension=qt,Nt.byteLength=Vt),ut.profile&&(Nt.stats.size=Nt.byteLength*ie[Nt.dtype]),Mt}tt.bufferCount++;var Nt=new De(Et);return mt[Nt.id]=Nt,pt||Mt(dt),Mt._reglType="buffer",Mt._buffer=Nt,Mt.subdata=function(Bt,Ut){var Jt,Vt=0|(Ut||0);if(Nt.bind(),Ce(Bt)||Bt instanceof ArrayBuffer)Ye.bufferSubData(Nt.type,Vt,Bt);else if(Array.isArray(Bt)){if(0<Bt.length)if(typeof Bt[0]=="number"){var Qt=ye.allocType(Nt.dtype,Bt.length);s(Qt,Bt),Ye.bufferSubData(Nt.type,Vt,Qt),ye.freeType(Qt)}else(Array.isArray(Bt[0])||Ce(Bt[0]))&&(Jt=le(Bt),Qt=ue(Bt,Jt,Nt.dtype),Ye.bufferSubData(Nt.type,Vt,Qt),ye.freeType(Qt))}else if(t(Bt)){Jt=Bt.shape;var qt=Bt.stride,gn=Qt=0,wn=0,hn=0;Jt.length===1?(Qt=Jt[0],gn=1,wn=qt[0],hn=0):Jt.length===2&&(Qt=Jt[0],gn=Jt[1],wn=qt[0],hn=qt[1]),Jt=Array.isArray(Bt.data)?Nt.dtype:r(Bt.data),l(Jt=ye.allocType(Jt,Qt*gn),Bt.data,Qt,gn,wn,hn,Bt.offset),Ye.bufferSubData(Nt.type,Vt,Jt),ye.freeType(Jt)}return Mt},ut.profile&&(Mt.stats=Nt.stats),Mt.destroy=function(){rt(Nt)},Mt},createStream:function(dt,Et){var pt=xt.pop();return pt||(pt=new De(dt)),pt.bind(),Qe(pt,Et,35040,0,1,!1),pt},destroyStream:function(dt){xt.push(dt)},clear:function(){pe(mt).forEach(rt),xt.forEach(rt)},getBuffer:function(dt){return dt&&dt._buffer instanceof De?dt._buffer:null},restore:function(){pe(mt).forEach(function(dt){dt.buffer=Ye.createBuffer(),Ye.bindBuffer(dt.type,dt.buffer),Ye.bufferData(dt.type,dt.persistentData||dt.byteLength,dt.usage)})},_initBuffer:Qe}}function d(Ye,tt,ut,Ke){function De(dt){this.id=vt++,rt[this.id]=this,this.buffer=dt,this.primType=4,this.type=this.vertCount=0}function Be(dt,Et,pt,gt,Mt,Nt,Bt){var Ut;if(dt.buffer.bind(),Et?((Ut=Bt)||Ce(Et)&&(!t(Et)||Ce(Et.data))||(Ut=tt.oes_element_index_uint?5125:5123),ut._initBuffer(dt.buffer,Et,pt,Ut,3)):(Ye.bufferData(34963,Nt,pt),dt.buffer.dtype=Ut||5121,dt.buffer.usage=pt,dt.buffer.dimension=3,dt.buffer.byteLength=Nt),Ut=Bt,!Bt){switch(dt.buffer.dtype){case 5121:case 5120:Ut=5121;break;case 5123:case 5122:Ut=5123;break;case 5125:case 5124:Ut=5125}dt.buffer.dtype=Ut}dt.type=Ut,0>(Et=Mt)&&(Et=dt.buffer.byteLength,Ut===5123?Et>>=1:Ut===5125&&(Et>>=2)),dt.vertCount=Et,Et=gt,0>gt&&(Et=4,(gt=dt.buffer.dimension)===1&&(Et=0),gt===2&&(Et=1),gt===3&&(Et=4)),dt.primType=Et}function Qe(dt){Ke.elementsCount--,delete rt[dt.id],dt.buffer.destroy(),dt.buffer=null}var rt={},vt=0,mt={uint8:5121,uint16:5123};tt.oes_element_index_uint&&(mt.uint32=5125),De.prototype.bind=function(){this.buffer.bind()};var xt=[];return{create:function(dt,Et){function pt(Nt){if(Nt)if(typeof Nt=="number")gt(Nt),Mt.primType=4,Mt.vertCount=0|Nt,Mt.type=5121;else{var Bt=null,Ut=35044,Jt=-1,Vt=-1,Qt=0,qt=0;Array.isArray(Nt)||Ce(Nt)||t(Nt)?Bt=Nt:("data"in Nt&&(Bt=Nt.data),"usage"in Nt&&(Ut=Me[Nt.usage]),"primitive"in Nt&&(Jt=ge[Nt.primitive]),"count"in Nt&&(Vt=0|Nt.count),"type"in Nt&&(qt=mt[Nt.type]),"length"in Nt?Qt=0|Nt.length:(Qt=Vt,qt===5123||qt===5122?Qt*=2:qt!==5125&&qt!==5124||(Qt*=4))),Be(Mt,Bt,Ut,Jt,Vt,Qt,qt)}else gt(),Mt.primType=4,Mt.vertCount=0,Mt.type=5121;return pt}var gt=ut.create(null,34963,!0),Mt=new De(gt._buffer);return Ke.elementsCount++,pt(dt),pt._reglType="elements",pt._elements=Mt,pt.subdata=function(Nt,Bt){return gt.subdata(Nt,Bt),pt},pt.destroy=function(){Qe(Mt)},pt},createStream:function(dt){var Et=xt.pop();return Et||(Et=new De(ut.create(null,34963,!0,!1)._buffer)),Be(Et,dt,35040,-1,-1,0,0),Et},destroyStream:function(dt){xt.push(dt)},getElements:function(dt){return typeof dt=="function"&&dt._elements instanceof De?dt._elements:null},clear:function(){pe(rt).forEach(Qe)}}}function c(Ye){for(var tt=ye.allocType(5123,Ye.length),ut=0;ut<Ye.length;++ut)if(isNaN(Ye[ut]))tt[ut]=65535;else if(Ye[ut]===1/0)tt[ut]=31744;else if(Ye[ut]===-1/0)tt[ut]=64512;else{Ae[0]=Ye[ut];var Ke=(Be=we[0])>>>31<<15,De=(Be<<1>>>24)-127,Be=Be>>13&1023;tt[ut]=-24>De?Ke:-14>De?Ke+(Be+1024>>-14-De):15<De?Ke+31744:Ke+(De+15<<10)+Be}return tt}function w(Ye){return Array.isArray(Ye)||Ce(Ye)}function m(Ye){return"[object "+Ye+"]"}function f(Ye){return Array.isArray(Ye)&&(Ye.length===0||typeof Ye[0]=="number")}function x(Ye){return!(!Array.isArray(Ye)||Ye.length===0||!w(Ye[0]))}function y(Ye){return Object.prototype.toString.call(Ye)}function v(Ye){if(!Ye)return!1;var tt=y(Ye);return 0<=Ze.indexOf(tt)||f(Ye)||x(Ye)||t(Ye)}function M(Ye,tt){Ye.type===36193?(Ye.data=c(tt),ye.freeType(tt)):Ye.data=tt}function p(Ye,tt,ut,Ke,De,Be){if(Ye=lt[Ye]!==void 0?lt[Ye]:de[Ye]*at[tt],Be&&(Ye*=6),De){for(Ke=0;1<=ut;)Ke+=Ye*ut*ut,ut/=2;return Ke}return Ye*ut*Ke}function S(Ye,tt,ut,Ke,De,Be,Qe){function rt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function vt(Yt,An){Yt.internalformat=An.internalformat,Yt.format=An.format,Yt.type=An.type,Yt.compressed=An.compressed,Yt.premultiplyAlpha=An.premultiplyAlpha,Yt.flipY=An.flipY,Yt.unpackAlignment=An.unpackAlignment,Yt.colorSpace=An.colorSpace,Yt.width=An.width,Yt.height=An.height,Yt.channels=An.channels}function mt(Yt,An){if(typeof An=="object"&&An){"premultiplyAlpha"in An&&(Yt.premultiplyAlpha=An.premultiplyAlpha),"flipY"in An&&(Yt.flipY=An.flipY),"alignment"in An&&(Yt.unpackAlignment=An.alignment),"colorSpace"in An&&(Yt.colorSpace=In[An.colorSpace]),"type"in An&&(Yt.type=kn[An.type]);var Ct=Yt.width,Kt=Yt.height,rn=Yt.channels,Tn=!1;"shape"in An?(Ct=An.shape[0],Kt=An.shape[1],An.shape.length===3&&(rn=An.shape[2],Tn=!0)):("radius"in An&&(Ct=Kt=An.radius),"width"in An&&(Ct=An.width),"height"in An&&(Kt=An.height),"channels"in An&&(rn=An.channels,Tn=!0)),Yt.width=0|Ct,Yt.height=0|Kt,Yt.channels=0|rn,Ct=!1,"format"in An&&(Ct=An.format,Kt=Yt.internalformat=zn[Ct],Yt.format=mn[Kt],Ct in kn&&!("type"in An)&&(Yt.type=kn[Ct]),Ct in er&&(Yt.compressed=!0),Ct=!0),!Tn&&Ct?Yt.channels=de[Yt.format]:Tn&&!Ct&&Yt.channels!==He[Yt.format]&&(Yt.format=Yt.internalformat=He[Yt.channels])}}function xt(Yt){Ye.pixelStorei(37440,Yt.flipY),Ye.pixelStorei(37441,Yt.premultiplyAlpha),Ye.pixelStorei(37443,Yt.colorSpace),Ye.pixelStorei(3317,Yt.unpackAlignment)}function dt(){rt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Et(Yt,An){var Ct=null;if(v(An)?Ct=An:An&&(mt(Yt,An),"x"in An&&(Yt.xOffset=0|An.x),"y"in An&&(Yt.yOffset=0|An.y),v(An.data)&&(Ct=An.data)),An.copy){var Kt=De.viewportWidth,rn=De.viewportHeight;Yt.width=Yt.width||Kt-Yt.xOffset,Yt.height=Yt.height||rn-Yt.yOffset,Yt.needsCopy=!0}else if(Ct){if(Ce(Ct))Yt.channels=Yt.channels||4,Yt.data=Ct,"type"in An||Yt.type!==5121||(Yt.type=0|Oe[Object.prototype.toString.call(Ct)]);else if(f(Ct)){switch(Yt.channels=Yt.channels||4,rn=(Kt=Ct).length,Yt.type){case 5121:case 5123:case 5125:case 5126:(rn=ye.allocType(Yt.type,rn)).set(Kt),Yt.data=rn;break;case 36193:Yt.data=c(Kt)}Yt.alignment=1,Yt.needsFree=!0}else if(t(Ct)){Kt=Ct.data,Array.isArray(Kt)||Yt.type!==5121||(Yt.type=0|Oe[Object.prototype.toString.call(Kt)]),rn=Ct.shape;var Tn,Mn,Cn,pn,en=Ct.stride;rn.length===3?(Cn=rn[2],pn=en[2]):pn=Cn=1,Tn=rn[0],Mn=rn[1],rn=en[0],en=en[1],Yt.alignment=1,Yt.width=Tn,Yt.height=Mn,Yt.channels=Cn,Yt.format=Yt.internalformat=He[Cn],Yt.needsFree=!0,Tn=pn,Ct=Ct.offset,Cn=Yt.width,pn=Yt.height,Mn=Yt.channels;for(var nn=ye.allocType(Yt.type===36193?5126:Yt.type,Cn*pn*Mn),fn=0,dn=0;dn<pn;++dn)for(var Rn=0;Rn<Cn;++Rn)for(var On=0;On<Mn;++On)nn[fn++]=Kt[rn*Rn+en*dn+Tn*On+Ct];M(Yt,nn)}else if(y(Ct)===Le||y(Ct)===Ee||y(Ct)===Re)y(Ct)===Le||y(Ct)===Ee?Yt.element=Ct:Yt.element=Ct.canvas,Yt.width=Yt.element.width,Yt.height=Yt.element.height,Yt.channels=4;else if(y(Ct)===je)Yt.element=Ct,Yt.width=Ct.width,Yt.height=Ct.height,Yt.channels=4;else if(y(Ct)===Fe)Yt.element=Ct,Yt.width=Ct.naturalWidth,Yt.height=Ct.naturalHeight,Yt.channels=4;else if(y(Ct)===Xe)Yt.element=Ct,Yt.width=Ct.videoWidth,Yt.height=Ct.videoHeight,Yt.channels=4;else if(x(Ct)){for(Kt=Yt.width||Ct[0].length,rn=Yt.height||Ct.length,en=Yt.channels,en=w(Ct[0][0])?en||Ct[0][0].length:en||1,Tn=fe.shape(Ct),Cn=1,pn=0;pn<Tn.length;++pn)Cn*=Tn[pn];Cn=ye.allocType(Yt.type===36193?5126:Yt.type,Cn),fe.flatten(Ct,Tn,"",Cn),M(Yt,Cn),Yt.alignment=1,Yt.width=Kt,Yt.height=rn,Yt.channels=en,Yt.format=Yt.internalformat=He[en],Yt.needsFree=!0}}else Yt.width=Yt.width||1,Yt.height=Yt.height||1,Yt.channels=Yt.channels||4}function pt(Yt,An,Ct,Kt,rn){var Tn=Yt.element,Mn=Yt.data,Cn=Yt.internalformat,pn=Yt.format,en=Yt.type,nn=Yt.width,fn=Yt.height;xt(Yt),Tn?Ye.texSubImage2D(An,rn,Ct,Kt,pn,en,Tn):Yt.compressed?Ye.compressedTexSubImage2D(An,rn,Ct,Kt,Cn,nn,fn,Mn):Yt.needsCopy?(Ke(),Ye.copyTexSubImage2D(An,rn,Ct,Kt,Yt.xOffset,Yt.yOffset,nn,fn)):Ye.texSubImage2D(An,rn,Ct,Kt,nn,fn,pn,en,Mn)}function gt(){return _n.pop()||new dt}function Mt(Yt){Yt.needsFree&&ye.freeType(Yt.data),dt.call(Yt),_n.push(Yt)}function Nt(){rt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Bt(Yt,An,Ct){var Kt=Yt.images[0]=gt();Yt.mipmask=1,Kt.width=Yt.width=An,Kt.height=Yt.height=Ct,Kt.channels=Yt.channels=4}function Ut(Yt,An){var Ct=null;if(v(An))vt(Ct=Yt.images[0]=gt(),Yt),Et(Ct,An),Yt.mipmask=1;else if(mt(Yt,An),Array.isArray(An.mipmap))for(var Kt=An.mipmap,rn=0;rn<Kt.length;++rn)vt(Ct=Yt.images[rn]=gt(),Yt),Ct.width>>=rn,Ct.height>>=rn,Et(Ct,Kt[rn]),Yt.mipmask|=1<<rn;else vt(Ct=Yt.images[0]=gt(),Yt),Et(Ct,An),Yt.mipmask=1;vt(Yt,Yt.images[0])}function Jt(Yt,An){for(var Ct=Yt.images,Kt=0;Kt<Ct.length&&Ct[Kt];++Kt){var rn=Ct[Kt],Tn=An,Mn=Kt,Cn=rn.element,pn=rn.data,en=rn.internalformat,nn=rn.format,fn=rn.type,dn=rn.width,Rn=rn.height;xt(rn),Cn?Ye.texImage2D(Tn,Mn,nn,nn,fn,Cn):rn.compressed?Ye.compressedTexImage2D(Tn,Mn,en,dn,Rn,0,pn):rn.needsCopy?(Ke(),Ye.copyTexImage2D(Tn,Mn,nn,rn.xOffset,rn.yOffset,dn,Rn,0)):Ye.texImage2D(Tn,Mn,nn,dn,Rn,0,nn,fn,pn||null)}}function Vt(){var Yt=Ln.pop()||new Nt;rt.call(Yt);for(var An=Yt.mipmask=0;16>An;++An)Yt.images[An]=null;return Yt}function Qt(Yt){for(var An=Yt.images,Ct=0;Ct<An.length;++Ct)An[Ct]&&Mt(An[Ct]),An[Ct]=null;Ln.push(Yt)}function qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function gn(Yt,An){"min"in An&&(Yt.minFilter=Pn[An.min],0<=Ne.indexOf(Yt.minFilter)&&!("faces"in An)&&(Yt.genMipmaps=!0)),"mag"in An&&(Yt.magFilter=yn[An.mag]);var Ct=Yt.wrapS,Kt=Yt.wrapT;if("wrap"in An){var rn=An.wrap;typeof rn=="string"?Ct=Kt=vn[rn]:Array.isArray(rn)&&(Ct=vn[rn[0]],Kt=vn[rn[1]])}else"wrapS"in An&&(Ct=vn[An.wrapS]),"wrapT"in An&&(Kt=vn[An.wrapT]);if(Yt.wrapS=Ct,Yt.wrapT=Kt,"anisotropic"in An&&(Yt.anisotropic=An.anisotropic),"mipmap"in An){switch(Ct=!1,typeof An.mipmap){case"string":Yt.mipmapHint=cn[An.mipmap],Ct=Yt.genMipmaps=!0;break;case"boolean":Ct=Yt.genMipmaps=An.mipmap;break;case"object":Yt.genMipmaps=!1,Ct=!0}!Ct||"min"in An||(Yt.minFilter=9984)}}function wn(Yt,An){Ye.texParameteri(An,10241,Yt.minFilter),Ye.texParameteri(An,10240,Yt.magFilter),Ye.texParameteri(An,10242,Yt.wrapS),Ye.texParameteri(An,10243,Yt.wrapT),tt.ext_texture_filter_anisotropic&&Ye.texParameteri(An,34046,Yt.anisotropic),Yt.genMipmaps&&(Ye.hint(33170,Yt.mipmapHint),Ye.generateMipmap(An))}function hn(Yt){rt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Yn++,this.refCount=1,this.target=Yt,this.texture=Ye.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qt,Qe.profile&&(this.stats={size:0})}function Xt(Yt){Ye.activeTexture(33984),Ye.bindTexture(Yt.target,Yt.texture)}function an(){var Yt=rr[0];Yt?Ye.bindTexture(Yt.target,Yt.texture):Ye.bindTexture(3553,null)}function tn(Yt){var An=Yt.texture,Ct=Yt.unit,Kt=Yt.target;0<=Ct&&(Ye.activeTexture(33984+Ct),Ye.bindTexture(Kt,null),rr[Ct]=null),Ye.deleteTexture(An),Yt.texture=null,Yt.params=null,Yt.pixels=null,Yt.refCount=0,delete Nn[Yt.id],Be.textureCount--}var cn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},vn={repeat:10497,clamp:33071,mirror:33648},yn={nearest:9728,linear:9729},Pn=ne({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},yn),In={none:0,browser:37444},kn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},zn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},er={};tt.ext_srgb&&(zn.srgb=35904,zn.srgba=35906),tt.oes_texture_float&&(kn.float32=kn.float=5126),tt.oes_texture_half_float&&(kn.float16=kn["half float"]=36193),tt.webgl_depth_texture&&(ne(zn,{depth:6402,"depth stencil":34041}),ne(kn,{uint16:5123,uint32:5125,"depth stencil":34042})),tt.webgl_compressed_texture_s3tc&&ne(er,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),tt.webgl_compressed_texture_atc&&ne(er,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),tt.webgl_compressed_texture_pvrtc&&ne(er,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),tt.webgl_compressed_texture_etc1&&(er["rgb etc1"]=36196);var ir=Array.prototype.slice.call(Ye.getParameter(34467));Object.keys(er).forEach(function(Yt){var An=er[Yt];0<=ir.indexOf(An)&&(zn[Yt]=An)});var fr=Object.keys(zn);ut.textureFormats=fr;var ar=[];Object.keys(zn).forEach(function(Yt){ar[zn[Yt]]=Yt});var Jn=[];Object.keys(kn).forEach(function(Yt){Jn[kn[Yt]]=Yt});var br=[];Object.keys(yn).forEach(function(Yt){br[yn[Yt]]=Yt});var Gt=[];Object.keys(Pn).forEach(function(Yt){Gt[Pn[Yt]]=Yt});var ln=[];Object.keys(vn).forEach(function(Yt){ln[vn[Yt]]=Yt});var mn=fr.reduce(function(Yt,An){var Ct=zn[An];return Ct===6409||Ct===6406||Ct===6409||Ct===6410||Ct===6402||Ct===34041||tt.ext_srgb&&(Ct===35904||Ct===35906)?Yt[Ct]=Ct:Ct===32855||0<=An.indexOf("rgba")?Yt[Ct]=6408:Yt[Ct]=6407,Yt},{}),_n=[],Ln=[],Yn=0,Nn={},Bn=ut.maxTextureUnits,rr=Array(Bn).map(function(){return null});return ne(hn.prototype,{bind:function(){this.bindCount+=1;var Yt=this.unit;if(0>Yt){for(var An=0;An<Bn;++An){var Ct=rr[An];if(Ct){if(0<Ct.bindCount)continue;Ct.unit=-1}rr[An]=this,Yt=An;break}Qe.profile&&Be.maxTextureUnits<Yt+1&&(Be.maxTextureUnits=Yt+1),this.unit=Yt,Ye.activeTexture(33984+Yt),Ye.bindTexture(this.target,this.texture)}return Yt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&tn(this)}}),Qe.profile&&(Be.getTotalTextureSize=function(){var Yt=0;return Object.keys(Nn).forEach(function(An){Yt+=Nn[An].stats.size}),Yt}),{create2D:function(Yt,An){function Ct(rn,Tn){var Mn=Kt.texInfo;qt.call(Mn);var Cn=Vt();return typeof rn=="number"?Bt(Cn,0|rn,typeof Tn=="number"?0|Tn:0|rn):rn?(gn(Mn,rn),Ut(Cn,rn)):Bt(Cn,1,1),Mn.genMipmaps&&(Cn.mipmask=(Cn.width<<1)-1),Kt.mipmask=Cn.mipmask,vt(Kt,Cn),Kt.internalformat=Cn.internalformat,Ct.width=Cn.width,Ct.height=Cn.height,Xt(Kt),Jt(Cn,3553),wn(Mn,3553),an(),Qt(Cn),Qe.profile&&(Kt.stats.size=p(Kt.internalformat,Kt.type,Cn.width,Cn.height,Mn.genMipmaps,!1)),Ct.format=ar[Kt.internalformat],Ct.type=Jn[Kt.type],Ct.mag=br[Mn.magFilter],Ct.min=Gt[Mn.minFilter],Ct.wrapS=ln[Mn.wrapS],Ct.wrapT=ln[Mn.wrapT],Ct}var Kt=new hn(3553);return Nn[Kt.id]=Kt,Be.textureCount++,Ct(Yt,An),Ct.subimage=function(rn,Tn,Mn,Cn){Tn|=0,Mn|=0,Cn|=0;var pn=gt();return vt(pn,Kt),pn.width=0,pn.height=0,Et(pn,rn),pn.width=pn.width||(Kt.width>>Cn)-Tn,pn.height=pn.height||(Kt.height>>Cn)-Mn,Xt(Kt),pt(pn,3553,Tn,Mn,Cn),an(),Mt(pn),Ct},Ct.resize=function(rn,Tn){var Mn=0|rn,Cn=0|Tn||Mn;if(Mn===Kt.width&&Cn===Kt.height)return Ct;Ct.width=Kt.width=Mn,Ct.height=Kt.height=Cn,Xt(Kt);for(var pn=0;Kt.mipmask>>pn;++pn){var en=Mn>>pn,nn=Cn>>pn;if(!en||!nn)break;Ye.texImage2D(3553,pn,Kt.format,en,nn,0,Kt.format,Kt.type,null)}return an(),Qe.profile&&(Kt.stats.size=p(Kt.internalformat,Kt.type,Mn,Cn,!1,!1)),Ct},Ct._reglType="texture2d",Ct._texture=Kt,Qe.profile&&(Ct.stats=Kt.stats),Ct.destroy=function(){Kt.decRef()},Ct},createCube:function(Yt,An,Ct,Kt,rn,Tn){function Mn(en,nn,fn,dn,Rn,On){var qn,Vn=Cn.texInfo;for(qt.call(Vn),qn=0;6>qn;++qn)pn[qn]=Vt();if(typeof en!="number"&&en){if(typeof en=="object")if(nn)Ut(pn[0],en),Ut(pn[1],nn),Ut(pn[2],fn),Ut(pn[3],dn),Ut(pn[4],Rn),Ut(pn[5],On);else if(gn(Vn,en),mt(Cn,en),"faces"in en)for(en=en.faces,qn=0;6>qn;++qn)vt(pn[qn],Cn),Ut(pn[qn],en[qn]);else for(qn=0;6>qn;++qn)Ut(pn[qn],en)}else for(en=0|en||1,qn=0;6>qn;++qn)Bt(pn[qn],en,en);for(vt(Cn,pn[0]),Cn.mipmask=Vn.genMipmaps?(pn[0].width<<1)-1:pn[0].mipmask,Cn.internalformat=pn[0].internalformat,Mn.width=pn[0].width,Mn.height=pn[0].height,Xt(Cn),qn=0;6>qn;++qn)Jt(pn[qn],34069+qn);for(wn(Vn,34067),an(),Qe.profile&&(Cn.stats.size=p(Cn.internalformat,Cn.type,Mn.width,Mn.height,Vn.genMipmaps,!0)),Mn.format=ar[Cn.internalformat],Mn.type=Jn[Cn.type],Mn.mag=br[Vn.magFilter],Mn.min=Gt[Vn.minFilter],Mn.wrapS=ln[Vn.wrapS],Mn.wrapT=ln[Vn.wrapT],qn=0;6>qn;++qn)Qt(pn[qn]);return Mn}var Cn=new hn(34067);Nn[Cn.id]=Cn,Be.cubeCount++;var pn=Array(6);return Mn(Yt,An,Ct,Kt,rn,Tn),Mn.subimage=function(en,nn,fn,dn,Rn){fn|=0,dn|=0,Rn|=0;var On=gt();return vt(On,Cn),On.width=0,On.height=0,Et(On,nn),On.width=On.width||(Cn.width>>Rn)-fn,On.height=On.height||(Cn.height>>Rn)-dn,Xt(Cn),pt(On,34069+en,fn,dn,Rn),an(),Mt(On),Mn},Mn.resize=function(en){if((en|=0)!==Cn.width){Mn.width=Cn.width=en,Mn.height=Cn.height=en,Xt(Cn);for(var nn=0;6>nn;++nn)for(var fn=0;Cn.mipmask>>fn;++fn)Ye.texImage2D(34069+nn,fn,Cn.format,en>>fn,en>>fn,0,Cn.format,Cn.type,null);return an(),Qe.profile&&(Cn.stats.size=p(Cn.internalformat,Cn.type,Mn.width,Mn.height,!1,!0)),Mn}},Mn._reglType="textureCube",Mn._texture=Cn,Qe.profile&&(Mn.stats=Cn.stats),Mn.destroy=function(){Cn.decRef()},Mn},clear:function(){for(var Yt=0;Yt<Bn;++Yt)Ye.activeTexture(33984+Yt),Ye.bindTexture(3553,null),rr[Yt]=null;pe(Nn).forEach(tn),Be.cubeCount=0,Be.textureCount=0},getTexture:function(Yt){return null},restore:function(){for(var Yt=0;Yt<Bn;++Yt){var An=rr[Yt];An&&(An.bindCount=0,An.unit=-1,rr[Yt]=null)}pe(Nn).forEach(function(Ct){Ct.texture=Ye.createTexture(),Ye.bindTexture(Ct.target,Ct.texture);for(var Kt=0;32>Kt;++Kt)if(Ct.mipmask&1<<Kt)if(Ct.target===3553)Ye.texImage2D(3553,Kt,Ct.internalformat,Ct.width>>Kt,Ct.height>>Kt,0,Ct.internalformat,Ct.type,null);else for(var rn=0;6>rn;++rn)Ye.texImage2D(34069+rn,Kt,Ct.internalformat,Ct.width>>Kt,Ct.height>>Kt,0,Ct.internalformat,Ct.type,null);wn(Ct.texInfo,Ct.target)})},refresh:function(){for(var Yt=0;Yt<Bn;++Yt){var An=rr[Yt];An&&(An.bindCount=0,An.unit=-1,rr[Yt]=null),Ye.activeTexture(33984+Yt),Ye.bindTexture(3553,null),Ye.bindTexture(34067,null)}}}}function A(Ye,tt,ut,Ke,De,Be){function Qe(hn,Xt,an){this.target=hn,this.texture=Xt,this.renderbuffer=an;var tn=hn=0;Xt?(hn=Xt.width,tn=Xt.height):an&&(hn=an.width,tn=an.height),this.width=hn,this.height=tn}function rt(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function vt(hn,Xt,an){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function mt(hn,Xt){Xt&&(Xt.texture?Ye.framebufferTexture2D(36160,hn,Xt.target,Xt.texture._texture.texture,0):Ye.framebufferRenderbuffer(36160,hn,36161,Xt.renderbuffer._renderbuffer.renderbuffer))}function xt(hn){var Xt=3553,an=null,tn=null,cn=hn;return typeof hn=="object"&&(cn=hn.data,"target"in hn&&(Xt=0|hn.target)),(hn=cn._reglType)==="texture2d"||hn==="textureCube"?an=cn:hn==="renderbuffer"&&(tn=cn,Xt=36161),new Qe(Xt,an,tn)}function dt(hn,Xt,an,tn,cn){return an?((hn=Ke.create2D({width:hn,height:Xt,format:tn,type:cn}))._texture.refCount=0,new Qe(3553,hn,null)):((hn=De.create({width:hn,height:Xt,format:tn}))._renderbuffer.refCount=0,new Qe(36161,null,hn))}function Et(hn){return hn&&(hn.texture||hn.renderbuffer)}function pt(hn,Xt,an){hn&&(hn.texture?hn.texture.resize(Xt,an):hn.renderbuffer&&hn.renderbuffer.resize(Xt,an),hn.width=Xt,hn.height=an)}function gt(){this.id=gn++,wn[this.id]=this,this.framebuffer=Ye.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Mt(hn){hn.colorAttachments.forEach(rt),rt(hn.depthAttachment),rt(hn.stencilAttachment),rt(hn.depthStencilAttachment)}function Nt(hn){Ye.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Be.framebufferCount--,delete wn[hn.id]}function Bt(hn){var Xt;Ye.bindFramebuffer(36160,hn.framebuffer);var an=hn.colorAttachments;for(Xt=0;Xt<an.length;++Xt)mt(36064+Xt,an[Xt]);for(Xt=an.length;Xt<ut.maxColorAttachments;++Xt)Ye.framebufferTexture2D(36160,36064+Xt,3553,null,0);Ye.framebufferTexture2D(36160,33306,3553,null,0),Ye.framebufferTexture2D(36160,36096,3553,null,0),Ye.framebufferTexture2D(36160,36128,3553,null,0),mt(36096,hn.depthAttachment),mt(36128,hn.stencilAttachment),mt(33306,hn.depthStencilAttachment),Ye.checkFramebufferStatus(36160),Ye.isContextLost(),Ye.bindFramebuffer(36160,Jt.next?Jt.next.framebuffer:null),Jt.cur=Jt.next,Ye.getError()}function Ut(hn,Xt){function an(cn,vn){var yn,Pn=0,In=0,kn=!0,zn=!0;yn=null;var er=!0,ir="rgba",fr="uint8",ar=1,Jn=null,br=null,Gt=null,ln=!1;typeof cn=="number"?(Pn=0|cn,In=0|vn||Pn):cn?("shape"in cn?(Pn=(In=cn.shape)[0],In=In[1]):("radius"in cn&&(Pn=In=cn.radius),"width"in cn&&(Pn=cn.width),"height"in cn&&(In=cn.height)),("color"in cn||"colors"in cn)&&(yn=cn.color||cn.colors,Array.isArray(yn)),yn||("colorCount"in cn&&(ar=0|cn.colorCount),"colorTexture"in cn&&(er=!!cn.colorTexture,ir="rgba4"),"colorType"in cn&&(fr=cn.colorType,!er)&&(fr==="half float"||fr==="float16"?ir="rgba16f":fr!=="float"&&fr!=="float32"||(ir="rgba32f")),"colorFormat"in cn&&(ir=cn.colorFormat,0<=Vt.indexOf(ir)?er=!0:0<=Qt.indexOf(ir)&&(er=!1))),("depthTexture"in cn||"depthStencilTexture"in cn)&&(ln=!(!cn.depthTexture&&!cn.depthStencilTexture)),"depth"in cn&&(typeof cn.depth=="boolean"?kn=cn.depth:(Jn=cn.depth,zn=!1)),"stencil"in cn&&(typeof cn.stencil=="boolean"?zn=cn.stencil:(br=cn.stencil,kn=!1)),"depthStencil"in cn&&(typeof cn.depthStencil=="boolean"?kn=zn=cn.depthStencil:(Gt=cn.depthStencil,zn=kn=!1))):Pn=In=1;var mn=null,_n=null,Ln=null,Yn=null;if(Array.isArray(yn))mn=yn.map(xt);else if(yn)mn=[xt(yn)];else for(mn=Array(ar),yn=0;yn<ar;++yn)mn[yn]=dt(Pn,In,er,ir,fr);for(Pn=Pn||mn[0].width,In=In||mn[0].height,Jn?_n=xt(Jn):kn&&!zn&&(_n=dt(Pn,In,ln,"depth","uint32")),br?Ln=xt(br):zn&&!kn&&(Ln=dt(Pn,In,!1,"stencil","uint8")),Gt?Yn=xt(Gt):!Jn&&!br&&zn&&kn&&(Yn=dt(Pn,In,ln,"depth stencil","depth stencil")),kn=null,yn=0;yn<mn.length;++yn)vt(mn[yn]),mn[yn]&&mn[yn].texture&&(zn=wt[mn[yn].texture._texture.format]*ht[mn[yn].texture._texture.type],kn===null&&(kn=zn));return vt(_n),vt(Ln),vt(Yn),Mt(tn),tn.width=Pn,tn.height=In,tn.colorAttachments=mn,tn.depthAttachment=_n,tn.stencilAttachment=Ln,tn.depthStencilAttachment=Yn,an.color=mn.map(Et),an.depth=Et(_n),an.stencil=Et(Ln),an.depthStencil=Et(Yn),an.width=tn.width,an.height=tn.height,Bt(tn),an}var tn=new gt;return Be.framebufferCount++,an(hn,Xt),ne(an,{resize:function(cn,vn){var yn=Math.max(0|cn,1),Pn=Math.max(0|vn||yn,1);if(yn===tn.width&&Pn===tn.height)return an;for(var In=tn.colorAttachments,kn=0;kn<In.length;++kn)pt(In[kn],yn,Pn);return pt(tn.depthAttachment,yn,Pn),pt(tn.stencilAttachment,yn,Pn),pt(tn.depthStencilAttachment,yn,Pn),tn.width=an.width=yn,tn.height=an.height=Pn,Bt(tn),an},_reglType:"framebuffer",_framebuffer:tn,destroy:function(){Nt(tn),Mt(tn)},use:function(cn){Jt.setFBO({framebuffer:an},cn)}})}var Jt={cur:null,next:null,dirty:!1,setFBO:null},Vt=["rgba"],Qt=["rgba4","rgb565","rgb5 a1"];tt.ext_srgb&&Qt.push("srgba"),tt.ext_color_buffer_half_float&&Qt.push("rgba16f","rgb16f"),tt.webgl_color_buffer_float&&Qt.push("rgba32f");var qt=["uint8"];tt.oes_texture_half_float&&qt.push("half float","float16"),tt.oes_texture_float&&qt.push("float","float32");var gn=0,wn={};return ne(Jt,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer)instanceof gt?hn:null},create:Ut,createCube:function(hn){function Xt(tn){var cn,vn={color:null},yn=0,Pn=null;cn="rgba";var In="uint8",kn=1;if(typeof tn=="number"?yn=0|tn:tn?("shape"in tn?yn=tn.shape[0]:("radius"in tn&&(yn=0|tn.radius),"width"in tn?yn=0|tn.width:"height"in tn&&(yn=0|tn.height)),("color"in tn||"colors"in tn)&&(Pn=tn.color||tn.colors,Array.isArray(Pn)),Pn||("colorCount"in tn&&(kn=0|tn.colorCount),"colorType"in tn&&(In=tn.colorType),"colorFormat"in tn&&(cn=tn.colorFormat)),"depth"in tn&&(vn.depth=tn.depth),"stencil"in tn&&(vn.stencil=tn.stencil),"depthStencil"in tn&&(vn.depthStencil=tn.depthStencil)):yn=1,Pn)if(Array.isArray(Pn))for(tn=[],cn=0;cn<Pn.length;++cn)tn[cn]=Pn[cn];else tn=[Pn];else for(tn=Array(kn),Pn={radius:yn,format:cn,type:In},cn=0;cn<kn;++cn)tn[cn]=Ke.createCube(Pn);for(vn.color=Array(tn.length),cn=0;cn<tn.length;++cn)kn=tn[cn],yn=yn||kn.width,vn.color[cn]={target:34069,data:tn[cn]};for(cn=0;6>cn;++cn){for(kn=0;kn<tn.length;++kn)vn.color[kn].target=34069+cn;0<cn&&(vn.depth=an[0].depth,vn.stencil=an[0].stencil,vn.depthStencil=an[0].depthStencil),an[cn]?an[cn](vn):an[cn]=Ut(vn)}return ne(Xt,{width:yn,height:yn,color:tn})}var an=Array(6);return Xt(hn),ne(Xt,{faces:an,resize:function(tn){var cn=0|tn;if(cn===Xt.width)return Xt;var vn=Xt.color;for(tn=0;tn<vn.length;++tn)vn[tn].resize(cn);for(tn=0;6>tn;++tn)an[tn].resize(cn);return Xt.width=Xt.height=cn,Xt},_reglType:"framebufferCube",destroy:function(){an.forEach(function(tn){tn.destroy()})}})},clear:function(){pe(wn).forEach(Nt)},restore:function(){Jt.cur=null,Jt.next=null,Jt.dirty=!0,pe(wn).forEach(function(hn){hn.framebuffer=Ye.createFramebuffer(),Bt(hn)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function C(Ye,tt,ut,Ke,De,Be,Qe){function rt(){this.id=++xt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var pt=tt.oes_vertex_array_object;this.vao=pt?pt.createVertexArrayOES():null,dt[this.id]=this,this.buffers=[]}var vt=ut.maxAttributes,mt=Array(vt);for(ut=0;ut<vt;++ut)mt[ut]=new k;var xt=0,dt={},Et={Record:k,scope:{},state:mt,currentVAO:null,targetVAO:null,restore:tt.oes_vertex_array_object?function(){tt.oes_vertex_array_object&&pe(dt).forEach(function(pt){pt.refresh()})}:function(){},createVAO:function(pt){function gt(Nt){var Bt;Array.isArray(Nt)?(Bt=Nt,Mt.elements&&Mt.ownsElements&&Mt.elements.destroy(),Mt.elements=null,Mt.ownsElements=!1,Mt.offset=0,Mt.count=0,Mt.instances=-1,Mt.primitive=4):(Nt.elements?(Bt=Nt.elements,Mt.ownsElements?(typeof Bt=="function"&&Bt._reglType==="elements"?Mt.elements.destroy():Mt.elements(Bt),Mt.ownsElements=!1):Be.getElements(Nt.elements)?(Mt.elements=Nt.elements,Mt.ownsElements=!1):(Mt.elements=Be.create(Nt.elements),Mt.ownsElements=!0)):(Mt.elements=null,Mt.ownsElements=!1),Bt=Nt.attributes,Mt.offset=0,Mt.count=-1,Mt.instances=-1,Mt.primitive=4,Mt.elements&&(Mt.count=Mt.elements._elements.vertCount,Mt.primitive=Mt.elements._elements.primType),"offset"in Nt&&(Mt.offset=0|Nt.offset),"count"in Nt&&(Mt.count=0|Nt.count),"instances"in Nt&&(Mt.instances=0|Nt.instances),"primitive"in Nt&&(Mt.primitive=ge[Nt.primitive])),Nt={};var Ut=Mt.attributes;Ut.length=Bt.length;for(var Jt=0;Jt<Bt.length;++Jt){var Vt,Qt=Bt[Jt],qt=Ut[Jt]=new k,gn=Qt.data||Qt;Array.isArray(gn)||Ce(gn)||t(gn)?(Mt.buffers[Jt]&&(Vt=Mt.buffers[Jt],Ce(gn)&&Vt._buffer.byteLength>=gn.byteLength?Vt.subdata(gn):(Vt.destroy(),Mt.buffers[Jt]=null)),Mt.buffers[Jt]||(Vt=Mt.buffers[Jt]=De.create(Qt,34962,!1,!0)),qt.buffer=De.getBuffer(Vt),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1,Nt[Jt]=1):De.getBuffer(Qt)?(qt.buffer=De.getBuffer(Qt),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1):De.getBuffer(Qt.buffer)?(qt.buffer=De.getBuffer(Qt.buffer),qt.size=0|(+Qt.size||qt.buffer.dimension),qt.normalized=!!Qt.normalized||!1,qt.type="type"in Qt?Se[Qt.type]:qt.buffer.dtype,qt.offset=0|(Qt.offset||0),qt.stride=0|(Qt.stride||0),qt.divisor=0|(Qt.divisor||0),qt.state=1):"x"in Qt&&(qt.x=+Qt.x||0,qt.y=+Qt.y||0,qt.z=+Qt.z||0,qt.w=+Qt.w||0,qt.state=2)}for(Vt=0;Vt<Mt.buffers.length;++Vt)!Nt[Vt]&&Mt.buffers[Vt]&&(Mt.buffers[Vt].destroy(),Mt.buffers[Vt]=null);return Mt.refresh(),gt}var Mt=new rt;return Ke.vaoCount+=1,gt.destroy=function(){for(var Nt=0;Nt<Mt.buffers.length;++Nt)Mt.buffers[Nt]&&Mt.buffers[Nt].destroy();Mt.buffers.length=0,Mt.ownsElements&&(Mt.elements.destroy(),Mt.elements=null,Mt.ownsElements=!1),Mt.destroy()},gt._vao=Mt,gt._reglType="vao",gt(pt)},getVAO:function(pt){return typeof pt=="function"&&pt._vao?pt._vao:null},destroyBuffer:function(pt){for(var gt=0;gt<mt.length;++gt){var Mt=mt[gt];Mt.buffer===pt&&(Ye.disableVertexAttribArray(gt),Mt.buffer=null)}},setVAO:tt.oes_vertex_array_object?function(pt){if(pt!==Et.currentVAO){var gt=tt.oes_vertex_array_object;pt?gt.bindVertexArrayOES(pt.vao):gt.bindVertexArrayOES(null),Et.currentVAO=pt}}:function(pt){if(pt!==Et.currentVAO){if(pt)pt.bindAttrs();else{for(var gt=tt.angle_instanced_arrays,Mt=0;Mt<mt.length;++Mt){var Nt=mt[Mt];Nt.buffer?(Ye.enableVertexAttribArray(Mt),Nt.buffer.bind(),Ye.vertexAttribPointer(Mt,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offfset),gt&&Nt.divisor&&gt.vertexAttribDivisorANGLE(Mt,Nt.divisor)):(Ye.disableVertexAttribArray(Mt),Ye.vertexAttrib4f(Mt,Nt.x,Nt.y,Nt.z,Nt.w))}Qe.elements?Ye.bindBuffer(34963,Qe.elements.buffer.buffer):Ye.bindBuffer(34963,null)}Et.currentVAO=pt}},clear:tt.oes_vertex_array_object?function(){pe(dt).forEach(function(pt){pt.destroy()})}:function(){}};return rt.prototype.bindAttrs=function(){for(var pt=tt.angle_instanced_arrays,gt=this.attributes,Mt=0;Mt<gt.length;++Mt){var Nt=gt[Mt];Nt.buffer?(Ye.enableVertexAttribArray(Mt),Ye.bindBuffer(34962,Nt.buffer.buffer),Ye.vertexAttribPointer(Mt,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offset),pt&&Nt.divisor&&pt.vertexAttribDivisorANGLE(Mt,Nt.divisor)):(Ye.disableVertexAttribArray(Mt),Ye.vertexAttrib4f(Mt,Nt.x,Nt.y,Nt.z,Nt.w))}for(pt=gt.length;pt<vt;++pt)Ye.disableVertexAttribArray(pt);(pt=Be.getElements(this.elements))?Ye.bindBuffer(34963,pt.buffer.buffer):Ye.bindBuffer(34963,null)},rt.prototype.refresh=function(){var pt=tt.oes_vertex_array_object;pt&&(pt.bindVertexArrayOES(this.vao),this.bindAttrs(),Et.currentVAO=null,pt.bindVertexArrayOES(null))},rt.prototype.destroy=function(){if(this.vao){var pt=tt.oes_vertex_array_object;this===Et.currentVAO&&(Et.currentVAO=null,pt.bindVertexArrayOES(null)),pt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),dt[this.id]&&(delete dt[this.id],--Ke.vaoCount)},Et}function P(Ye,tt,ut,Ke){function De(gt,Mt,Nt,Bt){this.name=gt,this.id=Mt,this.location=Nt,this.info=Bt}function Be(gt,Mt){for(var Nt=0;Nt<gt.length;++Nt)if(gt[Nt].id===Mt.id)return void(gt[Nt].location=Mt.location);gt.push(Mt)}function Qe(gt,Mt,Nt){if(!(Ut=(Nt=gt===35632?mt:xt)[Mt])){var Bt=tt.str(Mt),Ut=Ye.createShader(gt);Ye.shaderSource(Ut,Bt),Ye.compileShader(Ut),Nt[Mt]=Ut}return Ut}function rt(gt,Mt){this.id=pt++,this.fragId=gt,this.vertId=Mt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ke.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function vt(gt,Mt,Nt){var Bt;Bt=Qe(35632,gt.fragId);var Ut=Qe(35633,gt.vertId);if(Mt=gt.program=Ye.createProgram(),Ye.attachShader(Mt,Bt),Ye.attachShader(Mt,Ut),Nt)for(Bt=0;Bt<Nt.length;++Bt)Ut=Nt[Bt],Ye.bindAttribLocation(Mt,Ut[0],Ut[1]);Ye.linkProgram(Mt),Ut=Ye.getProgramParameter(Mt,35718),Ke.profile&&(gt.stats.uniformsCount=Ut);var Jt=gt.uniforms;for(Bt=0;Bt<Ut;++Bt)if(Nt=Ye.getActiveUniform(Mt,Bt))if(1<Nt.size)for(var Vt=0;Vt<Nt.size;++Vt){var Qt=Nt.name.replace("[0]","["+Vt+"]");Be(Jt,new De(Qt,tt.id(Qt),Ye.getUniformLocation(Mt,Qt),Nt))}else Be(Jt,new De(Nt.name,tt.id(Nt.name),Ye.getUniformLocation(Mt,Nt.name),Nt));for(Ut=Ye.getProgramParameter(Mt,35721),Ke.profile&&(gt.stats.attributesCount=Ut),gt=gt.attributes,Bt=0;Bt<Ut;++Bt)(Nt=Ye.getActiveAttrib(Mt,Bt))&&Be(gt,new De(Nt.name,tt.id(Nt.name),Ye.getAttribLocation(Mt,Nt.name),Nt))}var mt={},xt={},dt={},Et=[],pt=0;return Ke.profile&&(ut.getMaxUniformsCount=function(){var gt=0;return Et.forEach(function(Mt){Mt.stats.uniformsCount>gt&&(gt=Mt.stats.uniformsCount)}),gt},ut.getMaxAttributesCount=function(){var gt=0;return Et.forEach(function(Mt){Mt.stats.attributesCount>gt&&(gt=Mt.stats.attributesCount)}),gt}),{clear:function(){var gt=Ye.deleteShader.bind(Ye);pe(mt).forEach(gt),mt={},pe(xt).forEach(gt),xt={},Et.forEach(function(Mt){Ye.deleteProgram(Mt.program)}),Et.length=0,dt={},ut.shaderCount=0},program:function(gt,Mt,Nt,Bt){var Ut=dt[Mt];Ut||(Ut=dt[Mt]={});var Jt=Ut[gt];if(Jt&&(Jt.refCount++,!Bt))return Jt;var Vt=new rt(Mt,gt);return ut.shaderCount++,vt(Vt,Nt,Bt),Jt||(Ut[gt]=Vt),Et.push(Vt),ne(Vt,{destroy:function(){if(Vt.refCount--,0>=Vt.refCount){Ye.deleteProgram(Vt.program);var Qt=Et.indexOf(Vt);Et.splice(Qt,1),ut.shaderCount--}0>=Ut[Vt.vertId].refCount&&(Ye.deleteShader(xt[Vt.vertId]),delete xt[Vt.vertId],delete dt[Vt.fragId][Vt.vertId]),Object.keys(dt[Vt.fragId]).length||(Ye.deleteShader(mt[Vt.fragId]),delete mt[Vt.fragId],delete dt[Vt.fragId])}})},restore:function(){mt={},xt={};for(var gt=0;gt<Et.length;++gt)vt(Et[gt],null,Et[gt].attributes.map(function(Mt){return[Mt.location,Mt.name]}))},shader:Qe,frag:-1,vert:-1}}function R(Ye,tt,ut,Ke,De,Be,Qe){function rt(vt){var mt;mt=tt.next===null?5121:tt.next.colorAttachments[0].texture._texture.type;var xt=0,dt=0,Et=Ke.framebufferWidth,pt=Ke.framebufferHeight,gt=null;return Ce(vt)?gt=vt:vt&&(xt=0|vt.x,dt=0|vt.y,Et=0|(vt.width||Ke.framebufferWidth-xt),pt=0|(vt.height||Ke.framebufferHeight-dt),gt=vt.data||null),ut(),vt=Et*pt*4,gt||(mt===5121?gt=new Uint8Array(vt):mt===5126&&(gt=gt||new Float32Array(vt))),Ye.pixelStorei(3333,4),Ye.readPixels(xt,dt,Et,pt,6408,mt,gt),gt}return function(vt){return vt&&"framebuffer"in vt?function(mt){var xt;return tt.setFBO({framebuffer:mt.framebuffer},function(){xt=rt(mt)}),xt}(vt):rt(vt)}}function O(Ye,tt){return Ye>>>tt|Ye<<32-tt}function X(Ye,tt){var ut=(65535&Ye)+(65535&tt);return(Ye>>16)+(tt>>16)+(ut>>16)<<16|65535&ut}function D(Ye){return Array.prototype.slice.call(Ye)}function V(Ye){return D(Ye).join("")}function j(Ye){function tt(){var xt=[],dt=[];return ne(function(){xt.push.apply(xt,D(arguments))},{def:function(){var Et="v"+De++;return dt.push(Et),0<arguments.length&&(xt.push(Et,"="),xt.push.apply(xt,D(arguments)),xt.push(";")),Et},toString:function(){return V([0<dt.length?"var "+dt.join(",")+";":"",V(xt)])}})}function ut(){function xt(Mt,Nt){Et(Mt,Nt,"=",dt.def(Mt,Nt),";")}var dt=tt(),Et=tt(),pt=dt.toString,gt=Et.toString;return ne(function(){dt.apply(dt,D(arguments))},{def:dt.def,entry:dt,exit:Et,save:xt,set:function(Mt,Nt,Bt){xt(Mt,Nt),dt(Mt,Nt,"=",Bt,";")},toString:function(){return pt()+gt()}})}var Ke=Ye&&Ye.cache,De=0,Be=[],Qe=[],rt=[],vt=tt(),mt={};return{global:vt,link:function(xt,dt){var Et=dt&&dt.stable;if(!Et){for(var pt=0;pt<Qe.length;++pt)if(Qe[pt]===xt&&!rt[pt])return Be[pt]}return pt="g"+De++,Be.push(pt),Qe.push(xt),rt.push(Et),pt},block:tt,proc:function(xt,dt){function Et(){var Nt="a"+pt.length;return pt.push(Nt),Nt}var pt=[];dt=dt||0;for(var gt=0;gt<dt;++gt)Et();var Mt=(gt=ut()).toString;return mt[xt]=ne(gt,{arg:Et,toString:function(){return V(["function(",pt.join(),"){",Mt(),"}"])}})},scope:ut,cond:function(){var xt=V(arguments),dt=ut(),Et=ut(),pt=dt.toString,gt=Et.toString;return ne(dt,{then:function(){return dt.apply(dt,D(arguments)),this},else:function(){return Et.apply(Et,D(arguments)),this},toString:function(){var Mt=gt();return Mt&&(Mt="else{"+Mt+"}"),V(["if(",xt,"){",pt(),"}",Mt])}})},compile:function(){var xt=['"use strict";',vt,"return {"];Object.keys(mt).forEach(function(pt){xt.push('"',pt,'":',mt[pt].toString(),",")}),xt.push("}");var dt,Et=V(xt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Ke&&(dt=function(pt){for(var gt,Mt="",Nt=0;Nt<pt.length;Nt++)gt=pt.charCodeAt(Nt),Mt+="0123456789abcdef".charAt(gt>>>4&15)+"0123456789abcdef".charAt(15&gt);return Mt}(function(pt){for(var gt=Array(pt.length>>2),Mt=0;Mt<gt.length;Mt++)gt[Mt]=0;for(Mt=0;Mt<8*pt.length;Mt+=8)gt[Mt>>5]|=(255&pt.charCodeAt(Mt/8))<<24-Mt%32;var Nt,Bt,Ut,Jt,Vt,Qt,qt,gn,wn,hn,Xt,an=8*pt.length;for(pt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Mt=Array(64),gt[an>>5]|=128<<24-an%32,gt[15+(an+64>>9<<4)]=an,gn=0;gn<gt.length;gn+=16){for(an=pt[0],Nt=pt[1],Bt=pt[2],Ut=pt[3],Jt=pt[4],Vt=pt[5],Qt=pt[6],qt=pt[7],wn=0;64>wn;wn++){var tn;16>wn?Mt[wn]=gt[wn+gn]:(hn=wn,Xt=X(Xt=O(Xt=Mt[wn-2],17)^O(Xt,19)^Xt>>>10,Mt[wn-7]),tn=O(tn=Mt[wn-15],7)^O(tn,18)^tn>>>3,Mt[hn]=X(X(Xt,tn),Mt[wn-16])),hn=X(X(X(X(qt,hn=O(hn=Jt,6)^O(hn,11)^O(hn,25)),Jt&Vt^~Jt&Qt),ct[wn]),Mt[wn]),Xt=X(qt=O(qt=an,2)^O(qt,13)^O(qt,22),an&Nt^an&Bt^Nt&Bt),qt=Qt,Qt=Vt,Vt=Jt,Jt=X(Ut,hn),Ut=Bt,Bt=Nt,Nt=an,an=X(hn,Xt)}pt[0]=X(an,pt[0]),pt[1]=X(Nt,pt[1]),pt[2]=X(Bt,pt[2]),pt[3]=X(Ut,pt[3]),pt[4]=X(Jt,pt[4]),pt[5]=X(Vt,pt[5]),pt[6]=X(Qt,pt[6]),pt[7]=X(qt,pt[7])}for(gt="",Mt=0;Mt<32*pt.length;Mt+=8)gt+=String.fromCharCode(pt[Mt>>5]>>>24-Mt%32&255);return gt}(function(pt){for(var gt,Mt,Nt="",Bt=-1;++Bt<pt.length;)gt=pt.charCodeAt(Bt),Mt=Bt+1<pt.length?pt.charCodeAt(Bt+1):0,55296<=gt&&56319>=gt&&56320<=Mt&&57343>=Mt&&(gt=65536+((1023&gt)<<10)+(1023&Mt),Bt++),127>=gt?Nt+=String.fromCharCode(gt):2047>=gt?Nt+=String.fromCharCode(192|gt>>>6&31,128|63&gt):65535>=gt?Nt+=String.fromCharCode(224|gt>>>12&15,128|gt>>>6&63,128|63&gt):2097151>=gt&&(Nt+=String.fromCharCode(240|gt>>>18&7,128|gt>>>12&63,128|gt>>>6&63,128|63&gt));return Nt}(Et))),Ke[dt])?Ke[dt].apply(null,Qe):(Et=Function.apply(null,Be.concat(Et)),Ke&&(Ke[dt]=Et),Et.apply(null,Qe))}}}function B(Ye){return Array.isArray(Ye)||Ce(Ye)||t(Ye)}function W(Ye){return Ye.sort(function(tt,ut){return tt==="viewport"?-1:ut==="viewport"?1:tt<ut?-1:1})}function q(Ye,tt,ut,Ke){this.thisDep=Ye,this.contextDep=tt,this.propDep=ut,this.append=Ke}function re(Ye){return Ye&&!(Ye.thisDep||Ye.contextDep||Ye.propDep)}function ee(Ye){return new q(!1,!1,!1,Ye)}function K(Ye,tt){var ut=Ye.type;if(ut===0)return new q(!0,1<=(ut=Ye.data.length),2<=ut,tt);if(ut===4)return new q((ut=Ye.data).thisDep,ut.contextDep,ut.propDep,tt);if(ut===5)return new q(!1,!1,!1,tt);if(ut===6){for(var Ke=ut=!1,De=!1,Be=0;Be<Ye.data.length;++Be){var Qe=Ye.data[Be];Qe.type===1?De=!0:Qe.type===2?Ke=!0:Qe.type===3?ut=!0:Qe.type===0?(ut=!0,1<=(Qe=Qe.data)&&(Ke=!0),2<=Qe&&(De=!0)):Qe.type===4&&(ut=ut||Qe.data.thisDep,Ke=Ke||Qe.data.contextDep,De=De||Qe.data.propDep)}return new q(ut,Ke,De,tt)}return new q(ut===3,ut===2,ut===1,tt)}function Y(Ye,tt,ut,Ke,De,Be,Qe,rt,vt,mt,xt,dt,Et,pt,gt,Mt){function Nt(Ct){return Ct.replace(".","_")}function Bt(Ct,Kt,rn){var Tn=Nt(Ct);Yn.push(Ct),Ln[Tn]=_n[Tn]=!!rn,Nn[Tn]=Kt}function Ut(Ct,Kt,rn){var Tn=Nt(Ct);Yn.push(Ct),Array.isArray(rn)?(_n[Tn]=rn.slice(),Ln[Tn]=rn.slice()):_n[Tn]=Ln[Tn]=rn,Bn[Tn]=Kt}function Jt(){var Ct=j({cache:gt}),Kt=Ct.link,rn=Ct.global;Ct.id=An++,Ct.batchId="0";var Tn=Kt(rr),Mn=Ct.shared={props:"a0"};Object.keys(rr).forEach(function(fn){Mn[fn]=rn.def(Tn,".",fn)});var Cn=Ct.next={},pn=Ct.current={};Object.keys(Bn).forEach(function(fn){Array.isArray(_n[fn])&&(Cn[fn]=rn.def(Mn.next,".",fn),pn[fn]=rn.def(Mn.current,".",fn))});var en=Ct.constants={};Object.keys(Yt).forEach(function(fn){en[fn]=rn.def(JSON.stringify(Yt[fn]))}),Ct.invoke=function(fn,dn){switch(dn.type){case 0:var Rn=["this",Mn.context,Mn.props,Ct.batchId];return fn.def(Kt(dn.data),".call(",Rn.slice(0,Math.max(dn.data.length+1,4)),")");case 1:return fn.def(Mn.props,dn.data);case 2:return fn.def(Mn.context,dn.data);case 3:return fn.def("this",dn.data);case 4:return dn.data.append(Ct,fn),dn.data.ref;case 5:return dn.data.toString();case 6:return dn.data.map(function(On){return Ct.invoke(fn,On)})}},Ct.attribCache={};var nn={};return Ct.scopeAttrib=function(fn){if((fn=tt.id(fn))in nn)return nn[fn];var dn=mt.scope[fn];return dn||(dn=mt.scope[fn]=new Jn),nn[fn]=Kt(dn)},Ct}function Vt(Ct,Kt){var rn=Ct.static,Tn=Ct.dynamic;if("framebuffer"in rn){var Mn=rn.framebuffer;return Mn?(Mn=rt.getFramebuffer(Mn),ee(function(pn,en){var nn=pn.link(Mn),fn=pn.shared;return en.set(fn.framebuffer,".next",nn),fn=fn.context,en.set(fn,".framebufferWidth",nn+".width"),en.set(fn,".framebufferHeight",nn+".height"),nn})):ee(function(pn,en){var nn=pn.shared;return en.set(nn.framebuffer,".next","null"),nn=nn.context,en.set(nn,".framebufferWidth",nn+".drawingBufferWidth"),en.set(nn,".framebufferHeight",nn+".drawingBufferHeight"),"null"})}if("framebuffer"in Tn){var Cn=Tn.framebuffer;return K(Cn,function(pn,en){var nn=pn.invoke(en,Cn),fn=pn.shared,dn=fn.framebuffer;return nn=en.def(dn,".getFramebuffer(",nn,")"),en.set(dn,".next",nn),fn=fn.context,en.set(fn,".framebufferWidth",nn+"?"+nn+".width:"+fn+".drawingBufferWidth"),en.set(fn,".framebufferHeight",nn+"?"+nn+".height:"+fn+".drawingBufferHeight"),nn})}return null}function Qt(Ct,Kt,rn){function Tn(fn){if(fn in Mn){var dn=tt.id(Mn[fn]);return(fn=ee(function(){return dn})).id=dn,fn}if(fn in Cn){var Rn=Cn[fn];return K(Rn,function(On,qn){var Vn=On.invoke(qn,Rn);return qn.def(On.shared.strings,".id(",Vn,")")})}return null}var Mn=Ct.static,Cn=Ct.dynamic,pn=Tn("frag"),en=Tn("vert"),nn=null;return re(pn)&&re(en)?(nn=xt.program(en.id,pn.id,null,rn),Ct=ee(function(fn,dn){return fn.link(nn)})):Ct=new q(pn&&pn.thisDep||en&&en.thisDep,pn&&pn.contextDep||en&&en.contextDep,pn&&pn.propDep||en&&en.propDep,function(fn,dn){var Rn,On,qn=fn.shared.shader;return Rn=pn?pn.append(fn,dn):dn.def(qn,".","frag"),On=en?en.append(fn,dn):dn.def(qn,".","vert"),dn.def(qn+".program("+On+","+Rn+")")}),{frag:pn,vert:en,progVar:Ct,program:nn}}function qt(Ct,Kt){function rn(Vn,tr){if(Vn in Tn){var Zn=0|Tn[Vn];return tr?Cn.offset=Zn:Cn.instances=Zn,ee(function(or,sr){return tr&&(or.OFFSET=Zn),Zn})}if(Vn in Mn){var lr=Mn[Vn];return K(lr,function(or,sr){var mr=or.invoke(sr,lr);return tr&&(or.OFFSET=mr),mr})}if(tr){if(nn)return ee(function(or,sr){return or.OFFSET=0});if(pn)return new q(en.thisDep,en.contextDep,en.propDep,function(or,sr){return sr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.offset:0")})}else if(pn)return new q(en.thisDep,en.contextDep,en.propDep,function(or,sr){return sr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.instances:-1")});return null}var Tn=Ct.static,Mn=Ct.dynamic,Cn={},pn=!1,en=function(){if("vao"in Tn){var Vn=Tn.vao;return Vn!==null&&mt.getVAO(Vn)===null&&(Vn=mt.createVAO(Vn)),pn=!0,Cn.vao=Vn,ee(function(Zn){var lr=mt.getVAO(Vn);return lr?Zn.link(lr):"null"})}if("vao"in Mn){pn=!0;var tr=Mn.vao;return K(tr,function(Zn,lr){var or=Zn.invoke(lr,tr);return lr.def(Zn.shared.vao+".getVAO("+or+")")})}return null}(),nn=!1,fn=function(){if("elements"in Tn){var Vn=Tn.elements;if(Cn.elements=Vn,B(Vn)){var tr=Cn.elements=Be.create(Vn,!0);Vn=Be.getElements(tr),nn=!0}else Vn&&(Vn=Be.getElements(Vn),nn=!0);return tr=ee(function(lr,or){if(Vn){var sr=lr.link(Vn);return lr.ELEMENTS=sr}return lr.ELEMENTS=null}),tr.value=Vn,tr}if("elements"in Mn){nn=!0;var Zn=Mn.elements;return K(Zn,function(lr,or){var sr=(mr=lr.shared).isBufferArgs,mr=mr.elements,gr=lr.invoke(or,Zn),Er=or.def("null");return sr=or.def(sr,"(",gr,")"),gr=lr.cond(sr).then(Er,"=",mr,".createStream(",gr,");").else(Er,"=",mr,".getElements(",gr,");"),or.entry(gr),or.exit(lr.cond(sr).then(mr,".destroyStream(",Er,");")),lr.ELEMENTS=Er})}return pn?new q(en.thisDep,en.contextDep,en.propDep,function(lr,or){return or.def(lr.shared.vao+".currentVAO?"+lr.shared.elements+".getElements("+lr.shared.vao+".currentVAO.elements):null")}):null}(),dn=rn("offset",!0),Rn=function(){if("primitive"in Tn){var Vn=Tn.primitive;return Cn.primitive=Vn,ee(function(Zn,lr){return ge[Vn]})}if("primitive"in Mn){var tr=Mn.primitive;return K(tr,function(Zn,lr){var or=Zn.constants.primTypes,sr=Zn.invoke(lr,tr);return lr.def(or,"[",sr,"]")})}return nn?re(fn)?fn.value?ee(function(Zn,lr){return lr.def(Zn.ELEMENTS,".primType")}):ee(function(){return 4}):new q(fn.thisDep,fn.contextDep,fn.propDep,function(Zn,lr){var or=Zn.ELEMENTS;return lr.def(or,"?",or,".primType:",4)}):pn?new q(en.thisDep,en.contextDep,en.propDep,function(Zn,lr){return lr.def(Zn.shared.vao+".currentVAO?"+Zn.shared.vao+".currentVAO.primitive:4")}):null}(),On=function(){if("count"in Tn){var Vn=0|Tn.count;return Cn.count=Vn,ee(function(){return Vn})}if("count"in Mn){var tr=Mn.count;return K(tr,function(Zn,lr){return Zn.invoke(lr,tr)})}return nn?re(fn)?fn?dn?new q(dn.thisDep,dn.contextDep,dn.propDep,function(Zn,lr){return lr.def(Zn.ELEMENTS,".vertCount-",Zn.OFFSET)}):ee(function(Zn,lr){return lr.def(Zn.ELEMENTS,".vertCount")}):ee(function(){return-1}):new q(fn.thisDep||dn.thisDep,fn.contextDep||dn.contextDep,fn.propDep||dn.propDep,function(Zn,lr){var or=Zn.ELEMENTS;return Zn.OFFSET?lr.def(or,"?",or,".vertCount-",Zn.OFFSET,":-1"):lr.def(or,"?",or,".vertCount:-1")}):pn?new q(en.thisDep,en.contextDep,en.propDep,function(Zn,lr){return lr.def(Zn.shared.vao,".currentVAO?",Zn.shared.vao,".currentVAO.count:-1")}):null}(),qn=rn("instances",!1);return{elements:fn,primitive:Rn,count:On,instances:qn,offset:dn,vao:en,vaoActive:pn,elementsActive:nn,static:Cn}}function gn(Ct,Kt){var rn=Ct.static,Tn=Ct.dynamic,Mn={};return Object.keys(rn).forEach(function(Cn){var pn=rn[Cn],en=tt.id(Cn),nn=new Jn;if(B(pn))nn.state=1,nn.buffer=De.getBuffer(De.create(pn,34962,!1,!0)),nn.type=0;else if(dn=De.getBuffer(pn))nn.state=1,nn.buffer=dn,nn.type=0;else if("constant"in pn){var fn=pn.constant;nn.buffer="null",nn.state=2,typeof fn=="number"?nn.x=fn:Tt.forEach(function(Zn,lr){lr<fn.length&&(nn[Zn]=fn[lr])})}else{var dn=B(pn.buffer)?De.getBuffer(De.create(pn.buffer,34962,!1,!0)):De.getBuffer(pn.buffer),Rn=0|pn.offset,On=0|pn.stride,qn=0|pn.size,Vn=!!pn.normalized,tr=0;"type"in pn&&(tr=Se[pn.type]),pn=0|pn.divisor,nn.buffer=dn,nn.state=1,nn.size=qn,nn.normalized=Vn,nn.type=tr||dn.dtype,nn.offset=Rn,nn.stride=On,nn.divisor=pn}Mn[Cn]=ee(function(Zn,lr){var or=Zn.attribCache;if(en in or)return or[en];var sr={isStream:!1};return Object.keys(nn).forEach(function(mr){sr[mr]=nn[mr]}),nn.buffer&&(sr.buffer=Zn.link(nn.buffer),sr.type=sr.type||sr.buffer+".dtype"),or[en]=sr})}),Object.keys(Tn).forEach(function(Cn){var pn=Tn[Cn];Mn[Cn]=K(pn,function(en,nn){function fn(or){nn(Vn[or],"=",dn,".",or,"|0;")}var dn=en.invoke(nn,pn),Rn=en.shared,On=en.constants,qn=Rn.isBufferArgs,Vn=(Rn=Rn.buffer,{isStream:nn.def(!1)}),tr=new Jn;tr.state=1,Object.keys(tr).forEach(function(or){Vn[or]=nn.def(""+tr[or])});var Zn=Vn.buffer,lr=Vn.type;return nn("if(",qn,"(",dn,")){",Vn.isStream,"=true;",Zn,"=",Rn,".createStream(",34962,",",dn,");",lr,"=",Zn,".dtype;","}else{",Zn,"=",Rn,".getBuffer(",dn,");","if(",Zn,"){",lr,"=",Zn,".dtype;",'}else if("constant" in ',dn,"){",Vn.state,"=",2,";","if(typeof "+dn+'.constant === "number"){',Vn[Tt[0]],"=",dn,".constant;",Tt.slice(1).map(function(or){return Vn[or]}).join("="),"=0;","}else{",Tt.map(function(or,sr){return Vn[or]+"="+dn+".constant.length>"+sr+"?"+dn+".constant["+sr+"]:0;"}).join(""),"}}else{","if(",qn,"(",dn,".buffer)){",Zn,"=",Rn,".createStream(",34962,",",dn,".buffer);","}else{",Zn,"=",Rn,".getBuffer(",dn,".buffer);","}",lr,'="type" in ',dn,"?",On.glTypes,"[",dn,".type]:",Zn,".dtype;",Vn.normalized,"=!!",dn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),nn("}}"),nn.exit("if(",Vn.isStream,"){",Rn,".destroyStream(",Zn,");","}"),Vn})}),Mn}function wn(Ct,Kt,rn,Tn,Mn){function Cn(tr){var Zn=en[tr];Zn&&(fn[tr]=Zn)}var pn=function(tr,Zn){if(typeof(lr=tr.static).frag=="string"&&typeof lr.vert=="string"){if(0<Object.keys(Zn.dynamic).length)return null;var lr=Zn.static,or=Object.keys(lr);if(0<or.length&&typeof lr[or[0]]=="number"){for(var sr=[],mr=0;mr<or.length;++mr)sr.push([0|lr[or[mr]],or[mr]]);return sr}}return null}(Ct,Kt),en=function(tr,Zn,lr){function or(Er){if(Er in sr){var $n=sr[Er];Er=!0;var _r,Dr,ii=0|$n.x,wi=0|$n.y;return"width"in $n?_r=0|$n.width:Er=!1,"height"in $n?Dr=0|$n.height:Er=!1,new q(!Er&&Zn&&Zn.thisDep,!Er&&Zn&&Zn.contextDep,!Er&&Zn&&Zn.propDep,function(Ei,hi){var Fi=Ei.shared.context,vo=_r;"width"in $n||(vo=hi.def(Fi,".","framebufferWidth","-",ii));var Ra=Dr;return"height"in $n||(Ra=hi.def(Fi,".","framebufferHeight","-",wi)),[ii,wi,vo,Ra]})}if(Er in mr){var yi=mr[Er];return Er=K(yi,function(Ei,hi){var Fi=Ei.invoke(hi,yi),vo=Ei.shared.context,Ra=hi.def(Fi,".x|0"),Oo=hi.def(Fi,".y|0");return[Ra,Oo,hi.def('"width" in ',Fi,"?",Fi,".width|0:","(",vo,".","framebufferWidth","-",Ra,")"),Fi=hi.def('"height" in ',Fi,"?",Fi,".height|0:","(",vo,".","framebufferHeight","-",Oo,")")]}),Zn&&(Er.thisDep=Er.thisDep||Zn.thisDep,Er.contextDep=Er.contextDep||Zn.contextDep,Er.propDep=Er.propDep||Zn.propDep),Er}return Zn?new q(Zn.thisDep,Zn.contextDep,Zn.propDep,function(Ei,hi){var Fi=Ei.shared.context;return[0,0,hi.def(Fi,".","framebufferWidth"),hi.def(Fi,".","framebufferHeight")]}):null}var sr=tr.static,mr=tr.dynamic;if(tr=or("viewport")){var gr=tr;tr=new q(tr.thisDep,tr.contextDep,tr.propDep,function(Er,$n){var _r=gr.append(Er,$n),Dr=Er.shared.context;return $n.set(Dr,".viewportWidth",_r[2]),$n.set(Dr,".viewportHeight",_r[3]),_r})}return{viewport:tr,scissor_box:or("scissor.box")}}(Ct,Rn=Vt(Ct)),nn=qt(Ct),fn=function(tr,Zn){var lr=tr.static,or=tr.dynamic,sr={};return Yn.forEach(function(mr){function gr($n,_r){if(mr in lr){var Dr=$n(lr[mr]);sr[Er]=ee(function(){return Dr})}else if(mr in or){var ii=or[mr];sr[Er]=K(ii,function(wi,yi){return _r(wi,yi,wi.invoke(yi,ii))})}}var Er=Nt(mr);switch(mr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return gr(function($n){return $n},function($n,_r,Dr){return Dr});case"depth.func":return gr(function($n){return Ot[$n]},function($n,_r,Dr){return _r.def($n.constants.compareFuncs,"[",Dr,"]")});case"depth.range":return gr(function($n){return $n},function($n,_r,Dr){return[_r.def("+",Dr,"[0]"),_r=_r.def("+",Dr,"[1]")]});case"blend.func":return gr(function($n){return[kt["srcRGB"in $n?$n.srcRGB:$n.src],kt["dstRGB"in $n?$n.dstRGB:$n.dst],kt["srcAlpha"in $n?$n.srcAlpha:$n.src],kt["dstAlpha"in $n?$n.dstAlpha:$n.dst]]},function($n,_r,Dr){function ii(hi,Fi){return _r.def('"',hi,Fi,'" in ',Dr,"?",Dr,".",hi,Fi,":",Dr,".",hi)}$n=$n.constants.blendFuncs;var wi=ii("src","RGB"),yi=ii("dst","RGB"),Ei=(wi=_r.def($n,"[",wi,"]"),_r.def($n,"[",ii("src","Alpha"),"]"));return[wi,yi=_r.def($n,"[",yi,"]"),Ei,$n=_r.def($n,"[",ii("dst","Alpha"),"]")]});case"blend.equation":return gr(function($n){return typeof $n=="string"?[br[$n],br[$n]]:typeof $n=="object"?[br[$n.rgb],br[$n.alpha]]:void 0},function($n,_r,Dr){var ii=$n.constants.blendEquations,wi=_r.def(),yi=_r.def();return($n=$n.cond("typeof ",Dr,'==="string"')).then(wi,"=",yi,"=",ii,"[",Dr,"];"),$n.else(wi,"=",ii,"[",Dr,".rgb];",yi,"=",ii,"[",Dr,".alpha];"),_r($n),[wi,yi]});case"blend.color":return gr(function($n){return g(4,function(_r){return+$n[_r]})},function($n,_r,Dr){return g(4,function(ii){return _r.def("+",Dr,"[",ii,"]")})});case"stencil.mask":return gr(function($n){return 0|$n},function($n,_r,Dr){return _r.def(Dr,"|0")});case"stencil.func":return gr(function($n){return[Ot[$n.cmp||"keep"],$n.ref||0,"mask"in $n?$n.mask:-1]},function($n,_r,Dr){return[$n=_r.def('"cmp" in ',Dr,"?",$n.constants.compareFuncs,"[",Dr,".cmp]",":",7680),_r.def(Dr,".ref|0"),_r=_r.def('"mask" in ',Dr,"?",Dr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return gr(function($n){return[mr==="stencil.opBack"?1029:1028,Pt[$n.fail||"keep"],Pt[$n.zfail||"keep"],Pt[$n.zpass||"keep"]]},function($n,_r,Dr){function ii(yi){return _r.def('"',yi,'" in ',Dr,"?",wi,"[",Dr,".",yi,"]:",7680)}var wi=$n.constants.stencilOps;return[mr==="stencil.opBack"?1029:1028,ii("fail"),ii("zfail"),ii("zpass")]});case"polygonOffset.offset":return gr(function($n){return[0|$n.factor,0|$n.units]},function($n,_r,Dr){return[_r.def(Dr,".factor|0"),_r=_r.def(Dr,".units|0")]});case"cull.face":return gr(function($n){var _r=0;return $n==="front"?_r=1028:$n==="back"&&(_r=1029),_r},function($n,_r,Dr){return _r.def(Dr,'==="front"?',1028,":",1029)});case"frontFace":return gr(function($n){return et[$n]},function($n,_r,Dr){return _r.def(Dr+'==="cw"?2304:2305')});case"colorMask":return gr(function($n){return $n.map(function(_r){return!!_r})},function($n,_r,Dr){return g(4,function(ii){return"!!"+Dr+"["+ii+"]"})});case"sample.coverage":return gr(function($n){return["value"in $n?$n.value:1,!!$n.invert]},function($n,_r,Dr){return[_r.def('"value" in ',Dr,"?+",Dr,".value:1"),_r=_r.def("!!",Dr,".invert")]})}}),sr}(Ct),dn=Qt(Ct,0,pn);Cn("viewport"),Cn(Nt("scissor.box"));var Rn,On=0<Object.keys(fn).length;if((Rn={framebuffer:Rn,draw:nn,shader:dn,state:fn,dirty:On,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(tr){var Zn,lr=tr.static;if(tr=tr.dynamic,"profile"in lr){var or=!!lr.profile;(Zn=ee(function(mr,gr){return or})).enable=or}else if("profile"in tr){var sr=tr.profile;Zn=K(sr,function(mr,gr){return mr.invoke(gr,sr)})}return Zn}(Ct),Rn.uniforms=function(tr,Zn){var lr=tr.static,or=tr.dynamic,sr={};return Object.keys(lr).forEach(function(mr){var gr,Er=lr[mr];if(typeof Er=="number"||typeof Er=="boolean")gr=ee(function(){return Er});else if(typeof Er=="function"){var $n=Er._reglType;$n==="texture2d"||$n==="textureCube"?gr=ee(function(_r){return _r.link(Er)}):$n!=="framebuffer"&&$n!=="framebufferCube"||(gr=ee(function(_r){return _r.link(Er.color[0])}))}else w(Er)&&(gr=ee(function(_r){return _r.global.def("[",g(Er.length,function(Dr){return Er[Dr]}),"]")}));gr.value=Er,sr[mr]=gr}),Object.keys(or).forEach(function(mr){var gr=or[mr];sr[mr]=K(gr,function(Er,$n){return Er.invoke($n,gr)})}),sr}(rn),Rn.drawVAO=Rn.scopeVAO=nn.vao,!Rn.drawVAO&&dn.program&&!pn&&ut.angle_instanced_arrays&&nn.static.elements){var qn=!0;if(Ct=dn.program.attributes.map(function(tr){return tr=Kt.static[tr],qn=qn&&!!tr,tr}),qn&&0<Ct.length){var Vn=mt.getVAO(mt.createVAO({attributes:Ct,elements:nn.static.elements}));Rn.drawVAO=new q(null,null,null,function(tr,Zn){return tr.link(Vn)}),Rn.useVAO=!0}}return pn?Rn.useVAO=!0:Rn.attributes=gn(Kt),Rn.context=function(tr){var Zn=tr.static,lr=tr.dynamic,or={};return Object.keys(Zn).forEach(function(sr){var mr=Zn[sr];or[sr]=ee(function(gr,Er){return typeof mr=="number"||typeof mr=="boolean"?""+mr:gr.link(mr)})}),Object.keys(lr).forEach(function(sr){var mr=lr[sr];or[sr]=K(mr,function(gr,Er){return gr.invoke(Er,mr)})}),or}(Tn),Rn}function hn(Ct,Kt,rn){var Tn=Ct.shared.context,Mn=Ct.scope();Object.keys(rn).forEach(function(Cn){Kt.save(Tn,"."+Cn);var pn=rn[Cn].append(Ct,Kt);Array.isArray(pn)?Mn(Tn,".",Cn,"=[",pn.join(),"];"):Mn(Tn,".",Cn,"=",pn,";")}),Kt(Mn)}function Xt(Ct,Kt,rn,Tn){var Mn,Cn=(en=Ct.shared).gl,pn=en.framebuffer;ln&&(Mn=Kt.def(en.extensions,".webgl_draw_buffers"));var en=(nn=Ct.constants).drawBuffer,nn=nn.backBuffer;Ct=rn?rn.append(Ct,Kt):Kt.def(pn,".next"),Tn||Kt("if(",Ct,"!==",pn,".cur){"),Kt("if(",Ct,"){",Cn,".bindFramebuffer(",36160,",",Ct,".framebuffer);"),ln&&Kt(Mn,".drawBuffersWEBGL(",en,"[",Ct,".colorAttachments.length]);"),Kt("}else{",Cn,".bindFramebuffer(",36160,",null);"),ln&&Kt(Mn,".drawBuffersWEBGL(",nn,");"),Kt("}",pn,".cur=",Ct,";"),Tn||Kt("}")}function an(Ct,Kt,rn){var Tn=Ct.shared,Mn=Tn.gl,Cn=Ct.current,pn=Ct.next,en=Tn.current,nn=Tn.next,fn=Ct.cond(en,".dirty");Yn.forEach(function(dn){var Rn,On;if(!((dn=Nt(dn))in rn.state))if(dn in pn){Rn=pn[dn],On=Cn[dn];var qn=g(_n[dn].length,function(Vn){return fn.def(Rn,"[",Vn,"]")});fn(Ct.cond(qn.map(function(Vn,tr){return Vn+"!=="+On+"["+tr+"]"}).join("||")).then(Mn,".",Bn[dn],"(",qn,");",qn.map(function(Vn,tr){return On+"["+tr+"]="+Vn}).join(";"),";"))}else Rn=fn.def(nn,".",dn),qn=Ct.cond(Rn,"!==",en,".",dn),fn(qn),dn in Nn?qn(Ct.cond(Rn).then(Mn,".enable(",Nn[dn],");").else(Mn,".disable(",Nn[dn],");"),en,".",dn,"=",Rn,";"):qn(Mn,".",Bn[dn],"(",Rn,");",en,".",dn,"=",Rn,";")}),Object.keys(rn.state).length===0&&fn(en,".dirty=false;"),Kt(fn)}function tn(Ct,Kt,rn,Tn){var Mn,Cn=Ct.shared,pn=Ct.current,en=Cn.current,nn=Cn.gl;W(Object.keys(rn)).forEach(function(fn){var dn=rn[fn];if(!Tn||Tn(dn)){var Rn=dn.append(Ct,Kt);if(Nn[fn]){var On=Nn[fn];re(dn)?(Mn=Ct.link(Rn,{stable:!0}),Kt(Ct.cond(Mn).then(nn,".enable(",On,");").else(nn,".disable(",On,");")),Kt(en,".",fn,"=",Mn,";")):(Kt(Ct.cond(Rn).then(nn,".enable(",On,");").else(nn,".disable(",On,");")),Kt(en,".",fn,"=",Rn,";"))}else if(w(Rn)){var qn=pn[fn];Kt(nn,".",Bn[fn],"(",Rn,");",Rn.map(function(Vn,tr){return qn+"["+tr+"]="+Vn}).join(";"),";")}else re(dn)?(Mn=Ct.link(Rn,{stable:!0}),Kt(nn,".",Bn[fn],"(",Mn,");",en,".",fn,"=",Mn,";")):Kt(nn,".",Bn[fn],"(",Rn,");",en,".",fn,"=",Rn,";")}})}function cn(Ct,Kt){Gt&&(Ct.instancing=Kt.def(Ct.shared.extensions,".angle_instanced_arrays"))}function vn(Ct,Kt,rn,Tn,Mn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function pn(tr){tr(fn=Kt.def(),"=",Cn(),";"),typeof Mn=="string"?tr(On,".count+=",Mn,";"):tr(On,".count++;"),pt&&(Tn?tr(dn=Kt.def(),"=",Vn,".getNumPendingQueries();"):tr(Vn,".beginQuery(",On,");"))}function en(tr){tr(On,".cpuTime+=",Cn(),"-",fn,";"),pt&&(Tn?tr(Vn,".pushScopeStats(",dn,",",Vn,".getNumPendingQueries(),",On,");"):tr(Vn,".endQuery();"))}function nn(tr){var Zn=Kt.def(qn,".profile");Kt(qn,".profile=",tr,";"),Kt.exit(qn,".profile=",Zn,";")}var fn,dn,Rn=Ct.shared,On=Ct.stats,qn=Rn.current,Vn=Rn.timer;if(rn=rn.profile){if(re(rn))return void(rn.enable?(pn(Kt),en(Kt.exit),nn("true")):nn("false"));nn(rn=rn.append(Ct,Kt))}else rn=Kt.def(qn,".profile");pn(Rn=Ct.block()),Kt("if(",rn,"){",Rn,"}"),en(Ct=Ct.block()),Kt.exit("if(",rn,"){",Ct,"}")}function yn(Ct,Kt,rn,Tn,Mn){function Cn(en,nn,fn){function dn(){Kt("if(!",Vn,".buffer){",On,".enableVertexAttribArray(",qn,");}");var or,sr=fn.type;or=fn.size?Kt.def(fn.size,"||",nn):nn,Kt("if(",Vn,".type!==",sr,"||",Vn,".size!==",or,"||",lr.map(function(mr){return Vn+"."+mr+"!=="+fn[mr]}).join("||"),"){",On,".bindBuffer(",34962,",",tr,".buffer);",On,".vertexAttribPointer(",[qn,or,sr,fn.normalized,fn.stride,fn.offset],");",Vn,".type=",sr,";",Vn,".size=",or,";",lr.map(function(mr){return Vn+"."+mr+"="+fn[mr]+";"}).join(""),"}"),Gt&&(sr=fn.divisor,Kt("if(",Vn,".divisor!==",sr,"){",Ct.instancing,".vertexAttribDivisorANGLE(",[qn,sr],");",Vn,".divisor=",sr,";}"))}function Rn(){Kt("if(",Vn,".buffer){",On,".disableVertexAttribArray(",qn,");",Vn,".buffer=null;","}if(",Tt.map(function(or,sr){return Vn+"."+or+"!=="+Zn[sr]}).join("||"),"){",On,".vertexAttrib4f(",qn,",",Zn,");",Tt.map(function(or,sr){return Vn+"."+or+"="+Zn[sr]+";"}).join(""),"}")}var On=pn.gl,qn=Kt.def(en,".location"),Vn=Kt.def(pn.attributes,"[",qn,"]");en=fn.state;var tr=fn.buffer,Zn=[fn.x,fn.y,fn.z,fn.w],lr=["buffer","normalized","offset","stride"];en===1?dn():en===2?Rn():(Kt("if(",en,"===",1,"){"),dn(),Kt("}else{"),Rn(),Kt("}"))}var pn=Ct.shared;Tn.forEach(function(en){var nn,fn=en.name,dn=rn.attributes[fn];if(dn){if(!Mn(dn))return;nn=dn.append(Ct,Kt)}else{if(!Mn(nt))return;var Rn=Ct.scopeAttrib(fn);nn={},Object.keys(new Jn).forEach(function(On){nn[On]=Kt.def(Rn,".",On)})}Cn(Ct.link(en),function(On){switch(On){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(en.info.type),nn)})}function Pn(Ct,Kt,rn,Tn,Mn,Cn){for(var pn,en=Ct.shared,nn=en.gl,fn=0;fn<Tn.length;++fn){var dn,Rn=(Vn=Tn[fn]).name,On=Vn.info.type,qn=rn.uniforms[Rn],Vn=Ct.link(Vn)+".location";if(qn){if(!Mn(qn))continue;if(re(qn)){if(Rn=qn.value,On===35678||On===35680)Kt(nn,".uniform1i(",Vn,",",(On=Ct.link(Rn._texture||Rn.color[0]._texture))+".bind());"),Kt.exit(On,".unbind();");else if(On===35674||On===35675||On===35676)qn=2,On===35675?qn=3:On===35676&&(qn=4),Kt(nn,".uniformMatrix",qn,"fv(",Vn,",false,",Rn=Ct.global.def("new Float32Array(["+Array.prototype.slice.call(Rn)+"])"),");");else{switch(On){case 5126:pn="1f";break;case 35664:pn="2f";break;case 35665:pn="3f";break;case 35666:pn="4f";break;case 35670:case 5124:pn="1i";break;case 35671:case 35667:pn="2i";break;case 35672:case 35668:pn="3i";break;case 35673:case 35669:pn="4i"}Kt(nn,".uniform",pn,"(",Vn,",",w(Rn)?Array.prototype.slice.call(Rn):Rn,");")}continue}dn=qn.append(Ct,Kt)}else{if(!Mn(nt))continue;dn=Kt.def(en.uniforms,"[",tt.id(Rn),"]")}switch(On===35678?Kt("if(",dn,"&&",dn,'._reglType==="framebuffer"){',dn,"=",dn,".color[0];","}"):On===35680&&Kt("if(",dn,"&&",dn,'._reglType==="framebufferCube"){',dn,"=",dn,".color[0];","}"),Rn=1,On){case 35678:case 35680:On=Kt.def(dn,"._texture"),Kt(nn,".uniform1i(",Vn,",",On,".bind());"),Kt.exit(On,".unbind();");continue;case 5124:case 35670:pn="1i";break;case 35667:case 35671:pn="2i",Rn=2;break;case 35668:case 35672:pn="3i",Rn=3;break;case 35669:case 35673:pn="4i",Rn=4;break;case 5126:pn="1f";break;case 35664:pn="2f",Rn=2;break;case 35665:pn="3f",Rn=3;break;case 35666:pn="4f",Rn=4;break;case 35674:pn="Matrix2fv";break;case 35675:pn="Matrix3fv";break;case 35676:pn="Matrix4fv"}if(pn.charAt(0)==="M"){Kt(nn,".uniform",pn,"(",Vn,","),Vn=Math.pow(On-35674+2,2);var tr=Ct.global.def("new Float32Array(",Vn,")");Array.isArray(dn)?Kt("false,(",g(Vn,function(lr){return tr+"["+lr+"]="+dn[lr]}),",",tr,")"):Kt("false,(Array.isArray(",dn,")||",dn," instanceof Float32Array)?",dn,":(",g(Vn,function(lr){return tr+"["+lr+"]="+dn+"["+lr+"]"}),",",tr,")"),Kt(");")}else{if(1<Rn){On=[];var Zn=[];for(qn=0;qn<Rn;++qn)Array.isArray(dn)?Zn.push(dn[qn]):Zn.push(Kt.def(dn+"["+qn+"]")),Cn&&On.push(Kt.def());Cn&&Kt("if(!",Ct.batchId,"||",On.map(function(lr,or){return lr+"!=="+Zn[or]}).join("||"),"){",On.map(function(lr,or){return lr+"="+Zn[or]+";"}).join("")),Kt(nn,".uniform",pn,"(",Vn,",",Zn.join(","),");")}else Cn&&(On=Kt.def(),Kt("if(!",Ct.batchId,"||",On,"!==",dn,"){",On,"=",dn,";")),Kt(nn,".uniform",pn,"(",Vn,",",dn,");");Cn&&Kt("}")}}}function In(Ct,Kt,rn,Tn){function Mn(sr){var mr=On[sr];return mr?mr.contextDep&&Tn.contextDynamic||mr.propDep?mr.append(Ct,rn):mr.append(Ct,Kt):Kt.def(Rn,".",sr)}function Cn(){function sr(){rn(nn,".drawElementsInstancedANGLE(",[Vn,Zn,lr,tr+"<<(("+lr+"-5121)>>1)",en],");")}function mr(){rn(nn,".drawArraysInstancedANGLE(",[Vn,tr,Zn,en],");")}qn&&qn!=="null"?or?sr():(rn("if(",qn,"){"),sr(),rn("}else{"),mr(),rn("}")):mr()}function pn(){function sr(){rn(dn+".drawElements("+[Vn,Zn,lr,tr+"<<(("+lr+"-5121)>>1)"]+");")}function mr(){rn(dn+".drawArrays("+[Vn,tr,Zn]+");")}qn&&qn!=="null"?or?sr():(rn("if(",qn,"){"),sr(),rn("}else{"),mr(),rn("}")):mr()}var en,nn,fn=Ct.shared,dn=fn.gl,Rn=fn.draw,On=Tn.draw,qn=function(){var sr=On.elements,mr=Kt;return sr?((sr.contextDep&&Tn.contextDynamic||sr.propDep)&&(mr=rn),sr=sr.append(Ct,mr),On.elementsActive&&mr("if("+sr+")"+dn+".bindBuffer(34963,"+sr+".buffer.buffer);")):(sr=mr.def(),mr(sr,"=",Rn,".","elements",";","if(",sr,"){",dn,".bindBuffer(",34963,",",sr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",sr,"=",Ct.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",mn?"":"if("+sr+")"+dn+".bindBuffer(34963,"+sr+".buffer.buffer);","}")),sr}(),Vn=Mn("primitive"),tr=Mn("offset"),Zn=function(){var sr=On.count,mr=Kt;return sr?((sr.contextDep&&Tn.contextDynamic||sr.propDep)&&(mr=rn),sr=sr.append(Ct,mr)):sr=mr.def(Rn,".","count"),sr}();if(typeof Zn=="number"){if(Zn===0)return}else rn("if(",Zn,"){"),rn.exit("}");Gt&&(en=Mn("instances"),nn=Ct.instancing);var lr=qn+".type",or=On.elements&&re(On.elements)&&!On.vaoActive;Gt&&(typeof en!="number"||0<=en)?typeof en=="string"?(rn("if(",en,">0){"),Cn(),rn("}else if(",en,"<0){"),pn(),rn("}")):Cn():pn()}function kn(Ct,Kt,rn,Tn,Mn){return Mn=(Kt=Jt()).proc("body",Mn),Gt&&(Kt.instancing=Mn.def(Kt.shared.extensions,".angle_instanced_arrays")),Ct(Kt,Mn,rn,Tn),Kt.compile().body}function zn(Ct,Kt,rn,Tn){cn(Ct,Kt),rn.useVAO?rn.drawVAO?Kt(Ct.shared.vao,".setVAO(",rn.drawVAO.append(Ct,Kt),");"):Kt(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Kt(Ct.shared.vao,".setVAO(null);"),yn(Ct,Kt,rn,Tn.attributes,function(){return!0})),Pn(Ct,Kt,rn,Tn.uniforms,function(){return!0},!1),In(Ct,Kt,Kt,rn)}function er(Ct,Kt,rn,Tn){function Mn(){return!0}Ct.batchId="a1",cn(Ct,Kt),yn(Ct,Kt,rn,Tn.attributes,Mn),Pn(Ct,Kt,rn,Tn.uniforms,Mn,!1),In(Ct,Kt,Kt,rn)}function ir(Ct,Kt,rn,Tn){function Mn(Rn){return Rn.contextDep&&pn||Rn.propDep}function Cn(Rn){return!Mn(Rn)}cn(Ct,Kt);var pn=rn.contextDep,en=Kt.def(),nn=Kt.def();Ct.shared.props=nn,Ct.batchId=en;var fn=Ct.scope(),dn=Ct.scope();Kt(fn.entry,"for(",en,"=0;",en,"<","a1",";++",en,"){",nn,"=","a0","[",en,"];",dn,"}",fn.exit),rn.needsContext&&hn(Ct,dn,rn.context),rn.needsFramebuffer&&Xt(Ct,dn,rn.framebuffer),tn(Ct,dn,rn.state,Mn),rn.profile&&Mn(rn.profile)&&vn(Ct,dn,rn,!1,!0),Tn?(rn.useVAO?rn.drawVAO?Mn(rn.drawVAO)?dn(Ct.shared.vao,".setVAO(",rn.drawVAO.append(Ct,dn),");"):fn(Ct.shared.vao,".setVAO(",rn.drawVAO.append(Ct,fn),");"):fn(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(fn(Ct.shared.vao,".setVAO(null);"),yn(Ct,fn,rn,Tn.attributes,Cn),yn(Ct,dn,rn,Tn.attributes,Mn)),Pn(Ct,fn,rn,Tn.uniforms,Cn,!1),Pn(Ct,dn,rn,Tn.uniforms,Mn,!0),In(Ct,fn,dn,rn)):(Kt=Ct.global.def("{}"),Tn=rn.shader.progVar.append(Ct,dn),nn=dn.def(Tn,".id"),fn=dn.def(Kt,"[",nn,"]"),dn(Ct.shared.gl,".useProgram(",Tn,".program);","if(!",fn,"){",fn,"=",Kt,"[",nn,"]=",Ct.link(function(Rn){return kn(er,Ct,rn,Rn,2)}),"(",Tn,");}",fn,".call(this,a0[",en,"],",en,");"))}function fr(Ct,Kt){function rn(en){var nn=Kt.shader[en];nn&&(nn=nn.append(Ct,Tn),isNaN(nn)?Tn.set(Mn.shader,"."+en,nn):Tn.set(Mn.shader,"."+en,Ct.link(nn,{stable:!0})))}var Tn=Ct.proc("scope",3);Ct.batchId="a2";var Mn=Ct.shared,Cn=Mn.current;if(hn(Ct,Tn,Kt.context),Kt.framebuffer&&Kt.framebuffer.append(Ct,Tn),W(Object.keys(Kt.state)).forEach(function(en){var nn=Kt.state[en],fn=nn.append(Ct,Tn);w(fn)?fn.forEach(function(dn,Rn){isNaN(dn)?Tn.set(Ct.next[en],"["+Rn+"]",dn):Tn.set(Ct.next[en],"["+Rn+"]",Ct.link(dn,{stable:!0}))}):re(nn)?Tn.set(Mn.next,"."+en,Ct.link(fn,{stable:!0})):Tn.set(Mn.next,"."+en,fn)}),vn(Ct,Tn,Kt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(en){var nn=Kt.draw[en];nn&&(nn=nn.append(Ct,Tn),isNaN(nn)?Tn.set(Mn.draw,"."+en,nn):Tn.set(Mn.draw,"."+en,Ct.link(nn),{stable:!0}))}),Object.keys(Kt.uniforms).forEach(function(en){var nn=Kt.uniforms[en].append(Ct,Tn);Array.isArray(nn)&&(nn="["+nn.map(function(fn){return isNaN(fn)?fn:Ct.link(fn,{stable:!0})})+"]"),Tn.set(Mn.uniforms,"["+Ct.link(tt.id(en),{stable:!0})+"]",nn)}),Object.keys(Kt.attributes).forEach(function(en){var nn=Kt.attributes[en].append(Ct,Tn),fn=Ct.scopeAttrib(en);Object.keys(new Jn).forEach(function(dn){Tn.set(fn,"."+dn,nn[dn])})}),Kt.scopeVAO){var pn=Kt.scopeVAO.append(Ct,Tn);isNaN(pn)?Tn.set(Mn.vao,".targetVAO",pn):Tn.set(Mn.vao,".targetVAO",Ct.link(pn,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(Kt.state).length&&(Tn(Cn,".dirty=true;"),Tn.exit(Cn,".dirty=true;")),Tn("a1(",Ct.shared.context,",a0,",Ct.batchId,");")}function ar(Ct,Kt,rn){var Tn=Kt.static[rn];if(Tn&&function(dn){if(typeof dn=="object"&&!w(dn)){for(var Rn=Object.keys(dn),On=0;On<Rn.length;++On)if(se.isDynamic(dn[Rn[On]]))return!0;return!1}}(Tn)){var Mn=Ct.global,Cn=Object.keys(Tn),pn=!1,en=!1,nn=!1,fn=Ct.global.def("{}");Cn.forEach(function(dn){var Rn=Tn[dn];if(se.isDynamic(Rn))typeof Rn=="function"&&(Rn=Tn[dn]=se.unbox(Rn)),dn=K(Rn,null),pn=pn||dn.thisDep,nn=nn||dn.propDep,en=en||dn.contextDep;else{switch(Mn(fn,".",dn,"="),typeof Rn){case"number":Mn(Rn);break;case"string":Mn('"',Rn,'"');break;case"object":Array.isArray(Rn)&&Mn("[",Rn.join(),"]");break;default:Mn(Ct.link(Rn))}Mn(";")}}),Kt.dynamic[rn]=new se.DynamicVariable(4,{thisDep:pn,contextDep:en,propDep:nn,ref:fn,append:function(dn,Rn){Cn.forEach(function(On){var qn=Tn[On];se.isDynamic(qn)&&(qn=dn.invoke(Rn,qn),Rn(fn,".",On,"=",qn,";"))})}}),delete Kt.static[rn]}}var Jn=mt.Record,br={add:32774,subtract:32778,"reverse subtract":32779};ut.ext_blend_minmax&&(br.min=32775,br.max=32776);var Gt=ut.angle_instanced_arrays,ln=ut.webgl_draw_buffers,mn=ut.oes_vertex_array_object,_n={dirty:!0,profile:Mt.profile},Ln={},Yn=[],Nn={},Bn={};Bt("dither",3024),Bt("blend.enable",3042),Ut("blend.color","blendColor",[0,0,0,0]),Ut("blend.equation","blendEquationSeparate",[32774,32774]),Ut("blend.func","blendFuncSeparate",[1,0,1,0]),Bt("depth.enable",2929,!0),Ut("depth.func","depthFunc",513),Ut("depth.range","depthRange",[0,1]),Ut("depth.mask","depthMask",!0),Ut("colorMask","colorMask",[!0,!0,!0,!0]),Bt("cull.enable",2884),Ut("cull.face","cullFace",1029),Ut("frontFace","frontFace",2305),Ut("lineWidth","lineWidth",1),Bt("polygonOffset.enable",32823),Ut("polygonOffset.offset","polygonOffset",[0,0]),Bt("sample.alpha",32926),Bt("sample.enable",32928),Ut("sample.coverage","sampleCoverage",[1,!1]),Bt("stencil.enable",2960),Ut("stencil.mask","stencilMask",-1),Ut("stencil.func","stencilFunc",[519,0,-1]),Ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Bt("scissor.enable",3089),Ut("scissor.box","scissor",[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]),Ut("viewport","viewport",[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]);var rr={gl:Ye,context:Et,strings:tt,next:Ln,current:_n,draw:dt,elements:Be,buffer:De,shader:xt,attributes:mt.state,vao:mt,uniforms:vt,framebuffer:rt,extensions:ut,timer:pt,isBufferArgs:B},Yt={primTypes:ge,compareFuncs:Ot,blendFuncs:kt,blendEquations:br,stencilOps:Pt,glTypes:Se,orientationType:et};ln&&(Yt.backBuffer=[1029],Yt.drawBuffer=g(Ke.maxDrawbuffers,function(Ct){return Ct===0?[0]:g(Ct,function(Kt){return 36064+Kt})}));var An=0;return{next:Ln,current:_n,procs:function(){var Ct=Jt(),Kt=Ct.proc("poll"),rn=Ct.proc("refresh"),Tn=Ct.block();Kt(Tn),rn(Tn);var Mn,Cn=(nn=Ct.shared).gl,pn=nn.next,en=nn.current;Tn(en,".dirty=false;"),Xt(Ct,Kt),Xt(Ct,rn,null,!0),Gt&&(Mn=Ct.link(Gt)),ut.oes_vertex_array_object&&rn(Ct.link(ut.oes_vertex_array_object),".bindVertexArrayOES(null);");var nn=rn.def(nn.attributes),fn=rn.def(0),dn=Ct.cond(fn,".buffer");dn.then(Cn,".enableVertexAttribArray(i);",Cn,".bindBuffer(",34962,",",fn,".buffer.buffer);",Cn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(Cn,".disableVertexAttribArray(i);",Cn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var Rn=Ct.link(Ke.maxAttributes,{stable:!0});return rn("for(var i=0;i<",Rn,";++i){",fn,"=",nn,"[i];",dn,"}"),Gt&&rn("for(var i=0;i<",Rn,";++i){",Mn,".vertexAttribDivisorANGLE(i,",nn,"[i].divisor);","}"),rn(Ct.shared.vao,".currentVAO=null;",Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"),Object.keys(Nn).forEach(function(On){var qn=Nn[On],Vn=Tn.def(pn,".",On),tr=Ct.block();tr("if(",Vn,"){",Cn,".enable(",qn,")}else{",Cn,".disable(",qn,")}",en,".",On,"=",Vn,";"),rn(tr),Kt("if(",Vn,"!==",en,".",On,"){",tr,"}")}),Object.keys(Bn).forEach(function(On){var qn,Vn,tr=Bn[On],Zn=_n[On],lr=Ct.block();lr(Cn,".",tr,"("),w(Zn)?(tr=Zn.length,qn=Ct.global.def(pn,".",On),Vn=Ct.global.def(en,".",On),lr(g(tr,function(or){return qn+"["+or+"]"}),");",g(tr,function(or){return Vn+"["+or+"]="+qn+"["+or+"];"}).join("")),Kt("if(",g(tr,function(or){return qn+"["+or+"]!=="+Vn+"["+or+"]"}).join("||"),"){",lr,"}")):(qn=Tn.def(pn,".",On),Vn=Tn.def(en,".",On),lr(qn,");",en,".",On,"=",qn,";"),Kt("if(",qn,"!==",Vn,"){",lr,"}")),rn(lr)}),Ct.compile()}(),compile:function(Ct,Kt,rn,Tn,Mn){var Cn=Jt();Cn.stats=Cn.link(Mn),Object.keys(Kt.static).forEach(function(en){ar(Cn,Kt,en)}),Lt.forEach(function(en){ar(Cn,Ct,en)});var pn=wn(Ct,Kt,rn,Tn);return pn.shader.program&&(pn.shader.program.attributes.sort(function(en,nn){return en.name<nn.name?-1:1}),pn.shader.program.uniforms.sort(function(en,nn){return en.name<nn.name?-1:1})),function(en,nn){var fn=en.proc("draw",1);cn(en,fn),hn(en,fn,nn.context),Xt(en,fn,nn.framebuffer),an(en,fn,nn),tn(en,fn,nn.state),vn(en,fn,nn,!1,!0);var dn=nn.shader.progVar.append(en,fn);if(fn(en.shared.gl,".useProgram(",dn,".program);"),nn.shader.program)zn(en,fn,nn,nn.shader.program);else{fn(en.shared.vao,".setVAO(null);");var Rn=en.global.def("{}"),On=fn.def(dn,".id"),qn=fn.def(Rn,"[",On,"]");fn(en.cond(qn).then(qn,".call(this,a0);").else(qn,"=",Rn,"[",On,"]=",en.link(function(Vn){return kn(zn,en,nn,Vn,1)}),"(",dn,");",qn,".call(this,a0);"))}0<Object.keys(nn.state).length&&fn(en.shared.current,".dirty=true;"),en.shared.vao&&fn(en.shared.vao,".setVAO(null);")}(Cn,pn),fr(Cn,pn),function(en,nn){function fn(Zn){return Zn.contextDep&&Rn||Zn.propDep}var dn=en.proc("batch",2);en.batchId="0",cn(en,dn);var Rn=!1,On=!0;Object.keys(nn.context).forEach(function(Zn){Rn=Rn||nn.context[Zn].propDep}),Rn||(hn(en,dn,nn.context),On=!1);var qn=!1;if((Vn=nn.framebuffer)?(Vn.propDep?Rn=qn=!0:Vn.contextDep&&Rn&&(qn=!0),qn||Xt(en,dn,Vn)):Xt(en,dn,null),nn.state.viewport&&nn.state.viewport.propDep&&(Rn=!0),an(en,dn,nn),tn(en,dn,nn.state,function(Zn){return!fn(Zn)}),nn.profile&&fn(nn.profile)||vn(en,dn,nn,!1,"a1"),nn.contextDep=Rn,nn.needsContext=On,nn.needsFramebuffer=qn,(On=nn.shader.progVar).contextDep&&Rn||On.propDep)ir(en,dn,nn,null);else if(On=On.append(en,dn),dn(en.shared.gl,".useProgram(",On,".program);"),nn.shader.program)ir(en,dn,nn,nn.shader.program);else{dn(en.shared.vao,".setVAO(null);");var Vn=en.global.def("{}"),tr=(qn=dn.def(On,".id"),dn.def(Vn,"[",qn,"]"));dn(en.cond(tr).then(tr,".call(this,a0,a1);").else(tr,"=",Vn,"[",qn,"]=",en.link(function(Zn){return kn(ir,en,nn,Zn,2)}),"(",On,");",tr,".call(this,a0,a1);"))}0<Object.keys(nn.state).length&&dn(en.shared.current,".dirty=true;"),en.shared.vao&&dn(en.shared.vao,".setVAO(null);")}(Cn,pn),ne(Cn.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function $(Ye,tt){for(var ut=0;ut<Ye.length;++ut)if(Ye[ut]===tt)return ut;return-1}var ne=function(Ye,tt){for(var ut=Object.keys(tt),Ke=0;Ke<ut.length;++Ke)Ye[ut[Ke]]=tt[ut[Ke]];return Ye},ae=0,se={DynamicVariable:L,define:function(Ye,tt){return new L(Ye,T(tt+""))},isDynamic:function(Ye){return typeof Ye=="function"&&!Ye._reglType||Ye instanceof L},unbox:function Ye(tt,ut){return typeof tt=="function"?new L(0,tt):typeof tt=="number"||typeof tt=="boolean"?new L(5,tt):Array.isArray(tt)?new L(6,tt.map(function(Ke,De){return Ye(Ke)})):tt instanceof L?tt:void 0},accessor:T},ce={next:typeof requestAnimationFrame=="function"?function(Ye){return requestAnimationFrame(Ye)}:function(Ye){return setTimeout(Ye,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ye){return cancelAnimationFrame(Ye)}:clearTimeout},me=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ye=o();ye.zero=o();var Te=function(Ye,tt){var ut=1;tt.ext_texture_filter_anisotropic&&(ut=Ye.getParameter(34047));var Ke=1,De=1;tt.webgl_draw_buffers&&(Ke=Ye.getParameter(34852),De=Ye.getParameter(36063));var Be=!!tt.oes_texture_float;if(Be){Be=Ye.createTexture(),Ye.bindTexture(3553,Be),Ye.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Qe=Ye.createFramebuffer();if(Ye.bindFramebuffer(36160,Qe),Ye.framebufferTexture2D(36160,36064,3553,Be,0),Ye.bindTexture(3553,null),Ye.checkFramebufferStatus(36160)!==36053)Be=!1;else{Ye.viewport(0,0,1,1),Ye.clearColor(1,0,0,1),Ye.clear(16384);var rt=ye.allocType(5126,4);Ye.readPixels(0,0,1,1,6408,5126,rt),Ye.getError()?Be=!1:(Ye.deleteFramebuffer(Qe),Ye.deleteTexture(Be),Be=rt[0]===1),ye.freeType(rt)}}return rt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(rt=Ye.createTexture(),Qe=ye.allocType(5121,36),Ye.activeTexture(33984),Ye.bindTexture(34067,rt),Ye.texImage2D(34069,0,6408,3,3,0,6408,5121,Qe),ye.freeType(Qe),Ye.bindTexture(34067,null),Ye.deleteTexture(rt),rt=!Ye.getError()),{colorBits:[Ye.getParameter(3410),Ye.getParameter(3411),Ye.getParameter(3412),Ye.getParameter(3413)],depthBits:Ye.getParameter(3414),stencilBits:Ye.getParameter(3415),subpixelBits:Ye.getParameter(3408),extensions:Object.keys(tt).filter(function(vt){return!!tt[vt]}),maxAnisotropic:ut,maxDrawbuffers:Ke,maxColorAttachments:De,pointSizeDims:Ye.getParameter(33901),lineWidthDims:Ye.getParameter(33902),maxViewportDims:Ye.getParameter(3386),maxCombinedTextureUnits:Ye.getParameter(35661),maxCubeMapSize:Ye.getParameter(34076),maxRenderbufferSize:Ye.getParameter(34024),maxTextureUnits:Ye.getParameter(34930),maxTextureSize:Ye.getParameter(3379),maxAttributes:Ye.getParameter(34921),maxVertexUniforms:Ye.getParameter(36347),maxVertexTextureUnits:Ye.getParameter(35660),maxVaryingVectors:Ye.getParameter(36348),maxFragmentUniforms:Ye.getParameter(36349),glsl:Ye.getParameter(35724),renderer:Ye.getParameter(7937),vendor:Ye.getParameter(7936),version:Ye.getParameter(7938),readFloat:Be,npotTextureCube:rt}},Ce=function(Ye){return Ye instanceof Uint8Array||Ye instanceof Uint16Array||Ye instanceof Uint32Array||Ye instanceof Int8Array||Ye instanceof Int16Array||Ye instanceof Int32Array||Ye instanceof Float32Array||Ye instanceof Float64Array||Ye instanceof Uint8ClampedArray},pe=function(Ye){return Object.keys(Ye).map(function(tt){return Ye[tt]})},fe={shape:function(Ye){for(var tt=[];Ye.length;Ye=Ye[0])tt.push(Ye.length);return tt},flatten:function(Ye,tt,ut,Ke){var De=1;if(tt.length)for(var Be=0;Be<tt.length;++Be)De*=tt[Be];else De=0;switch(ut=Ke||ye.allocType(ut,De),tt.length){case 0:break;case 1:for(Ke=tt[0],tt=0;tt<Ke;++tt)ut[tt]=Ye[tt];break;case 2:for(Ke=tt[0],tt=tt[1],Be=De=0;Be<Ke;++Be)for(var Qe=Ye[Be],rt=0;rt<tt;++rt)ut[De++]=Qe[rt];break;case 3:i(Ye,tt[0],tt[1],tt[2],ut,0);break;default:n(Ye,tt,0,ut,0)}return ut}},Oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Se={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Me={dynamic:35048,stream:35040,static:35044},ue=fe.flatten,le=fe.shape,ie=[];ie[5120]=1,ie[5122]=2,ie[5124]=4,ie[5121]=1,ie[5123]=2,ie[5125]=4,ie[5126]=4;var ge={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ae=new Float32Array(1),we=new Uint32Array(Ae.buffer),Ne=[9984,9986,9985,9987],He=[0,6409,6410,6407,6408],de={};de[6409]=de[6406]=de[6402]=1,de[34041]=de[6410]=2,de[6407]=de[35904]=3,de[6408]=de[35906]=4;var Le=m("HTMLCanvasElement"),Ee=m("OffscreenCanvas"),Re=m("CanvasRenderingContext2D"),je=m("ImageBitmap"),Fe=m("HTMLImageElement"),Xe=m("HTMLVideoElement"),Ze=Object.keys(Oe).concat([Le,Ee,Re,je,Fe,Xe]),at=[];at[5121]=1,at[5126]=4,at[36193]=2,at[5123]=2,at[5125]=4;var lt=[];lt[32854]=2,lt[32855]=2,lt[36194]=2,lt[34041]=4,lt[33776]=.5,lt[33777]=.5,lt[33778]=1,lt[33779]=1,lt[35986]=.5,lt[35987]=1,lt[34798]=1,lt[35840]=.5,lt[35841]=.25,lt[35842]=.5,lt[35843]=.25,lt[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var bt=function(Ye,tt,ut,Ke,De){function Be(dt){this.id=mt++,this.refCount=1,this.renderbuffer=dt,this.format=32854,this.height=this.width=0,De.profile&&(this.stats={size:0})}function Qe(dt){var Et=dt.renderbuffer;Ye.bindRenderbuffer(36161,null),Ye.deleteRenderbuffer(Et),dt.renderbuffer=null,dt.refCount=0,delete xt[dt.id],Ke.renderbufferCount--}var rt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};tt.ext_srgb&&(rt.srgba=35907),tt.ext_color_buffer_half_float&&(rt.rgba16f=34842,rt.rgb16f=34843),tt.webgl_color_buffer_float&&(rt.rgba32f=34836);var vt=[];Object.keys(rt).forEach(function(dt){vt[rt[dt]]=dt});var mt=0,xt={};return Be.prototype.decRef=function(){0>=--this.refCount&&Qe(this)},De.profile&&(Ke.getTotalRenderbufferSize=function(){var dt=0;return Object.keys(xt).forEach(function(Et){dt+=xt[Et].stats.size}),dt}),{create:function(dt,Et){function pt(Mt,Nt){var Bt=0,Ut=0,Jt=32854;if(typeof Mt=="object"&&Mt?("shape"in Mt?(Bt=0|(Ut=Mt.shape)[0],Ut=0|Ut[1]):("radius"in Mt&&(Bt=Ut=0|Mt.radius),"width"in Mt&&(Bt=0|Mt.width),"height"in Mt&&(Ut=0|Mt.height)),"format"in Mt&&(Jt=rt[Mt.format])):typeof Mt=="number"?(Bt=0|Mt,Ut=typeof Nt=="number"?0|Nt:Bt):Mt||(Bt=Ut=1),Bt!==gt.width||Ut!==gt.height||Jt!==gt.format)return pt.width=gt.width=Bt,pt.height=gt.height=Ut,gt.format=Jt,Ye.bindRenderbuffer(36161,gt.renderbuffer),Ye.renderbufferStorage(36161,Jt,Bt,Ut),De.profile&&(gt.stats.size=ot[gt.format]*gt.width*gt.height),pt.format=vt[gt.format],pt}var gt=new Be(Ye.createRenderbuffer());return xt[gt.id]=gt,Ke.renderbufferCount++,pt(dt,Et),pt.resize=function(Mt,Nt){var Bt=0|Mt,Ut=0|Nt||Bt;return Bt===gt.width&&Ut===gt.height||(pt.width=gt.width=Bt,pt.height=gt.height=Ut,Ye.bindRenderbuffer(36161,gt.renderbuffer),Ye.renderbufferStorage(36161,gt.format,Bt,Ut),De.profile&&(gt.stats.size=ot[gt.format]*gt.width*gt.height)),pt},pt._reglType="renderbuffer",pt._renderbuffer=gt,De.profile&&(pt.stats=gt.stats),pt.destroy=function(){gt.decRef()},pt},clear:function(){pe(xt).forEach(Qe)},restore:function(){pe(xt).forEach(function(dt){dt.renderbuffer=Ye.createRenderbuffer(),Ye.bindRenderbuffer(36161,dt.renderbuffer),Ye.renderbufferStorage(36161,dt.format,dt.width,dt.height)}),Ye.bindRenderbuffer(36161,null)}}},wt=[];wt[6408]=4,wt[6407]=3;var ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2;var ct=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Tt=["x","y","z","w"],Lt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),kt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ot={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},et={cw:2304,ccw:2305},nt=new q(!1,!1,!1,function(){});return function(Ye){function tt(){if(er.length===0)Vt&&Vt.update(),Jn=null;else{Jn=ce.next(tt),xt();for(var Gt=er.length-1;0<=Gt;--Gt){var ln=er[Gt];ln&&ln(wn,null,0)}pt.flush(),Vt&&Vt.update()}}function ut(){!Jn&&0<er.length&&(Jn=ce.next(tt))}function Ke(){Jn&&(ce.cancel(tt),Jn=null)}function De(Gt){Gt.preventDefault(),Ke(),ir.forEach(function(ln){ln()})}function Be(Gt){pt.getError(),Mt.restore(),cn.restore(),Xt.restore(),vn.restore(),yn.restore(),Pn.restore(),tn.restore(),Vt&&Vt.restore(),In.procs.refresh(),ut(),fr.forEach(function(ln){ln()})}function Qe(Gt){function ln(Ct,Kt){var rn={},Tn={};return Object.keys(Ct).forEach(function(Mn){var Cn=Ct[Mn];if(se.isDynamic(Cn))Tn[Mn]=se.unbox(Cn,Mn);else{if(Kt&&Array.isArray(Cn)){for(var pn=0;pn<Cn.length;++pn)if(se.isDynamic(Cn[pn]))return void(Tn[Mn]=se.unbox(Cn,Mn))}rn[Mn]=Cn}}),{dynamic:Tn,static:rn}}var mn=ln(Gt.context||{},!0),_n=ln(Gt.uniforms||{},!0),Ln=ln(Gt.attributes||{},!1);Gt=ln(function(Ct){function Kt(Tn){if(Tn in rn){var Mn=rn[Tn];delete rn[Tn],Object.keys(Mn).forEach(function(Cn){rn[Tn+"."+Cn]=Mn[Cn]})}}var rn=ne({},Ct);return delete rn.uniforms,delete rn.attributes,delete rn.context,delete rn.vao,"stencil"in rn&&rn.stencil.op&&(rn.stencil.opBack=rn.stencil.opFront=rn.stencil.op,delete rn.stencil.op),Kt("blend"),Kt("depth"),Kt("cull"),Kt("stencil"),Kt("polygonOffset"),Kt("scissor"),Kt("sample"),"vao"in Ct&&(rn.vao=Ct.vao),rn}(Gt),!1);var Yn={gpuTime:0,cpuTime:0,count:0},Nn=In.compile(Gt,Ln,_n,mn,Yn),Bn=Nn.draw,rr=Nn.batch,Yt=Nn.scope,An=[];return ne(function(Ct,Kt){var rn;if(typeof Ct=="function")return Yt.call(this,null,Ct,0);if(typeof Kt=="function")if(typeof Ct=="number")for(rn=0;rn<Ct;++rn)Yt.call(this,null,Kt,rn);else{if(!Array.isArray(Ct))return Yt.call(this,Ct,Kt,0);for(rn=0;rn<Ct.length;++rn)Yt.call(this,Ct[rn],Kt,rn)}else if(typeof Ct=="number"){if(0<Ct)return rr.call(this,function(Tn){for(;An.length<Tn;)An.push(null);return An}(0|Ct),0|Ct)}else{if(!Array.isArray(Ct))return Bn.call(this,Ct);if(Ct.length)return rr.call(this,Ct,Ct.length)}},{stats:Yn,destroy:function(){Nn.destroy()}})}function rt(Gt,ln){var mn=0;In.procs.poll();var _n=ln.color;_n&&(pt.clearColor(+_n[0]||0,+_n[1]||0,+_n[2]||0,+_n[3]||0),mn|=16384),"depth"in ln&&(pt.clearDepth(+ln.depth),mn|=256),"stencil"in ln&&(pt.clearStencil(0|ln.stencil),mn|=1024),pt.clear(mn)}function vt(Gt){return er.push(Gt),ut(),{cancel:function(){var ln=$(er,Gt);er[ln]=function mn(){var _n=$(er,mn);er[_n]=er[er.length-1],--er.length,0>=er.length&&Ke()}}}}function mt(){var Gt=kn.viewport,ln=kn.scissor_box;Gt[0]=Gt[1]=ln[0]=ln[1]=0,wn.viewportWidth=wn.framebufferWidth=wn.drawingBufferWidth=Gt[2]=ln[2]=pt.drawingBufferWidth,wn.viewportHeight=wn.framebufferHeight=wn.drawingBufferHeight=Gt[3]=ln[3]=pt.drawingBufferHeight}function xt(){wn.tick+=1,wn.time=Et(),mt(),In.procs.poll()}function dt(){vn.refresh(),mt(),In.procs.refresh(),Vt&&Vt.update()}function Et(){return(me()-Qt)/1e3}if(!(Ye=_(Ye)))return null;var pt=Ye.gl,gt=pt.getContextAttributes();pt.isContextLost();var Mt=function(Gt,ln){function mn(Nn){var Bn;Nn=Nn.toLowerCase();try{Bn=_n[Nn]=Gt.getExtension(Nn)}catch{}return!!Bn}for(var _n={},Ln=0;Ln<ln.extensions.length;++Ln){var Yn=ln.extensions[Ln];if(!mn(Yn))return ln.onDestroy(),ln.onDone('"'+Yn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ln.optionalExtensions.forEach(mn),{extensions:_n,restore:function(){Object.keys(_n).forEach(function(Nn){if(_n[Nn]&&!mn(Nn))throw Error("(regl): error restoring extension "+Nn)})}}}(pt,Ye);if(!Mt)return null;var Nt=function(){var Gt={"":0},ln=[""];return{id:function(mn){var _n=Gt[mn];return _n||(_n=Gt[mn]=ln.length,ln.push(mn),_n)},str:function(mn){return ln[mn]}}}(),Bt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Ut=Ye.cachedCode||{},Jt=Mt.extensions,Vt=function(Gt,ln){function mn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function _n(An,Ct,Kt){var rn=Nn.pop()||new mn;rn.startQueryIndex=An,rn.endQueryIndex=Ct,rn.sum=0,rn.stats=Kt,Bn.push(rn)}if(!ln.ext_disjoint_timer_query)return null;var Ln=[],Yn=[],Nn=[],Bn=[],rr=[],Yt=[];return{beginQuery:function(An){var Ct=Ln.pop()||ln.ext_disjoint_timer_query.createQueryEXT();ln.ext_disjoint_timer_query.beginQueryEXT(35007,Ct),Yn.push(Ct),_n(Yn.length-1,Yn.length,An)},endQuery:function(){ln.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:_n,update:function(){var An,Ct;if((An=Yn.length)!==0){Yt.length=Math.max(Yt.length,An+1),rr.length=Math.max(rr.length,An+1),rr[0]=0;var Kt=Yt[0]=0;for(Ct=An=0;Ct<Yn.length;++Ct){var rn=Yn[Ct];ln.ext_disjoint_timer_query.getQueryObjectEXT(rn,34919)?(Kt+=ln.ext_disjoint_timer_query.getQueryObjectEXT(rn,34918),Ln.push(rn)):Yn[An++]=rn,rr[Ct+1]=Kt,Yt[Ct+1]=An}for(Yn.length=An,Ct=An=0;Ct<Bn.length;++Ct){var Tn=(Kt=Bn[Ct]).startQueryIndex;rn=Kt.endQueryIndex,Kt.sum+=rr[rn]-rr[Tn],Tn=Yt[Tn],(rn=Yt[rn])===Tn?(Kt.stats.gpuTime+=Kt.sum/1e6,Nn.push(Kt)):(Kt.startQueryIndex=Tn,Kt.endQueryIndex=rn,Bn[An++]=Kt)}Bn.length=An}},getNumPendingQueries:function(){return Yn.length},clear:function(){Ln.push.apply(Ln,Yn);for(var An=0;An<Ln.length;An++)ln.ext_disjoint_timer_query.deleteQueryEXT(Ln[An]);Yn.length=0,Ln.length=0},restore:function(){Yn.length=0,Ln.length=0}}}(0,Jt),Qt=me(),qt=pt.drawingBufferWidth,gn=pt.drawingBufferHeight,wn={tick:0,time:0,viewportWidth:qt,viewportHeight:gn,framebufferWidth:qt,framebufferHeight:gn,drawingBufferWidth:qt,drawingBufferHeight:gn,pixelRatio:Ye.pixelRatio},hn=(qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Te(pt,Jt)),Xt=u(pt,Bt,Ye,function(Gt){return tn.destroyBuffer(Gt)}),an=d(pt,Jt,Xt,Bt),tn=C(pt,Jt,hn,Bt,Xt,an,qt),cn=P(pt,Nt,Bt,Ye),vn=S(pt,Jt,hn,function(){In.procs.poll()},wn,Bt,Ye),yn=bt(pt,Jt,0,Bt,Ye),Pn=A(pt,Jt,hn,vn,yn,Bt),In=Y(pt,Nt,Jt,hn,Xt,an,0,Pn,{},tn,cn,qt,wn,Vt,Ut,Ye),kn=(Nt=R(pt,Pn,In.procs.poll,wn),In.next),zn=pt.canvas,er=[],ir=[],fr=[],ar=[Ye.onDestroy],Jn=null;zn&&(zn.addEventListener("webglcontextlost",De,!1),zn.addEventListener("webglcontextrestored",Be,!1));var br=Pn.setFBO=Qe({framebuffer:se.define.call(null,1,"framebuffer")});return dt(),gt=ne(Qe,{clear:function(Gt){if("framebuffer"in Gt)if(Gt.framebuffer&&Gt.framebuffer_reglType==="framebufferCube")for(var ln=0;6>ln;++ln)br(ne({framebuffer:Gt.framebuffer.faces[ln]},Gt),rt);else br(Gt,rt);else rt(0,Gt)},prop:se.define.bind(null,1),context:se.define.bind(null,2),this:se.define.bind(null,3),draw:Qe({}),buffer:function(Gt){return Xt.create(Gt,34962,!1,!1)},elements:function(Gt){return an.create(Gt,!1)},texture:vn.create2D,cube:vn.createCube,renderbuffer:yn.create,framebuffer:Pn.create,framebufferCube:Pn.createCube,vao:tn.createVAO,attributes:gt,frame:vt,on:function(Gt,ln){var mn;switch(Gt){case"frame":return vt(ln);case"lost":mn=ir;break;case"restore":mn=fr;break;case"destroy":mn=ar}return mn.push(ln),{cancel:function(){for(var _n=0;_n<mn.length;++_n)if(mn[_n]===ln){mn[_n]=mn[mn.length-1],mn.pop();break}}}},limits:hn,hasExtension:function(Gt){return 0<=hn.extensions.indexOf(Gt.toLowerCase())},read:Nt,destroy:function(){er.length=0,Ke(),zn&&(zn.removeEventListener("webglcontextlost",De),zn.removeEventListener("webglcontextrestored",Be)),cn.clear(),Pn.clear(),yn.clear(),tn.clear(),vn.clear(),an.clear(),Xt.clear(),Vt&&Vt.clear(),ar.forEach(function(Gt){Gt()})},_gl:pt,_refresh:dt,poll:function(){xt(),Vt&&Vt.update()},now:Et,stats:Bt,getCachedCode:function(){return Ut},preloadCachedCode:function(Gt){Object.entries(Gt).forEach(function(ln){Ut[ln[0]]=ln[1]})}}),Ye.onDone(null,gt),gt}}()},71665:function(F,L,e){var T=e(12856),b=T.Buffer;function a(g,h){for(var o in g)h[o]=g[o]}function _(g,h,o){return b(g,h,o)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?F.exports=T:(a(T,L),L.Buffer=_),_.prototype=Object.create(b.prototype),a(b,_),_.from=function(g,h,o){if(typeof g=="number")throw new TypeError("Argument must not be a number");return b(g,h,o)},_.alloc=function(g,h,o){if(typeof g!="number")throw new TypeError("Argument must be a number");var t=b(g);return h!==void 0?typeof o=="string"?t.fill(h,o):t.fill(h):t.fill(0),t},_.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return b(g)},_.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return T.SlowBuffer(g)}},21630:function(F,L,e){F.exports=b;var T=e(15398).EventEmitter;function b(){T.call(this)}e(42018)(b,T),b.Readable=e(40410),b.Writable=e(37493),b.Duplex=e(37865),b.Transform=e(74308),b.PassThrough=e(66897),b.finished=e(12726),b.pipeline=e(10168),b.Stream=b,b.prototype.pipe=function(a,_){var g=this;function h(l){a.writable&&a.write(l)===!1&&g.pause&&g.pause()}function o(){g.readable&&g.resume&&g.resume()}g.on("data",h),a.on("drain",o),a._isStdio||_&&_.end===!1||(g.on("end",i),g.on("close",n));var t=!1;function i(){t||(t=!0,a.end())}function n(){t||(t=!0,typeof a.destroy=="function"&&a.destroy())}function r(l){if(s(),T.listenerCount(this,"error")===0)throw l}function s(){g.removeListener("data",h),a.removeListener("drain",o),g.removeListener("end",i),g.removeListener("close",n),g.removeListener("error",r),a.removeListener("error",r),g.removeListener("end",s),g.removeListener("close",s),a.removeListener("close",s)}return g.on("error",r),a.on("error",r),g.on("end",s),g.on("close",s),a.on("close",s),a.emit("pipe",g),a}},74322:function(F){var L={};function e(b,a,_){_||(_=Error);var g=function(h){var o,t;function i(n,r,s){return h.call(this,function(l,u,d){return typeof a=="string"?a:a(l,u,d)}(n,r,s))||this}return t=h,(o=i).prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t,i}(_);g.prototype.name=_.name,g.prototype.code=b,L[b]=g}function T(b,a){if(Array.isArray(b)){var _=b.length;return b=b.map(function(g){return String(g)}),_>2?"one of ".concat(a," ").concat(b.slice(0,_-1).join(", "),", or ")+b[_-1]:_===2?"one of ".concat(a," ").concat(b[0]," or ").concat(b[1]):"of ".concat(a," ").concat(b[0])}return"of ".concat(a," ").concat(String(b))}e("ERR_INVALID_OPT_VALUE",function(b,a){return'The value "'+a+'" is invalid for option "'+b+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(b,a,_){var g,h,o,t,i;if(typeof a=="string"&&(h="not ",a.substr(0,4)===h)?(g="must not be",a=a.replace(/^not /,"")):g="must be",function(r,s,l){return(l===void 0||l>r.length)&&(l=r.length),r.substring(l-9,l)===s}(b," argument"))o="The ".concat(b," ").concat(g," ").concat(T(a,"type"));else{var n=(typeof i!="number"&&(i=0),i+1>(t=b).length||t.indexOf(".",i)===-1?"argument":"property");o='The "'.concat(b,'" ').concat(n," ").concat(g," ").concat(T(a,"type"))}return o+". Received type ".concat(typeof _)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),F.exports.q=L},37865:function(F,L,e){var T=e(90386),b=Object.keys||function(r){var s=[];for(var l in r)s.push(l);return s};F.exports=t;var a=e(40410),_=e(37493);e(42018)(t,a);for(var g=b(_.prototype),h=0;h<g.length;h++){var o=g[h];t.prototype[o]||(t.prototype[o]=_.prototype[o])}function t(r){if(!(this instanceof t))return new t(r);a.call(this,r),_.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||T.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},66897:function(F,L,e){F.exports=b;var T=e(74308);function b(a){if(!(this instanceof b))return new b(a);T.call(this,a)}e(42018)(b,T),b.prototype._transform=function(a,_,g){g(null,a)}},40410:function(F,L,e){var T,b=e(90386);F.exports=M,M.ReadableState=v,e(15398).EventEmitter;var a,_=function(ee,K){return ee.listeners(K).length},g=e(71405),h=e(12856).Buffer,o=e.g.Uint8Array||function(){},t=e(40964);a=t&&t.debuglog?t.debuglog("stream"):function(){};var i,n,r,s=e(31125),l=e(65756),u=e(56306).getHighWaterMark,d=e(74322).q,c=d.ERR_INVALID_ARG_TYPE,w=d.ERR_STREAM_PUSH_AFTER_EOF,m=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(M,g);var x=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(ee,K,Y){T=T||e(37865),ee=ee||{},typeof Y!="boolean"&&(Y=K instanceof T),this.objectMode=!!ee.objectMode,Y&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=u(this,ee,"readableHighWaterMark",Y),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(i||(i=e(68019).s),this.decoder=new i(ee.encoding),this.encoding=ee.encoding)}function M(ee){if(T=T||e(37865),!(this instanceof M))return new M(ee);var K=this instanceof T;this._readableState=new v(ee,this,K),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),g.call(this)}function p(ee,K,Y,$,ne){a("readableAddChunk",K);var ae,se=ee._readableState;if(K===null)se.reading=!1,function(ce,me){if(a("onEofChunk"),!me.ended){if(me.decoder){var ye=me.decoder.end();ye&&ye.length&&(me.buffer.push(ye),me.length+=me.objectMode?1:ye.length)}me.ended=!0,me.sync?C(ce):(me.needReadable=!1,me.emittedReadable||(me.emittedReadable=!0,P(ce)))}}(ee,se);else if(ne||(ae=function(ce,me){var ye,Te;return Te=me,h.isBuffer(Te)||Te instanceof o||typeof me=="string"||me===void 0||ce.objectMode||(ye=new c("chunk",["string","Buffer","Uint8Array"],me)),ye}(se,K)),ae)x(ee,ae);else if(se.objectMode||K&&K.length>0)if(typeof K=="string"||se.objectMode||Object.getPrototypeOf(K)===h.prototype||(K=function(ce){return h.from(ce)}(K)),$)se.endEmitted?x(ee,new f):S(ee,se,K,!0);else if(se.ended)x(ee,new w);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!Y?(K=se.decoder.write(K),se.objectMode||K.length!==0?S(ee,se,K,!1):R(ee,se)):S(ee,se,K,!1)}else $||(se.reading=!1,R(ee,se));return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function S(ee,K,Y,$){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,ee.emit("data",Y)):(K.length+=K.objectMode?1:Y.length,$?K.buffer.unshift(Y):K.buffer.push(Y),K.needReadable&&C(ee)),R(ee,K)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),M.prototype.destroy=l.destroy,M.prototype._undestroy=l.undestroy,M.prototype._destroy=function(ee,K){K(ee)},M.prototype.push=function(ee,K){var Y,$=this._readableState;return $.objectMode?Y=!0:typeof ee=="string"&&((K=K||$.defaultEncoding)!==$.encoding&&(ee=h.from(ee,K),K=""),Y=!0),p(this,ee,K,!1,Y)},M.prototype.unshift=function(ee){return p(this,ee,null,!0,!1)},M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(ee){i||(i=e(68019).s);var K=new i(ee);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,$="";Y!==null;)$+=K.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),$!==""&&this._readableState.buffer.push($),this._readableState.length=$.length,this};var A=1073741824;function k(ee,K){return ee<=0||K.length===0&&K.ended?0:K.objectMode?1:ee!=ee?K.flowing&&K.length?K.buffer.head.data.length:K.length:(ee>K.highWaterMark&&(K.highWaterMark=function(Y){return Y>=A?Y=A:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(ee)),ee<=K.length?ee:K.ended?K.length:(K.needReadable=!0,0))}function C(ee){var K=ee._readableState;a("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(a("emitReadable",K.flowing),K.emittedReadable=!0,b.nextTick(P,ee))}function P(ee){var K=ee._readableState;a("emitReadable_",K.destroyed,K.length,K.ended),K.destroyed||!K.length&&!K.ended||(ee.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,j(ee)}function R(ee,K){K.readingMore||(K.readingMore=!0,b.nextTick(O,ee,K))}function O(ee,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var Y=K.length;if(a("maybeReadMore read 0"),ee.read(0),Y===K.length)break}K.readingMore=!1}function X(ee){var K=ee._readableState;K.readableListening=ee.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function D(ee){a("readable nexttick read 0"),ee.read(0)}function V(ee,K){a("resume",K.reading),K.reading||ee.read(0),K.resumeScheduled=!1,ee.emit("resume"),j(ee),K.flowing&&!K.reading&&ee.read(0)}function j(ee){var K=ee._readableState;for(a("flow",K.flowing);K.flowing&&ee.read()!==null;);}function B(ee,K){return K.length===0?null:(K.objectMode?Y=K.buffer.shift():!ee||ee>=K.length?(Y=K.decoder?K.buffer.join(""):K.buffer.length===1?K.buffer.first():K.buffer.concat(K.length),K.buffer.clear()):Y=K.buffer.consume(ee,K.decoder),Y);var Y}function W(ee){var K=ee._readableState;a("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,b.nextTick(q,K,ee))}function q(ee,K){if(a("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,K.readable=!1,K.emit("end"),ee.autoDestroy)){var Y=K._writableState;(!Y||Y.autoDestroy&&Y.finished)&&K.destroy()}}function re(ee,K){for(var Y=0,$=ee.length;Y<$;Y++)if(ee[Y]===K)return Y;return-1}M.prototype.read=function(ee){a("read",ee),ee=parseInt(ee,10);var K=this._readableState,Y=ee;if(ee!==0&&(K.emittedReadable=!1),ee===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return a("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?W(this):C(this),null;if((ee=k(ee,K))===0&&K.ended)return K.length===0&&W(this),null;var $,ne=K.needReadable;return a("need readable",ne),(K.length===0||K.length-ee<K.highWaterMark)&&a("length less than watermark",ne=!0),K.ended||K.reading?a("reading or ended",ne=!1):ne&&(a("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(ee=k(Y,K))),($=ee>0?B(ee,K):null)===null?(K.needReadable=K.length<=K.highWaterMark,ee=0):(K.length-=ee,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),Y!==ee&&K.ended&&W(this)),$!==null&&this.emit("data",$),$},M.prototype._read=function(ee){x(this,new m("_read()"))},M.prototype.pipe=function(ee,K){var Y=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=ee;break;case 1:$.pipes=[$.pipes,ee];break;default:$.pipes.push(ee)}$.pipesCount+=1,a("pipe count=%d opts=%j",$.pipesCount,K);var ne=K&&K.end===!1||ee===b.stdout||ee===b.stderr?pe:ae;function ae(){a("onend"),ee.end()}$.endEmitted?b.nextTick(ne):Y.once("end",ne),ee.on("unpipe",function fe(Oe,Se){a("onunpipe"),Oe===Y&&Se&&Se.hasUnpiped===!1&&(Se.hasUnpiped=!0,a("cleanup"),ee.removeListener("close",Te),ee.removeListener("finish",Ce),ee.removeListener("drain",se),ee.removeListener("error",ye),ee.removeListener("unpipe",fe),Y.removeListener("end",ae),Y.removeListener("end",pe),Y.removeListener("data",me),ce=!0,!$.awaitDrain||ee._writableState&&!ee._writableState.needDrain||se())});var se=function(fe){return function(){var Oe=fe._readableState;a("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&_(fe,"data")&&(Oe.flowing=!0,j(fe))}}(Y);ee.on("drain",se);var ce=!1;function me(fe){a("ondata");var Oe=ee.write(fe);a("dest.write",Oe),Oe===!1&&(($.pipesCount===1&&$.pipes===ee||$.pipesCount>1&&re($.pipes,ee)!==-1)&&!ce&&(a("false write response, pause",$.awaitDrain),$.awaitDrain++),Y.pause())}function ye(fe){a("onerror",fe),pe(),ee.removeListener("error",ye),_(ee,"error")===0&&x(ee,fe)}function Te(){ee.removeListener("finish",Ce),pe()}function Ce(){a("onfinish"),ee.removeListener("close",Te),pe()}function pe(){a("unpipe"),Y.unpipe(ee)}return Y.on("data",me),function(fe,Oe,Se){if(typeof fe.prependListener=="function")return fe.prependListener(Oe,Se);fe._events&&fe._events[Oe]?Array.isArray(fe._events[Oe])?fe._events[Oe].unshift(Se):fe._events[Oe]=[Se,fe._events[Oe]]:fe.on(Oe,Se)}(ee,"error",ye),ee.once("close",Te),ee.once("finish",Ce),ee.emit("pipe",Y),$.flowing||(a("pipe resume"),Y.resume()),ee},M.prototype.unpipe=function(ee){var K=this._readableState,Y={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return ee&&ee!==K.pipes||(ee||(ee=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,ee&&ee.emit("unpipe",this,Y)),this;if(!ee){var $=K.pipes,ne=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var ae=0;ae<ne;ae++)$[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var se=re(K.pipes,ee);return se===-1||(K.pipes.splice(se,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),ee.emit("unpipe",this,Y)),this},M.prototype.on=function(ee,K){var Y=g.prototype.on.call(this,ee,K),$=this._readableState;return ee==="data"?($.readableListening=this.listenerCount("readable")>0,$.flowing!==!1&&this.resume()):ee==="readable"&&($.endEmitted||$.readableListening||($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,a("on readable",$.length,$.reading),$.length?C(this):$.reading||b.nextTick(D,this))),Y},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(ee,K){var Y=g.prototype.removeListener.call(this,ee,K);return ee==="readable"&&b.nextTick(X,this),Y},M.prototype.removeAllListeners=function(ee){var K=g.prototype.removeAllListeners.apply(this,arguments);return ee!=="readable"&&ee!==void 0||b.nextTick(X,this),K},M.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(a("resume"),ee.flowing=!ee.readableListening,function(K,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,b.nextTick(V,K,Y))}(this,ee)),ee.paused=!1,this},M.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(ee){var K=this,Y=this._readableState,$=!1;for(var ne in ee.on("end",function(){if(a("wrapped end"),Y.decoder&&!Y.ended){var se=Y.decoder.end();se&&se.length&&K.push(se)}K.push(null)}),ee.on("data",function(se){a("wrapped data"),Y.decoder&&(se=Y.decoder.write(se)),Y.objectMode&&se==null||(Y.objectMode||se&&se.length)&&(K.push(se)||($=!0,ee.pause()))}),ee)this[ne]===void 0&&typeof ee[ne]=="function"&&(this[ne]=function(se){return function(){return ee[se].apply(ee,arguments)}}(ne));for(var ae=0;ae<y.length;ae++)ee.on(y[ae],this.emit.bind(this,y[ae]));return this._read=function(se){a("wrapped _read",se),$&&($=!1,ee.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(68221)),n(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),M._fromList=B,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(M.from=function(ee,K){return r===void 0&&(r=e(31748)),r(M,ee,K)})},74308:function(F,L,e){F.exports=t;var T=e(74322).q,b=T.ERR_METHOD_NOT_IMPLEMENTED,a=T.ERR_MULTIPLE_CALLBACK,_=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,g=T.ERR_TRANSFORM_WITH_LENGTH_0,h=e(37865);function o(r,s){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new a);l.writechunk=null,l.writecb=null,s!=null&&this.push(s),u(r);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);h.call(this,r),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(s,l){n(r,s,l)})}function n(r,s,l){if(s)return r.emit("error",s);if(l!=null&&r.push(l),r._writableState.length)throw new g;if(r._transformState.transforming)throw new _;return r.push(null)}e(42018)(t,h),t.prototype.push=function(r,s){return this._transformState.needTransform=!1,h.prototype.push.call(this,r,s)},t.prototype._transform=function(r,s,l){l(new b("_transform()"))},t.prototype._write=function(r,s,l){var u=this._transformState;if(u.writecb=l,u.writechunk=r,u.writeencoding=s,!u.transforming){var d=this._readableState;(u.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},t.prototype._read=function(r){var s=this._transformState;s.writechunk===null||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},t.prototype._destroy=function(r,s){h.prototype._destroy.call(this,r,function(l){s(l)})}},37493:function(F,L,e){var T,b=e(90386);function a(R){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(X,D,V){var j=X.entry;for(X.entry=null;j;){var B=j.callback;D.pendingcb--,B(void 0),j=j.next}D.corkedRequestsFree.next=X})(O,R)}}F.exports=M,M.WritableState=v;var _,g={deprecate:e(20588)},h=e(71405),o=e(12856).Buffer,t=e.g.Uint8Array||function(){},i=e(65756),n=e(56306).getHighWaterMark,r=e(74322).q,s=r.ERR_INVALID_ARG_TYPE,l=r.ERR_METHOD_NOT_IMPLEMENTED,u=r.ERR_MULTIPLE_CALLBACK,d=r.ERR_STREAM_CANNOT_PIPE,c=r.ERR_STREAM_DESTROYED,w=r.ERR_STREAM_NULL_VALUES,m=r.ERR_STREAM_WRITE_AFTER_END,f=r.ERR_UNKNOWN_ENCODING,x=i.errorOrDestroy;function y(){}function v(R,O,X){T=T||e(37865),R=R||{},typeof X!="boolean"&&(X=O instanceof T),this.objectMode=!!R.objectMode,X&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=n(this,R,"writableHighWaterMark",X),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=R.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(j,B){var W=j._writableState,q=W.sync,re=W.writecb;if(typeof re!="function")throw new u;if(function(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}(W),B)(function(K,Y,$,ne,ae){--Y.pendingcb,$?(b.nextTick(ae,ne),b.nextTick(P,K,Y),K._writableState.errorEmitted=!0,x(K,ne)):(ae(ne),K._writableState.errorEmitted=!0,x(K,ne),P(K,Y))})(j,W,q,B,re);else{var ee=k(W)||j.destroyed;ee||W.corked||W.bufferProcessing||!W.bufferedRequest||A(j,W),q?b.nextTick(S,j,W,ee,re):S(j,W,ee,re)}})(O,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function M(R){var O=this instanceof(T=T||e(37865));if(!O&&!_.call(M,this))return new M(R);this._writableState=new v(R,this,O),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),h.call(this)}function p(R,O,X,D,V,j,B){O.writelen=D,O.writecb=B,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new c("write")):X?R._writev(V,O.onwrite):R._write(V,j,O.onwrite),O.sync=!1}function S(R,O,X,D){X||function(V,j){j.length===0&&j.needDrain&&(j.needDrain=!1,V.emit("drain"))}(R,O),O.pendingcb--,D(),P(R,O)}function A(R,O){O.bufferProcessing=!0;var X=O.bufferedRequest;if(R._writev&&X&&X.next){var D=O.bufferedRequestCount,V=new Array(D),j=O.corkedRequestsFree;j.entry=X;for(var B=0,W=!0;X;)V[B]=X,X.isBuf||(W=!1),X=X.next,B+=1;V.allBuffers=W,p(R,O,!0,O.length,V,"",j.finish),O.pendingcb++,O.lastBufferedRequest=null,j.next?(O.corkedRequestsFree=j.next,j.next=null):O.corkedRequestsFree=new a(O),O.bufferedRequestCount=0}else{for(;X;){var q=X.chunk,re=X.encoding,ee=X.callback;if(p(R,O,!1,O.objectMode?1:q.length,q,re,ee),X=X.next,O.bufferedRequestCount--,O.writing)break}X===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=X,O.bufferProcessing=!1}function k(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function C(R,O){R._final(function(X){O.pendingcb--,X&&x(R,X),O.prefinished=!0,R.emit("prefinish"),P(R,O)})}function P(R,O){var X=k(O);if(X&&(function(V,j){j.prefinished||j.finalCalled||(typeof V._final!="function"||j.destroyed?(j.prefinished=!0,V.emit("prefinish")):(j.pendingcb++,j.finalCalled=!0,b.nextTick(C,V,j)))}(R,O),O.pendingcb===0&&(O.finished=!0,R.emit("finish"),O.autoDestroy))){var D=R._readableState;(!D||D.autoDestroy&&D.endEmitted)&&R.destroy()}return X}e(42018)(M,h),v.prototype.getBuffer=function(){for(var R=this.bufferedRequest,O=[];R;)O.push(R),R=R.next;return O},function(){try{Object.defineProperty(v.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(R){return!!_.call(this,R)||this===M&&R&&R._writableState instanceof v}})):_=function(R){return R instanceof this},M.prototype.pipe=function(){x(this,new d)},M.prototype.write=function(R,O,X){var D,V=this._writableState,j=!1,B=!V.objectMode&&(D=R,o.isBuffer(D)||D instanceof t);return B&&!o.isBuffer(R)&&(R=function(W){return o.from(W)}(R)),typeof O=="function"&&(X=O,O=null),B?O="buffer":O||(O=V.defaultEncoding),typeof X!="function"&&(X=y),V.ending?function(W,q){var re=new m;x(W,re),b.nextTick(q,re)}(this,X):(B||function(W,q,re,ee){var K;return re===null?K=new w:typeof re=="string"||q.objectMode||(K=new s("chunk",["string","Buffer"],re)),!K||(x(W,K),b.nextTick(ee,K),!1)}(this,V,R,X))&&(V.pendingcb++,j=function(W,q,re,ee,K,Y){if(!re){var $=function(ce,me,ye){return ce.objectMode||ce.decodeStrings===!1||typeof me!="string"||(me=o.from(me,ye)),me}(q,ee,K);ee!==$&&(re=!0,K="buffer",ee=$)}var ne=q.objectMode?1:ee.length;q.length+=ne;var ae=q.length<q.highWaterMark;if(ae||(q.needDrain=!0),q.writing||q.corked){var se=q.lastBufferedRequest;q.lastBufferedRequest={chunk:ee,encoding:K,isBuf:re,callback:Y,next:null},se?se.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else p(W,q,!1,ne,ee,K,Y);return ae}(this,V,B,R,O,X)),j},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||A(this,R))},M.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new f(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(R,O,X){X(new l("_write()"))},M.prototype._writev=null,M.prototype.end=function(R,O,X){var D=this._writableState;return typeof R=="function"?(X=R,R=null,O=null):typeof O=="function"&&(X=O,O=null),R!=null&&this.write(R,O),D.corked&&(D.corked=1,this.uncork()),D.ending||function(V,j,B){j.ending=!0,P(V,j),B&&(j.finished?b.nextTick(B):V.once("finish",B)),j.ended=!0,V.writable=!1}(this,D,X),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),M.prototype.destroy=i.destroy,M.prototype._undestroy=i.undestroy,M.prototype._destroy=function(R,O){O(R)}},68221:function(F,L,e){var T,b=e(90386);function a(w,m,f){return m in w?Object.defineProperty(w,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):w[m]=f,w}var _=e(12726),g=Symbol("lastResolve"),h=Symbol("lastReject"),o=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function s(w,m){return{value:w,done:m}}function l(w){var m=w[g];if(m!==null){var f=w[r].read();f!==null&&(w[i]=null,w[g]=null,w[h]=null,m(s(f,!1)))}}function u(w){b.nextTick(l,w)}var d=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((a(T={get stream(){return this[r]},next:function(){var w=this,m=this[o];if(m!==null)return Promise.reject(m);if(this[t])return Promise.resolve(s(void 0,!0));if(this[r].destroyed)return new Promise(function(v,M){b.nextTick(function(){w[o]?M(w[o]):v(s(void 0,!0))})});var f,x=this[i];if(x)f=new Promise(function(v,M){return function(p,S){v.then(function(){M[t]?p(s(void 0,!0)):M[n](p,S)},S)}}(x,this));else{var y=this[r].read();if(y!==null)return Promise.resolve(s(y,!1));f=new Promise(this[n])}return this[i]=f,f}},Symbol.asyncIterator,function(){return this}),a(T,"return",function(){var w=this;return new Promise(function(m,f){w[r].destroy(null,function(x){x?f(x):m(s(void 0,!0))})})}),T),d);F.exports=function(w){var m,f=Object.create(c,(a(m={},r,{value:w,writable:!0}),a(m,g,{value:null,writable:!0}),a(m,h,{value:null,writable:!0}),a(m,o,{value:null,writable:!0}),a(m,t,{value:w._readableState.endEmitted,writable:!0}),a(m,n,{value:function(x,y){var v=f[r].read();v?(f[i]=null,f[g]=null,f[h]=null,x(s(v,!1))):(f[g]=x,f[h]=y)},writable:!0}),m));return f[i]=null,_(w,function(x){if(x&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=f[h];return y!==null&&(f[i]=null,f[g]=null,f[h]=null,y(x)),void(f[o]=x)}var v=f[g];v!==null&&(f[i]=null,f[g]=null,f[h]=null,v(s(void 0,!0))),f[t]=!0}),w.on("readable",u.bind(null,f)),f}},31125:function(F,L,e){function T(o,t){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),i.push.apply(i,n)}return i}function b(o,t,i){return t in o?Object.defineProperty(o,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[t]=i,o}function a(o,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}var _=e(12856).Buffer,g=e(69862).inspect,h=g&&g.custom||"inspect";F.exports=function(){function o(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var t,i;return t=o,i=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,s=""+r.data;r=r.next;)s+=n+r.data;return s}},{key:"concat",value:function(n){if(this.length===0)return _.alloc(0);for(var r,s,l,u=_.allocUnsafe(n>>>0),d=this.head,c=0;d;)r=d.data,s=u,l=c,_.prototype.copy.call(r,s,l),c+=d.data.length,d=d.next;return u}},{key:"consume",value:function(n,r){var s;return n<this.head.data.length?(s=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):s=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,s=1,l=r.data;for(n-=l.length;r=r.next;){var u=r.data,d=n>u.length?u.length:n;if(d===u.length?l+=u:l+=u.slice(0,n),(n-=d)==0){d===u.length?(++s,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(d));break}++s}return this.length-=s,l}},{key:"_getBuffer",value:function(n){var r=_.allocUnsafe(n),s=this.head,l=1;for(s.data.copy(r),n-=s.data.length;s=s.next;){var u=s.data,d=n>u.length?u.length:n;if(u.copy(r,r.length-n,0,d),(n-=d)==0){d===u.length?(++l,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=u.slice(d));break}++l}return this.length-=l,r}},{key:h,value:function(n,r){return g(this,function(s){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?T(Object(u),!0).forEach(function(d){b(s,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):T(Object(u)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(u,d))})}return s}({},r,{depth:0,customInspect:!1}))}}],i&&a(t.prototype,i),o}()},65756:function(F,L,e){var T=e(90386);function b(g,h){_(g,h),a(g)}function a(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function _(g,h){g.emit("error",h)}F.exports={destroy:function(g,h){var o=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(h?h(g):g&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,T.nextTick(_,this,g)):T.nextTick(_,this,g)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(g||null,function(n){!h&&n?o._writableState?o._writableState.errorEmitted?T.nextTick(a,o):(o._writableState.errorEmitted=!0,T.nextTick(b,o,n)):T.nextTick(b,o,n):h?(T.nextTick(a,o),h(n)):T.nextTick(a,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(g,h){var o=g._readableState,t=g._writableState;o&&o.autoDestroy||t&&t.autoDestroy?g.destroy(h):g.emit("error",h)}}},12726:function(F,L,e){var T=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function b(){}F.exports=function a(_,g,h){if(typeof g=="function")return a(_,null,g);g||(g={}),h=function(w){var m=!1;return function(){if(!m){m=!0;for(var f=arguments.length,x=new Array(f),y=0;y<f;y++)x[y]=arguments[y];w.apply(this,x)}}}(h||b);var o=g.readable||g.readable!==!1&&_.readable,t=g.writable||g.writable!==!1&&_.writable,i=function(){_.writable||r()},n=_._writableState&&_._writableState.finished,r=function(){t=!1,n=!0,o||h.call(_)},s=_._readableState&&_._readableState.endEmitted,l=function(){o=!1,s=!0,t||h.call(_)},u=function(w){h.call(_,w)},d=function(){var w;return o&&!s?(_._readableState&&_._readableState.ended||(w=new T),h.call(_,w)):t&&!n?(_._writableState&&_._writableState.ended||(w=new T),h.call(_,w)):void 0},c=function(){_.req.on("finish",r)};return function(w){return w.setHeader&&typeof w.abort=="function"}(_)?(_.on("complete",r),_.on("abort",d),_.req?c():_.on("request",c)):t&&!_._writableState&&(_.on("end",i),_.on("close",i)),_.on("end",l),_.on("finish",r),g.error!==!1&&_.on("error",u),_.on("close",d),function(){_.removeListener("complete",r),_.removeListener("abort",d),_.removeListener("request",c),_.req&&_.req.removeListener("finish",r),_.removeListener("end",i),_.removeListener("close",i),_.removeListener("finish",r),_.removeListener("end",l),_.removeListener("error",u),_.removeListener("close",d)}}},31748:function(F){F.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(F,L,e){var T,b=e(74322).q,a=b.ERR_MISSING_ARGS,_=b.ERR_STREAM_DESTROYED;function g(t){if(t)throw t}function h(t){t()}function o(t,i){return t.pipe(i)}F.exports=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,s=function(u){return u.length?typeof u[u.length-1]!="function"?g:u.pop():g}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new a("streams");var l=i.map(function(u,d){var c=d<i.length-1;return function(w,m,f,x){x=function(M){var p=!1;return function(){p||(p=!0,M.apply(void 0,arguments))}}(x);var y=!1;w.on("close",function(){y=!0}),T===void 0&&(T=e(12726)),T(w,{readable:m,writable:f},function(M){if(M)return x(M);y=!0,x()});var v=!1;return function(M){if(!y&&!v)return v=!0,function(p){return p.setHeader&&typeof p.abort=="function"}(w)?w.abort():typeof w.destroy=="function"?w.destroy():void x(M||new _("pipe"))}}(u,c,d>0,function(w){r||(r=w),w&&l.forEach(h),c||(l.forEach(h),s(r))})});return i.reduce(o)}},56306:function(F,L,e){var T=e(74322).q.ERR_INVALID_OPT_VALUE;F.exports={getHighWaterMark:function(b,a,_,g){var h=function(o,t,i){return o.highWaterMark!=null?o.highWaterMark:t?o[i]:null}(a,g,_);if(h!=null){if(!isFinite(h)||Math.floor(h)!==h||h<0)throw new T(g?_:"highWaterMark",h);return Math.floor(h)}return b.objectMode?16:16384}}},71405:function(F,L,e){F.exports=e(15398).EventEmitter},68019:function(F,L,e){var T=e(71665).Buffer,b=T.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(s){var l;switch(this.encoding=function(u){var d=function(c){if(!c)return"utf8";for(var w;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(w)return;c=(""+c).toLowerCase(),w=!0}}(u);if(typeof d!="string"&&(T.isEncoding===b||!b(u)))throw new Error("Unknown encoding: "+u);return d||u}(s),this.encoding){case"utf16le":this.text=h,this.end=o,l=4;break;case"utf8":this.fillLast=g,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=T.allocUnsafe(l)}function _(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function g(s){var l=this.lastTotal-this.lastNeed,u=function(d,c,w){if((192&c[0])!=128)return d.lastNeed=0,"";if(d.lastNeed>1&&c.length>1){if((192&c[1])!=128)return d.lastNeed=1,"";if(d.lastNeed>2&&c.length>2&&(192&c[2])!=128)return d.lastNeed=2,""}}(this,s);return u!==void 0?u:this.lastNeed<=s.length?(s.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,l,0,s.length),void(this.lastNeed-=s.length))}function h(s,l){if((s.length-l)%2==0){var u=s.toString("utf16le",l);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",l,s.length-1)}function o(s){var l=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(s,l){var u=(s.length-l)%3;return u===0?s.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",l,s.length-u))}function i(s){var l=s&&s.length?this.write(s):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(s){return s.toString(this.encoding)}function r(s){return s&&s.length?this.write(s):""}L.s=a,a.prototype.write=function(s){if(s.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(s))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?l?l+this.text(s,u):this.text(s,u):l||""},a.prototype.end=function(s){var l=s&&s.length?this.write(s):"";return this.lastNeed?l+"":l},a.prototype.text=function(s,l){var u=function(c,w,m){var f=w.length-1;if(f<m)return 0;var x=_(w[f]);return x>=0?(x>0&&(c.lastNeed=x-1),x):--f<m||x===-2?0:(x=_(w[f]))>=0?(x>0&&(c.lastNeed=x-2),x):--f<m||x===-2?0:(x=_(w[f]))>=0?(x>0&&(x===2?x=0:c.lastNeed=x-3),x):0}(this,s,l);if(!this.lastNeed)return s.toString("utf8",l);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",l,d)},a.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},90715:function(F,L,e){var T=e(32791),b=e(41633)("stream-parser");F.exports=function(c){var w=c&&typeof c._transform=="function",m=c&&typeof c._write=="function";if(!w&&!m)throw new Error("must pass a Writable or Transform stream in");b("extending Parser into stream"),c._bytes=t,c._skipBytes=i,w&&(c._passthrough=n),w?c._transform=s:c._write=r};var a=-1,_=0,g=1,h=2;function o(c){b("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=a,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,w){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||o(this),b("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=w,this._parserState=_}function i(c,w){T(!this._parserCallback,'there is already a "callback" set!'),T(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||o(this),b("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=w,this._parserState=g}function n(c,w){T(!this._parserCallback,'There is already a "callback" set!'),T(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||o(this),b("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=w,this._parserState=h}function r(c,w,m){this._parserInit||o(this),b("write(%o bytes)",c.length),typeof w=="function"&&(m=w),u(this,c,null,m)}function s(c,w,m){this._parserInit||o(this),b("transform(%o bytes)",c.length),typeof w!="function"&&(w=this._parserOutput),u(this,c,w,m)}function l(c,w,m,f){if(c._parserBytesLeft-=w.length,b("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===_?(c._parserBuffers.push(w),c._parserBuffered+=w.length):c._parserState===h&&m(w),c._parserBytesLeft!==0)return f;var x=c._parserCallback;if(x&&c._parserState===_&&c._parserBuffers.length>1&&(w=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==_&&(w=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=a,c._parserBuffers.splice(0),x){var y=[];w&&y.push(w),m&&y.push(m);var v=x.length>y.length;v&&y.push(d(f));var M=x.apply(c,y);if(!v||f===M)return f}}var u=d(function c(w,m,f,x){return w._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):m.length<=w._parserBytesLeft?function(){return l(w,m,f,x)}:function(){var y=m.slice(0,w._parserBytesLeft);return l(w,y,f,function(v){return v?x(v):m.length>y.length?function(){return c(w,m.slice(y.length),f,x)}:void 0})}});function d(c){return function(){for(var w=c.apply(this,arguments);typeof w=="function";)w=w();return w}}},41633:function(F,L,e){var T=e(90386);function b(){var a;try{a=L.storage.debug}catch{}return!a&&T!==void 0&&"env"in T&&(a=T.env.DEBUG),a}(L=F.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},L.formatArgs=function(a){var _=this.useColors;if(a[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+a[0]+(_?"%c ":" ")+"+"+L.humanize(this.diff),_){var g="color: "+this.color;a.splice(1,0,g,"color: inherit");var h=0,o=0;a[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(h++,t==="%c"&&(o=h))}),a.splice(o,0,g)}},L.save=function(a){try{a==null?L.storage.removeItem("debug"):L.storage.debug=a}catch{}},L.load=b,L.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},L.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),L.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],L.formatters.j=function(a){try{return JSON.stringify(a)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},L.enable(b())},74469:function(F,L,e){var T;function b(a){function _(){if(_.enabled){var g=_,h=+new Date,o=h-(T||h);g.diff=o,g.prev=T,g.curr=h,T=h;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=L.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,s){if(r==="%%")return r;n++;var l=L.formatters[s];if(typeof l=="function"){var u=t[n];r=l.call(g,u),t.splice(n,1),n--}return r}),L.formatArgs.call(g,t),(_.log||L.log||console.log.bind(console)).apply(g,t)}}return _.namespace=a,_.enabled=L.enabled(a),_.useColors=L.useColors(),_.color=function(g){var h,o=0;for(h in g)o=(o<<5)-o+g.charCodeAt(h),o|=0;return L.colors[Math.abs(o)%L.colors.length]}(a),typeof L.init=="function"&&L.init(_),_}(L=F.exports=b.debug=b.default=b).coerce=function(a){return a instanceof Error?a.stack||a.message:a},L.disable=function(){L.enable("")},L.enable=function(a){L.save(a),L.names=[],L.skips=[];for(var _=(typeof a=="string"?a:"").split(/[\s,]+/),g=_.length,h=0;h<g;h++)_[h]&&((a=_[h].replace(/\*/g,".*?"))[0]==="-"?L.skips.push(new RegExp("^"+a.substr(1)+"$")):L.names.push(new RegExp("^"+a+"$")))},L.enabled=function(a){var _,g;for(_=0,g=L.skips.length;_<g;_++)if(L.skips[_].test(a))return!1;for(_=0,g=L.names.length;_<g;_++)if(L.names[_].test(a))return!0;return!1},L.humanize=e(11375),L.names=[],L.skips=[],L.formatters={}},11375:function(F){var L=1e3,e=60*L,T=60*e,b=24*T;function a(_,g,h){if(!(_<g))return _<1.5*g?Math.floor(_/g)+" "+h:Math.ceil(_/g)+" "+h+"s"}F.exports=function(_,g){g=g||{};var h,o=typeof _;if(o==="string"&&_.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var n=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*b;case"hours":case"hour":case"hrs":case"hr":case"h":return n*T;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*L;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(_);if(o==="number"&&isNaN(_)===!1)return g.long?a(h=_,b,"day")||a(h,T,"hour")||a(h,e,"minute")||a(h,L,"second")||h+" ms":function(t){return t>=b?Math.round(t/b)+"d":t>=T?Math.round(t/T)+"h":t>=e?Math.round(t/e)+"m":t>=L?Math.round(t/L)+"s":t+"ms"}(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}},99011:function(F,L,e){var T=e(88641);F.exports=function(b,a,_){if(b==null)throw Error("First argument should be a string");if(a==null)throw Error("Separator should be a string or a RegExp");_?(typeof _=="string"||Array.isArray(_))&&(_={ignore:_}):_={},_.escape==null&&(_.escape=!0),_.ignore==null?_.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof _.ignore=="string"&&(_.ignore=[_.ignore]),_.ignore=_.ignore.map(function(r){return r.length===1&&(r+=r),r}));var g=T.parse(b,{flat:!0,brackets:_.ignore}),h=g[0].split(a);if(_.escape){for(var o=[],t=0;t<h.length;t++){var i=h[t],n=h[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(o.push(i+a+n),t++):o.push(i)}h=o}for(t=0;t<h.length;t++)g[0]=h[t],h[t]=T.stringify(g,{flat:!0});return h}},68664:function(F){F.exports=function(L){for(var e=L.length,T=new Array(e),b=new Array(e),a=new Array(e),_=new Array(e),g=new Array(e),h=new Array(e),o=0;o<e;++o)T[o]=-1,b[o]=0,a[o]=!1,_[o]=0,g[o]=-1,h[o]=[];var t,i=0,n=[],r=[];function s(d){var c=[d],w=[d];for(T[d]=b[d]=i,a[d]=!0,i+=1;w.length>0;){d=w[w.length-1];var m=L[d];if(_[d]<m.length){for(var f=_[d];f<m.length;++f){var x=m[f];if(T[x]<0){T[x]=b[x]=i,a[x]=!0,i+=1,c.push(x),w.push(x);break}a[x]&&(b[d]=0|Math.min(b[d],b[x])),g[x]>=0&&h[d].push(g[x])}_[d]=f}else{if(b[d]===T[d]){var y=[],v=[],M=0;for(f=c.length-1;f>=0;--f){var p=c[f];if(a[p]=!1,y.push(p),v.push(h[p]),M+=h[p].length,g[p]=n.length,p===d){c.length=f;break}}n.push(y);var S=new Array(M);for(f=0;f<v.length;f++)for(var A=0;A<v[f].length;A++)S[--M]=v[f][A];r.push(S)}w.pop()}}}for(o=0;o<e;++o)T[o]<0&&s(o);for(o=0;o<r.length;o++){var l=r[o];if(l.length!==0){l.sort(function(d,c){return d-c}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);r[o]=t}}return{components:n,adjacencyList:r}}},7095:function(F,L,e){e.r(L);var T=2*Math.PI,b=function(g,h,o,t,i,n,r){var s=g.x,l=g.y;return{x:t*(s*=h)-i*(l*=o)+n,y:i*s+t*l+r}},a=function(g,h){var o=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),t=Math.cos(g),i=Math.sin(g),n=Math.cos(g+h),r=Math.sin(g+h);return[{x:t-i*o,y:i+t*o},{x:n+r*o,y:r-n*o},{x:n,y:r}]},_=function(g,h,o,t){var i=g*o+h*t;return i>1&&(i=1),i<-1&&(i=-1),(g*t-h*o<0?-1:1)*Math.acos(i)};L.default=function(g){var h=g.px,o=g.py,t=g.cx,i=g.cy,n=g.rx,r=g.ry,s=g.xAxisRotation,l=s===void 0?0:s,u=g.largeArcFlag,d=u===void 0?0:u,c=g.sweepFlag,w=c===void 0?0:c,m=[];if(n===0||r===0)return[];var f=Math.sin(l*T/360),x=Math.cos(l*T/360),y=x*(h-t)/2+f*(o-i)/2,v=-f*(h-t)/2+x*(o-i)/2;if(y===0&&v===0)return[];n=Math.abs(n),r=Math.abs(r);var M=Math.pow(y,2)/Math.pow(n,2)+Math.pow(v,2)/Math.pow(r,2);M>1&&(n*=Math.sqrt(M),r*=Math.sqrt(M));var p=function(D,V,j,B,W,q,re,ee,K,Y,$,ne){var ae=Math.pow(W,2),se=Math.pow(q,2),ce=Math.pow($,2),me=Math.pow(ne,2),ye=ae*se-ae*me-se*ce;ye<0&&(ye=0),ye/=ae*me+se*ce;var Te=(ye=Math.sqrt(ye)*(re===ee?-1:1))*W/q*ne,Ce=ye*-q/W*$,pe=Y*Te-K*Ce+(D+j)/2,fe=K*Te+Y*Ce+(V+B)/2,Oe=($-Te)/W,Se=(ne-Ce)/q,Me=(-$-Te)/W,ue=(-ne-Ce)/q,le=_(1,0,Oe,Se),ie=_(Oe,Se,Me,ue);return ee===0&&ie>0&&(ie-=T),ee===1&&ie<0&&(ie+=T),[pe,fe,le,ie]}(h,o,t,i,n,r,d,w,f,x,y,v),S=function(D,V){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(j,B){var W=[],q=!0,re=!1,ee=void 0;try{for(var K,Y=j[Symbol.iterator]();!(q=(K=Y.next()).done)&&(W.push(K.value),!B||W.length!==B);q=!0);}catch($){re=!0,ee=$}finally{try{!q&&Y.return&&Y.return()}finally{if(re)throw ee}}return W}(D,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(p,4),A=S[0],k=S[1],C=S[2],P=S[3],R=Math.abs(P)/(T/4);Math.abs(1-R)<1e-7&&(R=1);var O=Math.max(Math.ceil(R),1);P/=O;for(var X=0;X<O;X++)m.push(a(C,P)),C+=P;return m.map(function(D){var V=b(D[0],n,r,x,f,A,k),j=V.x,B=V.y,W=b(D[1],n,r,x,f,A,k),q=W.x,re=W.y,ee=b(D[2],n,r,x,f,A,k);return{x1:j,y1:B,x2:q,y2:re,x:ee.x,y:ee.y}})}},1750:function(F,L,e){var T=e(95616),b=e(65185),a=e(29988),_=e(89546),g=e(32791);F.exports=function(h){if(Array.isArray(h)&&h.length===1&&typeof h[0]=="string"&&(h=h[0]),typeof h=="string"&&(g(_(h),"String is not an SVG path."),h=T(h)),g(Array.isArray(h),"Argument should be a string or an array of path segments."),h=b(h),!(h=a(h)).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],t=0,i=h.length;t<i;t++)for(var n=h[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<o[0]&&(o[0]=n[r+0]),n[r+1]<o[1]&&(o[1]=n[r+1]),n[r+0]>o[2]&&(o[2]=n[r+0]),n[r+1]>o[3]&&(o[3]=n[r+1]);return o}},29988:function(F,L,e){F.exports=function(_){for(var g,h=[],o=0,t=0,i=0,n=0,r=null,s=null,l=0,u=0,d=0,c=_.length;d<c;d++){var w=_[d],m=w[0];switch(m){case"M":i=w[1],n=w[2];break;case"A":var f=T({px:l,py:u,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!f.length)continue;for(var x,y=0;y<f.length;y++)w=["C",(x=f[y]).x1,x.y1,x.x2,x.y2,x.x,x.y],y<f.length-1&&h.push(w);break;case"S":var v=l,M=u;g!="C"&&g!="S"||(v+=v-o,M+=M-t),w=["C",v,M,w[1],w[2],w[3],w[4]];break;case"T":g=="Q"||g=="T"?(r=2*l-r,s=2*u-s):(r=l,s=u),w=a(l,u,r,s,w[1],w[2]);break;case"Q":r=w[1],s=w[2],w=a(l,u,w[1],w[2],w[3],w[4]);break;case"L":w=b(l,u,w[1],w[2]);break;case"H":w=b(l,u,w[1],u);break;case"V":w=b(l,u,l,w[1]);break;case"Z":w=b(l,u,i,n)}g=m,l=w[w.length-2],u=w[w.length-1],w.length>4?(o=w[w.length-4],t=w[w.length-3]):(o=l,t=u),h.push(w)}return h};var T=e(7095);function b(_,g,h,o){return["C",_,g,h,o,h,o]}function a(_,g,h,o,t,i){return["C",_/3+.6666666666666666*h,g/3+.6666666666666666*o,t/3+.6666666666666666*h,i/3+.6666666666666666*o,t,i]}},82019:function(F,L,e){var T,b=e(1750),a=e(95616),_=e(31457),g=e(89546),h=e(44781),o=document.createElement("canvas"),t=o.getContext("2d");F.exports=function(i,n){if(!g(i))throw Error("Argument should be valid svg path string");var r,s;n||(n={}),n.shape?(r=n.shape[0],s=n.shape[1]):(r=o.width=n.w||n.width||200,s=o.height=n.h||n.height||200);var l=Math.min(r,s),u=n.stroke||0,d=n.viewbox||n.viewBox||b(i),c=[r/(d[2]-d[0]),s/(d[3]-d[1])],w=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,s),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*r,.5*s),t.scale(w,w),function(){if(T!=null)return T;var x=document.createElement("canvas").getContext("2d");if(x.canvas.width=x.canvas.height=1,!window.Path2D)return T=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");x.fillStyle="black",x.fill(y);var v=x.getImageData(0,0,1,1);return T=v&&v.data&&v.data[3]===255}()){var m=new Path2D(i);t.fill(m),u&&t.stroke(m)}else{var f=a(i);_(t,f),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),h(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},84267:function(F,L,e){var T;(function(b){var a=/^\s+/,_=/\s+$/,g=0,h=b.round,o=b.min,t=b.max,i=b.random;function n($,ne){if(ne=ne||{},($=$||"")instanceof n)return $;if(!(this instanceof n))return new n($,ne);var ae=function(se){var ce,me,ye,Te={r:0,g:0,b:0},Ce=1,pe=null,fe=null,Oe=null,Se=!1,Me=!1;return typeof se=="string"&&(se=function(ue){ue=ue.replace(a,"").replace(_,"").toLowerCase();var le,ie=!1;if(C[ue])ue=C[ue],ie=!0;else if(ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(le=K.rgb.exec(ue))?{r:le[1],g:le[2],b:le[3]}:(le=K.rgba.exec(ue))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=K.hsl.exec(ue))?{h:le[1],s:le[2],l:le[3]}:(le=K.hsla.exec(ue))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=K.hsv.exec(ue))?{h:le[1],s:le[2],v:le[3]}:(le=K.hsva.exec(ue))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=K.hex8.exec(ue))?{r:D(le[1]),g:D(le[2]),b:D(le[3]),a:W(le[4]),format:ie?"name":"hex8"}:(le=K.hex6.exec(ue))?{r:D(le[1]),g:D(le[2]),b:D(le[3]),format:ie?"name":"hex"}:(le=K.hex4.exec(ue))?{r:D(le[1]+""+le[1]),g:D(le[2]+""+le[2]),b:D(le[3]+""+le[3]),a:W(le[4]+""+le[4]),format:ie?"name":"hex8"}:!!(le=K.hex3.exec(ue))&&{r:D(le[1]+""+le[1]),g:D(le[2]+""+le[2]),b:D(le[3]+""+le[3]),format:ie?"name":"hex"}}(se)),typeof se=="object"&&(Y(se.r)&&Y(se.g)&&Y(se.b)?(ce=se.r,me=se.g,ye=se.b,Te={r:255*O(ce,255),g:255*O(me,255),b:255*O(ye,255)},Se=!0,Me=String(se.r).substr(-1)==="%"?"prgb":"rgb"):Y(se.h)&&Y(se.s)&&Y(se.v)?(pe=j(se.s),fe=j(se.v),Te=function(ue,le,ie){ue=6*O(ue,360),le=O(le,100),ie=O(ie,100);var ge=b.floor(ue),Ae=ue-ge,we=ie*(1-le),Ne=ie*(1-Ae*le),He=ie*(1-(1-Ae)*le),de=ge%6;return{r:255*[ie,Ne,we,we,He,ie][de],g:255*[He,ie,ie,Ne,we,we][de],b:255*[we,we,He,ie,ie,Ne][de]}}(se.h,pe,fe),Se=!0,Me="hsv"):Y(se.h)&&Y(se.s)&&Y(se.l)&&(pe=j(se.s),Oe=j(se.l),Te=function(ue,le,ie){var ge,Ae,we;function Ne(Le,Ee,Re){return Re<0&&(Re+=1),Re>1&&(Re-=1),Re<1/6?Le+6*(Ee-Le)*Re:Re<.5?Ee:Re<2/3?Le+(Ee-Le)*(2/3-Re)*6:Le}if(ue=O(ue,360),le=O(le,100),ie=O(ie,100),le===0)ge=Ae=we=ie;else{var He=ie<.5?ie*(1+le):ie+le-ie*le,de=2*ie-He;ge=Ne(de,He,ue+1/3),Ae=Ne(de,He,ue),we=Ne(de,He,ue-1/3)}return{r:255*ge,g:255*Ae,b:255*we}}(se.h,pe,Oe),Se=!0,Me="hsl"),se.hasOwnProperty("a")&&(Ce=se.a)),Ce=R(Ce),{ok:Se,format:se.format||Me,r:o(255,t(Te.r,0)),g:o(255,t(Te.g,0)),b:o(255,t(Te.b,0)),a:Ce}}($);this._originalInput=$,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=h(100*this._a)/100,this._format=ne.format||ae.format,this._gradientType=ne.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=ae.ok,this._tc_id=g++}function r($,ne,ae){$=O($,255),ne=O(ne,255),ae=O(ae,255);var se,ce,me=t($,ne,ae),ye=o($,ne,ae),Te=(me+ye)/2;if(me==ye)se=ce=0;else{var Ce=me-ye;switch(ce=Te>.5?Ce/(2-me-ye):Ce/(me+ye),me){case $:se=(ne-ae)/Ce+(ne<ae?6:0);break;case ne:se=(ae-$)/Ce+2;break;case ae:se=($-ne)/Ce+4}se/=6}return{h:se,s:ce,l:Te}}function s($,ne,ae){$=O($,255),ne=O(ne,255),ae=O(ae,255);var se,ce,me=t($,ne,ae),ye=o($,ne,ae),Te=me,Ce=me-ye;if(ce=me===0?0:Ce/me,me==ye)se=0;else{switch(me){case $:se=(ne-ae)/Ce+(ne<ae?6:0);break;case ne:se=(ae-$)/Ce+2;break;case ae:se=($-ne)/Ce+4}se/=6}return{h:se,s:ce,v:Te}}function l($,ne,ae,se){var ce=[V(h($).toString(16)),V(h(ne).toString(16)),V(h(ae).toString(16))];return se&&ce[0].charAt(0)==ce[0].charAt(1)&&ce[1].charAt(0)==ce[1].charAt(1)&&ce[2].charAt(0)==ce[2].charAt(1)?ce[0].charAt(0)+ce[1].charAt(0)+ce[2].charAt(0):ce.join("")}function u($,ne,ae,se){return[V(B(se)),V(h($).toString(16)),V(h(ne).toString(16)),V(h(ae).toString(16))].join("")}function d($,ne){ne=ne===0?0:ne||10;var ae=n($).toHsl();return ae.s-=ne/100,ae.s=X(ae.s),n(ae)}function c($,ne){ne=ne===0?0:ne||10;var ae=n($).toHsl();return ae.s+=ne/100,ae.s=X(ae.s),n(ae)}function w($){return n($).desaturate(100)}function m($,ne){ne=ne===0?0:ne||10;var ae=n($).toHsl();return ae.l+=ne/100,ae.l=X(ae.l),n(ae)}function f($,ne){ne=ne===0?0:ne||10;var ae=n($).toRgb();return ae.r=t(0,o(255,ae.r-h(-ne/100*255))),ae.g=t(0,o(255,ae.g-h(-ne/100*255))),ae.b=t(0,o(255,ae.b-h(-ne/100*255))),n(ae)}function x($,ne){ne=ne===0?0:ne||10;var ae=n($).toHsl();return ae.l-=ne/100,ae.l=X(ae.l),n(ae)}function y($,ne){var ae=n($).toHsl(),se=(ae.h+ne)%360;return ae.h=se<0?360+se:se,n(ae)}function v($){var ne=n($).toHsl();return ne.h=(ne.h+180)%360,n(ne)}function M($){var ne=n($).toHsl(),ae=ne.h;return[n($),n({h:(ae+120)%360,s:ne.s,l:ne.l}),n({h:(ae+240)%360,s:ne.s,l:ne.l})]}function p($){var ne=n($).toHsl(),ae=ne.h;return[n($),n({h:(ae+90)%360,s:ne.s,l:ne.l}),n({h:(ae+180)%360,s:ne.s,l:ne.l}),n({h:(ae+270)%360,s:ne.s,l:ne.l})]}function S($){var ne=n($).toHsl(),ae=ne.h;return[n($),n({h:(ae+72)%360,s:ne.s,l:ne.l}),n({h:(ae+216)%360,s:ne.s,l:ne.l})]}function A($,ne,ae){ne=ne||6,ae=ae||30;var se=n($).toHsl(),ce=360/ae,me=[n($)];for(se.h=(se.h-(ce*ne>>1)+720)%360;--ne;)se.h=(se.h+ce)%360,me.push(n(se));return me}function k($,ne){ne=ne||6;for(var ae=n($).toHsv(),se=ae.h,ce=ae.s,me=ae.v,ye=[],Te=1/ne;ne--;)ye.push(n({h:se,s:ce,v:me})),me=(me+Te)%1;return ye}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var $=this.toRgb();return(299*$.r+587*$.g+114*$.b)/1e3},getLuminance:function(){var $,ne,ae,se=this.toRgb();return $=se.r/255,ne=se.g/255,ae=se.b/255,.2126*($<=.03928?$/12.92:b.pow(($+.055)/1.055,2.4))+.7152*(ne<=.03928?ne/12.92:b.pow((ne+.055)/1.055,2.4))+.0722*(ae<=.03928?ae/12.92:b.pow((ae+.055)/1.055,2.4))},setAlpha:function($){return this._a=R($),this._roundA=h(100*this._a)/100,this},toHsv:function(){var $=s(this._r,this._g,this._b);return{h:360*$.h,s:$.s,v:$.v,a:this._a}},toHsvString:function(){var $=s(this._r,this._g,this._b),ne=h(360*$.h),ae=h(100*$.s),se=h(100*$.v);return this._a==1?"hsv("+ne+", "+ae+"%, "+se+"%)":"hsva("+ne+", "+ae+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var $=r(this._r,this._g,this._b);return{h:360*$.h,s:$.s,l:$.l,a:this._a}},toHslString:function(){var $=r(this._r,this._g,this._b),ne=h(360*$.h),ae=h(100*$.s),se=h(100*$.l);return this._a==1?"hsl("+ne+", "+ae+"%, "+se+"%)":"hsla("+ne+", "+ae+"%, "+se+"%, "+this._roundA+")"},toHex:function($){return l(this._r,this._g,this._b,$)},toHexString:function($){return"#"+this.toHex($)},toHex8:function($){return function(ne,ae,se,ce,me){var ye=[V(h(ne).toString(16)),V(h(ae).toString(16)),V(h(se).toString(16)),V(B(ce))];return me&&ye[0].charAt(0)==ye[0].charAt(1)&&ye[1].charAt(0)==ye[1].charAt(1)&&ye[2].charAt(0)==ye[2].charAt(1)&&ye[3].charAt(0)==ye[3].charAt(1)?ye[0].charAt(0)+ye[1].charAt(0)+ye[2].charAt(0)+ye[3].charAt(0):ye.join("")}(this._r,this._g,this._b,this._a,$)},toHex8String:function($){return"#"+this.toHex8($)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*O(this._r,255))+"%",g:h(100*O(this._g,255))+"%",b:h(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(100*O(this._r,255))+"%, "+h(100*O(this._g,255))+"%, "+h(100*O(this._b,255))+"%)":"rgba("+h(100*O(this._r,255))+"%, "+h(100*O(this._g,255))+"%, "+h(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(P[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function($){var ne="#"+u(this._r,this._g,this._b,this._a),ae=ne,se=this._gradientType?"GradientType = 1, ":"";if($){var ce=n($);ae="#"+u(ce._r,ce._g,ce._b,ce._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+ne+",endColorstr="+ae+")"},toString:function($){var ne=!!$;$=$||this._format;var ae=!1,se=this._a<1&&this._a>=0;return ne||!se||$!=="hex"&&$!=="hex6"&&$!=="hex3"&&$!=="hex4"&&$!=="hex8"&&$!=="name"?($==="rgb"&&(ae=this.toRgbString()),$==="prgb"&&(ae=this.toPercentageRgbString()),$!=="hex"&&$!=="hex6"||(ae=this.toHexString()),$==="hex3"&&(ae=this.toHexString(!0)),$==="hex4"&&(ae=this.toHex8String(!0)),$==="hex8"&&(ae=this.toHex8String()),$==="name"&&(ae=this.toName()),$==="hsl"&&(ae=this.toHslString()),$==="hsv"&&(ae=this.toHsvString()),ae||this.toHexString()):$==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function($,ne){var ae=$.apply(null,[this].concat([].slice.call(ne)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function($,ne){return $.apply(null,[this].concat([].slice.call(ne)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(p,arguments)}},n.fromRatio=function($,ne){if(typeof $=="object"){var ae={};for(var se in $)$.hasOwnProperty(se)&&(ae[se]=se==="a"?$[se]:j($[se]));$=ae}return n($,ne)},n.equals=function($,ne){return!(!$||!ne)&&n($).toRgbString()==n(ne).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function($,ne,ae){ae=ae===0?0:ae||50;var se=n($).toRgb(),ce=n(ne).toRgb(),me=ae/100;return n({r:(ce.r-se.r)*me+se.r,g:(ce.g-se.g)*me+se.g,b:(ce.b-se.b)*me+se.b,a:(ce.a-se.a)*me+se.a})},n.readability=function($,ne){var ae=n($),se=n(ne);return(b.max(ae.getLuminance(),se.getLuminance())+.05)/(b.min(ae.getLuminance(),se.getLuminance())+.05)},n.isReadable=function($,ne,ae){var se,ce,me,ye,Te,Ce=n.readability($,ne);switch(ce=!1,(me=ae,(ye=((me=me||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ye!=="AAA"&&(ye="AA"),(Te=(me.size||"small").toLowerCase())!=="small"&&Te!=="large"&&(Te="small"),se={level:ye,size:Te}).level+se.size){case"AAsmall":case"AAAlarge":ce=Ce>=4.5;break;case"AAlarge":ce=Ce>=3;break;case"AAAsmall":ce=Ce>=7}return ce},n.mostReadable=function($,ne,ae){var se,ce,me,ye,Te=null,Ce=0;ce=(ae=ae||{}).includeFallbackColors,me=ae.level,ye=ae.size;for(var pe=0;pe<ne.length;pe++)(se=n.readability($,ne[pe]))>Ce&&(Ce=se,Te=n(ne[pe]));return n.isReadable($,Te,{level:me,size:ye})||!ce?Te:(ae.includeFallbackColors=!1,n.mostReadable($,["#fff","#000"],ae))};var C=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=n.hexNames=function($){var ne={};for(var ae in $)$.hasOwnProperty(ae)&&(ne[$[ae]]=ae);return ne}(C);function R($){return $=parseFloat($),(isNaN($)||$<0||$>1)&&($=1),$}function O($,ne){(function(se){return typeof se=="string"&&se.indexOf(".")!=-1&&parseFloat(se)===1})($)&&($="100%");var ae=function(se){return typeof se=="string"&&se.indexOf("%")!=-1}($);return $=o(ne,t(0,parseFloat($))),ae&&($=parseInt($*ne,10)/100),b.abs($-ne)<1e-6?1:$%ne/parseFloat(ne)}function X($){return o(1,t(0,$))}function D($){return parseInt($,16)}function V($){return $.length==1?"0"+$:""+$}function j($){return $<=1&&($=100*$+"%"),$}function B($){return b.round(255*parseFloat($)).toString(16)}function W($){return D($)/255}var q,re,ee,K=(re="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",ee="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+re),rgba:new RegExp("rgba"+ee),hsl:new RegExp("hsl"+re),hsla:new RegExp("hsla"+ee),hsv:new RegExp("hsv"+re),hsva:new RegExp("hsva"+ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Y($){return!!K.CSS_UNIT.exec($)}F.exports?F.exports=n:(T=(function(){return n}).call(L,e,L,F))===void 0||(F.exports=T)})(Math)},57060:function(F){F.exports=e,F.exports.float32=F.exports.float=e,F.exports.fract32=F.exports.fract=function(T,b){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);b instanceof Float32Array||(b=e(T));for(var a=0,_=b.length;a<_;a++)b[a]=T[a]-b[a];return b}return e(T-e(T))};var L=new Float32Array(1);function e(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(L[0]=T,L[0])}},75686:function(F,L,e){var T=e(25677);F.exports=_;var b=96;function a(g,h){var o=T(getComputedStyle(g).getPropertyValue(h));return o[0]*_(o[1],g)}function _(g,h){switch(h=h||document.body,g=(g||"px").trim().toLowerCase(),h!==window&&h!==document||(h=document.body),g){case"%":return h.clientHeight/100;case"ch":case"ex":return function(o,t){var i=document.createElement("div");i.style["font-size"]="128"+o,t.appendChild(i);var n=a(i,"font-size")/128;return t.removeChild(i),n}(g,h);case"em":return a(h,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return b;case"cm":return b/2.54;case"mm":return b/25.4;case"pt":return b/72;case"pc":return b/6}return 1}},96892:function(F,L,e){function T(_){return _}function b(_,g){return typeof g=="string"&&(g=_.objects[g]),g.type==="GeometryCollection"?{type:"FeatureCollection",features:g.geometries.map(function(h){return a(_,h)})}:a(_,g)}function a(_,g){var h=g.id,o=g.bbox,t=g.properties==null?{}:g.properties,i=function(n,r){var s=function(f){if(f==null)return T;var x,y,v=f.scale[0],M=f.scale[1],p=f.translate[0],S=f.translate[1];return function(A,k){k||(x=y=0);var C=2,P=A.length,R=new Array(P);for(R[0]=(x+=A[0])*v+p,R[1]=(y+=A[1])*M+S;C<P;)R[C]=A[C],++C;return R}}(n.transform),l=n.arcs;function u(f,x){x.length&&x.pop();for(var y=l[f<0?~f:f],v=0,M=y.length;v<M;++v)x.push(s(y[v],v));f<0&&function(p,S){for(var A,k=p.length,C=k-S;C<--k;)A=p[C],p[C++]=p[k],p[k]=A}(x,M)}function d(f){return s(f)}function c(f){for(var x=[],y=0,v=f.length;y<v;++y)u(f[y],x);return x.length<2&&x.push(x[0]),x}function w(f){for(var x=c(f);x.length<4;)x.push(x[0]);return x}function m(f){return f.map(w)}return function f(x){var y,v=x.type;switch(v){case"GeometryCollection":return{type:v,geometries:x.geometries.map(f)};case"Point":y=d(x.coordinates);break;case"MultiPoint":y=x.coordinates.map(d);break;case"LineString":y=c(x.arcs);break;case"MultiLineString":y=x.arcs.map(c);break;case"Polygon":y=m(x.arcs);break;case"MultiPolygon":y=x.arcs.map(m);break;default:return null}return{type:v,coordinates:y}}(r)}(_,g);return h==null&&o==null?{type:"Feature",properties:t,geometry:i}:o==null?{type:"Feature",id:h,properties:t,geometry:i}:{type:"Feature",id:h,bbox:o,properties:t,geometry:i}}e.d(L,{zL:function(){return b}})},73116:function(F,L,e){var T=e(24511);F.exports=function(b){if(typeof b!="function"||!hasOwnProperty.call(b,"length"))return!1;try{if(typeof b.length!="number"||typeof b.call!="function"||typeof b.apply!="function")return!1}catch{return!1}return!T(b)}},69190:function(F,L,e){var T=e(24582),b=e(47403),a=e(9234),_=e(6048),g=function(h,o){return h.replace("%v",_(o))};F.exports=function(h,o,t){if(!b(t))throw new TypeError(g(o,h));if(!T(h)){if("default"in t)return t.default;if(t.isOptional)return null}var i=a(t.errorMessage);throw T(i)||(i=o),new TypeError(g(i,h))}},18497:function(F){F.exports=function(L){try{return L.toString()}catch{try{return String(L)}catch{return null}}}},6048:function(F,L,e){var T=e(18497),b=/[\n\r\u2028\u2029]/g;F.exports=function(a){var _=T(a);return _===null?"<Non-coercible to string value>":(_.length>100&&(_=_.slice(0,99)+""),_=_.replace(b,function(g){switch(g){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(F,L,e){var T=e(24582),b={object:!0,function:!0,undefined:!0};F.exports=function(a){return!!T(a)&&hasOwnProperty.call(b,typeof a)}},82527:function(F,L,e){var T=e(69190),b=e(84985);F.exports=function(a){return b(a)?a:T(a,"%v is not a plain function",arguments[1])}},84985:function(F,L,e){var T=e(73116),b=/^\s*class[\s{/}]/,a=Function.prototype.toString;F.exports=function(_){return!!T(_)&&!b.test(a.call(_))}},24511:function(F,L,e){var T=e(47403);F.exports=function(b){if(!T(b))return!1;try{return!!b.constructor&&b.constructor.prototype===b}catch{return!1}}},9234:function(F,L,e){var T=e(24582),b=e(47403),a=Object.prototype.toString;F.exports=function(_){if(!T(_))return null;if(b(_)){var g=_.toString;if(typeof g!="function"||g===a)return null}try{return""+_}catch{return null}}},10424:function(F,L,e){var T=e(69190),b=e(24582);F.exports=function(a){return b(a)?a:T(a,"Cannot use %v",arguments[1])}},24582:function(F){F.exports=function(L){return L!=null}},58404:function(F,L,e){var T=e(13547),b=e(12129),a=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var _=typeof Uint8ClampedArray<"u",g=typeof BigUint64Array<"u",h=typeof BigInt64Array<"u",o=e.g.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=b([32,0])),o.BIGUINT64||(o.BIGUINT64=b([32,0])),o.BIGINT64||(o.BIGINT64=b([32,0])),o.BUFFER||(o.BUFFER=b([32,0]));var t=o.DATA,i=o.BUFFER;function n(S){if(S){var A=S.length||S.byteLength,k=T.log2(A);t[k].push(S)}}function r(S){S=T.nextPow2(S);var A=T.log2(S),k=t[A];return k.length>0?k.pop():new ArrayBuffer(S)}function s(S){return new Uint8Array(r(S),0,S)}function l(S){return new Uint16Array(r(2*S),0,S)}function u(S){return new Uint32Array(r(4*S),0,S)}function d(S){return new Int8Array(r(S),0,S)}function c(S){return new Int16Array(r(2*S),0,S)}function w(S){return new Int32Array(r(4*S),0,S)}function m(S){return new Float32Array(r(4*S),0,S)}function f(S){return new Float64Array(r(8*S),0,S)}function x(S){return _?new Uint8ClampedArray(r(S),0,S):s(S)}function y(S){return g?new BigUint64Array(r(8*S),0,S):null}function v(S){return h?new BigInt64Array(r(8*S),0,S):null}function M(S){return new DataView(r(S),0,S)}function p(S){S=T.nextPow2(S);var A=T.log2(S),k=i[A];return k.length>0?k.pop():new a(S)}L.free=function(S){if(a.isBuffer(S))i[T.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var A=S.length||S.byteLength,k=0|T.log2(A);t[k].push(S)}},L.freeUint8=L.freeUint16=L.freeUint32=L.freeBigUint64=L.freeInt8=L.freeInt16=L.freeInt32=L.freeBigInt64=L.freeFloat32=L.freeFloat=L.freeFloat64=L.freeDouble=L.freeUint8Clamped=L.freeDataView=function(S){n(S.buffer)},L.freeArrayBuffer=n,L.freeBuffer=function(S){i[T.log2(S.length)].push(S)},L.malloc=function(S,A){if(A===void 0||A==="arraybuffer")return r(S);switch(A){case"uint8":return s(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return d(S);case"int16":return c(S);case"int32":return w(S);case"float":case"float32":return m(S);case"double":case"float64":return f(S);case"uint8_clamped":return x(S);case"bigint64":return v(S);case"biguint64":return y(S);case"buffer":return p(S);case"data":case"dataview":return M(S);default:return null}return null},L.mallocArrayBuffer=r,L.mallocUint8=s,L.mallocUint16=l,L.mallocUint32=u,L.mallocInt8=d,L.mallocInt16=c,L.mallocInt32=w,L.mallocFloat32=L.mallocFloat=m,L.mallocFloat64=L.mallocDouble=f,L.mallocUint8Clamped=x,L.mallocBigUint64=y,L.mallocBigInt64=v,L.mallocDataView=M,L.mallocBuffer=p,L.clearCache=function(){for(var S=0;S<32;++S)o.UINT8[S].length=0,o.UINT16[S].length=0,o.UINT32[S].length=0,o.INT8[S].length=0,o.INT16[S].length=0,o.INT32[S].length=0,o.FLOAT[S].length=0,o.DOUBLE[S].length=0,o.BIGUINT64[S].length=0,o.BIGINT64[S].length=0,o.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},90448:function(F){var L=/[\'\"]/;F.exports=function(e){return e?(L.test(e.charAt(0))&&(e=e.substr(1)),L.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function(F){F.exports=function(L,e,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var b=0,a=T.length;b<a;b++){var _=T[b];for(var g in _)if((e[g]===void 0||Array.isArray(e[g])||L[g]!==e[g])&&g in e){var h;if(_[g]===!0)h=e[g];else if(_[g]===!1||typeof _[g]=="function"&&(h=_[g](e[g],L,e))===void 0)continue;L[g]=h}}return L}},20588:function(F,L,e){function T(b){try{if(!e.g.localStorage)return!1}catch{return!1}var a=e.g.localStorage[b];return a!=null&&String(a).toLowerCase()==="true"}F.exports=function(b,a){if(T("noDeprecation"))return b;var _=!1;return function(){if(!_){if(T("throwDeprecation"))throw new Error(a);T("traceDeprecation")?console.trace(a):console.warn(a),_=!0}return b.apply(this,arguments)}}},45920:function(F){F.exports=function(L){return L&&typeof L=="object"&&typeof L.copy=="function"&&typeof L.fill=="function"&&typeof L.readUInt8=="function"}},4936:function(F,L,e){var T=e(47216),b=e(65481),a=e(21099),_=e(9187);function g(O){return O.call.bind(O)}var h=typeof BigInt<"u",o=typeof Symbol<"u",t=g(Object.prototype.toString),i=g(Number.prototype.valueOf),n=g(String.prototype.valueOf),r=g(Boolean.prototype.valueOf);if(h)var s=g(BigInt.prototype.valueOf);if(o)var l=g(Symbol.prototype.valueOf);function u(O,X){if(typeof O!="object")return!1;try{return X(O),!0}catch{return!1}}function d(O){return t(O)==="[object Map]"}function c(O){return t(O)==="[object Set]"}function w(O){return t(O)==="[object WeakMap]"}function m(O){return t(O)==="[object WeakSet]"}function f(O){return t(O)==="[object ArrayBuffer]"}function x(O){return typeof ArrayBuffer<"u"&&(f.working?f(O):O instanceof ArrayBuffer)}function y(O){return t(O)==="[object DataView]"}function v(O){return typeof DataView<"u"&&(y.working?y(O):O instanceof DataView)}L.isArgumentsObject=T,L.isGeneratorFunction=b,L.isTypedArray=_,L.isPromise=function(O){return typeof Promise<"u"&&O instanceof Promise||O!==null&&typeof O=="object"&&typeof O.then=="function"&&typeof O.catch=="function"},L.isArrayBufferView=function(O){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(O):_(O)||v(O)},L.isUint8Array=function(O){return a(O)==="Uint8Array"},L.isUint8ClampedArray=function(O){return a(O)==="Uint8ClampedArray"},L.isUint16Array=function(O){return a(O)==="Uint16Array"},L.isUint32Array=function(O){return a(O)==="Uint32Array"},L.isInt8Array=function(O){return a(O)==="Int8Array"},L.isInt16Array=function(O){return a(O)==="Int16Array"},L.isInt32Array=function(O){return a(O)==="Int32Array"},L.isFloat32Array=function(O){return a(O)==="Float32Array"},L.isFloat64Array=function(O){return a(O)==="Float64Array"},L.isBigInt64Array=function(O){return a(O)==="BigInt64Array"},L.isBigUint64Array=function(O){return a(O)==="BigUint64Array"},d.working=typeof Map<"u"&&d(new Map),L.isMap=function(O){return typeof Map<"u"&&(d.working?d(O):O instanceof Map)},c.working=typeof Set<"u"&&c(new Set),L.isSet=function(O){return typeof Set<"u"&&(c.working?c(O):O instanceof Set)},w.working=typeof WeakMap<"u"&&w(new WeakMap),L.isWeakMap=function(O){return typeof WeakMap<"u"&&(w.working?w(O):O instanceof WeakMap)},m.working=typeof WeakSet<"u"&&m(new WeakSet),L.isWeakSet=function(O){return m(O)},f.working=typeof ArrayBuffer<"u"&&f(new ArrayBuffer),L.isArrayBuffer=x,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),L.isDataView=v;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function p(O){return t(O)==="[object SharedArrayBuffer]"}function S(O){return M!==void 0&&(p.working===void 0&&(p.working=p(new M)),p.working?p(O):O instanceof M)}function A(O){return u(O,i)}function k(O){return u(O,n)}function C(O){return u(O,r)}function P(O){return h&&u(O,s)}function R(O){return o&&u(O,l)}L.isSharedArrayBuffer=S,L.isAsyncFunction=function(O){return t(O)==="[object AsyncFunction]"},L.isMapIterator=function(O){return t(O)==="[object Map Iterator]"},L.isSetIterator=function(O){return t(O)==="[object Set Iterator]"},L.isGeneratorObject=function(O){return t(O)==="[object Generator]"},L.isWebAssemblyCompiledModule=function(O){return t(O)==="[object WebAssembly.Module]"},L.isNumberObject=A,L.isStringObject=k,L.isBooleanObject=C,L.isBigIntObject=P,L.isSymbolObject=R,L.isBoxedPrimitive=function(O){return A(O)||k(O)||C(O)||P(O)||R(O)},L.isAnyArrayBuffer=function(O){return typeof Uint8Array<"u"&&(x(O)||S(O))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(O){Object.defineProperty(L,O,{enumerable:!1,value:function(){throw new Error(O+" is not supported in userland")}})})},43827:function(F,L,e){var T=e(90386),b=Object.getOwnPropertyDescriptors||function(R){for(var O=Object.keys(R),X={},D=0;D<O.length;D++)X[O[D]]=Object.getOwnPropertyDescriptor(R,O[D]);return X},a=/%[sdj%]/g;L.format=function(R){if(!w(R)){for(var O=[],X=0;X<arguments.length;X++)O.push(o(arguments[X]));return O.join(" ")}X=1;for(var D=arguments,V=D.length,j=String(R).replace(a,function(W){if(W==="%%")return"%";if(X>=V)return W;switch(W){case"%s":return String(D[X++]);case"%d":return Number(D[X++]);case"%j":try{return JSON.stringify(D[X++])}catch{return"[Circular]"}default:return W}}),B=D[X];X<V;B=D[++X])d(B)||!x(B)?j+=" "+B:j+=" "+o(B);return j},L.deprecate=function(R,O){if(T!==void 0&&T.noDeprecation===!0)return R;if(T===void 0)return function(){return L.deprecate(R,O).apply(this,arguments)};var X=!1;return function(){if(!X){if(T.throwDeprecation)throw new Error(O);T.traceDeprecation?console.trace(O):console.error(O),X=!0}return R.apply(this,arguments)}};var _={},g=/^$/;if(T.env.NODE_DEBUG){var h=T.env.NODE_DEBUG;h=h.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),g=new RegExp("^"+h+"$","i")}function o(R,O){var X={seen:[],stylize:i};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),u(O)?X.showHidden=O:O&&L._extend(X,O),m(X.showHidden)&&(X.showHidden=!1),m(X.depth)&&(X.depth=2),m(X.colors)&&(X.colors=!1),m(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=t),n(X,R,X.depth)}function t(R,O){var X=o.styles[O];return X?"\x1B["+o.colors[X][0]+"m"+R+"\x1B["+o.colors[X][1]+"m":R}function i(R,O){return R}function n(R,O,X){if(R.customInspect&&O&&M(O.inspect)&&O.inspect!==L.inspect&&(!O.constructor||O.constructor.prototype!==O)){var D=O.inspect(X,R);return w(D)||(D=n(R,D,X)),D}var V=function(Y,$){if(m($))return Y.stylize("undefined","undefined");if(w($)){var ne="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Y.stylize(ne,"string")}return c($)?Y.stylize(""+$,"number"):u($)?Y.stylize(""+$,"boolean"):d($)?Y.stylize("null","null"):void 0}(R,O);if(V)return V;var j=Object.keys(O),B=function(Y){var $={};return Y.forEach(function(ne,ae){$[ne]=!0}),$}(j);if(R.showHidden&&(j=Object.getOwnPropertyNames(O)),v(O)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return r(O);if(j.length===0){if(M(O)){var W=O.name?": "+O.name:"";return R.stylize("[Function"+W+"]","special")}if(f(O))return R.stylize(RegExp.prototype.toString.call(O),"regexp");if(y(O))return R.stylize(Date.prototype.toString.call(O),"date");if(v(O))return r(O)}var q,re="",ee=!1,K=["{","}"];return l(O)&&(ee=!0,K=["[","]"]),M(O)&&(re=" [Function"+(O.name?": "+O.name:"")+"]"),f(O)&&(re=" "+RegExp.prototype.toString.call(O)),y(O)&&(re=" "+Date.prototype.toUTCString.call(O)),v(O)&&(re=" "+r(O)),j.length!==0||ee&&O.length!=0?X<0?f(O)?R.stylize(RegExp.prototype.toString.call(O),"regexp"):R.stylize("[Object]","special"):(R.seen.push(O),q=ee?function(Y,$,ne,ae,se){for(var ce=[],me=0,ye=$.length;me<ye;++me)k($,String(me))?ce.push(s(Y,$,ne,ae,String(me),!0)):ce.push("");return se.forEach(function(Te){Te.match(/^\d+$/)||ce.push(s(Y,$,ne,ae,Te,!0))}),ce}(R,O,X,B,j):j.map(function(Y){return s(R,O,X,B,Y,ee)}),R.seen.pop(),function(Y,$,ne){return Y.reduce(function(ae,se){return se.indexOf(`
`),ae+se.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+($===""?"":$+`
 `)+" "+Y.join(`,
  `)+" "+ne[1]:ne[0]+$+" "+Y.join(", ")+" "+ne[1]}(q,re,K)):K[0]+re+K[1]}function r(R){return"["+Error.prototype.toString.call(R)+"]"}function s(R,O,X,D,V,j){var B,W,q;if((q=Object.getOwnPropertyDescriptor(O,V)||{value:O[V]}).get?W=q.set?R.stylize("[Getter/Setter]","special"):R.stylize("[Getter]","special"):q.set&&(W=R.stylize("[Setter]","special")),k(D,V)||(B="["+V+"]"),W||(R.seen.indexOf(q.value)<0?(W=d(X)?n(R,q.value,null):n(R,q.value,X-1)).indexOf(`
`)>-1&&(W=j?W.split(`
`).map(function(re){return"  "+re}).join(`
`).slice(2):`
`+W.split(`
`).map(function(re){return"   "+re}).join(`
`)):W=R.stylize("[Circular]","special")),m(B)){if(j&&V.match(/^\d+$/))return W;(B=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=R.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=R.stylize(B,"string"))}return B+": "+W}function l(R){return Array.isArray(R)}function u(R){return typeof R=="boolean"}function d(R){return R===null}function c(R){return typeof R=="number"}function w(R){return typeof R=="string"}function m(R){return R===void 0}function f(R){return x(R)&&p(R)==="[object RegExp]"}function x(R){return typeof R=="object"&&R!==null}function y(R){return x(R)&&p(R)==="[object Date]"}function v(R){return x(R)&&(p(R)==="[object Error]"||R instanceof Error)}function M(R){return typeof R=="function"}function p(R){return Object.prototype.toString.call(R)}function S(R){return R<10?"0"+R.toString(10):R.toString(10)}L.debuglog=function(R){if(R=R.toUpperCase(),!_[R])if(g.test(R)){var O=T.pid;_[R]=function(){var X=L.format.apply(L,arguments);console.error("%s %d: %s",R,O,X)}}else _[R]=function(){};return _[R]},L.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},L.types=e(4936),L.isArray=l,L.isBoolean=u,L.isNull=d,L.isNullOrUndefined=function(R){return R==null},L.isNumber=c,L.isString=w,L.isSymbol=function(R){return typeof R=="symbol"},L.isUndefined=m,L.isRegExp=f,L.types.isRegExp=f,L.isObject=x,L.isDate=y,L.types.isDate=y,L.isError=v,L.types.isNativeError=v,L.isFunction=M,L.isPrimitive=function(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||R===void 0},L.isBuffer=e(45920);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(R,O){return Object.prototype.hasOwnProperty.call(R,O)}L.log=function(){var R,O;console.log("%s - %s",(O=[S((R=new Date).getHours()),S(R.getMinutes()),S(R.getSeconds())].join(":"),[R.getDate(),A[R.getMonth()],O].join(" ")),L.format.apply(L,arguments))},L.inherits=e(42018),L._extend=function(R,O){if(!O||!x(O))return R;for(var X=Object.keys(O),D=X.length;D--;)R[X[D]]=O[X[D]];return R};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(R,O){if(!R){var X=new Error("Promise was rejected with a falsy value");X.reason=R,R=X}return O(R)}L.promisify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&R[C]){var O;if(typeof(O=R[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(O,C,{value:O,enumerable:!1,writable:!1,configurable:!0}),O}function O(){for(var X,D,V=new Promise(function(W,q){X=W,D=q}),j=[],B=0;B<arguments.length;B++)j.push(arguments[B]);j.push(function(W,q){W?D(W):X(q)});try{R.apply(this,j)}catch(W){D(W)}return V}return Object.setPrototypeOf(O,Object.getPrototypeOf(R)),C&&Object.defineProperty(O,C,{value:O,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(O,b(R))},L.promisify.custom=C,L.callbackify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function O(){for(var X=[],D=0;D<arguments.length;D++)X.push(arguments[D]);var V=X.pop();if(typeof V!="function")throw new TypeError("The last argument must be of type Function");var j=this,B=function(){return V.apply(j,arguments)};R.apply(this,X).then(function(W){T.nextTick(B.bind(null,null,W))},function(W){T.nextTick(P.bind(null,W,B))})}return Object.setPrototypeOf(O,Object.getPrototypeOf(R)),Object.defineProperties(O,b(R)),O}},40372:function(F,L,e){var T=e(86249);F.exports=function(b){return T("webgl",b)}},21099:function(F,L,e){var T=e(31353),b=e(72077),a=e(6614),_=e(40383),g=a("Object.prototype.toString"),h=e(84543)(),o=typeof globalThis>"u"?e.g:globalThis,t=b(),i=a("String.prototype.slice"),n={},r=Object.getPrototypeOf;h&&_&&r&&T(t,function(l){if(typeof o[l]=="function"){var u=new o[l];if(Symbol.toStringTag in u){var d=r(u),c=_(d,Symbol.toStringTag);if(!c){var w=r(d);c=_(w,Symbol.toStringTag)}n[l]=c.get}}});var s=e(9187);F.exports=function(l){return!!s(l)&&(h&&Symbol.toStringTag in l?function(u){var d=!1;return T(n,function(c,w){if(!d)try{var m=c.call(u);m===w&&(d=m)}catch{}}),d}(l):i(g(l),8,-1))}},3961:function(F,L,e){var T=e(63489),b=e(56131),a=T.instance();function _(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,b(_.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,s){if(typeof r=="string"){var l=r.match(h);return l?l[0]:""}var u=this._validateYear(r),d=r.month(),c=""+this.toChineseMonth(u,d);return s&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,d)&&(c+="i"),c},monthNames:function(r){if(typeof r=="string"){var s=r.match(o);return s?s[0]:""}var l=this._validateYear(r),u=r.month(),d=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(d=""+d),d},monthNamesShort:function(r){if(typeof r=="string"){var s=r.match(t);return s?s[0]:""}var l=this._validateYear(r),u=r.month(),d=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(d=""+d),d},parseMonth:function(r,s){r=this._validateYear(r);var l,u=parseInt(s);if(isNaN(u))s[0]===""&&(l=!0,s=s.substring(1)),s[s.length-1]===""&&(s=s.substring(0,s.length-1)),u=1+["","","","","","","","","","","",""].indexOf(s);else{var d=s[s.length-1];l=d==="i"||d==="I"}return this.toMonthIndex(r,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,s){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw s.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,s,l){var u=this.intercalaryMonth(r);if(l&&s!==u||s<1||s>12)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&s<=u?s-1:s:s-1},toChineseMonth:function(r,s){r.year&&(s=(r=r.year()).month());var l=this.intercalaryMonth(r);if(s<0||s>(l?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?s<l?s+1:s:s+1},intercalaryMonth:function(r){return r=this._validateYear(r),i[r-i[0]]>>13},isIntercalaryMonth:function(r,s){r.year&&(s=(r=r.year()).month());var l=this.intercalaryMonth(r);return!!l&&l===s},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,s,l){var u,d=this._validateYear(r,T.local.invalidyear),c=n[d-n[0]],w=c>>9&4095,m=c>>5&15,f=31&c;(u=a.newDate(w,m,f)).add(4-(u.dayOfWeek()||7),"d");var x=this.toJD(r,s,l)-u.toJD();return 1+Math.floor(x/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,s){r.year&&(s=r.month(),r=r.year()),r=this._validateYear(r);var l=i[r-i[0]];if(s>(l>>13?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-s?30:29},weekDay:function(r,s,l){return(this.dayOfWeek(r,s,l)||7)<6},toJD:function(r,s,l){var u=this._validate(r,c,l,T.local.invalidDate);r=this._validateYear(u.year()),s=u.month(),l=u.day();var d=this.isIntercalaryMonth(r,s),c=this.toChineseMonth(r,s),w=function(m,f,x,y,v){var M,p,S;if(typeof m=="object")p=m,M=f||{};else{var A;if(!(typeof m=="number"&&m>=1888&&m<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(A=!1,M=y):(A=!!y,M={}),p={year:m,month:f,day:x,isIntercalary:A}}S=p.day-1;var k,C=i[p.year-i[0]],P=C>>13;k=P&&(p.month>P||p.isIntercalary)?p.month:p.month-1;for(var R=0;R<k;R++)S+=C&1<<12-R?30:29;var O=n[p.year-n[0]],X=new Date(O>>9&4095,(O>>5&15)-1,(31&O)+S);return M.year=X.getFullYear(),M.month=1+X.getMonth(),M.day=X.getDate(),M}(r,c,l,d);return a.toJD(w.year,w.month,w.day)},fromJD:function(r){var s=a.fromJD(r),l=function(d,c,w,m){var f,x;if(typeof d=="object")f=d,x=c||{};else{if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof w=="number"&&w>=1&&w<=31))throw new Error("Solar day outside range 1 - 31");f={year:d,month:c,day:w},x={}}var y=n[f.year-n[0]],v=f.year<<9|f.month<<5|f.day;x.year=v>=y?f.year:f.year-1,y=n[x.year-n[0]];var M,p=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(f.year,f.month-1,f.day);M=Math.round((S-p)/864e5);var A,k=i[x.year-i[0]];for(A=0;A<13;A++){var C=k&1<<12-A?30:29;if(M<C)break;M-=C}var P=k>>13;return!P||A<P?(x.isIntercalary=!1,x.month=1+A):A===P?(x.isIntercalary=!0,x.month=A):(x.isIntercalary=!1,x.month=A),x.day=1+M,x}(s.year(),s.month(),s.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(r){var s=r.match(g),l=this._validateYear(+s[1]),u=+s[2],d=!!s[3],c=this.toMonthIndex(l,u,d),w=+s[4];return this.newDate(l,c,w)},add:function(r,s,l){var u=r.year(),d=r.month(),c=this.isIntercalaryMonth(u,d),w=this.toChineseMonth(u,d),m=Object.getPrototypeOf(_.prototype).add.call(this,r,s,l);if(l==="y"){var f=m.year(),x=m.month(),y=this.isIntercalaryMonth(f,w),v=c&&y?this.toMonthIndex(f,w,!0):this.toMonthIndex(f,w,!1);v!==x&&m.month(v)}return m}});var g=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,h=/^\d?\d[iI]?/m,o=/^??[]?/m,t=/^??[]?/m;T.calendars.chinese=_;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(F,L,e){var T=e(63489),b=e(56131);function a(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var g=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=g.year()+(g.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(_,g,h){var o=this.newDate(_,g,h);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,g){var h=this._validate(_,g,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(_,g,h){return(this.dayOfWeek(_,g,h)||7)<6},toJD:function(_,g,h){var o=this._validate(_,g,h,T.local.invalidDate);return(_=o.year())<0&&_++,o.day()+30*(o.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var g=Math.floor(_)+.5-this.jdEpoch,h=Math.floor((g-Math.floor((g+366)/1461))/365)+1;h<=0&&h--,g=Math.floor(_)+.5-this.newDate(h,1,1).toJD();var o=Math.floor(g/30)+1,t=g-30*(o-1)+1;return this.newDate(h,o,t)}}),T.calendars.coptic=a},86825:function(F,L,e){var T=e(63489),b=e(56131);function a(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(g){return this._validate(g,this.minMonth,this.minDay,T.local.invalidYear),!1},monthsInYear:function(g){return this._validate(g,this.minMonth,this.minDay,T.local.invalidYear),13},daysInYear:function(g){return this._validate(g,this.minMonth,this.minDay,T.local.invalidYear),400},weekOfYear:function(g,h,o){var t=this.newDate(g,h,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(g,h){var o=this._validate(g,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[o.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(g,h,o){return(this._validate(g,h,o,T.local.invalidDate).day()+1)%8},weekDay:function(g,h,o){var t=this.dayOfWeek(g,h,o);return t>=2&&t<=6},extraInfo:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);return{century:_[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);return g=t.year()+(t.year()<0?1:0),h=t.month(),(o=t.day())+(h>1?16:0)+(h>2?32*(h-2):0)+400*(g-1)+this.jdEpoch-1},fromJD:function(g){g=Math.floor(g+.5)-Math.floor(this.jdEpoch)-1;var h=Math.floor(g/400)+1;g-=400*(h-1),g+=g>15?16:0;var o=Math.floor(g/32)+1,t=g-32*(o-1)+1;return this.newDate(h<=0?h-1:h,o,t)}});var _={20:"Fruitbat",21:"Anchovy"};T.calendars.discworld=a},37715:function(F,L,e){var T=e(63489),b=e(56131);function a(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var g=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=g.year()+(g.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(_,g,h){var o=this.newDate(_,g,h);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,g){var h=this._validate(_,g,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(_,g,h){return(this.dayOfWeek(_,g,h)||7)<6},toJD:function(_,g,h){var o=this._validate(_,g,h,T.local.invalidDate);return(_=o.year())<0&&_++,o.day()+30*(o.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var g=Math.floor(_)+.5-this.jdEpoch,h=Math.floor((g-Math.floor((g+366)/1461))/365)+1;h<=0&&h--,g=Math.floor(_)+.5-this.newDate(h,1,1).toJD();var o=Math.floor(g/30)+1,t=g-30*(o-1)+1;return this.newDate(h,o,t)}}),T.calendars.ethiopian=a},99384:function(F,L,e){var T=e(63489),b=e(56131);function a(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}function _(g,h){return g-h*Math.floor(g/h)}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(g){return _(7*(g=g<0?g+1:g)+1,19)<7},monthsInYear:function(g){return this._validate(g,this.minMonth,this.minDay,T.local.invalidYear),this._leapYear(g.year?g.year():g)?13:12},weekOfYear:function(g,h,o){var t=this.newDate(g,h,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(g){return g=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear).year(),this.toJD(g===-1?1:g+1,7,1)-this.toJD(g,7,1)},daysInMonth:function(g,h){return g.year&&(h=g.month(),g=g.year()),this._validate(g,h,this.minDay,T.local.invalidMonth),h===12&&this.leapYear(g)||h===8&&_(this.daysInYear(g),10)===5?30:h===9&&_(this.daysInYear(g),10)===3?29:this.daysPerMonth[h-1]},weekDay:function(g,h,o){return this.dayOfWeek(g,h,o)!==6},extraInfo:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);g=t.year(),h=t.month(),o=t.day();var i=g<=0?g+1:g,n=this.jdEpoch+this._delay1(i)+this._delay2(i)+o+1;if(h<7){for(var r=7;r<=this.monthsInYear(g);r++)n+=this.daysInMonth(g,r);for(r=1;r<h;r++)n+=this.daysInMonth(g,r)}else for(r=7;r<h;r++)n+=this.daysInMonth(g,r);return n},_delay1:function(g){var h=Math.floor((235*g-234)/19),o=12084+13753*h,t=29*h+Math.floor(o/25920);return _(3*(t+1),7)<3&&t++,t},_delay2:function(g){var h=this._delay1(g-1),o=this._delay1(g);return this._delay1(g+1)-o==356?2:o-h==382?1:0},fromJD:function(g){g=Math.floor(g)+.5;for(var h=Math.floor(98496*(g-this.jdEpoch)/35975351)-1;g>=this.toJD(h===-1?1:h+1,7,1);)h++;for(var o=g<this.toJD(h,1,1)?7:1;g>this.toJD(h,o,this.daysInMonth(h,o));)o++;var t=g-this.toJD(h,o,1)+1;return this.newDate(h,o,t)}}),T.calendars.hebrew=a},43805:function(F,L,e){var T=e(63489),b=e(56131);function a(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){return(11*this._validate(_,this.minMonth,this.minDay,T.local.invalidYear).year()+14)%30<11},weekOfYear:function(_,g,h){var o=this.newDate(_,g,h);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(_){return this.leapYear(_)?355:354},daysInMonth:function(_,g){var h=this._validate(_,g,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===12&&this.leapYear(h.year())?1:0)},weekDay:function(_,g,h){return this.dayOfWeek(_,g,h)!==5},toJD:function(_,g,h){var o=this._validate(_,g,h,T.local.invalidDate);return _=o.year(),g=o.month(),_=_<=0?_+1:_,(h=o.day())+Math.ceil(29.5*(g-1))+354*(_-1)+Math.floor((3+11*_)/30)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_)+.5;var g=Math.floor((30*(_-this.jdEpoch)+10646)/10631);g=g<=0?g-1:g;var h=Math.min(12,Math.ceil((_-29-this.toJD(g,1,1))/29.5)+1),o=_-this.toJD(g,h,1)+1;return this.newDate(g,h,o)}}),T.calendars.islamic=a},88874:function(F,L,e){var T=e(63489),b=e(56131);function a(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var g=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear);return(_=g.year()<0?g.year()+1:g.year())%4==0},weekOfYear:function(_,g,h){var o=this.newDate(_,g,h);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,g){var h=this._validate(_,g,this.minDay,T.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(_,g,h){return(this.dayOfWeek(_,g,h)||7)<6},toJD:function(_,g,h){var o=this._validate(_,g,h,T.local.invalidDate);return _=o.year(),g=o.month(),h=o.day(),_<0&&_++,g<=2&&(_--,g+=12),Math.floor(365.25*(_+4716))+Math.floor(30.6001*(g+1))+h-1524.5},fromJD:function(_){var g=Math.floor(_+.5)+1524,h=Math.floor((g-122.1)/365.25),o=Math.floor(365.25*h),t=Math.floor((g-o)/30.6001),i=t-Math.floor(t<14?1:13),n=h-Math.floor(i>2?4716:4715),r=g-o-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,i,r)}}),T.calendars.julian=a},83290:function(F,L,e){var T=e(63489),b=e(56131);function a(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function _(h,o){return h-o*Math.floor(h/o)}function g(h,o){return _(h-1,o)+1}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear).year();var o=Math.floor(h/400);return h%=400,h+=h<0?400:0,o+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){if((h=h.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,t=0;t<h.length;t++){var i=parseInt(h[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";o=20*o+i}return o},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),18},weekOfYear:function(h,o,t){return this._validate(h,o,t,T.local.invalidDate),0},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),360},daysInMonth:function(h,o){return this._validate(h,o,this.minDay,T.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(h,o,t){return this._validate(h,o,t,T.local.invalidDate).day()},weekDay:function(h,o,t){return this._validate(h,o,t,T.local.invalidDate),!0},extraInfo:function(h,o,t){var i=this._validate(h,o,t,T.local.invalidDate).toJD(),n=this._toHaab(i),r=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(h){var o=_(8+(h-=this.jdEpoch)+340,365);return[Math.floor(o/20)+1,_(o,20)]},_toTzolkin:function(h){return[g(20+(h-=this.jdEpoch),20),g(h+4,13)]},toJD:function(h,o,t){var i=this._validate(h,o,t,T.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var o=Math.floor(h/360);h%=360,h+=h<0?360:0;var t=Math.floor(h/20),i=h%20;return this.newDate(o,t,i)}}),T.calendars.mayan=a},29108:function(F,L,e){var T=e(63489),b=e(56131);function a(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar;var _=T.instance("gregorian");b(a.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear);return _.leapYear(h.year()+(h.year()<1?1:0)+1469)},weekOfYear:function(g,h,o){var t=this.newDate(g,h,o);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(g,h){var o=this._validate(g,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(g,h,o){return(this.dayOfWeek(g,h,o)||7)<6},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidMonth);(g=t.year())<0&&g++;for(var i=t.day(),n=1;n<t.month();n++)i+=this.daysPerMonth[n-1];return i+_.toJD(g+1468,3,13)},fromJD:function(g){g=Math.floor(g+.5);for(var h=Math.floor((g-(this.jdEpoch-1))/366);g>=this.toJD(h+1,1,1);)h++;for(var o=g-Math.floor(this.toJD(h,1,1)+.5)+1,t=1;o>this.daysInMonth(h,t);)o-=this.daysInMonth(h,t),t++;return this.newDate(h,t,o)}}),T.calendars.nanakshahi=a},55422:function(F,L,e){var T=e(63489),b=e(56131);function a(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(_){return this.daysInYear(_)!==this.daysPerYear},weekOfYear:function(_,g,h){var o=this.newDate(_,g,h);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(_){if(_=this._validate(_,this.minMonth,this.minDay,T.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[_]===void 0)return this.daysPerYear;for(var g=0,h=this.minMonth;h<=12;h++)g+=this.NEPALI_CALENDAR_DATA[_][h];return g},daysInMonth:function(_,g){return _.year&&(g=_.month(),_=_.year()),this._validate(_,g,this.minDay,T.local.invalidMonth),this.NEPALI_CALENDAR_DATA[_]===void 0?this.daysPerMonth[g-1]:this.NEPALI_CALENDAR_DATA[_][g]},weekDay:function(_,g,h){return this.dayOfWeek(_,g,h)!==6},toJD:function(_,g,h){var o=this._validate(_,g,h,T.local.invalidDate);_=o.year(),g=o.month(),h=o.day();var t=T.instance(),i=0,n=g,r=_;this._createMissingCalendarData(_);var s=_-(n>9||n===9&&h>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(g!==9&&(i=h,n--);n!==9;)n<=0&&(n=12,r--),i+=this.NEPALI_CALENDAR_DATA[r][n],n--;return g===9?(i+=h-this.NEPALI_CALENDAR_DATA[r][0])<0&&(i+=t.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(_){var g=T.instance().fromJD(_),h=g.year(),o=g.dayOfYear(),t=h+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][i]-n+1;o>r;)++i>12&&(i=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][i];var s=this.NEPALI_CALENDAR_DATA[t][i]-(r-o);return this.newDate(t,i,s)},_createMissingCalendarData:function(_){var g=this.daysPerMonth.slice(0);g.unshift(17);for(var h=_-1;h<_+2;h++)this.NEPALI_CALENDAR_DATA[h]===void 0&&(this.NEPALI_CALENDAR_DATA[h]=g)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),T.calendars.nepali=a},94320:function(F,L,e){var T=e(63489),b=e(56131);function a(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}function _(g,h){return g-h*Math.floor(g/h)}a.prototype=new T.baseCalendar,b(a.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return 682*((h.year()-(h.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(g,h,o){var t=this.newDate(g,h,o);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(g,h){var o=this._validate(g,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(g,h,o){return this.dayOfWeek(g,h,o)!==5},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);g=t.year(),h=t.month(),o=t.day();var i=g-(g>=0?474:473),n=474+_(i,2820);return o+(h<=7?31*(h-1):30*(h-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(g){var h=(g=Math.floor(g)+.5)-this.toJD(475,1,1),o=Math.floor(h/1029983),t=_(h,1029983),i=2820;if(t!==1029982){var n=Math.floor(t/366),r=_(t,366);i=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var s=i+2820*o+474;s=s<=0?s-1:s;var l=g-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),d=g-this.toJD(s,u,1)+1;return this.newDate(s,u,d)}}),T.calendars.persian=a,T.calendars.jalali=a},31320:function(F,L,e){var T=e(63489),b=e(56131),a=T.instance();function _(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,b(_.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return g=this._t2gYear(h.year()),a.leapYear(g)},weekOfYear:function(g,h,o){var t=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return g=this._t2gYear(t.year()),a.weekOfYear(g,t.month(),t.day())},daysInMonth:function(g,h){var o=this._validate(g,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(g,h,o){return(this.dayOfWeek(g,h,o)||7)<6},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);return g=this._t2gYear(t.year()),a.toJD(g,t.month(),t.day())},fromJD:function(g){var h=a.fromJD(g),o=this._g2tYear(h.year());return this.newDate(o,h.month(),h.day())},_t2gYear:function(g){return g+this.yearsOffset+(g>=-this.yearsOffset&&g<=-1?1:0)},_g2tYear:function(g){return g-this.yearsOffset-(g>=1&&g<=this.yearsOffset?1:0)}}),T.calendars.taiwan=_},51367:function(F,L,e){var T=e(63489),b=e(56131),a=T.instance();function _(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}_.prototype=new T.baseCalendar,b(_.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return g=this._t2gYear(h.year()),a.leapYear(g)},weekOfYear:function(g,h,o){var t=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return g=this._t2gYear(t.year()),a.weekOfYear(g,t.month(),t.day())},daysInMonth:function(g,h){var o=this._validate(g,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(g,h,o){return(this.dayOfWeek(g,h,o)||7)<6},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate);return g=this._t2gYear(t.year()),a.toJD(g,t.month(),t.day())},fromJD:function(g){var h=a.fromJD(g),o=this._g2tYear(h.year());return this.newDate(o,h.month(),h.day())},_t2gYear:function(g){return g-this.yearsOffset-(g>=1&&g<=this.yearsOffset?1:0)},_g2tYear:function(g){return g+this.yearsOffset+(g>=-this.yearsOffset&&g<=-1?1:0)}}),T.calendars.thai=_},21457:function(F,L,e){var T=e(63489),b=e(56131);function a(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,b(a.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(g){var h=this._validate(g,this.minMonth,this.minDay,T.local.invalidYear);return this.daysInYear(h.year())===355},weekOfYear:function(g,h,o){var t=this.newDate(g,h,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(g){for(var h=0,o=1;o<=12;o++)h+=this.daysInMonth(g,o);return h},daysInMonth:function(g,h){for(var o=this._validate(g,h,this.minDay,T.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<_.length;i++){if(_[i]>o)return _[t]-_[t-1];t++}return 30},weekDay:function(g,h,o){return this.dayOfWeek(g,h,o)!==5},toJD:function(g,h,o){var t=this._validate(g,h,o,T.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+_[i-1]-1+24e5-.5},fromJD:function(g){for(var h=g-24e5+.5,o=0,t=0;t<_.length&&!(_[t]>h);t++)o++;var i=o+15292,n=Math.floor((i-1)/12),r=n+1,s=i-12*n,l=h-_[o-1]+1;return this.newDate(r,s,l)},isValid:function(g,h,o){var t=T.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(g=g.year!=null?g.year:g)>=1276&&g<=1500),t},_validate:function(g,h,o,t){var i=T.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),T.calendars.ummalqura=a;var _=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(F,L,e){var T=e(56131);function b(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(t,i,n,r){if(this._calendar=t,this._year=i,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function g(){this.shortYearCutoff="+10"}function h(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}T(b.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var n=this._localCals[t+"-"+i];if(!n&&this.calendars[t]&&(n=new this.calendars[t](i),this._localCals[t+"-"+i]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,i,n,r,s){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,s):r)||this.instance()).newDate(t,i,n)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,i){return function(n){for(var r="",s=0;n>0;){var l=n%10;r=(l===0?"":t[l]+i[s])+r,s++,n=Math.floor(n/10)}return r.indexOf(t[1]+i[1])===0&&(r=r.substr(1)),r||t[0]}}}),T(a.prototype,{newDate:function(t,i,n){return this._calendar.newDate(t??this,i,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,n){if(!this._calendar.isValid(t,i,n))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}}),T(g.prototype,{_validateLevel:0,newDate:function(t,i,n){return t==null?this.today():(t.year&&(this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),n=t.day(),i=t.month(),t=t.year()),new a(this,t,i,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+_(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,i){var n=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,i,n){return this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),{}},add:function(t,i,n){return this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,n),i,n)},_add:function(t,i,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+i*(n==="w"?this.daysInWeek():1),s=t.calendar().fromJD(r);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var l=t.year()+(n==="y"?i:0),u=t.monthOfYear()+(n==="m"?i:0);s=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),s=Math.min(s,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):n==="m"&&(function(c){for(;u<c.minMonth;)l--,u+=c.monthsInYear(l);for(var w=c.monthsInYear(l);u>w-1+c.minMonth;)l++,u-=w,w=c.monthsInYear(l)}(this),s=Math.min(s,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var d=[l,this.fromMonthOfYear(l,u),s];return this._validateLevel--,d}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],l=n<0?-1:1;i=this._add(t,n*s[0]+l*s[1],s[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,n){this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate);var r=n==="y"?i:t.year(),s=n==="m"?i:t.month(),l=n==="d"?i:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(r,s))),t.date(r,s,l)},isValid:function(t,i,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var s=this.newDate(t,i,this.minDay);r=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(s)}return this._validateLevel--,r},toJSDate:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return o.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(o.instance().fromJSDate(t).toJD())},_validate:function(t,i,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,n))throw r.replace(/\{0\}/,this.local.name);var s=this.newDate(t,i,n);return this._validateLevel--,s}catch(l){throw this._validateLevel--,l}}}),h.prototype=new g,T(h.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,n){var r=this.newDate(t,i,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,i,n){return(this.dayOfWeek(t,i,n)||7)<6},toJD:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);t=r.year(),i=r.month(),n=r.day(),t<0&&t++,i<3&&(i+=12,t--);var s=Math.floor(t/100),l=2-s+Math.floor(s/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+n+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),n=Math.floor((i-186721625e-2)/36524.25),r=1524+(n=i+1+n-Math.floor(n/4)),s=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*s),u=Math.floor((r-l)/30.6001),d=r-l-Math.floor(30.6001*u),c=u-(u>13.5?13:1),w=s-(c>2.5?4716:4715);return w<=0&&w--,this.newDate(w,c,d)},toJSDate:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),s=new Date(r.year(),r.month()-1,r.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var o=F.exports=new b;o.cdate=a,o.baseCalendar=g,o.calendars.gregorian=h},94338:function(F,L,e){var T=e(56131),b=e(63489);T(b.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),b.local=b.regionalOptions[""],T(b.cdate.prototype,{formatDate:function(a,_){return typeof a!="string"&&(_=a,a=""),this._calendar.formatDate(a||"",this,_)}}),T(b.baseCalendar.prototype,{UNIX_EPOCH:b.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:b.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,_,g){if(typeof a!="string"&&(g=_,_=a,a=""),!_)return"";if(_.calendar()!==this)throw b.local.invalidFormat||b.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat;for(var h,o,t,i=(g=g||{}).dayNamesShort||this.local.dayNamesShort,n=g.dayNames||this.local.dayNames,r=g.monthNumbers||this.local.monthNumbers,s=g.monthNamesShort||this.local.monthNamesShort,l=g.monthNames||this.local.monthNames,u=(g.calculateWeek||this.local.calculateWeek,function(p,S){for(var A=1;M+A<a.length&&a.charAt(M+A)===p;)A++;return M+=A-1,Math.floor(A/(S||1))>1}),d=function(p,S,A,k){var C=""+S;if(u(p,k))for(;C.length<A;)C="0"+C;return C},c=this,w=function(p){return typeof r=="function"?r.call(c,p,u("m")):x(d("m",p.month(),2))},m=function(p,S){return S?typeof l=="function"?l.call(c,p):l[p.month()-c.minMonth]:typeof s=="function"?s.call(c,p):s[p.month()-c.minMonth]},f=this.local.digits,x=function(p){return g.localNumbers&&f?f(p):p},y="",v=!1,M=0;M<a.length;M++)if(v)a.charAt(M)!=="'"||u("'")?y+=a.charAt(M):v=!1;else switch(a.charAt(M)){case"d":y+=x(d("d",_.day(),2));break;case"D":y+=(h=_.dayOfWeek(),o=i,t=n,u("D")?t[h]:o[h]);break;case"o":y+=d("o",_.dayOfYear(),3);break;case"w":y+=d("w",_.weekOfYear(),2);break;case"m":y+=w(_);break;case"M":y+=m(_,u("M"));break;case"y":y+=u("y",2)?_.year():(_.year()%100<10?"0":"")+_.year()%100;break;case"Y":u("Y",2),y+=_.formatYear();break;case"J":y+=_.toJD();break;case"@":y+=(_.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(_.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?y+="'":v=!0;break;default:y+=a.charAt(M)}return y},parseDate:function(a,_,g){if(_==null)throw b.local.invalidArguments||b.regionalOptions[""].invalidArguments;if((_=typeof _=="object"?_.toString():_+"")==="")return null;a=a||this.local.dateFormat;var h=(g=g||{}).shortYearCutoff||this.shortYearCutoff;h=typeof h!="string"?h:this.today().year()%100+parseInt(h,10);for(var o=g.dayNamesShort||this.local.dayNamesShort,t=g.dayNames||this.local.dayNames,i=g.parseMonth||this.local.parseMonth,n=g.monthNumbers||this.local.monthNumbers,r=g.monthNamesShort||this.local.monthNamesShort,s=g.monthNames||this.local.monthNames,l=-1,u=-1,d=-1,c=-1,w=-1,m=!1,f=!1,x=function(O,X){for(var D=1;C+D<a.length&&a.charAt(C+D)===O;)D++;return C+=D-1,Math.floor(D/(X||1))>1},y=function(O,X){var D=x(O,X),V=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(O)+1],j=new RegExp("^-?\\d{1,"+V+"}"),B=_.substring(k).match(j);if(!B)throw(b.local.missingNumberAt||b.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=B[0].length,parseInt(B[0],10)},v=this,M=function(){if(typeof n=="function"){x("m");var O=n.call(v,_.substring(k));return k+=O.length,O}return y("m")},p=function(O,X,D,V){for(var j=x(O,V)?D:X,B=0;B<j.length;B++)if(_.substr(k,j[B].length).toLowerCase()===j[B].toLowerCase())return k+=j[B].length,B+v.minMonth;throw(b.local.unknownNameAt||b.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},S=function(){if(typeof s=="function"){var O=x("M")?s.call(v,_.substring(k)):r.call(v,_.substring(k));return k+=O.length,O}return p("M",r,s)},A=function(){if(_.charAt(k)!==a.charAt(C))throw(b.local.unexpectedLiteralAt||b.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,C=0;C<a.length;C++)if(f)a.charAt(C)!=="'"||x("'")?A():f=!1;else switch(a.charAt(C)){case"d":c=y("d");break;case"D":p("D",o,t);break;case"o":w=y("o");break;case"w":y("w");break;case"m":d=M();break;case"M":d=S();break;case"y":var P=C;m=!x("y",2),C=P,u=y("y",2);break;case"Y":u=y("Y",2);break;case"J":l=y("J")+.5,_.charAt(k)==="."&&(k++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=_.length;break;case"'":x("'")?A():f=!0;break;default:A()}if(k<_.length)throw b.local.unexpectedText||b.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&m&&(u+=h===-1?1900:this.today().year()-this.today().year()%100-(u<=h?0:100)),typeof d=="string"&&(d=i.call(this,u,d)),w>-1){d=1,c=w;for(var R=this.daysInMonth(u,d);c>R;R=this.daysInMonth(u,d))d++,c-=R}return l>-1?this.fromJD(l):this.newDate(u,d,c)},determineDate:function(a,_,g,h,o){g&&typeof g!="object"&&(o=h,h=g,g=null),typeof h!="string"&&(o=h,h="");var t=this;return _=_?_.newDate():null,a==null?_:typeof a=="string"?function(i){try{return t.parseDate(h,i,o)}catch{}for(var n=((i=i.toLowerCase()).match(/^c/)&&g?g.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=r.exec(i);s;)n.add(parseInt(s[1],10),s[2]||"d"),s=r.exec(i);return n}(a):typeof a=="number"?isNaN(a)||a===1/0||a===-1/0?_:t.today().add(a,"d"):t.newDate(a)}})},69862:function(){},40964:function(){},72077:function(F,L,e){var T=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],b=typeof globalThis>"u"?e.g:globalThis;F.exports=function(){for(var a=[],_=0;_<T.length;_++)typeof b[T[_]]=="function"&&(a[a.length]=T[_]);return a}},81684:function(F,L,e){function T(ye,Te,Ce){ye.prototype=Te.prototype=Ce,Ce.constructor=ye}function b(ye,Te){var Ce=Object.create(ye.prototype);for(var pe in Te)Ce[pe]=Te[pe];return Ce}function a(){}e.d(L,{sX:function(){return me},k4:function(){return ee}});var _=.7,g=1/_,h="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(h,",").concat(h,",").concat(h,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),s=new RegExp("^rgba\\(".concat(h,",").concat(h,",").concat(h,",").concat(o,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(o,"\\)$")),u=new RegExp("^hsl\\(".concat(o,",").concat(t,",").concat(t,"\\)$")),d=new RegExp("^hsla\\(".concat(o,",").concat(t,",").concat(t,",").concat(o,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function f(ye){var Te,Ce;return ye=(ye+"").trim().toLowerCase(),(Te=i.exec(ye))?(Ce=Te[1].length,Te=parseInt(Te[1],16),Ce===6?x(Te):Ce===3?new M(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):Ce===8?y(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):Ce===4?y(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=n.exec(ye))?new M(Te[1],Te[2],Te[3],1):(Te=r.exec(ye))?new M(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=s.exec(ye))?y(Te[1],Te[2],Te[3],Te[4]):(Te=l.exec(ye))?y(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=u.exec(ye))?P(Te[1],Te[2]/100,Te[3]/100,1):(Te=d.exec(ye))?P(Te[1],Te[2]/100,Te[3]/100,Te[4]):c.hasOwnProperty(ye)?x(c[ye]):ye==="transparent"?new M(NaN,NaN,NaN,0):null}function x(ye){return new M(ye>>16&255,ye>>8&255,255&ye,1)}function y(ye,Te,Ce,pe){return pe<=0&&(ye=Te=Ce=NaN),new M(ye,Te,Ce,pe)}function v(ye,Te,Ce,pe){return arguments.length===1?((fe=ye)instanceof a||(fe=f(fe)),fe?new M((fe=fe.rgb()).r,fe.g,fe.b,fe.opacity):new M):new M(ye,Te,Ce,pe??1);var fe}function M(ye,Te,Ce,pe){this.r=+ye,this.g=+Te,this.b=+Ce,this.opacity=+pe}function p(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function S(){var ye=A(this.opacity);return"".concat(ye===1?"rgb(":"rgba(").concat(k(this.r),", ").concat(k(this.g),", ").concat(k(this.b)).concat(ye===1?")":", ".concat(ye,")"))}function A(ye){return isNaN(ye)?1:Math.max(0,Math.min(1,ye))}function k(ye){return Math.max(0,Math.min(255,Math.round(ye)||0))}function C(ye){return((ye=k(ye))<16?"0":"")+ye.toString(16)}function P(ye,Te,Ce,pe){return pe<=0?ye=Te=Ce=NaN:Ce<=0||Ce>=1?ye=Te=NaN:Te<=0&&(ye=NaN),new O(ye,Te,Ce,pe)}function R(ye){if(ye instanceof O)return new O(ye.h,ye.s,ye.l,ye.opacity);if(ye instanceof a||(ye=f(ye)),!ye)return new O;if(ye instanceof O)return ye;var Te=(ye=ye.rgb()).r/255,Ce=ye.g/255,pe=ye.b/255,fe=Math.min(Te,Ce,pe),Oe=Math.max(Te,Ce,pe),Se=NaN,Me=Oe-fe,ue=(Oe+fe)/2;return Me?(Se=Te===Oe?(Ce-pe)/Me+6*(Ce<pe):Ce===Oe?(pe-Te)/Me+2:(Te-Ce)/Me+4,Me/=ue<.5?Oe+fe:2-Oe-fe,Se*=60):Me=ue>0&&ue<1?0:Se,new O(Se,Me,ue,ye.opacity)}function O(ye,Te,Ce,pe){this.h=+ye,this.s=+Te,this.l=+Ce,this.opacity=+pe}function X(ye){return(ye=(ye||0)%360)<0?ye+360:ye}function D(ye){return Math.max(0,Math.min(1,ye||0))}function V(ye,Te,Ce){return 255*(ye<60?Te+(Ce-Te)*ye/60:ye<180?Ce:ye<240?Te+(Ce-Te)*(240-ye)/60:Te)}T(a,f,{copy:function(ye){return Object.assign(new this.constructor,this,ye)},displayable:function(){return this.rgb().displayable()},hex:w,formatHex:w,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return R(this).formatHsl()},formatRgb:m,toString:m}),T(M,v,b(a,{brighter:function(ye){return ye=ye==null?g:Math.pow(g,ye),new M(this.r*ye,this.g*ye,this.b*ye,this.opacity)},darker:function(ye){return ye=ye==null?_:Math.pow(_,ye),new M(this.r*ye,this.g*ye,this.b*ye,this.opacity)},rgb:function(){return this},clamp:function(){return new M(k(this.r),k(this.g),k(this.b),A(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p,formatHex:p,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),T(O,function(ye,Te,Ce,pe){return arguments.length===1?R(ye):new O(ye,Te,Ce,pe??1)},b(a,{brighter:function(ye){return ye=ye==null?g:Math.pow(g,ye),new O(this.h,this.s,this.l*ye,this.opacity)},darker:function(ye){return ye=ye==null?_:Math.pow(_,ye),new O(this.h,this.s,this.l*ye,this.opacity)},rgb:function(){var ye=this.h%360+360*(this.h<0),Te=isNaN(ye)||isNaN(this.s)?0:this.s,Ce=this.l,pe=Ce+(Ce<.5?Ce:1-Ce)*Te,fe=2*Ce-pe;return new M(V(ye>=240?ye-240:ye+120,fe,pe),V(ye,fe,pe),V(ye<120?ye+240:ye-120,fe,pe),this.opacity)},clamp:function(){return new O(X(this.h),D(this.s),D(this.l),A(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ye=A(this.opacity);return"".concat(ye===1?"hsl(":"hsla(").concat(X(this.h),", ").concat(100*D(this.s),"%, ").concat(100*D(this.l),"%").concat(ye===1?")":", ".concat(ye,")"))}}));var j=function(ye){return function(){return ye}};function B(ye,Te){var Ce=Te-ye;return Ce?function(pe,fe){return function(Oe){return pe+Oe*fe}}(ye,Ce):j(isNaN(ye)?Te:ye)}var W=function ye(Te){var Ce=function(fe){return(fe=+fe)==1?B:function(Oe,Se){return Se-Oe?function(Me,ue,le){return Me=Math.pow(Me,le),ue=Math.pow(ue,le)-Me,le=1/le,function(ie){return Math.pow(Me+ie*ue,le)}}(Oe,Se,fe):j(isNaN(Oe)?Se:Oe)}}(Te);function pe(fe,Oe){var Se=Ce((fe=v(fe)).r,(Oe=v(Oe)).r),Me=Ce(fe.g,Oe.g),ue=Ce(fe.b,Oe.b),le=B(fe.opacity,Oe.opacity);return function(ie){return fe.r=Se(ie),fe.g=Me(ie),fe.b=ue(ie),fe.opacity=le(ie),fe+""}}return pe.gamma=ye,pe}(1);function q(ye,Te){var Ce,pe=Te?Te.length:0,fe=ye?Math.min(pe,ye.length):0,Oe=new Array(fe),Se=new Array(pe);for(Ce=0;Ce<fe;++Ce)Oe[Ce]=me(ye[Ce],Te[Ce]);for(;Ce<pe;++Ce)Se[Ce]=Te[Ce];return function(Me){for(Ce=0;Ce<fe;++Ce)Se[Ce]=Oe[Ce](Me);return Se}}function re(ye,Te){var Ce=new Date;return ye=+ye,Te=+Te,function(pe){return Ce.setTime(ye*(1-pe)+Te*pe),Ce}}function ee(ye,Te){return ye=+ye,Te=+Te,function(Ce){return ye*(1-Ce)+Te*Ce}}function K(ye){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},K(ye)}function Y(ye,Te){var Ce,pe={},fe={};for(Ce in ye!==null&&K(ye)==="object"||(ye={}),Te!==null&&K(Te)==="object"||(Te={}),Te)Ce in ye?pe[Ce]=me(ye[Ce],Te[Ce]):fe[Ce]=Te[Ce];return function(Oe){for(Ce in pe)fe[Ce]=pe[Ce](Oe);return fe}}var $=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp($.source,"g");function ae(ye,Te){var Ce,pe,fe,Oe=$.lastIndex=ne.lastIndex=0,Se=-1,Me=[],ue=[];for(ye+="",Te+="";(Ce=$.exec(ye))&&(pe=ne.exec(Te));)(fe=pe.index)>Oe&&(fe=Te.slice(Oe,fe),Me[Se]?Me[Se]+=fe:Me[++Se]=fe),(Ce=Ce[0])===(pe=pe[0])?Me[Se]?Me[Se]+=pe:Me[++Se]=pe:(Me[++Se]=null,ue.push({i:Se,x:ee(Ce,pe)})),Oe=ne.lastIndex;return Oe<Te.length&&(fe=Te.slice(Oe),Me[Se]?Me[Se]+=fe:Me[++Se]=fe),Me.length<2?ue[0]?function(le){return function(ie){return le(ie)+""}}(ue[0].x):function(le){return function(){return le}}(Te):(Te=ue.length,function(le){for(var ie,ge=0;ge<Te;++ge)Me[(ie=ue[ge]).i]=ie.x(le);return Me.join("")})}function se(ye,Te){Te||(Te=[]);var Ce,pe=ye?Math.min(Te.length,ye.length):0,fe=Te.slice();return function(Oe){for(Ce=0;Ce<pe;++Ce)fe[Ce]=ye[Ce]*(1-Oe)+Te[Ce]*Oe;return fe}}function ce(ye){return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},ce(ye)}function me(ye,Te){var Ce,pe,fe=ce(Te);return Te==null||fe==="boolean"?j(Te):(fe==="number"?ee:fe==="string"?(Ce=f(Te))?(Te=Ce,W):ae:Te instanceof f?W:Te instanceof Date?re:(pe=Te,!ArrayBuffer.isView(pe)||pe instanceof DataView?Array.isArray(Te)?q:typeof Te.valueOf!="function"&&typeof Te.toString!="function"||isNaN(Te)?Y:ee:se))(ye,Te)}},40402:function(F){F.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(F){F.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(F){F.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(F){F.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(F){F.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(F){F.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},ve={};function Ve(F){var L=ve[F];if(L!==void 0)return L.exports;var e=ve[F]={exports:{}};return J[F].call(e.exports,e,e.exports,Ve),e.exports}return Ve.n=function(F){var L=F&&F.__esModule?function(){return F.default}:function(){return F};return Ve.d(L,{a:L}),L},Ve.d=function(F,L){for(var e in L)Ve.o(L,e)&&!Ve.o(F,e)&&Object.defineProperty(F,e,{enumerable:!0,get:L[e]})},Ve.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ve.o=function(F,L){return Object.prototype.hasOwnProperty.call(F,L)},Ve.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},Ve(27909)}()})})(ay);var HT=ay.exports;const GT=VT(HT),l1=(be,I,J)=>{const ve={x:I.range,y:I.values,name:I.legend},Ve={width:J.w,height:J.h,margin:{l:40,r:20,b:20,t:20},showlegend:!0,legend:{xanchor:"right"}};GT.newPlot(be,[ve],Ve)};function u1(be,I,J){const ve=be.slice();return ve[1]=I[J],ve}function c1(be){let I,J,ve=be[1]+"",Ve,F;return{c(){I=Wr("div"),J=Vu("|> "),Ve=Vu(ve),F=ra()},m(L,e){gi(L,I,e),Xr(I,J),Xr(I,Ve),Xr(I,F)},p(L,e){e&1&&ve!==(ve=L[1]+"")&&sd(Ve,ve)},d(L){L&&fi(I)}}}function WT(be){let I,J=Ef(be[0].split(";")),ve=[];for(let Ve=0;Ve<J.length;Ve+=1)ve[Ve]=c1(u1(be,J,Ve));return{c(){I=Wr("div");for(let Ve=0;Ve<ve.length;Ve+=1)ve[Ve].c();bi(I,"id","console"),bi(I,"class","svelte-1pcxc0f")},m(Ve,F){gi(Ve,I,F);for(let L=0;L<ve.length;L+=1)ve[L]&&ve[L].m(I,null)},p(Ve,[F]){if(F&1){J=Ef(Ve[0].split(";"));let L;for(L=0;L<J.length;L+=1){const e=u1(Ve,J,L);ve[L]?ve[L].p(e,F):(ve[L]=c1(e),ve[L].c(),ve[L].m(I,null))}for(;L<ve.length;L+=1)ve[L].d(1);ve.length=J.length}},i:Ro,o:Ro,d(Ve){Ve&&fi(I),G0(ve,Ve)}}}function qT(be,I,J){let{error:ve=""}=I;return be.$$set=Ve=>{"error"in Ve&&J(0,ve=Ve.error)},[ve]}class XT extends Mc{constructor(I){super(),Tc(this,I,qT,WT,wc,{error:0})}}function YT(be){let I,J,ve,Ve,F,L,e;return{c(){I=Wr("h2"),I.textContent="Gui Selection",J=ra(),ve=Wr("select"),Ve=Wr("option"),Ve.textContent="Orbitales 3D",F=Wr("option"),F.textContent="Fonctions",Ve.__value="3dwave",ys(Ve,Ve.__value),F.__value="2dwave",ys(F,F.__value),bi(ve,"name","gui"),bi(ve,"id","gui_select"),be[0]===void 0&&Sf(()=>be[2].call(ve))},m(T,b){gi(T,I,b),gi(T,J,b),gi(T,ve,b),Xr(ve,Ve),Xr(ve,F),Af(ve,be[0],!0),L||(e=[_s(ve,"change",be[2]),_s(ve,"change",be[1])],L=!0)},p(T,[b]){b&1&&Af(ve,T[0])},i:Ro,o:Ro,d(T){T&&(fi(I),fi(J),fi(ve)),L=!1,Wu(e)}}}function ZT(be,I,J){let{gui_option:ve}=I;function Ve(L){Qx.call(this,be,L)}function F(){ve=W0(this),J(0,ve)}return be.$$set=L=>{"gui_option"in L&&J(0,ve=L.gui_option)},[ve,Ve,F]}class KT extends Mc{constructor(I){super(),Tc(this,I,ZT,YT,wc,{gui_option:0})}}function JT(be){let I,J,ve;return{c(){I=Wr("h2"),I.textContent="Docs",J=ra(),ve=Wr("a"),ve.textContent="User-side documentation",bi(ve,"href","https://github.com/gantover/hydrogen/blob/main/README.md")},m(Ve,F){gi(Ve,I,F),gi(Ve,J,F),gi(Ve,ve,F)},p:Ro,i:Ro,o:Ro,d(Ve){Ve&&(fi(I),fi(J),fi(ve))}}}class $T extends Mc{constructor(I){super(),Tc(this,I,null,JT,wc,{})}}function f1(be,I,J){const ve=be.slice();return ve[8]=I[J],ve[9]=I,ve[10]=J,ve}function h1(be){let I,J,ve=be[8].toUpperCase()+"",Ve,F,L,e,T,b,a;function _(){be[4].call(e,be[8])}return{c(){I=Wr("tr"),J=Wr("th"),Ve=Vu(ve),F=ra(),L=Wr("th"),e=Wr("input"),T=ra(),bi(e,"type","number")},m(g,h){gi(g,I,h),Xr(I,J),Xr(J,Ve),Xr(I,F),Xr(I,L),Xr(L,e),ys(e,be[1][be[8]]),Xr(I,T),b||(a=_s(e,"input",_),b=!0)},p(g,h){be=g,h&2&&ve!==(ve=be[8].toUpperCase()+"")&&sd(Ve,ve),h&2&&Oh(e.value)!==be[1][be[8]]&&ys(e,be[1][be[8]])},d(g){g&&fi(I),b=!1,a()}}}function QT(be){let I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i,n,r,s=Ef(Object.keys(be[1])),l=[];for(let u=0;u<s.length;u+=1)l[u]=h1(f1(be,s,u));return{c(){I=Wr("h2"),I.textContent="Quantum Parameters",J=ra(),ve=Wr("table");for(let u=0;u<l.length;u+=1)l[u].c();Ve=ra(),F=Wr("select"),L=Wr("option"),L.textContent="modulus",e=Wr("option"),e.textContent="density",T=ra(),b=Wr("div"),a=Wr("input"),_=ra(),g=Wr("label"),h=Vu("Precision: "),o=Vu(be[2]),t=ra(),i=Wr("button"),i.textContent="Apply",L.__value="modulus",ys(L,L.__value),e.__value="density",ys(e,e.__value),bi(F,"name","wave_type"),bi(F,"id","select_wave_type"),be[0]===void 0&&Sf(()=>be[5].call(F)),bi(a,"type","range"),bi(a,"step","5"),bi(a,"min","50"),bi(a,"max","200"),bi(a,"name","precision"),bi(g,"for","precision")},m(u,d){gi(u,I,d),gi(u,J,d),gi(u,ve,d);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(ve,null);gi(u,Ve,d),gi(u,F,d),Xr(F,L),Xr(F,e),Af(F,be[0],!0),gi(u,T,d),gi(u,b,d),Xr(b,a),ys(a,be[2]),Xr(b,_),Xr(b,g),Xr(g,h),Xr(g,o),gi(u,t,d),gi(u,i,d),n||(r=[_s(F,"change",be[5]),_s(a,"change",be[6]),_s(a,"input",be[6]),_s(i,"click",be[7])],n=!0)},p(u,[d]){if(d&2){s=Ef(Object.keys(u[1]));let c;for(c=0;c<s.length;c+=1){const w=f1(u,s,c);l[c]?l[c].p(w,d):(l[c]=h1(w),l[c].c(),l[c].m(ve,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=s.length}d&1&&Af(F,u[0]),d&4&&ys(a,u[2]),d&4&&sd(o,u[2])},i:Ro,o:Ro,d(u){u&&(fi(I),fi(J),fi(ve),fi(Ve),fi(F),fi(T),fi(b),fi(t),fi(i)),G0(l,u),n=!1,Wu(r)}}}function eM(be,I,J){const ve=_1();let{wave_type:Ve="modulus"}=I,F={n:3,l:2,m:-1},L=100;function e(_){F[_]=Oh(this.value),J(1,F)}function T(){Ve=W0(this),J(0,Ve)}function b(){L=Oh(this.value),J(2,L)}const a=()=>{ve("send_quantum_numbers",{qn:F,wave_type:Ve,precision:L})};return be.$$set=_=>{"wave_type"in _&&J(0,Ve=_.wave_type)},[Ve,F,L,ve,e,T,b,a]}class tM extends Mc{constructor(I){super(),Tc(this,I,eM,QT,wc,{wave_type:0})}}function p1(be,I,J){const ve=be.slice();return ve[15]=I[J],ve[16]=I,ve[17]=J,ve}function d1(be){let I,J,ve,Ve,F,L,e=be[15].val+"",T,b,a,_,g,h,o;function t(...r){return be[10](be[17],...r)}function i(){be[11].call(ve,be[16],be[17])}function n(){return be[12](be[17])}return{c(){I=Wr("tr"),J=Wr("th"),ve=Wr("input"),Ve=ra(),F=Wr("th"),L=Wr("p"),T=Vu(e),b=ra(),a=Wr("th"),_=Wr("button"),_.textContent="x",g=ra(),bi(ve,"type","checkbox"),bi(L,"class","iso_value"),bi(_,"class","remove_iso_value")},m(r,s){gi(r,I,s),Xr(I,J),Xr(J,ve),ve.checked=be[15].visible,Xr(I,Ve),Xr(I,F),Xr(F,L),Xr(L,T),Xr(I,b),Xr(I,a),Xr(a,_),Xr(I,g),h||(o=[_s(ve,"click",t),_s(ve,"change",i),_s(_,"click",n)],h=!0)},p(r,s){be=r,s&1&&(ve.checked=be[15].visible),s&1&&e!==(e=be[15].val+"")&&sd(T,e)},d(r){r&&fi(I),h=!1,Wu(o)}}}function nM(be){let I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i,n,r,s,l,u=Ef(be[0]),d=[];for(let c=0;c<u.length;c+=1)d[c]=d1(p1(be,u,c));return{c(){I=Wr("h2"),I.textContent="Isovalues",J=ra(),ve=Wr("input"),F=ra(),L=Wr("select"),e=Wr("option"),e.textContent="full",T=Wr("option"),T.textContent="cut-full",b=Wr("option"),b.textContent="see-through",a=Wr("option"),a.textContent="cut-see-through",_=ra(),g=Wr("label"),h=Wr("input"),o=Vu(`
  Wireframe`),t=ra(),i=Wr("button"),i.textContent="Add",n=ra(),r=Wr("table");for(let c=0;c<d.length;c+=1)d[c].c();bi(ve,"type","number"),bi(ve,"step",Ve=be[1]/10),e.__value="full",ys(e,e.__value),T.__value="cut_full",ys(T,T.__value),b.__value="see_through",ys(b,b.__value),a.__value="cut_see_through",ys(a,a.__value),bi(L,"name","material_type"),bi(L,"id","select_material_type"),be[2]===void 0&&Sf(()=>be[8].call(L)),bi(h,"type","checkbox")},m(c,w){gi(c,I,w),gi(c,J,w),gi(c,ve,w),ys(ve,be[1]),gi(c,F,w),gi(c,L,w),Xr(L,e),Xr(L,T),Xr(L,b),Xr(L,a),Af(L,be[2],!0),gi(c,_,w),gi(c,g,w),Xr(g,h),h.checked=be[3],Xr(g,o),gi(c,t,w),gi(c,i,w),gi(c,n,w),gi(c,r,w);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(r,null);s||(l=[_s(ve,"input",be[7]),_s(L,"change",be[8]),_s(h,"change",be[9]),_s(i,"click",be[4])],s=!0)},p(c,[w]){if(w&2&&Ve!==(Ve=c[1]/10)&&bi(ve,"step",Ve),w&2&&Oh(ve.value)!==c[1]&&ys(ve,c[1]),w&4&&Af(L,c[2]),w&8&&(h.checked=c[3]),w&97){u=Ef(c[0]);let m;for(m=0;m<u.length;m+=1){const f=p1(c,u,m);d[m]?d[m].p(f,w):(d[m]=d1(f),d[m].c(),d[m].m(r,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}},i:Ro,o:Ro,d(c){c&&(fi(I),fi(J),fi(ve),fi(F),fi(L),fi(_),fi(g),fi(t),fi(i),fi(n),fi(r)),G0(d,c),s=!1,Wu(l)}}}function rM(be,I,J){const ve=_1();let Ve,{iso_values:F=[]}=I,{new_iso_value:L}=I,e=!1;function T(){J(0,F=[...F,{visible:!0,val:L}]),ve("send_iso_value",{iso_value:L,material_type:Ve,wireframe:e})}function b(n){F.splice(n,1),J(0,F),ve("send_rm_iso_value",{index:n})}function a(n,r){J(0,F[r].visible=n.target.checked,F),ve("send_visibility_layer",{index:r,state:n.target.checked})}function _(){L=Oh(this.value),J(1,L)}function g(){Ve=W0(this),J(2,Ve)}function h(){e=this.checked,J(3,e)}const o=(n,r)=>a(r,n);function t(n,r){n[r].visible=this.checked,J(0,F)}const i=n=>b(n);return be.$$set=n=>{"iso_values"in n&&J(0,F=n.iso_values),"new_iso_value"in n&&J(1,L=n.new_iso_value)},[F,L,Ve,e,T,b,a,_,g,h,o,t,i]}class iM extends Mc{constructor(I){super(),Tc(this,I,rM,nM,wc,{iso_values:0,new_iso_value:1})}}function aM(be){let I,J,ve,Ve,F,L,e,T,b;return{c(){I=Wr("div"),J=Wr("canvas"),Ve=ra(),F=Wr("div"),L=Wr("div"),e=ra(),T=Wr("div"),bi(I,"id","draw_box"),bi(I,"class",ve=Lp(be[5]!=="3dwave"?"none":"")+" svelte-1r16dig"),bi(L,"id","plot_radial"),bi(T,"id","plot_angular"),bi(F,"id","plots_box"),bi(F,"class",b=Lp(be[5]!=="2dwave"?"none":"")+" svelte-1r16dig")},m(a,_){gi(a,I,_),Xr(I,J),be[6](J),be[7](I),gi(a,Ve,_),gi(a,F,_),Xr(F,L),be[8](L),Xr(F,e),Xr(F,T),be[9](T),be[10](F)},p(a,[_]){_&32&&ve!==(ve=Lp(a[5]!=="3dwave"?"none":"")+" svelte-1r16dig")&&bi(I,"class",ve),_&32&&b!==(b=Lp(a[5]!=="2dwave"?"none":"")+" svelte-1r16dig")&&bi(F,"class",b)},i:Ro,o:Ro,d(a){a&&(fi(I),fi(Ve),fi(F)),be[6](null),be[7](null),be[8](null),be[9](null),be[10](null)}}}function oM(be,I,J){let{draw_container:ve}=I,{draw_box:Ve}=I,{plots_container:F}=I,{plot_radial:L}=I,{plot_angular:e}=I,{gui_option:T}=I;function b(o){mo[o?"unshift":"push"](()=>{Ve=o,J(1,Ve)})}function a(o){mo[o?"unshift":"push"](()=>{ve=o,J(0,ve)})}function _(o){mo[o?"unshift":"push"](()=>{L=o,J(3,L)})}function g(o){mo[o?"unshift":"push"](()=>{e=o,J(4,e)})}function h(o){mo[o?"unshift":"push"](()=>{F=o,J(2,F)})}return be.$$set=o=>{"draw_container"in o&&J(0,ve=o.draw_container),"draw_box"in o&&J(1,Ve=o.draw_box),"plots_container"in o&&J(2,F=o.plots_container),"plot_radial"in o&&J(3,L=o.plot_radial),"plot_angular"in o&&J(4,e=o.plot_angular),"gui_option"in o&&J(5,T=o.gui_option)},[ve,Ve,F,L,e,T,b,a,_,g,h]}class sM extends Mc{constructor(I){super(),Tc(this,I,oM,aM,wc,{draw_container:0,draw_box:1,plots_container:2,plot_radial:3,plot_angular:4,gui_option:5})}}function lM(be){let I,J,ve,Ve,F,L,e,T,b,a,_,g,h,o,t,i,n,r,s,l,u,d,c,w,m,f;function x(V){be[13](V)}let y={};be[7]!==void 0&&(y.error=be[7]),F=new XT({props:y}),mo.push(()=>Vl(F,"error",x)),T=new tM({}),T.$on("send_quantum_numbers",be[14]);function v(V){be[15](V)}function M(V){be[16](V)}let p={};be[6]!==void 0&&(p.new_iso_value=be[6]),be[5]!==void 0&&(p.iso_values=be[5]),a=new iM({props:p}),mo.push(()=>Vl(a,"new_iso_value",v)),mo.push(()=>Vl(a,"iso_values",M)),a.$on("send_iso_value",be[17]),a.$on("send_rm_iso_value",be[18]),a.$on("send_visibility_layer",be[19]);function S(V){be[20](V)}let A={};be[8]!==void 0&&(A.gui_option=be[8]),o=new KT({props:A}),mo.push(()=>Vl(o,"gui_option",S)),o.$on("change",be[21]),n=new $T({});function k(V){be[22](V)}function C(V){be[23](V)}function P(V){be[24](V)}function R(V){be[25](V)}function O(V){be[26](V)}function X(V){be[27](V)}let D={};return be[1]!==void 0&&(D.draw_container=be[1]),be[0]!==void 0&&(D.draw_box=be[0]),be[2]!==void 0&&(D.plots_container=be[2]),be[3]!==void 0&&(D.plot_radial=be[3]),be[4]!==void 0&&(D.plot_angular=be[4]),be[8]!==void 0&&(D.gui_option=be[8]),s=new sM({props:D}),mo.push(()=>Vl(s,"draw_container",k)),mo.push(()=>Vl(s,"draw_box",C)),mo.push(()=>Vl(s,"plots_container",P)),mo.push(()=>Vl(s,"plot_radial",R)),mo.push(()=>Vl(s,"plot_angular",O)),mo.push(()=>Vl(s,"gui_option",X)),{c(){I=Wr("div"),I.innerHTML='<h1 class="rainbow"></h1> <h1>Hydrogen Wave Function</h1>',J=ra(),ve=Wr("div"),Ve=Wr("div"),$c(F.$$.fragment),e=ra(),$c(T.$$.fragment),b=ra(),$c(a.$$.fragment),h=ra(),$c(o.$$.fragment),i=ra(),$c(n.$$.fragment),r=ra(),$c(s.$$.fragment),bi(I,"class","title"),bi(Ve,"id","parameters"),bi(ve,"id","flex-container")},m(V,j){gi(V,I,j),gi(V,J,j),gi(V,ve,j),Xr(ve,Ve),cc(F,Ve,null),Xr(Ve,e),cc(T,Ve,null),Xr(Ve,b),cc(a,Ve,null),Xr(Ve,h),cc(o,Ve,null),Xr(Ve,i),cc(n,Ve,null),Xr(ve,r),cc(s,ve,null),f=!0},p(V,j){const B={};!L&&j[0]&128&&(L=!0,B.error=V[7],jl(()=>L=!1)),F.$set(B);const W={};!_&&j[0]&64&&(_=!0,W.new_iso_value=V[6],jl(()=>_=!1)),!g&&j[0]&32&&(g=!0,W.iso_values=V[5],jl(()=>g=!1)),a.$set(W);const q={};!t&&j[0]&256&&(t=!0,q.gui_option=V[8],jl(()=>t=!1)),o.$set(q);const re={};!l&&j[0]&2&&(l=!0,re.draw_container=V[1],jl(()=>l=!1)),!u&&j[0]&1&&(u=!0,re.draw_box=V[0],jl(()=>u=!1)),!d&&j[0]&4&&(d=!0,re.plots_container=V[2],jl(()=>d=!1)),!c&&j[0]&8&&(c=!0,re.plot_radial=V[3],jl(()=>c=!1)),!w&&j[0]&16&&(w=!0,re.plot_angular=V[4],jl(()=>w=!1)),!m&&j[0]&256&&(m=!0,re.gui_option=V[8],jl(()=>m=!1)),s.$set(re)},i(V){f||(uc(F.$$.fragment,V),uc(T.$$.fragment,V),uc(a.$$.fragment,V),uc(o.$$.fragment,V),uc(n.$$.fragment,V),uc(s.$$.fragment,V),f=!0)},o(V){Jc(F.$$.fragment,V),Jc(T.$$.fragment,V),Jc(a.$$.fragment,V),Jc(o.$$.fragment,V),Jc(n.$$.fragment,V),Jc(s.$$.fragment,V),f=!1},d(V){V&&(fi(I),fi(J),fi(ve)),fc(F),fc(T),fc(a),fc(o),fc(n),fc(s)}}}function uM(be,I,J){let{bindings:ve}=I,Ve,F,L,e,T,b,a,_,g=0,h,o="",t="3dwave",i=!1;var n;$x(()=>{FT(Ve),window.addEventListener("resize",()=>r(50))});function r(R){clearTimeout(n),n=setTimeout(()=>{switch(t){case"3dwave":zT(F);break;case"2dwave":u();break}},R)}function s(R){i=!1;let O=R.detail.qn,X;try{if(O.n+O.l>=20)throw new Error("Those numbers may be too large, try to avoid N + L >= 20");switch(X=new ve.Wave(O.n,O.l,O.m,1,R.detail.wave_type),b=X.radial.eval_range_values(),a=X.angulaire.eval_range_values(),J(6,g=b.avr*a.avr),h=new ve.MarchingCubes(X,b.dist*1.8,R.detail.precision,g),J(5,_=[{visible:!0,val:g}]),t){case"3dwave":s1(h,g,b.dist*1.5),i=!0;break;case"2dwave":u()}J(7,o="no error occured")}catch(D){J(7,o=D.toString())}finally{}}function l(){switch(t){case"3dwave":i||(s1(h,g,b.dist*1.5),i=!0),r(50);break;case"2dwave":u();break}}function u(){let R={w:L.clientWidth,h:L.clientHeight/2};l1(e,b,R),l1(T,a,R)}function d(R){o=R,J(7,o)}const c=R=>{s(R),r(50)};function w(R){g=R,J(6,g)}function m(R){_=R,J(5,_)}const f=R=>{NT(R.detail),r(50)},x=R=>{BT(R.detail.index),r(50)},y=R=>UT(R.detail.index,R.detail.state);function v(R){t=R,J(8,t)}const M=()=>l();function p(R){F=R,J(1,F)}function S(R){Ve=R,J(0,Ve)}function A(R){L=R,J(2,L)}function k(R){e=R,J(3,e)}function C(R){T=R,J(4,T)}function P(R){t=R,J(8,t)}return be.$$set=R=>{"bindings"in R&&J(12,ve=R.bindings)},[Ve,F,L,e,T,_,g,o,t,r,s,l,ve,d,c,w,m,f,x,y,v,M,p,S,A,k,C,P]}class cM extends Mc{constructor(I){super(),Tc(this,I,uM,lM,wc,{bindings:12},null,[-1,-1])}}let dr;const oy=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&oy.decode();let Mh=null;function ed(){return(Mh===null||Mh.byteLength===0)&&(Mh=new Uint8Array(dr.memory.buffer)),Mh}function H0(be,I){return be=be>>>0,oy.decode(ed().subarray(be,be+I))}const du=new Array(128).fill(void 0);du.push(void 0,null,!0,!1);let Ih=du.length;function fM(be){Ih===du.length&&du.push(du.length+1);const I=Ih;return Ih=du[I],du[I]=be,I}function Of(be,I){if(!(be instanceof I))throw new Error(`expected instance of ${I.name}`);return be.ptr}let Po=0;const td=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},hM=typeof td.encodeInto=="function"?function(be,I){return td.encodeInto(be,I)}:function(be,I){const J=td.encode(be);return I.set(J),{read:be.length,written:J.length}};function Vh(be,I,J){if(J===void 0){const e=td.encode(be),T=I(e.length,1)>>>0;return ed().subarray(T,T+e.length).set(e),Po=e.length,T}let ve=be.length,Ve=I(ve,1)>>>0;const F=ed();let L=0;for(;L<ve;L++){const e=be.charCodeAt(L);if(e>127)break;F[Ve+L]=e}if(L!==ve){L!==0&&(be=be.slice(L)),Ve=J(Ve,ve,ve=L+be.length*3,1)>>>0;const e=ed().subarray(Ve+L,Ve+ve),T=hM(be,e);L+=T.written}return Po=L,Ve}let Ah=null;function go(){return(Ah===null||Ah.byteLength===0)&&(Ah=new Int32Array(dr.memory.buffer)),Ah}let Sh=null;function sy(){return(Sh===null||Sh.byteLength===0)&&(Sh=new Float64Array(dr.memory.buffer)),Sh}function m1(be,I){return be=be>>>0,sy().subarray(be/8,be/8+I)}function g1(be,I){const J=I(be.length*8,8)>>>0;return sy().set(be,J/8),Po=be.length,J}function pM(be){return du[be]}function dM(be){be<132||(du[be]=Ih,Ih=be)}function mM(be){const I=pM(be);return dM(be),I}let Eh=null;function ly(){return(Eh===null||Eh.byteLength===0)&&(Eh=new Float32Array(dr.memory.buffer)),Eh}function P0(be,I){return be=be>>>0,ly().subarray(be/4,be/4+I)}function R0(be,I){const J=I(be.length*4,4)>>>0;return ly().set(be,J/4),Po=be.length,J}let kh=null;function uy(){return(kh===null||kh.byteLength===0)&&(kh=new Uint32Array(dr.memory.buffer)),kh}function gM(be,I){return be=be>>>0,uy().subarray(be/4,be/4+I)}function vM(be,I){const J=I(be.length*4,4)>>>0;return uy().set(be,J/4),Po=be.length,J}class Df{static __wrap(I){I=I>>>0;const J=Object.create(Df.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_angulaire_free(I)}get poly(){const I=dr.__wbg_get_angulaire_poly(this.__wbg_ptr);return zf.__wrap(I)}set poly(I){Of(I,zf);var J=I.__destroy_into_raw();dr.__wbg_set_angulaire_poly(this.__wbg_ptr,J)}constructor(I,J,ve){const Ve=Vh(ve,dr.__wbindgen_malloc,dr.__wbindgen_realloc),F=Po,L=dr.angulaire_new(I,J,Ve,F);return Df.__wrap(L)}eval_range_values(){const I=dr.angulaire_eval_range_values(this.__wbg_ptr);return Hh.__wrap(I)}eval_sign(I){return dr.angulaire_eval_sign(this.__wbg_ptr,I)}}class Hh{static __wrap(I){I=I>>>0;const J=Object.create(Hh.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_evalres_free(I)}get range(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_evalres_range(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=m1(I,J).slice();return dr.__wbindgen_free(I,J*8),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set range(I){const J=g1(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_evalres_range(this.__wbg_ptr,J,ve)}get values(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_evalres_values(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=m1(I,J).slice();return dr.__wbindgen_free(I,J*8),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set values(I){const J=g1(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_evalres_values(this.__wbg_ptr,J,ve)}get avr(){return dr.__wbg_get_evalres_avr(this.__wbg_ptr)}set avr(I){dr.__wbg_set_evalres_avr(this.__wbg_ptr,I)}get dist(){return dr.__wbg_get_evalres_dist(this.__wbg_ptr)}set dist(I){dr.__wbg_set_evalres_dist(this.__wbg_ptr,I)}get legend(){let I,J;try{const F=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_evalres_legend(F,this.__wbg_ptr);var ve=go()[F/4+0],Ve=go()[F/4+1];return I=ve,J=Ve,H0(ve,Ve)}finally{dr.__wbindgen_add_to_stack_pointer(16),dr.__wbindgen_free(I,J,1)}}set legend(I){const J=Vh(I,dr.__wbindgen_malloc,dr.__wbindgen_realloc),ve=Po;dr.__wbg_set_evalres_legend(this.__wbg_ptr,J,ve)}}class zf{static __wrap(I){I=I>>>0;const J=Object.create(zf.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_functionlegendre_free(I)}get poly(){const I=dr.__wbg_get_functionlegendre_poly(this.__wbg_ptr);return Nf.__wrap(I)}set poly(I){Of(I,Nf);var J=I.__destroy_into_raw();dr.__wbg_set_functionlegendre_poly(this.__wbg_ptr,J)}constructor(I,J){const ve=dr.functionlegendre_new(I,J);return zf.__wrap(ve)}eval(I){return dr.functionlegendre_eval(this.__wbg_ptr,I)}eval_sign(I){return dr.angulaire_eval_sign(this.__wbg_ptr,I)}}class od{static __wrap(I){I=I>>>0;const J=Object.create(od.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_marchingcubes_free(I)}constructor(I,J,ve,Ve){Of(I,Nh);var F=I.__destroy_into_raw();const L=dr.marchingcubes_new(F,J,ve,Ve);return od.__wrap(L)}get_res(I,J){const ve=Vh(J,dr.__wbindgen_malloc,dr.__wbindgen_realloc),Ve=Po,F=dr.marchingcubes_get_res(this.__wbg_ptr,I,ve,Ve);return fd.__wrap(F)}}class fd{static __wrap(I){I=I>>>0;const J=Object.create(fd.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_marchingcubesresult_free(I)}get vertices(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_marchingcubesresult_vertices(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=P0(I,J).slice();return dr.__wbindgen_free(I,J*4),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set vertices(I){const J=R0(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_marchingcubesresult_vertices(this.__wbg_ptr,J,ve)}get indices(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_marchingcubesresult_indices(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=gM(I,J).slice();return dr.__wbindgen_free(I,J*4),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set indices(I){const J=vM(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_marchingcubesresult_indices(this.__wbg_ptr,J,ve)}get normals(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_marchingcubesresult_normals(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=P0(I,J).slice();return dr.__wbindgen_free(I,J*4),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set normals(I){const J=R0(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_marchingcubesresult_normals(this.__wbg_ptr,J,ve)}get colors(){try{const Ve=dr.__wbindgen_add_to_stack_pointer(-16);dr.__wbg_get_marchingcubesresult_colors(Ve,this.__wbg_ptr);var I=go()[Ve/4+0],J=go()[Ve/4+1],ve=P0(I,J).slice();return dr.__wbindgen_free(I,J*4),ve}finally{dr.__wbindgen_add_to_stack_pointer(16)}}set colors(I){const J=R0(I,dr.__wbindgen_malloc),ve=Po;dr.__wbg_set_marchingcubesresult_colors(this.__wbg_ptr,J,ve)}}class Ff{static __wrap(I){I=I>>>0;const J=Object.create(Ff.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_polylaguerregen_free(I)}constructor(I,J){const ve=dr.polylaguerregen_new(I,J);return Ff.__wrap(ve)}eval(I){return dr.polylaguerregen_eval(this.__wbg_ptr,I)}}class Nf{static __wrap(I){I=I>>>0;const J=Object.create(Nf.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_polylegendre_free(I)}constructor(I){const J=dr.polylegendre_new(I);return Nf.__wrap(J)}apply_derivative(){dr.polylegendre_apply_derivative(this.__wbg_ptr)}apply_derivatives(I){dr.polylegendre_apply_derivatives(this.__wbg_ptr,I)}eval_poly_old(I){return dr.polylegendre_eval_poly(this.__wbg_ptr,I)}eval_poly(I){return dr.polylegendre_eval_poly(this.__wbg_ptr,I)}eval(I){return dr.polylegendre_eval(this.__wbg_ptr,I)}eval_sign(I){return dr.polylegendre_eval_sign(this.__wbg_ptr,I)}}class Bf{static __wrap(I){I=I>>>0;const J=Object.create(Bf.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_radial_free(I)}get poly(){const I=dr.__wbg_get_radial_poly(this.__wbg_ptr);return Ff.__wrap(I)}set poly(I){Of(I,Ff);var J=I.__destroy_into_raw();dr.__wbg_set_radial_poly(this.__wbg_ptr,J)}constructor(I,J,ve,Ve){const F=Vh(Ve,dr.__wbindgen_malloc,dr.__wbindgen_realloc),L=Po,e=dr.radial_new(I,J,ve,F,L);return Bf.__wrap(e)}eval_range_values(){const I=dr.radial_eval_range_values(this.__wbg_ptr);return Hh.__wrap(I)}eval_sign(I){return dr.radial_eval_sign(this.__wbg_ptr,I)}}class Nh{static __wrap(I){I=I>>>0;const J=Object.create(Nh.prototype);return J.__wbg_ptr=I,J}__destroy_into_raw(){const I=this.__wbg_ptr;return this.__wbg_ptr=0,I}free(){const I=this.__destroy_into_raw();dr.__wbg_wave_free(I)}get angulaire(){const I=dr.__wbg_get_wave_angulaire(this.__wbg_ptr);return Df.__wrap(I)}set angulaire(I){Of(I,Df);var J=I.__destroy_into_raw();dr.__wbg_set_wave_angulaire(this.__wbg_ptr,J)}get radial(){const I=dr.__wbg_get_wave_radial(this.__wbg_ptr);return Bf.__wrap(I)}set radial(I){Of(I,Bf);var J=I.__destroy_into_raw();dr.__wbg_set_wave_radial(this.__wbg_ptr,J)}constructor(I,J,ve,Ve,F){try{const b=dr.__wbindgen_add_to_stack_pointer(-16),a=Vh(F,dr.__wbindgen_malloc,dr.__wbindgen_realloc),_=Po;dr.wave_new(b,I,J,ve,Ve,a,_);var L=go()[b/4+0],e=go()[b/4+1],T=go()[b/4+2];if(T)throw mM(e);return Nh.__wrap(L)}finally{dr.__wbindgen_add_to_stack_pointer(16)}}eval(I,J,ve){return dr.wave_eval(this.__wbg_ptr,I,J,ve)}eval_sign(I,J){return dr.wave_eval_sign(this.__wbg_ptr,I,J)}}async function yM(be,I){if(typeof Response=="function"&&be instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(be,I)}catch(ve){if(be.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",ve);else throw ve}const J=await be.arrayBuffer();return await WebAssembly.instantiate(J,I)}else{const J=await WebAssembly.instantiate(be,I);return J instanceof WebAssembly.Instance?{instance:J,module:be}:J}}function cy(){const be={};return be.wbg={},be.wbg.__wbindgen_string_new=function(I,J){const ve=H0(I,J);return fM(ve)},be.wbg.__wbindgen_throw=function(I,J){throw new Error(H0(I,J))},be}function fy(be,I){return dr=be.exports,tm.__wbindgen_wasm_module=I,Eh=null,Sh=null,Ah=null,kh=null,Mh=null,dr}function xM(be){if(dr!==void 0)return dr;const I=cy();be instanceof WebAssembly.Module||(be=new WebAssembly.Module(be));const J=new WebAssembly.Instance(be,I);return fy(J,be)}async function tm(be){if(dr!==void 0)return dr;const I=cy();(typeof be=="string"||typeof Request=="function"&&be instanceof Request||typeof URL=="function"&&be instanceof URL)&&(be=fetch(be));const{instance:J,module:ve}=await yM(await be,I);return fy(J,ve)}const _M=Object.freeze(Object.defineProperty({__proto__:null,Angulaire:Df,EvalRes:Hh,FunctionLegendre:zf,MarchingCubes:od,MarchingCubesResult:fd,PolyLaguerreGen:Ff,PolyLegendre:Nf,Radial:Bf,Wave:Nh,default:tm,initSync:xM},Symbol.toStringTag,{value:"Module"})),bM=async(be={})=>{let{importHook:I,serverPath:J}=be,ve="assets/rust_lib-88e31b56.wasm";return J!=null&&(ve=J+/[^\/\\]*$/.exec(ve)[0]),I!=null&&(ve=I(ve)),await tm(ve),_M},wM=async()=>{const be=await bM();new cM({target:document.body,props:{bindings:be}})};wM();
